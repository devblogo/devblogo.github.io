<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Spring Boot,">





  <link rel="alternate" href="atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta name="description" content="&amp;#x4F5C;&amp;#x8005;&amp;#xFF1A;&amp;#x5415;&amp;#x4E00;&amp;#x660E; &amp;#x5173;&amp;#x6CE8;&amp;#x516C;&amp;#x4F17;&amp;#x53F7;&amp;#xFF1A;MarkerHub&amp;#xFF0C;&amp;#x56DE;&amp;#x590D;&amp;#x3010;vueblog&amp;#x3011;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;&amp;#x9879;&amp;#x76EE;&amp;#x6E9">
<meta name="keywords" content="Spring Boot">
<meta property="og:type" content="article">
<meta property="og:title" content="超详细！4小时开发一个SpringBoot+vue前后端分离">
<meta property="og:url" content="https://dev.newban.cn/6844903823966732302.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:description" content="&amp;#x4F5C;&amp;#x8005;&amp;#xFF1A;&amp;#x5415;&amp;#x4E00;&amp;#x660E; &amp;#x5173;&amp;#x6CE8;&amp;#x516C;&amp;#x4F17;&amp;#x53F7;&amp;#xFF1A;MarkerHub&amp;#xFF0C;&amp;#x56DE;&amp;#x590D;&amp;#x3010;vueblog&amp;#x3011;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;&amp;#x9879;&amp;#x76EE;&amp;#x6E9">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6f0be355af6889ae96469d511743257550a58926d23819feafa4785843ce326f">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b0ee4f807c04e3e5913d3188171936801c95ccfc11b418b78abc691398c41bdc">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/4e0a6a56101b422f0b30c2415ab9d200af8874c58c4b4cca4efe884f8d0a340f">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/60f221cebe11c0c8c36b6297c141f738ea7675b6ef439ccbb43aab7f10e89fd8">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/892621106f0097810764334a0b3739436ce5b9607b8b6715ec2d6f14d3574b98">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/ddedd6ff5418ec3d84a2b073dc65eb2bda17916a97bfc330b9900249c1e2c3ba">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/23d5cb36dbc3d30f33f532812d1a31c78cfc225703a639444871f66fc4f2c609">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/878146d4986c100f3f1389121ea153fc51440c06fc669f7bf723720840643409">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/773856b6be76b4cc1b98e60868adc86fb5c037a7126091260501071c27caddb1">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/14720e97000f5f8cc0804f4e2356080664240219cf7e5adc0179c202a1617a61">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/c84534f3b30b9703628fe5dce12b4b9dc2b64ed0e515d7114f6d00de2282ac81">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/08c2677c22c0de831c7cccd7bb974cfab0ffc2a9d83bdb3f2fb008047b03975b">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/1a68568ca84e8d700f82649bdfc6da2aee13397b00188251c35492e7410cc703">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d8427997ddf541a7279c50c809016a094689cecc76f7275967b65f3b14405791">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/8da5278a36e2e66d661865a1f55184009d7b73c1a790cbaf660425887d908166">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/8f695f47a15fbb1f2326ee48b75d05aa92b51d16c3cfebec4ad838a37e46c54d">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d0d745cde09e489eaee96f24e163f95b2a044ca3d4b83c21bb3f52aaa22bae65">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6e82ce8fcd9d3618cd4dafe6a61b2c5282ebcc0c93f62f132b74a43583cea107">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/be6f616fef7e4b80c7b1ca8ac9a3ce629d96f6a5ce5127dd7bb286315de01e7a">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/4b4c411e131bba566737bde0f840d5672c4dd4658e3894b196a120e3132afe5d">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/76f24d1535dd48e55fd6bd91e97a2df030a3e049d9116ebd339c751f3a0a980d">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/0789e7d9e712bb66575fbc016a24b36b618f705a94a7f09750fa3ed01be150cc">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/06e232edb5c4c879c53ffd92e6a60d6997e1753bed91247cfd1acc320dfc74bb">
<meta property="og:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6f0be355af6889ae96469d511743257550a58926d23819feafa4785843ce326f">
<meta property="og:updated_time" content="2024-04-30T13:26:28.155Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="超详细！4小时开发一个SpringBoot+vue前后端分离">
<meta name="twitter:description" content="&amp;#x4F5C;&amp;#x8005;&amp;#xFF1A;&amp;#x5415;&amp;#x4E00;&amp;#x660E; &amp;#x5173;&amp;#x6CE8;&amp;#x516C;&amp;#x4F17;&amp;#x53F7;&amp;#xFF1A;MarkerHub&amp;#xFF0C;&amp;#x56DE;&amp;#x590D;&amp;#x3010;vueblog&amp;#x3011;&amp;#xFF0C;&amp;#x83B7;&amp;#x53D6;&amp;#x9879;&amp;#x76EE;&amp;#x6E9">
<meta name="twitter:image" content="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6f0be355af6889ae96469d511743257550a58926d23819feafa4785843ce326f">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/6844903823966732302.html">





  <title>超详细！4小时开发一个SpringBoot+vue前后端分离 | 开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">超详细！4小时开发一个SpringBoot+vue前后端分离</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-28T22:39:13+08:00">
                2020-05-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>&#x4F5C;&#x8005;&#xFF1A;&#x5415;&#x4E00;&#x660E;</p>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;</p>
<p>&#x9879;&#x76EE;&#x89C6;&#x9891;&#xFF1A;<a href="/external_links/ee2628e8e383ef57188cf91d88acc4cf.html" target="blank" rel="noopener">www.bilibili.com/video/BV1PQ&#x2026;</a></p>
<p>&#x9879;&#x76EE;&#x6F14;&#x793A;&#xFF1A;<a href="/external_links/4c99831947cc615064c28724cb12bc93.html" target="blank" rel="noopener">www.markerhub.com:8084/blogs</a></p>
<p>&#x8F6C;&#x8F7D;&#x8BF7;&#x4FDD;&#x7559;&#x6B64;&#x5F15;&#x7528;&#xFF0C;&#x611F;&#x8C22;&#xFF01;</p>
</blockquote>
<h2 id="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;"><a href="#&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;" class="headerlink" title="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;"></a>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;</h2><h2 id="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-1"><a href="#&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-1" class="headerlink" title="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;"></a>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6f0be355af6889ae96469d511743257550a58926d23819feafa4785843ce326f" alt></p>
<h2 id="&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x9879;&#x76EE;"><a href="#&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x9879;&#x76EE;" class="headerlink" title="&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x9879;&#x76EE;"></a>&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x9879;&#x76EE;</h2><p>&#x6587;&#x7AE0;&#x603B;&#x4F53;&#x5206;&#x4E3A;2&#x5927;&#x90E8;&#x5206;&#xFF0C;Java&#x540E;&#x7AEF;&#x63A5;&#x53E3;&#x548C;vue&#x524D;&#x7AEF;&#x9875;&#x9762;&#xFF0C;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x60F3;&#x5206;&#x5F00;&#x53D1;&#x5E03;&#xFF0C;&#x771F;&#x6B63;&#x60F3;&#x4F60;4&#x5C0F;&#x65F6;&#x5B66;&#x4F1A;&#xFF0C;&#x54C8;&#x54C8;&#x3002;</p>
<p>&#x5148;&#x770B;&#x6548;&#x679C;&#xFF1A;</p>
<p>&#x9879;&#x76EE;&#x6F14;&#x793A;&#xFF1A;<a href="/external_links/4c99831947cc615064c28724cb12bc93.html" target="blank" rel="noopener">www.markerhub.com:8084/blogs</a></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b0ee4f807c04e3e5913d3188171936801c95ccfc11b418b78abc691398c41bdc" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/4e0a6a56101b422f0b30c2415ab9d200af8874c58c4b4cca4efe884f8d0a340f" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x5F00;&#x59CB;&#x6572;&#x4EE3;&#x7801;&#x3002;</p>
<h2 id="Java&#x540E;&#x7AEF;&#x63A5;&#x53E3;&#x5F00;&#x53D1;"><a href="#Java&#x540E;&#x7AEF;&#x63A5;&#x53E3;&#x5F00;&#x53D1;" class="headerlink" title="Java&#x540E;&#x7AEF;&#x63A5;&#x53E3;&#x5F00;&#x53D1;"></a>Java&#x540E;&#x7AEF;&#x63A5;&#x53E3;&#x5F00;&#x53D1;</h2><h3 id="1&#x3001;&#x524D;&#x8A00;"><a href="#1&#x3001;&#x524D;&#x8A00;" class="headerlink" title="1&#x3001;&#x524D;&#x8A00;"></a>1&#x3001;&#x524D;&#x8A00;</h3><p>&#x4ECE;&#x96F6;&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x9AA8;&#x67B6;&#xFF0C;&#x6700;&#x597D;&#x9009;&#x62E9;&#x5408;&#x9002;&#xFF0C;&#x719F;&#x6089;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x672A;&#x6765;&#x6613;&#x62D3;&#x5C55;&#xFF0C;&#x9002;&#x5408;&#x5FAE;&#x670D;&#x52A1;&#x5316;&#x4F53;&#x7CFB;&#x7B49;&#x3002;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x4EE5;Springboot&#x4F5C;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x6846;&#x67B6;&#x57FA;&#x7840;&#xFF0C;&#x8FD9;&#x662F;&#x79BB;&#x4E0D;&#x5F00;&#x7684;&#x4E86;&#x3002;</p>
<p>&#x7136;&#x540E;&#x6570;&#x636E;&#x5C42;&#xFF0C;&#x6211;&#x4EEC;&#x5E38;&#x7528;&#x7684;&#x662F;Mybatis&#xFF0C;&#x6613;&#x4E0A;&#x624B;&#xFF0C;&#x65B9;&#x4FBF;&#x7EF4;&#x62A4;&#x3002;&#x4F46;&#x662F;&#x5355;&#x8868;&#x64CD;&#x4F5C;&#x6BD4;&#x8F83;&#x56F0;&#x96BE;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x6DFB;&#x52A0;&#x5B57;&#x6BB5;&#x6216;&#x51CF;&#x5C11;&#x5B57;&#x6BB5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BD4;&#x8F83;&#x7E41;&#x7410;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x63A8;&#x8350;&#x4F7F;&#x7528;Mybatis Plus&#xFF08;<a href="/external_links/a8e05fe7691c7c2cc9ebb6585d69927b.html" target="blank" rel="noopener">mp.baomidou.com/&#xFF09;&#xFF0C;&#x4E3A;&#x7B80;&#x5316;&#x5F00;&#x53D1;&#x800C;&#x751F;&#xFF0C;&#x53EA;&#x2026;</a> CRUD &#x64CD;&#x4F5C;&#xFF0C;&#x4ECE;&#x800C;&#x8282;&#x7701;&#x5927;&#x91CF;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x9AA8;&#x67B6;&#xFF0C;&#x6743;&#x9650;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x5FFD;&#x7565;&#x7684;&#xFF0C;Shiro&#x914D;&#x7F6E;&#x7B80;&#x5355;&#xFF0C;&#x4F7F;&#x7528;&#x4E5F;&#x7B80;&#x5355;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;Shiro&#x4F5C;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x7684;&#x6743;&#x9650;&#x3002;</p>
<p>&#x8003;&#x8651;&#x5230;&#x9879;&#x76EE;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x591A;&#x53F0;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x7684;&#x4F1A;&#x8BDD;&#x7B49;&#x4FE1;&#x606F;&#x9700;&#x8981;&#x5171;&#x4EAB;&#xFF0C;Redis&#x662F;&#x73B0;&#x5728;&#x4E3B;&#x6D41;&#x7684;&#x7F13;&#x5B58;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x4E5F;&#x9002;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x3002;</p>
<p>&#x7136;&#x540E;&#x56E0;&#x4E3A;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4F7F;&#x7528;jwt&#x4F5C;&#x4E3A;&#x6211;&#x4EEC;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#x51ED;&#x8BC1;&#x3002;</p>
<p>ok&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x5C31;&#x5F00;&#x59CB;&#x642D;&#x5EFA;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x811A;&#x624B;&#x67B6;&#xFF01;</p>
<p>&#x6280;&#x672F;&#x6808;&#xFF1A;</p>
<ul>
<li>SpringBoot</li>
<li>mybatis plus</li>
<li>shiro</li>
<li>lombok</li>
<li>redis</li>
<li>hibernate validatior</li>
<li>jwt</li>
</ul>
<p>&#x5BFC;&#x56FE;&#xFF1A;<a href="/external_links/df2573b9adff4742123731359404f802.html" target="blank" rel="noopener">www.markerhub.com/map/131</a></p>
<h3 id="2&#x3001;&#x65B0;&#x5EFA;Springboot&#x9879;&#x76EE;"><a href="#2&#x3001;&#x65B0;&#x5EFA;Springboot&#x9879;&#x76EE;" class="headerlink" title="2&#x3001;&#x65B0;&#x5EFA;Springboot&#x9879;&#x76EE;"></a>2&#x3001;&#x65B0;&#x5EFA;Springboot&#x9879;&#x76EE;</h3><p>&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;IDEA&#x6765;&#x5F00;&#x53D1;&#x6211;&#x4EEC;&#x9879;&#x76EE;&#xFF0C;&#x65B0;&#x5EFA;&#x6B65;&#x9AA4;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E0D;&#x622A;&#x56FE;&#x4E86;&#x3002;</p>
<p>&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#x4E0E;&#x73AF;&#x5883;&#xFF1A;</p>
<ul>
<li>idea</li>
<li>mysql</li>
<li>jdk 8</li>
<li>maven3.3.9</li>
</ul>
<p>&#x65B0;&#x5EFA;&#x597D;&#x7684;&#x9879;&#x76EE;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#xFF0C;SpringBoot&#x7248;&#x672C;&#x4F7F;&#x7528;&#x7684;&#x76EE;&#x524D;&#x6700;&#x65B0;&#x7684;2.2.6.RELEASE&#x7248;&#x672C;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/60f221cebe11c0c8c36b6297c141f738ea7675b6ef439ccbb43aab7f10e89fd8" alt="&#x56FE;&#x7247;"></p>
<p>pom&#x7684;jar&#x5305;&#x5BFC;&#x5165;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;</span><br><span class="line">	&lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">	&lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">	&lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>devtools&#xFF1A;&#x9879;&#x76EE;&#x7684;&#x70ED;&#x52A0;&#x8F7D;&#x91CD;&#x542F;&#x63D2;&#x4EF6;</li>
<li>lombok&#xFF1A;&#x7B80;&#x5316;&#x4EE3;&#x7801;&#x7684;&#x5DE5;&#x5177;</li>
</ul>
<h3 id="3&#x3001;&#x6574;&#x5408;mybatis-plus"><a href="#3&#x3001;&#x6574;&#x5408;mybatis-plus" class="headerlink" title="3&#x3001;&#x6574;&#x5408;mybatis plus"></a>3&#x3001;&#x6574;&#x5408;mybatis plus</h3><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x6574;&#x5408;mybatis plus&#xFF0C;&#x8BA9;&#x9879;&#x76EE;&#x80FD;&#x5B8C;&#x6210;&#x57FA;&#x672C;&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;&#x64CD;&#x4F5C;&#x3002;&#x6B65;&#x9AA4;&#x5F88;&#x7B80;&#x5355;&#xFF1A;&#x53EF;&#x4EE5;&#x53BB;&#x5B98;&#x7F51;&#x770B;&#x770B;&#xFF1A;<a href="/external_links/1af2ec495657af2e332df72926ff4cc5.html" target="blank" rel="noopener">mp.baomidou.com/guide/insta&#x2026;</a></p>
<p><strong>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5BFC;&#x5165;jar&#x5305;</strong></p>
<p>pom&#x4E2D;&#x5BFC;&#x5165;mybatis plus&#x7684;jar&#x5305;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x4EE3;&#x7801;&#x751F;&#x6210;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x5BFC;&#x5165;&#x9875;&#x9762;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7528;&#x7684;&#x662F;freemarker&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!--mp--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!--mp&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5668;--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.2.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><strong>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x7136;&#x540E;&#x53BB;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;# DataSource Config</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://localhost:3306/vueblog?useUnicode=true&amp;useSSL=false&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai</span><br><span class="line">    username: root</span><br><span class="line">    password: admin</span><br><span class="line">mybatis-plus:</span><br><span class="line">  mapper-locations: classpath*:/mapper/**Mapper.xml</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x9664;&#x4E86;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8FD8;&#x914D;&#x7F6E;&#x4E86;myabtis plus&#x7684;mapper&#x7684;xml&#x6587;&#x4EF6;&#x7684;&#x626B;&#x63CF;&#x8DEF;&#x5F84;&#xFF0C;&#x8FD9;&#x4E00;&#x6B65;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x4E86;&#x3002;<br><strong>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x5F00;&#x542F;mapper&#x63A5;&#x53E3;&#x626B;&#x63CF;&#xFF0C;&#x6DFB;&#x52A0;&#x5206;&#x9875;&#x63D2;&#x4EF6;</strong></p>
<p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x5305;&#xFF1A;&#x901A;&#x8FC7;@mapperScan&#x6CE8;&#x89E3;&#x6307;&#x5B9A;&#x8981;&#x53D8;&#x6210;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x6240;&#x5728;&#x7684;&#x5305;&#xFF0C;&#x7136;&#x540E;&#x5305;&#x4E0B;&#x9762;&#x7684;&#x6240;&#x6709;&#x63A5;&#x53E3;&#x5728;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x90FD;&#x4F1A;&#x751F;&#x6210;&#x76F8;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;PaginationInterceptor&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x9875;&#x63D2;&#x4EF6;&#x3002;</p>
<ul>
<li>com.markerhub.config.MybatisPlusConfig</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">@EnableTransactionManagement</span><br><span class="line">@MapperScan(&quot;com.markerhub.mapper&quot;)</span><br><span class="line">public class MybatisPlusConfig {</span><br><span class="line">    @Bean</span><br><span class="line">    public PaginationInterceptor paginationInterceptor() {</span><br><span class="line">        PaginationInterceptor paginationInterceptor = new PaginationInterceptor();</span><br><span class="line">        return paginationInterceptor;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x4EE3;&#x7801;&#x751F;&#x6210;</strong></p>
<p>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x518D;&#x7528;&#x5176;&#x4ED6;&#x63D2;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x73B0;&#x5728;&#x5C31;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;mybatis plus&#x4E86;&#xFF0C;&#x5B98;&#x65B9;&#x7ED9;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x5199;&#x4E0A;&#x81EA;&#x5DF1;&#x7684;&#x53C2;&#x6570;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6839;&#x636E;&#x6570;&#x636E;&#x5E93;&#x8868;&#x4FE1;&#x606F;&#x751F;&#x6210;entity&#x3001;service&#x3001;mapper&#x7B49;&#x63A5;&#x53E3;&#x548C;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;</p>
<ul>
<li>com.markerhub.CodeGenerator</li>
</ul>
<p>&#x56E0;&#x4E3A;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x957F;&#xFF0C;&#x5C31;&#x4E0D;&#x8D34;&#x51FA;&#x6765;&#x4E86;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4ED3;&#x5E93;&#x4E0A;&#x770B;&#x54C8;&#xFF01;</p>
<p>&#x9996;&#x5148;&#x6211;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x65B0;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;user&#x8868;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;CREATE TABLE `m_user` (</span><br><span class="line">&#xA0; `id` bigint(20) NOT NULL AUTO_INCREMENT,</span><br><span class="line">&#xA0; `username` varchar(64) DEFAULT NULL,</span><br><span class="line">&#xA0; `avatar` varchar(255) DEFAULT NULL,</span><br><span class="line">&#xA0; `email` varchar(64) DEFAULT NULL,</span><br><span class="line">&#xA0; `password` varchar(64) DEFAULT NULL,</span><br><span class="line">&#xA0; `status` int(5) NOT NULL,</span><br><span class="line">&#xA0; `created` datetime DEFAULT NULL,</span><br><span class="line">&#xA0; `last_login` datetime DEFAULT NULL,</span><br><span class="line">&#xA0; PRIMARY KEY (`id`),</span><br><span class="line">&#xA0; KEY `UK_USERNAME` (`username`) USING BTREE</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line">CREATE TABLE `m_blog` (</span><br><span class="line">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `user_id` bigint(20) NOT NULL,</span><br><span class="line">  `title` varchar(255) NOT NULL,</span><br><span class="line">  `description` varchar(255) NOT NULL,</span><br><span class="line">  `content` longtext,</span><br><span class="line">  `created` datetime NOT NULL ON UPDATE CURRENT_TIMESTAMP,</span><br><span class="line">  `status` tinyint(4) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4;</span><br><span class="line">INSERT INTO `vueblog`.`m_user` (`id`, `username`, `avatar`, `email`, `password`, `status`, `created`, `last_login`) VALUES (&apos;1&apos;, &apos;markerhub&apos;, &apos;https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg&apos;, NULL, &apos;96e79218965eb72c92a549dd5a330112&apos;, &apos;0&apos;, &apos;2020-04-20 10:44:01&apos;, NULL);</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;CodeGenerator&#x7684;main&#x65B9;&#x6CD5;&#xFF0C;&#x8F93;&#x5165;&#x8868;&#x540D;&#xFF1A;m_user&#xFF0C;&#x751F;&#x6210;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/892621106f0097810764334a0b3739436ce5b9607b8b6715ec2d6f14d3574b98" alt="&#x56FE;&#x7247;"></p>
<p>&#x5F97;&#x5230;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/ddedd6ff5418ec3d84a2b073dc65eb2bda17916a97bfc330b9900249c1e2c3ba" alt="&#x56FE;&#x7247;"></p>
<p>&#x7B80;&#x6D01;&#xFF01;&#x65B9;&#x4FBF;&#xFF01;&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x628A;mybatis plus&#x6846;&#x67B6;&#x96C6;&#x6210;&#x5230;&#x9879;&#x76EE;&#x4E2D;&#x4E86;&#x3002;</p>
<p>ps&#xFF1A;&#x989D;&#xFF0C;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;m_blog&#x8868;&#x7684;&#x4EE3;&#x7801;&#x4E5F;&#x751F;&#x6210;&#x4E00;&#x4E0B;&#x54C8;&#x3002;</p>
<p>&#x5728;UserController&#x4E2D;&#x5199;&#x4E2A;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;@RestController</span><br><span class="line">@RequestMapping(&quot;/user&quot;)</span><br><span class="line">public class UserController {</span><br><span class="line">    @Autowired</span><br><span class="line">    UserService userService;</span><br><span class="line">    @GetMapping(&quot;/{id}&quot;)</span><br><span class="line">    public Object test(@PathVariable(&quot;id&quot;) Long id) {</span><br><span class="line">        return userService.getById(id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8BBF;&#x95EE;&#xFF1A;<a href="/external_links/608660b0663f464f244718b6ecccd454.html" target="blank" rel="noopener">http://localhost:8080/user/1</a> &#x83B7;&#x5F97;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF0C;&#x6574;&#x5408;&#x6210;&#x529F;&#xFF01;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/23d5cb36dbc3d30f33f532812d1a31c78cfc225703a639444871f66fc4f2c609" alt="&#x56FE;&#x7247;"></p>
<h3 id="3&#x3001;&#x7EDF;&#x4E00;&#x7ED3;&#x679C;&#x5C01;&#x88C5;"><a href="#3&#x3001;&#x7EDF;&#x4E00;&#x7ED3;&#x679C;&#x5C01;&#x88C5;" class="headerlink" title="3&#x3001;&#x7EDF;&#x4E00;&#x7ED3;&#x679C;&#x5C01;&#x88C5;"></a>3&#x3001;&#x7EDF;&#x4E00;&#x7ED3;&#x679C;&#x5C01;&#x88C5;</h3><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7528;&#x5230;&#x4E86;&#x4E00;&#x4E2A;Result&#x7684;&#x7C7B;&#xFF0C;&#x8FD9;&#x4E2A;&#x7528;&#x4E8E;&#x6211;&#x4EEC;&#x7684;&#x5F02;&#x6B65;&#x7EDF;&#x4E00;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x5C01;&#x88C5;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x7ED3;&#x679C;&#x91CC;&#x9762;&#x6709;&#x51E0;&#x4E2A;&#x8981;&#x7D20;&#x5FC5;&#x8981;&#x7684;</p>
<ul>
<li>&#x662F;&#x5426;&#x6210;&#x529F;&#xFF0C;&#x53EF;&#x7528;code&#x8868;&#x793A;&#xFF08;&#x5982;200&#x8868;&#x793A;&#x6210;&#x529F;&#xFF0C;400&#x8868;&#x793A;&#x5F02;&#x5E38;&#xFF09;</li>
<li>&#x7ED3;&#x679C;&#x6D88;&#x606F;</li>
<li>&#x7ED3;&#x679C;&#x6570;&#x636E;</li>
</ul>
<p>&#x6240;&#x4EE5;&#x53EF;&#x5F97;&#x5230;&#x5C01;&#x88C5;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>com.markerhub.common.lang.Result</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;@Data</span><br><span class="line">public class Result implements Serializable {</span><br><span class="line">&#xA0; &#xA0; private String code;</span><br><span class="line">&#xA0; &#xA0; private String msg;</span><br><span class="line">&#xA0; &#xA0; private Object data;</span><br><span class="line">&#xA0; &#xA0; public static Result succ(Object data) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; Result m = new Result();</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setCode(&quot;0&quot;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setData(data);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setMsg(&quot;&#x64CD;&#x4F5C;&#x6210;&#x529F;&quot;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; return m;</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; public static Result succ(String mess, Object data) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; Result m = new Result();</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setCode(&quot;0&quot;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setData(data);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setMsg(mess);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; return m;</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; public static Result fail(String mess) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; Result m = new Result();</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setCode(&quot;-1&quot;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setData(null);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setMsg(mess);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; return m;</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; public static Result fail(String mess, Object data) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; Result m = new Result();</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setCode(&quot;-1&quot;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setData(data);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; m.setMsg(mess);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; return m;</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4&#x3001;&#x6574;&#x5408;shiro-jwt&#xFF0C;&#x5E76;&#x4F1A;&#x8BDD;&#x5171;&#x4EAB;"><a href="#4&#x3001;&#x6574;&#x5408;shiro-jwt&#xFF0C;&#x5E76;&#x4F1A;&#x8BDD;&#x5171;&#x4EAB;" class="headerlink" title="4&#x3001;&#x6574;&#x5408;shiro+jwt&#xFF0C;&#x5E76;&#x4F1A;&#x8BDD;&#x5171;&#x4EAB;"></a>4&#x3001;&#x6574;&#x5408;shiro+jwt&#xFF0C;&#x5E76;&#x4F1A;&#x8BDD;&#x5171;&#x4EAB;</h3><p>&#x8003;&#x8651;&#x5230;&#x540E;&#x9762;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x505A;&#x96C6;&#x7FA4;&#x3001;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B49;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x9700;&#x8981;&#x4F1A;&#x8BDD;&#x5171;&#x4EAB;&#xFF0C;&#x800C;shiro&#x7684;&#x7F13;&#x5B58;&#x548C;&#x4F1A;&#x8BDD;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x8003;&#x8651;&#x4F7F;&#x7528;redis&#x6765;&#x5B58;&#x50A8;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x4EC5;&#x9700;&#x8981;&#x6574;&#x5408;shiro&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x9700;&#x8981;&#x6574;&#x5408;redis&#x3002;&#x5728;&#x5F00;&#x6E90;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x627E;&#x5230;&#x4E86;&#x4E00;&#x4E2A;starter&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x6574;&#x5408;shiro-redis&#xFF0C;&#x914D;&#x7F6E;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x63A8;&#x8350;&#x5927;&#x5BB6;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x800C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x7684;&#x662F;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x9879;&#x76EE;&#x7684;&#x9AA8;&#x67B6;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x4F1A;&#x91C7;&#x7528;token&#x6216;&#x8005;jwt&#x4F5C;&#x4E3A;&#x8DE8;&#x57DF;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x6240;&#x4EE5;&#x6574;&#x5408;shiro&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5F15;&#x5165;jwt&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x5F00;&#x59CB;&#x6574;&#x5408;&#xFF1A;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;shiro-redis-spring-boot-starter&#x7684;jar&#x5305;&#xFF0C;&#x5177;&#x4F53;&#x6559;&#x7A0B;&#x53EF;&#x4EE5;&#x770B;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;<a href="/external_links/233fb417e63988fc2a2eca57c4d16de9.html" target="blank" rel="noopener">github.com/alexxiyang/&#x2026;</a></p>
<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5BFC;&#x5165;shiro-redis&#x7684;starter&#x5305;&#xFF1A;&#x8FD8;&#x6709;jwt&#x7684;&#x5DE5;&#x5177;&#x5305;&#xFF0C;&#x4EE5;&#x53CA;&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#x5F00;&#x53D1;&#xFF0C;&#x6211;&#x5F15;&#x5165;&#x4E86;hutool&#x5DE5;&#x5177;&#x5305;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">&#xA0; &#xA0; &lt;groupId&gt;org.crazycake&lt;/groupId&gt;</span><br><span class="line">&#xA0; &#xA0; &lt;artifactId&gt;shiro-redis-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&#xA0; &#xA0; &lt;version&gt;3.2.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- hutool&#x5DE5;&#x5177;&#x7C7B;--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.3.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- jwt --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.9.1&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x7F16;&#x5199;&#x914D;&#x7F6E;&#xFF1A;</p>
<h4 id="ShiroConfig"><a href="#ShiroConfig" class="headerlink" title="ShiroConfig"></a>ShiroConfig</h4><ul>
<li>com.markerhub.config.ShiroConfig</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * shiro&#x542F;&#x7528;&#x6CE8;&#x89E3;&#x62E6;&#x622A;&#x63A7;&#x5236;&#x5668;</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class ShiroConfig {</span><br><span class="line">    @Autowired</span><br><span class="line">    JwtFilter jwtFilter;</span><br><span class="line">    @Bean</span><br><span class="line">    public SessionManager sessionManager(RedisSessionDAO redisSessionDAO) {</span><br><span class="line">        DefaultWebSessionManager sessionManager = new DefaultWebSessionManager();</span><br><span class="line">        sessionManager.setSessionDAO(redisSessionDAO);</span><br><span class="line">        return sessionManager;</span><br><span class="line">    }</span><br><span class="line">    @Bean</span><br><span class="line">    public DefaultWebSecurityManager securityManager(AccountRealm accountRealm,</span><br><span class="line">                                                     SessionManager sessionManager,</span><br><span class="line">                                                     RedisCacheManager redisCacheManager) {</span><br><span class="line">        DefaultWebSecurityManager securityManager = new DefaultWebSecurityManager(accountRealm);</span><br><span class="line">        securityManager.setSessionManager(sessionManager);</span><br><span class="line">        securityManager.setCacheManager(redisCacheManager);</span><br><span class="line">        /*</span><br><span class="line">         * &#x5173;&#x95ED;shiro&#x81EA;&#x5E26;&#x7684;session&#xFF0C;&#x8BE6;&#x60C5;&#x89C1;&#x6587;&#x6863;</span><br><span class="line">         */</span><br><span class="line">        DefaultSubjectDAO subjectDAO = new DefaultSubjectDAO();</span><br><span class="line">        DefaultSessionStorageEvaluator defaultSessionStorageEvaluator = new DefaultSessionStorageEvaluator();</span><br><span class="line">        defaultSessionStorageEvaluator.setSessionStorageEnabled(false);</span><br><span class="line">        subjectDAO.setSessionStorageEvaluator(defaultSessionStorageEvaluator);</span><br><span class="line">        securityManager.setSubjectDAO(subjectDAO);</span><br><span class="line">        return securityManager;</span><br><span class="line">    }</span><br><span class="line">    @Bean</span><br><span class="line">    public ShiroFilterChainDefinition shiroFilterChainDefinition() {</span><br><span class="line">        DefaultShiroFilterChainDefinition chainDefinition = new DefaultShiroFilterChainDefinition();</span><br><span class="line">        Map&lt;String, String&gt; filterMap = new LinkedHashMap&lt;&gt;();</span><br><span class="line">        filterMap.put(&quot;/**&quot;, &quot;jwt&quot;); // &#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x6821;&#x9A8C;&#x6743;&#x9650;</span><br><span class="line">        chainDefinition.addPathDefinitions(filterMap);</span><br><span class="line">        return chainDefinition;</span><br><span class="line">    }</span><br><span class="line">    @Bean(&quot;shiroFilterFactoryBean&quot;)</span><br><span class="line">    public ShiroFilterFactoryBean shiroFilterFactoryBean(SecurityManager securityManager,</span><br><span class="line">                                                         ShiroFilterChainDefinition shiroFilterChainDefinition) {</span><br><span class="line">        ShiroFilterFactoryBean shiroFilter = new ShiroFilterFactoryBean();</span><br><span class="line">        shiroFilter.setSecurityManager(securityManager);</span><br><span class="line">        Map&lt;String, Filter&gt; filters = new HashMap&lt;&gt;();</span><br><span class="line">        filters.put(&quot;jwt&quot;, jwtFilter);</span><br><span class="line">        shiroFilter.setFilters(filters);</span><br><span class="line">        Map&lt;String, String&gt; filterMap = shiroFilterChainDefinition.getFilterChainMap();</span><br><span class="line">        shiroFilter.setFilterChainDefinitionMap(filterMap);</span><br><span class="line">        return shiroFilter;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x5F00;&#x542F;&#x6CE8;&#x89E3;&#x4EE3;&#x7406;&#xFF08;&#x9ED8;&#x8BA4;&#x597D;&#x50CF;&#x5DF2;&#x7ECF;&#x5F00;&#x542F;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x8981;&#xFF09;</span><br><span class="line">    @Bean</span><br><span class="line">    public AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor(SecurityManager securityManager){</span><br><span class="line">        AuthorizationAttributeSourceAdvisor authorizationAttributeSourceAdvisor = new AuthorizationAttributeSourceAdvisor();</span><br><span class="line">        authorizationAttributeSourceAdvisor.setSecurityManager(securityManager);</span><br><span class="line">        return authorizationAttributeSourceAdvisor;</span><br><span class="line">    }</span><br><span class="line">    @Bean</span><br><span class="line">    public static DefaultAdvisorAutoProxyCreator getDefaultAdvisorAutoProxyCreator() {</span><br><span class="line">        DefaultAdvisorAutoProxyCreator creator = new DefaultAdvisorAutoProxyCreator();</span><br><span class="line">        return creator;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;ShiroConfig&#xFF0C;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x505A;&#x4E86;&#x51E0;&#x4EF6;&#x4E8B;&#x60C5;&#xFF1A;</p>
<ol>
<li>&#x5F15;&#x5165;RedisSessionDAO&#x548C;RedisCacheManager&#xFF0C;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;shiro&#x7684;&#x6743;&#x9650;&#x6570;&#x636E;&#x548C;&#x4F1A;&#x8BDD;&#x4FE1;&#x606F;&#x80FD;&#x4FDD;&#x5B58;&#x5230;redis&#x4E2D;&#xFF0C;&#x5B9E;&#x73B0;&#x4F1A;&#x8BDD;&#x5171;&#x4EAB;&#x3002;</li>
<li>&#x91CD;&#x5199;&#x4E86;SessionManager&#x548C;DefaultWebSecurityManager&#xFF0C;&#x540C;&#x65F6;&#x5728;DefaultWebSecurityManager&#x4E2D;&#x4E3A;&#x4E86;&#x5173;&#x95ED;shiro&#x81EA;&#x5E26;&#x7684;session&#x65B9;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E3A;false&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x5C31;&#x4E0D;&#x518D;&#x80FD;&#x901A;&#x8FC7;session&#x65B9;&#x5F0F;&#x767B;&#x5F55;shiro&#x3002;&#x540E;&#x9762;&#x5C06;&#x91C7;&#x7528;jwt&#x51ED;&#x8BC1;&#x767B;&#x5F55;&#x3002;</li>
<li>&#x5728;ShiroFilterChainDefinition&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x518D;&#x901A;&#x8FC7;&#x7F16;&#x7801;&#x5F62;&#x5F0F;&#x62E6;&#x622A;Controller&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#xFF0C;&#x800C;&#x662F;&#x6240;&#x6709;&#x7684;&#x8DEF;&#x7531;&#x90FD;&#x9700;&#x8981;&#x7ECF;&#x8FC7;JwtFilter&#x8FD9;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x5224;&#x65AD;&#x8BF7;&#x6C42;&#x5934;&#x4E2D;&#x662F;&#x5426;&#x542B;&#x6709;jwt&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x6709;&#x5C31;&#x767B;&#x5F55;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x8DF3;&#x8FC7;&#x3002;&#x8DF3;&#x8FC7;&#x4E4B;&#x540E;&#xFF0C;&#x6709;Controller&#x4E2D;&#x7684;shiro&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x518D;&#x6B21;&#x62E6;&#x622A;&#xFF0C;&#x6BD4;&#x5982;@RequiresAuthentication&#xFF0C;&#x8FD9;&#x6837;&#x63A7;&#x5236;&#x6743;&#x9650;&#x8BBF;&#x95EE;&#x3002;</li>
</ol>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x804A;ShiroConfig&#x4E2D;&#x51FA;&#x73B0;&#x7684;AccountRealm&#xFF0C;&#x8FD8;&#x6709;JwtFilter&#x3002;</p>
<h4 id="AccountRealm"><a href="#AccountRealm" class="headerlink" title="AccountRealm"></a>AccountRealm</h4><p>AccountRealm&#x662F;shiro&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x6216;&#x8005;&#x6743;&#x9650;&#x6821;&#x9A8C;&#x7684;&#x903B;&#x8F91;&#x6240;&#x5728;&#xFF0C;&#x7B97;&#x662F;&#x6838;&#x5FC3;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x91CD;&#x5199;3&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5206;&#x522B;&#x662F;</p>
<ul>
<li>supports&#xFF1A;&#x4E3A;&#x4E86;&#x8BA9;realm&#x652F;&#x6301;jwt&#x7684;&#x51ED;&#x8BC1;&#x6821;&#x9A8C;</li>
<li>doGetAuthorizationInfo&#xFF1A;&#x6743;&#x9650;&#x6821;&#x9A8C;</li>
<li>doGetAuthenticationInfo&#xFF1A;&#x767B;&#x5F55;&#x8BA4;&#x8BC1;&#x6821;&#x9A8C;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x603B;&#x4F53;&#x770B;&#x770B;AccountRealm&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x9010;&#x4E2A;&#x5206;&#x6790;&#xFF1A;</p>
<ul>
<li>com.markerhub.shiro.AccountRealm</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Slf4j</span><br><span class="line">@Component</span><br><span class="line">public class AccountRealm extends AuthorizingRealm {</span><br><span class="line">    @Autowired</span><br><span class="line">    JwtUtils jwtUtils;</span><br><span class="line">    @Autowired</span><br><span class="line">    UserService userService;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean supports(AuthenticationToken token) {</span><br><span class="line">        return token instanceof JwtToken;</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principals) {</span><br><span class="line">        return null;</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken token) throws AuthenticationException {</span><br><span class="line">        JwtToken jwt = (JwtToken) token;</span><br><span class="line">        log.info(&quot;jwt-----------------&gt;{}&quot;, jwt);</span><br><span class="line">        String userId = jwtUtils.getClaimByToken((String) jwt.getPrincipal()).getSubject();</span><br><span class="line">        User user = userService.getById(Long.parseLong(userId));</span><br><span class="line">        if(user == null) {</span><br><span class="line">            throw new UnknownAccountException(&quot;&#x8D26;&#x6237;&#x4E0D;&#x5B58;&#x5728;&#xFF01;&quot;);</span><br><span class="line">        }</span><br><span class="line">        if(user.getStatus() == -1) {</span><br><span class="line">            throw new LockedAccountException(&quot;&#x8D26;&#x6237;&#x5DF2;&#x88AB;&#x9501;&#x5B9A;&#xFF01;&quot;);</span><br><span class="line">        }</span><br><span class="line">        AccountProfile profile = new AccountProfile();</span><br><span class="line">        BeanUtil.copyProperties(user, profile);</span><br><span class="line">        log.info(&quot;profile-----------------&gt;{}&quot;, profile.toString());</span><br><span class="line">        return new SimpleAuthenticationInfo(profile, jwt.getCredentials(), getName());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x5C31;&#x662F;doGetAuthenticationInfo&#x767B;&#x5F55;&#x8BA4;&#x8BC1;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6211;&#x4EEC;&#x901A;&#x8FC7;jwt&#x83B7;&#x53D6;&#x5230;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x5224;&#x65AD;&#x7528;&#x6237;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6700;&#x540E;&#x5F02;&#x5E38;&#x5C31;&#x629B;&#x51FA;&#x5BF9;&#x5E94;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#xFF0C;&#x5426;&#x8005;&#x5C01;&#x88C5;&#x6210;SimpleAuthenticationInfo&#x8FD4;&#x56DE;&#x7ED9;shiro&#x3002;<br>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x9010;&#x6B65;&#x5206;&#x6790;&#x91CC;&#x9762;&#x51FA;&#x73B0;&#x7684;&#x65B0;&#x7C7B;&#xFF1A;</p>
<p>1&#x3001;shiro&#x9ED8;&#x8BA4;supports&#x7684;&#x662F;UsernamePasswordToken&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x91C7;&#x7528;&#x4E86;jwt&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;JwtToken&#xFF0C;&#x6765;&#x5B8C;&#x6210;shiro&#x7684;supports&#x65B9;&#x6CD5;&#x3002;</p>
<h4 id="JwtToken"><a href="#JwtToken" class="headerlink" title="JwtToken"></a>JwtToken</h4><ul>
<li>com.markerhub.shiro.JwtToken</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;public class JwtToken implements AuthenticationToken {</span><br><span class="line">    private String token;</span><br><span class="line">    public JwtToken(String token) {</span><br><span class="line">        this.token = token;</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    public Object getPrincipal() {</span><br><span class="line">        return token;</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    public Object getCredentials() {</span><br><span class="line">        return token;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>2&#x3001;JwtUtils&#x662F;&#x4E2A;&#x751F;&#x6210;&#x548C;&#x6821;&#x9A8C;jwt&#x7684;&#x5DE5;&#x5177;&#x7C7B;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x4E9B;jwt&#x76F8;&#x5173;&#x7684;&#x5BC6;&#x94A5;&#x4FE1;&#x606F;&#x662F;&#x4ECE;&#x9879;&#x76EE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">@ConfigurationProperties(prefix = &quot;markerhub.jwt&quot;)</span><br><span class="line">public class JwtUtils {</span><br><span class="line">    private String secret;</span><br><span class="line">    private long expire;</span><br><span class="line">    private String header;</span><br><span class="line">    /**</span><br><span class="line">     * &#x751F;&#x6210;jwt token</span><br><span class="line">     */</span><br><span class="line">    public String generateToken(long userId) {</span><br><span class="line">    ...</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x83B7;&#x53D6;jwt&#x7684;&#x4FE1;&#x606F;</span><br><span class="line">    public Claims getClaimByToken(String token) {</span><br><span class="line">    ...</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">     * token&#x662F;&#x5426;&#x8FC7;&#x671F;</span><br><span class="line">     * @return  true&#xFF1A;&#x8FC7;&#x671F;</span><br><span class="line">     */</span><br><span class="line">    public boolean isTokenExpired(Date expiration) {</span><br><span class="line">        return expiration.before(new Date());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>3&#x3001;&#x800C;&#x5728;AccountRealm&#x6211;&#x4EEC;&#x8FD8;&#x7528;&#x5230;&#x4E86;AccountProfile&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x767B;&#x5F55;&#x6210;&#x529F;&#x4E4B;&#x540E;&#x8FD4;&#x56DE;&#x7684;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;&#x8F7D;&#x4F53;&#xFF0C;</p>
<h4 id="AccountProfile"><a href="#AccountProfile" class="headerlink" title="AccountProfile"></a>AccountProfile</h4><ul>
<li>com.markerhub.shiro.AccountProfile</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;@Data</span><br><span class="line">public class AccountProfile implements Serializable {</span><br><span class="line">    private Long id;</span><br><span class="line">    private String username;</span><br><span class="line">    private String avatar;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7B2C;&#x4E09;&#x6B65;&#xFF0C;ok&#xFF0C;&#x57FA;&#x672C;&#x7684;&#x6821;&#x9A8C;&#x7684;&#x8DEF;&#x7EBF;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C11;&#x91CF;&#x7684;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;shiro-redis:</span><br><span class="line">  enabled: true</span><br><span class="line">  redis-manager:</span><br><span class="line">    host: 127.0.0.1:6379</span><br><span class="line">markerhub:</span><br><span class="line">  jwt:</span><br><span class="line">    # &#x52A0;&#x5BC6;&#x79D8;&#x94A5;</span><br><span class="line">    secret: f4e2e52034348f86b67cde581c0f9eb5</span><br><span class="line">    # token&#x6709;&#x6548;&#x65F6;&#x957F;&#xFF0C;7&#x5929;&#xFF0C;&#x5355;&#x4F4D;&#x79D2;</span><br><span class="line">    expire: 604800</span><br><span class="line">    header: token</span><br></pre></td></tr></table></figure>

<p>&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9879;&#x76EE;&#x6709;&#x4F7F;&#x7528;spring-boot-devtools&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;resources&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;&#x6587;&#x4EF6;&#x5939;META-INF&#xFF0C;&#x7136;&#x540E;&#x65B0;&#x5EFA;&#x6587;&#x4EF6;spring-devtools.properties&#xFF0C;&#x8FD9;&#x6837;&#x70ED;&#x91CD;&#x542F;&#x65F6;&#x5019;&#x624D;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;&#x3002;</p>
<ul>
<li>resources/META-INF/spring-devtools.properties</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;restart.include.shiro-redis=/shiro-[\\w-\\.]+jar</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/878146d4986c100f3f1389121ea153fc51440c06fc669f7bf723720840643409" alt="&#x56FE;&#x7247;"></p>
<h4 id="JwtFilter"><a href="#JwtFilter" class="headerlink" title="JwtFilter"></a>JwtFilter</h4><p>&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x5B9A;&#x4E49;jwt&#x7684;&#x8FC7;&#x6EE4;&#x5668;JwtFilter&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x91CD;&#x70B9;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7EE7;&#x627F;&#x7684;&#x662F;Shiro&#x5185;&#x7F6E;&#x7684;AuthenticatingFilter&#xFF0C;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5185;&#x7F6E;&#x4E86;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x767B;&#x5F55;&#x65B9;&#x6CD5;&#x7684;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x6709;&#x4E9B;&#x540C;&#x5B66;&#x7EE7;&#x627F;BasicHttpAuthenticationFilter&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x91CD;&#x5199;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ol>
<li>createToken&#xFF1A;&#x5B9E;&#x73B0;&#x767B;&#x5F55;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x751F;&#x6210;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x652F;&#x6301;&#x7684;JwtToken</li>
<li>onAccessDenied&#xFF1A;&#x62E6;&#x622A;&#x6821;&#x9A8C;&#xFF0C;&#x5F53;&#x5934;&#x90E8;&#x6CA1;&#x6709;Authorization&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x81EA;&#x52A8;&#x767B;&#x5F55;&#xFF1B;&#x5F53;&#x5E26;&#x6709;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x6821;&#x9A8C;jwt&#x7684;&#x6709;&#x6548;&#x6027;&#xFF0C;&#x6CA1;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x5C31;&#x76F4;&#x63A5;&#x6267;&#x884C;executeLogin&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x767B;&#x5F55;</li>
<li>onLoginFailure&#xFF1A;&#x767B;&#x5F55;&#x5F02;&#x5E38;&#x65F6;&#x5019;&#x8FDB;&#x5165;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x628A;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x5C01;&#x88C5;&#x7136;&#x540E;&#x629B;&#x51FA;</li>
<li>preHandle&#xFF1A;&#x62E6;&#x622A;&#x5668;&#x7684;&#x524D;&#x7F6E;&#x62E6;&#x622A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x662F;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x6790;&#x9879;&#x76EE;&#xFF0C;&#x9879;&#x76EE;&#x4E2D;&#x9664;&#x4E86;&#x9700;&#x8981;&#x8DE8;&#x57DF;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x62E6;&#x622A;&#x5668;&#x4E2D;&#x4E5F;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x8DE8;&#x57DF;&#x652F;&#x6301;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x62E6;&#x622A;&#x5668;&#x624D;&#x4E0D;&#x4F1A;&#x5728;&#x8FDB;&#x5165;Controller&#x4E4B;&#x524D;&#x5C31;&#x88AB;&#x9650;&#x5236;&#x4E86;&#x3002;</li>
</ol>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x603B;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<ul>
<li>com.markerhub.shiro.JwtFilter</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class JwtFilter extends AuthenticatingFilter {</span><br><span class="line">    @Autowired</span><br><span class="line">    JwtUtils jwtUtils;</span><br><span class="line">    @Override</span><br><span class="line">    protected AuthenticationToken createToken(ServletRequest servletRequest, ServletResponse servletResponse) throws Exception {</span><br><span class="line">        // &#x83B7;&#x53D6; token</span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        String jwt = request.getHeader(&quot;Authorization&quot;);</span><br><span class="line">        if(StringUtils.isEmpty(jwt)){</span><br><span class="line">            return null;</span><br><span class="line">        }</span><br><span class="line">        return new JwtToken(jwt);</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    protected boolean onAccessDenied(ServletRequest servletRequest, ServletResponse servletResponse) throws Exception {</span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        String token = request.getHeader(&quot;Authorization&quot;);</span><br><span class="line">        if(StringUtils.isEmpty(token)) {</span><br><span class="line">            return true;</span><br><span class="line">        } else {</span><br><span class="line">            // &#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x8FC7;&#x671F;</span><br><span class="line">            Claims claim = jwtUtils.getClaimByToken(token);</span><br><span class="line">            if(claim == null || jwtUtils.isTokenExpired(claim.getExpiration())) {</span><br><span class="line">                throw new ExpiredCredentialsException(&quot;token&#x5DF2;&#x5931;&#x6548;&#xFF0C;&#x8BF7;&#x91CD;&#x65B0;&#x767B;&#x5F55;&#xFF01;&quot;);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        // &#x6267;&#x884C;&#x81EA;&#x52A8;&#x767B;&#x5F55;</span><br><span class="line">        return executeLogin(servletRequest, servletResponse);</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    protected boolean onLoginFailure(AuthenticationToken token, AuthenticationException e, ServletRequest request, ServletResponse response) {</span><br><span class="line">        HttpServletResponse httpResponse = (HttpServletResponse) response;</span><br><span class="line">        try {</span><br><span class="line">            //&#x5904;&#x7406;&#x767B;&#x5F55;&#x5931;&#x8D25;&#x7684;&#x5F02;&#x5E38;</span><br><span class="line">            Throwable throwable = e.getCause() == null ? e : e.getCause();</span><br><span class="line">            Result r = Result.fail(throwable.getMessage());</span><br><span class="line">            String json = JSONUtil.toJsonStr(r);</span><br><span class="line">            httpResponse.getWriter().print(json);</span><br><span class="line">        } catch (IOException e1) {</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line">    /**</span><br><span class="line">     * &#x5BF9;&#x8DE8;&#x57DF;&#x63D0;&#x4F9B;&#x652F;&#x6301;</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    protected boolean preHandle(ServletRequest request, ServletResponse response) throws Exception {</span><br><span class="line">        HttpServletRequest httpServletRequest = WebUtils.toHttp(request);</span><br><span class="line">        HttpServletResponse httpServletResponse = WebUtils.toHttp(response);</span><br><span class="line">        httpServletResponse.setHeader(&quot;Access-control-Allow-Origin&quot;, httpServletRequest.getHeader(&quot;Origin&quot;));</span><br><span class="line">        httpServletResponse.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET,POST,OPTIONS,PUT,DELETE&quot;);</span><br><span class="line">        httpServletResponse.setHeader(&quot;Access-Control-Allow-Headers&quot;, httpServletRequest.getHeader(&quot;Access-Control-Request-Headers&quot;));</span><br><span class="line">        // &#x8DE8;&#x57DF;&#x65F6;&#x4F1A;&#x9996;&#x5148;&#x53D1;&#x9001;&#x4E00;&#x4E2A;OPTIONS&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7ED9;OPTIONS&#x8BF7;&#x6C42;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x6B63;&#x5E38;&#x72B6;&#x6001;</span><br><span class="line">        if (httpServletRequest.getMethod().equals(RequestMethod.OPTIONS.name())) {</span><br><span class="line">            httpServletResponse.setStatus(org.springframework.http.HttpStatus.OK.value());</span><br><span class="line">            return false;</span><br><span class="line">        }</span><br><span class="line">        return super.preHandle(request, response);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x7684;shiro&#x5C31;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x6574;&#x5408;&#x8FDB;&#x6765;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x4E86;jwt&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x6821;&#x9A8C;&#x3002;</p>
<h3 id="5&#x3001;&#x5F02;&#x5E38;&#x5904;&#x7406;"><a href="#5&#x3001;&#x5F02;&#x5E38;&#x5904;&#x7406;" class="headerlink" title="5&#x3001;&#x5F02;&#x5E38;&#x5904;&#x7406;"></a>5&#x3001;&#x5F02;&#x5E38;&#x5904;&#x7406;</h3><p>&#x6709;&#x65F6;&#x5019;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x670D;&#x52A1;&#x5668;&#x62A5;&#x9519;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x914D;&#x7F6E;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x673A;&#x5236;&#xFF0C;&#x5C31;&#x4F1A;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;tomcat&#x6216;&#x8005;nginx&#x7684;5XX&#x9875;&#x9762;&#xFF0C;&#x5BF9;&#x666E;&#x901A;&#x7528;&#x6237;&#x6765;&#x8BF4;&#xFF0C;&#x4E0D;&#x592A;&#x53CB;&#x597D;&#xFF0C;&#x7528;&#x6237;&#x4E5F;&#x4E0D;&#x61C2;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x3002;&#x8FD9;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x7A0B;&#x5E8F;&#x5458;&#x8BBE;&#x8BA1;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x53CB;&#x597D;&#x7B80;&#x5355;&#x7684;&#x683C;&#x5F0F;&#x7ED9;&#x524D;&#x7AEF;&#x3002;</p>
<p>&#x5904;&#x7406;&#x529E;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;&#x901A;&#x8FC7;&#x4F7F;&#x7528;@ControllerAdvice&#x6765;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;@ExceptionHandler(value = RuntimeException.class)&#x6765;&#x6307;&#x5B9A;&#x6355;&#x83B7;&#x7684;Exception&#x5404;&#x4E2A;&#x7C7B;&#x578B;&#x5F02;&#x5E38; &#xFF0C;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x662F;&#x5168;&#x5C40;&#x7684;&#xFF0C;&#x6240;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x90FD;&#x4F1A;&#x8DD1;&#x5230;&#x8FD9;&#x4E2A;&#x5730;&#x65B9;&#x5904;&#x7406;&#x3002;</p>
<ul>
<li>com.markerhub.common.exception.GlobalExceptionHandler</li>
</ul>
<p>&#x6B65;&#x9AA4;&#x4E8C;&#x3001;&#x5B9A;&#x4E49;&#x5168;&#x5C40;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;@ControllerAdvice&#x8868;&#x793A;&#x5B9A;&#x4E49;&#x5168;&#x5C40;&#x63A7;&#x5236;&#x5668;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;@ExceptionHandler&#x8868;&#x793A;&#x9488;&#x5BF9;&#x6027;&#x5F02;&#x5E38;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x5BF9;&#x6BCF;&#x79CD;&#x5F02;&#x5E38;&#x9488;&#x5BF9;&#x6027;&#x5904;&#x7406;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x5168;&#x5C40;&#x5F02;&#x5E38;&#x5904;&#x7406;</span><br><span class="line"> */</span><br><span class="line">@Slf4j</span><br><span class="line">@RestControllerAdvice</span><br><span class="line">public class GlobalExcepitonHandler {</span><br><span class="line">    // &#x6355;&#x6349;shiro&#x7684;&#x5F02;&#x5E38;</span><br><span class="line">    @ResponseStatus(HttpStatus.UNAUTHORIZED)</span><br><span class="line">    @ExceptionHandler(ShiroException.class)</span><br><span class="line">    public Result handle401(ShiroException e) {</span><br><span class="line">        return Result.fail(401, e.getMessage(), null);</span><br><span class="line">    }</span><br><span class="line">    /**</span><br><span class="line">     * &#x5904;&#x7406;Assert&#x7684;&#x5F02;&#x5E38;</span><br><span class="line">     */</span><br><span class="line">    @ResponseStatus(HttpStatus.BAD_REQUEST)</span><br><span class="line">    @ExceptionHandler(value = IllegalArgumentException.class)</span><br><span class="line">    public Result handler(IllegalArgumentException e) throws IOException {</span><br><span class="line">        log.error(&quot;Assert&#x5F02;&#x5E38;:--------------&gt;{}&quot;,e.getMessage());</span><br><span class="line">        return Result.fail(e.getMessage());</span><br><span class="line">    }</span><br><span class="line">    /**</span><br><span class="line">     * @Validated &#x6821;&#x9A8C;&#x9519;&#x8BEF;&#x5F02;&#x5E38;&#x5904;&#x7406;</span><br><span class="line">     */</span><br><span class="line">    @ResponseStatus(HttpStatus.BAD_REQUEST)</span><br><span class="line">    @ExceptionHandler(value = MethodArgumentNotValidException.class)</span><br><span class="line">    public Result handler(MethodArgumentNotValidException e) throws IOException {</span><br><span class="line">        log.error(&quot;&#x8FD0;&#x884C;&#x65F6;&#x5F02;&#x5E38;:--------------&gt;&quot;,e);</span><br><span class="line">        BindingResult bindingResult = e.getBindingResult();</span><br><span class="line">        ObjectError objectError = bindingResult.getAllErrors().stream().findFirst().get();</span><br><span class="line">        return Result.fail(objectError.getDefaultMessage());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @ResponseStatus(HttpStatus.BAD_REQUEST)</span><br><span class="line">    @ExceptionHandler(value = RuntimeException.class)</span><br><span class="line">    public Result handler(RuntimeException e) throws IOException {</span><br><span class="line">        log.error(&quot;&#x8FD0;&#x884C;&#x65F6;&#x5F02;&#x5E38;:--------------&gt;&quot;,e);</span><br><span class="line">        return Result.fail(e.getMessage());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x6355;&#x6349;&#x4E86;&#x51E0;&#x4E2A;&#x5F02;&#x5E38;&#xFF1A;</p>
<ul>
<li>ShiroException&#xFF1A;shiro&#x629B;&#x51FA;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x6BD4;&#x5982;&#x6CA1;&#x6709;&#x6743;&#x9650;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x5F02;&#x5E38;</li>
<li>IllegalArgumentException&#xFF1A;&#x5904;&#x7406;Assert&#x7684;&#x5F02;&#x5E38;</li>
<li>MethodArgumentNotValidException&#xFF1A;&#x5904;&#x7406;&#x5B9E;&#x4F53;&#x6821;&#x9A8C;&#x7684;&#x5F02;&#x5E38;</li>
<li>RuntimeException&#xFF1A;&#x6355;&#x6349;&#x5176;&#x4ED6;&#x5F02;&#x5E38;</li>
</ul>
<h3 id="6&#x3001;&#x5B9E;&#x4F53;&#x6821;&#x9A8C;"><a href="#6&#x3001;&#x5B9E;&#x4F53;&#x6821;&#x9A8C;" class="headerlink" title="6&#x3001;&#x5B9E;&#x4F53;&#x6821;&#x9A8C;"></a>6&#x3001;&#x5B9E;&#x4F53;&#x6821;&#x9A8C;</h3><p>&#x5F53;&#x6211;&#x4EEC;&#x8868;&#x5355;&#x6570;&#x636E;&#x63D0;&#x4EA4;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x524D;&#x7AEF;&#x7684;&#x6821;&#x9A8C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x7C7B;&#x4F3C;&#x4E8E;jQuery Validate&#x7B49;js&#x63D2;&#x4EF6;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x540E;&#x7AEF;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Hibernate validatior&#x6765;&#x505A;&#x6821;&#x9A8C;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;springboot&#x6846;&#x67B6;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5DF2;&#x7ECF;&#x81EA;&#x52A8;&#x96C6;&#x6210;&#x4E86;Hibernate validatior&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x7528;&#x8D77;&#x6765;&#x5565;&#x6837;&#x5B50;&#x7684;&#x5462;&#xFF1F;</p>
<p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x9996;&#x5148;&#x5728;&#x5B9E;&#x4F53;&#x7684;&#x5C5E;&#x6027;&#x4E0A;&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x7684;&#x6821;&#x9A8C;&#x89C4;&#x5219;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@TableName(&quot;m_user&quot;)</span><br><span class="line">public class User implements Serializable {</span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line">    @TableId(value = &quot;id&quot;, type = IdType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line">    @NotBlank(message = &quot;&#x6635;&#x79F0;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;&quot;)</span><br><span class="line">    private String username;</span><br><span class="line">    @NotBlank(message = &quot;&#x90AE;&#x7BB1;&#x4E0D;&#x80FD;&#x4E3A;&#x7A7A;&quot;)</span><br><span class="line">    @Email(message = &quot;&#x90AE;&#x7BB1;&#x683C;&#x5F0F;&#x4E0D;&#x6B63;&#x786E;&quot;)</span><br><span class="line">    private String email;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7B2C;&#x4E8C;&#x6B65; &#xFF1A;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;@Validated&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x679C;&#x5B9E;&#x4F53;&#x4E0D;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x4E2D;&#x5C31;&#x6355;&#x83B7;&#x5230;MethodArgumentNotValidException&#x3002;</p>
<ul>
<li>com.markerhub.controller.UserController</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x6D4B;&#x8BD5;&#x5B9E;&#x4F53;&#x6821;&#x9A8C;</span><br><span class="line"> * @param user</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">@PostMapping(&quot;/save&quot;)</span><br><span class="line">public Object testUser(@Validated @RequestBody User user) {</span><br><span class="line">    return user.toString();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="7&#x3001;&#x8DE8;&#x57DF;&#x95EE;&#x9898;"><a href="#7&#x3001;&#x8DE8;&#x57DF;&#x95EE;&#x9898;" class="headerlink" title="7&#x3001;&#x8DE8;&#x57DF;&#x95EE;&#x9898;"></a>7&#x3001;&#x8DE8;&#x57DF;&#x95EE;&#x9898;</h3><p>&#x56E0;&#x4E3A;&#x662F;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x4EE5;&#x8DE8;&#x57DF;&#x95EE;&#x9898;&#x662F;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;&#x540E;&#x53F0;&#x8FDB;&#x884C;&#x5168;&#x5C40;&#x8DE8;&#x57DF;&#x5904;&#x7406;&#xFF1A;</p>
<ul>
<li>com.markerhub.config.CorsConfig</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x89E3;&#x51B3;&#x8DE8;&#x57DF;&#x95EE;&#x9898;</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class CorsConfig implements WebMvcConfigurer {</span><br><span class="line">    @Override</span><br><span class="line">    public void addCorsMappings(CorsRegistry registry) {</span><br><span class="line">        registry.addMapping(&quot;/**&quot;)</span><br><span class="line">                .allowedOrigins(&quot;*&quot;)</span><br><span class="line">                .allowedMethods(&quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;)</span><br><span class="line">                .allowCredentials(true)</span><br><span class="line">                .maxAge(3600)</span><br><span class="line">                .allowedHeaders(&quot;*&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>ok&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#x7684;&#x63A5;&#x53E3;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5C31;&#x4E0D;&#x96C6;&#x6210;swagger2&#x5566;&#xFF0C;&#x4E5F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x800C;&#x5DF2;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5C31;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x6211;&#x4EEC;&#x7684;&#x6B63;&#x9898;&#xFF0C;&#x8FDB;&#x884C;&#x7F16;&#x5199;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x3002;</p>
<h3 id="8&#x3001;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5F00;&#x53D1;"><a href="#8&#x3001;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5F00;&#x53D1;" class="headerlink" title="8&#x3001;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5F00;&#x53D1;"></a>8&#x3001;&#x767B;&#x5F55;&#x63A5;&#x53E3;&#x5F00;&#x53D1;</h3><p>&#x767B;&#x5F55;&#x7684;&#x903B;&#x8F91;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x7B54;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x63A5;&#x53D7;&#x8D26;&#x53F7;&#x5BC6;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x7528;&#x6237;&#x7684;id&#x751F;&#x6210;jwt&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x6BB5;&#xFF0C;&#x4E3A;&#x4E86;&#x540E;&#x7EED;&#x7684;jwt&#x7684;&#x5EF6;&#x671F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x628A;jwt&#x653E;&#x5728;header&#x4E0A;&#x3002;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>com.markerhub.controller.AccountController</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;@RestController</span><br><span class="line">public class AccountController {</span><br><span class="line">    @Autowired</span><br><span class="line">    JwtUtils jwtUtils;</span><br><span class="line">    @Autowired</span><br><span class="line">    UserService userService;</span><br><span class="line">    /**</span><br><span class="line">     * &#x9ED8;&#x8BA4;&#x8D26;&#x53F7;&#x5BC6;&#x7801;&#xFF1A;markerhub / 111111</span><br><span class="line">     *</span><br><span class="line">     */</span><br><span class="line">    @CrossOrigin</span><br><span class="line">    @PostMapping(&quot;/login&quot;)</span><br><span class="line">    public Result login(@Validated @RequestBody LoginDto loginDto, HttpServletResponse response) {</span><br><span class="line">        User user = userService.getOne(new QueryWrapper&lt;User&gt;().eq(&quot;username&quot;, loginDto.getUsername()));</span><br><span class="line">        Assert.notNull(user, &quot;&#x7528;&#x6237;&#x4E0D;&#x5B58;&#x5728;&quot;);</span><br><span class="line">        if(!user.getPassword().equals(SecureUtil.md5(loginDto.getPassword()))) {</span><br><span class="line">            return Result.fail(&quot;&#x5BC6;&#x7801;&#x9519;&#x8BEF;&#xFF01;&quot;);</span><br><span class="line">        }</span><br><span class="line">        String jwt = jwtUtils.generateToken(user.getId());</span><br><span class="line">        response.setHeader(&quot;Authorization&quot;, jwt);</span><br><span class="line">        response.setHeader(&quot;Access-Control-Expose-Headers&quot;, &quot;Authorization&quot;);</span><br><span class="line">        // &#x7528;&#x6237;&#x53EF;&#x4EE5;&#x53E6;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;</span><br><span class="line">        return Result.succ(MapUtil.builder()</span><br><span class="line">                .put(&quot;id&quot;, user.getId())</span><br><span class="line">                .put(&quot;username&quot;, user.getUsername())</span><br><span class="line">                .put(&quot;avatar&quot;, user.getAvatar())</span><br><span class="line">                .put(&quot;email&quot;, user.getEmail())</span><br><span class="line">                .map()</span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x9000;&#x51FA;</span><br><span class="line">    @GetMapping(&quot;/logout&quot;)</span><br><span class="line">    @RequiresAuthentication</span><br><span class="line">    public Result logout() {</span><br><span class="line">        SecurityUtils.getSubject().logout();</span><br><span class="line">        return Result.succ(null);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x63A5;&#x53E3;&#x6D4B;&#x8BD5;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/773856b6be76b4cc1b98e60868adc86fb5c037a7126091260501071c27caddb1" alt="&#x56FE;&#x7247;"></p>
<h3 id="9&#x3001;&#x535A;&#x5BA2;&#x63A5;&#x53E3;&#x5F00;&#x53D1;"><a href="#9&#x3001;&#x535A;&#x5BA2;&#x63A5;&#x53E3;&#x5F00;&#x53D1;" class="headerlink" title="9&#x3001;&#x535A;&#x5BA2;&#x63A5;&#x53E3;&#x5F00;&#x53D1;"></a>9&#x3001;&#x535A;&#x5BA2;&#x63A5;&#x53E3;&#x5F00;&#x53D1;</h3><p>&#x6211;&#x4EEC;&#x7684;&#x9AA8;&#x67B6;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;&#x4E86;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EE5;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x535A;&#x5BA2;&#x5217;&#x8868;&#x3001;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;&#x9875;&#x4E3A;&#x4F8B;&#x5B50;&#x5F00;&#x53D1;&#xFF1A;</p>
<ul>
<li>com.markerhub.controller.BlogController</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;@RestController</span><br><span class="line">public class BlogController {</span><br><span class="line">    @Autowired</span><br><span class="line">    BlogService blogService;</span><br><span class="line">    @GetMapping(&quot;/blogs&quot;)</span><br><span class="line">    public Result blogs(Integer currentPage) {</span><br><span class="line">        if(currentPage == null || currentPage &lt; 1) currentPage = 1;</span><br><span class="line">        Page page = new Page(currentPage, 5)</span><br><span class="line">        IPage pageData = blogService.page(page, new QueryWrapper&lt;Blog&gt;().orderByDesc(&quot;created&quot;));</span><br><span class="line">        return Result.succ(pageData);</span><br><span class="line">    }</span><br><span class="line">    @GetMapping(&quot;/blog/{id}&quot;)</span><br><span class="line">    public Result detail(@PathVariable(name = &quot;id&quot;) Long id) {</span><br><span class="line">        Blog blog = blogService.getById(id);</span><br><span class="line">        Assert.notNull(blog, &quot;&#x8BE5;&#x535A;&#x5BA2;&#x5DF2;&#x5220;&#x9664;&#xFF01;&quot;);</span><br><span class="line">        return Result.succ(blog);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    @RequiresAuthentication</span><br><span class="line">@PostMapping(&quot;/blog/edit&quot;)</span><br><span class="line">public Result edit(@Validated @RequestBody Blog blog) {</span><br><span class="line">    System.out.println(blog.toString());</span><br><span class="line">    Blog temp = null;</span><br><span class="line">    if(blog.getId() != null) {</span><br><span class="line">        temp = blogService.getById(blog.getId());</span><br><span class="line">        Assert.isTrue(temp.getUserId() == ShiroUtil.getProfile().getId(), &quot;&#x6CA1;&#x6709;&#x6743;&#x9650;&#x7F16;&#x8F91;&quot;);</span><br><span class="line">    } else {</span><br><span class="line">        temp = new Blog();</span><br><span class="line">        temp.setUserId(ShiroUtil.getProfile().getId());</span><br><span class="line">        temp.setCreated(LocalDateTime.now());</span><br><span class="line">        temp.setStatus(0);</span><br><span class="line">    }</span><br><span class="line">    BeanUtil.copyProperties(blog, temp, &quot;id&quot;, &quot;userId&quot;, &quot;created&quot;, &quot;status&quot;);</span><br><span class="line">    blogService.saveOrUpdate(temp);</span><br><span class="line">    return Result.succ(&quot;&#x64CD;&#x4F5C;&#x6210;&#x529F;&quot;, null);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x610F;@RequiresAuthentication&#x8BF4;&#x660E;&#x9700;&#x8981;&#x767B;&#x5F55;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x4ED6;&#x9700;&#x8981;&#x6743;&#x9650;&#x7684;&#x63A5;&#x53E3;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;shiro&#x7684;&#x76F8;&#x5173;&#x6CE8;&#x89E3;&#x3002;<br>&#x63A5;&#x53E3;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x57FA;&#x672C;&#x589E;&#x5220;&#x6539;&#x67E5;&#x800C;&#x5DF2;&#x3002;&#x6CE8;&#x610F;&#x7684;&#x662F;edit&#x65B9;&#x6CD5;&#x662F;&#x9700;&#x8981;&#x767B;&#x5F55;&#x624D;&#x80FD;&#x64CD;&#x4F5C;&#x7684;&#x53D7;&#x9650;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x63A5;&#x53E3;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/14720e97000f5f8cc0804f4e2356080664240219cf7e5adc0179c202a1617a61" alt="&#x56FE;&#x7247;"></p>
<h3 id="10&#x3001;&#x540E;&#x7AEF;&#x603B;&#x7ED3;"><a href="#10&#x3001;&#x540E;&#x7AEF;&#x603B;&#x7ED3;" class="headerlink" title="10&#x3001;&#x540E;&#x7AEF;&#x603B;&#x7ED3;"></a>10&#x3001;&#x540E;&#x7AEF;&#x603B;&#x7ED3;</h3><p>&#x597D;&#x4E86;&#xFF0C;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x641E;&#x5B9A;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x9AA8;&#x67B6;&#xFF0C;&#x597D;&#x50CF;&#x6709;&#x70B9;&#x8D76;&#xFF0C;&#x4F46;&#x662F;&#x57FA;&#x672C;&#x7684;&#x4E1C;&#x897F;&#x8FD9;&#x91CC;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x3002;&#x540E;&#x9762;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x53BB;&#x5F00;&#x53D1;&#x6211;&#x4EEC;&#x7684;&#x524D;&#x7AEF;&#x63A5;&#x53E3;&#x4E86;&#x3002;</p>
<p>&#x9879;&#x76EE;&#x89C6;&#x9891;&#xFF1A;<a href="/external_links/ee2628e8e383ef57188cf91d88acc4cf.html" target="blank" rel="noopener">www.bilibili.com/video/BV1PQ&#x2026;</a></p>
<h2 id="Vue&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;"><a href="#Vue&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;" class="headerlink" title="Vue&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;"></a>Vue&#x524D;&#x7AEF;&#x9875;&#x9762;&#x5F00;&#x53D1;</h2><h3 id="1&#x3001;&#x524D;&#x8A00;-1"><a href="#1&#x3001;&#x524D;&#x8A00;-1" class="headerlink" title="1&#x3001;&#x524D;&#x8A00;"></a>1&#x3001;&#x524D;&#x8A00;</h3><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5B8C;&#x6210;vueblog&#x524D;&#x7AEF;&#x7684;&#x90E8;&#x5206;&#x529F;&#x80FD;&#x3002;&#x53EF;&#x80FD;&#x4F1A;&#x4F7F;&#x7528;&#x7684;&#x5230;&#x6280;&#x672F;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>vue</li>
<li>element-ui</li>
<li>axios</li>
<li>mavon-editor</li>
<li>markdown-it</li>
<li>github-markdown-css</li>
</ul>
<p>&#x672C;&#x9879;&#x76EE;&#x5B9E;&#x8DF5;&#x9700;&#x8981;&#x4E00;&#x70B9;&#x70B9;vue&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x5E0C;&#x671B;&#x4F60;&#x5BF9;vue&#x7684;&#x4E00;&#x4E9B;&#x6307;&#x4EE4;&#x6709;&#x6240;&#x4E86;&#x89E3;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x8D77;&#x6765;&#x5C31;&#x7B80;&#x5355;&#x591A;&#x4E86;&#x54C8;&#x3002;</p>
<h3 id="2&#x3001;&#x9879;&#x76EE;&#x6F14;&#x793A;"><a href="#2&#x3001;&#x9879;&#x76EE;&#x6F14;&#x793A;" class="headerlink" title="2&#x3001;&#x9879;&#x76EE;&#x6F14;&#x793A;"></a>2&#x3001;&#x9879;&#x76EE;&#x6F14;&#x793A;</h3><p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B8C;&#x6210;&#x7684;&#x9879;&#x76EE;&#x957F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x5F88;&#x591A;&#x540C;&#x5B66;&#x7684;&#x6837;&#x5F0F;&#x7684;&#x638C;&#x63E1;&#x7A0B;&#x5EA6;&#x4E0D;&#x591F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x4E86;element-ui&#x7684;&#x539F;&#x751F;&#x7EC4;&#x4EF6;&#x7684;&#x6837;&#x5F0F;&#x6765;&#x5B8C;&#x6210;&#x6574;&#x4E2A;&#x535A;&#x5BA2;&#x7684;&#x754C;&#x9762;&#x3002;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x76F4;&#x63A5;&#x4E0A;&#x56FE;&#xFF1A;</p>
<p>&#x5728;&#x7EBF;&#x4F53;&#x9A8C;&#xFF1A;<a href="/external_links/f8757b6a3ba5eb79143c818106b3906a.html" target="blank" rel="noopener">markerhub.com:8083</a></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/c84534f3b30b9703628fe5dce12b4b9dc2b64ed0e515d7114f6d00de2282ac81" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/08c2677c22c0de831c7cccd7bb974cfab0ffc2a9d83bdb3f2fb008047b03975b" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/1a68568ca84e8d700f82649bdfc6da2aee13397b00188251c35492e7410cc703" alt="&#x56FE;&#x7247;"></p>
<h3 id="3&#x3001;&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#3&#x3001;&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="3&#x3001;&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>3&#x3001;&#x73AF;&#x5883;&#x51C6;&#x5907;</h3><p>&#x4E07;&#x4E08;&#x9AD8;&#x697C;&#x5E73;&#x5730;&#x8D77;&#xFF0C;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5B89;&#x88C5;vue&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x6211;&#x5B9E;&#x8DF5;&#x7684;&#x73AF;&#x5883;&#x662F;windows 10&#x54C8;&#x3002;</p>
<p>1&#x3001;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x4E0A;node.js&#x5B98;&#x7F51;(<a href="/external_links/69ac8df6d65654a4d510da7a50f6b240.html" target="blank" rel="noopener">nodejs.org/zh-cn/</a>)&#xFF0C;&#x4E0B;&#x8F7D;&#x6700;&#x65B0;&#x7684;&#x957F;&#x671F;&#x7248;&#x672C;&#xFF0C;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5DF2;&#x7ECF;&#x5177;&#x5907;&#x4E86;node&#x548C;npm&#x7684;&#x73AF;&#x5883;&#x5566;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d8427997ddf541a7279c50c809016a094689cecc76f7275967b65f3b14405791" alt="&#x56FE;&#x7247;"></p>
<p>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x68C0;&#x67E5;&#x4E0B;&#x7248;&#x672C;&#x4FE1;&#x606F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/8da5278a36e2e66d661865a1f55184009d7b73c1a790cbaf660425887d908166" alt="&#x56FE;&#x7247;"></p>
<p>2&#x3001;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5B89;&#x88C5;vue&#x7684;&#x73AF;&#x5883;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x5B89;&#x88C5;&#x6DD8;&#x5B9D;npm</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"># vue-cli &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x5305;</span><br><span class="line">cnpm install --g vue-cli</span><br></pre></td></tr></table></figure>

<h3 id="4&#x3001;&#x65B0;&#x5EFA;&#x9879;&#x76EE;"><a href="#4&#x3001;&#x65B0;&#x5EFA;&#x9879;&#x76EE;" class="headerlink" title="4&#x3001;&#x65B0;&#x5EFA;&#x9879;&#x76EE;"></a>4&#x3001;&#x65B0;&#x5EFA;&#x9879;&#x76EE;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x6253;&#x5F00;vue&#x7684;&#x53EF;&#x89C6;&#x5316;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x754C;&#x9762;</span><br><span class="line">vue ui</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x5B89;&#x88C5;&#x4E86;&#x6DD8;&#x5B9D;npm&#xFF0C;cnpm&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#x7684;&#x901F;&#x5EA6;&#x3002;vue ui&#x662F;@vue/cli3.0&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x53EF;&#x89C6;&#x5316;&#x9879;&#x76EE;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x9879;&#x76EE;&#x3001;&#x6253;&#x5305;&#x9879;&#x76EE;&#xFF0C;&#x68C0;&#x67E5;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x5BF9;&#x4E8E;&#x521D;&#x5B66;&#x8005;&#x6765;&#x8BF4;&#xFF0C;&#x53EF;&#x4EE5;&#x5C11;&#x8BB0;&#x4E00;&#x4E9B;&#x547D;&#x4EE4;&#xFF0C;&#x54C8;&#x54C8;&#x3002;<br>3&#x3001;&#x521B;&#x5EFA;vueblog-vue&#x9879;&#x76EE;</p>
<p>&#x8FD0;&#x884C;vue ui&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x4E3A;&#x6211;&#x4EEC;&#x6253;&#x5F00;&#x4E00;&#x4E2A;<a href="/external_links/37d007a56d816107ce5b52c10342db37.html" target="blank" rel="noopener">http://localhost:8080</a> &#x7684;&#x9875;&#x9762;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/8f695f47a15fbb1f2326ee48b75d05aa92b51d16c3cfebec4ad838a37e46c54d" alt="&#x56FE;&#x7247;"></p>
<p>&#x7136;&#x540E;&#x5207;&#x6362;&#x5230;&#x3010;&#x521B;&#x5EFA;&#x3011;&#xFF0C;&#x6CE8;&#x610F;&#x521B;&#x5EFA;&#x7684;&#x76EE;&#x5F55;&#x6700;&#x597D;&#x662F;&#x548C;&#x4F60;&#x8FD0;&#x884C;vue ui&#x540C;&#x4E00;&#x7EA7;&#x3002;&#x8FD9;&#x6837;&#x65B9;&#x4FBF;&#x7BA1;&#x7406;&#x548C;&#x5207;&#x6362;&#x3002;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x6309;&#x94AE;&#x3010;&#x5728;&#x6B64;&#x521B;&#x5EFA;&#x65B0;&#x7FA1;&#x6155;&#x3011;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d0d745cde09e489eaee96f24e163f95b2a044ca3d4b83c21bb3f52aaa22bae65" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E0B;&#x4E00;&#x6B65;&#x4E2D;&#xFF0C;&#x9879;&#x76EE;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x8F93;&#x5165;&#x9879;&#x76EE;&#x540D;&#x79F0;&#x201C;vueblog-vue&#x201D;&#xFF0C;&#x5176;&#x4ED6;&#x4E0D;&#x7528;&#x6539;&#xFF0C;&#x70B9;&#x51FB;&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x9009;&#x62E9;&#x3010;&#x624B;&#x52A8;&#x3011;&#xFF0C;&#x518D;&#x70B9;&#x51FB;&#x4E0B;&#x4E00;&#x6B65;&#xFF0C;&#x5982;&#x56FE;&#x70B9;&#x51FB;&#x6309;&#x94AE;&#xFF0C;&#x52FE;&#x9009;&#x4E0A;&#x8DEF;&#x7531;Router&#x3001;&#x72B6;&#x6001;&#x7BA1;&#x7406;Vuex&#xFF0C;&#x53BB;&#x6389;js&#x7684;&#x6821;&#x9A8C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6e82ce8fcd9d3618cd4dafe6a61b2c5282ebcc0c93f62f132b74a43583cea107" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E0B;&#x4E00;&#x6B65;&#x4E2D;&#xFF0C;&#x4E5F;&#x9009;&#x4E0A;&#x3010;Use history mode for router&#x3011;&#xFF0C;&#x70B9;&#x51FB;&#x521B;&#x5EFA;&#x9879;&#x76EE;&#xFF0C;&#x7136;&#x540E;&#x5F39;&#x7A97;&#x4E2D;&#x9009;&#x62E9;&#x6309;&#x94AE;&#x3010;&#x521B;&#x5EFA;&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x4FDD;&#x5B58;&#x9884;&#x8BBE;&#x3011;&#xFF0C;&#x5C31;&#x8FDB;&#x5165;&#x9879;&#x76EE;&#x521B;&#x5EFA;&#x5566;&#x3002;</p>
<p>&#x7A0D;&#x7B49;&#x7247;&#x523B;&#x4E4B;&#x540E;&#xFF0C;&#x9879;&#x76EE;&#x5C31;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#x4E86;&#x3002;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;vue&#x9879;&#x76EE;&#xFF0C;&#x5E76;&#x4E14;&#x5B89;&#x88C5;&#x4E86;Router&#x3001;Vuex&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x540E;&#x9762;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x6574;&#x4E2A;vueblog-vue&#x7684;&#x9879;&#x76EE;&#x7ED3;&#x6784;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;&#x251C;&#x2500;&#x2500; README.md&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x9879;&#x76EE;&#x4ECB;&#x7ECD;</span><br><span class="line">&#x251C;&#x2500;&#x2500; index.html&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x5165;&#x53E3;&#x9875;&#x9762;</span><br><span class="line">&#x251C;&#x2500;&#x2500; build&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x6784;&#x5EFA;&#x811A;&#x672C;&#x76EE;&#x5F55;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; build-server.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x8FD0;&#x884C;&#x672C;&#x5730;&#x6784;&#x5EFA;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x6784;&#x5EFA;&#x540E;&#x7684;&#x9875;&#x9762;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; build.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x751F;&#x4EA7;&#x73AF;&#x5883;&#x6784;&#x5EFA;&#x811A;&#x672C;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; dev-client.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;&#x70ED;&#x91CD;&#x8F7D;&#x811A;&#x672C;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5F00;&#x53D1;&#x9636;&#x6BB5;&#x7684;&#x9875;&#x9762;&#x81EA;&#x52A8;&#x5237;&#x65B0;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; dev-server.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x8FD0;&#x884C;&#x672C;&#x5730;&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x5668;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; utils.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x6784;&#x5EFA;&#x76F8;&#x5173;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; webpack.base.conf.js&#xA0; &#xA0; &#xA0; wabpack&#x57FA;&#x7840;&#x914D;&#x7F6E;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; webpack.dev.conf.js&#xA0; &#xA0; &#xA0; &#xA0;wabpack&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x914D;&#x7F6E;</span><br><span class="line">&#x2502;&#xA0; &#x2514;&#x2500;&#x2500; webpack.prod.conf.js&#xA0; &#xA0; &#xA0; wabpack&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x914D;&#x7F6E;</span><br><span class="line">&#x251C;&#x2500;&#x2500; config&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x9879;&#x76EE;&#x914D;&#x7F6E;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; dev.env.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; index.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x9879;&#x76EE;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; prod.env.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span><br><span class="line">&#x2502;&#xA0; &#x2514;&#x2500;&#x2500; test.env.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x6D4B;&#x8BD5;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span><br><span class="line">&#x251C;&#x2500;&#x2500; mock&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; mock&#x6570;&#x636E;&#x76EE;&#x5F55;</span><br><span class="line">&#x2502;&#xA0; &#x2514;&#x2500;&#x2500; hello.js</span><br><span class="line">&#x251C;&#x2500;&#x2500; package.json&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; npm&#x5305;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x5B9A;&#x4E49;&#x4E86;&#x9879;&#x76EE;&#x7684;npm&#x811A;&#x672C;&#xFF0C;&#x4F9D;&#x8D56;&#x5305;&#x7B49;&#x4FE1;&#x606F;</span><br><span class="line">&#x251C;&#x2500;&#x2500; src&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x6E90;&#x7801;&#x76EE;&#x5F55;&#xA0;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; main.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x5165;&#x53E3;js&#x6587;&#x4EF6;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; app.vue&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x6839;&#x7EC4;&#x4EF6;</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; components&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x76EE;&#x5F55;</span><br><span class="line">&#x2502;&#xA0; &#x2502;&#xA0; &#x2514;&#x2500;&#x2500; title.vue</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; assets&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x8D44;&#x6E90;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x8D44;&#x6E90;&#x4F1A;&#x88AB;wabpack&#x6784;&#x5EFA;</span><br><span class="line">&#x2502;&#xA0; &#x2502;&#xA0; &#x2514;&#x2500;&#x2500; images</span><br><span class="line">&#x2502;&#xA0; &#x2502;&#xA0; &#xA0; &#x2514;&#x2500;&#x2500; logo.png</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; routes&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x524D;&#x7AEF;&#x8DEF;&#x7531;</span><br><span class="line">&#x2502;&#xA0; &#x2502;&#xA0; &#x2514;&#x2500;&#x2500; index.js</span><br><span class="line">&#x2502;&#xA0; &#x251C;&#x2500;&#x2500; store&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x5E94;&#x7528;&#x7EA7;&#x6570;&#x636E;&#xFF08;state&#xFF09;&#x72B6;&#x6001;&#x7BA1;&#x7406;</span><br><span class="line">&#x2502;&#xA0; &#x2502;&#xA0; &#x2514;&#x2500;&#x2500; index.js</span><br><span class="line">&#x2502;&#xA0; &#x2514;&#x2500;&#x2500; views&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x9875;&#x9762;&#x76EE;&#x5F55;</span><br><span class="line">&#x2502;&#xA0; &#xA0; &#x251C;&#x2500;&#x2500; hello.vue</span><br><span class="line">&#x2502;&#xA0; &#xA0; &#x2514;&#x2500;&#x2500; notfound.vue</span><br><span class="line">&#x251C;&#x2500;&#x2500; static&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#x7EAF;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x4E0D;&#x4F1A;&#x88AB;wabpack&#x6784;&#x5EFA;&#x3002;</span><br><span class="line">&#x2514;&#x2500;&#x2500; test&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x6D4B;&#x8BD5;&#x6587;&#x4EF6;&#x76EE;&#x5F55;&#xFF08;unit&amp;e2e&#xFF09;</span><br><span class="line">&#xA0; &#x2514;&#x2500;&#x2500; unit&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x5355;&#x5143;&#x6D4B;&#x8BD5;</span><br><span class="line">&#xA0; &#xA0; &#x251C;&#x2500;&#x2500; index.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x5165;&#x53E3;&#x811A;&#x672C;</span><br><span class="line">&#xA0; &#xA0; &#x251C;&#x2500;&#x2500; karma.conf.js&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; karma&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line">&#xA0; &#xA0; &#x2514;&#x2500;&#x2500; specs&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#x5355;&#x6D4B;case&#x76EE;&#x5F55;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#x2514;&#x2500;&#x2500; Hello.spec.js</span><br></pre></td></tr></table></figure>

<h3 id="5&#x3001;&#x5B89;&#x88C5;element-ui"><a href="#5&#x3001;&#x5B89;&#x88C5;element-ui" class="headerlink" title="5&#x3001;&#x5B89;&#x88C5;element-ui"></a>5&#x3001;&#x5B89;&#x88C5;element-ui</h3><p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5F15;&#x5165;element-ui&#x7EC4;&#x4EF6;&#xFF08;<a href="/external_links/0ea9b5303ccd6111f4cc1af17a1e8b04.html" target="blank" rel="noopener">element.eleme.cn</a>&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x597D;&#x770B;&#x7684;vue&#x7EC4;&#x4EF6;&#xFF0C;&#x5F00;&#x53D1;&#x597D;&#x770B;&#x7684;&#x535A;&#x5BA2;&#x754C;&#x9762;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/be6f616fef7e4b80c7b1ca8ac9a3ce629d96f6a5ce5127dd7bb286315de01e7a" alt="&#x56FE;&#x7247;"></p>
<p>&#x547D;&#x4EE4;&#x5F88;&#x7B80;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x5207;&#x6362;&#x5230;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;</span><br><span class="line">cd vueblog-vue</span><br><span class="line"># &#x5B89;&#x88C5;element-ui</span><br><span class="line">cnpm install element-ui --save</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x6253;&#x5F00;&#x9879;&#x76EE;src&#x76EE;&#x5F55;&#x4E0B;&#x7684;main.js&#xFF0C;&#x5F15;&#x5165;element-ui&#x4F9D;&#x8D56;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import Element from &apos;element-ui&apos;</span><br><span class="line">import &quot;element-ui/lib/theme-chalk/index.css&quot;</span><br><span class="line">Vue.use(Element)</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x6109;&#x5FEB;&#x5F97;&#x5728;&#x5B98;&#x7F51;&#x4E0A;&#x9009;&#x62E9;&#x7EC4;&#x4EF6;&#x590D;&#x5236;&#x4EE3;&#x7801;&#x5230;&#x6211;&#x4EEC;&#x9879;&#x76EE;&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5566;&#x3002;</p>
<h3 id="6&#x3001;&#x5B89;&#x88C5;axios"><a href="#6&#x3001;&#x5B89;&#x88C5;axios" class="headerlink" title="6&#x3001;&#x5B89;&#x88C5;axios"></a>6&#x3001;&#x5B89;&#x88C5;axios</h3><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5B89;&#x88C5;axios&#xFF08;<a href="/external_links/841f070af2f5887542c912f26bdbeb04.html" target="blank" rel="noopener">www.axios-js.com/</a>&#xFF09;&#xFF0C;axios&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E; promise &#x7684; HTTP &#x5E93;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x524D;&#x540E;&#x7AEF;&#x5BF9;&#x63A5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<p>&#x5B89;&#x88C5;&#x547D;&#x4EE4;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;cnpm install axios --save</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x540C;&#x6837;&#x6211;&#x4EEC;&#x5728;main.js&#x4E2D;&#x5168;&#x5C40;&#x5F15;&#x5165;axios&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import axios from &apos;axios&apos;</span><br><span class="line">Vue.prototype.$axios = axios //</span><br></pre></td></tr></table></figure>

<p>&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;this.$axios.get()&#x6765;&#x53D1;&#x8D77;&#x6211;&#x4EEC;&#x7684;&#x8BF7;&#x6C42;&#x4E86;&#x54C8;&#x3002;</p>
<h3 id="7&#x3001;&#x9875;&#x9762;&#x8DEF;&#x7531;"><a href="#7&#x3001;&#x9875;&#x9762;&#x8DEF;&#x7531;" class="headerlink" title="7&#x3001;&#x9875;&#x9762;&#x8DEF;&#x7531;"></a>7&#x3001;&#x9875;&#x9762;&#x8DEF;&#x7531;</h3><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x5B9A;&#x4E49;&#x597D;&#x8DEF;&#x7531;&#x548C;&#x9875;&#x9762;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x505A;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x535A;&#x5BA2;&#x9879;&#x76EE;&#xFF0C;&#x9875;&#x9762;&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5148;&#x5B9A;&#x4E49;&#x597D;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x6162;&#x6162;&#x5F00;&#x53D1;&#xFF0C;&#x8FD9;&#x6837;&#x9700;&#x8981;&#x7528;&#x5230;&#x94FE;&#x63A5;&#x7684;&#x5730;&#x65B9;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF1A;</p>
<p>&#x6211;&#x4EEC;&#x5728;views&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x5B9A;&#x4E49;&#x51E0;&#x4E2A;&#x9875;&#x9762;&#xFF1A;</p>
<ul>
<li>BlogDetail.vue&#xFF08;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;&#x9875;&#xFF09;</li>
<li>BlogEdit.vue&#xFF08;&#x7F16;&#x8F91;&#x535A;&#x5BA2;&#xFF09;</li>
<li>Blogs.vue&#xFF08;&#x535A;&#x5BA2;&#x5217;&#x8868;&#xFF09;</li>
<li>Login.vue&#xFF08;&#x767B;&#x5F55;&#x9875;&#x9762;&#xFF09;</li>
</ul>
<p>&#x7136;&#x540E;&#x518D;&#x8DEF;&#x7531;&#x4E2D;&#x5FC3;&#x914D;&#x7F6E;&#xFF1A;</p>
<ul>
<li>router\index.js</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import Vue from &apos;vue&apos;</span><br><span class="line">import VueRouter from &apos;vue-router&apos;</span><br><span class="line">import Login from &apos;../views/Login.vue&apos;</span><br><span class="line">import BlogDetail from &apos;../views/BlogDetail.vue&apos;</span><br><span class="line">import BlogEdit from &apos;../views/BlogEdit.vue&apos;</span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line">const routes = [</span><br><span class="line">  {</span><br><span class="line">    path: &apos;/&apos;,</span><br><span class="line">    name: &apos;Index&apos;,</span><br><span class="line">    redirect: { name: &apos;Blogs&apos; }</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    path: &apos;/login&apos;,</span><br><span class="line">    name: &apos;Login&apos;,</span><br><span class="line">    component: Login</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    path: &apos;/blogs&apos;,</span><br><span class="line">    name: &apos;Blogs&apos;,</span><br><span class="line">    // &#x61D2;&#x52A0;&#x8F7D;</span><br><span class="line">    component: () =&gt; import(&apos;../views/Blogs.vue&apos;)</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    path: &apos;/blog/add&apos;, // &#x6CE8;&#x610F;&#x653E;&#x5728; path: &apos;/blog/:blogId&apos;&#x4E4B;&#x524D;</span><br><span class="line">    name: &apos;BlogAdd&apos;,</span><br><span class="line">    meta: {</span><br><span class="line">      requireAuth: true</span><br><span class="line">    },</span><br><span class="line">    component: BlogEdit</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    path: &apos;/blog/:blogId&apos;,</span><br><span class="line">    name: &apos;BlogDetail&apos;,</span><br><span class="line">    component: BlogDetail</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    path: &apos;/blog/:blogId/edit&apos;,</span><br><span class="line">    name: &apos;BlogEdit&apos;,</span><br><span class="line">    meta: {</span><br><span class="line">      requireAuth: true</span><br><span class="line">    },</span><br><span class="line">    component: BlogEdit</span><br><span class="line">  }</span><br><span class="line">];</span><br><span class="line">const router = new VueRouter({</span><br><span class="line">  mode: &apos;history&apos;,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes</span><br><span class="line">})</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>

<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x53BB;&#x5F00;&#x53D1;&#x6211;&#x4EEC;&#x7684;&#x9875;&#x9762;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x5E26;&#x6709;meta&#xFF1A;requireAuth: true&#x8BF4;&#x660E;&#x662F;&#x9700;&#x8981;&#x767B;&#x5F55;&#x5B57;&#x540E;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#x7684;&#x53D7;&#x9650;&#x8D44;&#x6E90;&#xFF0C;&#x540E;&#x9762;&#x6211;&#x4EEC;&#x8DEF;&#x7531;&#x6743;&#x9650;&#x62E6;&#x622A;&#x65F6;&#x5019;&#x4F1A;&#x7528;&#x5230;&#x3002;</p>
<h3 id="8&#x3001;&#x767B;&#x5F55;&#x9875;&#x9762;"><a href="#8&#x3001;&#x767B;&#x5F55;&#x9875;&#x9762;" class="headerlink" title="8&#x3001;&#x767B;&#x5F55;&#x9875;&#x9762;"></a>8&#x3001;&#x767B;&#x5F55;&#x9875;&#x9762;</h3><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x641E;&#x4E00;&#x4E2A;&#x767B;&#x9646;&#x9875;&#x9762;&#xFF0C;&#x8868;&#x5355;&#x7EC4;&#x4EF6;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;element-ui&#x7684;&#x5B98;&#x7F51;&#x4E0A;&#x627E;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x767B;&#x9646;&#x9875;&#x9762;&#x5C31;&#x4E24;&#x4E2A;&#x8F93;&#x5165;&#x6846;&#x548C;&#x4E00;&#x4E2A;&#x63D0;&#x4EA4;&#x6309;&#x94AE;&#xFF0C;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x6700;&#x597D;&#x5E26;&#x9875;&#x9762;&#x7684;js&#x6821;&#x9A8C;&#x3002;emmm&#xFF0C;&#x6211;&#x76F4;&#x63A5;&#x8D34;&#x4EE3;&#x7801;&#x4E86;~~</p>
<ul>
<li>views/Login.vue</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">&#xA0; &lt;div&gt;</span><br><span class="line">&#xA0; &#xA0; &lt;el-container&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &lt;el-header&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &lt;router-link to=&quot;/blogs&quot;&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &lt;img src=&quot;https://www.markerhub.com/dist/images/logo/markerhub-logo.png&quot;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;style=&quot;height: 60%; margin-top: 10px;&quot;&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &lt;/router-link&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &lt;/el-header&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &lt;el-main&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &lt;el-form :model=&quot;ruleForm&quot; status-icon :rules=&quot;rules&quot; ref=&quot;ruleForm&quot; label-width=&quot;100px&quot;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;class=&quot;demo-ruleForm&quot;&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-form-item label=&quot;&#x7528;&#x6237;&#x540D;&quot; prop=&quot;username&quot;&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-input type=&quot;text&quot; maxlength=&quot;12&quot; v-model=&quot;ruleForm.username&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;/el-form-item&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-form-item label=&quot;&#x5BC6;&#x7801;&quot; prop=&quot;password&quot;&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-input type=&quot;password&quot; v-model=&quot;ruleForm.password&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;/el-form-item&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-form-item&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm(&apos;ruleForm&apos;)&quot;&gt;&#x767B;&#x5F55;&lt;/el-button&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;el-button @click=&quot;resetForm(&apos;ruleForm&apos;)&quot;&gt;&#x91CD;&#x7F6E;&lt;/el-button&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &lt;/el-form-item&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &lt;/el-form&gt;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &lt;/el-main&gt;</span><br><span class="line">&#xA0; &#xA0; &lt;/el-container&gt;</span><br><span class="line">&#xA0; &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">&#xA0; export default {</span><br><span class="line">&#xA0; &#xA0; name: &apos;Login&apos;,</span><br><span class="line">&#xA0; &#xA0; data() {</span><br><span class="line">&#xA0; &#xA0; &#xA0; var validatePass = (rule, value, callback) =&gt; {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; if (value === &apos;&apos;) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; callback(new Error(&apos;&#x8BF7;&#x8F93;&#x5165;&#x5BC6;&#x7801;&apos;));</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; } else {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; callback();</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; &#xA0; };</span><br><span class="line">&#xA0; &#xA0; &#xA0; return {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; ruleForm: {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; password: &apos;111111&apos;,</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; username: &apos;markerhub&apos;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; },</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; rules: {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; password: [</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; {validator: validatePass, trigger: &apos;blur&apos;}</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ],</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; username: [</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; {required: true, message: &apos;&#x8BF7;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&apos;, trigger: &apos;blur&apos;},</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; {min: 3, max: 12, message: &apos;&#x957F;&#x5EA6;&#x5728; 3 &#x5230; 12 &#x4E2A;&#x5B57;&#x7B26;&apos;, trigger: &apos;blur&apos;}</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ]</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; &#xA0; };</span><br><span class="line">&#xA0; &#xA0; },</span><br><span class="line">&#xA0; &#xA0; methods: {</span><br><span class="line">&#xA0; &#xA0; &#xA0; submitForm(formName) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; const _this = this</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; this.$refs[formName].validate((valid) =&gt; {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; if (valid) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; // &#x63D0;&#x4EA4;&#x903B;&#x8F91;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; this.$axios.post(&apos;http://localhost:8081/login&apos;, this.ruleForm).then((res)=&gt;{</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; const token = res.headers[&apos;authorization&apos;]</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; _this.$store.commit(&apos;SET_TOKEN&apos;, token)</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; _this.$store.commit(&apos;SET_USERINFO&apos;, res.data.data)</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; _this.$router.push(&quot;/blogs&quot;)</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; })</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; } else {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; console.log(&apos;error submit!!&apos;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; return false;</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; });</span><br><span class="line">&#xA0; &#xA0; &#xA0; },</span><br><span class="line">&#xA0; &#xA0; &#xA0; resetForm(formName) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; this.$refs[formName].resetFields();</span><br><span class="line">&#xA0; &#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; },</span><br><span class="line">&#xA0; &#xA0; mounted() {</span><br><span class="line">&#xA0; &#xA0; &#xA0; this.$notify({</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; title: &apos;&#x770B;&#x8FD9;&#x91CC;&#xFF1A;&apos;,</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; message: &apos;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x9886;&#x53D6;&#x9879;&#x76EE;&#x8D44;&#x6599;&#x4E0E;&#x6E90;&#x7801;&apos;,</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; duration: 1500</span><br><span class="line">&#xA0; &#xA0; &#xA0; });</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x627E;&#x4E0D;&#x5230;&#x5565;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x8BB2;&#x89E3;&#x4E86;&#xFF0C;&#x4E4B;&#x540E;&#x5148;&#x8D34;&#x4EE3;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8BB2;&#x89E3;&#x3002;<br>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x505A;&#x4E86;&#x4E24;&#x4EF6;&#x4E8B;&#x60C5;</p>
<p>1&#x3001;&#x8868;&#x5355;&#x6821;&#x9A8C;</p>
<p>2&#x3001;&#x767B;&#x5F55;&#x6309;&#x94AE;&#x7684;&#x70B9;&#x51FB;&#x767B;&#x5F55;&#x4E8B;&#x4EF6;</p>
<p>&#x8868;&#x5355;&#x6821;&#x9A8C;&#x89C4;&#x5219;&#x8FD8;&#x597D;&#xFF0C;&#x6BD4;&#x8F83;&#x56FA;&#x5B9A;&#x5199;&#x6CD5;&#xFF0C;&#x67E5;&#x4E00;&#x4E0B;element-ui&#x7684;&#x7EC4;&#x4EF6;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x53D1;&#x8D77;&#x767B;&#x5F55;&#x4E4B;&#x540E;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;const token = res.headers[&apos;authorization&apos;]</span><br><span class="line">_this.$store.commit(&apos;SET_TOKEN&apos;, token)</span><br><span class="line">_this.$store.commit(&apos;SET_USERINFO&apos;, res.data.data)</span><br><span class="line">_this.$router.push(&quot;/blogs&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#x8BF7;&#x6C42;&#x5934;&#x4E2D;&#x83B7;&#x53D6;&#x5230;token&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;store&#x63D0;&#x4EA4;token&#x548C;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5B8C;&#x6210;&#x64CD;&#x4F5C;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x8C03;&#x6574;&#x5230;&#x4E86;/blogs&#x8DEF;&#x7531;&#xFF0C;&#x5373;&#x535A;&#x5BA2;&#x5217;&#x8868;&#x9875;&#x9762;&#x3002;</p>
<h4 id="token&#x7684;&#x72B6;&#x6001;&#x540C;&#x6B65;"><a href="#token&#x7684;&#x72B6;&#x6001;&#x540C;&#x6B65;" class="headerlink" title="token&#x7684;&#x72B6;&#x6001;&#x540C;&#x6B65;"></a>token&#x7684;&#x72B6;&#x6001;&#x540C;&#x6B65;</h4><p>&#x6240;&#x4EE5;&#x5728;store/index.js&#x4E2D;&#xFF0C;&#x4EE3;&#x7801;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import Vue from &apos;vue&apos;</span><br><span class="line">import Vuex from &apos;vuex&apos;</span><br><span class="line">Vue.use(Vuex)</span><br><span class="line">export default new Vuex.Store({</span><br><span class="line">&#xA0; state: {</span><br><span class="line">&#xA0; &#xA0; token: &apos;&apos;,</span><br><span class="line">&#xA0; &#xA0; userInfo: JSON.parse(sessionStorage.getItem(&quot;userInfo&quot;))</span><br><span class="line">&#xA0; },</span><br><span class="line">&#xA0; mutations: {</span><br><span class="line">&#xA0; &#xA0; SET_TOKEN: (state, token) =&gt; {</span><br><span class="line">&#xA0; &#xA0; &#xA0; state.token = token</span><br><span class="line">&#xA0; &#xA0; &#xA0; localStorage.setItem(&quot;token&quot;, token)</span><br><span class="line">&#xA0; &#xA0; },</span><br><span class="line">&#xA0; &#xA0; SET_USERINFO: (state, userInfo) =&gt; {</span><br><span class="line">&#xA0; &#xA0; &#xA0; state.userInfo = userInfo</span><br><span class="line">&#xA0; &#xA0; &#xA0; sessionStorage.setItem(&quot;userInfo&quot;, JSON.stringify(userInfo))</span><br><span class="line">&#xA0; &#xA0; },</span><br><span class="line">&#xA0; &#xA0; REMOVE_INFO: (state) =&gt; {</span><br><span class="line">&#xA0; &#xA0; &#xA0; localStorage.setItem(&quot;token&quot;, &apos;&apos;)</span><br><span class="line">&#xA0; &#xA0; &#xA0; sessionStorage.setItem(&quot;userInfo&quot;, JSON.stringify(&apos;&apos;))</span><br><span class="line">&#xA0; &#xA0; &#xA0; state.userInfo = {}</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; },</span><br><span class="line">&#xA0; getters: {</span><br><span class="line">&#xA0; &#xA0; getUser: state =&gt; {</span><br><span class="line">&#xA0; &#xA0; &#xA0; return state.userInfo</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; },</span><br><span class="line">&#xA0; actions: {},</span><br><span class="line">&#xA0; modules: {}</span><br><span class="line">})</span><br></pre></td></tr></table></figure>

<p>&#x5B58;&#x50A8;token&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x7684;&#x662F;localStorage&#xFF0C;&#x5B58;&#x50A8;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x7684;&#x662F;sessionStorage&#x3002;&#x6BD5;&#x7ADF;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x957F;&#x4E45;&#x4FDD;&#x5B58;&#xFF0C;&#x4FDD;&#x5B58;&#x4E86;token&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x968F;&#x65F6;&#x90FD;&#x53EF;&#x4EE5;&#x521D;&#x59CB;&#x5316;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;&#x5F53;&#x7136;&#x4E86;&#x56E0;&#x4E3A;&#x672C;&#x9879;&#x76EE;&#x662F;&#x4E2A;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x8003;&#x8651;&#x5230;&#x521D;&#x5B66;&#x8005;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x591A;&#x76F8;&#x5BF9;&#x590D;&#x6742;&#x7684;&#x5C01;&#x88C5;&#x548C;&#x529F;&#x80FD;&#x6211;&#x6CA1;&#x6709;&#x505A;&#xFF0C;&#x5F53;&#x7136;&#x4E86;&#xFF0C;&#x5B66;&#x4E86;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x4E4B;&#x540E;&#xFF0C;&#x81EA;&#x5DF1;&#x60F3;&#x518D;&#x7EE7;&#x7EED;&#x6DF1;&#x5165;&#xFF0C;&#x5B8C;&#x6210;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x5B66;&#x4E60;&#x548C;&#x6539;&#x9020;&#x54C8;&#x3002;</p>
<h4 id="&#x5B9A;&#x4E49;&#x5168;&#x5C40;axios&#x62E6;&#x622A;&#x5668;"><a href="#&#x5B9A;&#x4E49;&#x5168;&#x5C40;axios&#x62E6;&#x622A;&#x5668;" class="headerlink" title="&#x5B9A;&#x4E49;&#x5168;&#x5C40;axios&#x62E6;&#x622A;&#x5668;"></a>&#x5B9A;&#x4E49;&#x5168;&#x5C40;axios&#x62E6;&#x622A;&#x5668;</h4><p>&#x70B9;&#x51FB;&#x767B;&#x5F55;&#x6309;&#x94AE;&#x53D1;&#x8D77;&#x767B;&#x5F55;&#x8BF7;&#x6C42;&#xFF0C;&#x6210;&#x529F;&#x65F6;&#x5019;&#x8FD4;&#x56DE;&#x4E86;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5BC6;&#x7801;&#x9519;&#x8BEF;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x4E0D;&#x662F;&#x4E5F;&#x5E94;&#x8BE5;&#x5F39;&#x7A97;&#x6D88;&#x606F;&#x63D0;&#x793A;&#x3002;&#x4E3A;&#x4E86;&#x8BA9;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5F39;&#x7A97;&#x80FD;&#x8FD0;&#x7528;&#x5230;&#x6240;&#x6709;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5BF9;axios&#x505A;&#x4E86;&#x4E2A;&#x540E;&#x7F6E;&#x62E6;&#x622A;&#x5668;&#xFF0C;&#x5C31;&#x662F;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x7ED3;&#x679C;&#x7684;code&#x6216;&#x8005;status&#x4E0D;&#x6B63;&#x5E38;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x5BF9;&#x5E94;&#x5F39;&#x7A97;&#x63D0;&#x793A;&#x3002;</p>
<p>&#x5728;src&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;axios.js&#xFF08;&#x4E0E;main.js&#x540C;&#x7EA7;&#xFF09;&#xFF0C;&#x5B9A;&#x4E49;axios&#x7684;&#x62E6;&#x622A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import axios from &apos;axios&apos;</span><br><span class="line">import Element from &quot;element-ui&quot;;</span><br><span class="line">import store from &quot;./store&quot;;</span><br><span class="line">import router from &quot;./router&quot;;</span><br><span class="line">axios.defaults.baseURL=&apos;http://localhost:8081&apos;</span><br><span class="line">axios.interceptors.request.use(config =&gt; {</span><br><span class="line">&#xA0; console.log(&quot;&#x524D;&#x7F6E;&#x62E6;&#x622A;&quot;)</span><br><span class="line">&#xA0; // &#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x8BBE;&#x7F6E;&#x8BF7;&#x6C42;&#x5934;</span><br><span class="line">&#xA0; return config</span><br><span class="line">})</span><br><span class="line">axios.interceptors.response.use(response =&gt; {</span><br><span class="line">&#xA0; &#xA0; const res = response.data;</span><br><span class="line">&#xA0; &#xA0; console.log(&quot;&#x540E;&#x7F6E;&#x62E6;&#x622A;&quot;)</span><br><span class="line">    // &#x5F53;&#x7ED3;&#x679C;&#x7684;code&#x662F;&#x5426;&#x4E3A;200&#x7684;&#x60C5;&#x51B5;</span><br><span class="line">&#xA0; &#xA0; if (res.code === 200) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; return response</span><br><span class="line">&#xA0; &#xA0; } else {</span><br><span class="line">      // &#x5F39;&#x7A97;&#x5F02;&#x5E38;&#x4FE1;&#x606F;</span><br><span class="line">&#xA0; &#xA0; &#xA0; Element.Message({</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; message: response.data.msg,</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; type: &apos;error&apos;,</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; duration: 2 * 1000</span><br><span class="line">&#xA0; &#xA0; &#xA0; })</span><br><span class="line">      // &#x76F4;&#x63A5;&#x62D2;&#x7EDD;&#x5F80;&#x4E0B;&#x9762;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x4FE1;&#x606F;</span><br><span class="line">&#xA0; &#xA0; &#xA0; return Promise.reject(response.data.msg)</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; },</span><br><span class="line">&#xA0; error =&gt; {</span><br><span class="line">&#xA0; &#xA0; console.log(&apos;err&apos; + error)// for debug</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;if(error.response.data)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;error.message&#xA0;=&#xA0;error.response.data.msg</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">    // &#x6839;&#x636E;&#x8BF7;&#x6C42;&#x72B6;&#x6001;&#x89C9;&#x5F97;&#x662F;&#x5426;&#x767B;&#x5F55;&#x6216;&#x8005;&#x63D0;&#x793A;&#x5176;&#x4ED6;</span><br><span class="line">&#xA0; &#xA0; if (error.response.status === 401) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; store.commit(&apos;REMOVE_INFO&apos;);</span><br><span class="line">&#xA0; &#xA0; &#xA0; router.push({</span><br><span class="line">&#xA0; &#xA0; &#xA0; &#xA0; path: &apos;/login&apos;</span><br><span class="line">&#xA0; &#xA0; &#xA0; });</span><br><span class="line">&#xA0; &#xA0; &#xA0; error.message = &apos;&#x8BF7;&#x91CD;&#x65B0;&#x767B;&#x5F55;&apos;;</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; if (error.response.status === 403) {</span><br><span class="line">&#xA0; &#xA0; &#xA0; error.message = &apos;&#x6743;&#x9650;&#x4E0D;&#x8DB3;&#xFF0C;&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;&apos;;</span><br><span class="line">&#xA0; &#xA0; }</span><br><span class="line">&#xA0; &#xA0; Element.Message({</span><br><span class="line">&#xA0; &#xA0; &#xA0; message: error.message,</span><br><span class="line">&#xA0; &#xA0; &#xA0; type: &apos;error&apos;,</span><br><span class="line">&#xA0; &#xA0; &#xA0; duration: 3 * 1000</span><br><span class="line">&#xA0; &#xA0; })</span><br><span class="line">&#xA0; &#xA0; return Promise.reject(error)</span><br><span class="line">&#xA0; })</span><br></pre></td></tr></table></figure>

<p>&#x524D;&#x7F6E;&#x62E6;&#x622A;&#xFF0C;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x7EDF;&#x4E00;&#x4E3A;&#x6240;&#x6709;&#x9700;&#x8981;&#x6743;&#x9650;&#x7684;&#x8BF7;&#x6C42;&#x88C5;&#x914D;&#x4E0A;header&#x7684;token&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x4F7F;&#x7528;&#x662F;&#x518D;&#x914D;&#x7F6E;&#xFF0C;&#x6211;&#x7684;&#x5C0F;&#x9879;&#x76EE;&#x6BD4;&#x8F83;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x8FD8;&#x662F;&#x514D;&#x4E86;&#x5427;~</p>
<p>&#x7136;&#x540E;&#x518D;main.js&#x4E2D;&#x5BFC;&#x5165;axios.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import &apos;./axios.js&apos; // &#x8BF7;&#x6C42;&#x62E6;&#x622A;</span><br></pre></td></tr></table></figure>

<p>&#x540E;&#x7AEF;&#x56E0;&#x4E3A;&#x8FD4;&#x56DE;&#x7684;&#x5B9E;&#x4F53;&#x662F;Result&#xFF0C;succ&#x65F6;&#x5019;code&#x4E3A;200&#xFF0C;fail&#x65F6;&#x5019;&#x8FD4;&#x56DE;&#x7684;&#x662F;400&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x8FD9;&#x91CC;&#x5224;&#x65AD;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x662F;&#x6B63;&#x5E38;&#x7684;&#x3002;&#x53E6;&#x5916;&#x6743;&#x9650;&#x4E0D;&#x8DB3;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x7684;&#x72B6;&#x6001;&#x7801;&#x6765;&#x5224;&#x65AD;&#x7ED3;&#x679C;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x3002;&#x8FD9;&#x91CC;&#x90FD;&#x505A;&#x4E86;&#x7B80;&#x5355;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<p>&#x767B;&#x5F55;&#x5F02;&#x5E38;&#x65F6;&#x5019;&#x7684;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/4b4c411e131bba566737bde0f840d5672c4dd4658e3894b196a120e3132afe5d" alt="&#x56FE;&#x7247;"></p>
<h3 id="9&#x3001;&#x535A;&#x5BA2;&#x5217;&#x8868;"><a href="#9&#x3001;&#x535A;&#x5BA2;&#x5217;&#x8868;" class="headerlink" title="9&#x3001;&#x535A;&#x5BA2;&#x5217;&#x8868;"></a>9&#x3001;&#x535A;&#x5BA2;&#x5217;&#x8868;</h3><p>&#x767B;&#x5F55;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x535A;&#x5BA2;&#x5217;&#x8868;&#x9875;&#x9762;&#xFF0C;&#x7136;&#x540E;&#x52A0;&#x8F7D;&#x535A;&#x5BA2;&#x5217;&#x8868;&#x7684;&#x6570;&#x636E;&#x6E32;&#x67D3;&#x51FA;&#x6765;&#x3002;&#x540C;&#x65F6;&#x9875;&#x9762;&#x5934;&#x90E8;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x628A;&#x7528;&#x6237;&#x7684;&#x4FE1;&#x606F;&#x5C55;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x56E0;&#x4E3A;&#x5F88;&#x591A;&#x5730;&#x65B9;&#x90FD;&#x7528;&#x5230;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x628A;&#x9875;&#x9762;&#x5934;&#x90E8;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x5355;&#x72EC;&#x62BD;&#x53D6;&#x51FA;&#x6765;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x3002;</p>
<h4 id="&#x5934;&#x90E8;&#x7528;&#x6237;&#x4FE1;&#x606F;"><a href="#&#x5934;&#x90E8;&#x7528;&#x6237;&#x4FE1;&#x606F;" class="headerlink" title="&#x5934;&#x90E8;&#x7528;&#x6237;&#x4FE1;&#x606F;"></a>&#x5934;&#x90E8;&#x7528;&#x6237;&#x4FE1;&#x606F;</h4><p>&#x90A3;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B8C;&#x6210;&#x5934;&#x90E8;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x5E94;&#x8BE5;&#x5305;&#x542B;&#x4E09;&#x90E8;&#x5206;&#x4FE1;&#x606F;&#xFF1A;id&#xFF0C;&#x5934;&#x50CF;&#x3001;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x6211;&#x4EEC;&#x662F;&#x5728;&#x767B;&#x5F55;&#x4E4B;&#x540E;&#x5C31;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86;sessionStorage&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;store&#x7684;getters&#x83B7;&#x53D6;&#x5230;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/76f24d1535dd48e55fd6bd91e97a2df030a3e049d9116ebd339c751f3a0a980d" alt="&#x56FE;&#x7247;"></p>
<p>&#x770B;&#x8D77;&#x6765;&#x4E0D;&#x662F;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x6211;&#x4EEC;&#x8D34;&#x51FA;&#x4EE3;&#x7801;&#xFF1A;</p>
<ul>
<li>components\Header.vue</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-content&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#x6B22;&#x8FCE;&#x6765;&#x5230;MarkerHub&#x7684;&#x535A;&#x5BA2;&lt;/h3&gt;</span><br><span class="line">    &lt;div class=&quot;block&quot;&gt;</span><br><span class="line">      &lt;el-avatar :size=&quot;50&quot; :src=&quot;user.avatar&quot;&gt;&lt;/el-avatar&gt;</span><br><span class="line">      &lt;div&gt;{{ user.username }}&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;maction&quot;&gt;</span><br><span class="line">      &lt;el-link href=&quot;/blogs&quot;&gt;&#x4E3B;&#x9875;&lt;/el-link&gt;</span><br><span class="line">      &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">      &lt;span&gt;</span><br><span class="line">          &lt;el-link type=&quot;success&quot; href=&quot;/blog/add&quot; :disabled=&quot;!hasLogin&quot;&gt;&#x53D1;&#x8868;&#x6587;&#x7AE0;&lt;/el-link&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">      &lt;span v-show=&quot;!hasLogin&quot;&gt;</span><br><span class="line">          &lt;el-link type=&quot;primary&quot; href=&quot;/login&quot;&gt;&#x767B;&#x9646;&lt;/el-link&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;span v-show=&quot;hasLogin&quot;&gt;</span><br><span class="line">          &lt;el-link type=&quot;danger&quot; @click=&quot;logout&quot;&gt;&#x9000;&#x51FA;&lt;/el-link&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default {</span><br><span class="line">    name: &quot;Header&quot;,</span><br><span class="line">    data() {</span><br><span class="line">      return {</span><br><span class="line">        hasLogin: false,</span><br><span class="line">        user: {</span><br><span class="line">          username: &apos;&#x8BF7;&#x5148;&#x767B;&#x5F55;&apos;,</span><br><span class="line">          avatar: &quot;https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png&quot;</span><br><span class="line">        },</span><br><span class="line">        blogs: {},</span><br><span class="line">        currentPage: 1,</span><br><span class="line">        total: 0</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">      logout() {</span><br><span class="line">        const _this = this</span><br><span class="line">        this.$axios.get(&apos;http://localhost:8081/logout&apos;, {</span><br><span class="line">          headers: {</span><br><span class="line">            &quot;Authorization&quot;: localStorage.getItem(&quot;token&quot;)</span><br><span class="line">          }</span><br><span class="line">        }).then((res) =&gt; {</span><br><span class="line">          _this.$store.commit(&apos;REMOVE_INFO&apos;)</span><br><span class="line">          _this.$router.push(&apos;/login&apos;)</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    created() {</span><br><span class="line">      if(this.$store.getters.getUser.username) {</span><br><span class="line">        this.user.username = this.$store.getters.getUser.username</span><br><span class="line">        this.user.avatar = this.$store.getters.getUser.avatar</span><br><span class="line">        this.hasLogin = true</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;created()&#x4E2D;&#x521D;&#x59CB;&#x5316;&#x7528;&#x6237;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x901A;&#x8FC7;hasLogin&#x7684;&#x72B6;&#x6001;&#x6765;&#x63A7;&#x5236;&#x767B;&#x5F55;&#x548C;&#x9000;&#x51FA;&#x6309;&#x94AE;&#x7684;&#x5207;&#x6362;&#xFF0C;&#x4EE5;&#x53CA;&#x53D1;&#x8868;&#x6587;&#x7AE0;&#x94FE;&#x63A5;&#x7684;disabled&#xFF0C;&#x8FD9;&#x6837;&#x7528;&#x6237;&#x7684;&#x4FE1;&#x606F;&#x5C31;&#x80FD;&#x5C55;&#x793A;&#x51FA;&#x6765;&#x4E86;&#x3002;<br>&#x7136;&#x540E;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x9000;&#x51FA;&#x6309;&#x94AE;&#xFF0C;&#x5728;methods&#x4E2D;&#x6709;&#x4E2A;logout()&#x65B9;&#x6CD5;&#xFF0C;&#x903B;&#x8F91;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;/logout&#xFF0C;&#x56E0;&#x4E3A;&#x4E4B;&#x524D;axios.js&#x4E2D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x8BBE;&#x7F6E;axios&#x8BF7;&#x6C42;&#x7684;baseURL&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x94FE;&#x63A5;&#x7684;&#x524D;&#x7F00;&#x4E86;&#x54C8;&#x3002;&#x56E0;&#x4E3A;&#x662F;&#x767B;&#x5F55;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#x7684;&#x53D7;&#x9650;&#x8D44;&#x6E90;&#xFF0C;&#x6240;&#x4EE5;&#x5728;header&#x4E2D;&#x5E26;&#x4E0A;&#x4E86;Authorization&#x3002;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x6E05;&#x695A;store&#x4E2D;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x548C;token&#x4FE1;&#x606F;&#xFF0C;&#x8DF3;&#x8F6C;&#x5230;&#x767B;&#x5F55;&#x9875;&#x9762;&#x3002;</p>
<p>&#x7136;&#x540E;&#x9700;&#x8981;&#x5934;&#x90E8;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;&#x9875;&#x9762;&#x53EA;&#x9700;&#x8981;&#x51E0;&#x4E2A;&#x6B65;&#x9AA4;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import Header from &quot;@/components/Header&quot;;</span><br><span class="line">data() {</span><br><span class="line">  components: {Header}</span><br><span class="line">}</span><br><span class="line"># &#x7136;&#x540E;&#x6A21;&#x677F;&#x4E2D;&#x8C03;&#x7528;&#x7EC4;&#x4EF6;</span><br><span class="line">&lt;Header&gt;&lt;/Header&gt;</span><br></pre></td></tr></table></figure>

<h4 id="&#x535A;&#x5BA2;&#x5206;&#x9875;"><a href="#&#x535A;&#x5BA2;&#x5206;&#x9875;" class="headerlink" title="&#x535A;&#x5BA2;&#x5206;&#x9875;"></a>&#x535A;&#x5BA2;&#x5206;&#x9875;</h4><p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x5217;&#x8868;&#x9875;&#x9762;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x5206;&#x9875;&#xFF0C;&#x5217;&#x8868;&#x6211;&#x4EEC;&#x5728;element-ui&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<strong>&#x65F6;&#x95F4;&#x7EBF;</strong>&#x7EC4;&#x4EF6;&#x6765;&#x4F5C;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x5217;&#x8868;&#x6837;&#x5F0F;&#xFF0C;&#x8FD8;&#x662F;&#x633A;&#x597D;&#x770B;&#x7684;&#x3002;&#x8FD8;&#x6709;&#x6211;&#x4EEC;&#x7684;&#x5206;&#x9875;&#x7EC4;&#x4EF6;&#x3002;</p>
<p>&#x9700;&#x8981;&#x51E0;&#x90E8;&#x5206;&#x4FE1;&#x606F;&#xFF1A;</p>
<ul>
<li>&#x5206;&#x9875;&#x4FE1;&#x606F;</li>
<li>&#x535A;&#x5BA2;&#x5217;&#x8868;&#x5185;&#x5BB9;&#xFF0C;&#x5305;&#x62EC;id&#x3001;&#x6807;&#x9898;&#x3001;&#x6458;&#x8981;&#x3001;&#x521B;&#x5EFA;&#x65F6;&#x95F4;</li>
<li>views\Blogs.vue</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-container&quot;&gt;</span><br><span class="line">    &lt;Header&gt;&lt;/Header&gt;</span><br><span class="line">    &lt;div class=&quot;block&quot;&gt;</span><br><span class="line">      &lt;el-timeline&gt;</span><br><span class="line">        &lt;el-timeline-item v-bind:timestamp=&quot;blog.created&quot; placement=&quot;top&quot; v-for=&quot;blog in blogs&quot;&gt;</span><br><span class="line">          &lt;el-card&gt;</span><br><span class="line">            &lt;h4&gt;&lt;router-link :to=&quot;{name: &apos;BlogDetail&apos;, params: {blogId: blog.id}}&quot;&gt;{{blog.title}}&lt;/router-link&gt;&lt;/h4&gt;</span><br><span class="line">            &lt;p&gt;{{blog.description}}&lt;/p&gt;</span><br><span class="line">          &lt;/el-card&gt;</span><br><span class="line">        &lt;/el-timeline-item&gt;</span><br><span class="line">      &lt;/el-timeline&gt;</span><br><span class="line">     </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-pagination class=&quot;mpage&quot;</span><br><span class="line">      background</span><br><span class="line">      layout=&quot;prev, pager, next&quot;</span><br><span class="line">      :current-page=currentPage</span><br><span class="line">      :page-size=pageSize</span><br><span class="line">      @current-change=page</span><br><span class="line">      :total=&quot;total&quot;&gt;</span><br><span class="line">    &lt;/el-pagination&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Header from &quot;@/components/Header&quot;;</span><br><span class="line">  export default {</span><br><span class="line">    name: &quot;Blogs&quot;,</span><br><span class="line">    components: {Header},</span><br><span class="line">    data() {</span><br><span class="line">      return {</span><br><span class="line">        blogs: {},</span><br><span class="line">        currentPage: 1,</span><br><span class="line">        total: 0,</span><br><span class="line">        pageSize: 5</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">      page(currentPage) {</span><br><span class="line">        const _this = this</span><br><span class="line">        this.$axios.get(&apos;http://localhost:8081/blogs?currentPage=&apos; + currentPage).then((res) =&gt; {</span><br><span class="line">          console.log(res.data.data.records)</span><br><span class="line">          _this.blogs = res.data.data.records</span><br><span class="line">          _this.currentPage = res.data.data.current</span><br><span class="line">          _this.total = res.data.data.total</span><br><span class="line">          _this.pageSize = res.data.data.size</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    mounted () {</span><br><span class="line">      this.page(1);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>data()&#x4E2D;&#x76F4;&#x63A5;&#x5B9A;&#x4E49;&#x535A;&#x5BA2;&#x5217;&#x8868;blogs&#x3001;&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x5206;&#x9875;&#x4FE1;&#x606F;&#x3002;methods()&#x4E2D;&#x5B9A;&#x4E49;&#x5206;&#x9875;&#x7684;&#x8C03;&#x7528;&#x63A5;&#x53E3;page&#xFF08;currentPage&#xFF09;&#xFF0C;&#x53C2;&#x6570;&#x662F;&#x9700;&#x8981;&#x8C03;&#x6574;&#x7684;&#x9875;&#x7801;currentPage&#xFF0C;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x4E4B;&#x540E;&#x76F4;&#x63A5;&#x8D4B;&#x503C;&#x5373;&#x53EF;&#x3002;&#x7136;&#x540E;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x5728;mounted()&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x7B2C;&#x4E00;&#x9875;this.page(1)&#x3002;&#x5B8C;&#x7F8E;&#x3002;&#x4F7F;&#x7528;element-ui&#x7EC4;&#x4EF6;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x5FEB;&#x6377;&#x54C8;&#x54C8;&#xFF01;<br>&#x6CE8;&#x610F;&#x6807;&#x9898;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x94FE;&#x63A5;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6807;&#x7B7E;&#x3002;</p>
<h3 id="10&#x3001;&#x535A;&#x5BA2;&#x7F16;&#x8F91;&#xFF08;&#x53D1;&#x8868;&#xFF09;"><a href="#10&#x3001;&#x535A;&#x5BA2;&#x7F16;&#x8F91;&#xFF08;&#x53D1;&#x8868;&#xFF09;" class="headerlink" title="10&#x3001;&#x535A;&#x5BA2;&#x7F16;&#x8F91;&#xFF08;&#x53D1;&#x8868;&#xFF09;"></a>10&#x3001;&#x535A;&#x5BA2;&#x7F16;&#x8F91;&#xFF08;&#x53D1;&#x8868;&#xFF09;</h3><p>&#x6211;&#x4EEC;&#x70B9;&#x51FB;&#x53D1;&#x8868;&#x535A;&#x5BA2;&#x94FE;&#x63A5;&#x8C03;&#x6574;&#x5230;/blog/add&#x9875;&#x9762;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7528;&#x5230;&#x4E00;&#x4E2A;markdown&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x5728;vue&#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;&#x6BD4;&#x8F83;&#x597D;&#x7528;&#x7684;&#x662F;mavon-editor&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x54C8;&#x3002;&#x5148;&#x6765;&#x5B89;&#x88C5;mavon-editor&#x76F8;&#x5173;&#x7EC4;&#x4EF6;&#xFF1A;</p>
<h4 id="&#x5B89;&#x88C5;mavon-editor"><a href="#&#x5B89;&#x88C5;mavon-editor" class="headerlink" title="&#x5B89;&#x88C5;mavon-editor"></a>&#x5B89;&#x88C5;mavon-editor</h4><p>&#x57FA;&#x4E8E;Vue&#x7684;markdown&#x7F16;&#x8F91;&#x5668;mavon-editor</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;cnpm install mavon-editor --save</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5728;main.js&#x4E2D;&#x5168;&#x5C40;&#x6CE8;&#x518C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5168;&#x5C40;&#x6CE8;&#x518C;</span><br><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import mavonEditor from &apos;mavon-editor&apos;</span><br><span class="line">import &apos;mavon-editor/dist/css/index.css&apos;</span><br><span class="line">// use</span><br><span class="line">Vue.use(mavonEditor)</span><br></pre></td></tr></table></figure>

<p>ok&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53BB;&#x5B9A;&#x4E49;&#x6211;&#x4EEC;&#x7684;&#x535A;&#x5BA2;&#x8868;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-container&quot;&gt;</span><br><span class="line">    &lt;Header&gt;&lt;/Header&gt;</span><br><span class="line">    &lt;div class=&quot;m-content&quot;&gt;</span><br><span class="line">      &lt;el-form ref=&quot;editForm&quot; status-icon :model=&quot;editForm&quot; :rules=&quot;rules&quot; label-width=&quot;80px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;&#x6807;&#x9898;&quot; prop=&quot;title&quot;&gt;</span><br><span class="line">          &lt;el-input v-model=&quot;editForm.title&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;&#x6458;&#x8981;&quot; prop=&quot;description&quot;&gt;</span><br><span class="line">          &lt;el-input type=&quot;textarea&quot; v-model=&quot;editForm.description&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label=&quot;&#x5185;&#x5BB9;&quot; prop=&quot;content&quot;&gt;</span><br><span class="line">          &lt;mavon-editor v-model=&quot;editForm.content&quot;/&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item&gt;</span><br><span class="line">          &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm()&quot;&gt;&#x7ACB;&#x5373;&#x521B;&#x5EFA;&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button&gt;&#x53D6;&#x6D88;&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Header from &quot;@/components/Header&quot;;</span><br><span class="line">  export default {</span><br><span class="line">    name: &quot;BlogEdit&quot;,</span><br><span class="line">    components: {Header},</span><br><span class="line">    data() {</span><br><span class="line">      return {</span><br><span class="line">        editForm: {</span><br><span class="line">          id: null,</span><br><span class="line">          title: &apos;&apos;,</span><br><span class="line">          description: &apos;&apos;,</span><br><span class="line">          content: &apos;&apos;</span><br><span class="line">        },</span><br><span class="line">        rules: {</span><br><span class="line">          title: [</span><br><span class="line">            {required: true, message: &apos;&#x8BF7;&#x8F93;&#x5165;&#x6807;&#x9898;&apos;, trigger: &apos;blur&apos;},</span><br><span class="line">            {min: 3, max: 50, message: &apos;&#x957F;&#x5EA6;&#x5728; 3 &#x5230; 50 &#x4E2A;&#x5B57;&#x7B26;&apos;, trigger: &apos;blur&apos;}</span><br><span class="line">          ],</span><br><span class="line">          description: [</span><br><span class="line">            {required: true, message: &apos;&#x8BF7;&#x8F93;&#x5165;&#x6458;&#x8981;&apos;, trigger: &apos;blur&apos;}</span><br><span class="line">          ]</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    created() {</span><br><span class="line">      const blogId = this.$route.params.blogId</span><br><span class="line">      const _this = this</span><br><span class="line">      if(blogId) {</span><br><span class="line">        this.$axios.get(&apos;/blog/&apos; + blogId).then((res) =&gt; {</span><br><span class="line">          const blog = res.data.data</span><br><span class="line">          _this.editForm.id = blog.id</span><br><span class="line">          _this.editForm.title = blog.title</span><br><span class="line">          _this.editForm.description = blog.description</span><br><span class="line">          _this.editForm.content = blog.content</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">      submitForm() {</span><br><span class="line">        const _this = this</span><br><span class="line">        this.$refs.editForm.validate((valid) =&gt; {</span><br><span class="line">          if (valid) {</span><br><span class="line">            this.$axios.post(&apos;/blog/edit&apos;, this.editForm, {</span><br><span class="line">              headers: {</span><br><span class="line">                &quot;Authorization&quot;: localStorage.getItem(&quot;token&quot;)</span><br><span class="line">              }</span><br><span class="line">            }).then((res) =&gt; {</span><br><span class="line">              _this.$alert(&apos;&#x64CD;&#x4F5C;&#x6210;&#x529F;&apos;, &apos;&#x63D0;&#x793A;&apos;, {</span><br><span class="line">                confirmButtonText: &apos;&#x786E;&#x5B9A;&apos;,</span><br><span class="line">                callback: action =&gt; {</span><br><span class="line">                  _this.$router.push(&quot;/blogs&quot;)</span><br><span class="line">                }</span><br><span class="line">              });</span><br><span class="line">            });</span><br><span class="line">          } else {</span><br><span class="line">            console.log(&apos;error submit!!&apos;);</span><br><span class="line">            return false;</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x903B;&#x8F91;&#x4F9D;&#x7136;&#x7B80;&#x5355;&#xFF0C;&#x6821;&#x9A8C;&#x8868;&#x5355;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x6309;&#x94AE;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#xFF0C;&#x6CE8;&#x610F;&#x5934;&#x90E8;&#x52A0;&#x4E0A;Authorization&#x4FE1;&#x606F;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x5F39;&#x7A97;&#x63D0;&#x793A;&#x64CD;&#x4F5C;&#x6210;&#x529F;&#xFF0C;&#x7136;&#x540E;&#x8DF3;&#x8F6C;&#x5230;&#x535A;&#x5BA2;&#x5217;&#x8868;&#x9875;&#x9762;&#x3002;emm&#xFF0C;&#x548C;&#x5199;ajax&#x6CA1;&#x5565;&#x533A;&#x522B;&#x3002;&#x719F;&#x6089;&#x4E00;&#x4E0B;vue&#x7684;&#x4E00;&#x4E9B;&#x6307;&#x4EE4;&#x4F7F;&#x7528;&#x5373;&#x53EF;&#x3002;<br>&#x7136;&#x540E;&#x56E0;&#x4E3A;&#x7F16;&#x8F91;&#x548C;&#x6DFB;&#x52A0;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x4E86;create()&#x65B9;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x4ECE;&#x7F16;&#x8F91;&#x8FDE;&#x63A5;/blog/7/edit&#x4E2D;&#x83B7;&#x53D6;blogId&#x4E3A;7&#x7684;&#x8FD9;&#x4E2A;id&#x3002;&#x7136;&#x540E;&#x56DE;&#x663E;&#x535A;&#x5BA2;&#x4FE1;&#x606F;&#x3002;&#x83B7;&#x53D6;&#x65B9;&#x5F0F;&#x662F;const blogId = this.$route.params.blogId&#x3002;</p>
<p>&#x5BF9;&#x4E86;&#xFF0C;mavon-editor&#x56E0;&#x4E3A;&#x5DF2;&#x7ECF;&#x5168;&#x5C40;&#x6CE8;&#x518C;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7EC4;&#x4EF6;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;mavon-editor v-model=&quot;editForm.content&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/0789e7d9e712bb66575fbc016a24b36b618f705a94a7f09750fa3ed01be150cc" alt="&#x56FE;&#x7247;"></p>
<h3 id="11&#x3001;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;"><a href="#11&#x3001;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;" class="headerlink" title="11&#x3001;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;"></a>11&#x3001;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;</h3><p>&#x535A;&#x5BA2;&#x8BE6;&#x60C5;&#x4E2D;&#x9700;&#x8981;&#x56DE;&#x663E;&#x535A;&#x5BA2;&#x4FE1;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x6709;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x662F;&#xFF0C;&#x540E;&#x7AEF;&#x4F20;&#x8FC7;&#x6765;&#x7684;&#x662F;&#x535A;&#x5BA2;&#x5185;&#x5BB9;&#x662F;markdown&#x683C;&#x5F0F;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x7136;&#x540E;&#x663E;&#x793A;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;markdown-it&#xFF0C;&#x7528;&#x4E8E;&#x89E3;&#x6790;md&#x6587;&#x6863;&#xFF0C;&#x7136;&#x540E;&#x5BFC;&#x5165;github-markdown-c&#xFF0C;&#x6240;&#x8C13;md&#x7684;&#x6837;&#x5F0F;&#x3002;</p>
<p>&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x7528;&#x4E8E;&#x89E3;&#x6790;md&#x6587;&#x6863;</span><br><span class="line">cnpm install markdown-it --save</span><br><span class="line"># md&#x6837;&#x5F0F;</span><br><span class="line">cnpm install github-markdown-css</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x9700;&#x8981;&#x6E32;&#x67D3;&#x7684;&#x5730;&#x65B9;&#x4F7F;&#x7528;&#xFF1A;</p>
<ul>
<li>views\BlogDetail.vue</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;m-container&quot;&gt;</span><br><span class="line">    &lt;Header&gt;&lt;/Header&gt;</span><br><span class="line">    &lt;div class=&quot;mblog&quot;&gt;</span><br><span class="line">      &lt;h2&gt;{{ blog.title }}&lt;/h2&gt;</span><br><span class="line">      &lt;el-link icon=&quot;el-icon-edit&quot; v-if=&quot;ownBlog&quot;&gt;&lt;router-link :to=&quot;{name: &apos;BlogEdit&apos;, params: {blogId: blog.id}}&quot;&gt;&#x7F16;&#x8F91;&lt;/router-link&gt;&lt;/el-link&gt;</span><br><span class="line">      &lt;el-divider&gt;&lt;/el-divider&gt;</span><br><span class="line">      &lt;div class=&quot;content markdown-body&quot; v-html=&quot;blog.content&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import &apos;github-markdown-css/github-markdown.css&apos; // &#x7136;&#x540E;&#x6DFB;&#x52A0;&#x6837;&#x5F0F;markdown-body</span><br><span class="line">  import Header from &quot;@/components/Header&quot;;</span><br><span class="line">  export default {</span><br><span class="line">    name: &quot;BlogDetail&quot;,</span><br><span class="line">    components: {</span><br><span class="line">      Header</span><br><span class="line">    },</span><br><span class="line">    data() {</span><br><span class="line">      return {</span><br><span class="line">        blog: {</span><br><span class="line">          userId: null,</span><br><span class="line">          title: &quot;&quot;,</span><br><span class="line">          description: &quot;&quot;,</span><br><span class="line">          content: &quot;&quot;</span><br><span class="line">        },</span><br><span class="line">        ownBlog: false</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">      getBlog() {</span><br><span class="line">        const blogId = this.$route.params.blogId</span><br><span class="line">        const _this = this</span><br><span class="line">        this.$axios.get(&apos;/blog/&apos; + blogId).then((res) =&gt; {</span><br><span class="line">          console.log(res)</span><br><span class="line">          console.log(res.data.data)</span><br><span class="line">          _this.blog = res.data.data</span><br><span class="line">          var MarkdownIt = require(&apos;markdown-it&apos;),</span><br><span class="line">            md = new MarkdownIt();</span><br><span class="line">          var result = md.render(_this.blog.content);</span><br><span class="line">          _this.blog.content = result</span><br><span class="line">          // &#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x80FD;&#x5426;&#x7F16;&#x8F91;</span><br><span class="line">          _this.ownBlog =  (_this.blog.userId === _this.$store.getters.getUser.id)</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    created() {</span><br><span class="line">      this.getBlog()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x903B;&#x8F91;&#x8FD8;&#x662F;&#x633A;&#x7B80;&#x5355;&#xFF0C;&#x521D;&#x59CB;&#x5316;create()&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;getBlog()&#x65B9;&#x6CD5;&#xFF0C;&#x8BF7;&#x6C42;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;&#x63A5;&#x53E3;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x535A;&#x5BA2;&#x8BE6;&#x60C5;content&#x901A;&#x8FC7;markdown-it&#x5DE5;&#x5177;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x3002;</p>
<p>&#x518D;&#x5BFC;&#x5165;&#x6837;&#x5F0F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import &apos;github-markdown.css&apos;</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5728;content&#x7684;div&#x4E2D;&#x6DFB;&#x52A0;class&#x4E3A;markdown-body&#x5373;&#x53EF;&#x54C8;&#x3002;<br>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/06e232edb5c4c879c53ffd92e6a60d6997e1753bed91247cfd1acc320dfc74bb" alt="&#x56FE;&#x7247;"></p>
<p>&#x53E6;&#x5916;&#x6807;&#x9898;&#x4E0B;&#x6DFB;&#x52A0;&#x4E86;&#x4E2A;&#x5C0F;&#x5C0F;&#x7684;&#x7F16;&#x8F91;&#x6309;&#x94AE;&#xFF0C;&#x901A;&#x8FC7;ownBlog &#xFF08;&#x5224;&#x65AD;&#x535A;&#x6587;&#x4F5C;&#x8005;&#x4E0E;&#x767B;&#x5F55;&#x7528;&#x6237;&#x662F;&#x5426;&#x540C;&#x4E00;&#x4EBA;&#xFF09;&#x6765;&#x5224;&#x65AD;&#x6309;&#x94AE;&#x662F;&#x5426;&#x663E;&#x793A;&#x51FA;&#x6765;&#x3002;</p>
<h3 id="12&#x3001;&#x8DEF;&#x7531;&#x6743;&#x9650;&#x62E6;&#x622A;"><a href="#12&#x3001;&#x8DEF;&#x7531;&#x6743;&#x9650;&#x62E6;&#x622A;" class="headerlink" title="12&#x3001;&#x8DEF;&#x7531;&#x6743;&#x9650;&#x62E6;&#x622A;"></a>12&#x3001;&#x8DEF;&#x7531;&#x6743;&#x9650;&#x62E6;&#x622A;</h3><p>&#x9875;&#x9762;&#x5DF2;&#x7ECF;&#x5F00;&#x53D1;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x63A7;&#x5236;&#x4E00;&#x4E0B;&#x54EA;&#x4E9B;&#x9875;&#x9762;&#x662F;&#x9700;&#x8981;&#x767B;&#x5F55;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x8DF3;&#x8F6C;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x672A;&#x767B;&#x5F55;&#x8BBF;&#x95EE;&#x5C31;&#x76F4;&#x63A5;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x767B;&#x5F55;&#x9875;&#x9762;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5728;src&#x76EE;&#x5F55;&#x4E0B;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;js&#x6587;&#x4EF6;&#xFF1A;</p>
<ul>
<li>src\permission.js</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import router from &quot;./router&quot;;</span><br><span class="line">// &#x8DEF;&#x7531;&#x5224;&#x65AD;&#x767B;&#x5F55; &#x6839;&#x636E;&#x8DEF;&#x7531;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x53C2;&#x6570;</span><br><span class="line">router.beforeEach((to, from, next) =&gt; {</span><br><span class="line">  if (to.matched.some(record =&gt; record.meta.requireAuth)) { // &#x5224;&#x65AD;&#x8BE5;&#x8DEF;&#x7531;&#x662F;&#x5426;&#x9700;&#x8981;&#x767B;&#x5F55;&#x6743;&#x9650;</span><br><span class="line">    const token = localStorage.getItem(&quot;token&quot;)</span><br><span class="line">    console.log(&quot;------------&quot; + token)</span><br><span class="line">    if (token) { // &#x5224;&#x65AD;&#x5F53;&#x524D;&#x7684;token&#x662F;&#x5426;&#x5B58;&#x5728; &#xFF1B; &#x767B;&#x5F55;&#x5B58;&#x5165;&#x7684;token</span><br><span class="line">      if (to.path === &apos;/login&apos;) {</span><br><span class="line">      } else {</span><br><span class="line">        next()</span><br><span class="line">      }</span><br><span class="line">    } else {</span><br><span class="line">      next({</span><br><span class="line">        path: &apos;/login&apos;</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  } else {</span><br><span class="line">    next()</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x518D;&#x5B9A;&#x4E49;&#x9875;&#x9762;&#x8DEF;&#x7531;&#x65F6;&#x5019;&#x7684;&#x7684;meta&#x4FE1;&#x606F;&#xFF0C;&#x6307;&#x5B9A;requireAuth: true&#xFF0C;&#x9700;&#x8981;&#x767B;&#x5F55;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5728;&#x6BCF;&#x6B21;&#x8DEF;&#x7531;&#x4E4B;&#x524D;&#xFF08;router.beforeEach&#xFF09;&#x5224;&#x65AD;token&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x89C9;&#x5F97;&#x662F;&#x5426;&#x9700;&#x8981;&#x8DF3;&#x8F6C;&#x5230;&#x767B;&#x5F55;&#x9875;&#x9762;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">  path: &apos;/blog/add&apos;, // &#x6CE8;&#x610F;&#x653E;&#x5728; path: &apos;/blog/:blogId&apos;&#x4E4B;&#x524D;</span><br><span class="line">  name: &apos;BlogAdd&apos;,</span><br><span class="line">  meta: {</span><br><span class="line">    requireAuth: true</span><br><span class="line">  },</span><br><span class="line">  component: BlogEdit</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x518D;main.js&#x4E2D;import&#x6211;&#x4EEC;&#x7684;permission.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plain&#x590D;&#x5236;&#x4EE3;&#x7801;import &apos;./permission.js&apos; // &#x8DEF;&#x7531;&#x62E6;&#x622A;</span><br></pre></td></tr></table></figure>

<h3 id="13&#x3001;&#x524D;&#x7AEF;&#x603B;&#x7ED3;"><a href="#13&#x3001;&#x524D;&#x7AEF;&#x603B;&#x7ED3;" class="headerlink" title="13&#x3001;&#x524D;&#x7AEF;&#x603B;&#x7ED3;"></a>13&#x3001;&#x524D;&#x7AEF;&#x603B;&#x7ED3;</h3><p>ok&#xFF0C;&#x57FA;&#x672C;&#x6240;&#x6709;&#x9875;&#x9762;&#x5C31;&#x5DF2;&#x7ECF;&#x5F00;&#x53D1;&#x5B8C;&#x6BD5;&#x5566;&#xFF0C;css&#x6837;&#x5F0F;&#x4FE1;&#x606F;&#x6211;&#x672A;&#x8D34;&#x51FA;&#x6765;&#xFF0C;&#x5927;&#x5BB6;&#x76F4;&#x63A5;&#x4E0A;github&#x4E0A;clone&#x4E0B;&#x6765;&#x67E5;&#x770B;&#x3002;</p>
<h2 id="&#x9879;&#x76EE;&#x5927;&#x603B;&#x7ED3;"><a href="#&#x9879;&#x76EE;&#x5927;&#x603B;&#x7ED3;" class="headerlink" title="&#x9879;&#x76EE;&#x5927;&#x603B;&#x7ED3;"></a>&#x9879;&#x76EE;&#x5927;&#x603B;&#x7ED3;</h2><p>&#x597D;&#x5566;&#xFF0C;&#x9879;&#x76EE;&#x5148;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x82B1;&#x4E86;3&#x5929;&#x534A;&#x5F55;&#x5236;&#x4E86;&#x4E00;&#x5957;&#x5BF9;&#x5E94;&#x7684;&#x89C6;&#x9891;&#xFF0C;&#x8BB0;&#x5F97;&#x53BB;&#x770B;&#xFF0C;&#x7ED9;&#x6211;&#x4E09;&#x8FDE;&#x54C7;&#x3002;</p>
<p>&#x9879;&#x76EE;&#x89C6;&#x9891;&#xFF1A;<a href="/external_links/ee2628e8e383ef57188cf91d88acc4cf.html" target="blank" rel="noopener">www.bilibili.com/video/BV1PQ&#x2026;</a></p>
<h2 id="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-2"><a href="#&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-2" class="headerlink" title="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;"></a>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;</h2><h2 id="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-3"><a href="#&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-3" class="headerlink" title="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;"></a>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;</h2><h2 id="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-4"><a href="#&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;-4" class="headerlink" title="&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;"></a>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;MarkerHub&#xFF0C;&#x56DE;&#x590D;&#x3010;vueblog&#x3011;&#xFF0C;&#x83B7;&#x53D6;&#x9879;&#x76EE;&#x6E90;&#x7801;&#xFF01;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6f0be355af6889ae96469d511743257550a58926d23819feafa4785843ce326f" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ef8b58c630e069eea3daf8d800547daa.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="tags/Spring-Boot/" rel="tag"># Spring Boot</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="6844904170651172871.html" rel="next" title="个人吐血系列-总结RocketMQ 大纲">
                <i class="fa fa-chevron-left"></i> 个人吐血系列-总结RocketMQ 大纲
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="6844904174023344136.html" rel="prev" title="带你深入理解 Flutter 中的字体“冷”知识">
                带你深入理解 Flutter 中的字体“冷”知识 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


    <!-- 有瓣音频文章内嵌广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-2626449904708114" data-ad-slot="6145016388"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <div class="post-spread">
      
    </div>
  </div>
  <!-- 有瓣音频信息流广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-6t+ed+2i-1n-4w" data-ad-client="ca-pub-2626449904708114" data-ad-slot="6455528644"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#关注公众号：MarkerHub，回复【vueblog】，获取项目源码！"><span class="nav-number">1.</span> <span class="nav-text">关注公众号：MarkerHub，回复【vueblog】，获取项目源码！</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关注公众号：MarkerHub，回复【vueblog】，获取项目源码！-1"><span class="nav-number">2.</span> <span class="nav-text">关注公众号：MarkerHub，回复【vueblog】，获取项目源码！</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前后端分离项目"><span class="nav-number">3.</span> <span class="nav-text">前后端分离项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java后端接口开发"><span class="nav-number">4.</span> <span class="nav-text">Java后端接口开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、前言"><span class="nav-number">4.1.</span> <span class="nav-text">1、前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、新建Springboot项目"><span class="nav-number">4.2.</span> <span class="nav-text">2、新建Springboot项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、整合mybatis-plus"><span class="nav-number">4.3.</span> <span class="nav-text">3、整合mybatis plus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、统一结果封装"><span class="nav-number">4.4.</span> <span class="nav-text">3、统一结果封装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、整合shiro-jwt，并会话共享"><span class="nav-number">4.5.</span> <span class="nav-text">4、整合shiro+jwt，并会话共享</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ShiroConfig"><span class="nav-number">4.5.1.</span> <span class="nav-text">ShiroConfig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AccountRealm"><span class="nav-number">4.5.2.</span> <span class="nav-text">AccountRealm</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JwtToken"><span class="nav-number">4.5.3.</span> <span class="nav-text">JwtToken</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AccountProfile"><span class="nav-number">4.5.4.</span> <span class="nav-text">AccountProfile</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JwtFilter"><span class="nav-number">4.5.5.</span> <span class="nav-text">JwtFilter</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、异常处理"><span class="nav-number">4.6.</span> <span class="nav-text">5、异常处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、实体校验"><span class="nav-number">4.7.</span> <span class="nav-text">6、实体校验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、跨域问题"><span class="nav-number">4.8.</span> <span class="nav-text">7、跨域问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、登录接口开发"><span class="nav-number">4.9.</span> <span class="nav-text">8、登录接口开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、博客接口开发"><span class="nav-number">4.10.</span> <span class="nav-text">9、博客接口开发</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、后端总结"><span class="nav-number">4.11.</span> <span class="nav-text">10、后端总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue前端页面开发"><span class="nav-number">5.</span> <span class="nav-text">Vue前端页面开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、前言-1"><span class="nav-number">5.1.</span> <span class="nav-text">1、前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、项目演示"><span class="nav-number">5.2.</span> <span class="nav-text">2、项目演示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、环境准备"><span class="nav-number">5.3.</span> <span class="nav-text">3、环境准备</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、新建项目"><span class="nav-number">5.4.</span> <span class="nav-text">4、新建项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、安装element-ui"><span class="nav-number">5.5.</span> <span class="nav-text">5、安装element-ui</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、安装axios"><span class="nav-number">5.6.</span> <span class="nav-text">6、安装axios</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、页面路由"><span class="nav-number">5.7.</span> <span class="nav-text">7、页面路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、登录页面"><span class="nav-number">5.8.</span> <span class="nav-text">8、登录页面</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#token的状态同步"><span class="nav-number">5.8.1.</span> <span class="nav-text">token的状态同步</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定义全局axios拦截器"><span class="nav-number">5.8.2.</span> <span class="nav-text">定义全局axios拦截器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、博客列表"><span class="nav-number">5.9.</span> <span class="nav-text">9、博客列表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#头部用户信息"><span class="nav-number">5.9.1.</span> <span class="nav-text">头部用户信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#博客分页"><span class="nav-number">5.9.2.</span> <span class="nav-text">博客分页</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10、博客编辑（发表）"><span class="nav-number">5.10.</span> <span class="nav-text">10、博客编辑（发表）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#安装mavon-editor"><span class="nav-number">5.10.1.</span> <span class="nav-text">安装mavon-editor</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11、博客详情"><span class="nav-number">5.11.</span> <span class="nav-text">11、博客详情</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12、路由权限拦截"><span class="nav-number">5.12.</span> <span class="nav-text">12、路由权限拦截</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13、前端总结"><span class="nav-number">5.13.</span> <span class="nav-text">13、前端总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#项目大总结"><span class="nav-number">6.</span> <span class="nav-text">项目大总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关注公众号：MarkerHub，回复【vueblog】，获取项目源码！-2"><span class="nav-number">7.</span> <span class="nav-text">关注公众号：MarkerHub，回复【vueblog】，获取项目源码！</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关注公众号：MarkerHub，回复【vueblog】，获取项目源码！-3"><span class="nav-number">8.</span> <span class="nav-text">关注公众号：MarkerHub，回复【vueblog】，获取项目源码！</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关注公众号：MarkerHub，回复【vueblog】，获取项目源码！-4"><span class="nav-number">9.</span> <span class="nav-text">关注公众号：MarkerHub，回复【vueblog】，获取项目源码！</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
