<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/379/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/379/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513902972942.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513902972942.html" itemprop="url">使用 ClojureScript 开发浏览器插件的过程与收获</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-25T19:13:03+08:00">
                2017-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x672C;&#x6587;&#x9996;&#x53D1;&#x4E8E;<a href="/external_links/6723b9aa0ae335ba45b24456b978e37c.html" target="blank" rel="noopener">&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;</a></p>
<hr>
<p>&#x968F;&#x7740; Firefox 57 &#x7684;&#x5230;&#x6765;&#xFF0C;&#x4E4B;&#x524D;&#x7EF4;&#x62A4;&#x7684;&#x4E00;&#x4E2A;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6; <a href="/external_links/2f786186eb9e82340b31df171366b95a.html" target="blank" rel="noopener">gooreplacer</a> &#x5FC5;&#x987B;&#x5347;&#x7EA7;&#x5230; WebExtensions &#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#xFF0C;&#x770B;&#x4E86;&#x4E0B;&#x4E4B;&#x524D;&#x5199;&#x7684; JS &#x4EE3;&#x7801;&#xFF0C;&#x6BEB;&#x65E0;&#x4FEE;&#x6539;&#x7684;&#x51B2;&#x52A8;&#xFF0C;&#x6015;&#x6539;&#x4E86;&#x8FD9;&#x4E2A;&#x5730;&#x65B9;&#xFF0C;&#x90A3;&#x4E2A;&#x5730;&#x65B9;&#x7A81;&#x7136;&#x5C31; broken &#x4E86;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x6B21;&#x9009;&#x62E9;&#x4E86; cljs&#xFF0C;&#x6574;&#x4F53;&#x4E0B;&#x6765;&#x6D41;&#x7A0B;&#x5F88;&#x987A;&#x5229;&#xFF0C;&#x9664;&#x4E86;&#x8FC1;&#x79FB;&#x4E4B;&#x524D;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x53C8;&#x52A0;&#x4E86;&#x66F4;&#x591A;&#x529F;&#x80FD;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x6210;&#x4E3A;&#x6700;&#x7B80;&#x5355;&#x6613;&#x7528;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x63D2;&#x4EF6; :-)</p>
<p>&#x95F2;&#x8BDD;&#x5C11;&#x8BF4;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x4F9D;&#x6B21;&#x4F1A;&#x4ECB;&#x7ECD; cljs &#x7684;&#x5DE5;&#x4F5C;&#x673A;&#x5236;&#x3001;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x5982;&#x4F55;&#x8BA9; cljs &#x9002;&#x914D;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;&#x89C4;&#x8303;&#xFF0C;&#x4EE5;&#x53CA;&#x91CD;&#x5199; gooreplacer &#x65F6;&#x7684;&#x4E00;&#x4E9B;&#x7ECF;&#x9A8C;&#x3002;<br>&#x672C;&#x6587;&#x7684;&#x8BFB;&#x8005;&#x9700;&#x8981;&#x5BF9; Clojure &#x8BED;&#x8A00;&#x3001;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x4E00;&#x822C;&#x6D41;&#x7A0B;&#x6709;&#x57FA;&#x672C;&#x4E86;&#x89E3;&#xFF0C;&#x5E76;&#x4E14;&#x5B8C;&#x6210; ClojureScript &#x7684; <a href="/external_links/be39b6a3cb24182b82ac4532b06eac5a.html" target="blank" rel="noopener">Quick Start</a>&#x3002;&#x5BF9;&#x4E8E; Clojure&#xFF0C;&#x6211;&#x76EE;&#x524D;&#x5728; sf &#x4E0A;&#x6709;<a href="/external_links/ae1b60929d8e289463c40f7897055abe.html" target="blank" rel="noopener">&#x4E00;&#x5957;&#x89C6;&#x9891;&#x8BFE;&#x7A0B;</a>&#xFF0C;&#x4F9B;&#x53C2;&#x8003;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x4F7F;&#x7528; cljs &#x5F00;&#x53D1;&#x63D2;&#x4EF6;&#xFF0C;&#x6211;&#x6574;&#x7406;&#x4E86;<a href="/external_links/22cd625902ae52f302cb20f434c869b2.html" target="blank" rel="noopener">&#x4E00;&#x4EFD;&#x6A21;&#x677F;</a>&#xFF0C;&#x4F9B;&#x5927;&#x5BB6;&#x53C2;&#x8003;&#x3002;gooreplacer &#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x5728;<a href="/external_links/2f786186eb9e82340b31df171366b95a.html" target="blank" rel="noopener">&#x8FD9;&#x91CC;</a>&#xFF0C;&#x6280;&#x672F;&#x6808;&#x4E3A; ClojureScript + Reagent + Antd + React-Bootstrap&#x3002;</p>
<h2 id="ClojureScript-&#x5DE5;&#x4F5C;&#x673A;&#x5236;"><a href="#ClojureScript-&#x5DE5;&#x4F5C;&#x673A;&#x5236;" class="headerlink" title="ClojureScript &#x5DE5;&#x4F5C;&#x673A;&#x5236;"></a>ClojureScript &#x5DE5;&#x4F5C;&#x673A;&#x5236;</h2><p>ClojureScript &#x662F;&#x4F7F;&#x7528; Clojure &#x7F16;&#x5199;&#xFF0C;&#x6700;&#x7EC8;&#x7F16;&#x8BD1;&#x751F;&#x6210; JS &#x4EE3;&#x7801;&#x7684;&#x4E00;&#x4E2A;<a href="/external_links/79fe0eb3a9fde2b65acab9ebba5782e3.html" target="blank" rel="noopener">&#x7F16;&#x8BD1;&#x5668;</a>&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528; <a href="/external_links/76aecafe59b74f3756ad6d437eef8066.html" target="blank" rel="noopener">Google Closure Compiler</a> &#x6765;&#x4F18;&#x5316; JS &#x4EE3;&#x7801;&#x3001;&#x89E3;&#x51B3;<a href="/external_links/ef4ada09cd6d20fef884fe60e114b959.html" target="blank" rel="noopener">&#x6A21;&#x5757;&#x5316;&#x5F15;&#x7528;</a>&#x7684;&#x95EE;&#x9898;&#x3002;&#x6574;&#x4F53;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b5207d50f79467633715bc6d248a50783eb2d64b02931d915c7ab58fefb95895" alt="cljs &#x7F16;&#x8BD1;&#x6D41;&#x7A0B;"></p>
<p>cljs &#x7F16;&#x8BD1;&#x6D41;&#x7A0B;</p>
<p>Cljs &#x8FD8;&#x63D0;&#x4F9B; <a href="/external_links/6cff9cf535f32e30289fda4c99d17203.html" target="blank" rel="noopener">&#x4E0E;&#x539F;&#x751F; JS &#x7684;&#x4EA4;&#x4E92;</a>&#x3001;<a href="/external_links/05f8d9bb557f7a8917d61dd8f06f2e18.html" target="blank" rel="noopener">&#x96C6;&#x6210;</a><a href="/external_links/1f8d62cf1c125246170ef4d8161c8cd1.html" target="blank" rel="noopener">&#x7B2C;&#x4E09;&#x65B9;&#x7C7B;&#x5E93;</a>&#x7684;&#x652F;&#x6301;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x53EA;&#x8981;&#x80FD;&#x7528; JS &#x7684;&#x5730;&#x65B9;&#xFF0C;&#x90FD;&#x80FD;&#x7528; cljs&#xFF0C;</p>
<h2 id="&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x51C6;&#x5907;"><a href="#&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x51C6;&#x5907;" class="headerlink" title="&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x51C6;&#x5907;"></a>&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x51C6;&#x5907;</h2><p>&#x5F00;&#x53D1; cljs &#x7684;&#x73AF;&#x5883;&#x9996;&#x9009; <a href="/external_links/4aa7b6bc87de1d9484f916d3ef153c9a.html" target="blank" rel="noopener">lein</a> + <a href="/external_links/f48969640db82c570fe15e5693610a34.html" target="blank" rel="noopener">figwheel</a>&#xFF0C;figwheel &#x76F8;&#x6BD4; <a href="/external_links/1cfd8898dc5cc8a4a4c42f74b1cb3663.html" target="blank" rel="noopener">lein-cljsbuild</a> &#x63D0;&#x4F9B;&#x4E86;&#x70ED;&#x52A0;&#x8F7D;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1; UI &#x5F88;&#x91CD;&#x8981;&#xFF01;</p>
<p>&#x5BF9;&#x4E8E;&#x4E00;&#x822C;&#x7684; cljs &#x5E94;&#x7528;&#xFF0C;&#x57FA;&#x672C;&#x90FD;&#x662F;&#x7528;&#x4E00;&#x4E2A; script &#x6807;&#x7B7E;&#x53BB;&#x5F15;&#x7528;&#x7F16;&#x8BD1;&#x540E;&#x7684; js &#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E2A; js &#x6587;&#x4EF6;&#x518D;&#x53BB;&#x52A0;&#x8F7D;&#x5176;&#x4ED6;&#x4F9D;&#x8D56;&#x3002;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;js/main.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>js/main.js &#x662F; project.clj &#x91CC;&#x9762;&#x6307;&#x5B9A;&#x7684;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#xFF0C;&#x5B83;&#x4F1A;&#x53BB;&#x52A0;&#x8F7D;&#x5176;&#x4ED6;&#x6240;&#x9700;&#x6587;&#x4EF6;&#xFF0C;&#x5176;&#x5185;&#x5BB9;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;var CLOSURE_UNCOMPILED_DEFINES = {};</span><br><span class="line">var CLOSURE_NO_DEPS = true;</span><br><span class="line">if(typeof goog == &quot;undefined&quot;) document.write(&apos;&lt;script src=&quot;js/out/goog/base.js&quot;&gt;&lt;/script&gt;&apos;);</span><br><span class="line">document.write(&apos;&lt;script src=&quot;js/out/goog/deps.js&quot;&gt;&lt;/script&gt;&apos;);</span><br><span class="line">document.write(&apos;&lt;script src=&quot;js/out/cljs_deps.js&quot;&gt;&lt;/script&gt;&apos;);</span><br><span class="line">document.write(&apos;&lt;script&gt;if (typeof goog == &quot;undefined&quot;) console.warn(&quot;ClojureScript could not load :main, did you forget to specify :asset-path?&quot;);&lt;/script&gt;&apos;);</span><br><span class="line">document.write(&apos;&lt;script&gt;goog.require(&quot;process.env&quot;);&lt;/script&gt;&apos;);</span><br><span class="line"></span><br><span class="line">document.write(&quot;&lt;script&gt;if (typeof goog != \&quot;undefined\&quot;) { goog.require(\&quot;figwheel.connect.build_dev\&quot;); }&lt;/script&gt;&quot;);</span><br><span class="line">document.write(&apos;&lt;script&gt;goog.require(&quot;hello_world.core&quot;);&lt;/script&gt;&apos;);</span><br></pre></td></tr></table></figure>

<h3 id="&#x6D88;&#x9664;-inline-script"><a href="#&#x6D88;&#x9664;-inline-script" class="headerlink" title="&#x6D88;&#x9664; inline script"></a>&#x6D88;&#x9664; inline script</h3><p>&#x5BF9;&#x4E8E;&#x4E00;&#x822C;&#x7684; Web &#x9879;&#x76EE;&#xFF0C;&#x53EA;&#x5F15;&#x7528;&#x8FD9;&#x4E00;&#x4E2A; js &#x6587;&#x4EF6;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;&#x6765;&#x8BF4;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;&#x51FA;&#x4E8E;&#x5B89;&#x5168;&#x56E0;&#x7D20;&#x8003;&#x8651;&#xFF0C;&#x662F;<a href="/external_links/4fe0de1c846911c55083efeebe07150d.html" target="blank" rel="noopener">&#x4E0D;&#x8BA9;&#x6267;&#x884C; incline script</a>&#xFF0C;&#x4F1A;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0e619d745379a10abe868afd3c7153fd407037603e28c5bfee13039b24ace595" alt="inline script error"></p>
<p>inline script error</p>
<p>&#x4E3A;&#x4E86;&#x53BB;&#x6389;&#x8FD9;&#x4E9B;&#x9519;&#x8BEF;&#xFF0C;&#x624B;&#x52A8;&#x52A0;&#x8F7D; js/main.js &#x91CC;&#x9762;&#x52A8;&#x6001;&#x5F15;&#x5165;&#x7684;&#x6587;&#x4EF6;&#xFF0C;require &#x6240;&#x9700;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x5373;&#x53EF;&#xFF0C;&#x4FEE;&#x6539;&#x540E;&#x7684; html &#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;script src=&quot;js/out/goog/base.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/out/cljs_deps.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/init.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x4E2D; init.js &#x5185;&#x5BB9;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;// figwheel &#x7528;&#x4E8E;&#x70ED;&#x52A0;&#x8F7D;&#xFF0C;&#x8FD9;&#x91CC;&#x7684; build_dev &#x5176;&#x5B9E;&#x662F; build_{build_id}&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; dev</span><br><span class="line">goog.require(&quot;figwheel.connect.build_dev&quot;);</span><br><span class="line">// &#x52A0;&#x8F7D;&#x4E3A; main &#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;</span><br><span class="line">goog.require(&quot;hello_world.core&quot;);</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;&#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;&#x4E86;&#x3002;&#x53EF;&#x4EE5;&#x5728; DevTools &#x4E2D;&#x89C2;&#x5BDF;&#x5230;&#x6240;&#x6709;&#x5F15;&#x7528;&#x7684; js &#x6587;&#x4EF6;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c368612a5e441654cccc50890011df65fa2d62bfb5569da77915f0ad6f2d598d" alt="&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7684; JS &#x6587;&#x4EF6;"></p>
<p>&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7684; JS &#x6587;&#x4EF6;</p>
<p>&#x5728;&#x5DE6;&#x4E0B;&#x89D2;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x603B;&#x5171;&#x6709; 92 &#x4E2A;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x5BF9;&#x4E8E; background page/option page/popup page &#x8FD9;&#x4E09;&#x5904;&#x90FD;&#x53EF;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x63AA;&#x65BD;&#xFF0C;&#x4F46;&#x662F; content script &#x6CA1;&#x6CD5;&#x6307;&#x5B9A; js &#x811A;&#x672C;&#x52A0;&#x8F7D;&#x987A;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x60F3;&#x5230;&#x7684;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;content_scripts&quot;: [{</span><br><span class="line">  &quot;matches&quot;: [&quot;http://*/*&quot;, &quot;https://*/*&quot;],</span><br><span class="line">  &quot;run_at&quot;: &quot;document_end&quot;,</span><br><span class="line">  &quot;js&quot;: [&quot;content/js/out/goog/base.js&quot;, &quot;content/js/out/cljs_deps.js&quot;, &quot;content/init.js&quot;]</span><br><span class="line">}]</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x7684; content &#x7684;&#x76EE;&#x5F55;&#x4E0E; manifest.json &#x5728;&#x540C;&#x4E00;&#x7EA7;&#x76EE;&#x5F55;&#x3002;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4F1A;&#x62A5;&#x5982;&#x4E0B;&#x7684;&#x9519;&#x8BEF;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/5d977ada68a68ca7a79965eafc218b47253d4fb8afcc7834781213f3d35654a6" alt="content script &#x62A5;&#x9519;"></p>
<p>content script &#x62A5;&#x9519;</p>
<p>&#x6839;&#x636E;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x662F; base.js &#x518D;&#x53BB;&#x52A8;&#x6001;&#x5F15;&#x7528;&#x5176;&#x4ED6; js &#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x662F;&#x4EE5;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x4E3A;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x5F00;&#x59CB;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x5C31;&#x627E;&#x4E0D;&#x5230;&#x6B63;&#x786E;&#x7684; JS &#x6587;&#x4EF6;&#x4E86;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x8BBE;&#x7F6E; cljsbuild &#x7684; <code>optimizations</code> &#x4E3A; <code>:whitespace</code>&#xFF0C;&#x628A;&#x6240;&#x6709;&#x6587;&#x4EF6;&#x6253;&#x5305;&#x5230;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5F15;&#x7528;&#x8FD9;&#x4E00;&#x4E2A;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;<a href="/external_links/14fedb0618413f4b63a1f862b3c1c001.html" target="blank" rel="noopener">&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E0D;&#x662F;&#x5F88;&#x5B8C;&#x7F8E;</a>&#xFF0C;&#x91C7;&#x7528; whitespace &#x4E00;&#x65B9;&#x9762;&#x4F7F;&#x7F16;&#x8BD1;&#x65F6;&#x95F4;&#x66F4;&#x957F;&#xFF0C;&#x5728;&#x6211;&#x673A;&#x5668;&#x4E0A;&#x9700;&#x8981;12s&#xFF1B;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x662F;&#x65E0;&#x6CD5;&#x4F7F;&#x7528; figwheel&#xFF0C;&#x4F1A;&#x62A5; A Figwheel build must have :compiler &gt; :optimizations default to nil or set to :none &#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x56E0;&#x6B64;&#x4E5F;&#x5C31;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x4EE3;&#x7801;&#x70ED;&#x52A0;&#x8F7D;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<p>gooreplacer &#x91CC;&#x9762;&#x53EA;&#x4F7F;&#x7528;&#x4E86; background page &#x4E0E; option page&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E5F;&#x5C31;&#x907F;&#x514D;&#x4E86;&#x3002;</p>
<h3 id="&#x533A;&#x5206;-dev-&#x4E0E;-release-&#x6A21;&#x5F0F;"><a href="#&#x533A;&#x5206;-dev-&#x4E0E;-release-&#x6A21;&#x5F0F;" class="headerlink" title="&#x533A;&#x5206; dev &#x4E0E; release &#x6A21;&#x5F0F;"></a>&#x533A;&#x5206; dev &#x4E0E; release &#x6A21;&#x5F0F;</h3><p>&#x8FD9;&#x91CC;&#x7684; dev &#x662F;&#x6307;&#x6B63;&#x5E38;&#x7684;&#x5F00;&#x53D1;&#x6D41;&#x7A0B;&#xFF0C;release &#x662F;&#x6307;&#x5F00;&#x53D1;&#x5B8C;&#x6210;&#xFF0C;&#x51C6;&#x5907;&#x6253;&#x5305;&#x4E0A;&#x4F20;&#x5230;&#x5E94;&#x7528;&#x5546;&#x5E97;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x5728; dev &#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x63A8;&#x8350;&#x8BBE;&#x7F6E; cljsbuild &#x7684; <code>optimizations</code> &#x4E3A; none&#xFF0C;&#x4EE5;&#x4FBF;&#x5F97;&#x5230;&#x6700;&#x5FEB;&#x7684;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;&#xFF1B;<br>&#x5728; release &#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A; <code>advanced</code>&#xFF0C;&#x6765;&#x538B;&#x7F29;&#x3001;&#x4F18;&#x5316; js &#x6587;&#x4EF6;&#xFF0C;&#x4EE5;&#x4FBF;&#x6700;&#x7EC8;&#x7684;&#x4F53;&#x79EF;&#x6700;&#x5C0F;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5728;&#x4E24;&#x79CD;&#x6A21;&#x5F0F;&#x4E2D;&#x590D;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x56FE;&#x7247;&#x3001;css &#x7B49;&#x8D44;&#x6E90;&#xFF0C;&#x53EF;&#x91C7;&#x7528;&#x4E86;&#x8F6F;&#x94FE;&#x7684;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;resources &#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;.</span><br><span class="line">&#x251C;&#x2500;&#x2500; css</span><br><span class="line">&#x2502;   &#x2514;&#x2500;&#x2500; option.css</span><br><span class="line">&#x251C;&#x2500;&#x2500; dev</span><br><span class="line">&#x2502;   &#x251C;&#x2500;&#x2500; background</span><br><span class="line">&#x2502;   &#x2502;   &#x251C;&#x2500;&#x2500; index.html</span><br><span class="line">&#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; init.js</span><br><span class="line">&#x2502;   &#x251C;&#x2500;&#x2500; content</span><br><span class="line">&#x2502;   &#x251C;&#x2500;&#x2500; manifest.json -&gt; ../manifest.json</span><br><span class="line">&#x2502;   &#x2514;&#x2500;&#x2500; option</span><br><span class="line">&#x2502;       &#x251C;&#x2500;&#x2500; css -&gt; ../../css/</span><br><span class="line">&#x2502;       &#x251C;&#x2500;&#x2500; images -&gt; ../../images/</span><br><span class="line">&#x2502;       &#x251C;&#x2500;&#x2500; index.html</span><br><span class="line">&#x2502;       &#x2514;&#x2500;&#x2500; init.js</span><br><span class="line">&#x251C;&#x2500;&#x2500; images</span><br><span class="line">&#x2502;   &#x251C;&#x2500;&#x2500; cljs.png</span><br><span class="line">&#x2502;   &#x251C;&#x2500;&#x2500; cljs_16.png</span><br><span class="line">&#x2502;   &#x251C;&#x2500;&#x2500; cljs_32.png</span><br><span class="line">&#x2502;   &#x2514;&#x2500;&#x2500; cljs_48.png</span><br><span class="line">&#x251C;&#x2500;&#x2500; manifest.json</span><br><span class="line">&#x2514;&#x2500;&#x2500; release</span><br><span class="line">    &#x251C;&#x2500;&#x2500; background</span><br><span class="line">    &#x2502;   &#x251C;&#x2500;&#x2500; index.html</span><br><span class="line">    &#x2502;   &#x2514;&#x2500;&#x2500; js</span><br><span class="line">    &#x2502;       &#x2514;&#x2500;&#x2500; main.js</span><br><span class="line">    &#x251C;&#x2500;&#x2500; content</span><br><span class="line">    &#x2502;   &#x2514;&#x2500;&#x2500; js</span><br><span class="line">    &#x2502;       &#x2514;&#x2500;&#x2500; main.js</span><br><span class="line">    &#x251C;&#x2500;&#x2500; manifest.json -&gt; ../manifest.json</span><br><span class="line">    &#x2514;&#x2500;&#x2500; option</span><br><span class="line">        &#x251C;&#x2500;&#x2500; css -&gt; ../../css/</span><br><span class="line">        &#x251C;&#x2500;&#x2500; images -&gt; ../../images/</span><br><span class="line">        &#x251C;&#x2500;&#x2500; index.html</span><br><span class="line">        &#x2514;&#x2500;&#x2500; js</span><br><span class="line">            &#x2514;&#x2500;&#x2500; main.js</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x6B21;&#xFF0C;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5F00;&#x542F;&#x591A;&#x4E2A; figwheel &#x5B9E;&#x4F8B;&#x6765;&#x5206;&#x522B;&#x7F16;&#x8BD1; background&#x3001;option &#x91CC;&#x9762;&#x7684; js&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x591A;&#x4E2A; lein &#x7684; profiles&#xFF0C;&#x6765;&#x6307;&#x5B9A;&#x4E0D;&#x540C;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5177;&#x4F53;&#x53EF;&#x53C2;&#x8003; <a href="/external_links/af85cee5458f527103ea0c6588d3db88.html" target="blank" rel="noopener">&#x6A21;&#x677F;&#x7684; project.clj</a> &#x6587;&#x4EF6;&#x3002;</p>
<h3 id="externs"><a href="#externs" class="headerlink" title="externs"></a>externs</h3><p>&#x5728; optimizations &#x4E3A; advanced &#x65F6;&#xFF0C;cljs &#x4F1A;&#x5145;&#x5206;&#x501F;&#x7528; Google Closure Compiler &#x6765;&#x538B;&#x7F29;&#x3001;&#x6DF7;&#x6DC6;&#x4EE3;&#x7801;&#xFF0C;&#x4F1A;&#x628A;&#x53D8;&#x91CF;&#x540D;&#x91CD;&#x547D;&#x540D;&#x4E3A; a b c &#x4E4B;&#x7C7B;&#x7684;&#x7B80;&#x5199;&#xFF0C;&#x4E3A;&#x4E86;&#x4E0D;&#x4F7F; chrome/firefox &#x63D2;&#x4EF6; API &#x91CC;&#x9762;&#x7684;&#x51FD;&#x6570;&#x6DF7;&#x6DC6;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x8F7D;&#x5B83;&#x4EEC;&#x5BF9;&#x5E94;&#x7684; externs &#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x822C;&#x53EA;&#x9700;&#x8981;&#x8FD9;&#x4E24;&#x4E2A; <a href="/external_links/7fcbb1929bf3ff1664c9d13e914d7625.html" target="blank" rel="noopener">chrome_extensions.js</a>&#x3001;<a href="/external_links/f1ab516aede45fbd5a634780120b9847.html" target="blank" rel="noopener">chrome.js</a>&#x3002;</p>
<h3 id="&#x6D4B;&#x8BD5;&#x73AF;&#x5883;"><a href="#&#x6D4B;&#x8BD5;&#x73AF;&#x5883;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x73AF;&#x5883;"></a>&#x6D4B;&#x8BD5;&#x73AF;&#x5883;</h3><p>cljs &#x81EA;&#x5E26;&#x7684; test &#x529F;&#x80FD;&#x6BD4;&#x8F83;&#x6413;&#xFF0C;&#x6BD4;&#x8F83;&#x597D;&#x7528;&#x7684;&#x662F; <a href="/external_links/10c0e5450cdcee072800dc4b36c12f9c.html" target="blank" rel="noopener">doo</a>&#xFF0C;&#x4E3A;&#x4E86;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x63D0;&#x524D;&#x5B89;&#x88C5; <a href="/external_links/ea89378a5f448f52b8d7bdcfd6909022.html" target="blank" rel="noopener">phantom</a> &#x6765;&#x63D0;&#x4F9B; headless &#x73AF;&#x5883;&#xFF0C;&#x5199;&#x597D;&#x6D4B;&#x8BD5;&#x5C31;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4E86;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;lein doo phantom {build-id} {watch-mode}</span><br></pre></td></tr></table></figure>

<p>&#x975E;&#x5E38;&#x68D2;&#x7684;&#x4E00;&#x70B9;&#x662F;&#x5B83;&#x4E5F;&#x80FD;&#x652F;&#x6301;&#x70ED;&#x52A0;&#x8F7D;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6211;&#x4E00;&#x76F4;&#x5F00;&#x7740;&#x5B83;&#x3002;</p>
<h3 id="re-agent"><a href="#re-agent" class="headerlink" title="re-agent"></a>re-agent</h3><p><a href="/external_links/0df688247252fd90f526d4f004d49b3f.html" target="blank" rel="noopener">re-agent</a> &#x662F;&#x5BF9; React &#x7684;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#xFF0C;&#x4F7F;&#x4E4B;&#x7B26;&#x5408; cljs &#x5F00;&#x53D1;&#x4E60;&#x60EF;&#x3002;&#x6BEB;&#x65E0;&#x5938;&#x5F20;&#x7684;&#x8BF4;&#xFF0C;&#x5BF9;&#x4E8E;&#x975E;&#x4E13;&#x4E1A;&#x524D;&#x7AEF;&#x7A0B;&#x5E8F;&#x5458;&#x6765;&#x8BF4;&#xFF0C;&#x8981;&#x60F3;&#x4F7F;&#x7528; React&#xFF0C;cljs &#x6BD4; jsx &#x662F;&#x4E2A;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;&#xFF0C;<a href="/external_links/6d2b781a39c6ec4d46ae5b822b812fa7.html" target="blank" rel="noopener">Hiccup-like</a> &#x7684;&#x8BED;&#x6CD5;&#x6BD4; jsx &#x66F4;&#x7D27;&#x51D1;&#xFF0C;&#x4E0D;&#x7528;&#x518D;&#x53BB;&#x7406;&#x776C; <a href="/external_links/ea21a44b33195a70cfb818af37036a07.html" target="blank" rel="noopener">webpack</a>&#xFF0C;<a href="/external_links/9753fae5903c0a03159eac533fe855dc.html" target="blank" rel="noopener">babel</a> &#x7B49;&#x7B49;&#x5C42;&#x51FA;&#x4E0D;&#x7A77;&#x7684; js &#x5DE5;&#x5177;&#xFF0C;&#x66F4;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x662F; immutable &#x5728; cljs &#x4E2D;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#xFF0C;re-agent &#x91CC;&#x9762;&#x6709;&#x81EA;&#x5DF1;&#x7EF4;&#x62A4;&#x72B6;&#x6001;&#x7684;&#x673A;&#x5236; atom&#xFF0C;&#x4E0D;&#x5728;&#x9700;&#x8981;&#x4E25;&#x683C;&#x533A;&#x5206; React &#x91CC;&#x9762;&#x7684; props &#x4E0E; state&#x3002;</p>
<p>&#x4E86;&#x89E3; re-agent &#x7684;&#x6700;&#x597D;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#x4ECE;&#x5B83;<a href="/external_links/0df688247252fd90f526d4f004d49b3f.html" target="blank" rel="noopener">&#x5B98;&#x7F51;&#x7ED9;&#x51FA;&#x7684;&#x793A;&#x4F8B;</a>&#x5F00;&#x59CB;&#xFF0C;&#x7136;&#x540E;&#x9605;&#x8BFB; re-frame wiki &#x91CC;&#x9762;&#x7684; <a href="/external_links/e6e2ca7951c9e9e725aab5355f5f8902.html" target="blank" rel="noopener">Creating Reagent Components</a>&#xFF0C;&#x4E86;&#x89E3;&#x4E09;&#x79CD;&#x4E0D;&#x540C;&#x7684; form &#x7684;&#x533A;&#x522B;&#xFF0C;98% gooreplacer &#x90FD;&#x5728;&#x4F7F;&#x7528; form-2&#x3002;&#x5982;&#x679C;&#x5BF9;&#x539F;&#x7406;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x5EFA;&#x8BAE;&#x4E5F;&#x628A;&#x5176;&#x4ED6; wiki &#x770B;&#x5B8C;&#x3002;</p>
<p>re-agent &#x8FD8;&#x6709;&#x4E00;&#x70B9;&#x6BD4;&#x8F83;&#x5B9E;&#x7528;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9; React &#x539F;&#x751F;&#x7EC4;&#x4EF6;&#x7684;&#x8F6C;&#x5316;&#x51FD;&#x6570;&#xFF1A;<a href="/external_links/c427255dce0223b7bb52212b970c61cf.html" target="blank" rel="noopener">adapt-react-class</a>&#xFF0C;&#x4F7F;&#x7528;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;(def Button (reagent/adapt-react-class (aget js/ReactBootstrap &quot;Button&quot;)))</span><br><span class="line"></span><br><span class="line">[:div</span><br><span class="line">  [:h2 &quot;A sample title&quot;]</span><br><span class="line">  [Button &quot;with a button&quot;]]</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x7528;&#x62C5;&#x5FC3; React &#x7684;&#x7C7B;&#x5E93;&#x4E0D;&#x80FD;&#x5728; cljs &#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p>&#x8BF4;&#x5230; re-agent&#xFF0C;&#x5C31;&#x4E0D;&#x80FD;&#x4E0D;&#x63D0;&#x5230; <a href="/external_links/3b42c8843c90e4d4c1610dc0d2a3057b.html" target="blank" rel="noopener">om.next</a>&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5728; cljs &#x793E;&#x533A;&#x91CC;&#x9762;&#x5E94;&#x8BE5;&#x662F;&#x6700;&#x6709;&#x540D;&#x7684; React wrapper&#xFF0C;om.next &#x7406;&#x5FF5;&#x4E0E;&#x4F7F;&#x7528;&#x96BE;&#x5EA6;&#x5747;&#x8FDC;&#x9AD8;&#x4E8E; re-agent&#xFF0C;&#x521D;&#x5B66;&#x8005;&#x4E00;&#x822C;&#x4E0D;&#x63A8;&#x8350;&#x76F4;&#x63A5;&#x7528; om.next&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x8FD9;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x6BD4;&#x8F83;&#xFF1A;</p>
<ul>
<li><a href="/external_links/6c565d628ae6356d7c678583f35283e5.html" target="blank" rel="noopener">Why Re-frame instead of Om Next</a>&#xFF0C;&#x4EE5;&#x53CA; <a href="/external_links/9a3ba59e6f34442585cd8d32e7840d72.html" target="blank" rel="noopener">Reddit &#x4E0A;&#x7684;&#x8BA8;&#x8BBA;</a></li>
<li><a href="/external_links/a0eb8417b1fb7d72d834f307d7df00f4.html" target="blank" rel="noopener">A rant on Om Next</a></li>
</ul>
<h2 id="&#x5751;"><a href="#&#x5751;" class="headerlink" title="&#x5751;"></a>&#x5751;</h2><h3 id="&#x5B8F;"><a href="#&#x5B8F;" class="headerlink" title="&#x5B8F;"></a><a href="/external_links/38c31d9d6c6e1bfc82251d75df09444a.html" target="blank" rel="noopener">&#x5B8F;</a></h3><p>cljs &#x91CC;&#x9762;&#x52A0;&#x8F7D;&#x5B8F;&#x7684;&#x673A;&#x5236;&#x6709;&#x522B;&#x4E8E; Clojure&#xFF0C;&#x4E00;&#x822C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x628A;&#x5B8F;&#x5B9A;&#x4E49;&#x5728;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x91CC;&#x9762;&#xFF0C;&#x7136;&#x540E;&#x5728; cljs &#x91CC;&#x9762;&#x7528;<code>(:require-macros [my.macros :as my])</code> &#x8FD9;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x5F15;&#x7528;&#xFF0C;&#x800C;&#x4E14;&#x5B8F;&#x5B9A;&#x4E49;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x540E;&#x7F00;&#x5FC5;&#x987B;&#x662F; clj &#x6216; cljc&#xFF0C;&#x4E0D;&#x80FD;&#x662F; cljs&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5751;&#x4E86;&#x6211;&#x597D;&#x4E45;&#x3002;&#x3002;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x5B8F;&#x7F16;&#x8BD1;&#x4E0E; cljs &#x7F16;&#x7A0B;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x65F6;&#x671F;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;&#x5B8F;&#x5199;&#x9519;&#x4E86;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x628A; repl &#x6740;&#x6389;&#x91CD;&#x542F;&#x6765;&#x628A;&#x65B0;&#x7684;&#x5B8F; feed &#x7ED9; cljs&#xFF0C;&#x8FD9;&#x70B9;&#x4E5F;&#x6BD4;&#x8F83;&#x75DB;&#x82E6;&#xFF0C;&#x56E0;&#x4E3A; repl &#x7684;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5B9E;&#x5728;&#x662F;&#x6709;&#x4E9B;&#x6162;&#x3002;&#x8FD9;&#x4E00;&#x70B9;&#x5728; Clojure &#x91CC;&#x9762;&#x867D;&#x7136;&#x4E5F;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x662F; Clojure &#x91CC;&#x9762;&#x4E00;&#x822C; repl &#x5F00;&#x4E86;&#x5C31;&#x4E0D;&#x5173;&#x4E86;&#xFF0C;&#x76F4;&#x5230;&#x7535;&#x8111;&#x91CD;&#x542F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/fa710283a2acf64e2a2ac9ddc02910022f0d5229fc8950c754dda95151ca1f7e" alt="&#x6211;&#x673A;&#x5668;&#x4E0A;&#x542F;&#x52A8;&#x7684; repl &#x5217;&#x8868;"></p>
<p>&#x6211;&#x673A;&#x5668;&#x4E0A;&#x542F;&#x52A8;&#x7684; repl &#x5217;&#x8868;</p>
<h3 id="IDE"><a href="#IDE" class="headerlink" title="IDE"></a>IDE</h3><p>Clojure &#x91CC;&#x9762;&#x91C7;&#x7528; Emacs + Cider &#x7684;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x975E;&#x5E38;&#x5B8C;&#x7F8E;&#xFF0C;&#x4F46;&#x662F;&#x5230;&#x4E86; cljs &#x91CC;&#x9762;&#xFF0C;&#x5F00;&#x53D1;&#x6D41;&#x7A0B;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x5E73;&#x6ED1;&#xFF0C;&#x603B;&#x662F;&#x6709;&#x4E9B;&#x78D5;&#x78D5;&#x7ECA;&#x7ECA;&#xFF0C;&#x4E5F;&#x7ED9; cider <a href="/external_links/ead0e9c4979e75cf51f2917e4ec987ce.html" target="blank" rel="noopener">&#x63D0;&#x4E86;&#x4E2A; issue</a>&#xFF0C;&#x8C8C;&#x4F3C;&#x4E00;&#x76F4;&#x6CA1;&#x4EBA;&#x7406;&#xFF0C;&#x652F;&#x6301;&#x786E;&#x5B9E;&#x4E0D;&#x597D;&#xFF0C;&#x4E0D;&#x8FC7;&#x6709;&#x4E86; figwheel&#xFF0C;&#x5728;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x4E0A;&#x80FD;&#x5F25;&#x8865;&#x8FD9;&#x4E2A;&#x7F3A;&#x9677;&#x3002;&#x5728; Emacs &#x91CC;&#x9762;&#x914D;&#x7F6E; repl &#x53EF;&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="/external_links/4b52b8f155e78aa9149fed798125273b.html" target="blank" rel="noopener">cider.readthedocs.io/en/latest/u&#x2026;</a></li>
</ul>
<p>Cider &#x9ED8;&#x8BA4;&#x4F1A;&#x4F7F;&#x7528; rhino &#x4F5C;&#x4E3A; repl &#x6C42;&#x503C;&#x73AF;&#x5883;&#xFF0C;&#x8FD9;&#x4E2A;&#x5728;&#x5F00;&#x53D1;&#x6D4F;&#x89C8;&#x5668;&#x63D2;&#x4EF6;&#x65F6;&#x529F;&#x80FD;&#x5F88;&#x6709;&#x9650;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x67E5;&#x770B;&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x6362;&#x6210; figwheel&#x3002;</p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>ClojureScript &#x53EF;&#x4EE5;&#x7B97;&#x662F; Clojure &#x8BED;&#x8A00;&#x7684;&#x4E00;&#x4E2A;<a href="/external_links/d52af3e2aa9d44975177078053761d5c.html" target="blank" rel="noopener">&#x6740;&#x624B;&#x7EA7;</a><a href="/external_links/c06bd29e34df46aa2c379cccb57bbc0f.html" target="blank" rel="noopener">&#x5E94;&#x7528;</a>&#xFF0C;React &#x4F7F;&#x5F97;&#x540E;&#x7AEF;&#x7A0B;&#x5E8F;&#x5458;&#x4E5F;&#x80FD;&#x5FEB;&#x901F;&#x4F5C;&#x51FA;&#x7F8E;&#x89C2;&#x5B9E;&#x7528;&#x7684;&#x754C;&#x9762;&#x3002;ClojureScript + React&#xFF0C;&#x7528;&#x8D77;&#x6765;&#x4E0D;&#x80FD;&#x518D;&#x5F00;&#x5FC3;&#x5566;&#xFF01;</p>
<p>JS &#x793E;&#x533A;&#x91CC;&#x9762;&#x5C42;&#x51FA;&#x4E0D;&#x7A77;&#x7684;&#x6846;&#x67B6;&#x6BCF;&#x6B21;&#x90FD;&#x8BA9;&#x8DC3;&#x8DC3;&#x6B32;&#x8BD5;&#x7684;&#x6211;&#x671B;&#x800C;&#x5374;&#x6B65;&#xFF0C;&#x6709;&#x4E86; cljs&#xFF0C;&#x7B97;&#x662F;&#x628A; Lisp &#x5EF6;&#x4F38;&#x5230;&#x4E86;&#x66F4;&#x5BBD;&#x5E7F;&#x7684;&#x201C;&#x9886;&#x571F;&#x201D;&#x3002;&#x6700;&#x8FD1;&#x770B;&#x5230;&#x8FD9;&#x4E48;&#x4E00;&#x53E5;&#x8BDD;&#xFF0C;&#x4E0E;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#xFF1A;</p>
<blockquote>
<p>&#x4E5F;&#x8BB8; Lisp &#x4E0D;&#x662F;&#x89E3;&#x51B3;&#x6240;&#x6709;&#x95EE;&#x9898;&#x6700;&#x5408;&#x9002;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x9F13;&#x52B1;&#x4F60;&#x8BBE;&#x8BA1;&#x4E00;&#x79CD;&#x6700;&#x5408;&#x9002;&#x7684;&#x8BED;&#x8A00;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x96BE;&#x9898;&#x3002;</p>
</blockquote>
<p>&#x51FA;&#x5904;&#x5FD8;&#x8BB0;&#x4E86;&#xFF0C;&#x5927;&#x4F53;&#x662F;&#x8FD9;&#x4E48;&#x4E2A;&#x610F;&#x601D;&#x3002;</p>
<h2 id="&#x53C2;&#x8003;"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</h2><ul>
<li><a href="/external_links/b3f2056c3ffd6dd7c14ad0d19fc572c0.html" target="blank" rel="noopener">Chrome extension in ClojureScript</a></li>
<li><a href="/external_links/6f6ce69150b80c6bc1c3a34cabea24ab.html" target="blank" rel="noopener">github.com/binaryage/c&#x2026;</a></li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/f3937d2d55b70aebcf613a8fdfca4982.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513852493832.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513852493832.html" itemprop="url">通过Ansi Escape Codes酷炫玩转命令行！</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-25T11:31:48+08:00">
                2017-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x5F15;&#x8A00;"><a href="#&#x5F15;&#x8A00;" class="headerlink" title="&#x5F15;&#x8A00;"></a>&#x5F15;&#x8A00;</h2><p>&#x4F60;&#x662F;&#x5426;&#xFF1A;</p>
<ul>
<li>&#x597D;&#x5947;&#x8FC7;&#x547D;&#x4EE4;&#x884C;&#x91CC;&#x90A3;&#x4E9B;&#x82B1;&#x91CC;&#x80E1;&#x54E8;&#x7684;&#x8FDB;&#x5EA6;&#x6761;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;</li>
<li>&#x597D;&#x5947;&#x8FC7;Spring Boot&#x4E3A;&#x4EC0;&#x4E48;&#x80FD;&#x591F;&#x6253;&#x5370;&#x4E94;&#x989C;&#x516D;&#x8272;&#x7684;&#x65E5;&#x5FD7;&#xFF1F;</li>
<li>&#x597D;&#x5947;&#x8FC7;Python&#x6216;&#x8005;PHP&#x7B49;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x7684;&#x4EA4;&#x4E92;&#x5F0F;&#x547D;&#x4EE4;&#x884C;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;</li>
<li>&#x597D;&#x5947;&#x8FC7;Vim&#x6216;&#x8005;Emacs&#x7B49;&#x5728;Terminal&#x4E2D;&#x7684;&#x7F16;&#x8F91;&#x5668;&#x662F;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x7684;&#xFF1F;</li>
</ul>
<p>&#x5982;&#x679C;&#x4F60;&#x66FE;&#x7ECF;&#x597D;&#x5947;&#x8FC7;&#xFF0C;&#x6216;&#x8005;&#x88AB;&#x8FD9;&#x6BB5;&#x8BDD;&#x52FE;&#x8D77;&#x4E86;&#x4F60;&#x7684;&#x597D;&#x5947;&#x5FC3;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x7EDD;&#x5BF9;&#x4E0D;&#x80FD;&#x9519;&#x8FC7;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF01;</p>
<h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><p>&#x901A;&#x8FC7;&#x672C;&#x6587;&#x4F60;&#x53EF;&#x4EE5;&#x5B66;&#x5230;&#xFF1A;</p>
<ol>
<li>&#x4F55;&#x4E3A;Ansi Escape Codes&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;</li>
<li>Ansi Escape Codes&#x7684;&#x4E00;&#x4E9B;&#x9AD8;&#x7EA7;&#x5E94;&#x7528;&#x3002;</li>
<li>JDK9&#x4E2D;Jshell&#x7684;&#x4F7F;&#x7528;&#x3002;</li>
</ol>
<p>&#x4E8B;&#x5148;&#x58F0;&#x660E;&#xFF0C;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x53C2;&#x8003;&#xFF1A;<a href="/external_links/0c461be58e0247c7dff5271d863a7cad.html" target="blank" rel="noopener">www.lihaoyi.com/post/Buildy&#x2026;</a>&#x3002;&#x539F;&#x6587;&#x601D;&#x8DEF;&#x6E05;&#x6670;&#xFF0C;&#x6848;&#x4F8B;&#x751F;&#x52A8;&#x5F62;&#x8C61;&#xFF0C;&#x6392;&#x7248;&#x4F18;&#x79C0;&#xFF0C;&#x5B9E;&#x4E3A;&#x826F;&#x5FC3;&#x4E4B;&#x4F5C;&#x3002;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x539F;&#x6587;&#x662F;&#x7528;&#x82F1;&#x8BED;&#x4E66;&#x5199;&#x4E14;&#x7528;Python&#x4F5C;&#x4E3A;&#x6F14;&#x793A;&#xFF0C;&#x6240;&#x4EE5;&#x672C;&#x540E;&#x7AEF;&#x5C0F;&#x83DC;&#x9E21;&#x4E0D;&#x8981;&#x8138;&#x5730;&#x5C06;&#x5176;&#x7FFB;&#x8BD1;&#x4E00;&#x904D;&#xFF0C;&#x5E76;&#x4E14;&#x7528;JDK9&#x7684;Jshell&#x505A;&#x6F14;&#x793A;&#xFF0C;&#x65B9;&#x4FBF;&#x5E7F;&#x5927;&#x7684;Javaer&#x5B66;&#x4E60;&#x3002;</p>
<p>&#x672C;&#x6587;&#x6240;&#x6709;&#x7684;&#x4EE3;&#x7801;&#x5DF2;&#x7ECF;&#x63A8;&#x5230;Github&#x4E2D;&#xFF0C;&#x5730;&#x5740;&#x4E3A;&#xFF1A;<a href="/external_links/11e212309cfee5bbd1894670f9bd37fa.html" target="blank" rel="noopener">github.com/Lovelcp/blo&#x2026;</a>&#x3002;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x5927;&#x5BB6;&#x5C06;&#x4EE3;&#x7801;clone&#x4E0B;&#x6765;&#x8DD1;&#x4E00;&#x4E0B;&#x770B;&#x770B;&#x6548;&#x679C;&#xFF0C;&#x52A0;&#x6DF1;&#x81EA;&#x5DF1;&#x7684;&#x5370;&#x8C61;&#x3002;</p>
<h3 id="&#x73AF;&#x5883;"><a href="#&#x73AF;&#x5883;" class="headerlink" title="&#x73AF;&#x5883;"></a>&#x73AF;&#x5883;</h3><ul>
<li>Mac&#x6216;Linux&#x6216;&#x8005;WIn10&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3002;<strong>&#x9664;&#x4E86;Win10&#x4E4B;&#x5916;&#x7684;Windows&#x7CFB;&#x7EDF;&#x6682;&#x65F6;&#x4E0D;&#x652F;&#x6301;Ansi Escape Codes&#x3002;</strong></li>
<li>&#x56E0;&#x4E3A;&#x672C;&#x6587;&#x91C7;&#x7528;Jshell&#x4F5C;&#x4E3A;&#x6F14;&#x793A;&#x5DE5;&#x5177;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x5BB6;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x6700;&#x8FD1;&#x521A;&#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#x7684;JDK9&#x3002;</li>
</ul>
<p>OK&#xFF01;&#x4E00;&#x5207;&#x51C6;&#x5907;&#x5C31;&#x7EEA;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x5427;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/73e6a4fbdaa46175c1595a8fbf07c3a5a40c2647bdfa2c47c6bf3597532fb0bb" alt></p>
<h2 id="&#x5BCC;&#x6587;&#x672C;"><a href="#&#x5BCC;&#x6587;&#x672C;" class="headerlink" title="&#x5BCC;&#x6587;&#x672C;"></a>&#x5BCC;&#x6587;&#x672C;</h2><p>Ansi Escape Codes&#x6700;&#x57FA;&#x7840;&#x7684;&#x7528;&#x9014;&#x5C31;&#x662F;&#x8BA9;&#x63A7;&#x5236;&#x53F0;&#x663E;&#x793A;&#x7684;&#x6587;&#x5B57;&#x4EE5;&#x5BCC;&#x6587;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x8F93;&#x51FA;&#xFF0C;&#x6BD4;&#x5982;&#x8BBE;&#x7F6E;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x3001;&#x80CC;&#x666F;&#x989C;&#x8272;&#x4EE5;&#x53CA;&#x5404;&#x79CD;&#x6837;&#x5F0F;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x5B57;&#x4F53;&#x989C;&#x8272;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x518D;&#x5FCD;&#x53D7;&#x90A3;&#x67AF;&#x71E5;&#x7684;&#x9ED1;&#x767D;&#x4E8C;&#x8272;&#xFF01;</p>
<h3 id="&#x5B57;&#x4F53;&#x989C;&#x8272;"><a href="#&#x5B57;&#x4F53;&#x989C;&#x8272;" class="headerlink" title="&#x5B57;&#x4F53;&#x989C;&#x8272;"></a>&#x5B57;&#x4F53;&#x989C;&#x8272;</h3><p>&#x901A;&#x8FC7;Ansi&#x6307;&#x4EE4;&#xFF08;&#x5373;Ansi Escape Codes&#xFF09;&#x7ED9;&#x63A7;&#x5236;&#x53F0;&#x7684;&#x6587;&#x5B57;&#x4E0A;&#x8272;&#x662F;&#x6700;&#x4E3A;&#x5E38;&#x89C1;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6BD4;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x7EA2;&#x8272;&#xFF1A;<code>\u001b[31m</code></li>
<li>&#x91CD;&#x7F6E;&#xFF1A;<code>\u001b[0m</code></li>
</ul>
<p>&#x7EDD;&#x5927;&#x90E8;&#x5206;Ansi Escape Codes&#x90FD;&#x4EE5;<code>\u001b</code>&#x5F00;&#x5934;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x901A;&#x8FC7;Java&#x4EE3;&#x7801;&#x6765;&#x8F93;&#x51FA;&#x4E00;&#x6BB5;&#x7EA2;&#x8272;&#x7684;<code>Hello World</code>&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[31mHello World&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d720c89e1ee7b959f7d82c16cbaee00a5dbb12b7963fb5e6bb837128a8e737b2" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E0D;&#x4EC5;<code>Hello World</code>&#x662F;&#x53D8;&#x6210;&#x4E86;&#x7EA2;&#x8272;&#xFF0C;&#x800C;&#x4E14;&#x63A5;&#x4E0B;&#x6765;&#x7684;<code>jshell&gt;</code>&#x63D0;&#x793A;&#x7B26;&#x4E5F;&#x53D8;&#x6210;&#x4E86;&#x7EA2;&#x8272;&#x3002;&#x5176;&#x5B9E;&#x4E0D;&#x7BA1;&#x4F60;&#x63A5;&#x4E0B;&#x6765;&#x8F93;&#x5165;&#x4EC0;&#x4E48;&#x5B57;&#x7B26;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x90FD;&#x662F;&#x7EA2;&#x8272;&#x3002;&#x76F4;&#x5230;&#x4F60;&#x8F93;&#x5165;&#x4E86;&#x5176;&#x4ED6;&#x989C;&#x8272;&#x7684;Ansi&#x6307;&#x4EE4;&#xFF0C;&#x6216;&#x8005;&#x8F93;&#x5165;&#x4E86;&#x91CD;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x5B57;&#x4F53;&#x7684;&#x989C;&#x8272;&#x624D;&#x4F1A;&#x4E0D;&#x518D;&#x662F;&#x7EA2;&#x8272;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x8F93;&#x5165;&#x91CD;&#x7F6E;&#x6307;&#x4EE4;&#x6765;&#x6062;&#x590D;&#x5B57;&#x4F53;&#x7684;&#x989C;&#x8272;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a7d77b49c2399b7b2b6354d253e10f6ba56599d0bff0a465363b3ae4261730fd" alt></p>
<p>&#x5F88;&#x597D;&#xFF01;<code>jshell&gt;</code>&#x63D0;&#x793A;&#x7B26;&#x6062;&#x590D;&#x4E3A;&#x4E86;&#x767D;&#x8272;&#x3002;&#x6240;&#x4EE5;&#x4E00;&#x4E2A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x5C31;&#x662F;&#xFF0C;&#x6700;&#x597D;&#x5728;&#x6240;&#x6709;&#x6539;&#x53D8;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x6216;&#x8005;&#x6837;&#x5F0F;&#x7684;Ansi Escape Codes&#x7684;&#x6700;&#x540E;&#x52A0;&#x4E0A;&#x91CD;&#x7F6E;&#x6307;&#x4EE4;&#xFF0C;&#x4EE5;&#x514D;&#x9020;&#x6210;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x540E;&#x679C;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[31mHello World\u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/206a627ec753c881efa54b622ce79b2f78703800347f9b77702b4f3bcf70ffa4" alt></p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x91CD;&#x7F6E;&#x6307;&#x4EE4;&#x53EF;&#x4EE5;&#x88AB;&#x6DFB;&#x52A0;&#x5728;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x63D2;&#x5728;<code>Hello World</code>&#x7684;&#x4E2D;&#x95F4;&#xFF0C;&#x4F7F;&#x5F97;<code>Hello</code>&#x662F;&#x7EA2;&#x8272;&#xFF0C;&#x4F46;&#x662F;<code>World</code>&#x662F;&#x767D;&#x8272;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[31mHello\u001b[0m World&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/fc8847acba0c4abdbe62dfb385b965d9884ddb7eb6f295b2eb588632e66dd17c" alt></p>
<h4 id="8&#x8272;"><a href="#8&#x8272;" class="headerlink" title="8&#x8272;"></a>8&#x8272;</h4><p>&#x521A;&#x624D;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86;<code>&#x7EA2;&#x8272;</code>&#x4EE5;&#x53CA;<code>&#x91CD;&#x7F6E;</code>&#x547D;&#x4EE4;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#x6240;&#x6709;&#x7684;&#x63A7;&#x5236;&#x53F0;&#x90FD;&#x652F;&#x6301;&#x4EE5;&#x4E0B;8&#x79CD;&#x989C;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x9ED1;&#x8272;&#xFF1A;<code>\u001b[30m</code></li>
<li>&#x7EA2;&#x8272;&#xFF1A;<code>\u001b[31m</code></li>
<li>&#x7EFF;&#x8272;&#xFF1A;<code>\u001b[32m</code></li>
<li>&#x9EC4;&#x8272;&#xFF1A;<code>\u001b[33m</code></li>
<li>&#x84DD;&#x8272;&#xFF1A;<code>\u001b[34m</code></li>
<li>&#x6D0B;&#x7EA2;&#x8272;&#xFF1A;<code>\u001b[35m</code></li>
<li>&#x9752;&#x8272;&#xFF1A;<code>\u001b[36m</code></li>
<li>&#x767D;&#x8272;&#xFF1A;<code>\u001b[37m</code></li>
<li>&#x91CD;&#x7F6E;&#xFF1A;<code>\u001b[0m</code></li>
</ul>
<p>&#x4E0D;&#x5982;&#x5C06;&#x5B83;&#x4EEC;&#x90FD;&#x8F93;&#x51FA;&#x770B;&#x4E00;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[30m A \u001b[31m B \u001b[32m C \u001b[33m D \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[34m E \u001b[35m F \u001b[36m G \u001b[37m H \u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/104470c6ed4a5047c44c0c0c7a8bd19404e842812b67447979dbb9734f28e74e" alt></p>
<p>&#x6CE8;&#x610F;&#xFF0C;<code>A</code>&#x56E0;&#x4E3A;&#x662F;&#x9ED1;&#x8272;&#x6240;&#x4EE5;&#x4E0E;&#x63A7;&#x5236;&#x53F0;&#x878D;&#x4E3A;&#x4E00;&#x4F53;&#x4E86;&#x3002;</p>
<h4 id="16&#x8272;"><a href="#16&#x8272;" class="headerlink" title="16&#x8272;"></a>16&#x8272;</h4><p>&#x5927;&#x591A;&#x6570;&#x7684;&#x63A7;&#x5236;&#x53F0;&#xFF0C;&#x9664;&#x4E86;&#x652F;&#x6301;&#x521A;&#x624D;&#x63D0;&#x5230;&#x7684;8&#x8272;&#x5916;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8F93;&#x51FA;&#x5728;&#x6B64;&#x4E4B;&#x4E0A;&#x66F4;&#x52A0;&#x660E;&#x4EAE;&#x7684;8&#x79CD;&#x989C;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x4EAE;&#x9ED1;&#x8272;&#xFF1A;<code>\u001b[30;1m</code></li>
<li>&#x4EAE;&#x7EA2;&#x8272;&#xFF1A;<code>\u001b[31;1m</code></li>
<li>&#x4EAE;&#x7EFF;&#x8272;&#xFF1A;<code>\u001b[32;1m</code></li>
<li>&#x4EAE;&#x9EC4;&#x8272;&#xFF1A;<code>\u001b[33;1m</code></li>
<li>&#x4EAE;&#x84DD;&#x8272;&#xFF1A;<code>\u001b[34;1m</code></li>
<li>&#x4EAE;&#x6D0B;&#x7EA2;&#x8272;&#xFF1A;<code>\u001b[35;1m</code></li>
<li>&#x4EAE;&#x9752;&#x8272;&#xFF1A;<code>\u001b[36;1m</code></li>
<li>&#x4EAE;&#x767D;&#x8272;&#xFF1A;<code>\u001b[37;1m</code></li>
</ul>
<p>&#x4EAE;&#x8272;&#x6307;&#x4EE4;&#x5206;&#x522B;&#x5728;&#x539F;&#x6765;&#x5BF9;&#x5E94;&#x989C;&#x8272;&#x7684;&#x6307;&#x4EE4;&#x4E2D;&#x95F4;&#x52A0;&#x4E0A;<code>;1</code>&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x6240;&#x6709;&#x7684;16&#x8272;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x6253;&#x5370;&#xFF0C;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x8FDB;&#x884C;&#x6BD4;&#x5BF9;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[30m A \u001b[31m B \u001b[32m C \u001b[33m D \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[34m E \u001b[35m F \u001b[36m G \u001b[37m H \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[30;1m A \u001b[31;1m B \u001b[32;1m C \u001b[33;1m D \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[34;1m E \u001b[35;1m F \u001b[36;1m G \u001b[37;1m H \u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0774b41fb0803b57ac3f361611ef954df38147a32378dad5d3cbee18ed8ec826" alt></p>
<p>&#x4ECE;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6E05;&#x6670;&#x5730;&#x770B;&#x5230;&#xFF0C;&#x4E0B;&#x9762;&#x7684;8&#x8272;&#x6BD4;&#x4E0A;&#x9762;&#x7684;8&#x8272;&#x663E;&#x5F97;&#x66F4;&#x52A0;&#x660E;&#x4EAE;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x539F;&#x6765;&#x9ED1;&#x8272;&#x7684;<code>A</code>&#xFF0C;&#x5728;&#x9ED1;&#x8272;&#x7684;&#x63A7;&#x5236;&#x53F0;&#x80CC;&#x666F;&#x4E0B;&#xFF0C;&#x51E0;&#x4E4E;&#x65E0;&#x6CD5;&#x770B;&#x5230;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x901A;&#x8FC7;&#x4EAE;&#x9ED1;&#x8272;&#x8F93;&#x51FA;&#x540E;&#xFF0C;&#x5BF9;&#x6BD4;&#x5EA6;&#x53D8;&#x5F97;&#x66F4;&#x9AD8;&#xFF0C;&#x53D8;&#x5F97;&#x66F4;&#x597D;&#x8FA8;&#x8BC6;&#x4E86;&#x3002;</p>
<h4 id="256&#x8272;"><a href="#256&#x8272;" class="headerlink" title="256&#x8272;"></a>256&#x8272;</h4><p>&#x6700;&#x540E;&#xFF0C;&#x9664;&#x4E86;16&#x8272;&#x5916;&#xFF0C;&#x67D0;&#x4E9B;&#x63A7;&#x5236;&#x53F0;&#x652F;&#x6301;&#x8F93;&#x51FA;256&#x8272;&#x3002;&#x6307;&#x4EE4;&#x7684;&#x5F62;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><code>\u001b[38;5;${ID}m</code></li>
</ul>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x8F93;&#x51FA;256&#x8272;&#x77E9;&#x9635;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;for (int i = 0; i &lt; 16; i++) {</span><br><span class="line">    for (int j = 0; j &lt; 16; j++) {</span><br><span class="line">        int code = i * 16 + j;</span><br><span class="line">        System.out.printf(&quot;\u001b[38;5;%dm%-4d&quot;, code, code);</span><br><span class="line">    }</span><br><span class="line">    System.out.println(&quot;\u001b[0m&quot;);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6d73b5833b29cf4581eb9bb6410eec425e3302f6f6243ff09d3b56d4e69e76d6" alt></p>
<p>&#x5173;&#x4E8E;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x6211;&#x4EEC;&#x5C31;&#x4ECB;&#x7ECD;&#x5230;&#x8FD9;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x6765;&#x4ECB;&#x7ECD;&#x80CC;&#x666F;&#x8272;&#x3002;</p>
<h3 id="&#x80CC;&#x666F;&#x989C;&#x8272;"><a href="#&#x80CC;&#x666F;&#x989C;&#x8272;" class="headerlink" title="&#x80CC;&#x666F;&#x989C;&#x8272;"></a>&#x80CC;&#x666F;&#x989C;&#x8272;</h3><p>&#x521A;&#x624D;&#x6240;&#x8BF4;&#x7684;&#x5B57;&#x4F53;&#x989C;&#x8272;&#x53EF;&#x4EE5;&#x7EDF;&#x79F0;&#x4E3A;&#x524D;&#x666F;&#x8272;&#xFF08;foreground color&#xFF09;&#x3002;&#x90A3;&#x4E48;&#x7406;&#x6240;&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x6587;&#x672C;&#x7684;&#x80CC;&#x666F;&#x989C;&#x8272;&#xFF1A;</p>
<ul>
<li>&#x9ED1;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[40m</code></li>
<li>&#x7EA2;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[41m</code></li>
<li>&#x7EFF;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[42m</code></li>
<li>&#x9EC4;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[43m</code></li>
<li>&#x84DD;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[44m</code></li>
<li>&#x6D0B;&#x7EA2;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[45m</code></li>
<li>&#x9752;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[46m</code></li>
<li>&#x767D;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[47m</code></li>
</ul>
<p>&#x5BF9;&#x5E94;&#x7684;&#x4EAE;&#x8272;&#x7248;&#x672C;&#xFF1A;</p>
<ul>
<li>&#x4EAE;&#x9ED1;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[40;1m</code></li>
<li>&#x4EAE;&#x7EA2;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[41;1m</code></li>
<li>&#x4EAE;&#x7EFF;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[42;1m</code></li>
<li>&#x4EAE;&#x9EC4;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[43;1m</code></li>
<li>&#x4EAE;&#x84DD;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[44;1m</code></li>
<li>&#x4EAE;&#x6D0B;&#x7EA2;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[45;1m</code></li>
<li>&#x4EAE;&#x9752;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[46;1m</code></li>
<li>&#x4EAE;&#x767D;&#x8272;&#x80CC;&#x666F;&#xFF1A;<code>\u001b[47;1m</code></li>
</ul>
<p>&#x9996;&#x5148;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x770B;16&#x8272;&#x80CC;&#x666F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[40m A \u001b[41m B \u001b[42m C \u001b[43m D \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[44m A \u001b[45m B \u001b[46m C \u001b[47m D \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[40;1m A \u001b[41;1m B \u001b[42;1m C \u001b[43;1m D \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[44;1m A \u001b[45;1m B \u001b[46;1m C \u001b[47;1m D \u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/de7b7825e47547ffd2ed4d0f8a4339d0ccd2d1bd90c8274570e3e93ef515beed" alt></p>
<p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x4EAE;&#x8272;&#x80CC;&#x666F;&#x5E76;&#x4E0D;&#x662F;&#x80CC;&#x666F;&#x989C;&#x8272;&#x663E;&#x5F97;&#x66F4;&#x52A0;&#x660E;&#x4EAE;&#xFF0C;&#x800C;&#x662F;&#x8BA9;&#x5BF9;&#x5E94;&#x7684;&#x524D;&#x666F;&#x8272;&#x663E;&#x5F97;&#x66F4;&#x52A0;&#x660E;&#x4EAE;&#x3002;&#x867D;&#x7136;&#x8FD9;&#x70B9;&#x6709;&#x70B9;&#x4E0D;&#x592A;&#x76F4;&#x89C2;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x8868;&#x73B0;&#x5C31;&#x662F;&#x5982;&#x6B64;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x8BD5;&#x8BD5;256&#x80CC;&#x666F;&#x8272;&#xFF0C;&#x9996;&#x5148;&#x6307;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><code>\u001b[48;5;${ID}m</code></li>
</ul>
<p>&#x540C;&#x6837;&#x8F93;&#x51FA;256&#x8272;&#x77E9;&#x9635;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;for (int i = 0; i &lt; 16; i++) {</span><br><span class="line">    for (int j = 0; j &lt; 16; j++) {</span><br><span class="line">        int code = i * 16 + j;</span><br><span class="line">        System.out.printf(&quot;\u001b[48;5;%dm%-4d&quot;, code, code);</span><br><span class="line">    }</span><br><span class="line">    System.out.println(&quot;\u001b[0m&quot;);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/89472c0082946f388d91fb76fd571a7aa10fe78a8f0855d1dbea99a257821558" alt></p>
<p>&#x611F;&#x89C9;&#x8981;&#x88AB;&#x4EAE;&#x778E;&#x773C;&#x4E86;&#x5462;&#xFF01;&#x81F3;&#x6B64;&#xFF0C;&#x989C;&#x8272;&#x8BBE;&#x7F6E;&#x5DF2;&#x7ECF;&#x4ECB;&#x7ECD;&#x5B8C;&#x6BD5;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x5B66;&#x4E60;&#x6837;&#x5F0F;&#x8BBE;&#x7F6E;&#x3002;</p>
<h3 id="&#x6837;&#x5F0F;"><a href="#&#x6837;&#x5F0F;" class="headerlink" title="&#x6837;&#x5F0F;"></a>&#x6837;&#x5F0F;</h3><p>&#x9664;&#x4E86;&#x7ED9;&#x6587;&#x672C;&#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x4E4B;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED9;&#x6587;&#x672C;&#x8BBE;&#x7F6E;&#x6837;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x7C97;&#x4F53;&#xFF1A;<code>\u001b[1m</code></li>
<li>&#x4E0B;&#x5212;&#x7EBF;&#xFF1A;<code>\u001b[4m</code></li>
<li>&#x53CD;&#x8272;&#xFF1A;<code>\u001b[7m</code></li>
</ul>
<p>&#x6837;&#x5F0F;&#x5206;&#x522B;&#x4F7F;&#x7528;&#x7684;&#x6548;&#x679C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[1m BOLD \u001b[0m\u001b[4m Underline \u001b[0m\u001b[7m Reversed \u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/81b38c2d98ff6f18bdfde860af05727d9a58d4637e6ba6b65553a26a1d9a7725" alt></p>
<p>&#x6216;&#x8005;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[1m\u001b[4m\u001b[7m BOLD Underline Reversed \u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/4c3d9206ea0958877be8e440b6ac2586f34ebc11f7f1d267e6513a029d36061c" alt></p>
<p>&#x751A;&#x81F3;&#x8FD8;&#x53EF;&#x4EE5;&#x548C;&#x989C;&#x8272;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;System.out.print(&quot;\u001b[1m\u001b[31m Red Bold \u001b[0m&quot;);</span><br><span class="line">System.out.print(&quot;\u001b[4m\u001b[44m Blue Background Underline \u001b[0m&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/5fd2c099d00a1951885a651536ca28bb8702493861bb744baa75fb958dfab3fe" alt></p>
<p>&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5F88;&#x9177;&#xFF01;&#x5B66;&#x4F1A;&#x4E86;&#x8FD9;&#x4E9B;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x80FD;&#x591F;&#x5199;&#x51FA;&#x5341;&#x5206;&#x9177;&#x70AB;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x811A;&#x672C;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x8981;&#x5B9E;&#x73B0;&#x66F4;&#x590D;&#x6742;&#x7684;&#x529F;&#x80FD;&#xFF08;&#x6BD4;&#x5982;&#x8FDB;&#x5EA6;&#x6761;&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x638C;&#x63E1;&#x66F4;&#x52A0;&#x725B;&#x903C;&#x7684;&#x5149;&#x6807;&#x63A7;&#x5236;&#x6307;&#x4EE4;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/de0a6a004d40d6250f197dc8589285045de11fec31e458a9488904cc7cd90b85" alt></p>
<h2 id="&#x5149;&#x6807;&#x63A7;&#x5236;"><a href="#&#x5149;&#x6807;&#x63A7;&#x5236;" class="headerlink" title="&#x5149;&#x6807;&#x63A7;&#x5236;"></a>&#x5149;&#x6807;&#x63A7;&#x5236;</h2><p>Ansi Escape Code&#x91CC;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x7684;&#x6307;&#x4EE4;&#x5C31;&#x662F;&#x5149;&#x6807;&#x63A7;&#x5236;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x6307;&#x4EE4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x7531;&#x5730;&#x79FB;&#x52A8;&#x6211;&#x4EEC;&#x7684;&#x5149;&#x6807;&#x81F3;&#x5C4F;&#x5E55;&#x7684;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#x3002;&#x6BD4;&#x5982;&#x5728;Vim&#x7684;&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>H/J/K/L</code>&#x8FD9;&#x56DB;&#x4E2A;&#x952E;&#x5B9E;&#x73B0;&#x5149;&#x6807;&#x7684;&#x4E0A;&#x4E0B;&#x5DE6;&#x53F3;&#x79FB;&#x52A8;&#x3002;</p>
<p>&#x6700;&#x57FA;&#x7840;&#x7684;&#x5149;&#x6807;&#x63A7;&#x5236;&#x6307;&#x4EE4;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x4E0A;&#xFF1A;<code>\u001b[{n}A</code></li>
<li>&#x4E0B;&#xFF1A;<code>\u001b[{n}B</code></li>
<li>&#x53F3;&#xFF1A;<code>\u001b[{n}C</code></li>
<li>&#x5DE6;&#xFF1A;<code>\u001b[{n}D</code></li>
</ul>
<p>&#x901A;&#x8FC7;&#x5149;&#x6807;&#x63A7;&#x5236;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x5927;&#x91CF;&#x6709;&#x8DA3;&#x4E14;&#x9177;&#x70AB;&#x7684;&#x529F;&#x80FD;&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x8FDB;&#x5EA6;&#x6761;&#x3002;</p>
<h3 id="&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x663E;&#x793A;"><a href="#&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x663E;&#x793A;" class="headerlink" title="&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x663E;&#x793A;"></a>&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x663E;&#x793A;</h3><p>&#x4F5C;&#x4E3A;&#x8FDB;&#x5EA6;&#x6761;&#xFF0C;&#x600E;&#x4E48;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x663E;&#x793A;&#x5462;&#xFF1F;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B9E;&#x73B0;&#x8FDB;&#x5EA6;&#x6761;&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x7684;&#x5237;&#x65B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;void loading() throws InterruptedException {</span><br><span class="line">    System.out.println(&quot;Loading...&quot;);</span><br><span class="line">    for (int i = 1; i &lt;= 100; i++) {</span><br><span class="line">        Thread.sleep(100);</span><br><span class="line">        System.out.print(&quot;\u001b[1000D&quot; + i + &quot;%&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b438aa970267b5cd8b7cd232b5c6cfaaa4501eb9a099f273cc78a364c41bf21d" alt></p>
<p>&#x4ECE;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FDB;&#x5EA6;&#x5728;&#x540C;&#x4E00;&#x884C;&#x4ECE;1%&#x4E0D;&#x505C;&#x5730;&#x5237;&#x65B0;&#x5230;100%&#x3002;&#x4E3A;&#x4E86;&#x8FDB;&#x5EA6;&#x53EA;&#x5728;&#x540C;&#x4E00;&#x884C;&#x663E;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x4E86;<code>System.out.print</code>&#x800C;&#x4E0D;&#x662F;<code>System.out.println</code>&#x3002;&#x5728;&#x6253;&#x5370;&#x6BCF;&#x4E2A;&#x8FDB;&#x5EA6;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;<code>\u001b[1000D</code>&#x6307;&#x4EE4;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x5F53;&#x524D;&#x884C;&#x7684;&#x6700;&#x5DE6;&#x8FB9;&#x4E5F;&#x5C31;&#x662F;&#x884C;&#x9996;&#x3002;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x6253;&#x5370;&#x65B0;&#x7684;&#x8FDB;&#x5EA6;&#xFF0C;&#x65B0;&#x7684;&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x4F1A;&#x8986;&#x76D6;&#x521A;&#x624D;&#x7684;&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#xFF0C;&#x5FAA;&#x73AF;&#x5F80;&#x590D;&#xFF0C;&#x8FD9;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x4E0A;&#x56FE;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<blockquote>
<p>PS&#xFF1A;<code>\u001b[1000D</code>&#x8868;&#x793A;&#x5C06;&#x5149;&#x6807;&#x5F80;&#x5DE6;&#x79FB;&#x52A8;1000&#x4E2A;&#x5B57;&#x7B26;&#x3002;&#x8FD9;&#x91CC;&#x7684;1000&#x8868;&#x793A;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;&#x53EA;&#x8981;&#x4F60;&#x80FD;&#x591F;&#x786E;&#x4FDD;&#x5149;&#x6807;&#x80FD;&#x591F;&#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x7AEF;&#xFF0C;&#x968F;&#x4FBF;&#x8BBE;&#x7F6E;&#x591A;&#x5C11;&#x6BD4;&#x5982;&#x8BBE;&#x7F6E;2000&#x90FD;&#x53EF;&#x4EE5;&#x3002;</p>
</blockquote>
<p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x5927;&#x5BB6;&#x66F4;&#x52A0;&#x8F7B;&#x677E;&#x5730;&#x7406;&#x89E3;&#x5149;&#x6807;&#x7684;&#x79FB;&#x52A8;&#x8FC7;&#x7A0B;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x653E;&#x6162;&#x8FDB;&#x5EA6;&#x6761;&#x5237;&#x65B0;&#x7684;&#x9891;&#x7387;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;void loading() throws InterruptedException {</span><br><span class="line">    System.out.println(&quot;Loading...&quot;);</span><br><span class="line">    for (int i = 1; i &lt;= 100; i++) {</span><br><span class="line">        System.out.print(&quot;\u001b[1000D&quot;);</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">        System.out.print(i + &quot;%&quot;);</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e02fb47b86980fd152f257250ed865558457b89fc40439714efdd569d6d66902" alt></p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6E05;&#x6670;&#x5730;&#x770B;&#x5230;&#xFF1A;</p>
<ol>
<li>&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x6253;&#x5370;&#x8FDB;&#x5EA6;&#xFF0C;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x5C3E;&#x3002;</li>
<li>&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x9996;&#xFF0C;&#x539F;&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x8FD8;&#x5728;&#x3002;</li>
<li>&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x6253;&#x5370;&#x65B0;&#x8FDB;&#x5EA6;&#xFF0C;&#x65B0;&#x7684;&#x6570;&#x5B57;&#x4F1A;&#x8986;&#x76D6;&#x8001;&#x7684;&#x6570;&#x5B57;&#x3002;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x5C3E;&#x3002;</li>
<li>&#x5FAA;&#x73AF;&#x5F80;&#x590D;&#x3002;</li>
</ol>
<h3 id="Ascii&#x8FDB;&#x5EA6;&#x6761;"><a href="#Ascii&#x8FDB;&#x5EA6;&#x6761;" class="headerlink" title="Ascii&#x8FDB;&#x5EA6;&#x6761;"></a>Ascii&#x8FDB;&#x5EA6;&#x6761;</h3><p>&#x597D;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x901A;&#x8FC7;Ansi Escape Code&#x5B9E;&#x73B0;&#x8FDB;&#x5EA6;&#x6570;&#x5B57;&#x7684;&#x663E;&#x793A;&#x548C;&#x5237;&#x65B0;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x8FDB;&#x5EA6;&#x7684;&#x8BFB;&#x6761;&#x3002;&#x5E9F;&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4E0A;&#x4EE3;&#x7801;&#x548C;&#x6548;&#x679C;&#x56FE;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;void loading() throws InterruptedException {</span><br><span class="line">    System.out.println(&quot;Loading...&quot;);</span><br><span class="line">    for (int i = 1; i &lt;= 100; i++) {</span><br><span class="line">        int width = i / 4;</span><br><span class="line">        String left = &quot;[&quot; + String.join(&quot;&quot;, Collections.nCopies(width, &quot;#&quot;));</span><br><span class="line">        String right = String.join(&quot;&quot;, Collections.nCopies(25 - width, &quot; &quot;)) + &quot;]&quot;;</span><br><span class="line">        System.out.print(&quot;\u001b[1000D&quot; + left + right);</span><br><span class="line">        Thread.sleep(100);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/25e8797a7c21e34bef0e38a5a79ee22f1c55689094daf5c6eb00cb4cb19facf4" alt></p>
<p>&#x7531;&#x4E0A;&#x56FE;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x8FC7;&#x540E;&#xFF0C;&#x8BFB;&#x6761;&#x5C31;&#x4F1A;&#x589E;&#x52A0;&#x3002;&#x539F;&#x7406;&#x548C;&#x6570;&#x5B57;&#x7684;&#x5237;&#x65B0;&#x4E00;&#x6837;&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x9605;&#x8BFB;&#x4EE3;&#x7801;&#x5C31;&#x80FD;&#x7406;&#x89E3;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x70B9;&#x66F4;&#x9177;&#x7684;&#x5427;&#xFF01;&#x5229;&#x7528;Ansi&#x7684;&#x5149;&#x6807;<strong>&#x5411;&#x4E0A;</strong>&#x4EE5;&#x53CA;<strong>&#x5411;&#x4E0B;</strong>&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6253;&#x5370;&#x51FA;&#x591A;&#x6761;&#x8FDB;&#x5EA6;&#x6761;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;void loading(int count) throws InterruptedException {</span><br><span class="line">    System.out.print(String.join(&quot;&quot;, Collections.nCopies(count, &quot;\n&quot;))); // &#x521D;&#x59CB;&#x5316;&#x8FDB;&#x5EA6;&#x6761;&#x6240;&#x5360;&#x7684;&#x7A7A;&#x95F4;</span><br><span class="line">    List&lt;Integer&gt; allProgress = new ArrayList&lt;&gt;(Collections.nCopies(count, 0));</span><br><span class="line">    while (true) {</span><br><span class="line">        Thread.sleep(10);</span><br><span class="line"></span><br><span class="line">        // &#x968F;&#x673A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x8FDB;&#x5EA6;&#x6761;&#xFF0C;&#x589E;&#x52A0;&#x8FDB;&#x5EA6;</span><br><span class="line">        List&lt;Integer&gt; unfinished = new LinkedList&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; allProgress.size(); i++) {</span><br><span class="line">            if (allProgress.get(i) &lt; 100) {</span><br><span class="line">                unfinished.add(i);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        if (unfinished.isEmpty()) {</span><br><span class="line">            break;</span><br><span class="line">        }</span><br><span class="line">        int index = unfinished.get(new Random().nextInt(unfinished.size()));</span><br><span class="line">        allProgress.set(index, allProgress.get(index) + 1); // &#x8FDB;&#x5EA6;+1</span><br><span class="line"></span><br><span class="line">        // &#x7ED8;&#x5236;&#x8FDB;&#x5EA6;&#x6761;</span><br><span class="line">        System.out.print(&quot;\u001b[1000D&quot;); // &#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x8FB9;</span><br><span class="line">        System.out.print(&quot;\u001b[&quot; + count + &quot;A&quot;); // &#x5F80;&#x4E0A;&#x79FB;&#x52A8;</span><br><span class="line">        for (Integer progress : allProgress) {</span><br><span class="line">            int width = progress / 4;</span><br><span class="line">            String left = &quot;[&quot; + String.join(&quot;&quot;, Collections.nCopies(width, &quot;#&quot;));</span><br><span class="line">            String right = String.join(&quot;&quot;, Collections.nCopies(25 - width, &quot; &quot;)) + &quot;]&quot;;</span><br><span class="line">            System.out.println(left + right);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x4E2D;&#xFF1A;</p>
<ul>
<li>&#x6211;&#x4EEC;&#x9996;&#x5148;&#x6267;&#x884C;<code>System.out.print(String.join(&quot;&quot;, Collections.nCopies(count, &quot;\n&quot;)));</code>&#x6253;&#x5370;&#x51FA;&#x591A;&#x4E2A;&#x7A7A;&#x884C;&#xFF0C;&#x8FD9;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x6211;&#x4EEC;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x7A7A;&#x95F4;&#x6765;&#x6253;&#x5370;&#x8FDB;&#x5EA6;&#x6761;&#x3002;</li>
<li>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x968F;&#x673A;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x8FDB;&#x5EA6;&#x6761;&#x7684;&#x8FDB;&#x5EA6;&#xFF0C;&#x5E76;&#x4E14;&#x6253;&#x5370;&#x51FA;&#x6240;&#x6709;&#x8FDB;&#x5EA6;&#x6761;&#x3002;</li>
<li>&#x6700;&#x540E;&#x6211;&#x4EEC;&#x8C03;&#x7528;<strong>&#x5411;&#x4E0A;</strong>&#x6307;&#x4EE4;&#xFF0C;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x56DE;&#x5230;&#x6700;&#x4E0A;&#x65B9;&#xFF0C;&#x7EE7;&#x7EED;&#x4E0B;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x8FDB;&#x5EA6;&#x6761;&#x90FD;&#x5230;&#x8FBE;100%&#x3002;</li>
</ul>
<p>&#x5B9E;&#x9645;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3f8396214a306ccd2c3039b3063ba45ce58d3199e04636ea21acbe8115777505" alt></p>
<p>&#x6548;&#x679C;&#x771F;&#x662F;&#x592A;&#x68D2;&#x5566;&#xFF01;&#x5269;&#x4E0B;&#x5C06;&#x8BFB;&#x6761;&#x548C;&#x6570;&#x5B57;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x5DE5;&#x4F5C;&#x5C31;&#x4EA4;&#x7ED9;&#x8BFB;&#x8005;&#x5566;&#x3002;&#x5B66;&#x4F1A;&#x4E86;&#x8FD9;&#x62DB;&#xFF0C;&#x5F53;&#x4F60;&#x4E0B;&#x6B21;&#x5982;&#x679C;&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x7684;&#x5C0F;&#x5DE5;&#x5177;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x8FD9;&#x4E9B;&#x77E5;&#x8BC6;&#x5C31;&#x6D3E;&#x4E0A;&#x7528;&#x573A;&#x5566;&#xFF01;</p>
<h2 id="&#x5236;&#x4F5C;&#x547D;&#x4EE4;&#x884C;"><a href="#&#x5236;&#x4F5C;&#x547D;&#x4EE4;&#x884C;" class="headerlink" title="&#x5236;&#x4F5C;&#x547D;&#x4EE4;&#x884C;"></a>&#x5236;&#x4F5C;&#x547D;&#x4EE4;&#x884C;</h2><p>&#x6700;&#x540E;&#xFF0C;&#x6700;&#x4E3A;&#x9177;&#x70AB;&#x7684;&#x4E8B;&#x60C5;&#x83AB;&#x8FC7;&#x4E8E;&#x5229;&#x7528;Ansi Escape Codes&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x547D;&#x4EE4;&#x884C;&#xFF08;Command-Line&#xFF09;&#x3002;&#x6211;&#x4EEC;&#x5E73;&#x5E38;&#x4F7F;&#x7528;&#x7684;Bash&#x4EE5;&#x53CA;&#x4E00;&#x4E9B;&#x89E3;&#x91CA;&#x578B;&#x8BED;&#x8A00;&#x6BD4;&#x5982;Python&#x3001;Ruby&#x7B49;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;REPL&#x547D;&#x4EE4;&#x884C;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x63ED;&#x5F00;&#x4ED6;&#x4EEC;&#x795E;&#x79D8;&#x7684;&#x9762;&#x7EB1;&#xFF0C;&#x4E86;&#x89E3;&#x4ED6;&#x4EEC;&#x80CC;&#x540E;&#x5B9E;&#x73B0;&#x7684;&#x539F;&#x7406;&#x3002;</p>
<blockquote>
<p>PS&#xFF1A;&#x7531;&#x4E8E;&#x5728;Jshell&#x4E2D;&#xFF0C;&#x65B9;&#x5411;&#x952E;&#x3001;&#x540E;&#x9000;&#x952E;&#x7B49;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x952E;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x63A5;&#x4E0B;&#x6765;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;Jshell&#x6F14;&#x793A;&#x3002;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x624B;&#x52A8;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x8FD0;&#x884C;&#x4EE3;&#x7801;&#x624D;&#x80FD;&#x770B;&#x5230;&#x5B9E;&#x9645;&#x6548;&#x679C;&#x3002;</p>
</blockquote>
<h3 id="&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;"><a href="#&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;" class="headerlink" title="&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;"></a>&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;&#xFF0C;&#x7B80;&#x5355;&#x5230;&#x53EA;&#x5B9E;&#x73B0;&#x4E0B;&#x9762;&#x4E24;&#x79CD;&#x529F;&#x80FD;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x7528;&#x6237;&#x8F93;&#x5165;&#x4E00;&#x4E2A;&#x53EF;&#x6253;&#x5370;&#x7684;&#x5B57;&#x7B26;&#x65F6;&#xFF0C;&#x6BD4;&#x5982;abcd&#x7B49;&#xFF0C;&#x5219;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x663E;&#x793A;&#x3002;</li>
<li>&#x5F53;&#x7528;&#x6237;&#x8F93;&#x5165;&#x56DE;&#x8F66;&#x65F6;&#xFF0C;&#x53E6;&#x8D77;&#x4E00;&#x884C;&#xFF0C;&#x8F93;&#x51FA;&#x521A;&#x624D;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x6240;&#x6709;&#x5B57;&#x7B26;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53E6;&#x8D77;&#x4E00;&#x884C;&#xFF0C;&#x7EE7;&#x7EED;&#x63A5;&#x53D7;&#x7528;&#x6237;&#x7684;&#x8F93;&#x5165;&#x3002;</li>
</ul>
<p>&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x4F1A;&#x957F;&#x8FD9;&#x6837;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class CommandLine {</span><br><span class="line">    public static void main(String[] args) throws IOException, InterruptedException {</span><br><span class="line">        // &#x8BBE;&#x7F6E;&#x547D;&#x4EE4;&#x884C;&#x4E3A;raw&#x6A21;&#x5F0F;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x81EA;&#x52A8;&#x89E3;&#x6790;&#x65B9;&#x5411;&#x952E;&#x4EE5;&#x53CA;&#x540E;&#x9000;&#x952E;&#xFF0C;&#x5E76;&#x4E14;&#x76F4;&#x5230;&#x6309;&#x4E0B;&#x56DE;&#x8F66;read&#x65B9;&#x6CD5;&#x624D;&#x4F1A;&#x8FD4;&#x56DE;</span><br><span class="line">        String[] cmd = { &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;stty raw &lt;/dev/tty&quot; };</span><br><span class="line">        Runtime.getRuntime()</span><br><span class="line">               .exec(cmd)</span><br><span class="line">               .waitFor();</span><br><span class="line">        while (true) {</span><br><span class="line">            String input = &quot;&quot;;</span><br><span class="line">            while (true) {</span><br><span class="line">                char ch = (char) System.in.read();</span><br><span class="line">                if (ch == 3) {</span><br><span class="line">                    // CTRL-C</span><br><span class="line">                    return;</span><br><span class="line">                }</span><br><span class="line">                else if (ch &gt;= 32 &amp;&amp; ch &lt;= 126) {</span><br><span class="line">                    // &#x666E;&#x901A;&#x5B57;&#x7B26;</span><br><span class="line">                    input += ch;</span><br><span class="line">                }</span><br><span class="line">                else if (ch == 10 || ch == 13) {</span><br><span class="line">                    // &#x56DE;&#x8F66;</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    System.out.print(&quot;\u001b[1000D&quot;);</span><br><span class="line">                    System.out.println(&quot;echo: &quot; + input);</span><br><span class="line">                    input = &quot;&quot;;</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                System.out.print(&quot;\u001b[1000D&quot;); // &#x9996;&#x5148;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x4FA7;</span><br><span class="line">                System.out.print(input); // &#x91CD;&#x65B0;&#x8F93;&#x51FA;input</span><br><span class="line">                System.out.flush();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x597D;&#x7684;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x660E;&#x4E00;&#x4E0B;&#x4EE3;&#x7801;&#x4E2D;&#x7684;&#x5173;&#x952E;&#x70B9;&#xFF1A;</p>
<ol>
<li>&#x9996;&#x5148;&#x6700;&#x5173;&#x952E;&#x7684;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x6211;&#x4EEC;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x8BBE;&#x7F6E;&#x4E3A;raw&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x53EF;&#x4EE5;&#x907F;&#x514D;JVM&#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x6790;&#x65B9;&#x5411;&#x952E;&#xFF0C;&#x56DE;&#x9000;&#x952E;&#x4EE5;&#x53CA;&#x5BF9;&#x7528;&#x6237;&#x8F93;&#x5165;&#x8FDB;&#x884C;&#x7F13;&#x51B2;&#x3002;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x8BD5;&#x4E00;&#x4E0B;&#x4E0D;&#x8BBE;&#x7F6E;raw&#x6A21;&#x5F0F;&#x7136;&#x540E;&#x770B;&#x4E00;&#x4E0B;&#x6548;&#x679C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6211;&#x8BF4;&#x7684;&#x8BDD;&#x4E86;&#x3002;</li>
<li>&#x901A;&#x8FC7;<code>System.in.read()</code>&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x7528;&#x6237;&#x8F93;&#x5165;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x5176;ascii&#x503C;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x3002;</li>
<li>&#x5982;&#x679C;&#x53D1;&#x73B0;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x662F;&#x56DE;&#x8F66;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x65F6;&#x9700;&#x8981;&#x6253;&#x5370;&#x521A;&#x624D;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x3002;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x7531;&#x4E8E;&#x8BBE;&#x7F6E;&#x4E86;raw&#x6A21;&#x5F0F;&#xFF0C;&#x4E0D;&#x79FB;&#x52A8;&#x5149;&#x6807;&#x76F4;&#x63A5;&#x6253;&#x5370;&#x7684;&#x8BDD;&#xFF0C;&#x5149;&#x6807;&#x7684;&#x4F4D;&#x7F6E;&#x4E0D;&#x4F1A;&#x79FB;&#x5230;&#x884C;&#x9996;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</li>
</ol>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/58b62ad633edd4f8863d2239bf436621fdd3df0323d9c27622ae2075c27f5be5" alt></p>
<p>&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x518D;&#x6B21;&#x8C03;&#x7528;<code>System.out.print(&quot;\u001b[1000D&quot;);</code>&#x5C06;&#x5149;&#x6807;&#x79FB;&#x5230;&#x884C;&#x9996;&#x3002;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x6548;&#x679C;&#x5427;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7879aa9a2ff76720ed8439a43b5ff5b8a58abe7f8cfafff8edf99490b2f17416" alt></p>
<p>&#x6210;&#x529F;&#x4E86;&#xFF01;&#x4F46;&#x662F;&#x6709;&#x4E2A;&#x7F3A;&#x70B9;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x547D;&#x4EE4;&#x884C;&#x5E76;&#x6CA1;&#x6709;&#x89E3;&#x6790;&#x65B9;&#x5411;&#x952E;&#xFF0C;&#x53CD;&#x800C;&#x4EE5;<code>[D[A[C[B</code>&#x8F93;&#x51FA;&#xFF08;&#x89C1;&#x52A8;&#x56FE;&#xFF09;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x4E00;&#x76F4;&#x5F80;&#x540E;&#x9762;&#x5199;&#x800C;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x524D;&#x9762;&#x5B9E;&#x73B0;&#x63D2;&#x5165;&#x7684;&#x6548;&#x679C;&#x3002;&#x6240;&#x4EE5;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x8BA9;&#x6211;&#x4EEC;&#x7ED9;&#x547D;&#x4EE4;&#x884C;&#x52A0;&#x4E0A;&#x89E3;&#x6790;&#x65B9;&#x5411;&#x952E;&#x7684;&#x529F;&#x80FD;&#x5427;&#xFF01;</p>
<h3 id="&#x5149;&#x6807;&#x79FB;&#x52A8;"><a href="#&#x5149;&#x6807;&#x79FB;&#x52A8;" class="headerlink" title="&#x5149;&#x6807;&#x79FB;&#x52A8;"></a>&#x5149;&#x6807;&#x79FB;&#x52A8;</h3><p>&#x7B80;&#x5355;&#x8D77;&#x89C1;&#xFF0C;&#x6211;&#x4EEC;&#x4EC5;&#x9700;&#x5B9E;&#x73B0;&#x6309;&#x4E0B;&#x65B9;&#x5411;&#x952E;&#x7684;&#x5DE6;&#x53F3;&#x4E24;&#x952E;&#x65F6;&#x80FD;&#x63A7;&#x5236;&#x5149;&#x6807;&#x5DE6;&#x53F3;&#x79FB;&#x52A8;&#x3002;&#x5DE6;&#x53F3;&#x4E24;&#x952E;&#x5BF9;&#x5E94;&#x7684;ascii&#x7801;&#x5206;&#x522B;&#x4E3A;<code>27 91 68</code>&#x548C;<code>27 91 67</code>&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x52A0;&#x4E0A;&#x5BF9;&#x8FD9;&#x4E24;&#x4E32;ascii&#x7801;&#x7684;&#x89E3;&#x6790;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class CommandLine {</span><br><span class="line">    public static void main(String[] args) throws IOException, InterruptedException {</span><br><span class="line">        // &#x8BBE;&#x7F6E;&#x547D;&#x4EE4;&#x884C;&#x4E3A;raw&#x6A21;&#x5F0F;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x81EA;&#x52A8;&#x89E3;&#x6790;&#x65B9;&#x5411;&#x952E;&#x4EE5;&#x53CA;&#x540E;&#x9000;&#x952E;&#xFF0C;&#x5E76;&#x4E14;&#x76F4;&#x5230;&#x6309;&#x4E0B;&#x56DE;&#x8F66;read&#x65B9;&#x6CD5;&#x624D;&#x4F1A;&#x8FD4;&#x56DE;</span><br><span class="line">        String[] cmd = { &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;stty raw &lt;/dev/tty&quot; };</span><br><span class="line">        Runtime.getRuntime()</span><br><span class="line">               .exec(cmd)</span><br><span class="line">               .waitFor();</span><br><span class="line">        while (true) {</span><br><span class="line">            String input = &quot;&quot;;</span><br><span class="line">            int index = 0;</span><br><span class="line">            while (true) {</span><br><span class="line">                char ch = (char) System.in.read();</span><br><span class="line">                if (ch == 3) {</span><br><span class="line">                    // CTRL-C</span><br><span class="line">                    return;</span><br><span class="line">                }</span><br><span class="line">                else if (ch &gt;= 32 &amp;&amp; ch &lt;= 126) {</span><br><span class="line">                    // &#x666E;&#x901A;&#x5B57;&#x7B26;</span><br><span class="line">                    input = input.substring(0, index) + ch + input.substring(index, input.length());</span><br><span class="line">                    index++;</span><br><span class="line">                }</span><br><span class="line">                else if (ch == 10 || ch == 13) {</span><br><span class="line">                    // &#x56DE;&#x8F66;</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    System.out.print(&quot;\u001b[1000D&quot;);</span><br><span class="line">                    System.out.println(&quot;echo: &quot; + input);</span><br><span class="line">                    input = &quot;&quot;;</span><br><span class="line">                    index = 0;</span><br><span class="line">                }</span><br><span class="line">                else if (ch == 27) {</span><br><span class="line">                    // &#x5DE6;&#x53F3;&#x65B9;&#x5411;&#x952E;</span><br><span class="line">                    char next1 = (char) System.in.read();</span><br><span class="line">                    char next2 = (char) System.in.read();</span><br><span class="line">                    if (next1 == 91) {</span><br><span class="line">                        if (next2 == 68) {</span><br><span class="line">                            // &#x5DE6;&#x65B9;&#x5411;&#x952E;</span><br><span class="line">                            index = Math.max(0, index - 1);</span><br><span class="line">                        }</span><br><span class="line">                        else if (next2 == 67) {</span><br><span class="line">                            // &#x53F3;&#x65B9;&#x5411;&#x952E;</span><br><span class="line">                            index = Math.min(input.length(), index + 1);</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                System.out.print(&quot;\u001b[1000D&quot;); // &#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x4FA7;</span><br><span class="line">                System.out.print(input);</span><br><span class="line">                System.out.print(&quot;\u001b[1000D&quot;); // &#x518D;&#x6B21;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x4FA7;</span><br><span class="line">                if (index &gt; 0) {</span><br><span class="line">                    System.out.print(&quot;\u001b[&quot; + index + &quot;C&quot;); // &#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;index&#x5904;</span><br><span class="line">                }</span><br><span class="line">                System.out.flush();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/bc15bf6d16585dd4e7e96776674701e7f63c36966b50a21a1b7973eec6c8f6f5" alt></p>
<p>It works&#xFF01;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x8FD8;&#x4E0D;&#x652F;&#x6301;&#x5220;&#x9664;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x901A;&#x8FC7;<code>Backspace</code>&#x952E;&#x5220;&#x53BB;&#x6572;&#x9519;&#x7684;&#x5B57;&#x7B26;&#x3002;&#x6709;&#x4E86;&#x521A;&#x624D;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x5B9E;&#x73B0;&#x5220;&#x9664;&#x529F;&#x80FD;&#x4E5F;&#x5341;&#x5206;&#x7B80;&#x5355;&#xFF01;</p>
<h3 id="&#x5220;&#x9664;"><a href="#&#x5220;&#x9664;" class="headerlink" title="&#x5220;&#x9664;"></a>&#x5220;&#x9664;</h3><p>&#x7167;&#x7740;&#x521A;&#x624D;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x5904;&#x7406;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x52A0;&#x4E0A;&#x5982;&#x4E0B;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;else if (ch == 127) {</span><br><span class="line">    // &#x5220;&#x9664;</span><br><span class="line">    if (index &gt; 0) {</span><br><span class="line">        input = input.substring(0, index - 1) + input.substring(index, input.length());</span><br><span class="line">        index -= 1;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5B58;&#x5728;&#x70B9;&#x95EE;&#x9898;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x6548;&#x679C;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/cc0b5dc6bc65ba02e707b0e1c23dd433ae4ef3482e7ef93eb37cb5f03438867b" alt></p>
<p>&#x4ECE;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x6B21;&#xFF0C;&#x5F53;&#x6211;&#x8F93;&#x5165;&#x4E86;<code>11234566</code>&#xFF0C;&#x7136;&#x540E;&#x4E0D;&#x505C;&#x5730;&#x6309;&#x4E0B;&#x5220;&#x9664;&#x952E;&#xFF0C;&#x60F3;&#x8981;&#x5220;&#x6389;<code>34566</code>&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x6709;&#x5149;&#x6807;&#x5728;&#x540E;&#x9000;&#xFF0C;&#x5B57;&#x7B26;&#x5E76;&#x6CA1;&#x6709;&#x88AB;&#x5220;&#x6389;&#x3002;&#x7136;&#x540E;&#x6211;&#x518D;&#x6309;&#x4E0B;&#x56DE;&#x8F66;&#x952E;&#xFF0C;&#x901A;&#x8FC7;echo&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5220;&#x9664;&#x5B9E;&#x9645;&#x4E0A;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#xFF0C;&#x53EA;&#x662F;&#x63A7;&#x5236;&#x53F0;&#x5728;&#x663E;&#x793A;&#x7684;&#x65F6;&#x5019;&#x51FA;&#x4E86;&#x70B9;&#x95EE;&#x9898;&#x3002;</li>
<li>&#x7B2C;&#x4E8C;&#x6B21;&#xFF0C;&#x6211;&#x5148;&#x8F93;&#x5165;<code>123456</code>&#xFF0C;&#x7136;&#x540E;&#x6309;&#x4E0B;&#x5220;&#x9664;&#x952E;&#xFF0C;&#x5220;&#x6389;<code>456</code>&#xFF0C;&#x5149;&#x6807;&#x9000;&#x5230;<code>3</code>&#x3002;&#x7136;&#x540E;&#x6211;&#x518D;&#x7EE7;&#x7EED;&#x4E0D;&#x65AD;&#x5730;&#x8F93;&#x5165;<code>0</code>&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x968F;&#x7740;<code>0</code>&#x8986;&#x76D6;&#x4E86;&#x539F;&#x6765;&#x7684;<code>456</code>&#x663E;&#x793A;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</li>
</ul>
<p>&#x6240;&#x4EE5;&#x5220;&#x9664;&#x7684;&#x786E;&#x4EA7;&#x751F;&#x4E86;&#x6548;&#x679C;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8981;&#x89E3;&#x51B3;&#x88AB;&#x5220;&#x9664;&#x7684;&#x5B57;&#x7B26;&#x8FD8;&#x5728;&#x663E;&#x793A;&#x7684;&#x8FD9;&#x4E2A;bug&#x3002;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x5220;&#x9664;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;Ansi&#x91CC;&#x7684;&#x5220;&#x9664;&#x6307;&#x4EE4;&#xFF1A;</p>
<ul>
<li>&#x6E05;&#x9664;&#x5C4F;&#x5E55;&#xFF1A;<code>\u001b[{n}J</code>&#x4E3A;&#x6307;&#x4EE4;&#x3002;<ul>
<li><code>n=0</code>&#xFF1A;&#x6E05;&#x9664;&#x5149;&#x6807;&#x5230;&#x5C4F;&#x5E55;&#x672B;&#x5C3E;&#x7684;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x3002;</li>
<li><code>n=1</code>&#xFF1A;&#x6E05;&#x9664;&#x5C4F;&#x5E55;&#x5F00;&#x5934;&#x5230;&#x5149;&#x6807;&#x7684;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x3002;</li>
<li><code>n=2</code>&#xFF1A;&#x6E05;&#x9664;&#x6574;&#x4E2A;&#x5C4F;&#x5E55;&#x7684;&#x5B57;&#x7B26;&#x3002;</li>
</ul>
</li>
<li>&#x6E05;&#x9664;&#x884C;&#xFF1A;<code>\u001b[{n}K</code>&#x4E3A;&#x6307;&#x4EE4;&#x3002;<ul>
<li><code>n=0</code>&#xFF1A;&#x6E05;&#x9664;&#x5149;&#x6807;&#x5230;&#x5F53;&#x524D;&#x884C;&#x672B;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x3002;</li>
<li><code>n=1</code>&#xFF1A;&#x6E05;&#x9664;&#x5F53;&#x524D;&#x884C;&#x5230;&#x5149;&#x6807;&#x7684;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x3002;</li>
<li><code>n=2</code>&#xFF1A;&#x6E05;&#x9664;&#x5F53;&#x524D;&#x884C;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x7684;&#x601D;&#x8DEF;&#x5C31;&#x662F;&#x4E0D;&#x7BA1;&#x7528;&#x6237;&#x8F93;&#x5165;&#x4E86;&#x4EC0;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x5229;&#x7528;<code>System.out.print(&quot;\u001b[0K&quot;);</code>&#x6E05;&#x9664;&#x5F53;&#x524D;&#x884C;&#xFF0C;&#x6B64;&#x65F6;&#x5149;&#x6807;&#x56DE;&#x5230;&#x4E86;&#x884C;&#x9996;&#xFF0C;&#x8FD9;&#x65F6;&#x518D;&#x8F93;&#x51FA;&#x6B63;&#x786E;&#x7684;&#x5B57;&#x7B26;&#x3002;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import java.io.IOException;</span><br><span class="line"></span><br><span class="line">public class CommandLine {</span><br><span class="line">    public static void main(String[] args) throws IOException, InterruptedException {</span><br><span class="line">        // &#x8BBE;&#x7F6E;&#x547D;&#x4EE4;&#x884C;&#x4E3A;raw&#x6A21;&#x5F0F;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x81EA;&#x52A8;&#x89E3;&#x6790;&#x65B9;&#x5411;&#x952E;&#x4EE5;&#x53CA;&#x540E;&#x9000;&#x952E;&#xFF0C;&#x5E76;&#x4E14;&#x76F4;&#x5230;&#x6309;&#x4E0B;&#x56DE;&#x8F66;read&#x65B9;&#x6CD5;&#x624D;&#x4F1A;&#x8FD4;&#x56DE;</span><br><span class="line">        String[] cmd = { &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;stty raw &lt;/dev/tty&quot; };</span><br><span class="line">        Runtime.getRuntime()</span><br><span class="line">               .exec(cmd)</span><br><span class="line">               .waitFor();</span><br><span class="line">        while (true) {</span><br><span class="line">            String input = &quot;&quot;;</span><br><span class="line">            int index = 0;</span><br><span class="line">            while (true) {</span><br><span class="line">                char ch = (char) System.in.read();</span><br><span class="line">                if (ch == 3) {</span><br><span class="line">                    // CTRL-C</span><br><span class="line">                    return;</span><br><span class="line">                }</span><br><span class="line">                else if (ch &gt;= 32 &amp;&amp; ch &lt;= 126) {</span><br><span class="line">                    // &#x666E;&#x901A;&#x5B57;&#x7B26;</span><br><span class="line">                    input = input.substring(0, index) + ch + input.substring(index, input.length());</span><br><span class="line">                    index++;</span><br><span class="line">                }</span><br><span class="line">                else if (ch == 10 || ch == 13) {</span><br><span class="line">                    // &#x56DE;&#x8F66;</span><br><span class="line">                    System.out.println();</span><br><span class="line">                    System.out.print(&quot;\u001b[1000D&quot;);</span><br><span class="line">                    System.out.println(&quot;echo: &quot; + input);</span><br><span class="line">                    input = &quot;&quot;;</span><br><span class="line">                    index = 0;</span><br><span class="line">                }</span><br><span class="line">                else if (ch == 27) {</span><br><span class="line">                    // &#x5DE6;&#x53F3;&#x65B9;&#x5411;&#x952E;</span><br><span class="line">                    char next1 = (char) System.in.read();</span><br><span class="line">                    char next2 = (char) System.in.read();</span><br><span class="line">                    if (next1 == 91) {</span><br><span class="line">                        if (next2 == 68) {</span><br><span class="line">                            // &#x5DE6;&#x65B9;&#x5411;&#x952E;</span><br><span class="line">                            index = Math.max(0, index - 1);</span><br><span class="line">                        }</span><br><span class="line">                        else if (next2 == 67) {</span><br><span class="line">                            // &#x53F3;&#x65B9;&#x5411;&#x952E;</span><br><span class="line">                            index = Math.min(input.length(), index + 1);</span><br><span class="line">                        }</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                else if (ch == 127) {</span><br><span class="line">                    // &#x5220;&#x9664;</span><br><span class="line">                    if (index &gt; 0) {</span><br><span class="line">                        input = input.substring(0, index - 1) + input.substring(index, input.length());</span><br><span class="line">                        index -= 1;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                System.out.print(&quot;\u001b[1000D&quot;); // &#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x4FA7;</span><br><span class="line">                System.out.print(&quot;\u001b[0K&quot;); // &#x6E05;&#x9664;&#x5149;&#x6807;&#x6240;&#x5728;&#x884C;&#x7684;&#x5168;&#x90E8;&#x5185;&#x5BB9;</span><br><span class="line">                System.out.print(input);</span><br><span class="line">                System.out.print(&quot;\u001b[1000D&quot;); // &#x518D;&#x6B21;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;&#x6700;&#x5DE6;&#x4FA7;</span><br><span class="line">                if (index &gt; 0) {</span><br><span class="line">                    System.out.print(&quot;\u001b[&quot; + index + &quot;C&quot;); // &#x5C06;&#x5149;&#x6807;&#x79FB;&#x52A8;&#x5230;index&#x5904;</span><br><span class="line">                }</span><br><span class="line">                System.out.flush();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x6548;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6e235e239c04bc5e28e09e616604b28d23fb9bc47346c9e4df6f5f516f674acf" alt></p>
<p>OK&#xFF0C;&#x6210;&#x529F;&#x4E86;&#xFF01;&#x90A3;&#x4E48;&#x81F3;&#x6B64;&#x4E3A;&#x6B62;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x5316;&#x7684;&#x547D;&#x4EE4;&#x884C;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x652F;&#x6301;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x8F93;&#x5165;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x5DE6;&#x53F3;&#x79FB;&#x52A8;&#x5149;&#x6807;&#x4EE5;&#x53CA;&#x5220;&#x9664;&#x4ED6;&#x4E0D;&#x60F3;&#x8981;&#x7684;&#x5B57;&#x7B26;&#x3002;&#x4F46;&#x662F;&#x5B83;&#x8FD8;&#x7F3A;&#x5931;&#x4E86;&#x5F88;&#x591A;&#x547D;&#x4EE4;&#x884C;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6BD4;&#x5982;&#x4E0D;&#x652F;&#x6301;&#x89E3;&#x6790;&#x50CF;<code>Alt-f</code>&#x3001;<code>Ctrl-r</code>&#x7B49;&#x5E38;&#x89C1;&#x7684;<a href="/external_links/00f6b17ce3ee815a589b8c7c877f7840.html" target="blank" rel="noopener">&#x5FEB;&#x6377;&#x952E;</a>&#xFF0C;&#x4E5F;&#x4E0D;&#x652F;&#x6301;&#x8F93;&#x5165;Unicode&#x5B57;&#x7B26;&#x7B49;&#x7B49;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x53EA;&#x8981;&#x6211;&#x4EEC;&#x638C;&#x63E1;&#x4E86;&#x521A;&#x624D;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x90FD;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED9;&#x521A;&#x624D;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x52A0;&#x4E0A;&#x7B80;&#x5355;&#x7684;&#x8BED;&#x6CD5;&#x9AD8;&#x4EAE;&#x2014;&#x2014;&#x672B;&#x5C3E;&#x5982;&#x679C;&#x6709;&#x591A;&#x4F59;&#x7684;&#x7A7A;&#x683C;&#x5219;&#x5C06;&#x8FD9;&#x4E9B;&#x7A7A;&#x683C;&#x6807;&#x7EA2;&#xFF0C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/1564f19f66d84ece55caa53e6850724537175e0830932e85f58d5e85a091f8d7" alt></p>
<p>&#x5B9E;&#x73B0;&#x7684;&#x4EE3;&#x7801;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;Github&#x9879;&#x76EE;&#x91CC;&#x7684;CustomisedCommandLine&#x7C7B;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x518D;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x5176;&#x4ED6;&#x4E00;&#x4E9B;&#x6709;&#x7528;&#x7684;Ansi Escape Codes&#xFF1A;</p>
<ul>
<li>&#x5149;&#x6807;&#x5411;&#x4E0A;&#x79FB;&#x52A8;&#xFF1A;<code>\u001b[{n}A</code>&#x5C06;&#x5149;&#x6807;&#x5411;&#x4E0A;&#x79FB;&#x52A8;<code>n</code>&#x683C;&#x3002;</li>
<li>&#x5149;&#x6807;&#x5411;&#x4E0B;&#x79FB;&#x52A8;&#xFF1A;<code>\u001b[{n}B</code>&#x5C06;&#x5149;&#x6807;&#x5411;&#x4E0B;&#x79FB;&#x52A8;<code>n</code>&#x683C;&#x3002;</li>
<li>&#x5149;&#x6807;&#x5411;&#x53F3;&#x79FB;&#x52A8;&#xFF1A;<code>\u001b[{n}C</code>&#x5C06;&#x5149;&#x6807;&#x5411;&#x53F3;&#x79FB;&#x52A8;<code>n</code>&#x683C;&#x3002;</li>
<li>&#x5149;&#x6807;&#x5411;&#x5DE6;&#x79FB;&#x52A8;&#xFF1A;<code>\u001b[{n}D</code>&#x5C06;&#x5149;&#x6807;&#x5411;&#x5DE6;&#x79FB;&#x52A8;<code>n</code>&#x683C;&#x3002;</li>
<li>&#x5149;&#x6807;&#x6309;&#x884C;&#x5411;&#x4E0B;&#x79FB;&#x52A8;&#xFF1A;<code>\u001b[{n}E</code>&#x5C06;&#x5149;&#x6807;&#x5411;&#x4E0B;&#x79FB;&#x52A8;<code>n</code>&#x884C;&#x5E76;&#x4E14;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x9996;&#x3002;</li>
<li>&#x5149;&#x6807;&#x6309;&#x884C;&#x5411;&#x4E0A;&#x79FB;&#x52A8;&#xFF1A;<code>\u001b[{n}F</code>&#x5C06;&#x5149;&#x6807;&#x5411;&#x4E0A;&#x79FB;&#x52A8;<code>n</code>&#x884C;&#x5E76;&#x4E14;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x884C;&#x9996;&#x3002;</li>
<li>&#x8BBE;&#x7F6E;&#x5149;&#x6807;&#x6240;&#x5728;&#x5217;&#xFF1A;<code>\u001b[{n}G</code>&#x5C06;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x7B2C;<code>n</code>&#x5217;&#xFF08;&#x884C;&#x6570;&#x4E0E;&#x5F53;&#x524D;&#x6240;&#x5728;&#x884C;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF09;&#x3002;</li>
<li>&#x8BBE;&#x7F6E;&#x5149;&#x6807;&#x6240;&#x5728;&#x4F4D;&#x7F6E;&#xFF1A;<code>\u001b[{n};{m}H</code>&#x5C06;&#x5149;&#x6807;&#x79FB;&#x81F3;&#x7B2C;<code>n</code>&#x884C;<code>m</code>&#x5217;&#xFF0C;&#x5750;&#x6807;&#x539F;&#x70B9;&#x4ECE;&#x5C4F;&#x5E55;&#x5DE6;&#x4E0A;&#x89D2;&#x5F00;&#x59CB;&#x3002;</li>
<li>&#x4FDD;&#x5B58;&#x5149;&#x6807;&#x5F53;&#x524D;&#x6240;&#x5728;&#x4F4D;&#x7F6E;&#xFF1A;<code>\u001b[{s}</code>&#x3002;</li>
<li>&#x8BFB;&#x53D6;&#x5149;&#x6807;&#x4E0A;&#x4E00;&#x6B21;&#x4FDD;&#x5B58;&#x7684;&#x4F4D;&#x7F6E;&#xFF1A;<code>\u001b[{u}</code>&#x3002;</li>
</ul>
<p>&#x5149;&#x6807;&#x6309;&#x884C;&#x79FB;&#x52A8;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x53C2;&#x8003;Github&#x9879;&#x76EE;&#x91CC;&#x7684;LineMovementTest&#x7C7B;&#xFF0C;&#x8BBE;&#x7F6E;&#x5149;&#x6807;&#x4F4D;&#x7F6E;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x53C2;&#x8003;Github&#x9879;&#x76EE;&#x91CC;&#x7684;PositionTest&#x7C7B;&#x3002;&#x5982;&#x679C;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x7684;Ansi Escape Codes&#x8BF7;&#x53C2;&#x8003;<a href="/external_links/02751495327298d1eb3a29054c0c23da.html" target="blank" rel="noopener">&#x7EF4;&#x57FA;&#x767E;&#x79D1;</a>&#x3002;</p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x901A;&#x8FC7;&#x672C;&#x6587;&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x6211;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5DF2;&#x7ECF;&#x638C;&#x63E1;&#x4E86;&#x5982;&#x4F55;&#x901A;&#x8FC7;Ansi Escape Codes&#x5B9E;&#x73B0;&#x63A7;&#x5236;&#x53F0;&#x7684;&#x5BCC;&#x6587;&#x672C;&#x8F93;&#x51FA;&#x4EE5;&#x53CA;&#x63A7;&#x5236;&#x53F0;&#x5149;&#x6807;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x79FB;&#x52A8;&#x3002;&#x90A3;&#x4E48;&#x6587;&#x7AE0;&#x4E00;&#x5F00;&#x59CB;&#x7684;&#x90A3;4&#x4E2A;&#x597D;&#x5947;&#xFF0C;&#x5927;&#x5BB6;&#x5FC3;&#x4E2D;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x7B54;&#x6848;&#x4E86;&#x5462;&#xFF1F;&#x6700;&#x540E;&#xFF0C;&#x8FD8;&#x662F;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x82F1;&#x6587;&#x597D;&#x7684;&#x540C;&#x5B66;&#x53BB;&#x9605;&#x8BFB;&#x4E00;&#x4E0B;&#x539F;&#x6587;&#xFF1A;<a href="/external_links/0c461be58e0247c7dff5271d863a7cad.html" target="blank" rel="noopener">www.lihaoyi.com/post/Buildy&#x2026;</a>&#x3002;&#x795D;&#x5927;&#x5BB6;&#x5468;&#x672B;&#x6109;&#x5FEB;&#xFF01;</p>
<blockquote>
<p>&#x672C;&#x6587;&#x9996;&#x53D1;&#x4E8E;<a href="/external_links/1c513c69b78f243b888a57caefc24fc5.html" target="blank" rel="noopener">kissyu.org/2017/11/25/&#x2026;</a><br>&#x6B22;&#x8FCE;&#x8BC4;&#x8BBA;&#x548C;&#x8F6C;&#x8F7D;&#xFF01;<br>&#x8BA2;&#x9605;&#x4E0B;&#x65B9;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x83B7;&#x53D6;&#x7B2C;&#x4E00;&#x624B;&#x8D44;&#x8BAF;&#xFF01;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/033ff21e31b59b5304bebc08139972685c1bf8d9b4fae7c0376208578160f662" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ca03f565ce928bcf22eda4419cfc46f0.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513760202765.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513760202765.html" itemprop="url">Python 中的作用域准则</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T17:30:00+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0x00-&#x524D;&#x8A00;"><a href="#0x00-&#x524D;&#x8A00;" class="headerlink" title="0x00 &#x524D;&#x8A00;"></a>0x00 &#x524D;&#x8A00;</h2><p>&#x56E0;&#x4E3A;&#x6700;&#x65E9;&#x7528;&#x7684;&#x662F; Java &#x548C; C#&#xFF0C;&#x5199; Python &#x7684;&#x65F6;&#x5019;&#x81EA;&#x7136;&#x4E5F;&#x628A; Python &#x4F5C;&#x7528;&#x57DF;&#x7684;&#x60F3;&#x7684;&#x548C;&#x539F;&#x6709;&#x7684;&#x4E00;&#x81F4;&#x3002;</p>
<p>Python &#x7684;&#x4F5C;&#x7528;&#x57DF;&#x53D8;&#x91CF;&#x9075;&#x5FAA;&#x5728;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x4E00;&#x81F4;&#x7684;&#xFF0C;&#x4F46;&#x4E5F;&#x6709;&#x4F8B;&#x5916;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x672C;&#x6587;&#x7740;&#x901A;&#x8FC7;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E2A;&#x4F5C;&#x7528;&#x57DF;&#x7684;&#x5C0F;&#x95EE;&#x9898;&#x6765;&#x8BF4;&#x8BF4; Python &#x7684;&#x4F5C;&#x7528;&#x57DF;</p>
<h2 id="0x01-&#x4F5C;&#x7528;&#x57DF;&#x7684;&#x51E0;&#x4E2A;&#x5B9E;&#x4F8B;"><a href="#0x01-&#x4F5C;&#x7528;&#x57DF;&#x7684;&#x51E0;&#x4E2A;&#x5B9E;&#x4F8B;" class="headerlink" title="0x01 &#x4F5C;&#x7528;&#x57DF;&#x7684;&#x51E0;&#x4E2A;&#x5B9E;&#x4F8B;"></a>0x01 &#x4F5C;&#x7528;&#x57DF;&#x7684;&#x51E0;&#x4E2A;&#x5B9E;&#x4F8B;</h2><p>&#x4F46;&#x4E5F;&#x6709;&#x90E8;&#x5206;&#x4F8B;&#x5916;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<h3 id="1-1-&#x7B2C;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#1-1-&#x7B2C;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="1.1 &#x7B2C;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;"></a>1.1 &#x7B2C;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;</h3><p>&#x4F5C;&#x7528;&#x57DF;&#x7B2C;&#x4E00;&#x7248;&#x4EE3;&#x7801;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;a = 1</span><br><span class="line">print(a, id(a)) # &#x6253;&#x5370; 1 4465620064</span><br><span class="line">def func1():</span><br><span class="line">    print(a, id(a))</span><br><span class="line">func1()  # &#x6253;&#x5370; 1 4465620064</span><br></pre></td></tr></table></figure>

<p>&#x4F5C;&#x7528;&#x57DF;&#x7B2C;&#x4E00;&#x7248;&#x5BF9;&#x5E94;&#x5B57;&#x8282;&#x7801;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;  4           0 LOAD_GLOBAL              0 (print)</span><br><span class="line">              3 LOAD_GLOBAL              1 (a)</span><br><span class="line">              6 LOAD_GLOBAL              2 (id)</span><br><span class="line">              9 LOAD_GLOBAL              1 (a)</span><br><span class="line">             12 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">             15 CALL_FUNCTION            2 (2 positional, 0 keyword pair)</span><br><span class="line">             18 POP_TOP</span><br><span class="line">             19 LOAD_CONST               0 (None)</span><br><span class="line">             22 RETURN_VALUE</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PS: &#x884C; 4 &#x8868;&#x793A; &#x4EE3;&#x7801;&#x884C;&#x6570; 0 / 3 / 9 &#x2026; &#x4E0D;&#x77E5;&#x9053;&#x662F;&#x5565;&#xFF0C;&#x6211;&#x5C31;&#x5148;&#x7BA1;&#x4ED6;&#x53EB;&#x505A;<strong>&#x6761;</strong>&#x5427; &#x662F; load global<br> PPS: &#x6CE8;&#x610F;&#x6761; 3/6 LOAD_GLOBAL &#x4E3A;&#x4ECE;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4E2D;&#x52A0;&#x8F7D;</p>
</blockquote>
<p>&#x987A;&#x624B;&#x9644;&#x4E0A;&#x672C;&#x6587;&#x9700;&#x8981;&#x7740;&#x91CD;&#x7406;&#x89E3;&#x7684;&#x51E0;&#x4E2A;&#x6307;&#x4EE4;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;LOAD_GLOBA          : Loads the global named co_names[namei] onto the stack.</span><br><span class="line">LOAD_FAST(var_num)  : Pushes a reference to the local co_varnames[var_num] onto the stack.</span><br><span class="line">STORE_FAST(var_num) : Stores TOS into the local co_varnames[var_num].</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x70B9;&#x4F3C;&#x4E4E;&#x633A;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x8BA4;&#x77E5;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x518D;&#x6DF1;&#x4E00;&#x70B9;&#x5462;&#xFF1F;&#x65E2;&#x7136;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x53EF;&#x4EE5; Load &#x8FDB;&#x6765;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x54AF;&#xFF1F;</p>
<h3 id="1-2-&#x7B2C;&#x4E8C;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#1-2-&#x7B2C;&#x4E8C;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="1.2 &#x7B2C;&#x4E8C;&#x4E2A;&#x4F8B;&#x5B50;"></a>1.2 &#x7B2C;&#x4E8C;&#x4E2A;&#x4F8B;&#x5B50;</h3><p>&#x7136;&#x800C;&#x5E76;&#x4E0D;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4F5C;&#x7528;&#x57DF;&#x7B2C;&#x4E8C;&#x7248;&#x5BF9;&#x5E94;&#x4EE3;&#x7801;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;a = 1</span><br><span class="line">print(a, id(a)) # &#x6253;&#x5370; 1 4465620064</span><br><span class="line">def func2():</span><br><span class="line">    a = 2</span><br><span class="line">    print(a, id(a))</span><br><span class="line">func2() # &#x6253;&#x5370; 2 4465620096</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x770B;&#xFF0C;WTF, &#x4E24;&#x4E2A; a &#x5185;&#x5B58;&#x503C;&#x4E0D;&#x4E00;&#x6837;&#x3002;&#x8BC1;&#x660E;&#x8FD9;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x5B8C;&#x5168;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x4F5C;&#x7528;&#x57DF;&#x7B2C;&#x4E8C;&#x7248;&#x5BF9;&#x5E94;&#x5B57;&#x8282;&#x7801;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;  4           0 LOAD_CONST               1 (2)</span><br><span class="line">              3 STORE_FAST               0 (a)</span><br><span class="line"></span><br><span class="line">  5           6 LOAD_GLOBAL              0 (print)</span><br><span class="line">              9 LOAD_FAST                0 (a)</span><br><span class="line">             12 LOAD_GLOBAL              1 (id)</span><br><span class="line">             15 LOAD_FAST                0 (a)</span><br><span class="line">             18 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">             21 CALL_FUNCTION            2 (2 positional, 0 keyword pair)</span><br><span class="line">             24 POP_TOP</span><br><span class="line">             25 LOAD_CONST               0 (None)</span><br><span class="line">             28 RETURN_VALUE</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#x884C; 4 &#x6761; 3 (STORE_FAST) &#x4EE5;&#x53CA;&#x884C; 5 &#x6761; 9/15 (LOAD_FAST)</p>
</blockquote>
<p>&#x8FD9;&#x8BF4;&#x660E;&#x4E86;&#x8FD9;&#x91CC;&#x7684; a &#x5E76;&#x4E0D;&#x662F; LOAD_GLOBAL &#x800C;&#x6765;&#xFF0C;&#x800C;&#x662F;&#x4ECE;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x57DF; LOAD_FAST &#x800C;&#x6765;&#x3002;</p>
<h3 id="1-3-&#x7B2C;&#x4E09;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#1-3-&#x7B2C;&#x4E09;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="1.3 &#x7B2C;&#x4E09;&#x4E2A;&#x4F8B;&#x5B50;"></a>1.3 &#x7B2C;&#x4E09;&#x4E2A;&#x4F8B;&#x5B50;</h3><p>&#x90A3;&#x6211;&#x4EEC;&#x5728;&#x51FD;&#x6570;&#x4F53;&#x91CD;&#x4FEE;&#x6539;&#x4E00;&#x4E0B; a &#x503C;&#x770B;&#x770B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;a = 1</span><br><span class="line">def func3():</span><br><span class="line">    print(a, id(a)) # &#x6CE8;&#x91CA;&#x6389;&#x6B64;&#x884C;&#x4E0D;&#x5F71;&#x54CD;&#x7ED3;&#x8BBA;</span><br><span class="line">    a += 1</span><br><span class="line">    print(a, id(a))</span><br><span class="line">func3() # &#x5F53;&#x8C03;&#x7528;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019; local variable &apos;a&apos; referenced before assignment</span><br><span class="line"># &#x5373; a += 1 =&gt; a = a + 1 &#x8FD9;&#x91CC;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A; a &#x62A5;&#x9519;&#x9E1F;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;  3           0 LOAD_GLOBAL              0 (print)</span><br><span class="line">              3 LOAD_FAST                0 (a)</span><br><span class="line">              6 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">              9 POP_TOP</span><br><span class="line"></span><br><span class="line">  4          10 LOAD_FAST                0 (a)</span><br><span class="line">             13 LOAD_CONST               1 (1)</span><br><span class="line">             16 BINARY_ADD</span><br><span class="line">             17 STORE_FAST               0 (a)</span><br><span class="line"></span><br><span class="line">  5          20 LOAD_GLOBAL              0 (print)</span><br><span class="line">             23 LOAD_FAST                0 (a)</span><br><span class="line">             26 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">             29 POP_TOP</span><br><span class="line">             30 LOAD_CONST               0 (None)</span><br><span class="line">             33 RETURN_VALUE</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;&#xFF0C;func3 &#x4E5F;&#x5C31;&#x81EA;&#x7136;&#x800C;&#x8A00;&#x7531;&#x4E8E;&#x6CA1;&#x6709;&#x65E0;&#x6CD5; LOAD_FAST &#x5BF9;&#x5E94;&#x7684; a &#x53D8;&#x91CF;&#xFF0C;&#x5219;&#x62A5;&#x4E86;&#x5F15;&#x7528;&#x9519;&#x8BEF;&#x3002;</p>
<p>&#x7136;&#x540E;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF0C;a &#x4E3A;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x7684;&#x65F6;&#x5019;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x3002;&#x5982;&#x679C;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4EFF;&#x7167; func3 &#x7684;&#x5B9E;&#x4F8B;&#x628A; a &#x6539;&#x6210; list &#x7C7B;&#x578B;&#x3002;&#x5982;&#x4E0B;</p>
<h3 id="1-4-&#x7B2C;&#x56DB;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#1-4-&#x7B2C;&#x56DB;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="1.4 &#x7B2C;&#x56DB;&#x4E2A;&#x4F8B;&#x5B50;"></a>1.4 &#x7B2C;&#x56DB;&#x4E2A;&#x4F8B;&#x5B50;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;a = [1]</span><br><span class="line">def func4():</span><br><span class="line">    print(a, id(a)) # &#x8FD9;&#x6761;&#x6CE8;&#x4E0D;&#x6CE8;&#x91CA;&#x6389;&#x90FD;&#x4E00;&#x6837;</span><br><span class="line">    a += 1 # &#x8FD9;&#x91CC;&#x6211;&#x6545;&#x610F;&#x5199;&#x9519; &#x6309;&#x7406;&#x6765;&#x8BF4;&#x5E94;&#x8BE5;&#x662F; a.append(1)</span><br><span class="line">    print(a, id(a))</span><br><span class="line">func4()</span><br><span class="line"></span><br><span class="line"># &#x5F53;&#x8C03;&#x7528;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019; local variable &apos;a&apos; referenced before assignment</span><br></pre></td></tr></table></figure>

<p>&#x256E;(&#x256F;&#x25BD;&#x2570;)&#x256D; &#x770B;&#x6765;&#x4E8B;&#x60C5;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x7ED3;&#x679C;&#x53D8;&#x91CF; a &#x4F9D;&#x65E7;&#x662F;&#x65E0;&#x6CD5;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x53EF;&#x6309;&#x7406;&#x6765;&#x8BF4;&#x8DDF;&#x5E94;&#x8BE5;&#x62A5;&#x4E0B;&#x9762;&#x7684;&#x9519;&#x8BEF;&#x5440;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&apos;int&apos; object is not iterable</span><br></pre></td></tr></table></figure>

<h3 id="1-5-&#x7B2C;&#x4E94;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#1-5-&#x7B2C;&#x4E94;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="1.5 &#x7B2C;&#x4E94;&#x4E2A;&#x4F8B;&#x5B50;"></a>1.5 &#x7B2C;&#x4E94;&#x4E2A;&#x4F8B;&#x5B50;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;a = [1]</span><br><span class="line">def func5():</span><br><span class="line">    print(a, id(a))</span><br><span class="line">    a.append(1)</span><br><span class="line">    print(a, id(a))</span><br><span class="line">func5()</span><br><span class="line"># [1] 4500243208</span><br><span class="line"># [1, 1] 4500243208</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E0B;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4E86;&#x3002;&#x770B;&#x4E00;&#x4E0B;&#x5B57;&#x8282;&#x7801;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;  3           0 LOAD_GLOBAL              0 (print)</span><br><span class="line">              3 LOAD_GLOBAL              1 (a)</span><br><span class="line">              6 LOAD_GLOBAL              2 (id)</span><br><span class="line">              9 LOAD_GLOBAL              1 (a)</span><br><span class="line">             12 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">             15 CALL_FUNCTION            2 (2 positional, 0 keyword pair)</span><br><span class="line">             18 POP_TOP</span><br><span class="line"></span><br><span class="line">  4          19 LOAD_GLOBAL              1 (a)</span><br><span class="line">             22 LOAD_ATTR                3 (append)</span><br><span class="line">             25 LOAD_CONST               1 (1)</span><br><span class="line">             28 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">             31 POP_TOP</span><br><span class="line"></span><br><span class="line">  5          32 LOAD_GLOBAL              0 (print)</span><br><span class="line">             35 LOAD_GLOBAL              1 (a)</span><br><span class="line">             38 LOAD_GLOBAL              2 (id)</span><br><span class="line">             41 LOAD_GLOBAL              1 (a)</span><br><span class="line">             44 CALL_FUNCTION            1 (1 positional, 0 keyword pair)</span><br><span class="line">             47 CALL_FUNCTION            2 (2 positional, 0 keyword pair)</span><br><span class="line">             50 POP_TOP</span><br><span class="line">             51 LOAD_CONST               0 (None)</span><br><span class="line">             54 RETURN_VALUE</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x5168;&#x5C40;&#x62FF;&#x6765; a &#x53D8;&#x91CF;&#xFF0C;&#x6267;&#x884C; append &#x65B9;&#x6CD5;&#x3002;</p>
<h2 id="0x02-&#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;&#x4EE5;&#x53CA;&#x672C;&#x5730;&#x8D4B;&#x503C;&#x51C6;&#x5219;"><a href="#0x02-&#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;&#x4EE5;&#x53CA;&#x672C;&#x5730;&#x8D4B;&#x503C;&#x51C6;&#x5219;" class="headerlink" title="0x02 &#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;&#x4EE5;&#x53CA;&#x672C;&#x5730;&#x8D4B;&#x503C;&#x51C6;&#x5219;"></a>0x02 &#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;&#x4EE5;&#x53CA;&#x672C;&#x5730;&#x8D4B;&#x503C;&#x51C6;&#x5219;</h2><h3 id="2-1-&#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;"><a href="#2-1-&#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;" class="headerlink" title="2.1 &#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;"></a>2.1 &#x4F5C;&#x7528;&#x57DF;&#x51C6;&#x5219;</h3><p>&#x770B;&#x6765;&#x8FD9;&#x662F;&#x89E3;&#x91CA;&#x5668;&#x9075;&#x5FAA;&#x4E86;&#x67D0;&#x79CD;&#x53D8;&#x91CF;&#x67E5;&#x627E;&#x7684;&#x6CD5;&#x5219;&#xFF0C;&#x4F3C;&#x4E4E;&#x5C31;&#x53EA;&#x80FD;&#x4ECE;&#x539F;&#x7406;&#x4E0A;&#x800C;&#x4E0D;&#x662F;&#x5728; CPython &#x7684;&#x5B9E;&#x73B0;&#x4E0A;&#x89E3;&#x91CA;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p>&#x67E5;&#x627E;&#x4E86;&#x4E00;&#x4E9B;&#x8D44;&#x6599;&#xFF0C;&#x53D1;&#x73B0; Python &#x89E3;&#x91CA;&#x5668;&#x5728;&#x4F9D;&#x636E; &#x57FA;&#x4E8E; LEGB &#x51C6;&#x5219; &#xFF08;&#x987A;&#x624B;&#x5410;&#x69FD;&#x4E00;&#x4E0B;&#x4E0D;&#x662F; LGBT&#xFF09;</p>
<p>LEGB &#x6307;&#x7684;&#x53D8;&#x91CF;&#x67E5;&#x627E;&#x9075;&#x5FAA;</p>
<ul>
<li>Local</li>
<li>Enclosing-function locals</li>
<li>Global</li>
<li>Built-In</li>
</ul>
<p>StackOverFlow &#x4E0A; martineau &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x4F8B;&#x5B50;&#x7528;&#x6765;&#x8BF4;&#x660E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;x = 100</span><br><span class="line">print(&quot;1. Global x:&quot;, x)</span><br><span class="line">class Test(object):</span><br><span class="line">    y = x</span><br><span class="line">    print(&quot;2. Enclosed y:&quot;, y)</span><br><span class="line">    x = x + 1</span><br><span class="line">    print(&quot;3. Enclosed x:&quot;, x)</span><br><span class="line"></span><br><span class="line">    def method(self):</span><br><span class="line">        print(&quot;4. Enclosed self.x&quot;, self.x)</span><br><span class="line">        print(&quot;5. Global x&quot;, x)</span><br><span class="line">        try:</span><br><span class="line">            print(y)</span><br><span class="line">        except NameError as e:</span><br><span class="line">            print(&quot;6.&quot;, e)</span><br><span class="line"></span><br><span class="line">    def method_local_ref(self):</span><br><span class="line">        try:</span><br><span class="line">            print(x)</span><br><span class="line">        except UnboundLocalError as e:</span><br><span class="line">            print(&quot;7.&quot;, e)</span><br><span class="line">        x = 200 # causing 7 because has same name</span><br><span class="line">        print(&quot;8. Local x&quot;, x)</span><br><span class="line"></span><br><span class="line">inst = Test()</span><br><span class="line">inst.method()</span><br><span class="line">inst.method_local_ref()</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x8BD5;&#x7740;&#x7528;&#x53D8;&#x91CF;&#x67E5;&#x627E;&#x51C6;&#x5219;&#x53BB;&#x89E3;&#x91CA; <strong>&#x7B2C;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;</strong> &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x89E3;&#x91CA;&#x7684;&#x901A;&#x7684;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x53D1;&#x73B0;&#x51FD;&#x6570;&#x4F53;&#x5185;&#x7684; a &#x53D8;&#x91CF;&#x5DF2;&#x7ECF;&#x4E0D;&#x662F;&#x90A3;&#x4E2A; a &#x53D8;&#x91CF;&#x4E86;&#x3002;&#x8981;&#x662F;&#x6309;&#x7167;&#x8FD9;&#x4E2A;&#x67E5;&#x627E;&#x539F;&#x5219;&#x7684;&#x8BDD;&#xFF0C;&#x4F3C;&#x4E4E;&#x6709;&#x70B9;&#x8BF4;&#x4E0D;&#x901A;&#x4E86;&#x3002;</p>
<p>&#x4F46;&#x5F53;&#x89E3;&#x91CA;&#x7B2C;&#x4E09;&#x4E2A;&#x4F8B;&#x5B50;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x5B8C;&#x5168;&#x8BF4;&#x4E0D;&#x901A;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;a = 1</span><br><span class="line">def func3():</span><br><span class="line">    print(a, id(a)) # &#x6CE8;&#x91CA;&#x6389;&#x6B64;&#x884C;&#x4E0D;&#x5F71;&#x54CD;&#x7ED3;&#x8BBA;</span><br><span class="line">    a += 1</span><br><span class="line">    print(a, id(a))</span><br><span class="line">func3() # &#x5F53;&#x8C03;&#x7528;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019; local variable &apos;a&apos; referenced before assignment</span><br><span class="line"># &#x5373; a += 1 =&gt; a = a + 1 &#x8FD9;&#x91CC;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A; a &#x62A5;&#x9519;&#x9E1F;</span><br></pre></td></tr></table></figure>

<p>&#x6309;&#x7167;&#x6211;&#x7684;&#x731C;&#x60F3;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x53EF;&#x80FD;&#x6709;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5230;&#x7B2C;&#x4E09;&#x884C;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x662F;&#x5411;&#x4ECE; local &#x627E; a, &#x53D1;&#x73B0;&#x6CA1;&#x6709;&#xFF0C;&#x518D;&#x627E; Enclosing-function &#x53D1;&#x73B0;&#x6CA1;&#x6709;&#xFF0C;&#x6700;&#x540E;&#x5E94;&#x8BE5;&#x5728; Global &#x91CC;&#x9762;&#x627E;&#x5230;&#x624D;&#x662F;&#x3002;&#x6CE8;&#x91CA;&#x6389;&#x7B2C;&#x4E09;&#x884C;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x662F;&#x540C;&#x7406;&#x3002;</li>
<li>&#x5F53;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5230;&#x7B2C;&#x4E09;&#x884C;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x662F;&#x5411;&#x4E0B;&#x4ECE; local &#x627E; a, &#x53D1;&#x73B0;&#x6709;&#xFF0C;&#x7136;&#x540E;&#x4EE3;&#x7801;&#x6267;&#x884C;&#xFF0C;&#x7ED3;&#x675F;&#x3002;</li>
</ul>
<p>&#x4F46;&#x5982;&#x679C;&#x771F;&#x7684;&#x548C;&#x6211;&#x7684;&#x60F3;&#x6CD5;&#x63A5;&#x8FD1;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x90FD;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#xFF0C;&#x9664;&#x4E86;&#x53D8;&#x91CF;&#x4F5C;&#x7528;&#x57DF;&#x4E4B;&#x5916;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x8003;&#x91CF;&#x3002;&#x6211;&#x628A;&#x8FD9;&#x4E2A;&#x53EB;&#x505A;<strong>&#x672C;&#x5730;&#x8D4B;&#x503C;&#x51C6;&#x5219;</strong> &#xFF08;&#x62CD;&#x8111;&#x888B;&#x8D77;&#x7684;&#x540D;&#x79F0;&#xFF09;</p>
<p>&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x7BA1;&#x8FD9;&#x79CD;&#x8003;&#x91CF;&#x53EB;&#x505A; <del>Python &#x4F5C;&#x8005;&#x5C31;&#x662F;&#x89C9;&#x5F97;&#x8FD9;&#x79CD;&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#x597D;&#x4F60;&#x7231;&#x5199;&#x4E0D;&#x5199;</del> Python &#x4F5C;&#x8005;&#x5BF9;&#x4E8E;&#x53D8;&#x91CF;&#x4F5C;&#x7528;&#x57DF;&#x7684;&#x6743;&#x8861;&#x3002;</p>
<p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x5F53;&#x89E3;&#x91CA;&#x5668;&#x7F16;&#x8BD1;&#x51FD;&#x6570;&#x4F53;&#x4E3A;&#x5B57;&#x8282;&#x7801;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x8D4B;&#x503C;&#x64CD;&#x4F5C; (list.append &#x4E4B;&#x6D41;&#x4E0D;&#x662F;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#xFF09;&#xFF0C;&#x5219;&#x4F1A;&#x88AB;&#x9650;&#x5B9A;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x8BA4;&#x4E3A;&#x662F;&#x4E00;&#x4E2A; local &#x53D8;&#x91CF;&#x3002;&#x5982;&#x679C;&#x5728; local &#x4E2D;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x5E76;&#x4E0D;&#x5411;&#x4E0A;&#x67E5;&#x627E;&#xFF0C;&#x5C31;&#x62A5;&#x5F15;&#x7528;&#x9519;&#x8BEF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&#x8FD9;&#x4E0D;&#x662F; BUG</span><br><span class="line">&#x8FD9;&#x4E0D;&#x662F; BUG</span><br><span class="line">&#x8FD9;&#x4E0D;&#x662F; BUG</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x8BBE;&#x8BA1;&#x6743;&#x8861; Python &#x8BA4;&#x4E3A; &#x867D;&#x7136;&#x4E0D;&#x5F3A;&#x6C42;&#x5F3A;&#x5236;&#x58F0;&#x660E;&#x7C7B;&#x578B;&#xFF0C;&#x4F46;&#x5047;&#x5B9A;&#x88AB;&#x8D4B;&#x503C;&#x7684;&#x53D8;&#x91CF;&#x662F;&#x4E00;&#x4E2A; Local &#x53D8;&#x91CF;&#x3002;&#x8FD9;&#x6837;&#x51CF;&#x5C11;&#x907F;&#x514D;&#x52A8;&#x6001;&#x8BED;&#x8A00;&#x6BD4;&#x5982; JavaScript &#x52A8;&#x4E0D;&#x52A8;&#x5C31;&#x4FEE;&#x6539;&#x6389;&#x4E86;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x7684;&#x5751;&#x3002;</p>
<p>&#x8FD9;&#x4E5F;&#x5C31;&#x89E3;&#x91CA;&#x4E86;&#x7B2C;&#x56DB;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x62A5;&#x9519;&#xFF0C;&#x4EE5;&#x53CA;&#x7B2C;&#x4E94;&#x4E2A;&#x4F8B;&#x5B50; append &#x4E3A;&#x4EC0;&#x4E48;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x6267;&#x884C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6211;&#x504F;&#x8981;&#x52C9;&#x5F3A;&#x5462;&#xFF1F; &#x53EF;&#x4EE5;&#x901A;&#x8FC7; global &#x548C; nonlocal &#x6765; &#x5F15;&#x5165;&#x6A21;&#x5757;&#x7EA7;&#x53D8;&#x91CF; or &#x4E0A;&#x4E00;&#x7EA7;&#x53D8;&#x91CF;&#x3002;</p>
<blockquote>
<p>PS: JS &#x4E5F;&#x5F00;&#x59CB;&#x4F7F;&#x7528; let &#x8FDB;&#x884C;&#x58F0;&#x660E;&#xFF0C;&#x5C0F;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x8D4B;&#x503C;&#x67E5;&#x627E;&#x53D8;&#x91CF;&#x4E5F;&#x662F;&#x5411;&#x4E0A;&#x67E5;&#x627E;&#x3002;</p>
</blockquote>
<h2 id="0xEE-&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#0xEE-&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="0xEE &#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>0xEE &#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ul>
<li><a href="/external_links/23a664ce05731a4db8ab0b00c7fcc341.html" target="blank" rel="noopener">Martineau &#x7684;&#x4F8B;&#x5B50;</a></li>
</ul>
<hr>
<p>ChangeLog:</p>
<ul>
<li><strong>2017-11-20</strong> &#x4ECE;&#x539F;&#x6709;&#x7B14;&#x8BB0;&#x4E2D;&#x62BD;&#x53D6;&#x672C;&#x6587;&#x6574;&#x7406;&#x800C;&#x6210;</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/3ed6dad8f9175b3eec05d3c1382b4fb4.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513563234312.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513563234312.html" itemprop="url">使用dropwizard(6)-国际化-easy-i18n</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T15:34:03+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4F5C;&#x8005;&#xFF1A;<a href="/external_links/130e1094be034c71dc8e3acb642fac39.html" target="blank" rel="noopener">@Ryan-Miao</a><br>&#x672C;&#x6587;&#x4E3A;&#x4F5C;&#x8005;&#x539F;&#x521B;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF1A;<a href="/external_links/4354b0406442f77de6d95a2324c8aa5a.html" target="blank" rel="noopener">www.cnblogs.com/woshimrf/p/&#x2026;</a></p>
<hr>
<blockquote>
<h4 id="&#x76EE;&#x5F55;"><a href="#&#x76EE;&#x5F55;" class="headerlink" title="&#x76EE;&#x5F55;"></a>&#x76EE;&#x5F55;</h4><p><a href="#_caption_0"><strong>&#x7B80;&#x5355;&#x4F7F;&#x7528;</strong></a><br>#&#x60C5;&#x5F62;&#x4E00; &#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource Bundle<br>#&#x60C5;&#x5F62;&#x4E8C; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle<br>#&#x60C5;&#x5F62;&#x4E09; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;<br>#&#x60C5;&#x5F62;4<br><a href="#_caption_1"><strong>&#x5F15;&#x5165;easy-i18n</strong></a><br> <a href="#_caption_2"><strong>&#x6DFB;&#x52A0;Resource Bundle</strong></a><br> <a href="#_caption_3"><strong>&#x65B0;&#x5EFA;MessageService</strong></a><br><a href="#_caption_4"><strong>&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource</strong></a><br><a href="#_caption_5"><strong>&#x6D4B;&#x8BD5;</strong></a></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/baf6b6ada7fe7b59137243363439a471798e0a6bcf2e44854c3b1f69c29854ca" alt><br> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/dcb7a2f90e213c2e3dabad7fcb675995fd7c5d54f809f0e46dc8d2f08681698c" alt></p>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>Dropwizard&#x5B98;&#x65B9;&#x6587;&#x6863;&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x56FD;&#x9645;&#x5316;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x81EA;&#x5DF1;&#x52A0;&#x3002;Spring&#x7684;MessageResource&#x7528;&#x7684;&#x5F88;&#x987A;&#x624B;&#xFF0C;&#x6240;&#x4EE5;copy&#x8FC7;&#x6765;&#x3002;</p>
<h1 id="Easy-i18n"><a href="#Easy-i18n" class="headerlink" title="Easy i18n"></a>Easy i18n</h1><p>&#x5728;&#x6574;&#x5408;Dropwizard&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x591A;&#x8BED;&#x8A00;&#x8C8C;&#x4F3C;&#x53EA;&#x80FD;&#x901A;&#x8FC7;jdk&#x81EA;&#x5E26;&#x7684;ResourceBundle&#x62FF;&#x6570;&#x636E;&#x3002;&#x5176;&#x5B9E;&#x4E5F;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4F46;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x7F13;&#x5B58;&#xFF0C;&#x9700;&#x8981;&#x89E3;&#x6790;&#x5360;&#x4F4D;&#x7B26;&#x7B49;&#x3002;&#x4EE3;&#x7801;&#x8D8A;&#x5199;&#x8D8A;&#x591A;&#xFF0C;&#x663E;&#x7136;&#x4E0D;&#x662F;&#x4EC5;&#x4EC5;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x5C31;&#x5B8C;&#x4E8B;&#x7684;&#x3002;&#x5199;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#x7684;&#x65F6;&#x5019;&#x7A81;&#x7136;&#x89C9;&#x5F97;&#x548C;spring context&#x91CC;&#x7684;message source&#x7ED3;&#x6784;&#x7C7B;&#x4F3C;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x653E;&#x5F03;&#x7EF4;&#x62A4;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x53D8;&#x7684;&#x590D;&#x6742;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;spring&#x3002;</p>
<p>&#x4F46;&#x9009;&#x53D6;dropwizard&#x7684;&#x65F6;&#x5019;&#x5C31;&#x662F;&#x6452;&#x5F03;&#x4E86;spring&#xFF0C;&#x518D;&#x62FF;&#x8FC7;&#x6765;&#x4E5F;&#x4E0D;&#x597D;&#x73A9;&#x4E86;&#x3002;&#x5E72;&#x8106;&#xFF0C;&#x62BD;&#x53D6;Spring context&#x9879;&#x76EE;&#x7684;MessageResource&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF0C;&#x91CD;&#x5199;&#x5C01;&#x88C5;&#x4E86;&#x4E00;&#x4E2A;library: <a href="/external_links/31ee1f1ba92ee662e6b157434d8b063e.html" target="blank" rel="noopener">github.com/Ryan-Miao/e&#x2026;</a>, &#x6B22;&#x8FCE;star&#x3002;</p>
<p><a href="/external_links/31ee1f1ba92ee662e6b157434d8b063e.html" target="blank" rel="noopener">easy-i18n</a>&#x8FD8;&#x662F;&#x548C;&#x5728;Spring&#x9879;&#x76EE;&#x4E2D;&#x76F8;&#x540C;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5F15;&#x5165;&#x4F9D;&#x8D56;&#xFF0C;&#x7531;&#x4E8E;github&#x9879;&#x76EE;&#x7684;library&#x5DF2;&#x7ECF;&#x6709;&#x4ED3;&#x5E93;&#x53BB;&#x7EF4;&#x62A4;&#x4E86;&#xFF0C;&#x5C31;&#x6CA1;&#x8D39;&#x5FC3;&#x601D;&#x653E;&#x5230;maven&#x548C;jcenter&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;github&#x4E0A;&#x62C9;&#x53D6;&#x3002;&#x7C7B;&#x5E93;&#x5730;&#x5740;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;repositories&gt;`</span><br><span class="line">    &lt;repository&gt;</span><br><span class="line">        &lt;id&gt;jitpack.io&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;https://jitpack.io&lt;/url&gt;</span><br><span class="line">    &lt;/repository&gt;</span><br><span class="line">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F15;&#x5165;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;dependency&gt;`</span><br><span class="line">    &lt;groupId&gt;com.github.Ryan-Miao&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;easy-i18n&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>


<h2 id="&#x7B80;&#x5355;&#x4F7F;&#x7528;"><a href="#&#x7B80;&#x5355;&#x4F7F;&#x7528;" class="headerlink" title="&#x7B80;&#x5355;&#x4F7F;&#x7528;"></a>&#x7B80;&#x5355;&#x4F7F;&#x7528;</h2><h3 id="&#x60C5;&#x5F62;&#x4E00;-&#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource-Bundle"><a href="#&#x60C5;&#x5F62;&#x4E00;-&#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource-Bundle" class="headerlink" title="#&#x60C5;&#x5F62;&#x4E00; &#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource Bundle"></a>#&#x60C5;&#x5F62;&#x4E00; &#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource Bundle</h3><p>&#x5728;resources&#x4E0B;&#x65B0;&#x5EFA;<code>i18n/messages.properties</code>&#x4EE5;&#x53CA;<code>i18n/messages_zh_CN.properties</code>. demo&#x4F4D;&#x7F6E;&#xFF1A;<a href="/external_links/d5f4e1eb9ada5e192a76c23ce65fcdbf.html" target="blank" rel="noopener">l4dropwizard</a></p>
<p>&#x7136;&#x540E;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`@Test`</span><br><span class="line">public void testI18n(){</span><br><span class="line">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String index = messageSource.getMessage(&quot;index&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(index);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x60C5;&#x5F62;&#x4E8C;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle"><a href="#&#x60C5;&#x5F62;&#x4E8C;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle" class="headerlink" title="#&#x60C5;&#x5F62;&#x4E8C; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle"></a>#&#x60C5;&#x5F62;&#x4E8C; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle</h3><p>&#x5B9E;&#x9645;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x4EA7;&#x54C1;&#x5206;&#x7C7B;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x591A;&#x4E2A;Resource Bundle&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x4E5F;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x8981;&#x521B;&#x5EFA;&#x591A;&#x4E2A;<code>ResourceBundleMessageSource</code>&#x6765;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void testI18n2(){</span><br><span class="line">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String index = messageSource.getMessage(&quot;index&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(index);</span><br><span class="line">    </span><br><span class="line">    ResourceBundleMessageSource messageSource2 = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages2&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String second = messageSource.getMessage(&quot;second&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(second);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x60C5;&#x5F62;&#x4E09;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;"><a href="#&#x60C5;&#x5F62;&#x4E09;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;" class="headerlink" title="#&#x60C5;&#x5F62;&#x4E09; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;"></a>#&#x60C5;&#x5F62;&#x4E09; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;</h3><p>&#x6709;&#x65F6;&#x5019;&#xFF0C;&#x60F3;&#x8981;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#xFF0C;&#x53EF;&#x80FD;&#x7FFB;&#x8BD1;&#x6587;&#x4EF6;&#x5728;&#x4E0D;&#x540C;&#x7684;Resource Bundle&#xFF0C;&#x4F46;&#x6211;&#x6307;&#x5411;&#x7528;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x53BB;&#x8C03;&#x7528;&#x3002;&#x8FD9;&#x65F6;&#x5019;&#xFF0C;&#x505A;&#x6CD5;&#x65F6;&#x5019;&#x5728;&#x8FD9;&#x51E0;&#x4E2A;Resource Bundle&#x7684;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x5373;key&#x8981;&#x5728;&#x8FD9;&#x51E0;&#x4E2A;Resource Bundle&#x91CC;&#x552F;&#x4E00;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x672C;&#x6587;&#x4EF6;&#x552F;&#x4E00;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void testI18n2(){</span><br><span class="line">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages&quot;, &quot;i18n/messages2&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String index = messageSource.getMessage(&quot;index&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(index);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#xFF0C;&#x4F1A;&#x4E00;&#x6B21;&#x4ECE;&#x4E24;&#x4E2A;Resource Bundle&#x91CC;&#x5BFB;&#x627E;&#x7FFB;&#x8BD1;&#xFF0C;&#x627E;&#x5230;&#x5373;&#x8FD4;&#x56DE;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x76F8;&#x540C;&#x7684;key&#xFF0C;&#x5C06;&#x5BFC;&#x81F4;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x751F;&#x6548;&#x3002;</p>
<h3 id="&#x60C5;&#x5F62;4"><a href="#&#x60C5;&#x5F62;4" class="headerlink" title="#&#x60C5;&#x5F62;4"></a>#&#x60C5;&#x5F62;4</h3><p>&#x6CA1;&#x6709;&#x4E86;&#xFF0C;&#x4F60;&#x7FFB;&#x8BD1;&#x8981;&#x90A3;&#x4E48;&#x590D;&#x6742;&#x5417;&#x3002;</p>
<p>&#x66F4;&#x591A;&#x7528;&#x6CD5;&#xFF0C;&#x53C2;&#x8003;&#x6D4B;&#x8BD5;&#x7C7B;&#xFF1A;<a href="/external_links/cb30553fd60cbb2f6c9551b39d85bfee.html" target="blank" rel="noopener">ResourceBundleMessageSourceTest</a></p>
<h1 id="Demo-source"><a href="#Demo-source" class="headerlink" title="Demo source"></a>Demo source</h1><p><a href="/external_links/bfc2da5629c4986752ce2c39769f83ff.html" target="blank" rel="noopener">github.com/Ryan-Miao/l&#x2026;</a></p>
<p>&#x672C;&#x6587;&#x662F;&#x57FA;&#x4E8E;<a href="/external_links/9c9bdb8e0145dc7a46f17266e07b9c1a.html" target="blank" rel="noopener">dropwizard&#x5165;&#x95E8;</a>&#x4E4B;&#x4E0A;&#x7684;&#x6F14;&#x8FDB;&#x3002;</p>
<p>&#x786E;&#x4FDD;&#x4F9D;&#x8D56;&#x90FD;&#x662F;&#x6700;&#x65B0;&#x7684;&#xFF0C;&#x6216;&#x8005;&#x81EA;&#x884C;&#x89E3;&#x51B3;&#x7248;&#x672C;&#x51B2;&#x7A81;&#xFF0C;&#x6BD4;&#x5982;jackson&#x4E0D;&#x540C;&#x7248;&#x672C;&#x4E4B;&#x95F4;&#x7684;&#x7C7B;&#x6709;&#x6240;&#x4E0D;&#x540C;&#x3002;</p>
<h2 id="&#x5F15;&#x5165;easy-i18n"><a href="#&#x5F15;&#x5165;easy-i18n" class="headerlink" title="&#x5F15;&#x5165;easy-i18n"></a>&#x5F15;&#x5165;easy-i18n</h2><p>repository url</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;repositories&gt;`</span><br><span class="line">    &lt;repository&gt;</span><br><span class="line">        &lt;id&gt;jitpack.io&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;https://jitpack.io&lt;/url&gt;</span><br><span class="line">    &lt;/repository&gt;</span><br><span class="line">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F15;&#x5165;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;dependency&gt;`</span><br><span class="line">    &lt;groupId&gt;com.github.Ryan-Miao&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;easy-i18n&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>


<h2 id="&#x6DFB;&#x52A0;Resource-Bundle"><a href="#&#x6DFB;&#x52A0;Resource-Bundle" class="headerlink" title="&#x6DFB;&#x52A0;Resource Bundle"></a>&#x6DFB;&#x52A0;Resource Bundle</h2><p>&#x5728;<a href="/external_links/7ab414a260b7b15846945677fef2a009.html" target="blank" rel="noopener">resources</a>&#x4E0B;&#x65B0;&#x589E;&#x6587;&#x4EF6;&#x5939;<code>i18n</code>, &#x4F9D;&#x6B21;&#x6DFB;&#x52A0;&#x51E0;&#x4E2A;Resource Bundle&#x3002;&#x5177;&#x4F53;&#x505A;&#x6CD5;&#x662F;&#xFF0C;&#x5728;&#x6587;&#x4EF6;&#x5939;<code>i18n</code>&#x53F3;&#x952E; -&gt; <code>new</code> -&gt; <code>Resource Bundle</code>, &#x7136;&#x540E;&#x9009;&#x62E9;&#x60F3;&#x8981;&#x652F;&#x6301;&#x7684;&#x8BED;&#x8A00;&#x3002;&#x6BD4;&#x5982;&#x7F8E;&#x56FD;<code>en_US</code>&#xFF0C;&#x7B80;&#x4F53;&#x4E2D;&#x6587;<code>zh_CN</code>&#x3002;</p>
<h2 id="&#x65B0;&#x5EFA;MessageService"><a href="#&#x65B0;&#x5EFA;MessageService" class="headerlink" title="&#x65B0;&#x5EFA;MessageService"></a>&#x65B0;&#x5EFA;MessageService</h2><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Util&#x6765;&#x5904;&#x7406;&#x7FFB;&#x8BD1;&#x529F;&#x80FD;&#x3002; com.test.domain.service.IMessageService</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.service;`</span><br><span class="line"></span><br><span class="line">import java.text.MessageFormat;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Locale;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * The Message translation service</span><br><span class="line"> * Created by Ryan Miao on 11/23/17.</span><br><span class="line"> */</span><br><span class="line">public interface IMessageService {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Get translation by message key.</span><br><span class="line">     *</span><br><span class="line">     * @param key The message key in the properties</span><br><span class="line">     * @return the translated message</span><br><span class="line">     */</span><br><span class="line">    String getMessage(String key, Locale locale);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Get translation by message key and compose it with variables.</span><br><span class="line">     * Note that the variable would be injected by {@link MessageFormat}</span><br><span class="line">     *</span><br><span class="line">     * @param key The message key in the properties</span><br><span class="line">     * @param args The variables to inject into the message.</span><br><span class="line">     * @return the translated message.</span><br><span class="line">     */</span><br><span class="line">    String getMessage(String key, List&lt;String&gt; args, Locale locale);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5B9E;&#x73B0;&#x7C7B;<code>com.test.domain.service.impl.MessageService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.service.impl;`</span><br><span class="line"></span><br><span class="line">import com.miao.easyi18n.support.ResourceBundleMessageSource;</span><br><span class="line">import com.test.domain.service.IMessageService;</span><br><span class="line"></span><br><span class="line">import javax.inject.Inject;</span><br><span class="line">import javax.inject.Singleton;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Locale;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by Ryan Miao on 11/23/17.</span><br><span class="line"> */</span><br><span class="line">@Singleton</span><br><span class="line">public class MessageService implements IMessageService{</span><br><span class="line"></span><br><span class="line">    private final ResourceBundleMessageSource messageSource;</span><br><span class="line"></span><br><span class="line">    @Inject</span><br><span class="line">    public MessageService(ResourceBundleMessageSource messageSource) {</span><br><span class="line">        this.messageSource = messageSource;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getMessage(String key, Locale locale) {</span><br><span class="line">        return messageSource.getMessage(key, null, locale);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getMessage(String key, List&lt;String&gt; args, Locale locale) {</span><br><span class="line">        return messageSource.getMessage(key, args.toArray(), locale);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<h2 id="&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource"><a href="#&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource" class="headerlink" title="&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource"></a>&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource</h2><p>&#x7531;&#x4E8E;<code>ResourceBundleMessageSource</code>&#x662F;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x521B;&#x5EFA;&#x3002;&#x5173;&#x4E8E;IoC&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53C2;&#x9605;<a href="/external_links/5630fc493e335c72a0b3bb990663dfd7.html" target="blank" rel="noopener">dropwizard&#x4E2D;&#x6DFB;&#x52A0;DI</a></p>
<p>&#x5728;<code>ConfigurationModule</code>&#x4E2D;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.ioc.module;`</span><br><span class="line"></span><br><span class="line">import com.miao.easyi18n.support.ResourceBundleMessageSource;</span><br><span class="line">import com.test.configuration.HelloWorldConfiguration;</span><br><span class="line">import dagger.Module;</span><br><span class="line">import dagger.Provides;</span><br><span class="line"></span><br><span class="line">import javax.inject.Singleton;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by Ryan Miao on 11/20/17.</span><br><span class="line"> */</span><br><span class="line">@Module</span><br><span class="line">public class ConfigurationModule {</span><br><span class="line">    private final HelloWorldConfiguration configuration;</span><br><span class="line"></span><br><span class="line">    public ConfigurationModule(HelloWorldConfiguration configuration) {</span><br><span class="line">        this.configuration = configuration;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Provides</span><br><span class="line">    @Singleton</span><br><span class="line">    HelloWorldConfiguration helloWorldConfiguration(){</span><br><span class="line">        return configuration;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Singleton</span><br><span class="line">    @Provides</span><br><span class="line">    ResourceBundleMessageSource resourceBundleMessageSource(){</span><br><span class="line">        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">        messageSource.addBasenames(&quot;i18n/messages&quot;, &quot;i18n/messages2&quot;, &quot;i18n/otherGroup&quot;);</span><br><span class="line">        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">        return messageSource;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#xFF0C;&#x5173;&#x4E8E;Resource Bundle&#x7684;&#x4F4D;&#x7F6E;&#x6CA1;&#x6709;&#x5355;&#x72EC;&#x63D0;&#x51FA;&#x6765;&#xFF0C;&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x653E;&#x5230;<code>HelloWorldConfiguration</code>&#xFF0C;&#x63D0;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<h2 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h2><p>&#x5728;dagger&#x4E2D;&#xFF0C;&#x63A5;&#x53E3;&#x548C;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x7ED1;&#x5B9A;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x624B;&#x52A8;&#x58F0;&#x660E;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x7ED1;&#x5B9A;<code>IMessageService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`@Singleton`</span><br><span class="line">@Provides</span><br><span class="line">IMessageService messageService(MessageService messageService){</span><br><span class="line">    return messageService;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;Resource&#xFF0C; <code>com.test.domain.resource.LocalResource</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.resource;`</span><br><span class="line"></span><br><span class="line">import com.codahale.metrics.annotation.Timed;</span><br><span class="line">import com.google.common.collect.ImmutableMap;</span><br><span class="line">import com.test.domain.entiry.GithubUser;</span><br><span class="line">import com.test.domain.service.IMessageService;</span><br><span class="line">import io.swagger.annotations.Api;</span><br><span class="line">import io.swagger.annotations.ApiOperation;</span><br><span class="line">import io.swagger.annotations.ApiResponse;</span><br><span class="line">import io.swagger.annotations.ApiResponses;</span><br><span class="line"></span><br><span class="line">import javax.inject.Inject;</span><br><span class="line">import javax.validation.Valid;</span><br><span class="line">import javax.validation.constraints.NotNull;</span><br><span class="line">import javax.validation.constraints.Pattern;</span><br><span class="line">import javax.ws.rs.GET;</span><br><span class="line">import javax.ws.rs.HeaderParam;</span><br><span class="line">import javax.ws.rs.Path;</span><br><span class="line">import javax.ws.rs.PathParam;</span><br><span class="line">import javax.ws.rs.Produces;</span><br><span class="line">import javax.ws.rs.core.MediaType;</span><br><span class="line">import java.util.Locale;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Test localization</span><br><span class="line"> * Created by Ryan Miao on 11/23/17.</span><br><span class="line"> */</span><br><span class="line">@Api(&quot;/local&quot;)</span><br><span class="line">@Path(&quot;/local&quot;)</span><br><span class="line">@Produces(MediaType.APPLICATION_JSON)</span><br><span class="line">public class LocalResource {</span><br><span class="line"></span><br><span class="line">    private final IMessageService messageService;</span><br><span class="line"></span><br><span class="line">    @Inject</span><br><span class="line">    public LocalResource(IMessageService messageService) {</span><br><span class="line">        this.messageService = messageService;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @GET</span><br><span class="line">    @Timed</span><br><span class="line">    @Path(&quot;/{key}&quot;)</span><br><span class="line">    @ApiOperation(value = &quot;Get github user profile.&quot;, notes = &quot;There should be the note.&quot;)</span><br><span class="line">    @ApiResponses({</span><br><span class="line">            @ApiResponse(code = 401, message = &quot;Valid credentials are required to access this resource.&quot;),</span><br><span class="line">            @ApiResponse(code = 400, message = &quot;Params not valid.&quot;),</span><br><span class="line">            @ApiResponse(code = 500, message = &quot;Something wrong from the server.&quot;),</span><br><span class="line">            @ApiResponse(code = 200, message = &quot;Success.&quot;, response = GithubUser.class)</span><br><span class="line">    })</span><br><span class="line">    public Map&lt;String, String&gt; getIndex(</span><br><span class="line">            @PathParam(&quot;key&quot;) final String index,</span><br><span class="line">            @HeaderParam(&quot;Accept-Language&quot;) @Valid</span><br><span class="line">            @NotNull(message = &quot;cannot be null.&quot;)</span><br><span class="line">            @Pattern(regexp = &quot;([a-z]{2}-[A-Z]{2})&quot;, message = &quot;pattern should like zh-CN, en-US.&quot;)</span><br><span class="line">            final String language</span><br><span class="line">    ) {</span><br><span class="line">        final Locale locale = Locale.forLanguageTag(language);</span><br><span class="line">        final String message = messageService.getMessage(index, locale);</span><br><span class="line">        return ImmutableMap.of(index, message);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7ED3;&#x679C;<br> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0e64f8b389963472c93b177c786b29e22bb09ce8d6fc6543423b889dbe05d4cf" alt><br> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/aacafca975ea13a79d7ff264e9af71cc18fdc325a78af76e1458507631cc0faf" alt></p>
<p> So do it,and<br> change it,no regret!</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/24a903aee9de684a597b179533f54432.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513709871112.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513709871112.html" itemprop="url">PHP 调用 Go 服务的正确方式 - Unix Domai</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T14:51:25+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="&#x95EE;&#x9898;"><a href="#&#x95EE;&#x9898;" class="headerlink" title="&#x95EE;&#x9898;"></a>&#x95EE;&#x9898;</h1><p>&#x53EF;&#x80FD;&#x662F;&#x7531;&#x4E8E;&#x7ECF;&#x9A8C;&#x592A;&#x5C11;&#xFF0C;&#x5DE5;&#x4F5C;&#x4E2D;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#xFF0C;&#x63A2;&#x7A76;&#x548C;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x7684;&#x8FC7;&#x7A0B;&#x603B;&#x60F3;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5199;&#x535A;&#x5BA2;&#x7ECF;&#x5E38;&#x662F;&#x95EE;&#x9898;&#x9A71;&#x52A8;&#xFF0C;&#x9996;&#x5148;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x4ECA;&#x5929;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<h3 id="&#x670D;&#x52A1;&#x8026;&#x5408;"><a href="#&#x670D;&#x52A1;&#x8026;&#x5408;" class="headerlink" title="&#x670D;&#x52A1;&#x8026;&#x5408;"></a>&#x670D;&#x52A1;&#x8026;&#x5408;</h3><p>&#x6211;&#x4EEC;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li>&#x8FDB;&#x7A0B;&#x4F9D;&#x8D56;&#x4E8E;&#x67D0;&#x670D;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x628A;&#x670D;&#x52A1;&#x8026;&#x5408;&#x5728;&#x8FDB;&#x7A0B;&#x4EE3;&#x7801;&#x4E2D;&#xFF1B;</li>
<li>&#x670D;&#x52A1;&#x521D;&#x59CB;&#x5316;&#x8017;&#x65F6;&#x957F;&#xFF0C;&#x62D6;&#x6162;&#x4E86;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#xFF1B;</li>
<li>&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x8981;&#x5360;&#x7528;&#x5927;&#x91CF;&#x5185;&#x5B58;&#xFF0C;&#x591A;&#x8FDB;&#x7A0B;&#x65F6;&#x5185;&#x5B58;&#x635F;&#x8017;&#x4E25;&#x91CD;&#x3002;</li>
</ul>
<p>&#x5982;&#x6211;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0; <a href="/external_links/39354503396c2126938dfe6049cde4b3.html" target="blank" rel="noopener">&#x5C0F;&#x65F6;&#x5230;&#x5206;&#x949F; - &#x4E00;&#x6B65;&#x6B65;&#x4F18;&#x5316;&#x5DE8;&#x91CF;&#x5173;&#x952E;&#x8BCD;&#x7684;&#x5339;&#x914D;</a> &#x4E2D;&#x4ECB;&#x7ECD;&#x7684;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x662F;&#x6D88;&#x606F;&#x5904;&#x7406;&#x6D41;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x73AF;&#xFF0C;&#x88AB;&#x591A;&#x4E2A;&#x6D88;&#x606F;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x4F9D;&#x8D56;&#xFF0C;&#x6BCF;&#x6B21;&#x521D;&#x59CB;&#x5316;&#x8FDB;&#x7A0B;&#x8981; <code>6&#x79D2;</code> &#x5DE6;&#x53F3;&#x65F6;&#x95F4;&#x6784;&#x9020; Trie &#x6811;&#xFF0C;&#x800C;&#x4E14;&#x670D;&#x52A1;&#x8BFB;&#x53D6;&#x5173;&#x952E;&#x8BCD;&#x5927;&#x6587;&#x4EF6;&#x3001;&#x4F7F;&#x7528;&#x6811;&#x7EC4;&#x6784;&#x9020; Trie &#x6811;&#xFF0C;&#x4F1A;&#x5360;&#x7528;&#x5927;&#x91CF;(&#x76EE;&#x524D;&#x8BBE;&#x7F6E;&#x4E3A; <code>256M</code> )&#x5185;&#x5B58;&#x3002;</p>
<p>&#x6211;&#x5DF2;&#x7ECF;&#x628A;&#x8FDB;&#x7A0B;&#x5199;&#x6210;&#x4E86;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x8BA9;&#x5B83;&#x4EEC;&#x957F;&#x65F6;&#x95F4;&#x6267;&#x884C;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x7528;&#x66F4;&#x591A;&#x5730;&#x8003;&#x8651;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x4F46;&#x5360;&#x7528;&#x5185;&#x5B58;&#x91CF;&#x5DE8;&#x5927;&#x7684;&#x95EE;&#x9898;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x5173;&#x952E;&#x8BCD;&#x91CF;&#x518D;&#x5927;&#x4E00;&#x4E9B;&#xFF0C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x9762;&#x8DD1;&#x5341;&#x6765;&#x4E2A;&#x6D88;&#x606F;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x540E;&#x5C31;&#x5E72;&#x4E0D;&#x4E86;&#x5176;&#x4ED6;&#x4E86;&#x3002;</p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x9700;&#x6C42;&#x8BA9;&#x6211;&#x628A;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#x5C01;&#x88C5;&#x4E3A;&#x63A5;&#x53E3;&#x7ED9;&#x5916;&#x90E8;&#x8C03;&#x7528;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;web &#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x7684;&#x751F;&#x5B58;&#x5468;&#x671F;&#x662F;&#x4ECE;&#x53D7;&#x7406;&#x8BF7;&#x6C42;&#x5230;&#x54CD;&#x5E94;&#x7ED3;&#x675F;&#xFF0C;&#x5982;&#x679C;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x90FD;&#x7528;&#x5927;&#x91CF;&#x5185;&#x5B58;&#x548C;&#x65F6;&#x95F4;&#x6765;&#x521D;&#x59CB;&#x5316;&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x63A5;&#x53E3;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x548C;&#x670D;&#x52A1;&#x5668;&#x538B;&#x529B;&#x53EF;&#x60F3;&#x800C;&#x77E5;&#x3002;</p>
<h3 id="&#x670D;&#x52A1;&#x62BD;&#x53D6;"><a href="#&#x670D;&#x52A1;&#x62BD;&#x53D6;" class="headerlink" title="&#x670D;&#x52A1;&#x62BD;&#x53D6;"></a>&#x670D;&#x52A1;&#x62BD;&#x53D6;</h3><p>&#x8FD9;&#x6837;&#xFF0C;&#x670D;&#x52A1;&#x5F62;&#x5F0F;&#x5FC5;&#x987B;&#x8981;&#x6539;&#x53D8;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x8FD9;&#x4E2A;&#x6587;&#x672C;&#x5339;&#x914D;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x80FD;&#x505A;&#x5230;&#xFF1A;</p>
<ul>
<li>&#x968F;&#x8C03;&#x968F;&#x8D70;&#xFF0C;&#x4E0D;&#x4F9D;&#x8D56;&#xFF0C;&#x4E0D;&#x518D;&#x4E0E;&#x201C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x670D;&#x52A1;&#x201D;&#x8026;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF1B;</li>
<li>&#x4E00;&#x6B21;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x671F;&#x95F4;&#x6301;&#x7EED;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF1B;</li>
<li>&#x540C;&#x6B65;&#x54CD;&#x5E94;&#xFF0C;&#x9AD8;&#x6548;&#x800C;&#x51C6;&#x786E;&#xFF0C;&#x6700;&#x597D;&#x80FD;&#x4E0D;&#x7528;&#x5404;&#x79CD;&#x9501;&#x6765;&#x4FDD;&#x6301;&#x8D44;&#x6E90;&#x5360;&#x6709;&#xFF1B;</li>
</ul>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x8FD9;&#x4E2A;&#x6587;&#x672C;&#x5339;&#x914D;&#x7684;&#x670D;&#x52A1;&#x62BD;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5355;&#x72EC;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6765;&#x8FD0;&#x884C;&#xFF0C;&#x50CF;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x591A;&#x4E2A;&#x201C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x670D;&#x52A1;&#x201D;&#x5728;&#x6709;&#x9700;&#x8981;&#x65F6;&#x80FD;&#x8C03;&#x7528;&#x6B64;&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8003;&#x8651;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x5982;&#x4F55;&#x4E0E;&#x5916;&#x754C;&#x901A;&#x4FE1;&#xFF0C;&#x63A5;&#x53D7;&#x5339;&#x914D;&#x8BF7;&#x6C42;&#xFF0C;&#x54CD;&#x5E94;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x3002;&#x7ED5;&#x6765;&#x7ED5;&#x53BB;&#xFF0C;&#x95EE;&#x9898;&#x8FD8;&#x662F;&#x56DE;&#x5230;&#x4E86; <code>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</code>&#x3002;</p>
<hr>
<h1 id="Unix-Domain-Sockets"><a href="#Unix-Domain-Sockets" class="headerlink" title="Unix Domain Sockets"></a>Unix Domain Sockets</h1><h3 id="&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"><a href="#&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;" class="headerlink" title="&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"></a>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</h3><blockquote>
<p>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#xFF08;IPC&#xFF0C;Inter-Process Communication&#xFF09;&#xFF0C;&#x6307;&#x81F3;&#x5C11;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x6216;&#x7EBF;&#x7A0B;&#x95F4;&#x4F20;&#x9001;&#x6570;&#x636E;&#x6216;&#x4FE1;&#x53F7;&#x7684;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x6216;&#x65B9;&#x6CD5;&#x3002;&#x8FDB;&#x7A0B;&#x662F;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x5206;&#x914D;&#x8D44;&#x6E90;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x4F4D;(&#x4E25;&#x683C;&#x8BF4;&#x6765;&#x662F;&#x7EBF;&#x7A0B;)&#x3002;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x72EC;&#x7ACB;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x5F7C;&#x6B64;&#x662F;&#x9694;&#x79BB;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x80FD;&#x4F7F;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x4E92;&#x76F8;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;&#x5E76;&#x8FDB;&#x884C;&#x534F;&#x8C03;&#x5DE5;&#x4F5C;&#xFF0C;&#x624D;&#x6709;&#x4E86;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x3002;</p>
</blockquote>
<p>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x7F51;&#x4E0A;&#x5BF9;&#x6B64;&#x4ECB;&#x7ECD;&#x7684;&#x4E5F;&#x5F88;&#x591A;&#xFF0C;&#x4E0B;&#x9762;&#x6839;&#x636E;&#x6587;&#x7AE0;&#x7684;&#x9700;&#x6C42;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x8FD9;&#x4E9B;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x7BA1;&#x9053;&#xFF1A;&#x7BA1;&#x9053;&#x662F;Unix&#x6700;&#x521D;&#x7684;IPC&#x5F62;&#x5F0F;&#xFF0C;&#x4F46;&#x5B83;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5177;&#x6709;&#x5171;&#x540C;&#x7956;&#x5148;&#x8FDB;&#x7A0B;&#x7684;&#x5404;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x65E0;&#x6CD5;&#x7528;&#x4E8E;&#x5728;&#x6CA1;&#x6709;&#x4EB2;&#x7F18;&#x5173;&#x7CFB;&#x7684;&#x8FDB;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x201C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x670D;&#x52A1;&#x201D;&#x4E2D;&#x542F;&#x52A8;&#x201C;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#x201D;&#xFF0C;&#x8DDF;&#x539F;&#x6765;&#x5DEE;&#x522B;&#x4E0D;&#x5927;&#x3002;</li>
<li>&#x547D;&#x540D;&#x7BA1;&#x9053;&#xFF1A;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A;&#x6709;&#x540D;&#x7BA1;&#x9053;&#xFF0C;&#x5B83;&#x5728;Unix&#x79F0;&#x4E3A;<code>FIFO</code>&#xFF0C;&#x5B83;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6765;&#x8FDB;&#x884C;&#x8FDB;&#x7A0B;&#x95F4;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#xFF0C;&#x4F46;&#x670D;&#x52A1;&#x4E8E;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x9501;&#x6765;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x5199;&#x5165;&#x548C;&#x8BFB;&#x53D6;&#x4E0D;&#x5BF9;&#x5E94;&#x3002;</li>
<li>&#x4FE1;&#x53F7;&#x548C;&#x4FE1;&#x53F7;&#x91CF;&#xFF1A;&#x7528;&#x4E8E;&#x8FDB;&#x7A0B;/&#x7EBF;&#x7A0B;&#x4E8B;&#x4EF6;&#x7EA7;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x80FD;&#x4EA4;&#x6D41;&#x7684;&#x4FE1;&#x606F;&#x592A;&#x5C11;&#x3002;</li>
<li>&#x6D88;&#x606F;&#x961F;&#x5217;&#x548C;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#xFF1A;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x5185;&#x5B58;&#x4ECB;&#x8D28;&#x6765;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x6211;&#x4E4B;&#x524D;&#x4E5F;&#x5199;&#x8FC7;&#x4E00;&#x7BC7;&#x5173;&#x4E8E;PHP&#x8FDB;&#x7A0B;&#x95F4;&#x4F7F;&#x7528;&#x6D88;&#x606F;&#x961F;&#x5217;&#x548C;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x901A;&#x4FE1;&#x7684;&#x6587;&#x7AE0;&#xFF1A; <a href="/external_links/979ef93cfa42dfe557261c427610d31c.html" target="blank" rel="noopener">&#x4ECE;&#x5E76;&#x53D1;&#x5904;&#x7406;&#x8C08;PHP&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#xFF08;&#x4E8C;&#xFF09;System V IPC</a>&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x5728;&#x901A;&#x4FE1;&#x4E0A;&#x90FD;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x65F6;&#x65E0;&#x6CD5;&#x5206;&#x8FA8;&#x8BF7;&#x6C42;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x54CD;&#x5E94;&#x4FE1;&#x606F;&#x3002;</li>
<li>socket&#xFF1A;&#x901A;&#x8FC7;Unix&#x5C01;&#x88C5;&#x597D;&#x7684;&#x7F51;&#x7EDC;API&#x6765;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x50CF;&#x6570;&#x636E;&#x5E93;&#x3001;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#xFF0C;&#x5B83;&#x4EEC;&#x4E5F;&#x80FD;&#x63D0;&#x4F9B;&#x672C;&#x5730;&#x670D;&#x52A1;&#x3002;&#x4E0D;&#x8FC7;&#x7F51;&#x7EDC;socket&#x56FA;&#x7136;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x8981;&#x9762;&#x4E34;&#x7740;&#x6570;&#x636E;&#x5305;&#x88C5;&#x548C;&#x7F51;&#x7EDC;&#x8C03;&#x7528;&#x5F00;&#x9500;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x5B8C;&#x7F8E;&#x7684;&#x9009;&#x62E9;&#x3002;</li>
</ul>
<h3 id="&#x7B80;&#x5355;&#x4ECB;&#x7ECD;"><a href="#&#x7B80;&#x5355;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x7B80;&#x5355;&#x4ECB;&#x7ECD;"></a>&#x7B80;&#x5355;&#x4ECB;&#x7ECD;</h3><p>&#x5F53;&#x7136;&#x8FD8;&#x662F;&#x6709;&#x5B8C;&#x7F8E;&#x7684;&#x65B9;&#x5F0F;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x89D2; - <code>Unix Domain Sockets</code> &#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684; Socket&#xFF0C;&#x4F46;&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x7ECF;&#x8FC7;&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x6253;&#x5305;&#x62C6;&#x5305;&#x3001;&#x8BA1;&#x7B97;&#x6821;&#x9A8C;&#x548C;&#x3001;&#x7EF4;&#x62A4;&#x5E8F;&#x53F7;&#x548C;&#x5E94;&#x7B54;&#x7B49;&#xFF0C;&#x53EA;&#x662F;&#x5C06;&#x5E94;&#x7528;&#x5C42;&#x6570;&#x636E;&#x4ECE;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x62F7;&#x8D1D;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x7CFB;&#x7EDF;&#x5185;&#x901A;&#x4FE1;&#x6548;&#x7387;&#x66F4;&#x9AD8;&#x3002;&#x800C;&#x4E14;&#x514D;&#x53BB;&#x4E86;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#xFF0C;&#x5B83;&#x4E5F;&#x66F4;&#x80FD;&#x4FDD;&#x8BC1;&#x6D88;&#x606F;&#x7684;&#x5B8C;&#x6574;&#x6027;&#xFF0C;&#x65E2;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x4E5F;&#x4E0D;&#x4F1A;&#x987A;&#x5E8F;&#x9519;&#x4E71;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x7279;&#x6B8A;&#x7684; Socket&#xFF0C;&#x5B83;&#x7684;&#x521B;&#x5EFA;&#x3001;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x548C;&#x7F51;&#x7EDC; Socket &#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x6B21;&#x5B8C;&#x6574;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x90FD;&#x8981;&#x7ECF;&#x8FC7;<code>create&#x3001;bind&#x3001;listen&#x3001;accept&#x3001;read&#x3001;write</code>&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8981;&#x901A;&#x8FC7;<code>create&#x3001;connect&#x3001;write&#x3001;read</code>&#x3002;&#x4E0E;&#x666E;&#x901A; Socket &#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x5185;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x4E0D;&#x662F; IP &#x548C;&#x7AEF;&#x53E3;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x4EE3;&#x7801;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x591A;&#x4ECB;&#x7ECD;&#x4E86;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0; <a href="/external_links/4071c9a5b9a86bbda369c1b0bc97e5d2.html" target="blank" rel="noopener">&#x7528;C&#x5199;&#x4E00;&#x4E2A;web&#x670D;&#x52A1;&#x5668;&#xFF08;&#x4E00;&#xFF09; &#x57FA;&#x7840;&#x529F;&#x80FD;</a> &#x7684;<code>&#x529F;&#x80FD;&#x5B9E;&#x73B0;</code>&#x5C0F;&#x8282;&#x91CC;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E86; socket &#x901A;&#x4FE1;&#x7684;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#xFF0C;C &#x7CFB;&#x7684;&#x8BED;&#x8A00;&#x90FD;&#x662F;&#x76F8;&#x4F3C;&#x7684;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;</p>
<h3 id="&#x9002;&#x7528;&#x573A;&#x666F;"><a href="#&#x9002;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x9002;&#x7528;&#x573A;&#x666F;"></a>&#x9002;&#x7528;&#x573A;&#x666F;</h3><p>Unix Domain Sockets &#x771F;&#x7684;&#x662F;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x4E00;&#x4E2A;&#x91CD;&#x578B;&#x6B66;&#x5668;&#xFF0C;&#x7528;&#x5B83;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x3001;&#x4FE1;&#x606F;&#x4EA4;&#x4E92;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x9501;&#x7B49;&#x7E41;&#x6742;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x6548;&#x7387;&#xFF0C;&#x53EF;&#x8C13;&#x662F;&#x7B80;&#x5355;&#x9AD8;&#x6548;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x201C;&#x91CD;&#x578B;&#x6B66;&#x5668;&#x201D; &#x7684;&#x5728;&#x5404;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#x4E5F;&#x6709;&#x9002;&#x5408;&#x4E0D;&#x9002;&#x5408;&#x3002;Unix Domain Sockets&#x9002;&#x7528;&#x4E8E;&#x4EE5;&#x4E0B;&#x573A;&#x666F;&#xFF1A;</p>
<ul>
<li>&#x670D;&#x52A1;&#x957F;&#x65F6;&#x95F4;&#x5B58;&#x5728;&#x3002; Unix Domain Sockets &#x7684;&#x670D;&#x52A1;&#x7AEF;&#x662F;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x6837;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x5728;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4E2D;&#xFF0C;&#x5B83;&#x963B;&#x585E;&#x5E76;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x7279;&#x6027;&#x53EF;&#x4EE5;&#x88AB;&#x5145;&#x5206;&#x5229;&#x7528;&#x3002;</li>
<li>&#x4E00;&#x670D;&#x52A1;&#x5668;&#x591A;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5B83;&#x80FD;&#x901A;&#x8FC7; Socket &#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6765;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x907F;&#x514D;&#x8D44;&#x6E90;&#x4E4B;&#x95F4;&#x7684;&#x9501;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x540C;&#x4E00;&#x7CFB;&#x7EDF;&#x5185;&#x3002;&#x5B83;&#x53EA;&#x80FD;&#x5728;&#x540C;&#x4E00;&#x7CFB;&#x7EDF;&#x5185;&#x8FDB;&#x884C;&#x8FDB;&#x7A0B;&#x6570;&#x636E;&#x590D;&#x5236;&#xFF0C;&#x8DE8;&#x7CFB;&#x7EDF;&#x8BF7;&#x4F7F;&#x7528;&#x4F20;&#x7EDF; Sockets&#x3002;</li>
</ul>
<hr>
<h1 id="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x4EE3;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"></a>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</h1><p>&#x63A5;&#x4E0B;&#x6765;&#x8981; show code &#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x5B66; PHP &#x7684;&#x90FD;&#x77E5;&#x9053;&#xFF0C;PHP &#x4E0D;&#x592A;&#x9002;&#x5408;&#x5904;&#x7406; CPU &#x5BC6;&#x96C6;&#x5F62;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x6211;&#x521A;&#x597D;&#x5B66;&#x4E86;&#x70B9; Go&#xFF0C;&#x4E00;&#x65F6;&#x624B;&#x75D2;&#xFF0C;&#x5C31;&#x7528; Go &#x5B9E;&#x73B0;&#x4E86;&#x4E0B; Trie &#x6811;&#xFF0C;&#x6240;&#x4EE5;&#x624D;&#x7275;&#x626F;&#x5230; PHP &#x548C; Go &#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x6709;&#x4E86;&#x4ECA;&#x5929;&#x7684;&#x6587;&#x7AE0;&#x3002;&#x5F53;&#x7136;&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E0D;&#x53EA;&#x9002;&#x5408; PHP &#x4E0E; Go &#x901A;&#x4FE1;&#xFF0C;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x4E5F;&#x53EF;&#x4EE5;&#xFF0C;&#x81F3;&#x5C11; C&#x7CFB;&#x8BED;&#x8A00;&#x4E2D;&#x662F;&#x901A;&#x7528;&#x7684;&#x3002;</p>
<p>&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x89C1; <a href="/external_links/8e07dc91fdcd74682ff72a27e5ee617b.html" target="blank" rel="noopener">IPC-GitHub-&#x6795;&#x8FB9;&#x4E66;</a>&#xFF0C;&#x91CC;&#x9762;&#x8FD8;&#x9644;&#x5E26;&#x4E86;&#x4E00;&#x4EFD;&#x968F;&#x624B;&#x5199;&#x7684; PHP &#x7248;&#x672C;&#x7684; Unix Domain Sockets server &#x7AEF;&#x3002;</p>
<h3 id="Go-&#x5B9E;&#x73B0;&#x7684;-Trie-&#x6811;"><a href="#Go-&#x5B9E;&#x73B0;&#x7684;-Trie-&#x6811;" class="headerlink" title="Go &#x5B9E;&#x73B0;&#x7684; Trie &#x6811;"></a>Go &#x5B9E;&#x73B0;&#x7684; Trie &#x6811;</h3><p>Trie&#x6811;&#x4E0D;&#x518D;&#x662F;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x8FD9;&#x91CC;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x548C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`// trie&#x6811;&#x7ED3;&#x70B9;&#x5B9A;&#x4E49;`</span><br><span class="line">type Node struct {</span><br><span class="line">    depth    int</span><br><span class="line">    children map[int32]Node // &#x7528;map&#x5B9E;&#x73B0;key-value&#x578B;&#x7684; &#x5B57;&#x7B26;-&#x8282;&#x70B9; &#x5BF9;&#x5E94;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528; slice &#x7684; <code>append()</code> &#x51FD;&#x6570;&#x4FDD;&#x5B58;&#x9012;&#x589E;&#x7684;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x65F6;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x7531;&#x4E8E; slice &#x5BB9;&#x91CF;&#x4E0D;&#x591F;&#x800C;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x4F20;&#x5165; slice &#x7684;&#x5730;&#x5740;&#x6765;&#x4FDD;&#x5B58;&#x9012;&#x589E;&#x540E;&#x7684;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x7ED3;&#x679C;&#xFF0C;<code>*result = append(*result, word)</code>&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5C06;&#x9012;&#x589E;&#x4E4B;&#x540E;&#x7684; slice &#x5730;&#x5740;&#x4F20;&#x56DE;&#x3002;</li>
<li>&#x7531;&#x4E8E; Go &#x4E2D;&#x7684;&#x7F16;&#x7801;&#x7EDF;&#x4E00;&#x4F7F;&#x7528;&#x7684; <code>utf-8</code>&#xFF0C;&#x4E0D;&#x7528;&#x50CF; PHP &#x4E00;&#x6837;&#x5224;&#x65AD;&#x5B57;&#x7B26;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8FDB;&#x884C;&#x5173;&#x952E;&#x8BCD;&#x62C6;&#x6563;&#x548C;&#x6D88;&#x606F;&#x62C6;&#x6563;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>int32()</code> &#x65B9;&#x6CD5;&#x5C06;&#x5173;&#x952E;&#x8BCD;&#x548C;&#x6D88;&#x606F;&#x90FD;&#x8F6C;&#x6362;&#x4E3A;&#x6210;&#x5458;&#x4E3A; <code>int32</code> &#x7C7B;&#x578B;&#x7684; slice&#xFF0C;&#x5339;&#x914D;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C31;&#x4F7F;&#x7528; <code>int32</code> &#x7C7B;&#x578B;&#x7684;&#x6570;&#x5B57;&#x6765;&#x4EE3;&#x8868;&#x8FD9;&#x4E2A;&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#xFF0C;&#x5339;&#x914D;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x4F7F;&#x7528;<code>fmt.Printf(&quot;%c&quot;, int32)</code>&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A;&#x4E2D;&#x6587;&#x3002;</li>
</ul>
<h3 id="Go-Server"><a href="#Go-Server" class="headerlink" title="Go Server"></a>Go Server</h3><p>Go &#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; socket &#x5E76;&#x4F7F;&#x7528;&#x7684;&#x6B65;&#x9AA4;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x662F; Go &#x6CA1;&#x6709;&#x5F02;&#x5E38;&#xFF0C;&#x5224;&#x65AD; error &#x4F1A;&#x6BD4;&#x8F83;&#x6076;&#x5FC3;&#x4E00;&#x70B9;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x6CA1;&#x6709;&#x5927;&#x795E;&#x6709;&#x66F4;&#x597D;&#x7684;&#x5199;&#x6CD5;&#x3002;&#x4E0B;&#x9762;&#x4E3A;&#x4E86;&#x7CBE;&#x7B80;&#xFF0C;&#x628A; error &#x5168;&#x7F6E;&#x7A7A;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801; `// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;Unix domain soceket`</span><br><span class="line">    socket, _ := net.Listen(&quot;unix&quot;, &quot;/tmp/keyword_match.sock&quot;)</span><br><span class="line">    // &#x5173;&#x95ED;&#x65F6;&#x5220;&#x9664;&#x7ED1;&#x5B9A;&#x7684;&#x6587;&#x4EF6;</span><br><span class="line">    defer syscall.Unlink(&quot;/tmp/keyword_match.sock&quot;) </span><br><span class="line">    // &#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x76D1;&#x542C;&#x548C;&#x53D7;&#x7406;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;</span><br><span class="line">    for {</span><br><span class="line">        client, _ := socket.Accept()</span><br><span class="line">        </span><br><span class="line">        buf := make([]byte, 1024)</span><br><span class="line">        data_len, _ := client.Read(buf)</span><br><span class="line">        data := buf[0:data_len]</span><br><span class="line">        msg := string(data)</span><br><span class="line">        </span><br><span class="line">        matched := trie.Match(tree, msg)</span><br><span class="line">        response := []byte(&quot;[]&quot;) // &#x7ED9;&#x54CD;&#x5E94;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;</span><br><span class="line">        if len(matched) &gt; 0 {</span><br><span class="line">            json_str, _ := json.Marshal(matched)</span><br><span class="line">            response = []byte(string(json_str))</span><br><span class="line">        }</span><br><span class="line">        _, _ = client.Write(response)</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h3 id="PHP-Client"><a href="#PHP-Client" class="headerlink" title="PHP Client"></a>PHP Client</h3><p>&#x4E0B;&#x9762;&#x662F; PHP &#x5B9E;&#x73B0;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`$msg = &quot;msg&quot;;`</span><br><span class="line">// &#x521B;&#x5EFA; &#x8FDE;&#x63A5; &#x53D1;&#x9001;&#x6D88;&#x606F; &#x63A5;&#x6536;&#x54CD;&#x5E94; &#x5173;&#x95ED;&#x8FDE;&#x63A5;</span><br><span class="line">$socket = socket_create(AF_UNIX, SOCK_STREAM, 0);</span><br><span class="line">socket_connect($socket, &apos;/tmp/keyword_match.sock&apos;);</span><br><span class="line">socket_send($socket, $msg, strlen($msg), 0);</span><br><span class="line">$response = socket_read($socket, 1024);</span><br><span class="line">socket_close($socket);</span><br><span class="line"></span><br><span class="line">// &#x6709;&#x503C;&#x5219;&#x4E3A;&#x5339;&#x914D;&#x6210;&#x529F;</span><br><span class="line">if (strlen($response) &gt; 3) {</span><br><span class="line">    var_dump($response);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h1><h3 id="&#x6548;&#x7387;"><a href="#&#x6548;&#x7387;" class="headerlink" title="&#x6548;&#x7387;"></a>&#x6548;&#x7387;</h3><p>&#x8FD9;&#x91CC;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x8FD9;&#x5957;&#x8BBE;&#x8BA1;&#x7684;&#x6548;&#x7387;&#x8868;&#x73B0;&#xFF1A;</p>
<p>&#x7EAF;&#x7CB9;&#x7528; Go &#x8FDB;&#x884C;&#x6587;&#x672C;&#x5173;&#x952E;&#x8BCD;&#x5339;&#x914D;&#xFF0C;&#x4E00;&#x5343;&#x6761;&#x6570;&#x636E;&#x8FD0;&#x884C;&#x4E00;&#x79D2;&#x591A;&#xFF0C;&#x5DEE;&#x4E0D;&#x591A;&#x662F; PHP &#x6548;&#x7387;&#x7684;&#x4E24;&#x500D;&#x3002;&#x4E0D;&#x8FC7;&#x8BF4;&#x597D;&#x7684; 8&#x500D;&#x6548;&#x7387;&#x5462;&#xFF1F;&#x679C;&#x7136;&#x6D4B;&#x8BC4;&#x90FD;&#x662F;&#x9A97;&#x4EBA;&#x7684;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x6211;&#x5199;&#x6CD5;&#x6709;&#x95EE;&#x9898;&#x6216;&#x8005; Trie &#x6811;&#x4E0D;&#x5728; Go &#x7684;&#x53D1;&#x6325;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x3002;&#x7136;&#x540E;&#x662F; PHP &#x4F7F;&#x7528; Unix Domain Socket &#x8C03;&#x7528; Go &#x670D;&#x52A1;&#x7684;&#x8017;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x8FDB;&#x7A0B;&#x95F4;&#x590D;&#x5236;&#x6570;&#x636E;&#x8017;&#x65F6;&#x6216; PHP &#x62D6;&#x4E86;&#x540E;&#x817F;&#xFF0C;3&#x79D2;&#x591A;&#x4E00;&#x70B9;&#xFF0C;&#x8DDF;&#x7EAF; PHP &#x811A;&#x672C;&#x5DEE;&#x4E0D;&#x591A;&#x3002;</p>
<h3 id="&#x6742;&#x8C08;"><a href="#&#x6742;&#x8C08;" class="headerlink" title="&#x6742;&#x8C08;"></a>&#x6742;&#x8C08;</h3><p>&#x7528; PHP &#x7684;&#x90FD;&#x77E5;&#x9053;&#xFF0C;PHP &#x56E0;&#x4E3A;&#x89E3;&#x91CA;&#x578B;&#x8BED;&#x8A00;&#x7684;&#x7279;&#x6027;&#x548C;&#x5176;&#x9AD8;&#x5EA6;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x5BFC;&#x81F4;&#x5176;&#x867D;&#x7136;&#x5728;&#x5F00;&#x53D1;&#x4E0A;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#xFF0C;&#x53EF;&#x662F;&#x6267;&#x884C;&#x4E0E;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x76F8;&#x6BD4;&#x7565;&#x5DEE;&#x3002;&#x5BF9;&#x6B64;&#xFF0C;&#x4E1A;&#x754C;&#x7684; FB &#x6709; HHVM&#xFF0C;PHP7 &#x6709; opcache &#x65B0;&#x7279;&#x6027;&#xFF0C;&#x636E;&#x8BF4;&#x8FD8;&#x8981;&#x5728; PHP8 &#x6DFB;&#x52A0; JIT&#xFF0C;&#x7528;&#x4EE5;&#x5F25;&#x8865;&#x5176;&#x5148;&#x5929;&#x786C;&#x4F24;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x8DDF;&#x6211;&#x4E00;&#x6837;&#x5BF9;&#x4E8E;&#x6548;&#x7387;&#x6709;&#x6267;&#x8457;&#x8FFD;&#x6C42;&#x7684;&#x4EBA;&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x4E86;&#x89E3;&#x4F7F;&#x7528; PHP &#x7684;&#x65B0;&#x7279;&#x6027;&#x4E4B;&#x5916;&#xFF0C;&#x81EA;&#x5DF1;&#x518D;&#x638C;&#x63E1;&#x4E00;&#x95E8;&#x8F83;&#x9AD8;&#x6267;&#x884C;&#x6548;&#x7387;&#x3001;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x7565;&#x4F4E;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x7528;&#x6765;&#x5199;&#x4E00;&#x4E9B;&#x9AD8;&#x8BA1;&#x7B97;&#x91CF;&#xFF0C;&#x903B;&#x8F91;&#x5355;&#x4E00;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E0E; PHP &#x4E92;&#x8865;&#x6216;&#x8BB8;&#x4F1A;&#x66F4;&#x597D;&#x4E00;&#x70B9;&#x3002;</p>
<p>&#x4E8E;&#x662F;&#xFF0C;&#x5728;&#x8003;&#x8651;&#x826F;&#x4E45;&#xFF0C;&#x4E5F;&#x89C1;&#x8BC6;&#x4E86;&#x5404;&#x79CD; Go &#x7684;&#x652F;&#x6301;&#x8005;&#x548C;&#x53CD;&#x5BF9;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x6495;&#x903C;&#x540E;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x8FD8;&#x662F;&#x8981;&#x76F8;&#x4FE1;&#x4E00;&#x4E0B;&#x8C37;&#x6B4C;&#x7238;&#x7238;&#xFF0C;&#x6BD5;&#x7ADF;&#x4E5F;&#x6CA1;&#x4EC0;&#x4E48;&#x5176;&#x4ED6;&#x6211;&#x89C9;&#x5F97;&#x53EF;&#x9009;&#x7684;&#x8BED;&#x8A00;&#x4E86;&#x3002;PS&#xFF1A;&#x8BF7;&#x4E0D;&#x8981;&#x9488;&#x5BF9;&#x8FD9;&#x4E00;&#x6BB5;&#x53D1;&#x8868;&#x610F;&#x89C1;&#xFF0C;&#x8C22;&#x8C22;&#xFF1A;&#xFF09;</p>
<p>&#x53E6;&#x5916;C&#x5462;&#xFF0C;&#x867D;&#x7136;&#x6682;&#x65F6;&#x5F00;&#x53D1;&#x4E2D;&#x7528;&#x4E0D;&#x5230;&#xFF0C;&#x53EF;&#x662F;&#x6BD5;&#x7ADF;&#x662F;&#x5F53;&#x4EE3;N&#x591A;&#x8BED;&#x8A00;&#x7684;&#x8D77;&#x6E90;&#xFF0C;&#x5076;&#x5C14;&#x5199;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3001;&#x7B97;&#x6CD5;&#x4EC0;&#x4E48;&#x7684;&#x4EE5;&#x514D;&#x751F;&#x9508;&#x3002;&#x800C;&#x4E14;&#x5B66;&#x4E86;&#x4E9B;C&#xFF0C;&#x4ECE; PHP &#x5230; Go&#xFF0C;&#x5207;&#x6362;&#x8D77;&#x6765;&#x8FD8;&#x7565;&#x6709;&#x4E9B;&#x5F97;&#x5FC3;&#x5E94;&#x624B;&#x7684;&#x611F;&#x89C9;~</p>
<p>&#x5173;&#x4E8E;&#x672C;&#x6587;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x5728;&#x4E0B;&#x9762;&#x7559;&#x8A00;&#x4EA4;&#x6D41;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x89C9;&#x5F97;&#x672C;&#x6587;&#x5BF9;&#x60A8;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x53EF;&#x4EE5;&#x70B9;&#x51FB;&#x4E0B;&#x9762;&#x7684; <strong>&#x63A8;&#x8350;</strong> &#x652F;&#x6301;&#x4E00;&#x4E0B;&#x6211;&#x3002;&#x535A;&#x5BA2;&#x4E00;&#x76F4;&#x5728;&#x66F4;&#x65B0;&#xFF0C;&#x6B22;&#x8FCE; <strong>&#x5173;&#x6CE8;</strong> &#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/e473388aea6f063bf21ba5e42eeb8614.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513584058382.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513584058382.html" itemprop="url">一个开源的 Java 我的世界 (Minecraft) 服务</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T14:42:36+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="/external_links/386f8248e741a4c439f0ae4e517e5c23.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7009fd5f1e19cb335be7f726ce5b17960f9e04124c7b45029528d38808f97512" alt="Built with Love"></a> <a href="/external_links/253eba59384fa3fe19e429929ebe9de3.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/53f2b3481e01c7b07eaa7071e793006ad03fa3b57318b6cf3cc8b0245a42d940" alt="Join the Discord chat"></a><br><a href="/external_links/23aabcf390e0572b3e4db86730a00e26.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/29751c5455ba7ec2aa809b3830c876906ce33fa7345ed1ac051cb14fc9470ae4" alt="Build Status"></a></p>
<p><a href="/external_links/dc13f69afec3ddfa183ddbbd38ec0199.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/271f3ee3062b97fb0241d57253583defde0b447a72a380dd793819b3de2814b9" alt="Glowstone logo"></a></p>
<p>A fast, customizable and compatible open source server for Minecraft: Java Edition.</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Glowstone is a lightweight, from scratch, open source <a href="/external_links/00e650df22650fbcdfc91b0fb741e5c9.html" target="blank" rel="noopener">Minecraft</a> server written in Java that supports plugins written for the Bukkit API and its major forks, Spigot and Paper.</p>
<p>The main goals of the project are to provide a lightweight implementation of the Bukkit API and Minecraft server where exact vanilla functionality is not needed or higher performance is desired than the official software can deliver. Glowstone<br> makes use of a thread-per-world model and performs synchronization only when necessitated by the Bukkit API.</p>
<p>Still have questions? Check out our <a href="/external_links/1776b152fa072446af83a0a3e1c8f2d7.html" target="blank" rel="noopener">FAQ</a>.</p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><p>Glowstone has a few key advantages over CraftBukkit:</p>
<ul>
<li>It is <strong>100% open source</strong>. While CraftBukkit and most other mods are open source, they rely on decompiled Minecraft source code. Glowstone&#x2019;s code is completely original.</li>
<li>Because of this, it is easy to contribute to Glowstone&#x2019;s development. The barrier of entry to contributions is lower because there is no need to work around decompiled source or maintain a minimal diff.</li>
<li>Glowstone supports all plugins written for the Bukkit, Spigot and Paper APIs natively. In practice, some plugins may try to make use of parts of the API which are not yet implemented, but in a completed state Glowstone would support all Bukkit<br>plugins.</li>
<li>Glowstone&#x2019;s simplicity affords it a performance improvement over CraftBukkit and other servers, making it especially suited for situations where a large amount of players must be supported but vanilla game features are not needed.</li>
</ul>
<p>However, there are several drawbacks:</p>
<ul>
<li>Glowstone <strong>is not finished</strong>. Nothing is guaranteed to work, though many things are likely to. If in doubt, file an issue.</li>
<li>Bukkit plugins which expect the presence of CraftBukkit-specific code (that are in the <code>org.bukkit.craftbukkit</code> or <code>net.minecraft.server</code> packages) will not work on Glowstone unless they are designed to fail gracefully.</li>
<li>Glowstone is not produced by the Bukkit team, and while we do make an effort to produce quality work, Glowstone does not undergo the same rigorious testing as the Bukkit project.</li>
</ul>
<p>For a current list of features, <a href="/external_links/e944457123dfbfc2109370bac9d0f48e.html" target="blank" rel="noopener">check the wiki</a>.</p>
<h2 id="Downloads"><a href="#Downloads" class="headerlink" title="Downloads"></a>Downloads</h2><p><a href="/external_links/23aabcf390e0572b3e4db86730a00e26.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d0197832c4e1522d07ad86dd8c730102d10698076c51f8dd0b63c787221df052" alt="Build Status"></a></p>
<p>If you don&#x2019;t want to build from source, pre-built jar files are available to download from <a href="/external_links/23aabcf390e0572b3e4db86730a00e26.html" target="blank" rel="noopener"><strong>CircleCI</strong></a> - click the latest build and then open the &#x201C;Artifacts&#x201D;<br> tab <strong>(you must be logged in for this to show)</strong>. The <code>glowstone.jar</code> artifact will be under <code>tmp/circle-artifacts.#######/</code>.</p>
<h2 id="Building"><a href="#Building" class="headerlink" title="Building"></a>Building</h2><h3 id="1-Setup"><a href="#1-Setup" class="headerlink" title="1. Setup"></a>1. Setup</h3><p>After installing <a href="/external_links/163cf0953b986f55976af500587eea1e.html" target="blank" rel="noopener">Oracle JDK</a> (recommended) or <a href="/external_links/818ff2cdb47d176ca319ceea2a7a9f83.html" target="blank" rel="noopener">OpenJDK</a>, and <a href="/external_links/6b70a1e38eca7135d863dbbeb7fc1013.html" target="blank" rel="noopener">Maven</a>, checkout the source:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;git clone https://github.com/GlowstoneMC/Glowstone</span><br><span class="line">cd Glowstone</span><br></pre></td></tr></table></figure>

<h3 id="2-Build"><a href="#2-Build" class="headerlink" title="2. Build"></a>2. Build</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;./setup.sh</span><br></pre></td></tr></table></figure>

<p>The final jar will be placed in <code>target/</code> named <code>glowstone.jar</code>.</p>
<h2 id="Running"><a href="#Running" class="headerlink" title="Running"></a>Running</h2><p>Running Glowstone is simple because its dependencies are shaded into the output jar at compile time. Simply execute <code>java -jar glowstone.jar</code> along with any extra JVM options desired (we recommend using <code>java -Xms1G -Xmx1G -XX:+UseG1GC -jar glowstone.jar</code>).<br> A variety of command-line options are also available - run <code>java -jar glowstone.jar --help</code> for more information.</p>
<p>By default, configuration is stored in the <code>config/</code> subdirectory and logs are stored in the <code>logs/</code> subdirectory. The main configuration file is <code>config/glowstone.yml</code>, which replaces CraftBukkit&#x2019;s <code>server.properties</code> and <code>bukkit.yml</code>. Settings from these two files will be copied over to Glowstone&#x2019;s configuration during the default configuration generation process.</p>
<p>Glowstone uses <a href="/external_links/ceeb11fd2a8011816bc1afd8241792e4.html" target="blank" rel="noopener">JLine</a> for console input and colored console output. The JLine console can be disabled in the configuration if a flat console is desired.</p>
<p>Need more help? Check out <a href="/external_links/c1428d0df94141375ae6f2392c92157a.html" target="blank" rel="noopener">our wiki</a> for some guides that will help you with running, maintaining and configuring your Glowstone server.</p>
<h2 id="Playing"><a href="#Playing" class="headerlink" title="Playing"></a>Playing</h2><p>For those of you who just want to play on a Glowstone server, we have one available for testing at <code>mc.glowstone.net</code>. Have fun!</p>
<h2 id="Docs-and-Support"><a href="#Docs-and-Support" class="headerlink" title="Docs and Support"></a>Docs and Support</h2><p>The best place to receive support is on <a href="/external_links/08ce0382ab12ac38f1bc622de9b03cbb.html" target="blank" rel="noopener">GitHub issues</a>. When reporting bugs, please retest and include whether the problem reproduces on:</p>
<ul>
<li>Earlier <a href="/external_links/201d39cc20ed3bee5d5b33aea7756fdf.html" target="blank" rel="noopener">builds</a> of Glowstone</li>
<li><a href="/external_links/9464a353a7218227ed8529e1a4147217.html" target="blank" rel="noopener">Glowstone Legacy</a>, if applicable</li>
</ul>
<p>Javadocs for Glowstone can be found <a href="/external_links/34caf3a2f51358d4351aedcbca27da09.html" target="blank" rel="noopener">here</a>.</p>
<p>For documentation on the Glowkit API (an updated Bukkit for Glowstone, based on the Paper API, compatible with Spigot&#x2019;s update to Bukkit), see the <a href="/external_links/7fd6e3ae3c53e126666602ca933f2c91.html" target="blank" rel="noopener">Glowkit Javadocs</a>.</p>
<h2 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h2><p>First of all, thank you for your interest in advancing Glowstone! We always love to see new developers work on the project! You can find all of our resources on how to get started on our <a href="/external_links/c1428d0df94141375ae6f2392c92157a.html" target="blank" rel="noopener">wiki</a>.</p>
<h2 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h2><ul>
<li><a href="/external_links/e35692a32a635f68a392946a058d6b39.html" target="blank" rel="noopener">The Minecraft Coalition</a> and <a href="/external_links/f4965101a80e5b6e517b632d8d1aab79.html" target="blank" rel="noopener"><code>#mcdevs</code></a> - protocol and file formats research.</li>
<li><a href="/external_links/30bd8e6cdb5bb5015c36187a8b524e83.html" target="blank" rel="noopener">The Bukkit team</a> for their outstandingly well-designed plugin API.</li>
<li><a href="/external_links/c81dc5aee729e0a920ad6ed46741a61a.html" target="blank" rel="noopener">The SpigotMC team</a> for updating and enhancing the Bukkit plugin API.</li>
<li><a href="/external_links/32730324a98c1dbf07bac16fcc1c659f.html" target="blank" rel="noopener">AquiferMC</a> for further enhancing the Bukkit API.</li>
<li><a href="/external_links/c0c78cfe060f257db39816ab9c77a409.html" target="blank" rel="noopener">The SpongePowered Team</a> for creating the Sponge API.</li>
<li><a href="/external_links/7770a79f283a24bc161828803ac3db5c.html" target="blank" rel="noopener">Trustin Lee</a> - author of the <a href="/external_links/78e423c73721e0a137a7db08b8359df6.html" target="blank" rel="noopener">Netty</a> library.</li>
<li><a href="/external_links/83fbdef8bda2a868d9c4f7504c418525.html" target="blank" rel="noopener">Graham Edgecombe</a> - author of the original <a href="/external_links/edbda91e84ea0677ea3c49eca19102ba.html" target="blank" rel="noopener">Lightstone</a>.</li>
<li><a href="/external_links/d19cfe6a362155584db5b6a0f9272b01.html" target="blank" rel="noopener">Tad Hardesty</a> and <a href="/external_links/0a4a905000744f227a8aaa614a83fcac.html" target="blank" rel="noopener">all the contributors</a> to Glowstone Legacy.</li>
<li>All the people behind <a href="/external_links/8f6256833776d582c8ccdbfa4fb30f21.html" target="blank" rel="noopener">Maven</a> and <a href="/external_links/d2190730ef976fbfd5a89270a0a038e0.html" target="blank" rel="noopener">Java</a>.</li>
<li><a href="/external_links/636480b2d050dd3813213554c6a239d9.html" target="blank" rel="noopener">Notch</a> and <a href="/external_links/02f5d71363a0158af9f9dd6e46890d64.html" target="blank" rel="noopener">Mojang</a> - for making such an awesome game in the first place!</li>
</ul>
<h2 id="Copyright"><a href="#Copyright" class="headerlink" title="Copyright"></a>Copyright</h2><p>Glowstone is open-source software released under the MIT license. Please see the <code>LICENSE</code> file for details.</p>
<p>Glowkit is open-source software released under the GPL license. Please see the <code>LICENSE.txt</code> file in the Glowkit repository for details.</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/3e93e15617ce6f6139e14dab8669a107.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513680527374.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513680527374.html" itemprop="url">部门分享Django和爬虫</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T13:42:05+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="&#x4E00;&#x3001;Django&#x7B80;&#x5355;&#x63A5;&#x53E3;&#x5F00;&#x53D1;&#x5206;&#x4EAB;&#xFF1A;"><a href="#&#x4E00;&#x3001;Django&#x7B80;&#x5355;&#x63A5;&#x53E3;&#x5F00;&#x53D1;&#x5206;&#x4EAB;&#xFF1A;" class="headerlink" title="&#x4E00;&#x3001;Django&#x7B80;&#x5355;&#x63A5;&#x53E3;&#x5F00;&#x53D1;&#x5206;&#x4EAB;&#xFF1A;"></a>&#x4E00;&#x3001;Django&#x7B80;&#x5355;&#x63A5;&#x53E3;&#x5F00;&#x53D1;&#x5206;&#x4EAB;&#xFF1A;</h5><p>1&#x3001;&#x5728;&#x5F00;&#x53D1;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#xFF0C;&#x6446;&#x8131;Ubuntu&#x4E0A;&#x9762;&#x5F00;&#x53D1;&#xFF0C;&#x5728;Mac&#x7535;&#x8111;&#x4E0A;&#x9762;&#x521B;&#x5EFA;&#x865A;&#x62DF;&#x73AF;&#x5883;&#x5F00;&#x53D1;<br> 2&#x3001;django-admin startproject jiekou<br> 3&#x3001;&#x521B;&#x5EFA;&#x5E94;&#x7528;python manage.py startapp myjiekou<br> 4&#x3001;&#x6253;&#x5F00;&#x9879;&#x76EE;&#xFF0C;&#x628A;&#x5E94;&#x7528;&#x6CE8;&#x518C;&#x5728;setting.py&#x6587;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;INSTALLED_APPS = (</span><br><span class="line">    &apos;django.contrib.admin&apos;,</span><br><span class="line">    &apos;django.contrib.auth&apos;,</span><br><span class="line">    &apos;django.contrib.contenttypes&apos;,</span><br><span class="line">    &apos;django.contrib.sessions&apos;,</span><br><span class="line">    &apos;django.contrib.messages&apos;,</span><br><span class="line">    &apos;django.contrib.staticfiles&apos;,</span><br><span class="line">    &apos;myjiekou&apos;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>5&#x3001;&#x5728;models.py&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x5B9A;&#x4E49;&#x6A21;&#x578B;&#x7C7B;&#xFF0C;&#x5B9A;&#x4E49;&#x9700;&#x8981;&#x7684;&#x5B57;&#x6BB5;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;# encoding=utf-8</span><br><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line"># Create your models here.</span><br><span class="line"></span><br><span class="line">class MyModel(models.Model):</span><br><span class="line">    # &#x59D3;&#x540D;</span><br><span class="line">    name = models.CharField(max_length=20)</span><br><span class="line">    # &#x5E74;&#x9F84;</span><br><span class="line">    age = models.CharField(max_length=100)</span><br><span class="line">    # &#x7231;&#x597D;</span><br><span class="line">    hobby = models.CharField(max_length=300)</span><br></pre></td></tr></table></figure>

<p>6&#x3001;&#x751F;&#x6210;&#x8FC1;&#x79FB;&#x6587;&#x4EF6;python manage.py makemigrations<br> 7&#x3001;&#x751F;&#x6210;&#x8FC1;&#x79FB;python manage.py migrate&#xFF0C;&#x8FC1;&#x79FB;&#x5B8C;&#x6210;&#x4EE5;&#x540E;&#x4F1A;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4E00;&#x4E2A;auth&#x8868;<br> 8&#x3001;&#x8FD0;&#x884C;python <a href="/external_links/b40d3b4633597e37cda00e58cfb9542d.html" target="blank" rel="noopener">manage.py</a> runserver&#xFF0C;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;<a href="/external_links/b40d3b4633597e37cda00e58cfb9542d.html" target="blank" rel="noopener">http://127.0.0.1:8000/admin</a>&#x770B;&#x4E0B;&#x540E;&#x53F0;&#x7BA1;&#x7406;&#x754C;&#x9762;<br> 9&#x3001;&#x770B;&#x540E;&#x53F0;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x4E4B;&#x524D;&#x9700;&#x8981;&#x6CE8;&#x518C;&#x7BA1;&#x7406;&#x5458;&#x8D26;&#x53F7;python manage.py createsuperuser<br> 10&#x3001;&#x767B;&#x8FDB;&#x53BB;&#x4EE5;&#x540E;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x7684;&#x8868;&#x683C;&#x90A3;&#xFF1F;  </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e9bb2f9c5d73b9c2bedae5f70a54fdc0d8f5ef58ede73d564db78d330ab4bb7a" alt><em>admin.png</em><br> &#x539F;&#x56E0;&#x662F;&#xFF1A;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5728;admin.py&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x8FDB;&#x884C;&#x6CE8;&#x518C;&#x6211;&#x4EEC;&#x7684;&#x6A21;&#x578B;&#x7C7B;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x8FDB;&#x884C;&#x6CE8;&#x518C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;from django.contrib import admin</span><br><span class="line"></span><br><span class="line">from  myjiekou.models import MyModel</span><br><span class="line"># Register your models here.</span><br><span class="line"></span><br><span class="line">class MyAdmin(admin.ModelAdmin):</span><br><span class="line">    list_display = [&quot;name&quot;,&quot;age&quot;,&quot;hobby&quot;]</span><br><span class="line"></span><br><span class="line">admin.site.register(MyModel,MyAdmin)</span><br></pre></td></tr></table></figure>

<p>11&#x3001;&#x518D;&#x6B21;&#x6267;&#x884C;python manage.py runserver 12&#x3001;&#x8BA9;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x4E00;&#x4E0B;admin&#x7BA1;&#x7406;&#x754C;&#x9762;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x5B57;&#x6BB5;</p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8012e65c4bc7c1b805d62e91e976d7215743d14dad2fe1f60ab8ee2cbffb02e7" alt><em>admin1.png</em>   </p>
<p>13&#x3001;&#x6211;&#x4EEC;&#x518D;admin&#x7BA1;&#x7406;&#x754C;&#x9762;&#x7684;&#x6570;&#x636E;&#x600E;&#x4E48;&#x600E;&#x4E48;&#x5728;django web&#x9875;&#x9762;&#x663E;&#x793A;&#x90A3;&#x6211;&#x4EEC;&#x6765;&#x8FDB;&#x884C;&#x4E0B;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x76EE;&#x7684;&#x9700;&#x8981;&#x901A;&#x8FC7;<a href="/external_links/5c016e8f0f95f039102cbe8366c5c7f3.html" target="blank" rel="noopener">http://127.0.0.1&#xFF1A;8000/index&#x6765;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x663E;&#x793A;&#x6211;&#x4EEC;&#x8F93;&#x51FA;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5148;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x663E;&#x793A;</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;#encoding=utf-8</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line"># Create your views here.</span><br><span class="line">def index(request):</span><br><span class="line">    return HttpResponse(&quot;&#x4F60;&#x597D; &#x6211;&#x7684;&#x4F53;&#x80B2;&#x8001;&#x5E08;&quot;)</span><br></pre></td></tr></table></figure>

<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/151d9c7e3eaacbffd84722a80d76cb4a22eca8fa72d6ae6df17d5ed89df91ef4" alt> <em>admin2.png</em><br>&#x518D;&#x6B21;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x628A;SQLite&#x6570;&#x636E;&#x5C55;&#x793A;&#x5728;&#x6211;&#x4EEC;&#x9875;&#x9762;&#x4E0A;&#xFF0C;&#x9996;&#x5148;&#x5BFC;&#x5165;&#x6211;&#x4EEC;&#x7684;&#x6A21;&#x578B;&#x7C7B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;setting.py&#x914D;&#x7F6E;&#x8DEF;&#x5F84;</span><br><span class="line">TEMPLATES = [</span><br><span class="line">    {</span><br><span class="line">        &apos;BACKEND&apos;: &apos;django.template.backends.django.DjangoTemplates&apos;,</span><br><span class="line">        &apos;DIRS&apos;: [os.path.join(BASE_DIR),&apos;templates&apos;],</span><br><span class="line">        &apos;APP_DIRS&apos;: True,</span><br><span class="line">        &apos;OPTIONS&apos;: {</span><br><span class="line">            &apos;context_processors&apos;: [</span><br><span class="line">                &apos;django.template.context_processors.debug&apos;,</span><br><span class="line">                &apos;django.template.context_processors.request&apos;,</span><br><span class="line">                &apos;django.contrib.auth.context_processors.auth&apos;,</span><br><span class="line">                &apos;django.contrib.messages.context_processors.messages&apos;,</span><br><span class="line">            ],</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&#x5728;view.py&#x6587;&#x4EF6;&#x4E2D;</span><br><span class="line">#encoding=utf-8</span><br><span class="line">from django.shortcuts import render</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line">from models import MyModel</span><br><span class="line"># Create your views here.</span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    content = MyModel.objects.all()</span><br><span class="line">    list = {&quot;content&quot;:content}</span><br><span class="line">    return render(request,&quot;myjiekou/index.html&quot;,list)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;index.html&#x663E;&#x793A;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">        {% for item in content %}</span><br><span class="line"></span><br><span class="line">            &lt;li&gt;{{ item.name }}&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;{{ item.age }}&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;{{ item.hobby }}&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">        {% endfor %}</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x6211;&#x4EEC;&#x518D;&#x64CD;&#x4F5C;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x5C31;&#x597D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;MIDDLEWARE_CLASSES = [</span><br><span class="line">    &apos;django.contrib.sessions.middleware.SessionMiddleware&apos;,</span><br><span class="line">    &apos;django.contrib.auth.middleware.AuthenticationMiddleware&apos;,</span><br><span class="line">    &apos;django.contrib.messages.middleware.MessageMiddleware&apos;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>14&#x3001;&#x7BA1;&#x7406;&#x754C;&#x9762;&#x6C49;&#x8BED;&#x5316;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;LANGUAGE_CODE = &apos;en-us&apos;</span><br></pre></td></tr></table></figure>

<p>15&#x3001;&#x63A5;&#x4E0B;&#x6765;&#x8FDB;&#x884C;django&#x63A5;&#x53E3;&#x5F00;&#x53D1;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&#x9996;&#x5148;&#x5BFC;&#x5165;&#x6A21;&#x5757;</span><br><span class="line">from django.http import JsonResponse</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;url&#x914D;&#x7F6E;</span><br><span class="line">from myjiekou import views</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&apos;^admin/&apos;, include(admin.site.urls)),</span><br><span class="line">    url(r&apos;^index/&apos;, views.index),</span><br><span class="line">    url(r&apos;^api/&apos;, views.api),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;api&#x5B9E;&#x73B0;</span><br><span class="line">def api(request):</span><br><span class="line">    list = []</span><br><span class="line">    item = {}</span><br><span class="line">    content = MyModel.objects.all()</span><br><span class="line"></span><br><span class="line">    for one in content:</span><br><span class="line">        item[&quot;name&quot;] = one.name</span><br><span class="line">        item[&quot;age&quot;] = one.age</span><br><span class="line">        item[&quot;hobby&quot;] = one.hobby</span><br><span class="line">        list.append(item)</span><br><span class="line"></span><br><span class="line">    return JsonResponse({&quot;status&quot;:200,&quot;date&quot;:list})</span><br></pre></td></tr></table></figure>

<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0378d74e1de1a242baadb0c2192a10ca63250d84535b05eebfb4814cd0c39ef7" alt> <em>admin3.png</em>   </p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x8FD0;&#x884C;&#x4E00;&#x4E0B;OC&#x7A0B;&#x5E8F;&#x6765;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x770B;&#x662F;&#x5426;&#x8C03;&#x7528;&#x6210;&#x529F;</p>
<h6 id="&#x4E8C;&#x3001;&#x722C;&#x866B;&#x722C;&#x53D6;&#x67D0;&#x4E2A;&#x7F51;&#x7AD9;"><a href="#&#x4E8C;&#x3001;&#x722C;&#x866B;&#x722C;&#x53D6;&#x67D0;&#x4E2A;&#x7F51;&#x7AD9;" class="headerlink" title="&#x4E8C;&#x3001;&#x722C;&#x866B;&#x722C;&#x53D6;&#x67D0;&#x4E2A;&#x7F51;&#x7AD9;"></a>&#x4E8C;&#x3001;&#x722C;&#x866B;&#x722C;&#x53D6;&#x67D0;&#x4E2A;&#x7F51;&#x7AD9;</h6><p>&#x5148;&#x4E86;&#x89E3;&#x4E0B;&#x722C;&#x866B;&#x7684;&#x57FA;&#x7840;&#x6A21;&#x5757;<br> 1&#x3001;re&#x6A21;&#x5757;&#xFF1A;&#x4E3B;&#x8981;&#x662F;&#x4F7F;&#x7528;&#x6B63;&#x5219;&#x5339;&#x914D;&#x5BF9;&#x6293;&#x53D6;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5206;&#x6790;<br> 2&#x3001;XPath&#xFF1A;&#x67E5;&#x627E; HTML &#x8282;&#x70B9;&#x6216;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x8FC7;&#x6EE4;<br> 3&#x3001;BeautifulSoup4&#xFF1A; &#x4E5F;&#x662F;&#x4E00;&#x4E2A;HTML/XML&#x7684;&#x89E3;&#x6790;&#x5668;&#xFF0C;&#x89E3;&#x6790;&#x548C;&#x63D0;&#x53D6; HTML/XML &#x6570;&#x636E;<br> 4&#x3001;JSON&#x4E0E;JsonPATH&#xFF1A;JSON&#x6570;&#x636E;&#x89E3;&#x6790;<br> &#x4E0B;&#x9762;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x8BF4;&#x660E;&#xFF0C;&#x4E3B;&#x8981;&#x4F7F;&#x7528;&#x4E86;XPath&#x67E5;&#x627E; HTML &#x8282;&#x70B9;&#x6216;&#x5143;&#x7D20;&#x89E3;&#x6790;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;# -*- coding:utf-8 -*-</span><br><span class="line"></span><br><span class="line">import urllib2,os</span><br><span class="line">import lxml.etree</span><br><span class="line"></span><br><span class="line">class Xunmall():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.url = &quot;http://www.xunmall.com&quot;</span><br><span class="line"></span><br><span class="line">    def get_html(self,p1 = &quot;&quot;):</span><br><span class="line">        # headers = {</span><br><span class="line">        # &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.89 Mobile Safari/537.36&quot;}</span><br><span class="line">        request = urllib2.Request(self.url + p1)</span><br><span class="line">        response = urllib2.urlopen(request)</span><br><span class="line">        html = response.read()</span><br><span class="line">        return html</span><br><span class="line"></span><br><span class="line">    def get_xpath(self):</span><br><span class="line">        xmlcontent = lxml.etree.HTML(self.get_html())</span><br><span class="line">        xmllist = xmlcontent.xpath(&apos;//h2[@class=&quot;floor_name&quot;]/text()&apos;)</span><br><span class="line"></span><br><span class="line">        for item in xmllist:</span><br><span class="line">            with open(&apos;title.txt&apos;,&apos;a&apos;) as file:</span><br><span class="line">                file.write(item.encode(&apos;utf-8&apos;) + &apos;\n&apos;)</span><br><span class="line">                file.close</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    def get_image(self):</span><br><span class="line">        xmlimage = lxml.etree.HTML(self.get_html())</span><br><span class="line">        imagelist = xmlimage.xpath(&apos;//div[@class=&quot;color_top&quot;]/img/@src&apos;)</span><br><span class="line">        if os.path.isdir(&apos;./imgs&apos;):</span><br><span class="line">           pass</span><br><span class="line">        else:</span><br><span class="line">            os.mkdir(&quot;./imgs&quot;)</span><br><span class="line">        for item in imagelist:</span><br><span class="line">            print self.url + item</span><br><span class="line">            with open(&apos;imgs/&apos; + (self.url + item)[-8:],&apos;a+&apos;) as file:</span><br><span class="line">                file.write(self.get_html(item))</span><br><span class="line">                file.close</span><br><span class="line"></span><br><span class="line">    def get_theme(self):</span><br><span class="line">        xmltheme = lxml.etree.HTML(self.get_html())</span><br><span class="line">        themelist = xmltheme.xpath(&apos;//h3[@class=&quot;floor_theme&quot;]/text()&apos;)</span><br><span class="line"></span><br><span class="line">        for item in themelist:</span><br><span class="line">            with open(&apos;theme.txt&apos;,&apos;a&apos;) as file:</span><br><span class="line">                file.write(item.encode(&apos;utf-8&apos;) + &apos;\n&apos;)</span><br><span class="line">                file.close</span><br><span class="line"></span><br><span class="line">        sloganlist = xmltheme.xpath(&apos;//p[@class=&quot;slogan&quot;]/text()&apos;)</span><br><span class="line">        for item in sloganlist:</span><br><span class="line">            with open(&apos;theme.txt&apos;,&apos;a&apos;) as file:</span><br><span class="line">                file.write(item.encode(&apos;utf-8&apos;) + &apos;\n&apos;)</span><br><span class="line">                file.close</span><br><span class="line"></span><br><span class="line">        give_outlist = xmltheme.xpath(&apos;//p[@class=&quot;give_out&quot;]/text()&apos;)</span><br><span class="line">        for item in give_outlist:</span><br><span class="line">            with open(&apos;theme.txt&apos;, &apos;a&apos;) as file:</span><br><span class="line">                file.write(item.encode(&apos;utf-8&apos;) + &apos;\n&apos;)</span><br><span class="line">                file.close</span><br><span class="line"></span><br><span class="line">    def get_html1(self,p2):</span><br><span class="line">        request = urllib2.Request(p2)</span><br><span class="line">        response = urllib2.urlopen(request)</span><br><span class="line">        html = response.read()</span><br><span class="line">        return html</span><br><span class="line"></span><br><span class="line">    # &#x98DF;&#x54C1;&#x6807;&#x9898;&#x548C;&#x56FE;&#x7247;</span><br><span class="line">    def foodImageTitle(self):</span><br><span class="line">        foodImage = lxml.etree.HTML(self.get_html())</span><br><span class="line">        foodImageList = foodImage.xpath(&apos;//div[@class=&quot;pro_image&quot;]/img/@src&apos;)</span><br><span class="line"></span><br><span class="line">        if os.path.isdir(&apos;./foodimage&apos;):</span><br><span class="line">           pass</span><br><span class="line">        else:</span><br><span class="line">            os.mkdir(&quot;./foodimage&quot;)</span><br><span class="line">        for item in foodImageList:</span><br><span class="line">            print item</span><br><span class="line">            with open(&apos;foodimage/&apos; + item[-20:],&apos;a+&apos;) as file:</span><br><span class="line">                file.write(self.get_html1(item))</span><br><span class="line">                file.close</span><br><span class="line"></span><br><span class="line">    # &#x6BCF;&#x4E2A;&#x96F6;&#x98DF;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF08;&#x6807;&#x9898;&#x3001;&#x56FE;&#x7247;&#x3001;&#x526F;&#x6807;&#x9898;&#xFF09;</span><br><span class="line">    def detail(self):</span><br><span class="line">        detailLink = lxml.etree.HTML(self.get_html())</span><br><span class="line">        detailLinkList = detailLink.xpath(&apos;//div[@class=&quot;nth_floor first_floor&quot;]/div[@class=&quot;goods_box&quot;]/ul[@class=&quot;item_list&quot;]//a/@href&apos;)</span><br><span class="line">        for item in detailLinkList:</span><br><span class="line">            # print item[-18:]</span><br><span class="line">            detailUrl = lxml.etree.HTML(self.get_html(&quot;/&quot; + item[-18:]))</span><br><span class="line">            detailImageList = detailUrl.xpath(</span><br><span class="line">                &apos;//div[@class=&quot;info-panel panel1&quot;]/img/@src&apos;)</span><br><span class="line"></span><br><span class="line">            for detailitem in detailImageList:</span><br><span class="line">                print &apos;&#x6B63;&#x5728;&#x4E0B;&#x8F7D;&#x8BE6;&#x60C5;&#x56FE;&#x7247;&apos;</span><br><span class="line"></span><br><span class="line">                if os.path.isdir(&apos;./&apos; + item[-18:-5]):</span><br><span class="line">                    pass</span><br><span class="line">                else:</span><br><span class="line">                    os.mkdir(&quot;./&quot; + item[-18:-5])</span><br><span class="line"></span><br><span class="line">                with open(item[-18:-5] + &apos;/&apos; + detailitem[-9:], &apos;a+&apos;) as file:</span><br><span class="line">                    file.write(self.get_html1(detailitem))</span><br><span class="line">                    file.close</span><br><span class="line">            # &#x5546;&#x54C1;&#x6807;&#x9898;</span><br><span class="line">            detailtitleList = detailUrl.xpath(</span><br><span class="line">                &apos;//div[@class=&quot;col-lg-7 item-inner&quot;]//h1[@class=&quot;fl&quot;]/text()&apos;)</span><br><span class="line"></span><br><span class="line">            for title in detailtitleList:</span><br><span class="line">                with open(&apos;foodtitle.txt&apos;, &apos;a+&apos;) as file:</span><br><span class="line">                    file.write(title.encode(&apos;utf-8&apos;) + &apos;\n&apos;)</span><br><span class="line">                    file.close</span><br><span class="line">            # &#x5546;&#x54C1;&#x7F16;&#x53F7;</span><br><span class="line">            goodnumberList = detailUrl.xpath(</span><br><span class="line">                &apos;//div[@class=&quot;col-lg-7 item-inner&quot;]//li[@class=&quot;col-lg-5 col-md-5&quot;]/text()&apos;)</span><br><span class="line">            for number in goodnumberList:</span><br><span class="line">                print number</span><br><span class="line">                if os.path.isdir(&apos;./qrcoder&apos;):</span><br><span class="line">                    pass</span><br><span class="line">                else:</span><br><span class="line">                    os.mkdir(&quot;./qrcoder&quot;)</span><br><span class="line"></span><br><span class="line">                with open(&apos;qrcoder&apos;, &apos;a+&apos;) as file:</span><br><span class="line">                    file.write(number.encode(&apos;utf-8&apos;) + &apos;\n&apos;)</span><br><span class="line">                    file.close</span><br><span class="line"></span><br><span class="line">            # &#x5546;&#x54C1;&#x4E8C;&#x7EF4;&#x7801;:data_code</span><br><span class="line">            coderImageList = detailUrl.xpath(&apos;//div[@class=&quot;clearfixed&quot;]//div[@class=&quot;barcode fr&quot;]/img/@data_code&apos;)</span><br><span class="line"></span><br><span class="line">            for item in coderImageList:</span><br><span class="line">                print item</span><br><span class="line">                with open(&apos;goodnumber.txt&apos;, &apos;a+&apos;) as file:</span><br><span class="line">                    file.write(item + &apos;\n&apos;)</span><br><span class="line">                    file.close</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # &#x83B7;&#x53D6;&#x5206;&#x7C7B;&#x6807;&#x9898;</span><br><span class="line">    xunmall = Xunmall()</span><br><span class="line">    # xunmall.get_xpath()</span><br><span class="line">    # &#x83B7;&#x53D6;&#x56FE;&#x7247;</span><br><span class="line">    # xunmall.get_image()</span><br><span class="line">    # &#x56FE;&#x7247;&#x4E0A;&#x9762;&#x7684;&#x6807;&#x9898;</span><br><span class="line">    # xunmall.get_theme()</span><br><span class="line">    # &#x4F11;&#x95F2;&#x98DF;&#x54C1;&#x6807;&#x9898;&#x548C;&#x56FE;&#x7247;</span><br><span class="line">    # xunmall.foodImageTitle()</span><br><span class="line">    xunmall.detail()</span><br></pre></td></tr></table></figure>

<p>&#x540E;&#x7EED;&#x4F1A;&#x5206;&#x4EAB;Swift&#x54E6;&#xFF0C;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5206;&#x4EAB;&#x4E0B;&#x5B66;&#x4E60;&#x6210;&#x679C;&#xFF0C;&#x548C;&#x9879;&#x76EE;&#x7EC4;&#x4E00;&#x8D77;&#x63A2;&#x8BA8;&#x548C;&#x5B66;&#x4E60;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/1d201b65a0994ed08e876153d5214892.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513630179335.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513630179335.html" itemprop="url">分析型数据仓库中读写分离的实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:58:51+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x672C;&#x6587;&#x4F5C;&#x8005;&#x4E3A;&#x795E;&#x7B56;&#x6570;&#x636E;&#x8D44;&#x6DF1;&#x7814;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;&#x5F20;&#x5E7F;&#x5F3A;&#xFF0C;&#x7248;&#x6743;&#x5F52;&#x795E;&#x7B56;&#x6570;&#x636E;&#x6240;&#x6709;&#x3002;</strong></p>
<p> &#x548C;&#x4EE5; MySQL<br> &#x4E3A;&#x4EE3;&#x8868;&#x7684;&#x4F20;&#x7EDF;&#x4E8B;&#x52A1;&#x578B;&#x6570;&#x636E;&#x5E93;&#x76F8;&#x6BD4;&#xFF0C;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x4E3B;&#x8981;&#x9762;&#x5411;&#x6279;&#x91CF;&#x5199;&#x548C;&#x67E5;&#x8BE2;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x652F;&#x6301;&#x66F4;&#x65B0;&#x3001;&#x4E8B;&#x52A1;&#x8FD9;&#x4E9B;&#x9AD8;&#x7EA7;&#x7279;&#x6027;&#x3002;&#x4E00;&#x4E9B;&#x5546;&#x7528;&#x7684;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5206;&#x6790;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F8B;&#x5982; Vertica<br> &#xFF0C;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x5343;&#x4EBF;&#x7EA7;&#x6570;&#x636E;&#x7684;&#x79D2;&#x7EA7;&#x5BFC;&#x5165;&#x548C;&#x79D2;&#x7EA7;&#x67E5;&#x8BE2;&#x3002;</p>
<p> &#x795E;&#x7B56;&#x6570;&#x636E;&#x4E00;&#x76F4;&#x81F4;&#x529B;&#x4E8E;&#x5E2E;&#x52A9;&#x4F01;&#x4E1A;&#x642D;&#x5EFA;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x79D2;&#x7EA7;&#x54CD;&#x5E94;&#xFF0C;&#x79EF;&#x7D2F;&#x6570;&#x636E;&#x8D44;&#x4EA7;&#x3002;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x795E;&#x7B56;&#x6570;&#x636E;&#x5728;&#x6280;&#x672F;&#x4E0A;&#x7684;&#x63A2;&#x7D22;&#x4E0E;&#x5B9E;&#x8DF5;&#xFF0C;&#x63A2;&#x8BA8;&#x5982;&#x4F55;&#x5229;&#x7528;&#x73B0;&#x6709;&#x7684;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x5B9E;&#x73B0;&#x5206;&#x6790;&#x578B;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5F53;&#x4E2D;&#x7684;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x3002;</p>
<p> &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x5206;&#x79BB;</p>
<p> &#x5206;&#x6790;&#x6027;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x4E00;&#x822C;&#x6709;&#x5982;&#x4E0B;&#x51E0;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#xFF08;1<br>&#xFF09;&#x9762;&#x4E34;&#x7740;&#x590D;&#x6742;&#x7684;&#x591A;&#x7EF4;&#x5206;&#x6790;&#x9700;&#x6C42;&#xFF0C;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x4EFB;&#x610F;&#x7EF4;&#x5EA6;&#x7684;&#x4E0A;&#x5377;&#x4E0B;&#x94BB;&#x3002;</li>
<li>&#xFF08;2<br>&#xFF09;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x7EF4;&#x5EA6;&#x4E00;&#x822C;&#x8F83;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x5BBD;&#x8868;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x822C;&#x6BD4;&#x8F83;&#x7A00;&#x758F;&#x3002;</li>
<li>&#xFF08;3<br>&#xFF09;&#x6570;&#x636E;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x4E00;&#x6B21;&#x5199;&#x5165;&#xFF0C;&#x591A;&#x6B21;&#x67E5;&#x8BE2;&#x3002;</li>
</ul>
<p> &#x9488;&#x5BF9;&#x8FD9;&#x6837;&#x7279;&#x70B9;&#xFF0C;&#x5206;&#x6790;&#x6027;&#x6570;&#x636E;&#x5E93;&#x4E00;&#x822C;&#x9009;&#x62E9;&#x5217;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982; Parquet<br> &#x7B49;&#x3002;&#x4F18;&#x70B9;&#x662F;&#x5BF9;&#x4E8E;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x6548;&#x7387;&#x5F88;&#x9AD8;&#xFF0C;&#x800C;&#x4E14;&#x5BF9;&#x4E8E;&#x7A00;&#x758F;&#x7684;&#x5BBD;&#x8868;&#x5177;&#x6709;&#x5F88;&#x9AD8;&#x7684;&#x5B58;&#x50A8;&#x538B;&#x7F29;&#x6BD4;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x5217;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x9762;&#x5411;&#x8BFB;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E3A; ReadOptimized Store<br> &#xFF08;ROS<br> &#xFF09;&#x3002;</p>
<p> &#x4F46;&#x662F;&#x5217;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x7F3A;&#x70B9;&#xFF1A;&#x8FD9;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x4E00;&#x65E6;&#x751F;&#x6210;&#xFF0C;&#x5C31;&#x5F88;&#x96BE;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x4E5F;&#x5F88;&#x96BE;&#x5F80;&#x5DF2;&#x6709;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x5F53;&#x4E2D;&#x63D2;&#x5165;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x80FD;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x3002;&#x50CF; MySQL<br> &#x8FD9;&#x79CD;&#x4F20;&#x7EDF;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x884C;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x9002;&#x5408;&#x4FEE;&#x6539;&#x548C;&#x63D2;&#x5165;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x8FD9;&#x79CD;&#x884C;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x662F;&#x9762;&#x5411;&#x5199;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x79F0;&#x4E3A; WriteOptimized Store<br> &#xFF08;WOS<br> &#xFF09;&#x3002;</p>
<p> &#x7EFC;&#x4E0A;&#x6240;&#x8BC9;&#xFF0C;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x79D2;&#x7EA7;&#x5BFC;&#x5165;&#x3001;&#x79D2;&#x7EA7;&#x67E5;&#x8BE2;&#x7684;&#x5206;&#x6790;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x9009;&#x7528; ROS<br> &#xFF0C;&#x5219;&#x5F88;&#x96BE;&#x652F;&#x6301;&#x5927;&#x6570;&#x636E;&#x91CF;&#x7684;&#x79D2;&#x7EA7;&#x5BFC;&#x5165;&#x3002;&#x5982;&#x679C;&#x53EA;&#x9009;&#x7528; WOS<br> &#xFF0C;&#x5219;&#x5F88;&#x96BE;&#x5B9E;&#x73B0;&#x4EFB;&#x610F;&#x7EF4;&#x5EA6;&#x7684;&#x79D2;&#x7EA7;&#x67E5;&#x8BE2;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x3002;</p>
<p> &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;</p>
<p> &#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5F53;&#x4E2D;&#x9700;&#x8981;&#x540C;&#x65F6;&#x5B58;&#x5728; WOS<br> &#x548C; ROS<br> &#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x4E8E;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x90FD;&#x751F;&#x6210; WOS<br> &#x578B;&#x6587;&#x4EF6;&#xFF1B;&#x540C;&#x65F6;&#x6240;&#x6709;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x4E3B;&#x8981;&#x4F9D;&#x8D56;&#x4E8E; ROS<br> &#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x4E5F;&#x8981;&#x67E5;&#x8BE2;&#x5C11;&#x91CF;&#x7684; WOS<br> &#x6587;&#x4EF6;&#x3002;&#x6574;&#x4F53;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/58d713f4fb5cd9b390ff42e37e5238db587261328af4ad244253a60abb1521e8" alt> </p>
<p> &#x56FE;1<br> &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x539F;&#x7406;&#x56FE;</p>
<p> &#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;WOS<br> &#x6587;&#x4EF6;&#x9700;&#x8981;&#x5B9A;&#x671F;&#x8F6C;&#x6362;&#x4E3A; ROS<br> &#x6587;&#x4EF6;&#xFF0C;&#x540C;&#x65F6;&#x56E0;&#x4E3A; ROS<br> &#x5728;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5F53;&#x4E2D;&#x4E00;&#x822C;&#x662F;&#x5206;&#x4E3A;&#x591A;&#x4E2A; Partition<br> &#x5B58;&#x5728;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x4E2A; WOS<br> &#x53EF;&#x80FD;&#x8F6C;&#x5316;&#x4E3A;&#x591A;&#x4E2A; ROS<br> &#x3002;&#x8F6C;&#x5316;&#x7684;&#x8FC7;&#x7A0B;&#x9700;&#x8981;&#x662F;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x4E0A;&#x5C42;&#x67E5;&#x8BE2;&#x5F15;&#x64CE;&#x6765;&#x8BF4;&#xFF0C;&#x540C;&#x4E00;&#x65F6;&#x523B;&#xFF0C;&#x540C;&#x6837;&#x7684;&#x6570;&#x636E;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4EFD;&#x3002;</p>
<p> &#x5F00;&#x6E90;&#x65B9;&#x6848;&#x7684;&#x64CD;&#x4F5C;</p>
<p> &#x524D;&#x9762;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E86;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x65B9;&#x6848;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x7A0B;&#x5B9E;&#x8DF5;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x795E;&#x7B56;&#x6570;&#x636E;&#x7684;&#x5DE5;&#x7A0B;&#x5E08;&#x8FD8;&#x9762;&#x4E34;&#x7740;&#x5F88;&#x591A;&#x65B9;&#x6848;&#x7684;&#x9009;&#x62E9;&#x548C;&#x5B9E;&#x8DF5;&#x96BE;&#x70B9;&#x3002;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x795E;&#x7B56;&#x6570;&#x636E;&#x5728;&#x642D;&#x5EFA;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x5B9E;&#x8DF5;&#x4E2D;&#x5543;&#x8FC7;&#x7684;&#x201C;&#x786C;&#x9AA8;&#x5934;&#x201D;&#x3002;</p>
<p>ROS<br> &#x7684;&#x9009;&#x62E9;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x5DE5;&#x7A0B;&#x5E08;&#x9009;&#x62E9;&#x4E86; Parquet+ Impala<br> &#x7684;&#x67E5;&#x8BE2;&#x65B9;&#x6848;&#xFF0C;&#x540C;&#x65F6;&#x7ED3;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#x505A;&#x4E86;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x7EA7;&#x522B;&#x7684;&#x4F18;&#x5316;&#x3002;&#xFF08;&#x76F8;&#x5173;&#x94FE;&#x63A5;&#xFF1A;<br> <a href="#wechat_redirect">&#x4ED8;&#x529B;&#x529B;:<br> &#x57FA;&#x4E8E;<br> Impala<br> &#x6784;&#x5EFA;&#x5B9E;&#x65F6;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x5206;&#x6790;&#x5F15;&#x64CE;</a><br> &#xFF09;WOS<br> &#x7684;&#x9009;&#x62E9;&#x53EF;&#x80FD;&#x4F1A;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5E38;&#x7528;&#x7684; HDFS<br> &#x884C;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982; TextFile<br> &#x3001;SequenceFile<br> &#x3001;Avro<br> &#x7B49;&#x3002;</p>
<p> &#x4EE5; SequenceFile<br> &#x4E3A;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684; Impala<br> &#x8868;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684; Partition<br> &#x6587;&#x4EF6;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x4E3A; SequenceFile<br> &#xFF0C;&#x540C;&#x65F6;&#x5176;&#x5B83;&#x7684; Partition<br> &#x4F5C;&#x4E3A;&#x6B63;&#x5E38;&#x7684;&#x6309;&#x7167;&#x65E5;&#x671F; Partition<br> &#x7684;&#x6570;&#x636E;&#xFF0C;&#x6307;&#x5B9A;&#x683C;&#x5F0F;&#x4E3A; Parquet<br> &#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x4F18;&#x52BF;&#x4F53;&#x73B0;&#x5728;&#x59CB;&#x7EC8;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x8868;&#x3002;</p>
<p> &#x540E;&#x6765;&#x57FA;&#x4E8E;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x548C;&#x672A;&#x6765;&#x67B6;&#x6784;&#x5347;&#x7EA7;&#x65B9;&#x9762;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x6211;&#x4EEC;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x4E86; Kudu<br> &#x4F5C;&#x4E3A; WOS<br> &#xFF0C;&#x67B6;&#x6784;&#x5B9E;&#x73B0;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/46a7c52245f24ab99ff402f545f665bfb85a305e1e6e0ce14e73ff78a8379db5" alt> </p>
<p> &#x56FE;2<br> &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x5B9E;&#x73B0;&#x56FE;</p>
<p> &#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E09;&#x5F20;&#x7269;&#x7406;&#x8868;&#xFF0C;&#x5176;&#x4E2D;&#x4E24;&#x5F20; Kudu<br> &#x8868;&#x4F5C;&#x4E3A; WOS<br> &#xFF0C;&#x4E00;&#x5F20; Parquet<br> &#x8868;&#x4F5C;&#x4E3A; ROS<br> &#x3002;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x4F1A;&#x5199;&#x5165;&#x5230; Ingesting<br> &#x72B6;&#x6001;&#x7684; Kudu<br> &#x8868;&#x4E2D;&#xFF0C;&#x5F53; Ingesting<br> &#x8868;&#x5199;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x8F6C;&#x6362;&#x4E3A; Staging<br> &#x72B6;&#x6001;&#x3002;</p>
<p> &#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x4E00;&#x65B9;&#x9762;&#x751F;&#x6210;&#x4E00;&#x5F20;&#x65B0;&#x7684; Kudu<br> &#x8868;&#x4F5C;&#x4E3A; Ingesting<br> &#x8868;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x5F00;&#x59CB; WOS<br> &#x5230; ROS<br> &#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x53EB;&#x505A; Mover<br> &#x7684;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;&#x5C06; Staging<br> &#x72B6;&#x6001;&#x7684; Kudu<br> &#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5168;&#x90E8;&#x8F6C;&#x6362;&#x5230;&#x5BF9;&#x5E94; Partition<br> &#x7684; Parquet<br> &#x8868;&#x5F53;&#x4E2D;&#x3002;</p>
<p>Staging<br> &#x72B6;&#x6001;&#x7684;&#x8868;&#x8F6C;&#x6362;&#x5B8C;&#x6210;&#x4E14; Ingesting<br> &#x72B6;&#x6001;&#x7684;&#x8868;&#x5199;&#x6EE1;&#x65F6;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;&#x5207;&#x8868;&#x64CD;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x544A;&#x8BC9; Impala<br> &#x4F7F;&#x7528;&#x65B0;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x6574;&#x4E2A;&#x5207;&#x8868;&#x7684;&#x64CD;&#x4F5C;&#x662F;&#x539F;&#x5B50;&#x7684;&#x3002;&#x800C;&#x4E14;&#x5DF2;&#x7ECF;&#x8F6C;&#x5316;&#x7684; Staging<br> &#x8868;&#x8FD8;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x907F;&#x514D;&#x5207;&#x8868;&#x4E4B;&#x524D;&#x53D1;&#x8D77;&#x7684;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x6CA1;&#x6709;&#x53CA;&#x65F6;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x3002;</p>
<p> &#x5BF9;&#x4E8E;&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x6765;&#x8BF4;&#x6211;&#x4EEC;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x5305;&#x542B; Staging<br> &#x8868;&#x3001;Ingesting<br> &#x8868;&#x548C; ROS<br> &#x8868;&#x7684;&#x865A;&#x62DF;&#x8868;&#xFF0C;&#x5373;&#x4E00;&#x4E2A; View<br> &#x3002;&#x7528;&#x6237;&#x7684;&#x67E5;&#x8BE2;&#x59CB;&#x7EC8;&#x6307;&#x5411;&#x4E00;&#x4E2A; View<br> &#xFF0C;&#x4F46;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x7269;&#x7406;&#x8868;&#x4F1A;&#x7ECF;&#x5E38;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x517C;&#x987E;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x65AD;&#x66F4;&#x65B0;&#x53CA;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x7684;&#x4F18;&#x5316;&#x4E24;&#x65B9;&#x9762;&#x4E86;&#x3002;</p>
<p> &#x5728;&#x5B9E;&#x73B0;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x5982;&#x4F55;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x52A0;&#x5217;&#x64CD;&#x4F5C;&#xFF0C;&#x4FDD;&#x8BC1;&#x5404;&#x4E2A;&#x8868;&#x7684;&#x7ED3;&#x6784;&#x4E00;&#x81F4;&#xFF1B;Parquet<br> &#x8868;&#x4E2D;&#x788E;&#x6587;&#x4EF6;&#x8F83;&#x591A;&#x5F71;&#x54CD;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#xFF0C;&#x5982;&#x4F55;&#x5B9A;&#x671F;&#x5408;&#x5E76;&#x7B49;&#x3002;&#x9650;&#x4E8E;&#x7BC7;&#x5E45;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x5177;&#x4F53;&#x4ECB;&#x7ECD;&#x3002;&#x795E;&#x7B56;&#x6570;&#x636E;&#x6700;&#x7EC8;&#x7684;&#x6280;&#x672F;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d9914011079b9a844a1db2d12374b984023b13132356f2190629dd5bbefc97d3" alt> </p>
<p> &#x56FE;3<br> &#x795E;&#x7B56;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x56FE;</p>
<p> &#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x795E;&#x7B56;&#x6570;&#x636E;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x9A71;&#x52A8;&#xFF0C;&#x5728;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x8BFB;&#x5199;&#x6548;&#x7387;&#x65B9;&#x9762;&#x505A;&#x4E86;&#x6BD4;&#x8F83;&#x6DF1;&#x5165;&#x7684;&#x63A2;&#x7D22;&#xFF0C;&#x4E5F;&#x53C2;&#x8003;&#x4E86;&#x4F17;&#x591A;&#x4F18;&#x79C0;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x505A;&#x4E86;&#x9002;&#x914D;&#x4EA7;&#x54C1;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x7D2F;&#x8BA1;&#x5341;&#x4E07;&#x884C;&#x4EE3;&#x7801;&#x4EE5;&#x4E0A;&#xFF0C;&#x5927;&#x6570;&#x636E;&#x884C;&#x4E1A;&#x6280;&#x672F;&#x624D;&#x662F;&#x4F01;&#x4E1A;&#x7684;&#x6838;&#x5FC3;&#x7ADE;&#x4E89;&#x529B;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x5728;&#x6280;&#x672F;&#x548C;&#x4E1A;&#x52A1;&#x5C42;&#x9762;&#x8FDB;&#x884C;&#x5F00;&#x653E;&#x6027;&#x7684;&#x63A2;&#x8BA8;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x5BF9;&#x66F4;&#x591A;&#x5927;&#x6570;&#x636E;&#x5E72;&#x8D27;&#x6709;&#x5174;&#x8DA3;&#xFF0C;&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#x795E;&#x7B56;&#x6570;&#x636E;&#xFF08;ID&#xFF1A;SensorsDataCrop&#xFF09;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/fab86bd7b4a61f1c35d5ea24749a1a0e35e5037b52782799c80b90cd9164d876" alt="&#x795E;&#x7B56;.jpg">  </p>
<blockquote>
<p>&#x539F;    &#x6587;&#xFF1A;&#x795E;&#x7B56;&#x6570;&#x636E;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a56609a7a8194e7e906a84d78774609d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513621807118.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513621807118.html" itemprop="url">【译】Java中9个处理Exception的最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:53:16+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;Java&#x4E2D;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x4E0D;&#x4EC5;&#x4EC5;&#x521D;&#x5B66;&#x8005;&#x5F88;&#x96BE;&#x7406;&#x89E3;&#xFF0C;&#x5373;&#x4F7F;&#x4E00;&#x4E9B;&#x6709;&#x7ECF;&#x9A8C;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x4E5F;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x5F88;&#x591A;&#x65F6;&#x95F4;&#x6765;&#x601D;&#x8003;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5F02;&#x5E38;&#xFF0C;&#x5305;&#x62EC;&#x9700;&#x8981;&#x5904;&#x7406;&#x54EA;&#x4E9B;&#x5F02;&#x5E38;&#xFF0C;&#x600E;&#x6837;&#x5904;&#x7406;&#x7B49;&#x7B49;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x5F00;&#x53D1;&#x56E2;&#x961F;&#x90FD;&#x4F1A;&#x5236;&#x5B9A;&#x4E00;&#x4E9B;&#x89C4;&#x5219;&#x6765;&#x89C4;&#x8303;&#x5BF9;&#x5F02;&#x5E38;&#x7684;&#x5904;&#x7406;&#x7684;&#x539F;&#x56E0;&#x3002;&#x800C;&#x56E2;&#x961F;&#x4E4B;&#x95F4;&#x7684;&#x8FD9;&#x4E9B;&#x89C4;&#x8303;&#x5F80;&#x5F80;&#x662F;&#x622A;&#x7136;&#x4E0D;&#x540C;&#x7684;&#x3002;</p>
<p>&#x672C;&#x6587;&#x7ED9;&#x51FA;&#x51E0;&#x4E2A;&#x88AB;&#x5F88;&#x591A;&#x56E2;&#x961F;&#x4F7F;&#x7528;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
<ol>
<li>&#x5728;Finally&#x5757;&#x4E2D;&#x6E05;&#x7406;&#x8D44;&#x6E90;&#x6216;&#x8005;&#x4F7F;&#x7528;try-with-resource&#x8BED;&#x53E5;</li>
</ol>
<hr>
<p>&#x5F53;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C;InputStream&#x8FD9;&#x79CD;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x540E;&#x5173;&#x95ED;&#x7684;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x9519;&#x8BEF;&#x5C31;&#x662F;&#x5728;try&#x5757;&#x7684;&#x6700;&#x540E;&#x5173;&#x95ED;&#x8D44;&#x6E90;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void doNotCloseResourceInTry() {</span><br><span class="line">    FileInputStream inputStream = null;</span><br><span class="line">    try {</span><br><span class="line">        File file = new File(&quot;./tmp.txt&quot;);</span><br><span class="line">        inputStream = new FileInputStream(file);</span><br><span class="line">        // use the inputStream to read a file</span><br><span class="line">        // do NOT do this</span><br><span class="line">        inputStream.close();</span><br><span class="line">    } catch (FileNotFoundException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } catch (IOException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;exception&#x7684;&#x65F6;&#x5019;&#x8FD0;&#x884C;&#x662F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5F53;try&#x5757;&#x4E2D;&#x7684;&#x8BED;&#x53E5;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;&#x4EE3;&#x7801;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x6700;&#x540E;&#x7684;&#x5173;&#x95ED;&#x8BED;&#x53E5;&#xFF0C;&#x4ECE;&#x800C;&#x8D44;&#x6E90;&#x4E5F;&#x65E0;&#x6CD5;&#x91CA;&#x653E;&#x3002;</p>
<p>&#x5408;&#x7406;&#x7684;&#x505A;&#x6CD5;&#x5219;&#x662F;&#x5C06;&#x6240;&#x6709;&#x6E05;&#x7406;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x653E;&#x5230;finally&#x5757;&#x4E2D;&#x6216;&#x8005;&#x4F7F;&#x7528;try-with-resource&#x8BED;&#x53E5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void closeResourceInFinally() {</span><br><span class="line">    FileInputStream inputStream = null;</span><br><span class="line">    try {</span><br><span class="line">        File file = new File(&quot;./tmp.txt&quot;);</span><br><span class="line">        inputStream = new FileInputStream(file);</span><br><span class="line">        // use the inputStream to read a file</span><br><span class="line">    } catch (FileNotFoundException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } finally {</span><br><span class="line">        if (inputStream != null) {</span><br><span class="line">            try {</span><br><span class="line">                inputStream.close();</span><br><span class="line">            } catch (IOException e) {</span><br><span class="line">                log.error(e);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public void automaticallyCloseResource() {</span><br><span class="line">    File file = new File(&quot;./tmp.txt&quot;);</span><br><span class="line">    try (FileInputStream inputStream = new FileInputStream(file);) {</span><br><span class="line">        // use the inputStream to read a file</span><br><span class="line">    } catch (FileNotFoundException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } catch (IOException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528;&#x6700;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;&#x6765;&#x58F0;&#x660E;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x4F7F;&#x5F97;&#x4EE3;&#x7801;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void doNotDoThis() throws Exception {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">public void doThis() throws NumberFormatException {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x5982;&#x4E0A;&#xFF0C;NumberFormatException&#x5B57;&#x9762;&#x4E0A;&#x5373;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x662F;&#x6570;&#x5B57;&#x683C;&#x5F0F;&#x5316;&#x9519;&#x8BEF;&#x3002;</p>
<ol start="3">
<li>&#x5BF9;&#x5F02;&#x5E38;&#x8FDB;&#x884C;&#x6587;&#x6863;&#x8BF4;&#x660E;</li>
</ol>
<hr>
<p>&#x5F53;&#x5728;&#x65B9;&#x6CD5;&#x4E0A;&#x58F0;&#x660E;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6587;&#x6863;&#x8BF4;&#x660E;&#x3002;&#x548C;&#x524D;&#x9762;&#x7684;&#x4E00;&#x70B9;&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x7ED9;&#x8C03;&#x7528;&#x8005;&#x63D0;&#x4F9B;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x907F;&#x514D;/&#x5904;&#x7406;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x5728;Javadoc&#x4E2D;&#x52A0;&#x5165;throws&#x58F0;&#x660E;&#xFF0C;&#x5E76;&#x4E14;&#x63CF;&#x8FF0;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * This method does something extremely useful ...</span><br><span class="line"> *</span><br><span class="line"> * @param input</span><br><span class="line"> * @throws MyBusinessException if ... happens</span><br><span class="line"> */</span><br><span class="line">public void doSomething(String input) throws MyBusinessException {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="4">
<li>&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x65F6;&#x5019;&#x5305;&#x542B;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;</li>
</ol>
<hr>
<p>&#x5728;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x7CBE;&#x786E;&#x5730;&#x63CF;&#x8FF0;&#x95EE;&#x9898;&#x548C;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x6837;&#x65E0;&#x8BBA;&#x662F;&#x6253;&#x5370;&#x5230;&#x65E5;&#x5FD7;&#x4E2D;&#x8FD8;&#x662F;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x4E2D;&#xFF0C;&#x90FD;&#x80FD;&#x591F;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x4EBA;&#x9605;&#x8BFB;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x5B9A;&#x4F4D;&#x5177;&#x4F53;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3001;&#x9519;&#x8BEF;&#x7684;&#x4E25;&#x91CD;&#x7A0B;&#x5EA6;&#x7B49;&#x3002;</p>
<p>&#x4F46;&#x8FD9;&#x91CC;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x8981;&#x5BF9;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x957F;&#x7BC7;&#x5927;&#x8BBA;&#xFF0C;&#x56E0;&#x4E3A;&#x672C;&#x6765;Exception&#x7684;&#x7C7B;&#x540D;&#x5C31;&#x80FD;&#x591F;&#x53CD;&#x6620;&#x9519;&#x8BEF;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x9700;&#x8981;&#x7528;&#x4E00;&#x5230;&#x4E24;&#x53E5;&#x8BDD;&#x63CF;&#x8FF0;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;try {</span><br><span class="line">    new Long(&quot;xyz&quot;);</span><br><span class="line">} catch (NumberFormatException e) {</span><br><span class="line">    log.error(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>NumberFormatException&#x5373;&#x544A;&#x8BC9;&#x4E86;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x662F;&#x683C;&#x5F0F;&#x5316;&#x9519;&#x8BEF;&#xFF0C;&#x5F02;&#x5E38;&#x7684;&#x989D;&#x5916;&#x4FE1;&#x606F;&#x53EA;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5B57;&#x7B26;&#x4E32;&#x5373;&#x53EF;&#x3002;&#x5F53;&#x5F02;&#x5E38;&#x7684;&#x540D;&#x79F0;&#x4E0D;&#x591F;&#x660E;&#x663E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x5C3D;&#x53EF;&#x80FD;&#x5177;&#x4F53;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;</p>
<ol start="5">
<li>&#x9996;&#x5148;&#x6355;&#x83B7;&#x6700;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x73B0;&#x5728;&#x5F88;&#x591A;IDE&#x90FD;&#x80FD;&#x667A;&#x80FD;&#x63D0;&#x793A;&#x8FD9;&#x4E2A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x5F53;&#x4F60;&#x8BD5;&#x56FE;&#x9996;&#x5148;&#x6355;&#x83B7;&#x6700;&#x7B3C;&#x7EDF;&#x7684;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4F1A;&#x63D0;&#x793A;<em>&#x4E0D;&#x80FD;&#x8FBE;&#x5230;&#x7684;&#x4EE3;&#x7801;</em>&#x3002;</p>
<p>&#x5F53;&#x6709;&#x591A;&#x4E2A;catch&#x5757;&#x4E2D;&#xFF0C;&#x6309;&#x7167;&#x6355;&#x83B7;&#x987A;&#x5E8F;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x5230;&#x7684;catch&#x5757;&#x624D;&#x80FD;&#x6267;&#x884C;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x5148;&#x6355;&#x83B7;IllegalArgumentException&#xFF0C;&#x90A3;&#x4E48;&#x5219;&#x65E0;&#x6CD5;&#x8FD0;&#x884C;&#x5230;&#x5BF9;NumberFormatException&#x7684;&#x6355;&#x83B7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void catchMostSpecificExceptionFirst() {</span><br><span class="line">    try {</span><br><span class="line">        doSomething(&quot;A message&quot;);</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } catch (IllegalArgumentException e) {</span><br><span class="line">        log.error(e)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="6">
<li>&#x4E0D;&#x8981;&#x6355;&#x83B7;Throwable</li>
</ol>
<hr>
<p>Throwable&#x662F;&#x6240;&#x6709;&#x5F02;&#x5E38;&#x548C;&#x9519;&#x8BEF;&#x7684;&#x7236;&#x7C7B;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5728;catch&#x8BED;&#x53E5;&#x4E2D;&#x6355;&#x83B7;&#xFF0C;&#x4F46;&#x662F;&#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#x3002;</p>
<p>&#x5982;&#x679C;catch&#x4E86;throwable&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x4EC5;&#x4EC5;&#x4F1A;&#x6355;&#x83B7;&#x6240;&#x6709;exception&#xFF0C;&#x8FD8;&#x4F1A;&#x6355;&#x83B7;error&#x3002;&#x800C;error&#x662F;&#x8868;&#x660E;&#x65E0;&#x6CD5;&#x6062;&#x590D;&#x7684;jvm&#x9519;&#x8BEF;&#x3002;&#x56E0;&#x6B64;&#x9664;&#x975E;&#x7EDD;&#x5BF9;&#x80AF;&#x5B9A;&#x80FD;&#x591F;&#x5904;&#x7406;&#x6216;&#x8005;&#x88AB;&#x8981;&#x6C42;&#x5904;&#x7406;error&#xFF0C;&#x4E0D;&#x8981;&#x6355;&#x83B7;throwable&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void doNotCatchThrowable() {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (Throwable t) {</span><br><span class="line">        // don&apos;t do this!</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="7">
<li>&#x4E0D;&#x8981;&#x5FFD;&#x7565;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5F88;&#x6709;&#x81EA;&#x4FE1;&#x4E0D;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x56E0;&#x6B64;&#x5199;&#x4E86;&#x4E00;&#x4E2A;catch&#x5757;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#x6216;&#x8005;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void doNotIgnoreExceptions() {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        // this will never happen</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x4F46;&#x73B0;&#x5B9E;&#x662F;&#x7ECF;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x65E0;&#x6CD5;&#x9884;&#x6599;&#x7684;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x8FD9;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x672A;&#x6765;&#x662F;&#x4E0D;&#x662F;&#x4F1A;&#x6539;&#x52A8;(&#x5220;&#x9664;&#x4E86;&#x963B;&#x6B62;&#x5F02;&#x5E38;&#x629B;&#x51FA;&#x7684;&#x4EE3;&#x7801;)&#xFF0C;&#x800C;&#x6B64;&#x65F6;&#x7531;&#x4E8E;&#x5F02;&#x5E38;&#x88AB;&#x6355;&#x83B7;&#xFF0C;&#x4F7F;&#x5F97;&#x65E0;&#x6CD5;&#x62FF;&#x5230;&#x8DB3;&#x591F;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x6765;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5408;&#x7406;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x81F3;&#x5C11;&#x8981;&#x8BB0;&#x5F55;&#x5F02;&#x5E38;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void logAnException() {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        log.error(&quot;This should never happen: &quot; + e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="8">
<li>&#x4E0D;&#x8981;&#x8BB0;&#x5F55;&#x5E76;&#x629B;&#x51FA;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x751A;&#x81F3;&#x7C7B;&#x5E93;&#x4E2D;&#x90FD;&#x4F1A;&#x6709;&#x6355;&#x83B7;&#x5F02;&#x5E38;&#x3001;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x5E76;&#x518D;&#x6B21;&#x629B;&#x51FA;&#x7684;&#x903B;&#x8F91;&#x3002;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;try {</span><br><span class="line">    new Long(&quot;xyz&quot;);</span><br><span class="line">} catch (NumberFormatException e) {</span><br><span class="line">    log.error(e);</span><br><span class="line">    throw e;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x8FD9;&#x4E2A;&#x5904;&#x7406;&#x903B;&#x8F91;&#x770B;&#x7740;&#x662F;&#x5408;&#x7406;&#x7684;&#x3002;&#x4F46;&#x8FD9;&#x7ECF;&#x5E38;&#x4F1A;&#x7ED9;&#x540C;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x8F93;&#x51FA;&#x591A;&#x6761;&#x65E5;&#x5FD7;&#x3002;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;17:44:28,945 ERROR TestExceptionHandling:65 - java.lang.NumberFormatException: For input string: &quot;xyz&quot;</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;xyz&quot;</span><br><span class="line">at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)</span><br><span class="line">at java.lang.Long.parseLong(Long.java:589)</span><br><span class="line">at java.lang.Long.(Long.java:965)</span><br><span class="line">at com.stackify.example.TestExceptionHandling.logAndThrowException(TestExceptionHandling.java:63)</span><br><span class="line">at com.stackify.example.TestExceptionHandling.main(TestExceptionHandling.java:58)</span><br></pre></td></tr></table></figure>


<p>&#x5982;&#x4E0A;&#x6240;&#x793A;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x65E5;&#x5FD7;&#x4E5F;&#x6CA1;&#x6709;&#x9644;&#x52A0;&#x66F4;&#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5982;&#x679C;&#x60F3;&#x8981;&#x63D0;&#x4F9B;&#x66F4;&#x52A0;&#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5C06;&#x5F02;&#x5E38;&#x5305;&#x88C5;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x5F02;&#x5E38;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void wrapException(String input) throws MyBusinessException {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        throw new MyBusinessException(&quot;A message that describes the error.&quot;, e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x56E0;&#x6B64;&#xFF0C;&#x4EC5;&#x4EC5;&#x5F53;&#x60F3;&#x8981;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x65F6;&#x624D;&#x53BB;&#x6355;&#x83B7;&#xFF0C;&#x5426;&#x5219;&#x53EA;&#x9700;&#x8981;&#x5728;&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#x4E2D;&#x58F0;&#x660E;&#x8BA9;&#x8C03;&#x7528;&#x8005;&#x53BB;&#x5904;&#x7406;&#x3002;</p>
<ol start="9">
<li>&#x5305;&#x88C5;&#x5F02;&#x5E38;&#x65F6;&#x4E0D;&#x8981;&#x629B;&#x5F03;&#x539F;&#x59CB;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x6355;&#x83B7;&#x6807;&#x51C6;&#x5F02;&#x5E38;&#x5E76;&#x5305;&#x88C5;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x5F02;&#x5E38;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x66F4;&#x4E3A;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x5E76;&#x80FD;&#x591F;&#x505A;&#x9488;&#x5BF9;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5305;&#x88C5;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x628A;&#x539F;&#x59CB;&#x7684;&#x5F02;&#x5E38;&#x8BBE;&#x7F6E;&#x4E3A;cause(Exception&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4F20;&#x5165;cause)&#x3002;&#x5426;&#x5219;&#xFF0C;&#x4E22;&#x5931;&#x4E86;&#x539F;&#x59CB;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x4F1A;&#x8BA9;&#x9519;&#x8BEF;&#x7684;&#x5206;&#x6790;&#x53D8;&#x5F97;&#x56F0;&#x96BE;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void wrapException(String input) throws MyBusinessException {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        throw new MyBusinessException(&quot;A message that describes the error.&quot;, e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x7EFC;&#x4E0A;&#x53EF;&#x77E5;&#xFF0C;&#x5F53;&#x629B;&#x51FA;&#x6216;&#x8005;&#x6355;&#x83B7;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x4E1C;&#x897F;&#x9700;&#x8981;&#x8003;&#x8651;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x70B9;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x9605;&#x8BFB;&#x6027;&#x6216;&#x8005;api&#x7684;&#x53EF;&#x7528;&#x6027;&#x3002;</p>
<p>&#x5F02;&#x5E38;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x63A7;&#x5236;&#x673A;&#x5236;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x6C9F;&#x901A;&#x5A92;&#x4ECB;&#xFF0C;&#x56E0;&#x6B64;&#x4E0E;&#x4F60;&#x7684;&#x534F;&#x4F5C;&#x8005;&#x8BA8;&#x8BBA;&#x8FD9;&#x4E9B;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x5E76;&#x5236;&#x5B9A;&#x4E00;&#x4E9B;&#x89C4;&#x8303;&#x80FD;&#x591F;&#x8BA9;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x7406;&#x89E3;&#x76F8;&#x5173;&#x7684;&#x901A;&#x7528;&#x6982;&#x5FF5;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x6309;&#x7167;&#x540C;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x3002;</p>
<p>&#x539F;&#x6587;&#x94FE;&#x63A5;: <a href="/external_links/b0afa6aedd3f1afb8855bcc599448307.html" target="blank" rel="noopener">dzone.com/articles/9-&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/cd50875403602f0632400223de428819.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513600983054.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513600983054.html" itemprop="url">Spring Boot与RabbitMQ结合实现延迟队列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:23:06+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><h3 id="&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;"><a href="#&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;" class="headerlink" title="&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;"></a>&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;</h3><p>&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x5C31;&#x662F;&#x8FDB;&#x5165;&#x8BE5;&#x961F;&#x5217;&#x7684;&#x6D88;&#x606F;&#x4F1A;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x961F;&#x5217;&#x3002;&#x800C;&#x4E00;&#x822C;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x6D88;&#x606F;&#x4E00;&#x65E6;&#x5165;&#x961F;&#x4E86;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x88AB;&#x6D88;&#x8D39;&#x8005;&#x9A6C;&#x4E0A;&#x6D88;&#x8D39;&#x3002;</p>
<h3 id="&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;"></a>&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;</h3><p>&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x591A;&#x7528;&#x4E8E;&#x9700;&#x8981;&#x5EF6;&#x8FDF;&#x5DE5;&#x4F5C;&#x7684;&#x573A;&#x666F;&#x3002;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x662F;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x573A;&#x666F;&#xFF1A;</p>
<ol>
<li>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x3002;&#x6BD4;&#x5982;&#xFF1A;<ul>
<li>&#x7528;&#x6237;&#x751F;&#x6210;&#x8BA2;&#x5355;&#x4E4B;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x6821;&#x9A8C;&#x8BA2;&#x5355;&#x7684;&#x652F;&#x4ED8;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x8BA2;&#x5355;&#x4ECD;&#x672A;&#x652F;&#x4ED8;&#x5219;&#x9700;&#x8981;&#x53CA;&#x65F6;&#x5730;&#x5173;&#x95ED;&#x8BA2;&#x5355;&#x3002;</li>
<li>&#x7528;&#x6237;&#x6CE8;&#x518C;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x6BD4;&#x5982;&#x4E00;&#x5468;&#x540E;&#x6821;&#x9A8C;&#x7528;&#x6237;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x7528;&#x6237;&#x6D3B;&#x8DC3;&#x5EA6;&#x8F83;&#x4F4E;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x6216;&#x8005;&#x77ED;&#x4FE1;&#x6765;&#x63D0;&#x9192;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x3002;</li>
</ul>
</li>
<li>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x3002;&#x6BD4;&#x5982;&#x6D88;&#x8D39;&#x8005;&#x4ECE;&#x961F;&#x5217;&#x91CC;&#x6D88;&#x8D39;&#x6D88;&#x606F;&#x65F6;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x60F3;&#x8981;&#x5EF6;&#x8FDF;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x8BD5;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8F6E;&#x8BE2;&#x626B;&#x63CF;&#x7A0B;&#x5E8F;&#x53BB;&#x5B8C;&#x6210;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x65E2;&#x4E0D;&#x4F18;&#x96C5;&#xFF0C;&#x4E5F;&#x4E0D;&#x65B9;&#x4FBF;&#x505A;&#x6210;&#x7EDF;&#x4E00;&#x7684;&#x670D;&#x52A1;&#x4FBF;&#x4E8E;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4F7F;&#x7528;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x800C;&#x6613;&#x4E3E;&#x5730;&#x5B8C;&#x6210;&#x3002;</p>
<h3 id="&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;</h3><p>&#x522B;&#x6025;&#xFF0C;&#x5728;&#x4E0B;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5229;&#x7528;<strong>Spring Boot</strong>&#x52A0;<strong>RabbitMQ</strong>&#x6765;&#x5B9E;&#x73B0;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;</p>
<p>&#x672C;&#x6587;&#x51FA;&#x73B0;&#x7684;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x90FD;&#x5DF2;push&#x5230;Github&#x4ED3;&#x5E93;&#x4E2D;&#xFF1A;<a href="/external_links/81e05fe58f8aa432fd1916bcd1af3e9f.html" target="blank" rel="noopener">github.com/Lovelcp/blo&#x2026;</a></p>
<h2 id="&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"><a href="#&#x5B9E;&#x73B0;&#x601D;&#x8DEF;" class="headerlink" title="&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"></a>&#x5B9E;&#x73B0;&#x601D;&#x8DEF;</h2><p>&#x5728;&#x4ECB;&#x7ECD;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;RabbitMQ&#x7684;&#x4E24;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;Time-To-Live Extensions&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;Dead Letter Exchanges&#x3002;</p>
<h3 id="Time-To-Live-Extensions"><a href="#Time-To-Live-Extensions" class="headerlink" title="Time-To-Live Extensions"></a>Time-To-Live Extensions</h3><p>RabbitMQ&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x4E3A;&#x6D88;&#x606F;&#x6216;&#x8005;&#x961F;&#x5217;&#x8BBE;&#x7F6E;TTL&#xFF08;time to live&#xFF09;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;TTL&#x8868;&#x660E;&#x4E86;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x53EF;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x5B58;&#x6D3B;&#x7684;&#x6700;&#x5927;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x6BEB;&#x79D2;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;&#x67D0;&#x6761;&#x6D88;&#x606F;&#x88AB;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x6216;&#x8005;&#x5F53;&#x67D0;&#x6761;&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x4E86;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x7684;&#x961F;&#x5217;&#x65F6;&#xFF0C;&#x8FD9;&#x6761;&#x6D88;&#x606F;&#x4F1A;&#x5728;&#x7ECF;&#x8FC7;TTL&#x79D2;&#x540E;&#x201C;&#x6B7B;&#x4EA1;&#x201D;&#xFF0C;&#x6210;&#x4E3A;Dead Letter&#x3002;&#x5982;&#x679C;&#x65E2;&#x914D;&#x7F6E;&#x4E86;&#x6D88;&#x606F;&#x7684;TTL&#xFF0C;&#x53C8;&#x914D;&#x7F6E;&#x4E86;&#x961F;&#x5217;&#x7684;TTL&#xFF0C;&#x90A3;&#x4E48;&#x8F83;&#x5C0F;&#x7684;&#x90A3;&#x4E2A;&#x503C;&#x4F1A;&#x88AB;&#x53D6;&#x7528;&#x3002;&#x66F4;&#x591A;&#x8D44;&#x6599;&#x8BF7;&#x67E5;&#x9605;<a href="/external_links/cabe18b3657563c495bae4522e66f737.html" target="blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;</p>
<h3 id="Dead-Letter-Exchange"><a href="#Dead-Letter-Exchange" class="headerlink" title="Dead Letter Exchange"></a>Dead Letter Exchange</h3><p>&#x521A;&#x624D;&#x63D0;&#x5230;&#x4E86;&#xFF0C;&#x88AB;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x7684;&#x6D88;&#x606F;&#x5728;&#x8FC7;&#x671F;&#x540E;&#x4F1A;&#x6210;&#x4E3A;Dead Letter&#x3002;&#x5176;&#x5B9E;&#x5728;RabbitMQ&#x4E2D;&#xFF0C;&#x4E00;&#x5171;&#x6709;&#x4E09;&#x79CD;&#x6D88;&#x606F;&#x7684;&#x201C;&#x6B7B;&#x4EA1;&#x201D;&#x5F62;&#x5F0F;&#xFF1A;</p>
<ol>
<li>&#x6D88;&#x606F;&#x88AB;&#x62D2;&#x7EDD;&#x3002;&#x901A;&#x8FC7;&#x8C03;&#x7528;basic.reject&#x6216;&#x8005;basic.nack&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x7684;requeue&#x53C2;&#x6570;&#x4E3A;false&#x3002;</li>
<li>&#x6D88;&#x606F;&#x56E0;&#x4E3A;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x800C;&#x8FC7;&#x671F;&#x3002;</li>
<li>&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x4E86;&#x4E00;&#x6761;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x7684;&#x961F;&#x5217;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;&#x961F;&#x5217;&#x8BBE;&#x7F6E;&#x4E86;Dead Letter Exchange&#xFF08;DLX&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E9B;Dead Letter&#x5C31;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;publish&#x5230;Dead Letter Exchange&#xFF0C;&#x901A;&#x8FC7;Dead Letter Exchange&#x8DEF;&#x7531;&#x5230;&#x5176;&#x4ED6;&#x961F;&#x5217;&#x3002;&#x66F4;&#x591A;&#x8D44;&#x6599;&#x8BF7;&#x67E5;&#x9605;<a href="/external_links/6860a50a8eaecf5f3074b655020a8d29.html" target="blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;</p>
<h3 id="&#x6D41;&#x7A0B;&#x56FE;"><a href="#&#x6D41;&#x7A0B;&#x56FE;" class="headerlink" title="&#x6D41;&#x7A0B;&#x56FE;"></a>&#x6D41;&#x7A0B;&#x56FE;</h3><p>&#x806A;&#x660E;&#x7684;&#x4F60;&#x80AF;&#x5B9A;&#x5DF2;&#x7ECF;&#x60F3;&#x5230;&#x4E86;&#xFF0C;&#x5982;&#x4F55;&#x5C06;RabbitMQ&#x7684;TTL&#x548C;DLX&#x7279;&#x6027;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;</p>
<p>&#x9488;&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x7684;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x4E24;&#x4E2A;&#x573A;&#x666F;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x6D41;&#x7A0B;&#x56FE;&#xFF1A;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;"><a href="#&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;"></a>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;</h4><p>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x662F;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x6700;&#x4E3A;&#x5E38;&#x7528;&#x7684;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x4EA7;&#x751F;&#x7684;&#x6D88;&#x606F;&#x9996;&#x5148;&#x4F1A;&#x8FDB;&#x5165;&#x7F13;&#x51B2;&#x961F;&#x5217;&#xFF08;&#x56FE;&#x4E2D;&#x7EA2;&#x8272;&#x961F;&#x5217;&#xFF09;&#x3002;&#x901A;&#x8FC7;RabbitMQ&#x63D0;&#x4F9B;&#x7684;TTL&#x6269;&#x5C55;&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x4F1A;&#x88AB;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x7B49;&#x6D88;&#x606F;&#x8FC7;&#x671F;&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x4F1A;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x597D;&#x7684;DLX&#x8F6C;&#x53D1;&#x5230;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#xFF08;&#x56FE;&#x4E2D;&#x84DD;&#x8272;&#x961F;&#x5217;&#xFF09;&#xFF0C;&#x4EE5;&#x6B64;&#x8FBE;&#x5230;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8ae293b84759ee2d975c1f8a933fe7e8e758fc630c080e1a262a34485fdcacf1" alt></p>
<h4 id="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;"><a href="#&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;"></a>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;</h4><p>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x672C;&#x8D28;&#x4E0A;&#x4E5F;&#x662F;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x7684;&#x7ED3;&#x6784;&#x4E0E;&#x666E;&#x901A;&#x7684;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x8F83;&#x4E3A;&#x4E0D;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x5355;&#x72EC;&#x62CE;&#x51FA;&#x6765;&#x4ECB;&#x7ECD;&#x3002;</p>
<p>&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x53D1;&#x73B0;&#x8BE5;&#x6D88;&#x606F;&#x5904;&#x7406;&#x51FA;&#x73B0;&#x4E86;&#x5F02;&#x5E38;&#xFF0C;&#x6BD4;&#x5982;&#x662F;&#x56E0;&#x4E3A;&#x7F51;&#x7EDC;&#x6CE2;&#x52A8;&#x5F15;&#x8D77;&#x7684;&#x5F02;&#x5E38;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x4E0D;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x76F4;&#x63A5;&#x5C31;&#x91CD;&#x8BD5;&#x7684;&#x8BDD;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x5728;&#x8FD9;&#x671F;&#x95F4;&#x5185;&#x4E00;&#x76F4;&#x65E0;&#x6CD5;&#x6210;&#x529F;&#xFF0C;&#x9020;&#x6210;&#x4E00;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5148;&#x653E;&#x5728;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#xFF08;&#x56FE;&#x4E2D;&#x7EA2;&#x8272;&#x961F;&#x5217;&#xFF09;&#xFF0C;&#x7B49;&#x6D88;&#x606F;&#x7ECF;&#x8FC7;&#x4E00;&#x6BB5;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x540E;&#x518D;&#x6B21;&#x8FDB;&#x5165;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x4E2D;&#xFF08;&#x56FE;&#x4E2D;&#x84DD;&#x8272;&#x961F;&#x5217;&#xFF09;&#xFF0C;&#x6B64;&#x65F6;&#x7531;&#x4E8E;&#x5DF2;&#x7ECF;&#x8FC7;&#x4E86;&#x201C;&#x8F83;&#x957F;&#x201D;&#x7684;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x5F02;&#x5E38;&#x7684;&#x4E00;&#x4E9B;&#x6CE2;&#x52A8;&#x901A;&#x5E38;&#x5DF2;&#x7ECF;&#x6062;&#x590D;&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x53EF;&#x4EE5;&#x88AB;&#x6B63;&#x5E38;&#x5730;&#x6D88;&#x8D39;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b6bdf3cb650ce3d5577a4b9c3c870399a3ab269c89e7e25be117a207bb5db602" alt></p>
<h2 id="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x4EE3;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"></a>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</h2><p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5728;Spring Boot&#x4E2D;&#x5B9E;&#x73B0;&#x57FA;&#x4E8E;RabbitMQ&#x7684;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x8BFB;&#x8005;&#x5DF2;&#x7ECF;&#x62E5;&#x6709;&#x4E86;Spring Boot&#x4E0E;RabbitMQ&#x7684;&#x57FA;&#x672C;&#x77E5;&#x8BC6;&#x3002;&#x5982;&#x679C;&#x60F3;&#x5FEB;&#x901F;&#x4E86;&#x89E3;Spring Boot&#x7684;&#x76F8;&#x5173;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x4E4B;&#x524D;&#x5199;&#x7684;<a href="/external_links/d3cc17262c42ac75c80165b7102bd504.html" target="blank" rel="noopener">&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</a>&#x3002;</p>
<h3 id="&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;"><a href="#&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;"></a>&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;</h3><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5728;Intellij&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Spring Boot&#x5DE5;&#x7A0B;&#xFF0C;&#x5E76;&#x4E14;&#x6DFB;&#x52A0;<code>spring-boot-starter-amqp</code>&#x6269;&#x5C55;&#x3002;</p>
<h3 id="&#x914D;&#x7F6E;&#x961F;&#x5217;"><a href="#&#x914D;&#x7F6E;&#x961F;&#x5217;" class="headerlink" title="&#x914D;&#x7F6E;&#x961F;&#x5217;"></a>&#x914D;&#x7F6E;&#x961F;&#x5217;</h3><p>&#x4ECE;&#x4E0A;&#x8FF0;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x5B9E;&#x9645;&#x7684;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x3002;&#x53C8;&#x7531;&#x4E8E;&#x5728;RabbitMQ&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x62E5;&#x6709;&#x4E24;&#x79CD;&#x6D88;&#x606F;&#x8FC7;&#x671F;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x5171;&#x914D;&#x7F6E;&#x4E86;&#x4E09;&#x6761;&#x961F;&#x5217;&#xFF1A;</p>
<ul>
<li>delay_queue_per_message_ttl&#xFF1A;TTL&#x914D;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x3002;</li>
<li>delay_queue_per_queue_ttl&#xFF1A;TTL&#x914D;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x3002;</li>
<li>delay_process_queue&#xFF1A;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x3002;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;Java Config&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x4E0A;&#x8FF0;&#x7684;&#x961F;&#x5217;&#x914D;&#x7F6E;&#x4E3A;Bean&#x3002;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;<code>spring-boot-starter-amqp</code>&#x6269;&#x5C55;&#xFF0C;Spring Boot&#x5728;&#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x8FD9;&#x4E9B;&#x961F;&#x5217;&#x3002;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;delay_queue_per_message_ttl&#x4EE5;&#x53CA;delay_queue_per_queue_ttl&#x7684;DLX&#x914D;&#x7F6E;&#x4E3A;&#x540C;&#x4E00;&#x4E2A;&#xFF0C;&#x4E14;&#x8FC7;&#x671F;&#x7684;&#x6D88;&#x606F;&#x90FD;&#x4F1A;&#x901A;&#x8FC7;DLX&#x8F6C;&#x53D1;&#x5230;delay_process_queue&#x3002;</p>
<h4 id="delay-queue-per-message-ttl"><a href="#delay-queue-per-message-ttl" class="headerlink" title="delay_queue_per_message_ttl"></a>delay_queue_per_message_ttl</h4><p>&#x9996;&#x5148;&#x4ECB;&#x7ECD;delay_queue_per_message_ttl&#x7684;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Queue delayQueuePerMessageTTL() {</span><br><span class="line">    return QueueBuilder.durable(DELAY_QUEUE_PER_MESSAGE_TTL_NAME)</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-exchange&quot;, DELAY_EXCHANGE_NAME) // DLX&#xFF0C;dead letter&#x53D1;&#x9001;&#x5230;&#x7684;exchange</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-routing-key&quot;, DELAY_PROCESS_QUEUE_NAME) // dead letter&#x643A;&#x5E26;&#x7684;routing key</span><br><span class="line">                       .build();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x4E2D;&#xFF0C;<code>x-dead-letter-exchange</code>&#x58F0;&#x660E;&#x4E86;&#x961F;&#x5217;&#x91CC;&#x7684;&#x6B7B;&#x4FE1;&#x8F6C;&#x53D1;&#x5230;&#x7684;DLX&#x540D;&#x79F0;&#xFF0C;<code>x-dead-letter-routing-key</code>&#x58F0;&#x660E;&#x4E86;&#x8FD9;&#x4E9B;&#x6B7B;&#x4FE1;&#x5728;&#x8F6C;&#x53D1;&#x65F6;&#x643A;&#x5E26;&#x7684;routing-key&#x540D;&#x79F0;&#x3002;</p>
<h4 id="delay-queue-per-queue-ttl"><a href="#delay-queue-per-queue-ttl" class="headerlink" title="delay_queue_per_queue_ttl"></a>delay_queue_per_queue_ttl</h4><p>&#x7C7B;&#x4F3C;&#x5730;&#xFF0C;delay_queue_per_queue_ttl&#x7684;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Queue delayQueuePerQueueTTL() {</span><br><span class="line">    return QueueBuilder.durable(DELAY_QUEUE_PER_QUEUE_TTL_NAME)</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-exchange&quot;, DELAY_EXCHANGE_NAME) // DLX</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-routing-key&quot;, DELAY_PROCESS_QUEUE_NAME) // dead letter&#x643A;&#x5E26;&#x7684;routing key</span><br><span class="line">                       .withArgument(&quot;x-message-ttl&quot;, QUEUE_EXPIRATION) // &#x8BBE;&#x7F6E;&#x961F;&#x5217;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span><br><span class="line">                       .build();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>delay_queue_per_queue_ttl&#x961F;&#x5217;&#x7684;&#x914D;&#x7F6E;&#x6BD4;delay_queue_per_message_ttl&#x961F;&#x5217;&#x7684;&#x914D;&#x7F6E;&#x591A;&#x4E86;&#x4E00;&#x4E2A;<code>x-message-ttl</code>&#xFF0C;&#x8BE5;&#x914D;&#x7F6E;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x961F;&#x5217;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;</p>
<h4 id="delay-process-queue"><a href="#delay-process-queue" class="headerlink" title="delay_process_queue"></a>delay_process_queue</h4><p>delay_process_queue&#x7684;&#x914D;&#x7F6E;&#x6700;&#x4E3A;&#x7B80;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Queue delayProcessQueue() {</span><br><span class="line">    return QueueBuilder.durable(DELAY_PROCESS_QUEUE_NAME)</span><br><span class="line">                       .build();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x914D;&#x7F6E;Exchange"><a href="#&#x914D;&#x7F6E;Exchange" class="headerlink" title="&#x914D;&#x7F6E;Exchange"></a>&#x914D;&#x7F6E;Exchange</h3><h4 id="&#x914D;&#x7F6E;DLX"><a href="#&#x914D;&#x7F6E;DLX" class="headerlink" title="&#x914D;&#x7F6E;DLX"></a>&#x914D;&#x7F6E;DLX</h4><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x914D;&#x7F6E;DLX&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">DirectExchange delayExchange() {</span><br><span class="line">    return new DirectExchange(DELAY_EXCHANGE_NAME);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x518D;&#x5C06;&#x8BE5;DLX&#x7ED1;&#x5B9A;&#x5230;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x5373;delay_process_queue&#x4E0A;&#x3002;&#x8FD9;&#x6837;&#x6240;&#x6709;&#x7684;&#x6B7B;&#x4FE1;&#x90FD;&#x4F1A;&#x901A;&#x8FC7;DLX&#x88AB;&#x8F6C;&#x53D1;&#x5230;delay_process_queue&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Binding dlxBinding(Queue delayProcessQueue, DirectExchange delayExchange) {</span><br><span class="line">    return BindingBuilder.bind(delayProcessQueue)</span><br><span class="line">                         .to(delayExchange)</span><br><span class="line">                         .with(DELAY_PROCESS_QUEUE_NAME);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange"><a href="#&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange" class="headerlink" title="&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange"></a>&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange</h4><p>&#x4ECE;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x5931;&#x8D25;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x5230;&#x7F13;&#x51B2;&#x961F;&#x5217;&#xFF0C;&#x6240;&#x4EE5;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E5F;&#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;Exchange&#x3002;<strong>&#x5728;&#x672C;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;delay_process_per_queue_ttl&#x4F5C;&#x4E3A;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x91CC;&#x7684;&#x7F13;&#x51B2;&#x961F;&#x5217;</strong>&#x3002;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x662F;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x4E86;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x67E5;&#x9605;&#x6211;<a href="/external_links/81e05fe58f8aa432fd1916bcd1af3e9f.html" target="blank" rel="noopener">Github</a>&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<h3 id="&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;"><a href="#&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;" class="headerlink" title="&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;"></a>&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;</h3><p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x6D88;&#x8D39;&#x8005;ProcessReceiver&#xFF0C;&#x8FD9;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x76D1;&#x542C;delay_process_queue&#x961F;&#x5217;&#xFF0C;&#x5BF9;&#x4E8E;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x4ED6;&#x4F1A;&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;&#x6D88;&#x606F;&#x91CC;&#x7684;&#x6D88;&#x606F;&#x4F53;&#x4E0D;&#x7B49;&#x4E8E;FAIL_MESSAGE&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4F1A;&#x8F93;&#x51FA;&#x6D88;&#x606F;&#x4F53;&#x3002;</li>
<li>&#x5982;&#x679C;&#x6D88;&#x606F;&#x91CC;&#x7684;&#x6D88;&#x606F;&#x4F53;&#x6070;&#x597D;&#x662F;FAIL_MESSAGE&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4F1A;&#x6A21;&#x62DF;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8BE5;&#x6D88;&#x606F;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x7F13;&#x51B2;&#x961F;&#x5217;&#xFF08;&#x5BF9;&#x5E94;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;&#xFF09;&#x3002;</li>
</ul>
<p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x5BB9;&#x5668;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">SimpleMessageListenerContainer processContainer(ConnectionFactory connectionFactory, ProcessReceiver processReceiver) {</span><br><span class="line">    SimpleMessageListenerContainer container = new SimpleMessageListenerContainer();</span><br><span class="line">    container.setConnectionFactory(connectionFactory);</span><br><span class="line">    container.setQueueNames(DELAY_PROCESS_QUEUE_NAME); // &#x76D1;&#x542C;delay_process_queue</span><br><span class="line">    container.setMessageListener(new MessageListenerAdapter(processReceiver));</span><br><span class="line">    return container;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x524D;&#x7F6E;&#x7684;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5DF2;&#x7ECF;&#x5168;&#x90E8;&#x7F16;&#x5199;&#x5B8C;&#x6210;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x6765;&#x6D4B;&#x8BD5;&#x6211;&#x4EEC;&#x7684;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;</p>
<h3 id="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;"><a href="#&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;" class="headerlink" title="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;"></a>&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</h3><h4 id="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;"><a href="#&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;</h4><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x7F16;&#x5199;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x501F;&#x52A9;<code>spring-rabbit</code>&#x5305;&#x4E0B;&#x63D0;&#x4F9B;&#x7684;RabbitTemplate&#x7C7B;&#x6765;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x3002;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;<code>spring-boot-starter-amqp</code>&#x6269;&#x5C55;&#xFF0C;Spring Boot&#x4F1A;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x81EA;&#x52A8;&#x5730;&#x5C06;RabbitTemplate&#x5F53;&#x6210;bean&#x52A0;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x4E86;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x4E3A;&#x6BCF;&#x4E2A;&#x6D88;&#x606F;&#x8BBE;&#x7F6E;TTL&#x5462;&#xFF1F;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x501F;&#x52A9;MessagePostProcessor&#x3002;MessagePostProcessor&#x901A;&#x5E38;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x6D88;&#x606F;&#x7684;Header&#x4EE5;&#x53CA;&#x6D88;&#x606F;&#x7684;&#x5C5E;&#x6027;&#x3002;&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;ExpirationMessagePostProcessor&#x7C7B;&#x6765;&#x8D1F;&#x8D23;&#x8BBE;&#x7F6E;&#x6D88;&#x606F;&#x7684;TTL&#x5C5E;&#x6027;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x8BBE;&#x7F6E;&#x6D88;&#x606F;&#x7684;&#x5931;&#x6548;&#x65F6;&#x95F4;</span><br><span class="line"> */</span><br><span class="line">public class ExpirationMessagePostProcessor implements MessagePostProcessor {</span><br><span class="line">    private final Long ttl; // &#x6BEB;&#x79D2;</span><br><span class="line">    public ExpirationMessagePostProcessor(Long ttl) {</span><br><span class="line">        this.ttl = ttl;</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    public Message postProcessMessage(Message message) throws AmqpException {</span><br><span class="line">        message.getMessageProperties()</span><br><span class="line">               .setExpiration(ttl.toString()); // &#x8BBE;&#x7F6E;per-message&#x7684;&#x5931;&#x6548;&#x65F6;&#x95F4;</span><br><span class="line">        return message;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5728;&#x8C03;&#x7528;RabbitTemplate&#x7684;convertAndSend&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4F20;&#x5165;ExpirationMessagePostPorcessor&#x5373;&#x53EF;&#x3002;&#x6211;&#x4EEC;&#x5411;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#x53D1;&#x9001;3&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4F9D;&#x6B21;&#x4E3A;1&#x79D2;&#xFF0C;2&#x79D2;&#x548C;3&#x79D2;&#x3002;&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Test</span><br><span class="line">public void testDelayQueuePerMessageTTL() throws InterruptedException {</span><br><span class="line">    ProcessReceiver.latch = new CountDownLatch(3);</span><br><span class="line">    for (int i = 1; i &lt;= 3; i++) {</span><br><span class="line">        long expiration = i * 1000;</span><br><span class="line">        rabbitTemplate.convertAndSend(QueueConfig.DELAY_QUEUE_PER_MESSAGE_TTL_NAME,</span><br><span class="line">                (Object) (&quot;Message From delay_queue_per_message_ttl with expiration &quot; + expiration), new ExpirationMessagePostProcessor(expiration));</span><br><span class="line">    }</span><br><span class="line">    ProcessReceiver.latch.await();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7EC6;&#x5FC3;&#x7684;&#x670B;&#x53CB;&#x4E00;&#x5B9A;&#x4F1A;&#x95EE;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x52A0;&#x4E00;&#x4E2A;CountDownLatch&#x5462;&#xFF1F;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x6CA1;&#x6709;latch&#x963B;&#x585E;&#x4F4F;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;&#x7684;&#x8BDD;&#xFF0C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x4F1A;&#x76F4;&#x63A5;&#x7ED3;&#x675F;&#xFF0C;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x770B;&#x4E0D;&#x5230;&#x6D88;&#x606F;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x8868;&#x73B0;&#x4E86;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x7C7B;&#x4F3C;&#x5730;&#xFF0C;&#x6D4B;&#x8BD5;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Test</span><br><span class="line">public void testDelayQueuePerQueueTTL() throws InterruptedException {</span><br><span class="line">    ProcessReceiver.latch = new CountDownLatch(3);</span><br><span class="line">    for (int i = 1; i &lt;= 3; i++) {</span><br><span class="line">        rabbitTemplate.convertAndSend(QueueConfig.DELAY_QUEUE_PER_QUEUE_TTL_NAME,</span><br><span class="line">                &quot;Message From delay_queue_per_queue_ttl with expiration &quot; + QueueConfig.QUEUE_EXPIRATION);</span><br><span class="line">    }</span><br><span class="line">    ProcessReceiver.latch.await();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5411;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#x53D1;&#x9001;3&#x6761;&#x6D88;&#x606F;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#x8FD9;3&#x6761;&#x6D88;&#x606F;&#x4F1A;&#x5728;4&#x79D2;&#x540E;&#x540C;&#x65F6;&#x8FC7;&#x671F;&#x3002;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;"><a href="#&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;</h4><p>&#x6211;&#x4EEC;&#x540C;&#x6837;&#x8FD8;&#x9700;&#x6D4B;&#x8BD5;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Test</span><br><span class="line">public void testFailMessage() throws InterruptedException {</span><br><span class="line">    ProcessReceiver.latch = new CountDownLatch(6);</span><br><span class="line">    for (int i = 1; i &lt;= 3; i++) {</span><br><span class="line">        rabbitTemplate.convertAndSend(QueueConfig.DELAY_PROCESS_QUEUE_NAME, ProcessReceiver.FAIL_MESSAGE);</span><br><span class="line">    }</span><br><span class="line">    ProcessReceiver.latch.await();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5411;delay_process_queue&#x53D1;&#x9001;3&#x6761;&#x4F1A;&#x89E6;&#x53D1;FAIL&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x8FD9;3&#x6761;&#x6D88;&#x606F;&#x4F1A;&#x5728;4&#x79D2;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x8BD5;&#x3002;</p>
<h3 id="&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"><a href="#&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;" class="headerlink" title="&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"></a>&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</h3><h4 id="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;-1"><a href="#&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;-1" class="headerlink" title="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;</h4><p>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6211;&#x4EEC;&#x5206;&#x4E3A;&#x4E86;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x548C;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x4E24;&#x79CD;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E0B;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e7a4b6771bdadee329dde65dc3da3f0cfc6db8a1ae7ae0624b7f5313b11eef0c" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;ProcessReceiver&#x5206;&#x522B;&#x7ECF;&#x8FC7;1&#x79D2;&#x3001;2&#x79D2;&#x3001;3&#x79D2;&#x6536;&#x5230;&#x6D88;&#x606F;&#x3002;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x8868;&#x660E;&#x6D88;&#x606F;&#x4E0D;&#x4EC5;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x4E2A;&#x6027;&#x5316;&#x8BBE;&#x7F6E;&#x7684;&#x3002;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x3002;<br>&#x7136;&#x540E;&#xFF0C;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/eac2cc9ad410cf9e95428d806932746b22e5b327c91cfcd65ed62815922fff90" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;ProcessReceiver&#x7ECF;&#x8FC7;&#x4E86;4&#x79D2;&#x7684;&#x5EF6;&#x8FDF;&#x4E4B;&#x540E;&#xFF0C;&#x540C;&#x65F6;&#x6536;&#x5230;&#x4E86;3&#x6761;&#x6D88;&#x606F;&#x3002;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x8868;&#x660E;&#x6D88;&#x606F;&#x4E0D;&#x4EC5;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x4E86;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x8BC1;&#x660E;&#x4E86;&#x5F53;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6D88;&#x606F;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x3002;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x3002;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;-1"><a href="#&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;-1" class="headerlink" title="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;</h4><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/48fe1014ef84749cd60030cefb4b4a9b8179411857b5fdb99f499c575e57bc76" alt></p>
<p>ProcessReceiver&#x9996;&#x5148;&#x6536;&#x5230;&#x4E86;3&#x6761;&#x4F1A;&#x89E6;&#x53D1;FAIL&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x79FB;&#x52A8;&#x5230;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E4B;&#x540E;&#xFF0C;&#x8FC7;&#x4E86;4&#x79D2;&#xFF0C;&#x53C8;&#x6536;&#x5230;&#x4E86;&#x521A;&#x624D;&#x7684;&#x90A3;3&#x6761;&#x6D88;&#x606F;&#x3002;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x3002;</p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x672C;&#x6587;&#x9996;&#x5148;&#x4ECB;&#x7ECD;&#x4E86;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x6982;&#x5FF5;&#x4EE5;&#x53CA;&#x7528;&#x9014;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x8BE6;&#x7EC6;&#x8BB2;&#x89E3;&#x4E86;&#x5982;&#x4F55;&#x901A;&#x8FC7;Spring Boot&#x548C;RabbitMQ&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;&#x5E0C;&#x671B;&#x672C;&#x6587;&#x80FD;&#x591F;&#x5BF9;&#x5927;&#x5BB6;&#x5E73;&#x65F6;&#x7684;&#x5B66;&#x4E60;&#x548C;&#x5DE5;&#x4F5C;&#x80FD;&#x6709;&#x6240;&#x542F;&#x53D1;&#x548C;&#x5E2E;&#x52A9;&#x3002;&#x6709;&#x4EC0;&#x4E48;&#x610F;&#x89C1;&#x6216;&#x8005;&#x95EE;&#x9898;&#x6B22;&#x8FCE;&#x5728;&#x8BC4;&#x8BBA;&#x4E0B;&#x65B9;&#x7559;&#x8A00;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/6a91354470f7dbbe8838bbb536a228d1.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../378/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../378/">378</a><span class="page-number current">379</span><a class="page-number" href="../380/">380</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../380/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
