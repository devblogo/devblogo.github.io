<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/247/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/247/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7002490281228517413.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7002490281228517413.html" itemprop="url">手记   Oracle 慢查询排查步骤</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-31T15:19:06+08:00">
                2021-08-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x8FD9;&#x662F;&#x6211;&#x53C2;&#x4E0E;8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;&#x7684;&#x7B2C;9&#x5929;&#xFF0C;&#x6D3B;&#x52A8;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#xFF1A;<a href="https://dev.newban.cn/6987962113788493831">8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;</a></strong></p>
<blockquote>
<p><strong>&#x9996;&#x5148;&#x5206;&#x4EAB;&#x4E4B;&#x524D;&#x7684;&#x6240;&#x6709;&#x6587;&#x7AE0; , &#x6B22;&#x8FCE;&#x70B9;&#x8D5E;&#x6536;&#x85CF;&#x8F6C;&#x53D1;&#x4E09;&#x8FDE;&#x4E0B;&#x6B21;&#x4E00;&#x5B9A; &gt;&gt;&gt;&gt;</strong> &#x1F61C;&#x1F61C;&#x1F61C;   </p>
<p><strong>&#x6587;&#x7AE0;&#x5408;&#x96C6; :</strong> &#x1F381; <a href="https://dev.newban.cn/6941642435189538824">juejin.cn/post/694164&#x2026;</a>   </p>
<p><strong>Github :</strong> &#x1F449; <a href="/external_links/f4c0695dd8cd8371c2f2fc9edde11029.html" target="blank" rel="noopener">github.com/black-ant</a>  </p>
<p><strong>CASE &#x5907;&#x4EFD; :</strong> &#x1F449; <a href="/external_links/907cd6419accaedf9bfa60f559823d4b.html" target="blank" rel="noopener">gitee.com/antblack/ca&#x2026;</a></p>
</blockquote>
<h2 id="&#x4E00;-&#x524D;&#x8A00;"><a href="#&#x4E00;-&#x524D;&#x8A00;" class="headerlink" title="&#x4E00; . &#x524D;&#x8A00;"></a>&#x4E00; . &#x524D;&#x8A00;</h2><p>&#x8BB0;&#x5F55;&#x4E00;&#x6B21; Oracle &#x6162;&#x67E5;&#x8BE2;&#x7684;&#x6392;&#x67E5;&#x8FC7;&#x7A0B; , &#x4FBF;&#x4E8E;&#x4EE5;&#x540E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;.</p>
<p>&#x770B;&#x4E86;&#x4E00;&#x4E9B;&#x6587;&#x6863; , Oracle &#x4E2D;&#x4F18;&#x5316;&#x7684;&#x65B9;&#x6848;&#x548C; Mysql &#x57FA;&#x672C;&#x4E0A;&#x662F;&#x4E00;&#x81F4;&#x7684; , &#x901A;&#x5E38;&#x5305;&#x62EC;&#x4E00;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x5411; :</p>
<ul>
<li><strong>&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;</strong> (&#x541E;&#x5410;&#x91CF;) : &#x5305;&#x62EC; Oracle &#x672C;&#x8EAB;&#x541E;&#x5410;&#x91CF;&#x548C;&#x78C1;&#x76D8; I/O &#x541E;&#x5410;&#x91CF;</li>
<li><strong>&#x786C;&#x4EF6;&#x5206;&#x6790;</strong> (&#x8D44;&#x6E90;&#x60C5;&#x51B5;) : &#x5305;&#x62EC;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668; CPU , &#x786C;&#x76D8;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;</li>
<li><strong>SQL&#x5206;&#x6790;</strong> : &#x5206;&#x6790; SQL &#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x6162;&#x67E5;&#x8BE2; , &#x662F;&#x5426;&#x547D;&#x4E2D;&#x7D22;&#x5F15;</li>
<li><strong>&#x914D;&#x7F6E;&#x4F18;&#x5316;</strong> : &#x5206;&#x6790;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x73AF;&#x5883;&#x914D;&#x7F6E;&#x63D0;&#x9AD8;&#x6027;&#x80FD;</li>
</ul>
<p>&#x4EE5;&#x4E0A;&#x51E0;&#x4E2A;&#x65B9;&#x9762; , &#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x80FD;&#x5C06;&#x95EE;&#x9898;&#x5B9A;&#x4F4D;&#x4E86; , &#x901A;&#x8FC7;&#x95EE;&#x9898;&#x518D;&#x8003;&#x8651;&#x89E3;&#x51B3;&#x7684;&#x65B9;&#x6CD5;</p>
<h2 id="&#x4E8C;-&#x6392;&#x67E5;&#x6B65;&#x9AA4;"><a href="#&#x4E8C;-&#x6392;&#x67E5;&#x6B65;&#x9AA4;" class="headerlink" title="&#x4E8C; . &#x6392;&#x67E5;&#x6B65;&#x9AA4;"></a>&#x4E8C; . &#x6392;&#x67E5;&#x6B65;&#x9AA4;</h2><h3 id="2-1-&#x67E5;&#x8BE2;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;"><a href="#2-1-&#x67E5;&#x8BE2;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;" class="headerlink" title="2.1 &#x67E5;&#x8BE2;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;"></a>2.1 &#x67E5;&#x8BE2;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;</h3><p>&#x533A;&#x522B;&#x4E8E; Mysql &#x76F4;&#x63A5;&#x5199;&#x5230; log &#x4E2D;&#x7684;&#x65E5;&#x5FD7; , Oracle &#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BED;&#x53E5;&#x62C9;&#x51FA;&#x6162;&#x67E5;&#x8BE2;&#x7684; Excle log<br>@ <a href="/external_links/5e7292d8368ee55aa03d61af07459afe.html" target="blank" rel="noopener">oracle &#x6162;&#x67E5;&#x8BE2; - &#x6211;&#x662F;&#x5C5E;&#x8F66;&#x7684; - &#x535A;&#x5BA2;&#x56ED; (cnblogs.com)</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x6162;&#x67E5;&#x8BE2;&#x8017;&#x65F6;</span><br><span class="line">select *</span><br><span class="line"> from (select sa.SQL_TEXT &quot;&#x6267;&#x884C; SQL&quot;,</span><br><span class="line">        sa.EXECUTIONS &quot;&#x6267;&#x884C;&#x6B21;&#x6570;&quot;,</span><br><span class="line">        round(sa.ELAPSED_TIME / 1000000, 2) &quot;&#x603B;&#x6267;&#x884C;&#x65F6;&#x95F4;&quot;,</span><br><span class="line">        round(sa.ELAPSED_TIME / 1000000 / sa.EXECUTIONS, 2) &quot;&#x5E73;&#x5747;&#x6267;&#x884C;&#x65F6;&#x95F4;&quot;,</span><br><span class="line">        sa.COMMAND_TYPE,</span><br><span class="line">        sa.PARSING_USER_ID &quot;&#x7528;&#x6237;ID&quot;,</span><br><span class="line">        u.username &quot;&#x7528;&#x6237;&#x540D;&quot;,</span><br><span class="line">        sa.HASH_VALUE</span><br><span class="line">     from v$sqlarea sa</span><br><span class="line">     left join all_users u</span><br><span class="line">      on sa.PARSING_USER_ID = u.user_id</span><br><span class="line">     where sa.EXECUTIONS &gt; 0</span><br><span class="line">     order by (sa.ELAPSED_TIME / sa.EXECUTIONS) desc)</span><br><span class="line"> where rownum &lt;= 50;</span><br><span class="line"> </span><br><span class="line"># &#x67E5;&#x8BE2;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684; SQL </span><br><span class="line">select *</span><br><span class="line"> from (select s.SQL_TEXT,</span><br><span class="line">        s.EXECUTIONS &quot;&#x6267;&#x884C;&#x6B21;&#x6570;&quot;,</span><br><span class="line">        s.PARSING_USER_ID &quot;&#x7528;&#x6237;&#x540D;&quot;,</span><br><span class="line">        rank() over(order by EXECUTIONS desc) EXEC_RANK</span><br><span class="line">     from v$sql s</span><br><span class="line">     left join all_users u</span><br><span class="line">      on u.USER_ID = s.PARSING_USER_ID) t</span><br><span class="line"> where exec_rank &lt;= 100;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x7ED3;&#x679C;&#x89E3;&#x91CA; :</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0af04cb99177b1f91de7c6b127b0f91d323b45b6955eb9d2d9a0db3b1d485db3" alt="image.png"></p>
<p>&#x62FF;&#x5230;&#x5E73;&#x5747;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x660E;&#x663E;&#x7684;&#x53D1;&#x73B0;&#x67E5;&#x8BE2;&#x65F6;&#x95F4;&#x8F83;&#x957F;&#x7684; SQL , &#x4F46;&#x662F;&#x8FD9;&#x4E00;&#x7C7B; SQL &#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6162;&#x67E5;&#x8BE2; , &#x9700;&#x8981;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x5224;&#x65AD; , &#x5982;&#x679C;&#x51FA;&#x73B0;&#x5F88;&#x79BB;&#x8C31;&#x7684;&#x65F6;&#x95F4; , &#x5C31;&#x9700;&#x8981;&#x5206;&#x6790;&#x7D22;&#x5F15;</p>
<h3 id="2-2-&#x67E5;&#x770B;&#x7D22;&#x5F15;&#x60C5;&#x51B5;"><a href="#2-2-&#x67E5;&#x770B;&#x7D22;&#x5F15;&#x60C5;&#x51B5;" class="headerlink" title="2.2 &#x67E5;&#x770B;&#x7D22;&#x5F15;&#x60C5;&#x51B5;"></a>2.2 &#x67E5;&#x770B;&#x7D22;&#x5F15;&#x60C5;&#x51B5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;explain plan for</span><br><span class="line">select * from t_call_records where t_bjhm=&apos;123456&apos;</span><br><span class="line"></span><br><span class="line"># &#x67E5;&#x770B;&#x6267;&#x884C;&#x7ED3;&#x679C;</span><br><span class="line">select * from table(dbms_xplan.display)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x7D22;&#x5F15;&#x5185;&#x5BB9;&#x8865;&#x5145;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6889016af16eb565247560af1aa37f3b0b980ebbf1569c38209e881e53dcdad1" alt="image.png"></p>
<p><strong>&#x4ECE;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x660E;&#x663E;&#x770B;&#x5230;&#x8D70;&#x4E86;&#x5168;&#x8868;&#x626B;&#x63CF; , &#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x52A0;&#x7D22;&#x5F15;&#x548C;&#x6821;&#x9A8C;</strong></p>
<ul>
<li><strong>index unique scan</strong> : &#x7D22;&#x5F15;&#x552F;&#x4E00;&#x626B;&#x63CF; (&#x4E3B;&#x952E;&#x7D22;&#x5F15;)</li>
<li><strong>index range scan</strong> : &#x7D22;&#x5F15;&#x8303;&#x56F4;&#x626B;&#x63CF; (&#x7EC4;&#x5408;&#x7D22;&#x5F15;&#x7684;&#x60C5;&#x51B5;)</li>
<li><strong>index full scan</strong> : &#x5168;&#x7D22;&#x5F15;&#x626B;&#x63CF;</li>
<li><strong>index fast full scan</strong> : &#x7D22;&#x5F15;&#x5FEB;&#x901F;&#x626B;&#x63CF;&#xFF0C;&#x626B;&#x63CF;&#x7D22;&#x5F15;&#x4E2D;&#x7684;&#x5168;&#x90E8;&#x7684;&#x6570;&#x636E;&#x5757;&#xFF0C;&#x4E0E;&#x5168;&#x7D22;&#x5F15;&#x626B;&#x63CF;&#x7684;&#x65B9;&#x5F0F;&#x57FA;&#x672C;&#x4E0A;&#x7C7B;&#x4F3C;&#x3002;<ul>
<li>&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x660E;&#x663E;&#x7684;&#x533A;&#x522B;&#x662F;&#xFF0C;&#x7D22;&#x5F15;&#x5FEB;&#x901F;&#x626B;&#x63CF;&#x5BF9;&#x67E5;&#x8BE2;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x662F;&#x6392;&#x5E8F;&#x7684;&#x3002;</li>
</ul>
</li>
</ul>
<h3 id="2-3-&#x67E5;&#x770B;&#x9501;&#x7684;&#x7ADE;&#x4E89;&#x60C5;&#x51B5;"><a href="#2-3-&#x67E5;&#x770B;&#x9501;&#x7684;&#x7ADE;&#x4E89;&#x60C5;&#x51B5;" class="headerlink" title="2.3 &#x67E5;&#x770B;&#x9501;&#x7684;&#x7ADE;&#x4E89;&#x60C5;&#x51B5;"></a>2.3 &#x67E5;&#x770B;&#x9501;&#x7684;&#x7ADE;&#x4E89;&#x60C5;&#x51B5;</h3><blockquote>
<p>Step 1 : &#x67E5;&#x770B;&#x540E;&#x53F0;&#x9501;&#x7ADE;&#x4E89;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;SELECT</span><br><span class="line">	SQ.INST_ID,</span><br><span class="line">	SQ.SQL_TEXT, /*SQL&#x6587;&#x672C;*/</span><br><span class="line">	SE.SID, /*&#x4F1A;&#x8BDD;&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#xFF0C;&#x901A;&#x5E38;&#x8981;&#x5BF9;&#x67D0;&#x4E2A;&#x4F1A;&#x8BDD;&#x8FDB;&#x884C;&#x5206;&#x6790;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x5C31;&#x9700;&#x8981;&#x83B7;&#x5F97;&#x8BE5;&#x4F1A;&#x8BDD;&#x7684;SID&#x3002;*/</span><br><span class="line">	SE.BLOCKING_SESSION,</span><br><span class="line">	SQ.OPTIMIZER_COST AS COST_,/* COST&#xA0;&#x503C;*/</span><br><span class="line">	SE.LAST_CALL_ET CONTINUE_TIME,/*&#x6267;&#x884C;&#x65F6;&#x95F4;*/</span><br><span class="line">	SE.EVENT,/*&#x7B49;&#x5F85;&#x4E8B;&#x4EF6;*/</span><br><span class="line">	SE.LOCKWAIT,/*&#x662F;&#x5426;&#x7B49;&#x5F85;LOCK(SE&#xFF0C;P)*/</span><br><span class="line">	SE.MACHINE,/*&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x673A;&#x5668;&#x540D;&#x3002;(WORKGROUP\PC-201211082055)*/</span><br><span class="line">	SQ.SQL_ID,/*SQL_ID*/</span><br><span class="line">	SE.USERNAME,/*&#x521B;&#x5EFA;&#x8BE5;&#x4F1A;&#x8BDD;&#x7684;&#x7528;&#x6237;&#x540D;*/</span><br><span class="line">	SE.LOGON_TIME,/*&#x767B;&#x9646;&#x65F6;&#x95F4;*/</span><br><span class="line">	&apos;ALTER SYSTEM KILL SESSION &apos; || SE.SID || &apos;,&apos; || SE.SERIAL #  --&#x82E5;&#x5B58;&#x5728;&#x9501;&#x60C5;&#x51B5;,&#x4F1A;&#x7528;&#x5230;KILL&#x9501;&#x91CA;&#x653E;~</span><br><span class="line">FROM</span><br><span class="line">	gV$SESSION SE,/*&#x4F1A;&#x8BDD;&#x4FE1;&#x606F;&#x3002;&#x6BCF;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x5230;ORACLE&#x6570;&#x636E;&#x5E93;&#x7684;&#x4F1A;&#x8BDD;&#x90FD;&#x80FD;&#x5728;&#x8BE5;&#x89C6;&#x56FE;&#x4E2D;&#x5BF9;&#x5E94;&#x4E00;&#x6761;&#x8BB0;&#x5F55;*/</span><br><span class="line">	gV$SQLAREA SQ /*&#x8DDF;&#x8E2A;&#x6240;&#x6709;SHARED POOL&#x4E2D;&#x7684;&#x5171;&#x4EAB;CURSOR&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#xA0;&#x6267;&#x884C;&#x6B21;&#x6570;&#xFF0C;&#x903B;&#x8F91;&#x8BFB;&#xFF0C;&#x7269;&#x7406;&#x8BFB;&#x7B49;*/</span><br><span class="line">WHERE</span><br><span class="line">	SE.SQL_HASH_VALUE = SQ.HASH_VALUE &#xA0;&#xA0; </span><br><span class="line">	AND SE.STATUS = &apos;ACTIVE&apos; &#xA0;&#xA0; </span><br><span class="line">	AND SE.SQL_ID = SQ.SQL_ID &#xA0;&#xA0; </span><br><span class="line">	AND SE.USERNAME = SQ.PARSING_SCHEMA_NAME &#xA0;&#xA0;&#xA0;&#xA0;&#xA0; --&#x8FC7;&#x6EE4;&#x6761;&#x4EF6;</span><br><span class="line">	AND SE.USERNAME = &apos;FWSB&apos; --&#x7528;&#x6237;&#x540D;</span><br><span class="line">	AND se.BLOCKING_SESSION IS NOT NULL;</span><br><span class="line">        </span><br><span class="line">// &#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x811A;&#x672C;======================   </span><br><span class="line">SELECT</span><br><span class="line">	SQ.INST_ID,</span><br><span class="line">	SQ.SQL_TEXT,</span><br><span class="line">	SE.SID,</span><br><span class="line">	SE.BLOCKING_SESSION,</span><br><span class="line">	SQ.OPTIMIZER_COST AS COST_,</span><br><span class="line">	SE.LAST_CALL_ET CONTINUE_TIME,</span><br><span class="line">	SE.EVENT,</span><br><span class="line">	SE.LOCKWAIT,</span><br><span class="line">	SE.MACHINE,</span><br><span class="line">	SQ.SQL_ID,</span><br><span class="line">	SE.USERNAME,</span><br><span class="line">	SE.LOGON_TIME,</span><br><span class="line">	&apos;ALTER SYSTEM KILL SESSION &apos; || SE.SID || &apos;,&apos; </span><br><span class="line">FROM</span><br><span class="line">	gV$SESSION SE,</span><br><span class="line">	gV$SQLAREA SQ </span><br><span class="line">WHERE</span><br><span class="line">	SE.SQL_HASH_VALUE = SQ.HASH_VALUE </span><br><span class="line">	AND SE.STATUS = &apos;ACTIVE&apos; </span><br><span class="line">	AND SE.SQL_ID = SQ.SQL_ID </span><br><span class="line">	AND SE.USERNAME = SQ.PARSING_SCHEMA_NAME </span><br><span class="line">	AND SE.USERNAME = &apos;FWSB&apos; </span><br><span class="line">	AND SE.BLOCKING_SESSION IS NOT NULL;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/571c2c05ccba67e68aad5b658f4980bb3bac3ac84287348da1752261b23f3806" alt="image.png"></p>
<p><strong>&#x8865;&#x5145;</strong> : &#x76F8;&#x5173;&#x7684;&#x8868;&#x7ED3;&#x6784;&#x53EF;&#x4EE5;&#x751F;&#x4E73;&#x67E5;&#x8BE2; <a href="/external_links/9f2529cc5e8d098f5a865fcd2cf11a48.html" target="blank" rel="noopener">Oracle &#x5B98;&#x65B9;&#x6587;&#x6863;</a></p>
<blockquote>
<p>Step 2 : &#x67E5;&#x8BE2;&#x7ED3;&#x679C;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/facf9b2f0a3e1cb224c91f605b14efa9cba3b77f591b7a82d841f207f94c3c6d" alt="image.png"></p>
<p>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; SID &#x518D;&#x53BB;&#x67E5;&#x627E;&#x5BF9;&#x5E94;&#x7684; SQL , &#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x9501;&#x5BF9;&#x8C61;</p>
<h3 id="2-4-&#x5176;&#x4ED6;&#x9501;&#x8BED;&#x53E5;"><a href="#2-4-&#x5176;&#x4ED6;&#x9501;&#x8BED;&#x53E5;" class="headerlink" title="2.4 &#x5176;&#x4ED6;&#x9501;&#x8BED;&#x53E5;"></a>2.4 &#x5176;&#x4ED6;&#x9501;&#x8BED;&#x53E5;</h3><p>&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x53C2;&#x8003;&#x81EA; : <a href="/external_links/8c7f81c0ee3221e7a235c175572223b0.html" target="blank" rel="noopener">blog.csdn.net/u011019491/&#x2026;</a> , &#x5404;&#x4F4D;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x539F;&#x6587;</p>
<blockquote>
<p>&#x67E5;&#x8BE2;&#x90A3;&#x4E9B;&#x7528;&#x6237;&#xFF0C;&#x64CD;&#x7EB5;&#x4E86;&#x90A3;&#x4E9B;&#x8868;&#x9020;&#x6210;&#x4E86;&#x9501;&#x673A;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;SELECT</span><br><span class="line">	s.username,</span><br><span class="line">	decode(l.TYPE, &apos;TM&apos;, &apos;TABLE LOCK&apos;, &apos;TX&apos;, &apos;ROW LOCK&apos;, NULL ) LOCK_LEVEL,</span><br><span class="line">	o.owner,</span><br><span class="line">	o.object_name,</span><br><span class="line">	o.object_type,</span><br><span class="line">	s.sid,</span><br><span class="line">	s.terminal,</span><br><span class="line">	s.machine,</span><br><span class="line">	s.program,</span><br><span class="line">	s.osuser</span><br><span class="line">FROM</span><br><span class="line">	v$session s,</span><br><span class="line">	v$lock l,</span><br><span class="line">	all_objects o</span><br><span class="line">WHERE</span><br><span class="line">	 l.sid = s.sid</span><br><span class="line">	AND l.id1 = o.object_id(+)</span><br><span class="line">	AND s.username is NOT Null</span><br></pre></td></tr></table></figure>

<p><strong>&#x8BE6;&#x60C5;&#x53C2;&#x8003; :&#x2014;&gt;</strong> <a href="/external_links/d73b17ac9c220cbe81b92a26ff26f683.html" target="blank" rel="noopener">V$Lock</a></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/7c99e9e455b70cab028a68142856c2bda091746d8a8f1f7832352c70185b0f06" alt="image.png"></p>
<blockquote>
<p>&#x67E5;&#x51FA;&#x88AB;&#x9501;&#x7684;&#x8868;&#xFF0C;&#x548C;&#x9501;&#x4F4F;&#x8FD9;&#x4E2A;&#x8868;&#x7684;&#x4F1A;&#x8BDD;ID</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select a.session_id ,b.* from v$locked_object a,all_objects b where a.object_id=b.object_id</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x67E5;&#x51FA;&#x5BF9;&#x5E94;&#x7684;SQL&#x8BED;&#x53E5;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;SELECT</span><br><span class="line">	vs.SQL_TEXT,</span><br><span class="line">	vsess.sid,</span><br><span class="line">	vsess.SERIAL #,</span><br><span class="line">	vsess.MACHINE,</span><br><span class="line">	vsess.OSUSER,</span><br><span class="line">	vsess.TERMINAL,</span><br><span class="line">	vsess.PROGRAM,</span><br><span class="line">	vs.CPU_TIME,</span><br><span class="line">	vs.DISK_READS </span><br><span class="line">FROM</span><br><span class="line">	v$sql vs,</span><br><span class="line">	v$session vsess </span><br><span class="line">WHERE</span><br><span class="line">	vs.ADDRESS = vsess.SQL_ADDRESS </span><br><span class="line">	AND vsess.sid = 36</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/f599c3723d876bc6ef1c03e1a9ee397b7271484389e30a44943dbdb3804e62ec" alt="image.png"></p>
<blockquote>
<p>&#x8865;&#x5145;&#x8BED;&#x53E5; :</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x67E5;&#x54EA;&#x4E2A;&#x8FC7;&#x7A0B;&#x88AB;&#x9501; -&gt; &#x67E5;V$DB_OBJECT_CACHE&#x89C6;&#x56FE;:</span><br><span class="line">SELECT * FROM V$DB_OBJECT_CACHE WHERE OWNER=&apos;&#x8FC7;&#x7A0B;&#x7684;&#x6240;&#x5C5E;&#x7528;&#x6237;&apos; AND LOCKS!=&apos;0&apos;;</span><br><span class="line"></span><br><span class="line">// &#x67E5;&#x662F;&#x54EA;&#x4E00;&#x4E2A;SID,&#x901A;&#x8FC7;SID&#x53EF;&#x77E5;&#x9053;&#x662F;&#x54EA;&#x4E2A;SESSION. -&gt; &#x67E5;V$ACCESS&#x89C6;&#x56FE;:</span><br><span class="line">SELECT * FROM V$ACCESS WHERE OWNER=&apos;&#x8FC7;&#x7A0B;&#x7684;&#x6240;&#x5C5E;&#x7528;&#x6237;&apos; AND NAME=&apos;&#x521A;&#x624D;&#x67E5;&#x5230;&#x7684;&#x8FC7;&#x7A0B;&#x540D;&apos;;</span><br><span class="line"></span><br><span class="line">// &#x67E5;&#x51FA;SID&#x548C;SERIAL# -&gt; &#x67E5;V$SESSION&#x89C6;&#x56FE; + &#x67E5;V$PROCESS&#x89C6;&#x56FE;</span><br><span class="line">SELECT SID,SERIAL#,PADDR FROM V$SESSION WHERE SID=&apos;&#x521A;&#x624D;&#x67E5;&#x5230;&#x7684;SID&apos;</span><br><span class="line">SELECT SPID FROM V$PROCESS WHERE ADDR=&apos;&#x521A;&#x624D;&#x67E5;&#x5230;&#x7684;PADDR&apos;;</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E09;-&#x6162;&#x67E5;&#x8BE2;&#x4F18;&#x5316;"><a href="#&#x4E09;-&#x6162;&#x67E5;&#x8BE2;&#x4F18;&#x5316;" class="headerlink" title="&#x4E09; . &#x6162;&#x67E5;&#x8BE2;&#x4F18;&#x5316;"></a>&#x4E09; . &#x6162;&#x67E5;&#x8BE2;&#x4F18;&#x5316;</h2><h3 id="3-1-SQL-&#x90E8;&#x5206;"><a href="#3-1-SQL-&#x90E8;&#x5206;" class="headerlink" title="3.1 SQL &#x90E8;&#x5206;"></a>3.1 SQL &#x90E8;&#x5206;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x907F;&#x514D; in &#x64CD;&#x4F5C;</span><br><span class="line">Oracle &#x4E2D; in &#x4F1A;&#x88AB;&#x8BD5;&#x56FE;&#x8F6C;&#x6362;&#x6210;&#x591A;&#x4E2A;&#x8868;&#x7684;&#x8FDE;&#x63A5; , &#x8F6C;&#x6362;&#x4E0D;&#x6210;&#x529F;&#x4F1A;&#x5148;&#x8FDB;&#x884C; in &#x4E2D;&#x7684;&#x5B50;&#x67E5;&#x8BE2; , &#x518D;&#x8FDB;&#x884C;&#x5916;&#x90E8;&#x67E5;&#x8BE2;</span><br><span class="line"></span><br><span class="line">// &#x907F;&#x514D; not in</span><br><span class="line">&#x4E0D;&#x7BA1;&#x54EA;&#x4E2A;&#x6570;&#x636E;&#x5E93; , &#x4E00;&#x822C;&#x90FD;&#x662F;&#x4E0D;&#x63A8;&#x8350;&#x7684; ,&#x8FD9;&#x79CD;&#x5199;&#x6CD5;&#x4F1A;&#x8DF3;&#x8FC7;&#x7D22;&#x5F15; (&#x540C;&#x7406;&#x8FD8;&#x6709; is null &#x548C; not null)</span><br><span class="line"></span><br><span class="line">// &#x907F;&#x514D;&#x4F7F;&#x7528; &lt;&gt;</span><br><span class="line">&#x7C7B;&#x4F3C; , &#x4E0D;&#x8D70;&#x7D22;&#x5F15;</span><br><span class="line"></span><br><span class="line">// **&#x91C7;&#x7528;&#x51FD;&#x6570;&#x5904;&#x7406;&#x7684;&#x5B57;&#x6BB5;&#x4E0D;&#x80FD;&#x5229;&#x7528;&#x7D22;&#x5F15;**</span><br><span class="line"></span><br><span class="line">// &#x5173;&#x8054;&#x67E5;&#x8BE2;</span><br><span class="line">- &#x591A;&#x7528; Where &#x8BED;&#x53E5;&#x628A;&#x5355;&#x4E2A;&#x8868;&#x7684;&#x7ED3;&#x679C;&#x96C6;&#x6700;&#x5C0F;&#x5316;&#xFF0C;&#x591A;&#x7528;&#x805A;&#x5408;&#x51FD;&#x6570;&#x6C47;&#x603B;&#x7ED3;&#x679C;&#x96C6;&#x540E;&#x518D;&#x4E0E;&#x5176;&#x5B83;&#x8868;&#x505A;&#x5173;&#x8054;</span><br><span class="line">- &#x591A;&#x7528; &#x53F3;&#x8FDE;&#x63A5;</span><br><span class="line"></span><br><span class="line">// &#x8FC7;&#x6EE4;&#x591A;&#x7528; where ,&#x907F;&#x514D;&#x4F7F;&#x7528; having</span><br><span class="line">- &#x8FD9;&#x4E2A;&#x548C; mysql &#x662F;&#x4E00;&#x81F4;&#x7684; , having &#x662F;&#x5BF9; where &#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x8FC7;&#x6EE4;&#x7EC4;&#x5904;&#x7406; , &#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x6EE4; , &#x4F18;&#x5148;&#x7528; where</span><br><span class="line">- &#x603B;&#x7ED3; : &#x5148;&#x8FC7;&#x6EE4;&#x5C0F;&#x7684;&#x7ED3;&#x679C;&#x96C6;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x5C0F;&#x7684;&#x7ED3;&#x679C;&#x96C6;&#x548C;&#x5176;&#x4ED6;&#x8868;&#x505A;&#x5173;&#x8054;</span><br><span class="line"></span><br><span class="line">// like &#x64CD;&#x4F5C;&#x7B26;</span><br><span class="line">like &#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; instr &#x4EE3;&#x66FF;</span><br><span class="line"></span><br><span class="line">// union&#x64CD;&#x4F5C;&#x7B26; </span><br><span class="line">- &#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x91CD;&#x590D;&#x7ED3;&#x679C; , &#x800C; union &#x4F1A;&#x989D;&#x5916;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x6392;&#x5E8F;</span><br><span class="line">- &#x91C7;&#x7528;union ALL&#x64CD;&#x4F5C;&#x7B26;&#x66FF;&#x4EE3;union&#xFF0C;&#x56E0;&#x4E3A;union ALL&#x64CD;&#x4F5C;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5C06;&#x4E24;&#x4E2A;&#x7ED3;&#x679C;&#x5408;&#x5E76;&#x540E;&#x5C31;&#x8FD4;&#x56DE;</span><br><span class="line"></span><br><span class="line">// SQL &#x6267;&#x884C;&#x4FDD;&#x8BC1;&#x7EDF;&#x4E00;&#x6027;</span><br><span class="line">&#x6D89;&#x53CA;&#x5230; SGA &#x7684;&#x6982;&#x5FF5;</span><br><span class="line"></span><br><span class="line">// where&#x540E;&#x9762;&#x7684;&#x6761;&#x4EF6;&#x987A;&#x5E8F;&#x5F71;&#x54CD;</span><br><span class="line">&#x8FD9;&#x91CC;&#x4E0D;&#x662F;&#x5168;&#x8868;&#x7D22;&#x5F15;&#x7684;&#x95EE;&#x9898; , &#x800C;&#x662F;&#x7531;&#x4E8E; where &#x591A;&#x4E2A;&#x6761;&#x4EF6;&#x65F6; , &#x6BD4;&#x8F83;&#x5E26;&#x6765;&#x7684; cpu &#x5360;&#x7528;&#x7387;&#x95EE;&#x9898;</span><br><span class="line"></span><br><span class="line">// &#x8BE2;&#x8868;&#x987A;&#x5E8F;&#x7684;&#x5F71;&#x54CD;</span><br><span class="line">- &#x8868;&#x7684;&#x987A;&#x5E8F;&#x4E0D;&#x5BF9;&#x4F1A;&#x4EA7;&#x751F;&#x5341;&#x5206;&#x8017;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x53C9;</span><br><span class="line"></span><br><span class="line">// &#x5176;&#x4ED6;&#x7684;&#x65B9;&#x6848;&#x8FD8;&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;</span><br><span class="line">@ https://www.jb51.net/article/97515.htm</span><br><span class="line"></span><br><span class="line">@ https://www.jb51.net/article/23071.htm</span><br><span class="line"></span><br><span class="line">@ https://www.jb51.net/article/40281.htm</span><br></pre></td></tr></table></figure>

<h2 id="&#x56DB;-&#x6027;&#x80FD;&#x4F18;&#x5316;"><a href="#&#x56DB;-&#x6027;&#x80FD;&#x4F18;&#x5316;" class="headerlink" title="&#x56DB; . &#x6027;&#x80FD;&#x4F18;&#x5316;"></a>&#x56DB; . &#x6027;&#x80FD;&#x4F18;&#x5316;</h2><p><strong>&#x633A;&#x4E0D;&#x597D;&#x610F;&#x601D;&#x7684;!!!</strong>   </p>
<p><strong>&#x90FD;&#x662F;&#x6284;&#x7684;&#x4E66;&#x4E0A;&#x7684; !!!</strong>  </p>
<p><strong>&#x800C;&#x4E14;&#x5927;&#x591A;&#x6570;&#x8FD8;&#x6CA1;&#x5B9E;&#x8DF5;&#x8FC7; !!!</strong>   </p>
<p>Oracle &#x6BD5;&#x7ADF;&#x63A5;&#x89E6;&#x6709;&#x9650; , &#x5C31;&#x7B97;&#x78B0;&#x5230;&#x4E86;&#x591A;&#x6570;&#x662F;SQL &#x95EE;&#x9898; , &#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E5F;&#x5C31;&#x78B0;&#x5230;&#x8FC7;&#x51E0;&#x6B21; , &#x5BFC;&#x81F4;&#x65B9;&#x6CD5;&#x5B66;&#x5230;&#x4E0D;&#x5C11; , &#x5B9E;&#x9645;&#x5C31;&#x7528;&#x8FC7;&#x51E0;&#x4E2A; , &#x4F46;&#x662F;&#x6211;&#x90FD;&#x8BB0;&#x4E0B;&#x6765;&#x4E86;!!! &#x1F61C;&#x1F61C;&#x1F61C;</p>
<h3 id="4-1-&#x6574;&#x4F53;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x6D41;&#x7A0B;"><a href="#4-1-&#x6574;&#x4F53;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x6D41;&#x7A0B;" class="headerlink" title="4.1 &#x6574;&#x4F53;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x6D41;&#x7A0B;"></a>4.1 &#x6574;&#x4F53;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x6D41;&#x7A0B;</h3><p><strong>&#x8FD9;&#x91CC;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x522B;&#x4EBA;&#x6587;&#x7AE0;&#x7684;&#x7ED3;&#x679C; , &#x6CA1;&#x6709;&#x6D4B;&#x8BD5; , &#x4EC5;&#x4F9B;&#x53C2;&#x8003; !</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// PS : &#x521D;&#x59CB;&#x5316;&#x65F6;&#x95F4; 49.41</span><br><span class="line"></span><br><span class="line">// &#x589E;&#x5927; SGA Buffer Cache &#x548C; SGA Shared Pool -&gt; 48.57</span><br><span class="line">- &#x589E;&#x5927; SGA &#x5DF2;&#x7ECF;&#x7F13;&#x51B2;&#x770B;&#x6765;&#x5BF9;&#x4E8E;&#x6027;&#x80FD;&#x7684;&#x63D0;&#x5347;&#x5E76;&#x4E0D;&#x663E;&#x8457;&#xFF0C;&#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x53EA;&#x63D0;&#x5347;&#x4E86; 1.73%</span><br><span class="line"></span><br><span class="line">// &#x589E;&#x5927; SGA Redo Cache &#x548C; Redo Log Files -&gt; 41.39</span><br><span class="line">- &#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x63D0;&#x5347;&#x4E86; 17.35%&#xFF0C;TPS &#x4E5F;&#x63D0;&#x5347;&#x4E86; 9.33%&#x3002;&#x56E0;&#x4E3A;&#x52A0;&#x8F7D;&#x548C;&#x540C;&#x65F6;&#x63D2;&#x5165;&#xFF0C;&#x66F4;&#x65B0;&#xFF0C;&#x5220;&#x9664;&#x9700;&#x8981;&#x6BD4; 8M &#x5927;&#x7684;&#x7A7A;&#x95F4;</span><br><span class="line">- &#x4F46;&#x662F;&#x770B;&#x8D77;&#x6765;&#x589E;&#x52A0;&#x5185;&#x5B58;&#x6027;&#x80FD;&#x5E76;&#x6CA1;&#x6709;&#x663E;&#x8457;&#x63D0;&#x5347;</span><br><span class="line"></span><br><span class="line">// &#x589E;&#x5927; Database Block Size (2K-4K) -&gt; 17.35</span><br><span class="line">- &#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x63D0;&#x5347;&#x4E86; 138%&#xFF01;&#x800C;&#x5BF9; TPS &#x503C;&#x6CA1;&#x6709;&#x5F88;&#x5927;&#x7684;&#x5F71;&#x54CD;</span><br><span class="line"></span><br><span class="line">// &#x4F7F;&#x7528; Tablespaces Local -&gt; 15.07</span><br><span class="line">- TPS &#x8F7B;&#x5FAE;&#x63D0;&#x5347;</span><br><span class="line"></span><br><span class="line">// Database Block Size &#x589E;&#x5927; (4K-8K) -&gt; 11.42</span><br><span class="line">- TPS &#x7EE7;&#x7EED;&#x63D0;&#x5347; , &#x533A;&#x522B;&#x8F83;&#x5927;</span><br><span class="line"></span><br><span class="line">// &#x6DFB;&#x52A0; io_slaves -&gt; 10.48</span><br><span class="line">dbwr_io_slaves 4\</span><br><span class="line">lgwr_io_slaves (derived) 4</span><br><span class="line"></span><br><span class="line">// &#x4F18;&#x5316;Linux &#x5185;&#x6838; -&gt; 9.40</span><br><span class="line">&#x53EF;&#x4EE5;&#x770B;&#x5230; , &#x5185;&#x6838;&#x7248;&#x672C;&#x4F18;&#x5316;&#x540E; , &#x6027;&#x80FD;&#x662F;&#x6709;&#x4E00;&#x5B9A;&#x63D0;&#x5347;&#x7684;</span><br><span class="line"></span><br><span class="line">// &#x8C03;&#x6574;&#x865A;&#x62DF;&#x5B50;&#x5185;&#x5B58; -&gt; 5.58</span><br><span class="line">- /ect/sysctl.cong</span><br><span class="line">    -&gt; vm.bdflush = 100 1200 128 512 15 5000 500 1884 2</span><br></pre></td></tr></table></figure>

<p><strong>&#x8FD9;&#x4E2A;&#x6D41;&#x7A0B;&#x4E0D;&#x80FD;&#x4F5C;&#x4E3A;&#x6807;&#x6746; , &#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x4F18;&#x5316; Oracle &#x7684;&#x601D;&#x8DEF; , &#x53EF;&#x4EE5;&#x770B;&#x5230; , &#x6027;&#x80FD;&#x63D0;&#x5347;&#x5F88;&#x5927;</strong></p>
<h3 id="4-2-&#x786C;&#x4EF6;&#x4F18;&#x5316;"><a href="#4-2-&#x786C;&#x4EF6;&#x4F18;&#x5316;" class="headerlink" title="4.2 &#x786C;&#x4EF6;&#x4F18;&#x5316;"></a>4.2 &#x786C;&#x4EF6;&#x4F18;&#x5316;</h3><p>&#x6B64;&#x5904;&#x662F;&#x4F7F;&#x7528;IO&#x6821;&#x51C6;&#xFF08;I/O Calibration&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x8BC4;&#x6D4B;&#x4E00;&#x4E0B;&#x6570;&#x636E;&#x5E93;&#x7684;I/O&#x6027;&#x80FD; , &#x901A;&#x8FC7; &#x5206;&#x6790; IO &#x7ED3;&#x679C;&#x5224;&#x65AD;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x7B56;&#x7565;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// Step 1 : &#x786E;&#x5B9A;&#x5E76;&#x884C;&#x5EA6;&#x914D;&#x7F6E; (&#x901A;&#x5E38;&#x662F;&#x6838;&#x6570;&#x7684;2&#x500D;)</span><br><span class="line">show parameters parallel_thread</span><br><span class="line"></span><br><span class="line">// Step 2 : &#x786E;&#x5B9A;&#x5E76;&#x884C;&#x7B56;&#x7565; (auto : Oracle&#x5C06;&#x4F9D;&#x636E;&#x8981;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x7279;&#x6027;&#x548C;&#x5BF9;&#x8C61;&#x7684;&#x5927;&#x5C0F;&#x6765;&#x786E;&#x5B9A;&#x5E76;&#x884C;&#x5EA6;)</span><br><span class="line">- &#x67E5;&#x8BE2;&#x7B56;&#x7565; : show parameters parallel_degree_policy</span><br><span class="line">- &#x8BBE;&#x7F6E;&#x7B56;&#x7565; : alter session set parallel_degree_policy = &apos;auto&apos;</span><br><span class="line"></span><br><span class="line">// Step 3 : &#x67E5;&#x770B;&#x5E76;&#x884C;&#x5EA6;&#x6570;&#x636E;</span><br><span class="line">- &#x6253;&#x5F00;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x7684;&#x8F93;&#x51FA;&#x529F;&#x80FD; : set serveroutput on</span><br><span class="line">- &#x67E5;&#x770B;&#x8BE6;&#x60C5; : </span><br><span class="line">set serveroutput on</span><br><span class="line">DECLARE</span><br><span class="line">  lat  INTEGER;</span><br><span class="line">  iops INTEGER;</span><br><span class="line">  mbps INTEGER;</span><br><span class="line">BEGIN</span><br><span class="line">-- DBMS_RESOURCE_MANAGER.CALIBRATE_IO (disk_count,max_latency , iops, mbps, lat);</span><br><span class="line">   DBMS_RESOURCE_MANAGER.CALIBRATE_IO (2, 10, iops, mbps, lat);</span><br><span class="line"> </span><br><span class="line">  DBMS_OUTPUT.PUT_LINE (&apos;max_iops = &apos; || iops);</span><br><span class="line">  DBMS_OUTPUT.PUT_LINE (&apos;latency  = &apos; || lat);</span><br><span class="line">  dbms_output.put_line(&apos;max_mbps = &apos; || mbps);</span><br><span class="line">end;</span><br><span class="line">/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// &#x95EE;&#x9898;&#x8865;&#x5145; : ORA-56708: &#x627E;&#x4E0D;&#x5230;&#x4EFB;&#x4F55;&#x5177;&#x6709;&#x5F02;&#x6B65; I/O &#x529F;&#x80FD;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;</span><br><span class="line">- &#x786E;&#x5B9A; sync : show parameter filesystemio_options</span><br><span class="line">- &#x8BBE;&#x7F6E; sync : filesystemio_options</span><br><span class="line">    - ASYNCH: &#x4F7F;Oracle&#x652F;&#x6301;&#x6587;&#x4EF6;&#x7684;&#x5F02;&#x6B65;&#xFF08;Asynchronous&#xFF09;IO</span><br><span class="line">    - DIRECTIO&#xFF1A;&#x4F7F;Oracle&#x652F;&#x6301;&#x6587;&#x4EF6;&#x7684;Direct IO</span><br><span class="line">    - SETALL&#xFF1A;&#x4F7F;Oracle&#x540C;&#x65F6;&#x652F;&#x6301;&#x6587;&#x4EF6;&#x7684;Asynchronous IO&#x548C;Direct IO</span><br><span class="line">    - NONE&#xFF1A;&#x4F7F;Oracle&#x5173;&#x95ED;&#x5BF9;Asynchronous IO&#x548C;Direct IO&#x7684;&#x652F;&#x6301;</span><br><span class="line">    1&gt; alter system set filesystemio_options=setall scope=spfile;</span><br><span class="line">    2&gt; shutdown immediate;</span><br><span class="line">    3&gt; startup</span><br><span class="line">    // PS : &#x6CE8;&#x610F;&#x5176;&#x4E2D;&#x7BA1;&#x7406;&#x5458;&#x6743;&#x9650;&#x95EE;&#x9898;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">alter system set filesystemio_options=none scope=spfile;</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E94;-&#x6982;&#x5FF5;&#x8865;&#x5145;"><a href="#&#x4E94;-&#x6982;&#x5FF5;&#x8865;&#x5145;" class="headerlink" title="&#x4E94; . &#x6982;&#x5FF5;&#x8865;&#x5145;"></a>&#x4E94; . &#x6982;&#x5FF5;&#x8865;&#x5145;</h2><h3 id="5-1-SGA"><a href="#5-1-SGA" class="headerlink" title="5.1 SGA"></a>5.1 SGA</h3><p><strong>&#x7CFB;&#x7EDF;&#x5168;&#x5C40;&#x533A;&#x57DF;(SGA)</strong> &#x662F;&#x4E00;&#x7EC4;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x7ED3;&#x6784;&#xFF0C;&#x79F0;&#x4E3A; SGA &#x7EC4;&#x4EF6;&#xFF0C;&#x5305;&#x542B;&#x4E00;&#x4E2A; Oracle &#x6570;&#x636E;&#x5E93;&#x5B9E;&#x4F8B;&#x7684;&#x6570;&#x636E;&#x548C;&#x63A7;&#x5236;&#x4FE1;&#x606F;&#x3002;SGA &#x7531;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x548C;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#x5171;&#x4EAB;&#x3002;SGA &#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x793A;&#x4F8B;&#x5305;&#x62EC;&#x7F13;&#x5B58;&#x7684;&#x6570;&#x636E;&#x5757;&#x548C;&#x5171;&#x4EAB;&#x7684; SQL &#x533A;&#x57DF;&#x3002;</p>
<blockquote>
<p>&#x7EC4;&#x6210;&#x90E8;&#x5206; :</p>
</blockquote>
<ul>
<li><strong>Database buffer cache</strong> : &#x6570;&#x636E;&#x7F13;&#x5B58;<ul>
<li>&#x5728;&#x67E5;&#x8BE2;&#x6216;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x4E4B;&#x524D;&#xFF0C;&#x5FC5;&#x987B;&#x4ECE;&#x78C1;&#x76D8;&#x8BFB;&#x53D6;&#x6570;&#x636E;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5728;&#x7F13;&#x51B2;&#x533A;&#x7F13;&#x5B58;&#x4E2D;&#x3002;</li>
<li>&#x6240;&#x6709;&#x8FDE;&#x63A5;&#x5230;&#x6570;&#x636E;&#x5E93;&#x7684;&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x90FD;&#x5171;&#x4EAB;&#x5BF9;&#x7F13;&#x51B2;&#x533A;&#x7F13;&#x5B58;&#x7684;&#x8BBF;&#x95EE;&#x3002;</li>
<li>&#x4E3A;&#x4E86;&#x83B7;&#x5F97;&#x6700;&#x4F73;&#x6027;&#x80FD;&#xFF0C;&#x7F13;&#x51B2;&#x533A;&#x7F13;&#x5B58;&#x5E94;&#x8BE5;&#x8DB3;&#x591F;&#x5927;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x9891;&#x7E41;&#x7684;&#x78C1;&#x76D8; I/O &#x64CD;&#x4F5C;&#x3002;</li>
</ul>
</li>
<li><strong>Shared pool</strong> : &#x5171;&#x4EAB;&#x6C60;&#x7F13;&#x5B58;&#x7528;&#x6237;&#x5171;&#x4EAB;&#x7684;&#x4FE1;&#x606F; , &#x5305;&#x62EC;&#x5982;&#x4E0B;&#x5185;&#x5BB9;<ul>
<li>&#x53EF;&#x91CD;&#x7528;&#x7684; SQL &#x8BED;&#x53E5;</li>
<li>&#x6765;&#x81EA;&#x6570;&#x636E;&#x5B57;&#x5178;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x7528;&#x6237;&#x5E10;&#x6237;&#x6570;&#x636E;&#x3001;&#x8868;&#x548C;&#x7D22;&#x5F15;&#x63CF;&#x8FF0;&#x4EE5;&#x53CA;&#x7279;&#x6743;</li>
<li>&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#xFF0C;&#x5B83;&#x662F;&#x5B58;&#x50A8;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x53EF;&#x6267;&#x884C;&#x4EE3;&#x7801;</li>
</ul>
</li>
<li><strong>Redo log buffer</strong> : &#x8FD9;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x901A;&#x8FC7;&#x7F13;&#x5B58;&#x91CD;&#x505A;&#x4FE1;&#x606F;&#x6765;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x76F4;&#x5230;&#x53EF;&#x4EE5;&#x5C06;&#x5B83;&#x5199;&#x5165;&#x5B58;&#x50A8;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x7684;&#x7269;&#x7406;&#x5728;&#x7EBF;&#x91CD;&#x505A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;</li>
<li><strong>Large pool</strong> : &#x8FD9;&#x4E2A;&#x53EF;&#x9009;&#x533A;&#x57DF;&#x7528;&#x4E8E;&#x4E3A;&#x5404;&#x79CD;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x7A0B;&#x7F13;&#x51B2;&#x5927;&#x578B; I/O &#x8BF7;&#x6C42;</li>
<li><strong>Java pool</strong> : Java &#x6C60;&#x662F;&#x7528;&#x4E8E; Java &#x865A;&#x62DF;&#x673A;(JVM)&#x4E2D;&#x6240;&#x6709;&#x7279;&#x5B9A;&#x4E8E;&#x4F1A;&#x8BDD;&#x7684; Java &#x4EE3;&#x7801;&#x548C;&#x6570;&#x636E;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;</li>
<li><strong>Streams pool</strong> : Streams &#x6C60;&#x662F; Oracle Streams &#x7279;&#x6027;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;</li>
<li><strong>Result cache</strong> : &#x7ED3;&#x679C;&#x7F13;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x3002;&#x5982;&#x679C;&#x8FD0;&#x884C;&#x7684;&#x67E5;&#x8BE2;&#x5C06;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x5728;&#x7ED3;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x6570;&#x636E;&#x5E93;&#x5C06;&#x4ECE;&#x7ED3;&#x679C;&#x7F13;&#x5B58;&#x8FD4;&#x56DE;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x91CD;&#x65B0;&#x8FD0;&#x884C;&#x67E5;&#x8BE2;&#x3002;</li>
</ul>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x7B14;&#x8005;&#x53EA;&#x662F;&#x57FA;&#x4E8E;&#x901A;&#x8FC7;&#x4E1A;&#x52A1;&#x8981;&#x6C42;&#x7684;&#x89D2;&#x5EA6;&#x8FDB;&#x884C; Oracle &#x4F18;&#x5316; , &#x5E76;&#x6CA1;&#x6709;&#x6DF1;&#x5165; Oracle &#x4E1A;&#x52A1;&#x4F18;&#x5316; , &#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x770B; <strong>&lt;Oracle&#x6570;&#x636E;&#x5E93;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x65B9;&#x6CD5;&#x8BBA;&#x548C;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&gt;</strong> , &#x5BF9;&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x7CFB;&#x7EDF;&#x7684;&#x4F18;&#x5316;</p>
<p>&#x540E;&#x7EED;&#x53EF;&#x80FD;&#x4F1A;&#x7EE7;&#x7EED;&#x6DF1;&#x5165; Oracle &#x7EC6;&#x8282; , &#x62ED;&#x76EE;&#x4EE5;&#x5F85;.</p>
<p>&#x67E5;&#x6587;&#x6863;&#x5C5E;&#x5B9E;&#x592A;&#x7C7B;&#x4E86; , &#x4E0D;&#x8FC7; Oracle &#x6587;&#x6863;&#x5F88;&#x5B8C;&#x5584; , &#x64CD;&#x4F5C;&#x8D77;&#x6765;&#x4E5F;&#x7B80;&#x5355;</p>
<h2 id="&#x53C2;&#x8003;&#x6587;&#x6863;-&#x975E;&#x5E38;&#x611F;&#x8C22;"><a href="#&#x53C2;&#x8003;&#x6587;&#x6863;-&#x975E;&#x5E38;&#x611F;&#x8C22;" class="headerlink" title="&#x53C2;&#x8003;&#x6587;&#x6863; (&#x975E;&#x5E38;&#x611F;&#x8C22;)"></a>&#x53C2;&#x8003;&#x6587;&#x6863; (&#x975E;&#x5E38;&#x611F;&#x8C22;)</h2><p><a href="/external_links/4df63a3dd9a101138318f652d0fec71e.html" target="blank" rel="noopener">www.cnblogs.com/wolfplan/p/&#x2026;</a></p>
<p><a href="/external_links/f3597ff0f38852f13e9e181ad1338468.html" target="blank" rel="noopener">www.cnblogs.com/pizicai17/p&#x2026;</a></p>
<p><a href="/external_links/206268fe82ae6613baa6362748c9a2e0.html" target="blank" rel="noopener">www.cnblogs.com/sunxiuwen/p&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/89429284ac092b73576979ef6acbcec7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7001816849826447397.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7001816849826447397.html" itemprop="url">SpringCloudAlibaba全网最全讲解7️⃣之Ga</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-29T19:49:38+08:00">
                2021-08-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x8FD9;&#x662F;&#x6211;&#x53C2;&#x4E0E;8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;&#x7684;&#x7B2C;29&#x5929;&#xFF0C;&#x6D3B;&#x52A8;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#xFF1A;<a href="https://dev.newban.cn/6987962113788493831">8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;</a></strong></p>
<h1 id="&#x1F308;&#x4E13;&#x680F;&#x7B80;&#x4ECB;"><a href="#&#x1F308;&#x4E13;&#x680F;&#x7B80;&#x4ECB;" class="headerlink" title="&#x1F308;&#x4E13;&#x680F;&#x7B80;&#x4ECB;"></a>&#x1F308;&#x4E13;&#x680F;&#x7B80;&#x4ECB;</h1><pre><code>**&#x611F;&#x8C22;&#x9605;&#x8BFB;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x5BF9;&#x4F60;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#xFF0C;&#x535A;&#x6587;&#x82E5;&#x6709;&#x7455;&#x75B5;&#x8BF7;&#x5728;&#x8BC4;&#x8BBA;&#x533A;&#x7559;&#x8A00;&#x6216;&#x5728;&#x4E3B;&#x9875;&#x4E2A;&#x4EBA;&#x4ECB;&#x7ECD;&#x4E2D;&#x6DFB;&#x52A0;&#x6211;&#x79C1;&#x804A;&#x6211;,&#x611F;&#x8C22;&#x6BCF;&#x4E00;&#x4F4D;&#x5C0F;&#x4F19;&#x4F34;&#x4E0D;&#x541D;&#x8D50;&#x6559;&#x3002;&#x6211;&#x662F;XiaoLin&#xFF0C;&#x65E2;&#x4F1A;&#x5199;bug&#x4E5F;&#x4F1A;&#x5531;rap&#x7684;&#x7537;&#x5B69;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E13;&#x680F;&#x4E3B;&#x8981;&#x662F;&#x4ECB;&#x7ECD;&#x76EE;&#x524D;&#x5FAE;&#x670D;&#x52A1;&#x6700;&#x4E3B;&#x6D41;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;SpringCloudAlibaba&#xFF0C;&#x5C06;&#x4F1A;&#x5206;&#x7EC4;&#x4EF6;&#x4ECB;&#x7ECD;&#x3002;&#x4E13;&#x680F;&#x5730;&#x5740;&#xFF1A; [SpringCloudAlibaba](https://juejin.cn/column/7001291481705086990)&#x3002;**</code></pre><ul>
<li><a href="https://dev.newban.cn/7001296810102751262">SpringCloudAlibaba&#x5168;&#x7F51;&#x6700;&#x5168;&#x8BB2;&#x89E3;6&#xFE0F;&#x20E3;&#x4E4B;Sentinel&#xFF08;&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF09;</a></li>
<li><a href="https://dev.newban.cn/7001295476725121060">SpringCloudAlibaba&#x5168;&#x7F51;&#x6700;&#x5168;&#x8BB2;&#x89E3;5&#xFE0F;&#x20E3;&#x4E4B;Feign&#xFF08;&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF09;</a></li>
<li><a href="https://dev.newban.cn/7000915211439833125">SpringCloudAlibaba&#x5168;&#x7F51;&#x6700;&#x5168;&#x8BB2;&#x89E3;4&#xFE0F;&#x20E3;&#x4E4B;Ribbon&#xFF08;&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF09;</a></li>
<li><a href="https://dev.newban.cn/7000620997221023751">SpringCloudAlibaba&#x5168;&#x7F51;&#x6700;&#x5168;&#x8BB2;&#x89E3;3&#xFE0F;&#x20E3;&#x4E4B;Nacos&#xFF08;&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF09;</a></li>
<li><a href="https://dev.newban.cn/7000225781137801229">SpringCloudAlibaba&#x5168;&#x7F51;&#x6700;&#x5168;&#x8BB2;&#x89E3;2&#xFE0F;&#x20E3;&#xFF08;&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF09;</a></li>
<li><a href="https://dev.newban.cn/6999854565386518558">SpringCloudAlibaba&#x5168;&#x7F51;&#x6700;&#x5168;&#x8BB2;&#x89E3;1&#xFE0F;&#x20E3;&#xFF08;&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF09;</a></li>
</ul>
<h1 id="&#x4E5D;&#x3001;&#x670D;&#x52A1;&#x7F51;&#x5173;&#xFF1A;Gateway"><a href="#&#x4E5D;&#x3001;&#x670D;&#x52A1;&#x7F51;&#x5173;&#xFF1A;Gateway" class="headerlink" title="&#x4E5D;&#x3001;&#x670D;&#x52A1;&#x7F51;&#x5173;&#xFF1A;Gateway"></a>&#x4E5D;&#x3001;&#x670D;&#x52A1;&#x7F51;&#x5173;&#xFF1A;Gateway</h1><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/1e6f5f70b315ce9bbdd927e637c6a1c09ddf8798566b6c4360d47c53217fa2f1" alt="image-20210507115602441"></p>
<h2 id="9-1&#x3001;&#x7F51;&#x5173;&#x7B80;&#x4ECB;"><a href="#9-1&#x3001;&#x7F51;&#x5173;&#x7B80;&#x4ECB;" class="headerlink" title="9.1&#x3001;&#x7F51;&#x5173;&#x7B80;&#x4ECB;"></a>9.1&#x3001;&#x7F51;&#x5173;&#x7B80;&#x4ECB;</h2><pre><code>&#x5927;&#x5BB6;&#x90FD;&#x90FD;&#x77E5;&#x9053;&#x5728;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x4F1A;&#x88AB;&#x62C6;&#x5206;&#x4E3A;&#x5F88;&#x591A;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x3002;&#x90A3;&#x4E48;&#x4F5C;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x8981;&#x5982;&#x4F55;&#x53BB;&#x8C03;&#x7528;&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x5462;&#xFF1F;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7F51;&#x5173;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x522B;&#x53BB;&#x8C03;&#x7528;&#x3002;</code></pre><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/276e8865b743c9d3b695522df0a3e7e0b84d7b0c44a17b43cfea974df69f0128" alt="image-20210507115048632"></p>
<pre><code>&#x8FD9;&#x6837;&#x7684;&#x67B6;&#x6784;&#x4F1A;&#x5B58;&#x5728;&#x8BB8;&#x591A;&#x7684;&#x95EE;&#x9898;&#xFF1A;</code></pre><ol>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x591A;&#x6B21;&#x8BF7;&#x6C42;&#x4E0D;&#x540C;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#xFF0C;&#x589E;&#x52A0;&#x5BA2;&#x6237;&#x7AEF;&#x4EE3;&#x7801;&#x6216;&#x914D;&#x7F6E;&#x7F16;&#x5199;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;</li>
<li>&#x8BA4;&#x8BC1;&#x590D;&#x6742;&#xFF0C;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x90FD;&#x9700;&#x8981;&#x72EC;&#x7ACB;&#x8BA4;&#x8BC1;&#x3002;</li>
<li>&#x5B58;&#x5728;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#xFF0C;&#x5728;&#x4E00;&#x5B9A;&#x573A;&#x666F;&#x4E0B;&#x5904;&#x7406;&#x76F8;&#x5BF9;&#x590D;&#x6742;&#x3002;</li>
</ol>
<pre><code>&#x7F51;&#x5173;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x800C;&#x751F;&#x7684;&#x3002;&#x6240;&#x8C13;&#x7684;API&#x7F51;&#x5173;&#xFF0C;&#x5C31;&#x662F;&#x6307;&#x7CFB;&#x7EDF;&#x7684;&#x7EDF;&#x4E00;&#x5165;&#x53E3;&#xFF0C;&#x5B83;&#x5C01;&#x88C5;&#x4E86;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#xFF0C;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x7EDF;&#x4E00;&#x670D;&#x52A1;&#xFF0C;&#x4E00;&#x4E9B;&#x4E0E;&#x4E1A;&#x52A1;&#x672C;&#x8EAB;&#x529F;&#x80FD;&#x65E0;&#x5173;&#x7684;&#x516C;&#x5171;&#x903B;&#x8F91;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x5B9E;&#x73B0;&#xFF0C;&#x8BF8;&#x5982;&#x8BA4;&#x8BC1;&#x3001;&#x9274;&#x6743;&#x3001;&#x76D1;&#x63A7;&#x3001;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x7B49;&#x7B49;&#x3002;</code></pre><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/201024ef73fc945be37d55bcf365aa1f470972e3971bfaabaee9039e5d5e6245" alt="image-20210507115517531"></p>
<h2 id="9-2&#x3001;&#x5E38;&#x7528;&#x7684;&#x7F51;&#x5173;"><a href="#9-2&#x3001;&#x5E38;&#x7528;&#x7684;&#x7F51;&#x5173;" class="headerlink" title="9.2&#x3001;&#x5E38;&#x7528;&#x7684;&#x7F51;&#x5173;"></a>9.2&#x3001;&#x5E38;&#x7528;&#x7684;&#x7F51;&#x5173;</h2><h3 id="9-2-1&#x3001;Ngnix-lua"><a href="#9-2-1&#x3001;Ngnix-lua" class="headerlink" title="9.2.1&#x3001;Ngnix+lua"></a>9.2.1&#x3001;Ngnix+lua</h3><pre><code>&#x4F7F;&#x7528;nginx&#x7684;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x53EF;&#x5B9E;&#x73B0;&#x5BF9;api&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x53CA;&#x9AD8;&#x53EF;&#x7528;&#x3002;


lua&#x662F;&#x4E00;&#x79CD;&#x811A;&#x672C;&#x8BED;&#x8A00;,&#x53EF;&#x4EE5;&#x6765;&#x7F16;&#x5199;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x903B;&#x8F91;, nginx&#x652F;&#x6301;lua&#x811A;&#x672C;</code></pre><h3 id="9-2-2&#x3001;Kong"><a href="#9-2-2&#x3001;Kong" class="headerlink" title="9.2.2&#x3001;Kong"></a>9.2.2&#x3001;Kong</h3><pre><code>&#x57FA;&#x4E8E;Nginx+Lua&#x5F00;&#x53D1;&#xFF0C;&#x6027;&#x80FD;&#x9AD8;&#xFF0C;&#x7A33;&#x5B9A;&#xFF0C;&#x6709;&#x591A;&#x4E2A;&#x53EF;&#x7528;&#x7684;&#x63D2;&#x4EF6;(&#x9650;&#x6D41;&#x3001;&#x9274;&#x6743;&#x7B49;&#x7B49;)&#x53EF;&#x4EE5;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#x3002;</code></pre><p>&#x4ED6;&#x7684;&#x7F3A;&#x70B9;&#xFF1A;</p>
<ol>
<li>&#x53EA;&#x652F;&#x6301;Http&#x534F;&#x8BAE;&#x3002;</li>
<li>&#x4E8C;&#x6B21;&#x5F00;&#x53D1;&#xFF0C;&#x81EA;&#x7531;&#x6269;&#x5C55;&#x56F0;&#x96BE;&#x3002;</li>
<li>&#x63D0;&#x4F9B;&#x7BA1;&#x7406;API&#xFF0C;&#x7F3A;&#x4E4F;&#x66F4;&#x6613;&#x7528;&#x7684;&#x7BA1;&#x63A7;&#x3001;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x3002;</li>
</ol>
<h3 id="9-2-3&#x3001;Zuul"><a href="#9-2-3&#x3001;Zuul" class="headerlink" title="9.2.3&#x3001;Zuul"></a>9.2.3&#x3001;Zuul</h3><pre><code>Netflix&#x5F00;&#x6E90;&#x7684;&#x7F51;&#x5173;&#xFF0C;&#x529F;&#x80FD;&#x4E30;&#x5BCC;&#xFF0C;&#x4F7F;&#x7528;JAVA&#x5F00;&#x53D1;&#xFF0C;&#x6613;&#x4E8E;&#x4E8C;&#x6B21;&#x5F00;&#x53D1;&#x3002;


&#x4ED6;&#x7684;&#x7F3A;&#x70B9;&#xFF1A;</code></pre><ol>
<li>&#x7F3A;&#x4E4F;&#x7BA1;&#x63A7;&#xFF0C;&#x65E0;&#x6CD5;&#x52A8;&#x6001;&#x914D;&#x7F6E;&#x3002;</li>
<li>&#x4F9D;&#x8D56;&#x7EC4;&#x4EF6;&#x8F83;&#x591A;&#x3002;</li>
<li>&#x5904;&#x7406;Http&#x8BF7;&#x6C42;&#x4F9D;&#x8D56;&#x7684;&#x662F;Web&#x5BB9;&#x5668;&#xFF0C;&#x6027;&#x80FD;&#x4E0D;&#x5982;Nginx&#x3002;</li>
</ol>
<h3 id="9-2-4&#x3001;Spring-Cloud-Gateway"><a href="#9-2-4&#x3001;Spring-Cloud-Gateway" class="headerlink" title="9.2.4&#x3001;Spring Cloud Gateway"></a>9.2.4&#x3001;Spring Cloud Gateway</h3><pre><code>Spring&#x516C;&#x53F8;&#x4E3A;&#x4E86;&#x66FF;&#x6362;Zuul&#x800C;&#x5F00;&#x53D1;&#x7684;&#x7F51;&#x5173;&#x670D;&#x52A1;&#xFF0C;SpringCloud alibaba&#x6280;&#x672F;&#x6808;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x81EA;&#x5DF1;&#x7684;&#x7F51;&#x5173;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91C7;&#x7528;Spring Cloud Gateway&#x6765;&#x505A;&#x7F51;&#x5173;</code></pre><h2 id="9-3&#x3001;Gateway&#x7B80;&#x4ECB;"><a href="#9-3&#x3001;Gateway&#x7B80;&#x4ECB;" class="headerlink" title="9.3&#x3001;Gateway&#x7B80;&#x4ECB;"></a>9.3&#x3001;Gateway&#x7B80;&#x4ECB;</h2><pre><code>Spring Cloud Gateway&#x662F;Spring&#x516C;&#x53F8;&#x57FA;&#x4E8E;Spring 5.0&#xFF0C;Spring Boot 2.0 &#x548C; Project Reactor &#x7B49;&#x6280;&#x672F;&#x5F00;&#x53D1;&#x7684;&#x7F51;&#x5173;&#xFF0C;&#x5B83;&#x65E8;&#x5728;&#x4E3A;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x6709;&#x6548;&#x7684;&#x7EDF;&#x4E00;&#x7684; API &#x8DEF;&#x7531;&#x7BA1;&#x7406;&#x65B9;&#x5F0F;&#x3002;&#x5B83;&#x7684;&#x76EE;&#x6807;&#x662F;&#x66FF;&#x4EE3;Netflix Zuul&#xFF0C;&#x5176;&#x4E0D;&#x4EC5;&#x63D0;&#x4F9B;&#x7EDF;&#x4E00;&#x7684;&#x8DEF;&#x7531;&#x65B9;&#x5F0F;&#xFF0C;&#x5E76;&#x4E14;&#x57FA;&#x4E8E; Filter &#x94FE;&#x7684;&#x65B9;&#x5F0F;&#x63D0;&#x4F9B;&#x4E86;&#x7F51;&#x5173;&#x57FA;&#x672C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#x5B89;&#x5168;&#xFF0C;&#x76D1;&#x63A7;&#x548C;&#x9650;&#x6D41;&#x3002;


&#x4ED6;&#x7684;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;&#xFF1A;</code></pre><ol>
<li>&#x8FDB;&#x884C;&#x8F6C;&#x53D1;&#x91CD;&#x5B9A;&#x5411;&#x3002;</li>
<li>&#x5728;&#x5F00;&#x59CB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6240;&#x6709;&#x7C7B;&#x90FD;&#x9700;&#x8981;&#x505A;&#x7684;&#x521D;&#x59CB;&#x5316;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#x3002;</li>
</ol>
<h2 id="9-4&#x3001;&#x5FEB;&#x901F;&#x5165;&#x95E8;"><a href="#9-4&#x3001;&#x5FEB;&#x901F;&#x5165;&#x95E8;" class="headerlink" title="9.4&#x3001;&#x5FEB;&#x901F;&#x5165;&#x95E8;"></a>9.4&#x3001;&#x5FEB;&#x901F;&#x5165;&#x95E8;</h2><pre><code>&#x9700;&#x6C42;&#xFF1A;&#x901A;&#x8FC7;&#x6D4F;&#x89C8;&#x5668;&#x8BBF;&#x95EE;api&#x7F51;&#x5173;,&#x7136;&#x540E;&#x901A;&#x8FC7;&#x7F51;&#x5173;&#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x5546;&#x54C1;&#x5FAE;&#x670D;&#x52A1;&#x3002;</code></pre><h3 id="9-4-1&#x3001;&#x57FA;&#x7840;&#x7248;"><a href="#9-4-1&#x3001;&#x57FA;&#x7840;&#x7248;" class="headerlink" title="9.4.1&#x3001;&#x57FA;&#x7840;&#x7248;"></a>9.4.1&#x3001;&#x57FA;&#x7840;&#x7248;</h3><blockquote>
<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;api-gateway &#x6A21;&#x5757;&#xFF0C;&#x5E76;&#x4E14;&#x5BFC;&#x5165;&#x4E0B;&#x9762;&#x7684;&#x4F9D;&#x8D56;&#x3002;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">  &lt;parent&gt;</span><br><span class="line">    &lt;artifactId&gt;Shop-parent&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;cn.linstudy&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">  &lt;/parent&gt;</span><br><span class="line">  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">  &lt;artifactId&gt;api-gateway&lt;/artifactId&gt;</span><br><span class="line"></span><br><span class="line">  &lt;properties&gt;</span><br><span class="line">    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;</span><br><span class="line">    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;</span><br><span class="line">  &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">    &lt;!--gateway&#x7F51;&#x5173;--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;server:</span><br><span class="line">  port: 9000 # &#x6307;&#x5B9A;&#x7F51;&#x5173;&#x670D;&#x52A1;&#x7684;&#x7AEF;&#x53E3;</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: api-gateway</span><br><span class="line">  cloud:</span><br><span class="line">    gateway:</span><br><span class="line">      routes: # &#x8DEF;&#x7531;&#x6570;&#x7EC4;[&#x8DEF;&#x7531; &#x5C31;&#x662F;&#x6307;&#x5B9A;&#x5F53;&#x8BF7;&#x6C42;&#x6EE1;&#x8DB3;&#x4EC0;&#x4E48;&#x6761;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x8F6C;&#x5230;&#x54EA;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;]</span><br><span class="line">        - id: product_route # &#x5F53;&#x524D;&#x8DEF;&#x7531;&#x7684;&#x6807;&#x8BC6;, &#x8981;&#x6C42;&#x552F;&#x4E00;</span><br><span class="line">          uri: http://localhost:8081 # &#x8BF7;&#x6C42;&#x8981;&#x8F6C;&#x53D1;&#x5230;&#x7684;&#x5730;&#x5740;</span><br><span class="line">          order: 1 # &#x8DEF;&#x7531;&#x7684;&#x4F18;&#x5148;&#x7EA7;,&#x6570;&#x5B57;&#x8D8A;&#x5C0F;&#x7EA7;&#x522B;&#x8D8A;&#x9AD8;</span><br><span class="line">          predicates: # &#x65AD;&#x8A00;(&#x5C31;&#x662F;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x8981;&#x6EE1;&#x8DB3;&#x7684;&#x6761;&#x4EF6;)</span><br><span class="line">            - Path=/product-serv/** # &#x5F53;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#x6EE1;&#x8DB3;Path&#x6307;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x65F6;,&#x624D;&#x8FDB;&#x884C;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;</span><br><span class="line">          filters: # &#x8FC7;&#x6EE4;&#x5668;,&#x8BF7;&#x6C42;&#x5728;&#x4F20;&#x9012;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FC7;&#x6EE4;&#x5668;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4E00;&#x5B9A;&#x7684;&#x4FEE;&#x6539;</span><br><span class="line">            - StripPrefix=1 # &#x8F6C;&#x53D1;&#x4E4B;&#x524D;&#x53BB;&#x6389;1&#x5C42;&#x8DEF;&#x5F84;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6D4B;&#x8BD5;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/126514e42fc64be58ff6bc8b0fafb3a3d2c6b7826bf6acdaef69b48c38cdf293" alt="image-20210507171142491"></p>
<h3 id="9-4-2&#x3001;&#x5347;&#x7EA7;&#x7248;"><a href="#9-4-2&#x3001;&#x5347;&#x7EA7;&#x7248;" class="headerlink" title="9.4.2&#x3001;&#x5347;&#x7EA7;&#x7248;"></a>9.4.2&#x3001;&#x5347;&#x7EA7;&#x7248;</h3><pre><code>&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x5347;&#x7EA7;&#x7248;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x6B7B;&#x4E86;&#x8F6C;&#x53D1;&#x8DEF;&#x5F84;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x6765;&#x83B7;&#x53D6;&#x5730;&#x5740;&#x3002;</code></pre><blockquote>
<p>&#x52A0;&#x5165;nacos&#x4F9D;&#x8D56;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">  &lt;parent&gt;</span><br><span class="line">    &lt;artifactId&gt;Shop-parent&lt;/artifactId&gt;</span><br><span class="line">    &lt;groupId&gt;cn.linstudy&lt;/groupId&gt;</span><br><span class="line">    &lt;version&gt;1.0.0&lt;/version&gt;</span><br><span class="line">  &lt;/parent&gt;</span><br><span class="line">  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">  &lt;artifactId&gt;api-gateway&lt;/artifactId&gt;</span><br><span class="line"></span><br><span class="line">  &lt;properties&gt;</span><br><span class="line">    &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;</span><br><span class="line">    &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;</span><br><span class="line">  &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line">    &lt;!--gateway&#x7F51;&#x5173;--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;!--nacos&#x5BA2;&#x6237;&#x7AEF;--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x5728;&#x4E3B;&#x7C7B;&#x4E0A;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@SpringBootApplication</span><br><span class="line">@EnableDiscoveryClient</span><br><span class="line">public class GateWayServerApp {</span><br><span class="line">  public static void main(String[] args) {</span><br><span class="line">    SpringApplication.run(GateWayServerApp.class,args);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;server:</span><br><span class="line">  port: 9000</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: api-gateway</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: 127.0.0.1:8848</span><br><span class="line">    gateway:</span><br><span class="line">      discovery:</span><br><span class="line">        locator:</span><br><span class="line">          enabled: true # &#x8BA9;gateway&#x53EF;&#x4EE5;&#x53D1;&#x73B0;nacos&#x4E2D;&#x7684;&#x5FAE;&#x670D;&#x52A1;</span><br><span class="line">      routes:</span><br><span class="line">        - id: product_route # &#x8DEF;&#x7531;&#x7684;&#x540D;&#x5B57;</span><br><span class="line">          uri: lb://product-service # lb&#x6307;&#x7684;&#x662F;&#x4ECE;nacos&#x4E2D;&#x6309;&#x7167;&#x540D;&#x79F0;&#x83B7;&#x53D6;&#x5FAE;&#x670D;&#x52A1;,&#x5E76;&#x9075;&#x5FAA;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;</span><br><span class="line">          predicates:</span><br><span class="line">            - Path=/product-serv/** # &#x7B26;&#x5408;&#x8FD9;&#x4E2A;&#x89C4;&#x5B9A;&#x7684;&#x624D;&#x8FDB;&#x884C;1&#x8F6C;&#x53D1;</span><br><span class="line">          filters:</span><br><span class="line">            - StripPrefix=1 # &#x5C06;&#x7B2C;&#x4E00;&#x5C42;&#x53BB;&#x6389;</span><br></pre></td></tr></table></figure>

<pre><code>&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x591A;&#x4E2A;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#x3002;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;spring:</span><br><span class="line">  application:</span><br><span class="line">    gateway:</span><br><span class="line">      routes:</span><br><span class="line">        - id: product_route</span><br><span class="line">          uri: lb://product-service </span><br><span class="line">          predicates:</span><br><span class="line">            - Path=/product-serv/**</span><br><span class="line">          filters:</span><br><span class="line">            - StripPrefix=1</span><br><span class="line">        - id: order_route</span><br><span class="line">          uri: lb://order-service </span><br><span class="line">          predicates:</span><br><span class="line">            - Path=/order-serv/**</span><br><span class="line">          filters:</span><br><span class="line">            - StripPrefix=1</span><br></pre></td></tr></table></figure>

<h3 id="9-4-3&#x3001;&#x7B80;&#x5199;&#x7248;"><a href="#9-4-3&#x3001;&#x7B80;&#x5199;&#x7248;" class="headerlink" title="9.4.3&#x3001;&#x7B80;&#x5199;&#x7248;"></a>9.4.3&#x3001;&#x7B80;&#x5199;&#x7248;</h3><pre><code>&#x6211;&#x4EEC;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x65E0;&#x9700;&#x5199;&#x7684;1&#x90A3;&#x4E48;&#x590D;&#x6742;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5199;&#x7248;&#x3002;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;server:</span><br><span class="line">  port: 9000</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: api-gateway</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: localhost:8848</span><br><span class="line">    gateway:</span><br><span class="line">      discovery:</span><br><span class="line">        locator:</span><br><span class="line">          enabled: true # &#x8BA9;gateway&#x53EF;&#x4EE5;&#x53D1;&#x73B0;nacos&#x4E2D;&#x7684;&#x5FAE;&#x670D;&#x52A1;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/50eac17697f4a1c4022ddebabcddfedb1cfe6a15f2b9b8c157ac461c40b74aca" alt="image-20210507201625163"></p>
<pre><code>&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;&#x5C31;&#x53D1;&#x73B0;&#x53EA;&#x8981;&#x6309;&#x7167;&#x7F51;&#x5173;&#x5730;&#x5740;/&#x5FAE;&#x670D;&#x52A1;&#x540D;&#x79F0;/&#x63A5;&#x53E3;&#x7684;&#x683C;&#x5F0F;&#x53BB;&#x8BBF;&#x95EE;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x6210;&#x529F;&#x54CD;&#x5E94;&#x3002;</code></pre><h2 id="9-5&#x3001;Gateway&#x6838;&#x5FC3;&#x67B6;&#x6784;"><a href="#9-5&#x3001;Gateway&#x6838;&#x5FC3;&#x67B6;&#x6784;" class="headerlink" title="9.5&#x3001;Gateway&#x6838;&#x5FC3;&#x67B6;&#x6784;"></a>9.5&#x3001;Gateway&#x6838;&#x5FC3;&#x67B6;&#x6784;</h2><h3 id="9-5-1&#x3001;&#x57FA;&#x672C;&#x6982;&#x5FF5;"><a href="#9-5-1&#x3001;&#x57FA;&#x672C;&#x6982;&#x5FF5;" class="headerlink" title="9.5.1&#x3001;&#x57FA;&#x672C;&#x6982;&#x5FF5;"></a>9.5.1&#x3001;&#x57FA;&#x672C;&#x6982;&#x5FF5;</h3><pre><code>&#x8DEF;&#x7531;(Route) &#x662F; gateway &#x4E2D;&#x6700;&#x57FA;&#x672C;&#x7684;&#x7EC4;&#x4EF6;&#x4E4B;&#x4E00;&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#x8F7D;&#x4F53;&#x3002;&#x4E3B;&#x8981;&#x5B9A;&#x4E49;&#x4E86;&#x4E0B;&#x9762;&#x7684;&#x51E0;&#x4E2A;&#x4FE1;&#x606F;&#xFF1A;</code></pre><ol>
<li>id&#xFF1A;&#x8DEF;&#x7531;&#x6807;&#x8BC6;&#x7B26;&#xFF0C;&#x533A;&#x522B;&#x4E8E;&#x5176;&#x4ED6; Route&#x3002;</li>
<li>uri&#xFF1A;&#x8DEF;&#x7531;&#x6307;&#x5411;&#x7684;&#x76EE;&#x7684;&#x5730; uri&#xFF0C;&#x5373;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x6700;&#x7EC8;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x3002;</li>
<li>order&#xFF1A;&#x7528;&#x4E8E;&#x591A;&#x4E2A; Route &#x4E4B;&#x95F4;&#x7684;&#x6392;&#x5E8F;&#xFF0C;&#x6570;&#x503C;&#x8D8A;&#x5C0F;&#x6392;&#x5E8F;&#x8D8A;&#x9760;&#x524D;&#xFF0C;&#x5339;&#x914D;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#x3002;</li>
<li>predicate&#xFF1A;&#x65AD;&#x8A00;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x8FDB;&#x884C;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#xFF0C;&#x53EA;&#x6709;&#x65AD;&#x8A00;&#x90FD;&#x8FD4;&#x56DE;&#x771F;&#xFF0C;&#x624D;&#x4F1A;&#x771F;&#x6B63;&#x7684;&#x6267;&#x884C;&#x8DEF;&#x7531;&#x3002;</li>
<li>filter&#xFF1A;&#x8FC7;&#x6EE4;&#x5668;&#x7528;&#x4E8E;&#x4FEE;&#x6539;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x4FE1;&#x606F;&#x3002;</li>
<li>predicate&#xFF1A;&#x65AD;&#x8A00;&#xFF0C;&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#xFF0C;&#x53EA;&#x6709;&#x65AD;&#x8A00;&#x90FD;&#x8FD4;&#x56DE;&#x771F;&#xFF0C;&#x624D;&#x4F1A;&#x771F;&#x6B63;&#x7684;&#x6267;&#x884C;&#x8DEF;&#x7531;&#x3002;</li>
</ol>
<h3 id="9-5-2&#x3001;&#x6267;&#x884C;&#x539F;&#x7406;"><a href="#9-5-2&#x3001;&#x6267;&#x884C;&#x539F;&#x7406;" class="headerlink" title="9.5.2&#x3001;&#x6267;&#x884C;&#x539F;&#x7406;"></a>9.5.2&#x3001;&#x6267;&#x884C;&#x539F;&#x7406;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/ba75fde499352d2c6abcaef7fbaa0a519c1f4ab37b715213d785190b309c4174" alt="image-20201030161652819"></p>
<ol>
<li>&#x63A5;&#x6536;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x4EA4;&#x7ED9;&#x5904;&#x7406;&#x5668;&#x6620;&#x5C04;&#x5668;&#xFF0C;&#x8FD4;&#x56DE;&#x6267;&#x884C;&#x94FE;&#x3002;</li>
<li>&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x53BB;&#x8C03;&#x7528;web&#x5904;&#x7406;&#x5668;&#xFF0C;&#x5728;web&#x5904;&#x7406;&#x5668;&#x91CC;&#x9762;&#x5BF9;&#x6211;&#x4EEC;&#x7684;&#x8DEF;&#x5F84;1&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x5047;&#x8BBE;1&#x6211;&#x4EEC;&#x7684;&#x8DEF;&#x5F84;1&#x662F;&#xFF1A;<a href="/external_links/ecfeeb96f85ab83a18ebf7c52126b62d.html" target="blank" rel="noopener">http://localhost:9000/product-serv/get?id=1</a> &#xFF0C;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x7684;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#xFF0C;&#x4E0A;&#x672C;&#x5730;&#x627E;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;&#x4FE1;&#x606F;&#xFF1A;product-service&#x5BF9;&#x5E94;&#x7684;&#x4E3B;&#x673A;ip&#x662F;192.168.10.130&#x3002;</li>
<li>&#x6839;&#x636E;1ribbon&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;&#x53BB;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x7136;&#x540E;&#x62FC;&#x63A5;&#x597D;&#xFF0C;&#x5C06;&#x8DEF;&#x5F84;&#x4E2D;&#x7684;product-serv&#x66FF;&#x6362;&#x6210;192.168.10.130:8081&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x914D;&#x7F6E;&#x4E86;filter&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x8FD8;&#x4F1A;&#x8D70;filter&#x3002;</li>
<li>&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;&#x81EA;&#x5B9A;&#x4E49;&#x8DEF;&#x7531;&#x7684;&#x8BDD;&#xFF0C;&#x9ED8;&#x8BA4;Gateway&#x4F1A;&#x5E2E;&#x4F60;&#x628A;&#x7B2C;&#x4E00;&#x5C42;&#x53BB;&#x6389;&#x3002;&#x7F51;&#x5173;&#x7AEF;&#x53E3;&#x4ECE;&#x6B64;&#x4E00;&#x4E2A;<code>/</code>&#x5F00;&#x59CB;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;<code>/</code>&#x5F00;&#x59CB;&#x7B97;&#x7B2C;&#x4E00;&#x5C42;&#x3002;</li>
</ol>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/60e51514708fed66f6c83a2fff82dd70737d53ada524fddc6334f242ecce9504" alt="image-20210507203258953"></p>
<h2 id="9-6&#x3001;&#x8FC7;&#x6EE4;&#x5668;"><a href="#9-6&#x3001;&#x8FC7;&#x6EE4;&#x5668;" class="headerlink" title="9.6&#x3001;&#x8FC7;&#x6EE4;&#x5668;"></a>9.6&#x3001;&#x8FC7;&#x6EE4;&#x5668;</h2><pre><code>Gateway&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x4F5C;&#x7528;&#x662F;&#xFF1A;&#x662F;&#x5728;&#x8BF7;&#x6C42;&#x7684;&#x4F20;&#x9012;&#x8FC7;&#x7A0B;&#x4E2D;,&#x5BF9;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x505A;&#x4E00;&#x4E9B;&#x624B;&#x811A;&#x3002;


Gateway&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF1A;</code></pre><ol>
<li>PRE&#xFF1A;&#x8FD9;&#x79CD;&#x8FC7;&#x6EE4;&#x5668;&#x5728;&#x8BF7;&#x6C42;&#x88AB;&#x8DEF;&#x7531;&#x4E4B;&#x524D;&#x8C03;&#x7528;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x5229;&#x7528;&#x8FD9;&#x79CD;&#x8FC7;&#x6EE4;&#x5668;&#x5B9E;&#x73B0;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3001;&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x9009;&#x62E9;<br>&#x8BF7;&#x6C42;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x3001;&#x8BB0;&#x5F55;&#x8C03;&#x8BD5;&#x4FE1;&#x606F;&#x7B49;&#x3002;</li>
<li>POST&#xFF1A;&#x8FD9;&#x79CD;&#x8FC7;&#x6EE4;&#x5668;&#x5728;&#x8DEF;&#x7531;&#x5230;&#x5FAE;&#x670D;&#x52A1;&#x4EE5;&#x540E;&#x6267;&#x884C;&#x3002;&#x8FD9;&#x79CD;&#x8FC7;&#x6EE4;&#x5668;&#x53EF;&#x7528;&#x6765;&#x4E3A;&#x54CD;&#x5E94;&#x6DFB;&#x52A0;&#x6807;&#x51C6;&#x7684;HTTP<br>Header&#x3001;&#x6536;&#x96C6;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#x548C;&#x6307;&#x6807;&#x3001;&#x5C06;&#x54CD;&#x5E94;&#x4ECE;&#x5FAE;&#x670D;&#x52A1;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x7B49;&#x3002;</li>
</ol>
<pre><code>Gateway &#x7684;Filter&#x4ECE;&#x4F5C;&#x7528;&#x8303;&#x56F4;&#x53EF;&#x5206;&#x4E3A;&#x4E24;&#x79CD;: GatewayFilter&#x4E0E;GlobalFilter&#xFF1A;</code></pre><ol>
<li>GatewayFilter&#xFF1A;&#x5E94;&#x7528;&#x5230;&#x5355;&#x4E2A;&#x8DEF;&#x7531;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5206;&#x7EC4;&#x7684;&#x8DEF;&#x7531;&#x4E0A;&#x3002;</li>
<li>GlobalFilter&#xFF1A;&#x5E94;&#x7528;&#x5230;&#x6240;&#x6709;&#x7684;&#x8DEF;&#x7531;&#x4E0A;&#x3002;</li>
</ol>
<h3 id="9-6-1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;"><a href="#9-6-1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;" class="headerlink" title="9.6.1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;"></a>9.6.1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;</h3><pre><code>&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x662F;&#x9488;&#x5BF9;&#x5355;&#x4E2A;&#x8DEF;&#x7531;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x3002;&#x4ED6;&#x5206;&#x4E3A;&#x5185;&#x7F6E;&#x8FC7;&#x6EE4;&#x5668;&#x548C;&#x81EA;&#x5B9A;&#x4E49;&#x8FC7;&#x6EE4;&#x5668;&#x3002;</code></pre><h4 id="9-6-1-1&#x3001;&#x5185;&#x7F6E;&#x8FC7;&#x6EE4;&#x5668;"><a href="#9-6-1-1&#x3001;&#x5185;&#x7F6E;&#x8FC7;&#x6EE4;&#x5668;" class="headerlink" title="9.6.1.1&#x3001;&#x5185;&#x7F6E;&#x8FC7;&#x6EE4;&#x5668;"></a>9.6.1.1&#x3001;&#x5185;&#x7F6E;&#x8FC7;&#x6EE4;&#x5668;</h4><pre><code>&#x5728;SpringCloud Gateway&#x4E2D;&#x5185;&#x7F6E;&#x4E86;&#x5F88;&#x591A;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x7F51;&#x5173;&#x8DEF;&#x7531;&#x8FC7;&#x6EE4;&#x5668;&#x3002;</code></pre><h5 id="9-6-1-1-1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x5185;&#x5BB9;"><a href="#9-6-1-1-1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x5185;&#x5BB9;" class="headerlink" title="9.6.1.1.1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x5185;&#x5BB9;"></a>9.6.1.1.1&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x5185;&#x5BB9;</h5><table>
<thead>
<tr>
<th>&#x8FC7;&#x6EE4;&#x5668;&#x5DE5;&#x5382;</th>
<th>&#x4F5C;&#x7528;</th>
<th>&#x53C2;&#x6570;</th>
</tr>
</thead>
<tbody><tr>
<td>AddRequestHeader</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x6DFB;&#x52A0;Header</td>
<td>Header&#x7684;&#x540D;&#x79F0;&#x53CA;&#x503C;</td>
</tr>
<tr>
<td>AddRequestParameter</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x6DFB;&#x52A0;&#x8BF7;&#x6C42;&#x53C2;&#x6570;</td>
<td>&#x53C2;&#x6570;&#x540D;&#x79F0;&#x53CA;&#x503C;</td>
</tr>
<tr>
<td>AddResponseHeader</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x6DFB;&#x52A0;Header</td>
<td>Header&#x7684;&#x540D;&#x79F0;&#x53CA;&#x503C;</td>
</tr>
<tr>
<td>DedupeResponseHeader</td>
<td>&#x5254;&#x9664;&#x54CD;&#x5E94;&#x5934;&#x4E2D;&#x91CD;&#x590D;&#x7684;&#x503C;</td>
<td>&#x9700;&#x8981;&#x53BB;&#x91CD;&#x7684;Header&#x540D;&#x79F0;&#x53CA;&#x53BB;&#x91CD;&#x7B56;&#x7565;</td>
</tr>
<tr>
<td>Hystrix</td>
<td>&#x4E3A;&#x8DEF;&#x7531;&#x5F15;&#x5165;Hystrix&#x7684;&#x65AD;&#x8DEF;&#x5668;&#x4FDD;&#x62A4;</td>
<td>HystrixCommand &#x7684;&#x540D;&#x79F0;</td>
</tr>
<tr>
<td>FallbackHeaders</td>
<td>&#x4E3A;fallbackUri&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x4E2D;&#x6DFB;&#x52A0;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;</td>
<td>Header&#x7684;&#x540D;&#x79F0;</td>
</tr>
<tr>
<td>PrefixPath</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;&#x6DFB;&#x52A0;&#x524D;&#x7F00;</td>
<td>&#x524D;&#x7F00;&#x8DEF;&#x5F84;</td>
</tr>
<tr>
<td>PreserveHostHeader</td>
<td>&#x4E3A;&#x8BF7;&#x6C42;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;preserveHostHeader=true&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8DEF;&#x7531;&#x8FC7;&#x6EE4;&#x5668;&#x4F1A;&#x68C0;&#x67E5;&#x8BE5;&#x5C5E;&#x6027;&#x4EE5;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x8981;&#x53D1;&#x9001;&#x539F;&#x59CB;&#x7684;Host</td>
<td>&#x65E0;</td>
</tr>
<tr>
<td>RequestRateLimiter</td>
<td>&#x7528;&#x4E8E;&#x5BF9;&#x8BF7;&#x6C42;&#x9650;&#x6D41;&#xFF0C;&#x9650;&#x6D41;&#x7B97;&#x6CD5;&#x4E3A;&#x4EE4;&#x724C;&#x6876;</td>
<td>keyResolver&#x3001;rateLimiter&#x3001;statusCode&#x3001;denyEmptyKey&#x3001;emptyKeyStatus</td>
</tr>
<tr>
<td>RedirectTo</td>
<td>&#x5C06;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x6307;&#x5B9A;&#x7684;URL</td>
<td>http&#x72B6;&#x6001;&#x7801;&#x53CA;&#x91CD;&#x5B9A;&#x5411;&#x7684;url</td>
</tr>
<tr>
<td>RemoveHopByHopHeadersFilter</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x5220;&#x9664;IETF&#x7EC4;&#x7EC7;&#x89C4;&#x5B9A;&#x7684;&#x4E00;&#x7CFB;&#x5217;Header</td>
<td>&#x9ED8;&#x8BA4;&#x5C31;&#x4F1A;&#x542F;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6307;&#x5B9A;&#x4EC5;&#x5220;&#x9664;&#x54EA;&#x4E9B;Header</td>
</tr>
<tr>
<td>RemoveRequestHeader</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x5220;&#x9664;&#x67D0;&#x4E2A;Header</td>
<td>Header&#x540D;&#x79F0;</td>
</tr>
<tr>
<td>RemoveResponseHeader</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x5220;&#x9664;&#x67D0;&#x4E2A;Header</td>
<td>Header&#x540D;&#x79F0;</td>
</tr>
<tr>
<td>RewritePath</td>
<td>&#x91CD;&#x5199;&#x539F;&#x59CB;&#x7684;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;</td>
<td>&#x539F;&#x59CB;&#x8DEF;&#x5F84;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x4EE5;&#x53CA;&#x91CD;&#x5199;&#x540E;&#x8DEF;&#x5F84;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;</td>
</tr>
<tr>
<td>RewriteResponseHeader</td>
<td>&#x91CD;&#x5199;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;Header</td>
<td>Header&#x540D;&#x79F0;&#xFF0C;&#x503C;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x91CD;&#x5199;&#x540E;&#x7684;&#x503C;</td>
</tr>
<tr>
<td>SaveSession</td>
<td>&#x5728;&#x8F6C;&#x53D1;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#xFF0C;&#x5F3A;&#x5236;&#x6267;&#x884C;<code>WebSession::save</code>&#x64CD;&#x4F5C;</td>
<td>&#x65E0;</td>
</tr>
<tr>
<td>secureHeaders</td>
<td>&#x4E3A;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x6DFB;&#x52A0;&#x4E00;&#x7CFB;&#x5217;&#x8D77;&#x5B89;&#x5168;&#x4F5C;&#x7528;&#x7684;&#x54CD;&#x5E94;&#x5934;</td>
<td>&#x65E0;&#xFF0C;&#x652F;&#x6301;&#x4FEE;&#x6539;&#x8FD9;&#x4E9B;&#x5B89;&#x5168;&#x54CD;&#x5E94;&#x5934;&#x7684;&#x503C;</td>
</tr>
<tr>
<td>SetPath</td>
<td>&#x4FEE;&#x6539;&#x539F;&#x59CB;&#x7684;&#x8BF7;&#x6C42;&#x8DEF;&#x5F84;</td>
<td>&#x4FEE;&#x6539;&#x540E;&#x7684;&#x8DEF;&#x5F84;</td>
</tr>
<tr>
<td>SetResponseHeader</td>
<td>&#x4FEE;&#x6539;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x4E2D;&#x67D0;&#x4E2A;Header&#x7684;&#x503C;</td>
<td>Header&#x540D;&#x79F0;&#xFF0C;&#x4FEE;&#x6539;&#x540E;&#x7684;&#x503C;</td>
</tr>
<tr>
<td>SetStatus</td>
<td>&#x4FEE;&#x6539;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x7684;&#x72B6;&#x6001;&#x7801;</td>
<td>HTTP &#x72B6;&#x6001;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x6570;&#x5B57;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5B57;&#x7B26;&#x4E32;</td>
</tr>
<tr>
<td>StripPrefix</td>
<td>&#x7528;&#x4E8E;&#x622A;&#x65AD;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x7684;&#x8DEF;&#x5F84;</td>
<td>&#x4F7F;&#x7528;&#x6570;&#x5B57;&#x8868;&#x793A;&#x8981;&#x622A;&#x65AD;&#x7684;&#x8DEF;&#x5F84;&#x7684;&#x6570;&#x91CF;</td>
</tr>
<tr>
<td>Retry</td>
<td>&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x54CD;&#x5E94;&#x8FDB;&#x884C;&#x91CD;&#x8BD5;</td>
<td>retries&#x3001;statuses&#x3001;methods&#x3001;series</td>
</tr>
<tr>
<td>RequestSize</td>
<td>&#x8BBE;&#x7F6E;&#x5141;&#x8BB8;&#x63A5;&#x6536;&#x6700;&#x5927;&#x8BF7;&#x6C42;&#x5305;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x5305;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; 413 Payload Too Large</td>
<td>&#x8BF7;&#x6C42;&#x5305;&#x5927;&#x5C0F;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x5B57;&#x8282;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;5M</td>
</tr>
<tr>
<td>ModifyRequestBody</td>
<td>&#x5728;&#x8F6C;&#x53D1;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#x4FEE;&#x6539;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x4F53;&#x5185;&#x5BB9;</td>
<td>&#x4FEE;&#x6539;&#x540E;&#x7684;&#x8BF7;&#x6C42;&#x4F53;&#x5185;&#x5BB9;</td>
</tr>
<tr>
<td>ModifyResponseBody</td>
<td>&#x4FEE;&#x6539;&#x539F;&#x59CB;&#x54CD;&#x5E94;&#x4F53;&#x7684;&#x5185;&#x5BB9;</td>
<td>&#x4FEE;&#x6539;&#x540E;&#x7684;&#x54CD;&#x5E94;&#x4F53;&#x5185;&#x5BB9;</td>
</tr>
</tbody></table>
<h5 id="9-6-1-1-2&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x4F7F;&#x7528;"><a href="#9-6-1-1-2&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x4F7F;&#x7528;" class="headerlink" title="9.6.1.1.2&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x4F7F;&#x7528;"></a>9.6.1.1.2&#x3001;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x4F7F;&#x7528;</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;server:</span><br><span class="line">  port: 9000</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: api-gateway</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: 127.0.0.1:8848</span><br><span class="line">    gateway:</span><br><span class="line">      discovery:</span><br><span class="line">        locator:</span><br><span class="line">          enabled: true # &#x8BA9;gateway&#x53EF;&#x4EE5;&#x53D1;&#x73B0;nacos&#x4E2D;&#x7684;&#x5FAE;&#x670D;&#x52A1;</span><br><span class="line">      routes:</span><br><span class="line">        - id: product_route # &#x8DEF;&#x7531;&#x7684;&#x540D;&#x5B57;</span><br><span class="line">          uri: lb://product-service # lb&#x6307;&#x7684;&#x662F;&#x4ECE;nacos&#x4E2D;&#x6309;&#x7167;&#x540D;&#x79F0;&#x83B7;&#x53D6;&#x5FAE;&#x670D;&#x52A1;,&#x5E76;&#x9075;&#x5FAA;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;</span><br><span class="line">          predicates:</span><br><span class="line">            - Path=/product-serv/** # &#x7B26;&#x5408;&#x8FD9;&#x4E2A;&#x89C4;&#x5B9A;&#x7684;&#x624D;&#x8FDB;&#x884C;1&#x8F6C;&#x53D1;</span><br><span class="line">          filters:</span><br><span class="line">            - StripPrefix=1 # &#x5C06;&#x7B2C;&#x4E00;&#x5C42;&#x53BB;&#x6389;</span><br><span class="line">            - SetStatus=2000 # &#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5185;&#x7F6E;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x4FEE;&#x6539;&#x8FD4;&#x56DE;&#x72B6;&#x6001;</span><br></pre></td></tr></table></figure>

<h4 id="9-6-1-2&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;"><a href="#9-6-1-2&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;" class="headerlink" title="9.6.1.2&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;"></a>9.6.1.2&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;</h4><pre><code>&#x5F88;&#x591A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5185;&#x7F6E;&#x8FC7;&#x6EE4;&#x5668;&#x6CA1;&#x529E;&#x6CD5;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x5FC5;&#x987B;&#x81EA;&#x5B9A;&#x4E49;&#x5C40;&#x90E8;&#x8FC7;&#x6EE4;&#x5668;&#x3002;&#x6211;&#x4EEC;&#x5047;&#x5B9A;&#x4E00;&#x4E2A;&#x9700;&#x6C42;&#x662F;&#xFF1A;&#x7EDF;&#x8BA1;&#x8BA2;&#x5355;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x8017;&#x65F6;&#x3002;</code></pre><blockquote>
<p>&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x903B;&#x8F91;</p>
</blockquote>
<pre><code>**&#x540D;&#x79F0;&#x662F;&#x6709;&#x56FA;&#x5B9A;&#x683C;&#x5F0F;xxxGatewayFilterFactory**</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class TimeGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;TimeGatewayFilterFactory.Config&gt; {</span><br><span class="line"></span><br><span class="line">  private static final String BEGIN_TIME = &quot;beginTime&quot;;</span><br><span class="line"></span><br><span class="line">  //&#x6784;&#x9020;&#x51FD;&#x6570;</span><br><span class="line">  public TimeGatewayFilterFactory() {</span><br><span class="line">    super(TimeGatewayFilterFactory.Config.class);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  //&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x53C2;&#x6570; &#x8D4B;&#x503C;&#x5230; &#x914D;&#x7F6E;&#x7C7B;&#x4E2D;</span><br><span class="line">  @Override</span><br><span class="line">  public List&lt;String&gt; shortcutFieldOrder() {</span><br><span class="line">    return Arrays.asList(&quot;show&quot;);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public GatewayFilter apply(Config config) {</span><br><span class="line">    return new GatewayFilter() {</span><br><span class="line">      @Override</span><br><span class="line">      public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {</span><br><span class="line">        if (!config.show){</span><br><span class="line">          // &#x5982;&#x679C;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#x7684;show&#x4E3A;false&#xFF0C;&#x8868;&#x793A;&#x653E;&#x884C;</span><br><span class="line">          return chain.filter(exchange);</span><br><span class="line">        }</span><br><span class="line">        exchange.getAttributes().put(BEGIN_TIME, System.currentTimeMillis());</span><br><span class="line">        /**</span><br><span class="line">         *  pre&#x7684;&#x903B;&#x8F91;</span><br><span class="line">         * chain.filter().then(Mono.fromRunable(()-&gt;{</span><br><span class="line">         *     post&#x7684;&#x903B;&#x8F91;</span><br><span class="line">         * }))</span><br><span class="line">         */</span><br><span class="line">        return chain.filter(exchange).then(Mono.fromRunnable(()-&gt;{</span><br><span class="line">          Long startTime = exchange.getAttribute(BEGIN_TIME);</span><br><span class="line">          if (startTime != null) {</span><br><span class="line">            System.out.println(exchange.getRequest().getURI() + &quot;&#x8BF7;&#x6C42;&#x8017;&#x65F6;: &quot; + (System.currentTimeMillis() - startTime) + &quot;ms&quot;);</span><br><span class="line">          }</span><br><span class="line">        }));</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  @Setter</span><br><span class="line">  @Getter</span><br><span class="line">  static class Config{</span><br><span class="line">    private boolean show;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x7F16;&#x5199;application.xml</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;server:</span><br><span class="line">  port: 9000</span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: api-gateway</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: 127.0.0.1:8848</span><br><span class="line">    gateway:</span><br><span class="line">      discovery:</span><br><span class="line">        locator:</span><br><span class="line">          enabled: true # &#x8BA9;gateway&#x53EF;&#x4EE5;&#x53D1;&#x73B0;nacos&#x4E2D;&#x7684;&#x5FAE;&#x670D;&#x52A1;</span><br><span class="line">      routes:</span><br><span class="line">        - id: product_route # &#x8DEF;&#x7531;&#x7684;&#x540D;&#x5B57;</span><br><span class="line">          uri: lb://product-service # lb&#x6307;&#x7684;&#x662F;&#x4ECE;nacos&#x4E2D;&#x6309;&#x7167;&#x540D;&#x79F0;&#x83B7;&#x53D6;&#x5FAE;&#x670D;&#x52A1;,&#x5E76;&#x9075;&#x5FAA;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B56;&#x7565;</span><br><span class="line">          predicates:</span><br><span class="line">            - Path=/product-serv/** # &#x7B26;&#x5408;&#x8FD9;&#x4E2A;&#x89C4;&#x5B9A;&#x7684;&#x624D;&#x8FDB;&#x884C;1&#x8F6C;&#x53D1;</span><br><span class="line">          filters:</span><br><span class="line">            - StripPrefix=1 # &#x5C06;&#x7B2C;&#x4E00;&#x5C42;&#x53BB;&#x6389;</span><br><span class="line">        - id: order_route</span><br><span class="line">          uri: lb://order-service</span><br><span class="line">          predicates:</span><br><span class="line">            - Path=/order-serv/**</span><br><span class="line">          filters:</span><br><span class="line">            - StripPrefix=1</span><br><span class="line">            - Time=true</span><br></pre></td></tr></table></figure>

<p>&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#xFF1A;<a href="/external_links/86d34d4a67533143bb877c105cf08731.html" target="blank" rel="noopener">http://localhost:9000/order-serv/getById?o=1&amp;pid=1</a></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/d44bc297d00b5d396490fc74bbe7a2aebc75c175e09fa2e862974033ad9de13c" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="9-6-2&#x3001;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;"><a href="#9-6-2&#x3001;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;" class="headerlink" title="9.6.2&#x3001;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;"></a>9.6.2&#x3001;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;</h3><pre><code>&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;&#x4F5C;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x8DEF;&#x7531;, &#x65E0;&#x9700;&#x914D;&#x7F6E;&#x3002;&#x901A;&#x8FC7;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x6743;&#x9650;&#x7684;&#x7EDF;&#x4E00;&#x6821;&#x9A8C;&#xFF0C;&#x5B89;&#x5168;&#x6027;&#x9A8C;&#x8BC1;&#x7B49;&#x529F;&#x80FD;&#x3002;SpringCloud Gateway&#x5185;&#x90E8;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5185;&#x7F6E;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;&#x5BF9;&#x6574;&#x4E2A;&#x8DEF;&#x7531;&#x8F6C;&#x53D1;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</code></pre><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/8aa33df82e4fce487e56870aaa8621c8ebda499c0ca6cdd31c246291a1d1b5f8" alt="&#x7F51;&#x5173;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;"></p>
<pre><code>&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x9274;&#x6743;&#x903B;&#x8F91;&#xFF1A;</code></pre><ul>
<li>&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x5BF9;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x4FE1;&#x606F;&#x8BA4;&#x8BC1;&#xFF08;&#x767B;&#x5F55;&#xFF09;&#x3002;</li>
<li>&#x8BA4;&#x8BC1;&#x901A;&#x8FC7;&#xFF0C;&#x5C06;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x5F62;&#x6210;token&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4F5C;&#x4E3A;&#x767B;&#x5F55;&#x51ED;&#x8BC1;&#x3002;</li>
<li>&#x4EE5;&#x540E;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x643A;&#x5E26;&#x8BA4;&#x8BC1;&#x7684;token&#x3002;</li>
<li>&#x670D;&#x52A1;&#x7AEF;&#x5BF9;token&#x8FDB;&#x884C;&#x89E3;&#x5BC6;&#xFF0C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x6709;&#x6548;&#x3002;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/2ab04d17b12f0b79bd3ccdeabda248eda76f4698450b120e066746a5b64e2655" alt="image-20210507220009473"></p>
<pre><code>&#x6211;&#x4EEC;&#x6765;&#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x9700;&#x6C42;&#xFF1A;&#x5B9E;&#x73B0;&#x7EDF;&#x4E00;&#x9274;&#x6743;&#x7684;&#x529F;&#x80FD;,&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x7F51;&#x5173;&#x5224;&#x65AD;&#x8BF7;&#x6C42;&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;token&#x4E14;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x5219;&#x4E0D;&#x8F6C;&#x53D1;&#x8DEF;&#x7531;&#xFF0C;&#x6709;&#x5219;&#x6267;&#x884C;&#x6B63;&#x5E38;&#x903B;&#x8F91;&#x3002;</code></pre><blockquote>
<p>&#x7F16;&#x5199;&#x5168;&#x5C40;&#x8FC7;&#x6EE4;&#x5668;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class AuthGlobalFilter implements GlobalFilter {</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {</span><br><span class="line">    String token = exchange.getRequest().getQueryParams().getFirst(&quot;token&quot;);</span><br><span class="line">    if (StringUtils.isBlank(token)) {</span><br><span class="line">      System.out.println(&quot;&#x9274;&#x6743;&#x5931;&#x8D25;&quot;);</span><br><span class="line">      exchange.getResponse().setStatusCode(HttpStatus.UNAUTHORIZED);</span><br><span class="line">      return exchange.getResponse().setComplete();</span><br><span class="line">    }</span><br><span class="line">    return chain.filter(exchange);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="9-6-3&#x3001;&#x7F51;&#x5173;&#x9650;&#x6D41;"><a href="#9-6-3&#x3001;&#x7F51;&#x5173;&#x9650;&#x6D41;" class="headerlink" title="9.6.3&#x3001;&#x7F51;&#x5173;&#x9650;&#x6D41;"></a>9.6.3&#x3001;&#x7F51;&#x5173;&#x9650;&#x6D41;</h3><pre><code>&#x7F51;&#x5173;&#x662F;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x7684;&#x516C;&#x5171;&#x5165;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x5173;&#x8FDB;&#x884C;&#x9650;&#x6D41;&#xFF0C;&#x800C;&#x4E14;&#x9650;&#x6D41;&#x7684;&#x65B9;&#x5F0F;&#x4E5F;&#x5F88;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x672C;&#x6B21;&#x91C7;&#x7528;&#x524D;&#x9762;&#x5B66;&#x8FC7;&#x7684;Sentinel&#x7EC4;&#x4EF6;&#x6765;&#x5B9E;&#x73B0;&#x7F51;&#x5173;&#x7684;&#x9650;&#x6D41;&#x3002;Sentinel&#x652F;&#x6301;&#x5BF9;SpringCloud Gateway&#x3001;Zuul&#x7B49;&#x4E3B;&#x6D41;&#x7F51;&#x5173;&#x8FDB;&#x884C;&#x9650;&#x6D41;&#x3002;</code></pre><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/500a0acebee73c20ff73473d2e727e73bf978e8d641310124ba331e3fdc2ef6b" alt="image-20210507220048921"></p>
<pre><code>&#x4ECE;1.6.0&#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;Sentinel&#x63D0;&#x4F9B;&#x4E86;SpringCloud Gateway&#x7684;&#x9002;&#x914D;&#x6A21;&#x5757;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x4E24;&#x79CD;&#x8D44;&#x6E90;&#x7EF4;&#x5EA6;&#x7684;&#x9650;&#x6D41;&#xFF1A;</code></pre><ul>
<li>route&#x7EF4;&#x5EA6;&#xFF1A;&#x5373;&#x5728;Spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;&#x7684;&#x8DEF;&#x7531;&#x6761;&#x76EE;&#xFF0C;&#x8D44;&#x6E90;&#x540D;&#x4E3A;&#x5BF9;&#x5E94;&#x7684;routeId</li>
<li>&#x81EA;&#x5B9A;&#x4E49;API&#x7EF4;&#x5EA6;&#xFF1A;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5229;&#x7528;Sentinel&#x63D0;&#x4F9B;&#x7684;API&#x6765;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E9B;API&#x5206;&#x7EC4;</li>
</ul>
<h4 id="9-6-3-1&#x3001;&#x7F51;&#x5173;&#x96C6;&#x6210;Sentinel"><a href="#9-6-3-1&#x3001;&#x7F51;&#x5173;&#x96C6;&#x6210;Sentinel" class="headerlink" title="9.6.3.1&#x3001;&#x7F51;&#x5173;&#x96C6;&#x6210;Sentinel"></a>9.6.3.1&#x3001;&#x7F51;&#x5173;&#x96C6;&#x6210;Sentinel</h4><blockquote>
<p>&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;com.alibaba.csp&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;sentinel-spring-cloud-gateway-adapter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x7F16;&#x5199;&#x914D;&#x7F6E;&#x7C7B;&#x8FDB;&#x884C;&#x9650;&#x6D41;</p>
</blockquote>
<pre><code>&#x914D;&#x7F6E;&#x7C7B;&#x7684;&#x672C;&#x8D28;&#x662F;&#x7528;&#x4EE3;&#x7801;&#x66FF;&#x4EE3;nacos&#x56FE;&#x5F62;&#x5316;&#x754C;&#x9762;&#x9650;&#x6D41;&#x3002;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">public class GatewayConfiguration {</span><br><span class="line">    private final List&lt;ViewResolver&gt; viewResolvers;</span><br><span class="line">    private final ServerCodecConfigurer serverCodecConfigurer;</span><br><span class="line"></span><br><span class="line">    public GatewayConfiguration(ObjectProvider&lt;List&lt;ViewResolver&gt;&gt; viewResolversProvider,</span><br><span class="line">                                ServerCodecConfigurer serverCodecConfigurer) {</span><br><span class="line">        this.viewResolvers = viewResolversProvider.getIfAvailable(Collections::emptyList);</span><br><span class="line">        this.serverCodecConfigurer = serverCodecConfigurer;</span><br><span class="line">    }</span><br><span class="line">    // &#x914D;&#x7F6E;&#x9650;&#x6D41;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x5668;</span><br><span class="line">    @Bean</span><br><span class="line">    @Order(Ordered.HIGHEST_PRECEDENCE)</span><br><span class="line">    public SentinelGatewayBlockExceptionHandler sentinelGatewayBlockExceptionHandler() {</span><br><span class="line">        // Register the block exception handler for Spring Cloud Gateway.</span><br><span class="line">        return new SentinelGatewayBlockExceptionHandler(viewResolvers, serverCodecConfigurer);</span><br><span class="line">    }</span><br><span class="line">    // &#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x9650;&#x6D41;&#x7684;&#x8FC7;&#x6EE4;&#x5668;</span><br><span class="line">    @Bean</span><br><span class="line">    @Order(Ordered.HIGHEST_PRECEDENCE)</span><br><span class="line">    public GlobalFilter sentinelGatewayFilter() {</span><br><span class="line">        return new SentinelGatewayFilter();</span><br><span class="line">    }</span><br><span class="line">    //&#x589E;&#x52A0;&#x5BF9;&#x5546;&#x54C1;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x9650;&#x6D41;</span><br><span class="line">     @PostConstruct</span><br><span class="line">    private void initGatewayRules() {</span><br><span class="line">        Set&lt;GatewayFlowRule&gt; rules = new HashSet&lt;&gt;();</span><br><span class="line">        rules.add(new GatewayFlowRule(&quot;product_route&quot;)</span><br><span class="line">                .setCount(3) // &#x4E09;&#x6B21;</span><br><span class="line">                .setIntervalSec(1) // &#x4E00;&#x79D2;&#xFF0C;&#x8868;&#x793A;&#x4E00;&#x79D2;&#x949F;1&#x8D85;&#x8FC7;&#x4E86;&#x4E09;&#x6B21;&#x5C31;&#x4F1A;&#x9650;&#x6D41;</span><br><span class="line">        );</span><br><span class="line">        GatewayRuleManager.loadRules(rules);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x4FEE;&#x6539;&#x9650;&#x6D41;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x683C;&#x5F0F;</p>
</blockquote>
<pre><code>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x60F3;&#x5728;&#x9650;&#x6D41;&#x7684;&#x65F6;&#x5019;&#x8FD4;&#x56DE;&#x9ED8;&#x8BA4;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x9519;&#x8BEF;&#xFF0C;&#x6307;&#x5B9A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8FD4;&#x56DE;&#x683C;&#x5F0F;&#x3002;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x5728;&#x7C7B;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x6BB5;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#x3002;</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@PostConstruct</span><br><span class="line">public void initBlockHandlers() {</span><br><span class="line">	BlockRequestHandler blockRequestHandler = new BlockRequestHandler() {</span><br><span class="line">	public Mono&lt;ServerResponse&gt; handleRequest(ServerWebExchange serverWebExchange, Throwable throwable) {</span><br><span class="line">		Map map = new HashMap&lt;&gt;();</span><br><span class="line">		map.put(&quot;code&quot;, 0);</span><br><span class="line">		map.put(&quot;message&quot;, &quot;&#x63A5;&#x53E3;&#x88AB;&#x9650;&#x6D41;&#x4E86;&quot;);</span><br><span class="line">			return ServerResponse.status(HttpStatus.OK).</span><br><span class="line">				contentType(MediaType.APPLICATION_JSON).</span><br><span class="line">				body(BodyInserters.fromValue(map));</span><br><span class="line">            }</span><br><span class="line">};</span><br><span class="line">	GatewayCallbackManager.setBlockHandler(blockRequestHandler);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6D4B;&#x8BD5;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/336dacf056a5aaf2169c0a8d882d88f5a03aa653f814e593a15234938be51f6b" alt="image-20210507221350190"></p>
<h4 id="9-6-3-2&#x3001;&#x81EA;&#x5B9A;&#x4E49;API&#x5206;&#x7EC4;"><a href="#9-6-3-2&#x3001;&#x81EA;&#x5B9A;&#x4E49;API&#x5206;&#x7EC4;" class="headerlink" title="9.6.3.2&#x3001;&#x81EA;&#x5B9A;&#x4E49;API&#x5206;&#x7EC4;"></a>9.6.3.2&#x3001;&#x81EA;&#x5B9A;&#x4E49;API&#x5206;&#x7EC4;</h4><pre><code>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x79CD;&#x5B9A;&#x4E49;&#xFF0C;&#x5BF9;&#x6574;&#x4E2A;&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x4E86;&#x9650;&#x6D41;&#xFF0C;&#x7C92;&#x5EA6;&#x4E0D;&#x591F;&#x7EC6;&#x3002;&#x81EA;&#x5B9A;&#x4E49;API&#x5206;&#x7EC4;&#x662F;&#x4E00;&#x79CD;&#x66F4;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x9650;&#x6D41;&#x89C4;&#x5219;&#x5B9A;&#x4E49;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x7EC6;&#x7C92;&#x5EA6;&#x9650;&#x6D41;&#x3002;</code></pre><blockquote>
<p>&#x5728;Shop-order-server&#x9879;&#x76EE;&#x4E2D;&#x6DFB;&#x52A0;ApiController</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@RestController</span><br><span class="line">@RequestMapping(&quot;/api&quot;)</span><br><span class="line">public class ApiController {</span><br><span class="line">    @RequestMapping(&quot;/hello&quot;)</span><br><span class="line">    public String api1(){</span><br><span class="line">        return &quot;api&quot;;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x5728;GatewayConfiguration&#x4E2D;&#x6DFB;&#x52A0;&#x914D;&#x7F6E;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@PostConstruct</span><br><span class="line">private void initCustomizedApis() {</span><br><span class="line">	Set&lt;ApiDefinition&gt; definitions = new HashSet&lt;&gt;();</span><br><span class="line">	ApiDefinition api1 = new ApiDefinition(&quot;order_api&quot;)</span><br><span class="line">                .setPredicateItems(new HashSet&lt;ApiPredicateItem&gt;() {{</span><br><span class="line">                    add(new ApiPathPredicateItem().setPattern(&quot;/order-serv/api/**&quot;).                 setMatchStrategy(SentinelGatewayConstants.URL_MATCH_STRATEGY_PREFIX));</span><br><span class="line">                }});</span><br><span class="line">	definitions.add(api1);</span><br><span class="line">	GatewayApiDefinitionManager.loadApiDefinitions(definitions);</span><br><span class="line">}</span><br><span class="line">@PostConstruct</span><br><span class="line">private void initGatewayRules() {</span><br><span class="line">	Set&lt;GatewayFlowRule&gt; rules = new HashSet&lt;&gt;();</span><br><span class="line">	rules.add(new GatewayFlowRule(&quot;product_route&quot;)</span><br><span class="line">                .setCount(3)</span><br><span class="line">                .setIntervalSec(1)</span><br><span class="line">	);</span><br><span class="line">	rules.add(new GatewayFlowRule(&quot;order_api&quot;).</span><br><span class="line">                setCount(1).</span><br><span class="line">                setIntervalSec(1));</span><br><span class="line">    GatewayRuleManager.loadRules(rules);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6D4B;&#x8BD5;</p>
</blockquote>
<pre><code>&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&lt;http://localhost:8082/api/hello&gt; &#x662F;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x9650;&#x6D41;&#x7684;&#xFF0C;&#x8BBF;&#x95EE;&lt;http://localhost:9000/order-serv/api/hello&gt; &#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x9650;&#x6D41;&#x4E86;&#x3002;</code></pre><p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8055a5aa1171d0fbf4f7f2072a28782c.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7001790332027289636.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7001790332027289636.html" itemprop="url">Kafka 认证配置实践笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-29T18:03:34+08:00">
                2021-08-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x6765;&#x5B9E;&#x8DF5; Kafka &#x5B89;&#x5168;&#x914D;&#x7F6E;&#xFF0C;&#x901A;&#x8FC7;&#x672C;&#x7BC7;&#x6559;&#x7A0B;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#x8BBF;&#x95EE;&#x7684; Kafka&#x3002;</p>
</blockquote>
<p>&#x672C;&#x6587;&#x4F7F;&#x7528; SASL/SCRAM &#x8BA4;&#x8BC1;&#x673A;&#x5236;&#xFF0C;&#x662F; Kafka 0.10.2 &#x7248;&#x672C;&#x5F15;&#x5165;&#x7684;&#x3002;</p>
<p>&#x6D4B;&#x8BD5;&#x73AF;&#x5883;: MacOs mojave&#xFF0C;kafka_2.12-2.4.0</p>
<h4 id="&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;&#x7528;&#x6237;"><a href="#&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;&#x7528;&#x6237;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;&#x7528;&#x6237;"></a>&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;&#x7528;&#x6237;</h4><p>&#x8BF4;&#x660E;:</p>
<p>admin &#x7528;&#x4E8E; broker &#x4E4B;&#x95F4;&#x901A;&#x4FE1;&#xFF0C;writer &#x7528;&#x4E8E;&#x751F;&#x4EA7;&#x8005;&#xFF0C;reader &#x7528;&#x4E8E;&#x6D88;&#x8D39;&#x8005;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config &apos;SCRAM-SHA-256=[password=admin]&apos; --entity-type users --entity-name admin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config &apos;SCRAM-SHA-256=[password=writer]&apos; --entity-type users --entity-name writer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bin/kafka-configs.sh --zookeeper localhost:2181 --alter --add-config &apos;SCRAM-SHA-256=[password=reader]&apos; --entity-type users --entity-name reader</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;-JAAS-&#x6587;&#x4EF6;"><a href="#&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x521B;&#x5EFA;-JAAS-&#x6587;&#x4EF6;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x521B;&#x5EFA; JAAS &#x6587;&#x4EF6;"></a>&#x7B2C;&#x4E8C;&#x6B65;&#xFF0C;&#x521B;&#x5EFA; JAAS &#x6587;&#x4EF6;</h4><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<p>&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7528;&#x4E8E;&#x542F;&#x52A8; broker&#xFF0C;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x547D;&#x540D;&#x4E3A; kafka-broker.jaas&#xFF0C;broker &#x542F;&#x52A8;&#x65F6;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x8BE5;&#x6587;&#x4EF6;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">KafkaServer {</span><br><span class="line">org.apache.kafka.common.security.scram.ScramLoginModule required</span><br><span class="line">username=&quot;admin&quot;</span><br><span class="line">password=&quot;admin&quot;;</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x4E09;&#x6B65;&#xFF0C;&#x914D;&#x7F6E;-server-properties-&#x6587;&#x4EF6;"><a href="#&#x7B2C;&#x4E09;&#x6B65;&#xFF0C;&#x914D;&#x7F6E;-server-properties-&#x6587;&#x4EF6;" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;&#xFF0C;&#x914D;&#x7F6E; server.properties &#x6587;&#x4EF6;"></a>&#x7B2C;&#x4E09;&#x6B65;&#xFF0C;&#x914D;&#x7F6E; server.properties &#x6587;&#x4EF6;</h4><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<p>&#x65E2;&#x7136;&#x8981;&#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#xFF0C;server.properties &#x6587;&#x4EF6;&#x662F;&#x8981;&#x8FDB;&#x884C;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x53C2;&#x8003;&#x4E0B;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;sasl.enabled.mechanisms=SCRAM-SHA-256</span><br><span class="line"></span><br><span class="line">sasl.mechanism.inter.broker.protocol=SCRAM-SHA-256</span><br><span class="line"></span><br><span class="line">security.inter.broker.protocol=SASL_PLAINTEXT</span><br><span class="line"></span><br><span class="line">listeners=SASL_PLAINTEXT://localhost:9092</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x56DB;&#x6B65;&#xFF0C;&#x542F;&#x52A8;-broker"><a href="#&#x7B2C;&#x56DB;&#x6B65;&#xFF0C;&#x542F;&#x52A8;-broker" class="headerlink" title="&#x7B2C;&#x56DB;&#x6B65;&#xFF0C;&#x542F;&#x52A8; broker"></a>&#x7B2C;&#x56DB;&#x6B65;&#xFF0C;&#x542F;&#x52A8; broker</h4><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<p>&#x542F;&#x52A8; broker &#x65F6;&#xFF0C;&#x6307;&#x5B9A; jaas &#x6587;&#x4EF6;&#xFF0C;&#x53CA;&#x4FEE;&#x6539;&#x540E;&#x7684; server.properties &#x6587;&#x4EF6;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;KAFKA_OPTS=-Djava.security.auth.login.config=&lt;yourPath&gt;/kafka-broker.jaas bin/kafka-server-start.sh config/server.properties</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x4E94;&#x6B65;&#xFF0C;&#x53D1;&#x9001;&#x6D88;&#x606F;"><a href="#&#x7B2C;&#x4E94;&#x6B65;&#xFF0C;&#x53D1;&#x9001;&#x6D88;&#x606F;" class="headerlink" title="&#x7B2C;&#x4E94;&#x6B65;&#xFF0C;&#x53D1;&#x9001;&#x6D88;&#x606F;"></a>&#x7B2C;&#x4E94;&#x6B65;&#xFF0C;&#x53D1;&#x9001;&#x6D88;&#x606F;</h4><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<p>&#x5F00;&#x542F;&#x4E86;&#x8BA4;&#x8BC1;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x542F;&#x52A8;&#x65F6;&#x6307;&#x5B9A;&#xFF0C;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;&#x53EF;&#x4EE5;&#x547D;&#x540D;&#x4E3A; producer.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;security.protocol=SASL_PLAINTEXT</span><br><span class="line">sasl.mechanism=SCRAM-SHA-256</span><br><span class="line">sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;writer&quot; password=&quot;writer&quot;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test  --producer.config &lt;yourPath&gt;/kafka_2.12-2.4.0/producer.conf</span><br></pre></td></tr></table></figure>

<h4 id="&#x7B2C;&#x516D;&#x6B65;&#xFF0C;&#x63A5;&#x6536;&#x6D88;&#x606F;"><a href="#&#x7B2C;&#x516D;&#x6B65;&#xFF0C;&#x63A5;&#x6536;&#x6D88;&#x606F;" class="headerlink" title="&#x7B2C;&#x516D;&#x6B65;&#xFF0C;&#x63A5;&#x6536;&#x6D88;&#x606F;"></a>&#x7B2C;&#x516D;&#x6B65;&#xFF0C;&#x63A5;&#x6536;&#x6D88;&#x606F;</h4><p>&#x8BF4;&#x660E;&#xFF1A;</p>
<p>&#x6D88;&#x8D39;&#x8005;&#x548C;&#x751F;&#x4EA7;&#x8005;&#x4E00;&#x6837;&#xFF0C;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x5B9A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x751F;&#x4EA7;&#x8005;&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x6709;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#x4E0D;&#x4E00;&#x81F4;&#x3002;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;&#x53EF;&#x4EE5;&#x547D;&#x540D;&#x4E3A; consumer.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">security.protocol=SASL_PLAINTEXT</span><br><span class="line">sasl.mechanism=SCRAM-SHA-256</span><br><span class="line">sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;reader&quot; password=&quot;reader&quot;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test --from-beginning --consumer.config &lt;yourPath&gt;/kafka_2.12-2.4.0/consumer.conf</span><br></pre></td></tr></table></figure>

<h4 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h4><p>&#x6211;&#x4EEC;&#x914D;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; Kafka &#x8BA4;&#x8BC1;&#xFF0C;&#x4F7F;&#x7528; SASL/SCRAM &#x8BA4;&#x8BC1;&#x673A;&#x5236;&#x3002;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x7528;&#x6237;&#xFF0C;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x4FEE;&#x6539; server &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6700;&#x540E;&#xFF0C;producer &#x3001;consumer &#x5728;&#x542F;&#x52A8;&#x65F6;&#xFF0C;&#x5747;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5B89;&#x5168;&#x8BBF;&#x95EE;&#x7684; Kafka &#x5C31;&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x4E86;&#x3002;&#x4E0B;&#x7BC7;&#x7EE7;&#x7EED;&#x4ECB;&#x7ECD;&#xFF0C;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x6388;&#x6743;&#x914D;&#x7F6E;&#x3002;</p>
<h4 id="&#x53C2;&#x8003;&#x6587;&#x6863;&#x53CA;&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x53C2;&#x8003;&#x6587;&#x6863;&#x53CA;&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x53C2;&#x8003;&#x6587;&#x6863;&#x53CA;&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x53C2;&#x8003;&#x6587;&#x6863;&#x53CA;&#x63A8;&#x8350;&#x9605;&#x8BFB;</h4><p><a href="/external_links/65bf34e865e25f43e65ce57d29b54bc1.html" target="blank" rel="noopener">Kafka&#x6838;&#x5FC3;&#x6280;&#x672F;&#x4E0E;&#x5B9E;&#x6218;</a></p>
<p><a href="/external_links/a631a7e661ad3c12df54cd1217800f5f.html" target="blank" rel="noopener">Apache Kafka</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ff3518e454526243973eca16fad2ff5d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7001324254046191624.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7001324254046191624.html" itemprop="url">在PyQt中构建 Python 菜单栏、菜单和工具栏</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-28T11:56:16+08:00">
                2021-08-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>&#x6458;&#x8981;</strong>&#xFF1A;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#x662F;&#x5927;&#x591A;&#x6570;GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5E38;&#x89C1;&#x4E14;&#x91CD;&#x8981;&#x7684;&#x56FE;&#x5F62;&#x7EC4;&#x4EF6;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x4E3A;&#x60A8;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9009;&#x9879;&#x548C;&#x529F;&#x80FD;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
</blockquote>
<p>&#x672C;&#x6587;&#x5206;&#x4EAB;&#x81EA;&#x534E;&#x4E3A;&#x4E91;&#x793E;&#x533A;&#x300A;<a href="/external_links/03545b94fc3c5dc0b6fcaa75cb237ffa.html" target="blank" rel="noopener">Python &#x548C; PyQt&#xFF1A;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;</a>&#x300B;&#xFF0C;&#x4F5C;&#x8005;&#xFF1A;Yuchuan&#x3002;</p>
<p>&#x5728;&#x4F7F;&#x7528; Python &#x548C;PyQt&#x5F00;&#x53D1;&#x56FE;&#x5F62;&#x7528;&#x6237;&#x754C;&#x9762; (GUI)&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x60A8;&#x5C06;&#x4F7F;&#x7528;&#x7684;&#x4E00;&#x4E9B;&#x6700;&#x6709;&#x7528;&#x548C;&#x6700;&#x901A;&#x7528;&#x7684;&#x56FE;&#x5F62;&#x5143;&#x7D20;&#x662F;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#x3002;</p>
<p>&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x53EF;&#x4EE5;&#x4F7F;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x770B;&#x8D77;&#x6765;<strong>&#x7CBE;&#x7F8E;</strong>&#x548C;<strong>&#x4E13;&#x4E1A;</strong>&#xFF0C;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E00;&#x7EC4;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x800C;&#x72B6;&#x6001;&#x680F;&#x5141;&#x8BB8;&#x60A8;&#x663E;&#x793A;&#x6709;&#x5173;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x72B6;&#x6001;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#x3002;</p>
<p><strong>&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#xFF1A;</strong></p>
<ul>
<li>&#x4EC0;&#x4E48;&#x83DC;&#x5355;&#xFF0C;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#x662F;</li>
<li>&#x5982;&#x4F55;&#x4EE5;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;</li>
<li>&#x5982;&#x4F55;&#x4F7F;&#x7528;PyQt &#x64CD;&#x4F5C;&#x586B;&#x5145; Python &#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;</li>
<li>&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x680F;&#x663E;&#x793A;&#x72B6;&#x6001;&#x4FE1;&#x606F;</li>
</ul>
<p>&#x6B64;&#x5916;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#x4E00;&#x4E9B;&#x7F16;&#x7A0B;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x4F7F;&#x7528; Python &#x548C; PyQt &#x521B;&#x5EFA;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#x65F6;&#x5E94;&#x7528;&#x8FD9;&#x4E9B;&#x5B9E;&#x8DF5;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x6784;&#x5EFA;-Python-&#x83DC;&#x5355;&#x680F;&#x3001;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x6784;&#x5EFA;-Python-&#x83DC;&#x5355;&#x680F;&#x3001;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x6784;&#x5EFA; Python &#x83DC;&#x5355;&#x680F;&#x3001;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;"></a>&#x5728; PyQt &#x4E2D;&#x6784;&#x5EFA; Python &#x83DC;&#x5355;&#x680F;&#x3001;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;</h2><p>&#x4E00;&#x4E2A;<strong>&#x83DC;&#x5355;&#x680F;</strong>&#x662F;&#x4E00;&#x4E2A;GUI&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x533A;&#x57DF;&#x4E3B;&#x7A97;&#x53E3;&#x4E2D;&#x4FDD;&#x5B58;<strong>&#x83DC;&#x5355;</strong>&#x3002;&#x83DC;&#x5355;&#x662F;&#x9009;&#x9879;&#x7684;&#x4E0B;&#x62C9;&#x5217;&#x8868;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x9009;&#x9879;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x6B63;&#x5728;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x7684;&#x83DC;&#x5355;&#x680F;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4EE5;&#x4E0B;&#x4E00;&#x4E9B;&#x83DC;&#x5355;&#xFF1A;</p>
<ul>
<li>&#x4E00;&#x4E2A;_&#x6587;&#x4EF6;_&#x83DC;&#x5355;&#xFF0C;&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x7684;&#x4E00;&#x4E9B;&#x83DC;&#x5355;&#x9009;&#x9879;&#xFF1A;</li>
<li>_&#x65B0;&#x5EFA;_&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x65B0;&#x6587;&#x6863;</li>
<li>_&#x6253;&#x5F00;_&#x4EE5;&#x6253;&#x5F00;&#x73B0;&#x6709;&#x6587;&#x6863;</li>
<li>_&#x6253;&#x5F00;&#x6700;&#x8FD1;_&#x6253;&#x5F00;&#x6700;&#x8FD1;&#x7684;&#x6587;&#x6863;</li>
<li>_Save_&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x6587;&#x6863;</li>
<li>_Exit_&#x9000;&#x51FA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;</li>
<li>&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x4E00;&#x4E9B;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x83DC;&#x5355;&#xFF1A;</li>
<li>_Copy_&#x7528;&#x4E8E;&#x590D;&#x5236;&#x4E00;&#x4E9B;&#x6587;&#x672C;</li>
<li>_Paste_&#x7528;&#x4E8E;&#x7C98;&#x8D34;&#x4E00;&#x4E9B;&#x6587;&#x672C;</li>
<li>_Cut_&#x7528;&#x4E8E;&#x526A;&#x5207;&#x4E00;&#x4E9B;&#x6587;&#x672C;</li>
<li>&#x4E00;&#x4E2A;_&#x5E2E;&#x52A9;_&#x83DC;&#x5355;&#xFF0C;&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x4E00;&#x4E9B;&#x83DC;&#x5355;&#x9009;&#x9879;&#xFF1A;</li>
<li>_&#x5E2E;&#x52A9;&#x5185;&#x5BB9;_&#x7528;&#x4E8E;&#x542F;&#x52A8;&#x7528;&#x6237;&#x624B;&#x518C;&#x548C;&#x5E2E;&#x52A9;&#x5185;&#x5BB9;</li>
<li>_&#x5173;&#x4E8E;_&#x542F;&#x52A8;&#x5173;&#x4E8E;&#x5BF9;&#x8BDD;&#x6846;</li>
</ul>
<p>&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#x9009;&#x9879;&#x6DFB;&#x52A0;&#x5230;<strong>&#x5DE5;&#x5177;&#x680F;</strong>&#x3002;&#x5DE5;&#x5177;&#x680F;&#x662F;&#x5E26;&#x6709;&#x6709;&#x610F;&#x4E49;&#x56FE;&#x6807;&#x7684;&#x6309;&#x94AE;&#x9762;&#x677F;&#xFF0C;&#x53EF;&#x63D0;&#x4F9B;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x6700;&#x5E38;&#x7528;&#x9009;&#x9879;&#x7684;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x3002;&#x5728;&#x60A8;&#x7684;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;_New_&#x3001;<em>Open</em>&#x3001;<em>Save</em>&#x3001;_Copy_&#x548C;_Paste_&#x7B49;&#x9009;&#x9879;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x4E0A;&#x8FF0;&#x6240;&#x6709;&#x83DC;&#x5355;&#x548C;&#x9009;&#x9879;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F5C;&#x4E3A;&#x521B;&#x5EFA;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x9879;&#x76EE;&#x7684;&#x8D77;&#x70B9;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x672C;&#x8282;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x4F7F;&#x7528; Python &#x548C; PyQt &#x5411; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#x680F;&#x3001;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x3002;</p>
<p>&#x5728;&#x7EE7;&#x7EED;&#x4E4B;&#x524D;&#xFF0C;&#x60A8;&#x5C06;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x793A;&#x4F8B; PyQt &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x5C06;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x5728;&#x6BCF;&#x4E2A;&#x90E8;&#x5206;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5411;&#x6B64;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x65B0;&#x7279;&#x6027;&#x548C;&#x529F;&#x80FD;&#x3002;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x4E3B;&#x7A97;&#x53E3;&#x98CE;&#x683C;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B83;&#x5C06;&#x6709;&#x4E00;&#x4E2A;&#x83DC;&#x5355;&#x680F;&#x3001;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x3001;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x680F;&#x548C;&#x4E00;&#x4E2A;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x3002;</p>
<p>&#x6253;&#x5F00;&#x60A8;&#x6700;&#x559C;&#x6B22;&#x7684;&#x4EE3;&#x7801;&#x7F16;&#x8F91;&#x5668;&#x6216; IDE&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;sample_app.py. &#x7136;&#x540E;&#x5728;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;import sys</span><br><span class="line"></span><br><span class="line">from PyQt5.QtCore import Qt</span><br><span class="line">from PyQt5.QtWidgets import QApplication, QLabel, QMainWindow</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    &quot;&quot;&quot;Main Window.&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, parent=None):</span><br><span class="line">        &quot;&quot;&quot;Initializer.&quot;&quot;&quot;</span><br><span class="line">        super().__init__(parent)</span><br><span class="line">        self.setWindowTitle(&quot;Python Menus &amp; Toolbars&quot;)</span><br><span class="line">        self.resize(400, 200)</span><br><span class="line">        self.centralWidget = QLabel(&quot;Hello, World&quot;)</span><br><span class="line">        self.centralWidget.setAlignment(Qt.AlignHCenter | Qt.AlignVCenter)</span><br><span class="line">        self.setCentralWidget(self.centralWidget)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    app = QApplication(sys.argv)</span><br><span class="line">    win = Window()</span><br><span class="line">    win.show()</span><br><span class="line">    sys.exit(app.exec_())</span><br></pre></td></tr></table></figure>

<p>&#x73B0;&#x5728;sample_app.py&#x5305;&#x542B;&#x521B;&#x5EFA;&#x793A;&#x4F8B; PyQt &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6240;&#x9700;&#x7684;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Window&#x7EE7;&#x627F;&#x81EA;QMainWindow. &#x56E0;&#x6B64;&#xFF0C;&#x60A8;&#x6B63;&#x5728;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x4E3B;&#x7A97;&#x53E3;&#x6837;&#x5F0F;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x4E0D;&#x5E78;&#x7684;&#x662F;&#xFF0C;PyQt5 &#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x6709;&#x4E00;&#x4E9B;&#x4E0D;&#x5B8C;&#x6574;&#x7684;&#x90E8;&#x5206;&#x3002;&#x8981;&#x89E3;&#x51B3;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;PyQt4 &#x6587;&#x6863;&#x6216;&#x539F;&#x59CB;Qt &#x6587;&#x6863;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x7C7B;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;&#x4E2D;.__init__()&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x4F7F;&#x7528; &#x8C03;&#x7528;&#x7236;&#x7C7B;&#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;super()&#x3002;&#x7136;&#x540E;&#x4F7F;&#x7528; &#x8BBE;&#x7F6E;&#x7A97;&#x53E3;&#x7684;&#x6807;&#x9898;.setWindowTitle()&#x5E76;&#x4F7F;&#x7528;&#x8C03;&#x6574;&#x7A97;&#x53E3;&#x5927;&#x5C0F;.resize()&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x5982;&#x679C;&#x60A8;&#x4E0D;&#x719F;&#x6089; PyQt &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x5B83;&#x4EEC;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Python &#x548C; PyQt&#xFF1A;&#x6784;&#x5EFA; GUI &#x684C;&#x9762;&#x8BA1;&#x7B97;&#x5668;&#x3002;</p>
</blockquote>
<p>&#x7A97;&#x53E3;&#x7684;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;QLabel&#x5BF9;&#x8C61;&#xFF0C;&#x60A8;&#x5C06;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x663E;&#x793A;&#x6D88;&#x606F;&#x4EE5;&#x54CD;&#x5E94;&#x67D0;&#x4E9B;&#x7528;&#x6237;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x5C06;&#x663E;&#x793A;&#x5728;&#x7A97;&#x53E3;&#x7684;&#x4E2D;&#x592E;&#x3002;&#x8981;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x4F60;&#x53EB;.setAlignment()&#x4E0A;QLabel&#x5BF9;&#x8C61;&#x4E0E;&#x4E00;&#x5BF9;&#x592B;&#x5987;&#x7684;&#x5BF9;&#x9F50;&#x6807;&#x5FD7;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x4ECE;&#x547D;&#x4EE4;&#x884C;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x7A97;&#x53E3;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/59c355161d455f7774def22e3cb150f3b878638954b87d4eecffe456991b052f" alt></p>
<p>&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF01;&#x60A8;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528; Python &#x548C; PyQt &#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x4E3B;&#x7A97;&#x53E3;&#x98CE;&#x683C;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x60A8;&#x5C06;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#x5373;&#x5C06;&#x51FA;&#x73B0;&#x7684;&#x6240;&#x6709;&#x793A;&#x4F8B;&#x4E2D;&#x4F7F;&#x7528;&#x6B64;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</p>
<h2 id="&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x680F;"><a href="#&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x680F;" class="headerlink" title="&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x680F;"></a>&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x680F;</h2><p>&#x5728; PyQt &#x4E3B;&#x7A97;&#x53E3;&#x98CE;&#x683C;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;QMainWindow&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x7A7A;QMenuBar&#x5BF9;&#x8C61;&#x3002;&#x8981;&#x8BBF;&#x95EE;&#x6B64;&#x83DC;&#x5355;&#x680F;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x8C03;&#x7528;.menuBar()&#x60A8;&#x7684;QMainWindow&#x5BF9;&#x8C61;&#x3002;&#x6B64;&#x65B9;&#x6CD5;&#x5C06;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x83DC;&#x5355;&#x680F;&#x3002;&#x6B64;&#x83DC;&#x5355;&#x680F;&#x7684;&#x7236;&#x7EA7;&#x5C06;&#x662F;&#x60A8;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x8FD4;&#x56DE;&#x5230;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x5728; &#x7684;&#x5B9A;&#x4E49;&#x4E2D;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        menuBar = self.menuBar()</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x662F;&#x5728; PyQt &#x4E2D;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x680F;&#x7684;&#x9996;&#x9009;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;menuBar&#x53D8;&#x91CF;&#x5C06;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7A7A;&#x7684;&#x83DC;&#x5355;&#x680F;&#xFF0C;&#x8FD9;&#x5C06;&#x662F;&#x60A8;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x7684;&#x83DC;&#x5355;&#x680F;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A; PyQt &#x7F16;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x505A;&#x6CD5;&#x662F;&#x5C06;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x7528;&#x4E8E;&#x60A8;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;&#x6216;&#x4ECE;&#x5176;&#x5B9A;&#x4E49;&#x65B9;&#x6CD5;&#x4E4B;&#x5916;&#x9700;&#x8981;&#x7684;&#x5BF9;&#x8C61;&#x3002;Python&#x5783;&#x573E;&#x6536;&#x96C6;&#x6240;&#x6709;&#x8D85;&#x51FA;&#x8303;&#x56F4;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x53EF;&#x80FD;&#x8BA4;&#x4E3A;menuBar&#x5728;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x4E00;&#x65E6;._createMenuBar() &#x8FD4;&#x56DE;&#x5C31;&#x4F1A;&#x6D88;&#x5931;&#x3002;</p>
</blockquote>
<p>&#x4E8B;&#x5B9E;&#x662F; PyQt &#x4FDD;&#x7559;&#x5BF9;&#x672C;&#x5730;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x4F8B;&#x5982;menuBar&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x6240;&#x6709;&#x6743;&#x6216;&#x7236;&#x5B50;&#x5173;&#x7CFB;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x7531;&#x4E8E;menuBar&#x5B83;&#x5F52;&#x60A8;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x5BF9;&#x8C61;&#x6240;&#x6709;&#xFF0C;Python &#x5C06;&#x65E0;&#x6CD5;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x3002;</p>
<p>&#x5411; PyQt &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#x680F;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QMenuBar&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;.setMenuBar(). &#x8003;&#x8651;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;._createMenuBar()&#x6309;&#x4EE5;&#x4E0B;&#x65B9;&#x5F0F;&#x7F16;&#x5199;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtWidgets import QMenuBar</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        menuBar = QMenuBar(self)</span><br><span class="line">        self.setMenuBar(menuBar)</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;menuBar&#x6301;&#x6709;&#x4E00;&#x4E2A;QMenuBar&#x7236;&#x7EA7;&#x8BBE;&#x7F6E;&#x4E3A;&#x7684;&#x5BF9;&#x8C61;self&#xFF0C;&#x5B83;&#x662F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x6709;&#x4E86;&#x83DC;&#x5355;&#x680F;&#x5BF9;&#x8C61;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;.setMenuBar()&#x5C06;&#x5B83;&#x6DFB;&#x52A0;&#x5230;&#x4F60;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x4E2D;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F60;&#x9996;&#x5148;&#x9700;&#x8981;&#x8FDB;&#x53E3; QMenuBar&#x7684;PyQt5.QWidgets&#x3002;</p>
<p>&#x5728; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x83DC;&#x5355;&#x680F;&#x4F1A;&#x6839;&#x636E;&#x5E95;&#x5C42;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x663E;&#x793A;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x4F4D;&#x7F6E;&#xFF1A;</p>
<ul>
<li><strong>Windows</strong>&#xFF1A;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E3B;&#x7A97;&#x53E3;&#x7684;&#x9876;&#x90E8;&#xFF0C;&#x6807;&#x9898;&#x680F;&#x4E0B;&#x65B9;</li>
<li><strong>macOS</strong>&#xFF1A;&#x5728;&#x5C4F;&#x5E55;&#x9876;&#x90E8;</li>
<li><strong>Linux</strong>&#xFF1A;&#x5728;&#x4E3B;&#x7A97;&#x53E3;&#x9876;&#x90E8;&#x6216;&#x5C4F;&#x5E55;&#x9876;&#x90E8;&#xFF0C;&#x53D6;&#x51B3;&#x4E8E;&#x60A8;&#x7684;&#x684C;&#x9762;&#x73AF;&#x5883;</li>
</ul>
<p>&#x4E3A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x680F;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x662F;._createMenuBar()&#x4ECE;&#x4E3B;&#x7A97;&#x53E3;&#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;.__init__()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    &quot;&quot;&quot;Main Window.&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, parent=None):</span><br><span class="line">        # Snip...</span><br><span class="line">        self._createMenuBar()</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x60A8;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x65B0;&#x66F4;&#x6539;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x770B;&#x4E0D;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E3B;&#x7A97;&#x53E3;&#x4E2D;&#x663E;&#x793A;&#x7684;&#x83DC;&#x5355;&#x680F;&#x3002;&#x90A3;&#x662F;&#x56E0;&#x4E3A;&#x60A8;&#x7684;&#x83DC;&#x5355;&#x680F;&#x4ECD;&#x7136;&#x662F;&#x7A7A;&#x7684;&#x3002;&#x8981;&#x67E5;&#x770B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E3B;&#x7A97;&#x53E3;&#x4E0A;&#x7684;&#x83DC;&#x5355;&#x680F;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E9B;&#x83DC;&#x5355;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x4F60;&#x63A5;&#x4E0B;&#x6765;&#x8981;&#x5B66;&#x4E60;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<h2 id="&#x5C06;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;"><a href="#&#x5C06;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;" class="headerlink" title="&#x5C06;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;"></a>&#x5C06;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;</h2><p>&#x83DC;&#x5355;&#x662F;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x4E0B;&#x62C9;&#x5217;&#x8868;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5355;&#x51FB;&#x5B83;&#x4EEC;&#x6216;&#x6309;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x6765;&#x89E6;&#x53D1;&#x3002;&#x5728; PyQt &#x4E2D;&#xFF0C;&#x81F3;&#x5C11;&#x6709;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x5C06;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;&#x5BF9;&#x8C61;&#xFF1A;</p>
<ol>
<li>**QMenuBar.addMenu(menu)**&#x5C06;QMenu&#x5BF9;&#x8C61; ( menu)&#x9644;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;&#x5BF9;&#x8C61;&#x3002;&#x5B83;&#x8FD4;&#x56DE;&#x4E0E;&#x6B64;&#x83DC;&#x5355;&#x5173;&#x8054;&#x7684;&#x64CD;&#x4F5C;&#x3002;</li>
<li>**QMenuBar.addMenu(title)**&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QMenu&#x4EE5;&#x5B57;&#x7B26;&#x4E32; ( title) &#x4F5C;&#x4E3A;&#x6807;&#x9898;&#x7684;&#x65B0;&#x5BF9;&#x8C61;&#x5E76;&#x5C06;&#x5176;&#x9644;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x680F;&#x3002;&#x83DC;&#x5355;&#x680F;&#x53D6;&#x5F97;&#x83DC;&#x5355;&#x7684;&#x6240;&#x6709;&#x6743;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x65B0;QMenu&#x5BF9;&#x8C61;&#x3002;</li>
<li>**QMenuBar.addMenu(icon, title)**&#x521B;&#x5EFA;&#x5E76;&#x8FFD;&#x52A0;&#x65B0;&#x7684;QMenu&#x7269;&#x54C1;&#x4E0E;icon&#x548C;title&#x4E00;&#x4E2A;&#x83DC;&#x5355;&#x680F;&#x5BF9;&#x8C61;&#x3002;&#x83DC;&#x5355;&#x680F;&#x53D6;&#x5F97;&#x83DC;&#x5355;&#x7684;&#x6240;&#x6709;&#x6743;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x65B0;QMenu&#x5BF9;&#x8C61;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7B2C;&#x4E00;&#x4E2A;&#x9009;&#x9879;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5148;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;QMenu&#x5BF9;&#x8C61;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E4B;&#x4E00;&#xFF1A;</p>
<ol>
<li>QMenu(parent)</li>
<li>QMenu(title, parent)</li>
</ol>
<p>&#x5728;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;parent&#x662F;QWidget&#x5C06;&#x6301;&#x6709;QMenu&#x5BF9;&#x8C61;&#x7684;&#x6240;&#x6709;&#x6743;&#x3002;&#x60A8;&#x901A;&#x5E38;&#x4F1A;&#x8BBE;&#x7F6E;parent&#x5230;&#x60A8;&#x5C06;&#x5728;&#x5176;&#x4E2D;&#x4F7F;&#x7528;&#x83DC;&#x5355;&#x7684;&#x7A97;&#x53E3;&#x3002;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;title&#x5C06;&#x4FDD;&#x5B58;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x63CF;&#x8FF0;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x6587;&#x672C;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5C06;_File_&#x3001;_Edit_&#x548C;_Help_&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x83DC;&#x5355;&#x680F;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtWidgets import QMenu</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        menuBar = self.menuBar()</span><br><span class="line">        # Creating menus using a QMenu object</span><br><span class="line">        fileMenu = QMenu(&quot;&amp;File&quot;, self)</span><br><span class="line">        menuBar.addMenu(fileMenu)</span><br><span class="line">        # Creating menus using a title</span><br><span class="line">        editMenu = menuBar.addMenu(&quot;&amp;Edit&quot;)</span><br><span class="line">        helpMenu = menuBar.addMenu(&quot;&amp;Help&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x9996;&#x5148;&#xFF0C;&#x4F60;&#x5BFC;&#x5165; QMenu&#x7684;PyQt5.QtWidgets&#x3002;&#x7136;&#x540E;&#x5728; &#x4E2D;._createMenuBar()&#xFF0C;&#x4F7F;&#x7528; &#x7684;&#x524D;&#x4E24;&#x4E2A;&#x53D8;&#x4F53;&#x5411;&#x83DC;&#x5355;&#x680F;&#x6DFB;&#x52A0;&#x4E09;&#x4E2A;&#x83DC;&#x5355;.addMenu()&#x3002;&#x7B2C;&#x4E09;&#x4E2A;&#x53D8;&#x4F53;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x56FE;&#x6807;&#x5BF9;&#x8C61;&#xFF0C;&#x4F46;&#x60A8;&#x8FD8;&#x6CA1;&#x6709;&#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x521B;&#x5EFA;&#x548C;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x3002;&#x60A8;&#x5C06;&#x5728;&#x4F7F;&#x7528; PyQt &#x4E2D;&#x7684;&#x56FE;&#x6807;&#x548C;&#x8D44;&#x6E90;&#x90E8;&#x5206;&#x4E2D;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x770B;&#x5230;&#x60A8;&#x73B0;&#x5728;&#x6709;&#x4E00;&#x4E2A;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x7684;&#x83DC;&#x5355;&#x680F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/1f952332e4d834fbfd083d56e73de2c3913b2f50e5dece0de8460494e4361da9" alt="PyQt &#x83DC;&#x5355;&#x680F;"></p>
<p>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x83DC;&#x5355;&#x680F;&#x6709;&#x83DC;&#x5355;_File_&#x3001;<em>Edit_&#x548C;_Help</em>&#x3002;&#x5F53;&#x60A8;&#x5355;&#x51FB;&#x8FD9;&#x4E9B;&#x83DC;&#x5355;&#x65F6;&#xFF0C;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x663E;&#x793A;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x4E0B;&#x62C9;&#x5217;&#x8868;&#x3002;&#x90A3;&#x662F;&#x56E0;&#x4E3A;&#x60A8;&#x8FD8;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;&#x60A8;&#x5C06;&#x5728;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;&#x90E8;&#x5206;&#x4E2D;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x5411;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x8BF7;&#x6CE8;&#x610F;&amp;&#x5305;&#x542B;&#x5728;&#x6BCF;&#x4E2A;&#x83DC;&#x5355;&#x6807;&#x9898;&#x4E2D;&#x7684;&#x4E0E;&#x7B26;&#x53F7; ( ) &#x4F1A;&#x5728;&#x83DC;&#x5355;&#x680F;&#x663E;&#x793A;&#x4E2D;&#x521B;&#x5EFA;&#x5E26;&#x4E0B;&#x5212;&#x7EBF;&#x7684;&#x5B57;&#x6BCD;&#x3002;&#x8FD9;&#x5728;&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x4E00;&#x8282;&#x4E2D;&#x6709;&#x66F4;&#x8BE6;&#x7EC6;&#x7684;&#x8BA8;&#x8BBA;&#x3002;</p>
<h2 id="&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;"><a href="#&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;" class="headerlink" title="&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;"></a>&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;</h2><p>&#x7532;&#x5DE5;&#x5177;&#x680F;&#x662F;&#x4FDD;&#x5B58;&#x6309;&#x94AE;&#x548C;&#x5176;&#x4ED6;&#x90E8;&#x4EF6;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;&#x5230;GUI&#x5E94;&#x7528;&#x7684;&#x6700;&#x666E;&#x901A;&#x7684;&#x9009;&#x9879;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x7684;&#x53EF;&#x79FB;&#x52A8;&#x9762;&#x677F;&#x3002;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x53EF;&#x4EE5;&#x663E;&#x793A;&#x56FE;&#x6807;&#x3001;&#x6587;&#x672C;&#x6216;&#x4E24;&#x8005;&#x6765;&#x8868;&#x793A;&#x5B83;&#x4EEC;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x3002;PyQt &#x4E2D;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x57FA;&#x7C7B;&#x662F;QToolBar. &#x6B64;&#x7C7B;&#x5C06;&#x5141;&#x8BB8;&#x60A8;&#x4E3A; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x5DE5;&#x5177;&#x680F;&#x3002;</p>
<p>&#x5F53;&#x60A8;&#x5411;&#x4E3B;&#x7A97;&#x53E3;&#x6837;&#x5F0F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x5DE5;&#x5177;&#x680F;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4F4D;&#x7F6E;&#x5728;&#x7A97;&#x53E3;&#x9876;&#x90E8;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x4EE5;&#x4E0B;&#x56DB;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x4E4B;&#x4E00;&#x4E2D;&#x653E;&#x7F6E;&#x5DE5;&#x5177;&#x680F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/1ddf09fcd7fc7209b8606506a25002965cfd9ac3dc75f4093656ab26571d6eb0" alt></p>
<p>&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x5728; PyQt &#x4E2D;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x5E38;&#x91CF;&#x3002;&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5FC5;&#x987B;&#x5BFC;&#x5165;QtfromPyQt5.QtCore&#x7136;&#x540E;&#x50CF; in &#x4E00;&#x6837;&#x4F7F;&#x7528;&#x5B8C;&#x5168;&#x9650;&#x5B9A;&#x540D;&#x79F0;Qt.LeftToolBarArea&#x3002;</p>
<p>&#x5728; PyQt &#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;&#x5411;&#x4E3B;&#x7A97;&#x53E3;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x5DE5;&#x5177;&#x680F;&#xFF1A;</p>
<ol>
<li>**QMainWindow.addToolBar(title)**&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x7A7A;QToolBar&#x5BF9;&#x8C61;&#x5E76;&#x5C06;&#x5176;&#x7A97;&#x53E3;&#x6807;&#x9898;&#x8BBE;&#x7F6E;&#x4E3A;title. &#x6B64;&#x65B9;&#x6CD5;&#x5C06;&#x5DE5;&#x5177;&#x680F;&#x63D2;&#x5165;&#x9876;&#x90E8;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x5E76;&#x8FD4;&#x56DE;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x5DE5;&#x5177;&#x680F;&#x3002;</li>
<li>**QMainWindow.addToolBar(toolbar)**&#x5C06;QToolBar&#x5BF9;&#x8C61; ( toolbar) &#x63D2;&#x5165;&#x9876;&#x90E8;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x3002;</li>
<li>**QMainWindow.addToolBar(area, toolbar)**&#x5C06;QToolBar&#x5BF9;&#x8C61; ( toolbar) &#x63D2;&#x5165;&#x6307;&#x5B9A;&#x7684;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF; ( area)&#x3002;&#x5982;&#x679C;&#x4E3B;&#x7A97;&#x53E3;&#x5DF2;&#x6709;&#x5DE5;&#x5177;&#x680F;&#xFF0C;&#x5219;toolbar&#x653E;&#x7F6E;&#x5728;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x73B0;&#x6709;&#x5DE5;&#x5177;&#x680F;&#x4E4B;&#x540E;&#x3002;&#x5982;&#x679C;toolbar&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E8E;&#x4E3B;&#x7A97;&#x53E3;&#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x53EA;&#x4F1A;&#x88AB;&#x79FB;&#x52A8;&#x5230;area.</li>
</ol>
<p>&#x5982;&#x679C;&#x60A8;&#x4F7F;&#x7528;&#x6700;&#x540E;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#x4E4B;&#x4E00;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E4B;&#x4E00;&#xFF1A;</p>
<ol>
<li>QToolBar(parent)</li>
<li>QToolBar(title, parent)</li>
</ol>
<p>&#x5728;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;parent&#x4EE3;&#x8868;QWidget&#x5C06;&#x62E5;&#x6709;&#x5DE5;&#x5177;&#x680F;&#x6240;&#x6709;&#x6743;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x60A8;&#x901A;&#x5E38;&#x4F1A;&#x5C06;&#x5DE5;&#x5177;&#x680F;&#x6240;&#x6709;&#x6743;&#x8BBE;&#x7F6E;&#x4E3A;&#x5C06;&#x5728;&#x5176;&#x4E2D;&#x4F7F;&#x7528;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x7A97;&#x53E3;&#x3002;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;title&#x5C06;&#x662F;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x5DE5;&#x5177;&#x680F;&#x7A97;&#x53E3;&#x6807;&#x9898;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;PyQt &#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7A97;&#x53E3;&#x6807;&#x9898;&#x6765;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x5141;&#x8BB8;&#x4F60;&#x9690;&#x85CF;&#x548C;&#x663E;&#x793A;&#x4F60;&#x7684;&#x5DE5;&#x5177;&#x680F;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x60A8;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x5230;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x5C06;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtWidgets import QToolBar</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createToolBars(self):</span><br><span class="line">        # Using a title</span><br><span class="line">        fileToolBar = self.addToolBar(&quot;File&quot;)</span><br><span class="line">        # Using a QToolBar object</span><br><span class="line">        editToolBar = QToolBar(&quot;Edit&quot;, self)</span><br><span class="line">        self.addToolBar(editToolBar)</span><br><span class="line">        # Using a QToolBar object and a toolbar area</span><br><span class="line">        helpToolBar = QToolBar(&quot;Help&quot;, self)</span><br><span class="line">        self.addToolBar(Qt.LeftToolBarArea, helpToolBar)</span><br></pre></td></tr></table></figure>

<p>&#x9996;&#x5148;&#xFF0C;&#x60A8;QToolBar&#x4ECE;PyQt5.QtWidgets. &#x7136;&#x540E;&#xFF0C;&#x5728; &#x4E2D;._createToolBars()&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x4F7F;&#x7528;&#x6807;&#x9898;&#x521B;&#x5EFA;_&#x6587;&#x4EF6;_&#x5DE5;&#x5177;&#x680F;.addToolBar()&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x60A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QToolBar&#x5E26;&#x6709;&#x6807;&#x9898;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x201D;Edit&#x201D;&#x5E76;&#x4F7F;&#x7528;.addToolBar()&#x4E0D;&#x4F20;&#x9012;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;&#x5DE5;&#x5177;&#x680F;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;_&#x7F16;&#x8F91;_&#x5DE5;&#x5177;&#x680F;&#x4F4D;&#x4E8E;&#x9876;&#x90E8;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x521B;&#x5EFA;_&#x5E2E;&#x52A9;_&#x5DE5;&#x5177;&#x680F;&#x5E76;&#x4F7F;&#x7528; &#x5C06;&#x5176;&#x653E;&#x7F6E;&#x5728;&#x5DE6;&#x4FA7;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;Qt.LeftToolBarArea&#x3002;</p>
<p>&#x5B8C;&#x6210;&#x8FD9;&#x9879;&#x5DE5;&#x4F5C;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x662F;._createToolBars()&#x4ECE; &#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    &quot;&quot;&quot;Main Window.&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, parent=None):</span><br><span class="line">        # Snip...</span><br><span class="line">        self._createToolBars()</span><br></pre></td></tr></table></figure>

<p>._createToolBars()&#x5BF9;&#x521D;&#x59CB;&#x5316;&#x5668;&#x5185;&#x90E8;&#x7684;&#x8C03;&#x7528;Window&#x5C06;&#x521B;&#x5EFA;&#x4E09;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x60A8;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x4E2D;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x73B0;&#x5728;&#x7684;&#x5916;&#x89C2;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/c2e4555916e08b62acdad7ac247baf8cb2d2f12a69fd6e7cf0c062cf079369cd" alt="&#x5E26;&#x6709;&#x56FE;&#x6807;&#x7684; PyQt &#x83DC;&#x5355;&#x680F;"></p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x83DC;&#x5355;&#x680F;&#x6B63;&#x4E0B;&#x65B9;&#x6709;&#x4E24;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#xFF0C;&#x7A97;&#x53E3;&#x5DE6;&#x4FA7;&#x6709;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x3002;&#x6BCF;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x90FD;&#x6709;&#x4E00;&#x6761;&#x53CC;&#x865A;&#x7EBF;&#x3002;&#x5F53;&#x60A8;&#x5C06;&#x9F20;&#x6807;&#x79FB;&#x5230;&#x865A;&#x7EBF;&#x4E0A;&#x65F6;&#xFF0C;&#x6307;&#x9488;&#x4F1A;&#x53D8;&#x6210;&#x4E00;&#x53EA;&#x624B;&#x3002;&#x5982;&#x679C;&#x5355;&#x51FB;&#x5E76;&#x6309;&#x4F4F;&#x865A;&#x7EBF;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x5C06;&#x5DE5;&#x5177;&#x680F;&#x79FB;&#x52A8;&#x5230;&#x7A97;&#x53E3;&#x4E0A;&#x7684;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x4F4D;&#x7F6E;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x533A;&#x57DF;&#x3002;</p>
<p>&#x5982;&#x679C;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x5DE5;&#x5177;&#x680F;&#xFF0C;PyQt &#x5C06;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x5141;&#x8BB8;&#x60A8;&#x6839;&#x636E;&#x9700;&#x8981;&#x9690;&#x85CF;&#x548C;&#x663E;&#x793A;&#x73B0;&#x6709;&#x5DE5;&#x5177;&#x680F;&#x3002;</p>
<p>&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7A97;&#x53E3;&#x4E2D;&#x6709;&#x4E09;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x3002;&#x8FD9;&#x4E9B;&#x5DE5;&#x5177;&#x680F;&#x4ECD;&#x7136;&#x662F;&#x7A7A;&#x7684;&#x2014;&#x2014;&#x60A8;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x624D;&#x80FD;&#x4F7F;&#x5B83;&#x4EEC;&#x8D77;&#x4F5C;&#x7528;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; PyQt <strong>actions</strong>&#xFF0C;&#x5B83;&#x4EEC;&#x662F;QAction. &#x60A8;&#x5C06;&#x5728;&#x540E;&#x9762;&#x7684;&#x90E8;&#x5206;&#x4E2D;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x5728; PyQt &#x4E2D;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x5728; PyQt &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x548C;&#x5176;&#x4ED6;&#x8D44;&#x6E90;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x548C;&#x8D44;&#x6E90;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x548C;&#x8D44;&#x6E90;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x548C;&#x8D44;&#x6E90;"></a>&#x5728; PyQt &#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x548C;&#x8D44;&#x6E90;</h2><p>&#x5728;Qt&#x5E93;&#x5305;&#x62EC;Qt&#x7684;&#x8D44;&#x6E90;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x662F;&#x589E;&#x52A0;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x56FE;&#x6807;&#xFF0C;&#x56FE;&#x50CF;&#xFF0C;&#x7FFB;&#x8BD1;&#x6587;&#x4EF6;&#x548C;&#x5176;&#x4ED6;&#x8D44;&#x6E90;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E00;&#x79CD;&#x4FBF;&#x6377;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x8981;&#x4F7F;&#x7528;&#x8D44;&#x6E90;&#x7CFB;&#x7EDF;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5728;<strong>&#x8D44;&#x6E90;&#x96C6;&#x5408;&#x6587;&#x4EF6;</strong>&#x6216;.qrc&#x6587;&#x4EF6;&#x4E2D;&#x5217;&#x51FA;&#x60A8;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x4E00;&#x4E2A;.qrc&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;XML&#x5305;&#x542B;&#x4F4D;&#x7F6E;&#xFF0C;&#x6216;&#x6587;&#x4EF6;<strong>&#x8DEF;&#x5F84;</strong>&#xFF0C;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x4E00;&#x4E2A;resources&#x76EE;&#x5F55;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x60A8;&#x8981;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; GUI &#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x56FE;&#x6807;&#x3002;&#x60A8;&#x6709;_New_&#x3001;_Open_&#x7B49;&#x9009;&#x9879;&#x7684;&#x56FE;&#x6807;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;.qrc&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x56FE;&#x6807;&#x8DEF;&#x5F84;&#x7684;&#x6587;&#x4EF6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!DOCTYPE RCC&gt;&lt;RCC version=&quot;1.0&quot;&gt;</span><br><span class="line">&lt;qresource&gt;</span><br><span class="line">    &lt;file alias=&quot;file-new.svg&quot;&gt;resources/file-new.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;file-open.svg&quot;&gt;resources/file-open.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;file-save.svg&quot;&gt;resources/file-save.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;file-exit.svg&quot;&gt;resources/file-exit.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;edit-copy.svg&quot;&gt;resources/edit-copy.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;edit-cut.svg&quot;&gt;resources/edit-cut.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;edit-paste.svg&quot;&gt;resources/edit-paste.svg&lt;/file&gt;</span><br><span class="line">    &lt;file alias=&quot;help-content.svg&quot;&gt;resources/help-content.svg&lt;/file&gt;</span><br><span class="line">&lt;/qresource&gt;</span><br><span class="line">&lt;/RCC&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6BCF;&#x4E2A;&#x6761;&#x76EE;&#x5FC5;&#x987B;&#x5305;&#x542B;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x4E2D;&#x8D44;&#x6E90;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#x76F8;&#x5BF9;&#x4E8E;&#x5305;&#x542B;.qrc&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#x3002;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;resources&#x76EE;&#x5F55;&#x9700;&#x8981;&#x548C;.qrc&#x6587;&#x4EF6;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x3002;</p>
<p>alias &#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x9009;&#x5C5E;&#x6027;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x77ED;&#x7684;&#x66FF;&#x4EE3;&#x540D;&#x79F0;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x8BBF;&#x95EE;&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x4E00;&#x65E6;&#x60A8;&#x62E5;&#x6709;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x60A8;&#x5C31;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;pyrcc5&#x9488;&#x5BF9;&#x60A8;&#x7684;.qrc&#x6587;&#x4EF6;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x3002;pyrcc5&#x968F; PyQt &#x4E00;&#x8D77;&#x63D0;&#x4F9B;&#xFF0C;&#x5E76;&#x4E14;&#x5FC5;&#x987B;&#x5728;&#x5B89;&#x88C5; PyQt &#x540E;&#x5728;&#x60A8;&#x7684;Python &#x73AF;&#x5883;&#x4E2D;&#x5B8C;&#x5168;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002;</p>
<p>pyrcc5&#x8BFB;&#x53D6;&#x4E00;&#x4E2A;.qrc&#x6587;&#x4EF6;&#x5E76;&#x751F;&#x6210;&#x4E00;&#x4E2A; Python &#x6A21;&#x5757;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ pyrcc5 -o qrc_resources.py resources.qrc</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x547D;&#x4EE4;&#x5C06;&#x8BFB;&#x53D6;resources.qrc&#x5E76;&#x751F;&#x6210;qrc_resources.py&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x4EE3;&#x7801;&#x3002;&#x60A8;&#x5C06;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x5BFC;&#x5165;&#x5728; Python &#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x8D44;&#x6E90;qrc_resources&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x5982;&#x679C;&#x8FD0;&#x884C;&#x65F6;&#x51FA;&#x73B0;&#x95EE;&#x9898;pyrcc5&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x60A8;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6B63;&#x786E;&#x7684; Python &#x73AF;&#x5883;&#x3002;&#x5982;&#x679C;&#x60A8;&#x5728; Python &#x865A;&#x62DF;&#x73AF;&#x5883;&#x4E2D;&#x5B89;&#x88C5; PyQt&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x65E0;&#x6CD5;pyrcc5&#x5728;&#x8BE5;&#x73AF;&#x5883;&#x4E4B;&#x5916;&#x4F7F;&#x7528;&#x3002;</p>
</blockquote>
<p>&#x8FD9;qrc_resources.py&#x662F;&#x5BF9;&#x5E94;&#x4E8E;&#x60A8;&#x7684;&#x4EE3;&#x7801;&#x7247;&#x6BB5;resources.qrc&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;# -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"># Resource object code</span><br><span class="line">#</span><br><span class="line"># Created by: The Resource Compiler for PyQt5 (Qt v5.9.5)</span><br><span class="line">#</span><br><span class="line"># WARNING! All changes made in this file will be lost!</span><br><span class="line"></span><br><span class="line">from PyQt5 import QtCore</span><br><span class="line"></span><br><span class="line">qt_resource_data = b&quot;\</span><br><span class="line">\x00\x00\x03\xb1\</span><br><span class="line"> \</span><br><span class="line">\x73\x76\x67\x20\x78\x6d\x6c\x6e\x73\x3d\x22\x68\x74\x74\x70\x3a\</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>&#x968F;&#x7740;qrc_resources.py&#x5728;&#x5730;&#x65B9;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5BFC;&#x5165;&#x5230;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x952E;&#x5165;&#x4E00;&#x4E2A;&#x5192;&#x53F7;&#xFF08;&#x8BF7;&#x53C2;&#x9605;&#x5404;&#x8D44;&#x6E90;:)&#xFF0C;&#x7136;&#x540E;&#x65E0;&#x8BBA;&#x662F;&#x5B83;&#x7684;alias&#x6216;&#x5B83;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x8981;&#x4F7F;&#x7528;file-new.svg&#x5176;&#x522B;&#x540D;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>&#x8BBF;&#x95EE;&#x5B57;&#x7B26;&#x4E32;</strong> &#x201C;:file-new.svg&#x201D;&#x3002;&#x5982;&#x679C;&#x60A8;&#x6CA1;&#x6709;alias&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5E26;&#x6709;&#x8BBF;&#x95EE;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x8DEF;&#x5F84;&#x8BBF;&#x95EE;&#x5B83;&#x201D;:resources/file-new.svg&#x201D;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x6709;&#x522B;&#x540D;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x67D0;&#x79CD;&#x539F;&#x56E0;&#x60A8;&#x60F3;&#x901A;&#x8FC7;&#x5176;&#x8DEF;&#x5F84;&#x8BBF;&#x95EE;&#x7ED9;&#x5B9A;&#x8D44;&#x6E90;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x53EF;&#x80FD;&#x5FC5;&#x987B;&#x4ECE;&#x8BBF;&#x95EE;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x5220;&#x9664;&#x5192;&#x53F7;&#x624D;&#x80FD;&#x4F7F;&#x5176;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x8981;&#x5728;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x9700;&#x8981;&#x5BFC;&#x5165;&#x60A8;&#x7684;&#x8D44;&#x6E90;&#x6A21;&#x5757;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;import qrc_resources</span><br></pre></td></tr></table></figure>

<p>&#x5BFC;&#x5165;&#x5305;&#x542B;&#x8D44;&#x6E90;&#x7684;&#x6A21;&#x5757;&#x540E;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; GUI &#x4E2D;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x8D44;&#x6E90;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A; Linters&#x3001;&#x7F16;&#x8F91;&#x5668;&#x548C; IDE&#x53EF;&#x80FD;&#x4F1A;&#x5C06;&#x4E0A;&#x8FF0; import &#x8BED;&#x53E5;&#x6807;&#x8BB0;&#x4E3A;&#x672A;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x60A8;&#x7684;&#x4EE3;&#x7801;&#x4E0D;&#x4F1A;&#x5305;&#x542B;&#x5BF9;&#x5B83;&#x7684;&#x4EFB;&#x4F55;&#x663E;&#x5F0F;&#x4F7F;&#x7528;&#x3002;&#x67D0;&#x4E9B; IDE &#x53EF;&#x80FD;&#x4F1A;&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#x5E76;&#x81EA;&#x52A8;&#x5220;&#x9664;&#x8BE5;&#x884C;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x5FC5;&#x987B;&#x8986;&#x76D6;&#x60A8;&#x7684; linter&#x3001;&#x7F16;&#x8F91;&#x5668;&#x6216; IDE &#x7684;&#x5EFA;&#x8BAE;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x5BFC;&#x5165;&#x4FDD;&#x7559;&#x5728;&#x60A8;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x65E0;&#x6CD5;&#x663E;&#x793A;&#x60A8;&#x7684;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x8981;&#x4F7F;&#x7528;&#x8D44;&#x6E90;&#x7CFB;&#x7EDF;&#x521B;&#x5EFA;&#x56FE;&#x6807;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5B9E;&#x4F8B;&#x5316;QIcon&#xFF0C;&#x5C06;&#x522B;&#x540D;&#x6216;&#x8DEF;&#x5F84;&#x4F20;&#x9012;&#x7ED9;&#x7C7B;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;newIcon = QIcon(&quot;:file-new.svg&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6B64;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;QIcon&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x5BF9;&#x8C61;file-new.svg&#x4F4D;&#x4E8E;&#x60A8;&#x7684;&#x8D44;&#x6E90;&#x6A21;&#x5757;&#x4E2D;&#x3002;&#x8FD9;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5728;&#x6574;&#x4E2A; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x548C;&#x8D44;&#x6E90;&#x7684;&#x4FBF;&#x6377;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x8FD4;&#x56DE;&#x5230;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x66F4;&#x65B0;&#x6700;&#x540E;&#x4E00;&#x884C;._createMenuBar()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtGui import QIcon</span><br><span class="line"></span><br><span class="line">import qrc_resources</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        menuBar = self.menuBar()</span><br><span class="line">        # Using a QMenu object</span><br><span class="line">        fileMenu = QMenu(&quot;&amp;File&quot;, self)</span><br><span class="line">        menuBar.addMenu(fileMenu)</span><br><span class="line">        # Using a title</span><br><span class="line">        editMenu = menuBar.addMenu(&quot;&amp;Edit&quot;)</span><br><span class="line">        # Using an icon and a title</span><br><span class="line">        helpMenu = menuBar.addMenu(QIcon(&quot;:help-content.svg&quot;), &quot;&amp;Help&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x8981;&#x4F7F;&#x6B64;&#x4EE3;&#x7801;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x9700;&#x8981;QIcon&#x4ECE;PyQt5.QtGui. &#x60A8;&#x8FD8;&#x9700;&#x8981;&#x5BFC;&#x5165;qrc_resources. &#x5728;&#x6700;&#x540E;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x4ECE;&#x8D44;&#x6E90;&#x6A21;&#x5757;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;helpMenu&#x4F7F;&#x7528;&#x56FE;&#x6807;help-content.svg&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x4F7F;&#x7528;&#x6B64;&#x66F4;&#x65B0;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x5C06;&#x83B7;&#x5F97;&#x4EE5;&#x4E0B;&#x8F93;&#x51FA;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/907157314e4567447deb2dfdde186052e6d495b984d7628de30d5b9a389ebadf" alt="&#x5E26;&#x6709;&#x5C0F;&#x90E8;&#x4EF6;&#x7684; PyQt &#x5DE5;&#x5177;&#x680F;"></p>
<p>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x73B0;&#x5728;&#x5728;&#x5176;_&#x5E2E;&#x52A9;_&#x83DC;&#x5355;&#x4E0A;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x56FE;&#x6807;&#x3002;&#x5F53;&#x60A8;&#x5355;&#x51FB;&#x8BE5;&#x56FE;&#x6807;&#x65F6;&#xFF0C;&#x83DC;&#x5355;&#x4F1A;&#x663E;&#x793A;&#x6587;&#x672C;Help&#x3002;&#x5728;&#x83DC;&#x5355;&#x680F;&#x4E2D;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x5E76;&#x4E0D;&#x5E38;&#x89C1;&#xFF0C;&#x4F46; PyQt &#x5141;&#x8BB8;&#x60A8;&#x8FD9;&#x6837;&#x505A;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x4E3A;-Python-&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x4E3A;-Python-&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x4E3A; Python &#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;"></a>&#x5728; PyQt &#x4E2D;&#x4E3A; Python &#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;</h2><p>PyQt&#x52A8;&#x4F5C;&#x662F;&#x8868;&#x793A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x7ED9;&#x5B9A;&#x547D;&#x4EE4;&#x3001;&#x64CD;&#x4F5C;&#x6216;&#x52A8;&#x4F5C;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x5F53;&#x60A8;&#x9700;&#x8981;&#x4E3A;&#x4E0D;&#x540C;&#x7684; GUI &#x7EC4;&#x4EF6;&#xFF08;&#x4F8B;&#x5982;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x548C;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#xFF09;&#x63D0;&#x4F9B;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x65F6;&#xFF0C;&#x5B83;&#x4EEC;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B9E;&#x4F8B;&#x5316;QAction. &#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;&#x5C0F;&#x90E8;&#x4EF6;&#x4E2D;&#x624D;&#x80FD;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>
<p>&#x60A8;&#x8FD8;&#x9700;&#x8981;&#x5C06;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#x4E0E;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#x8054;&#x7CFB;&#x8D77;&#x6765;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5C06;&#x5B83;&#x4EEC;&#x8FDE;&#x63A5;&#x5230;&#x89E6;&#x53D1;&#x64CD;&#x4F5C;&#x65F6;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x51FD;&#x6570;&#x6216;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x5C06;&#x5141;&#x8BB8;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x4EE5;&#x54CD;&#x5E94; GUI &#x4E2D;&#x7684;&#x7528;&#x6237;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x884C;&#x52A8;&#x662F;&#x76F8;&#x5F53;&#x591A;&#x624D;&#x591A;&#x827A;&#x7684;&#x3002;&#x5B83;&#x4EEC;&#x5141;&#x8BB8;&#x60A8;&#x8DE8;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x548C;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x5E76;&#x4FDD;&#x6301;&#x540C;&#x6B65;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x5728;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x81F4;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x7528;&#x6237;&#x5355;&#x51FB;_&#x6253;&#x5F00;&#x2026;_&#x83DC;&#x5355;&#x9009;&#x9879;&#x3001;&#x5355;&#x51FB;_&#x6253;&#x5F00;_&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x6216;&#x6309;&#x952E;&#x76D8;&#x4E0A;&#x7684;Ctrl+O&#x65F6;&#xFF0C;&#x4ED6;&#x4EEC;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>QAction &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#xFF0C;&#x5141;&#x8BB8;&#x60A8;&#x8DDF;&#x8E2A;&#x4EE5;&#x4E0B;&#x5143;&#x7D20;&#xFF1A;</p>
<ul>
<li>&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E0A;&#x7684;&#x6587;&#x5B57;</li>
<li>&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x4E0A;&#x7684;&#x6587;&#x672C;</li>
<li>&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x4E0A;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#xFF08;<strong>&#x5DE5;&#x5177;&#x63D0;&#x793A;</strong>&#xFF09;</li>
<li>&#x8FD9;&#x662F;&#x4EC0;&#x4E48;&#x5E2E;&#x52A9;&#x63D0;&#x793A;</li>
<li>&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#xFF08;<strong>&#x72B6;&#x6001;&#x63D0;&#x793A;</strong>&#xFF09;</li>
<li>&#x4E0E;&#x9009;&#x9879;&#x5173;&#x8054;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;</li>
<li>&#x4E0E;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x76F8;&#x5173;&#x8054;&#x7684;&#x56FE;&#x6807;</li>
<li>&#x52A8;&#x4F5C;enabled&#x6216;disabled&#x72B6;&#x6001;</li>
<li>&#x52A8;&#x4F5C;on&#x6216;off&#x72B6;&#x6001;</li>
</ul>
<p>&#x8981;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5B9E;&#x4F8B;&#x5316;QAction. &#x81F3;&#x5C11;&#x6709;&#x4E09;&#x79CD;&#x901A;&#x7528;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x8FD9;&#x4E00;&#x70B9;&#xFF1A;</p>
<ol>
<li>QAction(parent)</li>
<li>QAction(text, parent)</li>
<li>QAction(icon, text, parent)</li>
</ol>
<p>&#x5728;&#x6240;&#x6709;&#x4E09;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x90FD;parent&#x8868;&#x793A;&#x62E5;&#x6709;&#x64CD;&#x4F5C;&#x6240;&#x6709;&#x6743;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x6B64;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4EFB;&#x4F55;QObject. &#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x662F;&#x5C06;&#x64CD;&#x4F5C;&#x521B;&#x5EFA;&#x4E3A;&#x60A8;&#x5C06;&#x5728;&#x5176;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x7684;&#x7A97;&#x53E3;&#x7684;&#x5B50;&#x9879;&#x3002;</p>
<p>&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x548C;&#x7B2C;&#x4E09;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;text&#x4FDD;&#x5B58;&#x64CD;&#x4F5C;&#x5C06;&#x5728;&#x83DC;&#x5355;&#x9009;&#x9879;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x4E0A;&#x663E;&#x793A;&#x7684;&#x6587;&#x672C;&#x3002;</p>
<p>&#x64CD;&#x4F5C;&#x6587;&#x672C;&#x5728;&#x83DC;&#x5355;&#x9009;&#x9879;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x4E0A;&#x7684;&#x663E;&#x793A;&#x65B9;&#x5F0F;&#x4E0D;&#x540C;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6587;&#x672C;&amp;Open&#x2026;&#x663E;&#x793A;&#x4E3A;_&#x6253;&#x5F00;&#x2026;_&#x83DC;&#x5355;&#x4E2D;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x5982;_&#x6253;&#x5F00;_&#x7684;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x3002;</p>
<p>&#x5728;&#x7B2C;&#x4E09;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;icon&#x662F;&#x4E00;&#x4E2A;QIcon&#x4FDD;&#x5B58;&#x52A8;&#x4F5C;&#x56FE;&#x6807;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x6B64;&#x56FE;&#x6807;&#x5C06;&#x663E;&#x793A;&#x5728;&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E2D;&#x6587;&#x672C;&#x7684;&#x5DE6;&#x4FA7;&#x3002;&#x56FE;&#x6807;&#x5728;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#x53D6;&#x51B3;&#x4E8E;&#x5DE5;&#x5177;&#x680F;&#x7684;.toolButtonStyle&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x4EE5;&#x4E0B;&#x503C;&#x4E4B;&#x4E00;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/3470a5bff7adfbedf53133f549e829c96f33301cc1ba8c45b71c564455a9fdc8" alt></p>
<p>&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x8BE5;&#x64CD;&#x4F5C;&#x7684;&#x6587;&#x672C;&#x548C;&#x56FE;&#x6807;&#x901A;&#x8FC7;&#x5404;&#x81EA;&#x7684;<strong>setter&#x65B9;&#x6CD5;</strong>&#xFF0C;.setText()&#x548C;.setIcon()&#x3002;</p>
<blockquote>
<p>**&#x6CE8;&#x610F;&#xFF1A;**&#x6709;&#x5173;QAction&#x5C5E;&#x6027;&#x7684;&#x5B8C;&#x6574;&#x5217;&#x8868;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6587;&#x6863;&#x3002;</p>
</blockquote>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5982;&#x4F55;&#x4F7F;&#x7528; &#x7684;&#x4E0D;&#x540C;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E3A;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x521B;&#x5EFA;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;QAction&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtWidgets import QAction</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createActions(self):</span><br><span class="line">        # Creating action using the first constructor</span><br><span class="line">        self.newAction = QAction(self)</span><br><span class="line">        self.newAction.setText(&quot;&amp;New&quot;)</span><br><span class="line">        # Creating actions using the second constructor</span><br><span class="line">        self.openAction = QAction(&quot;&amp;Open...&quot;, self)</span><br><span class="line">        self.saveAction = QAction(&quot;&amp;Save&quot;, self)</span><br><span class="line">        self.exitAction = QAction(&quot;&amp;Exit&quot;, self)</span><br><span class="line">        self.copyAction = QAction(&quot;&amp;Copy&quot;, self)</span><br><span class="line">        self.pasteAction = QAction(&quot;&amp;Paste&quot;, self)</span><br><span class="line">        self.cutAction = QAction(&quot;C&amp;ut&quot;, self)</span><br><span class="line">        self.helpContentAction = QAction(&quot;&amp;Help Content&quot;, self)</span><br><span class="line">        self.aboutAction = QAction(&quot;&amp;About&quot;, self)</span><br></pre></td></tr></table></figure>

<p>&#x5728; &#x4E2D;._createActions()&#xFF0C;&#x60A8;&#x4E3A;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x5C06;&#x5141;&#x8BB8;&#x60A8;&#x5411;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x9009;&#x9879;&#x3002;</p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x60A8;&#x5C06;&#x64CD;&#x4F5C;&#x521B;&#x5EFA;&#x4E3A;&#x5B9E;&#x4F8B;&#x5C5E;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x53EF;&#x4EE5;._createActions()&#x4F7F;&#x7528;self. &#x8FD9;&#x6837;&#xFF0C;&#x60A8;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E0A;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x5728; &#x4E2D;._createActions()&#xFF0C;&#x60A8;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;QAction&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x60A8;&#x8FD8;&#x770B;&#x4E0D;&#x5230;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x56FE;&#x6807;&#x662F;&#x6CA1;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;&#x60A8;&#x5C06;&#x5728;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x586B;&#x5145;&#x5DE5;&#x5177;&#x680F;&#x90E8;&#x5206;&#x4E2D;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x5411;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x56FE;&#x6807;&#x3002;</p>
</blockquote>
<p>&#x4E0B;&#x4E00;&#x6B65;&#x662F;&#x8C03;&#x7528;._createActions()form &#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    &quot;&quot;&quot;Main Window.&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, parent=None):</span><br><span class="line">        # Snip...</span><br><span class="line">        self._createActions()</span><br><span class="line">        self._createMenuBar()</span><br><span class="line">        self._createToolBars()</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x60A8;&#x73B0;&#x5728;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x4E0D;&#x4F1A;&#x5728; GUI &#x4E0A;&#x770B;&#x5230;&#x4EFB;&#x4F55;&#x66F4;&#x6539;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x5C06;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x4E4B;&#x524D;&#x4E0D;&#x4F1A;&#x663E;&#x793A;&#x5B83;&#x4EEC;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x60A8;&#x5728;&#x8C03;&#x7528;._createActions()&#x4E4B;&#x524D;&#x5148;&#x8C03;&#x7528;._createMenuBar()&#xFF0C;._createToolBars()&#x56E0;&#x4E3A;&#x60A8;&#x5C06;&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E0A;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x5411;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x8BE5;&#x64CD;&#x4F5C;&#x5C06;&#x6210;&#x4E3A;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;&#x5982;&#x679C;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x8BE5;&#x64CD;&#x4F5C;&#x5C06;&#x6210;&#x4E3A;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x63A5;&#x4E0B;&#x6765;&#x51E0;&#x8282;&#x7684;&#x4E3B;&#x9898;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x4E3A;-Python-&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x9009;&#x9879;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x4E3A;-Python-&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x9009;&#x9879;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x4E3A; Python &#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x9009;&#x9879;"></a>&#x5728; PyQt &#x4E2D;&#x4E3A; Python &#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x9009;&#x9879;</h2><p>&#x5982;&#x679C;&#x8981;&#x5411; PyQt &#x4E2D;&#x7684;&#x7ED9;&#x5B9A;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x9009;&#x9879;&#x5217;&#x8868;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x3002;&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x60A8;&#x5DF2;&#x7ECF;&#x5B66;&#x4E60;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528;QAction. &#x5728; PyQt &#x4E2D;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x65F6;&#xFF0C;&#x64CD;&#x4F5C;&#x662F;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x7EC4;&#x4EF6;&#x3002;</p>
<p>&#x5728;&#x672C;&#x8282;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x6765;&#x586B;&#x5145;&#x5E26;&#x6709;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x83DC;&#x5355;&#x3002;</p>
<h3 id="&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;"><a href="#&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;" class="headerlink" title="&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;"></a>&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;</h3><p>&#x8981;&#x4F7F;&#x7528;&#x83DC;&#x5355;&#x9009;&#x9879;&#x586B;&#x5145;&#x83DC;&#x5355;&#xFF0C;&#x60A8;&#x5C06;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x83DC;&#x5355;&#x4E2D;&#xFF0C;&#x64CD;&#x4F5C;&#x8868;&#x793A;&#x4E3A;&#x4E00;&#x4E2A;&#x6C34;&#x5E73;&#x9009;&#x9879;&#xFF0C;&#x5176;&#x4E2D;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x63CF;&#x8FF0;&#x6027;&#x6587;&#x672C;&#xFF0C;&#x5982;_New_&#x3001;<em>Open</em>&#x3001;_Save_&#x7B49;&#x3002;&#x83DC;&#x5355;&#x9009;&#x9879;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x5DE6;&#x4FA7;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x56FE;&#x6807;&#xFF0C;&#x5E76;&#x5728;&#x5176;&#x53F3;&#x4FA7;&#x663E;&#x793A;&#x5FEB;&#x6377;&#x952E;&#x5E8F;&#x5217;&#xFF0C;&#x4F8B;&#x5982;Ctrl+S&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x4EE5;QMenu&#x4F7F;&#x7528;&#x5411;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;**.addAction()**&#x3002;&#x6B64;&#x65B9;&#x6CD5;&#x6709;&#x591A;&#x79CD;&#x53D8;&#x4F53;&#x3002;&#x4ED6;&#x4EEC;&#x4E2D;&#x7684;&#x5927;&#x591A;&#x6570;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x5373;&#x65F6;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x4F60;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x53D8;&#x5316;.addAction()&#x662F;QMenu&#x4ECE;&#x7EE7;&#x627F;QWidget&#x3002;&#x8FD9;&#x662F;&#x6B64;&#x53D8;&#x4F53;&#x7684;&#x7B7E;&#x540D;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;QWidget.addAction(action)</span><br></pre></td></tr></table></figure>

<p>&#x53C2;&#x6570;action&#x8868;&#x793A;QAction&#x8981;&#x6DFB;&#x52A0;&#x5230;&#x7ED9;&#x5B9A;QWidget&#x5BF9;&#x8C61;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x4F7F;&#x7528; &#x7684;&#x8FD9;&#x79CD;&#x53D8;&#x4F53;.addAction()&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x9884;&#x5148;&#x521B;&#x5EFA;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x9700;&#x8981;&#x5C06;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x60A8;&#x7684;&#x83DC;&#x5355;&#x4E2D;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A; QWidget&#x8FD8;&#x63D0;&#x4F9B;.addActions(). &#x6B64;&#x65B9;&#x6CD5;&#x91C7;&#x7528;&#x4E00;&#x7CFB;&#x5217;&#x64CD;&#x4F5C;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x9644;&#x52A0;&#x5230;&#x5F53;&#x524D;&#x5C0F;&#x90E8;&#x4EF6;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<p>&#x4F7F;&#x7528;&#x6B64;&#x5DE5;&#x5177;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x66F4;&#x65B0;._createMenuBar()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        menuBar = self.menuBar()</span><br><span class="line">        # File menu</span><br><span class="line">        fileMenu = QMenu(&quot;&amp;File&quot;, self)</span><br><span class="line">        menuBar.addMenu(fileMenu)</span><br><span class="line">        fileMenu.addAction(self.newAction)</span><br><span class="line">        fileMenu.addAction(self.openAction)</span><br><span class="line">        fileMenu.addAction(self.saveAction)</span><br><span class="line">        fileMenu.addAction(self.exitAction)</span><br><span class="line">        # Edit menu</span><br><span class="line">        editMenu = menuBar.addMenu(&quot;&amp;Edit&quot;)</span><br><span class="line">        editMenu.addAction(self.copyAction)</span><br><span class="line">        editMenu.addAction(self.pasteAction)</span><br><span class="line">        editMenu.addAction(self.cutAction)</span><br><span class="line">        # Help menu</span><br><span class="line">        helpMenu = menuBar.addMenu(QIcon(&quot;:help-content.svg&quot;), &quot;&amp;Help&quot;)</span><br><span class="line">        helpMenu.addAction(self.helpContentAction)</span><br><span class="line">        helpMenu.addAction(self.aboutAction)</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x5BF9; &#x7684;&#x66F4;&#x65B0;._createMenuBar()&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E09;&#x4E2A;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x8BB8;&#x591A;&#x9009;&#x9879;&#x3002;</p>
<p>&#x73B0;&#x5728;_&#x6587;&#x4EF6;_&#x83DC;&#x5355;&#x6709;&#x56DB;&#x4E2A;&#x9009;&#x9879;&#xFF1A;</p>
<ol>
<li><strong><em>&#x65B0;&#x5EFA;</em></strong>&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x65B0;&#x6587;&#x4EF6;</li>
<li><strong><em>Open&#x2026;</em></strong>&#x7528;&#x4E8E;&#x6253;&#x5F00;&#x73B0;&#x6709;&#x6587;&#x4EF6;</li>
<li><strong><em>Save</em></strong>&#x7528;&#x4E8E;&#x4FDD;&#x5B58;&#x5BF9;&#x6587;&#x4EF6;&#x6240;&#x505A;&#x7684;&#x66F4;&#x6539;</li>
<li><strong><em>&#x9000;&#x51FA;</em></strong>&#x4EE5;&#x5173;&#x95ED;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;</li>
</ol>
<p>&#x5728;_&#x7F16;&#x8F91;_&#x83DC;&#x5355;&#x4E2D;&#x6709;&#x4E09;&#x4E2A;&#x9009;&#x9879;&#xFF1A;</p>
<ol>
<li><strong><em>&#x5C06;</em></strong>&#x5185;&#x5BB9;<strong><em>&#x590D;&#x5236;</em></strong>&#x5230;&#x7CFB;&#x7EDF;&#x526A;&#x8D34;&#x677F;</li>
<li><strong><em>Paste</em></strong>&#x7528;&#x4E8E;&#x4ECE;&#x7CFB;&#x7EDF;&#x526A;&#x8D34;&#x677F;&#x7C98;&#x8D34;&#x5185;&#x5BB9;</li>
<li><strong><em>Cut</em></strong>&#x7528;&#x4E8E;&#x5C06;&#x5185;&#x5BB9;<strong><em>&#x526A;&#x5207;</em></strong>&#x5230;&#x7CFB;&#x7EDF;&#x526A;&#x8D34;&#x677F;</li>
</ol>
<p>&#x5728;_&#x5E2E;&#x52A9;_&#x83DC;&#x5355;&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#xFF1A;</p>
<ol>
<li>&#x7528;&#x4E8E;&#x542F;&#x52A8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E2E;&#x52A9;&#x624B;&#x518C;&#x7684;<strong><em>&#x5E2E;&#x52A9;&#x5185;&#x5BB9;</em></strong></li>
<li><strong><em>&#x5173;&#x4E8E;</em></strong>&#x7528;&#x4E8E;&#x663E;&#x793A;&#x5173;&#x4E8E;&#x5BF9;&#x8BDD;&#x6846;</li>
</ol>
<p>&#x9009;&#x9879;&#x5728;&#x83DC;&#x5355;&#x4E2D;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#x663E;&#x793A;&#x7684;&#x987A;&#x5E8F;&#x5BF9;&#x5E94;&#x4E8E;&#x60A8;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x6DFB;&#x52A0;&#x9009;&#x9879;&#x7684;&#x987A;&#x5E8F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x5C06;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x7A97;&#x53E3;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/756c1b9dff635258427d245b04bb48a42ae58399ea64e8a7bb3f53a36dc60025" alt="&#x5E26;&#x9009;&#x9879;&#x7684; PyQt &#x83DC;&#x5355;"></p>
<p>&#x5982;&#x679C;&#x60A8;&#x5355;&#x51FB;&#x67D0;&#x4E2A;&#x83DC;&#x5355;&#xFF0C;&#x5219;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x5305;&#x542B;&#x60A8;&#x4E4B;&#x524D;&#x770B;&#x5230;&#x7684;&#x9009;&#x9879;&#x7684;&#x4E0B;&#x62C9;&#x5217;&#x8868;&#x3002;</p>
<h3 id="&#x521B;&#x5EFA;-Python-&#x5B50;&#x83DC;&#x5355;"><a href="#&#x521B;&#x5EFA;-Python-&#x5B50;&#x83DC;&#x5355;" class="headerlink" title="&#x521B;&#x5EFA; Python &#x5B50;&#x83DC;&#x5355;"></a>&#x521B;&#x5EFA; Python &#x5B50;&#x83DC;&#x5355;</h3><p>&#x6709;&#x65F6;&#x60A8;&#x9700;&#x8981;&#x5728; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;&#x5B50;&#x83DC;&#x5355;&#x3002;&#x5B50;&#x83DC;&#x5355;&#x662F;&#x4E00;&#x4E2A;&#x5D4C;&#x5957;&#x7684;&#x83DC;&#x5355;&#xFF0C;&#x5F53;&#x60A8;&#x5C06;&#x5149;&#x6807;&#x79FB;&#x5230;&#x7ED9;&#x5B9A;&#x7684;&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E0A;&#x65F6;&#x4F1A;&#x663E;&#x793A;&#x8BE5;&#x83DC;&#x5355;&#x3002;&#x8981;&#x5C06;&#x5B50;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x8C03;&#x7528;.addMenu()&#x5BB9;&#x5668;&#x83DC;&#x5355;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x60A8;&#x9700;&#x8981;&#x5728;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;_Edit_&#x83DC;&#x5355;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5B50;&#x83DC;&#x5355;&#x3002;&#x60A8;&#x7684;&#x5B50;&#x83DC;&#x5355;&#x5C06;&#x5305;&#x542B;&#x7528;&#x4E8E;&#x67E5;&#x627E;&#x548C;&#x66FF;&#x6362;&#x5185;&#x5BB9;&#x7684;&#x9009;&#x9879;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x5C06;&#x5176;&#x79F0;&#x4E3A;_Find and Replace_&#x3002;&#x8BE5;&#x5B50;&#x83DC;&#x5355;&#x5C06;&#x6709;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#xFF1A;</p>
<ol>
<li><strong><em>&#x67E5;&#x627E;&#x2026;</em></strong>&#x4EE5;&#x67E5;&#x627E;&#x4E00;&#x4E9B;&#x5185;&#x5BB9;</li>
<li><strong><em>&#x66FF;&#x6362;&#x2026;</em></strong>&#x7528;&#x4E8E;&#x67E5;&#x627E;&#x65E7;&#x5185;&#x5BB9;&#x5E76;&#x5C06;&#x5176;&#x66FF;&#x6362;&#x4E3A;&#x65B0;&#x5185;&#x5BB9;</li>
</ol>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5C06;&#x6B64;&#x5B50;&#x83DC;&#x5355;&#x6DFB;&#x52A0;&#x5230;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        # Snip...</span><br><span class="line">        editMenu.addAction(self.cutAction)</span><br><span class="line">        # Find and Replace submenu in the Edit menu</span><br><span class="line">        findMenu = editMenu.addMenu(&quot;Find and Replace&quot;)</span><br><span class="line">        findMenu.addAction(&quot;Find...&quot;)</span><br><span class="line">        findMenu.addAction(&quot;Replace...&quot;)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x7B2C;&#x4E00;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x4F7F;&#x7528;on&#x5C06;QMenu&#x5E26;&#x6709;&#x6587;&#x672C;&#x7684;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x201D;Find and Replace&#x201D;&#x5230;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x83DC;&#x5355;&#x3002;&#x4E0B;&#x4E00;&#x6B65;&#x662F;&#x4F7F;&#x7528;&#x60A8;&#x8FC4;&#x4ECA;&#x4E3A;&#x6B62;&#x6240;&#x505A;&#x7684;&#x64CD;&#x4F5C;&#x586B;&#x5145;&#x5B50;&#x83DC;&#x5355;&#x3002;&#x5982;&#x679C;&#x60A8;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x5C06;&#x5728;_Edit_&#x83DC;&#x5355;&#x4E0B;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x83DC;&#x5355;&#x9009;&#x9879;&#xFF1A;.addMenu()editMenu</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/fc5d065bda523657fd957c12103e8789f899745241ac53b3db6e1ed950a1f67d" alt="PyQt &#x5B50;&#x83DC;&#x5355;"></p>
<p>&#x5728;_&#x7F16;&#x8F91;_&#x83DC;&#x5355;&#x73B0;&#x5728;&#x6709;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6761;&#x76EE;&#x79F0;&#x4E3A;_&#x67E5;&#x627E;&#x548C;&#x66FF;&#x6362;_&#x3002;&#x5F53;&#x60A8;&#x5C06;&#x9F20;&#x6807;&#x60AC;&#x505C;&#x5728;&#x8FD9;&#x4E2A;&#x65B0;&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E0A;&#x65F6;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x4E2A;&#x5B50;&#x83DC;&#x5355;&#xFF0C;&#x4E3A;&#x60A8;&#x63D0;&#x4F9B;&#x4E24;&#x4E2A;&#x65B0;&#x9009;&#x9879;&#xFF0C;_Find&#x2026;<em>&#x548C;_Replace&#x2026;</em>&#x3002;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF01;&#x60A8;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5B50;&#x83DC;&#x5355;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x9009;&#x9879;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x9009;&#x9879;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x9009;&#x9879;"></a>&#x5728; PyQt &#x4E2D;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x9009;&#x9879;</h2><p>&#x5728;&#x4F7F;&#x7528; Python &#x548C; PyQt &#x6784;&#x5EFA; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x5DE5;&#x5177;&#x680F;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x7EC4;&#x4EF6;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5DE5;&#x5177;&#x680F;&#x5411;&#x60A8;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x6700;&#x5E38;&#x7528;&#x9009;&#x9879;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x8BF8;&#x5982;&#x65CB;&#x8F6C;&#x6846;&#x548C;&#x7EC4;&#x5408;&#x6846;&#x4E4B;&#x7C7B;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x76F4;&#x63A5;&#x4ECE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; GUI &#x4FEE;&#x6539;&#x67D0;&#x4E9B;&#x5C5E;&#x6027;&#x548C;&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x5728;&#x4EE5;&#x4E0B;&#x51E0;&#x8282;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x9009;&#x9879;&#x6216;&#x6309;&#x94AE;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x4F7F;&#x7528;.addWidget().</p>
<h3 id="&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x5DE5;&#x5177;&#x680F;"><a href="#&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x5DE5;&#x5177;&#x680F;" class="headerlink" title="&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x5DE5;&#x5177;&#x680F;"></a>&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x5DE5;&#x5177;&#x680F;</h3><p>&#x8981;&#x5C06;&#x9009;&#x9879;&#x6216;&#x6309;&#x94AE;&#x6DFB;&#x52A0;&#x5230;&#x5DE5;&#x5177;&#x680F;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x8C03;&#x7528;.addAction()&#x3002;&#x5728;&#x672C;&#x8282;&#x4E2D;&#xFF0C;&#x4F60;&#x4F1A;&#x4F9D;&#x9760;&#x7684;&#x53D8;&#x5316;.addAction()&#x662F;QToolBar&#x4ECE;&#x7EE7;&#x627F;QWidget&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x60A8;&#x5C06;.addAction()&#x4F7F;&#x7528;&#x52A8;&#x4F5C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x3002;&#x8FD9;&#x5C06;&#x5141;&#x8BB8;&#x60A8;&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;&#x65F6;&#xFF0C;&#x60A8;&#x901A;&#x5E38;&#x4F1A;&#x9762;&#x4E34;&#x51B3;&#x5B9A;&#x5411;&#x5176;&#x4E2D;&#x6DFB;&#x52A0;&#x54EA;&#x4E9B;&#x9009;&#x9879;&#x7684;&#x95EE;&#x9898;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x60A8;&#x53EA;&#x60F3;&#x5C06;&#x6700;&#x5E38;&#x7528;&#x7684;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x5DE5;&#x5177;&#x680F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x5230;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x4F1A;&#x8BB0;&#x5F97;&#x60A8;&#x6DFB;&#x52A0;&#x4E86;&#x4E09;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#xFF1A;</p>
<ol>
<li><em>File</em></li>
<li><em>Edit</em></li>
<li><em>Help</em></li>
</ol>
<p>&#x5728;_&#x6587;&#x4EF6;_&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x9009;&#x9879;&#xFF1A;</p>
<ul>
<li><em>New</em></li>
<li><em>Open</em></li>
<li><em>Save</em></li>
</ul>
<p>&#x5728;_&#x7F16;&#x8F91;_&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x9009;&#x9879;&#xFF1A;</p>
<ul>
<li><em>Copy</em></li>
<li><em>Paste</em></li>
<li><em>Cut</em></li>
</ul>
<p>&#x901A;&#x5E38;&#xFF0C;&#x5F53;&#x60A8;&#x8981;&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x6309;&#x94AE;&#x65F6;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x9009;&#x62E9;&#x8981;&#x5728;&#x6BCF;&#x4E2A;&#x6309;&#x94AE;&#x4E0A;&#x4F7F;&#x7528;&#x7684;&#x56FE;&#x6807;&#x3002;&#x8FD9;&#x4E0D;&#x662F;&#x5F3A;&#x5236;&#x6027;&#x7684;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;&#x9009;&#x62E9;&#x56FE;&#x6807;&#x540E;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5C06;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x56FE;&#x6807;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createActions(self):</span><br><span class="line">        # File actions</span><br><span class="line">        self.newAction = QAction(self)</span><br><span class="line">        self.newAction.setText(&quot;&amp;New&quot;)</span><br><span class="line">        self.newAction.setIcon(QIcon(&quot;:file-new.svg&quot;))</span><br><span class="line">        self.openAction = QAction(QIcon(&quot;:file-open.svg&quot;), &quot;&amp;Open...&quot;, self)</span><br><span class="line">        self.saveAction = QAction(QIcon(&quot;:file-save.svg&quot;), &quot;&amp;Save&quot;, self)</span><br><span class="line">        self.exitAction = QAction(&quot;&amp;Exit&quot;, self)</span><br><span class="line">        # Edit actions</span><br><span class="line">        self.copyAction = QAction(QIcon(&quot;:edit-copy.svg&quot;), &quot;&amp;Copy&quot;, self)</span><br><span class="line">        self.pasteAction = QAction(QIcon(&quot;:edit-paste.svg&quot;), &quot;&amp;Paste&quot;, self)</span><br><span class="line">        self.cutAction = QAction(QIcon(&quot;:edit-cut.svg&quot;), &quot;C&amp;ut&quot;, self)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x8981;&#x5C06;&#x56FE;&#x6807;&#x6DFB;&#x52A0;&#x5230;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8BF7;&#x66F4;&#x65B0;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x3002;&#x5728; &#x7684;&#x60C5;&#x51B5;&#x4E0B;newAction&#xFF0C;&#x60A8;&#x4F7F;&#x7528;.setIcon(). &#x5728;&#x5176;&#x4F59;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x60A8;&#x4F7F;&#x7528;&#x5E26;&#x6709;icon&#x3001; atitle&#x548C;parent&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x4E00;&#x65E6;&#x60A8;&#x9009;&#x62E9;&#x7684;&#x64CD;&#x4F5C;&#x5177;&#x6709;&#x56FE;&#x6807;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;.addAction()&#x5DE5;&#x5177;&#x680F;&#x5BF9;&#x8C61;&#x5C06;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x5DE5;&#x5177;&#x680F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createToolBars(self):</span><br><span class="line">        # File toolbar</span><br><span class="line">        fileToolBar = self.addToolBar(&quot;File&quot;)</span><br><span class="line">        fileToolBar.addAction(self.newAction)</span><br><span class="line">        fileToolBar.addAction(self.openAction)</span><br><span class="line">        fileToolBar.addAction(self.saveAction)</span><br><span class="line">        # Edit toolbar</span><br><span class="line">        editToolBar = QToolBar(&quot;Edit&quot;, self)</span><br><span class="line">        self.addToolBar(editToolBar)</span><br><span class="line">        editToolBar.addAction(self.copyAction)</span><br><span class="line">        editToolBar.addAction(self.pasteAction)</span><br><span class="line">        editToolBar.addAction(self.cutAction)</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x6B64;&#x66F4;&#x65B0;._createToolBars()&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5C06;_&#x65B0;&#x5EFA;_&#x3001;<em>&#x6253;&#x5F00;_&#x548C;_&#x4FDD;&#x5B58;_&#x9009;&#x9879;&#x7684;&#x6309;&#x94AE;&#x6DFB;&#x52A0;&#x5230;_&#x6587;&#x4EF6;_&#x5DE5;&#x5177;&#x680F;&#x3002;&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x5C06;_Copy</em>&#x3001;_Paste_&#x548C;_Cut_&#x9009;&#x9879;&#x7684;&#x6309;&#x94AE;&#x6DFB;&#x52A0;&#x5230;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x5DE5;&#x5177;&#x680F;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x6309;&#x94AE;&#x5728;&#x5DE5;&#x5177;&#x680F;&#x4E0A;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x663E;&#x793A;&#x7684;&#x987A;&#x5E8F;&#x5BF9;&#x5E94;&#x4E8E;&#x60A8;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x6DFB;&#x52A0;&#x6309;&#x94AE;&#x7684;&#x987A;&#x5E8F;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;&#x60A8;&#x73B0;&#x5728;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x5C06;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x7A97;&#x53E3;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/ed2ffe2daf60b85a6d6a2c07512c23a919d49bc0ec77aa3b2aa8618005e1022b" alt="&#x5E26;&#x6709;&#x6309;&#x94AE;&#x7684; PyQt &#x5DE5;&#x5177;&#x680F;"></p>
<p>&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x73B0;&#x5728;&#x663E;&#x793A;&#x4E24;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#xFF0C;&#x6BCF;&#x4E2A;&#x5DE5;&#x5177;&#x680F;&#x90FD;&#x6709;&#x51E0;&#x4E2A;&#x6309;&#x94AE;&#x3002;&#x60A8;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5355;&#x51FB;&#x8FD9;&#x4E9B;&#x6309;&#x94AE;&#x4EE5;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x9009;&#x9879;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5F53;&#x60A8;&#x7B2C;&#x4E00;&#x6B21;._createToolBars()&#x5728;&#x521B;&#x5EFA;&#x5DE5;&#x5177;&#x680F;&#x90E8;&#x5206;&#x56DE;&#x4FE1;&#x65F6;&#xFF0C;&#x60A8;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5E2E;&#x52A9;&#x5DE5;&#x5177;&#x680F;&#x3002;&#x6B64;&#x5DE5;&#x5177;&#x680F;&#x65E8;&#x5728;&#x5C55;&#x793A;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;.addToolBar().</p>
</blockquote>
<p>&#x5728; &#x7684;&#x4E0A;&#x8FF0;&#x66F4;&#x65B0;&#x4E2D;._createToolBars()&#xFF0C;&#x60A8;&#x53BB;&#x6389;&#x4E86;_&#x5E2E;&#x52A9;_&#x5DE5;&#x5177;&#x680F;&#xFF0C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x4F7F;&#x793A;&#x4F8B;&#x7B80;&#x77ED;&#x660E;&#x4E86;&#x3002;</p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x7531;&#x4E8E;&#x60A8;&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E4B;&#x95F4;&#x5171;&#x4EAB;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x6B64;&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E5F;&#x4F1A;&#x5728;&#x5176;&#x5DE6;&#x4FA7;&#x663E;&#x793A;&#x56FE;&#x6807;&#xFF0C;&#x8FD9;&#x5728;&#x751F;&#x4EA7;&#x529B;&#x548C;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x65B9;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x5DE8;&#x5927;&#x7684;&#x80DC;&#x5229;&#x3002;&#x8FD9;&#x662F;&#x4F7F;&#x7528; PyQt &#x64CD;&#x4F5C;&#x901A;&#x8FC7; Python &#x521B;&#x5EFA;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x4F18;&#x52BF;&#x4E4B;&#x4E00;&#x3002;</p>
<h3 id="&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x5C0F;&#x90E8;&#x4EF6;"><a href="#&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x5C0F;&#x90E8;&#x4EF6;" class="headerlink" title="&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x5C0F;&#x90E8;&#x4EF6;"></a>&#x5411;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x5C0F;&#x90E8;&#x4EF6;</h3><p>&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x4F1A;&#x53D1;&#x73B0;&#x5C06;&#x7279;&#x5B9A;&#x5C0F;&#x90E8;&#x4EF6;&#xFF08;&#x5982;&#x65CB;&#x8F6C;&#x6846;&#x3001;&#x7EC4;&#x5408;&#x6846;&#x6216;&#x5176;&#x4ED6;&#xFF09;&#x6DFB;&#x52A0;&#x5230;&#x5DE5;&#x5177;&#x680F;&#x5F88;&#x6709;&#x7528;&#x3002;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x4F8B;&#x5B50;&#x662F;&#x5927;&#x591A;&#x6570;&#x6587;&#x5B57;&#x5904;&#x7406;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x7EC4;&#x5408;&#x6846;&#xFF0C;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x66F4;&#x6539;&#x6587;&#x6863;&#x7684;&#x5B57;&#x4F53;&#x6216;&#x6240;&#x9009;&#x6587;&#x672C;&#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<p>&#x8981;&#x5C06;&#x5C0F;&#x90E8;&#x4EF6;&#x6DFB;&#x52A0;&#x5230;&#x5DE5;&#x5177;&#x680F;&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x5C0F;&#x90E8;&#x4EF6;&#xFF0C;&#x8BBE;&#x7F6E;&#x5176;&#x5C5E;&#x6027;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;.addWidget()&#x5DE5;&#x5177;&#x680F;&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x5C0F;&#x90E8;&#x4EF6;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x60A8;&#x60F3;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;QSpinBox&#x7684;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x66F4;&#x6539;&#x67D0;&#x4E9B;&#x5185;&#x5BB9;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x5B57;&#x4F53;&#x5927;&#x5C0F;&#x3002;&#x60A8;&#x9700;&#x8981;&#x66F4;&#x65B0;._createToolBars()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtWidgets import QSpinBox</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createToolBars(self):</span><br><span class="line">        # Snip...</span><br><span class="line">        # Adding a widget to the Edit toolbar</span><br><span class="line">        self.fontSizeSpinBox = QSpinBox()</span><br><span class="line">        self.fontSizeSpinBox.setFocusPolicy(Qt.NoFocus)</span><br><span class="line">        editToolBar.addWidget(self.fontSizeSpinBox)</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x5BFC;&#x5165;&#x65CB;&#x8F6C;&#x6846;&#x7C7B;&#x3002;&#x7136;&#x540E;&#x60A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QSpinBox&#x5BF9;&#x8C61;&#xFF0C;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;focusPolicy&#x4E3A;Qt.NoFocus&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;&#x60A8;&#x7684;_&#x7F16;&#x8F91;_&#x5DE5;&#x5177;&#x680F;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;focusPolicy&#x65CB;&#x8F6C;&#x6846;&#x7684;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;&#xFF0C;Qt.NoFocus&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x6B64;&#x5C0F;&#x90E8;&#x4EF6;&#x83B7;&#x5F97;&#x7126;&#x70B9;&#xFF0C;&#x5219;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x5C06;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</p>
</blockquote>
<p>&#x73B0;&#x5728;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x83B7;&#x5F97;&#x4EE5;&#x4E0B;&#x8F93;&#x51FA;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/75aa5dee6f1b93ac88fe871724a7b69cd9d04d977a5fb3ba6fea19b7eb64b9f3" alt="&#x5E26;&#x6709;&#x5C0F;&#x90E8;&#x4EF6;&#x7684; PyQt &#x5DE5;&#x5177;&#x680F;"></p>
<p>&#x6B64;&#x5904;&#xFF0C;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x5DE5;&#x5177;&#x680F;&#x663E;&#x793A;&#x4E86;&#x4E00;&#x4E2A;QSpinBox&#x5BF9;&#x8C61;&#xFF0C;&#x60A8;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8BE5;&#x5BF9;&#x8C61;&#x6765;&#x8BBE;&#x7F6E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0A;&#x7684;&#x5B57;&#x4F53;&#x5927;&#x5C0F;&#x6216;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x6570;&#x5B57;&#x5C5E;&#x6027;&#x3002;</p>
<h3 id="&#x81EA;&#x5B9A;&#x4E49;&#x5DE5;&#x5177;&#x680F;"><a href="#&#x81EA;&#x5B9A;&#x4E49;&#x5DE5;&#x5177;&#x680F;" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;&#x5DE5;&#x5177;&#x680F;"></a>&#x81EA;&#x5B9A;&#x4E49;&#x5DE5;&#x5177;&#x680F;</h3><p>PyQt &#x5DE5;&#x5177;&#x680F;&#x975E;&#x5E38;&#x7075;&#x6D3B;&#x4E14;&#x53EF;&#x5B9A;&#x5236;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x5DE5;&#x5177;&#x680F;&#x5BF9;&#x8C61;&#x4E0A;&#x8BBE;&#x7F6E;&#x4E00;&#x5806;&#x5C5E;&#x6027;&#x3002;&#x4E0B;&#x8868;&#x663E;&#x793A;&#x4E86;&#x4E00;&#x4E9B;&#x6700;&#x6709;&#x7528;&#x7684;&#x5C5E;&#x6027;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/b2afc86d79431f07ac772a59372f49f16986adf50e970d99d35a85faf3921118" alt></p>
<p>&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x7684; setter &#x65B9;&#x6CD5;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;.setAllowedAreas()to set allowedAreas&#x3001;.setFloatable()to setfloatable&#x7B49;&#x3002;</p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x5047;&#x8BBE;&#x60A8;&#x4E0D;&#x5E0C;&#x671B;&#x7528;&#x6237;&#x5728;&#x7A97;&#x53E3;&#x5468;&#x56F4;&#x79FB;&#x52A8;_&#x6587;&#x4EF6;_&#x5DE5;&#x5177;&#x680F;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;movable&#x4E3A;False&#x4F7F;&#x7528;.setMovable()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createToolBars(self):</span><br><span class="line">        # File toolbar</span><br><span class="line">        fileToolBar = self.addToolBar(&quot;File&quot;)</span><br><span class="line">        fileToolBar.setMovable(False)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x7EBF;&#x4F7F;&#x8FD9;&#x91CC;&#x53D8;&#x5F97;&#x795E;&#x5947;&#x3002;&#x73B0;&#x5728;&#x60A8;&#x7684;&#x7528;&#x6237;&#x65E0;&#x6CD5;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7A97;&#x53E3;&#x5468;&#x56F4;&#x79FB;&#x52A8;&#x5DE5;&#x5177;&#x680F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/6c5b7e2bf7dfea5bfae91ff607f22ee88d65953a09d8a48888c0a8c56c38bcfc" alt="PyQt &#x5DE5;&#x5177;&#x680F;&#x81EA;&#x5B9A;&#x4E49;"></p>
<p>&#x8BE5;_&#x6587;&#x4EF6;_&#x7684;&#x5DE5;&#x5177;&#x680F;&#x4E0D;&#x663E;&#x793A;&#x53CC;&#x865A;&#x7EBF;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x7684;&#x7528;&#x6237;&#x5C06;&#x65E0;&#x6CD5;&#x5C06;&#x5176;&#x79FB;&#x52A8;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;_&#x7F16;&#x8F91;_&#x5DE5;&#x5177;&#x680F;&#x4ECD;&#x7136;&#x662F;&#x53EF;&#x79FB;&#x52A8;&#x7684;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x66F4;&#x6539;&#x5DE5;&#x5177;&#x680F;&#x4E0A;&#x7684;&#x5176;&#x4ED6;&#x5C5E;&#x6027;&#xFF0C;&#x5E76;&#x6839;&#x636E;&#x60A8;&#x7684;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x5B83;&#x4EEC;&#x3002;</p>
<h2 id="&#x7EC4;&#x7EC7;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;"><a href="#&#x7EC4;&#x7EC7;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;" class="headerlink" title="&#x7EC4;&#x7EC7;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;"></a>&#x7EC4;&#x7EC7;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;</h2><p>&#x4E3A;&#x4E86;&#x5728; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x589E;&#x52A0;&#x6E05;&#x6670;&#x5EA6;&#x5E76;&#x6539;&#x5584;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<strong>&#x5206;&#x9694;&#x7B26;</strong>&#x6765;&#x7EC4;&#x7EC7;&#x83DC;&#x5355;&#x9009;&#x9879;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x3002;&#x5206;&#x9694;&#x7B26;&#x5448;&#x73B0;&#x4E3A;&#x5206;&#x9694;&#x6216;&#x5206;&#x9694;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x6C34;&#x5E73;&#x7EBF;&#x6216;&#x5206;&#x9694;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x7684;&#x5782;&#x76F4;&#x7EBF;&#x3002;</p>
<p>&#x8981;&#x5728;&#x83DC;&#x5355;&#x3001;&#x5B50;&#x83DC;&#x5355;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x5BF9;&#x8C61;&#x4E2D;&#x63D2;&#x5165;&#x6216;&#x6DFB;&#x52A0;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8C03;&#x7528;.addSeparator()&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5206;&#x9694;&#x7B26;&#x5C06;&#x201C;_&#x6587;&#x4EF6;&#x201D;_&#x83DC;&#x5355;&#x4E0A;&#x7684;&#x201C;_&#x9000;&#x51FA;&#x201D;_&#x9009;&#x9879;&#x4E0E;&#x5176;&#x4F59;&#x9009;&#x9879;&#x5206;&#x5F00;&#xFF0C;&#x4EE5;&#x660E;&#x786E;&#x201C;_&#x9000;&#x51FA;&#x201D;_&#x4E0E;&#x83DC;&#x5355;&#x4E0A;&#x200B;&#x200B;&#x7684;&#x5176;&#x4F59;&#x9009;&#x9879;&#x5728;&#x903B;&#x8F91;&#x4E0A;&#x65E0;&#x5173;&#x3002;&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5206;&#x9694;&#x7B26;&#x5C06;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x83DC;&#x5355;&#x4E0A;&#x7684;&#x201C;_&#x67E5;&#x627E;&#x548C;&#x66FF;&#x6362;&#x201D;_&#x9009;&#x9879;&#x4E0E;&#x9075;&#x5FAA;&#x76F8;&#x540C;&#x89C4;&#x5219;&#x7684;&#x5176;&#x4F59;&#x9009;&#x9879;&#x5206;&#x5F00;&#x3002;</p>
<p>&#x8F6C;&#x5230;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;._createMenuBar()&#x6309;&#x7167;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        # File menu</span><br><span class="line">        # Snip...</span><br><span class="line">        fileMenu.addAction(self.saveAction)</span><br><span class="line">        # Adding a separator</span><br><span class="line">        fileMenu.addSeparator()</span><br><span class="line">        fileMenu.addAction(self.exitAction)</span><br><span class="line">        # Edit menu</span><br><span class="line">        # Snip...</span><br><span class="line">        editMenu.addAction(self.cutAction)</span><br><span class="line">        # Adding a separator</span><br><span class="line">        editMenu.addSeparator()</span><br><span class="line">        # Find and Replace submenu in the Edit menu</span><br><span class="line">        findMenu = editMenu.addMenu(&quot;Find and Replace&quot;)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x7B2C;&#x4E00;&#x884C;&#x4E2D;&#xFF0C;&#x5728;&#x201C;_&#x6587;&#x4EF6;&#x201D;_&#x83DC;&#x5355;&#x4E2D;&#x7684;&#x201C;_&#x4FDD;&#x5B58;&#x201D;_&#x548C;&#x201C;_&#x9000;&#x51FA;&#x201D;_&#x9009;&#x9879;&#x4E4B;&#x95F4;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#x3002;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x5C06;&#x201C;_&#x67E5;&#x627E;&#x548C;&#x66FF;&#x6362;&#x201D;_&#x9009;&#x9879;&#x4E0E;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x83DC;&#x5355;&#x4E2D;&#x7684;&#x5176;&#x4F59;&#x9009;&#x9879;&#x5206;&#x5F00;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x8FD9;&#x4E9B;&#x6DFB;&#x52A0;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/9ae2f4c7ec6aa23ebfd24912c33f7d5c2ca0a0b3355da79098ca177705af221d" alt="&#x5E26;&#x5206;&#x9694;&#x7B26;&#x7684; PyQt &#x83DC;&#x5355;"></p>
<p>&#x60A8;&#x7684;&#x201C;_&#x6587;&#x4EF6;&#x201D;_&#x83DC;&#x5355;&#x73B0;&#x5728;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6C34;&#x5E73;&#x7EBF;&#xFF0C;&#x5C06;&#x201C;_&#x7F16;&#x8F91;&#x201D;_&#x9009;&#x9879;&#x4E0E;&#x83DC;&#x5355;&#x4E2D;&#x7684;&#x5176;&#x4F59;&#x9009;&#x9879;&#x5206;&#x5F00;&#x3002;&#x5728;_&#x7F16;&#x8F91;_&#x83DC;&#x5355;&#x4E2D;&#x8FD8;&#x663E;&#x793A;&#xFF0C;&#x5728;&#x9009;&#x9879;&#x7684;&#x4E0B;&#x62C9;&#x5217;&#x8868;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#x3002;&#x5206;&#x9694;&#x7B26;&#x7684;&#x8FDE;&#x8D2F;&#x4F7F;&#x7528;&#x53EF;&#x4EE5;&#x5DE7;&#x5999;&#x5730;&#x63D0;&#x9AD8;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x6E05;&#x6670;&#x5EA6;&#xFF0C;&#x4F7F;&#x60A8;&#x7684; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x66F4;&#x52A0;&#x7528;&#x6237;&#x53CB;&#x597D;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x7EC3;&#x4E60;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8F6C;&#x5230; &#x7684;&#x5B9A;&#x4E49;._createToolBars()&#x5E76;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#xFF0C;&#x5C06;QSpinBox&#x5BF9;&#x8C61;&#x4E0E;&#x5DE5;&#x5177;&#x680F;&#x4E0A;&#x7684;&#x5176;&#x4F59;&#x9009;&#x9879;&#x5206;&#x5F00;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x6784;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x6216;&#x5F39;&#x51FA;&#x83DC;&#x5355;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x6784;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x6216;&#x5F39;&#x51FA;&#x83DC;&#x5355;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x6784;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x6216;&#x5F39;&#x51FA;&#x83DC;&#x5355;"></a>&#x5728; PyQt &#x4E2D;&#x6784;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x6216;&#x5F39;&#x51FA;&#x83DC;&#x5355;</h2><p>&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x4E5F;&#x79F0;&#x4E3A;&#x5F39;&#x51FA;&#x83DC;&#x5355;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x83DC;&#x5355;&#xFF0C;&#x5B83;&#x4F1A;&#x54CD;&#x5E94;&#x67D0;&#x4E9B;&#x7528;&#x6237;&#x64CD;&#x4F5C;&#xFF08;&#x4F8B;&#x5982;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x7ED9;&#x5B9A;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#x6216;&#x7A97;&#x53E3;&#xFF09;&#x800C;&#x51FA;&#x73B0;&#x3002;&#x8FD9;&#x4E9B;&#x83DC;&#x5355;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x9009;&#x9879;&#xFF0C;&#x8FD9;&#x4E9B;&#x9009;&#x9879;&#x5728;&#x60A8;&#x4F7F;&#x7528;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6216;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7ED9;&#x5B9A;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x53EF;&#x7528;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x53F3;&#x952E;&#x5355;&#x51FB; Windows &#x8BA1;&#x7B97;&#x673A;&#x7684;&#x684C;&#x9762;&#xFF0C;&#x60A8;&#x5C06;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x83DC;&#x5355;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E0E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x7279;&#x5B9A;&#x4E0A;&#x4E0B;&#x6587;&#x6216;&#x7A7A;&#x95F4;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x9009;&#x9879;&#x3002;&#x5982;&#x679C;&#x60A8;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x7684;&#x5DE5;&#x4F5C;&#x533A;&#xFF0C;&#x60A8;&#x5C06;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x5177;&#x4F53;&#x53D6;&#x51B3;&#x4E8E;&#x60A8;&#x4F7F;&#x7528;&#x7684;&#x7F16;&#x8F91;&#x5668;&#x3002;</p>
<p>&#x5728; PyQt &#x4E2D;&#xFF0C;&#x60A8;&#x6709;&#x591A;&#x79CD;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7684;&#x9009;&#x9879;&#x3002;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x4E86;&#x89E3;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#xFF1A;</p>
<ol>
<li>&#x5C06;contextMenuPolicy&#x7279;&#x5B9A;&#x5C0F;&#x90E8;&#x4EF6;&#x7684;&#x5C5E;&#x6027;&#x8BBE;&#x7F6E;&#x4E3A;Qt.ActionsContextMenu</li>
<li>&#x901A;&#x8FC7;&#x5904;&#x7406;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7A97;&#x53E3;&#x4E0A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x4E8B;&#x4EF6;contextMenuEvent()</li>
</ol>
<p>&#x7B2C;&#x4E00;&#x4E2A;&#x9009;&#x9879;&#x662F;&#x4E24;&#x8005;&#x4E2D;&#x6700;&#x5E38;&#x89C1;&#x548C;&#x7528;&#x6237;&#x53CB;&#x597D;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x5C06;&#x9996;&#x5148;&#x4E86;&#x89E3;&#x5B83;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x9009;&#x9879;&#x7A0D;&#x5FAE;&#x590D;&#x6742;&#x4E00;&#x4E9B;&#xFF0C;&#x5E76;&#x4E14;&#x4F9D;&#x8D56;&#x4E8E;&#x5904;&#x7406;&#x7528;&#x6237;&#x4E8B;&#x4EF6;&#x3002;&#x5728; GUI &#x7F16;&#x7A0B;&#x4E2D;&#xFF0C;<strong>&#x4E8B;&#x4EF6;</strong>&#x662F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E0A;&#x7684;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x5355;&#x51FB;&#x6309;&#x94AE;&#x6216;&#x83DC;&#x5355;&#x3001;&#x4ECE;&#x7EC4;&#x5408;&#x6846;&#x4E2D;&#x9009;&#x62E9;&#x9879;&#x76EE;&#x3001;&#x5728;&#x6587;&#x672C;&#x5B57;&#x6BB5;&#x4E2D;&#x8F93;&#x5165;&#x6216;&#x66F4;&#x65B0;&#x6587;&#x672C;&#x3001;&#x6309;&#x4E0B;&#x952E;&#x76D8;&#x4E0A;&#x7684;&#x952E;&#x7B49;.</p>
<h3 id="&#x901A;&#x8FC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7B56;&#x7565;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;"><a href="#&#x901A;&#x8FC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7B56;&#x7565;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;" class="headerlink" title="&#x901A;&#x8FC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7B56;&#x7565;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;"></a>&#x901A;&#x8FC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7B56;&#x7565;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;</h3><p>&#x6240;&#x6709;&#x6D3E;&#x751F;&#x81EA;&#x7684; PyQt &#x56FE;&#x5F62;&#x7EC4;&#x4EF6;&#x6216;&#x5C0F;&#x90E8;&#x4EF6;&#x90FD;QWidget&#x7EE7;&#x627F;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;contextMenuPolicy. &#x6B64;&#x5C5E;&#x6027;&#x63A7;&#x5236;&#x5C0F;&#x90E8;&#x4EF6;&#x5982;&#x4F55;&#x663E;&#x793A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x3002;&#x6B64;&#x5C5E;&#x6027;&#x6700;&#x5E38;&#x7528;&#x7684;&#x503C;&#x4E4B;&#x4E00;&#x662F;Qt.ActionsContextMenu&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x5C0F;&#x90E8;&#x4EF6;&#x5C06;&#x5176;&#x5185;&#x90E8;&#x64CD;&#x4F5C;&#x5217;&#x8868;&#x663E;&#x793A;&#x4E3A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x3002;</p>
<p>&#x8981;&#x4F7F;&#x5C0F;&#x90E8;&#x4EF6;&#x6839;&#x636E;&#x5176;&#x5185;&#x90E8;&#x64CD;&#x4F5C;&#x663E;&#x793A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ol>
<li>&#x4F7F;&#x7528; &#x5411;&#x5C0F;&#x90E8;&#x4EF6;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;QWidget.addAction()&#x3002;</li>
<li>&#x8BBE;&#x7F6E;contextMenuPolicy&#x4E8E;Qt.ActionsContextMenu&#x4E0A;&#x4F7F;&#x7528;&#x7684;&#x5C0F;&#x5DE5;&#x5177;.setContextMenuPolicy()&#x3002;</li>
</ol>
<p>&#x8BBE;&#x7F6E;contextMenuPolicy&#x4E3A;Qt.ActionsContextMenu&#x4F7F;&#x5177;&#x6709;&#x64CD;&#x4F5C;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#x5728;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x4E2D;&#x663E;&#x793A;&#x5B83;&#x4EEC;&#x3002;&#x8FD9;&#x662F;&#x4F7F;&#x7528; Python &#x548C; PyQt &#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7684;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x5FEB;&#x901F;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x6280;&#x672F;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x6DFB;&#x52A0;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x5E76;&#x4E3A;&#x60A8;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x67D0;&#x4E9B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9009;&#x9879;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5C06;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createContextMenu(self):</span><br><span class="line">        # Setting contextMenuPolicy</span><br><span class="line">        self.centralWidget.setContextMenuPolicy(Qt.ActionsContextMenu)</span><br><span class="line">        # Populating the widget with actions</span><br><span class="line">        self.centralWidget.addAction(self.newAction)</span><br><span class="line">        self.centralWidget.addAction(self.openAction)</span><br><span class="line">        self.centralWidget.addAction(self.saveAction)</span><br><span class="line">        self.centralWidget.addAction(self.copyAction)</span><br><span class="line">        self.centralWidget.addAction(self.pasteAction)</span><br><span class="line">        self.centralWidget.addAction(self.cutAction)</span><br></pre></td></tr></table></figure>

<p>&#x5728; &#x4E2D;._createContextMenu()&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x8BBE;&#x7F6E;contextMenuPolicy&#x4E3A;Qt.ActionsContextMenu&#x4F7F;&#x7528; setter &#x65B9;&#x6CD5;.setContextMenuPolicy()&#x3002;&#x7136;&#x540E;.addAction()&#x50CF;&#x5F80;&#x5E38;&#x4E00;&#x6837;&#x5411;&#x5C0F;&#x90E8;&#x4EF6;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x3002;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x662F;._createContextMenu()&#x4ECE; &#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    &quot;&quot;&quot;Main Window.&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, parent=None):</span><br><span class="line">        # Snip...</span><br><span class="line">        self._createToolBars()</span><br><span class="line">        self._createContextMenu()</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x60A8;&#x5728;&#x6DFB;&#x52A0;&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#x540E;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x60A8;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x65F6;&#xFF0C;&#x60A8;&#x4F1A;&#x770B;&#x5230;&#x5B83;&#x663E;&#x793A;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/db5ed393023ecc319197a60951b29b992d6900e54a6a17c1b965332855922f21" alt="PyQt &#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7B56;&#x7565;"></p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x53EA;&#x8981;&#x60A8;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#xFF0C;&#x5C31;&#x4F1A;&#x5F39;&#x51FA;&#x8BE5;&#x83DC;&#x5355;&#x3002;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x4F38;&#x5C55;&#x4EE5;&#x5360;&#x636E;&#x7A97;&#x53E3;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x53EF;&#x7528;&#x7A7A;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x6807;&#x7B7E;&#x6587;&#x672C;&#x4EE5;&#x67E5;&#x770B;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x7531;&#x4E8E;&#x60A8;&#x5728;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x4E0A;&#x7684;&#x9009;&#x9879;&#x663E;&#x793A;&#x76F8;&#x540C;&#x7684;&#x56FE;&#x6807;&#x96C6;&#x3002;</p>
<h3 id="&#x901A;&#x8FC7;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;"><a href="#&#x901A;&#x8FC7;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;" class="headerlink" title="&#x901A;&#x8FC7;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;"></a>&#x901A;&#x8FC7;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;</h3><p>&#x5728; PyQt &#x4E2D;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x5904;&#x7406;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E3B;&#x7A97;&#x53E3;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x4E8B;&#x4EF6;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ol>
<li>&#x8986;&#x76D6;&#x5BF9;&#x8C61;.contextMenuEvent()&#x4E0A;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x65B9;&#x6CD5;QMainWindow&#x3002;</li>
<li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QMenu&#x4F20;&#x9012;&#x5C0F;&#x90E8;&#x4EF6;&#xFF08;&#x4E0A;&#x4E0B;&#x6587;&#x5C0F;&#x90E8;&#x4EF6;&#xFF09;&#x4F5C;&#x4E3A;&#x5176;&#x7236;&#x5BF9;&#x8C61;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x7528;&#x52A8;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x4F7F;&#x7528;QMenu.exec()&#x4E8B;&#x4EF6;.globalPos()&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x542F;&#x52A8;&#x83DC;&#x5355;&#x5BF9;&#x8C61;&#x3002;</li>
</ol>
<p>&#x8FD9;&#x79CD;&#x7BA1;&#x7406;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x70B9;&#x590D;&#x6742;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5B83;&#x4F7F;&#x60A8;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5730;&#x63A7;&#x5236;&#x8C03;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x65F6;&#x53D1;&#x751F;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x72B6;&#x6001;&#x7B49;&#x542F;&#x7528;&#x6216;&#x7981;&#x7528;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5728;&#x7EE7;&#x7EED;&#x672C;&#x8282;&#x4E4B;&#x524D;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x7981;&#x7528;&#x60A8;&#x5728;&#x4E0A;&#x4E00;&#x8282;&#x4E2D;&#x7F16;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x53EA;&#x9700;&#x8F6C;&#x5230;&#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;Window&#x5E76;&#x6CE8;&#x91CA;&#x6389;&#x8C03;&#x7528;self._createContextMenu().</p>
</blockquote>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x5982;&#x4F55;&#x91CD;&#x65B0;&#x5B9E;&#x73B0;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#xFF0C;&#x8986;&#x76D6;&#x4E3B;&#x7A97;&#x53E3;&#x5BF9;&#x8C61;&#x4E0A;&#x7684;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def contextMenuEvent(self, event):</span><br><span class="line">        # Creating a menu object with the central widget as parent</span><br><span class="line">        menu = QMenu(self.centralWidget)</span><br><span class="line">        # Populating the menu with actions</span><br><span class="line">        menu.addAction(self.newAction)</span><br><span class="line">        menu.addAction(self.openAction)</span><br><span class="line">        menu.addAction(self.saveAction)</span><br><span class="line">        menu.addAction(self.copyAction)</span><br><span class="line">        menu.addAction(self.pasteAction)</span><br><span class="line">        menu.addAction(self.cutAction)</span><br><span class="line">        # Launching the menu</span><br><span class="line">        menu.exec(event.globalPos())</span><br></pre></td></tr></table></figure>

<p>&#x5728; &#x4E2D;contextMenuEvent()&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QMenu&#x5BF9;&#x8C61; ( menu)centralWidget&#x4F5C;&#x4E3A;&#x5176;&#x7236;&#x5C0F;&#x90E8;&#x4EF6;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x60A8;&#x4F7F;&#x7528;.addAction. &#x6700;&#x540E;&#xFF0C;&#x8C03;&#x7528;.exec()&#x4E0A;QMenu&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x663E;&#x793A;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x3002;</p>
<p>&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;.contextMenuEvent()&#x8868;&#x793A;&#x8BE5;&#x65B9;&#x6CD5;&#x6355;&#x83B7;&#x7684;&#x4E8B;&#x4EF6;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;event&#x5C06;&#x53F3;&#x952E;&#x5355;&#x51FB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x3002;</p>
<p>&#x5728;&#x5BF9; &#x7684;&#x8C03;&#x7528;&#x4E2D;.exec()&#xFF0C;&#x60A8;&#x5C06;&#x5176;event.globalPos()&#x7528;&#x4F5C;&#x53C2;&#x6570;&#x3002;&#x5F53;&#x7528;&#x6237;&#x5355;&#x51FB; PyQt &#x7A97;&#x53E3;&#x6216;&#x5C0F;&#x90E8;&#x4EF6;&#x65F6;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x9F20;&#x6807;&#x6307;&#x9488;&#x7684;&#x5168;&#x5C40;&#x4F4D;&#x7F6E;&#x3002;&#x9F20;&#x6807;&#x4F4D;&#x7F6E;&#x5C06;&#x544A;&#x8BC9;.exec()&#x7A97;&#x53E3;&#x4E0A;&#x663E;&#x793A;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x65B0;&#x66F4;&#x6539;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x83B7;&#x5F97;&#x4E0E;&#x4E0A;&#x4E00;&#x8282;&#x4E2D;&#x76F8;&#x540C;&#x7684;&#x7ED3;&#x679C;&#x3002;</p>
<h3 id="&#x7EC4;&#x7EC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x9009;&#x9879;"><a href="#&#x7EC4;&#x7EC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x9009;&#x9879;" class="headerlink" title="&#x7EC4;&#x7EC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x9009;&#x9879;"></a>&#x7EC4;&#x7EC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x9009;&#x9879;</h3><p>&#x4E0E;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E0D;&#x540C;&#xFF0C;&#x5728;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x4E2D;&#xFF0C;&#x60A8;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;.addSeparator()&#x6DFB;&#x52A0;&#x5206;&#x9694;&#x7B26;&#x5E76;&#x6839;&#x636E;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x5728;&#x89C6;&#x89C9;&#x4E0A;&#x5206;&#x9694;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;&#x5728;&#x7EC4;&#x7EC7;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x65F6;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#x64CD;&#x4F5C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;separator = QAction(parent)</span><br><span class="line">separator.setSeparator(True)</span><br></pre></td></tr></table></figure>

<p>.setSeparator(True)&#x5BF9;&#x52A8;&#x4F5C;&#x5BF9;&#x8C61;&#x7684;&#x8C03;&#x7528;&#x5C06;&#x628A;&#x8BE5;&#x52A8;&#x4F5C;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x5206;&#x9694;&#x7B26;&#x3002;&#x5B8C;&#x6210;&#x5206;&#x9694;&#x7B26;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x4F7F;&#x7528; &#x5C06;&#x5176;&#x63D2;&#x5165;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x4E2D;&#x7684;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;QMenu.addAction()&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x5728;&#x89C6;&#x89C9;&#x4E0A;&#x5C06;&#x6765;&#x81EA;_File_&#x83DC;&#x5355;&#x7684;&#x9009;&#x9879;&#x4E0E;&#x6765;&#x81EA;_Edit_&#x83DC;&#x5355;&#x7684;&#x9009;&#x9879;&#x5206;&#x5F00;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x66F4;&#x65B0;.contextMenuEvent()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def contextMenuEvent(self, event):</span><br><span class="line">        # Snip...</span><br><span class="line">        menu.addAction(self.saveAction)</span><br><span class="line">        # Creating a separator action</span><br><span class="line">        separator = QAction(self)</span><br><span class="line">        separator.setSeparator(True)</span><br><span class="line">        # Adding the separator to the menu</span><br><span class="line">        menu.addAction(separator)</span><br><span class="line">        menu.addAction(self.copyAction)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x524D;&#x4E24;&#x884C;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x521B;&#x5EFA;&#x4E86;&#x5206;&#x9694;&#x7B26;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x7B2C;&#x4E09;&#x4E2A;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x4F7F;&#x7528; &#x5C06;&#x5206;&#x9694;&#x7B26;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x4E2D;.addAction()&#x3002;</p>
<p>&#x8FD9;&#x5C06;&#x5728;_&#x6587;&#x4EF6;_&#x9009;&#x9879;&#x548C;_&#x7F16;&#x8F91;_&#x9009;&#x9879;&#x4E4B;&#x95F4;&#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6C34;&#x5E73;&#x7EBF;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x6DFB;&#x52A0;&#x6B64;&#x5185;&#x5BB9;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x7684;&#x5916;&#x89C2;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/69fa7395027f9e472f220cef481e1e75a07438621c57e710af8940f512f9955c" alt="&#x5E26;&#x5206;&#x9694;&#x7B26;&#x7684; PyQt &#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;"></p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x60A8;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x5305;&#x542B;&#x4E00;&#x6761;&#x6C34;&#x5E73;&#x7EBF;&#xFF0C;&#x53EF;&#x76F4;&#x89C2;&#x5730;&#x5C06;&#x6765;&#x81EA;_File_&#x7684;&#x9009;&#x9879;&#x4E0E;&#x6765;&#x81EA;_Edit_&#x7684;&#x9009;&#x9879;&#x5206;&#x5F00;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x60A8;&#x6539;&#x8FDB;&#x4E86;&#x83DC;&#x5355;&#x7684;&#x89C6;&#x89C9;&#x8D28;&#x91CF;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>
<h2 id="&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#x8FDE;&#x63A5;&#x4FE1;&#x53F7;&#x548C;&#x63D2;&#x69FD;"><a href="#&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#x8FDE;&#x63A5;&#x4FE1;&#x53F7;&#x548C;&#x63D2;&#x69FD;" class="headerlink" title="&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#x8FDE;&#x63A5;&#x4FE1;&#x53F7;&#x548C;&#x63D2;&#x69FD;"></a>&#x5728;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#x8FDE;&#x63A5;&#x4FE1;&#x53F7;&#x548C;&#x63D2;&#x69FD;</h2><p>&#x5728; PyQt &#x4E2D;&#xFF0C;&#x60A8;&#x4F7F;&#x7528;&#x4FE1;&#x53F7;&#x548C;&#x69FD;&#x4E3A; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x529F;&#x80FD;&#x3002;&#x6BCF;&#x6B21;&#x5728;PyQt &#x5C0F;&#x90E8;&#x4EF6;&#x4E0A;&#x53D1;&#x751F;&#x8BF8;&#x5982;&#x9F20;&#x6807;&#x5355;&#x51FB;&#x3001;&#x6309;&#x952E;&#x6216;&#x7A97;&#x53E3;&#x5927;&#x5C0F;&#x8C03;&#x6574;&#x7B49;&#x4E8B;&#x4EF6;&#x65F6;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x4F1A;&#x53D1;&#x51FA;&#x4FE1;&#x53F7;&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x63D2;&#x69FD;&#x662F;&#x4E00;&#x4E2A;Python&#x53EF;&#x8C03;&#x7528;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x4E00;&#x4E2A;&#x5C0F;&#x90E8;&#x4EF6;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x4EE5;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x4E8B;&#x4EF6;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x8FDE;&#x63A5;&#x4E86;&#x4E00;&#x4E2A;&#x4FE1;&#x53F7;&#x548C;&#x4E00;&#x4E2A;&#x63D2;&#x69FD;&#xFF0C;&#x90A3;&#x4E48;&#x6BCF;&#x6B21;&#x53D1;&#x51FA;&#x4FE1;&#x53F7;&#x65F6;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528;&#x8BE5;&#x63D2;&#x69FD;&#x3002;&#x5982;&#x679C;&#x7ED9;&#x5B9A;&#x7684;&#x4FE1;&#x53F7;&#x672A;&#x8FDE;&#x63A5;&#x5230;&#x63D2;&#x69FD;&#xFF0C;&#x5219;&#x5728;&#x53D1;&#x51FA;&#x4FE1;&#x53F7;&#x65F6;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4EFB;&#x4F55;&#x4E8B;&#x60C5;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x8BA9;&#x4F60;&#x7684;&#x83DC;&#x5355;&#x9009;&#x9879;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x5728;&#x7528;&#x6237;&#x70B9;&#x51FB;&#x5B83;&#x4EEC;&#x65F6;&#x542F;&#x52A8;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5C06;&#x5E95;&#x5C42;&#x64CD;&#x4F5C;&#x7684;&#x4FE1;&#x53F7;&#x4E0E;&#x4E00;&#x4E9B;&#x81EA;&#x5B9A;&#x4E49;&#x6216;&#x5185;&#x7F6E;&#x63D2;&#x69FD;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#x3002;</p>
<p>QAction&#x7269;&#x4F53;&#x53EF;&#x4EE5;&#x53D1;&#x51FA;&#x5404;&#x79CD;&#x4FE1;&#x53F7;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x4E2D;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4FE1;&#x53F7;&#x662F;.triggered()&#x3002;&#x6BCF;&#x6B21;&#x7528;&#x6237;&#x5355;&#x51FB;&#x83DC;&#x5355;&#x9009;&#x9879;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x65F6;&#x90FD;&#x4F1A;&#x53D1;&#x51FA;&#x6B64;&#x4FE1;&#x53F7;&#x3002;&#x8981;.triggered()&#x4E0E;&#x63D2;&#x69FD;&#x8FDE;&#x63A5;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x8BED;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;action = QAction(&quot;Action Text&quot;, parent)</span><br><span class="line"># Connect action&apos;s triggered() with a slot</span><br><span class="line">action.triggered.connect(slot)</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;slot&#x662F;&#x4E00;&#x4E2A; Python &#x53EF;&#x8C03;&#x7528;&#x7684;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;slot&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3001;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x3001;&#x4E00;&#x4E2A;&#x7C7B;&#x6216;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0; &#x7684;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;.__call__()&#x3002;</p>
<p>&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x5DF2;&#x7ECF;&#x6709;&#x4E00;&#x7EC4;&#x64CD;&#x4F5C;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x5BF9;&#x6BCF;&#x6B21;&#x7528;&#x6237;&#x5355;&#x51FB;&#x83DC;&#x5355;&#x9009;&#x9879;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x65F6;&#x8C03;&#x7528;&#x7684;&#x63D2;&#x69FD;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x3002;&#x8F6C;&#x5230;&#x7684;&#x5B9A;&#x4E49;Window&#x5E76;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def newFile(self):</span><br><span class="line">        # Logic for creating a new file goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;File &gt; New&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def openFile(self):</span><br><span class="line">        # Logic for opening an existing file goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;File &gt; Open...&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def saveFile(self):</span><br><span class="line">        # Logic for saving a file goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;File &gt; Save&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def copyContent(self):</span><br><span class="line">        # Logic for copying content goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;Edit &gt; Copy&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def pasteContent(self):</span><br><span class="line">        # Logic for pasting content goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;Edit &gt; Paste&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def cutContent(self):</span><br><span class="line">        # Logic for cutting content goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;Edit &gt; Cut&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def helpContent(self):</span><br><span class="line">        # Logic for launching help goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;Help &gt; Help Content...&lt;/b&gt; clicked&quot;)</span><br><span class="line"></span><br><span class="line">    def about(self):</span><br><span class="line">        # Logic for showing an about dialog content goes here...</span><br><span class="line">        self.centralWidget.setText(&quot;&lt;b&gt;Help &gt; About...&lt;/b&gt; clicked&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x5C06;&#x626E;&#x6F14;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x63D2;&#x69FD;&#x7684;&#x89D2;&#x8272;&#x3002;&#x6BCF;&#x6B21;&#x7528;&#x6237;&#x5355;&#x51FB;&#x76F8;&#x5E94;&#x7684;&#x83DC;&#x5355;&#x9009;&#x9879;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x65F6;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x5B83;&#x4EEC;&#x3002;</p>
<p>&#x4E00;&#x65E6;&#x6709;&#x4E86;&#x63D0;&#x4F9B;&#x529F;&#x80FD;&#x7684;&#x63D2;&#x69FD;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5C06;&#x5B83;&#x4EEC;&#x4E0E;&#x52A8;&#x4F5C;&#x7684;.triggered()&#x4FE1;&#x53F7;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x6839;&#x636E;&#x7528;&#x6237;&#x4E8B;&#x4EF6;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x8981;&#x8FDB;&#x884C;&#x8FD9;&#x4E9B;&#x8FDE;&#x63A5;&#xFF0C;&#x8BF7;&#x8F6C;&#x5230;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x5C06;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;Window&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _connectActions(self):</span><br><span class="line">        # Connect File actions</span><br><span class="line">        self.newAction.triggered.connect(self.newFile)</span><br><span class="line">        self.openAction.triggered.connect(self.openFile)</span><br><span class="line">        self.saveAction.triggered.connect(self.saveFile)</span><br><span class="line">        self.exitAction.triggered.connect(self.close)</span><br><span class="line">        # Connect Edit actions</span><br><span class="line">        self.copyAction.triggered.connect(self.copyContent)</span><br><span class="line">        self.pasteAction.triggered.connect(self.pasteContent)</span><br><span class="line">        self.cutAction.triggered.connect(self.cutContent)</span><br><span class="line">        # Connect Help actions</span><br><span class="line">        self.helpContentAction.triggered.connect(self.helpContent)</span><br><span class="line">        self.aboutAction.triggered.connect(self.about)</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x65B9;&#x6CD5;&#x4F1A;&#x5C06;&#x60A8;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x7684;.triggered()&#x4FE1;&#x53F7;&#x4E0E;&#x5176;&#x5404;&#x81EA;&#x7684;&#x63D2;&#x69FD;&#x6216;&#x56DE;&#x8C03;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#x3002;&#x901A;&#x8FC7;&#x6B64;&#x66F4;&#x65B0;&#xFF0C;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x5728;QLabel&#x60A8;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x7684;&#x5BF9;&#x8C61;&#x4E0A;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x544A;&#x8BC9;&#x60A8;&#x5355;&#x51FB;&#x4E86;&#x54EA;&#x4E2A;&#x83DC;&#x5355;&#x9009;&#x9879;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x3002;</p>
<p>&#x5728; &#x7684;&#x60C5;&#x51B5;&#x4E0B;exitAction&#xFF0C;&#x60A8;&#x5C06;&#x5176;triggered()&#x4FE1;&#x53F7;&#x4E0E;&#x5185;&#x7F6E;&#x63D2;&#x69FD;&#x8FDE;&#x63A5;QMainWindow.close()&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x9009;&#x62E9;_File &#x2192; Exit_&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x5173;&#x95ED;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x8F6C;&#x5230; &#x7684;&#x521D;&#x59CB;&#x5316;&#x7A0B;&#x5E8F;Window&#x5E76;&#x6DFB;&#x52A0;&#x5BF9; &#x7684;&#x8C03;&#x7528;._connectActions()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    &quot;&quot;&quot;Main Window.&quot;&quot;&quot;</span><br><span class="line">    def __init__(self, parent=None):</span><br><span class="line">        # Snip...</span><br><span class="line">        # self._createContextMenu()</span><br><span class="line">        self._connectActions()</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x6B64;&#x6700;&#x7EC8;&#x66F4;&#x65B0;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x66F4;&#x6539;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/0e85c447d4ccd3b20ab937e708a42378835f40ad9bd21762eb4e4b222a96c06a" alt="PyQt &#x8FDE;&#x63A5;&#x4FE1;&#x53F7;&#x548C;&#x63D2;&#x69FD;"></p>
<p>&#x5982;&#x679C;&#x5355;&#x51FB;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x6216;&#x4E0A;&#x4E0B;&#x6587;&#x83DC;&#x5355;&#x9009;&#x9879;&#xFF0C;&#x5219;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7A97;&#x53E3;&#x4E2D;&#x592E;&#x7684;&#x6807;&#x7B7E;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x6307;&#x793A;&#x5DF2;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6B64;&#x529F;&#x80FD;&#x5728;&#x5B66;&#x4E60;&#x73AF;&#x5883;&#x4E4B;&#x5916;&#x4E0D;&#x662F;&#x5F88;&#x6709;&#x7528;&#xFF0C;&#x4F46;&#x5B83;&#x53EF;&#x4EE5;&#x8BA9;&#x60A8;&#x4E86;&#x89E3;&#x5982;&#x4F55;&#x5728;&#x7528;&#x6237;&#x4E0E; GUI &#x4EA4;&#x4E92;&#x65F6;&#x8BA9;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x73B0;&#x5B9E;&#x4E16;&#x754C;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x5F53;&#x60A8;&#x9009;&#x62E9;_File &#x2192; Exit &#x65F6;_&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x5173;&#x95ED;&#xFF0C;&#x56E0;&#x4E3A; &#x7684;.triggered()&#x4FE1;&#x53F7;exitAction&#x5DF2;&#x8FDE;&#x63A5;&#x5230;&#x5185;&#x7F6E;&#x63D2;&#x69FD;QMainWindow.close()&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x7EC3;&#x4E60;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x4E3A;_&#x67E5;&#x627E;&#x548C;&#x66FF;&#x6362;_&#x5B50;&#x83DC;&#x5355;&#x4E2D;&#x7684;_&#x67E5;&#x627E;&#x2026;_&#x548C;_&#x66FF;&#x6362;&#x2026;_&#x9009;&#x9879;&#x521B;&#x5EFA;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x69FD;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5B83;&#x4EEC;&#x7684;&#x4FE1;&#x53F7;&#x8FDE;&#x63A5;&#x5230;&#x8FD9;&#x4E9B;&#x63D2;&#x69FD;&#x4EE5;&#x4F7F;&#x5176;&#x751F;&#x6548;&#x3002;&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528;&#x60A8;&#x5728;&#x672C;&#x8282;&#x4E2D;&#x7F16;&#x5199;&#x7684;&#x63D2;&#x69FD;&#x5E76;&#x5C1D;&#x8BD5;&#x7528;&#x5B83;&#x4EEC;&#x505A;&#x65B0;&#x7684;&#x4E8B;&#x60C5;&#x3002;.triggered()</p>
<h2 id="&#x52A8;&#x6001;&#x586B;&#x5145;-Python-&#x83DC;&#x5355;"><a href="#&#x52A8;&#x6001;&#x586B;&#x5145;-Python-&#x83DC;&#x5355;" class="headerlink" title="&#x52A8;&#x6001;&#x586B;&#x5145; Python &#x83DC;&#x5355;"></a>&#x52A8;&#x6001;&#x586B;&#x5145; Python &#x83DC;&#x5355;</h2><p>&#x4E3A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x65F6;&#xFF0C;&#x6709;&#x65F6;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x521B;&#x5EFA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F; GUI &#x65F6;&#x672A;&#x77E5;&#x7684;&#x9009;&#x9879;&#x586B;&#x5145;&#x8FD9;&#x4E9B;&#x83DC;&#x5355;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x4E2D;&#x7684;&#x201C;_&#x6253;&#x5F00;&#x6700;&#x8FD1;&#x201D;_&#x83DC;&#x5355;&#x663E;&#x793A;&#x6700;&#x8FD1;&#x6253;&#x5F00;&#x7684;&#x6587;&#x6863;&#x5217;&#x8868;&#x3002;&#x60A8;&#x65E0;&#x6CD5;&#x5728;&#x521B;&#x5EFA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684; GUI &#x65F6;&#x586B;&#x5145;&#x6B64;&#x83DC;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x90FD;&#x4F1A;&#x6253;&#x5F00;&#x4E0D;&#x540C;&#x7684;&#x6587;&#x6863;&#xFF0C;&#x5E76;&#x4E14;&#x65E0;&#x6CD5;&#x63D0;&#x524D;&#x77E5;&#x9053;&#x6B64;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x52A8;&#x6001;&#x586B;&#x5145;&#x83DC;&#x5355;&#x4EE5;&#x54CD;&#x5E94;&#x7528;&#x6237;&#x64CD;&#x4F5C;&#x6216;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x72B6;&#x6001;&#x3002;QMenu&#x6709;&#x4E00;&#x4E2A;&#x79F0;&#x4E3A;.aboutToShow()&#x60A8;&#x53EF;&#x4EE5;&#x8FDE;&#x63A5;&#x5230;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x69FD;&#x7684;&#x4FE1;&#x53F7;&#xFF0C;&#x4EE5;&#x5728;&#x83DC;&#x5355;&#x5BF9;&#x8C61;&#x663E;&#x793A;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x4E4B;&#x524D;&#x52A8;&#x6001;&#x586B;&#x5145;&#x5B83;&#x3002;</p>
<p>&#x8981;&#x7EE7;&#x7EED;&#x5F00;&#x53D1;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5047;&#x8BBE;&#x60A8;&#x9700;&#x8981;&#x5728;_&#x6587;&#x4EF6;_&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;_&#x6253;&#x5F00;&#x6700;&#x8FD1;&#x7684;_&#x5B50;&#x83DC;&#x5355;&#xFF0C;&#x5E76;&#x7528;&#x6700;&#x8FD1;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x6216;&#x6587;&#x6863;&#x52A8;&#x6001;&#x586B;&#x5145;&#x5B83;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ol>
<li>&#x5728;_File_&#x4E0B;&#x521B;&#x5EFA;_Open &#x6700;&#x8FD1;&#x7684;_&#x5B50;&#x83DC;&#x5355;&#x3002;</li>
<li>&#x7F16;&#x5199;&#x52A8;&#x6001;&#x751F;&#x6210;&#x64CD;&#x4F5C;&#x4EE5;&#x586B;&#x5145;&#x83DC;&#x5355;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x69FD;&#x3002;</li>
<li>&#x5C06;.aboutToShow()&#x83DC;&#x5355;&#x4FE1;&#x53F7;&#x4E0E;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x69FD;&#x8FDE;&#x63A5;&#x3002;</li>
</ol>
<p>&#x4E0B;&#x9762;&#x662F;&#x521B;&#x5EFA;&#x5B50;&#x83DC;&#x5355;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createMenuBar(self):</span><br><span class="line">        # Snip...</span><br><span class="line">        fileMenu.addAction(self.openAction)</span><br><span class="line">        # Adding an Open Recent submenu</span><br><span class="line">        self.openRecentMenu = fileMenu.addMenu(&quot;Open Recent&quot;)</span><br><span class="line">        fileMenu.addAction(self.saveAction)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x5728;&#x201C;_&#x6587;&#x4EF6;&#x201D;_&#x83DC;&#x5355;&#x4E0B;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x6807;&#x9898;&#x4E3A; &#x7684;&#x5B50;&#x83DC;&#x5355;&#x201D;Open Recent&#x201D;&#x3002;&#x8FD9;&#x4E2A;&#x5B50;&#x83DC;&#x5355;&#x8FD8;&#x6CA1;&#x6709;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;&#x60A8;&#x9700;&#x8981;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x4EE5;&#x586B;&#x5145;&#x5B83;&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7F16;&#x5199;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x6765;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x64CD;&#x4F5C;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x5230;&#x5B50;&#x83DC;&#x5355;&#x6765;&#x5B9E;&#x73B0;&#x6B64;&#x76EE;&#x7684;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x793A;&#x4F8B;&#xFF0C;&#x663E;&#x793A;&#x4E86;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x4E00;&#x822C;&#x903B;&#x8F91;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;from functools import partial</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def populateOpenRecent(self):</span><br><span class="line">        # Step 1. Remove the old options from the menu</span><br><span class="line">        self.openRecentMenu.clear()</span><br><span class="line">        # Step 2. Dynamically create the actions</span><br><span class="line">        actions = []</span><br><span class="line">        filenames = [f&quot;File-{n}&quot; for n in range(5)]</span><br><span class="line">        for filename in filenames:</span><br><span class="line">            action = QAction(filename, self)</span><br><span class="line">            action.triggered.connect(partial(self.openRecentFile, filename))</span><br><span class="line">            actions.append(action)</span><br><span class="line">        # Step 3. Add the actions to the menu</span><br><span class="line">        self.openRecentMenu.addActions(actions)</span><br></pre></td></tr></table></figure>

<p>&#x5728; &#x4E2D;.populateOpenRecent()&#xFF0C;&#x9996;&#x5148;&#x4F7F;&#x7528; &#x5220;&#x9664;&#x83DC;&#x5355;&#x4E2D;&#x7684;&#x65E7;&#x9009;&#x9879;&#xFF08;&#x5982;&#x679C;&#x6709;&#xFF09;.clear()&#x3002;&#x7136;&#x540E;&#x6DFB;&#x52A0;&#x7528;&#x4E8E;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x548C;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C;&#x7684;&#x903B;&#x8F91;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x60A8;&#x4F7F;&#x7528; &#x5C06;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5230;&#x83DC;&#x5355;&#x4E2D;.addActions()&#x3002;</p>
<p>&#x5728;for&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;&#x60A8;&#x4F7F;&#x7528;functools.partial()&#x6765;&#x8FDE;&#x63A5;.triggered()&#x4FE1;&#x53F7; &#xFF0C;.openRecentFile()&#x56E0;&#x4E3A;&#x60A8;&#x60F3;filename&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x7ED9;.openRecentFile()&#x3002;&#x5F53;&#x5C06;&#x4FE1;&#x53F7;&#x4E0E;&#x9700;&#x8981;&#x989D;&#x5916;&#x53C2;&#x6570;&#x7684;&#x63D2;&#x69FD;&#x8FDE;&#x63A5;&#x65F6;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x6280;&#x672F;&#x3002;&#x8981;&#x4F7F;&#x5176;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#xFF0C;&#x60A8;&#x9700;&#x8981;partial()&#x4ECE;functools.</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x672C;&#x793A;&#x4F8B;&#x7B2C;&#x4E8C;&#x6B65;&#x4E2D;&#x7684;&#x903B;&#x8F91;&#x5E76;&#x6CA1;&#x6709;&#x771F;&#x6B63;&#x52A0;&#x8F7D;&#x6700;&#x8FD1;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x5217;&#x8868;&#x3002;&#x5B83;&#x53EA;&#x662F;&#x521B;&#x5EFA;&#x4E86;list&#x4E94;&#x4E2A;&#x5047;&#x8BBE;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#xFF0C;&#x5176;&#x552F;&#x4E00;&#x76EE;&#x7684;&#x662F;&#x5C55;&#x793A;&#x5B9E;&#x73B0;&#x6B64;&#x6280;&#x672F;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
</blockquote>
<p>&#x4E0B;&#x4E00;&#x6B65;&#x662F;&#x8FDE;&#x63A5;.aboutToShow()&#x7684;&#x4FE1;&#x53F7;.openRecentMenu&#x5230;.populateOpenRecent()&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x8BF7;&#x5728;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x884C;._connectActions()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _connectActions(self):</span><br><span class="line">        # Snip...</span><br><span class="line">        self.aboutAction.triggered.connect(self.about)</span><br><span class="line">        # Connect Open Recent to dynamically populate it</span><br><span class="line">        self.openRecentMenu.aboutToShow.connect(self.populateOpenRecent)</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;.aboutToShow&#x4FE1;&#x53F7;&#x4E0E;&#x8FDE;&#x63A5;.populateOpenRecent()&#x3002;&#x8FD9;&#x53EF;&#x786E;&#x4FDD;&#x60A8;&#x7684;&#x83DC;&#x5355;&#x5728;&#x663E;&#x793A;&#x4E4B;&#x524D;&#x5C31;&#x88AB;&#x586B;&#x5145;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x60A8;&#x9700;&#x8981;&#x7F16;&#x7801;.openRecentFile()&#x3002;&#x8FD9;&#x662F;&#x5F53;&#x60A8;&#x7684;&#x7528;&#x6237;&#x5355;&#x51FB;&#x4EFB;&#x4F55;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x7684;&#x64CD;&#x4F5C;&#x65F6;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def openRecentFile(self, filename):</span><br><span class="line">        # Logic for opening a recent file goes here...</span><br><span class="line">        self.centralWidget.setText(f&quot;&lt;b&gt;{filename}&lt;/b&gt; opened&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x65B9;&#x6CD5;&#x5C06;&#x66F4;&#x65B0;QLabel&#x60A8;&#x7528;&#x4F5C;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E2D;&#x592E;&#x5C0F;&#x90E8;&#x4EF6;&#x7684;&#x5BF9;&#x8C61;&#x7684;&#x6587;&#x672C;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x7684;&#x5B50;&#x83DC;&#x5355;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/22e04f3d65485da05064cb2a4819904d246a15311366a261834eacf81f13bd78" alt="PyQt &#x52A8;&#x6001;&#x521B;&#x5EFA;&#x7684;&#x83DC;&#x5355;"></p>
<p>&#x5F53;&#x60A8;&#x7684;&#x9F20;&#x6807;&#x6307;&#x9488;&#x60AC;&#x505C;&#x5728;_&#x6253;&#x5F00;&#x6700;&#x8FD1;_&#x83DC;&#x5355;&#x4E0A;&#x65F6;&#xFF0C;&#x83DC;&#x5355;&#x4F1A;&#x53D1;&#x51FA;.aboutToShow()&#x4FE1;&#x53F7;&#x3002;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x8C03;&#x7528;.populateOpenRecent()&#xFF0C;&#x4ECE;&#x800C;&#x521B;&#x5EFA;&#x5E76;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x5355;&#x51FB;&#x6587;&#x4EF6;&#x540D;&#xFF0C;&#x60A8;&#x5C06;&#x770B;&#x5230;&#x4E2D;&#x592E;&#x6807;&#x7B7E;&#x76F8;&#x5E94;&#x5730;&#x66F4;&#x6539;&#x4EE5;&#x663E;&#x793A;&#x6D88;&#x606F;&#x3002;</p>
<h2 id="&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;"><a href="#&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;" class="headerlink" title="&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;"></a>&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x9009;&#x9879;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;</h2><p>&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x662F; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x4E00;&#x9879;&#x91CD;&#x8981;&#x529F;&#x80FD;&#x3002;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x662F;&#x4E00;&#x4E2A;&#x7EC4;&#x5408;&#x952E;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x952E;&#x76D8;&#x4E0A;&#x6309;&#x4E0B;&#x5B83;&#x4EE5;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x6700;&#x5E38;&#x89C1;&#x9009;&#x9879;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x7684;&#x4E00;&#x4E9B;&#x793A;&#x4F8B;&#xFF1A;</p>
<ul>
<li>Ctrl+ &#x5C06;C&#x67D0;&#x4E9B;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x5230;&#x526A;&#x8D34;&#x677F;&#x3002;</li>
<li>Ctrl+V&#x4ECE;&#x526A;&#x8D34;&#x677F;&#x7C98;&#x8D34;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#x3002;</li>
<li>Ctrl+Z&#x64A4;&#x6D88;&#x4E0A;&#x6B21;&#x64CD;&#x4F5C;&#x3002;</li>
<li>Ctrl+O&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x3002;</li>
<li>Ctrl+S&#x4FDD;&#x5B58;&#x6587;&#x4EF6;&#x3002;</li>
</ul>
<p>&#x5728;&#x4E0B;&#x9762;&#x7684;&#x90E8;&#x5206;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x5411;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x4EE5;&#x63D0;&#x9AD8;&#x7528;&#x6237;&#x7684;&#x5DE5;&#x4F5C;&#x6548;&#x7387;&#x548C;&#x4F53;&#x9A8C;&#x3002;</p>
<h3 id="&#x4F7F;&#x7528;&#x6309;&#x952E;&#x5E8F;&#x5217;"><a href="#&#x4F7F;&#x7528;&#x6309;&#x952E;&#x5E8F;&#x5217;" class="headerlink" title="&#x4F7F;&#x7528;&#x6309;&#x952E;&#x5E8F;&#x5217;"></a>&#x4F7F;&#x7528;&#x6309;&#x952E;&#x5E8F;&#x5217;</h3><p>&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x60A8;&#x5DF2;&#x7ECF;&#x4E86;&#x89E3;&#x5230;&#x8FD9;QAction&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x586B;&#x5145;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x7684;&#x591A;&#x529F;&#x80FD;&#x7C7B;&#x3002;QAction&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x7528;&#x6237;&#x53CB;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9A;&#x4E49;&#x83DC;&#x5355;&#x9009;&#x9879;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x7684;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;</p>
<p>QAction&#x5B9E;&#x65BD;**.setShortcut()**. &#x6B64;&#x65B9;&#x6CD5;&#x5C06;QKeySequence&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x5E76;&#x8FD4;&#x56DE;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;</p>
<p>QKeySequence&#x63D0;&#x4F9B;&#x4E86;&#x51E0;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x60A8;&#x5C06;&#x4E86;&#x89E3;&#x5176;&#x4E2D;&#x4E24;&#x4E2A;&#xFF1A;</p>
<ol>
<li>**QKeySequence(ks, format)**&#x5C06;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x952E;&#x5E8F;&#x5217; ( ks) &#x548C;&#x683C;&#x5F0F; ( format) &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QKeySequence&#x5BF9;&#x8C61;&#x3002;</li>
<li>**QKeySequence(key)**&#x63A5;&#x53D7;&#x4E00;&#x4E2A;StandardKey&#x5E38;&#x91CF;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QKeySequence&#x4E0E;&#x5E95;&#x5C42;&#x5E73;&#x53F0;&#x4E0A;&#x7684;&#x952E;&#x5E8F;&#x5217;&#x5339;&#x914D;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
</ol>
<p>&#x7B2C;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x8BC6;&#x522B;&#x4EE5;&#x4E0B;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</p>
<ul>
<li>&#x201C;Ctrl&#x201D;</li>
<li>&#x201C;Shift&#x201D;</li>
<li>&#x201C;Alt&#x201D;</li>
<li>&#x201C;Meta&#x201D;</li>
</ul>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x8FD9;&#x4E9B;&#x5B57;&#x7B26;&#x4E32;&#x4E0E;&#x5B57;&#x6BCD;&#x3001;&#x6807;&#x70B9;&#x7B26;&#x53F7;&#x3001;&#x6570;&#x5B57;&#x3001;&#x547D;&#x540D;&#x952E;&#xFF08;Up&#x3001;Down&#x3001;Home&#xFF09;&#x548C;&#x529F;&#x80FD;&#x952E;&#xFF08;&#x201D;Ctrl+S&#x201D;&#x3001;&#x201D;Ctrl+5&#x201D;&#x3001;&#x201D;Alt+Home&#x201D;&#x3001;&#x201D;Alt+F4&#x201D;&#xFF09;&#x7EC4;&#x5408;&#x6765;&#x521B;&#x5EFA;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x952E;&#x5E8F;&#x5217;&#x3002;&#x60A8;&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x5728;&#x9017;&#x53F7;&#x5206;&#x9694;&#x5217;&#x8868;&#x4E2D;&#x4F20;&#x9012;&#x56DB;&#x4E2A;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x952E;&#x5E8F;&#x5217;&#x3002;</p>
<p><strong>&#x6CE8;</strong>&#xFF1A;&#x6709;&#x5173;&#x5728;&#x4E0D;&#x540C;&#x5E73;&#x53F0;&#x4E0A;&#x7684;&#x6807;&#x51C6;&#x5FEB;&#x6377;&#x7684;&#x5B8C;&#x6574;&#x53C2;&#x8003;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;&#x6807;&#x51C6;&#x5FEB;&#x6377;&#x952E;&#x90E8;&#x5206;&#x4E2D;&#x7684;QKeySequence&#x6587;&#x6863;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x591A;&#x5E73;&#x53F0;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x5E0C;&#x671B;&#x575A;&#x6301;&#x6BCF;&#x4E2A;&#x5E73;&#x53F0;&#x7684;&#x6807;&#x51C6;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#xFF0C;&#x5219;&#x7B2C;&#x4E8C;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5F88;&#x65B9;&#x4FBF;&#x3002;&#x4F8B;&#x5982;&#xFF0C;QKeySequence.Copy&#x5C06;&#x8FD4;&#x56DE;&#x7528;&#x4E8E;&#x5C06;&#x5BF9;&#x8C61;&#x590D;&#x5236;&#x5230;&#x526A;&#x8D34;&#x677F;&#x7684;&#x5E73;&#x53F0;&#x6807;&#x51C6;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;</p>
<blockquote>
<p>**&#x6CE8;&#x610F;&#xFF1A;**&#x6709;&#x5173; PyQt &#x63D0;&#x4F9B;&#x7684;&#x6807;&#x51C6;&#x5BC6;&#x94A5;&#x7684;&#x5B8C;&#x6574;&#x53C2;&#x8003;&#xFF0C;&#x8BF7;&#x53C2;&#x9605;QKeySequence.StandardKey &#x6587;&#x6863;&#x3002;</p>
</blockquote>
<p>&#x6709;&#x4E86;&#x5173;&#x4E8E;&#x5982;&#x4F55;&#x5728; PyQt &#x4E2D;&#x4E3A;&#x64CD;&#x4F5C;&#x5B9A;&#x4E49;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x7684;&#x4E00;&#x822C;&#x80CC;&#x666F;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x5FEB;&#x6377;&#x952E;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x66F4;&#x65B0;._createActions()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">python&#x590D;&#x5236;&#x4EE3;&#x7801;from PyQt5.QtGui import QKeySequence</span><br><span class="line"># Snip...</span><br><span class="line"></span><br><span class="line">class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createActions(self):</span><br><span class="line">        # File actions</span><br><span class="line">        # Snip...</span><br><span class="line">        # Using string-based key sequences</span><br><span class="line">        self.newAction.setShortcut(&quot;Ctrl+N&quot;)</span><br><span class="line">        self.openAction.setShortcut(&quot;Ctrl+O&quot;)</span><br><span class="line">        self.saveAction.setShortcut(&quot;Ctrl+S&quot;)</span><br><span class="line">        # Edit actions</span><br><span class="line">        # Snip...</span><br><span class="line">        # Using standard keys</span><br><span class="line">        self.copyAction.setShortcut(QKeySequence.Copy)</span><br><span class="line">        self.pasteAction.setShortcut(QKeySequence.Paste)</span><br><span class="line">        self.cutAction.setShortcut(QKeySequence.Cut)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x60A8;&#x9996;&#x5148;&#x9700;&#x8981;&#x5BFC;&#x5165;QKeySequence. &#x5728;&#x91CC;&#x9762;._createActions()&#xFF0C;&#x524D;&#x4E09;&#x4E2A;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4F7F;&#x7528;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x952E;&#x5E8F;&#x5217;&#x521B;&#x5EFA;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;&#x8FD9;&#x662F;&#x5411;&#x60A8;&#x7684;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x7684;&#x5FEB;&#x901F;&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x540E;&#x4E09;&#x4E2A;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x7528;&#x4E8E;QKeySequence&#x63D0;&#x4F9B;&#x6807;&#x51C6;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x8FD0;&#x884C;&#x5E26;&#x6709;&#x8FD9;&#x4E9B;&#x6DFB;&#x52A0;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x7684;&#x83DC;&#x5355;&#x5C06;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/8c1943e68edba6677b11a103f7412f22d22526dbed20ac1573d11a80a78f0f95" alt="PyQt &#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;"></p>
<p>&#x60A8;&#x7684;&#x83DC;&#x5355;&#x9009;&#x9879;&#x73B0;&#x5728;&#x4F1A;&#x5728;&#x5176;&#x53F3;&#x4FA7;&#x663E;&#x793A;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;&#x5982;&#x679C;&#x60A8;&#x6309;&#x8FD9;&#x4E9B;&#x7EC4;&#x5408;&#x952E;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x6267;&#x884C;&#x76F8;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<h3 id="&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;"><a href="#&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;" class="headerlink" title="&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;"></a>&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;</h3><p>&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x53E6;&#x4E00;&#x79CD;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;&#x5C06;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x6216;<strong>&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;</strong>&#x6DFB;&#x52A0;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E2D;&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x80FD;&#x5DF2;&#x7ECF;&#x6CE8;&#x610F;&#x5230;&#xFF0C;&#x5F53;&#x60A8;&#x4E3A;&#x83DC;&#x5355;&#x6216;&#x83DC;&#x5355;&#x9009;&#x9879;&#x8BBE;&#x7F6E;&#x6587;&#x672C;&#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&amp;&#x5728;&#x6587;&#x672C;&#x4E2D;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x4E0E;&#x7B26;&#x53F7; ( )&#x3002;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x4E3A;&#x4E86;&#x5F53;&#x663E;&#x793A;&#x5728;&#x83DC;&#x5355;&#x6216;&#x83DC;&#x5355;&#x9009;&#x9879;&#x7684;&#x6587;&#x672C;&#x4E2D;&#x65F6;&#xFF0C;&#x7D27;&#x8DDF;&#x5728;&#xFF06;&#x7B26;&#x53F7;&#x4E4B;&#x540E;&#x7684;&#x5B57;&#x6BCD;&#x5C06;&#x5E26;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x5728;&#x201C;_&#x6587;&#x4EF6;&#x201D;_&#x83DC;&#x5355; ( )&#x7684;&#x6807;&#x9898;&#x4E2D;&#x7684;&#x5B57;&#x6BCD;_F_&#x4E4B;&#x524D;&#x653E;&#x7F6E;&#x4E00;&#x4E2A;&#x4E0E;&#x53F7;&#xFF0C;&#x5219;&#x5728;&#x663E;&#x793A;&#x83DC;&#x5355;&#x6807;&#x9898;&#x65F6;_F_&#x5C06;&#x5E26;&#x6709;&#x4E0B;&#x5212;&#x7EBF;&#x3002;&#x201D;&amp;File&#x201D;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x5728;&#x83DC;&#x5355;&#x6587;&#x672C;&#x4E0A;&#x663E;&#x793A;&#x4E0E;&#x53F7;&#x7B26;&#x53F7;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x53CC;&#x4E0E;&#x53F7; ( &amp;&amp;) &#x6765;&#x9003;&#x907F;&#x6B64;&#x7B26;&#x53F7;&#x7684;&#x9ED8;&#x8BA4;&#x529F;&#x80FD;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x83DC;&#x5355;&#x680F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F7F;&#x7528;&#x4E0E;&#x53F7;&#x5141;&#x8BB8;&#x60A8;&#x901A;&#x8FC7;Alt&#x4E0E;&#x83DC;&#x5355;&#x6807;&#x9898;&#x4E2D;&#x5E26;&#x4E0B;&#x5212;&#x7EBF;&#x7684;&#x5B57;&#x6BCD;&#x7EC4;&#x5408;&#x6309;&#x4E0B;&#x6765;&#x8C03;&#x7528;&#x4EFB;&#x4F55;&#x83DC;&#x5355;&#x3002;</p>
<p>&#x542F;&#x52A8;&#x83DC;&#x5355;&#x540E;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6309;&#x9009;&#x9879;&#x6587;&#x672C;&#x4E2D;&#x5E26;&#x4E0B;&#x5212;&#x7EBF;&#x7684;&#x5B57;&#x6BCD;&#x6765;&#x8BBF;&#x95EE;&#x4EFB;&#x4F55;&#x83DC;&#x5355;&#x9009;&#x9879;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5728;_&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;_&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6309;&#x5B57;&#x6BCD;_E_&#x8BBF;&#x95EE;_&#x9000;&#x51FA;_&#x9009;&#x9879;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5F53;&#x60A8;&#x4F7F;&#x7528;&#x4E0E;&#x53F7;&#x6765;&#x63D0;&#x4F9B;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;&#x65F6;&#xFF0C;&#x8BF7;&#x8BB0;&#x4F4F;&#x5728;&#x540C;&#x4E00;&#x83DC;&#x5355;&#x4E0B;&#x4E0D;&#x80FD;&#x6709;&#x4E24;&#x4E2A;&#x9009;&#x9879;&#x5171;&#x4EAB;&#x76F8;&#x540C;&#x7684;&#x8BBF;&#x95EE;&#x5B57;&#x6BCD;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;&#x60A8;&#x5C06;_C_&#x8BBE;&#x7F6E;&#x4E3A;_Copy_&#x9009;&#x9879;&#x7684;&#x8BBF;&#x95EE;&#x5B57;&#x6BCD;&#xFF0C;&#x5219;&#x4E0D;&#x80FD;&#x5C06;_C_&#x8BBE;&#x7F6E;&#x4E3A;_Cut_&#x9009;&#x9879;&#x7684;&#x8BBF;&#x95EE;&#x5B57;&#x6BCD;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5728;&#x7ED9;&#x5B9A;&#x7684;&#x83DC;&#x5355;&#x4E0B;&#xFF0C;&#x8BBF;&#x95EE;&#x5B57;&#x6BCD;&#x5FC5;&#x987B;&#x662F;&#x552F;&#x4E00;&#x7684;&#x3002;</p>
<p>&#x6B64;&#x529F;&#x80FD;&#x5C06;&#x5141;&#x8BB8;&#x60A8;&#x4E3A;&#x559C;&#x6B22;&#x4F7F;&#x7528;&#x952E;&#x76D8;&#x6765;&#x5904;&#x7406;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x5FEB;&#x901F;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;&#x3002;&#x6B64;&#x6280;&#x672F;&#x5BF9;&#x4E8E;&#x4E0D;&#x63D0;&#x4F9B;&#x663E;&#x5F0F;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x7684;&#x9009;&#x9879;&#x7279;&#x522B;&#x6709;&#x7528;&#x3002;</p>
<h2 id="&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x548C;&#x6280;&#x5DE7;"><a href="#&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x548C;&#x6280;&#x5DE7;" class="headerlink" title="&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x548C;&#x6280;&#x5DE7;"></a>&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#xFF1A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x548C;&#x6280;&#x5DE7;</h2><p>&#x5F53;&#x60A8;&#x4F7F;&#x7528; Python &#x548C; PyQt &#x521B;&#x5EFA;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x65F6;&#xFF0C;&#x60A8;&#x5E94;&#x8BE5;&#x9075;&#x5FAA;&#x4E00;&#x4E9B;&#x901A;&#x5E38;&#x88AB;&#x8BA4;&#x4E3A;&#x662F; GUI &#x7F16;&#x7A0B;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x7684;&#x6807;&#x51C6;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5FEB;&#x901F;&#x5217;&#x8868;&#xFF1A;</p>
<ol>
<li>**&#x6309;&#x7167;&#x666E;&#x904D;&#x63A5;&#x53D7;&#x7684;&#x987A;&#x5E8F;&#x6392;&#x5217;&#x83DC;&#x5355;&#x3002;**&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x6709;&#x4E00;&#x4E2A;_&#x6587;&#x4EF6;_&#x83DC;&#x5355;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5E94;&#x8BE5;&#x662F;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x83DC;&#x5355;&#x3002;&#x5982;&#x679C;&#x4F60;&#x6709;&#x4E00;&#x4E2A;_&#x7F16;&#x8F91;_&#x83DC;&#x5355;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5E94;&#x8BE5;&#x662F;&#x7B2C;&#x4E8C;&#x4E2A;&#x3002;_&#x5E2E;&#x52A9;_&#x5E94;&#x8BE5;&#x662F;&#x6700;&#x53F3;&#x8FB9;&#x7684;&#x83DC;&#x5355;&#xFF0C;&#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</li>
<li>**&#x4F7F;&#x7528;&#x60A8;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7C7B;&#x578B;&#x7684;&#x5E38;&#x7528;&#x9009;&#x9879;&#x586B;&#x5145;&#x60A8;&#x7684;&#x83DC;&#x5355;&#x3002;**&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x4E2D;&#xFF0C;<em>&#x6587;&#x4EF6;_&#x83DC;&#x5355;&#x901A;&#x5E38;&#x5305;&#x62EC;&#x8BF8;&#x5982;_New</em>&#x3001;<em>Open</em>&#x3001;<em>Save_&#x548C;_Exit &#x4E4B;&#x7C7B;&#x7684;&#x9009;&#x9879;</em>&#x3002;<em>&#x7F16;&#x8F91;_&#x83DC;&#x5355;&#x901A;&#x5E38;&#x5305;&#x62EC;_&#x590D;&#x5236;</em>&#x3001;<em>&#x7C98;&#x8D34;</em>&#x3001;<em>&#x526A;&#x5207;</em>&#x3001;_&#x64A4;&#x6D88;_&#x7B49;&#x9009;&#x9879;&#x3002;</li>
<li>**&#x5BF9;&#x5E38;&#x7528;&#x9009;&#x9879;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x952E;&#x76D8;&#x5FEB;&#x6377;&#x952E;&#x3002;**&#x4F8B;&#x5982;&#xFF0C;&#x4F7F;&#x7528;Ctrl+C&#x8FDB;&#x884C;_&#x590D;&#x5236;_&#xFF0C;Ctrl+V&#x7528;&#x4E8E;_&#x7C98;&#x8D34;_&#xFF0C;Ctrl+X&#x7528;&#x4E8E;_&#x5207;&#x5272;_&#xFF0C;&#x7B49;&#x7B49;&#x3002;</li>
<li>**&#x4F7F;&#x7528;&#x5206;&#x9694;&#x7B26;&#x5206;&#x9694;&#x4E0D;&#x76F8;&#x5173;&#x7684;&#x9009;&#x9879;&#x3002;**&#x8FD9;&#x4E9B;&#x89C6;&#x89C9;&#x63D0;&#x793A;&#x5C06;&#x4F7F;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x66F4;&#x6613;&#x4E8E;&#x5BFC;&#x822A;&#x3002;</li>
<li>**&#x5C06;&#x7701;&#x7565;&#x53F7; ( &#x2026;)&#x6DFB;&#x52A0;&#x5230;&#x542F;&#x52A8;&#x5176;&#x4ED6;&#x5BF9;&#x8BDD;&#x6846;&#x7684;&#x9009;&#x9879;&#x7684;&#x6807;&#x9898;&#x3002;**&#x4F8B;&#x5982;&#xFF0C;&#x4F7F;&#x7528;_Save As&#x2026;<em>&#x800C;&#x4E0D;&#x662F;_Save As</em>&#xFF0C;&#x4F7F;&#x7528;_About&#x2026;<em>&#x800C;&#x4E0D;&#x662F;_About</em>&#xFF0C;&#x7B49;&#x7B49;&#x3002;</li>
<li>**&amp;&#x5728;&#x83DC;&#x5355;&#x9009;&#x9879;&#x4E2D;&#x4F7F;&#x7528;&#x4E0E;&#x53F7; ( ) &#x6765;&#x63D0;&#x4F9B;&#x65B9;&#x4FBF;&#x7684;&#x952E;&#x76D8;&#x52A0;&#x901F;&#x5668;&#x3002;**&#x4F8B;&#x5982;&#xFF0C;&#x201D;&amp;Open&#x4EE3;&#x66FF;&#x201D;Open&#x201D;&#xFF0C;&#x201D;&amp;Exit&#x201D;&#x4EE3;&#x66FF;&#x201D;Exit&#x201D;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;&#x60A8;&#x9075;&#x5FAA;&#x8FD9;&#x4E9B;&#x51C6;&#x5219;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x7684; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C06;&#x4E3A;&#x60A8;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x719F;&#x6089;&#x4E14;&#x8BF1;&#x4EBA;&#x7684;&#x4F53;&#x9A8C;&#x3002;</p>
<h2 id="&#x5728;-PyQt-&#x4E2D;&#x6784;&#x5EFA;-Python-&#x72B6;&#x6001;&#x680F;"><a href="#&#x5728;-PyQt-&#x4E2D;&#x6784;&#x5EFA;-Python-&#x72B6;&#x6001;&#x680F;" class="headerlink" title="&#x5728; PyQt &#x4E2D;&#x6784;&#x5EFA; Python &#x72B6;&#x6001;&#x680F;"></a>&#x5728; PyQt &#x4E2D;&#x6784;&#x5EFA; Python &#x72B6;&#x6001;&#x680F;</h2><p>&#x7532;&#x72B6;&#x6001;&#x680F;&#x662F;&#x6C34;&#x5E73;&#x9762;&#x677F;&#x901A;&#x5E38;&#x5728;GUI&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x653E;&#x7F6E;&#x5728;&#x5E95;&#x90E8;&#x7684;&#x4E3B;&#x7A97;&#x53E3;&#x3002;&#x5B83;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x662F;&#x663E;&#x793A;&#x6709;&#x5173;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5F53;&#x524D;<strong>&#x72B6;&#x6001;</strong>&#x7684;&#x4FE1;&#x606F;&#x3002;&#x72B6;&#x6001;&#x680F;&#x4E5F;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x591A;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x4EE5;&#x663E;&#x793A;&#x6BCF;&#x4E2A;&#x90E8;&#x5206;&#x7684;&#x4E0D;&#x540C;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x6839;&#x636E;Qt &#x6587;&#x6863;&#xFF0C;&#x72B6;&#x6001;&#x6307;&#x793A;&#x5668;&#x5206;&#x4E3A;&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#xFF1A;</p>
<ol>
<li><strong>&#x4E34;&#x65F6;</strong>&#x6307;&#x793A;&#x5668;&#x4F1A;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x5360;&#x636E;&#x51E0;&#x4E4E;&#x6574;&#x4E2A;&#x72B6;&#x6001;&#x680F;&#x4EE5;&#x663E;&#x793A;&#x5DE5;&#x5177;&#x63D0;&#x793A;&#x6587;&#x672C;&#x3001;&#x83DC;&#x5355;&#x9879;&#x548C;&#x5176;&#x4ED6;&#x65F6;&#x95F4;&#x654F;&#x611F;&#x4FE1;&#x606F;&#x3002;</li>
<li><strong>&#x666E;&#x901A;</strong>&#x6307;&#x793A;&#x5668;&#x5360;&#x636E;&#x72B6;&#x6001;&#x680F;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x5E76;&#x663E;&#x793A;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x5B9A;&#x671F;&#x53C2;&#x8003;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x6587;&#x5B57;&#x5904;&#x7406;&#x5668;&#x4E2D;&#x7684;&#x5B57;&#x6570;&#x7EDF;&#x8BA1;&#x3002;&#x8FD9;&#x4E9B;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x4E34;&#x65F6;&#x6307;&#x6807;&#x6682;&#x65F6;&#x9690;&#x85CF;&#x3002;</li>
<li><strong>&#x6C38;&#x4E45;</strong>&#x6307;&#x793A;&#x5668;&#x59CB;&#x7EC8;&#x663E;&#x793A;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#xFF0C;&#x5373;&#x4F7F;&#x4E34;&#x65F6;&#x6307;&#x793A;&#x5668;&#x88AB;&#x6FC0;&#x6D3B;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#x3002;&#x5B83;&#x4EEC;&#x7528;&#x4E8E;&#x663E;&#x793A;&#x6709;&#x5173;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5F53;&#x524D;&#x6A21;&#x5F0F;&#x7684;&#x91CD;&#x8981;&#x4FE1;&#x606F;&#xFF0C;&#x4F8B;&#x5982;&#x6309;&#x4E0B; Caps Lock &#x952E;&#x7684;&#x65F6;&#x95F4;&#x3002;</li>
</ol>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x9009;&#x9879;&#x4E4B;&#x4E00;&#x5411;&#x4E3B;&#x7A97;&#x53E3;&#x6837;&#x5F0F;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x72B6;&#x6001;&#x680F;&#xFF1A;</p>
<ul>
<li>&#x8C03;&#x7528;.statusBar()&#x4F60;&#x7684;QMainWindow&#x5BF9;&#x8C61;&#x3002;.statusBar()&#x521B;&#x5EFA;&#x5E76;&#x8FD4;&#x56DE;&#x4E3B;&#x7A97;&#x53E3;&#x7684;&#x7A7A;&#x72B6;&#x6001;&#x680F;&#x3002;</li>
<li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QStatusBar&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;.setStatusBar()&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x680F;&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x8C03;&#x7528;&#x4E3B;&#x7A97;&#x53E3;&#x3002;&#x8FD9;&#x6837;&#xFF0C;.setStatusBar()&#x5C06;&#x60A8;&#x7684;&#x72B6;&#x6001;&#x680F;&#x5BF9;&#x8C61;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E3B;&#x7A97;&#x53E3;&#x7684;&#x72B6;&#x6001;&#x680F;&#x3002;</li>
</ul>
<p>&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x60A8;&#x6709;&#x4E24;&#x79CD;&#x66FF;&#x4EE3;&#x5B9E;&#x73B0;&#x6765;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x72B6;&#x6001;&#x680F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;# 1. Using .statusBar()</span><br><span class="line">def _createStatusBar(self):</span><br><span class="line">    self.statusbar = self.statusBar()</span><br><span class="line"></span><br><span class="line"># 2. Using .setStatusBar()</span><br><span class="line">def _createStatusBar(self):</span><br><span class="line">    self.statusbar = QStatusBar()</span><br><span class="line">    self.setStatusBar(self.statusbar)</span><br></pre></td></tr></table></figure>

<p>&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#x4EA7;&#x751F;&#x76F8;&#x540C;&#x7684;&#x7ED3;&#x679C;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x5C06;&#x4F7F;&#x7528;&#x7B2C;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;&#x6765;&#x521B;&#x5EFA;&#x72B6;&#x6001;&#x680F;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8981;&#x4F7F;&#x7B2C;&#x4E8C;&#x4E2A;&#x5B9E;&#x73B0;&#x5DE5;&#x4F5C;&#xFF0C;&#x60A8;&#x9700;&#x8981;QStatusBar&#x4ECE;PyQt5.QtWidgets.</p>
<p>&#x5C06;&#x4E0A;&#x8FF0;&#x5B9E;&#x73B0;&#x4E4B;&#x4E00;&#x6DFB;&#x52A0;&#x5230;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;Window&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;._createStatusBar()&#x7C7B;&#x521D;&#x59CB;&#x503C;&#x8BBE;&#x5B9A;&#x9879;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x6DFB;&#x52A0;&#xFF0C;&#x5F53;&#x60A8;&#x518D;&#x6B21;&#x8FD0;&#x884C;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x60A8;&#x5C06;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x7684;&#x7A97;&#x53E3;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/6be7fbbfe3ef2b4fe0cdeecebe6d42a48610a96946bd3008127121bd95551a96" alt="PyQt &#x72B6;&#x6001;&#x680F;"></p>
<p>&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x73B0;&#x5728;&#x5728;&#x5176;&#x4E3B;&#x7A97;&#x53E3;&#x5E95;&#x90E8;&#x6709;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x680F;&#x3002;&#x72B6;&#x6001;&#x680F;&#x51E0;&#x4E4E;&#x4E0D;&#x53EF;&#x89C1;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#xFF0C;&#x60A8;&#x4F1A;&#x6CE8;&#x610F;&#x5230;&#x7A97;&#x53E3;&#x53F3;&#x4E0B;&#x89D2;&#x6709;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x865A;&#x7EBF;&#x4E09;&#x89D2;&#x5F62;&#x3002;</p>
<h3 id="&#x663E;&#x793A;&#x4E34;&#x65F6;&#x72B6;&#x6001;&#x6D88;&#x606F;"><a href="#&#x663E;&#x793A;&#x4E34;&#x65F6;&#x72B6;&#x6001;&#x6D88;&#x606F;" class="headerlink" title="&#x663E;&#x793A;&#x4E34;&#x65F6;&#x72B6;&#x6001;&#x6D88;&#x606F;"></a>&#x663E;&#x793A;&#x4E34;&#x65F6;&#x72B6;&#x6001;&#x6D88;&#x606F;</h3><p>&#x72B6;&#x6001;&#x680F;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x662F;&#x5411;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7528;&#x6237;&#x663E;&#x793A;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x3002;&#x8981;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#x663E;&#x793A;&#x4E34;&#x65F6;&#x72B6;&#x6001;&#x6D88;&#x606F;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x4F7F;&#x7528;QStatusBar.showMessage(). &#x6B64;&#x65B9;&#x6CD5;&#x91C7;&#x7528;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ol>
<li><strong>message</strong> &#x5C06;&#x72B6;&#x6001;&#x6307;&#x793A;&#x6D88;&#x606F;&#x4F5C;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x4FDD;&#x5B58;&#x3002;</li>
<li><strong>timeout</strong> &#x4FDD;&#x5B58;&#x6D88;&#x606F;&#x5C06;&#x663E;&#x793A;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x7684;&#x6BEB;&#x79D2;&#x6570;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;timeout&#x662F;0&#xFF0C;&#x8FD9;&#x662F;&#x5176;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x5219;&#x6D88;&#x606F;&#x5C06;&#x4FDD;&#x7559;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#xFF0C;&#x76F4;&#x5230;&#x60A8;&#x8C03;&#x7528;.clearMessage()&#x6216;.showMessage()&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x7684;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x6709;&#x4E00;&#x6761;&#x6D3B;&#x52A8;&#x6D88;&#x606F;&#x5E76;&#x4E14;&#x60A8;.showMessage()&#x7528;&#x65B0;&#x6D88;&#x606F;&#x547C;&#x53EB;&#xFF0C;&#x90A3;&#x4E48;&#x65B0;&#x6D88;&#x606F;&#x5C06;&#x63A9;&#x76D6;&#x6216;&#x66FF;&#x6362;&#x65E7;&#x6D88;&#x606F;&#x3002;</p>
<p>&#x8F6C;&#x5230;&#x60A8;&#x7684;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E76;&#x5C06;&#x4EE5;&#x4E0B;&#x884C;&#x6DFB;&#x52A0;&#x5230;._createStatusBar()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createStatusBar(self):</span><br><span class="line">        self.statusbar = self.statusBar()</span><br><span class="line">        # Adding a temporary message</span><br><span class="line">        self.statusbar.showMessage(&quot;Ready&quot;, 3000)</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x540E;&#x4E00;&#x884C;._createStatusBar()&#x5C06;&#x4F7F;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;Ready&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6D88;&#x606F;3000&#x51E0;&#x6BEB;&#x79D2;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/84002d6d78d722ec3ca363997c0422ee1537ef6d6df2eeacd31a799ef424ba76" alt="PyQt &#x72B6;&#x6001;&#x6D88;&#x606F;"></p>
<p>&#x8FD0;&#x884C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x72B6;&#x6001;&#x680F;&#x4F1A;&#x663E;&#x793A;&#x6D88;&#x606F;Ready&#x3002;&#x4E4B;&#x540E;3000&#x6BEB;&#x79D2;&#xFF0C;&#x6B64;&#x6D88;&#x606F;&#x6D88;&#x5931;&#xFF0C;&#x72B6;&#x6001;&#x680F;&#x88AB;&#x6E05;&#x9664;&#xFF0C;&#x5E76;&#x51C6;&#x5907;&#x5C55;&#x73B0;&#x51FA;&#x65B0;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#x3002;</p>
<h3 id="&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x6D88;&#x606F;"><a href="#&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x6D88;&#x606F;" class="headerlink" title="&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x6D88;&#x606F;"></a>&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x6D88;&#x606F;</h3><p>&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#x3002;&#x4E00;&#x6761;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#x8BA9;&#x7528;&#x6237;&#x4E86;&#x89E3;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E00;&#x4E9B;&#x4E00;&#x822C;&#x72B6;&#x6001;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x4E2D;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x6709;&#x5173;&#x5F53;&#x524D;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x7684;&#x6587;&#x672C;&#x7F16;&#x7801;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x8981;&#x5C06;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#x6DFB;&#x52A0;&#x5230;&#x72B6;&#x6001;&#x680F;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;QLabel&#x5BF9;&#x8C61;&#x6765;&#x4FDD;&#x5B58;&#x6D88;&#x606F;&#x3002;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x5C06;&#x6807;&#x7B7E;&#x6DFB;&#x52A0;&#x5230;&#x72B6;&#x6001;&#x680F;.addPermanentWidget()&#x3002;&#x6B64;&#x65B9;&#x6CD5;&#x5C06;&#x7ED9;&#x5B9A;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#x6C38;&#x4E45;&#x6DFB;&#x52A0;&#x5230;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x680F;&#x3002;&#x5C0F;&#x90E8;&#x4EF6;&#x7684;&#x7236;&#x7EA7;&#x8BBE;&#x7F6E;&#x4E3A;&#x72B6;&#x6001;&#x680F;&#x3002;</p>
<p>.addPermanentWidget() &#x91C7;&#x7528;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;</p>
<ol>
<li><strong>widget</strong>&#x4FDD;&#x5B58;&#x8981;&#x6DFB;&#x52A0;&#x5230;&#x72B6;&#x6001;&#x680F;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4E2A;&#x89D2;&#x8272;&#x7684;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x5C0F;&#x90E8;&#x4EF6;QLabel&#xFF0C;QToolButton&#x4EE5;&#x53CA;QProgressBar&#x3002;</li>
<li><strong>stretch</strong>&#x7528;&#x4E8E;&#x968F;&#x7740;&#x72B6;&#x6001;&#x680F;&#x7684;&#x589E;&#x957F;&#x548C;&#x6536;&#x7F29;&#x8BA1;&#x7B97;&#x5C0F;&#x90E8;&#x4EF6;&#x7684;&#x5408;&#x9002;&#x5927;&#x5C0F;&#x3002;&#x5B83;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5C0F;&#x90E8;&#x4EF6;&#x5C06;&#x5360;&#x7528;&#x6700;&#x5C11;&#x7684;&#x7A7A;&#x95F4;&#x3002;</li>
</ol>
<p>&#x8BF7;&#x8BB0;&#x4F4F;&#xFF0C;&#x6C38;&#x4E45;&#x5C0F;&#x90E8;&#x4EF6;&#x4E0D;&#x4F1A;&#x88AB;&#x4E34;&#x65F6;&#x6D88;&#x606F;&#x906E;&#x853D;&#x6216;&#x66FF;&#x6362;&#x3002;.addPermanentWidget()&#x5728;&#x72B6;&#x6001;&#x680F;&#x7684;&#x53F3;&#x4FA7;&#x5B9A;&#x4F4D;&#x5C0F;&#x90E8;&#x4EF6;&#x3002;</p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x60A8;.addPermanentWidget()&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5411;&#x7528;&#x6237;&#x663E;&#x793A;&#x8FDB;&#x5EA6;&#x6761;&#x4EE5;&#x76D1;&#x63A7;&#x7ED9;&#x5B9A;&#x64CD;&#x4F5C;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x3002;&#x60A8;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x63D0;&#x4F9B;&#x6309;&#x94AE;&#xFF0C;&#x4EE5;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x5728;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x4E0A;&#x66F4;&#x6539;&#x6587;&#x4EF6;&#x7F16;&#x7801;&#x7B49;&#x5C5E;&#x6027;&#x3002;</p>
</blockquote>
<p>&#x5F53;&#x60A8;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x7C7B;&#x578B;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#x65F6;&#xFF0C;&#x5C3D;&#x91CF;&#x575A;&#x6301;&#x4F7F;&#x7528;&#x6700;&#x5E38;&#x7528;&#x7684;&#x5C0F;&#x90E8;&#x4EF6;&#x6765;&#x6EE1;&#x8DB3;&#x60A8;&#x6B63;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7C7B;&#x578B;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x60A8;&#x7684;&#x7528;&#x6237;&#x5C31;&#x4F1A;&#x6709;&#x5BBE;&#x81F3;&#x5982;&#x5F52;&#x7684;&#x611F;&#x89C9;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x60A8;&#x60F3;&#x5C06;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8F6C;&#x6362;&#x4E3A;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x60A8;&#x60F3;&#x5411;&#x72B6;&#x6001;&#x680F;&#x6DFB;&#x52A0;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x4EE5;&#x663E;&#x793A;&#x6709;&#x5173;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x5B57;&#x6570;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x4E3A;&#x6B64;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x6CD5;.getWordCount()&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;.addPermanentWidget()&#x548C;QLabel&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def getWordCount(self):</span><br><span class="line">        # Logic for computing the word count goes here...</span><br><span class="line">        return 42</span><br></pre></td></tr></table></figure>

<p>&#x8BE5;&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x4E86;&#x8BA1;&#x7B97;&#x5F53;&#x524D;&#x6253;&#x5F00;&#x6587;&#x6863;&#x4E2D;&#x5B57;&#x6570;&#x7684;&#x903B;&#x8F91;&#x3002;&#x73B0;&#x5728;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5C06;&#x6B64;&#x4FE1;&#x606F;&#x663E;&#x793A;&#x4E3A;&#x6C38;&#x4E45;&#x6D88;&#x606F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createStatusBar(self):</span><br><span class="line">        self.statusbar = self.statusBar()</span><br><span class="line">        # Adding a temporary message</span><br><span class="line">        self.statusbar.showMessage(&quot;Ready&quot;, 3000)</span><br><span class="line">        # Adding a permanent message</span><br><span class="line">        self.wcLabel = QLabel(f&quot;{self.getWordCount()} Words&quot;)</span><br><span class="line">        self.statusbar.addPermanentWidget(self.wcLabel)</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6700;&#x540E;&#x4E24;&#x884C;&#x4E2D;&#xFF0C;&#x60A8;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;QLabel&#x5BF9;&#x8C61; ( wcLabel) &#x6765;&#x4FDD;&#x5B58;&#x6709;&#x5173;&#x5B57;&#x6570;&#x7684;&#x6D88;&#x606F;&#x3002;&#x8981;&#x521B;&#x5EFA;&#x6D88;&#x606F;&#xFF0C;&#x8BF7;&#x4F7F;&#x7528;f-string&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x63D2;&#x5165;&#x5BF9; &#x7684;&#x8C03;&#x7528;.getWordCount()&#x4EE5;&#x83B7;&#x53D6;&#x5B57;&#x6570;&#x4FE1;&#x606F;&#x3002;&#x7136;&#x540E;&#x4F7F;&#x7528; &#x5C06;&#x6807;&#x7B7E;&#x6DFB;&#x52A0;&#x5230;&#x72B6;&#x6001;&#x680F;.addPermanentWidget()&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x60A8;&#x5C06;QLabel&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x4E3A;&#x5B9E;&#x4F8B;&#x5C5E;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x6839;&#x636E;&#x7528;&#x6237;&#x5BF9;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x6240;&#x505A;&#x7684;&#x66F4;&#x6539;&#x6765;&#x66F4;&#x65B0;&#x5B57;&#x6570;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x4F7F;&#x7528;&#x6B64;&#x66F4;&#x65B0;&#x8FD0;&#x884C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x60A8;&#x5C06;&#x5728;&#x72B6;&#x6001;&#x680F;&#x7684;&#x53F3;&#x4FA7;&#x770B;&#x5230;&#x5B57;&#x6570;&#x7EDF;&#x8BA1;&#x6D88;&#x606F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/3f7812d3fabb5cc930dd76833e1b7492390dd2cd24afacbd0ff7fa87b9cc5123" alt="&#x5E26;&#x6709;&#x6C38;&#x4E45;&#x5C0F;&#x90E8;&#x4EF6;&#x7684; PyQt &#x72B6;&#x6001;&#x680F;"></p>
<p>&#x72B6;&#x6001;&#x680F;&#x4F1A;&#x663E;&#x793A;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x901A;&#x77E5;&#x7528;&#x6237;&#x5047;&#x8BBE;&#x5F53;&#x524D;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5B57;&#x6570;&#x3002;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E2D;&#x5411;&#x7528;&#x6237;&#x663E;&#x793A;&#x6C38;&#x4E45;&#x4FE1;&#x606F;&#x6216;&#x5176;&#x4ED6;&#x9009;&#x9879;&#x7684;&#x80FD;&#x529B;&#x975E;&#x5E38;&#x6709;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x60A8;&#x6781;&#x5927;&#x5730;&#x6539;&#x5584;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</p>
<h2 id="&#x5411;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5E2E;&#x52A9;&#x63D0;&#x793A;"><a href="#&#x5411;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5E2E;&#x52A9;&#x63D0;&#x793A;" class="headerlink" title="&#x5411;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5E2E;&#x52A9;&#x63D0;&#x793A;"></a>&#x5411;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5E2E;&#x52A9;&#x63D0;&#x793A;</h2><p>&#x5728;&#x521B;&#x5EFA; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x65F6;&#xFF0C;&#x5411;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x6709;&#x5173;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x754C;&#x9762;&#x7279;&#x5B9A;&#x529F;&#x80FD;&#x7684;<strong>&#x5E2E;&#x52A9;&#x63D0;&#x793A;</strong>&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#x662F;&#x77ED;&#x6D88;&#x606F;&#xFF0C;&#x53EF;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x6709;&#x5173;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x7684;&#x67D0;&#x4E9B;&#x9009;&#x9879;&#x7684;&#x5FEB;&#x901F;&#x6307;&#x5357;&#x3002;</p>
<p>PyQt &#x64CD;&#x4F5C;&#x5141;&#x8BB8;&#x60A8;&#x5B9A;&#x4E49;&#x4EE5;&#x4E0B;&#x7C7B;&#x578B;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#xFF1A;</p>
<ul>
<li><strong>&#x72B6;&#x6001;&#x63D0;&#x793A;</strong>&#x662F;&#x5F53;&#x7528;&#x6237;&#x5C06;&#x9F20;&#x6807;&#x6307;&#x9488;&#x60AC;&#x505C;&#x5728;&#x83DC;&#x5355;&#x9009;&#x9879;&#x6216;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x4E0A;&#x65F6;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x663E;&#x793A;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x72B6;&#x6001;&#x63D0;&#x793A;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
<li><strong>&#x5DE5;&#x5177;&#x63D0;&#x793A;</strong>&#x662F;&#x5F53;&#x7528;&#x6237;&#x5C06;&#x9F20;&#x6807;&#x6307;&#x9488;&#x60AC;&#x505C;&#x5728;&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x6216;&#x5C0F;&#x90E8;&#x4EF6;&#x4E0A;&#x65F6;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x663E;&#x793A;&#x4E3A;&#x6D6E;&#x52A8;&#x6D88;&#x606F;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5DE5;&#x5177;&#x63D0;&#x793A;&#x5305;&#x542B;&#x6807;&#x8BC6;&#x624B;&#x5934;&#x64CD;&#x4F5C;&#x7684;&#x6587;&#x672C;&#x3002;</li>
</ul>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A; PyQt &#x8FD8;&#x63D0;&#x4F9B;&#x4E86;What&#x2019;s This&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x5C0F;&#x90E8;&#x4EF6;&#x548C;&#x52A8;&#x4F5C;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x663E;&#x793A;&#x5BF9;&#x5C0F;&#x90E8;&#x4EF6;&#x6216;&#x52A8;&#x4F5C;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#x7684;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x63CF;&#x8FF0;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x8BE5;&#x4E3B;&#x9898;&#x8D85;&#x51FA;&#x4E86;&#x672C;&#x6559;&#x7A0B;&#x7684;&#x8303;&#x56F4;&#x3002;</p>
</blockquote>
<p>&#x8981;&#x4E86;&#x89E3;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x72B6;&#x6001;&#x63D0;&#x793A;&#x548C;&#x5DE5;&#x5177;&#x63D0;&#x793A;&#x3002;&#x8F6C;&#x5230;._createActions()&#x5E76;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x884C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;class Window(QMainWindow):</span><br><span class="line">    # Snip...</span><br><span class="line">    def _createActions(self):</span><br><span class="line">        # File actions</span><br><span class="line">        # Snip...</span><br><span class="line">        self.saveAction.setShortcut(&quot;Ctrl+S&quot;)</span><br><span class="line">        # Adding help tips</span><br><span class="line">        newTip = &quot;Create a new file&quot;</span><br><span class="line">        self.newAction.setStatusTip(newTip)</span><br><span class="line">        self.newAction.setToolTip(newTip)</span><br><span class="line">        # Edit actions</span><br><span class="line">        self.copyAction = QAction(QIcon(&quot;:edit-copy.svg&quot;), &quot;&amp;Copy&quot;, self)</span><br><span class="line">        # Snip...</span><br></pre></td></tr></table></figure>

<p>&#x4E09;&#x4E2A;&#x7A81;&#x51FA;&#x663E;&#x793A;&#x7684;&#x884C;&#x5C06;&#x6D88;&#x606F;&#x8BBE;&#x7F6E;&#x201D;Create a new file&#x201D;&#x4E3A;&#x201C;_&#x65B0;&#x5EFA;&#x201D;_&#x9009;&#x9879;&#x7684;&#x72B6;&#x6001;&#x548C;&#x5DE5;&#x5177;&#x63D0;&#x793A;&#x3002;&#x5982;&#x679C;&#x60A8;&#x73B0;&#x5728;&#x8FD0;&#x884C;&#x8BE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x60A8;&#x5C06;&#x770B;&#x5230;_New_&#x9009;&#x9879;&#x5411;&#x7528;&#x6237;&#x663E;&#x793A;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x77ED;&#x4F46;&#x63CF;&#x8FF0;&#x6027;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/6e40773826cf9fc554fb5c306ec7a6f78e1adfbd7b96733aaea283d5ff33109a" alt></p>
<p>&#x5F53;&#x60A8;&#x5355;&#x51FB;_File_&#x83DC;&#x5355;&#x5E76;&#x5C06;&#x9F20;&#x6807;&#x6307;&#x9488;&#x653E;&#x5728;_New &#x4E0A;&#x65F6;_&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x72B6;&#x6001;&#x680F;&#x5DE6;&#x4FA7;&#x663E;&#x793A;&#x7684;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#x6D88;&#x606F;&#x3002;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x5C06;&#x9F20;&#x6807;&#x6307;&#x9488;&#x79FB;&#x5230;&#x201C;_&#x65B0;&#x5EFA;&#x201D;_&#x5DE5;&#x5177;&#x680F;&#x6309;&#x94AE;&#x4E0A;&#xFF0C;&#x5219;&#x60A8;&#x53EF;&#x4EE5;&#x5728;&#x72B6;&#x6001;&#x680F;&#x4E0A;&#x770B;&#x5230;&#x6D88;&#x606F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x9F20;&#x6807;&#x6307;&#x9488;&#x65C1;&#x8FB9;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x6D6E;&#x52A8;&#x6846;&#x3002;</p>
<p>&#x901A;&#x5E38;&#xFF0C;&#x5411; Python &#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;&#x6DFB;&#x52A0;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;&#x5B83;&#x5C06;&#x4F7F;&#x60A8;&#x7684; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x66F4;&#x6613;&#x4E8E;&#x7528;&#x6237;&#x5BFC;&#x822A;&#x548C;&#x5B66;&#x4E60;&#x3002;&#x4F5C;&#x4E3A;&#x6700;&#x540E;&#x7684;&#x7EC3;&#x4E60;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5411;&#x793A;&#x4F8B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5176;&#x4F59;&#x64CD;&#x4F5C;&#x6DFB;&#x52A0;&#x5E2E;&#x52A9;&#x63D0;&#x793A;&#xFF0C;&#x5E76;&#x67E5;&#x770B;&#x5B8C;&#x6210;&#x540E;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<h2 id="&#x7ED3;&#x8BBA;"><a href="#&#x7ED3;&#x8BBA;" class="headerlink" title="&#x7ED3;&#x8BBA;"></a>&#x7ED3;&#x8BBA;</h2><p>&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#x662F;&#x5927;&#x591A;&#x6570;GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5E38;&#x89C1;&#x4E14;&#x91CD;&#x8981;&#x7684;&#x56FE;&#x5F62;&#x7EC4;&#x4EF6;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x4E3A;&#x60A8;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x5FEB;&#x901F;&#x8BBF;&#x95EE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9009;&#x9879;&#x548C;&#x529F;&#x80FD;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x4EEC;&#x8FD8;&#x4F7F;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x770B;&#x8D77;&#x6765;&#x7CBE;&#x7F8E;&#x548C;&#x4E13;&#x4E1A;&#xFF0C;&#x5E76;&#x4E3A;&#x60A8;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x51FA;&#x8272;&#x7684;&#x4F53;&#x9A8C;&#x3002;</p>
<p><strong>&#x5728;&#x672C;&#x6559;&#x7A0B;&#x4E2D;&#xFF0C;&#x60A8;&#x5B66;&#x4E60;&#x4E86;&#x5982;&#x4F55;</strong>&#xFF1A;</p>
<ul>
<li>&#x4EE5;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x521B;&#x5EFA;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;</li>
<li>&#x4F7F;&#x7528; PyQt&#x64CD;&#x4F5C;&#x586B;&#x5145;&#x83DC;&#x5355;&#x548C;&#x5DE5;&#x5177;&#x680F;</li>
<li>&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x680F;&#x63D0;&#x4F9B;&#x72B6;&#x6001;&#x4FE1;&#x606F;</li>
</ul>
<p>&#x5728;&#x6B64;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x60A8;&#x5B66;&#x4E60;&#x4E86;&#x4E00;&#x4E9B;&#x5728; GUI &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x6DFB;&#x52A0;&#x548C;&#x4F7F;&#x7528;&#x83DC;&#x5355;&#x3001;&#x5DE5;&#x5177;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#x65F6;&#x503C;&#x5F97;&#x8003;&#x8651;&#x7684;&#x6700;&#x4F73;&#x7F16;&#x7A0B;&#x5B9E;&#x8DF5;&#x3002;</p>
<p><strong><a href="/external_links/e80d1f893820504c6255709bde6d2786.html" target="blank" rel="noopener">&#x70B9;&#x51FB;&#x5173;&#x6CE8;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x4E86;&#x89E3;&#x534E;&#x4E3A;&#x4E91;&#x65B0;&#x9C9C;&#x6280;&#x672F;~</a></strong></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/11c2a3d2560a1d51f3c829c43b42daaf.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7001116261446844429.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7001116261446844429.html" itemprop="url">postman使用教程 1、postman是什么 2、pos</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-27T22:29:26+08:00">
                2021-08-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="1&#x3001;postman&#x662F;&#x4EC0;&#x4E48;"><a href="#1&#x3001;postman&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="1&#x3001;postman&#x662F;&#x4EC0;&#x4E48;"></a>1&#x3001;postman&#x662F;&#x4EC0;&#x4E48;</h1><p>postman&#x662F;&#x5E38;&#x89C1;&#x7684;&#x63A5;&#x53E3;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;http&#x63A5;&#x53E3;&#x8C03;&#x8BD5;&#xFF0C;&#x5982;&#x4F55;&#x5B89;&#x88C5;&#xFF0C;&#x76F4;&#x63A5;&#x767E;&#x5EA6;&#x5373;&#x53EF;&#x5B89;&#x88C5;</p>
<h1 id="2&#x3001;postman&#x6709;&#x54EA;&#x4E9B;&#x529F;&#x80FD;"><a href="#2&#x3001;postman&#x6709;&#x54EA;&#x4E9B;&#x529F;&#x80FD;" class="headerlink" title="2&#x3001;postman&#x6709;&#x54EA;&#x4E9B;&#x529F;&#x80FD;"></a>2&#x3001;postman&#x6709;&#x54EA;&#x4E9B;&#x529F;&#x80FD;</h1><ul>
<li>&#x8C03;&#x8BD5;http&#x63A5;&#x53E3;</li>
<li>&#x5BFC;&#x51FA;&#x4E3A;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x4EE3;&#x7801;</li>
<li>&#x521B;&#x5EFA;&#x96C6;&#x5408;&#x5E76;&#x4FDD;&#x5B58;&#x76F8;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;</li>
<li>postman&#x6293;&#x5305;&#xFF0C;&#x5E76;&#x4EE3;&#x7406;&#x53D1;&#x9001;&#x8BF7;&#x6C42;</li>
<li>postman&#x5F00;&#x53D1;&#x811A;&#x672C;</li>
<li>postman&#x8BBE;&#x8BA1;&#x81EA;&#x52A8;&#x5316;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</li>
</ul>
<h1 id="3&#x3001;postman&#x548C;http&#x63A5;&#x53E3;&#x7ED3;&#x5408;"><a href="#3&#x3001;postman&#x548C;http&#x63A5;&#x53E3;&#x7ED3;&#x5408;" class="headerlink" title="3&#x3001;postman&#x548C;http&#x63A5;&#x53E3;&#x7ED3;&#x5408;"></a>3&#x3001;postman&#x548C;http&#x63A5;&#x53E3;&#x7ED3;&#x5408;</h1><p>postman&#x4E3B;&#x8981;&#x7528;&#x9014;&#x662F;&#x53D1;&#x9001;http&#x8BF7;&#x6C42;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x6765;&#x4ECB;&#x7ECD;&#x4E0B;&#x4EC0;&#x4E48;&#x662F;http&#xFF0C;http&#x62A5;&#x6587;&#x7ED3;&#x6784;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;</p>
<h2 id="3-1&#x3001;&#x4EC0;&#x4E48;&#x662F;http"><a href="#3-1&#x3001;&#x4EC0;&#x4E48;&#x662F;http" class="headerlink" title="3.1&#x3001;&#x4EC0;&#x4E48;&#x662F;http"></a>3.1&#x3001;&#x4EC0;&#x4E48;&#x662F;http</h2><p>http(Hyper Text Transfer Protocol&#xFF0C;HTTP)&#x662F;&#x4E00;&#x79CD;&#x534F;&#x8BAE;&#xFF0C;&#x53EB;&#x505A;&#x8D85;&#x6587;&#x672C;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF0C;&#x5C5E;&#x4E8E;c/s&#x6216;&#x8005;b/s&#x67B6;&#x6784;&#xFF0C;&#x5373;&#x5BA2;&#x6237;&#x7AEF;&#x53BB;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x62FF;&#x5230;&#x6570;&#x636E;&#x540E;&#x8FDB;&#x884C;&#x5C55;&#x793A;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/42119b31dfd7aa36c186c315b87cc39478e61580cf8ecdceaf21ea4561648ff9" alt="image.png"><br>tcp/ip 4&#x5C42;&#x6A21;&#x578B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/660fdea7cf27909b2db2498754e183eb29ce64884f0315b65311f7e41c1b0732" alt="image.png"></p>
<p>&#x90A3;&#x4E48;http&#x548C;https&#x7684;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF0C;https&#x662F;&#x5728;http&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x52A0;&#x4E86;ssl&#x52A0;&#x5BC6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F20;&#x8F93;&#x7684;http&#x62A5;&#x6587;&#x90FD;&#x662F;&#x7ECF;&#x8FC7;ssl&#x52A0;&#x5BC6;&#x7684;</p>
<p>*&#x5E38;&#x89C1;&#x9762;&#x8BD5;&#x9898;: tcp/ip 4&#x5C42;&#x6A21;&#x578B;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x4EA7;&#x54C1;&#x6709;&#x54EA;&#x4E9B;&#xFF1F;</p>
<h2 id="3-2&#x3001;http&#x62A5;&#x6587;&#x5185;&#x5BB9;"><a href="#3-2&#x3001;http&#x62A5;&#x6587;&#x5185;&#x5BB9;" class="headerlink" title="3.2&#x3001;http&#x62A5;&#x6587;&#x5185;&#x5BB9;"></a>3.2&#x3001;http&#x62A5;&#x6587;&#x5185;&#x5BB9;</h2><p>HTTP&#x62A5;&#x6587;&#x7ED3;&#x6784;&#x5185;&#x5BB9;</p>
<table>
<thead>
<tr>
<th>&#x5E8F;&#x53F7;</th>
<th>&#x62A5;&#x6587;&#x5185;&#x5BB9;</th>
<th>&#x4F5C;&#x7528;</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>url(&#x7EDF;&#x4E00;&#x8D44;&#x6E90;&#x5B9A;&#x4F4D;&#x7B26;)</td>
<td>&#x544A;&#x8BC9;&#x6D4F;&#x89C8;&#x5668;&#x8D44;&#x6E90;&#x5728;&#x54EA;&#xFF0C;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5386;&#x53F2;&#x6E0A;&#x6E90;&#xFF0C;&#x6700;&#x5F00;&#x59CB;http&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5404;&#x4E2A;&#x7F8E;&#x56FD;&#x6B27;&#x6D32;&#x7684;&#x5B9E;&#x9A8C;&#x5BA4;&#x5B58;&#x50A8;&#x6587;&#x6863;&#xFF0C;<a href="/external_links/5e32951b484402a37f6da695530d2eb0.html" target="blank" rel="noopener">xxx.com/meiguo.html</a>&#x73B0;&#x5728;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x5730;&#x5740;, &#x6BD4;&#x5982;<a href="/external_links/1627c11af2c51d82290a03a098eef284.html" target="blank" rel="noopener">www.taobao.com/add/user&#xFF0C;&#x8FD9;&#x662F;&#x2026;</a></td>
</tr>
<tr>
<td>2</td>
<td>&#x65B9;&#x6CD5;(method)</td>
<td>GET,POST,PUT,DELETE,OPTIONS&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x8FD8;&#x662F;GET&#x548C;POST</td>
</tr>
<tr>
<td>3</td>
<td>params</td>
<td>&#x53EA;&#x8981;get&#x8BF7;&#x6C42;&#x6709;&#xFF0C;get&#x8BF7;&#x6C42;&#x53BB;&#x83B7;&#x53D6;&#x8D44;&#x6E90;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BD4;&#x5982;&#x53BB;&#x767E;&#x5EA6;&#x641C;&#x7D22;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8F93;&#x5165;1&#x4E2A;&#x53C2;&#x6570;&#x67E5;&#x8BE2;</td>
</tr>
<tr>
<td>4</td>
<td>data</td>
<td>&#x53EA;&#x6709;post&#x8BF7;&#x6C42;&#x6709;&#xFF0C;post&#x53BB;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x628A;&#x6570;&#x636E;&#x653E;&#x5230;data&#x91CC;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x7C7B;&#x578B;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x62C6;&#x5F00;&#x8BB2;&#x89E3;</td>
</tr>
<tr>
<td>5</td>
<td>header</td>
<td>http&#x5934;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x91CC;&#x9762;&#x5305;&#x542B;&#x7684;&#x6570;&#x636E;&#x5F88;&#x591A;&#xFF0C;&#x62C6;&#x5206;&#x8BB2;&#x89E3;</td>
</tr>
</tbody></table>
<p>HTTP post&#x63A5;&#x53E3;data&#x7ED3;&#x6784;&#x5185;&#x5BB9;</p>
<table>
<thead>
<tr>
<th>&#x5E8F;&#x53F7;</th>
<th>&#x5185;&#x5BB9;</th>
<th>&#x4F5C;&#x7528;</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>json&#x6570;&#x636E;</td>
<td>&#x901A;&#x8FC7;json&#x628A;&#x6570;&#x636E;&#x4F20;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;</td>
</tr>
<tr>
<td>2</td>
<td>Form-data</td>
<td>&#x901A;&#x8FC7;form&#x8868;&#x5355;&#x628A;&#x6570;&#x636E;&#x4F20;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;</td>
</tr>
<tr>
<td>3</td>
<td>mutilpart-binary</td>
<td>&#x901A;&#x8FC7;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4F20;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;</td>
</tr>
</tbody></table>
<p>HTTP header&#x5185;&#x5BB9;&#xFF1A;&#x901A;&#x8FC7;&#x767E;&#x5EA6;&#x6293;&#x5305;&#x5206;&#x6790;</p>
<table>
<thead>
<tr>
<th>&#x5E8F;&#x53F7;</th>
<th>&#x5185;&#x5BB9;</th>
<th>&#x4F5C;&#x7528;</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>cookies</td>
<td>&#x7528;&#x6237;&#x6743;&#x9650;&#x8BA4;&#x8BC1;&#xFF0C;&#x901A;&#x8FC7;cookies&#x6765;&#x8BC1;&#x660E;&#x4F60;&#x662F;&#x4F60;&#xFF0C;&#x6BD4;&#x5982;&#x8BC1;&#x660E;&#x4F60;&#x662F;&#x4F60;&#x7238;&#x7684;&#x513F;&#x5B50;cookies:&#x201D;father=ligang&#x201D;</td>
</tr>
<tr>
<td>2</td>
<td>connection</td>
<td>Connection:keep-alive&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x540E;&#x662F;&#x5426;&#x65AD;&#x5F00;tcp&#x8FDE;&#x63A5;&#xFF0C;keep-alive&#x662F;&#x4E0D;&#x65AD;&#x5F00;&#xFF0C;close&#x4EE3;&#x8868;&#x65AD;&#x5F00;&#x8BF7;&#x6C42;&#xFF0C;&#x83B7;&#x53D6;&#x5230;&#x8D44;&#x6E90;&#x540E;&#x7ACB;&#x9A6C;&#x65AD;&#x5F00;&#x8BF7;&#x6C42;</td>
</tr>
<tr>
<td>3</td>
<td>host</td>
<td>&#x4E00;&#x822C;&#x5C31;&#x662F;&#x57DF;&#x540D;&#xFF0C;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x90E8;&#x7F72;&#x4E86;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x5C24;&#x5176;&#x5728;&#x4EE5;php&#x8BED;&#x8A00;&#x5F00;&#x53D1;&#x7684;web&#x670D;&#x52A1;&#xFF0C;host&#x5982;&#x679C;&#x4E0D;&#x5E26;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5F02;&#x5E38;</td>
</tr>
<tr>
<td>4</td>
<td>User-Agent</td>
<td>&#x7528;&#x6237;&#x4EE3;&#x7406;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x4F60;&#x662F;&#x722C;&#x866B;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD8;&#x662F;&#x6B63;&#x5E38;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD8;&#x662F;&#x79FB;&#x52A8;&#x7AEF;&#x8BF7;&#x6C42;</td>
</tr>
<tr>
<td>5</td>
<td>content-type</td>
<td>&#x4E3B;&#x8981;&#x662F;&#x5728;post&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x662F;json&#x6570;&#x636E;&#xFF0C;content-type&#x5FC5;&#x987B;&#x662F;application/json&#xFF0C;&#x5982;&#x679C;&#x662F;form-data&#x5FC5;&#x987B;&#x662F;mutilpart-formdata&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x5FC5;&#x987B;&#x662F;mutilpart-binary</td>
</tr>
</tbody></table>
<h2 id="3-3&#x3001;&#x4F7F;&#x7528;postman&#x5B9E;&#x6218;&#x8C03;&#x8BD5;"><a href="#3-3&#x3001;&#x4F7F;&#x7528;postman&#x5B9E;&#x6218;&#x8C03;&#x8BD5;" class="headerlink" title="3.3&#x3001;&#x4F7F;&#x7528;postman&#x5B9E;&#x6218;&#x8C03;&#x8BD5;"></a>3.3&#x3001;&#x4F7F;&#x7528;postman&#x5B9E;&#x6218;&#x8C03;&#x8BD5;</h2><p>3.3.1&#x3001;get&#x63A5;&#x53E3;&#x8C03;&#x8BD5;, &#x67E5;&#x8BE2;&#x5168;&#x56FD;&#x5404;&#x5730;&#x7684;&#x5929;&#x6C14;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;&#x63A5;&#x53E3;&#x5730;&#x5740;: http://ip:5000/simpleWeather/get</span><br><span class="line">&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;: GET</span><br></pre></td></tr></table></figure>

<p>&#x200B; &#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x8BF4;&#x660E;:</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th>&#x662F;&#x5426;&#x5FC5;&#x586B;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody><tr>
<td>city</td>
<td>&#x662F;</td>
<td>String</td>
<td>&#x57CE;&#x5E02;&#x540D;&#x79F0;&#xFF0C;&#x67E5;&#x8BE2;&#x8BE5;&#x57CE;&#x5E02;&#x5929;&#x6C14;</td>
</tr>
</tbody></table>
<p>&#x200B; &#x901A;&#x8FC7;postman&#x914D;&#x7F6E;&#x8BF7;&#x6C42;:</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/124e8d4fb8c7df02d7ac9767c65c35f893a6cf276894bdeb68218dd0d9ca6eb4" alt="image.png"></p>
<p>&#x200B; &#x56FE;&#x4E2D;1&#x7684;&#x4F4D;&#x7F6E;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7C7B;&#x578B;&#x662F;GET&#x8FD8;&#x662F;POST&#xFF0C;&#x56FE;&#x4E2D;2&#x7684;&#x4F4D;&#x7F6E;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7684;url&#x6216;&#x8005;&#x53EB;&#x63A5;&#x53E3;&#x8DEF;&#x5F84;&#xFF0C;&#x56FE;&#x4E2D;3&#x7684;&#x4F4D;&#x7F6E;&#x8868;&#x793A;GET&#x8BF7;&#x6C42;&#x53C2;&#x6570;params&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x4F20;&#x9012;1&#x4E2A;&#x53C2;&#x6570;city</p>
<p>3.3.2&#x3001;post&#x63A5;&#x53E3;&#x901A;&#x8FC7;application/json&#x53D1;&#x9001;&#x6570;&#x636E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;&#x63A5;&#x53E3;&#x5730;&#x5740;: http://ip:5000/add/user</span><br><span class="line">&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;: POST</span><br><span class="line">&#x6570;&#x636E;&#x7C7B;&#x578B;: application/json</span><br></pre></td></tr></table></figure>

<p>&#x200B; &#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x8BF4;&#x660E;</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th>&#x662F;&#x5426;&#x5FC5;&#x586B;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody><tr>
<td>name</td>
<td>&#x662F;</td>
<td>String</td>
<td>&#x540D;&#x5B57;</td>
</tr>
<tr>
<td>age</td>
<td>&#x662F;</td>
<td>int</td>
<td>&#x5E74;&#x9F84;</td>
</tr>
<tr>
<td>status</td>
<td>&#x662F;</td>
<td>String</td>
<td>&#x611F;&#x60C5;&#x72B6;&#x6001;&#xFF0C;&#x5355;&#x8EAB;&#xFF0C;&#x975E;&#x5355;&#x8EAB;</td>
</tr>
<tr>
<td>contact</td>
<td>&#x662F;</td>
<td>String</td>
<td>&#x5FAE;&#x4FE1;&#x53F7;&#x6216;&#x8005;&#x624B;&#x673A;&#x53F7;</td>
</tr>
</tbody></table>
<p>&#x200B; &#x901A;&#x8FC7;postman&#x6784;&#x9020;&#x53D1;&#x9001;&#x8BF7;&#x6C42;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a649ce0e7c6280b306c7ffcdefef3567c1f7f37f33c672af9e3b288f6fbea276" alt="image.png"></p>
<p>&#x200B; 1.&#x8BF7;&#x6C42;&#x4E3A;POST&#x8BF7;&#x6C42;</p>
<p>&#x200B; 2.&#x914D;&#x7F6E;url</p>
<p>&#x200B; 3.&#x53C2;&#x6570;&#x5728;body&#x91CC;</p>
<p>&#x200B; 4.&#x7C7B;&#x578B;&#x9009;&#x62E9;JSON</p>
<p>&#x200B; 5.&#x8BBE;&#x7F6E;&#x7684;json&#x6570;&#x636E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;http://ip:5000/get/user&#x83B7;&#x53D6;&#x5230;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;</span><br></pre></td></tr></table></figure>

<p>3.3.3&#x3001;post&#x63A5;&#x53E3;&#x901A;&#x8FC7;form-data&#x53D1;&#x9001;&#x6570;&#x636E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">makefile&#x590D;&#x5236;&#x4EE3;&#x7801;&#x8BF7;&#x6C42;&#x5730;&#x5740;: http://ip:5000/mobile/serach</span><br><span class="line">&#x8BF7;&#x6C42;&#x7C7B;&#x578B;: POST</span><br><span class="line">&#x6570;&#x636E;&#x7C7B;&#x578B;: form-data</span><br></pre></td></tr></table></figure>

<p>&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x8BF4;&#x660E;</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th>&#x662F;&#x5426;&#x5FC5;&#x586B;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody><tr>
<td>mobile</td>
<td>&#x662F;</td>
<td>String</td>
<td>&#x624B;&#x673A;&#x53F7;</td>
</tr>
</tbody></table>
<p>&#x4F7F;&#x7528;postman&#x6784;&#x9020;form-data&#x7684;&#x8BF7;&#x6C42;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/19dda30d3de2b2649d6db8b3c5a64eeda45d787c18fcb88faa2930ce1b57222d" alt="image.png"></p>
<p>&#x200B; 1.&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x7C7B;&#x578B;&#x4E3A;POST</p>
<p>&#x200B; 2.&#x8BBE;&#x7F6E;&#x7684;&#x63A5;&#x53E3;&#x5730;&#x5740;</p>
<p>&#x200B; 3.&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8BBE;&#x7F6E;&#x4E3A;form-data&#xFF0C;&#x4F20;&#x9012;&#x7684;&#x53C2;&#x6570;&#x6709;mobile&#x624B;&#x673A;&#x53F7;</p>
<p>3.3.4&#x3001;post&#x63A5;&#x53E3;&#x901A;&#x8FC7;form-data&#x4E0A;&#x4F20;&#x6587;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">makefile&#x590D;&#x5236;&#x4EE3;&#x7801;&#x8BF7;&#x6C42;&#x5730;&#x5740;: http://ip:5000/upload</span><br><span class="line">&#x8BF7;&#x6C42;&#x7C7B;&#x578B;: POST</span><br><span class="line">&#x6570;&#x636E;&#x7C7B;&#x578B;: form-data</span><br></pre></td></tr></table></figure>

<p>&#x200B; &#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x8BF4;&#x660E;</p>
<table>
<thead>
<tr>
<th>&#x53C2;&#x6570;&#x540D;&#x79F0;</th>
<th>&#x662F;&#x5426;&#x5FC5;&#x586B;</th>
<th>&#x7C7B;&#x578B;</th>
<th>&#x8BF4;&#x660E;</th>
</tr>
</thead>
<tbody><tr>
<td>image</td>
<td>&#x662F;</td>
<td>&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;</td>
<td>&#x9700;&#x8981;&#x4E0A;&#x4F20;&#x7684;&#x6587;&#x4EF6;</td>
</tr>
</tbody></table>
<p>&#x200B; &#x4F7F;&#x7528;postman&#x6784;&#x9020;&#x8BF7;&#x6C42;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c70c37284f1433ed8011cbf9afcedf95fbd23fd72f3485f21fc062b0a02f2a69" alt="image.png"></p>
<p>&#x200B; 1.&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;&#x662F;POST</p>
<p>&#x200B; 2.&#x8BBE;&#x7F6E;&#x7684;&#x63A5;&#x53E3;&#x4E3A;/upload</p>
<p>&#x200B; 3.&#x8BBE;&#x7F6E;image&#x53C2;&#x6570;&#x4E3A;benchi.jpeg&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;</p>
<p>&#x4E0A;&#x4F20;&#x5B8C;&#x6210;&#x540E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x63A5;&#x53E3;&#x67E5;&#x770B;&#x6570;&#x636E;&#x662F;&#x5426;&#x5B58;&#x5728;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;http://ip:5000/file/get?fileName=benchi.jpeg</span><br></pre></td></tr></table></figure>

<h1 id="4&#x3001;postman&#x5BFC;&#x51FA;&#x529F;&#x80FD;"><a href="#4&#x3001;postman&#x5BFC;&#x51FA;&#x529F;&#x80FD;" class="headerlink" title="4&#x3001;postman&#x5BFC;&#x51FA;&#x529F;&#x80FD;"></a>4&#x3001;postman&#x5BFC;&#x51FA;&#x529F;&#x80FD;</h1><p>1.&#x4F7F;&#x7528;postman&#x7684;&#x53F3;&#x4E0A;&#x89D2;&#x53EF;&#x4EE5;&#x5BFC;&#x51FA;&#x4E3A;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x7684;&#x4EE3;&#x7801;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c265db5a16011bdca9347d61035651f758c760ad14b089d7969a19aaa48264e1" alt="image.png"></p>
<p>2.&#x9009;&#x62E9;&#x751F;&#x6210;python&#x4EE3;&#x7801;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e5c55a51471a279b4631a10d03275e952e8e4103709c7bc884af8c9c4fc545ae" alt="image.png"></p>
<p>3.&#x62F7;&#x8D1D;&#x4EE3;&#x7801;&#x51FA;&#x6765;&#x540E;&#x901A;&#x8FC7;pycharm&#x8FD0;&#x884C;&#xFF0C;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8FD0;&#x884C;</p>
<h1 id="5&#x3001;&#x521B;&#x5EFA;&#x96C6;&#x5408;&#x5E76;&#x4FDD;&#x5B58;&#x54CD;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;"><a href="#5&#x3001;&#x521B;&#x5EFA;&#x96C6;&#x5408;&#x5E76;&#x4FDD;&#x5B58;&#x54CD;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;" class="headerlink" title="5&#x3001;&#x521B;&#x5EFA;&#x96C6;&#x5408;&#x5E76;&#x4FDD;&#x5B58;&#x54CD;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;"></a>5&#x3001;&#x521B;&#x5EFA;&#x96C6;&#x5408;&#x5E76;&#x4FDD;&#x5B58;&#x54CD;&#x5E94;&#x7684;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;</h1><p>1.&#x70B9;&#x51FB;&#x5DE6;&#x4E0A;&#x89D2;&#x7684;Collection&#xFF0C;&#x5207;&#x6362;&#x5230;&#x96C6;&#x5408;tab&#x9875;&#x4E0B;&#x9762;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7510d341ee53d7cc7535e2576e020e1835ea922fb089c83cb6f11b388fd41276" alt="image.png"></p>
<p>2.&#x65B0;&#x5EFA;&#x96C6;&#x5408;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/467cf451f87d7b1ec465d21403e723cc2f9c2a0aa5d23a63354cbf359480b7b2" alt="image.png"></p>
<p>3.&#x8F93;&#x5165;&#x96C6;&#x5408;&#x540D;&#x5B57;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a5d59ec8ff4cbe5abcf14d7d2b973a4e2be0ed50ed8f251ad95a7da6bd3a723d" alt="image.png"></p>
<p>4.&#x4FDD;&#x5B58;&#x63A5;&#x53E3;&#x5230;&#x96C6;&#x5408;&#x4E2D;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3ff504e9692c8e86edcb4610f8ff75291e877540e02d4146096711c11ec3fa85" alt="image.png"></p>
<p>5.&#x628A;&#x4EE5;&#x4E0A;&#x7684;&#x51E0;&#x4E2A;&#x63A5;&#x53E3;&#x90FD;&#x4FDD;&#x5B58;&#x5230;&#x96C6;&#x5408;&#x4E2D;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e6b0543cde3bd185dd38e8df01a144b34d0c4404b971b07200322318825a6313" alt="image.png"></p>
<h1 id="6&#x3001;postman&#x6293;&#x5305;"><a href="#6&#x3001;postman&#x6293;&#x5305;" class="headerlink" title="6&#x3001;postman&#x6293;&#x5305;"></a>6&#x3001;postman&#x6293;&#x5305;</h1><p>1.&#x5728;&#x53F3;&#x4E0A;&#x89D2;&#x5F00;&#x542F;&#x6293;&#x5305;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b7dafeb595326f234023c1d3efa7e50af80a430fe10495b3bc3ef030fb0466ac" alt="image.png"></p>
<p>2.&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;&#x4EE3;&#x7406;&#x7AEF;&#x53E3;&#x53F7;</p>
<p>3.&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x8BF7;&#x6C42;</p>
<p>4.postman&#x67E5;&#x770B;&#x6293;&#x5305;&#x6570;&#x636E;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/788db41bb8016c97a5b239992d7187cd15cf535df7b9f7712ca9c8b74cf59a4f" alt="image.png"></p>
<h1 id="7&#x3001;postman&#x5F00;&#x53D1;&#x811A;&#x672C;"><a href="#7&#x3001;postman&#x5F00;&#x53D1;&#x811A;&#x672C;" class="headerlink" title="7&#x3001;postman&#x5F00;&#x53D1;&#x811A;&#x672C;"></a>7&#x3001;postman&#x5F00;&#x53D1;&#x811A;&#x672C;</h1><p>1.&#x914D;&#x7F6E;&#x5168;&#x5C40;&#x53D8;&#x91CF;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;postman.setEnvironmentVariable(&quot;city&quot;, &quot;&#x4E0A;&#x6D77;&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/65b81761c23d67bd920e8e5baabcf22ce92d6409411e01bb5ee18dc24029d0ef" alt="image.png"></p>
<p>2.&#x914D;&#x7F6E;test&#x7528;&#x4F8B;&#x811A;&#x672C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;tests[&quot;status is 200&quot;] = responseCode.code === 200</span><br><span class="line">var jsonData = JSON.parse(responseBody);</span><br><span class="line">tests[&quot;city is right&quot;] = jsonData.result.city === postman.getEnvironmentVariable(&quot;city&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6338c94fd69143806f811f58a3197ecf3201b0cd5745e42b8d02535ebca1b815" alt="image.png"></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a0a5461e3cd8645542938794ca4c0cfb.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7000922933128331272.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7000922933128331272.html" itemprop="url">实战小技巧14：配置文件Properties</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-27T09:57:15+08:00">
                2021-08-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x8FD9;&#x662F;&#x6211;&#x53C2;&#x4E0E;8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;&#x7684;&#x7B2C;27&#x5929;&#xFF0C;&#x6D3B;&#x52A8;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#xFF1A;<a href="https://dev.newban.cn/6987962113788493831">8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;</a></strong></p>
<blockquote>
<p>&#x6BCF;&#x5929;&#x4E00;&#x4E2A;&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;&#xFF0C;<strong><code>Properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;</code></strong></p>
</blockquote>
<p>properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x76F8;&#x4FE1;&#x5404;&#x4F4D;&#x5C0F;&#x4F19;&#x4F34;&#x90FD;&#x4E0D;&#x4F1A;&#x592A;&#x964C;&#x751F;&#xFF0C;&#x5E38;&#x7528;Spring&#x7684;&#x53EF;&#x80FD;&#x4F1A;&#x7ECF;&#x5E38;&#x770B;&#x5230;&#x5B83;&#xFF0C;&#x867D;&#x8BF4;&#x73B0;&#x5728;&#x66F4;&#x63A8;&#x8350;&#x7684;&#x662F;&#x4F7F;&#x7528;Yaml&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x4F7F;&#x7528;&#x9891;&#x7387;&#x4E5F;&#x4E0D;&#x4F4E;</p>
<p>&#x5728;jdk&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x76F4;&#x63A5;&#x5173;&#x8FDE;&#x7684;&#x7C7B;Properties&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x5B83;&#x7684;&#x7528;&#x6CD5;</p>
<h3 id="1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#1-&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="1. &#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>1. &#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3><p>properties&#x6587;&#x4EF6;&#x7684;&#x683C;&#x5F0F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;</p>
<ul>
<li><code>key = value</code>: &#x7B49;&#x53F7;&#x5DE6;&#x8FB9;&#x7684;&#x4E3A;&#x914D;&#x7F6E;key&#xFF0C;&#x53F3;&#x8FB9;&#x7684;&#x4E3A;&#x914D;&#x7F6E;value&#xFF08;value&#x503C;&#x4F1A;&#x53BB;&#x9664;&#x524D;&#x540E;&#x7684;&#x7A7A;&#x683C;&#xFF09;</li>
<li><code>#</code>&#xFF1A;&#x4EE5;<code>#</code>&#x6765;&#x533A;&#x5206;&#x6CE8;&#x91CA;</li>
</ul>
<p>&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x6D4B;&#x8BD5;</span><br><span class="line">key = value</span><br><span class="line">user.name = &#x4E00;&#x7070;&#x7070;blog</span><br><span class="line">user.age = 18</span><br><span class="line">user.skill = java,python,js,shell</span><br></pre></td></tr></table></figure>

<h3 id="2-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;"><a href="#2-&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;" class="headerlink" title="2. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;"></a>2. &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x52A0;&#x8F7D;</h3><p>&#x5BF9;&#x4E8E;Properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;&#x501F;&#x52A9;<code>Properties</code>&#x7C7B;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x914D;&#x7F6E;&#x7684;&#x52A0;&#x8F7D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class PropertiesUtil {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;</span><br><span class="line">     *</span><br><span class="line">     * @param propertyFile</span><br><span class="line">     * @return</span><br><span class="line">     * @throws IOException</span><br><span class="line">     */</span><br><span class="line">    public static Properties loadProperties(String propertyFile) throws IOException {</span><br><span class="line">        Properties config = new Properties();</span><br><span class="line">        config.load(PropertiesUtil.class.getClassLoader().getResourceAsStream(propertyFile));</span><br><span class="line">        return config;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>Properties#config</code>&#x5C31;&#x53EF;&#x4EE5;&#x8BFB;&#x53D6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x8D4B;&#x503C;&#x5230;java&#x5BF9;&#x8C61;</p>
<p><strong>&#x91CD;&#x70B9;&#x6CE8;&#x610F;&#xFF1A;</strong></p>
<p>&#x91CD;&#x70B9;&#x770B;&#x4E00;&#x4E0B;Properties&#x7C7B;&#x7684;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#xFF0C;&#x5B83;&#x7684;&#x7236;&#x7C7B;&#x662F;Hashtable, &#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5B83;&#x7684;&#x672C;&#x8D28;&#x662F;Map&#x5BF9;&#x8C61;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public</span><br><span class="line">class Properties extends Hashtable&lt;Object,Object&gt; {</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="3-Properties&#x5BF9;&#x8C61;&#x4F7F;&#x7528;"><a href="#3-Properties&#x5BF9;&#x8C61;&#x4F7F;&#x7528;" class="headerlink" title="3. Properties&#x5BF9;&#x8C61;&#x4F7F;&#x7528;"></a>3. Properties&#x5BF9;&#x8C61;&#x4F7F;&#x7528;</h3><p>&#x56E0;&#x4E3A;<code>Properties</code>&#x662F;&#x7EE7;&#x627F;&#x81EA;Hashtable&#xFF0C;&#x800C;Hashtable&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;Map&#x5BB9;&#x5668;&#xFF0C;&#x56E0;&#x6B64;Properties&#x4E5F;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x540C;&#x6837;&#x7684;&#xFF0C;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x83B7;&#x53D6;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x7684;&#x6027;&#x80FD;&#x8868;&#x73B0;&#x4E5F;&#x5C31;&#x4E0D;&#x548B;&#x5730;&#x4E86;&#xFF0C;why?</p>
<p>&#x9996;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#x83B7;&#x53D6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x83B7;&#x53D6;&#x914D;&#x7F6E;&#x5C5E;&#x6027;</span><br><span class="line">public String getProperty(String key) {</span><br><span class="line">    Object oval = super.get(key);</span><br><span class="line">    String sval = (oval instanceof String) ? (String)oval : null;</span><br><span class="line">    return ((sval == null) &amp;&amp; (defaults != null)) ? defaults.getProperty(key) : sval;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x83B7;&#x53D6;&#x914D;&#x7F6E;&#x5C5E;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x9ED8;&#x8BA4;&#x503C;</span><br><span class="line">public String getProperty(String key, String defaultValue) {</span><br><span class="line">    String val = getProperty(key);</span><br><span class="line">    return (val == null) ? defaultValue : val;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x4F7F;&#x7528;&#x9891;&#x7387;&#x5F88;&#x9AD8;&#xFF0C;&#x4ECE;&#x7B7E;&#x540D;&#x4E0A;&#x4E5F;&#x5F88;&#x5BB9;&#x6613;&#x77E5;&#x9053;&#x4F7F;&#x7528;&#x59FF;&#x52BF;&#xFF1B;&#x63A5;&#x4E0B;&#x6765;&#x9700;&#x8981;&#x770B;&#x4E00;&#x4E0B;&#x7684;&#x4E3A;&#x5565;&#x8BF4;&#x5E76;&#x53D1;&#x6548;&#x7387;&#x5F88;&#x4F4E;</p>
<p>&#x5173;&#x952E;&#x70B9;&#x5C31;&#x5728;&#x7B2C;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;<code>super.get()</code>&#xFF0C;&#x5B83;&#x5BF9;&#x5E94;&#x7684;&#x6E90;&#x7801;&#x6B63;&#x662F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public synchronized V get(Object key) {</span><br><span class="line">  // ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#x4E0A;&#x6709;<code>synchronized</code>&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x5565;&#x8BF4;&#x5E76;&#x53D1;&#x73AF;&#x5883;&#x4E0B;&#x7684;&#x6027;&#x80FD;&#x8868;&#x73B0;&#x4E0D;&#x4F1A;&#x7279;&#x522B;&#x597D;&#x4E5F;&#x5C31;&#x77E5;&#x9053;&#x539F;&#x56E0;&#x4E86;</p>
<p>&#x9664;&#x4E86;&#x83B7;&#x53D6;&#x914D;&#x7F6E;&#x4E4B;&#x5916;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x5C31;&#x662F;&#x66F4;&#x65B0;&#x914D;&#x7F6E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public synchronized Object setProperty(String key, String value) {</span><br><span class="line">    return put(key, value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-&#x5C0F;&#x7ED3;"><a href="#4-&#x5C0F;&#x7ED3;" class="headerlink" title="4. &#x5C0F;&#x7ED3;"></a>4. &#x5C0F;&#x7ED3;</h3><p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x4E3B;&#x8981;&#x662F;properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4F7F;&#x7528;&#x540C;&#x540D;&#x7684;java&#x7C7B;&#x6765;&#x64CD;&#x4F5C;&#xFF1B;&#x9700;&#x8981;&#x91CD;&#x70B9;&#x6CE8;&#x610F;&#x7684;&#x662F;Properties&#x7C7B;&#x5C5E;&#x4E8E;Hashtable&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x540C;&#x6837;&#x5C5E;&#x4E8E;&#x5BB9;&#x5668;&#x7684;&#x8303;&#x7574;</p>
<p>&#x6700;&#x540E;&#x63D0;&#x4E00;&#x4E2A;&#x6269;&#x5C55;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5728;SpringBoot&#x7684;&#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x88C5;&#x8F7D;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x914D;&#x7F6E;&#x5185;&#x5BB9;&#x81EA;&#x52A8;&#x88C5;&#x8F7D;&#x5230;&#x914D;&#x7F6E;&#x7C7B;&#x4E2D;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BB2;&#x5C31;&#x662F;&#x652F;&#x6301;&#x914D;&#x7F6E;&#x5230;java bean&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x5982;&#x679C;&#x73B0;&#x5728;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#xFF0C;&#x53EF;&#x4EE5;&#x600E;&#x4E48;&#x6574;&#xFF1F;</p>
<p><strong>&#x7CFB;&#x5217;&#x535A;&#x6587;&#xFF1A;</strong></p>
<ul>
<li><a href="/external_links/65f20e2a5ef142bde26ee7531d8822e5.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;1&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#x5360;&#x4F4D;&#x66FF;&#x6362;-JDK&#x7248;</a></li>
<li><a href="/external_links/6743ba8328df36f2ae8db017ff71dfad.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;2&#xFF1A;&#x6570;&#x7EC4;&#x4E0E;list&#x4E92;&#x8F6C;</a></li>
<li><a href="/external_links/7b9a27bced78305d8904d959aa7d6765.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;3&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#x4E0E;&#x5BB9;&#x5668;&#x4E92;&#x8F6C;</a></li>
<li><a href="/external_links/922dc258fb2c44e2c6549103bb2c07b5.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;4&#xFF1A;&#x4F18;&#x96C5;&#x7684;&#x5B9E;&#x73B0;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;</a></li>
<li><a href="/external_links/d1778f664f79d9d1e72b0c6f6ab9d9b8.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;5&#xFF1A;&#x9A7C;&#x5CF0;&#x4E0E;&#x4E0B;&#x5212;&#x7EBF;&#x4E92;&#x8F6C;</a></li>
<li><a href="/external_links/20cb79242e670f5cdd3e56fc2f193242.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;6&#xFF1A;&#x679A;&#x4E3E;&#x7684;&#x7279;&#x6B8A;&#x7528;&#x6CD5;</a></li>
<li><a href="/external_links/a1b985eb8809e24c9ad76d7184ccea05.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;7&#xFF1A;&#x6392;&#x5E8F;&#x6BD4;&#x8F83;&#x9700;&#x614E;&#x91CD;</a></li>
<li><a href="/external_links/0c46c4eac40ebb95b532a22fe538bf01.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;8&#xFF1A;&#x5BB9;&#x5668;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5927;&#x5C0F;&#x6307;&#x5B9A;</a></li>
<li><a href="/external_links/a8e58bef85d7a014a2e3311e9bb28f8f.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;9&#xFF1A;List.subList&#x4F7F;&#x7528;&#x4E0D;&#x5F53;StackOverflowError</a></li>
<li><a href="/external_links/8c6ce1dcfca3fe8153ac2e5f7603e8e6.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;10&#xFF1A;&#x4E0D;&#x53EF;&#x53D8;&#x5BB9;&#x5668;</a></li>
<li><a href="/external_links/b99a1f2434c377603553809f1f1b99d7.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;11&#xFF1A;&#x6570;&#x7EC4;&#x62F7;&#x8D1D;</a></li>
<li><a href="/external_links/95f741fbce3afc9ff8d65522a7313f22.html" target="blank" rel="noopener">&#x5B9E;&#x6218;&#x5C0F;&#x6280;&#x5DE7;12&#xFF1A;&#x6570;&#x5B57;&#x683C;&#x5F0F;&#x5316;</a></li>
</ul>
<h2 id="II-&#x5176;&#x4ED6;"><a href="#II-&#x5176;&#x4ED6;" class="headerlink" title="II. &#x5176;&#x4ED6;"></a>II. &#x5176;&#x4ED6;</h2><h3 id="1-&#x4E00;&#x7070;&#x7070;Blog&#xFF1A;-liuyueyi-github-io-hexblog"><a href="#1-&#x4E00;&#x7070;&#x7070;Blog&#xFF1A;-liuyueyi-github-io-hexblog" class="headerlink" title="1. &#x4E00;&#x7070;&#x7070;Blog&#xFF1A; liuyueyi.github.io/hexblog"></a>1. <a href="/external_links/98224246adccf75c9dc80562d37b605b.html" target="blank" rel="noopener">&#x4E00;&#x7070;&#x7070;Blog</a>&#xFF1A; <a href="/external_links/98224246adccf75c9dc80562d37b605b.html" target="blank" rel="noopener">liuyueyi.github.io/hexblog</a></h3><p>&#x4E00;&#x7070;&#x7070;&#x7684;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#xFF0C;&#x8BB0;&#x5F55;&#x6240;&#x6709;&#x5B66;&#x4E60;&#x548C;&#x5DE5;&#x4F5C;&#x4E2D;&#x7684;&#x535A;&#x6587;&#xFF0C;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x524D;&#x53BB;&#x901B;&#x901B;</p>
<h3 id="2-&#x58F0;&#x660E;"><a href="#2-&#x58F0;&#x660E;" class="headerlink" title="2. &#x58F0;&#x660E;"></a>2. &#x58F0;&#x660E;</h3><p>&#x5C3D;&#x4FE1;&#x4E66;&#x5219;&#x4E0D;&#x5982;&#xFF0C;&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#xFF0C;&#x7EAF;&#x5C5E;&#x4E00;&#x5BB6;&#x4E4B;&#x8A00;&#xFF0C;&#x56E0;&#x4E2A;&#x4EBA;&#x80FD;&#x529B;&#x6709;&#x9650;&#xFF0C;&#x96BE;&#x514D;&#x6709;&#x758F;&#x6F0F;&#x548C;&#x9519;&#x8BEF;&#x4E4B;&#x5904;&#xFF0C;&#x5982;&#x53D1;&#x73B0;bug&#x6216;&#x8005;&#x6709;&#x66F4;&#x597D;&#x7684;&#x5EFA;&#x8BAE;&#xFF0C;&#x6B22;&#x8FCE;&#x6279;&#x8BC4;&#x6307;&#x6B63;&#xFF0C;&#x4E0D;&#x541D;&#x611F;&#x6FC0;</p>
<ul>
<li>&#x5FAE;&#x535A;&#x5730;&#x5740;: <a href="/external_links/a83f8d003f5fa3f85f549cb3f32c015f.html" target="blank" rel="noopener">&#x5C0F;&#x7070;&#x7070;Blog</a></li>
<li>QQ&#xFF1A; &#x4E00;&#x7070;&#x7070;/3302797840</li>
<li>&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;: &#x4E00;&#x7070;&#x7070;blog</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/b0b8dca07814d4fb4023c7494be23c45.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7000748271261974564.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7000748271261974564.html" itemprop="url">DockerFile详解&实战</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-26T22:39:35+08:00">
                2021-08-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x8FD9;&#x662F;&#x6211;&#x53C2;&#x4E0E;8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;&#x7684;&#x7B2C;7&#x5929;&#xFF0C;&#x6D3B;&#x52A8;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#xFF1A;<a href="https://dev.newban.cn/6987962113788493831">8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;</a></p>
<p>&#x4E4B;&#x524D;&#x6587;&#x7AE0;&#x4E2D;&#x6211;&#x4EEC;&#x521D;&#x6B65;&#x4E86;&#x89E3;&#x4E86;dockerfile&#xFF0C;&#x77E5;&#x9053;dockerfile&#x662F;&#x7528;&#x6765;&#x6784;&#x5EFA;docker&#x955C;&#x50CF;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x547D;&#x4EE4;&#x53C2;&#x6570;&#x811A;&#x672C;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x6DF1;&#x5165;&#x5B66;&#x4E60;&#x4E0B;dockerfile</p>
<p>&#x5148;&#x4E86;&#x89E3;&#x4E0B;&#x6784;&#x5EFA;&#x6B65;&#x9AA4;dockerfile&#x6784;&#x5EFA;&#x7684;&#x5B8C;&#x6574;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ul>
<li>&#x7F16;&#x5199;&#x4E00;&#x4E2A;dockerfile&#x6587;&#x4EF6;</li>
<li>docker build &#x6784;&#x5EFA;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x955C;&#x50CF;</li>
<li>docker run &#x8FD0;&#x884C;&#x955C;&#x50CF;</li>
<li>docker push &#x53D1;&#x5E03;&#x955C;&#x50CF;&#xFF08;DokcerHub&#x3001;&#x963F;&#x91CC;&#x4E91;&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#xFF09;</li>
</ul>
<p>&#x770B;&#x4E0B;&#x5B98;&#x65B9;&#x662F;&#x600E;&#x4E48;&#x505A;&#x7684;</p>
<p>1&#x3001;&#x5728;dockerhub&#x4E0A;&#x968F;&#x4FBF;&#x641C;&#x7D22;&#x4E00;&#x4E2A;&#x955C;&#x50CF;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/634fbf77fb3bcbe5a1b77c38589e5d7d6469d837087c9a48c6b3054db3dbc35b" alt></p>
<p>2&#x3001;&#x968F;&#x4FBF;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x4F1A;&#x76F4;&#x63A5;&#x8DF3;&#x8F6C;&#x5230;github&#x4E0A;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x955C;&#x50CF;&#x7684;&#x547D;&#x4EE4;&#x811A;&#x672C;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/e1adf43abd94fa374019539dd1618d146208c401ae1739b29b012b713440207c" alt></p>
<p>&#x5F88;&#x591A;&#x5B98;&#x65B9;&#x7684;&#x955C;&#x50CF;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x7EAF;&#x51C0;&#x7684;&#x5305;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x5236;&#x4F5C;&#x81EA;&#x5DF1;&#x7684;&#x955C;&#x50CF;</p>
<h2 id="Dockerfile&#x7684;&#x6784;&#x5EFA;"><a href="#Dockerfile&#x7684;&#x6784;&#x5EFA;" class="headerlink" title="Dockerfile&#x7684;&#x6784;&#x5EFA;"></a>Dockerfile&#x7684;&#x6784;&#x5EFA;</h2><p>dockerfile&#x7684;&#x6784;&#x5EFA;&#x5E76;&#x4E0D;&#x96BE;&#xFF0C;&#x4E3B;&#x8981;&#x6211;&#x4EEC;&#x8981;&#x628A;&#x547D;&#x4EE4;&#x811A;&#x672C;&#x5199;&#x597D;</p>
<h3 id="&#x57FA;&#x7840;&#x77E5;&#x8BC6;"><a href="#&#x57FA;&#x7840;&#x77E5;&#x8BC6;" class="headerlink" title="&#x57FA;&#x7840;&#x77E5;&#x8BC6;"></a>&#x57FA;&#x7840;&#x77E5;&#x8BC6;</h3><p>1&#x3001;&#x6BCF;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#xFF08;&#x6307;&#x4EE4;&#xFF09;&#x90FD;&#x5FC5;&#x987B;&#x662F;&#x5927;&#x5199;&#x5B57;&#x6BCD;</p>
<p>2&#x3001;&#x6267;&#x884C;&#x662F;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#x987A;&#x5E8F;&#x6267;&#x884C;&#x7684;</p>
<p>3&#x3001;#&#x8868;&#x793A;&#x6CE8;&#x91CA;</p>
<p>4&#x3001;&#x6BCF;&#x4E00;&#x4E2A;&#x6307;&#x4EE4;&#x90FD;&#x4F1A;&#x521B;&#x5EFA;&#x63D0;&#x4EA4;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x955C;&#x50CF;&#x5C42;&#x5E76;&#x63D0;&#x4EA4;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/5c07f5c263fd0344e8ed476e5e44557ed3ed9b86f70195e516d606c937b180ee" alt></p>
<p>dockerfile&#x662F;&#x9762;&#x5411;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x540E;&#x9762;&#x53D1;&#x5E03;&#x9879;&#x76EE;&#xFF0C;&#x505A;&#x955C;&#x50CF;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x7F16;&#x5199;dockerfile&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF08;dockerfile&#x9010;&#x6E10;&#x6210;&#x4E3A;&#x4F01;&#x4E1A;&#x4EA4;&#x4ED8;&#x7684;&#x6807;&#x51C6;&#xFF09;</p>
<p>&#x6211;&#x4EEC;&#x5728;&#x56DE;&#x987E;&#x4E0B;&#x51E0;&#x4E2A;&#x6982;&#x5FF5;</p>
<ul>
<li>dockerfile&#xFF1A;&#x6784;&#x5EFA;&#x6587;&#x4EF6;&#xFF0C;&#x5B9A;&#x4E49;&#x6240;&#x6709;&#x6B65;&#x9AA4;&#xFF0C;&#x6E90;&#x4EE3;&#x7801;</li>
<li>dockerImages&#xFF1A;&#x901A;&#x8FC7;dockerfile&#x6784;&#x5EFA;&#x751F;&#x6210;&#x955C;&#x50CF;&#xFF0C;&#x6700;&#x7EC8;&#x53D1;&#x5E03;&#x548C;&#x8FD0;&#x884C;&#x7684;&#x4EA7;&#x54C1;</li>
<li>docker&#x5BB9;&#x5668;&#xFF1A;&#x5BB9;&#x5668;&#x5C31;&#x662F;&#x955C;&#x50CF;&#x8FD0;&#x884C;&#x8D77;&#x6765;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x5668;</li>
</ul>
<h3 id="DockerFile&#x7684;&#x6307;&#x4EE4;"><a href="#DockerFile&#x7684;&#x6307;&#x4EE4;" class="headerlink" title="DockerFile&#x7684;&#x6307;&#x4EE4;"></a>DockerFile&#x7684;&#x6307;&#x4EE4;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;FROM 			# &#x57FA;&#x7840;&#x955C;&#x50CF;&#xFF0C;&#x4E00;&#x5207;&#x4ECE;&#x8FD9;&#x91CC;&#x5F00;&#x59CB;</span><br><span class="line">MAINTAINER	        # &#x955C;&#x50CF;&#x662F;&#x8C01;&#x5199;&#x7684;</span><br><span class="line">RUN 			# &#x955C;&#x50CF;&#x6784;&#x5EFA;&#x662F;&#x9700;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x547D;&#x4EE4;</span><br><span class="line">ADD		        # &#x6B65;&#x9AA4;</span><br><span class="line">WORKDIR			# &#x955C;&#x50CF;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;</span><br><span class="line">VOLUME			# &#x6302;&#x8F7D;&#x7684;&#x76EE;&#x5F55;</span><br><span class="line">EXPOSE			# &#x4FDD;&#x7559;&#x7AEF;&#x53E3;&#x914D;&#x7F6E;</span><br><span class="line">CMD		        # &#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x53EA;&#x6709;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4F1A;&#x751F;&#x6548;</span><br><span class="line">ENTRYPOINT		# &#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x542F;&#x52A8;&#x65F6;&#x8981;&#x8FD0;&#x884C;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x8FFD;&#x52A0;&#x547D;&#x4EE4;</span><br><span class="line">COPY			# &#x7C7B;&#x4F3C;ADD&#xFF0C;&#x5C06;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x955C;&#x50CF;&#x4E2D;</span><br><span class="line">ENV			# &#x6784;&#x5EFA;&#x65F6;&#x5019;&#x8BBE;&#x7F6E;&#x7684;&#x73AF;&#x5883;&#x53D8;&#x91CF;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/4023db24333fcffa7cdb9a873d1981d5bbca4c654e4d28fafc3b88ab3a45642b" alt></p>
<h2 id="&#x5B9E;&#x6218;&#x6D4B;&#x8BD5;"><a href="#&#x5B9E;&#x6218;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x5B9E;&#x6218;&#x6D4B;&#x8BD5;"></a>&#x5B9E;&#x6218;&#x6D4B;&#x8BD5;</h2><p>&#x4ECE;&#x4E0A;&#x9762;centos&#x547D;&#x4EE4;&#x811A;&#x672C;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5F00;&#x5934;<strong>FROM scratch</strong>&#xFF0C;dockerhub&#x4E2D;99%&#x7684;&#x955C;&#x50CF;&#x90FD;&#x662F;&#x4ECE;FROM scratch&#x8FD9;&#x4E2A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x6765;&#x7684;&#xFF0C;&#x7136;&#x540E;&#x914D;&#x7F6E;&#x9700;&#x8981;&#x7684;&#x8F6F;&#x4EF6;&#x548C;&#x914D;&#x7F6E;&#x6765;&#x6784;&#x5EFA;&#x7684;&#x3002;</p>
<p>&#x5728;&#x5B98;&#x65B9;&#x7684;centos&#x4E2D;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x7684;&#x547D;&#x4EE4;&#x90FD;&#x662F;&#x6CA1;&#x6709;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5C1D;&#x8BD5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x7684;centos&#x8BD5;&#x4E00;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ docker run -it centos</span><br><span class="line">[root@8fbe85e4a93b /]# vim</span><br><span class="line">bash: vim: command not found</span><br><span class="line">[root@8fbe85e4a93b /]# ifconfig</span><br><span class="line">bash: ifconfig: command not found</span><br><span class="line">[root@8fbe85e4a93b /]#</span><br></pre></td></tr></table></figure>

<h3 id="&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x7F16;&#x5199;&#x6587;&#x4EF6;"><a href="#&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x7F16;&#x5199;&#x6587;&#x4EF6;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x7F16;&#x5199;&#x6587;&#x4EF6;"></a>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x7F16;&#x5199;&#x6587;&#x4EF6;</h3><p>&#x5728;&#x6307;&#x5B9A;&#x8DEF;&#x5F84;&#x4E0B;&#x7F16;&#x5199;dockerfile&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;FROM centos</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line">RUN yum -y install net-tools</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line">CMD echo $MYPATH</span><br><span class="line">CMD echo &quot;---end---&quot;</span><br><span class="line">CMD /bin/bash</span><br></pre></td></tr></table></figure>

<h3 id="&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x6784;&#x5EFA;&#x955C;&#x50CF;"><a href="#&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x6784;&#x5EFA;&#x955C;&#x50CF;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x6784;&#x5EFA;&#x955C;&#x50CF;"></a>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x6784;&#x5EFA;&#x955C;&#x50CF;</h3><blockquote>
<p>mydockerfile&#x662F;&#x6587;&#x4EF6;&#x540D;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;docker build -f mydockerfile -t mycentos:0.1 .</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x662F;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x7F16;&#x5199;&#x7684;&#x6307;&#x4EE4;&#x9010;&#x6B65;&#x6784;&#x5EFA;&#x7684;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/61fe1a45d72fb297ccee1efae55dfe308bd65f2857140536c5b0f1ef95199400" alt="img"></p>
<p>&#x67E5;&#x770B;&#x4E0B;&#x751F;&#x6210;&#x7684;&#x955C;&#x50CF;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/140c24f7949d339de3211f68b1797b1b3c53d3cd87cbb4e54c4a8d7beb85b7f9" alt="img"></p>
<h3 id="&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;"><a href="#&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;"></a>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6D4B;&#x8BD5;&#x8FD0;&#x884C;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;docker run -it mycentos:0.1</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FDB;&#x5165;&#x7684;&#x662F;&#x914D;&#x7F6E;&#x7684;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#xFF0C;&#x5E76;&#x4E14;ifconfig&#x547D;&#x4EE4;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x5C1D;&#x8BD5;&#x7528;vim&#x547D;&#x4EE4;&#x4E5F;&#x662F;ok&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x901A;&#x8FC7;dockerfile&#x5199;&#x7684;&#x955C;&#x50CF;&#x662F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x7684;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/17f2f354eaefa746fe92054d1337f3d29939daec46d54e3f270f0e204a96c1ec" alt="img"></p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5217;&#x51FA;&#x672C;&#x5730;&#x955C;&#x50CF;&#x7684;&#x53D8;&#x66F4;&#x5386;&#x53F2;&#xFF0C;&#x901A;&#x8FC7;&#x5386;&#x53F2;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x662F;&#x600E;&#x4E48;&#x505A;&#x8D77;&#x6765;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7814;&#x7A76;&#x4E0B;&#x5E73;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x955C;&#x50CF;&#x662F;&#x600E;&#x4E48;&#x505A;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;docker history</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/fc9e36aa216da18bd9f8ab2f7563cde401191d890354e9089f6ba428efad0260" alt="img"></p>
<h2 id="&#x5B9E;&#x6218;tomcat&#x955C;&#x50CF;"><a href="#&#x5B9E;&#x6218;tomcat&#x955C;&#x50CF;" class="headerlink" title="&#x5B9E;&#x6218;tomcat&#x955C;&#x50CF;"></a>&#x5B9E;&#x6218;tomcat&#x955C;&#x50CF;</h2><h3 id="&#x51C6;&#x5907;&#x955C;&#x50CF;&#x6587;&#x4EF6;"><a href="#&#x51C6;&#x5907;&#x955C;&#x50CF;&#x6587;&#x4EF6;" class="headerlink" title="&#x51C6;&#x5907;&#x955C;&#x50CF;&#x6587;&#x4EF6;"></a>&#x51C6;&#x5907;&#x955C;&#x50CF;&#x6587;&#x4EF6;</h3><p>&#x51C6;&#x5907;&#x955C;&#x50CF;&#x6587;&#x4EF6;tomcat&#x538B;&#x7F29;&#x5305;&#xFF0C;jdk&#x538B;&#x7F29;&#x5305;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/4d4b2864d23c65d98bfa3a1b679905ed09bdace478103f9d2da1eca0f0189507" alt></p>
<h3 id="&#x7F16;&#x5199;dockerfile"><a href="#&#x7F16;&#x5199;dockerfile" class="headerlink" title="&#x7F16;&#x5199;dockerfile"></a>&#x7F16;&#x5199;dockerfile</h3><p>&#x7F16;&#x5199;dockerfile&#x6587;&#x4EF6;&#xFF0C;&#x5B98;&#x65B9;&#x547D;&#x540D;<strong>Dockerfile</strong>&#xFF0C;build&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5BFB;&#x627E;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x4E0D;&#x9700;&#x8981;-f&#x6307;&#x5B9A;&#x4E86;&#xFF01;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;FROM centos</span><br><span class="line">MAINTAINER ajajaj</span><br><span class="line"></span><br><span class="line">COPY readme.txt /usr/local/readme.txt</span><br><span class="line"></span><br><span class="line">ADD jdk-8u301-linux-x64.tar /usr/local/</span><br><span class="line">ADD apache-tomcat-8.5.70.tar.gz /usr/local/</span><br><span class="line"></span><br><span class="line">RUN yum -y install vim</span><br><span class="line"></span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line">ENV JAVA_HOME /usr/local/jdk1.8.0_301</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINA_HOME /usr/local/apache-tomcat-8.5.70</span><br><span class="line">ENV CATALINA_BASH /usr/local/apache-tomcat-8.5.70</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line">CMD /usr/local/apache-tomcat-8.5.70/bin/startup.sh &amp;&amp; tail -F</span><br><span class="line">/usr/local/apache-tomcat-8.5.70/bin/logs/catalina.out</span><br></pre></td></tr></table></figure>

<h3 id="&#x6784;&#x5EFA;&#x955C;&#x50CF;"><a href="#&#x6784;&#x5EFA;&#x955C;&#x50CF;" class="headerlink" title="&#x6784;&#x5EFA;&#x955C;&#x50CF;"></a>&#x6784;&#x5EFA;&#x955C;&#x50CF;</h3><p>&#x7F16;&#x5199;&#x597D;&#x4E86;dockerfile&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x4E86;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">erlang&#x590D;&#x5236;&#x4EE3;&#x7801;docker build -t diytomcat .</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/ff969b6d2facb874e914af7896fa6cb7c0937ac5462f20afb3c1c71b4f38ad26" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/036708d645df42b1cf1643f7c291d2a638551a1557052f902025cb01216319cc" alt></p>
<p>&#x5230;&#x8FD9;&#x6765;&#x81EA;&#x5B9A;&#x4E49;&#x7684;tomcat&#x955C;&#x50CF;&#x5C31;&#x521B;&#x5EFA;&#x6210;&#x529F;&#x4E86;</p>
<h3 id="&#x542F;&#x52A8;&#x955C;&#x50CF;"><a href="#&#x542F;&#x52A8;&#x955C;&#x50CF;" class="headerlink" title="&#x542F;&#x52A8;&#x955C;&#x50CF;"></a>&#x542F;&#x52A8;&#x955C;&#x50CF;</h3><p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x542F;&#x52A8;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5E76;&#x4E14;&#x987A;&#x4FBF;&#x505A;&#x4E86;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x4ED4;&#x7EC6;&#x770B;&#x4E0B;&#x4E0B;&#x9762;&#x7684;&#x547D;&#x4EE4;</p>
<ul>
<li>&#x7AEF;&#x53E3;&#x6620;&#x5C04;&#x5230;9090</li>
<li>&#x5DE5;&#x7A0B;&#x76EE;&#x5F55;&#x3001;&#x65E5;&#x5FD7;&#x76EE;&#x5F55;&#x8FDB;&#x884C;&#x6302;&#x8F7D;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;docker run -d -p 9090:8080 --name ajtomcat -v /Users/cb/test/tomcat-out/test:/usr/local/apache-tomcat-8.5.70/webapps/test -v /Users/cb/test/tomcat-out/tomcatlogs:/usr/local/apache-tomcat-8.5.70/logs diytomcat</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/1b69b83f08cc85a89560ac00c88c19fcb7b434e70a29753c08ce4e7c3c747e32" alt></p>
<p><strong>&#x8FDB;&#x5165;&#x5BB9;&#x5668;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ docker exec -it 9f3f7ed2b184 /bin/bash</span><br><span class="line">[root@9f3f7ed2b184 local]#</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/8224a387bd6086a62f05fe60bc67b2d78e1cbb4e3476341b1c1c5784beafb306" alt></p>
<h3 id="&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;"><a href="#&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;"></a>&#x8BBF;&#x95EE;&#x6D4B;&#x8BD5;</h3><p>&#x8BBF;&#x95EE;&#x4E0B;tomcat(curl localhost:8080)&#xFF0C;&#x662F;&#x901A;&#x7684;&#x54E6;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/9b049a7092ea598a988d9f5f083f37cfa803982a8914672d855b9b1d0c677244" alt></p>
<p>&#x5BBF;&#x4E3B;&#x673A;&#x8BBF;&#x95EE;&#x4E0B;9090&#x770B;&#x4E0B;&#x4E5F;&#x662F;OK&#x7684;&#x54E6;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/ef05531241e5159c0b694672cab855b668f622fa48aa32d10db74e69d8b68225" alt></p>
<h3 id="&#x53D1;&#x5E03;&#x9879;&#x76EE;"><a href="#&#x53D1;&#x5E03;&#x9879;&#x76EE;" class="headerlink" title="&#x53D1;&#x5E03;&#x9879;&#x76EE;"></a>&#x53D1;&#x5E03;&#x9879;&#x76EE;</h3><p>&#x7531;&#x4E8E;&#x505A;&#x4E86;&#x5377;&#x6302;&#x8F7D;&#xFF0C;&#x6211;&#x4EEC;&#x4E4B;&#x95F4;&#x5728;&#x672C;&#x5730;&#x7F16;&#x5199;&#x9879;&#x76EE;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;</p>
<blockquote>
<p>&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x7684;&#x6302;&#x8F7D;&#x5173;&#x7CFB;</p>
<p>/Users/cb/test/tomcat-out/test:/usr/local/apache-tomcat-8.5.70/webapps/test</p>
</blockquote>
<p>&#x6211;&#x4EEC;&#x5728;&#x5916;&#x90E8;&#x8DEF;&#x5F84;&#x4E0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;web&#x5DE5;&#x7A0B;</p>
<ul>
<li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;WEB-INF&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;web.xml&#x6587;&#x4EF6;</li>
<li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;index.jsp&#x6587;&#x4EF6;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/a3df2d8adb84e7c54604b43f37729ceae2d8af5dc9c85648324035c536fa0ade" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/9365a4bcff0cb685920759a09c83475b60e3a7c31b97ff8a29ecff1d0499468c" alt></p>
<p>&#x6587;&#x4EF6;&#x4E2D;&#x6309;&#x7167;&#x683C;&#x5F0F;&#x968F;&#x4FBF;&#x5199;&#x70B9;&#x4E1C;&#x897F;</p>
<p>web.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span><br><span class="line">    xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span><br><span class="line">    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span><br><span class="line">    id=&quot;WebApp_ID&quot; version=&quot;2.5&quot;&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>

<p>index.jsp</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">jsp&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">Hello World!&lt;br/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">out.println(&quot;Your IP address is &quot; + request.getRemoteAddr());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&#x641E;&#x5B9A;&#x4E4B;&#x540E;&#x6211;&#x4EEC;&#x6765;&#x8BBF;&#x95EE;&#x4E0B;&#x8FD9;&#x4E2A;web&#x5DE5;&#x7A0B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/65ad485ca55f7521088d219eeb2e95e8322219cc9d1de4e2de6ea9c3fd3cf3c0" alt></p>
<p>&#x6700;&#x540E;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x65E5;&#x5FD7;&#x7684;&#x8F93;&#x51FA;&#x60C5;&#x51B5;&#xFF0C;&#x7531;&#x4E0B;&#x56FE;&#x53EF;&#x89C1;&#x65E5;&#x5FD7;&#x4E5F;&#x662F;&#x7A33;&#x7A33;&#x7684;&#x6253;&#x5370;&#x4E86;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b30e13d090040be74ca181f16eae63721881aff0aed68c2fc1a69fb88631e225" alt></p>
<p>OK&#xFF0C;&#x5230;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5C31;&#x7B97;&#x6210;&#x529F;&#x4E86;</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5728;&#x672C;&#x5730;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x9879;&#x76EE;&#x7684;&#x5B9E;&#x65F6;&#x53D1;&#x5E03;&#xFF0C;&#x800C;&#x4E14;&#x9879;&#x76EE;&#x662F;&#x90E8;&#x7F72;&#x5728;docker&#x4E2D;&#x7684;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;docker&#x955C;&#x50CF;&#x4F7F;&#x6211;&#x4EEC;&#x7EAF;&#x624B;&#x5DE5;&#x6253;&#x9020;&#x7684;&#x54E6;&#xFF0C;&#x8FD9;&#x4E00;&#x5957;&#x5B8C;&#x6210;&#x7684;&#x6D41;&#x7A0B;&#x6211;&#x4EEC;&#x5C31;&#x7B97;&#x641E;&#x5B9A;&#x4E86;&#x2026;</p>
<p>docker&#x5B66;&#x4E60;&#x5230;&#x8FD9;&#x91CC;&#x7B97;&#x662F;&#x5BF9;docker&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x5168;&#x9762;&#x7684;&#x8BA4;&#x8BC6;&#x4E86;&#xFF0C;&#x540E;&#x9762;&#x8FD8;&#x4F1A;&#x7EE7;&#x7EED;&#x6DF1;&#x5165;&#x7684;&#x518D;&#x7814;&#x7A76;&#x4E0B;docker&#x7F51;&#x7EDC;&#x3001;&#x955C;&#x50CF;&#x53D1;&#x5E03;&#x7B49;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x5E0C;&#x671B;&#x8FD9;&#x4E2A;&#x6587;&#x7AE0;&#x5BF9;&#x5927;&#x5BB6;&#x6709;&#x4E00;&#x70B9;&#x5E2E;&#x52A9;&#xFF01;</p>
<blockquote>
<p>&#x6709;&#x65F6;&#x6211;&#x4EEC;&#x7684;&#x773C;&#x775B;&#x53EF;&#x4EE5;&#x770B;&#x89C1;&#x5B87;&#x5B99;&#xFF0C;&#x5374;&#x770B;&#x4E0D;&#x89C1;&#x793E;&#x4F1A;&#x5E95;&#x5C42;&#x6700;&#x60B2;&#x60E8;&#x7684;&#x4E16;&#x754C; &#x2013;&#x300A;&#x5341;&#x5B97;&#x7F6A;&#x300B;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/46c8ef50908bf7c2489e52154695a823.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7000652162950758431.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7000652162950758431.html" itemprop="url">nvm 安装、卸载与使用（详细步骤）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-26T16:26:05+08:00">
                2021-08-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="&#x4E00;&#x3001;node&#x3001;nvm&#x3001;npm&#x3001;npx&#x3001;nrm-&#x533A;&#x522B;"><a href="#&#x4E00;&#x3001;node&#x3001;nvm&#x3001;npm&#x3001;npx&#x3001;nrm-&#x533A;&#x522B;" class="headerlink" title="&#x4E00;&#x3001;node&#x3001;nvm&#x3001;npm&#x3001;npx&#x3001;nrm &#x533A;&#x522B;"></a>&#x4E00;&#x3001;<code>node</code>&#x3001;<code>nvm</code>&#x3001;<code>npm</code>&#x3001;<code>npx</code>&#x3001;<code>nrm</code> &#x533A;&#x522B;</h4><ul>
<li><code>node</code>&#xFF1A;&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E; <code>Chrome V8</code> &#x5F15;&#x64CE;&#x7684; <code>JS</code> &#x8FD0;&#x884C;&#x73AF;&#x5883;&#x3002;</li>
<li><code>npm</code>&#xFF1A;&#x662F; <code>node.js</code> &#x9ED8;&#x8BA4;&#x7684;&#x5305;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF08;&#x7528; <code>JavaScript</code> &#x7F16;&#x5199;&#x7684;&#xFF09;&#xFF0C;&#x5728;&#x5B89;&#x88C5;&#x7684; <code>node</code> &#x7684;&#x65F6;&#x5019;&#xFF0C;<code>npm</code> &#x4E5F;&#x4F1A;&#x8DDF;&#x7740;&#x4E00;&#x8D77;&#x5B89;&#x88C5;&#xFF0C;&#x7BA1;&#x7406; <code>node</code> &#x4E2D;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#x3002;</li>
<li><code>npx</code>&#xFF1A;<code>npm</code> &#x4ECE; <code>v5.2.0</code> &#x5F00;&#x59CB;&#x65B0;&#x589E;&#x4E86; <code>npx</code> &#x547D;&#x4EE4;&#xFF0C;<code>&gt;=</code> &#x8BE5;&#x7248;&#x672C;&#x4F1A;&#x81EA;&#x52A8;&#x5B89;&#x88C5; <code>npx</code>&#xFF0C;&#x9644;&#x5E26;&#xFF1A;<a href="/external_links/3077ae2ed0dbc946f3788dd18a567dad.html" target="blank" rel="noopener">npx &#x6709;&#x4EC0;&#x4E48;&#x4F5C;&#x7528;&#x8DDF;&#x610F;&#x4E49;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709; npx&#xFF1F;&#x4EC0;&#x4E48;&#x573A;&#x666F;&#x4F7F;&#x7528;&#xFF1F;</a>&#x3002;</li>
<li><code>nrm</code>&#xFF1A;&#x662F;&#x4E00;&#x4E2A; <code>npm</code> &#x6E90;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5207;&#x6362; <code>npm</code> &#x6E90;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x5B98;&#x65B9;&#x6E90;&#xFF0C;&#x5F53; <code>npm</code> &#x4E0B;&#x8F7D;&#x5305;&#x8FC7;&#x6162;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5207;&#x6362;&#x5230;&#x7B2C;&#x4E09;&#x65B9;&#x6E90;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;&#x6DD8;&#x5B9D;&#x3001;&#x79D1;&#x5927;&#x2026;&#xFF09;&#xFF0C;&#x8FD8;&#x6709;&#x516C;&#x53F8;&#x79C1;&#x6709;&#x6E90;&#x5730;&#x5740;&#x7B49;&#x7B49;&#x3002;</li>
<li><code>nvm</code>&#xFF1A;<code>node</code> &#x7248;&#x672C;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF1A;&#x4E00;&#x4E2A; <code>nvm</code> &#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x591A;&#x4E2A; <code>node</code> &#x7248;&#x672C;&#xFF08;&#x5305;&#x542B; <code>npm</code> &#x4E0E; <code>npx</code>&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;&#x7684; <code>&#x5B89;&#x88C5;</code>&#x3001;<code>&#x5207;&#x6362;</code> &#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684; <code>node</code>&#x3002;</li>
</ul>
<h4 id="&#x4E8C;&#x3001;node&#x3001;nvm&#x3001;npm&#x3001;npx&#x3001;nrm-&#x5173;&#x7CFB;"><a href="#&#x4E8C;&#x3001;node&#x3001;nvm&#x3001;npm&#x3001;npx&#x3001;nrm-&#x5173;&#x7CFB;" class="headerlink" title="&#x4E8C;&#x3001;node&#x3001;nvm&#x3001;npm&#x3001;npx&#x3001;nrm &#x5173;&#x7CFB;"></a>&#x4E8C;&#x3001;<code>node</code>&#x3001;<code>nvm</code>&#x3001;<code>npm</code>&#x3001;<code>npx</code>&#x3001;<code>nrm</code> &#x5173;&#x7CFB;</h4><ul>
<li><code>nvm</code> &#x7BA1;&#x7406; <code>node</code> (&#x5305;&#x542B; <code>npm</code> &#x4E0E; <code>npx</code>) &#x7684;&#x7248;&#x672C;&#xFF0C;<code>npm</code> &#x53EF;&#x4EE5;&#x7BA1;&#x7406; <code>node</code> &#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x63D2;&#x4EF6;&#xFF0C;<code>nrm</code> &#x53EF;&#x4EE5;&#x7BA1;&#x7406; <code>npm</code> &#x7684;&#x6E90;&#x5730;&#x5740;&#xFF08;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>npm</code> &#x81EA;&#x5E26;&#x547D;&#x4EE4;&#x7BA1;&#x7406;&#xFF0C;&#x770B;&#x4E2A;&#x4EBA;&#x4E60;&#x60EF;&#xFF09;&#x3002;</li>
<li>&#x5207;&#x6362;&#x4E0D;&#x540C;&#x7684; <code>node</code> &#x7248;&#x672C;&#xFF0C;<code>npm</code> &#x4E0E; <code>npx</code> &#x7684;&#x7248;&#x672C;&#x4E5F;&#x4F1A;&#x8DDF;&#x7740;&#x53D8;&#x5316;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm use v8.16.0</span><br><span class="line">Now using node v8.16.0 (npm v6.4.1)</span><br><span class="line"></span><br><span class="line">$ nvm use v14.15.4</span><br><span class="line">Now using node v14.15.4 (npm v6.14.10)</span><br><span class="line"></span><br><span class="line">$ nvm use v18.6.0</span><br><span class="line">Now using node v18.6.0 (npm v8.13.2)</span><br></pre></td></tr></table></figure>

<h4 id="&#x4E09;&#x3001;&#x5B89;&#x88C5;-nvm"><a href="#&#x4E09;&#x3001;&#x5B89;&#x88C5;-nvm" class="headerlink" title="&#x4E09;&#x3001;&#x5B89;&#x88C5; nvm"></a>&#x4E09;&#x3001;&#x5B89;&#x88C5; <code>nvm</code></h4><ul>
<li><a href="/external_links/d7ed524ee51c85a853834f14a071765f.html" target="blank" rel="noopener">nvm &#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF0C;<a href="/external_links/fd7d68fe7c47c5cd3060836645cee808.html" target="blank" rel="noopener">nvm &#x5378;&#x8F7D;&#x8BE6;&#x7EC6;&#x6D41;&#x7A0B;</a>&#xFF0C;<code>Mac</code> &#x63A8;&#x8350; <code>HomeBrew</code> &#x5B89;&#x88C5;&#xFF0C;&#x65B9;&#x4FBF;&#x66F4;&#x65B0;&#x7BA1;&#x7406;&#xFF0C;&#x5176;&#x4ED6;&#x968F;&#x610F;&#x80FD;&#x88C5;&#x4E0A;&#x5C31;&#x884C;&#xFF0C;&#x9644;&#x5E26;&#xFF1A;<a href="/external_links/70b8b4122acf51a39dc825144e3438f6.html" target="blank" rel="noopener">Mac Homebrew &#x5B89;&#x88C5;&#x4E0E;&#x5378;&#x8F7D;</a>&#x3002;</li>
<li><h3 id="&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E00;&#xFF1A;Mac-HomeBrew-&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E00;&#xFF1A;Mac-HomeBrew-&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E00;&#xFF1A;Mac HomeBrew &#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E00;&#xFF1A;<code>Mac HomeBrew</code> &#x5B89;&#x88C5;</h3></li>
</ul>
<p>&#x5982;&#x679C;&#x5B89;&#x88C5;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x6309;&#x7167; <code>&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E09;</code> &#x4E2D;&#x9664;&#x5B89;&#x88C5;&#x90E8;&#x5206;&#x5916;&#xFF0C;&#x914D;&#x7F6E;&#x597D;&#x5F53;&#x524D;&#x89E3;&#x91CA;&#x5668;&#x9700;&#x8981;&#x7684; <code>nvm</code> &#x914D;&#x7F6E;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ brew install nvm</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;&#x547D;&#x4EE4;&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;&#x547D;&#x4EE4;&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;&#x547D;&#x4EE4;&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E8C;&#xFF1A;&#x547D;&#x4EE4;&#x5B89;&#x88C5;</h3></li>
</ul>
<p>&#x4F46;&#x662F;&#x8FD9;&#x8FB9;&#x7F51;&#x4E0D;&#x662F;&#x5F88;&#x597D;&#xFF0C;&#x4E00;&#x76F4;&#x505C;&#x5728;&#x5B89;&#x88C5;&#x9875;&#x9762;&#x6CA1;&#x52A8;&#x9759;&#xFF0C;&#x6240;&#x4EE5;&#x540E;&#x9762;&#x9009;&#x62E9;&#x4E86; <code>&#x624B;&#x52A8;&#x5B89;&#x88C5;</code>&#x3002;</p>
<p>&#x5982;&#x679C;&#x5B89;&#x88C5;&#x6CA1;&#x95EE;&#x9898;&#xFF0C;&#x6309;&#x7167; <code>&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E09;</code> &#x4E2D;&#x9664;&#x5B89;&#x88C5;&#x90E8;&#x5206;&#x5916;&#xFF0C;&#x914D;&#x7F6E;&#x597D;&#x5F53;&#x524D;&#x89E3;&#x91CA;&#x5668;&#x9700;&#x8981;&#x7684; <code>nvm</code> &#x914D;&#x7F6E;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x5B89;&#x88C5;&#x8DEF;&#x5F84;&#xFF0C;&#x5728; <a href="/external_links/d7ed524ee51c85a853834f14a071765f.html" target="blank" rel="noopener">nvm &#x5B98;&#x65B9;&#x6587;&#x6863;</a> &#x4E2D;&#x6709;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash</span><br><span class="line">&#x6216;</span><br><span class="line">$ wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>&#x9644;&#x5E26;&#xFF1A;&#xFF08;&#x4E0B;&#x9762;&#x540E;&#x9762;&#x627E;&#x5230;&#x7684;&#x66FF;&#x4EE3;&#x65B9;&#x6848;&#xFF0C;&#x5B89;&#x88C5;&#x6E90;&#x90FD;&#x6362;&#x6210;&#x56FD;&#x5185;&#x7684;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x65F6;&#xFF0C;&#x7F51;&#x7EDC;&#x4E0D;&#x884C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#xFF09;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x5B89;&#x88C5;</span><br><span class="line">$ bash -c &quot;$(curl -fsSL https://gitee.com/RubyKids/nvm-cn/raw/master/install.sh)&quot;</span><br><span class="line"></span><br><span class="line"># &#x5378;&#x8F7D;</span><br><span class="line">$ bash -c &quot;$(curl -fsSL https://gitee.com/RubyKids/nvm-cn/raw/master/uninstall.sh)&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li><h3 id="&#x63A8;&#x8350;-&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E09;&#xFF1A;&#x624B;&#x52A8;&#x5B89;&#x88C5;"><a href="#&#x63A8;&#x8350;-&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E09;&#xFF1A;&#x624B;&#x52A8;&#x5B89;&#x88C5;" class="headerlink" title="(&#x63A8;&#x8350;)&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E09;&#xFF1A;&#x624B;&#x52A8;&#x5B89;&#x88C5;"></a>(<code>&#x63A8;&#x8350;</code>)&#x5B89;&#x88C5;&#x65B9;&#x5F0F;&#x4E09;&#xFF1A;&#x624B;&#x52A8;&#x5B89;&#x88C5;</h3></li>
</ul>
<p>1&#x3001;<a href="/external_links/77e69f53bbf5d476e1cef32c4ced6316.html" target="blank" rel="noopener">&#x4E0B;&#x8F7D;&#x5B98;&#x65B9; Git nvm</a></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/533ab76db170b938f67df07617eff487a8d8c63a39f53fde7537cd91260820a4" alt="image.png"></p>
<p>2&#x3001;&#x89E3;&#x538B;&#x6587;&#x4EF6;&#x627E;&#x5230; <code>install.sh</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/26b3d3cfca9cdccefd0a02a9f8afecc8fa8c30bdfb82589aaf0789c7a60d571c" alt="image.png"></p>
<p>3&#x3001;&#x6267;&#x884C;&#x547D;&#x4EE4;&#xFF0C;&#x5C06; <code>install.sh</code> &#x8DEF;&#x5F84;&#x653E;&#x5230;&#x4E0B;&#x9762;&#x547D;&#x4EE4;&#x4E2D;&#x56DE;&#x8F66;&#x8FD0;&#x884C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ sh xxx/instal.sh</span><br></pre></td></tr></table></figure>

<p>4&#x3001;&#x7136;&#x540E;&#x7B49;&#x5F85;&#xFF0C;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x3002;<code>(&#x6CA1;&#x6709;&#x63D0;&#x793A;&#x5219;&#x770B;&#x4E0B;&#x4E00;&#x6B65;)</code> &#x5982;&#x679C;&#x63D0;&#x793A;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x89E3;&#x91CA;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5F53;&#x524D;&#x89E3;&#x91CA;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6E05;&#x695A;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0; <a href="https://dev.newban.cn/7047006501763809293">Shell &#x5207;&#x6362;&#x89E3;&#x91CA;&#x5668;&#xFF0C;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x89E3;&#x91CA;&#x5668;</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error&#x590D;&#x5236;&#x4EE3;&#x7801;=&gt; Profile not found. Tried ~/.bashrc, ~/.bash_profile, ~/.zshrc, and ~/.profile.</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1c9894dd0000b3da398a1d5c07c87e329526cc1c7f000795a422530e93f84350" alt="2022-07-23-12-51-55.png"></p>
<pre><code>+ &#x77E5;&#x9053;&#x5C5E;&#x4E8E;&#x4EC0;&#x4E48;&#x89E3;&#x91CA;&#x5668;&#x4E4B;&#x540E;&#xFF0C;&#x6CA1;&#x6709;&#x5219;&#x624B;&#x52A8;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5; `zsh` &#x89E3;&#x91CA;&#x5668;&#x4E3E;&#x4F8B;&#xFF1A;

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x521B;&#x5EFA; zsh &#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line">$ touch ~/.zshrc</span><br><span class="line"></span><br><span class="line"># &#x7F16;&#x8F91;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span><br><span class="line">$ vim ~/.zshrc</span><br><span class="line"></span><br><span class="line">```5&#x3001;&#x5982;&#x679C;&#x89E3;&#x91CA;&#x5668;&#x5B58;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5219;&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5373;&#x53EF;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+ &#x5C06; `nvm` &#x7684;&#x914D;&#x7F6E;&#x6DFB;&#x52A0;&#x5230; `~/.zshrc` &#x91CC;&#x9762;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x4EE5;&#x5B89;&#x88C5;&#x65F6;&#x63D0;&#x793A;&#x6DFB;&#x52A0;&#x7684;&#x914D;&#x7F6E;&#x4E3A;&#x51C6;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x62F7;&#x8D1D;&#x4E00;&#x4E0B;&#x5F53;&#x524D;&#x5B89;&#x88C5;&#x6240;&#x63D0;&#x793A;&#x7684;&#x3002;</span><br><span class="line">+ &#x4E0B;&#x9762;&#x914D;&#x7F6E;&#x4E8C;&#x9009;&#x4E00;&#x5373;&#x53EF;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x70B9;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;&#x5728; `$ sh xxx/instal.sh` &#x8FDB;&#x884C;&#x5B89;&#x88C5;&#x4E4B;&#x524D;&#x5982;&#x679C;&#x672C;&#x5730;&#x5B58;&#x5728;&#x5F53;&#x524D;&#x89E3;&#x91CA;&#x5668;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E00;&#x822C;&#x4F1A;&#x81EA;&#x52A8;&#x5C06; `2` &#x914D;&#x7F6E;&#x76F4;&#x63A5;&#x8FDB;&#x884C;&#x8FFD;&#x52A0;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x8FDB;&#x884C;&#x6DFB;&#x52A0;&#x3002;</span><br><span class="line">+ &#x5728;&#x5B89;&#x88C5;&#x8FD9;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5148;&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x624B;&#x52A8;&#x8D34;&#x8FDB;&#x53BB;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E4B;&#x540E;&#xFF0C;&#x5728;&#x91CD;&#x65B0;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x4E00;&#x904D; `$ sh xxx/instal.sh` &#x5B89;&#x88C5;&#xFF0C;&#x53CD;&#x6B63;&#x4E5F;&#x53EA;&#x662F;&#x8986;&#x76D6;&#x4E00;&#x904D;&#xFF0C;&#x4E5F;&#x4F1A;&#x81EA;&#x52A8;&#x8FFD;&#x52A0;&#x8FDB;&#x53BB;&#xFF0C;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x914D;&#x7F6E;&#x81EA;&#x5DF1;&#x770B;&#x770B;&#x3002;</span><br><span class="line">+ &#x53E6;&#x5916;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x597D;&#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x63A8;&#x5E7F;&#x66F4;&#x6362;&#x4E00;&#x4E0B; `nvm` &#x7684;&#x955C;&#x50CF;&#x5730;&#x5740;&#x4E3A;&#x6DD8;&#x5B9D;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x5B98;&#x65B9; [nvm &#x5207;&#x6362;&#x4E3A;&#x6DD8;&#x5B9D;&#x955C;&#x50CF;](https://blog.csdn.net/zz00008888/article/details/132412685) &#x3002;</span><br></pre></td></tr></table></figure>

shell&#x590D;&#x5236;&#x4EE3;&#x7801;# 1&#x3001;&#x8FD9;&#x662F;&#x672C;&#x5730;&#x4E0D;&#x5B58;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x793A;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x914D;&#x7F6E;
export NVM_DIR=&quot;$HOME/.nvm&quot;
[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm

# 2&#x3001;&#x8FD9;&#x662F;&#x672C;&#x5730;&#x5B58;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x63D0;&#x793A;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x7684;&#x914D;&#x7F6E;&#xFF08;&#x63A8;&#x8350;&#xFF09;
export NVM_DIR=&quot;$HOME/.nvm&quot;
[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm
[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ &#x7136;&#x540E;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x4E00;&#x904D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x5176;&#x751F;&#x6548;&#xFF1A;</span><br></pre></td></tr></table></figure>

shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ source ~/.zshrc

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre><p>shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm -v<br>&#x6216;<br>$ nvm use system</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">![image.png](https://gitee.com/songjianzaina/juejin_p3/raw/master/img/79ec57565b557f47c80344cbc8d30b3cdb6ffbf02b43ff16e5048adc33a9041a)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### &#x56DB;&#x3001;&#x4F7F;&#x7528; `nvm`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* &#x5B89;&#x88C5;&#x6700;&#x65B0;&#x7A33;&#x5B9A;&#x7248; `node`&#xFF0C;&#x5F53;&#x524D;&#x662F; `node v12.9.1 (npm v7.9.0)`</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm install stable</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;&#xFF0C;&#x53EF;&#x6A21;&#x7CCA;&#x5B89;&#x88C5;&#xFF0C;&#x5982;&#xFF1A;&#x5B89;&#x88C5; `v4.4.0`&#xFF0C;&#x65E2;&#x53EF; `$ nvm install v4.4.0`&#xFF0C;&#x53C8;&#x53EF; `$ nvm install 4.4`</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm install <version></version></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x5220;&#x9664;&#x5DF2;&#x5B89;&#x88C5;&#x7684;&#x6307;&#x5B9A;&#x7248;&#x672C;&#xFF0C;&#x8BED;&#x6CD5;&#x4E0E; `install` &#x7528;&#x6CD5;&#x4E00;&#x81F4;</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm uninstall <version></version></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x5207;&#x6362;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x7684;&#x7248;&#x672C; `node`</span><br></pre></td></tr></table></figure>

<p>csharp&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x4E34;&#x65F6;&#x7248;&#x672C; - &#x53EA;&#x5728;&#x5F53;&#x524D;&#x7A97;&#x53E3;&#x751F;&#x6548;&#x6307;&#x5B9A;&#x7248;&#x672C;<br>$ nvm use <version></version></p>
<p>// &#x6C38;&#x4E45;&#x7248;&#x672C; - &#x6240;&#x6709;&#x7A97;&#x53E3;&#x751F;&#x6548;&#x6307;&#x5B9A;&#x7248;&#x672C;<br>$ nvm alias default <version></version></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">`&#x6CE8;&#x610F;`&#xFF1A;&#x5728;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x7A97;&#x53E3;&#x8FDB;&#x884C;&#x5207;&#x6362;&#x4E4B;&#x540E;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x7A97;&#x53E3;&#x6216;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x7A97;&#x53E3; `&#x9700;&#x8981;&#x5173;&#x6389;&#x5DE5;&#x5177;&#xFF0C;&#x91CD;&#x542F;&#x624D;&#x80FD;&#x751F;&#x6548;`&#x3002;&#xFF08;&#x4F8B;&#x5982; `VSCode` &#x5185;&#x6216;&#x5916;&#x90E8;&#x547D;&#x4EE4;&#x5207;&#x6362;&#x4E4B;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x542F; `VSCode`&#xFF0C;&#x624D;&#x80FD;&#x6B63;&#x5E38;&#x751F;&#x6548;&#xFF0C;&#x5426;&#x5219;&#x6216;&#x5904;&#x4E8E; `&#x4E34;&#x65F6;&#x751F;&#x6548;&#x72B6;&#x6001;`&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5728; `VSCode` &#x4E2D;&#x91CD;&#x65B0;&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x884C;&#x67E5;&#x770B;&#x7248;&#x672C;&#x8FD8;&#x4F1A;&#x662F;&#x65E7;&#x7248;&#x672C;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x8981;&#x91CD;&#x542F;&#x3002;&#xFF09;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x8FD9;&#x91CC;&#x7684; `&#x91CD;&#x542F;` &#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5173;&#x6389;&#x7A97;&#x53E3;&#x91CD;&#x542F;&#xFF0C;&#x6CA1;&#x6709;&#x9000;&#x51FA;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;&#x662F;&#x5B8C;&#x5168;&#x9000;&#x51FA;&#x6740;&#x6B7B;&#x5DE5;&#x5177;&#x8FDB;&#x7A0B;&#xFF0C;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x3002;</span><br><span class="line">* &#x5217;&#x51FA;&#x6240;&#x6709;&#x5B89;&#x88C5;&#x7684;&#x7248;&#x672C;</span><br></pre></td></tr></table></figure>

<p>shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm ls</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x5217;&#x51FA;&#x6240;&#x6709;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7248;&#x672C;&#xFF08;&#x5B98;&#x65B9; `node version list`&#xFF09;</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm ls-remote</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x663E;&#x793A;&#x5F53;&#x524D;&#x7684;&#x7248;&#x672C;</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm current</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x7ED9;&#x4E0D;&#x540C;&#x7684;&#x7248;&#x672C;&#x53F7;&#x6DFB;&#x52A0;&#x522B;&#x540D;</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm alias <name> <version></version></name></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x5220;&#x9664;&#x5DF2;&#x5B9A;&#x4E49;&#x7684;&#x522B;&#x540D;</span><br></pre></td></tr></table></figure>

<p>shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm unalias <name></name></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x5728;&#x5F53;&#x524D;&#x7248;&#x672C; `node` &#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x91CD;&#x65B0;&#x5168;&#x5C40;&#x5B89;&#x88C5;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x53F7;&#x7684; `npm` &#x5305;</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm reinstall-packages <version></version></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* &#x67E5;&#x770B;&#x66F4;&#x591A;&#x547D;&#x4EE4;&#x53EF;&#x5728;&#x7EC8;&#x7AEF;&#x8F93;&#x5165;</span><br></pre></td></tr></table></figure>

<p>ruby&#x590D;&#x5236;&#x4EE3;&#x7801;$ nvm</p>
<pre><code>

**&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:** [&#x6398;&#x91D1;](https://juejin.cn/post/7000652162950758431)

*[&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;](https://dev.newban.cn/)*</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7000578331485667359.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7000578331485667359.html" itemprop="url">Springboot 解决跨域的四种姿势</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-26T11:40:30+08:00">
                2021-08-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x7B80;&#x4ECB;"><a href="#&#x7B80;&#x4ECB;" class="headerlink" title="&#x7B80;&#x4ECB;"></a>&#x7B80;&#x4ECB;</h2><p>&#x8DE8;&#x57DF;&#x6211;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x5F00;&#x95E8;&#x89C1;&#x5C71;&#x76F4;&#x63A5;&#x89E3;&#x51B3;&#x8DE8;&#x57DF;&#x7684;&#x51E0;&#x79CD;&#x59FF;&#x52BF;&#xFF0C;&#x90A3;&#x5C31;&#x4E0A;&#x59FF;&#x52BF;</p>
<h2 id="&#x59FF;&#x52BF;"><a href="#&#x59FF;&#x52BF;" class="headerlink" title="&#x59FF;&#x52BF;"></a>&#x59FF;&#x52BF;</h2><h4 id="&#x59FF;&#x52BF;&#x4E00;"><a href="#&#x59FF;&#x52BF;&#x4E00;" class="headerlink" title="&#x59FF;&#x52BF;&#x4E00;"></a>&#x59FF;&#x52BF;&#x4E00;</h4><blockquote>
<p>&#x5B9E;&#x73B0;WebMvcConfigurer#addCorsMappings&#x7684;&#x65B9;&#x6CD5;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">public class CorsConfig implements WebMvcConfigurer {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void addCorsMappings(CorsRegistry registry) {</span><br><span class="line">        registry.addMapping(&quot;/**&quot;)</span><br><span class="line">                .allowedOrigins(&quot;*&quot;)</span><br><span class="line">                .allowedMethods(&quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;)</span><br><span class="line">                .allowCredentials(true)</span><br><span class="line">                .maxAge(3600)</span><br><span class="line">                .allowedHeaders(&quot;*&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x59FF;&#x52BF;&#x4E8C;"><a href="#&#x59FF;&#x52BF;&#x4E8C;" class="headerlink" title="&#x59FF;&#x52BF;&#x4E8C;"></a>&#x59FF;&#x52BF;&#x4E8C;</h4><blockquote>
<p>&#x91CD;&#x65B0;&#x6CE8;&#x5165;CorsFilter</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.web.cors.CorsConfiguration;</span><br><span class="line">import org.springframework.web.cors.UrlBasedCorsConfigurationSource;</span><br><span class="line">import org.springframework.web.filter.CorsFilter;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x89E3;&#x51B3;&#x8DE8;&#x57DF;</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class CorsFilterConfig {</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x5F00;&#x542F;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x62E6;&#x622A;&#x5668;</span><br><span class="line">     *</span><br><span class="line">     * @date 2021/4/29 9:50</span><br><span class="line">     */</span><br><span class="line">    @Bean</span><br><span class="line">    public CorsFilter corsFilter() {</span><br><span class="line">        //&#x521B;&#x5EFA;CorsConfiguration&#x5BF9;&#x8C61;&#x540E;&#x6DFB;&#x52A0;&#x914D;&#x7F6E;</span><br><span class="line">        CorsConfiguration corsConfiguration = new CorsConfiguration();</span><br><span class="line">        //&#x8BBE;&#x7F6E;&#x653E;&#x884C;&#x54EA;&#x4E9B;&#x539F;&#x59CB;&#x57DF;</span><br><span class="line">        corsConfiguration.addAllowedOrigin(&quot;*&quot;);</span><br><span class="line">        //&#x653E;&#x884C;&#x54EA;&#x4E9B;&#x539F;&#x59CB;&#x8BF7;&#x6C42;&#x5934;&#x90E8;&#x4FE1;&#x606F;</span><br><span class="line">        corsConfiguration.addAllowedHeader(&quot;*&quot;);</span><br><span class="line">        //&#x653E;&#x884C;&#x54EA;&#x4E9B;&#x8BF7;&#x6C42;&#x65B9;&#x5F0F;</span><br><span class="line">        corsConfiguration.addAllowedMethod(&quot;*&quot;);</span><br><span class="line"></span><br><span class="line">        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();</span><br><span class="line">        //2. &#x6DFB;&#x52A0;&#x6620;&#x5C04;&#x8DEF;&#x5F84;</span><br><span class="line">        source.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);</span><br><span class="line">        return new CorsFilter(source);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x59FF;&#x52BF;&#x4E09;"><a href="#&#x59FF;&#x52BF;&#x4E09;" class="headerlink" title="&#x59FF;&#x52BF;&#x4E09;"></a>&#x59FF;&#x52BF;&#x4E09;</h4><blockquote>
<p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;filter&#x89E3;&#x51B3;&#x8DE8;&#x57DF;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;@Slf4j</span><br><span class="line">@Component</span><br><span class="line">@WebFilter(urlPatterns = { &quot;/*&quot; }, filterName = &quot;headerFilter&quot;)</span><br><span class="line">public class HeaderFilter implements Filter {</span><br><span class="line">    @Override</span><br><span class="line">    public void doFilter(ServletRequest request, ServletResponse resp, FilterChain chain) throws IOException, ServletException {</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) resp;</span><br><span class="line">        //&#x89E3;&#x51B3;&#x8DE8;&#x57DF;&#x8BBF;&#x95EE;&#x62A5;&#x9519;</span><br><span class="line">        response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);</span><br><span class="line">        response.setHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;POST, PUT, GET, OPTIONS, DELETE&quot;);</span><br><span class="line">        //&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span><br><span class="line">        response.setHeader(&quot;Access-Control-Max-Age&quot;, &quot;3600&quot;);</span><br><span class="line">        response.setHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, X-Requested-With, Content-Type, Accept, client_id, uuid, Authorization&quot;);</span><br><span class="line">        // &#x652F;&#x6301;HTTP 1.1.</span><br><span class="line">        response.setHeader(&quot;Cache-Control&quot;, &quot;no-cache, no-store, must-revalidate&quot;);</span><br><span class="line">        // &#x652F;&#x6301;HTTP 1.0. response.setHeader(&quot;Expires&quot;, &quot;0&quot;);</span><br><span class="line">        response.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);</span><br><span class="line">        // &#x7F16;&#x7801;</span><br><span class="line">        response.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        chain.doFilter(request, resp);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void init(FilterConfig filterConfig) {</span><br><span class="line">        log.info(&quot;&#x8DE8;&#x57DF;&#x8FC7;&#x6EE4;&#x5668;&#x542F;&#x52A8;&quot;);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void destroy() {</span><br><span class="line">        log.info(&quot;&#x8DE8;&#x57DF;&#x8FC7;&#x6EE4;&#x5668;&#x9500;&#x6BC1;&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x59FF;&#x52BF;&#x56DB;"><a href="#&#x59FF;&#x52BF;&#x56DB;" class="headerlink" title="&#x59FF;&#x52BF;&#x56DB;"></a>&#x59FF;&#x52BF;&#x56DB;</h4><blockquote>
<p>&#x4F7F;&#x7528;CrossOrigin &#x6CE8;&#x89E3;</p>
</blockquote>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x5355;&#x4E2A;&#x65B9;&#x6CD5;&#x4E0A;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x7C7B;&#x4E0A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;Target({ElementType.TYPE, ElementType.METHOD})</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">public @interface CrossOrigin {</span><br><span class="line"></span><br><span class="line">	/** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */</span><br><span class="line">	@Deprecated</span><br><span class="line">	String[] DEFAULT_ORIGINS = {&quot;*&quot;};</span><br><span class="line"></span><br><span class="line">	/** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */</span><br><span class="line">	@Deprecated</span><br><span class="line">	String[] DEFAULT_ALLOWED_HEADERS = {&quot;*&quot;};</span><br><span class="line"></span><br><span class="line">	/** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */</span><br><span class="line">	@Deprecated</span><br><span class="line">	boolean DEFAULT_ALLOW_CREDENTIALS = false;</span><br><span class="line"></span><br><span class="line">	/** @deprecated as of Spring 5.0, in favor of {@link CorsConfiguration#applyPermitDefaultValues} */</span><br><span class="line">	@Deprecated</span><br><span class="line">	long DEFAULT_MAX_AGE = 1800;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Alias for {@link #origins}.</span><br><span class="line">	 */</span><br><span class="line">	@AliasFor(&quot;origins&quot;)</span><br><span class="line">	String[] value() default {};</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * A list of origins for which cross-origin requests are allowed. Please,</span><br><span class="line">	 * see {@link CorsConfiguration#setAllowedOrigins(List)} for details.</span><br><span class="line">	 * &lt;p&gt;By default all origins are allowed unless {@code originPatterns} is</span><br><span class="line">	 * also set in which case {@code originPatterns} is used instead.</span><br><span class="line">	 */</span><br><span class="line">	@AliasFor(&quot;value&quot;)</span><br><span class="line">	String[] origins() default {};</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Alternative to {@link #origins()} that supports origins declared via</span><br><span class="line">	 * wildcard patterns. Please, see</span><br><span class="line">	 * @link CorsConfiguration#setAllowedOriginPatterns(List)} for details.</span><br><span class="line">	 * &lt;p&gt;By default this is not set.</span><br><span class="line">	 * @since 5.3</span><br><span class="line">	 */</span><br><span class="line">	String[] originPatterns() default {};</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * The list of request headers that are permitted in actual requests,</span><br><span class="line">	 * possibly {@code &quot;*&quot;}  to allow all headers.</span><br><span class="line">	 * &lt;p&gt;Allowed headers are listed in the {@code Access-Control-Allow-Headers}</span><br><span class="line">	 * response header of preflight requests.</span><br><span class="line">	 * &lt;p&gt;A header name is not required to be listed if it is one of:</span><br><span class="line">	 * {@code Cache-Control}, {@code Content-Language}, {@code Expires},</span><br><span class="line">	 * {@code Last-Modified}, or {@code Pragma} as per the CORS spec.</span><br><span class="line">	 * &lt;p&gt;By default all requested headers are allowed.</span><br><span class="line">	 */</span><br><span class="line">	String[] allowedHeaders() default {};</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * The List of response headers that the user-agent will allow the client</span><br><span class="line">	 * to access on an actual response, other than &quot;simple&quot; headers, i.e.</span><br><span class="line">	 * {@code Cache-Control}, {@code Content-Language}, {@code Content-Type},</span><br><span class="line">	 * {@code Expires}, {@code Last-Modified}, or {@code Pragma},</span><br><span class="line">	 * &lt;p&gt;Exposed headers are listed in the {@code Access-Control-Expose-Headers}</span><br><span class="line">	 * response header of actual CORS requests.</span><br><span class="line">	 * &lt;p&gt;The special value {@code &quot;*&quot;} allows all headers to be exposed for</span><br><span class="line">	 * non-credentialed requests.</span><br><span class="line">	 * &lt;p&gt;By default no headers are listed as exposed.</span><br><span class="line">	 */</span><br><span class="line">	String[] exposedHeaders() default {};</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * The list of supported HTTP request methods.</span><br><span class="line">	 * &lt;p&gt;By default the supported methods are the same as the ones to which a</span><br><span class="line">	 * controller method is mapped.</span><br><span class="line">	 */</span><br><span class="line">	RequestMethod[] methods() default {};</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Whether the browser should send credentials, such as cookies along with</span><br><span class="line">	 * cross domain requests, to the annotated endpoint. The configured value is</span><br><span class="line">	 * set on the {@code Access-Control-Allow-Credentials} response header of</span><br><span class="line">	 * preflight requests.</span><br><span class="line">	 * &lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; Be aware that this option establishes a high</span><br><span class="line">	 * level of trust with the configured domains and also increases the surface</span><br><span class="line">	 * attack of the web application by exposing sensitive user-specific</span><br><span class="line">	 * information such as cookies and CSRF tokens.</span><br><span class="line">	 * &lt;p&gt;By default this is not set in which case the</span><br><span class="line">	 * {@code Access-Control-Allow-Credentials} header is also not set and</span><br><span class="line">	 * credentials are therefore not allowed.</span><br><span class="line">	 */</span><br><span class="line">	String allowCredentials() default &quot;&quot;;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * The maximum age (in seconds) of the cache duration for preflight responses.</span><br><span class="line">	 * &lt;p&gt;This property controls the value of the {@code Access-Control-Max-Age}</span><br><span class="line">	 * response header of preflight requests.</span><br><span class="line">	 * &lt;p&gt;Setting this to a reasonable value can reduce the number of preflight</span><br><span class="line">	 * request/response interactions required by the browser.</span><br><span class="line">	 * A negative value means &lt;em&gt;undefined&lt;/em&gt;.</span><br><span class="line">	 * &lt;p&gt;By default this is set to {@code 1800} seconds (30 minutes).</span><br><span class="line">	 */</span><br><span class="line">	long maxAge() default -1;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x56DB;&#x79CD;&#x59FF;&#x52BF;&#x90FD;&#x5B66;&#x4F1A;&#x4E86;&#x4E48;&#xFF1F;&#x5B66;&#x4F1A;&#x4E86;&#x4E09;&#x8FDE;&#x54E6;</p>
<p>&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x5B66;&#x4E60;&#x66F4;&#x591A;&#x7684;&#x59FF;&#x52BF;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/47ad3445af97ab2f95d1c27e1a5f45d87e944f9767dbcb2b3f53fdef9785f168" alt="&#x626B;&#x7801;_&#x641C;&#x7D22;&#x8054;&#x5408;&#x4F20;&#x64AD;&#x6837;&#x5F0F;-&#x6807;&#x51C6;&#x8272;&#x7248;.png"></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/39f04064de9575d0860f795e281f71fa.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7000572501931589639.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7000572501931589639.html" itemprop="url">JUC并发-工具类详解 一、🎈CountDownLatch（</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-08-26T11:17:44+08:00">
                2021-08-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x8FD9;&#x662F;&#x6211;&#x53C2;&#x4E0E;8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;&#x7684;&#x7B2C;26&#x5929;&#xFF0C;&#x6D3B;&#x52A8;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#xFF1A;<a href="https://dev.newban.cn/6987962113788493831">8&#x6708;&#x66F4;&#x6587;&#x6311;&#x6218;</a></p>
<p><strong>&#x5F80;&#x671F;&#x63A8;&#x8350;</strong></p>
<ul>
<li><a href="/external_links/f60a4f6a3fcf8c772809304141f1887f.html" target="blank" rel="noopener">Java&#x57FA;&#x7840;&#x77E5;&#x8BC6;</a></li>
<li><a href="/external_links/ff688405326851f38aaa303c1dedb971.html" target="blank" rel="noopener">Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;</a></li>
</ul>
<h1 id="&#x4E00;&#x3001;&#x1F388;CountDownLatch&#xFF08;&#x51CF;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;"><a href="#&#x4E00;&#x3001;&#x1F388;CountDownLatch&#xFF08;&#x51CF;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;" class="headerlink" title="&#x4E00;&#x3001;&#x1F388;CountDownLatch&#xFF08;&#x51CF;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;"></a>&#x4E00;&#x3001;&#x1F388;CountDownLatch&#xFF08;&#x51CF;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;</h1><h2 id="1-1-&#x6982;&#x8FF0;"><a href="#1-1-&#x6982;&#x8FF0;" class="headerlink" title="1.1 &#x6982;&#x8FF0;"></a>1.1 &#x6982;&#x8FF0;</h2><p><strong>CountDownLatch&#x662F;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x8F85;&#x52A9;&#x7C7B;&#xFF0C;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#xFF0C;&#x4E00;&#x76F4;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x6267;&#x884C;</strong>&#x3002;</p>
<p><code>CountDownLatch</code>&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x521D;&#x59CB;&#x503C;&#x662F;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x91CF;&#x3002;&#x6BCF;&#x5F53;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7; <code>CountDown</code>&#x65B9;&#x6CD5;&#x6765;&#x8BA9;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;-1&#xFF0C;&#x5F53;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;&#x4E3A;0&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#xFF0C;&#x7136;&#x540E;&#x7EE7;&#x7EED;&#x6267;&#x884C; <code>await</code>&#x65B9;&#x6CD5; &#x4E4B;&#x540E;&#x7684;&#x8BED;&#x53E5;&#xFF0C;&#x5373;&#x5728;&#x9501;&#x4E0A;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#x5C31;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x5DE5;&#x4F5C;&#x4E86;&#x3002;</p>
<h2 id="1-2-&#x7C7B;&#x7684;&#x5185;&#x90E8;&#x7C7B;"><a href="#1-2-&#x7C7B;&#x7684;&#x5185;&#x90E8;&#x7C7B;" class="headerlink" title="1.2 &#x7C7B;&#x7684;&#x5185;&#x90E8;&#x7C7B;"></a>1.2 &#x7C7B;&#x7684;&#x5185;&#x90E8;&#x7C7B;</h2><p><code>CountDownLatch</code>&#x7C7B;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;Sync&#xFF0C;&#x7EE7;&#x627F;&#x81EA;<code>AbstractQueuedSynchronizer</code>&#xFF0C;&#x5176;&#x6E90;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private static final class Sync extends AbstractQueuedSynchronizer {</span><br><span class="line">    // &#x7248;&#x672C;&#x53F7;</span><br><span class="line">    private static final long serialVersionUID = 4982264981922014374L;</span><br><span class="line">    </span><br><span class="line">    // &#x6784;&#x9020;&#x5668;</span><br><span class="line">    Sync(int count) {</span><br><span class="line">        setState(count);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x8FD4;&#x56DE;&#x5F53;&#x524D;&#x8BA1;&#x6570;</span><br><span class="line">    int getCount() {</span><br><span class="line">        return getState();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x8BD5;&#x56FE;&#x5728;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x4E0B;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x72B6;&#x6001;</span><br><span class="line">    protected int tryAcquireShared(int acquires) {</span><br><span class="line">        return (getState() == 0) ? 1 : -1;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x8BD5;&#x56FE;&#x8BBE;&#x7F6E;&#x72B6;&#x6001;&#x6765;&#x53CD;&#x6620;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x4E0B;&#x7684;&#x4E00;&#x4E2A;&#x91CA;&#x653E;</span><br><span class="line">    protected boolean tryReleaseShared(int releases) {</span><br><span class="line">        // Decrement count; signal when transition to zero</span><br><span class="line">        // &#x65E0;&#x9650;&#x5FAA;&#x73AF;</span><br><span class="line">        for (;;) {</span><br><span class="line">            // &#x83B7;&#x53D6;&#x72B6;&#x6001;</span><br><span class="line">            int c = getState();</span><br><span class="line">            if (c == 0) // &#x6CA1;&#x6709;&#x88AB;&#x7EBF;&#x7A0B;&#x5360;&#x6709;</span><br><span class="line">                return false;</span><br><span class="line">            // &#x4E0B;&#x4E00;&#x4E2A;&#x72B6;&#x6001;</span><br><span class="line">            int nextc = c-1;</span><br><span class="line">            if (compareAndSetState(c, nextc)) // &#x6BD4;&#x8F83;&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x6210;&#x529F;</span><br><span class="line">                return nextc == 0;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x5BF9;`CountDownLatch`&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x4F1A;&#x8F6C;&#x53D1;&#x5230;&#x5BF9;Sync&#x6216;AQS&#x7684;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#xFF0C;</span><br><span class="line">&#x6240;&#x4EE5;&#xFF0C;AQS&#x5BF9;CountDownLatch&#x63D0;&#x4F9B;&#x652F;&#x6301;&#x3002;</span><br></pre></td></tr></table></figure>

<h2 id="1-3-&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;"><a href="#1-3-&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;" class="headerlink" title="1.3 &#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;"></a>1.3 &#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public CountDownLatch(int count) {</span><br><span class="line">    if (count &lt; 0) throw new IllegalArgumentException(&quot;count &lt; 0&quot;);</span><br><span class="line">    // &#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001;&#x6570;</span><br><span class="line">    this.sync = new Sync(count);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;:  </span><br><span class="line">&#x8BE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x6784;&#x9020;&#x4E00;&#x4E2A;&#x7528;&#x7ED9;&#x5B9A;&#x8BA1;&#x6570;&#x521D;&#x59CB;&#x5316;&#x7684;`CountDownLatch`&#xFF0C;</span><br><span class="line">&#x5E76;&#x4E14;&#x6784;&#x9020;&#x51FD;&#x6570;&#x5185;&#x5B8C;&#x6210;&#x4E86;sync&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x4E86;&#x72B6;&#x6001;&#x6570;&#x3002;</span><br></pre></td></tr></table></figure>

<h2 id="1-4-CountDownLatch&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;"><a href="#1-4-CountDownLatch&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;" class="headerlink" title="1.4 CountDownLatch&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;"></a>1.4 CountDownLatch&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;</h2><h3 id="1-4-1-countDown"><a href="#1-4-1-countDown" class="headerlink" title="1.4.1 countDown"></a>1.4.1 <strong>countDown</strong></h3><ul>
<li>&#x9012;&#x51CF;&#x9501;&#x5B58;&#x5668;&#x7684;&#x8BA1;&#x6570;&#xFF0C;<strong>&#x5982;&#x679C;&#x8BA1;&#x6570;&#x8FBE;&#x5230;&#x96F6;&#xFF0C;&#x5219;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;</strong>&#x3002;</li>
<li><strong>&#x5982;&#x679C;&#x5F53;&#x524D;&#x8BA1;&#x6570;&#x5927;&#x4E8E;&#x96F6;&#xFF0C;&#x5219;&#x9012;&#x51CF;</strong>&#x3002; &#x5982;&#x679C;&#x65B0;&#x8BA1;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x5219;&#x4E3A;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x76EE;&#x7684;&#x91CD;&#x65B0;&#x542F;&#x7528;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x3002;</li>
<li>&#x5982;&#x679C;&#x5F53;&#x524D;&#x8BA1;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x5219;&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public void countDown() {</span><br><span class="line">    sync.releaseShared(1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x5BF9;`countDown`&#x7684;&#x8C03;&#x7528;&#x8F6C;&#x6362;&#x4E3A;&#x5BF9;Sync&#x5BF9;&#x8C61;&#x7684;`releaseShared`(&#x4ECE;AQS&#x7EE7;&#x627F;&#x800C;&#x6765;)&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>releaseShared</code>&#x6E90;&#x7801;&#x5982;&#x4E0B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public final boolean releaseShared(int arg) {</span><br><span class="line">    if (tryReleaseShared(arg)) {</span><br><span class="line">        doReleaseShared();</span><br><span class="line">        return true;</span><br><span class="line">    }</span><br><span class="line">    return false;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x6B64;&#x51FD;&#x6570;&#x4F1A;&#x4EE5;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x91CA;&#x653E;&#x5BF9;&#x8C61;&#xFF0C;</span><br><span class="line">&#x5E76;&#x4E14;&#x5728;&#x51FD;&#x6570;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;&#x5230;`CountDownLatch`&#x7684;`tryReleaseShared`&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x80FD;&#x4F1A;&#x8C03;&#x7528;AQS&#x7684;`doReleaseShared`&#x51FD;&#x6570;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tryReleaseShared</code>&#x6E90;&#x7801;&#x5982;&#x4E0B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;protected boolean tryReleaseShared(int releases) {</span><br><span class="line">    // Decrement count; signal when transition to zero</span><br><span class="line">    // &#x65E0;&#x9650;&#x5FAA;&#x73AF;</span><br><span class="line">    for (;;) {</span><br><span class="line">        // &#x83B7;&#x53D6;&#x72B6;&#x6001;</span><br><span class="line">        int c = getState();</span><br><span class="line">        if (c == 0) // &#x6CA1;&#x6709;&#x88AB;&#x7EBF;&#x7A0B;&#x5360;&#x6709;</span><br><span class="line">            return false;</span><br><span class="line">        // &#x4E0B;&#x4E00;&#x4E2A;&#x72B6;&#x6001;</span><br><span class="line">        int nextc = c-1;</span><br><span class="line">        if (compareAndSetState(c, nextc)) // &#x6BD4;&#x8F83;&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x6210;&#x529F;</span><br><span class="line">            return nextc == 0;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x6B64;&#x51FD;&#x6570;&#x4F1A;&#x8BD5;&#x56FE;&#x8BBE;&#x7F6E;&#x72B6;&#x6001;&#x6765;&#x53CD;&#x6620;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x4E0B;&#x7684;&#x4E00;&#x4E2A;&#x91CA;&#x653E;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li>AQS&#x7684;<code>doReleaseShared</code>&#x7684;&#x6E90;&#x7801;&#x5982;&#x4E0B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private void doReleaseShared() {</span><br><span class="line">    /*</span><br><span class="line">        * Ensure that a release propagates, even if there are other</span><br><span class="line">        * in-progress acquires/releases.  This proceeds in the usual</span><br><span class="line">        * way of trying to unparkSuccessor of head if it needs</span><br><span class="line">        * signal. But if it does not, status is set to PROPAGATE to</span><br><span class="line">        * ensure that upon release, propagation continues.</span><br><span class="line">        * Additionally, we must loop in case a new node is added</span><br><span class="line">        * while we are doing this. Also, unlike other uses of</span><br><span class="line">        * unparkSuccessor, we need to know if CAS to reset status</span><br><span class="line">        * fails, if so rechecking.</span><br><span class="line">        */</span><br><span class="line">    // &#x65E0;&#x9650;&#x5FAA;&#x73AF;</span><br><span class="line">    for (;;) {</span><br><span class="line">        // &#x4FDD;&#x5B58;&#x5934;&#x7ED3;&#x70B9;</span><br><span class="line">        Node h = head;</span><br><span class="line">        if (h != null &amp;&amp; h != tail) { // &#x5934;&#x7ED3;&#x70B9;&#x4E0D;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x5934;&#x7ED3;&#x70B9;&#x4E0D;&#x4E3A;&#x5C3E;&#x7ED3;&#x70B9;</span><br><span class="line">            // &#x83B7;&#x53D6;&#x5934;&#x7ED3;&#x70B9;&#x7684;&#x7B49;&#x5F85;&#x72B6;&#x6001;</span><br><span class="line">            int ws = h.waitStatus; </span><br><span class="line">            if (ws == Node.SIGNAL) { // &#x72B6;&#x6001;&#x4E3A;SIGNAL</span><br><span class="line">                if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) // &#x4E0D;&#x6210;&#x529F;&#x5C31;&#x7EE7;&#x7EED;</span><br><span class="line">                    continue;            // loop to recheck cases</span><br><span class="line">                // &#x91CA;&#x653E;&#x540E;&#x7EE7;&#x7ED3;&#x70B9;</span><br><span class="line">                unparkSuccessor(h);</span><br><span class="line">            }</span><br><span class="line">            else if (ws == 0 &amp;&amp;</span><br><span class="line">                        !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) // &#x72B6;&#x6001;&#x4E3A;0&#x5E76;&#x4E14;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x7EE7;&#x7EED;</span><br><span class="line">                continue;                // loop on failed CAS</span><br><span class="line">        }</span><br><span class="line">        if (h == head) // &#x82E5;&#x5934;&#x7ED3;&#x70B9;&#x6539;&#x53D8;&#xFF0C;&#x7EE7;&#x7EED;&#x5FAA;&#x73AF;  </span><br><span class="line">            break;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x6B64;&#x51FD;&#x6570;&#x5728;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x4E0B;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x3002;</span><br></pre></td></tr></table></figure>

<p><strong>CountDownLatch</strong>&#x7684;<code>countDown</code>&#x8C03;&#x7528;&#x94FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b1b5d575ab82c7b6d8e6f930e9521ec8f8c22d02b903cd5686bcab4a52041d92" alt="6.png"></p>
<h3 id="1-4-2-await"><a href="#1-4-2-await" class="headerlink" title="1.4.2 await"></a>1.4.2 await</h3><ul>
<li><strong>&#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x76F4;&#x5230;&#x95E9;&#x9501;&#x5012;&#x8BA1;&#x65F6;&#x4E3A;&#x96F6;</strong>&#xFF0C;&#x9664;&#x975E;&#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;&#x3002;</li>
<li><strong>&#x5982;&#x679C;&#x5F53;&#x524D;&#x8BA1;&#x6570;&#x4E3A;&#x96F6;&#xFF0C;&#x5219;&#x6B64;&#x65B9;&#x6CD5;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002;&#x5373;await &#x65B9;&#x6CD5;&#x963B;&#x585E;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x88AB;&#x5524;&#x9192;&#xFF0C;&#x7EE7;&#x7EED;&#x6267;&#x884C;</strong>&#x3002;</li>
<li>&#x5982;&#x679C;&#x5F53;&#x524D;&#x8BA1;&#x6570;&#x5927;&#x4E8E;&#x96F6;&#xFF0C;&#x5219;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x51FA;&#x4E8E;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x76EE;&#x7684;&#x800C;&#x88AB;&#x7981;&#x7528;&#x5E76;&#x5904;&#x4E8E;&#x4F11;&#x7720;&#x72B6;&#x6001;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public void await() throws InterruptedException {</span><br><span class="line">    // &#x8F6C;&#x53D1;&#x5230;sync&#x5BF9;&#x8C61;&#x4E0A;</span><br><span class="line">    sync.acquireSharedInterruptibly(1);</span><br><span class="line">}</span><br><span class="line">&#x8BF4;&#x660E;:&#x5BF9;`CountDownLatch`&#x5BF9;&#x8C61;&#x7684;await&#x7684;&#x8C03;&#x7528;&#x4F1A;&#x8F6C;&#x53D1;&#x4E3A;&#x5BF9;Sync&#x7684;`acquireSharedInterruptibly`(&#x4ECE;AQS&#x7EE7;&#x627F;&#x7684;&#x65B9;&#x6CD5;)&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>acquireSharedInterruptibly</code>&#x6E90;&#x7801;&#x5982;&#x4E0B;:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public final void acquireSharedInterruptibly(int arg)</span><br><span class="line">        throws InterruptedException {</span><br><span class="line">    if (Thread.interrupted())</span><br><span class="line">        throw new InterruptedException();</span><br><span class="line">    if (tryAcquireShared(arg) &lt; 0)</span><br><span class="line">        doAcquireSharedInterruptibly(arg);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;:`acquireSharedInterruptibly`&#x53C8;&#x8C03;&#x7528;&#x4E86;</span><br><span class="line">`CountDownLatch`&#x7684;&#x5185;&#x90E8;&#x7C7B;Sync&#x7684;`tryAcquireShared`&#x548C;AQS&#x7684;`doAcquireSharedInterruptibly`&#x51FD;&#x6570;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tryAcquireShared</code>&#x51FD;&#x6570;&#x7684;&#x6E90;&#x7801;&#x5982;&#x4E0B;:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;protected int tryAcquireShared(int acquires) {</span><br><span class="line">    return (getState() == 0) ? 1 : -1;</span><br><span class="line">}</span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x51FD;&#x6570;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5224;&#x65AD;AQS&#x7684;state&#x662F;&#x5426;&#x4E3A;0&#xFF0C;&#x4E3A;0&#x5219;&#x8FD4;&#x56DE;1&#xFF0C;&#x4E0D;&#x4E3A;0&#x5219;&#x8FD4;&#x56DE;-1&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>doAcquireSharedInterruptibly</code>&#x51FD;&#x6570;&#x7684;&#x6E90;&#x7801;&#x5982;&#x4E0B;:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private void doAcquireSharedInterruptibly(int arg) throws InterruptedException {</span><br><span class="line">    // &#x6DFB;&#x52A0;&#x8282;&#x70B9;&#x81F3;&#x7B49;&#x5F85;&#x961F;&#x5217;</span><br><span class="line">    final Node node = addWaiter(Node.SHARED);</span><br><span class="line">    boolean failed = true;</span><br><span class="line">    try {</span><br><span class="line">        for (;;) { // &#x65E0;&#x9650;&#x5FAA;&#x73AF;</span><br><span class="line">            // &#x83B7;&#x53D6;node&#x7684;&#x524D;&#x9A71;&#x8282;&#x70B9;</span><br><span class="line">            final Node p = node.predecessor();</span><br><span class="line">            if (p == head) { // &#x524D;&#x9A71;&#x8282;&#x70B9;&#x4E3A;&#x5934;&#x7ED3;&#x70B9;</span><br><span class="line">                // &#x8BD5;&#x56FE;&#x5728;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x4E0B;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x72B6;&#x6001;</span><br><span class="line">                int r = tryAcquireShared(arg);</span><br><span class="line">                if (r &gt;= 0) { // &#x83B7;&#x53D6;&#x6210;&#x529F;</span><br><span class="line">                    // &#x8BBE;&#x7F6E;&#x5934;&#x7ED3;&#x70B9;&#x5E76;&#x8FDB;&#x884C;&#x7E41;&#x6B96;</span><br><span class="line">                    setHeadAndPropagate(node, r);</span><br><span class="line">                    // &#x8BBE;&#x7F6E;&#x8282;&#x70B9;next&#x57DF;</span><br><span class="line">                    p.next = null; // help GC</span><br><span class="line">                    failed = false;</span><br><span class="line">                    return;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            if (shouldParkAfterFailedAcquire(p, node) &amp;&amp;</span><br><span class="line">                parkAndCheckInterrupt()) // &#x5728;&#x83B7;&#x53D6;&#x5931;&#x8D25;&#x540E;&#x662F;&#x5426;&#x9700;&#x8981;&#x7981;&#x6B62;&#x7EBF;&#x7A0B;&#x5E76;&#x4E14;&#x8FDB;&#x884C;&#x4E2D;&#x65AD;&#x68C0;&#x67E5;</span><br><span class="line">                // &#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">                throw new InterruptedException();</span><br><span class="line">        }</span><br><span class="line">    } finally {</span><br><span class="line">        if (failed)</span><br><span class="line">            cancelAcquire(node);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x5728;AQS&#x7684;`doAcquireSharedInterruptibly`&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x518D;&#x6B21;&#x8C03;&#x7528;</span><br><span class="line">`CountDownLatch`&#x7684;&#x5185;&#x90E8;&#x7C7B;Sync&#x7684;`tryAcquireShared`&#x65B9;&#x6CD5;&#x548C;AQS&#x7684;`setHeadAndPropagate`&#x65B9;&#x6CD5;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>setHeadAndPropagate</code>&#x65B9;&#x6CD5;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private void setHeadAndPropagate(Node node, int propagate) {</span><br><span class="line">    // &#x83B7;&#x53D6;&#x5934;&#x7ED3;&#x70B9;</span><br><span class="line">    Node h = head; // Record old head for check below</span><br><span class="line">    // &#x8BBE;&#x7F6E;&#x5934;&#x7ED3;&#x70B9;</span><br><span class="line">    setHead(node);</span><br><span class="line">    /*</span><br><span class="line">        * Try to signal next queued node if:</span><br><span class="line">        *   Propagation was indicated by caller,</span><br><span class="line">        *     or was recorded (as h.waitStatus either before</span><br><span class="line">        *     or after setHead) by a previous operation</span><br><span class="line">        *     (note: this uses sign-check of waitStatus because</span><br><span class="line">        *      PROPAGATE status may transition to SIGNAL.)</span><br><span class="line">        * and</span><br><span class="line">        *   The next node is waiting in shared mode,</span><br><span class="line">        *     or we don&apos;t know, because it appears null</span><br><span class="line">        *</span><br><span class="line">        * The conservatism in both of these checks may cause</span><br><span class="line">        * unnecessary wake-ups, but only when there are multiple</span><br><span class="line">        * racing acquires/releases, so most need signals now or soon</span><br><span class="line">        * anyway.</span><br><span class="line">        */</span><br><span class="line">    // &#x8FDB;&#x884C;&#x5224;&#x65AD;</span><br><span class="line">    if (propagate &gt; 0 || h == null || h.waitStatus &lt; 0 ||</span><br><span class="line">        (h = head) == null || h.waitStatus &lt; 0) {</span><br><span class="line">        // &#x83B7;&#x53D6;&#x8282;&#x70B9;&#x7684;&#x540E;&#x7EE7;</span><br><span class="line">        Node s = node.next;</span><br><span class="line">        if (s == null || s.isShared()) // &#x540E;&#x7EE7;&#x4E3A;&#x7A7A;&#x6216;&#x8005;&#x4E3A;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;</span><br><span class="line">            // &#x4EE5;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x8FDB;&#x884C;&#x91CA;&#x653E;</span><br><span class="line">            doReleaseShared();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x65B9;&#x6CD5;&#x8BBE;&#x7F6E;&#x5934;&#x7ED3;&#x70B9;&#x5E76;&#x4E14;&#x91CA;&#x653E;&#x5934;&#x7ED3;&#x70B9;&#x540E;&#x9762;&#x7684;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x7ED3;&#x70B9;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x8C03;&#x7528;&#x5230;AQS&#x7684;`doReleaseShared`&#x65B9;&#x6CD5;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>doReleaseShared</code>&#x65B9;&#x6CD5;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private void doReleaseShared() {</span><br><span class="line">    /*</span><br><span class="line">        * Ensure that a release propagates, even if there are other</span><br><span class="line">        * in-progress acquires/releases.  This proceeds in the usual</span><br><span class="line">        * way of trying to unparkSuccessor of head if it needs</span><br><span class="line">        * signal. But if it does not, status is set to PROPAGATE to</span><br><span class="line">        * ensure that upon release, propagation continues.</span><br><span class="line">        * Additionally, we must loop in case a new node is added</span><br><span class="line">        * while we are doing this. Also, unlike other uses of</span><br><span class="line">        * unparkSuccessor, we need to know if CAS to reset status</span><br><span class="line">        * fails, if so rechecking.</span><br><span class="line">        */</span><br><span class="line">    // &#x65E0;&#x9650;&#x5FAA;&#x73AF;</span><br><span class="line">    for (;;) {</span><br><span class="line">        // &#x4FDD;&#x5B58;&#x5934;&#x7ED3;&#x70B9;</span><br><span class="line">        Node h = head;</span><br><span class="line">        if (h != null &amp;&amp; h != tail) { // &#x5934;&#x7ED3;&#x70B9;&#x4E0D;&#x4E3A;&#x7A7A;&#x5E76;&#x4E14;&#x5934;&#x7ED3;&#x70B9;&#x4E0D;&#x4E3A;&#x5C3E;&#x7ED3;&#x70B9;</span><br><span class="line">            // &#x83B7;&#x53D6;&#x5934;&#x7ED3;&#x70B9;&#x7684;&#x7B49;&#x5F85;&#x72B6;&#x6001;</span><br><span class="line">            int ws = h.waitStatus; </span><br><span class="line">            if (ws == Node.SIGNAL) { // &#x72B6;&#x6001;&#x4E3A;SIGNAL</span><br><span class="line">                if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) // &#x4E0D;&#x6210;&#x529F;&#x5C31;&#x7EE7;&#x7EED;</span><br><span class="line">                    continue;            // loop to recheck cases</span><br><span class="line">                // &#x91CA;&#x653E;&#x540E;&#x7EE7;&#x7ED3;&#x70B9;</span><br><span class="line">                unparkSuccessor(h);</span><br><span class="line">            }</span><br><span class="line">            else if (ws == 0 &amp;&amp;</span><br><span class="line">                        !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) // &#x72B6;&#x6001;&#x4E3A;0&#x5E76;&#x4E14;&#x4E0D;&#x6210;&#x529F;&#xFF0C;&#x7EE7;&#x7EED;</span><br><span class="line">                continue;                // loop on failed CAS</span><br><span class="line">        }</span><br><span class="line">        if (h == head) // &#x82E5;&#x5934;&#x7ED3;&#x70B9;&#x6539;&#x53D8;&#xFF0C;&#x7EE7;&#x7EED;&#x5FAA;&#x73AF;  </span><br><span class="line">            break;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x65B9;&#x6CD5;&#x5728;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x4E0B;&#x91CA;&#x653E;&#x3002;</span><br></pre></td></tr></table></figure>

<p><strong>CountDownLatch</strong>&#x7684;<code>await</code>&#x8C03;&#x7528;&#x94FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/f10519492eb5f7ac9d76fb8d1a7b4a4f3844a35c27e9df2f006c529f207ecbd0" alt="7.png"></p>
<h2 id="1-5-CountDownLatch&#x793A;&#x4F8B;"><a href="#1-5-CountDownLatch&#x793A;&#x4F8B;" class="headerlink" title="1.5 CountDownLatch&#x793A;&#x4F8B;"></a>1.5 CountDownLatch&#x793A;&#x4F8B;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line">class MyThread extends Thread {</span><br><span class="line">    private CountDownLatch countDownLatch;</span><br><span class="line">    </span><br><span class="line">    public MyThread(String name, CountDownLatch countDownLatch) {</span><br><span class="line">        super(name);</span><br><span class="line">        this.countDownLatch = countDownLatch;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    public void run() {</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + &quot; doing something&quot;);</span><br><span class="line">        try {</span><br><span class="line">            Thread.sleep(1000);</span><br><span class="line">        } catch (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + &quot; finish&quot;);</span><br><span class="line">        countDownLatch.countDown();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public class CountDownLatchDemo {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        CountDownLatch countDownLatch = new CountDownLatch(2);</span><br><span class="line">        MyThread t1 = new MyThread(&quot;t1&quot;, countDownLatch);</span><br><span class="line">        MyThread t2 = new MyThread(&quot;t2&quot;, countDownLatch);</span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        System.out.println(&quot;Waiting for t1 thread and t2 thread to finish&quot;);</span><br><span class="line">        try {</span><br><span class="line">            countDownLatch.await();</span><br><span class="line">        } catch (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }            </span><br><span class="line">        System.out.println(Thread.currentThread().getName() + &quot; continue&quot;);        </span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x8FD0;&#x884C;&#x7ED3;&#x679C;&#xFF1A;</span><br><span class="line">Waiting for t1 thread and t2 thread to finish</span><br><span class="line">t1 doing something</span><br><span class="line">t2 doing something</span><br><span class="line">t1 finish</span><br><span class="line">t2 finish</span><br><span class="line">main continue</span><br></pre></td></tr></table></figure>

<h1 id="&#x4E8C;&#x3001;&#x1F380;CyclicBarrier&#xFF08;&#x52A0;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;"><a href="#&#x4E8C;&#x3001;&#x1F380;CyclicBarrier&#xFF08;&#x52A0;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;" class="headerlink" title="&#x4E8C;&#x3001;&#x1F380;CyclicBarrier&#xFF08;&#x52A0;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;"></a>&#x4E8C;&#x3001;&#x1F380;CyclicBarrier&#xFF08;&#x52A0;&#x6CD5;&#x8BA1;&#x6570;&#x5668;&#xFF09;</h1><h2 id="2-1-&#x6982;&#x8FF0;"><a href="#2-1-&#x6982;&#x8FF0;" class="headerlink" title="2.1 &#x6982;&#x8FF0;"></a>2.1 &#x6982;&#x8FF0;</h2><p><code>CyclicBarrier</code>&#x4E5F;&#x53EB;&#x5FAA;&#x73AF;&#x6805;&#x680F;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x5FAA;&#x73AF;&#x5229;&#x7528;&#x7684;<strong>&#x5C4F;&#x969C;</strong>&#x3002;&#x901A;&#x8FC7;&#x5B83;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8BA9;<strong>&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;</strong>&#x7B49;&#x5F85;&#x81F3;<strong>&#x67D0;&#x4E2A;&#x72B6;&#x6001;&#x4E4B;&#x540E;</strong>&#x518D;<strong>&#x5168;&#x90E8;&#x540C;&#x65F6;&#x6267;&#x884C;</strong>&#x3002;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x5230;&#x8FBE;&#x6805;&#x680F;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x8C03;&#x7528;await()&#x65B9;&#x6CD5;&#x5C06;&#x81EA;&#x5DF1;&#x963B;&#x585E;&#xFF0C;&#x6B64;&#x65F6;&#x8BA1;&#x6570;&#x5668;&#x4F1A;&#x51CF;1&#xFF0C;&#x5F53;&#x8BA1;&#x6570;&#x5668;&#x51CF;&#x4E3A;0&#x7684;&#x65F6;&#x5019;&#x6240;&#x6709;&#x56E0;&#x8C03;&#x7528;await&#x65B9;&#x6CD5;&#x800C;&#x88AB;&#x963B;&#x585E;&#x7684;&#x7EBF;&#x7A0B;&#x5C06;&#x88AB;&#x5524;&#x9192;&#x3002;&#x53EB;&#x505A;&#x5FAA;&#x73AF;&#x662F;&#x56E0;&#x4E3A;&#x5F53;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x90FD;&#x88AB;&#x91CA;&#x653E;&#x4EE5;&#x540E;&#xFF0C;<code>CyclicBarrier</code>&#x8FD8;&#x53EF;&#x4EE5;&#x88AB;&#x91CD;&#x7528;&#xFF08;&#x8C03;&#x7528;<code>CyclicBarrier</code>&#x7684;reset()&#x65B9;&#x6CD5;&#xFF09;&#x3002;</p>
<h2 id="2-2-CyclicBarrier-&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;"><a href="#2-2-CyclicBarrier-&#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;" class="headerlink" title="2.2 CyclicBarrier &#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;"></a>2.2 <code>CyclicBarrier</code> &#x4E3B;&#x8981;&#x65B9;&#x6CD5;&#xFF1A;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public class CyclicBarrier {</span><br><span class="line"></span><br><span class="line">    private int dowait(boolean timed, long nanos); // &#x4F9B;await&#x65B9;&#x6CD5;&#x8C03;&#x7528; &#x5224;&#x65AD;&#x662F;&#x5426;&#x8FBE;&#x5230;&#x6761;&#x4EF6; &#x53EF;&#x4EE5;&#x5F80;&#x4E0B;&#x6267;&#x884C;&#x5417;</span><br><span class="line">    </span><br><span class="line">    //&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;CyclicBarrier,&#x5B83;&#x5C06;&#x5728;&#x7ED9;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x53C2;&#x4E0E;&#x65B9;&#xFF08;&#x7EBF;&#x7A0B;&#xFF09;&#x7B49;&#x5F85;&#x65F6;&#x89E6;&#x53D1;&#xFF0C;&#x6BCF;&#x6267;&#x884C;&#x4E00;&#x6B21;CyclicBarrier&#x5C31;&#x7D2F;&#x52A0;1&#xFF0C;&#x8FBE;&#x5230;&#x4E86;parties&#xFF0C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;barrierAction&#x7684;&#x6267;&#x884C;</span><br><span class="line">    public CyclicBarrier(int parties, Runnable barrierAction) ;</span><br><span class="line">    </span><br><span class="line">    //&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;CyclicBarrier &#xFF0C;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x76EE;&#x6807;&#x969C;&#x788D;&#x6570;,&#x5B83;&#x5C06;&#x5728;&#x7ED9;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x53C2;&#x4E0E;&#x65B9;&#xFF08;&#x7EBF;&#x7A0B;&#xFF09;&#x7B49;&#x5F85;&#x65F6;&#x89E6;&#x53D1;&#xFF0C;&#x6BCF;&#x6B21;&#x6267;&#x884C; CyclicBarrier &#x4E00;&#x6B21;&#x969C;&#x788D;&#x6570;&#x4F1A;&#x52A0;&#x4E00;&#xFF0C;&#x5982;&#x679C;&#x8FBE;&#x5230;&#x4E86;&#x76EE;&#x6807;&#x969C;&#x788D;&#x6570;&#xFF0C;&#x624D;&#x4F1A;&#x6267;&#x884C; cyclicBarrier.await()&#x4E4B;&#x540E;&#x7684;&#x8BED;&#x53E5;</span><br><span class="line">    public CyclicBarrier(int parties) </span><br><span class="line">        </span><br><span class="line">	//&#x8FD4;&#x56DE;&#x89E6;&#x53D1;&#x6B64;&#x969C;&#x788D;&#x6240;&#x9700;&#x7684;&#x53C2;&#x4E0E;&#x65B9;&#x6570;&#x91CF;&#x3002;</span><br><span class="line">    public int getParties()</span><br><span class="line">	</span><br><span class="line">    //&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x5404;&#x65B9;&#x90FD;&#x5728;&#x6B64;&#x5C4F;&#x969C;&#x4E0A;&#x8C03;&#x7528;&#x4E86;await &#x3002;</span><br><span class="line">	// &#x5982;&#x679C;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E0D;&#x662F;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5230;&#x8FBE;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x4F1A;&#x51FA;&#x4E8E;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x76EE;&#x7684;&#x800C;&#x88AB;&#x7981;&#x7528;&#x5E76;&#x5904;&#x4E8E;&#x4F11;&#x7720;&#x72B6;&#x6001;.&#x76F4;&#x5230;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x90FD;&#x8C03;&#x7528;&#x4E86;&#x6216;&#x8005;&#x88AB;&#x4E2D;&#x65AD;&#x4EA6;&#x6216;&#x8005;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x4E2D;&#x65AD;&#x9000;&#x51FA;</span><br><span class="line">    public int await()</span><br><span class="line">	</span><br><span class="line">    // &#x57FA;&#x672C;&#x540C;&#x4E0A; &#x591A;&#x4E86;&#x4E2A;&#x7B49;&#x5F85;&#x65F6;&#x95F4; &#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x5185;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#xFF0C;&#x5C06;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;&#x8D85;&#x65F6;&#x5F02;&#x5E38;</span><br><span class="line">    public int await(long timeout, TimeUnit unit)</span><br><span class="line"></span><br><span class="line">    //&#x5C06;&#x969C;&#x788D;&#x91CD;&#x7F6E;&#x4E3A;&#x5176;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x3002; </span><br><span class="line">    public void reset()</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="2-3-&#x6784;&#x9020;&#x51FD;&#x6570;"><a href="#2-3-&#x6784;&#x9020;&#x51FD;&#x6570;" class="headerlink" title="2.3 &#x6784;&#x9020;&#x51FD;&#x6570;"></a>2.3 &#x6784;&#x9020;&#x51FD;&#x6570;</h2><ul>
<li><code>CyclicBarrier(int, Runnable)</code>&#x578B;&#x6784;&#x9020;&#x51FD;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public CyclicBarrier(int parties, Runnable barrierAction) {</span><br><span class="line">    // &#x53C2;&#x4E0E;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;0&#xFF0C;&#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">    if (parties &lt;= 0) throw new IllegalArgumentException();</span><br><span class="line">    // &#x8BBE;&#x7F6E;parties</span><br><span class="line">    this.parties = parties;</span><br><span class="line">    // &#x8BBE;&#x7F6E;count</span><br><span class="line">    this.count = parties;</span><br><span class="line">    // &#x8BBE;&#x7F6E;barrierCommand</span><br><span class="line">    this.barrierCommand = barrierAction;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5173;&#x8054;&#x8BE5;`CyclicBarrier`&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5728;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x90FD;&#x8FDB;&#x5165;&#x5C4F;&#x969C;&#x540E;&#x7684;&#x6267;&#x884C;&#x52A8;&#x4F5C;&#xFF0C;</span><br><span class="line">&#x8BE5;&#x6267;&#x884C;&#x52A8;&#x4F5C;&#x7531;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8FDB;&#x884C;&#x5C4F;&#x969C;&#x7684;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>CyclicBarrier(int)</code>&#x578B;&#x6784;&#x9020;&#x51FD;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public CyclicBarrier(int parties) {</span><br><span class="line">    // &#x8C03;&#x7528;&#x542B;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;</span><br><span class="line">    this(parties, null);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4EC5;&#x4EC5;&#x6267;&#x884C;&#x4E86;&#x5173;&#x8054;&#x8BE5;CyclicBarrier&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#xFF0C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x6267;&#x884C;&#x52A8;&#x4F5C;&#x3002;</span><br></pre></td></tr></table></figure>

<h2 id="2-4-CyclicBarrier&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;"><a href="#2-4-CyclicBarrier&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;" class="headerlink" title="2.4 CyclicBarrier&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;"></a>2.4 CyclicBarrier&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;</h2><h3 id="2-4-1-dowait"><a href="#2-4-1-dowait" class="headerlink" title="2.4.1 dowait"></a>2.4.1 dowait</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private int dowait(boolean timed, long nanos)</span><br><span class="line">    throws InterruptedException, BrokenBarrierException,</span><br><span class="line">            TimeoutException {</span><br><span class="line">    // &#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x9501;</span><br><span class="line">    final ReentrantLock lock = this.lock;</span><br><span class="line">    // &#x9501;&#x5B9A;</span><br><span class="line">    lock.lock();</span><br><span class="line">    try {</span><br><span class="line">        // &#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x4EE3;</span><br><span class="line">        final Generation g = generation;</span><br><span class="line">        </span><br><span class="line">        if (g.broken) // &#x5C4F;&#x969C;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">            throw new BrokenBarrierException();</span><br><span class="line"></span><br><span class="line">        if (Thread.interrupted()) { // &#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;</span><br><span class="line">            // &#x635F;&#x574F;&#x5F53;&#x524D;&#x5C4F;&#x969C;&#xFF0C;&#x5E76;&#x4E14;&#x5524;&#x9192;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x53EA;&#x6709;&#x62E5;&#x6709;&#x9501;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x8C03;&#x7528;</span><br><span class="line">            breakBarrier();</span><br><span class="line">            // &#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">            throw new InterruptedException();</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        // &#x51CF;&#x5C11;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x8FDB;&#x5165;&#x5C4F;&#x969C;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;</span><br><span class="line">        int index = --count;</span><br><span class="line">        if (index == 0) {  // &#x6B63;&#x5728;&#x7B49;&#x5F85;&#x8FDB;&#x5165;&#x5C4F;&#x969C;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#x4E3A;0&#xFF0C;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x90FD;&#x5DF2;&#x7ECF;&#x8FDB;&#x5165;</span><br><span class="line">            // &#x8FD0;&#x884C;&#x7684;&#x52A8;&#x4F5C;&#x6807;&#x8BC6;</span><br><span class="line">            boolean ranAction = false;</span><br><span class="line">            try {</span><br><span class="line">                // &#x4FDD;&#x5B58;&#x8FD0;&#x884C;&#x52A8;&#x4F5C;</span><br><span class="line">                final Runnable command = barrierCommand;</span><br><span class="line">                if (command != null) // &#x52A8;&#x4F5C;&#x4E0D;&#x4E3A;&#x7A7A;</span><br><span class="line">                    // &#x8FD0;&#x884C;</span><br><span class="line">                    command.run();</span><br><span class="line">                // &#x8BBE;&#x7F6E;ranAction&#x72B6;&#x6001;</span><br><span class="line">                ranAction = true;</span><br><span class="line">                // &#x8FDB;&#x5165;&#x4E0B;&#x4E00;&#x4EE3;</span><br><span class="line">                nextGeneration();</span><br><span class="line">                return 0;</span><br><span class="line">            } finally {</span><br><span class="line">                if (!ranAction) // &#x6CA1;&#x6709;&#x8FD0;&#x884C;&#x7684;&#x52A8;&#x4F5C;</span><br><span class="line">                    // &#x635F;&#x574F;&#x5F53;&#x524D;&#x5C4F;&#x969C;</span><br><span class="line">                    breakBarrier();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // loop until tripped, broken, interrupted, or timed out</span><br><span class="line">        // &#x65E0;&#x9650;&#x5FAA;&#x73AF;</span><br><span class="line">        for (;;) {</span><br><span class="line">            try {</span><br><span class="line">                if (!timed) // &#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x7B49;&#x5F85;&#x65F6;&#x95F4;</span><br><span class="line">                    // &#x7B49;&#x5F85;</span><br><span class="line">                    trip.await(); </span><br><span class="line">                else if (nanos &gt; 0L) // &#x8BBE;&#x7F6E;&#x4E86;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x5E76;&#x4E14;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x5927;&#x4E8E;0</span><br><span class="line">                    // &#x7B49;&#x5F85;&#x6307;&#x5B9A;&#x65F6;&#x957F;</span><br><span class="line">                    nanos = trip.awaitNanos(nanos);</span><br><span class="line">            } catch (InterruptedException ie) { </span><br><span class="line">                if (g == generation &amp;&amp; ! g.broken) { // &#x7B49;&#x4E8E;&#x5F53;&#x524D;&#x4EE3;&#x5E76;&#x4E14;&#x5C4F;&#x969C;&#x6CA1;&#x6709;&#x88AB;&#x635F;&#x574F;</span><br><span class="line">                    // &#x635F;&#x574F;&#x5F53;&#x524D;&#x5C4F;&#x969C;</span><br><span class="line">                    breakBarrier();</span><br><span class="line">                    // &#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">                    throw ie;</span><br><span class="line">                } else { // &#x4E0D;&#x7B49;&#x4E8E;&#x5F53;&#x524D;&#x5E26;&#x540E;&#x8005;&#x662F;&#x5C4F;&#x969C;&#x88AB;&#x635F;&#x574F;</span><br><span class="line">                    // We&apos;re about to finish waiting even if we had not</span><br><span class="line">                    // been interrupted, so this interrupt is deemed to</span><br><span class="line">                    // &quot;belong&quot; to subsequent execution.</span><br><span class="line">                    // &#x4E2D;&#x65AD;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;</span><br><span class="line">                    Thread.currentThread().interrupt();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            if (g.broken) // &#x5C4F;&#x969C;&#x88AB;&#x635F;&#x574F;&#xFF0C;&#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">                throw new BrokenBarrierException();</span><br><span class="line"></span><br><span class="line">            if (g != generation) // &#x4E0D;&#x7B49;&#x4E8E;&#x5F53;&#x524D;&#x4EE3;</span><br><span class="line">                // &#x8FD4;&#x56DE;&#x7D22;&#x5F15;</span><br><span class="line">                return index;</span><br><span class="line"></span><br><span class="line">            if (timed &amp;&amp; nanos &lt;= 0L) { // &#x8BBE;&#x7F6E;&#x4E86;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x5E76;&#x4E14;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x5C0F;&#x4E8E;0</span><br><span class="line">                // &#x635F;&#x574F;&#x5C4F;&#x969C;</span><br><span class="line">                breakBarrier();</span><br><span class="line">                // &#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">                throw new TimeoutException();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    } finally {</span><br><span class="line">        // &#x91CA;&#x653E;&#x9501;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>dowait</code>&#x65B9;&#x6CD5;&#x7684;&#x903B;&#x8F91;&#x6D41;&#x7A0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/95a7ee77ce08edb535e1675bc07ef89313c83600d341c7b4bf2d04fbd173fc0e" alt="7.png"></p>
<h3 id="2-4-2-nextGeneration"><a href="#2-4-2-nextGeneration" class="headerlink" title="2.4.2 nextGeneration"></a>2.4.2 nextGeneration</h3><p>&#x6B64;&#x51FD;&#x6570;&#x5728;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x5C4F;&#x969C;&#x540E;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x5373;&#x751F;&#x6210;&#x4E0B;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x53C8;&#x53EF;&#x4EE5;&#x91CD;&#x65B0;&#x8FDB;&#x5165;&#x5230;&#x5C4F;&#x969C;&#x4E2D;&#xFF0C;&#x5176;&#x6E90;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private void nextGeneration() {</span><br><span class="line">    // signal completion of last generation</span><br><span class="line">    // &#x5524;&#x9192;&#x6240;&#x6709;&#x7EBF;&#x7A0B;</span><br><span class="line">    trip.signalAll();</span><br><span class="line">    // set up next generation</span><br><span class="line">    // &#x6062;&#x590D;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x8FDB;&#x5165;&#x5C4F;&#x969C;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;</span><br><span class="line">    count = parties;</span><br><span class="line">    // &#x65B0;&#x751F;&#x4E00;&#x4EE3;</span><br><span class="line">    generation = new Generation();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x5728;&#x6B64;&#x51FD;&#x6570;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;AQS&#x7684;<code>signalAll</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5373;&#x5524;&#x9192;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x5728;&#x7B49;&#x5F85;&#x6B64;&#x6761;&#x4EF6;&#xFF0C;&#x5219;&#x5524;&#x9192;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x3002;&#x5176;&#x6E90;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public final void signalAll() {</span><br><span class="line">    if (!isHeldExclusively()) // &#x4E0D;&#x88AB;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x72EC;&#x5360;&#xFF0C;&#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">        throw new IllegalMonitorStateException();</span><br><span class="line">    // &#x4FDD;&#x5B58;condition&#x961F;&#x5217;&#x5934;&#x7ED3;&#x70B9;</span><br><span class="line">    Node first = firstWaiter;</span><br><span class="line">    if (first != null) // &#x5934;&#x7ED3;&#x70B9;&#x4E0D;&#x4E3A;&#x7A7A;</span><br><span class="line">        // &#x5524;&#x9192;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;</span><br><span class="line">        doSignalAll(first);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x6B64;&#x51FD;&#x6570;&#x5224;&#x65AD;&#x5934;&#x7ED3;&#x70B9;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x5373;&#x6761;&#x4EF6;&#x961F;&#x5217;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x7136;&#x540E;&#x4F1A;&#x8C03;&#x7528;`doSignalAll`&#x51FD;&#x6570;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>doSignalAll</code>&#x51FD;&#x6570;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private void doSignalAll(Node first) {</span><br><span class="line">    // condition&#x961F;&#x5217;&#x7684;&#x5934;&#x7ED3;&#x70B9;&#x5C3E;&#x7ED3;&#x70B9;&#x90FD;&#x8BBE;&#x7F6E;&#x4E3A;&#x7A7A;</span><br><span class="line">    lastWaiter = firstWaiter = null;</span><br><span class="line">    // &#x5FAA;&#x73AF;</span><br><span class="line">    do {</span><br><span class="line">        // &#x83B7;&#x53D6;first&#x7ED3;&#x70B9;&#x7684;nextWaiter&#x57DF;&#x7ED3;&#x70B9;</span><br><span class="line">        Node next = first.nextWaiter;</span><br><span class="line">        // &#x8BBE;&#x7F6E;first&#x7ED3;&#x70B9;&#x7684;nextWaiter&#x57DF;&#x4E3A;&#x7A7A;</span><br><span class="line">        first.nextWaiter = null;</span><br><span class="line">        // &#x5C06;first&#x7ED3;&#x70B9;&#x4ECE;condition&#x961F;&#x5217;&#x8F6C;&#x79FB;&#x5230;sync&#x961F;&#x5217;</span><br><span class="line">        transferForSignal(first);</span><br><span class="line">        // &#x91CD;&#x65B0;&#x8BBE;&#x7F6E;first</span><br><span class="line">        first = next;</span><br><span class="line">    } while (first != null);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x6B64;&#x51FD;&#x6570;&#x4F1A;&#x4F9D;&#x6B21;&#x5C06;&#x6761;&#x4EF6;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x8F6C;&#x79FB;&#x5230;&#x540C;&#x6B65;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x5230;`transferForSignal`&#x51FD;&#x6570;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>transferForSignal</code>&#x51FD;&#x6570;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;final boolean transferForSignal(Node node) {</span><br><span class="line">    /*</span><br><span class="line">        * If cannot change waitStatus, the node has been cancelled.</span><br><span class="line">        */</span><br><span class="line">    if (!compareAndSetWaitStatus(node, Node.CONDITION, 0))</span><br><span class="line">        return false;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">        * Splice onto queue and try to set waitStatus of predecessor to</span><br><span class="line">        * indicate that thread is (probably) waiting. If cancelled or</span><br><span class="line">        * attempt to set waitStatus fails, wake up to resync (in which</span><br><span class="line">        * case the waitStatus can be transiently and harmlessly wrong).</span><br><span class="line">        */</span><br><span class="line">    Node p = enq(node);</span><br><span class="line">    int ws = p.waitStatus;</span><br><span class="line">    if (ws &gt; 0 || !compareAndSetWaitStatus(p, ws, Node.SIGNAL))</span><br><span class="line">        LockSupport.unpark(node.thread);</span><br><span class="line">    return true;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x6B64;&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5C06;&#x5904;&#x4E8E;&#x6761;&#x4EF6;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x8F6C;&#x79FB;&#x5230;&#x540C;&#x6B65;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x7ED3;&#x70B9;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x5176;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;&#x5230;`enq`&#x51FD;&#x6570;&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>enq</code>&#x51FD;&#x6570;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;private Node enq(final Node node) {</span><br><span class="line">    for (;;) { // &#x65E0;&#x9650;&#x5FAA;&#x73AF;&#xFF0C;&#x786E;&#x4FDD;&#x7ED3;&#x70B9;&#x80FD;&#x591F;&#x6210;&#x529F;&#x5165;&#x961F;&#x5217;</span><br><span class="line">        // &#x4FDD;&#x5B58;&#x5C3E;&#x7ED3;&#x70B9;</span><br><span class="line">        Node t = tail;</span><br><span class="line">        if (t == null) { // &#x5C3E;&#x7ED3;&#x70B9;&#x4E3A;&#x7A7A;&#xFF0C;&#x5373;&#x8FD8;&#x6CA1;&#x88AB;&#x521D;&#x59CB;&#x5316;</span><br><span class="line">            if (compareAndSetHead(new Node())) // &#x5934;&#x7ED3;&#x70B9;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5934;&#x7ED3;&#x70B9;&#x4E3A;&#x65B0;&#x751F;&#x6210;&#x7684;&#x7ED3;&#x70B9;</span><br><span class="line">                tail = head; // &#x5934;&#x7ED3;&#x70B9;&#x4E0E;&#x5C3E;&#x7ED3;&#x70B9;&#x90FD;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x65B0;&#x751F;&#x7ED3;&#x70B9;</span><br><span class="line">        } else { // &#x5C3E;&#x7ED3;&#x70B9;&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x5373;&#x5DF2;&#x7ECF;&#x88AB;&#x521D;&#x59CB;&#x5316;&#x8FC7;</span><br><span class="line">            // &#x5C06;node&#x7ED3;&#x70B9;&#x7684;prev&#x57DF;&#x8FDE;&#x63A5;&#x5230;&#x5C3E;&#x7ED3;&#x70B9;</span><br><span class="line">            node.prev = t; </span><br><span class="line">            if (compareAndSetTail(t, node)) { // &#x6BD4;&#x8F83;&#x7ED3;&#x70B9;t&#x662F;&#x5426;&#x4E3A;&#x5C3E;&#x7ED3;&#x70B9;&#xFF0C;&#x82E5;&#x662F;&#x5219;&#x5C06;&#x5C3E;&#x7ED3;&#x70B9;&#x8BBE;&#x7F6E;&#x4E3A;node</span><br><span class="line">                // &#x8BBE;&#x7F6E;&#x5C3E;&#x7ED3;&#x70B9;&#x7684;next&#x57DF;&#x4E3A;node</span><br><span class="line">                t.next = node; </span><br><span class="line">                return t; // &#x8FD4;&#x56DE;&#x5C3E;&#x7ED3;&#x70B9;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x6B64;&#x51FD;&#x6570;&#x5B8C;&#x6210;&#x4E86;&#x7ED3;&#x70B9;&#x63D2;&#x5165;&#x540C;&#x6B65;&#x961F;&#x5217;&#x7684;&#x8FC7;&#x7A0B;</span><br></pre></td></tr></table></figure>

<p><code>newGeneration</code>&#x51FD;&#x6570;&#x8C03;&#x7528;&#x94FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/61d747fcb088e09358f8ed3e2b8fe6ebaaf516d3ae4330743f3d2edffc82a77b" alt="9.png"></p>
<h2 id="2-5-CyclicBarrier&#x793A;&#x4F8B;"><a href="#2-5-CyclicBarrier&#x793A;&#x4F8B;" class="headerlink" title="2.5 CyclicBarrier&#x793A;&#x4F8B;"></a>2.5 CyclicBarrier&#x793A;&#x4F8B;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public class CyclicBarrierDemo {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        </span><br><span class="line">        CyclicBarrier cyclicBarrier = new CyclicBarrier(7, () -&gt; {</span><br><span class="line">            System.out.println(&quot;&#x96C6;&#x9F50;&#x4E03;&#x5F20;&#x5361;&#x7247;&#xFF0C;&#x53C2;&#x4E0E;&#x62BD;&#x5956;&quot;);</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        for (int i = 1; i &lt;= 7; i++) {</span><br><span class="line">            final int temp=i;</span><br><span class="line">            new Thread(()-&gt;{</span><br><span class="line">                try {</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+&quot;&#x6536;&#x96C6;&#x5230;&#x7B2C;&quot;+temp+&quot;&#x5F20;&quot;);</span><br><span class="line">                    //&#x963B;&#x585E;&#x4EFB;&#x52A1;&#x7EBF;&#x7A0B;</span><br><span class="line">                    cyclicBarrier.await();</span><br><span class="line"></span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                } catch (BrokenBarrierException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }).start();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x7A0B;&#x5E8F;&#x8F93;&#x51FA;&#xFF1A;</span><br><span class="line">Thread-1&#x6536;&#x96C6;&#x5230;&#x7B2C;2&#x5F20;</span><br><span class="line">Thread-4&#x6536;&#x96C6;&#x5230;&#x7B2C;5&#x5F20;</span><br><span class="line">Thread-3&#x6536;&#x96C6;&#x5230;&#x7B2C;4&#x5F20;</span><br><span class="line">Thread-2&#x6536;&#x96C6;&#x5230;&#x7B2C;3&#x5F20;</span><br><span class="line">Thread-0&#x6536;&#x96C6;&#x5230;&#x7B2C;1&#x5F20;</span><br><span class="line">Thread-6&#x6536;&#x96C6;&#x5230;&#x7B2C;7&#x5F20;</span><br><span class="line">Thread-5&#x6536;&#x96C6;&#x5230;&#x7B2C;6&#x5F20;</span><br><span class="line">&#x96C6;&#x9F50;&#x4E03;&#x5F20;&#x5361;&#x7247;&#xFF0C;&#x53C2;&#x4E0E;&#x62BD;&#x5956;</span><br></pre></td></tr></table></figure>

<h1 id="&#x4E09;&#x3001;&#x1FA70;Semaphore&#xFF08;-&#x4FE1;&#x53F7;&#x706F;&#xFF09;"><a href="#&#x4E09;&#x3001;&#x1FA70;Semaphore&#xFF08;-&#x4FE1;&#x53F7;&#x706F;&#xFF09;" class="headerlink" title="&#x4E09;&#x3001;&#x1FA70;Semaphore&#xFF08; &#x4FE1;&#x53F7;&#x706F;&#xFF09;"></a>&#x4E09;&#x3001;&#x1FA70;Semaphore&#xFF08; &#x4FE1;&#x53F7;&#x706F;&#xFF09;</h1><h2 id="3-1-&#x6982;&#x8FF0;"><a href="#3-1-&#x6982;&#x8FF0;" class="headerlink" title="3.1 &#x6982;&#x8FF0;"></a>3.1 &#x6982;&#x8FF0;</h2><p><strong>Semaphore&#xFF1A;&#x4FE1;&#x53F7;&#x91CF;&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x9650;&#x5236;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x67D0;&#x4E9B;&#xFF08;&#x7269;&#x7406;&#x6216;&#x903B;&#x8F91;&#xFF09;&#x8D44;&#x6E90;&#x7684;&#x7EBF;&#x7A0B;&#x6570;</strong>&#x3002;</p>
<p><strong>&#x4F7F;&#x7528;&#x573A;&#x666F;</strong>&#xFF1A;</p>
<p>&#x9650;&#x5236;&#x8D44;&#x6E90;&#xFF0C;&#x5982;&#x62A2;&#x4F4D;&#x7F6E;&#x3001;&#x9650;&#x6D41;&#x7B49;&#x3002;</p>
<h2 id="3-2-Semaphore&#x5E38;&#x7528;&#x65B9;&#x6CD5;"><a href="#3-2-Semaphore&#x5E38;&#x7528;&#x65B9;&#x6CD5;" class="headerlink" title="3.2 Semaphore&#x5E38;&#x7528;&#x65B9;&#x6CD5;"></a>3.2 Semaphore&#x5E38;&#x7528;&#x65B9;&#x6CD5;</h2><ul>
<li><code>void acquire()</code> &#x8BB8;&#x53EF;&#x6570;-1&#xFF0C;&#x4ECE;&#x8BE5;&#x4FE1;&#x53F7;&#x91CF;&#x83B7;&#x53D6;&#x8BB8;&#x53EF;&#x8BC1;&#xFF0C;&#x963B;&#x585E;&#x76F4;&#x5230;&#x53EF;&#x7528;&#x6216;&#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;&#x3002;</li>
<li><code>void acquire(int permits)</code> &#x8BB8;&#x53EF;&#x6570; - permits&#xFF0C;&#x4ECE;&#x8BE5;&#x4FE1;&#x53F7;&#x91CF;&#x83B7;&#x53D6;<strong>&#x7ED9;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x8BB8;&#x53EF;&#x8BC1;</strong>&#xFF0C;&#x963B;&#x585E;&#x76F4;&#x5230;&#x53EF;&#x7528;&#x6216;&#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;&#x3002;</li>
<li><code>int availablePermits()</code> &#x8FD4;&#x56DE;&#x6B64;&#x4FE1;&#x53F7;&#x91CF;&#x4E2D;&#x5F53;&#x524D;&#x53EF;&#x7528;&#x7684;&#x8BB8;&#x53EF;&#x6570;&#x3002;</li>
<li><code>void release()</code> &#x8BB8;&#x53EF;&#x6570;+1&#xFF0C;&#x91CA;&#x653E;&#x8BB8;&#x53EF;&#x8BC1;&#xFF0C;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x5230;&#x4FE1;&#x53F7;&#x91CF;&#x3002;</li>
<li><code>void release(int permits)</code> &#x8BB8;&#x53EF;&#x6570;+permits&#xFF0C;&#x91CA;&#x653E;&#x7ED9;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x8BB8;&#x53EF;&#x8BC1;&#xFF0C;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x5230;&#x4FE1;&#x53F7;&#x91CF;&#x3002;</li>
<li><code>boolean hasQueuedThreads(</code>) &#x67E5;&#x8BE2;&#x662F;&#x5426;&#x6709;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x8BB8;&#x53EF;&#x3002;</li>
<li><code>int getQueueLength()</code> &#x8FD4;&#x56DE;&#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x8BB8;&#x53EF;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x7684;<strong>&#x4F30;&#x8BA1;</strong>&#x3002;</li>
</ul>
<h2 id="3-3-Semaphore&#x6784;&#x9020;&#x51FD;&#x6570;"><a href="#3-3-Semaphore&#x6784;&#x9020;&#x51FD;&#x6570;" class="headerlink" title="3.3 Semaphore&#x6784;&#x9020;&#x51FD;&#x6570;"></a>3.3 Semaphore&#x6784;&#x9020;&#x51FD;&#x6570;</h2><ul>
<li><code>Semaphore(int)</code>&#x578B;&#x6784;&#x9020;&#x51FD;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public Semaphore(int permits) {</span><br><span class="line">    sync = new NonfairSync(permits);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4F1A;&#x521B;&#x5EFA;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x7684;&#x8BB8;&#x53EF;&#x6570;&#x548C;&#x975E;&#x516C;&#x5E73;&#x7684;&#x516C;&#x5E73;&#x8BBE;&#x7F6E;&#x7684;`Semaphore`&#x3002;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Semaphore(int, boolean)</code>&#x578B;&#x6784;&#x9020;&#x51FD;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public Semaphore(int permits, boolean fair) {</span><br><span class="line">    sync = fair ? new FairSync(permits) : new NonfairSync(permits);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4F1A;&#x521B;&#x5EFA;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x7684;&#x8BB8;&#x53EF;&#x6570;&#x548C;&#x7ED9;&#x5B9A;&#x7684;&#x516C;&#x5E73;&#x8BBE;&#x7F6E;&#x7684;`Semaphore`&#x3002;</span><br></pre></td></tr></table></figure>

<h2 id="3-4-Semaphore&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;"><a href="#3-4-Semaphore&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;" class="headerlink" title="3.4 Semaphore&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;"></a>3.4 Semaphore&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x51FD;&#x6570;</h2><h3 id="3-4-1-acquire"><a href="#3-4-1-acquire" class="headerlink" title="3.4.1 acquire"></a>3.4.1 acquire</h3><p>&#x6B64;&#x65B9;&#x6CD5;&#x4ECE;&#x4FE1;&#x53F7;&#x91CF;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;(&#x591A;&#x4E2A;)&#x8BB8;&#x53EF;&#xFF0C;&#x5728;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;&#x524D;&#x4E00;&#x76F4;&#x5C06;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#xFF0C;&#x6216;&#x8005;&#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;&#xFF0C;&#x5176;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public void acquire() throws InterruptedException {</span><br><span class="line">    sync.acquireSharedInterruptibly(1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x5C06;&#x4F1A;&#x8C03;&#x7528;Sync&#x5BF9;&#x8C61;&#x7684;`acquireSharedInterruptibly`</span><br><span class="line">(&#x4ECE;AQS&#x7EE7;&#x627F;&#x800C;&#x6765;&#x7684;&#x65B9;&#x6CD5;)&#x65B9;&#x6CD5;&#xFF0C;&#x800C;`acquireSharedInterruptibly`&#x65B9;&#x6CD5;&#x5728;`CountDownLatch`&#x4E2D;&#x5DF2;&#x7ECF;&#x8FDB;&#x884C;&#x4E86;&#x5206;&#x6790;&#xFF0C;&#x5728;&#x6B64;&#x4E0D;&#x518D;&#x7D2F;&#x8D58;&#x3002;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-release"><a href="#3-4-2-release" class="headerlink" title="3.4.2 release"></a>3.4.2 release</h3><p>&#x6B64;&#x65B9;&#x6CD5;&#x91CA;&#x653E;&#x4E00;&#x4E2A;(&#x591A;&#x4E2A;)&#x8BB8;&#x53EF;&#xFF0C;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x7ED9;&#x4FE1;&#x53F7;&#x91CF;&#xFF0C;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public void release() {</span><br><span class="line">    sync.releaseShared(1);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x8BF4;&#x660E;: &#x8BE5;&#x65B9;&#x6CD5;&#x4E2D;&#x5C06;&#x4F1A;&#x8C03;&#x7528;Sync&#x5BF9;&#x8C61;&#x7684;`releaseShared`</span><br><span class="line">(&#x4ECE;AQS&#x7EE7;&#x627F;&#x800C;&#x6765;&#x7684;&#x65B9;&#x6CD5;)&#x65B9;&#x6CD5;&#xFF0C;&#x800C;`releaseShared`&#x65B9;&#x6CD5;&#x5728;`CountDownLatch`&#x4E2D;&#x5DF2;&#x7ECF;&#x8FDB;&#x884C;&#x4E86;&#x5206;&#x6790;&#xFF0C;&#x5728;&#x6B64;&#x4E0D;&#x518D;&#x7D2F;&#x8D58;&#x3002;</span><br></pre></td></tr></table></figure>

<h2 id="3-5-Semaphore&#x793A;&#x4F8B;"><a href="#3-5-Semaphore&#x793A;&#x4F8B;" class="headerlink" title="3.5 Semaphore&#x793A;&#x4F8B;"></a>3.5 Semaphore&#x793A;&#x4F8B;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * @Author: Akiang</span><br><span class="line"> * @Date: 2021-08-26 09:03</span><br><span class="line"> * version 1.0</span><br><span class="line"> */</span><br><span class="line">public class SemaphoreDemo1 {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        // 10&#x53F0;&#x7535;&#x8111;</span><br><span class="line">        Semaphore semaphore = new Semaphore(10);</span><br><span class="line"></span><br><span class="line">        // 20 &#x4E2A;&#x5C0F;&#x4F19;&#x4F34;&#x60F3;&#x8981;&#x4E0A;&#x7F51;</span><br><span class="line">        for (int i = 1; i &lt;= 20; i++) {</span><br><span class="line">            new Thread(() -&gt; {</span><br><span class="line">                try {</span><br><span class="line">                    //&#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x8BB8;&#x53EF;&#x8BC1;</span><br><span class="line">                    semaphore.acquire();</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + &quot;&#x62A2;&#x5230;&#x4E86;&#x7535;&#x8111;&quot;);</span><br><span class="line">                    //&#x62A2;&#x5230;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#xFF0C;&#x8FC5;&#x901F;&#x5C31;&#x5F00;&#x6253;&#x5566; &#x8FD9;&#x91CC;&#x5C31;&#x6A21;&#x62DF;&#x4E2A;&#x65F6;&#x95F4;&#x54C8;&#xFF0C;</span><br><span class="line">                    TimeUnit.SECONDS.sleep(10);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                } finally {</span><br><span class="line">                    //&#x6253;&#x5B8C;&#x51E0;&#x628A;&#x6E38;&#x620F;&#x7684;&#x5C0F;&#x4F19;&#x4F34; &#x5973;&#x670B;&#x53CB;&#x6765;&#x627E;&#x4E86; &#x6E9C;&#x5566;&#x6E9C;&#x5566; &#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x90FD;&#x6709;&#x4EBA;&#x966A;&#x4F34;</span><br><span class="line">                    System.out.println(&quot;&#x5973;&#x670B;&#x53CB;&#x6765;&#x627E;&#xFF0C;&quot;+Thread.currentThread().getName() + &quot;&#x79BB;&#x5F00;&#x4E86;&quot;);</span><br><span class="line">                    semaphore.release();//&#x91CA;&#x653E;&#x8D44;&#x6E90;,&#x79BB;&#x5F00;&#x4E86;&#x5C31;&#x8981;&#x628A;&#x7535;&#x8111;&#x8BA9;&#x7ED9;&#x522B;&#x4EBA;&#x5566;&#x3002;</span><br><span class="line">                }</span><br><span class="line">            }, String.valueOf(i)).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h1 id="&#x56DB;&#x3001;-&#x1F3CF;&#x7B80;&#x5355;&#x8BB2;&#x8FF0;-Phaser-amp-Exchanger"><a href="#&#x56DB;&#x3001;-&#x1F3CF;&#x7B80;&#x5355;&#x8BB2;&#x8FF0;-Phaser-amp-Exchanger" class="headerlink" title="&#x56DB;&#x3001; &#x1F3CF;&#x7B80;&#x5355;&#x8BB2;&#x8FF0; | Phaser &amp; Exchanger"></a>&#x56DB;&#x3001; &#x1F3CF;&#x7B80;&#x5355;&#x8BB2;&#x8FF0; | Phaser &amp; Exchanger</h1><h2 id="4-1-Phaser"><a href="#4-1-Phaser" class="headerlink" title="4.1 Phaser"></a>4.1 Phaser</h2><p><strong>Phaser&#x4E00;&#x79CD;&#x53EF;&#x91CD;&#x7528;&#x7684;&#x540C;&#x6B65;&#x5C4F;&#x969C;</strong>&#xFF0C;&#x529F;&#x80FD;&#x4E0A;&#x7C7B;&#x4F3C;&#x4E8E;CyclicBarrier&#x548C;CountDownLatch&#xFF0C;&#x4F46;&#x4F7F;&#x7528;&#x4E0A;&#x66F4;&#x4E3A;&#x7075;&#x6D3B;&#x3002;<code>&#x975E;&#x5E38;&#x9002;&#x7528;&#x4E8E;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x540C;&#x6B65;&#x534F;&#x8C03;&#x5206;&#x9636;&#x6BB5;&#x8BA1;&#x7B97;&#x4EFB;&#x52A1;</code>&#xFF08;Fork/Join&#x6846;&#x67B6;&#x4E2D;&#x7684;&#x5B50;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x9700;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x4F18;&#x5148;&#x4F7F;&#x7528;Phaser&#xFF09;</p>
<ul>
<li>&#x51FD;&#x6570;&#x5217;&#x8868;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;//&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public Phaser() {</span><br><span class="line">    this(null, 0);</span><br><span class="line">}</span><br><span class="line">public Phaser(int parties) {</span><br><span class="line">    this(null, parties);</span><br><span class="line">}</span><br><span class="line">public Phaser(Phaser parent) {</span><br><span class="line">    this(parent, 0);</span><br><span class="line">}</span><br><span class="line">public Phaser(Phaser parent, int parties)</span><br><span class="line">//&#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;party</span><br><span class="line">public int register()</span><br><span class="line">//&#x6279;&#x91CF;&#x6CE8;&#x518C;</span><br><span class="line">public int bulkRegister(int parties)</span><br><span class="line">//&#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;phaser&#xFF0C;&#x4E0D;&#x7B49;&#x5F85;&#x5176;&#x4ED6;&#x4EFB;&#x52A1;&#x5230;&#x8FBE;&#x3002;&#x8FD4;&#x56DE;arrival phase number</span><br><span class="line">public int arrive() </span><br><span class="line">//&#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;phaser&#x5E76;&#x64A4;&#x9500;&#x6CE8;&#x518C;&#xFF0C;&#x8FD4;&#x56DE;arrival phase number</span><br><span class="line">public int arriveAndDeregister()</span><br><span class="line">/*</span><br><span class="line"> * &#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;phaser&#x5E76;&#x7B49;&#x5F85;&#x5176;&#x4ED6;&#x4EFB;&#x52A1;&#x5230;&#x8FBE;&#xFF0C;&#x7B49;&#x4EF7;&#x4E8E;awaitAdvance(arrive())&#x3002;</span><br><span class="line"> * &#x5982;&#x679C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x4E2D;&#x65AD;&#x6216;&#x8D85;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;awaitAdvance&#x65B9;&#x6CD5;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x7684;&#x6784;&#x9020;&#x3002;</span><br><span class="line"> * &#x5982;&#x679C;&#x9700;&#x8981;&#x5728;&#x5230;&#x8FBE;&#x540E;&#x53D6;&#x6D88;&#x6CE8;&#x518C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;awaitAdvance(arriveAndDeregister())&#x3002;</span><br><span class="line"> */</span><br><span class="line">public int arriveAndAwaitAdvance()</span><br><span class="line">//&#x7B49;&#x5F85;&#x7ED9;&#x5B9A;phase&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x4E0B;&#x4E00;&#x4E2A; arrival phase number</span><br><span class="line">public int awaitAdvance(int phase)</span><br><span class="line">//&#x963B;&#x585E;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;phase&#x524D;&#x8FDB;&#x5230;&#x4E0B;&#x4E00;&#x4EE3;&#xFF0C;&#x8FD4;&#x56DE;&#x4E0B;&#x4E00;&#x4EE3;&#x7684;phase number</span><br><span class="line">public int awaitAdvance(int phase) </span><br><span class="line">//&#x54CD;&#x5E94;&#x4E2D;&#x65AD;&#x7248;awaitAdvance</span><br><span class="line">public int awaitAdvanceInterruptibly(int phase) throws InterruptedException</span><br><span class="line">public int awaitAdvanceInterruptibly(int phase, long timeout, TimeUnit unit)</span><br><span class="line">    throws InterruptedException, TimeoutException</span><br><span class="line">//&#x4F7F;&#x5F53;&#x524D;phaser&#x8FDB;&#x5165;&#x7EC8;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x5DF2;&#x6CE8;&#x518C;&#x7684;parties&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5206;&#x5C42;&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x7EC8;&#x6B62;&#x6240;&#x6709;phaser</span><br><span class="line">public void forceTermination()</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x793A;&#x4F8B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;public class PhaserDemo {</span><br><span class="line"></span><br><span class="line">    private static Phaser phaser = new MyPhaser();</span><br><span class="line"></span><br><span class="line">    //&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x79FB;&#x76F8;&#x5668;&#x6765;&#x81EA;&#x5B9A;&#x4E49;&#x8F93;&#x51FA;</span><br><span class="line">    static class MyPhaser extends Phaser {</span><br><span class="line">        /**</span><br><span class="line">         * @deprecated &#x5728;&#x5373;&#x5C06;&#x5230;&#x6765;&#x7684;&#x9636;&#x6BB5;&#x63D0;&#x524D;&#x65F6;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x5E76;&#x63A7;&#x5236;&#x7EC8;&#x6B62;&#x7684;&#x53EF;&#x8986;&#x76D6;&#x65B9;&#x6CD5;&#x3002; &#x6B64;&#x65B9;&#x6CD5;&#x5728;&#x63A8;&#x8FDB;&#x6B64;&#x79FB;&#x76F8;&#x5668;&#x7684;&#x4E00;&#x65B9;&#x5230;&#x8FBE;&#x65F6;&#x8C03;&#x7528;&#xFF08;&#x5F53;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x7B49;&#x5F85;&#x65B9;&#x5904;&#x4E8E;&#x4F11;&#x7720;&#x72B6;&#x6001;&#x65F6;&#xFF09;&#x3002;</span><br><span class="line">         *             &#x5982;&#x679C;&#x6B64;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;true &#xFF0C;&#x5219;&#x6B64;&#x79FB;&#x76F8;&#x5668;&#x5C06;&#x5728;&#x63D0;&#x524D;&#x65F6;&#x8BBE;&#x7F6E;&#x4E3A;&#x6700;&#x7EC8;&#x7EC8;&#x6B62;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;isTerminated&#x540E;&#x7EED;&#x8C03;&#x7528;&#x5C06;&#x8FD4;&#x56DE; true&#x3002;</span><br><span class="line">         * @param phase &#x8FDB;&#x5165;&#x6B64;&#x65B9;&#x6CD5;&#x7684;&#x5F53;&#x524D;&#x9636;&#x6BB5;&#x53F7;&#xFF0C;&#x5728;&#x6B64;&#x79FB;&#x76F8;&#x5668;&#x524D;&#x8FDB;&#x4E4B;&#x524D;</span><br><span class="line">         * @param registeredParties &#x5F53;&#x524D;&#x6CE8;&#x518C;&#x65B9;&#x7684;&#x6570;&#x91CF;</span><br><span class="line">         * @return</span><br><span class="line">         */</span><br><span class="line">        @Override</span><br><span class="line">        protected boolean onAdvance(int phase, int registeredParties) {</span><br><span class="line">            if (phase == 0) {</span><br><span class="line">                System.out.println(&quot;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x5230;&#x8FBE;&#x4E86;&#x7F51;&#x5427;&#xFF0C;&#x51C6;&#x5907;&#x5F00;&#x59CB;&#x5F00;&#x9ED1;&#xFF01;&#xFF01;&#xFF01;&quot;);</span><br><span class="line">                return false;</span><br><span class="line">            } else if (phase == 1) {</span><br><span class="line">                System.out.println(&quot;&#x5927;&#x5BB6;&#x90FD;&#x540C;&#x610F;&#xFF0C;&#x4E00;&#x8D77;&#x53BB;&#x6B21;&#x70E7;&#x70E4;&#x54AF;&#xFF01;&#xFF01;&#xFF01;&quot;);</span><br><span class="line">                return false;</span><br><span class="line">            } else if (phase == 2) {</span><br><span class="line">                System.out.println(&quot;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x56DE;&#x5BDD;&#x5BA4;&#xFF01;&#xFF01;&#xFF01;&quot;);</span><br><span class="line">                return true;</span><br><span class="line">            }</span><br><span class="line">            return true;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    //&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4EFB;&#x52A1;</span><br><span class="line">    static class DoSomeThing implements Runnable {</span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            /**</span><br><span class="line">             * &#x5411;&#x6B64;&#x79FB;&#x76F8;&#x5668;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x672A;&#x5230;&#x8FBE;&#x65B9;</span><br><span class="line">             */</span><br><span class="line">            phaser.register();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + &quot;&#x4ECE;&#x5BB6;&#x91CC;&#x51FA;&#x53D1;&#xFF0C;&#x51C6;&#x5907;&#x53BB;&#x5B66;&#x6821;&#x540E;&#x8857;&#x4E0A;&#x7F51;&#x5F00;&#x9ED1;&#xFF01;&#xFF01;&#xFF01;&quot;);</span><br><span class="line">            phaser.arriveAndAwaitAdvance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + &quot;&#x4E0A;&#x7740;&#x4E0A;&#x7740;&#x997F;&#x4E86;&#xFF0C;&#x8BF4;&#x53BB;&#x6B21;&#x70E7;&#x70E4;&#x5417;&#xFF1F;&quot;);</span><br><span class="line">            phaser.arriveAndAwaitAdvance();</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + &quot;&#x70E7;&#x70E4;&#x6B21;&#x5B8C;&#x4E86;&quot;);</span><br><span class="line">            phaser.arriveAndAwaitAdvance();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception {</span><br><span class="line">        DoSomeThing thing = new DoSomeThing();</span><br><span class="line">        new Thread(thing, &quot;&#x5C0F;&#x660E;&quot;).start();</span><br><span class="line">        new Thread(thing, &quot;&#x5C0F;&#x738B;&quot;).start();</span><br><span class="line">        new Thread(thing, &quot;&#x5C0F;&#x674E;&quot;).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">/**</span><br><span class="line"> * &#x5C0F;&#x674E;&#x4ECE;&#x5BB6;&#x91CC;&#x51FA;&#x53D1;&#xFF0C;&#x51C6;&#x5907;&#x53BB;&#x5B66;&#x6821;&#x540E;&#x8857;&#x4E0A;&#x7F51;&#x5F00;&#x9ED1;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"> * &#x5C0F;&#x738B;&#x4ECE;&#x5BB6;&#x91CC;&#x51FA;&#x53D1;&#xFF0C;&#x51C6;&#x5907;&#x53BB;&#x5B66;&#x6821;&#x540E;&#x8857;&#x4E0A;&#x7F51;&#x5F00;&#x9ED1;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"> * &#x5C0F;&#x660E;&#x4ECE;&#x5BB6;&#x91CC;&#x51FA;&#x53D1;&#xFF0C;&#x51C6;&#x5907;&#x53BB;&#x5B66;&#x6821;&#x540E;&#x8857;&#x4E0A;&#x7F51;&#x5F00;&#x9ED1;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"> * &#x6240;&#x6709;&#x4EBA;&#x90FD;&#x5230;&#x8FBE;&#x4E86;&#x7F51;&#x5427;&#xFF0C;&#x51C6;&#x5907;&#x5F00;&#x59CB;&#x5F00;&#x9ED1;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"> * &#x5C0F;&#x674E;&#x4E0A;&#x7740;&#x4E0A;&#x7740;&#x997F;&#x4E86;&#xFF0C;&#x8BF4;&#x53BB;&#x6B21;&#x70E7;&#x70E4;&#x5417;&#xFF1F;</span><br><span class="line"> * &#x5C0F;&#x660E;&#x4E0A;&#x7740;&#x4E0A;&#x7740;&#x997F;&#x4E86;&#xFF0C;&#x8BF4;&#x53BB;&#x6B21;&#x70E7;&#x70E4;&#x5417;&#xFF1F;</span><br><span class="line"> * &#x5C0F;&#x738B;&#x4E0A;&#x7740;&#x4E0A;&#x7740;&#x997F;&#x4E86;&#xFF0C;&#x8BF4;&#x53BB;&#x6B21;&#x70E7;&#x70E4;&#x5417;&#xFF1F;</span><br><span class="line"> * &#x5927;&#x5BB6;&#x90FD;&#x540C;&#x610F;&#xFF0C;&#x4E00;&#x8D77;&#x53BB;&#x6B21;&#x70E7;&#x70E4;&#x54AF;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"> * &#x5C0F;&#x660E;&#x70E7;&#x70E4;&#x6B21;&#x5B8C;&#x4E86;</span><br><span class="line"> * &#x5C0F;&#x674E;&#x70E7;&#x70E4;&#x6B21;&#x5B8C;&#x4E86;</span><br><span class="line"> * &#x5C0F;&#x738B;&#x70E7;&#x70E4;&#x6B21;&#x5B8C;&#x4E86;</span><br><span class="line"> * &#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x56DE;&#x5BDD;&#x5BA4;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>

<h2 id="4-2-Exchanger"><a href="#4-2-Exchanger" class="headerlink" title="4.2 Exchanger"></a>4.2 Exchanger</h2><p><strong>Exchanger&#x5141;&#x8BB8;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x67D0;&#x4E2A;&#x6C47;&#x5408;&#x70B9;&#x4EA4;&#x6362;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x67D0;&#x4E9B;&#x7BA1;&#x9053;&#x8BBE;&#x8BA1;&#x65F6;&#x6BD4;&#x8F83;&#x6709;&#x7528;</strong>&#x3002;</p>
<p>Exchanger&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x70B9;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x540C;&#x6B65;&#x70B9;&#xFF0C;&#x4E00;&#x5BF9;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x4EA4;&#x6362;&#x6570;&#x636E;&#x3002;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x901A;&#x8FC7;exchange()&#x65B9;&#x6CD5;&#x7684;&#x5165;&#x53E3;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x7ED9;&#x4ED6;&#x7684;&#x4F19;&#x4F34;&#x7EBF;&#x7A0B;&#xFF0C;&#x5E76;&#x63A5;&#x6536;&#x4ED6;&#x7684;&#x4F19;&#x4F34;&#x7EBF;&#x7A0B;&#x63D0;&#x4F9B;&#x7684;&#x6570;&#x636E;&#x5E76;&#x8FD4;&#x56DE;&#x3002;</p>
<p>&#x5F53;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x901A;&#x8FC7;Exchanger&#x4EA4;&#x6362;&#x4E86;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4E2A;&#x4EA4;&#x6362;&#x5BF9;&#x4E8E;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x5B89;&#x5168;&#x7684;&#x3002;Exchanger&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;<code>SynchronousQueue</code>&#x7684;&#x53CC;&#x5411;&#x5F62;&#x5F0F;&#xFF0C;&#x5728;&#x8FD0;&#x7528;&#x5230;&#x9057;&#x4F20;&#x7B97;&#x6CD5;&#x548C;&#x7BA1;&#x9053;&#x8BBE;&#x8BA1;&#x7684;&#x5E94;&#x7528;&#x4E2D;&#x6BD4;&#x8F83;&#x6709;&#x7528;&#x3002;</p>
<ul>
<li>Exchanger&#x5B9E;&#x73B0;&#x673A;&#x5236;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;for (;;) {</span><br><span class="line">    if (slot is empty) { // offer</span><br><span class="line">        // slot&#x4E3A;&#x7A7A;&#x65F6;&#xFF0C;&#x5C06;item &#x8BBE;&#x7F6E;&#x5230;Node &#x4E2D;        </span><br><span class="line">        place item in a Node;</span><br><span class="line">        if (can CAS slot from empty to node) {</span><br><span class="line">            // &#x5F53;&#x5C06;node&#x901A;&#x8FC7;CAS&#x4EA4;&#x6362;&#x5230;slot&#x4E2D;&#x65F6;&#xFF0C;&#x6302;&#x8D77;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x88AB;&#x5524;&#x9192;</span><br><span class="line">            wait for release;</span><br><span class="line">            // &#x88AB;&#x5524;&#x9192;&#x540E;&#x8FD4;&#x56DE;node&#x4E2D;&#x5339;&#x914D;&#x5230;&#x7684;item</span><br><span class="line">            return matching item in node;</span><br><span class="line">        }</span><br><span class="line">    } else if (can CAS slot from node to empty) { // release</span><br><span class="line">         // &#x5C06;slot&#x8BBE;&#x7F6E;&#x4E3A;&#x7A7A;</span><br><span class="line">        // &#x83B7;&#x53D6;node&#x4E2D;&#x7684;item&#xFF0C;&#x5C06;&#x9700;&#x8981;&#x4EA4;&#x6362;&#x7684;&#x6570;&#x636E;&#x8BBE;&#x7F6E;&#x5230;&#x5339;&#x914D;&#x7684;item</span><br><span class="line">        get the item in node;</span><br><span class="line">        set matching item in node;</span><br><span class="line">        // &#x5524;&#x9192;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;</span><br><span class="line">        release waiting thread;</span><br><span class="line">    }</span><br><span class="line">    // else retry on CAS failure</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>Exchanger&#x793A;&#x4F8B;</li>
</ul>
<p>&#x6765;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7ECF;&#x5178;&#x7684;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#xFF1A;&#x4F60;&#x6709;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;buffer&#xFF0C;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x548C;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x6D88;&#x8D39;&#x8005;&#x3002;&#x53EA;&#x662F;Exchange&#x7C7B;&#x53EA;&#x80FD;&#x540C;&#x6B65;2&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x53EA;&#x80FD;&#x5728;&#x4F60;&#x7684;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x95EE;&#x9898;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x4E00;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x65F6;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x7C7B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">jspublic&#x590D;&#x5236;&#x4EE3;&#x7801;    static class Producer extends Thread {</span><br><span class="line">        private Exchanger&lt;Integer&gt; exchanger;</span><br><span class="line">        private static int data = 0;</span><br><span class="line">        Producer(String name, Exchanger&lt;Integer&gt; exchanger) {</span><br><span class="line">            super(&quot;Producer-&quot; + name);</span><br><span class="line">            this.exchanger = exchanger;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            for (int i=1; i&lt;5; i++) {</span><br><span class="line">                try {</span><br><span class="line">                    TimeUnit.SECONDS.sleep(1);</span><br><span class="line">                    data = i;</span><br><span class="line">                    System.out.println(getName()+&quot; &#x4EA4;&#x6362;&#x524D;:&quot; + data);</span><br><span class="line">                    data = exchanger.exchange(data);</span><br><span class="line">                    System.out.println(getName()+&quot; &#x4EA4;&#x6362;&#x540E;:&quot; + data);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    static class Consumer extends Thread {</span><br><span class="line">        private Exchanger&lt;Integer&gt; exchanger;</span><br><span class="line">        private static int data = 0;</span><br><span class="line">        Consumer(String name, Exchanger&lt;Integer&gt; exchanger) {</span><br><span class="line">            super(&quot;Consumer-&quot; + name);</span><br><span class="line">            this.exchanger = exchanger;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            while (true) {</span><br><span class="line">                data = 0;</span><br><span class="line">                System.out.println(getName()+&quot; &#x4EA4;&#x6362;&#x524D;:&quot; + data);</span><br><span class="line">                try {</span><br><span class="line">                    TimeUnit.SECONDS.sleep(1);</span><br><span class="line">                    data = exchanger.exchange(data);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">                System.out.println(getName()+&quot; &#x4EA4;&#x6362;&#x540E;:&quot; + data);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws InterruptedException {</span><br><span class="line">        Exchanger&lt;Integer&gt; exchanger = new Exchanger&lt;Integer&gt;();</span><br><span class="line">        new Producer(&quot;&quot;, exchanger).start();</span><br><span class="line">        new Consumer(&quot;&quot;, exchanger).start();</span><br><span class="line">        TimeUnit.SECONDS.sleep(7);</span><br><span class="line">        System.exit(-1);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x5176;&#x7ED3;&#x679C;&#x53EF;&#x80FD;&#x5982;&#x4E0B;&#xFF1A;</span><br><span class="line"></span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x524D;:0</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x524D;:1</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x540E;:1</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x524D;:0</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x540E;:0</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x524D;:2</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x540E;:0</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x540E;:2</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x524D;:0</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x524D;:3</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x540E;:0</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x540E;:3</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x524D;:0</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x524D;:4</span><br><span class="line">Producer- &#x4EA4;&#x6362;&#x540E;:0</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x540E;:4</span><br><span class="line">Consumer- &#x4EA4;&#x6362;&#x524D;:0</span><br></pre></td></tr></table></figure>

<h1 id="&#x4E94;&#x3001;CyclicBarrier&#x4E0E;CountDownLatch&#x7684;&#x533A;&#x522B;"><a href="#&#x4E94;&#x3001;CyclicBarrier&#x4E0E;CountDownLatch&#x7684;&#x533A;&#x522B;" class="headerlink" title="&#x4E94;&#x3001;CyclicBarrier&#x4E0E;CountDownLatch&#x7684;&#x533A;&#x522B;"></a>&#x4E94;&#x3001;CyclicBarrier&#x4E0E;CountDownLatch&#x7684;&#x533A;&#x522B;</h1><ul>
<li><code>CountDownLatch</code>&#x7684;await()&#x65B9;&#x6CD5;&#x963B;&#x585E;&#x7684;&#x662F;&#x4E3B;&#x7EBF;&#x7A0B;&#x6216;&#x8C03;&#x7528;await()&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;<code>CyclicBarrier</code>&#x7684;await()&#x963B;&#x585E;&#x7684;&#x662F;&#x4EFB;&#x52A1;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x6216;&#x8C03;&#x7528;&#x7EBF;&#x7A0B;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#x3002;</li>
<li><code>CountDownLatch</code>&#x65E0;&#x6CD5;&#x91CD;&#x7F6E;&#x8BA1;&#x6570;&#x6B21;&#x6570;&#xFF0C;&#x800C;<code>CyclicBarrier</code>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;reset()&#x65B9;&#x6CD5;&#x6765;&#x91CD;&#x7528;</li>
<li><code>CountDownLatch</code>&#x548C;<code>CyclicBarrier</code>&#x90FD;&#x662F;&#x7528;&#x4F5C;&#x591A;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;<code>CountDownLatch</code>&#x57FA;&#x4E8E;AQS&#xFF0C;<code>CyclicBarrier</code>&#x57FA;&#x4E8E;<strong>ReentrantLock</strong>&#x548C;<strong>Condition</strong>&#x3002;</li>
</ul>
<p>&#x53C2;&#x8003;&#xFF1A;&#x300A;Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x827A;&#x672F;&#x300B;</p>
<p><a href="https://dev.newban.cn/6999234250021011487#heading-5">JUC&#x7CFB;&#x5217;&#xFF08;&#x4E03;&#xFF09;| JUC&#x4E09;&#x5927;&#x5E38;&#x7528;&#x5DE5;&#x5177;&#x7C7B;CountDownLatch&#x3001;CyclicBarrier&#x3001;Semaphore</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/9110b08c06c02f9ddb6aad8ef83eefa5.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../246/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../246/">246</a><span class="page-number current">247</span><a class="page-number" href="../248/">248</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../248/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
