<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/106/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/106/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7165661072785932296.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7165661072785932296.html" itemprop="url">分析 vant4 源码，如何用 vue3 + ts 开发一个</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-14T08:25:16+08:00">
                2022-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<ol>
<li>&#x524D;&#x8A00;</li>
</ol>
<hr>
<p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;<a href="/external_links/2e94e5f617ec57b813b3f7922f4fcea6.html" target="blank" rel="noopener">&#x82E5;&#x5DDD;</a>&#x3002;&#x6211;&#x503E;&#x529B;&#x6301;&#x7EED;&#x7EC4;&#x7EC7;&#x4E86;&#x4E00;&#x5E74;<a href="https://dev.newban.cn/7079706017579139102">&#x6BCF;&#x5468;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x5B66;&#x4E60;200&#x884C;&#x5DE6;&#x53F3;&#x7684;&#x6E90;&#x7801;&#x5171;&#x8BFB;&#x6D3B;&#x52A8;</a>&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;<a href="/external_links/f6715fb41c5add76a791f132e3c512af.html" target="blank" rel="noopener">&#x70B9;&#x6B64;&#x626B;&#x7801;&#x52A0;&#x6211;&#x5FAE;&#x4FE1; <code>ruochuan02</code> &#x53C2;&#x4E0E;</a>&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x60F3;&#x5B66;&#x6E90;&#x7801;&#xFF0C;&#x6781;&#x529B;&#x63A8;&#x8350;&#x5173;&#x6CE8;&#x6211;&#x5199;&#x7684;&#x4E13;&#x680F;<a href="/external_links/fedfaff5eac6f4a3b25ab39b65554b53.html" target="blank" rel="noopener">&#x300A;&#x5B66;&#x4E60;&#x6E90;&#x7801;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x7CFB;&#x5217;&#x300B;</a>&#xFF0C;&#x76EE;&#x524D;&#x662F;&#x6398;&#x91D1;&#x5173;&#x6CE8;&#x4EBA;&#x6570;&#xFF08;4.1k+&#x4EBA;&#xFF09;&#x7B2C;&#x4E00;&#x7684;&#x4E13;&#x680F;&#xFF0C;&#x5199;&#x6709;20&#x4F59;&#x7BC7;&#x6E90;&#x7801;&#x6587;&#x7AE0;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x4E1A;&#x52A1;&#x65F6;&#x7ECF;&#x5E38;&#x4F1A;&#x4F7F;&#x7528;&#x5230;&#x7EC4;&#x4EF6;&#x5E93;&#xFF0C;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5173;&#x5FC3;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x5E0C;&#x671B;&#x5B66;&#x4E60;&#x548C;&#x6DF1;&#x7A76;&#x91CC;&#x9762;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5206;&#x6790;&#x81EA;&#x5DF1;&#x4F7F;&#x7528;&#x7684;&#x7EC4;&#x4EF6;&#x5E93;&#x5B9E;&#x73B0;&#x3002;&#x6709;&#x54EA;&#x4E9B;&#x4F18;&#x96C5;&#x5B9E;&#x73B0;&#x3001;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3001;&#x524D;&#x6CBF;&#x6280;&#x672F;&#x7B49;&#x90FD;&#x53EF;&#x4EE5;&#x503C;&#x5F97;&#x6211;&#x4EEC;&#x501F;&#x9274;&#x3002;</p>
<p>&#x76F8;&#x6BD4;&#x4E8E;&#x539F;&#x751F; <code>JS</code> &#x7B49;&#x6E90;&#x7801;&#x3002;&#x6211;&#x4EEC;&#x6216;&#x8BB8;&#x66F4;&#x5E94;&#x8BE5;&#x5B66;&#x4E60;&#xFF0C;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x7EC4;&#x4EF6;&#x5E93;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x52A9;&#x4E8E;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5199;&#x4E1A;&#x52A1;&#x548C;&#x5199;&#x81EA;&#x5DF1;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F; <code>Vue</code> &#x6280;&#x672F;&#x6808;&#xFF0C;&#x5F00;&#x53D1;&#x79FB;&#x52A8;&#x7AEF;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x5927;&#x591A;&#x4F1A;&#x9009;&#x7528; <code>vant</code> &#x7EC4;&#x4EF6;&#x5E93;&#xFF0C;&#x76EE;&#x524D;&#xFF08;2022-11-13&#xFF09; <code>star</code> &#x591A;&#x8FBE; <code>20.4k</code>&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6311;&#x9009; <code>vant</code> &#x7EC4;&#x4EF6;&#x5E93;&#x5B66;&#x4E60;&#xFF0C;&#x6211;&#x4F1A;&#x5199;&#x4E00;&#x4E2A;<a href="/external_links/6f4e78fe9bb73195277a1b311df1958d.html" target="blank" rel="noopener">&#x7EC4;&#x4EF6;&#x5E93;&#x6E90;&#x7801;&#x7CFB;&#x5217;&#x4E13;&#x680F;</a>&#xFF0C;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x5173;&#x6CE8;&#x3002;</p>
<p><strong>vant &#x7EC4;&#x4EF6;&#x5E93;&#x6E90;&#x7801;&#x5206;&#x6790;&#x7CFB;&#x5217;&#xFF1A;</strong></p>
<ul>
<li>1.<a href="https://dev.newban.cn/7158239404484460574">vant 4 &#x5373;&#x5C06;&#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#xFF0C;&#x652F;&#x6301;&#x6697;&#x9ED1;&#x4E3B;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#x5462;</a></li>
<li>2.<a href="https://dev.newban.cn/7160465286036979748">&#x8DDF;&#x7740; vant 4 &#x6E90;&#x7801;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x7528; vue3+ts &#x5F00;&#x53D1;&#x4E00;&#x4E2A; loading &#x7EC4;&#x4EF6;&#xFF0C;&#x4EC5;88&#x884C;&#x4EE3;&#x7801;</a></li>
<li>3.<a href="https://dev.newban.cn/7165661072785932296">&#x5206;&#x6790; vant 4 &#x6E90;&#x7801;&#xFF0C;&#x5982;&#x4F55;&#x7528; vue3 + ts &#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x7011;&#x5E03;&#x6D41;&#x6EDA;&#x52A8;&#x52A0;&#x8F7D;&#x7684;&#x5217;&#x8868;&#x7EC4;&#x4EF6;&#xFF1F;</a></li>
<li>4.<a href="https://dev.newban.cn/7169003604303413278">&#x5206;&#x6790; vant 4 &#x6E90;&#x7801;&#xFF0C;&#x5B66;&#x4F1A;&#x7528; vue3 + ts &#x5F00;&#x53D1;&#x6BEB;&#x79D2;&#x7EA7;&#x6E32;&#x67D3;&#x7684;&#x5012;&#x8BA1;&#x65F6;&#x7EC4;&#x4EF6;&#xFF0C;&#x771F;&#x662F;&#x5999;&#x554A;</a></li>
<li>5.<a href="https://dev.newban.cn/7171227417246171149">vant 4.0 &#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#x4E86;&#xFF0C;&#x5206;&#x6790;&#x5176;&#x6E90;&#x7801;&#x5B66;&#x4F1A;&#x7528; vue3 &#x5199;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x61D2;&#x52A0;&#x8F7D;&#x7EC4;&#x4EF6;&#xFF01;</a></li>
</ul>
<p>&#x5B66;&#x5B8C;&#x672C;&#x6587;&#xFF0C;&#x4F60;&#x5C06;&#x5B66;&#x5230;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;1. &#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x7528; vue3 + ts &#x5F00;&#x53D1;&#x4E00;&#x4E2A; List &#x7EC4;&#x4EF6;</span><br><span class="line">2. &#x5B66;&#x4F1A;&#x5C01;&#x88C5;&#x5404;&#x79CD;&#x7EC4;&#x5408;&#x5F0F; `API`</span><br><span class="line">3. &#x7B49;&#x7B49;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</li>
</ol>
<hr>
<p>&#x770B;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x7B2C;&#x4E00;&#x6B65;&#x5E94;&#x8BE5;&#x662F;&#x5148;&#x770B; <a href="/external_links/20d3a86c13e526001567bbaa47019cf2.html" target="blank" rel="noopener">README.md</a> &#x518D;&#x770B;&#x8D21;&#x732E;&#x6587;&#x6863; <a href="/external_links/577844cc0b400c5cfaf502a42902c437.html" target="blank" rel="noopener">github/CONTRIBUTING.md</a>&#x3002;</p>
<h3 id="2-1-&#x514B;&#x9686;&#x6E90;&#x7801;-amp-amp-&#x8DD1;&#x8D77;&#x6765;"><a href="#2-1-&#x514B;&#x9686;&#x6E90;&#x7801;-amp-amp-&#x8DD1;&#x8D77;&#x6765;" class="headerlink" title="2.1 &#x514B;&#x9686;&#x6E90;&#x7801; &amp;&amp; &#x8DD1;&#x8D77;&#x6765;"></a>2.1 &#x514B;&#x9686;&#x6E90;&#x7801; &amp;&amp; &#x8DD1;&#x8D77;&#x6765;</h3><p>You will need <a href="/external_links/f4945798e5bdab2794746bc798d05e26.html" target="blank" rel="noopener">Node.js &gt;= 14</a> and <a href="/external_links/237df7c5160ffc85254e99943c2c04a7.html" target="blank" rel="noopener">pnpm</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x63A8;&#x8350;&#x514B;&#x9686;&#x6211;&#x7684;&#x9879;&#x76EE;</span><br><span class="line">git clone https://github.com/lxchuan12/vant-analysis</span><br><span class="line">cd vant-analysis/vant</span><br><span class="line"></span><br><span class="line"># &#x6216;&#x8005;&#x514B;&#x9686;&#x5B98;&#x65B9;&#x4ED3;&#x5E93;</span><br><span class="line">git clone git@github.com:vant-ui/vant.git</span><br><span class="line">cd vant</span><br><span class="line"></span><br><span class="line"># &#x5B89;&#x88C5;&#x4F9D;&#x8D56;&#xFF0C;&#x4F1A;&#x8FD0;&#x884C;&#x6240;&#x6709; packages &#x4E0B;&#x4ED3;&#x5E93;&#x7684; pnpm i &#x94A9;&#x5B50; pnpm prepare &#x548C; pnpm i</span><br><span class="line">pnpm i</span><br><span class="line"></span><br><span class="line"># Start development</span><br><span class="line">pnpm dev</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B; <code>pnpm dev</code> &#x6700;&#x7EC8;&#x6267;&#x884C;&#x7684;&#x4EC0;&#x4E48;&#x547D;&#x4EE4;&#x3002;</p>
<p><code>vant</code> &#x9879;&#x76EE;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>monorepo</code> &#x7ED3;&#x6784;&#x3002;&#x67E5;&#x770B;&#x6839;&#x8DEF;&#x5F84;&#x4E0B;&#x7684; <code>package.json</code>&#x3002;</p>
<p><code>vant/package.json =&gt; &quot;dev&quot;: &quot;pnpm --dir ./packages/vant dev&quot;</code><br><code>vant/packages/vant/package.json</code> =&gt; <code>&quot;dev&quot;: &quot;vant-cli dev&quot;</code></p>
<p><code>pnpm dev</code> &#x6700;&#x7EC8;&#x6267;&#x884C;&#x7684;&#x662F;&#xFF1A;<code>vant-cli dev</code> &#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x3002;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x662F;&#x5B66;&#x4E60; <a href="/external_links/35aa1bf719b1742d599b6bc7d428cbc0.html" target="blank" rel="noopener">List &#x7EC4;&#x4EF6;</a> &#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C31;&#x4E0D;&#x6DF1;&#x5165; <code>vant-cli dev</code> &#x547D;&#x4EE4;&#x4E86;&#x3002;</p>
<ol start="3">
<li>List &#x7EC4;&#x4EF6;</li>
</ol>
<hr>
<p><a href="/external_links/35aa1bf719b1742d599b6bc7d428cbc0.html" target="blank" rel="noopener">List &#x7EC4;&#x4EF6;&#x6587;&#x6863;</a></p>
<blockquote>
<p>&#x7011;&#x5E03;&#x6D41;&#x6EDA;&#x52A8;&#x52A0;&#x8F7D;&#xFF0C;&#x7528;&#x4E8E;&#x5C55;&#x793A;&#x957F;&#x5217;&#x8868;&#xFF0C;&#x5F53;&#x5217;&#x8868;&#x5373;&#x5C06;&#x6EDA;&#x52A8;&#x5230;&#x5E95;&#x90E8;&#x65F6;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x5E76;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x5217;&#x8868;&#x9879;&#x3002;</p>
</blockquote>
<p>&#x4ECE;&#x8FD9;&#x4E2A;&#x63CF;&#x8FF0;&#x548C;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x4F53;&#x9A8C; <code>demo</code> &#x6765;&#x3002;<br>&#x81F3;&#x5C11;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#x95EE;&#x9898;&#x503C;&#x5F97;&#x53BB;&#x4E86;&#x89E3;&#x5B66;&#x4E60;&#x3002;</p>
<ul>
<li>&#x5982;&#x4F55;&#x76D1;&#x542C;&#x6EDA;&#x52A8;</li>
<li>&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x6EDA;&#x52A8;&#x5230;&#x4E86;&#x5E95;&#x90E8;</li>
<li>&#x5982;&#x4F55;&#x89E6;&#x53D1;&#x4E8B;&#x4EF6;&#x52A0;&#x8F7D;&#x66F4;&#x591A;</li>
</ul>
<p>&#x5E26;&#x7740;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x627E;&#x5230; list demo &#x6587;&#x4EF6;&#xFF1A;<code>vant/packages/vant/src/list/demo/index.vue</code>&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x662F;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x5728;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;<a href="https://dev.newban.cn/7160465286036979748#heading-3">&#x8DDF;&#x7740; vant4 &#x6E90;&#x7801;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x7528; vue3+ts &#x5F00;&#x53D1;&#x4E00;&#x4E2A; loading &#x7EC4;&#x4EF6;&#xFF0C;&#x4EC5;88&#x884C;&#x4EE3;&#x7801;</a>&#x5206;&#x6790;&#x4E86;&#x5176;&#x539F;&#x7406;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x70B9;&#x51FB;&#x67E5;&#x770B;&#x3002;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x4E86;&#x3002;</p>
<h3 id="3-1-&#x5229;&#x7528;-demo-&#x8C03;&#x8BD5;"><a href="#3-1-&#x5229;&#x7528;-demo-&#x8C03;&#x8BD5;" class="headerlink" title="3.1 &#x5229;&#x7528; demo &#x8C03;&#x8BD5;"></a>3.1 &#x5229;&#x7528; demo &#x8C03;&#x8BD5;</h3><p>&#x7EC4;&#x4EF6;&#x6E90;&#x7801;&#x4E2D;&#x7684; <code>TS</code> &#x4EE3;&#x7801;&#x6211;&#x4E0D;&#x4F1A;&#x8FC7;&#x591A;&#x89E3;&#x91CA;&#x3002;&#x6CA1;&#x5B66;&#x8FC7; <code>TS</code> &#x7684;&#x5C0F;&#x4F19;&#x4F34;&#xFF0C;&#x63A8;&#x8350;&#x5B66;&#x8FD9;&#x4E2A;<a href="/external_links/da3d300a746c0ffc3daa60292ed72a8f.html" target="blank" rel="noopener">TypeScript &#x5165;&#x95E8;&#x6559;&#x7A0B;</a>&#x3002;<br>&#x53E6;&#x5916;&#xFF0C;<code>vant</code> &#x4F7F;&#x7528;&#x4E86; <a href="/external_links/8d75bdcb6cef09d36740b1c4dd0c5a03.html" target="blank" rel="noopener">@vue/babel-plugin-jsx</a> &#x63D2;&#x4EF6;&#x6765;&#x652F;&#x6301; <code>JSX&#x3001;TSX</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// vant/packages/vant/src/list/demo/index.vue</span><br><span class="line">// &#x4EE3;&#x7801;&#x6709;&#x5220;&#x51CF;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import VanList from &apos;..&apos;;</span><br><span class="line">import { ref } from &apos;vue&apos;;</span><br><span class="line"></span><br><span class="line">const t = useTranslate({</span><br><span class="line">  &apos;zh-CN&apos;: {</span><br><span class="line">    errorInfo: &apos;&#x9519;&#x8BEF;&#x63D0;&#x793A;&apos;,</span><br><span class="line">    errorText: &apos;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF0C;&#x70B9;&#x51FB;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&apos;,</span><br><span class="line">    pullRefresh: &apos;&#x4E0B;&#x62C9;&#x5237;&#x65B0;&apos;,</span><br><span class="line">    finishedText: &apos;&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x4E86;&apos;,</span><br><span class="line">  },</span><br><span class="line">  &apos;en-US&apos;: {</span><br><span class="line">    errorInfo: &apos;Error Info&apos;,</span><br><span class="line">    errorText: &apos;Request failed. Click to reload&apos;,</span><br><span class="line">    pullRefresh: &apos;PullRefresh&apos;,</span><br><span class="line">    finishedText: &apos;Finished&apos;,</span><br><span class="line">  },</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">const list = ref([</span><br><span class="line">  {</span><br><span class="line">    items: [] as string[],</span><br><span class="line">    refreshing: false,</span><br><span class="line">    loading: false,</span><br><span class="line">    error: false,</span><br><span class="line">    finished: false,</span><br><span class="line">  },</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">// &#x52A0;&#x8F7D;&#x6570;&#x636E;</span><br><span class="line">const onLoad = (index: number) =&gt; {</span><br><span class="line">  const currentList = list.value[index];</span><br><span class="line">  currentList.loading = true;</span><br><span class="line"></span><br><span class="line">  setTimeout(() =&gt; {</span><br><span class="line">    if (currentList.refreshing) {</span><br><span class="line">      currentList.items = [];</span><br><span class="line">      currentList.refreshing = false;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    for (let i = 0; i &lt; 10; i++) {</span><br><span class="line">      const text = currentList.items.length + 1;</span><br><span class="line">      currentList.items.push(text &lt; 10 ? &apos;0&apos; + text : String(text));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    currentList.loading = false;</span><br><span class="line">    currentList.refreshing = false;</span><br><span class="line"></span><br><span class="line">    // show error info in second demo</span><br><span class="line">    if (index === 1 &amp;&amp; currentList.items.length === 10 &amp;&amp; !currentList.error) {</span><br><span class="line">      currentList.error = true;</span><br><span class="line">    } else {</span><br><span class="line">      currentList.error = false;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    if (currentList.items.length &gt;= 40) {</span><br><span class="line">      currentList.finished = true;</span><br><span class="line">    }</span><br><span class="line">  }, 1000);</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;van-tabs&gt;</span><br><span class="line">    &lt;van-tab :title=&quot;t(&apos;basicUsage&apos;)&quot;&gt;</span><br><span class="line">      &lt;van-list</span><br><span class="line">        v-model:loading=&quot;list[0].loading&quot;</span><br><span class="line">        :finished=&quot;list[0].finished&quot;</span><br><span class="line">        :finished-text=&quot;t(&apos;finishedText&apos;)&quot;</span><br><span class="line">        @load=&quot;onLoad(0)&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;van-cell v-for=&quot;item in list[0].items&quot; :key=&quot;item&quot; :title=&quot;item&quot; /&gt;</span><br><span class="line">      &lt;/van-list&gt;</span><br><span class="line">    &lt;/van-tab&gt;</span><br><span class="line">&lt;template&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>&#x5165;&#x53E3;&#x6587;&#x4EF6;</li>
</ol>
<hr>
<p>&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x5BFC;&#x51FA;&#x4E00;&#x4E0B;&#x7C7B;&#x578B;&#x548C;&#x53D8;&#x91CF;&#x7B49;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// vant/packages/vant/src/list/index.ts</span><br><span class="line">import { withInstall } from &apos;../utils&apos;;</span><br><span class="line">import _List, { ListProps } from &apos;./List&apos;;</span><br><span class="line"></span><br><span class="line">export const List = withInstall(_List);</span><br><span class="line">export default List;</span><br><span class="line">export { listProps } from &apos;./List&apos;;</span><br><span class="line">export type { ListProps };</span><br><span class="line">export type { ListInstance, ListDirection, ListThemeVars } from &apos;./types&apos;;</span><br><span class="line"></span><br><span class="line">declare module &apos;vue&apos; {</span><br><span class="line">  export interface GlobalComponents {</span><br><span class="line">    VanList: typeof List;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>withInstall</code> &#x51FD;&#x6570;&#x5728;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0;<a href="https://dev.newban.cn/7160465286036979748#heading-10">5.1 withInstall &#x7ED9;&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0; install &#x65B9;&#x6CD5;</a> &#x4E5F;&#x6709;&#x5206;&#x6790;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x4E86;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E9B;&#x6587;&#x4EF6;&#xFF0C;&#x4EFB;&#x610F;&#x4F4D;&#x7F6E;&#x52A0;&#x4E0A; <code>debugger</code> &#x8C03;&#x8BD5;&#x6E90;&#x7801;&#x3002;</p>
<ol start="5">
<li>&#x4E3B;&#x6587;&#x4EF6;</li>
</ol>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import {</span><br><span class="line">  ref,</span><br><span class="line">  watch,</span><br><span class="line">  nextTick,</span><br><span class="line">  onUpdated,</span><br><span class="line">  onMounted,</span><br><span class="line">  defineComponent,</span><br><span class="line">  type ExtractPropTypes,</span><br><span class="line">} from &apos;vue&apos;;</span><br><span class="line"></span><br><span class="line">// Utils</span><br><span class="line">import {</span><br><span class="line">  isHidden,</span><br><span class="line">  truthProp,</span><br><span class="line">  makeStringProp,</span><br><span class="line">  makeNumericProp,</span><br><span class="line">  createNamespace,</span><br><span class="line">} from &apos;../utils&apos;;</span><br><span class="line"></span><br><span class="line">// Composables</span><br><span class="line">import { useRect, useScrollParent, useEventListener } from &apos;@vant/use&apos;;</span><br><span class="line">import { useExpose } from &apos;../composables/use-expose&apos;;</span><br><span class="line">import { useTabStatus } from &apos;../composables/use-tab-status&apos;;</span><br><span class="line"></span><br><span class="line">// Components</span><br><span class="line">import { Loading } from &apos;../loading&apos;;</span><br><span class="line"></span><br><span class="line">// Types</span><br><span class="line">import type { ListExpose, ListDirection } from &apos;./types&apos;;</span><br><span class="line"></span><br><span class="line">const [name, bem, t] = createNamespace(&apos;list&apos;);</span><br><span class="line"></span><br><span class="line">export const listProps = {</span><br><span class="line">  error: Boolean,</span><br><span class="line">  offset: makeNumericProp(300),</span><br><span class="line">  loading: Boolean,</span><br><span class="line">  finished: Boolean,</span><br><span class="line">  errorText: String,</span><br><span class="line">  direction: makeStringProp&lt;ListDirection&gt;(&apos;down&apos;),</span><br><span class="line">  loadingText: String,</span><br><span class="line">  finishedText: String,</span><br><span class="line">  immediateCheck: truthProp,</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">export type ListProps = ExtractPropTypes&lt;typeof listProps&gt;;</span><br></pre></td></tr></table></figure>

<p><a href="/external_links/2efbe273d438ab1ad9f1ecc753e517a8.html" target="blank" rel="noopener">List &#x7EC4;&#x4EF6; api</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;export default defineComponent({</span><br><span class="line">  name,</span><br><span class="line">  props: listProps,</span><br><span class="line"></span><br><span class="line">  emits: [&apos;load&apos;, &apos;update:error&apos;, &apos;update:loading&apos;],</span><br><span class="line"></span><br><span class="line">  setup(props, { emit, slots }) {</span><br><span class="line">    // TODODEL: &#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x6253;&#x4E0A;&#x65AD;&#x70B9;&#x8C03;&#x8BD5;&#xFF0C;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#x3002;</span><br><span class="line">    debugger;</span><br><span class="line">    // &#x7701;&#x7565;&#x82E5;&#x5E72;&#x4EE3;&#x7801;</span><br><span class="line">    const loading = ref(false);</span><br><span class="line">    const root = ref&lt;HTMLElement&gt;();</span><br><span class="line">    const placeholder = ref&lt;HTMLElement&gt;();</span><br><span class="line">    const tabStatus = useTabStatus();</span><br><span class="line">    const scrollParent = useScrollParent(root);</span><br><span class="line">    // &#x7701;&#x7565;&#x82E5;&#x5E72;&#x4EE3;&#x7801;</span><br><span class="line">    return () =&gt; {</span><br><span class="line">      const Content = slots.default?.();</span><br><span class="line">      const Placeholder = &lt;div ref={placeholder} class={bem(&apos;placeholder&apos;)} /&gt;;</span><br><span class="line"></span><br><span class="line">      return (</span><br><span class="line">        &lt;div ref={root} role=&quot;feed&quot; class={bem()} aria-busy={loading.value}&gt;</span><br><span class="line">          {props.direction === &apos;down&apos; ? Content : Placeholder}</span><br><span class="line">          //   &#x6BD4;&#x5982;&#xFF1A;&#x52A0;&#x8F7D;&#x4E2D;</span><br><span class="line">          {renderLoading()}</span><br><span class="line">          //   &#x7ED3;&#x675F;&#x6587;&#x5B57; &#x6BD4;&#x5982;&#xFF1A;&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x4E86;</span><br><span class="line">          {renderFinishedText()}</span><br><span class="line">          //   &#x52A0;&#x8F7D;&#x9519;&#x8BEF;&#x6587;&#x5B57;&#xFF1A;&#x6BD4;&#x5982;&#x52A0;&#x8F7D;&#x5931;&#x8D25;</span><br><span class="line">          {renderErrorText()}</span><br><span class="line">          {props.direction === &apos;up&apos; ? Content : Placeholder}</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      );</span><br><span class="line">    };</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>debugger</code> &#x8C03;&#x8BD5;&#x622A;&#x56FE;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/4896ef72a9f1079de8be4cfcb61bf108ed180a7c1cdf30cf58cc9d4d78e001ae" alt="debugger &#x8C03;&#x8BD5;&#x622A;&#x56FE;"></p>
<p>&#x63A5;&#x7740;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x5176;&#x4ED6;&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;&#x3002;</p>
<h3 id="5-1-&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;-useExpose&#x3001;useEventListener"><a href="#5-1-&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;-useExpose&#x3001;useEventListener" class="headerlink" title="5.1 &#x4E00;&#x4E9B;&#x4E8B;&#x4EF6; useExpose&#x3001;useEventListener"></a>5.1 &#x4E00;&#x4E9B;&#x4E8B;&#x4EF6; useExpose&#x3001;useEventListener</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x7701;&#x7565;&#x82E5;&#x5E72;&#x4EE3;&#x7801;</span><br><span class="line">setup(props, { emit, slots }) {</span><br><span class="line">    // &#x7701;&#x7565; check &#x51FD;&#x6570;&#xFF0C;&#x540E;&#x6587;&#x8BB2;&#x8FF0;</span><br><span class="line">    const check = () =&gt; {}</span><br><span class="line"></span><br><span class="line">    // &#x76D1;&#x542C;&#x53C2;&#x6570;&#x53D8;&#x66F4;&#xFF0C;&#x6267;&#x884C; check</span><br><span class="line">    watch(() =&gt; [props.loading, props.finished, props.error], check);</span><br><span class="line"></span><br><span class="line">    // van-tabs tab &#x5207;&#x6362;&#x72B6;&#x6001;&#x53D8;&#x66F4;&#x65F6; &#x6267;&#x884C; check</span><br><span class="line">    if (tabStatus) {</span><br><span class="line">      watch(tabStatus, (tabActive) =&gt; {</span><br><span class="line">        if (tabActive) {</span><br><span class="line">          check();</span><br><span class="line">        }</span><br><span class="line">      });</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    onUpdated(() =&gt; {</span><br><span class="line">    // &#xFF01;&#x662F; ts&#x4E2D;&#x7684;&#x975E;&#x7A7A;&#x65AD;&#x8A00;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x95EE;&#x8FC7;</span><br><span class="line">      loading.value = props.loading!;</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    // &#x5982;&#x679C;&#x53C2;&#x6570;&#x662F;&#x7ACB;&#x5373;&#x68C0;&#x6D4B;&#xFF0C;&#x6267;&#x884C; check &#x51FD;&#x6570;</span><br><span class="line">    onMounted(() =&gt; {</span><br><span class="line">      if (props.immediateCheck) {</span><br><span class="line">        check();</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    // &#x5BFC;&#x51FA; check &#x51FD;&#x6570;&#xFF0C;&#x8BA9; refs.xxx &#x53EF;&#x4EE5;&#x4F7F;&#x7528;</span><br><span class="line">    useExpose&lt;ListExpose&gt;({ check });</span><br><span class="line"></span><br><span class="line">    // &#x76D1;&#x542C;&#x6EDA;&#x52A8;&#x4E8B;&#x4EF6;&#xFF0C;&#x6267;&#x884C; check &#x51FD;&#x6570;</span><br><span class="line">    useEventListener(&apos;scroll&apos;, check, {</span><br><span class="line">      target: scrollParent,</span><br><span class="line">      passive: true,</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;<code>check</code> &#x51FD;&#x6570;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x4E0B;&#x6587;&#x5206;&#x6790;&#x5B83;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5148;&#x5206;&#x6790;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x7528;&#x5230;&#x7684; <code>useExpose</code>&#x3001;<code>useEventListener</code> &#x7EC4;&#x5408;&#x5F0F; <code>API</code>&#x3002;</p>
<h3 id="5-2-useExpose-&#x66B4;&#x9732;"><a href="#5-2-useExpose-&#x66B4;&#x9732;" class="headerlink" title="5.2 useExpose &#x66B4;&#x9732;"></a>5.2 useExpose &#x66B4;&#x9732;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import { getCurrentInstance } from &apos;vue&apos;;</span><br><span class="line">import { extend } from &apos;../utils&apos;;</span><br><span class="line"></span><br><span class="line">// expose public api</span><br><span class="line">export function useExpose&lt;T = Record&lt;string, any&gt;&gt;(apis: T) {</span><br><span class="line">  const instance = getCurrentInstance();</span><br><span class="line">  if (instance) {</span><br><span class="line">    extend(instance.proxy as object, apis);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7; <code>ref</code> &#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230; <code>List</code> &#x5B9E;&#x4F8B;&#x5E76;&#x8C03;&#x7528;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#xFF0C;&#x8BE6;&#x89C1;<a href="/external_links/2efbe273d438ab1ad9f1ecc753e517a8.html" target="blank" rel="noopener">&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;</a>&#x3002;</p>
<blockquote>
<p><code>Vant</code> &#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x7EC4;&#x4EF6;&#x63D0;&#x4F9B;&#x4E86;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#xFF0C;&#x8C03;&#x7528;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x901A;&#x8FC7; <code>ref</code> &#x6765;&#x6CE8;&#x518C;&#x7EC4;&#x4EF6;&#x5F15;&#x7528;&#x4FE1;&#x606F;&#xFF0C;&#x5F15;&#x7528;&#x4FE1;&#x606F;&#x5C06;&#x4F1A;&#x6CE8;&#x518C;&#x5728;&#x7236;&#x7EC4;&#x4EF6;&#x7684; <code>$refs</code> &#x5BF9;&#x8C61;&#x4E0A;&#x3002;&#x6CE8;&#x518C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>this.$refs.xxx</code> &#x8BBF;&#x95EE;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x7EC4;&#x4EF6;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x8C03;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;&#x3002;</p>
</blockquote>
<h3 id="5-3-useEventListener-&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;"><a href="#5-3-useEventListener-&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;" class="headerlink" title="5.3 useEventListener &#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;"></a>5.3 useEventListener &#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;</h3><p>&#x65B9;&#x4FBF;&#x5730;&#x8FDB;&#x884C;&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A;&#xFF0C;&#x5728;&#x7EC4;&#x4EF6; <code>mounted</code> &#x548C; <code>activated</code> &#x65F6;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;&#xFF0C;<code>unmounted</code> &#x548C; <code>deactivated</code> &#x65F6;&#x89E3;&#x7ED1;&#x4E8B;&#x4EF6;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/d1824553a908279186463ace161b91bf78b007bfc42100b32e2a1c7589b6736d" alt="useEventListener"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import { Ref, watch, isRef, unref, onUnmounted, onDeactivated } from &apos;vue&apos;;</span><br><span class="line">import { onMountedOrActivated } from &apos;../onMountedOrActivated&apos;;</span><br><span class="line">import { inBrowser } from &apos;../utils&apos;;</span><br><span class="line"></span><br><span class="line">type TargetRef = EventTarget | Ref&lt;EventTarget | undefined&gt;;</span><br><span class="line"></span><br><span class="line">export type UseEventListenerOptions = {</span><br><span class="line">  target?: TargetRef;</span><br><span class="line">  capture?: boolean;</span><br><span class="line">  passive?: boolean;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">// TS &#x51FD;&#x6570;&#x91CD;&#x8F7D;</span><br><span class="line">// &#x91CD;&#x8F7D; &#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x8FD9;&#x91CC;&#xFF1A;http://ts.xcatliu.com/basics/type-of-function.html#%E9%87%8D%E8%BD%BD</span><br><span class="line">export function useEventListener&lt;K extends keyof DocumentEventMap&gt;(</span><br><span class="line">  type: K,</span><br><span class="line">  listener: (event: DocumentEventMap[K]) =&gt; void,</span><br><span class="line">  options?: UseEventListenerOptions</span><br><span class="line">): void;</span><br><span class="line">export function useEventListener(</span><br><span class="line">  type: string,</span><br><span class="line">  listener: EventListener,</span><br><span class="line">  options?: UseEventListenerOptions</span><br><span class="line">): void;</span><br><span class="line">export function useEventListener(</span><br><span class="line">  type: string,</span><br><span class="line">  listener: EventListener,</span><br><span class="line">  options: UseEventListenerOptions = {}</span><br><span class="line">) {</span><br><span class="line">    // &#x5982;&#x679C;&#x4E0D;&#x662F;&#x6D4F;&#x89C8;&#x5668;&#x73AF;&#x5883;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x6BD4;&#x5982; SSR</span><br><span class="line">  if (!inBrowser) {</span><br><span class="line">    return;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  const { target = window, passive = false, capture = false } = options;</span><br><span class="line"></span><br><span class="line">  let attached: boolean;</span><br><span class="line"></span><br><span class="line">  // &#x6DFB;&#x52A0;&#x4E8B;&#x4EF6;</span><br><span class="line">  const add = (target?: TargetRef) =&gt; {</span><br><span class="line">    const element = unref(target);</span><br><span class="line"></span><br><span class="line">    if (element &amp;&amp; !attached) {</span><br><span class="line">      element.addEventListener(type, listener, {</span><br><span class="line">        capture,</span><br><span class="line">        passive,</span><br><span class="line">      });</span><br><span class="line">      attached = true;</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // &#x79FB;&#x9664;&#x4E8B;&#x4EF6;</span><br><span class="line">  const remove = (target?: TargetRef) =&gt; {</span><br><span class="line">    const element = unref(target);</span><br><span class="line"></span><br><span class="line">    if (element &amp;&amp; attached) {</span><br><span class="line">      element.removeEventListener(type, listener, capture);</span><br><span class="line">      attached = false;</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  // &#x79FB;&#x9664;&#x4E8B;&#x4EF6;</span><br><span class="line">  onUnmounted(() =&gt; remove(target));</span><br><span class="line">  onDeactivated(() =&gt; remove(target));</span><br><span class="line">  onMountedOrActivated(() =&gt; add(target));</span><br><span class="line"></span><br><span class="line">  if (isRef(target)) {</span><br><span class="line">    watch(target, (val, oldVal) =&gt; {</span><br><span class="line">      remove(oldVal);</span><br><span class="line">      add(val);</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>steup check &#x51FD;&#x6570;</li>
</ol>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;const check = () =&gt; {</span><br><span class="line">    nextTick(() =&gt; {</span><br><span class="line">        // &#x6B63;&#x5728; loading &#x6216;&#x8005;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x52A0;&#x8F7D;</span><br><span class="line">        // &#x6216;&#x8005;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#xFF0C;&#x6216;&#x8005;tab&#x7684;&#x72B6;&#x6001;&#x4E0D;&#x662F;&#x6FC0;&#x6D3B;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x3002;</span><br><span class="line">        if (</span><br><span class="line">            loading.value ||</span><br><span class="line">            props.finished ||</span><br><span class="line">            props.error ||</span><br><span class="line">            // skip check when inside an inactive tab</span><br><span class="line">            tabStatus?.value === false</span><br><span class="line">        ) {</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // offset &#x9ED8;&#x8BA4; 300</span><br><span class="line">        const { offset, direction } = props;</span><br><span class="line">        // &#x6EDA;&#x52A8;&#x7684;&#x7236;&#x7EA7;&#x5143;&#x7D20;&#x7684;&#x4F4D;&#x7F6E;</span><br><span class="line">        const scrollParentRect = useRect(scrollParent);</span><br><span class="line"></span><br><span class="line">        if (!scrollParentRect.height || isHidden(root)) {</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x89E6;&#x5E95;&#x8BA1;&#x7B97;</span><br><span class="line">        // &#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20; &#x548C; &#x5360;&#x4F4D;&#x5143;&#x7D20;</span><br><span class="line">        let isReachEdge = false;</span><br><span class="line">        const placeholderRect = useRect(placeholder);</span><br><span class="line"></span><br><span class="line">        if (direction === &apos;up&apos;) {</span><br><span class="line">            isReachEdge = scrollParentRect.top - placeholderRect.top &lt;= offset;</span><br><span class="line">        } else {</span><br><span class="line">            isReachEdge =</span><br><span class="line">            placeholderRect.bottom - scrollParentRect.bottom &lt;= offset;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x89E6;&#x5E95;&#x4E86;</span><br><span class="line">        if (isReachEdge) {</span><br><span class="line">            loading.value = true;</span><br><span class="line">            emit(&apos;update:loading&apos;, true);</span><br><span class="line">            emit(&apos;load&apos;);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<p>&#x4ECE; <code>check</code> &#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x5229;&#x7528;&#x6EDA;&#x52A8;&#x9AD8;&#x5EA6;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x770B;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x7EC4;&#x5408;&#x5F0F; <code>API</code>&#xFF0C;<code>useTabStatus</code>&#x3001;<code>useScrollParent</code>&#x3001;<code>useRect</code>&#x3002;</p>
<h3 id="6-1-useTabStatus-tab-&#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;"><a href="#6-1-useTabStatus-tab-&#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;" class="headerlink" title="6.1 useTabStatus tab &#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;"></a>6.1 useTabStatus tab &#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import { inject, ComputedRef, InjectionKey } from &apos;vue&apos;;</span><br><span class="line"></span><br><span class="line">// eslint-disable-next-line</span><br><span class="line">export const TAB_STATUS_KEY: InjectionKey&lt;ComputedRef&lt;boolean&gt;&gt; = Symbol();</span><br><span class="line"></span><br><span class="line">export const useTabStatus = () =&gt; inject(TAB_STATUS_KEY, null);</span><br></pre></td></tr></table></figure>

<p>&#x4EE3;&#x7801;&#x6839;&#x636E; <code>commit</code> &#x53EF;&#x4EE5;&#x53D1;&#x73B0; <code>useTabStatus</code> &#x6709;&#x8FD9;&#x6837;&#x4E00;&#x6B21;&#x63D0;&#x4EA4;&#x3002;</p>
<p><a href="/external_links/ce15a4e819e5507f0682525499989b1e.html" target="blank" rel="noopener">fix(List): skip check when inside an inactive tab</a></p>
<p>&#x4E3B;&#x8981;&#x662F;&#x5728; <code>van-tabs</code> &#x7EC4;&#x4EF6;&#x4E2D;&#xFF0C;<code>provide(TAB_STATUS_KEY, active);</code> &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x3002;<code>tab</code> &#x4E0D;&#x6D3B;&#x8DC3;&#x65F6;&#xFF0C;&#x8DF3;&#x8FC7; <code>check</code> &#x51FD;&#x6570;&#xFF0C;&#x4E0D;&#x6267;&#x884C;&#x3002;</p>
<h3 id="6-2-useScrollParent-&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x6700;&#x8FD1;&#x7684;&#x53EF;&#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20;"><a href="#6-2-useScrollParent-&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x6700;&#x8FD1;&#x7684;&#x53EF;&#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20;" class="headerlink" title="6.2 useScrollParent &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x6700;&#x8FD1;&#x7684;&#x53EF;&#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20;"></a>6.2 useScrollParent &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x6700;&#x8FD1;&#x7684;&#x53EF;&#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20;</h3><p>&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x6700;&#x8FD1;&#x7684;&#x53EF;&#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x7ED9;&#x5B9A;&#x53C2;&#x6570; <code>el, root</code> &#x8282;&#x70B9;&#xFF0C;&#x904D;&#x5386;&#x7236;&#x7EA7;&#x8282;&#x70B9;&#x67E5;&#x627E; <code>style</code> &#x5305;&#x542B; <code>scroll|auto|overlay</code> &#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x627E;&#x5230;&#xFF0C;&#x8FD4;&#x56DE;&#x7B2C;&#x4E8C;&#x4E2A; <code>root</code> &#x53C2;&#x6570;&#xFF08;&#x6CA1;&#x6709;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x5219;&#x662F; <code>window</code>&#xFF09;&#x3002;</p>
<p><a href="/external_links/2efbe273d438ab1ad9f1ecc753e517a8.html" target="blank" rel="noopener">useScrollParent &#x6587;&#x6863;</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import { ref, Ref, onMounted } from &apos;vue&apos;;</span><br><span class="line">import { inBrowser } from &apos;../utils&apos;;</span><br><span class="line"></span><br><span class="line">type ScrollElement = HTMLElement | Window;</span><br><span class="line"></span><br><span class="line">const overflowScrollReg = /scroll|auto|overlay/i;</span><br><span class="line">const defaultRoot = inBrowser ? window : undefined;</span><br><span class="line"></span><br><span class="line">// &#x5143;&#x7D20;&#x8282;&#x70B9;</span><br><span class="line">function isElement(node: Element) {</span><br><span class="line">  const ELEMENT_NODE_TYPE = 1;</span><br><span class="line">  return (</span><br><span class="line">    node.tagName !== &apos;HTML&apos; &amp;&amp;</span><br><span class="line">    node.tagName !== &apos;BODY&apos; &amp;&amp;</span><br><span class="line">    node.nodeType === ELEMENT_NODE_TYPE</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// https://github.com/vant-ui/vant/issues/3823</span><br><span class="line">export function getScrollParent(</span><br><span class="line">  el: Element,</span><br><span class="line">  root: ScrollElement | undefined = defaultRoot</span><br><span class="line">) {</span><br><span class="line">  let node = el;</span><br><span class="line"></span><br><span class="line">  // &#x904D;&#x5386;&#x5F97;&#x5230;&#x7236;&#x7EA7;&#x6EDA;&#x52A8;&#x7684;&#x5143;&#x7D20;&#xFF0C;style &#x6837;&#x5F0F;&#x5305;&#x542B; scroll|auto|overlay &#x7684;&#x8282;&#x70B9;</span><br><span class="line">  while (node &amp;&amp; node !== root &amp;&amp; isElement(node)) {</span><br><span class="line">    const { overflowY } = window.getComputedStyle(node);</span><br><span class="line">    if (overflowScrollReg.test(overflowY)) {</span><br><span class="line">      return node;</span><br><span class="line">    }</span><br><span class="line">    node = node.parentNode as Element;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // &#x6CA1;&#x627E;&#x5230;&#x8FD4;&#x56DE;&#x53C2;&#x6570; root&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x4F20;&#x53C2;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; window</span><br><span class="line">  return root;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export function useScrollParent(</span><br><span class="line">  el: Ref&lt;Element | undefined&gt;,</span><br><span class="line">  root: ScrollElement | undefined = defaultRoot</span><br><span class="line">) {</span><br><span class="line">  const scrollParent = ref&lt;Element | Window&gt;();</span><br><span class="line"></span><br><span class="line">  onMounted(() =&gt; {</span><br><span class="line">    if (el.value) {</span><br><span class="line">      scrollParent.value = getScrollParent(el.value, root);</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  return scrollParent;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="6-3-useRect-&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;"><a href="#6-3-useRect-&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;" class="headerlink" title="6.3 useRect &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;"></a>6.3 useRect &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;</h3><p><a href="/external_links/35aa1bf719b1742d599b6bc7d428cbc0.html" target="blank" rel="noopener">vant-contrib.gitee.io/vant/#/zh-C&#x2026;</a></p>
<p>&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x7B49;&#x4EF7;&#x4E8E; <a href="/external_links/f26d6b685301e94e683332f7c0257dcd.html" target="blank" rel="noopener">Element.getBoundingClientRect</a>&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/555e2ba1b3a5b006228e90984ecf82ee391876f79777748d0ca64d652996dcf0" alt="getBoundingClientRect"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// vant/packages/vant-use/src/useRect/index.ts</span><br><span class="line">import { Ref, unref } from &apos;vue&apos;;</span><br><span class="line"></span><br><span class="line">const isWindow = (val: unknown): val is Window =&gt; val === window;</span><br><span class="line"></span><br><span class="line">const makeDOMRect = (width: number, height: number) =&gt;</span><br><span class="line">  ({</span><br><span class="line">    top: 0,</span><br><span class="line">    left: 0,</span><br><span class="line">    right: width,</span><br><span class="line">    bottom: height,</span><br><span class="line">    width,</span><br><span class="line">    height,</span><br><span class="line">  } as DOMRect);</span><br><span class="line"></span><br><span class="line">export const useRect = (</span><br><span class="line">  elementOrRef: Element | Window | Ref&lt;Element | Window | undefined&gt;</span><br><span class="line">) =&gt; {</span><br><span class="line">    // unref()&#xFF1A;&#x5982;&#x679C;&#x53C2;&#x6570;&#x662F; ref&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x5185;&#x90E8;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;&#x53C2;&#x6570;&#x672C;&#x8EAB;&#x3002;&#x8FD9;&#x662F; val = isRef(val) ? val.value : val &#x8BA1;&#x7B97;&#x7684;&#x4E00;&#x4E2A;&#x8BED;&#x6CD5;&#x7CD6;&#x3002;</span><br><span class="line">  const element = unref(elementOrRef);</span><br><span class="line"></span><br><span class="line">  // &#x5982;&#x679C;&#x662F; window &#x76F4;&#x63A5;&#x8FD4;&#x56DE; innerWidth &#x548C; innerHeight </span><br><span class="line">  if (isWindow(element)) {</span><br><span class="line">    const width = element.innerWidth;</span><br><span class="line">    const height = element.innerHeight;</span><br><span class="line">    return makeDOMRect(width, height);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // &#x5426;&#x5219;&#x7528; getBoundingClientRect api</span><br><span class="line">  if (element?.getBoundingClientRect) {</span><br><span class="line">    return element.getBoundingClientRect();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // &#x4E0D;&#x652F;&#x6301;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FD4;&#x56DE; 0 0</span><br><span class="line">  return makeDOMRect(0, 0);</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h3 id="6-4-isHidden-&#x662F;&#x5426;&#x9690;&#x85CF;"><a href="#6-4-isHidden-&#x662F;&#x5426;&#x9690;&#x85CF;" class="headerlink" title="6.4 isHidden &#x662F;&#x5426;&#x9690;&#x85CF;"></a>6.4 isHidden &#x662F;&#x5426;&#x9690;&#x85CF;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// vant/packages/vant/src/utils/dom.ts</span><br><span class="line">export function isHidden(</span><br><span class="line">  elementRef: HTMLElement | Ref&lt;HTMLElement | undefined&gt;</span><br><span class="line">) {</span><br><span class="line">  const el = unref(elementRef);</span><br><span class="line">  if (!el) {</span><br><span class="line">    return false;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  const style = window.getComputedStyle(el);</span><br><span class="line">  const hidden = style.display === &apos;none&apos;;</span><br><span class="line"></span><br><span class="line">  // offsetParent returns null in the following situations:</span><br><span class="line">  // 1. The element or its parent element has the display property set to none.</span><br><span class="line">  // 2. The element has the position property set to fixed</span><br><span class="line">  const parentHidden = el.offsetParent === null &amp;&amp; style.position !== &apos;fixed&apos;;</span><br><span class="line"></span><br><span class="line">  return hidden || parentHidden;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x63A5;&#x7740;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x5F00;&#x5934;&#x7684;&#x63D2;&#x69FD;&#x90E8;&#x5206;&#x3002;</p>
<ol start="7">
<li>&#x63D2;&#x69FD;</li>
</ol>
<hr>
<p>&#x63D2;&#x69FD;&#x90E8;&#x5206;&#x57FA;&#x672C;&#x90FD;&#x662F;&#x6709;&#x63D2;&#x69FD;&#x7528;&#x63D2;&#x69FD;&#x6CA1;&#x6709;&#x5219;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x3002;</p>
<p>&#x63D2;&#x69FD;&#x662F;&#x51FD;&#x6570;&#xFF0C;&#x6BD4;&#x5982; <code>slots.default()</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// setup &#x51FD;&#x6570;</span><br><span class="line">return () =&gt; {</span><br><span class="line">    const Content = slots.default?.();</span><br><span class="line">    const Placeholder = &lt;div ref={placeholder} class={bem(&apos;placeholder&apos;)} /&gt;;</span><br><span class="line"></span><br><span class="line">    return (</span><br><span class="line">        &lt;div ref={root} role=&quot;feed&quot; class={bem()} aria-busy={loading.value}&gt;</span><br><span class="line">            {props.direction === &apos;down&apos; ? Content : Placeholder}</span><br><span class="line">            //   &#x6BD4;&#x5982;&#xFF1A;&#x52A0;&#x8F7D;&#x4E2D;</span><br><span class="line">            {renderLoading()}</span><br><span class="line">            //   &#x7ED3;&#x675F;&#x6587;&#x5B57; &#x6BD4;&#x5982;&#xFF1A;&#x6CA1;&#x6709;&#x66F4;&#x591A;&#x4E86;</span><br><span class="line">            {renderFinishedText()}</span><br><span class="line">            //   &#x52A0;&#x8F7D;&#x9519;&#x8BEF;&#x6587;&#x5B57;&#xFF1A;&#x6BD4;&#x5982;&#x52A0;&#x8F7D;&#x5931;&#x8D25;</span><br><span class="line">            {renderErrorText()}</span><br><span class="line">            {props.direction === &apos;up&apos; ? Content : Placeholder}</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h3 id="7-1-renderFinishedText-&#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x6587;&#x5B57;"><a href="#7-1-renderFinishedText-&#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x6587;&#x5B57;" class="headerlink" title="7.1 renderFinishedText &#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x6587;&#x5B57;"></a>7.1 renderFinishedText &#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x6587;&#x5B57;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;const renderFinishedText = () =&gt; {</span><br><span class="line">    if (props.finished) {</span><br><span class="line">        const text = slots.finished ? slots.finished() : props.finishedText;</span><br><span class="line">        if (text) {</span><br><span class="line">            return &lt;div class={bem(&apos;finished-text&apos;)}&gt;{text}&lt;/div&gt;;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h3 id="7-2-renderErrorText-&#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x6587;&#x5B57;"><a href="#7-2-renderErrorText-&#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x6587;&#x5B57;" class="headerlink" title="7.2 renderErrorText &#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x6587;&#x5B57;"></a>7.2 renderErrorText &#x6E32;&#x67D3;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x6587;&#x5B57;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;const clickErrorText = () =&gt; {</span><br><span class="line">    emit(&apos;update:error&apos;, false);</span><br><span class="line">    check();</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">const renderErrorText = () =&gt; {</span><br><span class="line">    if (props.error) {</span><br><span class="line">        const text = slots.error ? slots.error() : props.errorText;</span><br><span class="line">        if (text) {</span><br><span class="line">            return (</span><br><span class="line">                &lt;div</span><br><span class="line">                    role=&quot;button&quot;</span><br><span class="line">                    class={bem(&apos;error-text&apos;)}</span><br><span class="line">                    tabindex={0}</span><br><span class="line">                    onClick={clickErrorText}</span><br><span class="line">                &gt;</span><br><span class="line">                    {text}</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            );</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h3 id="7-3-renderLoading-&#x6E32;&#x67D3;-loading"><a href="#7-3-renderLoading-&#x6E32;&#x67D3;-loading" class="headerlink" title="7.3 renderLoading &#x6E32;&#x67D3; loading"></a>7.3 renderLoading &#x6E32;&#x67D3; loading</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;const renderLoading = () =&gt; {</span><br><span class="line">    if (loading.value &amp;&amp; !props.finished) {</span><br><span class="line">        return (</span><br><span class="line">            &lt;div class={bem(&apos;loading&apos;)}&gt;</span><br><span class="line">            {slots.loading ? (</span><br><span class="line">                slots.loading()</span><br><span class="line">            ) : (</span><br><span class="line">                &lt;Loading class={bem(&apos;loading-icon&apos;)}&gt;</span><br><span class="line">                {props.loadingText || t(&apos;loading&apos;)}</span><br><span class="line">                &lt;/Loading&gt;</span><br><span class="line">            )}</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<p>&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5206;&#x6790;&#x4E86; <a href="/external_links/35aa1bf719b1742d599b6bc7d428cbc0.html" target="blank" rel="noopener"><code>List</code> &#x7EC4;&#x4EF6;</a> &#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;</p>
<p>&#x539F;&#x7406;&#xFF1A;&#x4F7F;&#x7528; <code>addEventListener</code> &#x76D1;&#x542C;&#x7236;&#x7EA7;&#x5143;&#x7D20;&#x7684; <code>sroll</code> &#x4E8B;&#x4EF6;&#xFF0C;&#x7528; <a href="/external_links/f26d6b685301e94e683332f7c0257dcd.html" target="blank" rel="noopener">Element.getBoundingClientRect</a> &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#xFF08;&#x6EDA;&#x52A8;&#x7236;&#x7EA7;&#x5143;&#x7D20;&#x548C;&#x5360;&#x4F4D;&#x5143;&#x7D20;&#x8BA1;&#x7B97;&#x548C;&#x7EC4;&#x4EF6;&#x5C5E;&#x6027; <code>offset&#xFF08;&#x9ED8;&#x8BA4;300&#xFF09;</code> &#x5C5E;&#x6027;&#x6BD4;&#x8F83;&#xFF09;&#xFF0C;&#x68C0;&#x6D4B;&#x662F;&#x5426;&#x89E6;&#x5E95;&#xFF0C;&#x89E6;&#x5E95;&#x5219;&#x52A0;&#x8F7D;&#x66F4;&#x591A;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;emit(&apos;update:loading&apos;, true);</span><br><span class="line">emit(&apos;load&apos;);</span><br></pre></td></tr></table></figure>

<p>&#x540C;&#x65F6;&#x5206;&#x6790;&#x4E86;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x7EC4;&#x5408;&#x5F0F; <code>API</code></p>
<ul>
<li><code>useExpose</code> &#x66B4;&#x9732;&#x63A5;&#x53E3;&#x4F9B; <code>this.$refs.xxx</code> &#x4F7F;&#x7528;</li>
<li><code>useEventListener</code> &#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;</li>
<li><code>useTabStatus</code> &#x5F53;&#x524D; <code>tab</code> &#x662F;&#x5426;&#x6FC0;&#x6D3B;&#x7684;&#x72B6;&#x6001;</li>
<li><code>useScrollParent</code> &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x6700;&#x8FD1;&#x7684;&#x53EF;&#x6EDA;&#x52A8;&#x7236;&#x5143;&#x7D20;</li>
<li><code>useRect</code> &#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5927;&#x5C0F;&#x53CA;&#x5176;&#x76F8;&#x5BF9;&#x4E8E;&#x89C6;&#x53E3;&#x7684;&#x4F4D;&#x7F6E;</li>
</ul>
<p>&#x7EC4;&#x4EF6;&#x7559;&#x6709;&#x56DB;&#x4E2A;&#x63D2;&#x69FD;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A;</p>
<ul>
<li><code>default</code> &#x5217;&#x8868;&#x5185;&#x5BB9;</li>
<li><code>loading</code> &#x81EA;&#x5B9A;&#x4E49;&#x5E95;&#x90E8;&#x52A0;&#x8F7D;&#x4E2D;&#x63D0;&#x793A;</li>
<li><code>finished</code> &#x81EA;&#x5B9A;&#x4E49;&#x52A0;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#x7684;&#x63D0;&#x793A;&#x6587;&#x6848;</li>
<li><code>error</code> &#x81EA;&#x5B9A;&#x4E49;&#x52A0;&#x8F7D;&#x5931;&#x8D25;&#x540E;&#x7684;&#x63D0;&#x793A;&#x6587;&#x6848;</li>
</ul>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5206;&#x6790;&#x5B8C;&#x4E86; <code>List</code> &#x7EC4;&#x4EF6;&#xFF0C;&#x4E3B;&#x8981;&#x4E0E; <code>DOM</code> &#x64CD;&#x4F5C;&#x4F1A;&#x6BD4;&#x8F83;&#x591A;&#x3002;<code>List &#x7EC4;&#x4EF6;</code> &#x4E3B;&#x6587;&#x4EF6;&#x7684;&#x4EE3;&#x7801;&#x4EC5;&#x6709; <code>100</code> &#x591A;&#x884C;&#xFF0C;&#x4F46;&#x5C01;&#x88C5;&#x4E86;&#x5F88;&#x591A;&#x7EC4;&#x5408;&#x5F0F; <code>API</code> &#x3002;&#x770B;&#x5B8C;&#x8FD9;&#x7BC7;&#x6E90;&#x7801;&#x6587;&#x7AE0;&#xFF0C;&#x518D;&#x53BB;&#x770B; <a href="/external_links/35aa1bf719b1742d599b6bc7d428cbc0.html" target="blank" rel="noopener">List &#x7EC4;&#x4EF6;&#x6587;&#x6863;</a>&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x4F1A;&#x6709;&#x8C41;&#x7136;&#x5F00;&#x6717;&#x7684;&#x611F;&#x89C9;&#x3002;&#x518D;&#x770B;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x53EF;&#x4EE5;&#x731C;&#x6D4B;&#x51FA;&#x5927;&#x6982;&#x5B9E;&#x73B0;&#x7684;&#x4EE3;&#x7801;&#x4E86;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;&#x4F7F;&#x7528; <code>react</code>&#x3001;<code>Taro</code> &#x6280;&#x672F;&#x6808;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B; <code>taroify</code> <code>List</code> &#x7EC4;&#x4EF6;&#x7684;&#x5B9E;&#x73B0; <a href="/external_links/3512dc6181495703e9faef6f39a91d44.html" target="blank" rel="noopener">&#x6587;&#x6863;</a>&#xFF0C;<a href="/external_links/3728964ffe911d2c2914e2cf03e982ad.html" target="blank" rel="noopener">&#x6E90;&#x7801;</a>&#x3002;</p>
<p><strong>&#x5982;&#x679C;&#x770B;&#x5B8C;&#x6709;&#x6536;&#x83B7;&#xFF0C;&#x6B22;&#x8FCE;&#x70B9;&#x8D5E;&#x3001;&#x8BC4;&#x8BBA;&#x3001;&#x5206;&#x4EAB;&#x652F;&#x6301;&#x3002;&#x4F60;&#x7684;&#x652F;&#x6301;&#x548C;&#x80AF;&#x5B9A;&#xFF0C;&#x662F;&#x6211;&#x5199;&#x4F5C;&#x7684;&#x52A8;&#x529B;</strong>&#x3002;</p>
<ol start="9">
<li>&#x52A0;&#x6E90;&#x7801;&#x5171;&#x8BFB;&#x7FA4;&#x4EA4;&#x6D41;</li>
</ol>
<hr>
<p>&#x6700;&#x540E;&#x53EF;&#x4EE5;&#x6301;&#x7EED;&#x5173;&#x6CE8;&#x6211;<a href="/external_links/0eaae9aee67b3837a4608f6f57e3fe73.html" target="blank" rel="noopener">@&#x82E5;&#x5DDD;</a>&#x3002;&#x6211;&#x4F1A;&#x5199;&#x4E00;&#x4E2A;<a href="/external_links/6f4e78fe9bb73195277a1b311df1958d.html" target="blank" rel="noopener">&#x7EC4;&#x4EF6;&#x5E93;&#x6E90;&#x7801;&#x7CFB;&#x5217;&#x4E13;&#x680F;</a>&#xFF0C;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x5173;&#x6CE8;&#x3002;</p>
<p>&#x6211;&#x503E;&#x529B;&#x6301;&#x7EED;&#x7EC4;&#x7EC7;&#x4E86;&#x4E00;&#x5E74;<a href="https://dev.newban.cn/7079706017579139102">&#x6BCF;&#x5468;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x5B66;&#x4E60;200&#x884C;&#x5DE6;&#x53F3;&#x7684;&#x6E90;&#x7801;&#x5171;&#x8BFB;&#x6D3B;&#x52A8;</a>&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;<a href="/external_links/f6715fb41c5add76a791f132e3c512af.html" target="blank" rel="noopener">&#x70B9;&#x6B64;&#x626B;&#x7801;&#x52A0;&#x6211;&#x5FAE;&#x4FE1; <code>ruochuan02</code> &#x53C2;&#x4E0E;</a>&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x60F3;&#x5B66;&#x6E90;&#x7801;&#xFF0C;&#x6781;&#x529B;&#x63A8;&#x8350;&#x5173;&#x6CE8;&#x6211;&#x5199;&#x7684;&#x4E13;&#x680F;<a href="/external_links/fedfaff5eac6f4a3b25ab39b65554b53.html" target="blank" rel="noopener">&#x300A;&#x5B66;&#x4E60;&#x6E90;&#x7801;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x7CFB;&#x5217;&#x300B;</a>&#xFF0C;&#x76EE;&#x524D;&#x662F;&#x6398;&#x91D1;&#x5173;&#x6CE8;&#x4EBA;&#x6570;&#xFF08;4.1k+&#x4EBA;&#xFF09;&#x7B2C;&#x4E00;&#x7684;&#x4E13;&#x680F;&#xFF0C;&#x5199;&#x6709;20&#x4F59;&#x7BC7;&#x6E90;&#x7801;&#x6587;&#x7AE0;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/5436c57951fc13d7d0fec27d81ed01fc.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7165044834590261256.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7165044834590261256.html" itemprop="url">Java & Android 集合框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-12T16:35:10+08:00">
                2022-11-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5B66;&#x4E60;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x638C;&#x63E1;&#x95EE;&#x9898;&#x80CC;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x601D;&#x7EF4;&#x6846;&#x67B6;&#xFF0C;&#x4F60;&#x7684;&#x601D;&#x8003;&#x8D8A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x57DF;&#x5C31;&#x8D8A;&#x5E7F;&#xFF0C;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#x4E5F;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F80;&#x5F80;&#x4E0D;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784; / &#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F; Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 8 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x5F6D;&#x3002;</p>
<p><a href="https://dev.newban.cn/7163301919316934693">&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x91CC;</a>&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x5230;&#x4E86; Java &#x6807;&#x51C6;&#x5E93;&#x4E2D; <a href="https://dev.newban.cn/7163985718417555487">HashMap</a> &#x4E0E; <a href="https://dev.newban.cn/7164348785512939551">LinkedHashMap</a> &#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;HashMap &#x662F;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x7684;&#x6563;&#x5217;&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C; LinkedHashMap &#x662F;&#x5728; HashMap &#x7684;&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x7684;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#x3002;</p>
<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BA8;&#x8BBA; WeakHashMap&#xFF0C;&#x5176;&#x4E2D;&#x7684; &#x201C;Weak&#x201D; &#x662F;&#x6307;&#x4EC0;&#x4E48;&#xFF0C;&#x4E0E;&#x524D;&#x4E24;&#x8005;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x6709;&#x4F55;&#x4E0D;&#x540C;&#xFF1F;&#x6211;&#x4EEC;&#x5C31;&#x56F4;&#x7ED5;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x5C55;&#x5F00;&#x3002;</p>
<blockquote>
<p>&#x63D0;&#x793A;&#xFF1A; &#x672C;&#x6587;&#x6E90;&#x7801;&#x57FA;&#x4E8E; JDK 1.2 WeakHashMap&#x3002;</p>
</blockquote>
<hr>
<p><strong>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF1A;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/2b28c5f04c2d67c559ed10f882ac9ce462dce46f2b1fea578243ee816110d545" alt></p>
<hr>
<ol>
<li>&#x56DE;&#x987E; HashMap &#x548C; LinkedHashMap</li>
</ol>
<hr>
<p>&#x5176;&#x5B9E;&#xFF0C;WeakHashMap &#x4E0E; HashMap &#x548C; LinkedHashMap &#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5927;&#x540C;&#x5C0F;&#x5F02;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5148;&#x56DE;&#x987E;&#x540E;&#x8005;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;</p>
<h3 id="1-1-&#x8BF4;&#x4E00;&#x4E0B;-HashMap-&#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;"><a href="#1-1-&#x8BF4;&#x4E00;&#x4E0B;-HashMap-&#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;" class="headerlink" title="1.1 &#x8BF4;&#x4E00;&#x4E0B; HashMap &#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;"></a>1.1 &#x8BF4;&#x4E00;&#x4E0B; HashMap &#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;</h3><p>HashMap &#x662F;&#x57FA;&#x4E8E;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x52A8;&#x6001;&#x6563;&#x5217;&#x8868;&#x3002;</p>
<ul>
<li>1&#x3001;HashMap &#x5728; Java 7 &#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x662F; &#x201C;&#x6570;&#x7EC4; + &#x94FE;&#x8868;&#x201D;&#xFF0C;&#x53D1;&#x751F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x7528;&#x5934;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;&#x5355;&#x94FE;&#x8868;&#x4E2D;&#xFF1B;</li>
<li>2&#x3001;HashMap &#x5728; Java 8 &#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x662F; &#x201C;&#x6570;&#x7EC4; + &#x94FE;&#x8868; + &#x7EA2;&#x9ED1;&#x6811;&#x201D;&#xFF0C;&#x53D1;&#x751F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x7528;&#x5C3E;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;&#x5355;&#x94FE;&#x8868;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x94FE;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x5927;&#x4E8E; 8 &#x65F6;&#x4E14;&#x6563;&#x5217;&#x8868;&#x5BB9;&#x91CF;&#x5927;&#x4E8E; 64&#xFF0C;&#x4F1A;&#x5C06;&#x94FE;&#x8868;&#x6811;&#x5316;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x3002;</li>
</ul>
<p><code>HashMap &#x5B9E;&#x73B0;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/5f8ad3b0625e310ee1ec626124f4043163d40fd79a56b6fa2ba7c0e3ce236f16" alt></p>
<h3 id="1-2-&#x8BF4;&#x4E00;&#x4E0B;-LinkedHashMap-&#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;"><a href="#1-2-&#x8BF4;&#x4E00;&#x4E0B;-LinkedHashMap-&#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;" class="headerlink" title="1.2 &#x8BF4;&#x4E00;&#x4E0B; LinkedHashMap &#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;"></a>1.2 &#x8BF4;&#x4E00;&#x4E0B; LinkedHashMap &#x7684;&#x5B9E;&#x73B0;&#x7ED3;&#x6784;</h3><p>LinkedHashMap &#x662F;&#x7EE7;&#x627F;&#x4E8E; HashMap &#x5B9E;&#x73B0;&#x7684;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#x3002;</p>
<ul>
<li>1&#x3001;LinkedHashMap &#x540C;&#x65F6;&#x5177;&#x5907;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x548C;&#x6563;&#x5217;&#x8868;&#x7684;&#x7279;&#x70B9;&#x3002;&#x5F53; LinkedHashMap &#x4F5C;&#x4E3A;&#x6563;&#x5217;&#x8868;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x51FA; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x3002;&#x5F53; LinkedHashMap &#x4F5C;&#x4E3A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x51FA;&#x6709;&#x5E8F;&#x7684;&#x7279;&#x6027;&#xFF1B;</li>
<li>2&#x3001;LinkedHashMap &#x652F;&#x6301; FIFO &#x548C; LRU &#x4E24;&#x79CD;&#x6392;&#x5E8F;&#x6A21;&#x5F0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; FIFO &#x6392;&#x5E8F;&#x6A21;&#x5F0F;&#xFF0C;&#x5373;&#x6309;&#x7167;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x3002;Android &#x4E2D;&#x7684; LruCache &#x5185;&#x5B58;&#x7F13;&#x5B58;&#x548C; DiskLruCache &#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x4E5F;&#x662F;&#x76F4;&#x63A5;&#x590D;&#x7528; LinkedHashMap &#x63D0;&#x4F9B;&#x7684;&#x7F13;&#x5B58;&#x7BA1;&#x7406;&#x80FD;&#x529B;&#x3002;</li>
</ul>
<p><code>LinkedHashMap &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/4a815835ca93af94f3270fb822a39c2a465b3cc10b2c575364a0d77ac89270ae" alt></p>
<hr>
<ol start="2">
<li>&#x8BA4;&#x8BC6; WeakHashMap</li>
</ol>
<hr>
<h3 id="2-1-WeakReference-&#x5F31;&#x5F15;&#x7528;&#x7684;&#x7279;&#x70B9;"><a href="#2-1-WeakReference-&#x5F31;&#x5F15;&#x7528;&#x7684;&#x7279;&#x70B9;" class="headerlink" title="2.1 WeakReference &#x5F31;&#x5F15;&#x7528;&#x7684;&#x7279;&#x70B9;"></a>2.1 WeakReference &#x5F31;&#x5F15;&#x7528;&#x7684;&#x7279;&#x70B9;</h3><p>WeakHashMap &#x4E2D;&#x7684; &#x201C;Weak&#x201D; &#x6307;&#x952E; Key &#x662F;&#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x4E5F;&#x53EB;&#x5F31;&#x952E;&#x3002;&#x5F31;&#x5F15;&#x7528;&#x662F; Java &#x56DB;&#x5927;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x4E4B;&#x4E00;&#xFF0C;&#x4E00;&#x5171;&#x6709;&#x56DB;&#x79CD;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x5F3A;&#x5F15;&#x7528;&#x3001;&#x8F6F;&#x5F15;&#x7528;&#x3001;&#x5F31;&#x5F15;&#x7528;&#x548C;&#x865A;&#x5F15;&#x7528;&#x3002;&#x6211;&#x5C06;&#x5B83;&#x4EEC;&#x7684;&#x533A;&#x522B;&#x6982;&#x62EC;&#x4E3A; 3 &#x4E2A;&#x7EF4;&#x5EA6;&#xFF1A;</p>
<ul>
<li><strong>&#x7EF4;&#x5EA6; 1 - &#x5BF9;&#x8C61;&#x53EF;&#x8FBE;&#x6027;&#x72B6;&#x6001;&#x7684;&#x533A;&#x522B;&#xFF1A;</strong> &#x5F3A;&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5F3A;&#x53EF;&#x8FBE;&#x7684;&#xFF0C;&#x53EA;&#x6709;&#x5F3A;&#x53EF;&#x8FBE;&#x7684;&#x5BF9;&#x8C61;&#x624D;&#x4F1A;&#x8BA4;&#x4E3A;&#x662F;&#x5B58;&#x6D3B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x5728;&#x5783;&#x573E;&#x6536;&#x96C6;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF1B;</li>
<li><strong>&#x7EF4;&#x5EA6; 2 - &#x5783;&#x573E;&#x56DE;&#x6536;&#x7B56;&#x7565;&#x7684;&#x533A;&#x522B;&#xFF1A;</strong> &#x4E0D;&#x540C;&#x7684;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x7684;&#x56DE;&#x6536;&#x6FC0;&#x8FDB;&#x7A0B;&#x5EA6;&#x4E0D;&#x540C;&#xFF0C;<ul>
<li>&#x5F3A;&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF1B;</li>
<li>&#x8F6F;&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x5728;&#x5185;&#x5B58;&#x5145;&#x8DB3;&#x65F6;&#x4E0D;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x65F6;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF1B;</li>
<li>&#x5F31;&#x5F15;&#x7528;&#x548C;&#x865A;&#x5F15;&#x7528;&#x6307;&#x5411;&#x7684;&#x5BF9;&#x8C61;&#x65E0;&#x8BBA;&#x5728;&#x5185;&#x5B58;&#x662F;&#x5426;&#x5145;&#x8DB3;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x88AB;&#x56DE;&#x6536;&#xFF1B;</li>
</ul>
</li>
<li><strong>&#x7EF4;&#x5EA6; 3 - &#x611F;&#x77E5;&#x5783;&#x573E;&#x56DE;&#x6536;&#x65F6;&#x673A;&#xFF1A;</strong> &#x5F53;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x5173;&#x8054;&#x7684;&#x5B9E;&#x9645;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x65F6;&#xFF0C;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x4F1A;&#x8FDB;&#x5165;&#x5173;&#x8054;&#x7684;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF0C;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x89C2;&#x5BDF;&#x5F15;&#x7528;&#x961F;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x611F;&#x77E5;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x65F6;&#x673A;&#x3002;</li>
</ul>
<p><code>&#x611F;&#x77E5;&#x5783;&#x573E;&#x56DE;&#x6536;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d8d487dcb856df40e76456b302facf33ab09facf6a5597db16ae103e0338158c" alt></p>
<blockquote>
<p><strong>&#x63D0;&#x793A;&#xFF1A;</strong> &#x5173;&#x4E8E; &#x201C;Java &#x56DB;&#x79CD;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x201D; &#x7684;&#x533A;&#x522B;&#xFF0C;&#x5728;&#x5C0F;&#x5F6D;&#x7684; Java &#x4E13;&#x680F;&#x4E2D;&#x6DF1;&#x5165;&#x8BA8;&#x8BBA;&#x8FC7; <a href="https://dev.newban.cn/7130652285817847844">&#x300A;&#x540A;&#x6253;&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x8BF4;&#x4E00;&#x4E0B; Java &#x7684;&#x56DB;&#x79CD;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x300B;</a>&#xFF0C;&#x53BB;&#x770B;&#x770B;&#x3002;</p>
</blockquote>
<h3 id="2-2-WeakHashMap-&#x7684;&#x7279;&#x70B9;"><a href="#2-2-WeakHashMap-&#x7684;&#x7279;&#x70B9;" class="headerlink" title="2.2 WeakHashMap &#x7684;&#x7279;&#x70B9;"></a>2.2 WeakHashMap &#x7684;&#x7279;&#x70B9;</h3><p><strong>WeakHashMap &#x662F;&#x4F7F;&#x7528;&#x5F31;&#x952E;&#x7684;&#x52A8;&#x6001;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x7528;&#x4E8E;&#x5B9E;&#x73B0; &#x201C;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x201D; &#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#x3002;</strong></p>
<ul>
<li>1&#x3001;WeakHashMap &#x4F7F;&#x7528;&#x4E0E; Java 7 HashMap &#x76F8;&#x540C;&#x7684; &#x201C;&#x6570;&#x7EC4; + &#x94FE;&#x8868;&#x201D; &#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF0C;&#x53D1;&#x751F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x7528;&#x5934;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;&#x5355;&#x94FE;&#x8868;&#x4E2D;&#xFF1B;</li>
<li>2&#x3001;WeakHashMap &#x4F9D;&#x8D56;&#x4E8E; Java &#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x4E0D;&#x53EF;&#x8FBE;&#x5BF9;&#x8C61;&#x7684;&#x7279;&#x6027;&#x3002;&#x5F53; Key &#x5BF9;&#x8C61;&#x4E0D;&#x518D;&#x88AB;&#x6301;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x4F1A;&#x6309;&#x7167;&#x5F31;&#x5F15;&#x7528;&#x7B56;&#x7565;&#x81EA;&#x52A8;&#x56DE;&#x6536; Key &#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5728;&#x4E0B;&#x6B21;&#x8BBF;&#x95EE; WeakHashMap &#x65F6;&#x6E05;&#x7406;&#x5168;&#x90E8;&#x65E0;&#x6548;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x56E0;&#x6B64;&#xFF0C;WeakHashMap &#x7279;&#x522B;&#x9002;&#x5408;&#x5B9E;&#x73B0; &#x201C;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x201D; &#x7684;&#x5185;&#x5B58;&#x6D3B;&#x52A8;&#x7F13;&#x5B58;&#xFF0C;&#x5F53;&#x952E;&#x503C;&#x5BF9;&#x6709;&#x6548;&#x65F6;&#x4FDD;&#x7559;&#xFF0C;&#x5728;&#x952E;&#x503C;&#x5BF9;&#x65E0;&#x6548;&#x65F6;&#x81EA;&#x52A8;&#x88AB;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x6E05;&#x7406;&#xFF1B;</li>
<li>3&#x3001;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x56E0;&#x4E3A; WeakHashMap &#x4F1A;&#x6301;&#x6709; Value &#x5BF9;&#x8C61;&#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x5728; Value &#x5BF9;&#x8C61;&#x4E2D;&#x4E00;&#x5B9A;&#x4E0D;&#x80FD;&#x6301;&#x6709; key &#x7684;&#x5F3A;&#x5F15;&#x7528;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x4F1A;&#x963B;&#x6B62;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x56DE;&#x6536; &#x201C;&#x672C;&#x8BE5;&#x4E0D;&#x53EF;&#x8FBE;&#x201D; &#x7684; Key &#x5BF9;&#x8C61;&#xFF0C;&#x4F7F;&#x5F97; WeakHashMap &#x5931;&#x53BB;&#x4F5C;&#x7528;&#x3002;</li>
<li>4&#x3001;&#x4E0E; HashMap &#x76F8;&#x540C;&#xFF0C;LinkedHashMap &#x4E5F;&#x4E0D;&#x8003;&#x8651;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4E5F;&#x4F1A;&#x5B58;&#x5728;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Collections.synchronizedMap &#x5305;&#x88C5;&#x7C7B;&#xFF0C;&#x5176;&#x539F;&#x7406;&#x4E5F;&#x662F;&#x5728;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x4E0A;&#x589E;&#x52A0; synchronized &#x5173;&#x952E;&#x5B57;&#x3002;</li>
</ul>
<p><code>WeakHashMap &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/72649307a8a490a65478d4f6b6a45bf30335504b8920efcee62a17751e6bce7a" alt></p>
<p><code>&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x6570;&#x636E;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/86f2dcedbcc2927a78c25c6ec7113ddd251fffcba4cb1eaf3f4ea8bf7254e14e" alt></p>
<h3 id="2-3-&#x8BF4;&#x4E00;&#x4E0B;-WeakHashMap-&#x4E0E;-HashMap-&#x548C;-LinkedHashMap-&#x7684;&#x533A;&#x522B;&#xFF1F;"><a href="#2-3-&#x8BF4;&#x4E00;&#x4E0B;-WeakHashMap-&#x4E0E;-HashMap-&#x548C;-LinkedHashMap-&#x7684;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="2.3 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x4E0E; HashMap &#x548C; LinkedHashMap &#x7684;&#x533A;&#x522B;&#xFF1F;"></a>2.3 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x4E0E; HashMap &#x548C; LinkedHashMap &#x7684;&#x533A;&#x522B;&#xFF1F;</h3><p>WeakHashMap &#x4E0E; HashMap &#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x52A8;&#x6001;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x4E24;&#x8005;&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x5728; <strong>&#x952E; Key &#x7684;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x4E0A;&#xFF1A;</strong></p>
<ul>
<li>HashMap &#x4F1A;&#x6301;&#x6709;&#x952E; Key &#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x9664;&#x975E;&#x624B;&#x52A8;&#x79FB;&#x9664;&#xFF0C;&#x5426;&#x5219;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x957F;&#x671F;&#x5B58;&#x5728;&#x4E8E;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF1B;</li>
<li>WeakHashMap &#x53EA;&#x6301;&#x6709;&#x952E; Key &#x7684;&#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x5F53; Key &#x5BF9;&#x8C61;&#x4E0D;&#x518D;&#x88AB;&#x5916;&#x90E8;&#x6301;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x88AB;&#x6E05;&#x7406;&#x3002;</li>
</ul>
<p>WeakHashMap &#x4E0E; LinkedHashMap &#x90FD;&#x6709;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x4E24;&#x8005;&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x5728;&#x4E8E; <strong>&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x7684;&#x7B56;&#x7565;&#x4E0A;&#xFF1A;</strong></p>
<ul>
<li>LinkedHashMap &#x4F1A;&#x6309;&#x7167; FIFO &#x6216; LRU &#x7684;&#x7B56;&#x7565; &#x201C;&#x5C1D;&#x8BD5;&#x201D; &#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x8005;&#x91CD;&#x5199; <code>removeEldestEntry()</code> &#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x662F;&#x5426;&#x5220;&#x9664;&#x6700;&#x65E9;&#x8282;&#x70B9;&#x7684;&#x5224;&#x65AD;&#x903B;&#x8F91;&#xFF1B;</li>
<li>WeakHashMap &#x4F1A;&#x6309;&#x7167; Key &#x5BF9;&#x8C61;&#x7684;&#x53EF;&#x8FBE;&#x6027;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF0C;&#x5F53; Key &#x5BF9;&#x8C61;&#x4E0D;&#x518D;&#x88AB;&#x6301;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#x3002;</li>
</ul>
<h3 id="2-4-&#x91CD;&#x5EFA;-Key-&#x5BF9;&#x8C61;&#x4E0D;&#x7B49;&#x4EF7;&#x7684;&#x95EE;&#x9898;"><a href="#2-4-&#x91CD;&#x5EFA;-Key-&#x5BF9;&#x8C61;&#x4E0D;&#x7B49;&#x4EF7;&#x7684;&#x95EE;&#x9898;" class="headerlink" title="2.4 &#x91CD;&#x5EFA; Key &#x5BF9;&#x8C61;&#x4E0D;&#x7B49;&#x4EF7;&#x7684;&#x95EE;&#x9898;"></a>2.4 &#x91CD;&#x5EFA; Key &#x5BF9;&#x8C61;&#x4E0D;&#x7B49;&#x4EF7;&#x7684;&#x95EE;&#x9898;</h3><p>WeakHashMap &#x7684; Key &#x4F7F;&#x7528;&#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4EE5; Key &#x4F5C;&#x4E3A;&#x6E05;&#x7406;&#x6570;&#x636E;&#x7684;&#x5224;&#x65AD;&#x951A;&#x70B9;&#xFF0C;&#x5F53; Key &#x53D8;&#x5F97;&#x4E0D;&#x53EF;&#x8FBE;&#x65F6;&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x6570;&#x636E;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x591A;&#x4E2A; <code>equals</code> &#x76F8;&#x7B49;&#x7684; Key &#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x7B2C; 1 &#x4E2A; Key &#x5BF9;&#x8C61;&#x4E0D;&#x53EF;&#x8FBE;&#x5BFC;&#x81F4;&#x952E;&#x503C;&#x5BF9;&#x88AB;&#x56DE;&#x6536;&#xFF0C;&#x800C;&#x7B2C; 2 &#x4E2A; Key &#x67E5;&#x8BE2;&#x952E;&#x503C;&#x5BF9;&#x4E3A; null &#x7684;&#x95EE;&#x9898;&#x3002; <strong>&#x8FD9;&#x8BF4;&#x660E; <code>equals</code> &#x76F8;&#x7B49;&#x7684; Key &#x5BF9;&#x8C61;&#x5728; HashMap &#x7B49;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x662F;&#x7B49;&#x4EF7;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5728; WeakHashMap &#x6563;&#x5217;&#x8868;&#x4E2D;&#x662F;&#x4E0D;&#x7B49;&#x4EF7;&#x7684;&#x3002;</strong></p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C; Key &#x7C7B;&#x578B;&#x6CA1;&#x6709;&#x91CD;&#x5199; equals &#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48; WeakHashMap &#x5C31;&#x8868;&#x73B0;&#x826F;&#x597D;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x5B58;&#x5728;&#x6B67;&#x4E49;&#x3002;&#x4F8B;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A; Demo &#x4E2D;&#xFF0C;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E86;&#x6307;&#x5411; <code>image_url1</code> &#x7684;&#x56FE;&#x7247; Key1&#xFF0C;&#x518D;&#x91CD;&#x5EFA;&#x4E86;&#x540C;&#x6837;&#x6307;&#x5411; <code>image_url1</code> &#x7684;&#x56FE;&#x7247; Key2&#x3002;&#x5728; HashMap &#x4E2D;&#xFF0C;Key1 &#x548C; Key2 &#x7B49;&#x4EF7;&#xFF0C;&#x4F46;&#x5728; WeakHashMap &#x4E2D;&#xFF0C;Key1 &#x548C; Key2 &#x4E0D;&#x7B49;&#x4EF7;&#x3002;</p>
<p><code>Demo</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class ImageKey {</span><br><span class="line">    private String url;</span><br><span class="line"></span><br><span class="line">    ImageKey(String url) {</span><br><span class="line">        this.url = url;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public boolean equals(Object obj) {</span><br><span class="line">        return (obj instanceOf ImageKey) &amp;&amp; Objects.equals(((ImageKey)obj).url, this.url);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">WeakHashMap&lt;ImageKey, Bitmap&gt; map = new WeakHashMap&lt;&gt;();</span><br><span class="line">ImageKey key1 = new ImageKey(&quot;image_url1&quot;);</span><br><span class="line">ImageKey key2 = new ImageKey(&quot;image_url2&quot;);</span><br><span class="line">// key1 equalsTo key3</span><br><span class="line">ImageKey key3 = new ImageKey(&quot;image_url1&quot;);</span><br><span class="line"></span><br><span class="line">map.put(key1, bitmap1);</span><br><span class="line">map.put(key2, bitmap2);</span><br><span class="line"></span><br><span class="line">System.out.println(map.get(key1)); // &#x8F93;&#x51FA; bitmap1</span><br><span class="line">System.out.println(map.get(key2)); // &#x8F93;&#x51FA; bitmap2</span><br><span class="line">System.out.println(map.get(key3)); // &#x8F93;&#x51FA; bitmap1</span><br><span class="line"></span><br><span class="line">// &#x4F7F; key1 &#x4E0D;&#x53EF;&#x8FBE;&#xFF0C;key3 &#x4FDD;&#x6301;</span><br><span class="line">key1 = null;</span><br><span class="line"></span><br><span class="line">// &#x8BF4;&#x660E;&#x91CD;&#x5EFA; Key &#x4E0E;&#x539F;&#x59CB; Key &#x4E0D;&#x7B49;&#x4EF7;</span><br><span class="line">System.out.println(map.get(key1)); // &#x8F93;&#x51FA; null</span><br><span class="line">System.out.println(map.get(key2)); // &#x8F93;&#x51FA; bitmap2</span><br><span class="line">System.out.println(map.get(key3)); // &#x8F93;&#x51FA; null</span><br></pre></td></tr></table></figure>

<p>&#x9ED8;&#x8BA4;&#x7684; <code>Object#equals</code> &#x662F;&#x5224;&#x65AD;&#x4E24;&#x4E2A;&#x53D8;&#x91CF;&#x662F;&#x5426;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1A;</p>
<p><code>Object.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public boolean equals(Object obj) {</span><br><span class="line">    return (this == obj);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="2-5-Key-&#x5F31;&#x5F15;&#x7528;&#x548C;-Value-&#x5F31;&#x5F15;&#x7528;&#x7684;&#x533A;&#x522B;"><a href="#2-5-Key-&#x5F31;&#x5F15;&#x7528;&#x548C;-Value-&#x5F31;&#x5F15;&#x7528;&#x7684;&#x533A;&#x522B;" class="headerlink" title="2.5 Key &#x5F31;&#x5F15;&#x7528;&#x548C; Value &#x5F31;&#x5F15;&#x7528;&#x7684;&#x533A;&#x522B;"></a>2.5 Key &#x5F31;&#x5F15;&#x7528;&#x548C; Value &#x5F31;&#x5F15;&#x7528;&#x7684;&#x533A;&#x522B;</h3><p>&#x4E0D;&#x7BA1;&#x662F; Key &#x8FD8;&#x662F; Value &#x4F7F;&#x7528;&#x5F31;&#x5F15;&#x7528;&#x90FD;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#xFF0C;&#x81F3;&#x4E8E;&#x4F7F;&#x7528;&#x54EA;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x5404;&#x6709;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x9002;&#x7528;&#x573A;&#x666F;&#x4E5F;&#x4E0D;&#x540C;&#x3002;</p>
<ul>
<li><strong>Key &#x5F31;&#x5F15;&#x7528;&#xFF1A;</strong> &#x4EE5; Key &#x4F5C;&#x4E3A;&#x6E05;&#x7406;&#x6570;&#x636E;&#x7684;&#x5224;&#x65AD;&#x951A;&#x70B9;&#xFF0C;&#x5F53; Key &#x4E0D;&#x53EF;&#x8FBE;&#x65F6;&#x6E05;&#x7406;&#x6570;&#x636E;&#x3002;&#x4F18;&#x70B9;&#x662F;&#x5BB9;&#x5668;&#x5916;&#x4E0D;&#x9700;&#x8981;&#x6301;&#x6709; Value &#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x7F3A;&#x70B9;&#x662F;&#x91CD;&#x5EFA;&#x7684; Key &#x4E0E;&#x539F;&#x59CB; Key &#x4E0D;&#x7B49;&#x4EF7;&#xFF0C;&#x91CD;&#x5EFA; Key &#x65E0;&#x6CD5;&#x963B;&#x6B62;&#x6570;&#x636E;&#x88AB;&#x6E05;&#x7406;&#xFF1B;</li>
<li><strong>Value &#x5F31;&#x5F15;&#x7528;&#xFF1A;</strong> &#x4EE5; Value &#x4F5C;&#x4E3A;&#x6E05;&#x7406;&#x6570;&#x636E;&#x7684;&#x5224;&#x65AD;&#x951A;&#x70B9;&#xFF0C;&#x5F53; Value &#x4E0D;&#x53EF;&#x8FBE;&#x65F6;&#x6E05;&#x7406;&#x6570;&#x636E;&#x3002;&#x4F18;&#x70B9;&#x662F;&#x91CD;&#x5EFA; Key &#x4E0E;&#x4E0E;&#x539F;&#x59CB; Key &#x7B49;&#x4EF7;&#xFF0C;&#x7F3A;&#x70B9;&#x662F;&#x5BB9;&#x5668;&#x5916;&#x9700;&#x8981;&#x6301;&#x6709; Value &#x7684;&#x5F3A;&#x5F15;&#x7528;&#x3002;</li>
</ul>
<table>
<thead>
<tr>
<th>&#x7C7B;&#x578B;</th>
<th>&#x4F18;&#x70B9;</th>
<th>&#x7F3A;&#x70B9;</th>
<th>&#x573A;&#x666F;</th>
</tr>
</thead>
<tbody><tr>
<td>Key &#x5F31;&#x5F15;&#x7528;</td>
<td>&#x5916;&#x90E8;&#x4E0D;&#x9700;&#x8981;&#x6301;&#x6709; Value &#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x4F7F;&#x7528;&#x66F4;&#x7B80;&#x5355;</td>
<td>&#x91CD;&#x5EFA; Key &#x4E0D;&#x7B49;&#x4EF7;</td>
<td>&#x672A;&#x91CD;&#x5199; equals</td>
</tr>
<tr>
<td>Value &#x5F31;&#x5F15;&#x7528;</td>
<td>&#x91CD;&#x5EFA; Key &#x7B49;&#x4EF7;</td>
<td>&#x5916;&#x90E8;&#x9700;&#x8981;&#x6301;&#x6709; Value &#x7684;&#x5F3A;&#x5F15;&#x7528;</td>
<td>&#x91CD;&#x5199; equals</td>
</tr>
</tbody></table>
<p><strong>&#x4E3E;&#x4F8B; 1&#xFF1A;</strong> &#x5728; Android Glide &#x56FE;&#x7247;&#x6846;&#x67B6;&#x7684;&#x591A;&#x7EA7;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x56FE;&#x7247;&#x7684; EngineKey &#x662F;&#x53EF;&#x91CD;&#x5EFA;&#x7684;&#xFF0C;&#x5B58;&#x5728;&#x591A;&#x4E2A; EngineKey &#x5BF9;&#x8C61;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x56FE;&#x7247; Bitmap&#xFF0C;&#x6240;&#x4EE5; Glide &#x6700;&#x9876;&#x5C42;&#x7684;&#x6D3B;&#x52A8;&#x7F13;&#x5B58;&#x91C7;&#x7528;&#x7684;&#x662F; Value &#x5F31;&#x5F15;&#x7528;&#x3002;</p>
<p><code>EngineKey.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class EngineKey implements Key {</span><br><span class="line"></span><br><span class="line">    // &#x91CD;&#x5199; equals</span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object o) {</span><br><span class="line">        if (o instanceof EngineKey) {</span><br><span class="line">            EngineKey other = (EngineKey) o;</span><br><span class="line">            return model.equals(other.model)</span><br><span class="line">                &amp;&amp; signature.equals(other.signature)</span><br><span class="line">                &amp;&amp; height == other.height</span><br><span class="line">                &amp;&amp; width == other.width</span><br><span class="line">                &amp;&amp; transformations.equals(other.transformations)</span><br><span class="line">                &amp;&amp; resourceClass.equals(other.resourceClass)</span><br><span class="line">                &amp;&amp; transcodeClass.equals(other.transcodeClass)</span><br><span class="line">                &amp;&amp; options.equals(other.options);</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>&#x4E3E;&#x4F8B; 2&#xFF1A;</strong> &#x5728; ThreadLocal &#x7684; ThreadLocalMap &#x7EBF;&#x7A0B;&#x672C;&#x5730;&#x5B58;&#x50A8;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A; ThreadLocal &#x6CA1;&#x6709;&#x91CD;&#x5199; equals&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x591A;&#x4E2A; ThreadLocal &#x5BF9;&#x8C61;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6240;&#x4EE5; ThreadLocal &#x91C7;&#x7528;&#x7684;&#x662F; Key &#x5F31;&#x5F15;&#x7528;&#x3002;</p>
<p><code>ThreadLocal.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;static class Entry extends WeakReference&lt;ThreadLocal&lt;?&gt;&gt; {</span><br><span class="line">    /** The value associated with this ThreadLocal. */</span><br><span class="line">    Object value;</span><br><span class="line"></span><br><span class="line">    Entry(ThreadLocal&lt;?&gt; k, Object v) {</span><br><span class="line">        super(k);</span><br><span class="line">        value = v;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x672A;&#x91CD;&#x5199; equals</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<ol start="3">
<li>WeakHashMap &#x6E90;&#x7801;&#x5206;&#x6790;</li>
</ol>
<hr>
<p>&#x8FD9;&#x4E00;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790; WeakHashMap &#x4E2D;&#x4E3B;&#x8981;&#x6D41;&#x7A0B;&#x7684;&#x6E90;&#x7801;&#x3002;</p>
<p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;WeakHashMap &#x5C31;&#x662F;&#x7167;&#x7740; Java 7 &#x7248;&#x672C;&#x7684; HashMap &#x4F9D;&#x846B;&#x82A6;&#x753B;&#x74E2;&#x7684;&#xFF0C;&#x6CA1;&#x6709;&#x6811;&#x5316;&#x7684;&#x903B;&#x8F91;&#x3002;&#x8003;&#x8651;&#x5230;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5BF9; HashMap &#x505A;&#x8FC7;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x91CD;&#x590D;&#x5206;&#x6790; WeakHashMap &#x7684;&#x6BCF;&#x4E2A;&#x7EC6;&#x8282;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x91CD;&#x5FC3;&#x653E;&#x5728; WeakHashMap &#x4E0E; HashMap &#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x3002;</p>
<h3 id="3-1-WeakHashMap-&#x7684;&#x5C5E;&#x6027;"><a href="#3-1-WeakHashMap-&#x7684;&#x5C5E;&#x6027;" class="headerlink" title="3.1 WeakHashMap &#x7684;&#x5C5E;&#x6027;"></a>3.1 WeakHashMap &#x7684;&#x5C5E;&#x6027;</h3><p>&#x5148;&#x7528;&#x4E00;&#x4E2A;&#x8868;&#x683C;&#x6574;&#x7406; WeakHashMap &#x7684;&#x5C5E;&#x6027;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x7248;&#x672C;</th>
<th>&#x6570;&#x636E;&#x7ED3;&#x6784;</th>
<th>&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;</th>
<th>&#x5C5E;&#x6027;</th>
</tr>
</thead>
<tbody><tr>
<td>Java 7 HashMap</td>
<td>&#x6570;&#x7EC4; + &#x94FE;&#x8868;</td>
<td>Entry&#xFF08;&#x5355;&#x94FE;&#x8868;&#xFF09;</td>
<td>1&#x3001;table&#xFF08;&#x6570;&#x7EC4;&#xFF09;2&#x3001;size&#xFF08;&#x5C3A;&#x5BF8;&#xFF09;3&#x3001;threshold&#xFF08;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF09;4&#x3001;loadFactor&#xFF08;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#xFF09;5&#x3001;modCount&#xFF08;&#x4FEE;&#x6539;&#x8BA1;&#x6570;&#xFF09;6&#x3001;&#x9ED8;&#x8BA4;&#x6570;&#x7EC4;&#x5BB9;&#x91CF; 167&#x3001;&#x6700;&#x5927;&#x6570;&#x7EC4;&#x5BB9;&#x91CF; 2^308&#x3001;&#x9ED8;&#x8BA4;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50; 0.75</td>
</tr>
<tr>
<td>WeakHashMap</td>
<td>&#x6570;&#x7EC4; + &#x94FE;&#x8868;</td>
<td>Entry&#xFF08;&#x5355;&#x94FE;&#x8868;&#xFF0C;&#x5F31;&#x5F15;&#x7528;&#x7684;&#x5B50;&#x7C7B;&#x578B;&#xFF09;</td>
<td>9&#x3001;queue&#xFF08;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF09;</td>
</tr>
</tbody></table>
<p><code>WeakHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class WeakHashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt; {</span><br><span class="line"></span><br><span class="line">    // &#x9ED8;&#x8BA4;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;</span><br><span class="line">    private static final int DEFAULT_INITIAL_CAPACITY = 16;</span><br><span class="line"></span><br><span class="line">    // &#x6570;&#x7EC4;&#x6700;&#x5927;&#x5BB9;&#x91CF;&#xFF1A;2^30&#xFF08;&#x9AD8;&#x4F4D; 0100&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0&#xFF09;</span><br><span class="line">    private static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</span><br><span class="line"></span><br><span class="line">    // &#x9ED8;&#x8BA4;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#xFF1A;0.75</span><br><span class="line">    private static final float DEFAULT_LOAD_FACTOR = 0.75f;</span><br><span class="line"></span><br><span class="line">    // &#x5E95;&#x5C42;&#x6570;&#x7EC4;</span><br><span class="line">    Entry&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line">    // &#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;</span><br><span class="line">    private int size;</span><br><span class="line"></span><br><span class="line">    // &#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF08;&#x5BB9;&#x91CF; * &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#xFF09;</span><br><span class="line">    private int threshold;</span><br><span class="line"></span><br><span class="line">    // &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;</span><br><span class="line">    private final float loadFactor;</span><br><span class="line"></span><br><span class="line">    // &#x5F15;&#x7528;&#x961F;&#x5217;</span><br><span class="line">    private final ReferenceQueue&lt;Object&gt; queue = new ReferenceQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    // &#x4FEE;&#x6539;&#x8BA1;&#x6570;</span><br><span class="line">    int modCount;</span><br><span class="line"></span><br><span class="line">    // &#x94FE;&#x8868;&#x8282;&#x70B9;&#xFF08;&#x4E00;&#x4E2A; Entry &#x7B49;&#x4E8E;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF09;</span><br><span class="line">    private static class Entry&lt;K,V&gt; extends WeakReference&lt;Object&gt; implements Map.Entry&lt;K,V&gt; {</span><br><span class="line">        // Key&#xFF1A;&#x4E0E; HashMap &#x548C; LinkedHashMap &#x76F8;&#x6BD4;&#xFF0C;&#x5C11;&#x4E86; key &#x7684;&#x5F3A;&#x5F15;&#x7528;</span><br><span class="line">        // final K key;</span><br><span class="line">        // Value&#xFF08;&#x5F3A;&#x5F15;&#x7528;&#xFF09;</span><br><span class="line">        V value;</span><br><span class="line">        // &#x54C8;&#x5E0C;&#x503C;</span><br><span class="line">        final int hash;</span><br><span class="line">        Entry&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">        Entry(Object key, V value, ReferenceQueue&lt;Object&gt; queue, int hash, Entry&lt;K,V&gt; next) {</span><br><span class="line">            super(key /*&#x6CE8;&#x610F;&#xFF1A;&#x53EA;&#x6709; Key &#x662F;&#x5F31;&#x5F15;&#x7528;*/, queue);</span><br><span class="line">            this.value = value;</span><br><span class="line">            this.hash  = hash;</span><br><span class="line">            this.next  = next;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>WeakHashMap &#x4E0E; HashMap &#x7684;&#x5C5E;&#x6027;&#x51E0;&#x4E4E;&#x76F8;&#x540C;&#xFF0C;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x6709; 2 &#x4E2A;&#xFF1A;</p>
<ul>
<li><strong>1&#x3001;ReferenceQueue&#xFF1A;</strong> WeakHashMap &#x7684;&#x5C5E;&#x6027;&#x91CC;&#x591A;&#x4E86;&#x4E00;&#x4E2A; queue &#x5F15;&#x7528;&#x961F;&#x5217;&#xFF1B;</li>
<li><strong>2&#x3001;Entry&#xFF1A;</strong> <code>WeakHashMap#Entry</code> &#x8282;&#x70B9;&#x7EE7;&#x627F;&#x4E8E; <code>WeakReference</code>&#xFF0C;&#x8868;&#x9762;&#x770B;&#x662F; WeakHashMap &#x6301;&#x6709;&#x4E86; Entry &#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x5176;&#x5B9E;&#x4E0D;&#x662F;&#x3002;&#x6CE8;&#x610F;&#x770B; Entry &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;WeakReference &#x5173;&#x8054;&#x7684;&#x5B9E;&#x9645;&#x5BF9;&#x8C61;&#x662F; Key&#x3002; <strong>&#x6240;&#x4EE5;&#xFF0C;WeakHashMap &#x4F9D;&#x7136;&#x6301;&#x6709; Entry &#x548C; Value &#x7684;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x4EC5;&#x6301;&#x6709; Key &#x7684;&#x5F31;&#x5F15;&#x7528;&#x3002;</strong></li>
</ul>
<p><code>&#x5F15;&#x7528;&#x5173;&#x7CFB;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/388e3c5153b2001c6aff45b496c72746e1a6e13dffcaa84c83cbb0ac6be25e8c" alt></p>
<p>&#x4E0D;&#x51FA;&#x610F;&#x5916;&#x7684;&#x8BDD;&#x53C8;&#x6709;&#x5C0F;&#x670B;&#x53CB;&#x51FA;&#x6765;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x4E86;<strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;</strong>&#xFF1A;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 1&#xFF1A;&#x8BF4;&#x4E00;&#x4E0B; ReferenceQueue queue &#x7684;&#x4F5C;&#x7528;?</strong></li>
</ul>
<p>ReferenceQueue &#x4E0E; Reference &#x914D;&#x5408;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x611F;&#x77E5;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x7684;&#x80FD;&#x529B;&#x3002;&#x5728;&#x521B;&#x5EFA;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x65F6;&#x53EF;&#x4EE5;&#x5173;&#x8054;&#x4E00;&#x4E2A;&#x5B9E;&#x9645;&#x5BF9;&#x8C61;&#x548C;&#x4E00;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#xFF0C;&#x5F53;&#x5B9E;&#x73B0;&#x5BF9;&#x8C61;&#x88AB;&#x5783;&#x573E;&#x56DE;&#x6536;&#x540E;&#xFF0C;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#x4F1A;&#x88AB;&#x6DFB;&#x52A0;&#x5230;&#x8FD9;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#x4E2D;&#x3002;&#x5728; WeakHashMap &#x4E2D;&#xFF0C;&#x5C31;&#x662F;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x5F15;&#x7528;&#x961F;&#x5217;&#x6765;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x952E;&#x503C;&#x5BF9;&#x3002;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 2&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; Key &#x662F;&#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x662F; Entry &#x6216; Value &#x662F;&#x5F31;&#x5F15;&#x7528;&#xFF1F;</strong></li>
</ul>
<p>&#x9996;&#x5148;&#xFF0C;Entry &#x4E00;&#x5B9A;&#x8981;&#x6301;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x80FD;&#x6301;&#x6709;&#x5F31;&#x5F15;&#x7528;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A; Entry &#x662F; WeakHashMap &#x5185;&#x90E8;&#x7EF4;&#x62A4;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x66B4;&#x9732;&#x5230; WeakHashMap &#x5916;&#x90E8;&#xFF0C;&#x5373;&#x9664;&#x4E86; WeakHashMap &#x672C;&#x8EAB;&#x4E4B;&#x5916;&#x6CA1;&#x6709;&#x5176;&#x5B83;&#x5730;&#x65B9;&#x6301;&#x6709; Entry &#x7684;&#x5F3A;&#x5F15;&#x7528;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x6301;&#x6709; Entry &#x7684;&#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x5373;&#x4F7F; WeakHashMap &#x5916;&#x90E8;&#x4F9D;&#x7136;&#x5728;&#x4F7F;&#x7528; Key &#x5BF9;&#x8C61;&#xFF0C;WeakHashMap &#x5185;&#x90E8;&#x4F9D;&#x7136;&#x4F1A;&#x56DE;&#x6536;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x8FD9;&#x4E0E;&#x9884;&#x671F;&#x4E0D;&#x7B26;&#x3002;</p>
<p>&#x5176;&#x6B21;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F; Key &#x8FD8;&#x662F; Value &#x4F7F;&#x7528;&#x5F31;&#x5F15;&#x7528;&#x90FD;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x3002;&#x81F3;&#x4E8E;&#x4F7F;&#x7528;&#x54EA;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x5404;&#x6709;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x9002;&#x7528;&#x573A;&#x666F;&#x4E5F;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x4E2A;&#x5728;&#x524D;&#x6587;&#x5206;&#x6790;&#x8FC7;&#x4E86;&#x3002;</p>
<h3 id="3-2-WeakHashMap-&#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#xFF1F;"><a href="#3-2-WeakHashMap-&#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#xFF1F;" class="headerlink" title="3.2 WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#xFF1F;"></a>3.2 WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#xFF1F;</h3><p>&#x5728;&#x901A;&#x8FC7; put / get /size &#x7B49;&#x65B9;&#x6CD5;&#x8BBF;&#x95EE; WeakHashMap &#x65F6;&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x4F1A;&#x8C03;&#x7528; <code>expungeStaleEntries()</code> &#x65B9;&#x6CD5;&#x6E05;&#x7406; Key &#x5BF9;&#x8C61;&#x5DF2;&#x7ECF;&#x88AB;&#x56DE;&#x6536;&#x7684;&#x65E0;&#x6548;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x5176;&#x4E2D;&#x4F1A;&#x904D;&#x5386; ReferenceQueue &#x4E2D;&#x6301;&#x6709;&#x7684;&#x5F31;&#x5F15;&#x7528;&#x5BF9;&#x8C61;&#xFF08;&#x5373; Entry &#x8282;&#x70B9;&#xFF09;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x7ED3;&#x70B9;&#x4ECE;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x79FB;&#x9664;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;private final ReferenceQueue&lt;Object&gt; queue = new ReferenceQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">// &#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">public V put(K key, V value) {</span><br><span class="line">    ...</span><br><span class="line">    // &#x95F4;&#x63A5; expungeStaleEntries()</span><br><span class="line">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6269;&#x5BB9;</span><br><span class="line">void resize(int newCapacity) {</span><br><span class="line">    // &#x95F4;&#x63A5; expungeStaleEntries()</span><br><span class="line">    Entry&lt;K,V&gt;[] oldTable = getTable();</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x83B7;&#x53D6;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">public V get(Object key) {</span><br><span class="line">    ...</span><br><span class="line">    // &#x95F4;&#x63A5; expungeStaleEntries()</span><br><span class="line">    Entry&lt;K,V&gt;[] tab = getTable();</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private Entry&lt;K,V&gt;[] getTable() {</span><br><span class="line">    // &#x6E05;&#x7406;&#x65E0;&#x6548;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">    expungeStaleEntries();</span><br><span class="line">    return table;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// -&gt;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">private void expungeStaleEntries() {</span><br><span class="line">    // &#x904D;&#x5386;&#x5F15;&#x7528;&#x961F;&#x5217;</span><br><span class="line">    for (Object x; (x = queue.poll()) != null; ) {</span><br><span class="line">        // &#x7591;&#x95EE; 3&#xFF1A;&#x65E2;&#x7136; WeakHashMap &#x4E0D;&#x8003;&#x8651;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x91CC;&#x8981;&#x505A;&#x52A0;&#x9501;&#xFF0C;&#x5C82;&#x4E0D;&#x662F;&#x7A81;&#x5140;&#xFF1F;</span><br><span class="line">        synchronized (queue) {</span><br><span class="line">            Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) x;</span><br><span class="line">            // &#x6839;&#x636E;&#x6563;&#x5217;&#x503C;&#x5B9A;&#x4F4D;&#x6570;&#x7EC4;&#x4E0B;&#x6807;</span><br><span class="line">            int i = indexFor(e.hash /*&#x6563;&#x5217;&#x503C;*/, table.length);</span><br><span class="line">            // &#x904D;&#x5386;&#x6876;&#x5BFB;&#x627E;&#x8282;&#x70B9; e &#x7684;&#x524D;&#x9A71;&#x7ED3;&#x70B9;</span><br><span class="line">            Entry&lt;K,V&gt; prev = table[i];</span><br><span class="line">            Entry&lt;K,V&gt; p = prev;</span><br><span class="line">            while (p != null) {</span><br><span class="line">                Entry&lt;K,V&gt; next = p.next;</span><br><span class="line">                if (p == e) {</span><br><span class="line">                    // &#x5220;&#x9664;&#x8282;&#x70B9; e</span><br><span class="line">                    if (prev == e)					</span><br><span class="line">                        // &#x8282;&#x70B9; e &#x662F;&#x6839;&#x8282;&#x70B9;</span><br><span class="line">                        table[i] = next;</span><br><span class="line">                    else</span><br><span class="line">                        // &#x8282;&#x70B9; e &#x662F;&#x4E2D;&#x95F4;&#x8282;&#x70B9;</span><br><span class="line">                        prev.next = next;</span><br><span class="line">                    // Must not null out e.next;</span><br><span class="line">                    // stale entries may be in use by a HashIterator</span><br><span class="line">                    e.value = null; // Help GC</span><br><span class="line">                    size--;</span><br><span class="line">                    break;</span><br><span class="line">                }</span><br><span class="line">                prev = p;</span><br><span class="line">                p = next;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<ol start="4">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<ul>
<li>1&#x3001;WeakHashMap &#x4F7F;&#x7528;&#x4E0E; Java 7 HashMap &#x76F8;&#x540C;&#x7684; &#x201C;&#x6570;&#x7EC4; + &#x94FE;&#x8868;&#x201D; &#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF0C;&#x53D1;&#x751F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x7528;&#x5934;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;&#x5355;&#x94FE;&#x8868;&#x4E2D;&#xFF1B;</li>
<li>2&#x3001;WeakHashMap &#x80FD;&#x591F;&#x5B9E;&#x73B0; &#x201C;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x201D; &#x7684;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#xFF0C;&#x5176;&#x4E2D;&#x7684; &#x201C;Weak&#x201D; &#x6307;&#x952E; Key &#x662F;&#x5F31;&#x5F15;&#x7528;&#x3002;&#x5F53; Key &#x5BF9;&#x8C61;&#x4E0D;&#x518D;&#x88AB;&#x6301;&#x6709;&#x5F3A;&#x5F15;&#x7528;&#x65F6;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x4F1A;&#x6309;&#x7167;&#x5F31;&#x5F15;&#x7528;&#x7B56;&#x7565;&#x81EA;&#x52A8;&#x56DE;&#x6536; Key &#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5728;&#x4E0B;&#x6B21;&#x8BBF;&#x95EE; WeakHashMap &#x65F6;&#x6E05;&#x7406;&#x5168;&#x90E8;&#x65E0;&#x6548;&#x7684;&#x952E;&#x503C;&#x5BF9;&#xFF1B;</li>
<li>3&#x3001;WeakHashMap &#x548C; LinkedHashMap &#x90FD;&#x5177;&#x5907; &#x201C;&#x81EA;&#x52A8;&#x6E05;&#x7406;&#x201D; &#x7684; &#x80FD;&#x529B;&#xFF0C;WeakHashMap &#x6839;&#x636E; Key &#x5BF9;&#x8C61;&#x7684;&#x53EF;&#x8FBE;&#x6027;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF0C;&#x800C; LinkedHashMap &#x6839;&#x636E; FIFO &#x6216; LRU &#x7B56;&#x7565;&#x5C1D;&#x8BD5;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1B;</li>
<li>4&#x3001;WeakHashMap &#x4F7F;&#x7528; Key &#x5F31;&#x5F15;&#x7528;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;&#x91CD;&#x5EFA; Key &#x5BF9;&#x8C61;&#x4E0D;&#x7B49;&#x4EF7;&#x95EE;&#x9898;&#x3002;</li>
</ul>
<hr>
<h3 id="&#x7248;&#x6743;&#x58F0;&#x660E;"><a href="#&#x7248;&#x6743;&#x58F0;&#x660E;" class="headerlink" title="&#x7248;&#x6743;&#x58F0;&#x660E;"></a>&#x7248;&#x6743;&#x58F0;&#x660E;</h3><p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF08;2023/07/08 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7161731329078329381">#1 ArrayList &#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;&#x6570;&#x7EC4;&#x5417;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162203434014212109">#2 &#x8BF4;&#x4E00;&#x4E0B; ArrayList &#x548C; LinkedList &#x7684;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162035643785150472">#3 CopyOnWriteArrayList &#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162819765361672199">#4 ArrayDeque&#xFF1A;&#x5982;&#x4F55;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7163985718417555487">#5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">#6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164348785512939551">#7 &#x5982;&#x4F55;&#x4F7F;&#x7528; LinkedHashMap &#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7165044834590261256">#8 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7166202551782604837">#9 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7166202801470013476">#10 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/6882370280946302983">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bc0395bbb4fd179c90d2e7fa7ac7210602cc6f9a1f6d67d395295c57e54d8b98" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/4b4fc69d587f238720e290bae3af4f31.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7164348785512939551.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7164348785512939551.html" itemprop="url">Java & Android 集合框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-10T19:32:55+08:00">
                2022-11-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5B66;&#x4E60;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x638C;&#x63E1;&#x95EE;&#x9898;&#x80CC;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x601D;&#x7EF4;&#x6846;&#x67B6;&#xFF0C;&#x4F60;&#x7684;&#x601D;&#x8003;&#x8D8A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x57DF;&#x5C31;&#x8D8A;&#x5E7F;&#xFF0C;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#x4E5F;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F80;&#x5F80;&#x4E0D;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784; / &#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F; Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 7 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x5F6D;&#x3002;</p>
<p><a href="https://dev.newban.cn/7163985718417555487">&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;</a>&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x5230;&#x4E86; HashMap &#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x548C;&#x6E90;&#x7801;&#x5206;&#x6790;&#xFF0C;&#x5728;&#x6E90;&#x7801;&#x5206;&#x6790;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x4E00;&#x4E9B; LinkedHashMap &#x76F8;&#x5173;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x5F53;&#x65F6;&#x6CA1;&#x6709;&#x5C55;&#x5F00;&#xFF0C;&#x73B0;&#x5728;&#x5B83;&#x6765;&#x4E86;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#xFF0C;LinkedHashMap &#x4E0E; HashMap &#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#xFF0C;LinkedHashMap &#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x975E;&#x5E38;&#x660E;&#x786E; &#x2014;&#x2014; LRU &#x7F13;&#x5B58;&#x3002;&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x8BA8;&#x8BBA; LinkedHashMap &#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#x7684;&#x3002;</p>
<p>&#x672C;&#x6587;&#x6E90;&#x7801;&#x57FA;&#x4E8E; Java 8 LinkedHashMap&#x3002;</p>
<hr>
<p><strong>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF1A;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/f2da47175d9e57911e16ca281a5bee03695eeb9964422a659d3ab3b4f4b5e279" alt></p>
<hr>
<ol>
<li>&#x8BA4;&#x8BC6; LRU &#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;</li>
</ol>
<hr>
<h3 id="1-1-&#x4EC0;&#x4E48;&#x662F;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;"><a href="#1-1-&#x4EC0;&#x4E48;&#x662F;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;" class="headerlink" title="1.1 &#x4EC0;&#x4E48;&#x662F;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;"></a>1.1 &#x4EC0;&#x4E48;&#x662F;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;</h3><p>&#x7F13;&#x5B58;&#x662F;&#x63D0;&#x9AD8;&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x6027;&#x80FD;&#x7684;&#x901A;&#x7528;&#x6280;&#x672F;&#xFF0C;&#x5728;&#x786C;&#x4EF6;&#x548C;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x4E2D;&#x88AB;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982; <a href="https://dev.newban.cn/7157288161578745869">CPU &#x7F13;&#x5B58;</a>&#x3001;Glide &#x5185;&#x5B58;&#x7F13;&#x5B58;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7F13;&#x5B58;&#x7B49;&#x3002;&#x7531;&#x4E8E;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;&#x4E0D;&#x53EF;&#x80FD;&#x65E0;&#x9650;&#x5927;&#xFF0C;&#x5F53;&#x7F13;&#x5B58;&#x5BB9;&#x91CF;&#x5360;&#x6EE1;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5229;&#x7528;&#x67D0;&#x79CD;&#x7B56;&#x7565;&#x5C06;&#x90E8;&#x5206;&#x6570;&#x636E;&#x6362;&#x51FA;&#x7F13;&#x5B58;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x7F13;&#x5B58;&#x7684;&#x66FF;&#x6362;&#x7B56;&#x7565; / &#x6DD8;&#x6C70;&#x95EE;&#x9898;&#x3002;&#x5E38;&#x89C1;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x6709;&#xFF1A;</p>
<ul>
<li><strong>1&#x3001;&#x968F;&#x673A;&#x7B56;&#x7565;&#xFF1A;</strong> &#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x6570;&#x751F;&#x6210;&#x5668;&#x968F;&#x673A;&#x5730;&#x9009;&#x62E9;&#x8981;&#x88AB;&#x6DD8;&#x6C70;&#x7684;&#x6570;&#x636E;&#x5757;&#xFF1B;</li>
<li><strong>2&#x3001;FIFO &#x5148;&#x8FDB;&#x5148;&#x51FA;&#x7B56;&#x7565;&#xFF1A;</strong> &#x8BB0;&#x5F55;&#x5404;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x7684;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;&#xFF0C;&#x6700;&#x65E9;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#x6700;&#x5148;&#x88AB;&#x6DD8;&#x6C70;&#xFF1B;</li>
<li><strong>3&#x3001;LRU &#xFF08;Least Recently Used&#xFF09;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x7B56;&#x7565;&#xFF1A;</strong> &#x8BB0;&#x5F55;&#x5404;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x7684;&#x8BBF;&#x95EE; <strong>&#x201C;&#x65F6;&#x95F4;&#x6233;&#x201D;</strong> &#xFF0C;&#x6700;&#x8FD1;&#x6700;&#x4E45;&#x672A;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x6700;&#x5148;&#x88AB;&#x6DD8;&#x6C70;&#x3002;&#x4E0E;&#x524D; 2 &#x79CD;&#x7B56;&#x7565;&#x76F8;&#x6BD4;&#xFF0C;LRU &#x7B56;&#x7565;&#x5E73;&#x5747;&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x7387;&#x66F4;&#x9AD8;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A; LRU &#x7B56;&#x7565;&#x5229;&#x7528;&#x4E86; &#x201C;&#x5C40;&#x90E8;&#x6027;&#x539F;&#x7406;&#x201D;&#xFF1A;&#x6700;&#x8FD1;&#x88AB;&#x8BBF;&#x95EE;&#x8FC7;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5C06;&#x6765;&#x88AB;&#x8BBF;&#x95EE;&#x7684;&#x51E0;&#x7387;&#x8F83;&#x5927;&#xFF0C;&#x6700;&#x8FD1;&#x5F88;&#x4E45;&#x672A;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5C06;&#x6765;&#x8BBF;&#x95EE;&#x7684;&#x51E0;&#x7387;&#x4E5F;&#x8F83;&#x5C0F;&#xFF1B;</li>
<li><strong>4&#x3001;LFU &#xFF08;Least Frequently Used&#xFF09;&#x6700;&#x4E0D;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7B56;&#x7565;&#xFF1A;</strong> &#x4E0E; LRU &#x76F8;&#x6BD4;&#xFF0C;LFU &#x66F4;&#x52A0;&#x6CE8;&#x91CD;&#x4F7F;&#x7528;&#x7684; <strong>&#x201C;&#x9891;&#x7387;&#x201D;</strong> &#x3002;LFU &#x4F1A;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x7684;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#xFF0C;&#x6700;&#x5C11;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x7684;&#x6570;&#x636E;&#x6700;&#x5148;&#x88AB;&#x6DD8;&#x6C70;&#x3002;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x6570;&#x636E;&#x5728;&#x5F00;&#x59CB;&#x65F6;&#x4F7F;&#x7528;&#x6B21;&#x6570;&#x5F88;&#x9AD8;&#xFF0C;&#x4EE5;&#x540E;&#x4E0D;&#x518D;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x5C31;&#x4F1A;&#x957F;&#x65F6;&#x95F4;&#x6C61;&#x67D3;&#x7F13;&#x5B58;&#x3002;&#x53EF;&#x4EE5;&#x5B9A;&#x671F;&#x5C06;&#x8BA1;&#x6570;&#x5668;&#x53F3;&#x79FB;&#x4E00;&#x4F4D;&#xFF0C;&#x5F62;&#x6210;&#x6307;&#x6570;&#x8870;&#x51CF;&#x3002;</li>
</ul>
<p><code>FIFO &#x4E0E; LRU &#x7B56;&#x7565;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/9d2236ababd333ca54957eb545e1abeb1ac4aa1bcd4f6c1ecf00c21821ed81f1" alt></p>
<h3 id="1-2-&#x5411;&#x5916;&#x770B;&#xFF1A;LRU-&#x7684;&#x53D8;&#x578B;"><a href="#1-2-&#x5411;&#x5916;&#x770B;&#xFF1A;LRU-&#x7684;&#x53D8;&#x578B;" class="headerlink" title="1.2 &#x5411;&#x5916;&#x770B;&#xFF1A;LRU &#x7684;&#x53D8;&#x578B;"></a>1.2 &#x5411;&#x5916;&#x770B;&#xFF1A;LRU &#x7684;&#x53D8;&#x578B;</h3><p>&#x5176;&#x5B9E;&#xFF0C;&#x5728;&#x6807;&#x51C6;&#x7684; LRU &#x7B97;&#x6CD5;&#x4E0A;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x53D8;&#x578B;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A; LRU &#x7B97;&#x6CD5;&#x672C;&#x8EAB;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x4E0D;&#x8DB3;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x4E2D;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x8F83;&#x591A;&#x65F6;&#xFF0C;LRU &#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x8F83;&#x9AD8;&#x7684;&#x547D;&#x4E2D;&#x7387;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x6709;&#x5076;&#x53D1;&#x7684;&#x6279;&#x91CF;&#x7684;&#x975E;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x4EA7;&#x751F;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x5C06;&#x70ED;&#x70B9;&#x6570;&#x636E;&#x5BC4;&#x51FA;&#x7F13;&#x5B58;&#xFF0C;&#x4F7F;&#x5F97;&#x7F13;&#x5B58;&#x88AB;&#x6C61;&#x67D3;&#x3002;&#x56E0;&#x6B64;&#xFF0C;LRU &#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x53D8;&#x578B;&#xFF1A;</p>
<ul>
<li><strong>LRU-K&#xFF1A;</strong> &#x63D0;&#x4F9B;&#x4E24;&#x4E2A; LRU &#x961F;&#x5217;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x8BBF;&#x95EE;&#x8BA1;&#x6570;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6807;&#x51C6;&#x7684; LRU &#x961F;&#x5217;&#xFF0C;&#x4E24;&#x4E2A;&#x961F;&#x5217;&#x90FD;&#x6309;&#x7167; LRU &#x89C4;&#x5219;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x3002;&#x5F53;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x5148;&#x8FDB;&#x5165;&#x8BBF;&#x95EE;&#x8BA1;&#x6570;&#x961F;&#x5217;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x8D85;&#x8FC7; K &#x6B21;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x8FDB;&#x5165;&#x6807;&#x51C6; LRU &#x961F;&#x5217;&#x3002;&#x6807;&#x51C6;&#x7684; LRU &#x7B97;&#x6CD5;&#x76F8;&#x5F53;&#x4E8E; LRU-1&#xFF1B;</li>
<li><strong>Two Queue&#xFF1A;</strong> &#x76F8;&#x5F53;&#x4E8E; LRU-2 &#x7684;&#x53D8;&#x578B;&#xFF0C;&#x5C06;&#x8BBF;&#x95EE;&#x8BA1;&#x6570;&#x961F;&#x5217;&#x66FF;&#x6362;&#x4E3A; FIFO &#x961F;&#x5217;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x6570;&#x636E;&#x3002;&#x5F53;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x6570;&#x636E;&#x5148;&#x8FDB;&#x5165; FIFO &#x961F;&#x5217;&#xFF0C;&#x5F53;&#x7B2C; 2 &#x6B21;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x8FDB;&#x5165;&#x6807;&#x51C6; LRU &#x961F;&#x5217;&#xFF1B;</li>
<li><strong>Multi Queue&#xFF1A;</strong> &#x5728; LRU-K &#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x66F4;&#x591A;&#x961F;&#x5217;&#xFF0C;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x7EA7;&#x522B;&#x7684;&#x7F13;&#x51B2;&#x3002;</li>
</ul>
<blockquote>
<p>&#x5C0F;&#x5F6D;&#x5728; Redis &#x548C; Vue &#x4E2D;&#x6709;&#x770B;&#x5230;&#x8FD9;&#x4E9B; LRU &#x53D8;&#x578B;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x5728; Android &#x9886;&#x57DF;&#x7684;&#x6846;&#x67B6;&#x4E2D;&#x8FD8;&#x6CA1;&#x6709;&#x770B;&#x5230;&#x5177;&#x4F53;&#x5E94;&#x7528;&#xFF0C;&#x4F60;&#x77E5;&#x9053;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x63D0;&#x9192;&#x6211;&#x3002;</p>
</blockquote>
<h3 id="1-3-&#x5982;&#x4F55;&#x5B9E;&#x73B0;-LRU-&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;"><a href="#1-3-&#x5982;&#x4F55;&#x5B9E;&#x73B0;-LRU-&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;" class="headerlink" title="1.3 &#x5982;&#x4F55;&#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;"></a>1.3 &#x5982;&#x4F55;&#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF1F;</h3><p>&#x8FD9;&#x4E00;&#x5C0F;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x627E;&#x5230; LRU &#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#x3002;&#x7ECF;&#x8FC7;&#x603B;&#x7ED3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#x7684;&#x57FA;&#x672C;&#x64CD;&#x4F5C;&#xFF1A;</p>
<ul>
<li><strong>&#x64CD;&#x4F5C; 1 - &#x6DFB;&#x52A0;&#x6570;&#x636E;&#xFF1A;</strong> &#x5148;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x5B58;&#x5728;&#x5219;&#x66F4;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x5C1D;&#x8BD5;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1B;</li>
<li><strong>&#x64CD;&#x4F5C; 2 - &#x5220;&#x9664;&#x6570;&#x636E;&#xFF1A;</strong> &#x5148;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x5B58;&#x5728;&#x5219;&#x5220;&#x9664;&#x6570;&#x636E;&#xFF1B;</li>
<li><strong>&#x64CD;&#x4F5C; 3 - &#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF1A;</strong> &#x5982;&#x679C;&#x6570;&#x636E;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x8FD4;&#x56DE; null&#xFF1B;</li>
<li><strong>&#x64CD;&#x4F5C; 4 - &#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1A;</strong> &#x6DFB;&#x52A0;&#x6570;&#x636E;&#x65F6;&#x5982;&#x679C;&#x5BB9;&#x91CF;&#x5DF2;&#x6EE1;&#xFF0C;&#x5219;&#x6839;&#x636E;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x3002;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;&#x524D; 3 &#x4E2A;&#x64CD;&#x4F5C;&#x90FD;&#x6709; &#x201C;&#x67E5;&#x8BE2;&#x201D; &#x64CD;&#x4F5C;&#xFF0C; <strong>&#x6240;&#x4EE5;&#x7F13;&#x5B58;&#x7CFB;&#x7EDF;&#x7684;&#x6027;&#x80FD;&#x4E3B;&#x8981;&#x53D6;&#x51B3;&#x4E8E;&#x67E5;&#x627E;&#x6570;&#x636E;&#x548C;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x662F;&#x5426;&#x9AD8;&#x6548;&#x3002;</strong> &#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x9012;&#x63A8;&#x7684;&#x601D;&#x8DEF;&#x63A8;&#x5BFC; LRU &#x7F13;&#x5B58;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A; 3 &#x79CD;&#x65B9;&#x6848;&#xFF1A;</p>
<ul>
<li><strong>&#x65B9;&#x6848; 1 - &#x57FA;&#x4E8E;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x6570;&#x7EC4;&#xFF1A;</strong> &#x5728;&#x6BCF;&#x4E2A;&#x6570;&#x636E;&#x5757;&#x4E2D;&#x8BB0;&#x5F55;&#x6700;&#x8FD1;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x5F53;&#x6570;&#x636E;&#x88AB;&#x8BBF;&#x95EE;&#xFF08;&#x6DFB;&#x52A0;&#x3001;&#x66F4;&#x65B0;&#x6216;&#x67E5;&#x8BE2;&#xFF09;&#x65F6;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x7684;&#x65F6;&#x95F4;&#x6233;&#x66F4;&#x65B0;&#x5230;&#x5F53;&#x524D;&#x65F6;&#x95F4;&#x3002;&#x5F53;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#x5DF2;&#x6EE1;&#x65F6;&#xFF0C;&#x5219;&#x626B;&#x63CF;&#x6570;&#x7EC4;&#x6DD8;&#x6C70;&#x65F6;&#x95F4;&#x6233;&#x6700;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x3002;</li>
</ul>
<pre><code>+ &#x67E5;&#x627E;&#x6570;&#x636E;&#xFF1A; &#x9700;&#x8981;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x627E;&#x5230;&#x76EE;&#x6807;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(n)&#xFF1B;
+ &#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1A; &#x9700;&#x8981;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x627E;&#x5230;&#x65F6;&#x95F4;&#x6233;&#x6700;&#x5C0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E14;&#x5728;&#x79FB;&#x9664;&#x6570;&#x7EC4;&#x5143;&#x7D20;&#x65F6;&#x9700;&#x8981;&#x642C;&#x8FD0;&#x6570;&#x636E;&#xFF0C;&#x6574;&#x4F53;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(n)&#x3002;</code></pre><ul>
<li><strong>&#x65B9;&#x6848; 2 - &#x57FA;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF1A;</strong> &#x4E0D;&#x518D;&#x76F4;&#x63A5;&#x7EF4;&#x62A4;&#x65F6;&#x95F4;&#x6233;&#xFF0C;&#x800C;&#x662F;&#x5229;&#x7528;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#x9690;&#x5F0F;&#x7EF4;&#x62A4;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x3002;&#x5F53;&#x6570;&#x636E;&#x88AB;&#x8BBF;&#x95EE;&#xFF08;&#x6DFB;&#x52A0;&#x3001;&#x66F4;&#x65B0;&#x6216;&#x67E5;&#x8BE2;&#xFF09;&#x65F6;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x63D2;&#x5165;&#x5230;&#x94FE;&#x8868;&#x5934;&#x90E8;&#x3002;&#x5F53;&#x7A7A;&#x95F4;&#x5DF2;&#x6EE1;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x6DD8;&#x6C70;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x8282;&#x70B9;&#x3002;</li>
</ul>
<pre><code>+ &#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF1A;&#x9700;&#x8981;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x94FE;&#x8868;&#x627E;&#x5230;&#x76EE;&#x6807;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(n)&#xFF1B;
+ &#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1A;&#x76F4;&#x63A5;&#x6DD8;&#x6C70;&#x94FE;&#x8868;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#x3002;</code></pre><ul>
<li><strong>&#x65B9;&#x6848; 3 - &#x57FA;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868; + &#x6563;&#x5217;&#x8868;&#xFF1A;</strong> &#x4F7F;&#x7528;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x53EF;&#x4EE5;&#x5C06;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x964D;&#x4F4E;&#x4E3A; O(1)&#xFF0C;&#x4F46;&#x662F;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x8FD8;&#x662F; O(n)&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x5C06;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x964D;&#x4F4E;&#x4E3A; O(1)&#x3002;</li>
</ul>
<pre><code>+ &#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF1A;&#x901A;&#x8FC7;&#x6563;&#x5217;&#x8868;&#x5B9A;&#x4F4D;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#xFF1B;
+ &#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1A;&#x76F4;&#x63A5;&#x6DD8;&#x6C70;&#x94FE;&#x8868;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#x3002;</code></pre><p>&#x65B9;&#x6848; 3 &#x8FD9;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5C31;&#x53EB; &#x201C;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#x6216;&#x94FE;&#x5F0F;&#x54C8;&#x5E0C;&#x8868;&#x201D;&#xFF0C;&#x6211;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x79F0;&#x4E3A;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x76F8;&#x7ED3;&#x5408;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x66F4;&#x770B;&#x91CD;&#x7684;&#x662F;&#x5B83;&#x4F5C;&#x4E3A;&#x94FE;&#x8868;&#x7684;&#x6392;&#x5E8F;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x8981;&#x8BA8;&#x8BBA;&#x7684; Java LinkedHashMap &#x5C31;&#x662F;&#x57FA;&#x4E8E;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>
<hr>
<ol start="2">
<li>&#x8BA4;&#x8BC6; LinkedHashMap &#x54C8;&#x5E0C;&#x94FE;&#x8868;</li>
</ol>
<hr>
<h3 id="2-1-&#x8BF4;&#x4E00;&#x4E0B;-LinkedHashMap-&#x7684;&#x7279;&#x70B9;"><a href="#2-1-&#x8BF4;&#x4E00;&#x4E0B;-LinkedHashMap-&#x7684;&#x7279;&#x70B9;" class="headerlink" title="2.1 &#x8BF4;&#x4E00;&#x4E0B; LinkedHashMap &#x7684;&#x7279;&#x70B9;"></a>2.1 &#x8BF4;&#x4E00;&#x4E0B; LinkedHashMap &#x7684;&#x7279;&#x70B9;</h3><p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;LinkedHashMap &#x4E2D;&#x7684; <strong>&#x201C;Linked&#x201D;</strong> &#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6307;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x6307;&#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x4E2D;&#x7684;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x3002;</p>
<ul>
<li>1&#x3001;LinkedHashMap &#x662F;&#x7EE7;&#x627F;&#x4E8E; HashMap &#x5B9E;&#x73B0;&#x7684;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#xFF0C;&#x5B83;&#x540C;&#x65F6;&#x5177;&#x5907;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x548C;&#x6563;&#x5217;&#x8868;&#x7684;&#x7279;&#x70B9;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;LinkedHashMap &#x7EE7;&#x627F;&#x4E86; HashMap &#x7684;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x901A;&#x8FC7; HashMap &#x9884;&#x7559;&#x7684; Hook &#x70B9;&#x7EF4;&#x62A4;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x903B;&#x8F91;&#x3002;</li>
</ul>
<pre><code>+ 1.1 &#x5F53; LinkedHashMap &#x4F5C;&#x4E3A;&#x6563;&#x5217;&#x8868;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x51FA; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x7684;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#xFF1B;
+ 1.2 &#x5F53; LinkedHashMap &#x4F5C;&#x4E3A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x51FA;&#x6709;&#x5E8F;&#x7684;&#x7279;&#x6027;&#x3002;</code></pre><ul>
<li>2&#x3001;LinkedHashMap &#x652F;&#x6301; 2 &#x79CD;&#x6392;&#x5E8F;&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x5668;&#x53C2;&#x6570; <code>accessOrder</code> &#x6807;&#x8BB0;&#x4F4D;&#x63A7;&#x5236;&#x7684;&#xFF0C;&#x8868;&#x793A;&#x662F;&#x5426;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; false &#x6309;&#x7167;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x3002;</li>
</ul>
<pre><code>+ **2.1 &#x63D2;&#x5165;&#x987A;&#x5E8F;&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#xFF1A;** &#x6309;&#x7167;&#x6570;&#x636E;&#x6DFB;&#x52A0;&#x5230; LinkedHashMap &#x7684;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x5373; FIFO &#x7B56;&#x7565;&#xFF1B;
+ **2.2 &#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#xFF1A;** &#x6309;&#x7167;&#x6570;&#x636E;&#x88AB;&#x8BBF;&#x95EE;&#xFF08;&#x5305;&#x62EC;&#x63D2;&#x5165;&#x3001;&#x66F4;&#x65B0;&#x3001;&#x67E5;&#x8BE2;&#xFF09;&#x7684;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x5373; LRU &#x7B56;&#x7565;&#x3002;</code></pre><ul>
<li>3&#x3001;&#x5728;&#x6709;&#x5E8F;&#x6027;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;LinkedHashMap &#x63D0;&#x4F9B;&#x4E86;&#x7EF4;&#x62A4;&#x4E86;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x80FD;&#x529B;&#xFF0C;&#x5E76;&#x5F00;&#x653E;&#x4E86;&#x6DD8;&#x6C70;&#x5224;&#x65AD;&#x7684;&#x63A5;&#x53E3; <code>removeEldestEntry()</code>&#x3002;&#x5728;&#x6BCF;&#x6B21;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x56DE;&#x8C03; <code>removeEldestEntry()</code> &#x63A5;&#x53E3;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x91CD;&#x5199;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x79FB;&#x9664;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#xFF08;&#x5728; FIFO &#x7B56;&#x7565;&#x4E2D;&#x662F;&#x6700;&#x65E9;&#x6DFB;&#x52A0;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5728; LRU &#x7B56;&#x7565;&#x4E2D;&#x662F;&#x6700;&#x65E9;&#x672A;&#x8BBF;&#x95EE;&#x7684;&#x8282;&#x70B9;&#xFF09;&#xFF1B;</li>
<li>4&#x3001;&#x4E0E; HashMap &#x76F8;&#x540C;&#xFF0C;LinkedHashMap &#x4E5F;&#x4E0D;&#x8003;&#x8651;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4E5F;&#x4F1A;&#x5B58;&#x5728;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Collections.synchronizedMap &#x5305;&#x88C5;&#x7C7B;&#xFF0C;&#x5176;&#x539F;&#x7406;&#x4E5F;&#x662F;&#x5728;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x4E0A;&#x589E;&#x52A0; synchronized &#x5173;&#x952E;&#x5B57;&#x3002;</li>
</ul>
<h3 id="2-2-&#x8BF4;&#x4E00;&#x4E0B;-HashMap-&#x548C;-LinkedHashMap-&#x7684;&#x533A;&#x522B;&#xFF1F;"><a href="#2-2-&#x8BF4;&#x4E00;&#x4E0B;-HashMap-&#x548C;-LinkedHashMap-&#x7684;&#x533A;&#x522B;&#xFF1F;" class="headerlink" title="2.2 &#x8BF4;&#x4E00;&#x4E0B; HashMap &#x548C; LinkedHashMap &#x7684;&#x533A;&#x522B;&#xFF1F;"></a>2.2 &#x8BF4;&#x4E00;&#x4E0B; HashMap &#x548C; LinkedHashMap &#x7684;&#x533A;&#x522B;&#xFF1F;</h3><p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;HashMap &#x548C; LinkedHashMap &#x5E76;&#x4E0D;&#x662F;&#x5E73;&#x884C;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x800C;&#x662F;&#x7EE7;&#x627F;&#x7684;&#x5173;&#x7CFB;&#xFF0C;LinkedHashMap &#x662F;&#x7EE7;&#x627F;&#x4E8E; HashMap &#x5B9E;&#x73B0;&#x7684;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#x3002;</p>
<p><strong>&#x4E24;&#x8005;&#x4E3B;&#x8981;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x6709;&#x5E8F;&#x6027;&#xFF1A;</strong> LinkedHashMap &#x4F1A;&#x7EF4;&#x62A4;&#x6570;&#x636E;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6216;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#xFF0C;&#x800C;&#x4E14;&#x5C01;&#x88C5;&#x4E86;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x7684;&#x80FD;&#x529B;&#x3002;&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x904D;&#x5386;&#x65F6;&#xFF0C;HashMap &#x4F1A;&#x6309;&#x7167;&#x6570;&#x7EC4;&#x987A;&#x5E8F;&#x904D;&#x5386;&#x6876;&#x8282;&#x70B9;&#xFF0C;&#x4ECE;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x89C6;&#x89D2;&#x770B;&#x662F;&#x65E0;&#x5E8F;&#x7684;&#x3002;&#x800C;&#x662F;&#x6309;&#x7167;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#x4ECE; head &#x8282;&#x70B9;&#x5F00;&#x59CB;&#x904D;&#x5386;&#xFF0C;&#x4ECE;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x89C6;&#x89D2;&#x662F;&#x53EF;&#x4EE5;&#x611F;&#x77E5;&#x5230;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6216;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x3002;</p>
<p><code>LinkedHashMap &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/3d6997f81665ecee79633566535bded1c6037d4685c22bcb341b23c402afb0c3" alt></p>
<hr>
<ol start="3">
<li>HashMap &#x9884;&#x7559;&#x7684; Hook &#x70B9;</li>
</ol>
<hr>
<p>LinkedHashMap &#x7EE7;&#x627F;&#x4E8E; HashMap&#xFF0C;&#x5728;&#x540E;&#x8005;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x901A;&#x8FC7;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7EF4;&#x62A4;&#x8282;&#x70B9;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6216;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x56DE;&#x987E;&#x4E0B; HashMap &#x4E3A; LinkedHashMap &#x9884;&#x7559;&#x7684; Hook &#x70B9;&#xFF1A;</p>
<ul>
<li><strong>afterNodeAccess&#xFF1A;</strong> &#x5728;&#x8282;&#x70B9;&#x88AB;&#x8BBF;&#x95EE;&#x65F6;&#x56DE;&#x8C03;&#xFF1B;</li>
<li><strong>afterNodeInsertion&#xFF1A;</strong> &#x5728;&#x8282;&#x70B9;&#x88AB;&#x63D2;&#x5165;&#x65F6;&#x56DE;&#x8C03;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x53C2;&#x6570; <code>evict</code> &#x6807;&#x8BB0;&#x662F;&#x5426;&#x6DD8;&#x6C70;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#x3002;&#x5728;&#x521D;&#x59CB;&#x5316;&#x3001;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x6216;&#x514B;&#x9686;&#x7B49;&#x6784;&#x9020;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;<code>evict</code> &#x9ED8;&#x8BA4;&#x4E3A; false&#xFF0C;&#x8868;&#x793A;&#x5728;&#x6784;&#x9020;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x6DD8;&#x6C70;&#x3002;</li>
<li><strong>afterNodeRemoval&#xFF1A;</strong> &#x5728;&#x8282;&#x70B9;&#x88AB;&#x79FB;&#x9664;&#x65F6;&#x56DE;&#x8C03;&#x3002;</li>
</ul>
<p><code>HashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x56DE;&#x8C03;</span><br><span class="line">void afterNodeAccess(Node&lt;K,V&gt; p) { }</span><br><span class="line">// &#x8282;&#x70B9;&#x63D2;&#x5165;&#x56DE;&#x8C03;</span><br><span class="line">// evict&#xFF1A;&#x662F;&#x5426;&#x6DD8;&#x6C70;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;</span><br><span class="line">void afterNodeInsertion(boolean evict) { }</span><br><span class="line">// &#x8282;&#x70B9;&#x79FB;&#x9664;&#x56DE;&#x8C03;</span><br><span class="line">void afterNodeRemoval(Node&lt;K,V&gt; p) { }</span><br></pre></td></tr></table></figure>

<p>&#x9664;&#x6B64;&#x4E86;&#x8FD9; 3 &#x4E2A;&#x7A7A;&#x65B9;&#x6CD5;&#x5916;&#xFF0C;LinkedHashMap &#x4E5F;&#x91CD;&#x5199;&#x4E86;&#x90E8;&#x5206; HashMap &#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x63D2;&#x5165;&#x53CC;&#x94FE;&#x8868;&#x7684;&#x7EF4;&#x62A4;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x76F8;&#x5F53;&#x4E8E; Hook &#x70B9;&#x3002;&#x5728; HashMap &#x7684;&#x6DFB;&#x52A0;&#x3001;&#x83B7;&#x53D6;&#x3001;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4E0E; LinkedHashMap &#x6709;&#x5173;&#x7684; Hook &#x70B9;&#x5982;&#x4E0B;&#xFF1A;</p>
<h3 id="3-1-HashMap-&#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;-Hook-&#x70B9;"><a href="#3-1-HashMap-&#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;-Hook-&#x70B9;" class="headerlink" title="3.1 HashMap &#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x4E2D;&#x7684; Hook &#x70B9;"></a>3.1 HashMap &#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x4E2D;&#x7684; Hook &#x70B9;</h3><p>LinkedHashMap &#x76F4;&#x63A5;&#x590D;&#x7528; HashMap &#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x652F;&#x6301;&#x6279;&#x91CF;&#x6DFB;&#x52A0;&#xFF1A;</p>
<ul>
<li><strong>HashMap#put&#xFF1A;</strong> &#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;&#xFF1B;</li>
<li><strong>HashMap#putAll&#xFF1A;</strong> &#x6279;&#x91CF;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;&#x3002;</li>
</ul>
<p>&#x4E0D;&#x7BA1;&#x662F;&#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#x8FD8;&#x662F;&#x6279;&#x91CF;&#x6DFB;&#x52A0;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x5148;&#x901A;&#x8FC7; hash &#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x952E;&#xFF08;Key&#xFF09;&#x7684;&#x6563;&#x5217;&#x503C;&#xFF0C;&#x518D;&#x901A;&#x8FC7; <code>HashMap#putVal</code> &#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F; HashMap &#x7684;&#x884C;&#x4E3A;&#x3002;&#x5173;&#x952E;&#x7684;&#x5730;&#x65B9;&#x5728;&#x4E8E;&#xFF1A;LinkedHashMap &#x5728; <code>HashMap#putVal</code> &#x7684; Hook &#x70B9;&#x4E2D;&#x52A0;&#x5165;&#x4E86;&#x53CC;&#x7EBF;&#x94FE;&#x8868;&#x7684;&#x903B;&#x8F91;&#x3002;&#x533A;&#x5206; 2 &#x79CD;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li><strong>&#x6DFB;&#x52A0;&#x6570;&#x636E;&#xFF1A;</strong> &#x5982;&#x679C;&#x6570;&#x636E;&#x4E0D;&#x5B58;&#x5728;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5219;&#x8C03;&#x7528; <code>newNode()</code> &#x6216; <code>newTreeNode()</code> &#x521B;&#x5EFA;&#x8282;&#x70B9;&#xFF0C;&#x5E76;&#x56DE;&#x8C03; <code>afterNodeInsertion()</code>&#xFF1B;</li>
<li><strong>&#x66F4;&#x65B0;&#x6570;&#x636E;&#xFF1A;</strong> &#x5982;&#x679C;&#x6570;&#x636E;&#x5B58;&#x5728;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5219;&#x66F4;&#x65B0; Value&#xFF0C;&#x5E76;&#x56DE;&#x8C03; <code>afterNodeAccess()</code>&#x3002;</li>
</ul>
<p><code>HashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">public V put(K key, V value) {</span><br><span class="line">    return putVal(hash(key) /*&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;*/, key, value, false, true);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// hash&#xFF1A;Key &#x7684;&#x6563;&#x5217;&#x503C;&#xFF08;&#x7ECF;&#x8FC7;&#x6270;&#x52A8;&#xFF09;</span><br><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; </span><br><span class="line">    Node&lt;K,V&gt; p; </span><br><span class="line">    int n;</span><br><span class="line">    int i;</span><br><span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    // (n - 1) &amp; hash&#xFF1A;&#x6563;&#x5217;&#x503C;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;</span><br><span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="line">        // &#x7701;&#x7565;&#x904D;&#x5386;&#x6876;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5177;&#x4F53;&#x5206;&#x6790;&#x89C1; HashMap &#x6E90;&#x7801;&#x8BB2;&#x89E3;</span><br><span class="line"></span><br><span class="line">        // 1.1 &#x5982;&#x679C;&#x8282;&#x70B9;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x65B0;&#x589E;&#x8282;&#x70B9;</span><br><span class="line">        p.next = newNode(hash, key, value, null);</span><br><span class="line">        // 2.1 &#x5982;&#x679C;&#x8282;&#x70B9;&#x5B58;&#x5728;&#x66F4;&#x65B0;&#x8282;&#x70B9; Value</span><br><span class="line">        if (e != null) {</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            if (!onlyIfAbsent || oldValue == null)</span><br><span class="line">                e.value = value;</span><br><span class="line">            // 2.2 Hook&#xFF1A;&#x8BBF;&#x95EE;&#x8282;&#x70B9;&#x56DE;&#x8C03;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            return oldValue;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ++modCount;</span><br><span class="line">    // &#x6269;&#x5BB9;</span><br><span class="line">    if (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    // 1.2 Hook&#xFF1A;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x56DE;&#x8C03;</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>HashMap#put &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a6624111448a21dd918fc3083236796078539a60b83736fe7dab1183fb3c6a9e" alt></p>
<h3 id="3-2-HashMap-&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;-Hook-&#x70B9;"><a href="#3-2-HashMap-&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;-Hook-&#x70B9;" class="headerlink" title="3.2 HashMap &#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#x4E2D;&#x7684; Hook &#x70B9;"></a>3.2 HashMap &#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#x4E2D;&#x7684; Hook &#x70B9;</h3><p>LinkedHashMap &#x91CD;&#x5199;&#x4E86; <code>HashMap#get</code> &#x65B9;&#x6CD5;&#xFF0C;&#x5728; HashMap &#x7248;&#x672C;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x589E;&#x52A0;&#x4E86; <code>afterNodeAccess()</code> &#x56DE;&#x8C03;&#x3002;</p>
<p><code>HashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public V get(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    return (e = getNode(hash(key), key)) == null ? null : e.value;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>LinkedHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public V get(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    if ((e = getNode(hash(key), key)) == null)</span><br><span class="line">        return null;</span><br><span class="line">    // Hook&#xFF1A;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x56DE;&#x8C03;</span><br><span class="line">    if (accessOrder)</span><br><span class="line">        afterNodeAccess(e);</span><br><span class="line">    return e.value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public V getOrDefault(Object key, V defaultValue) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    if ((e = getNode(hash(key), key)) == null)</span><br><span class="line">        return defaultValue;</span><br><span class="line">    // Hook&#xFF1A;&#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x56DE;&#x8C03;</span><br><span class="line">    if (accessOrder)</span><br><span class="line">        afterNodeAccess(e);</span><br><span class="line">    return e.value;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>HashMap#get &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d425e46248def2fd3c6a90298cc48b98934bccd34a50f1ad9f5e9bffbd511b1b" alt></p>
<h3 id="3-3-HashMap-&#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;-Hook-&#x70B9;"><a href="#3-3-HashMap-&#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#x4E2D;&#x7684;-Hook-&#x70B9;" class="headerlink" title="3.3 HashMap &#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#x4E2D;&#x7684; Hook &#x70B9;"></a>3.3 HashMap &#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#x4E2D;&#x7684; Hook &#x70B9;</h3><p>LinkedHashMap &#x76F4;&#x63A5;&#x590D;&#x7528; HashMap &#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x79FB;&#x9664;&#x8282;&#x70B9;&#x540E;&#xFF0C;&#x589E;&#x52A0; <code>afterNodeRemoval()</code> &#x56DE;&#x8C03;&#x3002;</p>
<p><code>HashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x79FB;&#x9664;&#x8282;&#x70B9;</span><br><span class="line">public V remove(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    return (e = removeNode(hash(key)/*&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;*/, key, null, false, true)) == null ? null : e.value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value,</span><br><span class="line">				boolean matchValue, boolean movable) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; </span><br><span class="line">    Node&lt;K,V&gt; p; </span><br><span class="line">    int n, index;</span><br><span class="line">    // (n - 1) &amp; hash&#xFF1A;&#x6563;&#x5217;&#x503C;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) {</span><br><span class="line">        Node&lt;K,V&gt; node = null, e; K k; V v;</span><br><span class="line">        // &#x7701;&#x7565;&#x904D;&#x5386;&#x6876;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5177;&#x4F53;&#x5206;&#x6790;&#x89C1; HashMap &#x6E90;&#x7801;&#x8BB2;&#x89E3;</span><br><span class="line">        // &#x5220;&#x9664; node &#x8282;&#x70B9;</span><br><span class="line">        if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) {</span><br><span class="line">            // &#x7701;&#x7565;&#x5220;&#x9664;&#x8282;&#x70B9;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5177;&#x4F53;&#x5206;&#x6790;&#x89C1; HashMap &#x6E90;&#x7801;&#x8BB2;&#x89E3;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            // Hook&#xFF1A;&#x5220;&#x9664;&#x8282;&#x70B9;&#x56DE;&#x8C03;</span><br><span class="line">            afterNodeRemoval(node);</span><br><span class="line">            return node;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>HashMap#remove &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/758a1cfe4d6b3a0d697cf908905675e78e984d25d0f165aa815ad46ad1021f8f" alt></p>
<hr>
<ol start="4">
<li>LinkedHashMap &#x6E90;&#x7801;&#x5206;&#x6790;</li>
</ol>
<hr>
<p>&#x8FD9;&#x4E00;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790; LinkedHashMap &#x4E2D;&#x4E3B;&#x8981;&#x6D41;&#x7A0B;&#x7684;&#x6E90;&#x7801;&#x3002;</p>
<h3 id="4-1-LinkedHashMap-&#x7684;&#x5C5E;&#x6027;"><a href="#4-1-LinkedHashMap-&#x7684;&#x5C5E;&#x6027;" class="headerlink" title="4.1 LinkedHashMap &#x7684;&#x5C5E;&#x6027;"></a>4.1 LinkedHashMap &#x7684;&#x5C5E;&#x6027;</h3><ul>
<li>LinkedHashMap &#x7EE7;&#x627F;&#x4E8E; HashMap&#xFF0C;&#x5E76;&#x4E14;&#x65B0;&#x589E; <code>head</code> &#x548C; <code>tail</code> &#x6307;&#x9488;&#x6307;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5934;&#x5C3E;&#x8282;&#x70B9;&#xFF08;&#x4E0E; LinkedList &#x7C7B;&#x4F3C;&#x7684;&#x5934;&#x5C3E;&#x8282;&#x70B9;&#xFF09;&#xFF1B;</li>
<li>LinkedHashMap &#x7684;&#x53CC;&#x94FE;&#x8868;&#x8282;&#x70B9; Entry &#x7EE7;&#x627F;&#x4E8E; HashMap &#x7684;&#x5355;&#x94FE;&#x8868;&#x8282;&#x70B9; Node&#xFF0C;&#x800C; HashMap &#x7684;&#x7EA2;&#x9ED1;&#x6811;&#x8282;&#x70B9; TreeNode &#x7EE7;&#x627F;&#x4E8E; LinkedHashMap &#x7684;&#x53CC;&#x94FE;&#x8868;&#x8282;&#x70B9; Entry&#x3002;</li>
</ul>
<p><code>&#x8282;&#x70B9;&#x7EE7;&#x627F;&#x5173;&#x7CFB;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a6a2ec569465b1f1466b8d8bd99048c8e6ab2d4ad3278a0238b9a2b4ceea0ca9" alt></p>
<p><code>LinkedHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class LinkedHashMap&lt;K,V&gt; extends HashMap&lt;K,V&gt; implements Map&lt;K,V&gt; {</span><br><span class="line">    // &#x5934;&#x6307;&#x9488;</span><br><span class="line">    transient LinkedHashMap.Entry&lt;K,V&gt; head;</span><br><span class="line">    // &#x5C3E;&#x6307;&#x9488;</span><br><span class="line">    transient LinkedHashMap.Entry&lt;K,V&gt; tail;</span><br><span class="line">    // &#x662F;&#x5426;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;</span><br><span class="line">    final boolean accessOrder;</span><br><span class="line"></span><br><span class="line">    // &#x53CC;&#x5411;&#x94FE;&#x8868;&#x8282;&#x70B9;</span><br><span class="line">    static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; {</span><br><span class="line">        // &#x524D;&#x9A71;&#x6307;&#x9488;&#x548C;&#x540E;&#x7EE7;&#x6307;&#x9488;&#xFF08;&#x7528;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF09;</span><br><span class="line">        Entry&lt;K,V&gt; before, after;</span><br><span class="line">        Entry(int hash, K key, V value, Node&lt;K,V&gt; next/*&#x5355;&#x94FE;&#x8868;&#x6307;&#x9488;&#xFF08;&#x7528;&#x4E8E;&#x6563;&#x5217;&#x8868;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#xFF09;*/) {</span><br><span class="line">            super(hash, key, value, next);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>LinkedList.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable {</span><br><span class="line">    // &#x5934;&#x6307;&#x9488;&#xFF08;// LinkedList &#x4E2D;&#x4E5F;&#x6709;&#x7C7B;&#x4F3C;&#x7684;&#x5934;&#x5C3E;&#x8282;&#x70B9;&#xFF09;</span><br><span class="line">    transient Node&lt;E&gt; first;</span><br><span class="line">    // &#x5C3E;&#x6307;&#x9488;</span><br><span class="line">    transient Node&lt;E&gt; last;</span><br><span class="line"></span><br><span class="line">    // &#x53CC;&#x5411;&#x94FE;&#x8868;&#x8282;&#x70B9;</span><br><span class="line">    private static class Node&lt;E&gt; {</span><br><span class="line">        // &#x8282;&#x70B9;&#x6570;&#x636E;</span><br><span class="line">        // &#xFF08;&#x7C7B;&#x578B;&#x64E6;&#x9664;&#x540E;&#xFF1A;Object item;&#xFF09;</span><br><span class="line">        E item;</span><br><span class="line">        // &#x524D;&#x9A71;&#x6307;&#x9488;</span><br><span class="line">        Node&lt;E&gt; next;</span><br><span class="line">        // &#x540E;&#x7EE7;&#x6307;&#x9488;</span><br><span class="line">        Node&lt;E&gt; prev;</span><br><span class="line"></span><br><span class="line">        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {</span><br><span class="line">            this.item = element;</span><br><span class="line">            this.next = next;</span><br><span class="line">            this.prev = prev;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>LinkedHashMap &#x7684;&#x5C5E;&#x6027;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x7684;&#xFF0C;&#x4E0D;&#x51FA;&#x610F;&#x5916;&#x7684;&#x8BDD;&#x53C8;&#x6709;&#x5C0F;&#x670B;&#x53CB;&#x51FA;&#x6765;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x4E86;&#xFF1A;</p>
<ul>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 1&#xFF1A;HashMap.TreeNode &#x548C; LinkedHashMap.Entry &#x7684;&#x7EE7;&#x627F;&#x987A;&#x5E8F;&#x662F;&#x4E0D;&#x662F;&#x53CD;&#x4E86;&#xFF1F;</strong></li>
</ul>
<p>&#x6211;&#x7684;&#x7406;&#x89E3;&#x662F;&#x4F5C;&#x8005;&#x5E0C;&#x671B;&#x7B80;&#x5316;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#xFF0C;&#x6240;&#x4EE5;&#x91C7;&#x7528;&#x4E86;&#x975E;&#x5E38;&#x89C4;&#x7684;&#x505A;&#x6CD5;&#xFF08;&#x4E0D;&#x6127;&#x662F;&#x6807;&#x51C6;&#x5E93;&#xFF09;&#x3002;&#x7531;&#x4E8E; Java &#x662F;&#x5355;&#x7EE7;&#x627F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x6309;&#x7167;&#x5E38;&#x89C4;&#x7684;&#x505A;&#x6CD5;&#x8BA9; HashMap.TreeNode &#x76F4;&#x63A5;&#x7EE7;&#x627F; HashMap.Node&#xFF0C;&#x90A3;&#x4E48;&#x5728; LinkedHashMap &#x4E2D;&#x5C31;&#x9700;&#x8981;&#x533A;&#x5206; LinkedHashMap.Entry &#x548C; LinkedHashMap.TreeEntry&#xFF0C;&#x518D;&#x4F7F;&#x7528;&#x63A5;&#x53E3;&#x7EDF;&#x4E00;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x3002;</p>
<p><code>&#x5E38;&#x89C4;&#x5B9E;&#x73B0;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/679109915dae4bc002055144331497b8bff70723f8c6a2d277cd27b2656722cc" alt></p>
<h3 id="4-2-LinkedHashMap-&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a href="#4-2-LinkedHashMap-&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="headerlink" title="4.2 LinkedHashMap &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"></a>4.2 LinkedHashMap &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3><p>LinkedHashMap &#x6709; 5 &#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x4F5C;&#x7528;&#x4E0E; HashMap &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x57FA;&#x672C;&#x4E00;&#x81F4;&#xFF0C;&#x533A;&#x522B;&#x53EA;&#x5728;&#x4E8E;&#x5BF9; <code>accessOrder</code> &#x5B57;&#x6BB5;&#x7684;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public LinkedHashMap(int initialCapacity, float loadFactor) {</span><br><span class="line">    super(initialCapacity, loadFactor);</span><br><span class="line">    accessOrder = false;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public LinkedHashMap(int initialCapacity) {</span><br><span class="line">    super(initialCapacity);</span><br><span class="line">    accessOrder = false;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public LinkedHashMap() {</span><br><span class="line">    super();</span><br><span class="line">    accessOrder = false;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26; Map &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public LinkedHashMap(Map&lt;? extends K, ? extends V&gt; m) {</span><br><span class="line">    super();</span><br><span class="line">    accessOrder = false;</span><br><span class="line">    putMapEntries(m, false);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x3001;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x548C; accessOrder &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">// &#x662F;&#x5426;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x4E3A; true &#x8868;&#x793A;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; false</span><br><span class="line">public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) {</span><br><span class="line">    super(initialCapacity, loadFactor);</span><br><span class="line">    this.accessOrder = accessOrder;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-3-LinkedHashMap-&#x5982;&#x4F55;&#x7EF4;&#x62A4;&#x53CC;&#x94FE;&#x8868;"><a href="#4-3-LinkedHashMap-&#x5982;&#x4F55;&#x7EF4;&#x62A4;&#x53CC;&#x94FE;&#x8868;" class="headerlink" title="4.3 LinkedHashMap &#x5982;&#x4F55;&#x7EF4;&#x62A4;&#x53CC;&#x94FE;&#x8868;"></a>4.3 LinkedHashMap &#x5982;&#x4F55;&#x7EF4;&#x62A4;&#x53CC;&#x94FE;&#x8868;</h3><p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E0B; LinkedHashMap &#x662F;&#x5982;&#x4F55;&#x7EF4;&#x62A4;&#x53CC;&#x94FE;&#x8868;&#x7684;&#x3002;&#x5176;&#x5B9E;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4E0A;&#x4E00;&#x8282;&#x6240;&#x6709;&#x7684; Hook &#x70B9;&#x6C47;&#x603B;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x8FD9;&#x4E9B; Hook &#x70B9;&#x6B63;&#x597D;&#x7EC4;&#x6210;&#x4E86; LinkedHashMap &#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x884C;&#x4E3A;&#xFF1A;</p>
<ul>
<li><strong>&#x6DFB;&#x52A0;&#x6570;&#x636E;&#xFF1A;</strong> &#x5C06;&#x6570;&#x636E;&#x94FE;&#x63A5;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#xFF1B;</li>
<li><strong>&#x8BBF;&#x95EE;&#x6570;&#x636E;&#xFF08;&#x5305;&#x62EC;&#x6DFB;&#x52A0;&#x3001;&#x67E5;&#x8BE2;&#x3001;&#x66F4;&#x65B0;&#xFF09;&#xFF1A;</strong> &#x5C06;&#x6570;&#x636E;&#x79FB;&#x52A8;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x4EA6;&#x76F8;&#x5F53;&#x4E8E;&#x5148;&#x79FB;&#x9664;&#x518D;&#x6DFB;&#x52A0;&#x5230;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#xFF1B;</li>
<li><strong>&#x5220;&#x9664;&#x6570;&#x636E;&#xFF1A;</strong> &#x5C06;&#x6570;&#x636E;&#x4ECE;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x4E2D;&#x79FB;&#x9664;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#xFF1B;</li>
<li><strong>&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1A;</strong> &#x76F4;&#x63A5;&#x6DD8;&#x6C70;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x5934;&#x8282;&#x70B9;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#x3002;</li>
</ul>
<p><code>LinkedHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// -&gt; 1.1 &#x5982;&#x679C;&#x8282;&#x70B9;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x65B0;&#x589E;&#x8282;&#x70B9;</span><br><span class="line">Node&lt;K,V&gt; newNode(int hash, K key, V value, Node&lt;K,V&gt; e) {</span><br><span class="line">    // &#x65B0;&#x5EFA;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x8282;&#x70B9;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; p = new LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e);</span><br><span class="line">    // &#x6DFB;&#x52A0;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5C3E;&#x90E8;&#xFF0C;&#x7B49;&#x4EF7;&#x4E8E; LinkedList#linkLast</span><br><span class="line">    linkNodeLast(p);</span><br><span class="line">    return p;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// -&gt; 1.1 &#x5982;&#x679C;&#x8282;&#x70B9;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x65B0;&#x589E;&#x8282;&#x70B9;</span><br><span class="line">TreeNode&lt;K,V&gt; newTreeNode(int hash, K key, V value, Node&lt;K,V&gt; next) {</span><br><span class="line">    // &#x65B0;&#x5EFA;&#x7EA2;&#x9ED1;&#x6811;&#x8282;&#x70B9;&#xFF08;&#x7EE7;&#x627F;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x8282;&#x70B9;&#xFF09;</span><br><span class="line">    TreeNode&lt;K,V&gt; p = new TreeNode&lt;K,V&gt;(hash, key, value, next);</span><br><span class="line">    // &#x6DFB;&#x52A0;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5C3E;&#x90E8;&#xFF0C;&#x7B49;&#x4EF7;&#x4E8E; LinkedList#linkLast</span><br><span class="line">    linkNodeLast(p);</span><br><span class="line">    return p;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6DFB;&#x52A0;&#x5230;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x5C3E;&#x90E8;&#xFF0C;&#x7B49;&#x4EF7;&#x4E8E; LinkedList#linkLast</span><br><span class="line">private void linkNodeLast(LinkedHashMap.Entry&lt;K,V&gt; p) {</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last = tail;</span><br><span class="line">    tail = p;</span><br><span class="line">    if (last == null)</span><br><span class="line">        // last &#x4E3A; null &#x8BF4;&#x660E;&#x9996;&#x4E2A;&#x6DFB;&#x52A0;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539; first &#x6307;&#x9488;</span><br><span class="line">        head = p;</span><br><span class="line">    else {</span><br><span class="line">        // &#x5C06;&#x65B0;&#x8282;&#x70B9;&#x7684;&#x524D;&#x9A71;&#x6307;&#x9488;&#x6307;&#x5411; last </span><br><span class="line">        p.before = last;</span><br><span class="line">        // &#x5C06; last &#x7684; next &#x6307;&#x9488;&#x6307;&#x5411;&#x65B0;&#x8282;&#x70B9;</span><br><span class="line">        last.after = p;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x8282;&#x70B9;&#x63D2;&#x5165;&#x56DE;&#x8C03;</span><br><span class="line">// evict&#xFF1A;&#x662F;&#x5426;&#x6DD8;&#x6C70;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;</span><br><span class="line">void afterNodeInsertion(boolean evict) { // possibly remove eldest</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; first;</span><br><span class="line">    // removeEldestEntry&#xFF1A;&#x662F;&#x5426;&#x6DD8;&#x6C70;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5373;&#x662F;&#x5426;&#x6DD8;&#x6C70;&#x5934;&#x8282;&#x70B9;&#xFF08;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;&#xFF09;</span><br><span class="line">    if (evict &amp;&amp; (first = head) != null &amp;&amp; removeEldestEntry(first)) {</span><br><span class="line">        // &#x79FB;&#x9664; first &#x8282;&#x70B9;&#xFF0C;&#x817E;&#x51FA;&#x7F13;&#x5B58;&#x7A7A;&#x95F4;</span><br><span class="line">        K key = first.key;</span><br><span class="line">        removeNode(hash(key), key, null, false, true);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x79FB;&#x9664;&#x8282;&#x70B9;&#x56DE;&#x8C03;</span><br><span class="line">void afterNodeRemoval(Node&lt;K,V&gt; e) { // unlink</span><br><span class="line">    // &#x5B9E;&#x73B0;&#x4E86;&#x6807;&#x51C6;&#x7684;&#x53CC;&#x94FE;&#x8868;&#x79FB;&#x9664;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;</span><br><span class="line">    p.before = p.after = null;</span><br><span class="line">    if (b == null)</span><br><span class="line">        // &#x5220;&#x9664;&#x7684;&#x662F;&#x5934;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x4FEE;&#x6B63; head &#x6307;&#x9488;</span><br><span class="line">        head = a;</span><br><span class="line">    else</span><br><span class="line">        // &#x4FEE;&#x6B63;&#x524D;&#x9A71;&#x8282;&#x70B9;&#x7684;&#x540E;&#x7EE7;&#x6307;&#x9488;&#xFF0C;&#x6307;&#x5411;&#x88AB;&#x5220;&#x9664;&#x8282;&#x70B9;&#x7684;&#x540E;&#x7EE7;&#x8282;&#x70B9;</span><br><span class="line">        b.after = a;</span><br><span class="line">    if (a == null)</span><br><span class="line">        // &#x5220;&#x9664;&#x7684;&#x662F;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x4FEE;&#x6B63; tail &#x6307;&#x9488;</span><br><span class="line">        tail = b;</span><br><span class="line">    else</span><br><span class="line">        // &#x4FEE;&#x6B63;&#x540E;&#x7EE7;&#x8282;&#x70B9;&#x7684;&#x524D;&#x9A71;&#x6307;&#x9488;&#xFF0C;&#x6307;&#x5411;&#x88AB;&#x5220;&#x9664;&#x8282;&#x70B9;&#x7684;&#x524D;&#x9A71;&#x8282;&#x70B9;</span><br><span class="line">        a.before = b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x8282;&#x70B9;&#x8BBF;&#x95EE;&#x56DE;&#x8C03;</span><br><span class="line">void afterNodeAccess(Node&lt;K,V&gt; e) { // move node to last</span><br><span class="line">    // &#x5148;&#x5C06;&#x8282;&#x70B9; e &#x79FB;&#x9664;&#xFF0C;&#x518D;&#x6DFB;&#x52A0;&#x5230;&#x94FE;&#x8868;&#x5C3E;&#x90E8;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; last;</span><br><span class="line">    // accessOrder&#xFF1A;&#x662F;&#x5426;&#x6309;&#x7167;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#xFF0C;&#x4E3A; false &#x5219;&#x4FDD;&#x7559;&#x63D2;&#x5165;&#x987A;&#x5E8F;</span><br><span class="line">    if (accessOrder &amp;&amp; (last = tail) != e) {</span><br><span class="line">        // &#x8FD9;&#x4E24;&#x4E2A; if &#x8BED;&#x53E5;&#x5757;&#x5C31;&#x662F; afterNodeRemoval &#x7684;&#x903B;&#x8F91;</span><br><span class="line">        LinkedHashMap.Entry&lt;K,V&gt; p = (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;</span><br><span class="line">        p.after = null;</span><br><span class="line">        if (b == null)</span><br><span class="line">            head = a;</span><br><span class="line">        else</span><br><span class="line">            b.after = a;</span><br><span class="line">        if (a != null)</span><br><span class="line">            a.before = b;</span><br><span class="line">        else</span><br><span class="line">            last = b;</span><br><span class="line">        // &#x8FD9;&#x4E2A; if &#x8BED;&#x53E5;&#x5757;&#x5C31;&#x662F; linkNodeLast &#x7684;&#x903B;&#x8F91;</span><br><span class="line">        if (last == null)</span><br><span class="line">            head = p;</span><br><span class="line">        else {</span><br><span class="line">            p.before = last;</span><br><span class="line">            last.after = p;</span><br><span class="line">        }</span><br><span class="line">        tail = p;</span><br><span class="line">        ++modCount;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6DD8;&#x6C70;&#x5224;&#x65AD;&#x63A5;&#x53E3;&#xFF0C;&#x7531;&#x5B50;&#x7C7B;&#x5B9E;&#x73B0;</span><br><span class="line">protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) {</span><br><span class="line">    return false;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-4-LinkedHashMap-&#x7684;&#x8FED;&#x4EE3;&#x5668;"><a href="#4-4-LinkedHashMap-&#x7684;&#x8FED;&#x4EE3;&#x5668;" class="headerlink" title="4.4 LinkedHashMap &#x7684;&#x8FED;&#x4EE3;&#x5668;"></a>4.4 LinkedHashMap &#x7684;&#x8FED;&#x4EE3;&#x5668;</h3><p>&#x4E0E; HashMap &#x7C7B;&#x4F3C;&#xFF0C;LinkedHashMap &#x4E5F;&#x63D0;&#x4F9B;&#x4E86; 3 &#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#xFF1A;</p>
<ul>
<li><strong>LinkedEntryIterator&#xFF1A;</strong> &#x952E;&#x503C;&#x5BF9;&#x8FED;&#x4EE3;&#x5668;</li>
<li><strong>LinkedKeyIterator&#xFF1A;</strong> &#x952E;&#x8FED;&#x4EE3;&#x5668;</li>
<li><strong>LinkedValueIterator&#xFF1A;</strong> &#x503C;&#x8FED;&#x4EE3;&#x5668;</li>
</ul>
<p>&#x533A;&#x522B;&#x5728;&#x4E8E; LinkedHashMap &#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E86; <code>LinkedHashIterator</code>&#x3002;&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x904D;&#x5386;&#x65F6;&#xFF0C;HashMap &#x4F1A;&#x6309;&#x7167;&#x6570;&#x7EC4;&#x987A;&#x5E8F;&#x904D;&#x5386;&#x6876;&#x8282;&#x70B9;&#xFF0C;&#x4ECE;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x89C6;&#x89D2;&#x770B;&#x662F;&#x65E0;&#x5E8F;&#x7684;&#x3002;&#x800C; LinkedHashMap &#x662F;&#x6309;&#x7167;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#x4ECE; head &#x8282;&#x70B9;&#x5F00;&#x59CB;&#x904D;&#x5386;&#xFF0C;&#x4ECE;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x89C6;&#x89D2;&#x662F;&#x53EF;&#x4EE5;&#x611F;&#x77E5;&#x5230;&#x7684;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6216;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x3002;</p>
<p><code>LinkedHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;abstract class LinkedHashIterator {</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; next;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; current;</span><br><span class="line">    // &#x4FEE;&#x6539;&#x8BA1;&#x6570;</span><br><span class="line">    int expectedModCount;</span><br><span class="line"></span><br><span class="line">    LinkedHashIterator() {</span><br><span class="line">        // &#x4ECE;&#x5934;&#x7ED3;&#x70B9;&#x5F00;&#x59CB;&#x904D;&#x5386;</span><br><span class="line">        next = head;</span><br><span class="line">        // &#x4FEE;&#x6539;&#x8BA1;&#x6570;</span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">        current = null;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public final boolean hasNext() {</span><br><span class="line">        return next != null;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    final LinkedHashMap.Entry&lt;K,V&gt; nextNode() {</span><br><span class="line">        LinkedHashMap.Entry&lt;K,V&gt; e = next;</span><br><span class="line">        // &#x68C0;&#x67E5;&#x4FEE;&#x6539;&#x8BA1;&#x6570;</span><br><span class="line">        if (modCount != expectedModCount)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">        if (e == null)</span><br><span class="line">            throw new NoSuchElementException();</span><br><span class="line">        current = e;</span><br><span class="line">        next = e.after;</span><br><span class="line">        return e;</span><br><span class="line">    }</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-5-LinkedHashMap-&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"><a href="#4-5-LinkedHashMap-&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;" class="headerlink" title="4.5 LinkedHashMap &#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"></a>4.5 LinkedHashMap &#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</h3><p>&#x4E0E; HashMap &#x76F8;&#x540C;&#xFF0C;LinkedHashMap &#x4E5F;&#x91CD;&#x5199;&#x4E86; JDK &#x5E8F;&#x5217;&#x5316;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5E76;&#x4FDD;&#x7559;&#x4E86; HashMap &#x4E2D;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#x3002;LinkedHashMap &#x53EA;&#x662F;&#x91CD;&#x5199;&#x4E86; <code>internalWriteEntries()</code>&#xFF0C;&#x6309;&#x7167;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#x5C31;&#x80FD;&#x591F;&#x6062;&#x590D;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x987A;&#x5E8F;&#x3002;</p>
<p><code>HashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</span><br><span class="line">private void writeObject(java.io.ObjectOutputStream s) throws IOException {</span><br><span class="line">    int buckets = capacity();</span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line">    // &#x5199;&#x5165;&#x5BB9;&#x91CF;</span><br><span class="line">    s.writeInt(buckets);</span><br><span class="line">    // &#x5199;&#x5165;&#x6709;&#x6548;&#x5143;&#x7D20;&#x4E2A;&#x6570;</span><br><span class="line">    s.writeInt(size);</span><br><span class="line">    // &#x5199;&#x5165;&#x6709;&#x6548;&#x5143;&#x7D20;</span><br><span class="line">    internalWriteEntries(s);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x4E0D;&#x5173;&#x5FC3;&#x952E;&#x503C;&#x5BF9;&#x6240;&#x5728;&#x7684;&#x6876;&#xFF0C;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x4F1A;&#x91CD;&#x65B0;&#x6620;&#x5C04;</span><br><span class="line">void internalWriteEntries(java.io.ObjectOutputStream s) throws IOException {</span><br><span class="line">    Node&lt;K,V&gt;[] tab;</span><br><span class="line">    if (size &gt; 0 &amp;&amp; (tab = table) != null) {</span><br><span class="line">        for (int i = 0; i &lt; tab.length; ++i) {</span><br><span class="line">            for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) {</span><br><span class="line">                s.writeObject(e.key);</span><br><span class="line">                s.writeObject(e.value);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>LinkedHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x91CD;&#x5199;&#xFF1A;&#x6309;&#x7167;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x987A;&#x5E8F;&#x5199;&#x5165;</span><br><span class="line">void internalWriteEntries(java.io.ObjectOutputStream s) throws IOException {</span><br><span class="line">    for (LinkedHashMap.Entry&lt;K,V&gt; e = head; e != null; e = e.after) {</span><br><span class="line">        s.writeObject(e.key);</span><br><span class="line">        s.writeObject(e.value);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<ol start="5">
<li>&#x57FA;&#x4E8E; LinkedHashMap &#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;</li>
</ol>
<hr>
<p>&#x8FD9;&#x4E00;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684; LRU &#x7F13;&#x5B58;&#x3002;&#x7406;&#x89E3;&#x4E86; LinkedHashMap &#x7EF4;&#x62A4;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x548C;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x7684;&#x539F;&#x7406;&#x540E;&#xFF0C;&#x76F8;&#x4FE1;&#x4F60;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x5982;&#x4F55;&#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#x4E86;&#x3002;</p>
<ul>
<li>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#xFF0C;LinkedHashMap &#x652F;&#x6301; 2 &#x79CD;&#x6392;&#x5E8F;&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x5668;&#x53C2;&#x6570; <code>accessOrder</code> &#x6807;&#x8BB0;&#x4F4D;&#x63A7;&#x5236;&#x7684;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06; <code>accessOrder</code> &#x8BBE;&#x7F6E;&#x4E3A; true &#x8868;&#x793A;&#x4F7F;&#x7528; LRU &#x6A21;&#x5F0F;&#x7684;&#x8BBF;&#x95EE;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x3002;</li>
<li>&#x5176;&#x6B21;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x91CD;&#x5199;&#x6DD8;&#x6C70;&#x5224;&#x65AD;&#x63A5;&#x53E3; <code>removeEldestEntry()</code>&#xFF0C;&#x5F53;&#x7F13;&#x5B58;&#x6570;&#x91CF;&#x5927;&#x4E8E;&#x7F13;&#x5B58;&#x5BB9;&#x91CF;&#x65F6;&#x8FD4;&#x56DE; true&#xFF0C;&#x8868;&#x793A;&#x79FB;&#x9664;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#x3002;</li>
</ul>
<p><code>MaxSizeLruCacheDemo.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class MaxSizeLruCacheDemo extends LinkedHashMap {</span><br><span class="line"></span><br><span class="line">    private int maxElements;</span><br><span class="line"></span><br><span class="line">    public LRUCache(int maxSize) {</span><br><span class="line">        super(maxSize, 0.75F, true);</span><br><span class="line">        maxElements = maxSize;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    protected boolean removeEldestEntry(java.util.Map.Entry eldest) {</span><br><span class="line">        // &#x8D85;&#x51FA;&#x5BB9;&#x91CF;</span><br><span class="line">        return size() &gt; maxElements;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<ol start="6">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<ul>
<li>1&#x3001;LRU &#x662F;&#x4E00;&#x79CD;&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#xFF0C;&#x4E0E;&#x5176;&#x4ED6;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#x76F8;&#x6BD4;&#xFF0C;LRU &#x7B97;&#x6CD5;&#x5229;&#x7528;&#x4E86; &#x201C;&#x5C40;&#x90E8;&#x6027;&#x539F;&#x7406;&#x201D;&#xFF0C;&#x7F13;&#x5B58;&#x7684;&#x5E73;&#x5747;&#x547D;&#x4E2D;&#x7387;&#x66F4;&#x9AD8;&#xFF1B;</li>
<li>2&#x3001;&#x4F7F;&#x7528;&#x53CC;&#x5411;&#x94FE;&#x8868; + &#x6563;&#x5217;&#x8868;&#x5B9E;&#x73B0;&#x7684; LRU&#xFF0C;&#x5728;&#x6DFB;&#x52A0;&#x3001;&#x67E5;&#x8BE2;&#x3001;&#x79FB;&#x9664;&#x548C;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F; O(1)&#xFF0C;&#x8FD9;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E5F;&#x53EB;&#x54C8;&#x5E0C;&#x94FE;&#x8868;&#xFF1B;</li>
</ul>
<pre><code>+ **&#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF1A;** &#x901A;&#x8FC7;&#x6563;&#x5217;&#x8868;&#x5B9A;&#x4F4D;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#xFF1B;
+ **&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF1A;** &#x76F4;&#x63A5;&#x6DD8;&#x6C70;&#x94FE;&#x8868;&#x5C3E;&#x8282;&#x70B9;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E3A; O(1)&#x3002;</code></pre><ul>
<li>3&#x3001;&#x4F7F;&#x7528; LinkedHashMap &#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x5173;&#x6CE8; 2 &#x4E2A; API&#xFF1A;</li>
</ul>
<pre><code>+ **`accessOrder` &#x6807;&#x8BB0;&#x4F4D;&#xFF1A;** LinkedHashMap &#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x4E86; FIFO &#x548C; LRU &#x4E24;&#x79CD;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; FIFO &#x6392;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; accessOrder &#x6807;&#x8BB0;&#x4F4D;&#x4FEE;&#x6539;&#x6392;&#x5E8F;&#x6A21;&#x5F0F;&#x3002;
+ **`removeEldestEntry()` &#x63A5;&#x53E3;&#xFF1A;** &#x6BCF;&#x6B21;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x65F6;&#xFF0C;LinkedHashMap &#x4F1A;&#x56DE;&#x8C03; removeEldestEntry() &#x63A5;&#x53E3;&#x3002;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x91CD;&#x5199; removeEldestEntry() &#x63A5;&#x53E3;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x79FB;&#x9664;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#xFF08;&#x5728; FIFO &#x7B56;&#x7565;&#x4E2D;&#x662F;&#x6700;&#x65E9;&#x6DFB;&#x52A0;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5728; LRU &#x7B56;&#x7565;&#x4E2D;&#x662F;&#x6700;&#x4E45;&#x672A;&#x8BBF;&#x95EE;&#x7684;&#x8282;&#x70B9;&#xFF09;&#x3002;</code></pre><ul>
<li>4&#x3001;Android &#x7684; LruCache &#x5185;&#x5B58;&#x7F13;&#x5B58;&#x548C; DiskLruCache &#x78C1;&#x76D8;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x90FD;&#x76F4;&#x63A5;&#x590D;&#x7528;&#x4E86; LinkedHashMap &#x7684; LRU &#x80FD;&#x529B;&#x3002;</li>
</ul>
<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x6790;&#x4E86; LinkedHashMap &#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x3002;&#x5728;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790; LRU &#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5E94;&#x7528;&#xFF0C;&#x4F8B;&#x5982; Android &#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x7684; LruCache &#x5185;&#x5B58;&#x7F13;&#x5B58;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x601D;&#x8003;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;LinkedHashMap &#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;Android &#x7684; <a href="https://dev.newban.cn/7166476725981806628/">LruCache</a> &#x662F;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x7684;&#xFF1F;&#x8BF7;&#x5173;&#x6CE8; <a href="/external_links/565d4476cb3075d30983b2c90269bd8a.html" target="blank" rel="noopener">&#x5C0F;&#x5F6D;&#x8BF4; &#xB7; Android &#x5F00;&#x6E90;&#x7EC4;&#x4EF6;</a> &#x4E13;&#x680F;&#x3002;</p>
<hr>
<h3 id="&#x7248;&#x6743;&#x58F0;&#x660E;"><a href="#&#x7248;&#x6743;&#x58F0;&#x660E;" class="headerlink" title="&#x7248;&#x6743;&#x58F0;&#x660E;"></a>&#x7248;&#x6743;&#x58F0;&#x660E;</h3><p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<h3 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><ul>
<li>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x5206;&#x6790; &#xB7; Java &#x8BED;&#x8A00;&#x63CF;&#x8FF0;&#xFF08;&#x7B2C; 5 &#x7AE0; &#xB7; &#x6563;&#x5217;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Mark Allen Weiss &#x8457;</li>
<li>&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#xFF08;&#x7B2C; 11 &#x7AE0; &#xB7; &#x6563;&#x5217;&#x8868;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Thomas H. Cormen &#x7B49; &#x8457;</li>
<li><a href="/external_links/3529d049f48fd001823dfe2eff3eb3ee.html" target="blank" rel="noopener">&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x4E4B;&#x7F8E;&#xFF08;&#x7B2C; 6&#x3001;18~22 &#x8BB2;&#xFF09;</a> &#x2014;&#x2014; &#x738B;&#x4E89; &#x8457;&#xFF0C;&#x6781;&#x5BA2;&#x65F6;&#x95F4; &#x51FA;&#x54C1;</li>
<li><a href="/external_links/e9c4ca595ce34c2a9d622211dd1653d4.html" target="blank" rel="noopener">LinkedHashMap &#x6E90;&#x7801;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#xFF08;JDK1.8&#xFF09;</a>&#x2014;&#x2014; &#x7530;&#x5C0F;&#x6CE2; &#x8457;</li>
<li><a href="https://dev.newban.cn/6844904049263771662">LRU &#x7B97;&#x6CD5;&#x53CA;&#x5176;&#x4F18;&#x5316;&#x7B56;&#x7565;&#x2014;&#x2014;&#x7B97;&#x6CD5;&#x7BC7;</a> &#x2014;&#x2014; &#x8C46;&#x8C49;&#x8FA3;&#x6912;&#x7092;&#x814A;&#x8089; &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903874172551181">&#x7F13;&#x51B2;&#x6C60;(buffer pool)&#xFF0C;&#x8FD9;&#x6B21;&#x5F7B;&#x5E95;&#x61C2;&#x4E86;&#xFF01;</a> &#x2014;&#x2014; 58 &#x6C88;&#x5251; &#x8457;</li>
<li><a href="/external_links/5ac50d8933c6b0659ff931ab668a0a19.html" target="blank" rel="noopener">LeetCode 146. LRU &#x7F13;&#x5B58;</a> &#x2014;&#x2014; LeetCode</li>
<li><a href="/external_links/e39fa5e42d954f2642f02c47fff9a476.html" target="blank" rel="noopener">Cache replacement policies</a> &#x2014;&#x2014; Wikipedia</li>
</ul>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF08;2023/07/08 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7161731329078329381">#1 ArrayList &#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;&#x6570;&#x7EC4;&#x5417;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162203434014212109">#2 &#x8BF4;&#x4E00;&#x4E0B; ArrayList &#x548C; LinkedList &#x7684;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162035643785150472">#3 CopyOnWriteArrayList &#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162819765361672199">#4 ArrayDeque&#xFF1A;&#x5982;&#x4F55;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7163985718417555487">#5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">#6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164348785512939551">#7 &#x5982;&#x4F55;&#x4F7F;&#x7528; LinkedHashMap &#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7165044834590261256">#8 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7166202551782604837">#9 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7166202801470013476">#10 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/6882370280946302983">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bc0395bbb4fd179c90d2e7fa7ac7210602cc6f9a1f6d67d395295c57e54d8b98" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/0b60eeeb5d7df0bb1b23cbebced3de26.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7164269662417453064.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7164269662417453064.html" itemprop="url">【AI】浅谈梯度下降算法（拓展篇） 前言 学习率 批量梯度下</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-10T14:25:38+08:00">
                2022-11-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong><em>&#x672C;&#x6587;&#x6B63;&#x5728;&#x53C2;&#x52A0;<a href="https://dev.newban.cn/7162096952883019783">&#x300C;&#x91D1;&#x77F3;&#x8BA1;&#x5212; . &#x74DC;&#x5206;6&#x4E07;&#x73B0;&#x91D1;&#x5927;&#x5956;&#x300D;</a></em></strong></p>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x524D;&#x5BFC;&#x535A;&#x6587;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7163548247028400159">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x7406;&#x8BBA;&#x7BC7;&#xFF09;</a></li>
<li><a href="https://dev.newban.cn/7163581570303918088">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x5B9E;&#x6218;&#x7BC7;&#xFF09;</a></li>
</ul>
<p>&#x901A;&#x8FC7;&#x524D;&#x5BFC;&#x535A;&#x6587;&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x60F3;&#x5FC5;&#x5927;&#x5BB6;&#x5BF9;&#x4E8E;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x4E5F;&#x6709;&#x6240;&#x638C;&#x63E1;&#x4E86;&#xFF0C;&#x5176;&#x4E2D;&#x5728; <a href="https://dev.newban.cn/7163581570303918088">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x5B9E;&#x6218;&#x7BC7;&#xFF09;</a> &#x535A;&#x6587;&#x4E2D;&#x6709;&#x7C97;&#x7565;&#x7684;&#x63D0;&#x5230;&#x8FC7;<strong>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x4E09;&#x5927;&#x5BB6;&#x65CF;</strong>&#xFF0C;&#x672C;&#x535A;&#x6587;&#x5C06;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x6765;&#x7EC6;&#x7EC6;&#x8BB2;&#x89E3;&#xFF1B;</p>
<h1 id="&#x5B66;&#x4E60;&#x7387;"><a href="#&#x5B66;&#x4E60;&#x7387;" class="headerlink" title="&#x5B66;&#x4E60;&#x7387;"></a>&#x5B66;&#x4E60;&#x7387;</h1><p><strong><em>&#x5B66;&#x4E60;&#x7387;</em></strong>&#xFF0C;&#x60F3;&#x5FC5;&#x5927;&#x5BB6;&#x5728;&#x524D;&#x5BFC;&#x535A;&#x6587;&#x4E2D;&#x4E5F;&#x89C1;&#x8FC7;&#x8BE5;&#x8BCD;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x63D0;&#x5230;&#x5B66;&#x4E60;&#x7387;&#x5462;&#xFF0C;&#x4E14;&#x542C;&#x6211;&#x6162;&#x6162;&#x5206;&#x6790;&#xFF1B;</p>
<p>&#x9996;&#x5148;&#x8981;&#x77E5;&#x9053;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x4E2D;&#x5FC3;&#x601D;&#x60F3;&#x5C31;&#x662F;&#x8FED;&#x4EE3;&#x5730;&#x8C03;&#x6574;&#x53C2;&#x6570;&#x4ECE;&#x800C;&#x4F7F;<strong>&#x6210;&#x672C;&#x51FD;&#x6570;</strong>&#x6700;&#x5C0F;&#x5316;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x9996;&#x5148;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x7684; &#x3B8;\theta&#x3B8; &#x503C;&#xFF08;&#x8FD9;&#x88AB;&#x79F0;&#x4E3A;&#x968F;&#x673A;&#x521D;&#x59CB;&#x5316;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x9010;&#x6B65;&#x6539;&#x8FDB;&#xFF0C;&#x6BCF;&#x6B21;&#x8E0F;&#x51FA;&#x4E00;&#x6B65;&#xFF0C;&#x6BCF;&#x4E00;&#x6B65;&#x90FD;&#x5C1D;&#x8BD5;&#x964D;&#x4F4E;&#x4E00;&#x70B9;&#x6210;&#x672C;&#x51FD;&#x6570;&#xFF08;&#x5982;&#x5728;&#x7EBF;&#x6027;&#x56DE;&#x5F52;&#x4E2D;&#x91C7;&#x7528; MSE&#xFF09;&#xFF0C;&#x76F4;&#x5230;&#x7B97;&#x6CD5;&#x6536;&#x655B;&#x51FA;&#x4E00;&#x4E2A;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/832eb46c09b1b4d63ae503fb886cccde8daf5f7f1ca0c92738b41af672c635c5" alt="image.png"></p>
<p>&#x7136;&#x800C;&#xFF0C;&#x8FD9;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x5341;&#x5206;&#x91CD;&#x8981;&#x7684;&#x8D85;&#x53C2;&#x6570;&#xFF0C;<strong><em>&#x5B66;&#x4E60;&#x7387; Learning Rate</em></strong>&#xFF0C;&#x5B83;&#x5F71;&#x54CD;&#x4E86;&#x6BCF;&#x4E00;&#x6B65;&#x7684;&#x6B65;&#x957F;&#xFF1B;</p>
<p>&#x5982;&#x679C;<strong>&#x5B66;&#x4E60;&#x7387;&#x592A;&#x4F4E;</strong>&#xFF0C;&#x7B97;&#x6CD5;&#x9700;&#x8981;&#x7ECF;&#x8FC7;&#x5927;&#x91CF;&#x8FED;&#x4EE3;&#x624D;&#x80FD;&#x6536;&#x655B;&#xFF0C;&#x8FD9;&#x5C06;&#x8017;&#x8D39;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0f8fbb393e3854e2ecb2d818fe8be2356b162da7199b552bb084193eb9b47972" alt="image.png"></p>
<p>&#x53CD;&#x4E4B;&#xFF0C;&#x5982;&#x679C;<strong>&#x5B66;&#x4E60;&#x7387;&#x592A;&#x9AD8;</strong>&#xFF0C;&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x7B97;&#x6CD5;&#x53D1;&#x6563;&#xFF0C;&#x503C;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x6700;&#x540E;&#x65E0;&#x6CD5;&#x627E;&#x5230;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/431ca69dc48b55473006396b3658a6a9dca87275320c0ec9d2e4288ae8005141" alt="image.png"></p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684;&#x6210;&#x672C;&#x51FD;&#x6570;&#x770B;&#x8D77;&#x6765;&#x90FD;&#x50CF;&#x4E00;&#x4E2A;&#x6F02;&#x4EAE;&#x7684;&#x7897;&#x3002;&#x6709;&#x7684;&#x53EF;&#x80FD;&#x770B;&#x7740;&#x50CF;&#x6D1E;&#x3001;&#x50CF;&#x5C71;&#x8109;&#x3001;&#x50CF;&#x9AD8;&#x539F;&#x6216;&#x8005;&#x662F;&#x5404;&#x79CD;&#x4E0D;&#x89C4;&#x5219;&#x7684;&#x5730;&#x5F62;&#xFF0C;&#x5BFC;&#x81F4;&#x5F88;&#x96BE;&#x6536;&#x655B;&#x5230;&#x6700;&#x5C0F;&#x503C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/fb5c9ab75ad5e6abe82decc98f4a6c432fa71266d71bb3395d49eb8b9b159ecc" alt="image.png"></p>
<p>&#x5982;&#x679C;&#x968F;&#x673A;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x7B97;&#x6CD5;&#x4ECE;&#x5DE6;&#x4FA7;&#x8D77;&#x6B65;&#xFF0C;&#x90A3;&#x4E48;&#x4F1A;&#x6536;&#x655B;&#x5230;&#x4E00;&#x4E2A;&#x5C40;&#x90E8;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5168;&#x5C40;&#x6700;&#x5C0F;&#x503C;&#x3002;&#x5982;&#x679C;&#x4ECE;&#x53F3;&#x4FA7;&#x8D77;&#x6B65;&#xFF0C;&#x90A3;&#x4E48;&#x9700;&#x8981;&#x7ECF;&#x8FC7;&#x5F88;&#x957F;&#x65F6;&#x95F4;&#x624D;&#x80FD;&#x8D8A;&#x8FC7;&#x6574;&#x7247;&#x9AD8;&#x539F;&#xFF0C;&#x5982;&#x679C;&#x505C;&#x4E0B;&#x6765;&#x592A;&#x65E9;&#xFF0C;&#x5C06;&#x6C38;&#x8FDC;&#x8FBE;&#x4E0D;&#x5230;&#x5168;&#x5C40;&#x6700;&#x5C0F;&#x503C;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5BF9;&#x4E8E;&#x5B66;&#x4E60;&#x7387;&#x7684;&#x8BBE;&#x7F6E;&#x663E;&#x5F97;&#x5C24;&#x4E3A;&#x91CD;&#x8981;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x770B;&#x770B;&#x4E0D;&#x540C;&#x7684;&#x5B66;&#x4E60;&#x7387;&#x6240;&#x5E26;&#x6765;&#x7684;&#x5F71;&#x54CD;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def plot_gradient_descent(theta, eta, theta_path=None):</span><br><span class="line">    m = len(X_b)</span><br><span class="line">    plt.plot(X, y, &quot;b.&quot;)</span><br><span class="line">    for i in range(max_iters):</span><br><span class="line">        if i &lt; 10:</span><br><span class="line">            y_predict = X_new_b.dot(theta)</span><br><span class="line">            style = &quot;g-&quot; if i &gt; 0 else &quot;r--&quot;</span><br><span class="line">            plt.plot(X_new, y_predict, style)</span><br><span class="line">        gradients = 2/m * X_b.T.dot(X_b.dot(theta) - y)</span><br><span class="line">        theta = theta - eta * gradients</span><br><span class="line">        if theta_path is not None:</span><br><span class="line">            theta_path.append(theta)</span><br><span class="line">    plt.xlabel(&quot;$X$&quot;, fontsize=18)</span><br><span class="line">    plt.title(r&quot;$\eta = {}$&quot;.format(eta), fontsize=16)</span><br></pre></td></tr></table></figure>

<p>&#x7ED8;&#x5236;&#x4E86;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x524D;&#x5341;&#x6B65;&#xFF0C;&#x865A;&#x7EBF;&#x8868;&#x793A;&#x8D77;&#x70B9;&#xFF0C;&#x3B7;\eta&#x3B7; &#x8868;&#x793A;&#x4E3A;&#x5B66;&#x4E60;&#x7387;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a207919390f58d07314050f6a283cfc292738b9049ae7863a8b645cec4ba9e72" alt="image.png"></p>
<p>&#x5F97;&#x51FA;&#x7ED3;&#x8BBA;&#xFF1A;</p>
<ul>
<li>&#x5DE6;&#x56FE;&#xFF1A;&#x5728;&#x524D;&#x5341;&#x6B65;&#x65E0;&#x6CD5;&#x627E;&#x5230;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x8981;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x8FED;&#x4EE3;&#x5C31;&#x4E00;&#x5B9A;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1B;</li>
<li>&#x4E2D;&#x56FE;&#xFF1A;&#x6548;&#x679C;&#x770B;&#x8D77;&#x6765;&#x4E0D;&#x9519;&#xFF0C;&#x6BD4;&#x8F83;&#x7B26;&#x5408;&#x9884;&#x671F;&#xFF0C;&#x51E0;&#x6B21;&#x8FED;&#x4EE3;&#x5C31;&#x6536;&#x655B;&#x51FA;&#x4E86;&#x6700;&#x7EC8;&#x89E3;&#xFF1B;</li>
<li>&#x53F3;&#x56FE;&#xFF1A;&#x7B97;&#x6CD5;&#x53D1;&#x6563;&#xFF0C;&#x76F4;&#x63A5;&#x8DF3;&#x8FC7;&#x4E86;&#x6570;&#x636E;&#x533A;&#x57DF;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E00;&#x6B65;&#x90FD;&#x79BB;&#x5B9E;&#x9645;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x8D8A;&#x6765;&#x8D8A;&#x8FDC;&#xFF1B;</li>
</ul>
<p>&#x8981;&#x627E;&#x5230;&#x5408;&#x9002;&#x7684;&#x5B66;&#x4E60;&#x7387;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x641C;&#x7D22;&#x3002;&#x4F46;&#x662F;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x9650;&#x5236;&#x8FED;&#x4EE3;&#x6B21;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x7F51;&#x7EDC;&#x641C;&#x7D22;&#x5C31;&#x53EF;&#x4EE5;&#x6DD8;&#x6C70;&#x6389;&#x90A3;&#x4E9B;&#x6536;&#x655B;&#x8017;&#x65F6;&#x592A;&#x957F;&#x7684;&#x6A21;&#x578B;&#x3002;</p>
<p>&#x7136;&#x800C;&#x600E;&#x4E48;&#x9650;&#x5236;&#x8FED;&#x4EE3;&#x6B21;&#x6570;&#x5462;&#xFF1F;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x592A;&#x4F4E;&#xFF0C;&#x7B97;&#x6CD5;&#x53EF;&#x80FD;&#x5728;&#x79BB;&#x6700;&#x4F18;&#x89E3;&#x8FD8;&#x5F88;&#x8FDC;&#x65F6;&#x5C31;&#x505C;&#x6B62;&#x4E86;&#xFF1B;&#x4F46;&#x662F;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x5F97;&#x592A;&#x9AD8;&#xFF0C;&#x6A21;&#x578B;&#x5230;&#x8FBE;&#x6700;&#x4F18;&#x89E3;&#x540E;&#xFF0C;&#x7EE7;&#x7EED;&#x8FED;&#x4EE3;&#x53C2;&#x6570;&#x4E0D;&#x518D;&#x53D8;&#x5316;&#xFF0C;&#x53C8;&#x4F1A;&#x6D6A;&#x8D39;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x5F00;&#x59CB;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5927;&#x7684;&#x8FED;&#x4EE3;&#x6B21;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x5F53;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x7684;&#x503C;&#x53D8;&#x5F97;&#x5F88;&#x5FAE;&#x5C0F;&#x65F6;&#x4E2D;&#x65AD;&#x7B97;&#x6CD5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5F53;&#x4ED6;&#x7684;&#x8303;&#x6570;&#x53D8;&#x5F97;&#x4F4E;&#x4E8E; &#x3B5;\varepsilon&#x3B5;&#xFF08;&#x79F0;&#x4E3A;&#x5BB9;&#x5DEE;&#xFF09;&#x65F6;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x662F;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x5DF2;&#x7ECF;&#xFF08;&#x51E0;&#x4E4E;&#xFF09;&#x5230;&#x8FBE;&#x4E86;&#x6700;&#x5C0F;&#x503C;&#x3002;</p>
<blockquote>
<p><strong>&#x6536;&#x655B;&#x7387;</strong>&#xFF1A;&#x5F53;&#x6210;&#x672C;&#x51FD;&#x6570;&#x4E3A;&#x51F8;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x4E14;&#x659C;&#x7387;&#x6CA1;&#x6709;&#x9661;&#x5CED;&#x7684;&#x53D8;&#x5316;&#x65F6;&#xFF08;&#x5982; MSE &#x6210;&#x672C;&#x51FD;&#x6570;&#xFF09;&#xFF0C;&#x901A;&#x8FC7;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x5B66;&#x4E60;&#x7387;&#x6709;&#x4E00;&#x4E2A;&#x6536;&#x655B;&#x7387;&#xFF0C;&#x4E3A; O(1&#x8FED;&#x4EE3;&#x6B21;&#x6570;)O(\frac{1}{&#x8FED;&#x4EE3;&#x6B21;&#x6570;})O(&#x8FED;&#x4EE3;&#x6B21;&#x6570;1)&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x5C06;&#x5BB9;&#x5DEE; &#x3B5;\varepsilon&#x3B5; &#x7F29;&#x5C0F;&#x4E3A;&#x539F;&#x6765;&#x7684; 110\frac{1}{10}101&#xFF08;&#x4EE5;&#x5F97;&#x5230;&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x89E3;&#xFF09;&#xFF0C;&#x7B97;&#x6CD5;&#x5C06;&#x4E0D;&#x5F97;&#x4E0D;&#x8FD0;&#x884C; 10 &#x500D;&#x7684;&#x8FED;&#x4EE3;&#x6B21;&#x6570;&#x3002;</p>
</blockquote>
<h1 id="&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-BGD"><a href="#&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-BGD" class="headerlink" title="&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; BGD"></a>&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; BGD</h1><p>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x6700;&#x5E38;&#x7528;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5177;&#x4F53;&#x505A;&#x6CD5;&#x4E5F;&#x5C31;&#x662F;&#x5728;&#x66F4;&#x65B0;&#x53C2;&#x6570;&#x65F6;&#x4F7F;&#x7528;&#x6240;&#x6709;&#x7684;&#x6837;&#x672C;&#x6765;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF1B;</p>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;&#x2211;j=0m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;&#x2211;_{j=0}^m(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;j=0&#x2211;m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)</p>
<ul>
<li>&#x4F18;&#x70B9;&#xFF1A;&#x5168;&#x5C40;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x6613;&#x4E8E;&#x5E76;&#x884C;&#x5B9E;&#x73B0;&#xFF1B;</li>
<li>&#x7F3A;&#x70B9;&#xFF1A;&#x8BA1;&#x7B97;&#x4EE3;&#x4EF7;&#x5927;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x5927;&#x65F6;&#xFF0C;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x6162;&#xFF1B;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/650a40befed4551f3ddc1cfb49071784eb894576d3b34b490e871ea8b5f7a763" alt="image.png"></p>
<p>&#x8981;&#x5B9E;&#x73B0;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x9700;&#x8981;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x6A21;&#x578B;&#x5173;&#x4E8E;&#x53C2;&#x6570; &#x3B8;j\theta_j&#x3B8;j &#x7684;&#x6210;&#x672C;&#x51FD;&#x6570;&#x7684;&#x68AF;&#x5EA6;&#x3002;&#x6362;&#x8A00;&#x4E4B;&#xFF0C;&#x9700;&#x8981;&#x8BA1;&#x7B97;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x6539;&#x53D8; &#x3B8;j\theta_j&#x3B8;j&#xFF0C;&#x6210;&#x672C;&#x51FD;&#x6570;&#x4F1A;&#x6539;&#x53D8;&#x591A;&#x5C11;&#xFF0C;&#x5373;<strong>&#x504F;&#x5BFC;&#x6570;</strong>&#x3002;&#x4EE5;&#x7EBF;&#x6027;&#x56DE;&#x5F52;&#x7684;&#x6210;&#x672C;&#x51FD;&#x6570; MSEMSEMSE &#x4E3A;&#x4F8B;&#xFF0C;&#x5176;&#x504F;&#x5BFC;&#x6570;&#x4E3A;&#xFF1A;</p>
<p>&#x2202;&#x2202;&#x3B8;jMSE(&#x3B8;)=&#x2202;&#x2202;&#x3B8;j(1m&#x2211;i=1m(&#x3B8;T&#x22C5;X(i)&#x2212;y(i))2)=2m&#x2211;i=1m(&#x3B8;T&#x22C5;x(i)&#x2212;y(i))xj(i)\frac{&#x2202;}{&#x2202;&#x3B8;_j} MSE(&#x3B8;) = \frac{&#x2202;}{&#x2202;&#x3B8;_j}(\frac{1}{m}&#x2211;_{i=1}^m(&#x3B8;^T&#x22C5;X^{(i)}&#x2212;y^{(i)})^2) \<br>\quad\quad\quad\quad<br>= \frac{2}{m}&#x2211;_{i=1}^m(&#x3B8;^T&#x22C5;x^{(i)}&#x2212;y^{(i)})x^{(i)}_j&#x2202;&#x3B8;j&#x2202;MSE(&#x3B8;)=&#x2202;&#x3B8;j&#x2202;(m1i=1&#x2211;m(&#x3B8;T&#x22C5;X(i)&#x2212;y(i))2)=m2i=1&#x2211;m(&#x3B8;T&#x22C5;x(i)&#x2212;y(i))xj(i)<br>&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x5355;&#x72EC;&#x8BA1;&#x7B97;&#x8FD9;&#x4E9B;&#x68AF;&#x5EA6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x516C;&#x5F0F;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6027;&#x8BA1;&#x7B97;&#x3002;&#x68AF;&#x5EA6;&#x5411;&#x91CF; &#x2207;&#x3B8;MSE(&#x3B8;)\nabla_\theta MSE(\theta)&#x2207;&#x3B8;MSE(&#x3B8;)&#xFF0C;&#x5305;&#x542B;&#x6240;&#x6709;&#x6210;&#x672C;&#x51FD;&#x6570;&#xFF08;&#x6BCF;&#x4E2A;&#x6A21;&#x578B;&#x53C2;&#x6570;&#x4E00;&#x4E2A;&#xFF09;&#x7684;&#x504F;&#x5BFC;&#x6570;&#x3002;</p>
<p>&#x2207;&#x3B8;MSE(&#x3B8;)=(&#x2202;&#x2202;&#x3B8;0MSE(&#x3B8;)&#x2202;&#x2202;&#x3B8;1MSE(&#x3B8;)&#x22EE;&#x2202;&#x2202;&#x3B8;nMSE(&#x3B8;))=2mXT&#x22C5;(X&#x22C5;&#x3B8;&#x2212;y)&#x2207;_&#x3B8;MSE(&#x3B8;)=<br>\begin{pmatrix}<br>\frac{&#x2202;}{&#x2202;&#x3B8;_0} MSE(&#x3B8;) \<br>\frac{&#x2202;}{&#x2202;&#x3B8;_1} MSE(&#x3B8;) \<br>\vdots \<br>\frac{&#x2202;}{&#x2202;&#x3B8;_n} MSE(&#x3B8;)<br>\end{pmatrix}<br>=\frac{2}{m}X^T&#x22C5;(X&#x22C5;&#x3B8;-y)&#x2207;&#x3B8;MSE(&#x3B8;)=&#x239D;&#x239B;&#x2202;&#x3B8;0&#x2202;MSE(&#x3B8;)&#x2202;&#x3B8;1&#x2202;MSE(&#x3B8;)&#x22EE;&#x2202;&#x3B8;n&#x2202;MSE(&#x3B8;)&#x23A0;&#x239E;=m2XT&#x22C5;(X&#x22C5;&#x3B8;&#x2212;y)<br><strong>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF1A;</strong></p>
<p>1&#x3001;&#x968F;&#x673A;&#x521D;&#x59CB;&#x5316;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;X = 2 * np.random.rand(100, 1)</span><br><span class="line">y = 21 + 5 * X + np.random.randn(100, 1)</span><br><span class="line">X_b = np.c_[np.ones((100, 1)), X]</span><br></pre></td></tr></table></figure>

<p>2&#x3001;&#x8BBE;&#x7F6E;&#x5404;&#x53C2;&#x6570;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;m = 100</span><br><span class="line">eta = 0.1</span><br><span class="line">n_epochs = 1000</span><br><span class="line">theta = np.random.randn(2,1)</span><br></pre></td></tr></table></figure>

<p>3&#x3001;<code>BGD</code> &#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;for epoch in range(n_epochs):</span><br><span class="line">    gradients = 2/m * X_b.T.dot(X_b.dot(theta) - y)</span><br><span class="line">    theta = theta - eta * gradients</span><br><span class="line">print(&apos;theta:\n{}\n&apos;.format(theta))</span><br></pre></td></tr></table></figure>

<p>4&#x3001;&#x7ED8;&#x5236;&#x56FE;&#x50CF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;X_new = np.array([[0], [2]])</span><br><span class="line">X_new_b = np.c_[np.ones((2, 1)), X_new]</span><br><span class="line">y_predict = X_new_b.dot(theta)</span><br><span class="line"></span><br><span class="line">plt.title(f&quot;$\eta = {0.1}$&quot;)</span><br><span class="line">plt.plot(X_new, y_predict, &quot;r-&quot;)</span><br><span class="line">plt.plot(X, y, &quot;b.&quot;)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/612ce51e5fb8e8a47cf92dedb67e861900e00e376f3bef726bb380de2066f868" alt="image.png"></p>
<p>&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7531;&#x4E8E;&#x4F7F;&#x7528;&#x4E86;&#x5168;&#x90E8;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x8BAD;&#x7EC3;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x635F;&#x5931;&#x51FD;&#x6570;&#x662F;&#x51F8;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x5168;&#x5C40;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x4F46;&#x5F53;&#x8BAD;&#x7EC3;&#x6837;&#x672C;&#x5F88;&#x5927;&#x65F6;&#xFF0C;&#x5176;&#x8BAD;&#x7EC3;&#x901F;&#x5EA6;&#x4F1A;&#x975E;&#x5E38;&#x6162;&#xFF0C;&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x5728;&#x7EBF;&#x5B66;&#x4E60;&#x7684;&#x4E00;&#x4E9B;&#x9879;&#x76EE;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x88AB;&#x63D0;&#x51FA;&#x3002;</p>
<h1 id="&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-SGD"><a href="#&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-SGD" class="headerlink" title="&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; SGD"></a>&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; SGD</h1><p>&#x548C;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x539F;&#x7406;&#x7C7B;&#x4F3C;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x6C42;&#x68AF;&#x5EA6;&#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x7528;&#x6240;&#x6709;&#x7684; mmm &#x4E2A;&#x6837;&#x672C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x4EC5;&#x4EC5;&#x9009;&#x53D6;&#x4E00;&#x4E2A;&#x6837;&#x672C; jjj &#x6765;&#x6C42;&#x68AF;&#x5EA6;&#xFF1B;</p>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)</p>
<ul>
<li>&#x4F18;&#x70B9;&#xFF1A;&#x8BAD;&#x7EC3;&#x901F;&#x5EA6;&#x5FEB;&#xFF1B;</li>
<li>&#x7F3A;&#x70B9;&#xFF1A;&#x51C6;&#x786E;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5168;&#x5C40;&#x6700;&#x4F18;&#xFF0C;&#x4E0D;&#x6613;&#x4E8E;&#x5E76;&#x884C;&#x5B9E;&#x73B0;&#xFF1B;</li>
</ul>
<p>&#x7531;&#x4E8E;&#x7B97;&#x6CD5;&#x7684;&#x968F;&#x673A;&#x6027;&#x8D28;&#xFF0C;&#x5B83;&#x6BD4;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x8981;&#x4E0D;&#x89C4;&#x5219;&#x5F97;&#x591A;&#x3002;&#x6210;&#x672C;&#x51FD;&#x6570;&#x5C06;&#x4E0D;&#x518D;&#x662F;&#x7F13;&#x7F13;&#x964D;&#x4F4E;&#x76F4;&#x5230;&#x62B5;&#x8FBE;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x800C;&#x662F;&#x4E0D;&#x65AD;&#x4E0A;&#x4E0A;&#x4E0B;&#x4E0B;&#xFF0C;&#x4F46;&#x662F;&#x4ECE;&#x6574;&#x4F53;&#x6765;&#x770B;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x6162;&#x6162;&#x4E0B;&#x964D;&#x3002;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x7684;&#x63A8;&#x79FB;&#xFF0C;&#x6700;&#x7EC8;&#x4F1A;&#x975E;&#x5E38;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x5373;&#x4F7F;&#x5B83;&#x5230;&#x8FBE;&#x4E86;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x4F9D;&#x7136;&#x8FD8;&#x4F1A;&#x6301;&#x7EED;&#x53CD;&#x5F39;&#xFF0C;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x505C;&#x6B62;&#x3002;&#x6240;&#x4EE5;&#x7B97;&#x6CD5;&#x505C;&#x4E0B;&#x6765;&#x7684;&#x53C2;&#x6570;&#x503C;&#x80AF;&#x5B9A;&#x662F;&#x8DB3;&#x591F;&#x597D;&#x7684;&#xFF0C;&#x4F46;&#x4E0D;&#x662F;&#x6700;&#x4F18;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/d34dc65651327a3c8e0a615381a6189699e623cfcc83ac5050af9308a80204e3" alt="image.png"></p>
<p>&#x5F53;&#x6210;&#x672C;&#x51FD;&#x6570;&#x975E;&#x5E38;&#x4E0D;&#x89C4;&#x5219;&#x65F6;&#xFF0C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x7B97;&#x6CD5;&#x8DF3;&#x51FA;&#x5C40;&#x90E8;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x6240;&#x4EE5; <em>&#x76F8;&#x6BD4;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x5B83;&#x5BF9;&#x627E;&#x5230;&#x5168;&#x5C40;&#x6700;&#x5C0F;&#x503C;&#x66F4;&#x6709;&#x4F18;&#x52BF;</em> &#x3002;</p>
<p>&#x56E0;&#x4E3A;&#xFF0C;<strong><em>&#x968F;&#x673A;&#x6027;&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x53EF;&#x4EE5;&#x9003;&#x79BB;&#x5C40;&#x90E8;&#x6700;&#x4F18;&#xFF0C;&#x4F46;&#x7F3A;&#x70B9;&#x662F;&#x6C38;&#x8FDC;&#x5B9A;&#x4F4D;&#x4E0D;&#x51FA;&#x6700;&#x5C0F;&#x503C;&#x3002;</em></strong> &#x8981;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x56F0;&#x5883;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x529E;&#x6CD5;&#x662F;&#x9010;&#x6B65;&#x964D;&#x4F4E;&#x5B66;&#x4E60;&#x7387;&#x3002;&#x5F00;&#x59CB;&#x7684;&#x6B65;&#x957F;&#x6BD4;&#x8F83;&#x5927;&#xFF08;&#x8FD9;&#x6709;&#x52A9;&#x4E8E;&#x5FEB;&#x901F;&#x8FDB;&#x5C55;&#x548C;&#x9003;&#x79BB;&#x5C40;&#x90E8;&#x6700;&#x5C0F;&#x503C;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x8D8A;&#x6765;&#x8D8A;&#x5C0F;&#xFF0C;&#x8BA9;&#x7B97;&#x6CD5;&#x5C3D;&#x91CF;&#x9760;&#x8FD1;&#x5168;&#x5C40;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x53EB;&#x505A;<strong>&#x6A21;&#x62DF;&#x9000;&#x706B;</strong>&#xFF1A;&#x56E0;&#x4E3A;&#x5B83;&#x7C7B;&#x4F3C;&#x4E8E;&#x51B6;&#x91D1;&#x65F6;&#x878D;&#x5316;&#x7684;&#x91D1;&#x5C5E;&#x6162;&#x6162;&#x51B7;&#x5374;&#x7684;&#x9000;&#x706B;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;&#x8FED;&#x4EE3;&#x5B66;&#x4E60;&#x7387;&#x7684;&#x51FD;&#x6570;&#x53EB;&#x4F5C;<strong>&#x5B66;&#x4E60;&#x8BA1;&#x5212;</strong>&#x3002;&#x5982;&#x679C;&#x5B66;&#x4E60;&#x7387;&#x964D;&#x5F97;&#x592A;&#x5FEB;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x9677;&#x5165;&#x5C40;&#x90E8;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x505C;&#x7559;&#x5728;&#x8D70;&#x5411;&#x6700;&#x5C0F;&#x503C;&#x7684;&#x534A;&#x9014;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x5B66;&#x4E60;&#x7387;&#x592A;&#x6162;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x592A;&#x957F;&#x65F6;&#x95F4;&#x592A;&#x80FD;&#x8DF3;&#x5230;&#x5DEE;&#x4E0D;&#x591A;&#x6700;&#x5C0F;&#x503C;&#x9644;&#x8FD1;&#xFF0C;&#x5982;&#x679C;&#x63D0;&#x65E9;&#x7ED3;&#x675F;&#x8BAD;&#x7EC3;&#xFF0C;&#x53EF;&#x80FD;&#x53EA;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x6B21;&#x4F18;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<p><strong>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF1A;</strong></p>
<p>1&#x3001;&#x521D;&#x59CB;&#x5316;&#x8FC7;&#x7A0B;&#x540C;&#x4E0A;&#xFF1B;</p>
<p>2&#x3001;<code>SGD</code> &#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#xFF1A;</p>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8BAD;&#x7EC3;&#x901F;&#x5EA6;&#x8FC7;&#x6162;&#xFF0C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x5728;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x4E2D;&#x6BCF;&#x6B21;&#x4EC5;&#x9488;&#x5BF9;&#x4E00;&#x4E2A;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x8BAD;&#x7EC3;&#xFF0C;&#x4F46;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x66F4;&#x65B0;&#x3002;&#x5728;&#x6BCF;&#x4E00;&#x8F6E;&#x65B0;&#x7684;&#x66F4;&#x65B0;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x6570;&#x636E;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x91CD;&#x65B0;&#x6D17;&#x724C;&#xFF08;shuffle&#xFF09;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;for epoch in range(n_epochs):</span><br><span class="line">    # &#x6BCF;&#x4E2A;&#x8F6E;&#x6B21;&#x5F00;&#x59CB;&#x5206;&#x6279;&#x6B21;&#x8FED;&#x4EE3;&#x4E4B;&#x524D;&#x6253;&#x4E71;&#x6570;&#x636E;&#x7D22;&#x5F15;&#x987A;&#x5E8F;</span><br><span class="line">    arr = np.arange(len(X_b))</span><br><span class="line">    np.random.shuffle(arr)</span><br><span class="line">    X_b = X_b[arr]</span><br><span class="line">    y = y[arr]</span><br><span class="line">    for i in range(m):</span><br><span class="line">        xi = X_b[i:i+1]</span><br><span class="line">        yi = y[i:i+1]</span><br><span class="line">        gradients = xi.T.dot(xi.dot(theta)-yi)</span><br><span class="line">        theta = theta - eta * gradients</span><br><span class="line"></span><br><span class="line">print(&apos;theta:\n{}\n&apos;.format(theta))</span><br></pre></td></tr></table></figure>

<p>3&#x3001;&#x7ED8;&#x5236;&#x56FE;&#x50CF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x5728;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x6BB5;&#x5185;&#x90E8;&#x52A0;&#x5165;</span><br><span class="line">for i in range(m):</span><br><span class="line">    xi = X_b[i:i+1]</span><br><span class="line">    yi = y[i:i+1]</span><br><span class="line">    gradients = xi.T.dot(xi.dot(theta)-yi)</span><br><span class="line">    theta = theta - eta * gradients</span><br><span class="line">    if epoch == 0 and i % 5 == 0:   </span><br><span class="line">        y_predict = X_new_b.dot(theta)           </span><br><span class="line">        style = &quot;m--&quot; if i &gt; 0 else &quot;r--&quot;         </span><br><span class="line">        plt.plot(X_new, y_predict, style) </span><br><span class="line">    if epoch == 1 and i % 5 == 0:   </span><br><span class="line">        y_predict = X_new_b.dot(theta)           </span><br><span class="line">        style = &quot;g--&quot; if i &gt; 0 else &quot;r--&quot;         </span><br><span class="line">        plt.plot(X_new, y_predict, style) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">X_new = np.array([[0], [2]])</span><br><span class="line">X_new_b = np.c_[np.ones((2, 1)), X_new]</span><br><span class="line">y_predict = X_new_b.dot(theta)</span><br><span class="line"></span><br><span class="line">plt.title(f&quot;$\eta = {0.1}$&quot;)</span><br><span class="line">plt.plot(X_new, y_predict, &quot;k-&quot;)</span><br><span class="line">plt.plot(X, y, &quot;b.&quot;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/55c984df9c809c7d9506c507e3b38885b0dff1210d608687b78123ef2d9c54f6" alt="image.png"></p>
<p>&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x5728;&#x66F4;&#x65B0;&#x8FC7;&#x7A0B;&#x4E2D;&#x7531;&#x4E8E;&#x662F;&#x9488;&#x5BF9;&#x5355;&#x4E2A;&#x6837;&#x672C;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x8FED;&#x4EE3;&#x7684;&#x65B9;&#x5411;&#x6709;&#x65F6;&#x5019;&#x5E76;&#x4E0D;&#x662F;&#x6574;&#x4F53;&#x6700;&#x4F18;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x540C;&#x65F6;&#x5176;&#x65B9;&#x5DEE;&#x8F83;&#x5927;&#xFF0C;&#x5BFC;&#x81F4;&#x635F;&#x5931;&#x51FD;&#x6570;&#x503C;&#x7684;&#x53D8;&#x52A8;&#x5E76;&#x4E0D;&#x662F;&#x89C4;&#x5F8B;&#x7684;&#x9012;&#x51CF;&#xFF0C;&#x66F4;&#x591A;&#x7684;&#x60C5;&#x51B5;&#x53EF;&#x80FD;&#x662F;&#x6CE2;&#x52A8;&#x5F62;&#x72B6;&#x7684;&#x4E0B;&#x964D;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x901F;&#x5EA6;&#x592A;&#x6162;&#x4EE5;&#x53CA;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x65B9;&#x5DEE;&#x53D8;&#x52A8;&#x8FC7;&#x5927;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x79CD;&#x6298;&#x4E2D;&#x7684;&#x7B97;&#x6CD5;&#x2013;&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x88AB;&#x63D0;&#x51FA;&#xFF0C;&#x5176;&#x4ECE;&#x5168;&#x90E8;&#x6837;&#x672C;&#x4E2D;&#x9009;&#x53D6;&#x90E8;&#x5206;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#x8BAD;&#x7EC3;&#x3002;&#x5E76;&#x4E14;&#x5728;&#x6BCF;&#x4E00;&#x8F6E;&#x65B0;&#x7684;&#x8FED;&#x4EE3;&#x5F00;&#x59CB;&#x4E4B;&#x524D;&#xFF0C;&#x5BF9;&#x5168;&#x90E8;&#x6837;&#x672C;&#x8FDB;&#x884C; Shuffle &#x5904;&#x7406;&#x3002;</p>
<h1 id="&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-MBGD"><a href="#&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;-MBGD" class="headerlink" title="&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; MBGD"></a>&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D; MBGD</h1><p>&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x662F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x548C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x6298;&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5BF9;&#x4E8E; mmm &#x4E2A;&#x6837;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x91C7;&#x7528; xxx &#x4E2A;&#x6837;&#x672C;&#x6765;&#x8FED;&#x4EE3;&#xFF0C;1&lt;x&lt;m1&lt;x&lt;m1&lt;x&lt;m&#x3002;&#x4E00;&#x822C;&#x53EF;&#x4EE5;&#x53D6; x=10x=10x=10&#xFF0C;&#x5F53;&#x7136;&#x6839;&#x636E;&#x6837;&#x672C;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x8FD9;&#x4E2A; xxx &#x7684;&#x503C;&#xFF1B;</p>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;&#x2211;j=tt+x&#x2212;1(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;&#x2211;_{j=t}^{t+x-1}(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;j=t&#x2211;t+x&#x2212;1(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)<br>&#x76F8;&#x5BF9;&#x4E8E;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF0C;&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x964D;&#x4F4E;&#x4E86;&#x6536;&#x655B;&#x6CE2;&#x52A8;&#x6027;&#xFF0C; &#x5373;&#x964D;&#x4F4E;&#x4E86;&#x53C2;&#x6570;&#x66F4;&#x65B0;&#x7684;&#x65B9;&#x5DEE;&#xFF0C;&#x4F7F;&#x5F97;&#x66F4;&#x65B0;&#x66F4;&#x52A0;&#x7A33;&#x5B9A;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x5168;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x5176;&#x63D0;&#x9AD8;&#x4E86;&#x6BCF;&#x6B21;&#x5B66;&#x4E60;&#x7684;&#x901F;&#x5EA6;&#x3002;&#x5E76;&#x4E14;&#x5176;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x5185;&#x5B58;&#x74F6;&#x9888;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x77E9;&#x9635;&#x8FD0;&#x7B97;&#x8FDB;&#x884C;&#x9AD8;&#x6548;&#x8BA1;&#x7B97;&#x3002;&#x4E00;&#x822C;&#x800C;&#x8A00;&#x6BCF;&#x6B21;&#x66F4;&#x65B0;&#x968F; &#x673A;&#x9009;&#x62E9;[50,256]&#x4E2A;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x8981;&#x6839;&#x636E;&#x5177;&#x4F53;&#x95EE;&#x9898;&#x800C;&#x9009;&#x62E9;&#xFF0C;&#x5B9E;&#x8DF5;&#x4E2D;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x591A;&#x6B21;&#x8BD5;&#x9A8C;&#xFF0C; &#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x66F4;&#x65B0;&#x901F;&#x5EA6;&#x4E0E;&#x66F4;&#x6B21;&#x6B21;&#x6570;&#x90FD;&#x8F83;&#x9002;&#x5408;&#x7684;&#x6837;&#x672C;&#x6570;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/159be1730543954c580824a9f8c4c35ab93c7e8d5c2831a4f15f0fbcd59baf40" alt="image.png"></p>
<p><strong>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF1A;</strong></p>
<p>1&#x3001;&#x521D;&#x59CB;&#x5316;&#x8FC7;&#x7A0B;&#x540C;&#x4E0A;&#xFF1B;</p>
<p>2&#x3001;&#x52A8;&#x6001;&#x8C03;&#x6574;&#x5B66;&#x4E60;&#x7387;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;t0, t1 = 5, 500</span><br><span class="line">def learning_rate_schedule(t):</span><br><span class="line">    return t0 / (t + t1)</span><br></pre></td></tr></table></figure>

<p>3&#x3001;<code>MBGD</code> &#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;theta = np.random.randn(2,1)</span><br><span class="line">for epoch in range(n_epochs):</span><br><span class="line">    arr = np.arange(len(X_b))</span><br><span class="line">    np.random.shuffle(arr)</span><br><span class="line">    X_b = X_b[arr]</span><br><span class="line">    y = y[arr]</span><br><span class="line">    for i in range(n_batches):</span><br><span class="line">        x_batch = X_b[i * batch: i * batch + batch]</span><br><span class="line">        y_batch = y[i * batch: i * batch + batch]</span><br><span class="line">        gradients = x_batch.T.dot(x_batch.dot(theta)-y_batch)</span><br><span class="line">        eta = learning_rate_schedule(epoch * m + i)</span><br><span class="line">        theta = theta - eta * gradients</span><br><span class="line">        </span><br><span class="line">print(&apos;theta:\n{}\n&apos;.format(theta))</span><br></pre></td></tr></table></figure>

<p>4&#x3001;&#x7ED8;&#x5236;&#x56FE;&#x50CF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x5728;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x6BB5;&#x5185;&#x90E8;&#x52A0;&#x5165;</span><br><span class="line">for i in range(n_batches):</span><br><span class="line">    x_batch = X_b[i * batch: i * batch + batch]</span><br><span class="line">    y_batch = y[i * batch: i * batch + batch]</span><br><span class="line">    gradients = x_batch.T.dot(x_batch.dot(theta)-y_batch)</span><br><span class="line">    eta = learning_rate_schedule(epoch * m + i)</span><br><span class="line">    theta = theta - eta * gradients</span><br><span class="line">    if epoch == 0 and i &lt; 5:   </span><br><span class="line">        y_predict = X_new_b.dot(theta)           </span><br><span class="line">        style = &quot;m--&quot; if i &gt; 0 else &quot;r--&quot;         </span><br><span class="line">        plt.plot(X_new, y_predict, style) </span><br><span class="line">    if epoch == 1 and i &lt; 5:   </span><br><span class="line">        y_predict = X_new_b.dot(theta)           </span><br><span class="line">        style = &quot;g--&quot; if i &gt; 0 else &quot;r--&quot;         </span><br><span class="line">        plt.plot(X_new, y_predict, style) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">X_new = np.array([[0], [2]])</span><br><span class="line">X_new_b = np.c_[np.ones((2, 1)), X_new]</span><br><span class="line">y_predict = X_new_b.dot(theta)</span><br><span class="line"></span><br><span class="line">plt.title(f&quot;$\eta = {0.1}$&quot;)</span><br><span class="line">plt.plot(X_new, y_predict, &quot;k-&quot;)</span><br><span class="line">plt.plot(X, y, &quot;b.&quot;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/40ff35951682fa2def4f88d5acf3dccc74a501716c01d12212853ce790c066f6" alt="image.png"></p>
<h1 id="&#x540E;&#x8BB0;"><a href="#&#x540E;&#x8BB0;" class="headerlink" title="&#x540E;&#x8BB0;"></a>&#x540E;&#x8BB0;</h1><p>&#x4EE5;&#x4E0A;&#x4E09;&#x79CD;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x4EC5;&#x5C40;&#x9650;&#x4E8E;&#x5BF9;&#x8BAD;&#x7EC3;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x53D8;&#x66F4;&#xFF0C;&#x4E14;&#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x66F4;&#x65B0;&#x6743;&#x91CD;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x68AF;&#x5EA6;&#x4EC5;&#x4F5C;&#x7528;&#x4E8E;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x3002;&#x7531;&#x4E8E;&#x6BCF;&#x4E00;&#x671F;&#x7684;&#x6837;&#x672C;&#x6709;&#x597D;&#x6709;&#x574F;&#xFF0C;&#x5BFC;&#x81F4;&#x8FED;&#x4EE3;&#x8FC7;&#x7A0B;&#x662F;&#x66F2;&#x6298;&#x6CE2;&#x52A8;&#x7684;&#xFF0C;&#x5F71;&#x54CD;&#x4E86;&#x6536;&#x655B;&#x901F;&#x5EA6;&#x3002;</p>
<p>&#x4E0B;&#x56FE;&#x663E;&#x793A;&#x4E86;&#x8BAD;&#x7EC3;&#x671F;&#x95F4;&#x53C2;&#x6570;&#x7A7A;&#x95F4;&#x4E2D;&#x4E09;&#x79CD;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x6240;&#x91C7;&#x7528;&#x7684;&#x8DEF;&#x5F84;&#x3002;&#x5B83;&#x4EEC;&#x6700;&#x7EC8;&#x90FD;&#x63A5;&#x8FD1;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x8DEF;&#x5F84;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x5728;&#x6700;&#x5C0F;&#x503C;&#x5904;&#x505C;&#x6B62;&#xFF0C;&#x800C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x548C;&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x90FD;&#x7EE7;&#x7EED;&#x8D70;&#x52A8;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6BCF;&#x6B65;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x5F88;&#x591A;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x826F;&#x597D;&#x7684;&#x5B66;&#x4E60;&#x7387;&#x8C03;&#x5EA6;&#xFF0C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x548C;&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x4E5F;&#x4F1A;&#x8FBE;&#x5230;&#x6700;&#x5C0F;&#x503C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ea71a3267318dbf519228364c0cadb581060a989dca6ab2b7179c9748cbde153" alt="image.png"></p>
<p>&#x8BA9;&#x6211;&#x4EEC;&#x6BD4;&#x8F83;&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#x8BA8;&#x8BBA;&#x7684;&#x7EBF;&#x6027;&#x56DE;&#x5F52;&#x7B97;&#x6CD5;&#xFF0C;mmm &#x662F;&#x8BAD;&#x7EC3;&#x5B9E;&#x4F8B;&#x7684;&#x6570;&#x91CF;&#xFF0C;nnn &#x662F;&#x7279;&#x5F81;&#x7684;&#x6570;&#x91CF;&#x3002;</p>
<table>
<thead>
<tr>
<th>&#x7B97;&#x6CD5;</th>
<th>mmm &#x5F88;&#x5927;</th>
<th>&#x6838;&#x5916;&#x652F;&#x6301;</th>
<th>nnn &#x5F88;&#x5927;</th>
<th>&#x8D85;&#x53C2;&#x6570;</th>
<th>&#x8981;&#x6C42;&#x7F29;&#x653E;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x6807;&#x51C6;&#x65B9;&#x7A0B;</td>
<td>&#x5FEB;</td>
<td>&#x5426;</td>
<td>&#x6162;</td>
<td>0</td>
<td>&#x5426;</td>
</tr>
<tr>
<td>SVD</td>
<td>&#x5FEB;</td>
<td>&#x5426;</td>
<td>&#x6162;</td>
<td>0</td>
<td>&#x5426;</td>
</tr>
<tr>
<td>BGD</td>
<td>&#x6162;</td>
<td>&#x5426;</td>
<td>&#x5FEB;</td>
<td>2</td>
<td>&#x662F;</td>
</tr>
<tr>
<td>SGD</td>
<td>&#x5FEB;</td>
<td>&#x662F;</td>
<td>&#x5FEB;</td>
<td>&#x2265;\geq&#x2265;2</td>
<td>&#x662F;</td>
</tr>
<tr>
<td>MBGD</td>
<td>&#x5FEB;</td>
<td>&#x662F;</td>
<td>&#x5FEB;</td>
<td>&#x2265;\geq&#x2265;2</td>
<td>&#x662F;</td>
</tr>
</tbody></table>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1a0eb355d4d59caf53e35d6bdd236de5b0a680bd54e70412b3e7d7bd3676f5cc" alt="image.png"></p>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="/external_links/10e44fb7e37d659af7c50cb7ecefac5a.html" target="blank" rel="noopener">&#x4E0D;&#x540C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x7684;&#x6BD4;&#x8F83;&#x53CA;Python&#x5B9E;&#x73B0;</a></li>
<li><a href="/external_links/3c7dbe5f2f89ec9c0d9ceae758dabffb.html" target="blank" rel="noopener">&#x5229;&#x7528;python&#x5B9E;&#x73B0;3&#x79CD;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;</a></li>
</ul>
<blockquote>
<p>&#x1F4DD; &#x4E0A;&#x7BC7;&#x7CBE;&#x8BB2;&#xFF1A;<a href="https://dev.newban.cn/7163581570303918088">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x5B9E;&#x6218;&#x7BC7;&#xFF09;</a></p>
<p>&#x1F496; &#x6211;&#x662F; <strong>&#x1D4FC;&#x1D4F2;&#x1D4ED;&#x1D4F2;&#x1D4F8;&#x1D4FD;</strong>&#xFF0C;&#x671F;&#x5F85;&#x4F60;&#x7684;&#x5173;&#x6CE8;&#xFF1B;</p>
<p>&#x1F44D; &#x521B;&#x4F5C;&#x4E0D;&#x6613;&#xFF0C;&#x8BF7;&#x591A;&#x591A;&#x652F;&#x6301;&#xFF1B;</p>
<p>&#x1F525; &#x7CFB;&#x5217;&#x4E13;&#x680F;&#xFF1A;<a href="/external_links/d0c33995b8dd0e123b7c3bb7d2845459.html" target="blank" rel="noopener">AI</a></p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/171f2f57f4e2728cebee40d18ed9c524.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7164024676618862622.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7164024676618862622.html" itemprop="url">Java & Android 集合框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-09T22:35:22+08:00">
                2022-11-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5B66;&#x4E60;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x638C;&#x63E1;&#x95EE;&#x9898;&#x80CC;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x601D;&#x7EF4;&#x6846;&#x67B6;&#xFF0C;&#x4F60;&#x7684;&#x601D;&#x8003;&#x8D8A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x57DF;&#x5C31;&#x8D8A;&#x5E7F;&#xFF0C;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#x4E5F;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F80;&#x5F80;&#x4E0D;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784; / &#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F; Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 6 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x5F6D;&#x3002;</p>
<p><a href="https://dev.newban.cn/7163985718417555487">&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;</a>&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x5230;&#x4E86; HashMap &#x7684;&#x57FA;&#x672C;&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x4E00;&#x8282;&#x6211;&#x4EEC;&#x6765;&#x7ED3;&#x5408; HashMap &#x7684;&#x6E90;&#x7801;&#x505A;&#x5206;&#x6790;&#x3002;</p>
<p>&#x672C;&#x6587;&#x6E90;&#x7801;&#x57FA;&#x4E8E; Java 8 HashMap&#xFF0C;&#x5E76;&#x5173;&#x8054;&#x5206;&#x6790;&#x90E8;&#x5206; Java 7 HashMap&#x3002;</p>
<ul>
<li><a href="https://dev.newban.cn/7163985718417555487">Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6; #5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6; #6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<hr>
<p><strong>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF1A;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d6122cbc8eb3ddaa4e7b9f06fd3ed252555bf976effb1045fb9030c03ca28dd0" alt></p>
<hr>
<ol start="3">
<li>HashMap &#x6E90;&#x7801;&#x5206;&#x6790;</li>
</ol>
<hr>
<h3 id="3-1-HashMap-&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a href="#3-1-HashMap-&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="headerlink" title="3.1 HashMap &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"></a>3.1 HashMap &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3><p>HashMap &#x6709; 4 &#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li><strong>1&#x3001;&#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x68C0;&#x67E5;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;<strong>&#x88C5;</strong>&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6709;&#x6548;&#x6027;&#xFF0C;&#x5E76;&#x8BA1;&#x7B97;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1B;</li>
<li><strong>2&#x3001;&#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50; 0.75 &#x8C03;&#x7528;&#x4E0A;&#x4E00;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1B;</li>
<li><strong>3&#x3001;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;<strong>&#x88C5;</strong>&#x8F7D;&#x56E0;&#x5B50; 0.75&#xFF1B;</li>
<li><strong>4&#x3001;&#x5E26; Map &#x53C2;&#x6570;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;<strong>&#x88C5;</strong>&#x8F7D;&#x56E0;&#x5B50; 0.75&#xFF0C;&#x5E76;&#x9010;&#x4E2A;&#x6DFB;&#x52A0; Map &#x4E2D;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#x3002;</li>
</ul>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5728; HashMap &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x5E76;&#x6CA1;&#x6709;&#x521B;&#x5EFA;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#xFF0C;&#x800C;&#x662F;&#x5EF6;&#x8FDF;&#x5230; put &#x64CD;&#x4F5C;&#x4E2D;&#x89E6;&#x53D1;&#x7684; resize &#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x4E2D;&#x521B;&#x5EFA;&#x6570;&#x7EC4;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x53EF;&#x4EE5;&#x5DF2;&#x77E5;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x91CF;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x9884;&#x5148;&#x8BBE;&#x7F6E;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#xFF0C;&#x907F;&#x514D;&#x5728;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x591A;&#x6B21;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public HashMap(int initialCapacity, float loadFactor) {</span><br><span class="line">    if (initialCapacity &lt; 0)</span><br><span class="line">        throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; + initialCapacity);</span><br><span class="line">    if (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        // &#x6700;&#x5927;&#x5BB9;&#x91CF;&#x9650;&#x5236;</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))</span><br><span class="line">        throw new IllegalArgumentException(&quot;Illegal load factor: &quot; + loadFactor);</span><br><span class="line">    // &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;</span><br><span class="line">    this.loadFactor = loadFactor;</span><br><span class="line">    // &#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF08;&#x6B64;&#x5904;&#x4E0D;&#x662F;&#x771F;&#x6B63;&#x7684;&#x9608;&#x503C;&#xFF0C;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x5C06;&#x4F20;&#x5165;&#x7684;&#x5BB9;&#x91CF;&#x8F6C;&#x5316;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x8BE5;&#x9608;&#x503C;&#x540E;&#x9762;&#x4F1A;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#xFF09;</span><br><span class="line">    this.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public HashMap(int initialCapacity) {</span><br><span class="line">    this(initialCapacity, DEFAULT_LOAD_FACTOR /*0.75*/);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public HashMap() {</span><br><span class="line">    this.loadFactor = DEFAULT_LOAD_FACTOR /*0.75*/;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26; Map &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public HashMap(Map&lt;? extends K, ? extends V&gt; m) {</span><br><span class="line">    this.loadFactor = DEFAULT_LOAD_FACTOR /*0.75*/;</span><br><span class="line">    // &#x7591;&#x95EE; 7&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528; Arrays &#x5DE5;&#x5177;&#x7C7B;&#x6574;&#x4F53;&#x590D;&#x5236;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528; putMapEntries &#x6279;&#x91CF;&#x6DFB;&#x52A0;&#xFF1F;</span><br><span class="line">    // &#x6279;&#x91CF;&#x6DFB;&#x52A0;</span><br><span class="line">    putMapEntries(m, false);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x7591;&#x95EE; 8&#xFF1A;tableSizeFor() &#x7684;&#x51FD;&#x6570;&#x4F53;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#xFF1F;</span><br><span class="line">// &#x83B7;&#x53D6;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;</span><br><span class="line">static final int tableSizeFor(int cap) {</span><br><span class="line">    // &#x5148;&#x51CF; 1&#xFF0C;&#x8BA9; 8&#x3001;16 &#x8FD9;&#x79CD;&#x672C;&#x8EAB;&#x5C31;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x7684;&#x5BB9;&#x91CF;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;</span><br><span class="line">    // &#x5728; ArrayDeque &#x4E2D;&#x6CA1;&#x6709;&#x5148;&#x51CF; 1&#xFF0C;&#x6240;&#x4EE5;&#x5BB9;&#x91CF; 8 &#x4F1A;&#x8F6C;&#x4E3A; 16</span><br><span class="line">    int n = cap - 1;</span><br><span class="line">    n |= n &gt;&gt;&gt; 1;</span><br><span class="line">    n |= n &gt;&gt;&gt; 2;</span><br><span class="line">    n |= n &gt;&gt;&gt; 4;</span><br><span class="line">    n |= n &gt;&gt;&gt; 8;</span><br><span class="line">    n |= n &gt;&gt;&gt; 16;</span><br><span class="line">    return (n &lt; 0) ? 1 /*tableSizeFor() &#x65B9;&#x6CD5;&#x5916;&#x5C42;&#x5DF2;&#x7ECF;&#x68C0;&#x67E5;&#x8FC7;&#x8D85;&#x8FC7; 2^30 &#x7684;&#x503C;&#xFF0C;&#x5E94;&#x8BE5;&#x4E0D;&#x5B58;&#x5728;&#x6574;&#x578B;&#x6EA2;&#x51FA;&#x7684;&#x60C5;&#x51B5;*/</span><br><span class="line">        : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5C0F;&#x670B;&#x53CB;&#x603B;&#x662F;&#x6709;&#x592A;&#x591A;&#x95EE;&#x53F7;&#xFF0C;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#xFF1A;</p>
<p>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 7&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5E26;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E0D;&#x4F7F;&#x7528; Arrays &#x5DE5;&#x5177;&#x7C7B;&#x6574;&#x4F53;&#x590D;&#x5236;&#xFF0C;&#x800C;&#x662F;&#x4F7F;&#x7528; putMapEntries &#x6279;&#x91CF;&#x6DFB;&#x52A0;&#xFF1F;</strong></p>
<p>&#x9996;&#x5148;&#xFF0C;&#x53C2;&#x6570; Map &#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x57FA;&#x4E8E;&#x6563;&#x5217;&#x8868;&#x7684; Map&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x80FD;&#x6574;&#x4F53;&#x590D;&#x5236;&#x3002;&#x5176;&#x6B21;&#xFF0C;&#x5C31;&#x7B97;&#x53C2;&#x6570; Map &#x4E5F;&#x662F; HashMap&#xFF0C;&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x6563;&#x5217;&#x8868;&#x7684; length &#x957F;&#x5EA6;&#x4E0D;&#x540C;&#xFF0C;&#x952E;&#x503C;&#x5BF9;&#x6620;&#x5C04;&#x5230;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E5F;&#x4F1A;&#x4E0D;&#x540C;&#x3002;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x7528; Arrays &#x5DE5;&#x5177;&#x7C7B;&#x6574;&#x4F53;&#x590D;&#x5236;&#xFF0C;&#x5FC5;&#x987B;&#x9010;&#x4E2A;&#x518D;&#x6563;&#x5217;&#x5230;&#x65B0;&#x7684;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x3002;</p>
<p>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 8&#xFF1A;tableSizeFor() &#x7684;&#x51FD;&#x6570;&#x4F53;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#xFF1F;</strong></p>
<p>&#x5176;&#x5B9E;&#xFF0C;HashMap#tableSizeFor() &#x51FD;&#x6570;&#x4F53;&#x4E0E; <a href="https://dev.newban.cn/7162819765361672199">ArrayDeque#calculateSize()</a> &#x51FD;&#x6570;&#x4F53;&#x76F8;&#x4F3C;&#xFF0C;&#x4E5F;&#x662F;&#x6C42;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x5373; nextPow2 &#x95EE;&#x9898;&#x3002;&#x533A;&#x522B;&#x5728;&#x4E8E; HashMap &#x5728;&#x7B2C;&#x4E00;&#x6B65;&#x5BF9;&#x53C2;&#x6570; cap - 1&#xFF0C;&#x800C; ArrayDeque &#x6CA1;&#x6709;&#x8FD9;&#x4E00;&#x6B65;&#xFF0C;&#x4F1A;&#x5C06; 8&#x3001;16 &#x8FD9;&#x79CD;&#x672C;&#x8EAB;&#x5C31;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x7684;&#x5BB9;&#x91CF;&#x7FFB;&#x500D;&#x3002;</p>
<p>tableSizeFor() &#x4E2D;&#x7ECF;&#x8FC7;&#x4E94;&#x8F6E;&#x65E0;&#x7B26;&#x53F7;&#x53F3;&#x79FB;&#x548C;&#x6216;&#x8FD0;&#x7B97;&#xFF0C;&#x5C06; cap &#x8F6C;&#x6362;&#x4E3A;&#x4ECE;&#x6700;&#x9AD8;&#x4F4D;&#x5F00;&#x59CB;&#x540E;&#x9762;&#x90FD;&#x662F; 1 &#x7684;&#x6570;&#x3002;&#x518D;&#x6267;&#x884C; +1 &#x8FD0;&#x7B97;&#xFF0C;&#x5C31;&#x6C42;&#x51FA;&#x4E86;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF08;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#x662F; 1&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0&#xFF09;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;n = 0 0 0 0 1 x x x x x     //n</span><br><span class="line">n = 0 0 0 0 1 1 x x x x     //n |= n &gt;&gt;&gt; 1;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 x x     //n |= n &gt;&gt;&gt; 2;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 1 1     //n |= n &gt;&gt;&gt; 4;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 1 1     //n |= n &gt;&gt;&gt; 8;&#xFF08;&#x8FD9;&#x4E00;&#x6B65;&#x5BF9; n &#x6CA1;&#x6709;&#x5F71;&#x54CD;&#x4E86;&#xFF09;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 1 1     //n |= n &gt;&gt;&gt; 16;&#xFF08;&#x8FD9;&#x4E00;&#x6B65;&#x5BF9; n &#x6CA1;&#x6709;&#x5F71;&#x54CD;&#x4E86;&#xFF09;</span><br><span class="line">n = 0 0 0 1 0 0 0 0 0 0     //n + 1&#xFF08;&#x8FDB;&#x4F4D;&#xFF0C;&#x5F97;&#x5230;&#x6700;&#x8FD1; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF09;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-HashMap-&#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;"><a href="#3-2-HashMap-&#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;" class="headerlink" title="3.2 HashMap &#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;"></a>3.2 HashMap &#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;</h3><p>&#x5C06; <code>HashMap#put</code> &#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x6B65;&#x9AA4;&#x5C31;&#x662F;&#x4F7F;&#x7528; Hash &#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x952E;&#x503C;&#x5BF9;&#x4E2D;&#x952E;&#xFF08;Key&#xFF09;&#x7684;&#x6563;&#x5217;&#x503C;&#x3002;HashMap#put &#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x975E;&#x5E38;&#x590D;&#x6742;&#xFF0C;&#x4E3A;&#x4E86;&#x964D;&#x4F4E;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x5206;&#x6790; <code>HashMap#hash</code> &#x65B9;&#x6CD5;&#x3002;</p>
<p>Hash &#x51FD;&#x6570;&#x662F;&#x6563;&#x5217;&#x8868;&#x7684;&#x6838;&#x5FC3;&#x7279;&#x6027;&#xFF0C;Hash &#x51FD;&#x6570;&#x662F;&#x5426;&#x8DB3;&#x591F;&#x968F;&#x673A;&#xFF0C;&#x4F1A;&#x76F4;&#x63A5;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x7684;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x3002;&#x5728; Java 7 &#x548C; Java 8 &#x4E2D;&#xFF0C;HashMap &#x4F1A;&#x5728; <code>Object#hashCode()</code> &#x7684;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0; <strong>&#x201C;&#x6270;&#x52A8;&#x201D;&#xFF1A;</strong></p>
<ul>
<li><strong>Java 7&#xFF1A;</strong> &#x505A; 4 &#x6B21;&#x6270;&#x52A8;&#xFF0C;&#x901A;&#x8FC7;&#x65E0;&#x7B26;&#x53F7;&#x53F3;&#x79FB;&#xFF0C;&#x8BA9;&#x6563;&#x5217;&#x503C;&#x7684;&#x9AD8;&#x4F4D;&#x4E0E;&#x4F4E;&#x4F4D;&#x505A;&#x5F02;&#x6216;&#xFF1B;</li>
<li><strong>Java 8&#xFF1A;</strong> &#x505A; 1 &#x6B21;&#x6270;&#x52A8;&#xFF0C;&#x901A;&#x8FC7;&#x65E0;&#x7B26;&#x53F7;&#x53F3;&#x79FB;&#xFF0C;&#x8BA9;&#x9AD8; 16 &#x4F4D;&#x4E0E;&#x4F4E; 16 &#x4F4D;&#x505A;&#x5F02;&#x6216;&#x3002;&#x5728; Java 8 &#x53EA;&#x505A;&#x4E00;&#x6B21;&#x6270;&#x52A8;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x968F;&#x673A;&#x6027;&#x548C;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#x4E4B;&#x95F4;&#x7684;&#x6743;&#x8861;&#x3002;</li>
</ul>
<p><code>HashMap#hash</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public V put(K key, V value) {</span><br><span class="line">    return putVal(hash(key) /*&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;*/, key, value, false, true);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// Java 7&#xFF1A;4 &#x6B21;&#x4F4D;&#x8FD0;&#x7B97; + 5&#x6B21;&#x5F02;&#x6216;&#x8FD0;&#x7B97;</span><br><span class="line">static final int hash(int h) {</span><br><span class="line">    h ^= k.hashCode(); </span><br><span class="line">    h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);</span><br><span class="line">    return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);</span><br><span class="line"> }</span><br><span class="line"></span><br><span class="line">// &#x7591;&#x95EE; 9&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; HashMap &#x8981;&#x5728; Object#hashCode() &#x4E0A;&#x589E;&#x52A0;&#x6270;&#x52A8;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8981;&#x6C42; Object#hashCode() &#x5C3D;&#x53EF;&#x80FD;&#x968F;&#x673A;&#xFF1F;</span><br><span class="line">// &#x4E3A;&#x4EC0;&#x4E48;&#x8BA9;&#x9AD8;&#x4F4D;&#x4E0E;&#x4F4E;&#x4F4D;&#x505A;&#x5F02;&#x6216;&#x5C31;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x968F;&#x673A;&#x6027;&#xFF1F;</span><br><span class="line">// Java 8&#xFF1A;1 &#x6B21;&#x4F4D;&#x8FD0;&#x7B97; + 1&#x6B21;&#x5F02;&#x6216;&#x8FD0;&#x7B97;</span><br><span class="line">static final int hash(Object key) {</span><br><span class="line">    int h;</span><br><span class="line">    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5C0F;&#x670B;&#x53CB;&#x603B;&#x662F;&#x6709;&#x592A;&#x591A;&#x95EE;&#x53F7;&#xFF0C;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#xFF1A;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 9&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; HashMap &#x8981;&#x5728; Object#hashCode() &#x4E0A;&#x589E;&#x52A0;&#x6270;&#x52A8;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8981;&#x6C42; Object#hashCode() &#x5C3D;&#x53EF;&#x80FD;&#x968F;&#x673A;&#xFF1F;</strong></li>
</ul>
<p>&#x8FD9;&#x662F;&#x515C;&#x4E0B;&#x9650;&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x4F7F;&#x7528; HashMap &#x7684;&#x5F00;&#x53D1;&#x8005;&#x90FD;&#x80FD;&#x83B7;&#x5F97;&#x826F;&#x597D;&#x7684;&#x6027;&#x80FD;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x7531;&#x4E8E;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x6709;&#x9650;&#xFF0C;&#x5728;&#x5C06;&#x6563;&#x5217;&#x503C;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x65F6;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x505A;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#xFF0C;&#x6700;&#x7EC8;&#x5F71;&#x54CD;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x7684;&#x53EA;&#x6709;&#x6563;&#x5217;&#x503C;&#x7684;&#x4F4E;&#x51E0;&#x4F4D;&#x5143;&#x7D20;&#xFF0C;&#x4F1A;&#x7834;&#x574F;&#x6620;&#x5C04;&#x7684;&#x968F;&#x673A;&#x6027;&#xFF08;&#x5373;&#x6563;&#x5217;&#x503C;&#x968F;&#x673A;&#xFF0C;&#x4F46;&#x6620;&#x5C04;&#x5230;&#x4E0B;&#x6807;&#x540E;&#x4E0D;&#x968F;&#x673A;&#xFF09;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;HashMap &#x4F1A;&#x5BF9;&#x6563;&#x5217;&#x503C;&#x505A;&#x4F4D;&#x79FB;&#x548C;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#xFF0C;&#x8BA9;&#x9AD8; 16 &#x4F4D;&#x4E0E;&#x4F4E; 16 &#x4F4D;&#x505A;&#x5F02;&#x6216;&#x8FD0;&#x7B97;&#x3002;&#x7B49;&#x4E8E;&#x8BF4;&#x5728;&#x4F4E;&#x4F4D;&#x4E2D;&#x52A0;&#x5165;&#x4E86;&#x9AD8;&#x4F4D;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x8BA9;&#x9AD8;&#x4F4D;&#x7684;&#x6570;&#x503C;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x7684;&#x8BA1;&#x7B97;&#x3002;</p>
<p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x57FA;&#x672C;&#x53EF;&#x4EE5;&#x56DE;&#x7B54;&#x4E0A;&#x4E00;&#x8282;&#x5269;&#x4E0B;&#x7684;&#x7591;&#x95EE; 4&#xFF1A;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 4&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; HashMap &#x8981;&#x6C42;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1F;</strong></li>
</ul>
<p>&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6563;&#x5217;&#x503C;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x7684;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#x548C;&#x968F;&#x673A;&#x6027;&#xFF0C;&#x539F;&#x56E0;&#x6709; 3 &#x4E2A;&#xFF1A;</p>
<p><strong>1&#x3001;&#x63D0;&#x9AD8;&#x53D6;&#x4F59;&#x64CD;&#x4F5C;&#x7684;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#xFF1A;</strong></p>
<p>&#x5982;&#x679C;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97; <code>|hash % length|</code> &#x66FF;&#x6362;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97; <code>hash &amp; (length - 1)</code> &#xFF0C;&#x4E0D;&#x7BA1;&#x88AB;&#x9664;&#x6570;&#x662F;&#x6B63;&#x8D1F;&#x7ED3;&#x679C;&#x90FD;&#x662F;&#x6B63;&#x6570;&#x3002; <strong>&#x4E0D;&#x4EC5;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x66FF;&#x6362;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97;&#xFF0C;&#x800C;&#x4E14;&#x51CF;&#x5C11;&#x4E86;&#x4E00;&#x6B21;&#x53D6;&#x7EDD;&#x5BF9;&#x503C;&#x8FD0;&#x7B97;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x7D22;&#x5F15;&#x7684;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;10  % 4 = 2</span><br><span class="line">-10 % 4 = -2      // &#x8D1F;&#x6570;</span><br><span class="line">10  &amp; (4 - 1) = 2</span><br><span class="line">-10 &amp; (4 - 1) = 2 // &#x6B63;&#x6570;</span><br></pre></td></tr></table></figure>

<p><strong>2&#x3001;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x662F;&#x5076;&#x6570;&#x80FD;&#x907F;&#x514D;&#x6563;&#x5217;&#x503C;&#x90FD;&#x6620;&#x5C04;&#x5230;&#x5076;&#x6570;&#x4E0B;&#x6807;&#x4E0A;&#xFF1A;</strong></p>
<p>&#x5982;&#x679C;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x662F;&#x5947;&#x6570;&#xFF0C;&#x90A3;&#x4E48; (length - 1) &#x7684;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x662F;&#x5076;&#x6570;&#xFF0C;&#x5373;&#x4E8C;&#x8FDB;&#x5236;&#x6700;&#x4F4E; 1 &#x4F4D;&#x662F; 0&#x3002;&#x8FD9;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4; hash &amp; (length - 1) &#x7684;&#x7ED3;&#x679C;&#x4E00;&#x5B9A;&#x662F;&#x5076;&#x6570;&#xFF0C;&#x5373;&#x59CB;&#x7EC8;&#x4F1A;&#x6620;&#x5C04;&#x5230;&#x5076;&#x6570;&#x4E0B;&#x6807;&#x4E2D;&#xFF0C;&#x4E0D;&#x4EC5;&#x6D6A;&#x8D39;&#x4E86;&#x4E00;&#x822C;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#xFF0C;&#x4E5F;&#x4F1A;&#x589E;&#x5927;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x3002;</p>
<p><strong>3&#x3001;&#x4FDD;&#x7559;&#x6240;&#x6709;&#x7684;&#x4F4E;&#x4F4D;&#x7279;&#x5F81;&#xFF1A;</strong></p>
<p>&#x6570;&#x7EC4;&#x957F;&#x5EA6; length &#x4E3A; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x5BF9;&#x5E94; (length - 1) &#x6B63;&#x597D;&#x662F;&#x9AD8;&#x4F4D;&#x4E3A; 0&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 1 &#x7684;&#x4F4E;&#x4F4D;&#x63A9;&#x7801;&#xFF0C;&#x80FD;&#x591F;&#x8BA9;&#x5F71;&#x54CD;&#x6620;&#x5C04;&#x7684;&#x56E0;&#x7D20;&#x5168;&#x90E8;&#x5F52;&#x7ED3;&#x5230;&#x6563;&#x5217;&#x503C;&#x4E0A;&#x3002;</p>
<h3 id="3-3-HashMap-&#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;"><a href="#3-3-HashMap-&#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;" class="headerlink" title="3.3 HashMap &#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;"></a>3.3 HashMap &#x7684;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;</h3><p>HashMap &#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x4E5F;&#x652F;&#x6301;&#x6279;&#x91CF;&#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</p>
<ul>
<li><strong>put&#xFF1A;</strong> &#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</li>
<li><strong>putAll&#xFF1A;</strong> &#x6279;&#x91CF;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</li>
</ul>
<p><strong>&#x4E0D;&#x7BA1;&#x662F;&#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#x8FD8;&#x662F;&#x6279;&#x91CF;&#x6DFB;&#x52A0;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x5148;&#x901A;&#x8FC7; hash &#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x952E;&#xFF08;Key&#xFF09;&#x7684;&#x6563;&#x5217;&#x503C;&#xFF0C;&#x518D;&#x901A;&#x8FC7; <code>putVal</code> &#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;&#x3002;</strong></p>
<p>putValue &#x7684;&#x6D41;&#x7A0B;&#x975E;&#x5E38;&#x590D;&#x6742;&#xFF0C;&#x6211;&#x5C06;&#x4E3B;&#x8981;&#x6B65;&#x9AA4;&#x6982;&#x62EC;&#x4E3A; 5 &#x6B65;&#xFF1A;</p>
<ul>
<li>1&#x3001;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x6269;&#x5BB9;&#x51FD;&#x6570;&#x521B;&#x5EFA;&#xFF08;&#x8BF4;&#x660E;&#x6570;&#x7EC4;&#x7684;&#x521B;&#x5EFA;&#x65F6;&#x673A;&#x5728;&#x9996;&#x6B21; put &#x64CD;&#x4F5C;&#x65F6;&#xFF09;&#xFF1B;</li>
<li>2&#x3001;(n - 1) &amp; hash&#xFF1A;&#x6563;&#x5217;&#x503C;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x4E0E; Java 7 &#x7684; indexFor() &#x65B9;&#x6CD5;&#x76F8;&#x4F3C;&#xFF1B;</li>
<li>3&#x3001;&#x5982;&#x679C;&#x662F;&#x6876;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x5E76;&#x63D2;&#x5165; Node &#x8282;&#x70B9;&#xFF1B;</li>
<li>4&#x3001;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x6876;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF08;&#x5373;&#x53D1;&#x751F;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#xFF09;&#xFF0C;&#x9700;&#x8981;&#x63D2;&#x5165;&#x94FE;&#x8868;&#x6216;&#x7EA2;&#x9ED1;&#x6811;&#x3002;&#x5728;&#x6DFB;&#x52A0;&#x5230;&#x94FE;&#x8868;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x904D;&#x5386;&#x94FE;&#x8868;&#x627E;&#x5230; Key &#x76F8;&#x7B49;&#xFF08;equals&#xFF09;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x5219;&#x4F7F;&#x7528;&#x5C3E;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x65B0;&#x8282;&#x70B9;&#x3002;&#x5982;&#x679C;&#x94FE;&#x8868;&#x8282;&#x70B9;&#x6570;&#x8D85;&#x8FC7;&#x6811;&#x5316;&#x9608;&#x503C; <code>8</code>&#xFF0C;&#x5219;&#x5C06;&#x94FE;&#x8868;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x3002;</li>
<li>5&#x3001;&#x5982;&#x679C;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;&#x5927;&#x4E8E;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x3002;</li>
</ul>
<p><code>HashMap#put</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">public V put(K key, V value) {</span><br><span class="line">    return putVal(hash(key) /*&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;*/, key, value, false, true);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6279;&#x91CF;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">public void putAll(Map&lt;? extends K, ? extends V&gt; m) {</span><br><span class="line">    putMapEntries(m, true);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6279;&#x91CF;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">// evict&#xFF1A;&#x662F;&#x5426;&#x9A71;&#x9010;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#xFF08;&#x5728; LinkedHashMap &#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x5FFD;&#x7565;&#xFF09;</span><br><span class="line">final void putMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) {</span><br><span class="line">    int s = m.size();</span><br><span class="line">    if (s &gt; 0) {</span><br><span class="line">        if (table == null) {</span><br><span class="line">            // &#x5982;&#x679C;&#x6570;&#x7EC4;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x5148;&#x521D;&#x59CB;&#x5316; threshold &#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">            float ft = ((float)s / loadFactor) + 1.0F;</span><br><span class="line">            // &#x6269;&#x5BB9;&#x9608;&#x503C;&#x4E0A;&#x9650;</span><br><span class="line">            int t = ((ft &lt; (float)MAXIMUM_CAPACITY) ? (int)ft : MAXIMUM_CAPACITY);</span><br><span class="line">            if (t &gt; threshold)</span><br><span class="line">                threshold = tableSizeFor(t);</span><br><span class="line">        } else if (s &gt; threshold)</span><br><span class="line">            // &#x53C2;&#x6570; Map &#x7684;&#x957F;&#x5EA6;&#x5927;&#x4E8E;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF0C;&#x5148;&#x6269;&#x5BB9;&#xFF08;&#x5982;&#x679C;&#x6269;&#x5BB9;&#x540E;&#x4F9D;&#x7136;&#x4E0D;&#x8DB3;&#xFF0C;&#x5728;&#x4E0B;&#x9762;&#x7684; putVal &#x4E2D;&#x4F1A;&#x518D;&#x6B21;&#x6269;&#x5BB9;&#xFF09;</span><br><span class="line">            // &#x8FD9;&#x91CC;&#x5E94;&#x8BE5;&#x6709;&#x4F18;&#x5316;&#x7A7A;&#x95F4;&#xFF0C;&#x6279;&#x91CF;&#x6DFB;&#x52A0;&#x65F6;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x6269;&#x5BB9;&#x5230;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x907F;&#x514D;&#x5728; for &#x5FAA;&#x73AF;&#x4E2D;&#x591A;&#x6B21;&#x6269;&#x5BB9;</span><br><span class="line">            resize();</span><br><span class="line">        // &#x9010;&#x4E2A;&#x6DFB;&#x52A0; Map &#x4E2D;&#x7684;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">        for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) {</span><br><span class="line">            K key = e.getKey();</span><br><span class="line">            V value = e.getValue();</span><br><span class="line">            // hash(key)&#xFF1A;&#x8BA1;&#x7B97; Key &#x7684;&#x54C8;&#x5E0C;&#x503C;</span><br><span class="line">            // pubVal&#xFF1A;&#x6DFB;&#x52A0;&#x6216;&#x66F4;&#x65B0;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">            putVal(hash(key), key, value, false, evict);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x8D70;&#x5230; putVal&#x65B9;&#x6CD5;&#xFF1A;</span><br><span class="line"></span><br><span class="line">// hash&#xFF1A;Key &#x7684;&#x6563;&#x5217;&#x503C;&#xFF08;&#x7ECF;&#x8FC7;&#x6270;&#x52A8;&#xFF09;</span><br><span class="line">// onlyIfAbsent&#xFF1A;&#x5982;&#x679C;&#x4E3A; true&#xFF0C;&#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x65E7;&#x503C;</span><br><span class="line">// evict&#xFF1A;&#x662F;&#x5426;&#x9A71;&#x9010;&#x6700;&#x65E9;&#x7684;&#x8282;&#x70B9;&#xFF08;&#x5728; LinkedHashMap &#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x5FFD;&#x7565;&#xFF09;</span><br><span class="line">final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) {</span><br><span class="line">    // &#x6570;&#x7EC4;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; </span><br><span class="line">    // &#x76EE;&#x6807;&#x6876;&#xFF08;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#x8282;&#x70B9;&#x7684;&#x6563;&#x5217;&#x503C;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF09;</span><br><span class="line">    Node&lt;K,V&gt; p; </span><br><span class="line">    // &#x6570;&#x7EC4;&#x957F;&#x5EA6;</span><br><span class="line">    int n;</span><br><span class="line">    // &#x6876;&#x7684;&#x4F4D;&#x7F6E;</span><br><span class="line">    int i;</span><br><span class="line">    // 1. &#x5982;&#x679C;&#x6570;&#x7EC4;&#x4E3A;&#x7A7A;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x6269;&#x5BB9;&#x51FD;&#x6570;&#x521B;&#x5EFA;&#xFF08;&#x8BF4;&#x660E;&#x6570;&#x7EC4;&#x7684;&#x521B;&#x5EFA;&#x65F6;&#x673A;&#x5728;&#x9996;&#x6B21; put &#x64CD;&#x4F5C;&#x65F6;&#xFF09;</span><br><span class="line">    if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    // 2. (n - 1) &amp; hash&#xFF1A;&#x6563;&#x5217;&#x503C;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x4E0E; Java 7 &#x7684; indexFor() &#x65B9;&#x6CD5;&#x76F8;&#x4F3C;</span><br><span class="line">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="line">        // 3. &#x5982;&#x679C;&#x662F;&#x6876;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x5E76;&#x63D2;&#x5165; Node &#x8282;&#x70B9;</span><br><span class="line">        tab[i] = newNode(hash, key, value, null);</span><br><span class="line">    else {</span><br><span class="line">        // 4. &#x5982;&#x679C;&#x4E0D;&#x662F;&#x6876;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#xFF08;&#x5373;&#x53D1;&#x751F;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#xFF09;&#xFF0C;&#x9700;&#x8981;&#x63D2;&#x5165;&#x94FE;&#x8868;&#x6216;&#x7EA2;&#x9ED1;&#x6811;</span><br><span class="line">        // e&#xFF1A;&#x6700;&#x7EC8;&#x5339;&#x914D;&#x7684;&#x8282;&#x70B9;</span><br><span class="line">        Node&lt;K,V&gt; e; </span><br><span class="line">        // &#x8282;&#x70B9;&#x4E0A;&#x7684; Key</span><br><span class="line">        K k;</span><br><span class="line">        if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            // 4.1 &#x5982;&#x679C;&#x6876;&#x7684;&#x6839;&#x8282;&#x70B9;&#x4E0E; Key &#x76F8;&#x7B49;&#xFF0C;&#x5219;&#x5C06;&#x5339;&#x914D;&#x5230;&#x6839;&#x8282;&#x70B9;</span><br><span class="line">            // p.hash == hash&#xFF1A;&#x5FEB;&#x6377;&#x6BD4;&#x8F83;&#xFF08;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#x8282;&#x70B9;&#x7684;&#x6563;&#x5217;&#x503C;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF0C;&#x5982;&#x679C;&#x6563;&#x5217;&#x503C;&#x4E0D;&#x540C;&#xFF0C;&#x952E;&#x4E0D;&#x53EF;&#x80FD;&#x76F8;&#x540C;&#xFF09;</span><br><span class="line">            // (k = p.key) == key&#xFF1A;&#x5FEB;&#x6377;&#x6BD4;&#x8F83;&#xFF08;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF09;</span><br><span class="line">            // key != null &amp;&amp; key.equals(k)&#xFF1A;&#x5224;&#x65AD;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61; equals &#x76F8;&#x540C;</span><br><span class="line">            e = p;</span><br><span class="line">        else if (p instanceof TreeNode)</span><br><span class="line">        // 4.2 &#x5982;&#x679C;&#x6876;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x91C7;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x63D2;&#x5165;&#x65B9;&#x5F0F;</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span><br><span class="line">        else {</span><br><span class="line">            // 4.3 &#x5982;&#x679C;&#x6876;&#x662F;&#x94FE;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x91C7;&#x7528;&#x94FE;&#x8868;&#x7684;&#x63D2;&#x5165;&#x65B9;&#x5F0F;&#xFF1A;</span><br><span class="line">            // 4.3.1 &#x904D;&#x5386;&#x94FE;&#x8868;&#x627E;&#x5230; Key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;</span><br><span class="line">            // 4.3.2 &#x5426;&#x5219;&#x4F7F;&#x7528;&#x5C3E;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x65B0;&#x8282;&#x70B9;</span><br><span class="line">            // 4.3.3 &#x94FE;&#x8868;&#x8282;&#x70B9;&#x6570;&#x8D85;&#x8FC7;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x5C06;&#x94FE;&#x8868;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;</span><br><span class="line">            for (int binCount = 0; ; ++binCount) {</span><br><span class="line">                // &#x5C3E;&#x63D2;&#x6CD5;&#xFF08;Java 7 &#x4F7F;&#x7528;&#x5934;&#x63D2;&#x6CD5;&#xFF09;</span><br><span class="line">                if ((e = p.next) == null) {</span><br><span class="line">                    p.next = newNode(hash, key, value, null);</span><br><span class="line">                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="line">                        // &#x94FE;&#x8868;&#x8282;&#x70B9;&#x6570;&#x8D85;&#x8FC7;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x5C06;&#x94FE;&#x8868;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;</span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    break;</span><br><span class="line">                }</span><br><span class="line">                // &#x627E;&#x5230; Key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;</span><br><span class="line">                if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                    break;</span><br><span class="line">                p = e;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        // 4.4 &#x65B0; Value &#x66FF;&#x6362;&#x65E7; Value&#xFF08;&#x65B0;&#x589E;&#x8282;&#x70B9;&#x65F6;&#x4E0D;&#x4F1A;&#x8D70;&#x5230;&#x8FD9;&#x4E2A;&#x5206;&#x652F;&#xFF09;</span><br><span class="line">        if (e != null) {</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            if (!onlyIfAbsent || oldValue == null)</span><br><span class="line">                e.value = value;</span><br><span class="line">            // &#x8BBF;&#x95EE;&#x8282;&#x70B9;&#x56DE;&#xFF08;&#x7528;&#x4E8E; LinkedHashMap&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x5B9E;&#x73B0;&#xFF09;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            return oldValue;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    // &#x4FEE;&#x6539;&#x8BB0;&#x5F55;</span><br><span class="line">    ++modCount;</span><br><span class="line">    // 5. &#x5982;&#x679C;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;&#x5927;&#x4E8E;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x89E6;&#x53D1;&#x6269;&#x5BB9;</span><br><span class="line">    if (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    // &#x65B0;&#x589E;&#x8282;&#x70B9;&#x56DE;&#x8C03;&#xFF08;&#x7528;&#x4E8E; LinkedHashMap&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x5B9E;&#x73B0;&#xFF09;</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    return null;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// -&gt; 4.2 &#x5982;&#x679C;&#x6876;&#x662F;&#x7EA2;&#x9ED1;&#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x5219;&#x91C7;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x63D2;&#x5165;&#x65B9;&#x5F0F;</span><br><span class="line">final TreeNode&lt;K,V&gt; putTreeVal(HashMap&lt;K,V&gt; map, Node&lt;K,V&gt;[] tab,</span><br><span class="line">                                       int h, K k, V v) {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// -&gt; &#x94FE;&#x8868;&#x8282;&#x70B9;&#x6570;&#x8D85;&#x8FC7;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x5C06;&#x94FE;&#x8868;&#x8F6C;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;</span><br><span class="line">final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) {</span><br><span class="line">    int n, index; Node&lt;K,V&gt; e;</span><br><span class="line">    if (tab == null || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="line">        resize();</span><br><span class="line">    else if ((e = tab[index = (n - 1) &amp; hash]) != null) {</span><br><span class="line">        TreeNode&lt;K,V&gt; hd = null, tl = null;</span><br><span class="line">        do {</span><br><span class="line">            TreeNode&lt;K,V&gt; p = replacementTreeNode(e, null);</span><br><span class="line">            if (tl == null)</span><br><span class="line">                hd = p;</span><br><span class="line">            else {</span><br><span class="line">                p.prev = tl;</span><br><span class="line">                tl.next = p;</span><br><span class="line">            }</span><br><span class="line">            tl = p;</span><br><span class="line">        } while ((e = e.next) != null);</span><br><span class="line">        if ((tab[index] = hd) != null)</span><br><span class="line">            hd.treeify(tab);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5C0F;&#x670B;&#x53CB;&#x603B;&#x662F;&#x6709;&#x592A;&#x591A;&#x95EE;&#x53F7;&#xFF0C;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#xFF1A;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 10&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; Java 8 &#x8981;&#x5C06;&#x5934;&#x63D2;&#x6CD5;&#x6539;&#x4E3A;&#x5C3E;&#x63D2;&#x6CD5;&#xFF1F;</strong></li>
</ul>
<p>HashMap &#x4E0D;&#x8003;&#x8651;&#x591A;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4F1A;&#x5B58;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x3002;&#x5F53;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x6267;&#x884C; put &#x64CD;&#x4F5C;&#x5E76;&#x4E14;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x65F6;&#xFF0C;Java 7 &#x7684;&#x5934;&#x63D2;&#x6CD5;&#x4F1A;&#x7FFB;&#x8F6C;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x5F15;&#x8D77;&#x6307;&#x9488;&#x6DF7;&#x4E71;&#x5F62;&#x6210;&#x73AF;&#x5F62;&#x94FE;&#x8868;&#xFF0C;&#x800C; Java 8 &#x4F7F;&#x7528;&#x5C3E;&#x63D2;&#x6CD5;&#xFF0C;&#x5728;&#x6269;&#x5BB9;&#x65F6;&#x4F1A;&#x4FDD;&#x6301;&#x94FE;&#x8868;&#x539F;&#x672C;&#x7684;&#x987A;&#x5E8F;&#x3002;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 11&#xFF1A;&#x89E3;&#x91CA;&#x4E00;&#x4E0B; p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))&#xFF1F;</strong></li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7B49;&#x4EF7;&#x4E8E;&#x95EE; HashMap &#x5982;&#x4F55;&#x786E;&#x5B9A;&#x952E;&#x503C;&#x5BF9;&#x7684;&#x4F4D;&#x7F6E;&#xFF1A;</p>
<p>1&#x3001;&#x9996;&#x5148;&#xFF0C;HashMap &#x4F1A;&#x5BF9;&#x952E; Key &#x8BA1;&#x7B97; hashCode() &#x5E76;&#x6DFB;&#x52A0;&#x6270;&#x52A8;&#xFF0C;&#x5F97;&#x5230;&#x6270;&#x52A8;&#x540E;&#x7684;&#x6563;&#x5217;&#x503C; hash&#x3002;&#x968F;&#x540E;&#x901A;&#x8FC7;&#x5BF9;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x53D6;&#x4F59;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E2D;&#xFF1B;</p>
<p>2&#x3001;&#x7136;&#x540E;&#xFF0C;&#x5F53;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x7684;&#x6876;&#x4E2D;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x65F6;&#xFF0C;HashMap &#x9700;&#x8981;&#x904D;&#x5386;&#x6876;&#x627E;&#x5230;&#x4E0E; Key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x4EE5;&#x533A;&#x5206;&#x662F;&#x66F4;&#x65B0;&#x8FD8;&#x662F;&#x6DFB;&#x52A0;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6548;&#x7387;&#xFF0C;&#x5C31;&#x6709;&#x4E86; if &#x8BED;&#x53E5;&#x4E2D;&#x7684;&#x591A;&#x6B21;&#x5224;&#x65AD;&#xFF1A;</p>
<p>2.1 p.hash == hash &#x5FEB;&#x6377;&#x5224;&#x65AD;&#xFF1A; &#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#x8282;&#x70B9;&#x7684;&#x6563;&#x5217;&#x503C;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF0C;&#x5982;&#x679C;&#x6563;&#x5217;&#x503C;&#x4E0D;&#x540C;&#xFF0C;&#x952E;&#x4E00;&#x5B9A;&#x76F8;&#x7B49;&#xFF1A;</p>
<p>2.2 (k = p.key) == key &#x5FEB;&#x6377;&#x5224;&#x65AD;&#xFF1A;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF1B;</p>
<p>2.3 key != null &amp;&amp; key.equals(k) &#x6700;&#x7EC8;&#x5224;&#x65AD;&#xFF1A;&#x5224;&#x65AD;&#x4E24;&#x4E2A;&#x952E; Key &#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF0C;&#x5373; equals &#x76F8;&#x7B49;&#x3002;</p>
<p><strong>&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;HashMap &#x662F;&#x901A;&#x8FC7; hashCode() &#x5B9A;&#x4F4D;&#x6876;&#xFF0C;&#x901A;&#x8FC7; equals() &#x786E;&#x5B9A;&#x952E;&#x503C;&#x5BF9;&#x3002;</strong></p>
<p><code>HashMap#put &#x6267;&#x884C;&#x6D41;&#x7A0B;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/9f7ddbbb3c91dc7940499d9cf466538cc596f92f45616ca00b09976d05a56c5e" alt></p>
<h3 id="3-4-HashMap-&#x7684;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;"><a href="#3-4-HashMap-&#x7684;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;" class="headerlink" title="3.4 HashMap &#x7684;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;"></a>3.4 HashMap &#x7684;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;</h3><p>&#x5728; putVal &#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;&#x540E;&#x6563;&#x5217;&#x503C;&#x7684;&#x957F;&#x5EA6;&#x8D85;&#x8FC7;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF0C;&#x5C31;&#x4F1A;&#x8C03;&#x7528; resize() &#x6269;&#x5BB9;&#xFF0C;&#x4E3B;&#x4F53;&#x6D41;&#x7A0B;&#x5206;&#x4E3A; 3&#x6B65;&#xFF1A;</p>
<ul>
<li>1&#x3001;&#x8BA1;&#x7B97;&#x6269;&#x5BB9;&#x540E;&#x7684;&#x65B0;&#x5BB9;&#x91CF;&#x548C;&#x65B0;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF1B;</li>
<li>2&#x3001;&#x521B;&#x5EFA;&#x65B0;&#x6570;&#x7EC4;&#xFF1B;</li>
<li>3&#x3001;&#x5C06;&#x65E7;&#x6570;&#x7EC4;&#x4E0A;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x518D;&#x6563;&#x5217;&#x5230;&#x65B0;&#x6570;&#x7EC4;&#x4E0A;&#x3002;</li>
</ul>
<p>&#x6269;&#x5BB9;&#x5206;&#x4E3A; 2 &#x79CD;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li><strong>1&#x3001;&#x9996;&#x6B21;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF1A;</strong> &#x4F1A;&#x6839;&#x636E;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x8BBE;&#x7F6E;&#x7684;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x786E;&#x5B9A;&#x65B0;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x548C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x5728;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4F1A;&#x4F7F;&#x7528; 16 &#x7684;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x548C; 0.75 &#x7684;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF1B;</li>
<li><strong>2&#x3001;&#x975E;&#x9996;&#x6B21;&#x6DFB;&#x52A0;&#xFF1A;</strong> &#x5C06;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#x548C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x6269;&#x5927;&#x4E3A;&#x539F;&#x6765;&#x7684; 2 &#x500D;&#xFF0C;&#x5982;&#x679C;&#x65E7;&#x5BB9;&#x91CF;&#x5927;&#x4E8E;&#x7B49;&#x4E8E; 2^30 &#x6B21;&#x5E42;&#xFF0C;&#x5219;&#x65E0;&#x6CD5;&#x6269;&#x5BB9;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x5C06;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x8C03;&#x6574;&#x5230;&#x6574;&#x6570;&#x6700;&#x5927;&#x503C;&#x3002;</li>
</ul>
<p>&#x518D;&#x6563;&#x5217;&#x7684;&#x6B65;&#x9AA4;&#x4E0D;&#x597D;&#x7406;&#x89E3;&#xFF0C;&#x8FD9;&#x91CC;&#x89E3;&#x91CA;&#x4E0B;&#xFF1A;</p>
<ul>
<li>3.1 &#x6876;&#x7684;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x76F4;&#x63A5;&#x518D;&#x6563;&#x5217;&#xFF1B;</li>
<li>3.2 &#x4EE5;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x65B9;&#x5F0F;&#x518D;&#x6563;&#x5217;&#xFF0C;&#x601D;&#x8DEF;&#x4E0E; 3.3 &#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x76F8;&#x4F3C;&#xFF1B;</li>
<li>3.3 &#x4EE5;&#x94FE;&#x8868;&#x7684;&#x5F62;&#x5F0F;&#x518D;&#x6563;&#x5217;&#xFF1A;hash &amp; oldCap &#x5C31;&#x662F;&#x83B7;&#x53D6; hash &#x5728;&#x6269;&#x5BB9;&#x540E;&#x65B0;&#x53C2;&#x4E0E;&#x6620;&#x5C04;&#x7684; 1 &#x4E2A;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E00;&#x4F4D;&#x662F; 0&#xFF0C;&#x90A3;&#x4E48;&#x6620;&#x5C04;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x8FD8;&#x662F;&#x5728;&#x539F;&#x6765;&#x7684;&#x6876;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E00;&#x4F4D;&#x662F; 1&#xFF0C;&#x90A3;&#x4E48;&#x6620;&#x5C04;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x5C31;&#x662F;&#x539F;&#x59CB;&#x4F4D;&#x7F6E; + &#x65E7;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;oldCap     = 0 0 0 0 1 0 0 0 0 0 // 32</span><br><span class="line">oldCap - 1 = 0 0 0 0 0 1 1 1 1 1 // 32</span><br><span class="line">newCap     = 0 0 0 1 0 0 0 0 0 0 // 64</span><br><span class="line">newCap - 1 = 0 0 0 0 1 1 1 1 1 1 // 64</span><br><span class="line">                     ^</span><br><span class="line">                     &#x589E;&#x52A0; 1 &#x4E2A;&#x6709;&#x6548;&#x4F4D;&#x53C2;&#x4E0E;&#x6620;&#x5C04;</span><br></pre></td></tr></table></figure>

<p><code>HashMap#resize</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6269;&#x5BB9;</span><br><span class="line">final Node&lt;K,V&gt;[] resize() {</span><br><span class="line">    // &#x65E7;&#x6570;&#x7EC4;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    // &#x65E7;&#x5BB9;&#x91CF;</span><br><span class="line">    int oldCap = (oldTab == null) ? 0 : oldTab.length;</span><br><span class="line">    // &#x65E7;&#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">    int oldThr = threshold;</span><br><span class="line">    // &#x65B0;&#x5BB9;&#x91CF;</span><br><span class="line">    int newCap = 0;</span><br><span class="line">    // &#x65B0;&#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">    int newThr = 0;</span><br><span class="line">    // 1. &#x8BA1;&#x7B97;&#x6269;&#x5BB9;&#x540E;&#x7684;&#x65B0;&#x5BB9;&#x91CF;&#x548C;&#x65B0;&#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">    // &#x65E7;&#x5BB9;&#x91CF;&#x5927;&#x4E8E; 0&#xFF0C;&#x8BF4;&#x660E;&#x4E0D;&#x662F;&#x7B2C;&#x4E00;&#x6B21;&#x6DFB;&#x52A0;&#x5143;&#x7D20;</span><br><span class="line">    if (oldCap &gt; 0) {</span><br><span class="line">        // &#x5982;&#x679C;&#x65E7;&#x5BB9;&#x91CF;&#x5927;&#x4E8E;&#x7B49;&#x4E8E; 2^30 &#x6B21;&#x5E42;&#xFF0C;&#x5219;&#x65E0;&#x6CD5;&#x6269;&#x5BB9;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x5C06;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x8C03;&#x6574;&#x5230;&#x6574;&#x6570;&#x6700;&#x5927;&#x503C;</span><br><span class="line">        if (oldCap &gt;= MAXIMUM_CAPACITY) {</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            return oldTab;</span><br><span class="line">        }</span><br><span class="line">        // &#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x548C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x6269;&#x5927;&#x4E3A;&#x539F;&#x6765;&#x7684; 2 &#x500D;</span><br><span class="line">        else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            newThr = oldThr &lt;&lt; 1; // double threshold</span><br><span class="line">    }</span><br><span class="line">    // &#x65E7;&#x5BB9;&#x91CF;&#x4E3A; 0&#xFF0C;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x6570;&#x7EC4;</span><br><span class="line">    else if (oldThr &gt; 0)</span><br><span class="line">        // &#xFF08;&#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x8D70;&#x8FD9;&#x91CC;&#xFF09;</span><br><span class="line">        // &#x4F7F;&#x7528;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x8BA1;&#x7B97;&#x7684;&#x6700;&#x8FD1; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x4F5C;&#x4E3A;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;</span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    else {</span><br><span class="line">        // &#xFF08;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x8D70;&#x8FD9;&#x91CC;&#xFF09;</span><br><span class="line">        // &#x4F7F;&#x7528;&#x9ED8;&#x8BA4; 16 &#x957F;&#x5EA6;&#x4F5C;&#x4E3A;&#x521D;&#x59CB;&#x5BB9;&#x91CF;</span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">        // &#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x4E58;&#x4EE5;&#x5BB9;&#x91CF;&#x8BA1;&#x7B97;&#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    }</span><br><span class="line">    if (newThr == 0) {</span><br><span class="line">        //&#xFF08;&#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x548C;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x8D70;&#x8FD9;&#x91CC;&#xFF09;</span><br><span class="line">        // &#x4F7F;&#x7528;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x4E58;&#x4EE5;&#x5BB9;&#x91CF;&#x8BA1;&#x7B97;&#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">        float ft = (float)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE);</span><br><span class="line">    }</span><br><span class="line">    // &#x6700;&#x7EC8;&#x8BA1;&#x7B97;&#x7684;&#x6269;&#x5BB9;&#x9608;&#x503C;</span><br><span class="line">    threshold = newThr;</span><br><span class="line">    // 2. &#x521B;&#x5EFA;&#x65B0;&#x6570;&#x7EC4;</span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    // 3. &#x5C06;&#x65E7;&#x6570;&#x7EC4;&#x4E0A;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x518D;&#x6563;&#x5217;&#x5230;&#x65B0;&#x6570;&#x7EC4;&#x4E0A;</span><br><span class="line">    if (oldTab != null) {</span><br><span class="line">        // &#x904D;&#x5386;&#x65E7;&#x6570;&#x7EC4;&#x4E0A;&#x7684;&#x6BCF;&#x4E2A;&#x6876;</span><br><span class="line">        for (int j = 0; j &lt; oldCap; ++j) {</span><br><span class="line">            // &#x6876;&#x7684;&#x6839;&#x8282;&#x70B9;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            // &#x6876;&#x7684;&#x6839;&#x8282;&#x70B9;&#x4E0D;&#x4E3A; null</span><br><span class="line">            if ((e = oldTab[j]) != null) {</span><br><span class="line">                oldTab[j] = null;</span><br><span class="line">                if (e.next == null)</span><br><span class="line">                    // 3.1 &#x6876;&#x7684;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x76F4;&#x63A5;&#x518D;&#x6563;&#x5217;</span><br><span class="line">                    newTab[e.hash &amp; (newCap - 1)] = e;</span><br><span class="line">                else if (e instanceof TreeNode)</span><br><span class="line">                    // 3.2 &#x4EE5;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x65B9;&#x5F0F;&#x518D;&#x6563;&#x5217;&#xFF0C;&#x601D;&#x8DEF;&#x4E0E; 3.3 &#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x76F8;&#x4F3C;</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap);</span><br><span class="line">                else { </span><br><span class="line">                    // 3.3 &#x4EE5;&#x94FE;&#x8868;&#x7684;&#x5F62;&#x5F0F;&#x518D;&#x6563;&#x5217;</span><br><span class="line">                    Node&lt;K,V&gt; loHead = null, loTail = null;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = null, hiTail = null;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    do {</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        // 3.3.1 &#x82E5;&#x6563;&#x5217;&#x503C;&#x65B0;&#x53C2;&#x4E0E;&#x6620;&#x5C04;&#x7684;&#x4F4D;&#x4E3A; 0&#xFF0C;&#x90A3;&#x4E48;&#x6620;&#x5C04;&#x5230;&#x539F;&#x59CB;&#x4F4D;&#x7F6E;&#x4E0A;</span><br><span class="line">                        if ((e.hash &amp; oldCap) == 0) {</span><br><span class="line">                            if (loTail == null)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            else</span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        }</span><br><span class="line">                        // 3.3.2 &#x82E5;&#x6563;&#x5217;&#x503C;&#x65B0;&#x53C2;&#x4E0E;&#x6620;&#x5C04;&#x7684;&#x4F4D;&#x4E3A; 0&#xFF0C;&#x90A3;&#x4E48;&#x6620;&#x5C04;&#x5230;&#x539F;&#x59CB;&#x4F4D;&#x7F6E; + &#x65E7;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;</span><br><span class="line">                        else {</span><br><span class="line">                            if (hiTail == null)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            else</span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        }</span><br><span class="line">                    } while ((e = next) != null);</span><br><span class="line">                    if (loTail != null) {</span><br><span class="line">                        loTail.next = null;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    }</span><br><span class="line">                    if (hiTail != null) {</span><br><span class="line">                        hiTail.next = null;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return newTab;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="3-5-HashMap-&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;"><a href="#3-5-HashMap-&#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;" class="headerlink" title="3.5 HashMap &#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;"></a>3.5 HashMap &#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;</h3><p>HashMap &#x7684;&#x83B7;&#x53D6;&#x65B9;&#x6CD5;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#xFF0C;&#x4E0E; put &#x65B9;&#x6CD5;&#x7C7B;&#x4F3C;&#xFF1A;&#x5148;&#x901A;&#x8FC7; hash &#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;&#xFF0C;&#x518D;&#x901A;&#x8FC7; hash &#x53D6;&#x4F59;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x7684;&#x6876;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x904D;&#x5386;&#x6876;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x627E;&#x5230;&#x4E0E;&#x952E;&#xFF08;Key&#xFF09;&#x76F8;&#x7B49;&#xFF08;equals&#xFF09;&#x7684;&#x8282;&#x70B9;&#x3002;</p>
<p><code>HashMap#get</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x83B7;&#x53D6; Key &#x6620;&#x5C04;&#x7684;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">public V get(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    return (e = getNode(hash(key)/*&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;*/, key)) == null ? null : e.value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x901A;&#x8FC7; Key &#x7684;&#x6563;&#x5217;&#x503C;&#x548C; Key &#x83B7;&#x53D6;&#x6620;&#x5C04;&#x7684;&#x952E;&#x503C;&#x5BF9;</span><br><span class="line">final Node&lt;K,V&gt; getNode(int hash, Object key) {</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (first = tab[(n - 1) &amp; hash]) != null) {</span><br><span class="line">        // &#x5148;&#x68C0;&#x67E5;&#x6839;&#x8282;&#x70B9;</span><br><span class="line">        if (first.hash == hash &amp;&amp; ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            return first;</span><br><span class="line">        if ((e = first.next) != null) {</span><br><span class="line">            // &#x4EE5;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x65B9;&#x5F0F;&#x68C0;&#x7D22;</span><br><span class="line">            if (first instanceof TreeNode)</span><br><span class="line">                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">            // &#x4EE5;&#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x68C0;&#x7D22;</span><br><span class="line">            do {</span><br><span class="line">                if (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                    return e;</span><br><span class="line">            } while ((e = e.next) != null);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>HashMap#get &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/16565a4530da07ab9384384422b4cac5be62486998236de6b69d132bb2e05b04" alt></p>
<h3 id="3-6-HashMap-&#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;"><a href="#3-6-HashMap-&#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;" class="headerlink" title="3.6 HashMap &#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;"></a>3.6 HashMap &#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;</h3><p>HashMap &#x7684;&#x79FB;&#x9664;&#x65B9;&#x6CD5;&#x662F;&#x6DFB;&#x52A0;&#x65B9;&#x6CD5;&#x7684;&#x9006;&#x8FD0;&#x7B97;&#xFF0C;HashMap &#x6CA1;&#x6709;&#x505A;&#x52A8;&#x6001;&#x7F29;&#x5BB9;&#x3002;</p>
<p><code>HashMap#remove</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public V remove(Object key) {</span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    return (e = removeNode(hash(key)/*&#x8BA1;&#x7B97;&#x6563;&#x5217;&#x503C;*/, key, null, false, true)) == null ? null : e.value;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final Node&lt;K,V&gt; removeNode(int hash, Object key, Object value,</span><br><span class="line">                               boolean matchValue, boolean movable) {</span><br><span class="line">    // &#x5E95;&#x5C42;&#x6570;&#x7EC4;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; </span><br><span class="line">    // &#x76EE;&#x6807;&#x6876;&#xFF08;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#x8282;&#x70B9;&#x7684;&#x6563;&#x5217;&#x503C;&#x6709;&#x53EF;&#x80FD;&#x4E0D;&#x540C;&#xFF09;</span><br><span class="line">    Node&lt;K,V&gt; p; </span><br><span class="line">    int n, index;</span><br><span class="line">    // &#x5B9A;&#x4F4D;&#x5230;&#x6563;&#x5217;&#x503C;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;</span><br><span class="line">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp; (p = tab[index = (n - 1) &amp; hash]) != null) {</span><br><span class="line">        Node&lt;K,V&gt; node = null, e; K k; V v;</span><br><span class="line">        if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">            // &#x5148;&#x68C0;&#x67E5;&#x6839;&#x8282;&#x70B9;</span><br><span class="line">            node = p;</span><br><span class="line">        else if ((e = p.next) != null) {</span><br><span class="line">            if (p instanceof TreeNode)</span><br><span class="line">                // &#x4EE5;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x65B9;&#x5F0F;&#x67E5;&#x8BE2;&#x8282;&#x70B9;</span><br><span class="line">                node = ((TreeNode&lt;K,V&gt;)p).getTreeNode(hash, key);</span><br><span class="line">            else {</span><br><span class="line">                // &#x4EE5;&#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x67E5;&#x8BE2;&#x8282;&#x70B9;</span><br><span class="line">                do {</span><br><span class="line">                    if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) {</span><br><span class="line">                        node = e;</span><br><span class="line">                        break;</span><br><span class="line">                    }</span><br><span class="line">                    p = e;</span><br><span class="line">                } while ((e = e.next) != null);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        // node &#x4E0D;&#x4E3A; null&#xFF0C;&#x5220;&#x9664; node &#x8282;&#x70B9;</span><br><span class="line">        if (node != null &amp;&amp; (!matchValue || (v = node.value) == value || (value != null &amp;&amp; value.equals(v)))) {</span><br><span class="line">            if (node instanceof TreeNode)</span><br><span class="line">                // &#x4EE5;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x65B9;&#x5F0F;&#x5220;&#x9664;</span><br><span class="line">                ((TreeNode&lt;K,V&gt;)node).removeTreeNode(this, tab, movable);</span><br><span class="line">            else if (node == p)</span><br><span class="line">                // &#x4EE5;&#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x5220;&#x9664;&#xFF08;&#x5220;&#x9664;&#x8DDF;&#x8282;&#x70B9;&#xFF09;</span><br><span class="line">                tab[index] = node.next;</span><br><span class="line">            else</span><br><span class="line">                // &#x4EE5;&#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#x5220;&#x9664;&#xFF08;&#x5220;&#x9664;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#xFF09;</span><br><span class="line">                p.next = node.next;</span><br><span class="line">            ++modCount;</span><br><span class="line">            --size;</span><br><span class="line">            // &#x5220;&#x9664;&#x8282;&#x70B9;&#x56DE;&#x8C03;&#xFF08;&#x7528;&#x4E8E; LinkedHashMap&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x5B9E;&#x73B0;&#xFF09;</span><br><span class="line">            afterNodeRemoval(node);</span><br><span class="line">            return node;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>HashMap#remove &#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/9341ccd5314bde5ec75250f9583bc5cb7e53f9823ab59cc626b0590e627f2db3" alt></p>
<h3 id="3-7-HashMap-&#x7684;&#x8FED;&#x4EE3;&#x5668;"><a href="#3-7-HashMap-&#x7684;&#x8FED;&#x4EE3;&#x5668;" class="headerlink" title="3.7 HashMap &#x7684;&#x8FED;&#x4EE3;&#x5668;"></a>3.7 HashMap &#x7684;&#x8FED;&#x4EE3;&#x5668;</h3><p>Java &#x7684; foreach &#x662F;&#x8BED;&#x6CD5;&#x7CD6;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x4E5F;&#x662F;&#x91C7;&#x7528; iterator &#x7684;&#x65B9;&#x5F0F;&#x3002;HashMap &#x63D0;&#x4F9B;&#x4E86; 3 &#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#xFF1A;</p>
<ul>
<li><strong>EntryIterator&#xFF1A;</strong> &#x952E;&#x503C;&#x5BF9;&#x8FED;&#x4EE3;&#x5668;</li>
<li><strong>KeyIterator&#xFF1A;</strong> &#x952E;&#x8FED;&#x4EE3;&#x5668;</li>
<li><strong>ValueIterator&#xFF1A;</strong> &#x503C;&#x8FED;&#x4EE3;&#x5668;</li>
</ul>
<p>&#x5728;&#x8FED;&#x4EE3;&#x5668;&#x904D;&#x5386;&#x6570;&#x7EC4;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x6570;&#x7EC4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;Java &#x5F88;&#x591A;&#x5BB9;&#x5668;&#x7C7B;&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x4E2D;&#x90FD;&#x6709; fail-fast &#x673A;&#x5236;&#x3002;&#x5982;&#x679C;&#x5728;&#x8FED;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x73B0; expectedModCount &#x53D8;&#x5316;&#xFF0C;&#x8BF4;&#x660E;&#x6570;&#x636E;&#x88AB;&#x4FEE;&#x6539;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x4F1A;&#x63D0;&#x524D;&#x629B;&#x51FA; <code>ConcurrentModificationException</code> &#x5F02;&#x5E38;&#xFF08;&#x5F53;&#x7136;&#x4E5F;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x88AB;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4FEE;&#x6539;&#xFF09;&#x3002;</p>
<p>&#x5176;&#x5B9E;&#xFF0C;&#x8FD9; 3 &#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#x90FD;&#x662F; HashIterator &#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B50;&#x7C7B;&#x5728; HashIterator#nextNode() &#x4E2D;&#x83B7;&#x53D6;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;final class KeyIterator extends HashIterator implements Iterator&lt;K&gt; {</span><br><span class="line">    public final K next() { return nextNode().key; }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class ValueIterator extends HashIterator implements Iterator&lt;V&gt; {</span><br><span class="line">    public final V next() { return nextNode().value; }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">final class EntryIterator extends HashIterator implements Iterator&lt;Map.Entry&lt;K,V&gt;&gt; {</span><br><span class="line">    public final Map.Entry&lt;K,V&gt; next() { return nextNode(); }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x975E;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;</span><br><span class="line">abstract class HashIterator {</span><br><span class="line">    Node&lt;K,V&gt; next;        // next entry to return</span><br><span class="line">    Node&lt;K,V&gt; current;     // current entry</span><br><span class="line">    int expectedModCount;  // for fast-fail</span><br><span class="line">    int index;             // current slot</span><br><span class="line"></span><br><span class="line">    HashIterator() {</span><br><span class="line">        // &#x8BB0;&#x5F55;&#x5916;&#x90E8;&#x7C7B;&#x7684;&#x4FEE;&#x6539;&#x8BA1;&#x6570;</span><br><span class="line">        expectedModCount = modCount;</span><br><span class="line">        // &#x8BB0;&#x5F55;&#x5E95;&#x5C42;&#x6570;&#x7EC4;</span><br><span class="line">        Node&lt;K,V&gt;[] t = table;</span><br><span class="line">        current = next = null;</span><br><span class="line">        index = 0;</span><br><span class="line">        if (t != null &amp;&amp; size &gt; 0) { // advance to first entry</span><br><span class="line">            do {} while (index &lt; t.length &amp;&amp; (next = t[index++]) == null);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public final boolean hasNext() {</span><br><span class="line">        return next != null;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    final Node&lt;K,V&gt; nextNode() {</span><br><span class="line">        Node&lt;K,V&gt;[] t;</span><br><span class="line">        Node&lt;K,V&gt; e = next;</span><br><span class="line">        // &#x68C0;&#x67E5;&#x4FEE;&#x6539;&#x8BB0;&#x5F55;</span><br><span class="line">        if (modCount != expectedModCount)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">        if (e == null)</span><br><span class="line">            throw new NoSuchElementException();</span><br><span class="line">        // TreeNode &#x4E5F;&#x4F1A;&#x7528; next &#x6307;&#x9488;&#x4E32;&#x8054;</span><br><span class="line">        if ((next = (current = e).next) == null &amp;&amp; (t = table) != null) {</span><br><span class="line">            do {} while (index &lt; t.length &amp;&amp; (next = t[index++]) == null);</span><br><span class="line">        }</span><br><span class="line">        return e;</span><br><span class="line">    }</span><br><span class="line">		...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x57FA;&#x4E8E;&#x8FD9; 3 &#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#xFF0C;HashMap &#x7684;&#x904D;&#x5386;&#x65B9;&#x5F0F;&#x5C31;&#x5206;&#x4E3A; 3 &#x79CD;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// 1. &#x76F4;&#x63A5;&#x904D;&#x5386;&#x8282;&#x70B9;</span><br><span class="line">Iterator&lt;Entry&lt;String, Integer&gt;&gt; iterator = map.entrySet().iterator();</span><br><span class="line">while (iterator.hasNext()) {</span><br><span class="line">    Entry&lt;String, Integer&gt; next = iterator.next();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 2. &#x904D;&#x5386; Key&#xFF0C;&#x518D;&#x901A;&#x8FC7; Key &#x67E5;&#x8BE2; Value&#xFF08;&#x6027;&#x80FD;&#x6700;&#x5DEE;&#xFF0C;&#x591A;&#x4E00;&#x6B21;&#x67E5;&#x8BE2;&#xFF09;</span><br><span class="line">Iterator&lt;String&gt; keyIterator = map.keySet().iterator();</span><br><span class="line">while (keyIterator.hasNext()) {</span><br><span class="line">    String key = keyIterator.next();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// 3. &#x76F4;&#x63A5;&#x904D;&#x5386; Value</span><br><span class="line">Iterator&lt;Integer&gt; valueIterator = map.values().iterator();</span><br><span class="line">while (valueIterator.hasNext()) {</span><br><span class="line">    Integer value = valueIterator.next();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// foreach &#x662F;&#x8BED;&#x6CD5;&#x7CD6;</span><br><span class="line">for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {</span><br><span class="line">}</span><br><span class="line">// &#x7F16;&#x8BD1;&#x540E;&#xFF1A;</span><br><span class="line">Iterator var2 = map.entrySet().iterator();</span><br><span class="line">while(var2.hasNext()) {</span><br><span class="line">    Entry&lt;String, Integer&gt; entry = (Entry)var2.next();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="3-8-HashMap-&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"><a href="#3-8-HashMap-&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;" class="headerlink" title="3.8 HashMap &#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"></a>3.8 HashMap &#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</h3><p>HashMap &#x91CD;&#x5199;&#x4E86; JDK &#x5E8F;&#x5217;&#x5316;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x53EA;&#x628A; table &#x6570;&#x7EC4;&#x4E2D;&#x6709;&#x6548;&#x5143;&#x7D20;&#x7684;&#x90E8;&#x5206;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x5E8F;&#x5217;&#x5316;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</span><br><span class="line">private void writeObject(java.io.ObjectOutputStream s) throws IOException {</span><br><span class="line">    int buckets = capacity();</span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line">    // &#x5199;&#x5165;&#x5BB9;&#x91CF;</span><br><span class="line">    s.writeInt(buckets);</span><br><span class="line">    // &#x5199;&#x5165;&#x6709;&#x6548;&#x5143;&#x7D20;&#x4E2A;&#x6570;</span><br><span class="line">    s.writeInt(size);</span><br><span class="line">    // &#x5199;&#x5165;&#x6709;&#x6548;&#x5143;&#x7D20;</span><br><span class="line">    internalWriteEntries(s);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x4E0D;&#x5173;&#x5FC3;&#x952E;&#x503C;&#x5BF9;&#x6240;&#x5728;&#x7684;&#x6876;&#xFF0C;&#x5728;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x4F1A;&#x91CD;&#x65B0;&#x6620;&#x5C04;</span><br><span class="line">void internalWriteEntries(java.io.ObjectOutputStream s) throws IOException {</span><br><span class="line">    Node&lt;K,V&gt;[] tab;</span><br><span class="line">    if (size &gt; 0 &amp;&amp; (tab = table) != null) {</span><br><span class="line">        for (int i = 0; i &lt; tab.length; ++i) {</span><br><span class="line">            for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) {</span><br><span class="line">                s.writeObject(e.key);</span><br><span class="line">                s.writeObject(e.value);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="3-9-HashMap-&#x7684;-clone-&#x8FC7;&#x7A0B;"><a href="#3-9-HashMap-&#x7684;-clone-&#x8FC7;&#x7A0B;" class="headerlink" title="3.9 HashMap &#x7684; clone() &#x8FC7;&#x7A0B;"></a>3.9 HashMap &#x7684; clone() &#x8FC7;&#x7A0B;</h3><p>HashMap &#x4E2D;&#x7684; table &#x6570;&#x7EC4;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#xFF0C;&#x56E0;&#x6B64;&#x5728; clone() &#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x6DF1;&#x62F7;&#x8D1D;&#xFF0C;&#x5426;&#x5219;&#x539F;&#x5BF9;&#x8C61;&#x4E0E;&#x514B;&#x9686;&#x5BF9;&#x8C61;&#x4F1A;&#x76F8;&#x4E92;&#x5F71;&#x54CD;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public Object clone() {</span><br><span class="line">    HashMap&lt;K,V&gt; result;</span><br><span class="line">    try {</span><br><span class="line">        result = (HashMap&lt;K,V&gt;)super.clone();</span><br><span class="line">    } catch (CloneNotSupportedException e) {</span><br><span class="line">        // this shouldn&apos;t happen, since we are Cloneable</span><br><span class="line">        throw new InternalError(e);</span><br><span class="line">    }</span><br><span class="line">    // &#x91CD;&#x7F6E;&#x53D8;&#x91CF;</span><br><span class="line">    result.reinitialize();</span><br><span class="line">    // &#x6DF1;&#x62F7;&#x8D1D;</span><br><span class="line">    result.putMapEntries(this, false);</span><br><span class="line">    return result;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x6790;&#x4E86; HashMap &#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x548C;&#x6838;&#x5FC3;&#x6E90;&#x7801;&#xFF0C;&#x5185;&#x5BB9;&#x5F88;&#x591A;&#xFF0C;&#x6536;&#x83B7;&#x4E5F;&#x5F88;&#x591A;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x90E8;&#x5206;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5C55;&#x5F00;&#x8BA8;&#x8BBA;&#xFF0C;&#x8FD9;&#x90E8;&#x5206;&#x6211;&#x4EEC;&#x7559;&#x5230;&#x4E0B;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#x8BA8;&#x8BBA;&#x3002;&#x8BF7;&#x5173;&#x6CE8;&#x3002;</p>
<hr>
<p><strong>&#x4E00;&#x9053;&#x9898;&#x76EE;&#xFF1A;</strong></p>
<p>&#x5728;&#x7F51;&#x4E0A;&#x770B;&#x5230;&#x4E00;&#x9053;&#x9898;&#x76EE;&#xFF0C;&#x95EE;&#x9898;&#x633A;&#x6709;&#x8FF7;&#x60D1;&#x6027;&#x7684;&#xFF1A;</p>
<ul>
<li>&#x51C6;&#x5907;&#x7528; HashMap &#x5B58; 1w &#x6761;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x6784;&#x9020;&#x65F6;&#x4F20; 1w &#x5BB9;&#x91CF;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;&#x65F6;&#x8FD8;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x5417;&#xFF1F;&#xFF08;&#x7B54;&#x6848;&#x662F;&#x4E0D;&#x4F1A;&#xFF09;</li>
<li>&#x51C6;&#x5907;&#x7528; HashMap &#x5B58; 1k &#x6761;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x6784;&#x9020;&#x65F6;&#x4F20; 1k &#x5BB9;&#x91CF;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;&#x65F6;&#x8FD8;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x5417;&#xFF1F;&#xFF08;&#x7B54;&#x6848;&#x662F;&#x4F1A;&#xFF09;</li>
</ul>
<p>&#x8FD9;&#x662F;&#x60F3;&#x8003;&#x5BF9; HashMap &#x5BB9;&#x91CF;&#x548C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x7684;&#x7406;&#x89E3;&#x4E86;&#x3002;&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x4F20;&#x9012;&#x7684; <code>initialCapacity</code> &#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6700;&#x7EC8;&#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x56E0;&#x4E3A; HashMap &#x4F1A;&#x4F7F;&#x7528; <code>tableSizeFor()</code> &#x65B9;&#x6CD5;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x800C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x662F;&#x5728;&#x5BB9;&#x91CF;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x4E58;&#x4EE5;&#x9ED8;&#x8BA4;&#x7684; 0.75 &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x4EE5;&#x4E0A;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x5BB9;&#x91CF;&#x548C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x662F;&#xFF1A;</p>
<ul>
<li><strong>1w&#xFF1A;</strong> 10000 &#x8F6C;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x662F; 16384&#xFF0C;&#x518D;&#x4E58;&#x4EE5;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x5F97;&#x51FA;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x4E3A; 12288&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#xFF1B;</li>
<li><strong>1k&#xFF1A;</strong> 1000 &#x8F6C;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x662F; 1024&#xFF0C;&#x518D;&#x4E58;&#x4EE5;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x5F97;&#x51FA;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x4E3A; 768&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#xFF1B;</li>
</ul>
<hr>
<h3 id="&#x7248;&#x6743;&#x58F0;&#x660E;"><a href="#&#x7248;&#x6743;&#x58F0;&#x660E;" class="headerlink" title="&#x7248;&#x6743;&#x58F0;&#x660E;"></a>&#x7248;&#x6743;&#x58F0;&#x660E;</h3><p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<h3 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><ul>
<li>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x5206;&#x6790; &#xB7; Java &#x8BED;&#x8A00;&#x63CF;&#x8FF0;&#xFF08;&#x7B2C; 5 &#x7AE0; &#xB7; &#x6563;&#x5217;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Mark Allen Weiss &#x8457;</li>
<li>&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#xFF08;&#x7B2C; 11 &#x7AE0; &#xB7; &#x6563;&#x5217;&#x8868;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Thomas H. Cormen &#x7B49; &#x8457;</li>
<li><a href="/external_links/3529d049f48fd001823dfe2eff3eb3ee.html" target="blank" rel="noopener">&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x4E4B;&#x7F8E;&#xFF08;&#x7B2C; 18~22 &#x8BB2;&#xFF09;</a> &#x2014;&#x2014; &#x738B;&#x4E89; &#x8457;&#xFF0C;&#x6781;&#x5BA2;&#x65F6;&#x95F4; &#x51FA;&#x54C1;</li>
<li><a href="https://dev.newban.cn/6844903575642963981">Java&#xFF1A;&#x8FD9;&#x662F;&#x4E00;&#x4EFD;&#x8BE6;&#x7EC6;&amp;&#x5168;&#x9762;&#x7684;HashMap 1.7 &#x6E90;&#x7801;&#x5206;&#x6790;</a> &#x2014;&#x2014; Carson &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903574552461320">Java&#x6E90;&#x7801;&#x5206;&#x6790;&#xFF1A;HashMap 1.8 &#x76F8;&#x5BF9;&#x4E8E;1.7 &#x5230;&#x5E95;&#x66F4;&#x65B0;&#x4E86;&#x4EC0;&#x4E48;&#xFF1F;</a> &#x2014;&#x2014; Carson &#x8457;</li>
<li><a href="/external_links/00c30a159ecda0b5f6af907bb952d70d.html" target="blank" rel="noopener">&#x90FD;&#x8BF4; HashMap &#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5230;&#x5E95;&#x4F53;&#x73B0;&#x5728;&#x54EA;&#x513F;&#xFF1F;</a> &#x2014;&#x2014; developer &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903518331994119">&#x6F2B;&#x753B;&#xFF1A;&#x9AD8;&#x5E76;&#x53D1;&#x4E0B;&#x7684;HashMap</a> &#x2014;&#x2014; &#x7A0B;&#x5E8F;&#x5458;&#x5C0F;&#x7070; &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903983748743175">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x201D;&#x51C6;&#x5907;&#x7528;HashMap&#x5B58;1w&#x6761;&#x6570;&#x636E;&#xFF0C;&#x6784;&#x9020;&#x65F6;&#x4F20;10000&#x8FD8;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x5417;&#xFF1F;&#x201D;</a> &#x2014;&#x2014; &#x627F;&#x9999;&#x58A8;&#x5F71; &#x8457;</li>
<li><a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">&#x6563;&#x5217;&#x7B97;&#x6CD5;</a> &#x2014;&#x2014; Wikipedia</li>
<li><a href="/external_links/767a9bab2eefc5d5e282ceb1e3e8b7ad.html" target="blank" rel="noopener">Poisson Distribution</a> &#x2014;&#x2014; Wikipedia</li>
</ul>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF08;2023/07/08 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7161731329078329381">#1 ArrayList &#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;&#x6570;&#x7EC4;&#x5417;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162203434014212109">#2 &#x8BF4;&#x4E00;&#x4E0B; ArrayList &#x548C; LinkedList &#x7684;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162035643785150472">#3 CopyOnWriteArrayList &#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162819765361672199">#4 ArrayDeque&#xFF1A;&#x5982;&#x4F55;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7163985718417555487">#5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">#6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164348785512939551">#7 &#x5982;&#x4F55;&#x4F7F;&#x7528; LinkedHashMap &#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7165044834590261256">#8 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7166202551782604837">#9 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7166202801470013476">#10 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/6882370280946302983">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bc0395bbb4fd179c90d2e7fa7ac7210602cc6f9a1f6d67d395295c57e54d8b98" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/37431ddc43ceb832cf309761266382d2.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7163985718417555487.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7163985718417555487.html" itemprop="url">Java & Android 集合框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-09T20:03:37+08:00">
                2022-11-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5B66;&#x4E60;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x638C;&#x63E1;&#x95EE;&#x9898;&#x80CC;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x601D;&#x7EF4;&#x6846;&#x67B6;&#xFF0C;&#x4F60;&#x7684;&#x601D;&#x8003;&#x8D8A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x57DF;&#x5C31;&#x8D8A;&#x5E7F;&#xFF0C;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#x4E5F;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F80;&#x5F80;&#x4E0D;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784; / &#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F; Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 5 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x5F6D;&#x3002;</p>
<p><a href="https://dev.newban.cn/7163301919316934693">&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;</a>&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x5230;&#x4E86;&#x6563;&#x5217;&#x8868;&#x7684;&#x6574;&#x4F53;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#xFF0C;&#x5728;&#x540E;&#x7EED;&#x51E0;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4EE5; Java &#x8BED;&#x8A00;&#x4E3A;&#x4F8B;&#xFF0C;&#x5206;&#x6790;&#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x5B9E;&#x73B0;&#x7684;&#x6563;&#x5217;&#x8868;&#x5B9E;&#x73B0;&#xFF0C;&#x5305;&#x62EC; HashMap&#x3001;<a href="https://dev.newban.cn/7166202551782604837">ThreadLocalMap</a>&#x3001;<a href="https://dev.newban.cn/7164348785512939551">LinkedHashMap</a> &#x548C; ConcurrentHashMap&#x3002;</p>
<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BA8;&#x8BBA; Java &#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x975E;&#x5E38;&#x5178;&#x578B;&#x7684;&#x6563;&#x5217;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x4E5F;&#x662F; &#x201C;&#x9762;&#x8BD5;&#x516B;&#x80A1;&#x6587;&#x201D; &#x7684;&#x6807;&#x51C6;&#x9898;&#x5E93;&#x4E4B;&#x4E00; &#x2014;&#x2014; HashMap&#x3002;</p>
<p>&#x672C;&#x6587;&#x6E90;&#x7801;&#x57FA;&#x4E8E; Java 8 HashMap&#xFF0C;&#x5E76;&#x5173;&#x8054;&#x5206;&#x6790;&#x90E8;&#x5206; Java 7 HashMap&#x3002;</p>
<ul>
<li><a href="https://dev.newban.cn/7163985718417555487">Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6; #5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6; #6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<hr>
<p><strong>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF1A;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d6122cbc8eb3ddaa4e7b9f06fd3ed252555bf976effb1045fb9030c03ca28dd0" alt></p>
<hr>
<ol>
<li>&#x56DE;&#x987E;&#x6563;&#x5217;&#x8868;&#x5DE5;&#x4F5C;&#x539F;&#x7406;</li>
</ol>
<hr>
<p><strong>&#x5728;&#x5206;&#x6790; HashMap &#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x56DE;&#x987E;&#x6563;&#x5217;&#x8868;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;</strong></p>
<p>&#x6563;&#x5217;&#x8868;&#x662F;&#x57FA;&#x4E8E;&#x6563;&#x5217;&#x601D;&#x60F3;&#x5B9E;&#x73B0;&#x7684; Map &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5C06;&#x6563;&#x5217;&#x601D;&#x60F3;&#x5E94;&#x7528;&#x5230;&#x6563;&#x5217;&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x65F6;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7; hash &#x51FD;&#x6570;&#x63D0;&#x53D6;&#x952E;&#xFF08;Key&#xFF09;&#x7684;&#x7279;&#x5F81;&#x503C;&#xFF08;&#x6563;&#x5217;&#x503C;&#xFF09;&#xFF0C;&#x518D;&#x5C06;&#x952E;&#x503C;&#x5BF9;&#x6620;&#x5C04;&#x5230;&#x56FA;&#x5B9A;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E2D;&#xFF0C;&#x5229;&#x7528;&#x6570;&#x7EC4;&#x652F;&#x6301;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5B9E;&#x73B0; O(1) &#x65F6;&#x95F4;&#x7684;&#x5B58;&#x50A8;&#x548C;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x3002;</p>
<p><code>&#x6563;&#x5217;&#x8868;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/0e2f064c78aad4a4d2a517db0316f1e3010b93b9840d14cd4e13b168c25407ec" alt></p>
<p>&#x5728;&#x4ECE;&#x952E;&#x503C;&#x5BF9;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6563;&#x5217;&#x8868;&#x4F1A;&#x5B58;&#x5728; 2 &#x6B21;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF1A;</p>
<ul>
<li><strong>&#x7B2C; 1 &#x6B21; - hash &#x51FD;&#x6570;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF1A;</strong> &#x8FD9;&#x662F;&#x4E00;&#x822C;&#x610F;&#x4E49;&#x4E0A;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF1B;</li>
<li><strong>&#x7B2C; 2 &#x6B21; - &#x6563;&#x5217;&#x503C;&#x53D6;&#x4F59;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF1A;</strong> &#x672C;&#x8D28;&#x4E0A;&#xFF0C;&#x5C06;&#x6563;&#x5217;&#x503C;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E5F;&#x662F;&#x4E00;&#x6B21; Hash &#x7B97;&#x6CD5;&#xFF0C;&#x4E5F;&#x4F1A;&#x5B58;&#x5728;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x8FD9;&#x4E5F;&#x8BF4;&#x660E; HashMap &#x4E2D;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#x8282;&#x70B9;&#x7684;&#x6563;&#x5217;&#x503C;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</li>
</ul>
<p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x7531;&#x4E8E;&#x6563;&#x5217;&#x8868;&#x662F;&#x538B;&#x7F29;&#x6620;&#x5C04;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF0C;&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x6563;&#x5217;&#x8868;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x800C;&#x5931;&#x53BB;&#x6B63;&#x786E;&#x6027;&#x3002;&#x5E38;&#x7528;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x6709; 2 &#x7C7B;&#xFF1A;</p>
<ul>
<li><strong>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#xFF1A;</strong> &#x4F8B;&#x5982; ThreadLocalMap&#xFF1B;</li>
<li><strong>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#xFF1A;</strong> &#x4F8B;&#x5982;&#x4ECA;&#x5929;&#x8981;&#x5206;&#x6790;&#x7684; HashMap &#x6563;&#x5217;&#x8868;&#x3002;</li>
</ul>
<p><strong>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#xFF08;Separate Chaining&#xFF09;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#xFF1A;</strong> &#x5728;&#x51FA;&#x73B0;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x5C06;&#x51B2;&#x7A81;&#x7684;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#xFF08;Bucket / Slot&#xFF09;&#x4E2D;&#xFF0C;&#x6876;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#xFF0C;&#x6216;&#x8005;&#x8DF3;&#x8868;&#x3001;&#x7EA2;&#x9ED1;&#x6811;&#x7B49;&#x52A8;&#x6001;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;&#x76F8;&#x6BD4;&#x4E8E;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#xFF0C;&#x94FE;&#x8868;&#x6CD5;&#x662F;&#x66F4;&#x5E38;&#x7528;&#x4E14;&#x66F4;&#x7A33;&#x5B9A;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3002;</p>
<p><code>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a549e1bdfc11ba8dcb4238e3ac6675d7aa4de5d9616c5dc2318d0e78c990e9a2" alt></p>
<p>&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x6027;&#x80FD;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E; &#x201C;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x53D1;&#x751F;&#x6982;&#x7387;&#x201D;&#xFF0C;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x8D8A;&#x4F4E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x8D8A;&#x63A5;&#x8FD1;&#x4E8E; O(1)&#x3002; &#x90A3;&#x4E48;&#xFF0C;&#x54EA;&#x4E9B;&#x56E0;&#x7D20;&#x4F1A;&#x5F71;&#x54CD;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x5462;&#xFF1F;&#x4E3B;&#x8981;&#x6709; 3 &#x4E2A;&#xFF1A;</p>
<ul>
<li><strong>&#x56E0;&#x7D20; 1 - &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#xFF1A;</strong> &#x88C5;&#x8F7D;&#x56E0;&#x5B50; (Load Factor) = &#x6563;&#x5217;&#x8868;&#x4E2D;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x76EE; / &#x6563;&#x5217;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x968F;&#x7740;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x53D1;&#x751F;&#x6982;&#x7387;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x4F7F;&#x5F97;&#x6563;&#x5217;&#x8868;&#x64CD;&#x4F5C;&#x7684;&#x5E73;&#x5747;&#x65F6;&#x95F4;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF1B;</li>
<li><strong>&#x56E0;&#x7D20; 2 - &#x91C7;&#x7528;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x7684;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x5929;&#x7136;&#x6BD4;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x9AD8;&#xFF0C;&#x9002;&#x5408;&#x4E8E;&#x5C0F;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x8F83;&#x5C0F;&#x7684;&#x573A;&#x666F;&#xFF1B;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x5BF9;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x5BB9;&#x5FCD;&#x5EA6;&#x66F4;&#x9AD8;&#xFF0C;&#x9002;&#x5408;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x5927;&#x5BF9;&#x8C61;&#xFF08;&#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x6307;&#x9488;&#xFF09;&#x7684;&#x573A;&#x666F;&#xFF1B;</li>
<li><strong>&#x56E0;&#x7D20; 3 - &#x6563;&#x5217;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;&#xFF1A;</strong> &#x6563;&#x5217;&#x7B97;&#x6CD5;&#x968F;&#x673A;&#x6027;&#x548C;&#x9AD8;&#x6548;&#x6027;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5982;&#x679C;&#x6563;&#x5217;&#x503C;&#x4E0D;&#x591F;&#x968F;&#x673A;&#xFF0C;&#x5373;&#x4F7F;&#x6563;&#x5217;&#x8868;&#x6574;&#x4F53;&#x7684;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0D;&#x9AD8;&#xFF0C;&#x4E5F;&#x4F1A;&#x4F7F;&#x5F97;&#x6570;&#x636E;&#x805A;&#x96C6;&#x5728;&#x67D0;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x6216;&#x6876;&#x5185;&#xFF0C;&#x4F9D;&#x7136;&#x4F1A;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x7684;&#x6027;&#x80FD;&#x3002;</li>
</ul>
<hr>
<ol start="2">
<li>&#x8BA4;&#x8BC6; HashMap &#x6563;&#x5217;&#x8868;</li>
</ol>
<hr>
<h3 id="2-1-&#x8BF4;&#x4E00;&#x4E0B;-HashMap-&#x7684;&#x5E95;&#x5C42;&#x7ED3;&#x6784;&#xFF1F;"><a href="#2-1-&#x8BF4;&#x4E00;&#x4E0B;-HashMap-&#x7684;&#x5E95;&#x5C42;&#x7ED3;&#x6784;&#xFF1F;" class="headerlink" title="2.1 &#x8BF4;&#x4E00;&#x4E0B; HashMap &#x7684;&#x5E95;&#x5C42;&#x7ED3;&#x6784;&#xFF1F;"></a>2.1 <strong>&#x8BF4;&#x4E00;&#x4E0B; HashMap &#x7684;&#x5E95;&#x5C42;&#x7ED3;&#x6784;&#xFF1F;</strong></h3><p><strong>HashMap &#x662F;&#x57FA;&#x4E8E;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x89E3;&#x51B3;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x52A8;&#x6001;&#x6563;&#x5217;&#x8868;&#xFF1A;</strong></p>
<ul>
<li>&#x5728; Java 7 &#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x662F; &#x201C;&#x6570;&#x7EC4; + &#x94FE;&#x8868;&#x201D;&#xFF0C;&#x53D1;&#x751F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x7528;&#x5934;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;&#x5355;&#x94FE;&#x8868;&#x4E2D;&#xFF1B;</li>
<li>&#x5728; Java 8 &#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x662F; &#x201C;&#x6570;&#x7EC4; + &#x94FE;&#x8868; + &#x7EA2;&#x9ED1;&#x6811;&#x201D;&#xFF0C;&#x53D1;&#x751F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x7528;&#x5C3E;&#x63D2;&#x6CD5;&#x6DFB;&#x52A0;&#x5230;&#x5355;&#x94FE;&#x8868;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x94FE;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x5927;&#x4E8E; 8 &#x65F6;&#x4E14;&#x6563;&#x5217;&#x8868;&#x5BB9;&#x91CF;&#x5927;&#x4E8E; 64&#xFF0C;&#x4F1A;&#x5C06;&#x94FE;&#x8868;&#x6811;&#x5316;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x3002;&#x5728;&#x6269;&#x5BB9;&#x518D;&#x6563;&#x5217;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x957F;&#x5EA6;&#x4F4E;&#x4E8E; 6 &#x5219;&#x4F1A;&#x8FD8;&#x539F;&#x4E3A;&#x94FE;&#x8868;&#xFF1B;</li>
<li>HashMap &#x7684;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x4FDD;&#x8BC1;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x9ED8;&#x8BA4;&#x7684;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x662F; 16&#xFF0C;&#x9ED8;&#x8BA4;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x662F; 0.75&#xFF0C;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x662F; 12&#xFF08;16*0.75&#xFF09;&#xFF1B;</li>
<li>&#x5728;&#x521B;&#x5EFA; HashMap &#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x61D2;&#x521D;&#x59CB;&#x5316;&#x673A;&#x5236;&#xFF0C;&#x76F4;&#x5230;&#x7B2C;&#x4E00;&#x6B21; put &#x64CD;&#x4F5C;&#x624D;&#x4F1A;&#x901A;&#x8FC7; resize() &#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x521D;&#x59CB;&#x5316;&#x6570;&#x7EC4;;</li>
<li>HashMap &#x7684; Key &#x548C; Value &#x90FD;&#x652F;&#x6301; null&#xFF0C;Key &#x4E3A; null &#x7684;&#x952E;&#x503C;&#x5BF9;&#x4F1A;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E3A; 0 &#x7684;&#x6876;&#x4E2D;&#x3002;</li>
</ul>
<h3 id="2-2-&#x4E3A;&#x4EC0;&#x4E48;-HashMap-&#x91C7;&#x7528;&#x62C9;&#x94FE;&#x6CD5;&#x800C;&#x4E0D;&#x662F;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#xFF1F;"><a href="#2-2-&#x4E3A;&#x4EC0;&#x4E48;-HashMap-&#x91C7;&#x7528;&#x62C9;&#x94FE;&#x6CD5;&#x800C;&#x4E0D;&#x662F;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#xFF1F;" class="headerlink" title="2.2 &#x4E3A;&#x4EC0;&#x4E48; HashMap &#x91C7;&#x7528;&#x62C9;&#x94FE;&#x6CD5;&#x800C;&#x4E0D;&#x662F;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#xFF1F;"></a>2.2 &#x4E3A;&#x4EC0;&#x4E48; HashMap &#x91C7;&#x7528;&#x62C9;&#x94FE;&#x6CD5;&#x800C;&#x4E0D;&#x662F;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#xFF1F;</h3><p><strong>&#x6211;&#x8BA4;&#x4E3A; Java &#x7ED9;&#x4E88; HashMap &#x7684;&#x5B9A;&#x4F4D;&#x662F;&#x4E00;&#x4E2A;&#x76F8;&#x5BF9; &#x201C;&#x901A;&#x7528;&#x201D; &#x7684;&#x6563;&#x5217;&#x8868;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x5E94;&#x8BE5;&#x5728;&#x9762;&#x5BF9;&#x5404;&#x79CD;&#x8F93;&#x5165;&#x573A;&#x666F;&#x4E2D;&#x90FD;&#x8868;&#x73B0;&#x7A33;&#x5B9A;&#x3002;</strong></p>
<p>&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x53D1;&#x751F;&#x6982;&#x7387;&#x5929;&#x7136;&#x6BD4;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x66F4;&#x9AD8;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x4E8E;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x7684;&#x6563;&#x5217;&#x8868;&#x4E0D;&#x80FD;&#x628A;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x4E0A;&#x9650;&#x8BBE;&#x7F6E;&#x5F97;&#x5F88;&#x9AD8;&#x3002;&#x5728;&#x5B58;&#x50A8;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x91CF;&#x65F6;&#xFF0C;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x9700;&#x8981;&#x9884;&#x5148;&#x7533;&#x8BF7;&#x66F4;&#x5927;&#x7684;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#xFF0C;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E5F;&#x4E0D;&#x4F1A;&#x9AD8;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x53EA;&#x9002;&#x5408;&#x5C0F;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x8F83;&#x5C0F;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<p>&#x800C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x5BF9;&#x4E8E;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x5BB9;&#x5FCD;&#x5EA6;&#x66F4;&#x9AD8;&#xFF0C;&#x80FD;&#x591F;&#x9002;&#x5408;&#x5927;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x66F4;&#x9AD8;&#x7684;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#xFF0C;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x66F4;&#x9AD8;&#x3002;&#x867D;&#x7136;&#x94FE;&#x8868;&#x8282;&#x70B9;&#x4F1A;&#x591A;&#x6D88;&#x8017;&#x4E00;&#x4E2A;&#x6307;&#x9488;&#x5185;&#x5B58;&#xFF0C;&#x4F46;&#x5728;&#x4E00;&#x822C;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x4E2D;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x4E0D;&#x8BA1;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E3E;&#x4E2A;&#x53CD;&#x4F8B;&#xFF0C;&#x5728; Java &#x539F;&#x751F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#xFF0C;&#x4E5F;&#x5B58;&#x5728;&#x4F7F;&#x7528;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x7684;&#x6563;&#x5217;&#x8868; &#x2014;&#x2014; &#x5C31;&#x662F; ThreadlLocal&#x3002;&#x56E0;&#x4E3A;&#x9879;&#x76EE;&#x4E2D;&#x4E0D;&#x4F1A;&#x5927;&#x91CF;&#x4F7F;&#x7528; ThreadLocal &#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x5B58;&#x50A8;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5C0F;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x573A;&#x666F;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x662F;&#x6CA1;&#x95EE;&#x9898;&#x7684;&#x3002;</p>
<h3 id="2-3-&#x4E3A;&#x4EC0;&#x4E48;-HashMap-&#x5728;-Java-8-&#x8981;&#x5F15;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x5462;&#xFF1F;"><a href="#2-3-&#x4E3A;&#x4EC0;&#x4E48;-HashMap-&#x5728;-Java-8-&#x8981;&#x5F15;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x5462;&#xFF1F;" class="headerlink" title="2.3 &#x4E3A;&#x4EC0;&#x4E48; HashMap &#x5728; Java 8 &#x8981;&#x5F15;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x5462;&#xFF1F;"></a>2.3 &#x4E3A;&#x4EC0;&#x4E48; HashMap &#x5728; Java 8 &#x8981;&#x5F15;&#x5165;&#x7EA2;&#x9ED1;&#x6811;&#x5462;&#xFF1F;</h3><p>&#x56E0;&#x4E3A;&#x5F53;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x52A0;&#x5267;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x94FE;&#x8868;&#x4E2D;&#x5BFB;&#x627E;&#x5BF9;&#x5E94;&#x5143;&#x7D20;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F; O(K)&#xFF0C;K &#x662F;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x3002;&#x5728;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x6620;&#x5C04;&#x5230;&#x76F8;&#x540C;&#x94FE;&#x8868;&#x65F6;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4F1A; &#x201C;&#x9000;&#x5316;&#x201D; &#x5230; O(n)&#x3002;</p>
<p>&#x800C;&#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#xFF08;&#x8FD1;&#x4F3C;&#x5E73;&#x8861;&#x7684;&#x4E8C;&#x53C9;&#x641C;&#x7D22;&#x6811;&#xFF09;&#x7684;&#x8BDD;&#xFF0C;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4E0E;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x6709;&#x5173;&#xFF0C; <strong>&#x67E5;&#x627E;&#x590D;&#x6742;&#x5EA6;&#x662F; O(lgK)&#xFF0C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F; O(lgn)&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x66F4;&#x4F4E;&#x3002;</strong></p>
<h3 id="2-4-&#x4E3A;&#x4EC0;&#x4E48;-HashMap-&#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x800C;&#x4E0D;&#x662F;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF1F;"><a href="#2-4-&#x4E3A;&#x4EC0;&#x4E48;-HashMap-&#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x800C;&#x4E0D;&#x662F;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF1F;" class="headerlink" title="2.4 &#x4E3A;&#x4EC0;&#x4E48; HashMap &#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x800C;&#x4E0D;&#x662F;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF1F;"></a>2.4 &#x4E3A;&#x4EC0;&#x4E48; HashMap &#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#x800C;&#x4E0D;&#x662F;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#xFF1F;</h3><p><strong>&#x8FD9;&#x662F;&#x5728;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x548C;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x4E0A;&#x7684;&#x6743;&#x8861;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x548C;&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x5B83;&#x4EEC;&#x7684;&#x5E73;&#x8861;&#x7A0B;&#x5EA6;&#x7684;&#x5F3A;&#x5F31;&#x4E0D;&#x540C;&#xFF1A;</strong></p>
<p>&#x5E73;&#x8861;&#x4E8C;&#x53C9;&#x6811;&#x8FFD;&#x6C42;&#x7684;&#x662F;&#x4E00;&#x79CD; <strong>&#x201C;&#x5B8C;&#x5168;&#x5E73;&#x8861;&#x201D;</strong> &#x72B6;&#x6001;&#xFF1A;&#x4EFB;&#x4F55;&#x7ED3;&#x70B9;&#x7684;&#x5DE6;&#x53F3;&#x5B50;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x5DEE;&#x4E0D;&#x4F1A;&#x8D85;&#x8FC7; 1&#x3002;&#x4F18;&#x52BF;&#x662F;&#x6811;&#x7684;&#x7ED3;&#x70B9;&#x662F;&#x5F88;&#x5E73;&#x5747;&#x5206;&#x914D;&#x7684;&#xFF1B;</p>
<p>&#x7EA2;&#x9ED1;&#x6811;&#x4E0D;&#x8FFD;&#x6C42;&#x8FD9;&#x79CD;&#x5B8C;&#x5168;&#x5E73;&#x8861;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x662F;&#x8FFD;&#x6C42;&#x4E00;&#x79CD; <strong>&#x201C;&#x5F31;&#x5E73;&#x8861;&#x201D;</strong> &#x72B6;&#x6001;&#xFF1A;&#x6574;&#x4E2A;&#x6811;&#x6700;&#x957F;&#x8DEF;&#x5F84;&#x4E0D;&#x4F1A;&#x8D85;&#x8FC7;&#x6700;&#x77ED;&#x8DEF;&#x5F84;&#x7684; 2 &#x500D;&#x3002;&#x4F18;&#x52BF;&#x662F;&#x867D;&#x7136;&#x727A;&#x7272;&#x4E86;&#x4E00;&#x90E8;&#x5206;&#x67E5;&#x627E;&#x7684;&#x6027;&#x80FD;&#x6548;&#x7387;&#xFF0C;&#x4F46;&#x662F;&#x80FD;&#x591F;&#x6362;&#x53D6;&#x4E00;&#x90E8;&#x5206;&#x7EF4;&#x6301;&#x6811;&#x5E73;&#x8861;&#x72B6;&#x6001;&#x7684;&#x6210;&#x672C;&#x3002;</p>
<h3 id="2-5-&#x4E3A;&#x4EC0;&#x4E48;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;-String-&#x4F5C;&#x4E3A;-HashMap-&#x7684;-Key&#xFF1F;"><a href="#2-5-&#x4E3A;&#x4EC0;&#x4E48;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;-String-&#x4F5C;&#x4E3A;-HashMap-&#x7684;-Key&#xFF1F;" class="headerlink" title="2.5 &#x4E3A;&#x4EC0;&#x4E48;&#x7ECF;&#x5E38;&#x4F7F;&#x7528; String &#x4F5C;&#x4E3A; HashMap &#x7684; Key&#xFF1F;"></a>2.5 &#x4E3A;&#x4EC0;&#x4E48;&#x7ECF;&#x5E38;&#x4F7F;&#x7528; String &#x4F5C;&#x4E3A; HashMap &#x7684; Key&#xFF1F;</h3><ul>
<li><strong>1&#x3001;&#x4E0D;&#x53EF;&#x53D8;&#x7C7B; String &#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4FEE;&#x6539;&#x540E;&#x65E0;&#x6CD5;&#x5B9A;&#x4F4D;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x5047;&#x8BBE; String &#x662F;&#x53EF;&#x53D8;&#x7C7B;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5728; HashMap &#x4E2D;&#x6784;&#x5EFA;&#x8D77;&#x4E00;&#x4E2A;&#x4EE5; String &#x4E3A; Key &#x7684;&#x952E;&#x503C;&#x5BF9;&#x65F6;&#xFF0C;&#x6B64;&#x65F6;&#x5BF9; String &#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x90A3;&#x4E48;&#x901A;&#x8FC7;&#x4FEE;&#x6539;&#x540E;&#x7684; String &#x662F;&#x65E0;&#x6CD5;&#x5339;&#x914D;&#x5230;&#x521A;&#x624D;&#x6784;&#x5EFA;&#x8FC7;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x4FEE;&#x6539;&#x540E;&#x7684; hashCode &#x53EF;&#x80FD;&#x4F1A;&#x53D8;&#x5316;&#xFF0C;&#x800C;&#x4E0D;&#x53EF;&#x53D8;&#x7C7B;&#x53EF;&#x4EE5;&#x89C4;&#x907F;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</li>
<li><strong>2&#x3001;String &#x80FD;&#x591F;&#x6EE1;&#x8DB3; Java &#x5BF9;&#x4E8E; hashCode() &#x548C; equals() &#x7684;&#x901A;&#x7528;&#x7EA6;&#x5B9A;&#xFF1A;</strong> &#x65E2;&#x4E24;&#x4E2A;&#x5BF9;&#x8C61; equals() &#x76F8;&#x540C;&#xFF0C;&#x5219; hashCode() &#x76F8;&#x540C;&#xFF0C;&#x5982;&#x679C; hashCode() &#x76F8;&#x540C;&#xFF0C;&#x5219; equals() &#x4E0D;&#x4E00;&#x5B9A;&#x76F8;&#x540C;&#x3002;&#x8FD9;&#x4E2A;&#x7EA6;&#x5B9A;&#x662F;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x4E24;&#x4E2A; equals() &#x76F8;&#x540C;&#x7684; Key &#x5728; HashMap &#x4E2D;&#x5B58;&#x50A8;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x952E;&#x503C;&#x5BF9;&#xFF0C;&#x5F15;&#x8D77;&#x77DB;&#x76FE;&#x3002;</li>
</ul>
<h3 id="2-6-HashMap-&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F1A;&#x51FA;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;"><a href="#2-6-HashMap-&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F1A;&#x51FA;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;" class="headerlink" title="2.6 HashMap &#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F1A;&#x51FA;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;"></a>2.6 HashMap &#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x7A0B;&#x5E8F;&#x4E2D;&#x4F1A;&#x51FA;&#x73B0;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;</h3><ul>
<li><strong>&#x6570;&#x636E;&#x8986;&#x76D6;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#x6267;&#x884C; put &#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x7684; hash &#x503C;&#x51B2;&#x7A81;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x8986;&#x76D6;&#xFF08;&#x7EBF;&#x7A0B; A &#x5224;&#x65AD; hash &#x503C;&#x4F4D;&#x7F6E;&#x4E3A; null&#xFF0C;&#x8FD8;&#x672A;&#x5199;&#x5165;&#x6570;&#x636E;&#x65F6;&#x6302;&#x8D77;&#xFF0C;&#x6B64;&#x65F6;&#x7EBF;&#x7A0B; B &#x6B63;&#x5E38;&#x63D2;&#x5165;&#x6570;&#x636E;&#x3002;&#x63A5;&#x7740;&#x7EBF;&#x7A0B; A &#x83B7;&#x5F97;&#x65F6;&#x95F4;&#x7247;&#xFF0C;&#x7531;&#x4E8E;&#x7EBF;&#x7A0B; A &#x4E0D;&#x4F1A;&#x91CD;&#x65B0;&#x5224;&#x65AD;&#x8BE5;&#x4F4D;&#x7F6E;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#xFF0C;&#x5C31;&#x4F1A;&#x628A;&#x521A;&#x624D;&#x7EBF;&#x7A0B; B &#x5199;&#x5165;&#x7684;&#x6570;&#x636E;&#x8986;&#x76D6;&#x6389;&#xFF09;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E2A;&#x672A;&#x540C;&#x6B65;&#x6570;&#x636E;&#x5728;&#x4EFB;&#x610F;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E2D;&#x90FD;&#x4F1A;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;</li>
<li><strong>&#x73AF;&#x5F62;&#x94FE;&#x8868;&#x95EE;&#x9898;&#xFF1A;</strong> &#x5728; HashMap &#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x65F6;&#xFF0C;&#x5E76;&#x4E14;&#x6B63;&#x597D;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x5728;&#x64CD;&#x4F5C;&#x540C;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x5F15;&#x8D77;&#x6307;&#x9488;&#x6DF7;&#x4E71;&#xFF0C;&#x5F62;&#x6210;&#x73AF;&#x578B;&#x94FE;&#x6761;&#xFF08;&#x56E0;&#x4E3A; Java 7 &#x7248;&#x672C;&#x91C7;&#x7528;&#x5934;&#x63D2;&#x6CD5;&#xFF0C;&#x5728;&#x6269;&#x5BB9;&#x65F6;&#x4F1A;&#x7FFB;&#x8F6C;&#x94FE;&#x8868;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x800C; Java 8 &#x91C7;&#x7528;&#x5C3E;&#x63D2;&#x6CD5;&#xFF0C;&#x518D;&#x6269;&#x5BB9;&#x65F6;&#x4F1A;&#x4FDD;&#x6301;&#x94FE;&#x8868;&#x539F;&#x672C;&#x7684;&#x987A;&#x5E8F;&#xFF09;&#x3002;</li>
</ul>
<h3 id="2-7-HashMap-&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1F;"><a href="#2-7-HashMap-&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1F;" class="headerlink" title="2.7 HashMap &#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1F;"></a>2.7 HashMap &#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1F;</h3><p>&#x6709; 3 &#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul>
<li><strong>&#x65B9;&#x5F0F; 1 - &#x4F7F;&#x7528; hashTable &#x5BB9;&#x5668;&#x7C7B;&#xFF08;&#x8FC7;&#x65F6;&#xFF09;&#xFF1A;</strong> hashTable &#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7248;&#x672C;&#x7684;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x5B83;&#x4F1A;&#x5728;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x4E0A;&#x589E;&#x52A0; synchronized &#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4E14;&#x4E0D;&#x652F;&#x6301; null &#x4F5C;&#x4E3A; Key&#x3002;</li>
<li><strong>&#x65B9;&#x6CD5; 2 - &#x4F7F;&#x7528; Collections.synchronizedMap &#x5305;&#x88C5;&#x7C7B;&#xFF1A;</strong> &#x539F;&#x7406;&#x4E5F;&#x662F;&#x5728;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x4E0A;&#x589E;&#x52A0; synchronized &#x5173;&#x952E;&#x5B57;&#xFF1B;</li>
<li><strong>&#x65B9;&#x6CD5; 3 - &#x4F7F;&#x7528; ConcurrentHashMap &#x5BB9;&#x5668;&#x7C7B;&#xFF1A;</strong> &#x57FA;&#x4E8E; CAS &#x65E0;&#x9501; + &#x5206;&#x6BB5;&#x5B9E;&#x73B0;&#x7684;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6563;&#x5217;&#x8868;&#xFF1B;</li>
</ul>
<hr>
<ol start="3">
<li>HashMap &#x7684;&#x5C5E;&#x6027;</li>
</ol>
<hr>
<p>&#x5728;&#x5206;&#x6790; HashMap &#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x7528;&#x4E00;&#x4E2A;&#x8868;&#x683C;&#x6574;&#x7406; HashMap &#x7684;&#x5C5E;&#x6027;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x7248;&#x672C;</th>
<th>&#x6570;&#x636E;&#x7ED3;&#x6784;</th>
<th>&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;</th>
<th>&#x5C5E;&#x6027;</th>
</tr>
</thead>
<tbody><tr>
<td>Java 7</td>
<td>&#x6570;&#x7EC4; + &#x94FE;&#x8868;</td>
<td>Entry&#xFF08;&#x5355;&#x94FE;&#x8868;&#xFF09;</td>
<td>1&#x3001;table&#xFF08;&#x6570;&#x7EC4;&#xFF09;2&#x3001;size&#xFF08;&#x5C3A;&#x5BF8;&#xFF09;3&#x3001;threshold&#xFF08;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF09;4&#x3001;loadFactor&#xFF08;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#xFF09;5&#x3001;modCount&#xFF08;&#x4FEE;&#x6539;&#x8BA1;&#x6570;&#xFF09;6&#x3001;&#x9ED8;&#x8BA4;&#x6570;&#x7EC4;&#x5BB9;&#x91CF; 167&#x3001;&#x6700;&#x5927;&#x6570;&#x7EC4;&#x5BB9;&#x91CF; 2^308&#x3001;&#x9ED8;&#x8BA4;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50; 0.75</td>
</tr>
<tr>
<td>Java 8</td>
<td>&#x6570;&#x7EC4; + &#x94FE;&#x8868; + &#x7EA2;&#x9ED1;&#x6811;</td>
<td>1&#x3001;Node&#xFF08;&#x5355;&#x94FE;&#x8868;&#xFF09;2&#x3001;TreeNode&#xFF08;&#x7EA2;&#x9ED1;&#x6811;&#xFF09;</td>
<td>9&#x3001;&#x6876;&#x7684;&#x6811;&#x5316;&#x9608;&#x503C; 810&#x3001;&#x6876;&#x7684;&#x8FD8;&#x539F;&#x9608;&#x503C; 611&#x3001;&#x6700;&#x5C0F;&#x6811;&#x5316;&#x5BB9;&#x91CF;&#x9608;&#x503C; 64</td>
</tr>
</tbody></table>
<p><code>HashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt;</span><br><span class="line">    implements Map&lt;K,V&gt;, Cloneable, Serializable {</span><br><span class="line"></span><br><span class="line">    // &#x9ED8;&#x8BA4;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;</span><br><span class="line">    static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</span><br><span class="line"></span><br><span class="line">    // &#x7591;&#x95EE; 3&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x6700;&#x5927;&#x5BB9;&#x91CF;&#x662F; 2^30 &#x6B21;&#x5E42;&#xFF1F;</span><br><span class="line">    // &#x7591;&#x95EE; 4&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; HashMap &#x8981;&#x6C42;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1F;</span><br><span class="line">    // &#x6570;&#x7EC4;&#x6700;&#x5927;&#x5BB9;&#x91CF;&#xFF1A;2^30&#xFF08;&#x9AD8;&#x4F4D; 0100&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0&#xFF09;</span><br><span class="line">    static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</span><br><span class="line"></span><br><span class="line">    // &#x9ED8;&#x8BA4;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#xFF1A;0.75</span><br><span class="line">    static final float DEFAULT_LOAD_FACTOR = 0.75f;</span><br><span class="line"></span><br><span class="line">    // &#x7591;&#x95EE; 5&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8BBE;&#x7F6E;&#x6876;&#x7684;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6570;&#x7EC4; + &#x7EA2;&#x9ED1;&#x6811;&#xFF1F;</span><br><span class="line">    // &#xFF08;Java 8 &#x65B0;&#x589E;&#xFF09;&#x6876;&#x7684;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF1A;8</span><br><span class="line">    static final int TREEIFY_THRESHOLD = 8;</span><br><span class="line"></span><br><span class="line">    // &#xFF08;Java 8 &#x65B0;&#x589E;&#xFF09;&#x6876;&#x7684;&#x8FD8;&#x539F;&#x9608;&#x503C;&#xFF1A;6&#xFF08;&#x5728;&#x6269;&#x5BB9;&#x65F6;&#xFF0C;&#x5F53;&#x539F;&#x6709;&#x7684;&#x7EA2;&#x9ED1;&#x6811;&#x5185;&#x6570;&#x91CF; &lt;= 6&#x65F6;&#xFF0C;&#x5219;&#x5C06;&#x7EA2;&#x9ED1;&#x6811;&#x8FD8;&#x539F;&#x6210;&#x94FE;&#x8868;&#xFF09;</span><br><span class="line">    static final int UNTREEIFY_THRESHOLD = 6;</span><br><span class="line"></span><br><span class="line">    // &#x7591;&#x95EE; 6&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5728;&#x8BBE;&#x7F6E;&#x6876;&#x7684;&#x6811;&#x5316;&#x9608;&#x503C;&#x540E;&#xFF0C;&#x8FD8;&#x8981;&#x8BBE;&#x7F6E;&#x6811;&#x5316;&#x7684;&#x6700;&#x5C0F;&#x5BB9;&#x91CF;&#xFF1F;</span><br><span class="line">    // &#xFF08;Java 8 &#x65B0;&#x589E;&#xFF09;&#x6811;&#x5316;&#x7684;&#x6700;&#x5C0F;&#x5BB9;&#x91CF;&#xFF1A;64&#xFF08;&#x53EA;&#x6709;&#x6574;&#x4E2A;&#x6563;&#x5217;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x6EE1;&#x8DB3;&#x6700;&#x5C0F;&#x5BB9;&#x91CF;&#x8981;&#x6C42;&#x65F6;&#x624D;&#x5141;&#x8BB8;&#x94FE;&#x8868;&#x6811;&#x5316;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x76F4;&#x63A5;&#x6269;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6811;&#x5316;&#xFF09;</span><br><span class="line">    static final int MIN_TREEIFY_CAPACITY = 64;</span><br><span class="line"></span><br><span class="line">    // &#x5E95;&#x5C42;&#x6570;&#x7EC4;&#xFF08;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x94FE;&#x8868;&#x6216;&#x7EA2;&#x9ED1;&#x6811;&#xFF09;</span><br><span class="line">    transient Node&lt;K,V&gt;[] table;</span><br><span class="line"></span><br><span class="line">    // entrySet() &#x8FD4;&#x56DE;&#x503C;&#x7F13;&#x5B58;</span><br><span class="line">    transient Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="line"></span><br><span class="line">    // &#x6709;&#x6548;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x91CF;</span><br><span class="line">    transient int size;</span><br><span class="line"></span><br><span class="line">    // &#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF08;&#x5BB9;&#x91CF; * &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#xFF09;</span><br><span class="line">    int threshold;		</span><br><span class="line"></span><br><span class="line">    // &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;</span><br><span class="line">    final float loadFactor;</span><br><span class="line"></span><br><span class="line">    // &#x4FEE;&#x6539;&#x8BA1;&#x6570;</span><br><span class="line">    transient int modCount;</span><br><span class="line"></span><br><span class="line">    // &#x94FE;&#x8868;&#x8282;&#x70B9;&#xFF08;&#x4E00;&#x4E2A; Node &#x7B49;&#x4E8E;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#xFF09;</span><br><span class="line">    static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {</span><br><span class="line">        // &#x54C8;&#x5E0C;&#x503C;&#xFF08;&#x76F8;&#x540C;&#x94FE;&#x8868;&#x4E0A; Key &#x7684;&#x54C8;&#x5E0C;&#x503C;&#x53EF;&#x80FD;&#x76F8;&#x540C;&#xFF09;</span><br><span class="line">        final int hash;</span><br><span class="line">        // Key&#xFF08;&#x4E00;&#x4E2A;&#x6563;&#x5217;&#x8868;&#x4E0A; Key &#x7684; equals() &#x4E00;&#x5B9A;&#x4E0D;&#x540C;&#xFF09;</span><br><span class="line">        final K key;</span><br><span class="line">        // Value&#xFF08;Value &#x4E0D;&#x5F71;&#x54CD;&#x8282;&#x70B9;&#x4F4D;&#x7F6E;&#xFF09;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">        Node(int hash, K key, V value, Node&lt;K,V&gt; next) {</span><br><span class="line">            this.hash = hash;</span><br><span class="line">            this.key = key;</span><br><span class="line">            this.value = value;</span><br><span class="line">            this.next = next;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // Node &#x7684; hashCode &#x53D6; Key &#x548C; Value &#x7684; hashCode</span><br><span class="line">        public final int hashCode() {</span><br><span class="line">            return Objects.hashCode(key) ^ Objects.hashCode(value);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x4E24;&#x4E2A; Node &#x7684; Key &#x548C; Value &#x90FD;&#x76F8;&#x7B49;&#xFF0C;&#x624D;&#x8BA4;&#x4E3A;&#x76F8;&#x7B49;</span><br><span class="line">        public final boolean equals(Object o) {</span><br><span class="line">            if (o == this)</span><br><span class="line">                return true;</span><br><span class="line">            if (o instanceof Map.Entry) {</span><br><span class="line">                Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</span><br><span class="line">                if (Objects.equals(key, e.getKey()) &amp;&amp;</span><br><span class="line">                    Objects.equals(value, e.getValue()))</span><br><span class="line">                    return true;</span><br><span class="line">            }</span><br><span class="line">            return false;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">		</span><br><span class="line">    // &#xFF08;Java 8 &#x65B0;&#x589E;&#xFF09;&#x7EA2;&#x9ED1;&#x6811;&#x8282;&#x70B9;</span><br><span class="line">    static final class TreeNode&lt;K,V&gt; extends LinkedHashMap.Entry&lt;K,V&gt; {</span><br><span class="line">        // &#x7236;&#x8282;&#x70B9;</span><br><span class="line">        TreeNode&lt;K,V&gt; parent;</span><br><span class="line">        // &#x5DE6;&#x5B50;&#x8282;&#x70B9;</span><br><span class="line">        TreeNode&lt;K,V&gt; left;</span><br><span class="line">        // &#x53F3;&#x5B50;&#x8282;&#x70B9;</span><br><span class="line">        TreeNode&lt;K,V&gt; right;</span><br><span class="line">        // &#x5220;&#x9664;&#x8F85;&#x52A9;&#x8282;&#x70B9;</span><br><span class="line">        TreeNode&lt;K,V&gt; prev;</span><br><span class="line">        // &#x989C;&#x8272;</span><br><span class="line">        boolean red;</span><br><span class="line"></span><br><span class="line">        TreeNode(int hash, K key, V val, Node&lt;K,V&gt; next) {</span><br><span class="line">            super(hash, key, val, next);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x8FD4;&#x56DE;&#x6811;&#x7684;&#x6839;&#x8282;&#x70B9;</span><br><span class="line">        final TreeNode&lt;K,V&gt; root() {</span><br><span class="line">            for (TreeNode&lt;K,V&gt; r = this, p;;) {</span><br><span class="line">                if ((p = r.parent) == null)</span><br><span class="line">                    return r;</span><br><span class="line">                r = p;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>LinkedHashMap.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;static class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; {</span><br><span class="line">    Entry&lt;K,V&gt; before, after;</span><br><span class="line">    Entry(int hash, K key, V value, Node&lt;K,V&gt; next) {</span><br><span class="line">        super(hash, key, value, next);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x76F8;&#x6BD4;&#x4E8E;&#x7EBF;&#x6027;&#x8868;&#xFF0C;HashMap &#x7684;&#x5C5E;&#x6027;&#x53EF;&#x7B97;&#x662F;&#x4E0A;&#x96BE;&#x5EA6;&#x4E86;&#xFF0C;HashMap &#x771F;&#x5377;&#x3002;&#x4E0D;&#x51FA;&#x610F;&#x5916;&#x7684;&#x8BDD;&#x53C8;&#x6709;&#x5C0F;&#x670B;&#x53CB;&#x51FA;&#x6765;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x4E86;<strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;</strong>&#xFF1A;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 1&#xFF1A;</strong> &#x4E3A;&#x4EC0;&#x4E48;&#x5B57;&#x6BB5;&#x4E0D;&#x58F0;&#x660E; <code>private</code> &#x5173;&#x952E;&#x5B57;&#xFF1F;&#xFF08;&#x56DE;&#x7B54;&#x8FC7;&#x591A;&#x5C11;&#x6B21;&#x4E86;&#xFF0C;&#x628A;&#x624B;&#x7ED9;&#x6211;&#x653E;&#x4E0B;&#xFF09;</li>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 2&#xFF1A;</strong> &#x4E3A;&#x4EC0;&#x4E48;&#x5B57;&#x6BB5;&#x58F0;&#x660E; <code>transient</code> &#x5173;&#x952E;&#x5B57;&#xFF1F;&#xFF08;&#x56DE;&#x7B54;&#x8FC7;&#x591A;&#x5C11;&#x6B21;&#x4E86;&#xFF0C;&#x628A;&#x624B;&#x7ED9;&#x6211;&#x653E;&#x4E0B;&#xFF09;</li>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 3&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x6700;&#x5927;&#x5BB9;&#x91CF;&#x662F; 2^30&#xFF1F;</strong></li>
</ul>
<p><strong>&#x56E0;&#x4E3A; HashMap &#x8981;&#x6C42;&#x6563;&#x5217;&#x8868;&#x7684;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;</strong> &#xFF0C;&#x800C; int &#x7C7B;&#x578B;&#x80FD;&#x591F;&#x8868;&#x793A;&#x7684;&#x6700;&#x5927; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x5C31;&#x662F; 2^30&#xFF0C;&#x5373;&#x9AD8;&#x4F4D;&#x7B2C; 31 &#x4F4D;&#x662F; 1&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0&#x3002;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 4&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; HashMap &#x8981;&#x6C42;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1F;</strong></li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x518D;&#x56DE;&#x7B54;&#x3002;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 5&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8BBE;&#x7F6E;&#x6876;&#x7684;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6570;&#x7EC4; + &#x7EA2;&#x9ED1;&#x6811;&#xFF1F;</strong></li>
</ul>
<p><strong>&#x5176;&#x5B9E;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x662F; &#x201C;&#x515C;&#x5E95;&#x201D; &#x7B56;&#x7565;&#xFF0C;&#x800C;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x6700;&#x4F18;&#x7B56;&#x7565;&#x3002;</strong></p>
<p>&#x9996;&#x5148;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x8282;&#x70B9;&#x672C;&#x8EAB;&#x7684;&#x5185;&#x5B58;&#x6D88;&#x8017;&#x662F;&#x94FE;&#x8868;&#x8282;&#x70B9;&#x7684; 2 &#x500D;&#x3002;&#x5176;&#x6B21;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x5728;&#x6DFB;&#x52A0;&#x548C;&#x5220;&#x9664;&#x6570;&#x636E;&#x65F6;&#x9700;&#x8981;&#x7EF4;&#x62A4;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x4F1A;&#x589E;&#x52A0;&#x65CB;&#x8F6C;&#x7B49;&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5F53;&#x6876;&#x7684;&#x8282;&#x70B9;&#x6570;&#x5F88;&#x4F4E;&#x65F6;&#xFF0C;&#x5E76;&#x4E0D;&#x80FD;&#x4F53;&#x73B0;&#x51FA;&#x7EA2;&#x9ED1;&#x6811;&#x7684;&#x4F18;&#x52BF;&#xFF08;&#x7C7B;&#x4F3C;&#x4E8E; Arrays.sort &#x5728;&#x5B50;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E; 47 &#x65F6;&#x7528;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x800C;&#x4E0D;&#x662F;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF09;&#x3002;</p>
<p>&#x518D;&#x7ED3;&#x5408;&#x6563;&#x5217;&#x5206;&#x6790;&#x7684;&#x6570;&#x636E;&#x7EDF;&#x8BA1;&#xFF0C;&#x5728;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x4E3A; 0.75 &#x4E14;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x4E3A; 0.5 HashMap &#x4E2D;&#xFF0C;&#x6876;&#x957F;&#x5EA6;&#x7684;&#x51FA;&#x73B0;&#x9891;&#x7387;&#x7B26;&#x5408;&#x6CCA;&#x677E;&#x5206;&#x5E03;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7684;&#x6876;&#x5206;&#x5E03;&#x5728; 0 ~ 3 &#x7684;&#x957F;&#x5EA6;&#x4E0A;&#xFF0C;&#x957F;&#x5EA6;&#x5927;&#x4E8E; 8 &#x7684;&#x6876;&#x7684;&#x51FA;&#x73B0;&#x9891;&#x7387;&#x4F4E;&#x4E8E;&#x5343;&#x4E07;&#x5206;&#x4E4B;&#x4E00;&#x3002;</p>
<p>&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5728;&#x5C0F;&#x6876;&#x4E2D;&#x4F7F;&#x7528;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;HashMap &#x5728;&#x6876;&#x7684;&#x957F;&#x5EA6;&#x5927;&#x4E8E;&#x7B49;&#x4E8E; 8 &#x65F6;&#x624D;&#x4F1A;&#x6811;&#x5316;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#x3002;&#x5E76;&#x4E14;&#x5728;&#x6269;&#x5BB9;&#x518D;&#x6563;&#x5217;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6876;&#x7684;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E; 6&#xFF0C;&#x4E5F;&#x4F1A;&#x8FD8;&#x539F;&#x4E3A;&#x94FE;&#x8868;&#x3002;</p>
<p><code>&#x6563;&#x5217;&#x51B2;&#x7A81;&#x6570;&#x636E;&#x7EDF;&#x8BA1;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x4E3A; 0.75&#x3001;&#x5E73;&#x5747;&#x8D1F;&#x8F7D;&#x56E0;&#x5B50;&#x4E3A; 0.5&#xFF0C;&#x4E14;&#x6563;&#x5217;&#x51FD;&#x6570;&#x968F;&#x673A;&#x6027;&#x826F;&#x597D;&#x65F6;&#xFF0C;&#x4E0D;&#x540C;&#x957F;&#x5EA6;&#x6876;&#x7684;&#x51FA;&#x73B0;&#x9891;&#x7387;</span><br><span class="line">0:    0.60653066</span><br><span class="line">1:    0.30326533</span><br><span class="line">2:    0.07581633</span><br><span class="line">3:    0.01263606</span><br><span class="line">4:    0.00157952</span><br><span class="line">5:    0.00015795</span><br><span class="line">6:    0.00001316</span><br><span class="line">7:    0.00000094</span><br><span class="line">8:    0.00000006</span><br><span class="line">more: less than 1 in ten million # &#x4F4E;&#x4E8E;&#x5343;&#x4E07;&#x5206;&#x4E4B;&#x4E00;</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 6&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5728;&#x8BBE;&#x7F6E;&#x6876;&#x7684;&#x6811;&#x5316;&#x9608;&#x503C;&#x540E;&#xFF0C;&#x8FD8;&#x8981;&#x8BBE;&#x7F6E;&#x6811;&#x5316;&#x7684;&#x6700;&#x5C0F;&#x5BB9;&#x91CF;&#xFF1F;</strong></li>
</ul>
<p><strong>&#x8FD9;&#x662F;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x65E0;&#x6548;&#x7684;&#x6811;&#x5316;&#x3002;</strong></p>
<p>&#x5728;&#x6563;&#x5217;&#x8868;&#x7684;&#x5BB9;&#x91CF;&#x8F83;&#x4F4E;&#x65F6;&#xFF0C;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x65F6;&#x5F88;&#x5BB9;&#x6613;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x539F;&#x672C;&#x5DF2;&#x7ECF;&#x6811;&#x5316;&#x7684;&#x6876;&#x4F1A;&#x7531;&#x4E8E;&#x957F;&#x5EA6;&#x4E0B;&#x964D;&#x800C;&#x9000;&#x8FD8;&#x56DE;&#x94FE;&#x8868;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x7EA2;&#x9ED1;&#x6811;&#x4E3A;&#x6811;&#x5316;&#x64CD;&#x4F5C;&#x8BBE;&#x7F6E;&#x4E86;&#x6700;&#x5C0F;&#x5BB9;&#x91CF;&#x8981;&#x6C42;&#xFF1A;&#x5982;&#x679C;&#x94FE;&#x8868;&#x957F;&#x5EA6;&#x8FBE;&#x5230;&#x6811;&#x5316;&#x9608;&#x503C;&#xFF0C;&#x4F46;&#x6563;&#x5217;&#x8868;&#x6574;&#x4F53;&#x7684;&#x957F;&#x5EA6;&#x672A;&#x8FBE;&#x5230;&#x6700;&#x5C0F;&#x5BB9;&#x91CF;&#x8981;&#x6C42;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x76F4;&#x63A5;&#x6269;&#x5BB9;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x6876;&#x4E0A;&#x6811;&#x5316;&#x3002;</p>
<hr>
<p>&#x540E;&#x7EED;&#x6E90;&#x7801;&#x5206;&#x6790;&#xFF0C;&#x89C1;&#x4E0B;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/7164024676618862622">Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6; #6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a>&#x3002;</p>
<hr>
<h3 id="&#x7248;&#x6743;&#x58F0;&#x660E;"><a href="#&#x7248;&#x6743;&#x58F0;&#x660E;" class="headerlink" title="&#x7248;&#x6743;&#x58F0;&#x660E;"></a>&#x7248;&#x6743;&#x58F0;&#x660E;</h3><p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<h3 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><ul>
<li>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x5206;&#x6790; &#xB7; Java &#x8BED;&#x8A00;&#x63CF;&#x8FF0;&#xFF08;&#x7B2C; 5 &#x7AE0; &#xB7; &#x6563;&#x5217;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Mark Allen Weiss &#x8457;</li>
<li>&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#xFF08;&#x7B2C; 11 &#x7AE0; &#xB7; &#x6563;&#x5217;&#x8868;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Thomas H. Cormen &#x7B49; &#x8457;</li>
<li><a href="/external_links/3529d049f48fd001823dfe2eff3eb3ee.html" target="blank" rel="noopener">&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x4E4B;&#x7F8E;&#xFF08;&#x7B2C; 18~22 &#x8BB2;&#xFF09;</a> &#x2014;&#x2014; &#x738B;&#x4E89; &#x8457;&#xFF0C;&#x6781;&#x5BA2;&#x65F6;&#x95F4; &#x51FA;&#x54C1;</li>
<li><a href="https://dev.newban.cn/6844903575642963981">Java&#xFF1A;&#x8FD9;&#x662F;&#x4E00;&#x4EFD;&#x8BE6;&#x7EC6;&amp;&#x5168;&#x9762;&#x7684;HashMap 1.7 &#x6E90;&#x7801;&#x5206;&#x6790;</a> &#x2014;&#x2014; Carson &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903574552461320">Java&#x6E90;&#x7801;&#x5206;&#x6790;&#xFF1A;HashMap 1.8 &#x76F8;&#x5BF9;&#x4E8E;1.7 &#x5230;&#x5E95;&#x66F4;&#x65B0;&#x4E86;&#x4EC0;&#x4E48;&#xFF1F;</a> &#x2014;&#x2014; Carson &#x8457;</li>
<li><a href="/external_links/00c30a159ecda0b5f6af907bb952d70d.html" target="blank" rel="noopener">&#x90FD;&#x8BF4; HashMap &#x662F;&#x7EBF;&#x7A0B;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5230;&#x5E95;&#x4F53;&#x73B0;&#x5728;&#x54EA;&#x513F;&#xFF1F;</a> &#x2014;&#x2014; developer &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903518331994119">&#x6F2B;&#x753B;&#xFF1A;&#x9AD8;&#x5E76;&#x53D1;&#x4E0B;&#x7684;HashMap</a> &#x2014;&#x2014; &#x7A0B;&#x5E8F;&#x5458;&#x5C0F;&#x7070; &#x8457;</li>
<li><a href="https://dev.newban.cn/6844903983748743175">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x201D;&#x51C6;&#x5907;&#x7528;HashMap&#x5B58;1w&#x6761;&#x6570;&#x636E;&#xFF0C;&#x6784;&#x9020;&#x65F6;&#x4F20;10000&#x8FD8;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x5417;&#xFF1F;&#x201D;</a> &#x2014;&#x2014; &#x627F;&#x9999;&#x58A8;&#x5F71; &#x8457;</li>
<li><a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">&#x6563;&#x5217;&#x7B97;&#x6CD5;</a> &#x2014;&#x2014; Wikipedia</li>
<li><a href="/external_links/767a9bab2eefc5d5e282ceb1e3e8b7ad.html" target="blank" rel="noopener">Poisson Distribution</a> &#x2014;&#x2014; Wikipedia</li>
</ul>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF08;2023/07/08 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7161731329078329381">#1 ArrayList &#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;&#x6570;&#x7EC4;&#x5417;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162203434014212109">#2 &#x8BF4;&#x4E00;&#x4E0B; ArrayList &#x548C; LinkedList &#x7684;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162035643785150472">#3 CopyOnWriteArrayList &#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162819765361672199">#4 ArrayDeque&#xFF1A;&#x5982;&#x4F55;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7163985718417555487">#5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">#6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164348785512939551">#7 &#x5982;&#x4F55;&#x4F7F;&#x7528; LinkedHashMap &#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7165044834590261256">#8 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7166202551782604837">#9 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7166202801470013476">#10 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/6882370280946302983">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bc0395bbb4fd179c90d2e7fa7ac7210602cc6f9a1f6d67d395295c57e54d8b98" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/62fe59932645cf71d471c9e2394d919c.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7163581570303918088.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7163581570303918088.html" itemprop="url">【AI】浅谈梯度下降算法（实战篇） 前言 大家族 一维问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-08T17:55:59+08:00">
                2022-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong><em>&#x672C;&#x6587;&#x6B63;&#x5728;&#x53C2;&#x52A0;<a href="https://dev.newban.cn/7162096952883019783">&#x300C;&#x91D1;&#x77F3;&#x8BA1;&#x5212; . &#x74DC;&#x5206;6&#x4E07;&#x73B0;&#x91D1;&#x5927;&#x5956;&#x300D;</a></em></strong></p>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x5728;&#x6C42;&#x89E3;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x7684;&#x6A21;&#x578B;&#x53C2;&#x6570;&#xFF0C;&#x5373;&#x65E0;&#x7EA6;&#x675F;&#x4F18;&#x5316;&#x95EE;&#x9898;&#x65F6;&#xFF0C;<strong>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF08;Gradient Descent&#xFF09;</strong>  &#x662F;&#x6700;&#x5E38;&#x91C7;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x4E00;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x6700;&#x5C0F;&#x4E8C;&#x4E58;&#x6CD5;&#x3002;</p>
<p>&#x5728; <a href="https://dev.newban.cn/7163548247028400159">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x7406;&#x8BBA;&#x7BC7;&#xFF09;</a> &#x8FD9;&#x7BC7;&#x535A;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5B66;&#x4E60;&#x4E86;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x6982;&#x5FF5;&#x4EE5;&#x53CA;&#x7406;&#x8BBA;&#x63A8;&#x5BFC;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x901A;&#x8FC7;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x5B9E;&#x6218;&#xFF0C;&#x7406;&#x8BBA;&#x4E0E;&#x5B9E;&#x8DF5;&#x76F8;&#x7ED3;&#x5408;&#xFF0C;&#x52A0;&#x6DF1;&#x5BF9;&#x77E5;&#x8BC6;&#x70B9;&#x7684;&#x7406;&#x89E3;&#xFF1B;</p>
<h1 id="&#x5927;&#x5BB6;&#x65CF;"><a href="#&#x5927;&#x5BB6;&#x65CF;" class="headerlink" title="&#x5927;&#x5BB6;&#x65CF;"></a>&#x5927;&#x5BB6;&#x65CF;</h1><p>&#x5C3D;&#x7BA1;&#x8BF4;&#x662F;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x4F46;&#x5176;&#x5B9E;&#x5B83;&#x8FD8;&#x662F;&#x4E2A;&#x5E9E;&#x5927;&#x7684;&#x5BB6;&#x65CF;&#xFF0C;&#x5C31;&#x7C7B;&#x4F3C;&#x4E8E;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x6709; C&#x3001;Java&#x3001;Python &#x7B49;&#x4E4B;&#x5206;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x4E5F;&#x88AB;&#x5206;&#x4E3A;&#x4E86;&#x51E0;&#x5927;&#x7C7B;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x6709; BGD&#x3001;SGD&#x3001;MBGD&#xFF1A;</p>
<ul>
<li><code>&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#xFF08;Batch Gradient Descent&#xFF09;</code> : &#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x6700;&#x5E38;&#x7528;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x5177;&#x4F53;&#x505A;&#x6CD5;&#x4E5F;&#x5C31;&#x662F;&#x5728;&#x66F4;&#x65B0;&#x53C2;&#x6570;&#x65F6;&#x4F7F;&#x7528;&#x6240;&#x6709;&#x7684;&#x6837;&#x672C;&#x6765;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF1B;</li>
</ul>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;&#x2211;j=0m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;&#x2211;_{j=0}^m(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;j=0&#x2211;m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)<br>&#x4F18;&#x70B9;&#xFF1A;&#x5168;&#x5C40;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x6613;&#x4E8E;&#x5E76;&#x884C;&#x5B9E;&#x73B0;&#xFF1B;  </p>
<p>&#x7F3A;&#x70B9;&#xFF1A;&#x8BA1;&#x7B97;&#x4EE3;&#x4EF7;&#x5927;&#xFF0C;&#x6570;&#x636E;&#x91CF;&#x5927;&#x65F6;&#xFF0C;&#x8BAD;&#x7EC3;&#x8FC7;&#x7A0B;&#x6162;&#xFF1B;</p>
<ul>
<li><code>&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#xFF08;Stochastic Gradient Descent&#xFF09;</code> : &#x548C;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x539F;&#x7406;&#x7C7B;&#x4F3C;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x6C42;&#x68AF;&#x5EA6;&#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x7528;&#x6240;&#x6709;&#x7684; mmm &#x4E2A;&#x6837;&#x672C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x4EC5;&#x4EC5;&#x9009;&#x53D6;&#x4E00;&#x4E2A;&#x6837;&#x672C; jjj &#x6765;&#x6C42;&#x68AF;&#x5EA6;&#xFF1B;</li>
</ul>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)<br>&#x4F18;&#x70B9;&#xFF1A;&#x8BAD;&#x7EC3;&#x901F;&#x5EA6;&#x5FEB;&#xFF1B;  </p>
<p>&#x7F3A;&#x70B9;&#xFF1A;&#x51C6;&#x786E;&#x5EA6;&#x4E0B;&#x964D;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x5168;&#x5C40;&#x6700;&#x4F18;&#xFF0C;&#x4E0D;&#x6613;&#x4E8E;&#x5E76;&#x884C;&#x5B9E;&#x73B0;&#xFF1B;</p>
<ul>
<li><code>&#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#xFF08;Mini-batch Gradient Descent&#xFF09;</code> : &#x5C0F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x662F;&#x6279;&#x91CF;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x548C;&#x968F;&#x673A;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x6298;&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5BF9;&#x4E8E; mmm &#x4E2A;&#x6837;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x91C7;&#x7528; xxx &#x4E2A;&#x6837;&#x672C;&#x6765;&#x8FED;&#x4EE3;&#xFF0C;1&lt;x&lt;m1&lt;x&lt;m1&lt;x&lt;m&#x3002;&#x4E00;&#x822C;&#x53EF;&#x4EE5;&#x53D6; x=10x=10x=10&#xFF0C;&#x5F53;&#x7136;&#x6839;&#x636E;&#x6837;&#x672C;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x6574;&#x8FD9;&#x4E2A; xxx &#x7684;&#x503C;&#xFF1B;</li>
</ul>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;&#x2211;j=tt+x&#x2212;1(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;&#x2211;_{j=t}^{t+x-1}(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;j=t&#x2211;t+x&#x2212;1(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)<br>&#x524D;&#x4E24;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x6027;&#x80FD;&#x6298;&#x4E2D;&#xFF1B;</p>
<h1 id="&#x4E00;&#x7EF4;&#x95EE;&#x9898;"><a href="#&#x4E00;&#x7EF4;&#x95EE;&#x9898;" class="headerlink" title="&#x4E00;&#x7EF4;&#x95EE;&#x9898;"></a>&#x4E00;&#x7EF4;&#x95EE;&#x9898;</h1><h2 id="&#x4F8B;1&#xFF1A;&#x6C42;-f-x-x2-1f-x-x-2-1f-x-x2-1-&#x7684;&#x6700;&#x5C0F;&#x503C;"><a href="#&#x4F8B;1&#xFF1A;&#x6C42;-f-x-x2-1f-x-x-2-1f-x-x2-1-&#x7684;&#x6700;&#x5C0F;&#x503C;" class="headerlink" title="&#x4F8B;1&#xFF1A;&#x6C42; f(x)=x2+1f(x) = x^2 + 1f(x)=x2+1 &#x7684;&#x6700;&#x5C0F;&#x503C;"></a>&#x4F8B;1&#xFF1A;&#x6C42; f(x)=x2+1f(x) = x^2 + 1f(x)=x2+1 &#x7684;&#x6700;&#x5C0F;&#x503C;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/031b14345f221c7596450beb16f43a71ac9cf983ea2c63caca7b5b38876bb599" alt="image.png"></p>
<p>f(x)=x2+1f(x) = x^2 + 1f(x)=x2+1<br><strong><em>&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x6C42; f(x)=x2+1(&#x2212;10&#x2264;x&#x2264;10)f(x) = x^2 + 1 \quad (-10 \leq x \leq 10)f(x)=x2+1(&#x2212;10&#x2264;x&#x2264;10) &#x7684;&#x6700;&#x5C0F;&#x503C;</em></strong></p>
<p>&#x56E0;&#x4E3A; f(x)=x2+1f(x) = x^2 + 1f(x)=x2+1 &#x662F;&#x51F8;&#x51FD;&#x6570;&#xFF0C;&#x4ECE;&#x56FE;&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x773C;&#x770B;&#x51FA;&#xFF0C;&#x5176;&#x6700;&#x5C0F;&#x503C;&#x5C31;&#x5728; x=0x=0x=0 &#x5904;&#xFF1B;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x8FDB;&#x884C;&#x6C42;&#x89E3;&#xFF1A;</p>
<p>1&#x3001;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x5373; f(x)=x2+1f(x) = x^2 + 1f(x)=x2+1 &#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def func_target(x):</span><br><span class="line">    return x ** 2 + 1</span><br></pre></td></tr></table></figure>

<p>2&#x3001;&#x6C42;&#x89E3;&#x68AF;&#x5EA6;&#xFF0C;&#x5373; f(x)&#x2032;=2xf(x)^{&#x2018;} = 2xf(x)&#x2032;=2x &#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def func_gradient(x):</span><br><span class="line">    return x * 2</span><br></pre></td></tr></table></figure>

<p>3&#x3001;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x610F;&#x4E49;&#xFF1A;</p>
<ul>
<li><code>x</code> : &#x5F53;&#x524D; x &#x7684;&#x503C;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53C2;&#x6570;&#x63D0;&#x4F9B;&#x521D;&#x59CB;&#x503C;&#xFF1B;</li>
<li><code>learn_rate</code> : &#x5B66;&#x4E60;&#x7387;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x8BBE;&#x7F6E;&#x7684;&#x6B65;&#x957F;&#xFF1B;</li>
<li><code>precision</code> : &#x6536;&#x655B;&#x7CBE;&#x5EA6;&#xFF1B;</li>
<li><code>max_iters</code> : &#x6700;&#x5927;&#x8FED;&#x4EE3;&#x6B21;&#x6570;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def SGD(x=1, learn_rate=0.1, precision=1e-5, max_iters=10000):</span><br><span class="line">    for i in range(max_iters):</span><br><span class="line">        grad_cur = func_gradient(x)</span><br><span class="line">        if abs(grad_cur) &lt; precision:</span><br><span class="line">            break</span><br><span class="line">        x = x - learn_rate * grad_cur</span><br><span class="line">        print(f&quot;&#x7B2C; {i+1} &#x6B21;&#x8FED;&#x4EE3;: x &#x503C;&#x4E3A; {x}, y &#x503C;&#x4E3A; {func_target(x)}&quot;)</span><br><span class="line">    </span><br><span class="line">    print(f&quot;\n&#x6700;&#x5C0F;&#x503C; x = {x}, y = {func_target(x)}&quot;)</span><br><span class="line">    return x</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    SGD(x=10, learn_rate=0.2)</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9fa3765d0ad4bcd3203a03c27526f753ea80e826a619073d9e28e2ade7681baf" alt="image.png"></p>
<h2 id="&#x4F8B;2&#xFF1A;&#x6C42;-12-x1-x2&#x2212;4-2-2x1-3x2&#x2212;7-2-frac-1-2-x-1-x-2-4-2-2x-1-3x-2-7-2-21-x1-x2&#x2212;4-2-2x1-3x2&#x2212;7-2-&#x7684;&#x6781;&#x503C;"><a href="#&#x4F8B;2&#xFF1A;&#x6C42;-12-x1-x2&#x2212;4-2-2x1-3x2&#x2212;7-2-frac-1-2-x-1-x-2-4-2-2x-1-3x-2-7-2-21-x1-x2&#x2212;4-2-2x1-3x2&#x2212;7-2-&#x7684;&#x6781;&#x503C;" class="headerlink" title="&#x4F8B;2&#xFF1A;&#x6C42; 12[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2]\frac{1}{2}[(x_1+x_2-4)^2 + (2x_1+3x_2-7)^2]21[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2] &#x7684;&#x6781;&#x503C;"></a>&#x4F8B;2&#xFF1A;&#x6C42; 12[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2]\frac{1}{2}[(x_1+x_2-4)^2 + (2x_1+3x_2-7)^2]21[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2] &#x7684;&#x6781;&#x503C;</h2><p>&#x901A;&#x8FC7;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x65B9;&#x6CD5;&#x6210;&#x529F;&#x6C42;&#x5F97;&#x4E86; &#x7684;&#x6700;&#x5C0F;&#x503C;&#x4E4B;&#x540E;&#x662F;&#x4E0D;&#x662F;&#x4FE1;&#x5FC3;&#x5927;&#x589E;&#x5462;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x8BA9;&#x6211;&#x4EEC;&#x9010;&#x6B65;&#x52A0;&#x6DF1;&#x96BE;&#x5EA6;&#xFF1A;<strong><em>&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x6C42;&#x591A;&#x9879;&#x5F0F; 12[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2]\frac{1}{2}[(x_1+x_2-4)^2 + (2x_1+3x_2-7)^2]21[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2] &#x7684;&#x6781;&#x503C;</em></strong>&#xFF1B;</p>
<p>&#x5728;&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6C42;&#x89E3;&#x8FD9;&#x9053;&#x9898;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x6CE8;&#x610F;&#x5230;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;<strong>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x53EF;&#x80FD;&#x5728;&#x5C40;&#x90E8;&#x6700;&#x5C0F;&#x7684;&#x70B9;&#x6536;&#x655B;</strong>&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/5adaafcc3e4a45662f4ea3b8224138a131a97c7257b79b7749554c1d09e2ca7a" alt="image.png"></p>
<p>1&#x3001;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x5373; 12[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2\frac{1}{2}[(x_1+x_2-4)^2 + (2x_1+3x_2-7)^221[(x1+x2&#x2212;4)2+(2x1+3x2&#x2212;7)2 &#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def func_target(x1, x2):</span><br><span class="line">    return ((x1 + x2 - 4) ** 2 + (2*x1 + 3*x2 -7) ** 2) * 0.5</span><br></pre></td></tr></table></figure>

<p>2&#x3001;&#x6C42;&#x89E3;&#x68AF;&#x5EA6;&#xFF0C;&#x5373; &#x2202;f&#x2202;x1=(x1+x2&#x2212;4)+2(2x1+3x2&#x2212;7)\frac{&#x2202;f}{&#x2202;x_1} = (x_1+x_2-4)+2(2x_1+3x_2-7)&#x2202;x1&#x2202;f=(x1+x2&#x2212;4)+2(2x1+3x2&#x2212;7) &#x548C; &#x2202;f&#x2202;x2=(x1+x2&#x2212;4)+3(2x1+3x2&#x2212;7)\frac{&#x2202;f}{&#x2202;x_2} = (x_1+x_2-4)+3(2x_1+3x_2-7)&#x2202;x2&#x2202;f=(x1+x2&#x2212;4)+3(2x1+3x2&#x2212;7)&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def func_gradient(x1, x2):</span><br><span class="line">    grad_x1 = (x1 + x2 - 4) + 2 * (2*x1 + 3*x2 -7)</span><br><span class="line">    grad_x2 = (x1 + x2 - 4) + 3 * (2*x1 + 3*x2 -7)</span><br><span class="line">    return grad_x1, grad_x2</span><br></pre></td></tr></table></figure>

<p>3&#x3001;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def SGD(x1=0, x2=0, learn_rate=0.01, precision=1e-6, max_iters=10000):</span><br><span class="line">    y1 = func_target(x1, x2)</span><br><span class="line">    for i in range(max_iters):</span><br><span class="line">        grad_x1, grad_x2 = func_gradient(x1, x2)</span><br><span class="line">        x1 = x1 - learn_rate * grad_x1</span><br><span class="line">        x2 = x2 - learn_rate * grad_x2</span><br><span class="line">        y2 = func_target(x1, x2)</span><br><span class="line">        if (y1 - y2) &lt; precision:</span><br><span class="line">            break</span><br><span class="line">        if y2 &lt; y1: y1 = y2</span><br><span class="line">        print(f&quot;&#x7B2C; {i+1} &#x6B21;&#x8FED;&#x4EE3;: x1 &#x503C;&#x4E3A; {x1}, x2 &#x503C;&#x4E3A; {x2}, &#x8F93;&#x51FA;&#x503C;&#x4E3A; {y2}&quot;)</span><br><span class="line">    </span><br><span class="line">    print(f&quot;&#x8BE5;&#x591A;&#x9879;&#x5F0F;&#x7684;&#x6781;&#x5C0F;&#x503C;&#x4E3A; {y2}, ({x1}, {x2})&quot;)</span><br><span class="line">    return x1, x2, y2</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    SGD()</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ba2ac4c20254211fe719f997caa461979cf48eca29a293675ec84ef4e7692b7d" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1e8ca01ec36900fbd9a2e50c6c39145978855aeaeb76c90fdbb726c37bf0227d" alt="image.png"></p>
<p>&#x4E2D;&#x95F4;&#x7684;&#x8FED;&#x4EE3;&#x8FC7;&#x7A0B;&#x5C31;&#x7701;&#x7565;&#x4E86;&#xFF1B;</p>
<h1 id="&#x4E8C;&#x7EF4;&#x95EE;&#x9898;"><a href="#&#x4E8C;&#x7EF4;&#x95EE;&#x9898;" class="headerlink" title="&#x4E8C;&#x7EF4;&#x95EE;&#x9898;"></a>&#x4E8C;&#x7EF4;&#x95EE;&#x9898;</h1><p>&#x5F53;&#x4F60;&#x901A;&#x8FC7;&#x81EA;&#x5DF1;&#x7684;&#x52AA;&#x529B;&#x5B8C;&#x6210;&#x524D;&#x4E24;&#x4E2A;&#x4F8B;&#x5B50;&#x4E4B;&#x540E;&#xFF0C;&#x4F60;&#x662F;&#x4E0D;&#x662F;&#x5DF2;&#x7ECF;&#x4E0D;&#x6EE1;&#x8DB3;&#x4E8E;&#x4E00;&#x7EF4;&#x95EE;&#x9898;&#x4E86;&#x5462;&#xFF0C;&#x90A3;&#x4E48;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8FDB;&#x5165;&#x4E8C;&#x7EF4;&#x95EE;&#x9898;&#xFF1A;<strong><em>&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x6C42; f(x,y)=&#x2212;e&#x2212;(x2+y2)f(x,y) = -e^{-(x^2+y^2)}f(x,y)=&#x2212;e&#x2212;(x2+y2) &#x5728; [0,0][0,0][0,0] &#x5904;&#x6709;&#x6700;&#x5C0F;&#x503C;</em></strong>&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9423cb585fe05c81552cd38c0818853d34f06aa7d3b539957df851262184f80f" alt="image.png"></p>
<p>f(x,y)=&#x2212;e&#x2212;(x2+y2)f(x,y) = -e^{-(x^2+y^2)}f(x,y)=&#x2212;e&#x2212;(x2+y2)<br>&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;<strong>&#x5C40;&#x9650;&#x6027;</strong>&#xFF0C;&#x5148;&#x5728;&#x8FD9;&#x91CC;&#x7559;&#x4E2A;&#x60AC;&#x5FF5;&#xFF1B;</p>
<p>1&#x3001;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x5373; f(x,y)=&#x2212;e&#x2212;(x2+y2)f(x,y) = -e^{-(x^2+y^2)}f(x,y)=&#x2212;e&#x2212;(x2+y2) &#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def func_target(cell):</span><br><span class="line">    :param cell: &#x4E8C;&#x7EF4;&#x5411;&#x91CF;</span><br><span class="line">    return -math.exp(-(cell[0] ** 2 + cell[1] ** 2))</span><br></pre></td></tr></table></figure>

<p>2&#x3001;&#x6C42;&#x89E3;&#x68AF;&#x5EA6;&#xFF0C;&#x5373; &#x2202;f&#x2202;x=2xe&#x2212;(x2+y2)\frac{&#x2202;f}{&#x2202;x} = 2xe^{-(x^2+y^2)}&#x2202;x&#x2202;f=2xe&#x2212;(x2+y2) &#x548C; &#x2202;f&#x2202;y=2ye&#x2212;(x2+y2)\frac{&#x2202;f}{&#x2202;y} = 2ye^{-(x^2+y^2)}&#x2202;y&#x2202;f=2ye&#x2212;(x2+y2)&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def func_gradient(cell):</span><br><span class="line">    :param cell: &#x4E8C;&#x7EF4;&#x5411;&#x91CF;</span><br><span class="line">    grad_x = 2 * cell[0] * math.exp(-(cell[0] ** 2 + cell[1] ** 2))</span><br><span class="line">    grad_y = 2 * cell[1] * math.exp(-(cell[0] ** 2 + cell[1] ** 2))</span><br><span class="line">    return np.array([grad_x, grad_y])</span><br></pre></td></tr></table></figure>

<p>3&#x3001;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">py&#x590D;&#x5236;&#x4EE3;&#x7801;def SGD(x=np.array([0.1, 0.1]), learn_rate=0.1, precision=1e-6, max_iters=10000):</span><br><span class="line">    for i in range(max_iters):</span><br><span class="line">        grad_cur = func_gradient(x)</span><br><span class="line">        if np.linalg.norm(grad_cur, ord=2) &lt; precision:</span><br><span class="line">            break</span><br><span class="line">        x = x - learn_rate * grad_cur</span><br><span class="line">        print(f&quot;&#x7B2C; {i+1} &#x6B21;&#x8FED;&#x4EE3;: x &#x503C;&#x4E3A; {x}, y &#x503C;&#x4E3A; {func_target(x)}&quot;)</span><br><span class="line">    </span><br><span class="line">    print(f&quot;\n&#x6700;&#x5C0F;&#x503C; x = {x}, y = {func_target(x)}&quot;)</span><br><span class="line">    return x</span><br></pre></td></tr></table></figure>

<p>4&#x3001;&#x5F53; x0x0x0 &#x7684;&#x521D;&#x59CB;&#x503C;&#x8BBE;&#x4E3A; [1,&#x2212;1][1,&#x2212;1][1,&#x2212;1] &#x65F6;&#xFF0C;&#x4E00;&#x5207;&#x90FD;&#x663E;&#x5F97;&#x5F88;&#x6B63;&#x5E38;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1994841b194cd03c33ca8a5a978392fb0de6f169b07795aa17bc587f7f5a730e" alt="image.png"></p>
<p>5&#x3001;&#x4F46;&#x5F53;&#x6211;&#x4EEC;&#x628A; x0x0x0 &#x7684;&#x521D;&#x59CB;&#x503C;&#x8BBE;&#x4E3A; [3,&#x2212;3][3,&#x2212;3][3,&#x2212;3] &#x65F6;&#xFF0C;&#x7ED3;&#x679C;&#x662F;&#x51FA;&#x4E4E;&#x610F;&#x6599;&#x7684;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/21ae4418182e7dc99e1bdcd86ed8db14d04dbcf7c080cc4eeec1f310ec5672ac" alt="image.png"></p>
<p><strong><em>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x771F;&#x6B63;&#x7684;&#x6781;&#x5C0F;&#x503C;&#x70B9;&#xFF01;</em></strong></p>
<h1 id="&#x5C40;&#x9650;&#x6027;"><a href="#&#x5C40;&#x9650;&#x6027;" class="headerlink" title="&#x5C40;&#x9650;&#x6027;"></a>&#x5C40;&#x9650;&#x6027;</h1><p>&#x7EE7;&#x7EED;&#x8BB2;&#x8FF0;&#x4E0A;&#x9762;&#x7684;&#x975E;&#x9884;&#x671F;&#x7ED3;&#x679C;&#xFF1A;</p>
<p>&#x5982;&#x679C;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x7684;&#x56FE;&#x50CF;&#xFF0C;&#x4EE5;&#x53CA;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x7B97;&#x6CD5;&#x539F;&#x7406;&#xFF0C;&#x4F60;&#x5C31;&#x5F88;&#x5BB9;&#x6613;&#x53D1;&#x73B0;&#x95EE;&#x9898;&#x6240;&#x5728;&#x4E86;&#x3002;<strong>&#x5728; [3,&#x2212;3][3,&#x2212;3][3,&#x2212;3] &#x5904;&#x7684;&#x68AF;&#x5EA6;&#x5C31;&#x51E0;&#x4E4E;&#x4E3A; 0 &#x4E86;&#xFF01;</strong></p>
<p><strong>&#x7531;&#x4E8E;&#x201C;&#x68AF;&#x5EA6;&#x8FC7;&#x5C0F;&#x201D;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x524D;&#x8FDB;&#x7684;&#x65B9;&#x5411;&#x4E86;</strong>&#x3002;&#x5373;&#x4F7F;&#x4EBA;&#x4E3A;&#x589E;&#x52A0;&#x6536;&#x655B;&#x6761;&#x4EF6;&#x4E2D;&#x7684;&#x7CBE;&#x5EA6;&#xFF0C;&#x4E5F;&#x4F1A;&#x7531;&#x4E8E;&#x68AF;&#x5EA6;&#x8FC7;&#x5C0F;&#xFF0C;&#x5BFC;&#x81F4;&#x8FED;&#x4EE3;&#x4E2D;&#x524D;&#x8FDB;&#x7684;&#x6B65;&#x957F;&#x8DDD;&#x79BB;&#x8FC7;&#x5C0F;&#xFF0C;&#x5FAA;&#x73AF;&#x65F6;&#x95F4;&#x8FC7;&#x957F;&#x3002;</p>
<p>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x5B9E;&#x73B0;&#x7B80;&#x5355;&#xFF0C;&#x539F;&#x7406;&#x4E5F;&#x6613;&#x4E8E;&#x7406;&#x89E3;&#xFF0C;&#x4F46;&#x5B83;&#x6709;&#x81EA;&#x8EAB;&#x7684;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x6709;&#x4E86;&#x540E;&#x9762;&#x5F88;&#x591A;&#x7B97;&#x6CD5;&#x5BF9;&#x5B83;&#x7684;&#x6539;&#x8FDB;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x68AF;&#x5EA6;&#x8FC7;&#x5C0F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x53EF;&#x80FD;&#x96BE;&#x4EE5;&#x6C42;&#x89E3;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x9002;&#x5408;&#x6C42;&#x89E3;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5C40;&#x90E8;&#x6700;&#x4F18;&#x89E3;&#x7684;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x5BF9;&#x4E8E;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x5C40;&#x90E8;&#x6700;&#x4F18;&#x89E3;&#x7684;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x4E0D;&#x4FDD;&#x8BC1;&#x5F97;&#x5230;&#x5168;&#x5C40;&#x6700;&#x4F18;&#x89E3;&#xFF08;&#x7531;&#x4E8E;&#x51F8;&#x51FD;&#x6570;&#x6709;&#x4E2A;&#x6027;&#x8D28;&#x662F;&#x53EA;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x5C40;&#x90E8;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x6240;&#x6709;&#x4E5F;&#x6709;&#x6587;&#x732E;&#x7684;&#x63D0;&#x6CD5;&#x662F;&#xFF1A;<strong>&#x5F53;&#x76EE;&#x6807;&#x51FD;&#x6570;&#x662F;&#x51F8;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x89E3;&#x624D;&#x662F;&#x5168;&#x5C40;&#x6700;&#x4F18;&#x89E3;</strong>&#xFF09;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x6CF0;&#x52D2;&#x516C;&#x5F0F;&#x7684;&#x5C55;&#x5F00;&#x662F;&#x8FD1;&#x4F3C;&#x516C;&#x5F0F;&#xFF0C;&#x8981;&#x6C42;&#x8FED;&#x4EE3;&#x6B65;&#x957F;&#x8981;&#x8DB3;&#x591F;&#x5C0F;&#xFF0C;&#x56E0;&#x6B64;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x6536;&#x655B;&#x901F;&#x5EA6;&#x5E76;&#x975E;&#x5F88;&#x5FEB;&#x7684;&#x3002;</p>
<h1 id="&#x540E;&#x8BB0;"><a href="#&#x540E;&#x8BB0;" class="headerlink" title="&#x540E;&#x8BB0;"></a>&#x540E;&#x8BB0;</h1><p>&#x4E0A;&#x8FF0;&#x5C31;&#x662F;&#x672C;&#x7BC7;&#x535A;&#x6587;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x4E86;&#xFF0C;&#x901A;&#x8FC7;&#x5B9E;&#x6218;&#x5BF9;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x77E5;&#x8BC6;&#x70B9;&#x8FDB;&#x884C;&#x5DE9;&#x56FA;&#x548C;&#x52A0;&#x6DF1;&#x5370;&#x8C61;&#xFF0C;&#x5E76;&#x4E14;&#x5C42;&#x5C42;&#x6536;&#x5165;&#xFF0C;&#x5E0C;&#x671B;&#x8BFB;&#x8005;&#x80FD;&#x6709;&#x6240;&#x6536;&#x83B7;&#xFF01;</p>
<p>&#x5BF9;&#x4E8E;&#x7406;&#x8BBA;&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x6E05;&#x695A;&#x7684;&#x8BFB;&#x8005;&#xFF0C;&#x53EF;&#x4EE5;&#x56DE;&#x770B;&#x4E0A;&#x7BC7;&#x535A;&#x6587;&#xFF1A;<a href="https://dev.newban.cn/7163548247028400159">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x7406;&#x8BBA;&#x7BC7;&#xFF09;</a>&#xFF1B;</p>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="/external_links/33489cad6de905c9f20120fd8489f797.html" target="blank" rel="noopener">&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF08;Gradient Descent&#xFF09;</a></li>
<li><a href="/external_links/732864064f3d1d1a49c317f07cc13980.html" target="blank" rel="noopener">Python &#x5B9E;&#x73B0;&#x7B80;&#x5355;&#x7684;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;</a></li>
<li><a href="/external_links/00bd5ff8ad9403ba3385697011ae5e94.html" target="blank" rel="noopener">&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x539F;&#x7406;&#x4E0E;python&#x5B9E;&#x73B0;</a></li>
</ul>
<blockquote>
<p>&#x1F4DD; &#x4E0A;&#x7BC7;&#x7CBE;&#x8BB2;&#xFF1A;<a href="https://dev.newban.cn/7163548247028400159">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x7406;&#x8BBA;&#x7BC7;&#xFF09;</a></p>
<p>&#x1F496; &#x6211;&#x662F; <strong>&#x1D4FC;&#x1D4F2;&#x1D4ED;&#x1D4F2;&#x1D4F8;&#x1D4FD;</strong>&#xFF0C;&#x671F;&#x5F85;&#x4F60;&#x7684;&#x5173;&#x6CE8;&#xFF1B;</p>
<p>&#x1F44D; &#x521B;&#x4F5C;&#x4E0D;&#x6613;&#xFF0C;&#x8BF7;&#x591A;&#x591A;&#x652F;&#x6301;&#xFF1B;</p>
<p>&#x1F525; &#x7CFB;&#x5217;&#x4E13;&#x680F;&#xFF1A;<a href="/external_links/d0c33995b8dd0e123b7c3bb7d2845459.html" target="blank" rel="noopener">AI</a></p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8a03ae924a7b61f966e73012d574f892.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7163548247028400159.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7163548247028400159.html" itemprop="url">【AI】浅谈梯度下降算法（理论篇） 前言 梯度 梯度下降 算</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-08T15:46:33+08:00">
                2022-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong><em>&#x672C;&#x6587;&#x6B63;&#x5728;&#x53C2;&#x52A0;<a href="https://dev.newban.cn/7162096952883019783">&#x300C;&#x91D1;&#x77F3;&#x8BA1;&#x5212; . &#x74DC;&#x5206;6&#x4E07;&#x73B0;&#x91D1;&#x5927;&#x5956;&#x300D;</a></em></strong></p>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x5728;&#x6C42;&#x89E3;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x7B97;&#x6CD5;&#x7684;&#x6A21;&#x578B;&#x53C2;&#x6570;&#xFF0C;&#x5373;&#x65E0;&#x7EA6;&#x675F;&#x4F18;&#x5316;&#x95EE;&#x9898;&#x65F6;&#xFF0C;<strong>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF08;Gradient Descent&#xFF09;</strong> &#x662F;&#x6700;&#x5E38;&#x91C7;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x4E4B;&#x4E00;&#xFF0C;&#x53E6;&#x4E00;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x6700;&#x5C0F;&#x4E8C;&#x4E58;&#x6CD5;&#x3002;</p>
<p>&#x76EE;&#x524D;&#x6B63;&#x5728;&#x5B66;&#x4E60;&#x8FD9;&#x65B9;&#x9762;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x56E0;&#x6B64;&#x7B80;&#x5355;&#x8C08;&#x8C08;&#x4E0E;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<h1 id="&#x68AF;&#x5EA6;"><a href="#&#x68AF;&#x5EA6;" class="headerlink" title="&#x68AF;&#x5EA6;"></a>&#x68AF;&#x5EA6;</h1><p><strong><em>&#x5728;&#x5FAE;&#x79EF;&#x5206;&#x91CC;&#x9762;&#xFF0C;&#x5BF9;&#x591A;&#x5143;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x6C42; &#x2202;&#x2202;&#x2202; &#x504F;&#x5BFC;&#x6570;&#xFF0C;&#x628A;&#x6C42;&#x5F97;&#x7684;&#x5404;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x504F;&#x5BFC;&#x6570;&#x4EE5;&#x5411;&#x91CF;&#x7684;&#x5F62;&#x5F0F;&#x5199;&#x51FA;&#x6765;&#xFF0C;&#x5C31;&#x662F;&#x68AF;&#x5EA6;&#x3002;</em></strong></p>
<p>&#x6BD4;&#x5982;&#x51FD;&#x6570; f(x,y)f(x, y)f(x,y)&#xFF0C;&#x5206;&#x522B;&#x5BF9; xxx, yyy &#x6C42;&#x504F;&#x5BFC;&#x6570;&#xFF0C;&#x6C42;&#x5F97;&#x7684;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x5C31;&#x662F; (&#x2202;f&#x2202;x, &#x2202;f&#x2202;y)T(\frac{&#x2202;f}{&#x2202;x}, \frac{&#x2202;f}{&#x2202;y})^T(&#x2202;x&#x2202;f, &#x2202;y&#x2202;f)T&#xFF0C;&#x7B80;&#x79F0; gradf(x,y)grad \quad f(x,y)gradf(x,y) &#x6216;&#x8005; &#x25BD;f(x,y)&#x25BD;f(x,y)&#x25BD;f(x,y)&#x3002;&#x5BF9;&#x4E8E;&#x5728;&#x70B9; (x0,y0)(x_0,y_0)(x0,y0) &#x7684;&#x5177;&#x4F53;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x5C31;&#x662F; (&#x2202;f&#x2202;x0, &#x2202;f&#x2202;y0)T(\frac{&#x2202;f}{&#x2202;x_0}, \frac{&#x2202;f}{&#x2202;y_0})^T(&#x2202;x0&#x2202;f, &#x2202;y0&#x2202;f)T &#x6216;&#x8005; &#x25BD;f(x0,y0)&#x25BD;f(x_0,y_0)&#x25BD;f(x0,y0)&#xFF0C;&#x5982;&#x679C;&#x662F;3&#x4E2A;&#x53C2;&#x6570;&#x7684;&#x5411;&#x91CF;&#x68AF;&#x5EA6;&#xFF0C;&#x5C31;&#x662F; (&#x2202;f&#x2202;x, &#x2202;f&#x2202;y&#xFF0C;&#x2202;f&#x2202;z)T(\frac{&#x2202;f}{&#x2202;x}, \frac{&#x2202;f}{&#x2202;y}&#xFF0C;\frac{&#x2202;f}{&#x2202;z})^T(&#x2202;x&#x2202;f, &#x2202;y&#x2202;f&#xFF0C;&#x2202;z&#x2202;f)T&#xFF0C;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x6C42;&#x51FA;&#x6765;&#x6709;&#x4EC0;&#x4E48;&#x610F;&#x4E49;&#x5462;&#xFF1F;&#x4ED6;&#x7684;&#x610F;&#x4E49;&#x4ECE;&#x51E0;&#x4F55;&#x610F;&#x4E49;&#x4E0A;&#x8BB2;&#xFF0C;<strong>&#x5C31;&#x662F;&#x51FD;&#x6570;&#x53D8;&#x5316;&#x589E;&#x52A0;&#x6700;&#x5FEB;&#x7684;&#x5730;&#x65B9;</strong>&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;&#x5BF9;&#x4E8E;&#x51FD;&#x6570; f(x,y)f(x,y)f(x,y)&#xFF0C;&#x5728;&#x70B9; (x0,y0)(x_0,y_0)(x0,y0)&#xFF0C;&#x6CBF;&#x7740;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x5373; (&#x2202;f&#x2202;x0, &#x2202;f&#x2202;y0)T(\frac{&#x2202;f}{&#x2202;x_0}, \frac{&#x2202;f}{&#x2202;y_0})^T(&#x2202;x0&#x2202;f, &#x2202;y0&#x2202;f)T &#x7684;&#x65B9;&#x5411;&#xFF0C;&#x662F; f(x,y)f(x,y)f(x,y) &#x589E;&#x52A0;&#x6700;&#x5FEB;&#x7684;&#x5730;&#x65B9;&#x3002;&#x6216;&#x8005;&#x8BF4;&#xFF0C;&#x6CBF;&#x7740;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x627E;&#x5230;&#x51FD;&#x6570;&#x7684;<strong>&#x6700;&#x5927;&#x503C;</strong>&#x3002;&#x53CD;&#x8FC7;&#x6765;&#x8BF4;&#xFF0C;&#x6CBF;&#x7740;&#x68AF;&#x5EA6;&#x5411;&#x91CF;&#x76F8;&#x53CD;&#x7684;&#x65B9;&#x5411;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; &#x2212;(&#x2202;f&#x2202;x0, &#x2202;f&#x2202;y0)T-(\frac{&#x2202;f}{&#x2202;x_0}, \frac{&#x2202;f}{&#x2202;y_0})^T&#x2212;(&#x2202;x0&#x2202;f, &#x2202;y0&#x2202;f)T &#x7684;&#x65B9;&#x5411;&#xFF0C;&#x68AF;&#x5EA6;&#x51CF;&#x5C11;&#x6700;&#x5FEB;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x627E;&#x5230;&#x51FD;&#x6570;&#x7684;<strong>&#x6700;&#x5C0F;&#x503C;</strong>&#x3002;</p>
<h1 id="&#x68AF;&#x5EA6;&#x4E0B;&#x964D;"><a href="#&#x68AF;&#x5EA6;&#x4E0B;&#x964D;" class="headerlink" title="&#x68AF;&#x5EA6;&#x4E0B;&#x964D;"></a>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;</h1><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1cdada5bfc723b0f32633ad2274d15e9cf26f2f54ac406c91aa321b8df100fbe" alt="image.png"></p>
<blockquote>
<p><strong>&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;</strong>&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Gradient descent&#xFF09;&#x662F;&#x4E00;&#x4E2A;&#x4E00;&#x9636;<a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x6700;&#x4F18;&#x5316;</a><a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x7B97;&#x6CD5;</a>&#xFF0C;&#x901A;&#x5E38;&#x4E5F;&#x79F0;&#x4E3A;<strong>&#x6700;&#x9661;&#x4E0B;&#x964D;&#x6CD5;</strong>&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x8BE5;&#x4E0E;&#x8FD1;&#x4F3C;&#x79EF;&#x5206;&#x7684;&#x6700;&#x9661;&#x4E0B;&#x964D;&#x6CD5;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Method of steepest descent&#xFF09;&#x6DF7;&#x6DC6;&#x3002; &#x8981;&#x4F7F;&#x7528;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;<a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x5C40;&#x90E8;&#x6781;&#x5C0F;&#x503C;</a>&#xFF0C;&#x5FC5;&#x987B;&#x5411;&#x51FD;&#x6570;&#x4E0A;&#x5F53;&#x524D;&#x70B9;&#x5BF9;&#x5E94;<a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x68AF;&#x5EA6;</a>&#xFF08;&#x6216;&#x8005;&#x662F;&#x8FD1;&#x4F3C;&#x68AF;&#x5EA6;&#xFF09;&#x7684; <em>&#x53CD;&#x65B9;&#x5411;</em> &#x7684;&#x89C4;&#x5B9A;&#x6B65;&#x957F;&#x8DDD;&#x79BB;&#x70B9;&#x8FDB;&#x884C;<a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x8FED;&#x4EE3;</a>&#x641C;&#x7D22;&#x3002;&#x5982;&#x679C;&#x76F8;&#x53CD;&#x5730;&#x5411;&#x68AF;&#x5EA6; <em>&#x6B63;&#x65B9;&#x5411;</em> &#x8FED;&#x4EE3;&#x8FDB;&#x884C;&#x641C;&#x7D22;&#xFF0C;&#x5219;&#x4F1A;&#x63A5;&#x8FD1;&#x51FD;&#x6570;&#x7684;<a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x5C40;&#x90E8;&#x6781;&#x5927;&#x503C;</a>&#x70B9;&#xFF1B;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5219;&#x88AB;&#x79F0;&#x4E3A;<strong>&#x68AF;&#x5EA6;&#x4E0A;&#x5347;&#x6CD5;</strong>&#x3002;</p>
</blockquote>
<p>&#x4E0A;&#x8FF0;&#x5BF9;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x7684;&#x63CF;&#x8FF0;&#x6765;&#x81EA;&#x4E8E;<a href="/external_links/4968f0af541b3ab01e4ddad854360307.html" target="blank" rel="noopener">&#x7EF4;&#x57FA;&#x767E;&#x79D1;</a>&#xFF0C;&#x7B80;&#x5355;&#x6982;&#x62EC;&#x4E00;&#x4E0B;&#x5C31;&#x662F; <strong>&#x9009;&#x53D6;&#x9002;&#x5F53;&#x7684;&#x521D;&#x503C; x0x_0x0&#xFF0C;&#x4E0D;&#x65AD;&#x8FED;&#x4EE3;&#x66F4;&#x65B0; xxx &#x7684;&#x503C;&#xFF0C;&#x6781;&#x5C0F;&#x5316;&#x76EE;&#x6807;&#x51FD;&#x6570;&#xFF0C;&#x6700;&#x7EC8;&#x6536;&#x655B;</strong>&#xFF1B;</p>
<p>&#x5728;&#x8FDB;&#x884C;&#x7B97;&#x6CD5;&#x63A8;&#x5BFC;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E9B;&#x6982;&#x5FF5;&#xFF1A;</p>
<ol>
<li><code>&#x6B65;&#x957F;&#xFF08;Learning rate&#xFF09;</code>&#xFF1A;&#x6B65;&#x957F;&#x51B3;&#x5B9A;&#x4E86;&#x5728;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x8FED;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E00;&#x6B65;&#x6CBF;&#x68AF;&#x5EA6;&#x8D1F;&#x65B9;&#x5411;&#x524D;&#x8FDB;&#x7684;&#x957F;&#x5EA6;&#x3002;</li>
<li><code>&#x7279;&#x5F81;&#xFF08;feature&#xFF09;</code>&#xFF1A;&#x6307;&#x7684;&#x662F;&#x6837;&#x672C;&#x4E2D;&#x8F93;&#x5165;&#x90E8;&#x5206;&#xFF0C;&#x6BD4;&#x5982;2&#x4E2A;&#x5355;&#x7279;&#x5F81;&#x7684;&#x6837;&#x672C; (x(0),y(0))(x^{(0)},y^{(0)})(x(0),y(0))&#xFF0C;(x(1),y(1))(x^{(1)},y^{(1)})(x(1),y(1))&#xFF0C;&#x5219;&#x7B2C;&#x4E00;&#x4E2A;&#x6837;&#x672C;&#x7279;&#x5F81;&#x4E3A; x(0)x^{(0)}x(0)&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x6837;&#x672C;&#x8F93;&#x51FA;&#x4E3A; y(0)y^{(0)}y(0)&#x3002;</li>
<li><code>&#x5047;&#x8BBE;&#x51FD;&#x6570;&#xFF08;hypothesis function&#xFF09;</code>&#xFF1A;&#x5728;&#x76D1;&#x7763;&#x5B66;&#x4E60;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x62DF;&#x5408;&#x8F93;&#x5165;&#x6837;&#x672C;&#xFF0C;&#x800C;&#x4F7F;&#x7528;&#x7684;&#x5047;&#x8BBE;&#x51FD;&#x6570;&#xFF0C;&#x8BB0;&#x4E3A; h&#x3B8;(x)h_&#x3B8;(x)h&#x3B8;(x)&#x3002;&#x6BD4;&#x5982;&#x5BF9;&#x4E8E;&#x5355;&#x4E2A;&#x7279;&#x5F81;&#x7684; m &#x4E2A;&#x6837;&#x672C; (x(i),y(i))(i=1,2,&#x2026;,m)(x^{(i)},y^{(i)})(i=1,2,&#x2026;,m)(x(i),y(i))(i=1,2,&#x2026;,m)&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x62DF;&#x5408;&#x51FD;&#x6570;&#x5982;&#x4E0B;&#xFF1A; h&#x3B8;(x)=&#x3B8;0+&#x3B8;1xh_&#x3B8;(x)=&#x3B8;_0+&#x3B8;_1xh&#x3B8;(x)=&#x3B8;0+&#x3B8;1x&#x3002;</li>
<li><code>&#x635F;&#x5931;&#x51FD;&#x6570;&#xFF08;loss function&#xFF09;</code>&#xFF1A;&#x4E3A;&#x4E86;&#x8BC4;&#x4F30;&#x6A21;&#x578B;&#x62DF;&#x5408;&#x7684;&#x597D;&#x574F;&#xFF0C;&#x901A;&#x5E38;&#x7528;&#x635F;&#x5931;&#x51FD;&#x6570;&#x6765;&#x5EA6;&#x91CF;&#x62DF;&#x5408;&#x7684;&#x7A0B;&#x5EA6;&#x3002;&#x635F;&#x5931;&#x51FD;&#x6570;&#x6781;&#x5C0F;&#x5316;&#xFF0C;&#x610F;&#x5473;&#x7740;&#x62DF;&#x5408;&#x7A0B;&#x5EA6;&#x6700;&#x597D;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x6A21;&#x578B;&#x53C2;&#x6570;&#x5373;&#x4E3A;&#x6700;&#x4F18;&#x53C2;&#x6570;&#x3002;<strong>&#x5728;&#x7EBF;&#x6027;&#x56DE;&#x5F52;&#x4E2D;&#xFF0C;&#x635F;&#x5931;&#x51FD;&#x6570;&#x901A;&#x5E38;&#x4E3A;&#x6837;&#x672C;&#x8F93;&#x51FA;&#x548C;&#x5047;&#x8BBE;&#x51FD;&#x6570;&#x7684;&#x5DEE;&#x53D6;&#x5E73;&#x65B9;&#x3002;</strong> &#x6BD4;&#x5982;&#x5BF9;&#x4E8E; m &#x4E2A;&#x6837;&#x672C; (xi,yi)(i=1,2,&#x2026;,m)(x_i,y_i)(i=1,2,&#x2026;,m)(xi,yi)(i=1,2,&#x2026;,m)&#xFF0C;&#x91C7;&#x7528;&#x7EBF;&#x6027;&#x56DE;&#x5F52;&#xFF0C;&#x635F;&#x5931;&#x51FD;&#x6570;&#x4E3A;&#xFF1A;<br>J(&#x3B8;0,&#x3B8;1)=&#x2211;i=1m(h&#x3B8;(xi)&#x2212;yi)2J(&#x3B8;_0,&#x3B8;_1)=&#x2211;_{i=1}^m(h_&#x3B8;(x_i)&#x2212;y_i)^2J(&#x3B8;0,&#x3B8;1)=i=1&#x2211;m(h&#x3B8;(xi)&#x2212;yi)2<br>&#x5176;&#x4E2D; xix_ixi &#x8868;&#x793A;&#x7B2C; iii &#x4E2A;&#x6837;&#x672C;&#x7279;&#x5F81;&#xFF0C;yiy_iyi &#x8868;&#x793A;&#x7B2C; iii &#x4E2A;&#x6837;&#x672C;&#x5BF9;&#x5E94;&#x7684;&#x8F93;&#x51FA;&#xFF0C;h&#x3B8;(xi)h_&#x3B8;(x_i)h&#x3B8;(xi) &#x4E3A;&#x5047;&#x8BBE;&#x51FD;&#x6570;&#x3002;</li>
</ol>
<h1 id="&#x7B97;&#x6CD5;&#x63A8;&#x5BFC;"><a href="#&#x7B97;&#x6CD5;&#x63A8;&#x5BFC;" class="headerlink" title="&#x7B97;&#x6CD5;&#x63A8;&#x5BFC;"></a>&#x7B97;&#x6CD5;&#x63A8;&#x5BFC;</h1><p><strong><em>&#x5148;&#x51B3;&#x6761;&#x4EF6;&#xFF1A; &#x5728;&#x7EBF;&#x6027;&#x56DE;&#x5F52;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x786E;&#x8BA4;&#x4F18;&#x5316;&#x6A21;&#x578B;&#x7684;&#x5047;&#x8BBE;&#x51FD;&#x6570;&#x548C;&#x635F;&#x5931;&#x51FD;&#x6570;&#x3002;</em></strong></p>
<p>1&#x3001;&#x786E;&#x5B9A;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x7684;&#x635F;&#x5931;&#x51FD;&#x6570;&#x7684;&#x68AF;&#x5EA6;&#xFF0C;&#x5BF9;&#x4E8E; &#x3B8;i&#x3B8;_i&#x3B8;i&#xFF0C;&#x5176;&#x68AF;&#x5EA6;&#x8868;&#x8FBE;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x2202;&#x2202;&#x3B8;iJ(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)\frac{&#x2202;}{&#x2202;&#x3B8;_i}J(&#x3B8;_0,&#x3B8;_1&#x2026;,&#x3B8;_n)&#x2202;&#x3B8;i&#x2202;J(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)<br>2&#x3001;&#x7528;&#x6B65;&#x957F; &#x3B1;&#x3B1;&#x3B1; &#xFF08;&#x8FD9;&#x91CC;&#x6307;&#x673A;&#x5668;&#x5B66;&#x4E60;&#x4E2D;&#x7684;&#x5B66;&#x4E60;&#x7387;&#x66F4;&#x4E3A;&#x5408;&#x9002;&#xFF09; &#x4E58;&#x4EE5;&#x635F;&#x5931;&#x51FD;&#x6570;&#x7684;&#x68AF;&#x5EA6;&#xFF0C;&#x5F97;&#x5230;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x4E0B;&#x964D;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;&#x5373;</p>
<p>&#x3B1;&#x2202;&#x2202;&#x3B8;iJ(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)&#x3B1;\frac{&#x2202;}{&#x2202;&#x3B8;_i}J(&#x3B8;_0,&#x3B8;_1&#x2026;,&#x3B8;_n)&#x3B1;&#x2202;&#x3B8;i&#x2202;J(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)<br>3&#x3001;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x6240;&#x6709;&#x7684; &#x3B8;i&#x3B8;_i&#x3B8;i&#xFF0C;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7684;&#x8DDD;&#x79BB;&#x90FD;&#x5C0F;&#x4E8E; &#x3B5;&#x3B5;&#x3B5;&#xFF0C;&#x5982;&#x679C;&#x5C0F;&#x4E8E; &#x3B5;&#x3B5;&#x3B5; &#x5219;&#x7B97;&#x6CD5;&#x7EC8;&#x6B62;&#xFF0C;&#x5F53;&#x524D;&#x6240;&#x6709;&#x7684; &#x3B8;i(i=0,1,&#x2026;n)&#x3B8;_i(i=0,1,&#x2026;n)&#x3B8;i(i=0,1,&#x2026;n) &#x5373;&#x4E3A;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x5165;&#x6B65;&#x9AA4;4&#xFF1B;</p>
<p>4&#x3001;&#x66F4;&#x65B0;&#x6240;&#x6709;&#x7684; &#x3B8;&#x3B8;&#x3B8;&#xFF0C;&#x5BF9;&#x4E8E; &#x3B8;i&#x3B8;_i&#x3B8;i&#xFF0C;&#x5176;&#x66F4;&#x65B0;&#x8868;&#x8FBE;&#x5F0F;&#x5982;&#x4E0B;&#xFF0C;&#x66F4;&#x65B0;&#x5B8C;&#x6BD5;&#x540E;&#x7EE7;&#x7EED;&#x8F6C;&#x5165;&#x6B65;&#x9AA4;1&#xFF1B;</p>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;&#x2202;&#x2202;&#x3B8;iJ(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;\frac{&#x2202;}{&#x2202;&#x3B8;_i}J(&#x3B8;_0,&#x3B8;_1&#x2026;,&#x3B8;_n)&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;&#x2202;&#x3B8;i&#x2202;J(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)</p>
<blockquote>
<p>TIP</p>
</blockquote>
<p>&#x635F;&#x5931;&#x51FD;&#x6570;&#x5982;&#x524D;&#x9762;&#x5148;&#x51B3;&#x6761;&#x4EF6;&#x6240;&#x8FF0;&#xFF1A;</p>
<p>J(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)=12m&#x2211;j=0m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)2J(&#x3B8;_0,&#x3B8;_1&#x2026;,&#x3B8;_n)=\frac{1}{2m}&#x2211;_{j=0}^m(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)^2J(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)=2m1j=0&#x2211;m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)2<br>&#x5219;&#x5728;&#x7B97;&#x6CD5;&#x8FC7;&#x7A0B;&#x6B65;&#x9AA4;1&#x4E2D;&#x5BF9;&#x4E8E; &#x3B8;i&#x3B8;_i&#x3B8;i &#x7684;&#x504F;&#x5BFC;&#x6570;&#x8BA1;&#x7B97;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x2202;&#x2202;&#x3B8;iJ(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)=1m&#x2211;j=0m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)\frac{&#x2202;}{&#x2202;&#x3B8;_i}J(&#x3B8;_0,&#x3B8;_1&#x2026;,&#x3B8;_n)=\frac{1}{m}&#x2211;_{j=0}^m(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x2202;&#x3B8;i&#x2202;J(&#x3B8;0,&#x3B8;1&#x2026;,&#x3B8;n)=m1j=0&#x2211;m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)<br>&#x7531;&#x4E8E;&#x6837;&#x672C;&#x4E2D;&#x6CA1;&#x6709; x0x_0x0&#xFF0C;&#x4E0A;&#x5F0F;&#x4E2D;&#x4EE4;&#x6240;&#x6709;&#x7684; x0jx^j_0x0j &#x4E3A;1&#xFF0C;&#x6B65;&#x9AA4;4&#x4E2D; &#x3B8;i&#x3B8;_i&#x3B8;i &#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x66F4;&#x65B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;1m&#x2211;j=0m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)&#x3B8;_i=&#x3B8;_i&#x2212;&#x3B1;\frac{1}{m}&#x2211;_{j=0}^m(h_&#x3B8;(x^{(j)}_0,x^{(j)}_1,&#x2026;,x^{(j)}_n)&#x2212;y_j)x_i^{(j)}&#x3B8;i=&#x3B8;i&#x2212;&#x3B1;m1j=0&#x2211;m(h&#x3B8;(x0(j),x1(j),&#x2026;,xn(j))&#x2212;yj)xi(j)<br>&#x4ECE;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5F53;&#x524D;&#x70B9;&#x7684;&#x68AF;&#x5EA6;&#x65B9;&#x5411;&#x662F;&#x7531;&#x6240;&#x6709;&#x7684;&#x6837;&#x672C;&#x51B3;&#x5B9A;&#x7684;&#xFF1B;</p>
<h1 id="&#x540E;&#x8BB0;"><a href="#&#x540E;&#x8BB0;" class="headerlink" title="&#x540E;&#x8BB0;"></a>&#x540E;&#x8BB0;</h1><p>&#x4E0A;&#x8FF0;&#x5C31;&#x662F;&#x672C;&#x7BC7;&#x535A;&#x6587;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x4E86;&#xFF0C;&#x6BD4;&#x8F83;&#x7EC6;&#x81F4;&#x7684;&#x4ECB;&#x7ECD;&#x4E86;&#x68AF;&#x5EA6;&#x4EE5;&#x53CA;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4E0B;&#x4E00;&#x7BC7;&#x535A;&#x6587; <a href="https://dev.newban.cn/7163581570303918088/">&#x3010;AI&#x3011;&#x6D45;&#x8C08;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x7B97;&#x6CD5;&#xFF08;&#x5B9E;&#x6218;&#x7BC7;&#xFF09;</a> &#x6211;&#x4EEC;&#x5C06;&#x7ED3;&#x5408;&#x4EE3;&#x7801;&#xFF0C;&#x901A;&#x8FC7;&#x5B9E;&#x6218;&#x5BF9;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x77E5;&#x8BC6;&#x70B9;&#x8FDB;&#x884C;&#x5DE9;&#x56FA;&#x548C;&#x52A0;&#x6DF1;&#x5370;&#x8C61;&#xFF0C;&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x5176;&#x4E2D;&#x7684;&#x5965;&#x4E49;&#xFF01;</p>
<p>&#x53C2;&#x8003;&#xFF1A;</p>
<ul>
<li><a href="/external_links/33489cad6de905c9f20120fd8489f797.html" target="blank" rel="noopener">&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#xFF08;Gradient Descent&#xFF09;</a></li>
<li><a href="/external_links/732864064f3d1d1a49c317f07cc13980.html" target="blank" rel="noopener">Python &#x5B9E;&#x73B0;&#x7B80;&#x5355;&#x7684;&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;</a></li>
<li><a href="/external_links/00bd5ff8ad9403ba3385697011ae5e94.html" target="blank" rel="noopener">&#x68AF;&#x5EA6;&#x4E0B;&#x964D;&#x6CD5;&#x539F;&#x7406;&#x4E0E;python&#x5B9E;&#x73B0;</a></li>
</ul>
<blockquote>
<p>&#x1F4DD; &#x4E0A;&#x7BC7;&#x7CBE;&#x8BB2;&#xFF1A;<a href="https://dev.newban.cn/7160478326866313229">&#x3010;&#x9879;&#x76EE;&#x5B9E;&#x6218;&#x3011;MNIST &#x624B;&#x5199;&#x6570;&#x5B57;&#x8BC6;&#x522B;&#xFF08;&#x4E0B;&#xFF09;</a></p>
<p>&#x1F496; &#x6211;&#x662F; <strong>&#x1D4FC;&#x1D4F2;&#x1D4ED;&#x1D4F2;&#x1D4F8;&#x1D4FD;</strong>&#xFF0C;&#x671F;&#x5F85;&#x4F60;&#x7684;&#x5173;&#x6CE8;&#xFF1B;</p>
<p>&#x1F44D; &#x521B;&#x4F5C;&#x4E0D;&#x6613;&#xFF0C;&#x8BF7;&#x591A;&#x591A;&#x652F;&#x6301;&#xFF1B;</p>
<p>&#x1F525; &#x7CFB;&#x5217;&#x4E13;&#x680F;&#xFF1A;<a href="/external_links/d0c33995b8dd0e123b7c3bb7d2845459.html" target="blank" rel="noopener">AI</a></p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/2cf9278313ed56590030009f05309961.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7163301919316934693.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7163301919316934693.html" itemprop="url">数据结构与算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-07T23:50:37+08:00">
                2022-11-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5B66;&#x4E60;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x638C;&#x63E1;&#x95EE;&#x9898;&#x80CC;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x601D;&#x7EF4;&#x6846;&#x67B6;&#xFF0C;&#x4F60;&#x7684;&#x601D;&#x8003;&#x8D8A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x57DF;&#x5C31;&#x8D8A;&#x5E7F;&#xFF0C;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#x4E5F;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4E13;&#x680F;&#x91CC;&#xFF0C;&#x5C0F;&#x5F6D;&#x5C06;&#x57FA;&#x4E8E; Java / Kotlin &#x8BED;&#x8A00;&#xFF0C;&#x4E3A;&#x4F60;&#x5206;&#x4EAB;&#x5E38;&#x89C1;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x95EE;&#x9898;&#xFF0C;&#x53CA;&#x5176;&#x89E3;&#x9898;&#x6846;&#x67B6;&#x601D;&#x8DEF;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 15 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x5F6D;&#x3002;</p>
<p><a href="https://dev.newban.cn/7161731329078329381">&#x5728;&#x524D;&#x51E0;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;</a>&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x5230;&#x4E86; Java &#x4E2D;&#x7684;&#x51E0;&#x79CD;&#x7EBF;&#x6027;&#x8868;&#x7ED3;&#x6784;&#xFF0C;&#x5305;&#x62EC; ArrayList&#x3001;LinkedList&#x3001;ArrayDeque &#x7B49;&#x3002;&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BA8;&#x8BBA;&#x53E6;&#x4E00;&#x79CD;&#x5E38;&#x7528;&#x7684;&#x57FA;&#x7840;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F; &#x201C;&#x9762;&#x8BD5;&#x516B;&#x80A1;&#x6587;&#x201D; &#x7684;&#x6807;&#x51C6;&#x9898;&#x5E93;&#x4E4B;&#x4E00; &#x2014;&#x2014; &#x6563;&#x5217;&#x8868;&#xFF08;Hash Table&#xFF09;&#x3002;</p>
<p>&#x540C;&#x65F6;&#xFF0C;&#x5728;&#x540E;&#x7EED;&#x7684;&#x6587;&#x7AE0;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4EE5; Java &#x8BED;&#x8A00;&#x4E3A;&#x4F8B;&#xFF0C;&#x5206;&#x6790;&#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x5B9E;&#x73B0;&#x7684;&#x6563;&#x5217;&#x8868;&#x5B9E;&#x73B0;&#xFF0C;&#x5305;&#x62EC; <a href="https://dev.newban.cn/7163985718417555487">HashMap</a>&#x3001;ThreadLocalMap&#x3001;<a href="https://dev.newban.cn/7164348785512939551">LinkedHashMap</a> &#x548C; ConcurrentHashMap&#x3002;&#x8BF7;&#x5173;&#x6CE8;&#x3002;</p>
<hr>
<p><strong>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF1A;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1ea9f6dc93b71f1ed7e23b5f89de86eac959b5f9e0407b9716f7cff4468b7949" alt></p>
<hr>
<ol>
<li>&#x4EC0;&#x4E48;&#x662F;&#x6563;&#x5217;&#x8868;&#xFF1F;</li>
</ol>
<hr>
<p>&#x6563;&#x5217;&#x8868;&#x662F;&#x57FA;&#x4E8E;&#x6563;&#x5217;&#x601D;&#x60F3;&#x5B9E;&#x73B0;&#x7684; Map &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x6563;&#x5217;&#x601D;&#x60F3;&#x662F;&#x6563;&#x5217;&#x8868;&#x7684;&#x6838;&#x5FC3;&#x7279;&#x6027;&#xFF0C;&#x4E5F;&#x5C31;&#x505A;&#x54C8;&#x5E0C;&#x7B97;&#x6CD5;&#x6216; Hash &#x7B97;&#x6CD5;&#x3002;&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x662F;&#x4E00;&#x79CD;&#x5C06; &#x201C;&#x4EFB;&#x610F;&#x957F;&#x5EA6;&#x7684;&#x8F93;&#x5165;&#x6570;&#x636E;&#x201D; &#x6620;&#x5C04;&#x4E3A; &#x201C;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x7279;&#x5F81;&#x503C;&#x201D; &#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x8F93;&#x51FA;&#x7684;&#x7279;&#x5F81;&#x503C;&#x5C31;&#x662F;&#x6563;&#x5217;&#x503C;&#x3002;</p>
<p>&#x7528;&#x4E00;&#x4E2A;&#x8868;&#x683C;&#x603B;&#x7ED3;&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x7684;&#x4E3B;&#x8981;&#x6027;&#x8D28;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x6027;&#x8D28;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody><tr>
<td>1&#x3001;&#x5355;&#x5411;&#x6027;&#xFF08;&#x57FA;&#x672C;&#x6027;&#x8D28;&#xFF09;</td>
<td>&#x652F;&#x6301;&#x4ECE;&#x8F93;&#x5165;&#x751F;&#x6210;&#x6563;&#x5217;&#x503C;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x4ECE;&#x6563;&#x5217;&#x503C;&#x53CD;&#x63A8;&#x8F93;&#x5165;</td>
</tr>
<tr>
<td>2&#x3001;&#x9AD8;&#x6548;&#x6027;&#xFF08;&#x57FA;&#x672C;&#x6027;&#x8D28;&#xFF09;</td>
<td>&#x5355;&#x6B21;&#x6563;&#x5217;&#x8FD0;&#x7B97;&#x8BA1;&#x7B97;&#x91CF;&#x4F4E;</td>
</tr>
<tr>
<td>3&#x3001;&#x4E00;&#x81F4;&#x6027;&#xFF08;&#x57FA;&#x672C;&#x6027;&#x8D28;&#xFF09;</td>
<td>&#x76F8;&#x540C;&#x8F93;&#x5165;&#x91CD;&#x590D;&#x8BA1;&#x7B97;&#xFF0C;&#x603B;&#x662F;&#x5F97;&#x5230;&#x76F8;&#x540C;&#x6563;&#x5217;&#x503C;</td>
</tr>
<tr>
<td>4&#x3001;&#x968F;&#x673A;&#x6027;&#xFF08;&#x9AD8;&#x6548;&#x6027;&#x8D28;&#xFF09;</td>
<td>&#x6563;&#x5217;&#x503C;&#x5728;&#x8F93;&#x51FA;&#x503C;&#x57DF;&#x7684;&#x5206;&#x5E03;&#x5C3D;&#x91CF;&#x968F;&#x673A;</td>
</tr>
<tr>
<td>5&#x3001;&#x8F93;&#x5165;&#x654F;&#x611F;&#x6027;&#xFF08;&#x9AD8;&#x6548;&#x6027;&#x8D28;&#xFF09;</td>
<td>&#x76F8;&#x4F3C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8BA1;&#x7B97;&#x540E;&#x7684;&#x6563;&#x5217;&#x503C;&#x5DEE;&#x522B;&#x5F88;&#x5927;</td>
</tr>
</tbody></table>
<p><strong>&#x5C06;&#x6563;&#x5217;&#x601D;&#x60F3;&#x5E94;&#x7528;&#x5230;&#x6563;&#x5217;&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0A;&#x65F6;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7; hash &#x51FD;&#x6570;&#x63D0;&#x53D6;&#x952E;&#xFF08;Key&#xFF09;&#x7684;&#x7279;&#x5F81;&#x503C;&#xFF08;&#x6563;&#x5217;&#x503C;&#xFF09;&#xFF0C;&#x518D;&#x5C06;&#x952E;&#x503C;&#x5BF9;&#x6620;&#x5C04;&#x5230;&#x56FA;&#x5B9A;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E2D;&#xFF0C;&#x5229;&#x7528;&#x6570;&#x7EC4;&#x652F;&#x6301;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5B9E;&#x73B0; O(1) &#x65F6;&#x95F4;&#x7684;&#x5B58;&#x50A8;&#x548C;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x3002;</strong></p>
<p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x76F4;&#x63A5;&#x4F7F;&#x7528; hash &#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x540E;&#x7684;&#x6563;&#x5217;&#x503C;&#x4F5C;&#x4E3A;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x3002;&#x4F8B;&#x5982; Java Object#hashCode() &#x6563;&#x5217;&#x503C;&#x662F; int &#x7C7B;&#x578B;&#xFF0C;&#x503C;&#x57DF;&#x8DB3;&#x8DB3;&#x6709; 2^32 &#x7684;&#x5BB9;&#x91CF;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x53EF;&#x80FD;&#x521B;&#x5EFA;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x6570;&#x7EC4;&#x3002;</p>
<p>&#x6700;&#x7B80;&#x5355;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x5C06;&#x6563;&#x5217;&#x503C;&#x5BF9;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x53D6;&#x4F59;&#x540E;&#x518D;&#x53D6;&#x7EDD;&#x5BF9;&#x503C;&#xFF1A;<code>|hash % length|</code>&#x3002;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x957F;&#x5EA6; length &#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7B49;&#x4EF7;&#x66FF;&#x6362;&#x6210;&#x4F4D;&#x8FD0;&#x7B97;&#xFF1A;<code>hash &amp; (length - 1)</code> &#xFF0C;&#x4E0D;&#x7BA1;&#x88AB;&#x9664;&#x6570;&#x662F;&#x6B63;&#x8D1F;&#x7ED3;&#x679C;&#x90FD;&#x662F;&#x6B63;&#x6570;&#x3002; <strong>&#x4E0D;&#x4EC5;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x66FF;&#x6362;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97;&#xFF0C;&#x800C;&#x4E14;&#x51CF;&#x5C11;&#x4E86;&#x4E00;&#x6B21;&#x53D6;&#x7EDD;&#x5BF9;&#x503C;&#x8FD0;&#x7B97;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x7D22;&#x5F15;&#x7684;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;10  % 4 = 2</span><br><span class="line">-10 % 4 = -2      // &#x8D1F;&#x6570;</span><br><span class="line">10  &amp; (4 - 1) = 2</span><br><span class="line">-10 &amp; (4 - 1) = 2 // &#x6B63;&#x6570;</span><br></pre></td></tr></table></figure>

<p><code>&#x6563;&#x5217;&#x8868;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/993c5bc39fae69bd527160fad38cbfffa6f4f403a7cbb15e579ad92d768c822b" alt></p>
<blockquote>
<p><strong>&#x63D0;&#x793A;&#xFF1A;</strong> &#x867D;&#x7136;&#x6211;&#x4EEC;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x4F18;&#x5316;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97;&#xFF0C;&#x4F46;&#x662F;&#x4E3A;&#x4E86;&#x4FBF;&#x4E8E;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x540E;&#x6587;&#x4E2D;&#x4F9D;&#x7136;&#x63CF;&#x8FF0;&#x4E3A;&#x903B;&#x8F91;&#x4E0A;&#x7684; &#x201C;&#x53D6;&#x4F59;&#x201D; &#x8FD0;&#x7B97;&#x3002;</p>
</blockquote>
<hr>
<ol start="2">
<li>&#x6563;&#x5217;&#x8868;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x7684;&#x51B2;&#x7A81;&#x95EE;&#x9898;</li>
</ol>
<hr>
<p>&#x56E0;&#x4E3A; Hash &#x7B97;&#x6CD5;&#x4F1A;&#x5C06;&#x975E;&#x5E38;&#x5927;&#x751A;&#x81F3;&#x65E0;&#x7A77;&#x5927;&#x7684;&#x8F93;&#x5165;&#x503C;&#x57DF;&#x6620;&#x5C04;&#x5230; &#x201C;&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x7279;&#x5F81;&#x503C;&#x201D;&#xFF0C;&#x6240;&#x4EE5; Hash &#x7B97;&#x6CD5;&#x4E00;&#x5B9A;&#x662F;&#x538B;&#x7F29;&#x6620;&#x5C04;&#x3002;&#x4F8B;&#x5982;&#xFF0C;MD5 &#x7684;&#x8F93;&#x51FA;&#x6563;&#x5217;&#x503C;&#x4E3A; 128 &#x4F4D;&#xFF0C;SHA256 &#x7684;&#x8F93;&#x51FA;&#x6563;&#x5217;&#x503C;&#x4E3A; 256 &#x4F4D;&#xFF0C;&#x8FD9;&#x5C31;&#x5B58;&#x5728; 2 &#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x8F93;&#x5165;&#x4EA7;&#x751F;&#x76F8;&#x540C;&#x8F93;&#x51FA;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x6216;&#x54C8;&#x5E0C;&#x51B2;&#x7A81;&#xFF08;Hash Collision&#xFF09;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x5728;&#x6563;&#x5217;&#x8868;&#x7684;&#x8BBE;&#x8BA1;&#x4E2D;&#x5B58;&#x5728; 2 &#x6B21;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF1A;</p>
<ul>
<li><strong>&#x7B2C; 1 &#x6B21; - hash &#x51FD;&#x6570;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF1A;</strong> &#x8FD9;&#x662F;&#x4E00;&#x822C;&#x610F;&#x4E49;&#x4E0A;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF1B;</li>
<li><strong>&#x7B2C; 2 &#x6B21; - &#x6563;&#x5217;&#x503C;&#x53D6;&#x4F59;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF1A;</strong> &#x672C;&#x8D28;&#x4E0A;&#xFF0C;&#x5C06;&#x6563;&#x5217;&#x503C;&#x8F6C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E5F;&#x662F;&#x4E00;&#x6B21; Hash &#x7B97;&#x6CD5;&#xFF0C;&#x4E5F;&#x4F1A;&#x5B58;&#x5728;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x8FD9;&#x4E5F;&#x8BF4;&#x660E; HashMap &#x4E2D;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#x8282;&#x70B9;&#x7684;&#x6563;&#x5217;&#x503C;&#x4E0D;&#x4E00;&#x5B9A;&#x662F;&#x76F8;&#x540C;&#x7684;&#x3002;</li>
</ul>
<p>&#x5176;&#x5B9E;&#xFF0C;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x53EA;&#x8981;&#x7528;&#x9E3D;&#x5DE2;&#x539F;&#x7406;&#xFF08;&#x53C8;&#x79F0;&#xFF1A;&#x62BD;&#x5C49;&#x539F;&#x7406;&#xFF09;&#x5C31;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x4E86;&#xFF0C;&#x5047;&#x8BBE;&#x6709; 10 &#x4E2A;&#x9E3D;&#x5DE2;&#xFF0C;&#x73B0;&#x6709; 11 &#x53EA;&#x9E3D;&#x5B50;&#xFF0C;&#x65E0;&#x8BBA;&#x5206;&#x914D;&#x591A;&#x4E48;&#x5E73;&#x5747;&#xFF0C;&#x4E5F;&#x80AF;&#x5B9A;&#x6709;&#x4E00;&#x4E2A;&#x9E3D;&#x5DE2;&#x91CC;&#x6709;&#x4E24;&#x53EA;&#x751A;&#x81F3;&#x591A;&#x53EA;&#x9E3D;&#x5B50;&#x3002;&#x4E3E;&#x4E00;&#x4E2A;&#x76F4;&#x63A5;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;Java &#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32; <code>&quot;Aa&quot;</code> &#x4E0E; <code>&quot;BB&quot;</code> &#x7684;&#x5C31;&#x5B58;&#x5728;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x3002;</p>
<p><code>&#x6563;&#x5217;&#x51B2;&#x7A81;&#x4E3E;&#x4F8B;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;String str1 = &quot;Aa&quot;;</span><br><span class="line">String str2 = &quot;BB&quot;;</span><br><span class="line">System.out.println(str1.hashCode());  // 2112</span><br><span class="line">System.out.println(str2.hashCode());  // 2112 &#x6563;&#x5217;&#x51B2;&#x7A81;</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x6563;&#x5217;&#x8868;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x800C;&#x5931;&#x53BB;&#x6B63;&#x786E;&#x6027;&#x3002;&#x5E38;&#x7528;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x6709; 2 &#x7C7B;&#xFF1A;</p>
<ul>
<li><strong>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#xFF1A;</strong> &#x4F8B;&#x5982; ThreadLocalMap&#xFF1B;</li>
<li><strong>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#xFF1A;</strong> &#x4F8B;&#x5982; HashMap&#x3002;</li>
</ul>
<hr>
<ol start="3">
<li>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;</li>
</ol>
<hr>
<p><strong>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#xFF08;Open Addressing&#xFF09;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#xFF1A;</strong> &#x5728;&#x51FA;&#x73B0;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x5728;&#x6570;&#x7EC4;&#x4E0A;&#x91CD;&#x65B0;&#x63A2;&#x6D4B;&#x51FA;&#x4E00;&#x4E2A;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x3002; &#x7ECF;&#x5178;&#x7684;&#x63A2;&#x6D4B;&#x65B9;&#x6CD5;&#x6709;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#xFF08;Linear Probing&#xFF09;&#x3001;&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#xFF08;Quadratic Probing&#xFF09;&#x548C;&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;&#xFF08;Double Hashing Probing&#xFF09;&#x3002;</p>
<h3 id="3-1-&#x7EBF;&#x6027;&#x63A2;&#x6D4B;"><a href="#3-1-&#x7EBF;&#x6027;&#x63A2;&#x6D4B;" class="headerlink" title="3.1 &#x7EBF;&#x6027;&#x63A2;&#x6D4B;"></a>3.1 &#x7EBF;&#x6027;&#x63A2;&#x6D4B;</h3><p>&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x63A2;&#x6D4B;&#x65B9;&#x6CD5;&#xFF0C;&#x5728; Java &#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x5B58;&#x50A8;&#x7684; ThreadLocal &#x7C7B;&#x4E2D;&#x7684;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x5C31;&#x662F;&#x57FA;&#x4E8E;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x7684;&#x6563;&#x5217;&#x8868;&#x3002;ThreadLocal &#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x540E;&#x7EED;&#x4E13;&#x680F;&#x6587;&#x7AE0;&#x4F1A;&#x8BA8;&#x8BBA;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x3002;</p>
<ul>
<li><strong>&#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x5148;&#x5C06;&#x6563;&#x5217;&#x503C;&#x53D6;&#x4F59;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x63A2;&#x6D4B;&#x4E0E;&#x76EE;&#x6807; Key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;&#x3002;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x5C06;&#x65E7; Value &#x66FF;&#x6362;&#x4E3A;&#x65B0; Value&#xFF0C;&#x5426;&#x5219;&#x6CBF;&#x7740;&#x6570;&#x7EC4;&#x987A;&#x5E8F;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x3002;&#x76F4;&#x5230;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x9047;&#x5230;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x8282;&#x70B9;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x65B0;&#x8282;&#x70B9;&#x3002;&#x5982;&#x679C;&#x5728;&#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;&#x540E;&#x6570;&#x7EC4;&#x6CA1;&#x6709;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#xFF0C;&#x5C31;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#xFF1B;</li>
<li><strong>&#x67E5;&#x627E;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x67E5;&#x627E;&#x7C7B;&#x4F3C;&#x3002;&#x4E5F;&#x662F;&#x5148;&#x5C06;&#x6563;&#x5217;&#x503C;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x3002;&#x76F4;&#x5230;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x9047;&#x5230;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x8282;&#x70B9;&#x4E0D;&#x5B58;&#x5728;&#xFF1B;</li>
<li><strong>&#x5220;&#x9664;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x5220;&#x9664;&#x7C7B;&#x4F3C;&#x3002;&#x7531;&#x4E8E;&#x67E5;&#x627E;&#x64CD;&#x4F5C;&#x5728;&#x9047;&#x5230;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x65F6;&#xFF0C;&#x4F1A;&#x8BA4;&#x4E3A;&#x952E;&#x503C;&#x5BF9;&#x4E0D;&#x5B58;&#x5728;&#x4E8E;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x65F6; &#x201C;&#x771F;&#x5220;&#x9664;&#x201D;&#xFF0C;&#x5C31;&#x4F1A;&#x4F7F;&#x5F97;&#x4E00;&#x7EC4;&#x8FDE;&#x7EED;&#x6BB5;&#x4EA7;&#x751F;&#x65AD;&#x5C42;&#xFF0C;&#x5BFC;&#x81F4;&#x67E5;&#x627E;&#x64CD;&#x4F5C;&#x5931;&#x6548;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x8981;&#x505A; &#x201C;&#x5047;&#x5220;&#x9664;&#x201D;&#xFF0C;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x53EA;&#x662F;&#x5C06;&#x8282;&#x70B9;&#x6807;&#x8BB0;&#x4E3A; &#x201C;Deleted&#x201D;&#xFF0C;&#x67E5;&#x627E;&#x64CD;&#x4F5C;&#x5728;&#x9047;&#x5230; &#x201C;Deleted&#x201D; &#x6807;&#x8BB0;&#x7684;&#x8282;&#x70B9;&#x65F6;&#x4F1A;&#x7EE7;&#x7EED;&#x5411;&#x4E0B;&#x63A2;&#x6D4B;&#x3002;</li>
</ul>
<p><code>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/181efc38de41e5c410025f736f6bd3dcb3ac0cec4d58f2e82002eb4f11f1015c" alt></p>
<p><strong>&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x7684;&#x7F3A;&#x70B9;&#x662F; &#x201C;&#x4E00;&#x6B21;&#x805A;&#x96C6;&#x201D; &#x95EE;&#x9898;&#xFF1A;</strong> &#x4E0D;&#x4EC5;&#x4F1A;&#x8BA9;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x805A;&#x96C6;&#xFF0C;&#x8FD8;&#x4F1A;&#x8BA9;&#x539F;&#x672C;&#x6CA1;&#x6709;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x4F46;&#x4F4D;&#x7F6E;&#x88AB;&#x5360;&#x7528;&#x7684;&#x8282;&#x70B9;&#x88AB;&#x8FEB;&#x805A;&#x96C6;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x964D;&#x4F4E;&#x4E86;&#x6DFB;&#x52A0;&#x548C;&#x67E5;&#x627E;&#x6548;&#x7387;&#x3002;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x6574;&#x5F20;&#x6563;&#x5217;&#x8868;&#x624D;&#x80FD;&#x627E;&#x5230;&#x76EE;&#x6807;&#x4F4D;&#x7F6E;&#x3002;</p>
<h3 id="3-2-&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x6CD5;"><a href="#3-2-&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x6CD5;" class="headerlink" title="3.2 &#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x6CD5;"></a>3.2 &#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x6CD5;</h3><p><strong>&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x4E0E;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x7C7B;&#x4F3C;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF1A;</strong> &#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x7684;&#x63A2;&#x6D4B;&#x6307;&#x9488;&#x662F;&#x4E00;&#x4E2A;&#x7EBF;&#x6027;&#x5E8F;&#x5217;&#xFF0C;&#x800C;&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x7684;&#x63A2;&#x6D4B;&#x6307;&#x9488;&#x662F;&#x4E00;&#x4E2A;&#x5E73;&#x65B9;&#x5E8F;&#x5217;&#x3002;&#x4F7F;&#x7528;&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x5E76;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x89E3;&#x51B3; &#x201C;&#x805A;&#x96C6;&#x201D; &#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x76F8;&#x6BD4;&#x4E8E;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x805A;&#x96C6;&#x73B0;&#x8C61;&#x6709;&#x6240;&#x51CF;&#x5F31;&#x3002;</p>
<p>&#x9700;&#x8981;&#x7279;&#x522B;&#x6CE8;&#x610F;&#xFF0C; <strong>&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x6CD5;&#x5FC5;&#x987B;&#x8981;&#x6C42;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x5FC5;&#x987B;&#x662F; 4k+3 &#x578B;&#x7D20;&#x6570;&#xFF0C;</strong> &#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x80FD;&#x591F;&#x63A2;&#x6D4B;&#x5B8C;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x6570;&#x7EC4;&#x6709;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F46;&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x627E;&#x4E0D;&#x5230;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6B64;&#x65F6;&#x6269;&#x5BB9;&#x663E;&#x5F97;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x3002;</p>
<h3 id="3-3-&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;"><a href="#3-3-&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;" class="headerlink" title="3.3 &#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;"></a>3.3 &#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;</h3><p>&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#xFF1A; &#x63D0;&#x4F9B;&#x4E00;&#x7EC4;&#x6563;&#x5217;&#x51FD;&#x6570;&#xFF0C;&#x5728;&#x9047;&#x5230;&#x8BA1;&#x7B97;&#x5F97;&#x5230;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x88AB;&#x5360;&#x7528;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x4E0B;&#x4E00;&#x4E2A;&#x6563;&#x5217;&#x51FD;&#x6570;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x3002;</p>
<p>&#x5BF9;&#x6BD4;&#x4E0B; 3 &#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x63A2;&#x6D4B;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ul>
<li><strong>&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#xFF1A;</strong> hash(key) + 0&#xFF0C;hash(key) + 1&#xFF0C;hash(key) + 2&#xFF0C;hash(key) + 3&#x2026;</li>
<li><strong>&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#xFF1A;</strong> hash(key) + 0^2&#xFF0C;hash(key) + 1^2&#xFF0C;hash(key) + 2^2&#xFF0C;hash(key) + 3^2&#x2026;</li>
<li><strong>&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;&#xFF1A;</strong> hash(key)&#xFF0C;hash1(key)&#xFF0C;hash2(key)&#xFF0C;hash3(key)&#x2026;</li>
</ul>
<hr>
<ol start="4">
<li>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;</li>
</ol>
<hr>
<p><strong>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#xFF08;Separate Chaining&#xFF09;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#xFF1A;</strong> &#x5728;&#x51FA;&#x73B0;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x5C06;&#x51B2;&#x7A81;&#x7684;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#xFF08;Bucket / Slot&#xFF09;&#x4E2D;&#xFF0C;&#x6876;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#xFF0C;&#x6216;&#x8005;&#x8DF3;&#x8868;&#x3001;&#x7EA2;&#x9ED1;&#x6811;&#x7B49;&#x52A8;&#x6001;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>
<p>&#x76F8;&#x8F83;&#x4E4B;&#x4E0B;&#xFF0C;&#x94FE;&#x8868;&#x6CD5;&#x662F;&#x66F4;&#x5E38;&#x7528;&#x4E14;&#x66F4;&#x7A33;&#x5B9A;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684; Java HashMap &#x5C31;&#x662F;&#x57FA;&#x4E8E;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x3002;HashMap &#x6211;&#x4EEC;&#x4F1A;&#x5728;&#x540E;&#x7EED;&#x4E13;&#x680F;&#x6587;&#x7AE0;&#x4F1A;&#x8BA8;&#x8BBA;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x3002;</p>
<ul>
<li><strong>&#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x5148;&#x901A;&#x8FC7;&#x6563;&#x5217;&#x51FD;&#x6570;&#x5C06;&#x6563;&#x5217;&#x503C;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x7136;&#x540E;&#x6CBF;&#x7740;&#x94FE;&#x8868;&#x5BFB;&#x627E;&#x8282;&#x70B9;&#x7684; Key &#x548C;&#x6DFB;&#x52A0;&#x7684; key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;&#x3002;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x5C06;&#x65E7; Value &#x66FF;&#x6362;&#x4E3A;&#x65B0; Value&#xFF0C;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x5219;&#x521B;&#x5EFA;&#x5728;&#x94FE;&#x8868;&#x4E0A;&#x65B0;&#x5EFA;&#x8282;&#x70B9;&#xFF1B;</li>
<li><strong>&#x67E5;&#x627E;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x67E5;&#x627E;&#x4E0E;&#x6DFB;&#x52A0;&#x7684;&#x6B65;&#x9AA4;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E5F;&#x662F;&#x5148;&#x5C06;&#x6563;&#x5217;&#x503C;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x7136;&#x540E;&#x6CBF;&#x7740;&#x94FE;&#x8868;&#x5BFB;&#x627E;&#x8282;&#x70B9;&#x7684; Key &#x548C;&#x6DFB;&#x52A0;&#x7684; key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;&#x3002;&#x5982;&#x679C;&#x627E;&#x4E0D;&#x5230;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x952E;&#x503C;&#x5BF9;&#x4E0D;&#x5B58;&#x5728;&#x4E8E;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF1B;</li>
<li><strong>&#x5220;&#x9664;&#x952E;&#x503C;&#x5BF9;&#xFF1A;</strong> &#x5220;&#x9664;&#x952E;&#x503C;&#x5BF9;&#x4E0D;&#x9700;&#x8981; &#x201C;&#x5047;&#x5220;&#x9664;&#x201D;&#xFF0C;&#x4E0E;&#x6DFB;&#x52A0;&#x548C;&#x67E5;&#x627E;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E5F;&#x662F;&#x5148;&#x5C06;&#x6563;&#x5217;&#x503C;&#x6620;&#x5C04;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#xFF0C;&#x7136;&#x540E;&#x6CBF;&#x7740;&#x94FE;&#x8868;&#x5BFB;&#x627E;&#x8282;&#x70B9;&#x7684; Key &#x548C;&#x6DFB;&#x52A0;&#x7684; key &#x76F8;&#x7B49;&#x7684;&#x8282;&#x70B9;&#x3002;&#x5982;&#x679C;&#x627E;&#x5230;&#xFF0C;&#x5219;&#x5C06;&#x8282;&#x70B9;&#x4ECE;&#x94FE;&#x8868;&#x4E0A;&#x79FB;&#x9664;&#x3002;</li>
</ul>
<p><code>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x793A;&#x610F;&#x56FE;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1fabdcb565ad870704b3b9fffeb807e5ba72dcf7d2ac91d25ca730e0944981c9" alt></p>
<hr>
<ol start="5">
<li>&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x6027;&#x80FD;&#x7684;&#x56E0;&#x7D20;</li>
</ol>
<hr>
<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x6211;&#x4EEC;&#x9010;&#x6E10;&#x660E;&#x767D;&#xFF0C; <strong>&#x6563;&#x5217;&#x8868;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5E76;&#x4E0D;&#x662F;&#x7EDD;&#x5BF9;&#x7684; O(1)&#x3002;</strong> &#x5B83;&#x4E0E;&#x5730;&#x5740;&#x5806;&#x79EF;&#x7684;&#x4E2A;&#x6570; K &#x6216;&#x94FE;&#x8868;&#x7684;&#x957F;&#x5EA6; K &#x6709;&#x5173;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; O(K)&#x3002;&#x867D;&#x7136; O(K) &#x4E5F;&#x662F;&#x5E38;&#x6570;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x5E38;&#x6570;&#x3002;&#x5728;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F53;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5806;&#x79EF;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x6216;&#x8005;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x6620;&#x5C04;&#x5230;&#x76F8;&#x540C;&#x7684;&#x94FE;&#x8868;&#x4E2D;&#x65F6;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5C31;&#x4F1A;&#x4ECE; O(1) &#x9000;&#x5316;&#x5230; O(n)&#x3002;</p>
<p><strong>&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x6027;&#x80FD;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E; &#x201C;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x53D1;&#x751F;&#x6982;&#x7387;&#x201D;&#xFF0C;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x8D8A;&#x4F4E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x8D8A;&#x63A5;&#x8FD1;&#x4E8E; O(1)&#x3002;</strong> &#x90A3;&#x4E48;&#xFF0C;&#x54EA;&#x4E9B;&#x56E0;&#x7D20;&#x4F1A;&#x5F71;&#x54CD;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x5462;&#xFF1F;&#x4E3B;&#x8981;&#x6709; 3 &#x4E2A;&#xFF1A;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x3001;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3001;&#x6563;&#x5217;&#x51FD;&#x6570;&#x3002;</p>
<h3 id="5-1-&#x56E0;&#x7D20;-1-&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x548C;&#x6269;&#x5BB9;"><a href="#5-1-&#x56E0;&#x7D20;-1-&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x548C;&#x6269;&#x5BB9;" class="headerlink" title="5.1 &#x56E0;&#x7D20; 1 - &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x548C;&#x6269;&#x5BB9;"></a>5.1 &#x56E0;&#x7D20; 1 - &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x548C;&#x6269;&#x5BB9;</h3><p><strong>&#x7406;&#x89E3;&#x4E86;&#x5F00;&#x653E;&#x5730;&#x5740;&#x6CD5;&#x548C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x4E24;&#x79CD;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x53D1;&#x73B0;&#xFF1A;</strong> &#x65E0;&#x8BBA;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x968F;&#x7740;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x7684;&#x53D1;&#x751F;&#x6982;&#x7387;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x4F7F;&#x5F97;&#x6563;&#x5217;&#x8868;&#x64CD;&#x4F5C;&#x7684;&#x5E73;&#x5747;&#x65F6;&#x95F4;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x3002;&#x4E3A;&#x4E86;&#x63CF;&#x8FF0;&#x6563;&#x5217;&#x8868;&#x7684;&#x88C5;&#x6EE1;&#x7A0B;&#x5EA6;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49; <strong>&#x88C5;&#x8F7D;&#x56E0;&#x5B50; (Load Factor) = &#x6563;&#x5217;&#x8868;&#x4E2D;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x76EE; / &#x6563;&#x5217;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x3002;</strong></p>
<ul>
<li><strong>&#x5728;&#x57FA;&#x4E8E;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x7684;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF1A;</strong> &#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x6700;&#x5927;&#x503C;&#x662F; 1&#xFF08;&#x6570;&#x7EC4;&#x88C5;&#x6EE1;&#xFF09;&#xFF0C;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E3A; 1 &#x65F6;&#x65E0;&#x6CD5;&#x6DFB;&#x52A0;&#x65B0;&#x5143;&#x7D20;&#xFF0C;&#x5FC5;&#x987B;&#x6269;&#x5BB9;&#xFF1B;</li>
<li><strong>&#x5728;&#x57FA;&#x4E8E;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x7684;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF1A;</strong> &#x5141;&#x8BB8;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x8D85;&#x8FC7; 1&#xFF08;&#x62C9;&#x957F;&#x51FA;&#x5F88;&#x957F;&#x7684;&#x94FE;&#x8868;&#xFF09;&#xFF0C;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E3A; 1 &#x65F6;&#xFF0C;&#x6269;&#x5BB9;&#x5E76;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;&#x88C5;&#x8F7D;&#x56E0;&#x5B50; = &#x6563;&#x5217;&#x8868;&#x4E2D;&#x952E;&#x503C;&#x5BF9;&#x6570;&#x76EE; / &#x6563;&#x5217;&#x8868;&#x7684;&#x957F;&#x5EA6;</span><br></pre></td></tr></table></figure>

<p>&#x6269;&#x5BB9;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x6269;&#x5927;&#x4E86;&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x7684;&#x8F93;&#x51FA;&#x503C;&#x57DF;&#xFF0C;&#x6269;&#x5927;&#x8F93;&#x51FA;&#x503C;&#x57DF;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x964D;&#x4F4E;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x7B49;&#x5230;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x63A5;&#x8FD1; 1 &#x65F6;&#x518D;&#x6269;&#x5BB9;&#xFF0C;&#x800C;&#x662F;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5904;&#x4E8E; (0, 1) &#x4E4B;&#x95F4;&#x7684; <strong>&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#xFF08;&#x6269;&#x5BB9;&#x9608;&#x503C;&#xFF09;&#x3002;</strong> &#x4F8B;&#x5982;&#xFF0C;&#x5728; HashMap &#x4E2D;&#x8BBE;&#x7F6E;&#x7684;&#x9ED8;&#x8BA4;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x662F; 0.75&#x3002;</p>
<p>&#x5F53;&#x6563;&#x5217;&#x8868;&#x7684;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x5927;&#x4E8E;&#x6269;&#x5BB9;&#x9608;&#x503C;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x5C06;&#x539F;&#x6709;&#x7684;&#x6570;&#x636E;&#x642C;&#x8FD0;&#x5230;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#x4E0A;&#x3002;&#x4E0E;&#x666E;&#x901A;&#x6570;&#x7EC4;&#x76F8;&#x6BD4;&#xFF0C;&#x6563;&#x5217;&#x8868;&#x7684;&#x52A8;&#x6001;&#x6269;&#x5BB9;&#x4E0D;&#x518D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x642C;&#x8FD0;&#xFF0C;&#x56E0;&#x4E3A;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x53D8;&#x5316;&#x4E86;&#xFF0C;&#x516C;&#x5F0F; <code>hash &amp; (length - 1)</code> &#x7684;&#x8BA1;&#x7B97;&#x7684;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E5F;&#x53D8;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E00;&#x6269;&#x5BB9;&#x8FC7;&#x7A0B;&#x4E5F;&#x53EB; &#x201C;&#x518D;&#x6563;&#x5217;&#x201D;&#xFF08;&#x4E0D;&#x8981;&#x548C;&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;&#x6DF7;&#x6DC6;&#xFF09;&#x3002;</p>
<p><code>&#x6563;&#x5217;&#x8868;&#x7684;&#x6269;&#x5BB9;&#x8FC7;&#x7A0B;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/62ce6cbf60c6c45daa9210a4762eeeac46cee1f8998517acecac06f60f8aac50" alt></p>
<p>&#x5F53;&#x6DFB;&#x52A0;&#x64CD;&#x4F5C;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x82B1;&#x8D39; O(n) &#x65F6;&#x95F4;&#x518D;&#x6563;&#x5217;&#x548C;&#x642C;&#x8FD0;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x6563;&#x5217;&#x8868;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x8FD8;&#x662F; O(1) &#x5E38;&#x6570;&#x65F6;&#x95F4;&#x5417;&#xFF1F;&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x5927;&#x90E8;&#x5206;&#x64CD;&#x4F5C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5F88;&#x4F4E;&#xFF0C;&#x53EA;&#x6709;&#x4E2A;&#x522B;&#x60C5;&#x51B5;&#x4E0B;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4F1A;&#x9000;&#x5316;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x5F88;&#x5F3A;&#x70C8;&#x7684;&#x987A;&#x5E8F;&#x5173;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5C31;&#x5F88;&#x9002;&#x5408;&#x7528; <strong>&#x201C;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x201D;</strong> &#x4E86;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x82B1;&#x8D39; O(n) &#x65F6;&#x95F4;&#x7684;&#x90A3;&#x4E00;&#x6B21;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x5747;&#x644A;&#x5230;&#x968F;&#x540E;&#x7684;&#x591A;&#x6B21; O(1) &#x65F6;&#x95F4;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x4E0A;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x4ECE;&#x6574;&#x4F53;&#x770B;&#xFF0C;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x7684;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5C31;&#x662F; O(1)&#x3002;</p>
<p><strong>&#x4EE5;&#x4E0A;&#x662F;&#x4ECE;&#x7B97;&#x6CD5;&#x5206;&#x6790;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x4ECE;&#x5DE5;&#x7A0B;&#x5206;&#x6790;&#x7684;&#x89D2;&#x5EA6;&#x770B;&#xFF0C;&#x4E8B;&#x60C5;&#x8FD8;&#x6CA1;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#x3002;</strong> &#x5728;&#x5927;&#x6570;&#x636E;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x65E7;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x6709; 1 GB &#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#x5BF9; 1 GB &#x7684;&#x6570;&#x636E;&#x91CF;&#x505A;&#x518D;&#x6563;&#x5217;&#x3002;&#x65E0;&#x8BBA;&#x7B97;&#x6CD5;&#x5206;&#x6790;&#x628A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x644A;&#x8FD8;&#x5230;&#x591A;&#x4F4E;&#xFF0C;&#x5BF9; 1 GB &#x6570;&#x636E;&#x91CF;&#x7684;&#x518D;&#x6563;&#x5217;&#x5C31;&#x662F;&#x5B9E;&#x6253;&#x5B9E;&#x7684;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x662F;&#x65E0;&#x6CD5;&#x5FCD;&#x53D7;&#x7684;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x4E3A;&#x907F;&#x514D;&#x4E00;&#x6B21;&#x6027;&#x6269;&#x5BB9;&#x8FC7;&#x591A;&#x6570;&#x636E;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6709;&#x4E00;&#x79CD; <strong>&#x201C;&#x61D2;&#x6269;&#x5BB9;&#x201D;</strong> &#x65B9;&#x6848;&#xFF1A;&#x5728;&#x521B;&#x65B0;&#x4E00;&#x4E2A;&#x65B0;&#x6563;&#x5217;&#x8868;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x4FDD;&#x7559;&#x65E7;&#x7684;&#x6563;&#x5217;&#x8868;&#x3002;&#x6BCF;&#x6B21;&#x63D2;&#x5165;&#x65B0;&#x7684;&#x6570;&#x636E;&#x90FD;&#x63D2;&#x5165;&#x5230;&#x65B0;&#x6563;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5E76;&#x4ECE;&#x65E7;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x53D6;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x518D;&#x6563;&#x5217;&#x5230;&#x65B0;&#x7684;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x3002;&#x7ECF;&#x8FC7;&#x591A;&#x6B21;&#x64CD;&#x4F5C;&#x540E;&#xFF0C;&#x65E7;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5C31;&#x9010;&#x6E10;&#x642C;&#x8FD0;&#x5230;&#x65B0;&#x6563;&#x5217;&#x8868;&#x4E2D;&#x3002;</p>
<h3 id="5-2-&#x56E0;&#x7D20;-2-&#x91C7;&#x7528;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;"><a href="#5-2-&#x56E0;&#x7D20;-2-&#x91C7;&#x7528;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;" class="headerlink" title="5.2 &#x56E0;&#x7D20; 2 - &#x91C7;&#x7528;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;"></a>5.2 &#x56E0;&#x7D20; 2 - &#x91C7;&#x7528;&#x7684;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</h3><p>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x548C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x9002;&#x7528;&#x573A;&#x666F;&#x4E0D;&#x540C;&#xFF1A;</p>
<ul>
<li><strong>1&#x3001;&#x8BBF;&#x95EE;&#x6548;&#x7387;&#x4E0D;&#x540C;&#xFF1A;</strong> &#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x4E2D;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;&#xFF0C;&#x57FA;&#x4E8E;&#x5C40;&#x90E8;&#x6027;&#x539F;&#x7406;&#xFF0C;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x5730;&#x547D;&#x4E2D; CPU &#x7F13;&#x5B58;&#x884C;&#x3002;&#x800C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x4E3B;&#x8981;&#x4F4D;&#x4E8E;&#x94FE;&#x8868;&#x4E2D;&#xFF0C;&#x662F;&#x79BB;&#x6563;&#x7684;&#x5185;&#x5B58;&#x533A;&#x57DF;&#xFF0C;&#x5BF9; CPU &#x7F13;&#x5B58;&#x884C;&#x4E0D;&#x4F18;&#x53CB;&#x597D;&#xFF1B;</li>
<li><strong>2&#x3001;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x4E0D;&#x540C;&#xFF1A;</strong> &#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x7684;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x5929;&#x7136;&#x6BD4;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x9AD8;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x5728;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x540E;&#xFF0C;&#x4F1A;&#x5728;&#x4E34;&#x8FD1;&#x7684;&#x4F4D;&#x7F6E;&#x5BFB;&#x627E;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x586B;&#x5145;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;&#x539F;&#x672C;&#x5E76;&#x6CA1;&#x6709; &#x201C;&#x51B2;&#x7A81;&#x201D; &#x7684;&#x952E;&#x503C;&#x5BF9;&#x4E5F;&#x4F1A;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x800C;&#x88AB;&#x8FEB;&#x5806;&#x79EF;&#x3002;&#x800C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x53EA;&#x6709;&#x786E;&#x5B9E;&#x53D1;&#x751F;&#x51B2;&#x7A81;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x624D;&#x4F1A;&#x5806;&#x79EF;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#x4E2D;&#xFF1B;</li>
<li><strong>3&#x3001;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x540C;&#xFF1A;</strong> &#x7531;&#x4E8E;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x7684;&#x51B2;&#x7A81;&#x6982;&#x7387;&#x66F4;&#x9AD8;&#xFF0C;&#x6240;&#x4EE5;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0A;&#x9650;&#x4E0D;&#x80FD;&#x8BBE;&#x7F6E;&#x5F88;&#x9AD8;&#xFF0C;&#x5B58;&#x50A8;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x4E5F;&#x9700;&#x8981;&#x9884;&#x5148;&#x7533;&#x8BF7;&#x66F4;&#x5927;&#x7684;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#xFF0C;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E0D;&#x4F1A;&#x9AD8;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x5728;&#x94FE;&#x8868;&#x6307;&#x9488;&#x4E0A;&#x4E5F;&#x6709;&#x989D;&#x5916;&#x5185;&#x5B58;&#x6D88;&#x8017;&#xFF0C;&#x5982;&#x679C;&#x5B58;&#x50A8;&#x7684;&#x5143;&#x7D20;&#x7684;&#x5185;&#x5B58;&#x91CF;&#x8FDC;&#x8FDC;&#x5927;&#x4E8E;&#x4E00;&#x4E2A;&#x6307;&#x9488;&#x7684;&#x5185;&#x5B58;&#x91CF;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x4E0D;&#x53CA;&#x3002;</li>
</ul>
<p>&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7684;&#x9002;&#x7528;&#x573A;&#x666F;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<ul>
<li><strong>&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5; - &#x5BF9;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x654F;&#x611F;&#xFF0C;&#x9002;&#x5408;&#x4E8E;&#x5C0F;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x8F83;&#x5C0F;&#x7684;&#x573A;&#x666F;&#xFF1A;</strong> &#x4F8B;&#x5982; Java &#x7684; ThreadlLocalMap&#xFF0C;&#x56E0;&#x4E3A;&#x9879;&#x76EE;&#x4E2D;&#x4E0D;&#x4F1A;&#x5927;&#x91CF;&#x4F7F;&#x7528; ThreadLocal &#x7EBF;&#x7A0B;&#x5C40;&#x90E8;&#x5B58;&#x50A8;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5C0F;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x573A;&#x666F;&#xFF0C;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x5F00;&#x53D1;&#x5730;&#x5740;&#x6CD5;&#x662F;&#x6CA1;&#x95EE;&#x9898;&#x7684;&#xFF1B;</li>
<li><strong>&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5; - &#x5BF9;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x5BB9;&#x5FCD;&#x5EA6;&#x66F4;&#x9AD8;&#xFF0C;&#x9002;&#x5408;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x5927;&#x5BF9;&#x8C61;&#xFF08;&#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x6307;&#x9488;&#xFF09;&#x7684;&#x573A;&#x666F;&#xFF1A;</strong> &#x4F8B;&#x5982;&#xFF0C;Java &#x4E2D;&#x66F4;&#x901A;&#x7528;&#x7684; HashMap &#x6563;&#x5217;&#x8868;&#x5C31;&#x662F;&#x91C7;&#x7528;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x3002;&#x800C;&#x4E14;&#xFF0C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x8FD8;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x66F4;&#x591A;&#x7075;&#x6D3B;&#x7684;&#x4F18;&#x5316;&#x7B56;&#x7565;&#xFF0C;&#x4F8B;&#x5982;&#x5C06;&#x94FE;&#x8868;&#x6811;&#x5316;&#x4E3A;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x907F;&#x514D;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#x4E0B;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x9000;&#x5316;&#x4E3A; O(n)&#x3002;</li>
</ul>
<h3 id="5-3-&#x56E0;&#x7D20;-3-&#x6563;&#x5217;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;"><a href="#5-3-&#x56E0;&#x7D20;-3-&#x6563;&#x5217;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;" class="headerlink" title="5.3 &#x56E0;&#x7D20; 3 - &#x6563;&#x5217;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;"></a>5.3 &#x56E0;&#x7D20; 3 - &#x6563;&#x5217;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;</h3><p>&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x968F;&#x673A;&#x6027;&#x548C;&#x9AD8;&#x6548;&#x6027;&#x4E5F;&#x4F1A;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5982;&#x679C;&#x6563;&#x5217;&#x503C;&#x4E0D;&#x591F;&#x968F;&#x673A;&#xFF0C;&#x5373;&#x4F7F;&#x6563;&#x5217;&#x8868;&#x6574;&#x4F53;&#x7684;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x4E0D;&#x9AD8;&#xFF0C;&#x4E5F;&#x4F1A;&#x4F7F;&#x5F97;&#x6570;&#x636E;&#x805A;&#x96C6;&#x5728;&#x67D0;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x6216;&#x6876;&#x5185;&#xFF0C;&#x4F9D;&#x7136;&#x4F1A;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x7684;&#x6027;&#x80FD;&#x3002;&#x5982;&#x679C;&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x4E0D;&#x591F;&#x9AD8;&#x6548;&#xFF0C;&#x4E5F;&#x4F1A;&#x76F4;&#x63A5;&#x6D88;&#x8017;&#x8BA1;&#x7B97;&#x6027;&#x80FD;&#x3002;</p>
<hr>
<ol start="6">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<ul>
<li>1&#x3001;&#x6563;&#x5217;&#x8868;&#x662F;&#x57FA;&#x4E8E;&#x6563;&#x5217;&#x601D;&#x60F3;&#x5B9E;&#x73B0;&#x7684; Map &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7; hash &#x51FD;&#x6570;&#x63D0;&#x53D6;&#x952E;&#xFF08;Key&#xFF09;&#x7684;&#x7279;&#x5F81;&#x503C;&#xFF08;&#x6563;&#x5217;&#x503C;&#xFF09;&#xFF0C;&#x518D;&#x5C06;&#x952E;&#x503C;&#x5BF9;&#x6620;&#x5C04;&#x5230;&#x56FA;&#x5B9A;&#x7684;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4E2D;&#xFF0C;&#x5229;&#x7528;&#x6570;&#x7EC4;&#x652F;&#x6301;&#x968F;&#x673A;&#x8BBF;&#x95EE;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x5B9E;&#x73B0; O(1) &#x65F6;&#x95F4;&#x7684;&#x5B58;&#x50A8;&#x548C;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#xFF1B;</li>
<li>2&#x3001;&#x5F53;&#x6570;&#x7EC4;&#x7684;&#x957F;&#x5EA6;&#x4E3A; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x8F6C;&#x6362;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97; <code>hash &amp; (length - 1)</code>&#xFF0C;&#x63D0;&#x9AD8;&#x7D22;&#x5F15;&#x7684;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#xFF1B;</li>
<li>3&#x3001;&#x7531;&#x4E8E;&#x6563;&#x5217;&#x503C;&#x7B97;&#x6CD5;&#x662F;&#x538B;&#x7F29;&#x6620;&#x5C04;&#xFF0C;&#x6240;&#x4EE5;&#x6563;&#x5217;&#x8868;&#x6C38;&#x8FDC;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x6563;&#x5217;&#x51B2;&#x7A81;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x6709;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x548C;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#xFF1B;</li>
<li>4&#x3001;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#xFF08;Open Addressing&#xFF09;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#x5728;&#x51FA;&#x73B0;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x5728;&#x6570;&#x7EC4;&#x4E0A;&#x91CD;&#x65B0;&#x63A2;&#x6D4B;&#x51FA;&#x4E00;&#x4E2A;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#x3002; &#x7ECF;&#x5178;&#x7684;&#x63A2;&#x6D4B;&#x65B9;&#x6CD5;&#x6709;&#x7EBF;&#x6027;&#x63A2;&#x6D4B;&#x3001;&#x5E73;&#x65B9;&#x63A2;&#x6D4B;&#x548C;&#x53CC;&#x6563;&#x5217;&#x63A2;&#x6D4B;&#xFF1B;</li>
<li>5&#x3001;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#xFF08;Separate Chaining&#xFF09;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x662F;&#x5728;&#x51FA;&#x73B0;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x65F6;&#xFF0C;&#x5C06;&#x51B2;&#x7A81;&#x7684;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x6876;&#xFF08;Bucket / Slot&#xFF09;&#x4E2D;&#xFF0C;&#x6876;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x7EC4;&#x6210;&#x4E00;&#x4E2A;&#x94FE;&#x8868;&#xFF0C;&#x6216;&#x8005;&#x8DF3;&#x8868;&#x3001;&#x7EA2;&#x9ED1;&#x6811;&#x7B49;&#x52A8;&#x6001;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1B;</li>
<li>6&#x3001;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x5BF9;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x654F;&#x611F;&#xFF0C;&#x9002;&#x5408;&#x4E8E;&#x5C0F;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x8F83;&#x5C0F;&#x7684;&#x573A;&#x666F;&#x3002;&#x5206;&#x79BB;&#x94FE;&#x8868;&#x6CD5;&#x5BF9;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x7684;&#x5BB9;&#x5FCD;&#x5EA6;&#x66F4;&#x9AD8;&#xFF0C;&#x9002;&#x5408;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x91CF;&#x4E14;&#x5927;&#x5BF9;&#x8C61;&#xFF08;&#x76F8;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x6307;&#x9488;&#xFF09;&#x7684;&#x573A;&#x666F;&#xFF1B;</li>
<li>7&#x3001;&#x91C7;&#x7528;&#x7684;&#x6563;&#x5217;&#x51B2;&#x7A81;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3001;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x548C;&#x6563;&#x5217;&#x51FD;&#x6570;&#x8BBE;&#x8BA1;&#x90FD;&#x4F1A;&#x5F71;&#x54CD;&#x6563;&#x5217;&#x8868;&#x6027;&#x80FD;&#x3002;</li>
</ul>
<p>&#x4ECA;&#x5929;&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x4E86;&#x6563;&#x5217;&#x8868;&#x7684;&#x6574;&#x4F53;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#x3002;&#x5728;&#x540E;&#x7EED;&#x51E0;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8BA8;&#x8BBA;&#x6563;&#x5217;&#x8868;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0; &#x2014;&#x2014; <a href="https://dev.newban.cn/7163985718417555487"># Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6; #5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6;</a></p>
<hr>
<h3 id="&#x7248;&#x6743;&#x58F0;&#x660E;"><a href="#&#x7248;&#x6743;&#x58F0;&#x660E;" class="headerlink" title="&#x7248;&#x6743;&#x58F0;&#x660E;"></a>&#x7248;&#x6743;&#x58F0;&#x660E;</h3><p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<h3 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><ul>
<li>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x5206;&#x6790; &#xB7; Java &#x8BED;&#x8A00;&#x63CF;&#x8FF0;&#xFF08;&#x7B2C; 5 &#x7AE0; &#xB7; &#x6563;&#x5217;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Mark Allen Weiss &#x8457;</li>
<li>&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;&#xFF08;&#x7B2C; 11 &#x7AE0; &#xB7; &#x6563;&#x5217;&#x8868;&#xFF09;&#x2014;&#x2014; [&#x7F8E;] Thomas H. Cormen &#x7B49; &#x8457;</li>
<li><a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">&#x6563;&#x5217;&#x7B97;&#x6CD5;</a> &#x2014;&#x2014; &#x7EF4;&#x57FA;&#x767E;&#x79D1;</li>
<li><a href="/external_links/3529d049f48fd001823dfe2eff3eb3ee.html" target="blank" rel="noopener">&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x4E4B;&#x7F8E;&#xFF08;&#x7B2C; 18~22 &#x8BB2;&#xFF09;</a> &#x2014;&#x2014; &#x738B;&#x4E89; &#x8457;&#xFF0C;&#x6781;&#x5BA2;&#x65F6;&#x95F4; &#x51FA;&#x54C1;</li>
</ul>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x5B8C;&#x6574;&#x76EE;&#x5F55;&#x5982;&#x4E0B;&#xFF08;2023/07/11 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="/external_links/b3c78a45e149e66d3ca4d556df597bf0.html" target="blank" rel="noopener">#1 &#x94FE;&#x8868;&#x95EE;&#x9898;&#x603B;&#x7ED3;</a></li>
<li><a href="https://dev.newban.cn/6881580736428638215">#2 &#x94FE;&#x8868;&#x76F8;&#x4EA4; &amp; &#x6210;&#x73AF;&#x95EE;&#x9898;&#x603B;&#x7ED3;</a></li>
<li><a href="https://dev.newban.cn/6938387752811495455">#3 &#x8BA1;&#x7B97;&#x5668;&#x4E0E;&#x9006;&#x6CE2;&#x5170;&#x8868;&#x8FBE;&#x5F0F;&#x603B;&#x7ED3;</a></li>
<li><a href="https://dev.newban.cn/6938389793760313375">#4 &#x9AD8;&#x697C;&#x4E22;&#x9E21;&#x86CB;&#x95EE;&#x9898;&#x603B;&#x7ED3;</a></li>
<li><a href="https://dev.newban.cn/7145888770410151967">#5 &#x4E3A;&#x4EC0;&#x4E48;&#x4F60;&#x5B66;&#x4E0D;&#x4F1A;&#x9012;&#x5F52;&#xFF1F;&#x8C08;&#x8C08;&#x6211;&#x7684;&#x7ECF;&#x9A8C;</a></li>
<li><a href="https://dev.newban.cn/6882928981268496398">#6 &#x56DE;&#x6EAF;&#x7B97;&#x6CD5;&#x89E3;&#x9898;&#x6846;&#x67B6;&#x603B;&#x7ED3;</a></li>
<li><a href="https://dev.newban.cn/6933241413341708296">#7 &#x4E0B;&#x6B21;&#x9762;&#x8BD5;&#x9047;&#x5230;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#xFF0C;&#x522B;&#x518D;&#x5199;&#x9519;&#x4E86;</a></li>
<li><a href="https://dev.newban.cn/7170767634445631525">#8 &#x4EC0;&#x4E48;&#x662F;&#x4E8C;&#x53C9;&#x6811;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/6904691545493274637">#9 &#x4EC0;&#x4E48;&#x662F;&#x4E8C;&#x53C9;&#x5806; &amp; Top K &#x95EE;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/7147962276534812685">#10 &#x4F7F;&#x7528;&#x524D;&#x7F00;&#x548C;&#x6570;&#x7EC4;&#x89E3;&#x51B3; &#x201C;&#x533A;&#x95F4;&#x548C;&#x67E5;&#x8BE2;&#x201D; &#x95EE;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/6984052900901158943">#11 &#x9762;&#x8BD5;&#x9047;&#x5230;&#x7EBF;&#x6BB5;&#x6811;&#xFF0C;&#x5DF2;&#x7ECF;&#x8FD9;&#x4E48;&#x5377;&#x4E86;&#x5417;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7144939559489372168">#12 &#x4F7F;&#x7528;&#x5355;&#x8C03;&#x961F;&#x5217;&#x89E3;&#x51B3; &#x201C;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x6700;&#x5927;&#x503C;&#x201D; &#x95EE;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/7144769422882766885">#13 &#x4F7F;&#x7528;&#x5355;&#x8C03;&#x6808;&#x89E3;&#x51B3; &#x201C;&#x4E0B;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x5143;&#x7D20;&#x201D; &#x95EE;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/7143880364233064455">#14 &#x4F7F;&#x7528;&#x5E76;&#x67E5;&#x96C6;&#x89E3;&#x51B3; &#x201C;&#x670B;&#x53CB;&#x5708;&#x201D; &#x95EE;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/7163301919316934693">#15 &#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x4F18;&#x79C0;&#x7684; HashTable &#x6563;&#x5217;&#x8868;</a></li>
<li><a href="https://dev.newban.cn/7122091070862655501">#16 &#x7B80;&#x7B54;&#x4E00;&#x6CE2; HashMap &#x5E38;&#x89C1;&#x9762;&#x8BD5;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/6917131822711341070">#17 &#x4E8C;&#x53C9;&#x6811;&#x9AD8;&#x9891;&#x9898;&#x578B;&#x6C47;&#x603B;</a></li>
<li><a href="/external_links/35f965662438333b89497cb8a85bd762.html" target="blank" rel="noopener">#18 &#x4E0B;&#x8DF3;&#x68CB;&#xFF0C;&#x6781;&#x5BCC;&#x60F3;&#x8C61;&#x529B;&#x7684;&#x540C;&#x5411;&#x53CC;&#x6307;&#x9488;&#x6A21;&#x62DF;</a></li>
</ul>
<p>Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;: <a href="https://dev.newban.cn/7161731329078329381">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
<p>LeetCode &#x4E0A;&#x5206;&#x4E4B;&#x65C5;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/7200769439335481399">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bc0395bbb4fd179c90d2e7fa7ac7210602cc6f9a1f6d67d395295c57e54d8b98" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8b41b1a3fc111770cd4cfbe96ee4de4a.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7162819765361672199.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7162819765361672199.html" itemprop="url">Java & Android 集合框架</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-11-06T16:41:28+08:00">
                2022-11-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5B66;&#x4E60;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7684;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x638C;&#x63E1;&#x95EE;&#x9898;&#x80CC;&#x540E;&#x7684;&#x7B97;&#x6CD5;&#x601D;&#x7EF4;&#x6846;&#x67B6;&#xFF0C;&#x4F60;&#x7684;&#x601D;&#x8003;&#x8D8A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x80FD;&#x8986;&#x76D6;&#x7684;&#x95EE;&#x9898;&#x57DF;&#x5C31;&#x8D8A;&#x5E7F;&#xFF0C;&#x7406;&#x89E3;&#x96BE;&#x5EA6;&#x4E5F;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F80;&#x5F80;&#x4E0D;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x5E93;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784; / &#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F; Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 4 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x5F6D;&#x3002;</p>
<p><a href="https://dev.newban.cn/7162203434014212109">&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;</a>&#xFF0C;&#x6211;&#x4EEC;&#x804A;&#x5230;&#x4E86;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x7684; Queue &#x548C; Stack &#x5B9E;&#x73B0; &#x2014;&#x2014; LinkedList&#x3002;&#x90A3;&#x4E48; Java &#x4E2D;&#x6709;&#x6CA1;&#x6709;&#x57FA;&#x4E8E;&#x6570;&#x7EC4;&#x7684; Queue &#x548C; Stack &#x5B9E;&#x73B0;&#x5462;&#xFF1F;&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x804A;&#x804A;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#x3002;</p>
<hr>
<p><strong>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF1A;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/7b774f25f3b4659d4f1ee330bf2f68a5389c00f83bbe8fc738a5ff27b8741ca8" alt></p>
<hr>
<ol>
<li>&#x56DE;&#x987E; LinkedList</li>
</ol>
<hr>
<p>&#x5728;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0A;&#xFF0C;LinkedList &#x4E0D;&#x4EC5;&#x5B9E;&#x73B0;&#x4E86;&#x4E0E; ArrayList &#x76F8;&#x540C;&#x7684; List &#x63A5;&#x53E3;&#xFF0C;&#x8FD8;&#x5B9E;&#x73B0;&#x4E86; Deque &#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x8981;&#x8BB2;&#x7684; ArrayDeque &#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x4E8E; Deque &#x63A5;&#x53E3;&#x7684;&#x52A8;&#x6001;&#x6570;&#x7EC4;&#x3002;</p>
<p>Deque &#x63A5;&#x53E3;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x53CC;&#x7AEF;&#x961F;&#x5217;&#xFF08;Double Ended Queue&#xFF09;&#xFF0C;&#x5141;&#x8BB8;&#x5728;&#x961F;&#x5217;&#x7684;&#x9996;&#x5C3E;&#x4E24;&#x7AEF;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x65E2;&#x80FD;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x884C;&#x4E3A;&#xFF0C;&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x6808;&#x884C;&#x4E3A;&#x3002;</p>
<h3 id="1-1-Queue-&#x63A5;&#x53E3;"><a href="#1-1-Queue-&#x63A5;&#x53E3;" class="headerlink" title="1.1 Queue &#x63A5;&#x53E3;"></a>1.1 Queue &#x63A5;&#x53E3;</h3><p>Queue &#x7684; API &#x53EF;&#x4EE5;&#x5206;&#x4E3A; 2 &#x7C7B;&#xFF0C;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x65B9;&#x6CD5;&#x7684;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x4E0A;&#xFF1A;</p>
<ul>
<li><strong>&#x629B;&#x5F02;&#x5E38;&#xFF1A;</strong><ul>
<li>&#x5411;&#x7A7A;&#x961F;&#x5217;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x4F1A;&#x629B;&#x51FA; NoSuchElementException &#x5F02;&#x5E38;&#xFF1B;</li>
<li>&#x5411;&#x5BB9;&#x91CF;&#x6EE1;&#x7684;&#x961F;&#x5217;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x4F1A;&#x629B;&#x51FA; IllegalStateException &#x5F02;&#x5E38;&#x3002;</li>
</ul>
</li>
<li><strong>&#x8FD4;&#x56DE;&#x7279;&#x6B8A;&#x503C;&#xFF1A;</strong><ul>
<li>&#x5411;&#x7A7A;&#x961F;&#x5217;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x4F1A;&#x8FD4;&#x56DE; null&#xFF1B;</li>
<li>&#x5411;&#x5BB9;&#x91CF;&#x6EE1;&#x7684;&#x961F;&#x5217;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x4F1A;&#x8FD4;&#x56DE; false&#x3002;</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>&#x62D2;&#x7EDD;&#x7B56;&#x7565;</th>
<th>&#x629B;&#x5F02;&#x5E38;</th>
<th>&#x8FD4;&#x56DE;&#x7279;&#x6B8A;&#x503C;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x5165;&#x961F;&#xFF08;&#x961F;&#x5C3E;&#xFF09;</td>
<td>add(e)</td>
<td>offer(e)</td>
</tr>
<tr>
<td>&#x51FA;&#x961F;&#xFF08;&#x961F;&#x5934;&#xFF09;</td>
<td>remove()</td>
<td>poll()</td>
</tr>
<tr>
<td>&#x89C2;&#x5BDF;&#xFF08;&#x961F;&#x5934;&#xFF09;</td>
<td>element()</td>
<td>peek()</td>
</tr>
</tbody></table>
<h3 id="1-2-Deque-&#x63A5;&#x53E3;&#xFF08;&#x7EE7;&#x627F;&#x4E8E;-Queue-&#x63A5;&#x53E3;&#xFF09;"><a href="#1-2-Deque-&#x63A5;&#x53E3;&#xFF08;&#x7EE7;&#x627F;&#x4E8E;-Queue-&#x63A5;&#x53E3;&#xFF09;" class="headerlink" title="1.2 Deque &#x63A5;&#x53E3;&#xFF08;&#x7EE7;&#x627F;&#x4E8E; Queue &#x63A5;&#x53E3;&#xFF09;"></a>1.2 Deque &#x63A5;&#x53E3;&#xFF08;&#x7EE7;&#x627F;&#x4E8E; Queue &#x63A5;&#x53E3;&#xFF09;</h3><p>Java &#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x6807;&#x51C6;&#x7684;&#x6808;&#x63A5;&#x53E3;&#xFF08;&#x5F88;&#x597D;&#x5947;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x63D0;&#x4F9B;&#xFF09;&#xFF0C;&#x800C;&#x662F;&#x653E;&#x5728; Deque &#x63A5;&#x53E3;&#x4E2D;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x62D2;&#x7EDD;&#x7B56;&#x7565;</th>
<th>&#x629B;&#x5F02;&#x5E38;</th>
<th>&#x7B49;&#x4EF7;&#x4E8E;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x5165;&#x6808;</td>
<td>push(e)</td>
<td>addFirst(e)</td>
</tr>
<tr>
<td>&#x51FA;&#x6808;</td>
<td>pop()</td>
<td>removeFirst()</td>
</tr>
<tr>
<td>&#x89C2;&#x5BDF;&#xFF08;&#x6808;&#x9876;&#xFF09;</td>
<td>peek()</td>
<td>peekFirst()</td>
</tr>
</tbody></table>
<p>&#x9664;&#x4E86;&#x6807;&#x51C6;&#x7684;&#x961F;&#x5217;&#x548C;&#x6808;&#x884C;&#x4E3A;&#xFF0C;Deque &#x63A5;&#x53E3;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86; 12 &#x4E2A;&#x5728;&#x4E24;&#x7AEF;&#x64CD;&#x4F5C;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x62D2;&#x7EDD;&#x7B56;&#x7565;</th>
<th>&#x629B;&#x5F02;&#x5E38;</th>
<th>&#x8FD4;&#x56DE;&#x503C;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x589E;&#x52A0;</td>
<td>addFirst(e)/ addLast(e)</td>
<td>offerFirst(e)/ offerLast(e)</td>
</tr>
<tr>
<td>&#x5220;&#x9664;</td>
<td>removeFirst()/ removeLast()</td>
<td>pollFirst()/ pollLast()</td>
</tr>
<tr>
<td>&#x89C2;&#x5BDF;</td>
<td>getFirst()/ getLast()</td>
<td>peekFirst()/ peekLast()</td>
</tr>
</tbody></table>
<hr>
<ol start="2">
<li>ArrayDeque &#x7684;&#x7279;&#x70B9;</li>
</ol>
<hr>
<h3 id="2-1-&#x8BF4;&#x4E00;&#x4E0B;-ArrayDeque-&#x7684;&#x7279;&#x70B9;"><a href="#2-1-&#x8BF4;&#x4E00;&#x4E0B;-ArrayDeque-&#x7684;&#x7279;&#x70B9;" class="headerlink" title="2.1 &#x8BF4;&#x4E00;&#x4E0B; ArrayDeque &#x7684;&#x7279;&#x70B9;"></a>2.1 &#x8BF4;&#x4E00;&#x4E0B; ArrayDeque &#x7684;&#x7279;&#x70B9;</h3><ul>
<li>1&#x3001;ArrayDeque &#x662F;&#x57FA;&#x4E8E;&#x52A8;&#x6001;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x7684; Deque &#x53CC;&#x7AEF;&#x961F;&#x5217;&#xFF0C;&#x5185;&#x90E8;&#x5C01;&#x88C5;&#x4E86;&#x6269;&#x5BB9;&#x548C;&#x6570;&#x636E;&#x642C;&#x8FD0;&#x7684;&#x903B;&#x8F91;&#xFF1B;</li>
<li>2&#x3001;ArrayDeque &#x7684;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x4FDD;&#x8BC1;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1B;</li>
<li>3&#x3001;ArrayDeque &#x4E0D;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1B;</li>
<li>4&#x3001;ArrayDeque &#x4E0D;&#x652F;&#x6301; null &#x5143;&#x7D20;&#xFF1B;</li>
<li>5&#x3001;ArrayDeque &#x867D;&#x7136;&#x5165;&#x6808;&#x548C;&#x5165;&#x961F;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#xFF0C;&#x4F46;&#x4ECE;&#x5747;&#x644A;&#x5206;&#x6790;&#x4E0A;&#x770B;&#x4F9D;&#x7136;&#x662F; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1B;</li>
</ul>
<h3 id="2-2-&#x8BF4;&#x4E00;&#x4E0B;-ArrayDeque-&#x548C;-LinkedList-&#x7684;&#x533A;&#x522B;"><a href="#2-2-&#x8BF4;&#x4E00;&#x4E0B;-ArrayDeque-&#x548C;-LinkedList-&#x7684;&#x533A;&#x522B;" class="headerlink" title="2.2 &#x8BF4;&#x4E00;&#x4E0B; ArrayDeque &#x548C; LinkedList &#x7684;&#x533A;&#x522B;?"></a>2.2 &#x8BF4;&#x4E00;&#x4E0B; ArrayDeque &#x548C; LinkedList &#x7684;&#x533A;&#x522B;?</h3><ul>
<li><strong>1&#x3001;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;</strong> &#x5728;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0A;&#xFF0C;ArrayDeque &#x548C; LinkedList &#x90FD;&#x5B9E;&#x73B0;&#x4E86; Java Deque &#x53CC;&#x7AEF;&#x961F;&#x5217;&#x63A5;&#x53E3;&#x3002;&#x4F46; ArrayDeque &#x6CA1;&#x6709;&#x5B9E;&#x73B0;&#x4E86; Java List &#x5217;&#x8868;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5177;&#x5907;&#x6839;&#x636E;&#x7D22;&#x5F15;&#x4F4D;&#x7F6E;&#x64CD;&#x4F5C;&#x7684;&#x884C;&#x4E3A;&#xFF1B;</li>
<li><strong>2&#x3001;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1A;</strong> ArrayDeque &#x548C; LinkedList &#x90FD;&#x4E0D;&#x8003;&#x8651;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4E0D;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1B;</li>
<li><strong>3&#x3001;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#xFF1A;</strong> &#x5728;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4E0A;&#xFF0C;ArrayDeque &#x662F;&#x57FA;&#x4E8E;&#x52A8;&#x6001;&#x6570;&#x7EC4;&#x7684;&#xFF0C;&#x800C; LinkedList &#x662F;&#x57FA;&#x4E8E;&#x53CC;&#x5411;&#x94FE;&#x8868;&#x7684;&#x3002;</li>
</ul>
<pre><code>+ **&#x5728;&#x904D;&#x5386;&#x901F;&#x5EA6;&#x4E0A;&#xFF1A;** ArrayDeque &#x662F;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x57FA;&#x4E8E;&#x5C40;&#x90E8;&#x6027;&#x539F;&#x7406;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x5730;&#x547D;&#x4E2D; CPU &#x7F13;&#x5B58;&#x884C;&#xFF0C;&#x800C; LinkedList &#x662F;&#x79BB;&#x6563;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5BF9;&#x7F13;&#x5B58;&#x884C;&#x4E0D;&#x53CB;&#x597D;&#xFF1B;
+ **&#x5728;&#x64CD;&#x4F5C;&#x901F;&#x5EA6;&#x4E0A;&#xFF1A;** ArrayDeque &#x548C; LinkedList &#x7684;&#x6808;&#x548C;&#x961F;&#x5217;&#x884C;&#x4E3A;&#x90FD;&#x662F; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;ArrayDeque &#x7684;&#x5165;&#x6808;&#x548C;&#x5165;&#x961F;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#xFF0C;&#x4F46;&#x4ECE;&#x5747;&#x644A;&#x5206;&#x6790;&#x4E0A;&#x770B;&#x4F9D;&#x7136;&#x662F; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1B;
+ **&#x989D;&#x5916;&#x5185;&#x5B58;&#x6D88;&#x8017;&#x4E0A;&#xFF1A;** ArrayDeque &#x5728;&#x6570;&#x7EC4;&#x7684;&#x5934;&#x6307;&#x9488;&#x548C;&#x5C3E;&#x6307;&#x9488;&#x5916;&#x90E8;&#x6709;&#x95F2;&#x7F6E;&#x7A7A;&#x95F4;&#xFF0C;&#x800C; LinkedList &#x5728;&#x8282;&#x70B9;&#x4E0A;&#x589E;&#x52A0;&#x4E86;&#x524D;&#x9A71;&#x548C;&#x540E;&#x7EE7;&#x6307;&#x9488;&#x3002;</code></pre><hr>
<ol start="3">
<li>&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#xFF1F;</li>
</ol>
<hr>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6808;&#x548C;&#x961F;&#x5217;&#x90FD;&#x662F; &#x201C;&#x64CD;&#x4F5C;&#x53D7;&#x9650;&#x201D; &#x7684;&#x7EBF;&#x6027;&#x8868;&#xFF1A;&#x6808;&#x662F; LIFO&#xFF0C;&#x9650;&#x5236;&#x5728;&#x8868;&#x7684;&#x4E00;&#x7AEF;&#x5165;&#x6808;&#x548C;&#x51FA;&#x6808;&#x3002;&#x800C;&#x961F;&#x5217;&#x662F; FIFO&#xFF0C;&#x9650;&#x5236;&#x5728;&#x8868;&#x7684;&#x4E00;&#x7AEF;&#x5165;&#x961F;&#xFF0C;&#x5728;&#x53E6;&#x4E00;&#x7AEF;&#x51FA;&#x961F;&#x3002;&#x6808;&#x548C;&#x961F;&#x5217;&#x65E2;&#x53EF;&#x4EE5;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#xFF1A;</p>
<ul>
<li>&#x6570;&#x7EC4;&#xFF1A;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x65F6;&#x53EB;&#x4F5C;&#x987A;&#x5E8F;&#x6808;&#x548C;&#x987A;&#x5E8F;&#x961F;&#x5217;&#xFF1B;</li>
<li>&#x94FE;&#x8868;&#xFF1A;&#x7528;&#x94FE;&#x8868;&#x5B9E;&#x73B0;&#x65F6;&#x53EB;&#x4F5C;&#x94FE;&#x5F0F;&#x6808;&#x548C;&#x94FE;&#x5F0F;&#x961F;&#x5217;&#x3002;</li>
</ul>
<h3 id="3-1-&#x4E3A;&#x4EC0;&#x4E48;-ArrayList-&#x4E0D;&#x9002;&#x5408;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#xFF1F;"><a href="#3-1-&#x4E3A;&#x4EC0;&#x4E48;-ArrayList-&#x4E0D;&#x9002;&#x5408;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#xFF1F;" class="headerlink" title="3.1 &#x4E3A;&#x4EC0;&#x4E48; ArrayList &#x4E0D;&#x9002;&#x5408;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#xFF1F;"></a>3.1 &#x4E3A;&#x4EC0;&#x4E48; ArrayList &#x4E0D;&#x9002;&#x5408;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#xFF1F;</h3><p>&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x5230;&#x4E86; LinkedList &#x7684;&#x591A;&#x9762;&#x4EBA;&#x751F;&#xFF0C;&#x5B83;&#x5373;&#x4F5C;&#x4E3A; List &#x7684;&#x94FE;&#x5F0F;&#x8868;&#xFF0C;&#x53C8;&#x4F5C;&#x4E3A; Queue &#x7684;&#x94FE;&#x5F0F;&#x961F;&#x5217;&#xFF0C;&#x53C8;&#x4F5C;&#x4E3A; &#x201C;Stack&#x201D; &#x7684;&#x94FE;&#x5F0F;&#x6808;&#xFF0C;&#x529F;&#x80FD;&#x5F88;&#x5168;&#x9762;&#x3002;&#x76F8;&#x8F83;&#x4E4B;&#x4E0B;&#xFF0C;ArrayList &#x5374;&#x53EA;&#x4F5C;&#x4E3A;&#x5B9E;&#x73B0;&#x4E86; List &#x7684;&#x987A;&#x5E8F;&#x8868;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x6570;&#x7EC4;&#x4E0A;&#x540C;&#x65F6;&#x5B9E;&#x73B0; List &#x548C; Queue &#x65F6;&#xFF0C;&#x65E0;&#x6CD5;&#x5E73;&#x8861;&#x8FD9;&#x4E24;&#x4E2A;&#x884C;&#x4E3A;&#x7684;&#x6027;&#x80FD;&#x77DB;&#x76FE;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF1A;ArrayList &#x4E0D;&#x5141;&#x8BB8;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x6709;&#x7A7A;&#x6D1E;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6709;&#x6548;&#x6570;&#x636E;&#x90FD;&#x4F1A; <strong>&#x201C;&#x538B;&#x7F29;&#x201D;</strong> &#x5230;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#x7684;&#x9996;&#x90E8;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4F7F;&#x7528; ArrayList &#x5F00;&#x53D1;&#x6808;&#x7684;&#x7ED3;&#x6784;&#x6216;&#x8BB8;&#x5408;&#x9002;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x5C3E;&#x90E8;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x3002;&#x4F46;&#x4F7F;&#x7528; ArrayList &#x5F00;&#x53D1;&#x961F;&#x5217;&#x5C31;&#x4E0D;&#x5408;&#x9002;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x9996;&#x90E8;&#x5165;&#x961F;&#x6216;&#x51FA;&#x961F;&#x9700;&#x8981;&#x642C;&#x8FD0;&#x6570;&#x636E;&#x3002;</p>
<h3 id="3-2-&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x7ED3;&#x6784;"><a href="#3-2-&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x7ED3;&#x6784;" class="headerlink" title="3.2 &#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x7ED3;&#x6784;"></a>3.2 &#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x7ED3;&#x6784;</h3><p>&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x76F8;&#x5BF9;&#x5BB9;&#x6613;&#xFF0C;&#x56E0;&#x4E3A;&#x6808;&#x7ED3;&#x6784;&#x7684;&#x64CD;&#x4F5C;&#x88AB;&#x9650;&#x5236;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x4E00;&#x7AEF;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x6570;&#x7EC4;&#x7684;&#x5C3E;&#x90E8;&#x4F5C;&#x4E3A;&#x6808;&#x9876;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x4E00;&#x4E2A; top &#x6307;&#x9488;&#x8BB0;&#x5F55;&#x6808;&#x9876;&#x4F4D;&#x7F6E;&#xFF1A;</p>
<ul>
<li><strong>&#x6808;&#x7A7A;&#xFF1A;</strong> top == 0&#xFF1B;</li>
<li><strong>&#x6808;&#x6EE1;&#xFF1A;</strong> top == n&#xFF1B;</li>
<li><strong>&#x5165;&#x6808;&#xFF1A;</strong> &#x5C06;&#x6570;&#x636E;&#x6DFB;&#x52A0;&#x5230;&#x6808;&#x9876;&#x4F4D;&#x7F6E;&#xFF0C;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F; O(1)&#xFF1B;</li>
<li><strong>&#x51FA;&#x6808;&#xFF1A;</strong> &#x5C06;&#x6808;&#x9876;&#x4F4D;&#x7F6E;&#x79FB;&#x9664;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F; O(1)&#xFF1B;</li>
</ul>
<p>&#x5BF9;&#x4E8E;&#x51FA;&#x6808;&#x800C;&#x8A00;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x603B;&#x662F; O(1)&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x5165;&#x6808;&#x800C;&#x8A00;&#xFF0C;&#x5374;&#x4E0D;&#x4E00;&#x5B9A;&#x3002;&#x56E0;&#x4E3A;&#x5F53;&#x6570;&#x7EC4;&#x7684;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF08;top == n&#xFF09;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x6269;&#x5BB9;&#x548C;&#x642C;&#x8FD0;&#x6570;&#x636E;&#x6765;&#x5BB9;&#x7EB3;&#x65B0;&#x7684;&#x6570;&#x636E;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5C31;&#x4ECE; O(1) &#x9000;&#x5316;&#x5230; O(n)&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x5927;&#x90E8;&#x5206;&#x64CD;&#x4F5C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5F88;&#x4F4E;&#xFF0C;&#x53EA;&#x6709;&#x4E2A;&#x522B;&#x60C5;&#x51B5;&#x4E0B;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4F1A;&#x9000;&#x5316;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x5F88;&#x5F3A;&#x70C8;&#x7684;&#x987A;&#x5E8F;&#x5173;&#x7CFB;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5C31;&#x5F88;&#x9002;&#x5408;&#x7528; <strong>&#x201C;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;&#x201D;</strong> &#x4E86;&#xFF1A;</p>
<p>&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x7684;&#x6269;&#x5BB9;&#x7B56;&#x7565;&#x662F;&#x5C06;&#x6570;&#x7EC4;&#x6269;&#x5927;&#x5230;&#x65E7;&#x6570;&#x7EC4;&#x7684; 2 &#x500D;&#xFF0C;&#x7528;&#x5747;&#x644A;&#x5206;&#x6790;&#x6CD5;&#xFF1A;</p>
<ul>
<li>1&#x3001;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;&#x4E3A; K &#x7684;&#x7A7A;&#x6570;&#x7EC4;&#xFF0C;&#x5728;&#x524D; K - 1 &#x6B21;&#x5165;&#x6808;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F; O(1)&#xFF1B;</li>
<li>2&#x3001;&#x5728;&#x7B2C; K &#x6B21;&#x5165;&#x6808;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x4E0D;&#x8DB3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C06;&#x6570;&#x7EC4;&#x6269;&#x5927;&#x4E3A; 2K&#xFF0C;&#x5E76;&#x4E14;&#x642C;&#x8FD0; K &#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x9000;&#x5316;&#x4E3A; O(K)&#xFF1B;</li>
<li>3&#x3001;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5927;&#x5C0F;&#x4E3A; 2K &#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x5728;&#x63A5;&#x4E0B;&#x6765;&#x7684; K - 1 &#x6B21;&#x5165;&#x6808;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F; O(1)&#xFF1B;</li>
<li>4&#x3001;&#x5728;&#x7B2C; 2K &#x6B21;&#x5165;&#x6808;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x4E0D;&#x8DB3;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C06;&#x6570;&#x7EC4;&#x6269;&#x5927;&#x4E3A; 4K&#xFF0C;&#x5E76;&#x4E14;&#x642C;&#x8FD0; 2K &#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x518D;&#x6B21;&#x9000;&#x5316;&#x4E3A; O(K)&#xFF1B;</li>
<li>5&#x3001;&#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</li>
</ul>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5728;&#x6BCF;&#x6B21;&#x642C;&#x8FD0; K &#x4E2A;&#x6B21;&#x6570;&#x540E;&#xFF0C;&#x968F;&#x540E;&#x7684; K - 1 &#x6B21;&#x5165;&#x6808;&#x64CD;&#x4F5C;&#x5C31;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684; O(1) &#x64CD;&#x4F5C;&#xFF0C;K &#x6B21;&#x5165;&#x6808;&#x64CD;&#x4F5C;&#x6D89;&#x53CA;&#x5230; K &#x4E2A;&#x6570;&#x636E;&#x642C;&#x8FD0;&#x548C; K &#x6B21;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x3002;&#x90A3;&#x6211;&#x4EEC;&#x4ECE;&#x6574;&#x4F53;&#x770B;&#xFF0C;&#x5982;&#x679C;&#x628A;&#x590D;&#x6742;&#x5EA6;&#x8F83;&#x9AD8;&#x7684; 1 &#x6B21;&#x5165;&#x6808;&#x64CD;&#x4F5C;&#x7684;&#x8017;&#x65F6;&#xFF0C;&#x5747;&#x644A;&#x5230;&#x5176;&#x4ED6;&#x590D;&#x6742;&#x5EA6;&#x8F83;&#x4F4E;&#x7684;&#x64CD;&#x4F5C;&#x4E0A;&#xFF0C;&#x5C31;&#x7B49;&#x4E8E;&#x8BF4; 1 &#x6B21;&#x5165;&#x6808;&#x64CD;&#x4F5C;&#x53EA;&#x9700;&#x8981;&#x642C;&#x8FD0; 1 &#x4E2A;&#x6570;&#x636E;&#x548C; 1 &#x6B21;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x5165;&#x6808;&#x7684;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5C31;&#x662F; O(1)&#x3002;</p>
<p><code>&#x5165;&#x6808;&#x7684;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5206;&#x6790;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e74c2b4932e85b525607ab28bb0ffee9ec1670a28ff09ffff0070549d866f2be" alt></p>
<h3 id="3-3-&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x7ED3;&#x6784;"><a href="#3-3-&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x7ED3;&#x6784;" class="headerlink" title="3.3 &#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x7ED3;&#x6784;"></a>3.3 &#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x7ED3;&#x6784;</h3><p>&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#x76F8;&#x5BF9;&#x590D;&#x6742;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x961F;&#x5934;&#x6307;&#x9488;&#x548C;&#x4E00;&#x4E2A;&#x961F;&#x5C3E;&#x6307;&#x9488;&#xFF1A;</p>
<ul>
<li><strong>&#x961F;&#x7A7A;&#xFF1A;</strong> head == tail&#xFF1B;</li>
<li><strong>&#x961F;&#x6EE1;&#xFF1A;</strong> tail == n&#xFF08;&#x5E76;&#x4E0D;&#x662F;&#x771F;&#x7684;&#x6EE1;&#xFF0C;&#x53EA;&#x662F;&#x65E0;&#x6CD5;&#x586B;&#x5145;&#x65B0;&#x6570;&#x636E;&#xFF09;&#xFF1B;</li>
<li><strong>&#x5165;&#x961F;&#xFF1A;</strong> &#x5C06;&#x6570;&#x636E;&#x6DFB;&#x52A0;&#x5230;&#x961F;&#x5C3E;&#x4F4D;&#x7F6E;&#xFF0C;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F; O(1)&#xFF1B;</li>
<li><strong>&#x51FA;&#x961F;&#xFF1A;</strong> &#x5C06;&#x961F;&#x5934;&#x4F4D;&#x7F6E;&#x79FB;&#x9664;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F; O(1)&#x3002;</li>
</ul>
<p>&#x5BF9;&#x4E8E;&#x51FA;&#x961F;&#x800C;&#x8A00;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x603B;&#x662F; O(1)&#x3002;&#x5BF9;&#x4E8E;&#x5165;&#x961F;&#x800C;&#x8A00;&#xFF0C;&#x5F53; <code>tail == n</code> &#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x6269;&#x5BB9;&#x548C;&#x642C;&#x8FD0;&#x6570;&#x636E;&#x6765;&#x5BB9;&#x7EB3;&#x65B0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x5747;&#x644A;&#x5206;&#x6790;&#x6CD5;&#x5F97;&#x51FA;&#x5747;&#x644A;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x4F9D;&#x7136;&#x662F; O(1)&#xFF0C;&#x5C31;&#x4E0D;&#x91CD;&#x590D;&#x4E86;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;&#x6808;&#x7684; <code>top == n</code> &#x8868;&#x793A;&#x6808;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF0C;&#x6269;&#x5BB9;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x961F;&#x5217;&#x7684; <code>tail == n</code> &#x5374;&#x4E0D;&#x4E00;&#x5B9A;&#x8868;&#x793A;&#x961F;&#x5217;&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#x3002;&#x56E0;&#x4E3A;&#x5165;&#x961F;&#x548C;&#x51FA;&#x961F;&#x53D1;&#x751F;&#x5728;&#x4E0D;&#x540C;&#x65B9;&#x5411;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x51FA;&#x73B0; <code>tail == n</code> &#x4F46;&#x961F;&#x5934;&#x4F9D;&#x7136;&#x6709;&#x975E;&#x5E38;&#x591A;&#x5269;&#x4F59;&#x7A7A;&#x95F4;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x6269;&#x5BB9;&#x663E;&#x5F97;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x3002;</p>
<p><code>&#x6269;&#x5BB9;&#x663E;&#x5F97;&#x6CA1;&#x6709;&#x5FC5;&#x8981;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/0ea196519049e8eaacae2de2f970f66284fab6585e274687e56a5c899b3a252d" alt></p>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x600E;&#x4E48;&#x907F;&#x514D;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x6269;&#x5BB9;&#x548C;&#x6570;&#x636E;&#x642C;&#x79FB;&#x5462;&#xFF1F;&#x2014;&#x2014; <strong>&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#x3002;</strong></p>
<p>&#x6211;&#x4EEC;&#x5728;&#x903B;&#x8F91;&#x4E0A;&#x5C06;&#x6570;&#x7EC4;&#x7684;&#x9996;&#x5C3E;&#x76F8;&#x8FDE;&#xFF0C;&#x5F53; <code>tail == n</code> &#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#x8FD8;&#x6709;&#x7A7A;&#x95F2;&#x4F4D;&#x7F6E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x628A; tail &#x6307;&#x9488;&#x8C03;&#x6574;&#x5230;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#xFF0C;&#x5728;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x3002;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x8981;&#x5206;&#x6790;&#x7684; ArrayDeque &#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x5C31;&#x662F;&#x91C7;&#x7528;&#x4E86;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/eeee6d447cbf9d1de53fbfc020958a6b38068fbe6364c1853600a5d1d4072761" alt></p>
<p>&#x4F7F;&#x7528;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#x540E;&#xFF0C;&#x961F;&#x5217;&#x7A7A;&#x548C;&#x961F;&#x5217;&#x6EE1;&#x7684;&#x5224;&#x65AD;&#x6761;&#x4EF6;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF1A;</p>
<ul>
<li><strong>&#x961F;&#x5217;&#x7A7A;&#xFF1A;</strong> head == tail&#xFF1B;</li>
<li><strong>&#x961F;&#x5217;&#x6EE1;&#xFF1A;</strong> (tail + 1)%size == head&#xFF0C;&#x5982;&#x679C; size &#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x4F4D;&#x8FD0;&#x7B97;&#x5224;&#x65AD;&#xFF1A;(tail + 1) &amp; (size - 1) == head&#x3002;</li>
</ul>
<p>&#x7406;&#x89E3;&#x4E86;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#x7684;&#x601D;&#x8DEF;&#x540E;&#xFF0C;&#x4E0B;&#x9762;&#x518D;&#x6765;&#x5206;&#x6790; ArrayDeque &#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x5C31;&#x663E;&#x5F97;&#x6E38;&#x5203;&#x6709;&#x4F59;&#x4E86;&#x3002;</p>
<hr>
<ol start="4">
<li>ArrayDeque &#x6E90;&#x7801;&#x5206;&#x6790;</li>
</ol>
<hr>
<p>&#x8FD9;&#x4E00;&#x8282;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790; ArrayDeque &#x4E2D;&#x4E3B;&#x8981;&#x6D41;&#x7A0B;&#x7684;&#x6E90;&#x7801;&#x3002;</p>
<h3 id="4-1-ArrayDeque-&#x7684;&#x5C5E;&#x6027;"><a href="#4-1-ArrayDeque-&#x7684;&#x5C5E;&#x6027;" class="headerlink" title="4.1 ArrayDeque &#x7684;&#x5C5E;&#x6027;"></a>4.1 ArrayDeque &#x7684;&#x5C5E;&#x6027;</h3><ul>
<li>ArrayDeque &#x5E95;&#x5C42;&#x662F;&#x4E00;&#x4E2A; Object &#x6570;&#x7EC4;&#xFF1B;</li>
<li>ArrayDeque &#x7528; <code>head</code> &#x548C; <code>tail</code> &#x6307;&#x9488;&#x6307;&#x5411;&#x6570;&#x7EC4;&#x7684; &#x201C;&#x961F;&#x5934;&#x4F4D;&#x7F6E;&#x201D; &#x548C; &#x201C;&#x961F;&#x5C3E;&#x4F4D;&#x7F6E;&#x201D;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F; tail &#x961F;&#x5C3E;&#x6307;&#x9488;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6307;&#x5411;&#x961F;&#x5C3E;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x5143;&#x7D20;&#x7684;&#x4E0B;&#x4E00;&#x4F4D;&#x3002;</li>
</ul>
<p>ArrayDeque &#x7684;&#x5C5E;&#x6027;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x7684;&#xFF0C;&#x4E0D;&#x51FA;&#x610F;&#x5916;&#x7684;&#x8BDD;&#x53C8;&#x6709;&#x5C0F;&#x670B;&#x53CB;&#x51FA;&#x6765;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x4E86;&#xFF1A;</p>
<ul>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 1&#xFF1A;</strong> &#x4E3A;&#x4EC0;&#x4E48;&#x5B57;&#x6BB5;&#x90FD;&#x4E0D;&#x58F0;&#x660E; <code>private</code> &#x5173;&#x952E;&#x5B57;&#xFF1F;&#xFF08;&#x56DE;&#x7B54;&#x8FC7;&#x591A;&#x5C11;&#x6B21;&#x4E86;&#xFF0C;&#x628A;&#x624B;&#x7ED9;&#x6211;&#x653E;&#x4E0B;&#xFF09;</li>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 2&#xFF1A;</strong> &#x4E3A;&#x4EC0;&#x4E48;&#x5B57;&#x6BB5;&#x90FD;&#x58F0;&#x660E; <code>transient</code> &#x5173;&#x952E;&#x5B57;&#xFF1F;&#xFF08;&#x56DE;&#x7B54;&#x8FC7;&#x591A;&#x5C11;&#x6B21;&#x4E86;&#xFF0C;&#x628A;&#x624B;&#x7ED9;&#x6211;&#x653E;&#x4E0B;&#xFF09;</li>
<li>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;<strong>&#x7591;&#x95EE; 3&#xFF1A;</strong> &#x4E3A;&#x4EC0;&#x4E48; elements &#x5B57;&#x6BB5;&#x4E0D;&#x58F0;&#x660E;&#x4E3A;&#x6CDB;&#x578B;&#x7C7B;&#x578B; <code>E</code>&#xFF1F;&#xFF08;&#x56DE;&#x7B54;&#x8FC7;&#x591A;&#x5C11;&#x6B21;&#x4E86;&#xFF0C;&#x628A;&#x624B;&#x7ED9;&#x6211;&#x653E;&#x4E0B;&#xFF09;</li>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 4&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x770B;&#x5230; ArrayList &#x7C7B;&#x4F3C;&#x7684; <code>MAX_ARRAY_SIZE</code> &#x6700;&#x5927;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#xFF1F;</strong></li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x4EEC;&#x5728;&#x5206;&#x6790;&#x6E90;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x56DE;&#x7B54;&#x3002;&#x6709;&#x4E86; ArrayList &#x7684;&#x5206;&#x6790;&#x57FA;&#x7840;&#xFF0C;&#x95EE;&#x9898;&#x5C11;&#x4E86;&#x5F88;&#x591A;&#xFF0C;ArrayDeque &#x771F;&#x9999;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class ArrayDeque&lt;E&gt; extends AbstractCollection&lt;E&gt;</span><br><span class="line">		implements Deque&lt;E&gt;, Cloneable, Serializable</span><br><span class="line">{</span><br><span class="line">    // &#x7591;&#x95EE; 1&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5B57;&#x6BB5;&#x90FD;&#x58F0;&#x660E; private &#x5173;&#x952E;&#x5B57;&#xFF1F;</span><br><span class="line">    // &#x7591;&#x95EE; 2&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5B57;&#x6BB5;&#x90FD;&#x58F0;&#x660E; transient &#x5173;&#x952E;&#x5B57;&#xFF1F;</span><br><span class="line">    // &#x7591;&#x95EE; 3&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; elements &#x5B57;&#x6BB5;&#x4E0D;&#x58F0;&#x660E;&#x4E3A;&#x6CDB;&#x578B;&#x7C7B;&#x578B; E&#xFF1F;</span><br><span class="line">    // &#x7591;&#x95EE; 4&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x770B;&#x5230; ArrayList &#x7C7B;&#x4F3C;&#x7684; MAX_ARRAY_SIZE &#x6700;&#x5927;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#xFF1F;</span><br><span class="line"></span><br><span class="line">    // &#x5E95;&#x5C42;&#x6570;&#x7EC4;</span><br><span class="line">    transient Object[] elements; // non-private to simplify nested class access</span><br><span class="line"></span><br><span class="line">    // &#x961F;&#x5934;&#x6307;&#x9488;</span><br><span class="line">    transient int head;</span><br><span class="line"></span><br><span class="line">    // &#x961F;&#x5C3E;&#x6307;&#x9488;</span><br><span class="line">    transient int tail;</span><br><span class="line"></span><br><span class="line">    // new ArrayDeque(0) &#x6700;&#x5C0F;&#x521D;&#x59CB;&#x5BB9;&#x91CF;</span><br><span class="line">    private static final int MIN_INITIAL_CAPACITY = 8;</span><br><span class="line"></span><br><span class="line">    // &#x5C3E;&#x6307;&#x9488; - &#x5934;&#x6307;&#x9488;</span><br><span class="line">    public int size() {</span><br><span class="line">        return (tail - head) &amp; (elements.length - 1);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-2-ArrayDeque-&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"><a href="#4-2-ArrayDeque-&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;" class="headerlink" title="4.2 ArrayDeque &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;"></a>4.2 ArrayDeque &#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</h3><p>ArrayDeque &#x6709; 3 &#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
<ul>
<li><strong>1&#x3001;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x521D;&#x59CB;&#x5316;&#x5BB9;&#x91CF;&#x4E3A; <code>16</code> &#x7684;&#x6570;&#x7EC4;&#xFF1B;</li>
<li><strong>2&#x3001;&#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x5982;&#x679C;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x5C0F;&#x4E8E; <code>8 (MIN_INITIAL_CAPACITY)</code>&#xFF0C;&#x5219;&#x521D;&#x59CB;&#x5316;&#x6570;&#x7EC4;&#x5927;&#x5C0F;&#x4E3A; <code>8</code>&#x3002;&#x5982;&#x679C;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x5927;&#x4E8E; 8&#xFF0C;&#x5219;&#x8BA1;&#x7B97; <strong>&#x201C;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x201D;</strong> &#x4F5C;&#x4E3A;&#x521D;&#x59CB;&#x5927;&#x5C0F;&#x3002;&#x4F8B;&#x5982; numElements &#x4E3A; 8&#xFF0C;&#x5219;&#x521D;&#x59CB;&#x5316;&#x5BB9;&#x91CF;&#x4E3A; 16&#x3002;numElements &#x4E3A; 19&#xFF0C;&#x5219;&#x521D;&#x59CB;&#x5316;&#x5BB9;&#x91CF;&#x4E3A; 32&#xFF1B;</li>
<li><strong>3&#x3001;&#x5E26;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</strong> &#x7528;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x4E3A; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x5E76;&#x8C03;&#x7528; addAll &#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x3002;</li>
</ul>
<p><code>ArrayDeque.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public ArrayDeque() {</span><br><span class="line">    elements = new Object[16];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public ArrayDeque(int numElements) {</span><br><span class="line">    allocateElements(numElements);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x5E26;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public ArrayDeque(Collection&lt;? extends E&gt; c) {</span><br><span class="line">    allocateElements(c.size());</span><br><span class="line">    // &#x7591;&#x95EE; 5&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5E26;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E0D;&#x4F7F;&#x7528; Arrays &#x5DE5;&#x5177;&#x6574;&#x4F53;&#x590D;&#x5236;&#xFF0C;&#x800C;&#x662F;&#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#xFF1F;</span><br><span class="line">    addAll(c);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private void allocateElements(int numElements) {</span><br><span class="line">    elements = new Object[calculateSize(numElements)];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6C42;&#x79BB; numElements &#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x5373; nextPow2 &#x95EE;&#x9898;</span><br><span class="line">// &#x7591;&#x95EE; 6&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; ArrayDeque &#x8981;&#x6C42;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1F;</span><br><span class="line">// &#x7591;&#x95EE; 7&#xFF1A;calculateSize() &#x7684;&#x51FD;&#x6570;&#x4F53;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#xFF1F;</span><br><span class="line">private static int calculateSize(int numElements) {</span><br><span class="line">    // &#x5982;&#x679C; numElements &#x5C0F;&#x4E8E; 8&#xFF08;MIN_INITIAL_CAPACITY&#xFF09;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; 8</span><br><span class="line">    int initialCapacity = MIN_INITIAL_CAPACITY;</span><br><span class="line">    if (numElements &gt;= initialCapacity) {</span><br><span class="line">        initialCapacity = numElements;</span><br><span class="line">        // &#x4E94;&#x8F6E;&#x65E0;&#x7B26;&#x53F7;&#x53F3;&#x79FB;&#x548C;&#x6216;&#x8FD0;&#x7B97;&#x540E;&#xFF0C;&#x53D8;&#x6210;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#x5F00;&#x59CB;&#x540E;&#x9762;&#x90FD;&#x662F; 1</span><br><span class="line">        initialCapacity |= (initialCapacity &gt;&gt;&gt;  1);</span><br><span class="line">        initialCapacity |= (initialCapacity &gt;&gt;&gt;  2);</span><br><span class="line">        initialCapacity |= (initialCapacity &gt;&gt;&gt;  4);</span><br><span class="line">        initialCapacity |= (initialCapacity &gt;&gt;&gt;  8);</span><br><span class="line">        initialCapacity |= (initialCapacity &gt;&gt;&gt; 16);</span><br><span class="line">        // &#x52A0; 1 &#x8FDB;&#x4F4D;&#xFF0C;&#x5F97;&#x5230;&#x6700;&#x8FD1; 2 &#x7684;&#x6574;&#x6570;&#x5E42;</span><br><span class="line">        initialCapacity++;</span><br><span class="line">			</span><br><span class="line">        // &#x53D8;&#x6210;&#x8D1F;&#x6570;&#xFF08;&#x9AD8;&#x4F4D;&#x662F; 1000&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0000&#xFF09;</span><br><span class="line">        if (initialCapacity &lt; 0)</span><br><span class="line">            // &#x53F3;&#x79FB; 1 &#x4F4D;&#xFF0C;&#x53D6; 2^30 &#x4E3A;&#x521D;&#x59CB;&#x5BB9;&#x91CF;</span><br><span class="line">            initialCapacity &gt;&gt;&gt;= 1;// Good luck allocating 2 ^ 30 elements</span><br><span class="line">    }</span><br><span class="line">    return initialCapacity;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>AbstractCollection.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#x5143;&#x7D20;</span><br><span class="line">public boolean addAll(Collection&lt;? extends E&gt; c) {</span><br><span class="line">    boolean modified = false;</span><br><span class="line">    for (E e : c)</span><br><span class="line">        if (add(e))</span><br><span class="line">            modified = true;</span><br><span class="line">    return modified;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5C0F;&#x670B;&#x53CB;&#x603B;&#x6709;&#x592A;&#x591A;&#x7684;&#x95EE;&#x53F7;&#xFF0C;&#x4E3E;&#x624B;&#x63D0;&#x95EE; <strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;</strong>&#xFF1A;</p>
<ul>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 5&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x5E26;&#x96C6;&#x5408;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E0D;&#x4F7F;&#x7528; Arrays &#x5DE5;&#x5177;&#x6574;&#x4F53;&#x590D;&#x5236;&#xFF0C;&#x800C;&#x662F;&#x9010;&#x4E2A;&#x6DFB;&#x52A0;&#xFF1F;</strong></li>
</ul>
<p>&#x56E0;&#x4E3A; ArrayDeque &#x7981;&#x6B62;&#x5B58;&#x50A8; <code>null</code> &#x5143;&#x7D20;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x9010;&#x4E2A;&#x5224;&#x65AD;&#x5143;&#x7D20;&#x662F;&#x5426;&#x4E3A; <code>null</code> &#x503C;&#x540E;&#x624D;&#x6DFB;&#x52A0;&#x3002;</p>
<ul>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 6&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; ArrayDeque &#x8981;&#x6C42;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF1F;</strong></li>
</ul>
<p>&#x5728;&#x5FAA;&#x73AF;&#x6570;&#x7EC4;&#x4E2D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x8BA1;&#x7B97;&#x6E38;&#x6807;&#x6307;&#x9488;&#x5FAA;&#x73AF;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982; <code>(tail + 1) % size</code>&#xFF0C;&#x800C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x7684;&#x5C3A;&#x5BF8; size &#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x66FF;&#x6362;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97;&#xFF0C;&#x4F8B;&#x5982; <code>(tail + 1) &amp; (size - 1)</code> &#xFF0C;&#x4E0D;&#x7BA1;&#x88AB;&#x9664;&#x6570;&#x662F;&#x6B63;&#x8D1F;&#x7ED3;&#x679C;&#x90FD;&#x662F;&#x6B63;&#x6570;&#x3002; <strong>&#x4E0D;&#x4EC5;&#x5C06;&#x53D6;&#x4F59;&#x8FD0;&#x7B97;&#x66FF;&#x6362;&#x4E3A;&#x4F4D;&#x8FD0;&#x7B97;&#xFF0C;&#x800C;&#x4E14;&#x51CF;&#x5C11;&#x4E86;&#x4E00;&#x6B21;&#x53D6;&#x7EDD;&#x5BF9;&#x503C;&#x8FD0;&#x7B97;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x7D22;&#x5F15;&#x7684;&#x8BA1;&#x7B97;&#x6548;&#x7387;&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;size     = 0 0 0 1 0 0 0 0 0 0     // 2^n &#x7684;&#x8865;&#x7801;</span><br><span class="line">size - 1 = 0 0 0 0 1 1 1 1 1 1     // 2^n - 1 &#x7684;&#x8865;&#x7801;</span><br><span class="line">-1       = 1 1 1 1 1 1 1 1 1 1     // -1 &#x7684;&#x8865;&#x7801;</span><br><span class="line">0        = 0 0 0 0 0 0 0 0 0 0     // 0 &#x7684;&#x8865;&#x7801;</span><br><span class="line"></span><br><span class="line">// &#x5C3E;&#x6307;&#x9488;&#x7684;&#x5FAA;&#x73AF;&#xFF1A;</span><br><span class="line">1&#x3001;&#x5982;&#x679C; tail + 1 &lt;= size - 1&#xFF0C;&#x5219; (tail + 1) &amp; (size - 1) &#x540E;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;</span><br><span class="line">2&#x3001;&#x5982;&#x679C; tail + 1 == size&#xFF0C;&#x5219; size &amp; (size - 1) &#x4E3A; 0</span><br><span class="line">// &#x5934;&#x6307;&#x9488;&#x7684;&#x5FAA;&#x73AF;</span><br><span class="line">1&#x3001;&#x5982;&#x679C; head - 1 &gt;= 0&#xFF0C;&#x5219;&#xFF08;head - 1) &amp; (size - 1) &#x540E;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;</span><br><span class="line">2&#x3001;&#x5982;&#x679C; head - 1 == -1&#xFF0C;&#x5219; -1 &amp; (size - 1) &#x540E;&#x4E3A; size - 1</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 7&#xFF1A;calculateSize() &#x7684;&#x51FD;&#x6570;&#x4F53;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#xFF1F;</strong></li>
</ul>
<p>calculateSize() &#x662F;&#x6C42;&#x79BB; numElements &#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x5373; nextPow2 &#x95EE;&#x9898;&#x3002;</p>
<ul>
<li>1&#x3001;&#x9996;&#x5148;&#xFF0C;&#x5982;&#x679C; numElements &#x5C0F;&#x4E8E; 8&#xFF08;MIN_INITIAL_CAPACITY&#xFF09;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE; 8&#xFF1B;</li>
<li>2&#x3001;&#x5426;&#x5219;&#x6267;&#x884C; nextPow2 &#x8FD0;&#x7B97;&#xFF0C;&#x7ECF;&#x8FC7;&#x4E94;&#x8F6E;&#x65E0;&#x7B26;&#x53F7;&#x53F3;&#x79FB;&#x548C;&#x6216;&#x8FD0;&#x7B97;&#xFF0C;&#x5C06; numElements &#x8F6C;&#x6362;&#x4E3A;&#x4ECE;&#x6700;&#x9AD8;&#x4F4D;&#x5F00;&#x59CB;&#x540E;&#x9762;&#x90FD;&#x662F; 1 &#x7684;&#x6570;&#x3002;&#x518D;&#x6267;&#x884C; +1 &#x8FD0;&#x7B97;&#xFF0C;&#x5C31;&#x6C42;&#x51FA;&#x4E86;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF08;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#x662F; 1&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0&#xFF09;&#xFF1B;</li>
<li>3&#x3001;&#x5F53; numElements &#x5728; 2^30 &#x5230; 2^ 31-1 &#x4E4B;&#x95F4;&#xFF08;&#x5373;&#x6700;&#x9AD8;&#x4F4D;&#x662F; 0100 &#x7684;&#x6570;&#xFF09;&#xFF0C;&#x8BA1;&#x7B97;&#x540E;&#x5F97;&#x5230;&#x7684; nextPow2 &#x5C31;&#x662F;&#x8D1F;&#x6570;&#xFF08;&#x6700;&#x9AD8;&#x4F4D;&#x662F; 1000&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F; 0&#xFF09;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x53F3;&#x79FB;&#x4E00;&#x4F4D;&#xFF0C;&#x53D6; 2^30 &#x4E3A;&#x521D;&#x59CB;&#x5BB9;&#x91CF;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;n = 0 0 0 0 1 x x x x x     // n</span><br><span class="line">n = 0 0 0 0 1 1 x x x x     // n |= n &gt;&gt;&gt; 1;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 x x     // n |= n &gt;&gt;&gt; 2;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 1 1     // n |= n &gt;&gt;&gt; 4;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 1 1     // n |= n &gt;&gt;&gt; 8;&#xFF08;&#x8FD9;&#x4E00;&#x6B65;&#x5BF9; n &#x6CA1;&#x6709;&#x5F71;&#x54CD;&#x4E86;&#xFF09;</span><br><span class="line">n = 0 0 0 0 1 1 1 1 1 1     // n |= n &gt;&gt;&gt; 16;&#xFF08;&#x8FD9;&#x4E00;&#x6B65;&#x5BF9; n &#x6CA1;&#x6709;&#x5F71;&#x54CD;&#x4E86;&#xFF09;</span><br><span class="line">n = 0 0 0 1 0 0 0 0 0 0     // n ++&#xFF08;&#x8FDB;&#x4F4D;&#xFF0C;&#x5F97;&#x5230;&#x6700;&#x8FD1; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF09;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-ArrayDeque-&#x7684;&#x6DFB;&#x52A0;&#x548C;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;"><a href="#4-3-ArrayDeque-&#x7684;&#x6DFB;&#x52A0;&#x548C;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;" class="headerlink" title="4.3 ArrayDeque &#x7684;&#x6DFB;&#x52A0;&#x548C;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;"></a>4.3 ArrayDeque &#x7684;&#x6DFB;&#x52A0;&#x548C;&#x6269;&#x5BB9;&#x65B9;&#x6CD5;</h3><p>ArrayDeque &#x53EF;&#x4EE5;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x4E24;&#x7AEF;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x4E2D;&#x95F4;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#xFF1A;</p>
<ul>
<li><strong>&#x5728;&#x961F;&#x5934;&#x6DFB;&#x52A0;&#xFF1A;</strong> &#x5728; head &#x6307;&#x9488;&#x7684;&#x4E0A;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x8D4B;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x8D8A;&#x754C;&#x5219;&#x5FAA;&#x73AF;&#x5230;&#x6570;&#x7EC4;&#x5C3E;&#x90E8;&#xFF1B;</li>
<li><strong>&#x5728;&#x961F;&#x5C3E;&#x6DFB;&#x52A0;&#xFF1A;</strong> &#x5728; tail &#x6307;&#x9488;&#x7684;&#x4F4D;&#x7F6E;&#x8D4B;&#x503C;&#xFF0C;&#x5E76;&#x5C06; tail &#x6307;&#x9488;&#x6307;&#x5411;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x8D8A;&#x754C;&#x5219;&#x5FAA;&#x73AF;&#x5230;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public void addLast(E e) {</span><br><span class="line">    // &#x7591;&#x95EE;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; ArrayDeque &#x4E0D;&#x652F;&#x6301;&#x6DFB;&#x52A0; null &#x5143;&#x7D20;</span><br><span class="line">    if (e == null)</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    // tail &#x6307;&#x9488;&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x6307;&#x5411;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x586B;&#x5145;</span><br><span class="line">    elements[tail] = e;</span><br><span class="line">    // &#x4FEE;&#x6539; tail &#x6307;&#x9488;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x53D6;&#x4F59;&#x64CD;&#x4F5C;&#x5FAA;&#x73AF;&#x5230;&#x6570;&#x7EC4;&#x5934;&#x90E8;</span><br><span class="line">    if ( (tail = (tail + 1) &amp; (elements.length - 1)) == head)</span><br><span class="line">        doubleCapacity();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public void addFirst(E e) {</span><br><span class="line">    // &#x7591;&#x95EE; 8&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; ArrayDeque &#x7981;&#x6B62;&#x5B58;&#x50A8; null &#x5143;&#x7D20;&#xFF1F;</span><br><span class="line">    if (e == null)</span><br><span class="line">        throw new NullPointerException();</span><br><span class="line">    // &#x4FEE;&#x6539; head &#x6307;&#x9488;&#x5230;&#x524D;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x53D6;&#x4F59;&#x64CD;&#x4F5C;&#x5FAA;&#x73AF;&#x5230;&#x6570;&#x7EC4;&#x5C3E;&#x90E8;</span><br><span class="line">    elements[head = (head - 1) &amp; (elements.length - 1)] = e;</span><br><span class="line">    if (head == tail)</span><br><span class="line">        doubleCapacity();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0D;&#x51FA;&#x610F;&#x5916;&#x5C0F;&#x670B;&#x53CB;&#x53C8;&#x8981;&#x51FA;&#x6765;&#x4E3E;&#x624B;&#x63D0;&#x95EE;&#x4E86;<strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;</strong>&#xFF1A;</p>
<ul>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 8&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48; ArrayDeque &#x7981;&#x6B62;&#x5B58;&#x50A8; null &#x5143;&#x7D20;&#xFF1F;</strong></li>
</ul>
<p>&#x5176;&#x5B9E;&#x5728; Deque &#x63A5;&#x53E3;&#x4E0A;&#x5E76;&#x4E0D;&#x4E25;&#x683C;&#x7981;&#x6B62;&#x5B58;&#x50A8; null &#x5143;&#x7D20;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE; Deque &#x7684;&#x5B9E;&#x73B0;&#x4E0D;&#x63D0;&#x4F9B;&#x5B58;&#x50A8; null &#x503C;&#x7684;&#x80FD;&#x529B;&#x3002;&#x56E0;&#x4E3A; null &#x901A;&#x5E38;&#x4F1A;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x503C;&#x6765;&#x5224;&#x65AD;&#x961F;&#x5217;&#x662F;&#x5426;&#x4E3A;&#x7A7A;&#x3002;</p>
<p><code>Deque javadoc</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;While Deque implementations are not strictly required to prohibit the insertion of null elements, they are strongly encouraged to do so. Users of any Deque implementations that do allow null elements are strongly encouraged not to take advantage of the ability to insert nulls. This is so because null is used as a special return value by various methods to indicated that the deque is empty.</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public E pollFirst() {</span><br><span class="line">    int h = head;</span><br><span class="line">    E result = (E) elements[h];</span><br><span class="line">    // &#x961F;&#x5217;&#x4E3A;&#x7A7A;</span><br><span class="line">    if (result == null)</span><br><span class="line">        return null;</span><br><span class="line">    elements[h] = null;     // Must null out slot</span><br><span class="line">    head = (h + 1) &amp; (elements.length - 1);</span><br><span class="line">    return result;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6BCF;&#x6B21;&#x6DFB;&#x52A0;&#x5143;&#x7D20;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x961F;&#x5934;&#x6307;&#x9488;&#x548C;&#x961F;&#x5C3E;&#x6307;&#x9488;&#x76F8;&#x9047;&#xFF0C;&#x8BF4;&#x660E;&#x6570;&#x7EC4;&#x7A7A;&#x95F4;&#x5DF2;&#x6EE1;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x6269;&#x5BB9;&#x64CD;&#x4F5C;&#x3002;ArrayDeque &#x4F1A;&#x5C06;&#x65B0;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x6269;&#x5927;&#x5230;&#x65E7;&#x6570;&#x7EC4;&#x7684; <strong>2 &#x500D;</strong> &#xFF0C;&#x7531;&#x4E8E;&#x65E7;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x4E5F;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x56E0;&#x6B64;&#x4E58;&#x4EE5; 2 &#x4E4B;&#x540E;&#x4F9D;&#x7136;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#x3002;</p>
<p>&#x642C;&#x8FD0;&#x6570;&#x636E;&#x7684;&#x8FC7;&#x7A0B;&#x5C31;&#x662F;&#x628A; head &#x5934;&#x6307;&#x9488;&#x5230;&#x6570;&#x7EC4;&#x672B;&#x5C3E;&#x7684;&#x5143;&#x7D20;&#x62F7;&#x8D1D;&#x5230;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#xFF0C;&#x800C;&#x5269;&#x4E0B;&#x7684;&#x4ECE;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#x5230;&#x5C3E;&#x6307;&#x9488;&#x7684;&#x5143;&#x7D20;&#x5219;&#x8854;&#x63A5;&#x5230;&#x540E;&#x9762;&#xFF0C;&#x4F7F;&#x5F97;&#x6240;&#x6709;&#x5143;&#x7D20;&#x89C4;&#x6574;&#x5730;&#x6392;&#x5217;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x5934;&#x90E8;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6269;&#x5BB9;&#x64CD;&#x4F5C;</span><br><span class="line">private void doubleCapacity() {</span><br><span class="line">    assert head == tail;</span><br><span class="line">    int p = head;</span><br><span class="line">    int n = elements.length;</span><br><span class="line">    // &#x961F;&#x5934;&#x6307;&#x9488;&#x5230;&#x6570;&#x7EC4;&#x672B;&#x5C3E;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;</span><br><span class="line">    int r = n - p;</span><br><span class="line">    // &#x5BB9;&#x91CF;&#x7FFB;&#x500D;</span><br><span class="line">    int newCapacity = n &lt;&lt; 1;</span><br><span class="line">    // &#x5BB9;&#x91CF;&#x53D8;&#x6210;&#x8D1F;&#x6570;</span><br><span class="line">    if (newCapacity &lt; 0)</span><br><span class="line">        // ArrayList &#x6269;&#x5BB9;&#x6574;&#x578B;&#x6EA2;&#x51FA;&#x65F6;&#x4F1A;&#x629B;&#x51FA; OutOfMemoryError</span><br><span class="line">        // ArrayDeque &#x6269;&#x5BB9;&#x6574;&#x578B;&#x6EA2;&#x51FA;&#x65F6;&#x4F1A;&#x629B;&#x51FA; IllegalStateException</span><br><span class="line">        // &#x770B;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x4E24;&#x4E2A;&#x5BB9;&#x5668;&#x51FA;&#x81EA;&#x4E0D;&#x540C;&#x4F5C;&#x8005;&#xFF0C;&#x4E0D;&#x80FD;&#x7EDF;&#x4E00;&#x4E0B;&#x5417;&#x54C8;&#x54C8;</span><br><span class="line">        throw new IllegalStateException(&quot;Sorry, deque too big&quot;);</span><br><span class="line">    // &#x521B;&#x5EFA;&#x65B0;&#x6570;&#x7EC4;</span><br><span class="line">    Object[] a = new Object[newCapacity];</span><br><span class="line">    // &#x5C06;&#x961F;&#x5934;&#x6307;&#x9488;&#x5230;&#x6570;&#x7EC4;&#x672B;&#x5C3E;&#x7684;&#x5143;&#x7D20;&#x62F7;&#x8D1D;&#x5230;&#x6570;&#x7EC4;&#x5934;&#x90E8;</span><br><span class="line">    System.arraycopy(elements, p, a, 0, r);</span><br><span class="line">    // &#x62F7;&#x8D1D;&#x5269;&#x4E0B;&#x7684;&#x4ECE;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#x5230;&#x5C3E;&#x6307;&#x9488;&#x7684;&#x5143;&#x7D20;</span><br><span class="line">    System.arraycopy(elements, 0, a, r, p);</span><br><span class="line">    // &#x6307;&#x5411;&#x65B0;&#x6570;&#x7EC4;</span><br><span class="line">    elements = a;</span><br><span class="line">    // &#x91CD;&#x7F6E;&#x5934;&#x5C3E;&#x6307;&#x9488;</span><br><span class="line">    head = 0;</span><br><span class="line">    tail = n;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>&#x6269;&#x5BB9;&#x64CD;&#x4F5C;</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e8008a6ba2be04085045a65a2c8d5b023d2a41a14c4286a187af05352982f3ef" alt></p>
<ul>
<li><strong>&#x1F64B;&#x1F3FB;&#x200D;&#x2640;&#xFE0F;&#x7591;&#x95EE; 4&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x770B;&#x5230; ArrayList &#x7C7B;&#x4F3C;&#x7684; <code>MAX_ARRAY_SIZE</code> &#x6700;&#x5927;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#xFF1F;</strong></li>
</ul>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x56DE;&#x7B54;&#x8FD9;&#x4E2A;&#x7591;&#x95EE;&#x4E86;&#xFF0C; <del>&#x7F51;&#x4E0A;&#x4E5F;&#x6709;&#x8D44;&#x6599;&#x8BF4; ArrayDeque &#x6CA1;&#x6709;&#x5BB9;&#x91CF;&#x9650;&#x5236;&#xFF0C;&#x6700;&#x5751;&#x7684;&#x662F;&#x4EE3;&#x7801;&#x6CE8;&#x91CA;&#x4E5F;&#x8FD9;&#x4E48;&#x8BF4;&#xFF1A;&#x201C;Array deques have no capacity restrictions&#x201D;&#x3002;</del> &#x663E;&#x7136;&#x4E0D;&#x662F;&#x8FD9;&#x4E48;&#x4E00;&#x56DE;&#x4E8B;&#x3002; &#x7B2C;&#x4E00;&#xFF0C;&#x6570;&#x7EC4;&#x7684;&#x5BB9;&#x91CF;&#x663E;&#x793A;&#x662F;&#x88AB;&#x865A;&#x62DF;&#x673A;&#x56FA;&#x5316;&#x7684;&#xFF0C;&#x4E0D;&#x53EF;&#x80FD;&#x65E0;&#x9650;&#x5BB9;&#x91CF;&#x3002;&#x7B2C;&#x4E8C;&#xFF0C;&#x4ECE; doubleCapacity() &#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C; <strong>&#x6700;&#x5927;&#x5BB9;&#x91CF;&#x503C;&#x662F; 2^30&#xFF08;&#x9AD8;&#x4F4D; 0100&#xFF0C;&#x4F4E;&#x4F4D;&#x90FD;&#x662F;0&#xFF09;&#xFF0C;</strong> &#x5982;&#x679C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x6570;&#xFF0C;&#x5728; doubleCapacity() &#x6269;&#x5BB9;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x4E86;&#x3002;</p>
<h3 id="4-4-ArrayDeque-&#x7684;&#x83B7;&#x53D6;&#x548C;&#x79FB;&#x9664;&#x65B9;&#x6CD5;"><a href="#4-4-ArrayDeque-&#x7684;&#x83B7;&#x53D6;&#x548C;&#x79FB;&#x9664;&#x65B9;&#x6CD5;" class="headerlink" title="4.4 ArrayDeque &#x7684;&#x83B7;&#x53D6;&#x548C;&#x79FB;&#x9664;&#x65B9;&#x6CD5;"></a>4.4 ArrayDeque &#x7684;&#x83B7;&#x53D6;&#x548C;&#x79FB;&#x9664;&#x65B9;&#x6CD5;</h3><p>ArrayDeque &#x53EF;&#x4EE5;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x4E24;&#x7AEF;&#x79FB;&#x9664;&#x5143;&#x7D20;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x5728;&#x6570;&#x7EC4;&#x7684;&#x4E2D;&#x95F4;&#x79FB;&#x9664;&#x5143;&#x7D20;&#xFF1A;</p>
<ul>
<li><strong>&#x5728;&#x961F;&#x5934;&#x79FB;&#x9664;&#xFF1A;</strong> &#x5728; head &#x6307;&#x9488;&#x7684;&#x4F4D;&#x7F6E;&#x83B7;&#x53D6;&#xFF0C;&#x518D;&#x5C06; head &#x6307;&#x5411;&#x4E0A;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x8D8A;&#x754C;&#x5219;&#x5FAA;&#x73AF;&#x5230;&#x6570;&#x7EC4;&#x5C3E;&#x90E8;&#xFF1B;</li>
<li><strong>&#x5728;&#x961F;&#x5C3E;&#x79FB;&#x9664;&#xFF1A;</strong> &#x5728; tail &#x6307;&#x9488;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x83B7;&#x53D6;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x7EC4;&#x8D8A;&#x754C;&#x5219;&#x5FAA;&#x73AF;&#x5230;&#x6570;&#x7EC4;&#x5934;&#x90E8;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public E pollFirst() {</span><br><span class="line">    // head &#x6307;&#x9488;&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x6307;&#x5411;&#x961F;&#x5934;&#x5143;&#x7D20;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x83B7;&#x53D6;</span><br><span class="line">    int h = head;</span><br><span class="line">    E result = (E) elements[h];</span><br><span class="line">    if (result == null)</span><br><span class="line">        return null;</span><br><span class="line">    elements[h] = null;</span><br><span class="line">    // &#x4FEE;&#x6539; head &#x6307;&#x9488;</span><br><span class="line">    head = (h + 1) &amp; (elements.length - 1);</span><br><span class="line">    return result;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public E pollLast() {</span><br><span class="line">    // tail &#x6307;&#x9488;&#x672C;&#x8EAB;&#x662F;&#x6307;&#x5411;&#x961F;&#x5C3E;&#x5143;&#x7D20;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x4E0A;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;</span><br><span class="line">    int t = (tail - 1) &amp; (elements.length - 1);</span><br><span class="line">    E result = (E) elements[t];</span><br><span class="line">    if (result == null)</span><br><span class="line">        return null;</span><br><span class="line">    elements[t] = null;</span><br><span class="line">    tail = t;</span><br><span class="line">    return result;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-5-ArrayDeque-&#x7684;&#x8FED;&#x4EE3;&#x5668;"><a href="#4-5-ArrayDeque-&#x7684;&#x8FED;&#x4EE3;&#x5668;" class="headerlink" title="4.5 ArrayDeque &#x7684;&#x8FED;&#x4EE3;&#x5668;"></a>4.5 ArrayDeque &#x7684;&#x8FED;&#x4EE3;&#x5668;</h3><p>Java &#x7684; foreach &#x662F;&#x8BED;&#x6CD5;&#x7CD6;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x4E5F;&#x662F;&#x91C7;&#x7528; iterator &#x7684;&#x65B9;&#x5F0F;&#x3002;ArrayDeque &#x63D0;&#x4F9B;&#x4E86; 2 &#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#xFF1A;</p>
<ul>
<li><strong>iterator():DeqIterator()&#xFF1A;</strong> &#x6B63;&#x5411;&#x8FED;&#x4EE3;&#x5668;</li>
<li><strong>ListIterator DescendingIterator()&#xFF1A;</strong> &#x53CD;&#x5411;&#x8FED;&#x4EE3;&#x5668;</li>
</ul>
<p>ArrayDeque &#x8FED;&#x4EE3;&#x5668;&#x540C;&#x6837;&#x6709; fail-fast &#x673A;&#x5236;&#xFF0C;&#x4E0D;&#x7ED9;&#x8FC7;ArrayDeque &#x5E76;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C; ArrayList &#x7C7B;&#x4F3C;&#x7684; modCount &#x68C0;&#x67E5;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#xFF0C;&#x800C;&#x662F;&#x901A;&#x8FC7;&#x5934;&#x5C3E;&#x6307;&#x9488;&#x7684;&#x4F4D;&#x7F6E;&#x548C;&#x5143;&#x7D20;&#x68C0;&#x67E5;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4E0D;&#x4E00;&#x5B9A;&#x80FD;&#x4FDD;&#x8BC1;&#x68C0;&#x6D4B;&#x5230;&#x6240;&#x6709;&#x7684;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x60C5;&#x51B5;&#xFF0C;&#x4F8B;&#x5982;&#x65E0;&#x6CD5;&#x68C0;&#x67E5;&#x5148;&#x79FB;&#x9664;&#x4E86;&#x5C3E;&#x90E8;&#x5143;&#x7D20;&#xFF0C;&#x53C8;&#x9A6C;&#x4E0A;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x5C3E;&#x90E8;&#x5143;&#x7D20;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;private class DeqIterator implements Iterator&lt;E&gt; {</span><br><span class="line"></span><br><span class="line">    private int cursor = head;</span><br><span class="line"></span><br><span class="line">    private int fence = tail;</span><br><span class="line"></span><br><span class="line">    private int lastRet = -1;</span><br><span class="line"></span><br><span class="line">    public boolean hasNext() {</span><br><span class="line">        return cursor != fence;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public E next() {</span><br><span class="line">        if (cursor == fence) throw new NoSuchElementException();</span><br><span class="line">        E result = (E) elements[cursor];</span><br><span class="line">        // &#x65E0;&#x6CD5;&#x68C0;&#x6D4B;&#x5230;&#x6240;&#x6709;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x7684;&#x60C5;&#x51B5;</span><br><span class="line">        if (tail != fence || result == null)</span><br><span class="line">            throw new ConcurrentModificationException();</span><br><span class="line">        lastRet = cursor;</span><br><span class="line">        cursor = (cursor + 1) &amp; (elements.length - 1);</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-6-ArrayDeque-&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"><a href="#4-6-ArrayDeque-&#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;" class="headerlink" title="4.6 ArrayDeque &#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;"></a>4.6 ArrayDeque &#x7684;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</h3><p>ArrayDeque &#x91CD;&#x5199;&#x4E86; JDK &#x5E8F;&#x5217;&#x5316;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x53EA;&#x628A; elements &#x6570;&#x7EC4;&#x4E2D;&#x6709;&#x6548;&#x5143;&#x7D20;&#x7684;&#x90E8;&#x5206;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x5E8F;&#x5217;&#x5316;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</span><br><span class="line">private void writeObject(java.io.ObjectOutputStream s) throws java.io.IOException {</span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line">    // &#x5199;&#x5165;&#x6570;&#x7EC4;&#x957F;&#x5EA6;</span><br><span class="line">    s.writeInt(size());</span><br><span class="line">    // &#x5199;&#x5165;&#x4ECE; head &#x6307;&#x9488;&#x5230; tail &#x6307;&#x9488;&#x4E4B;&#x95F4;&#x7684;&#x6709;&#x6548;&#x5143;&#x7D20;</span><br><span class="line">    int mask = elements.length - 1;</span><br><span class="line">    for (int i = head; i != tail; i = (i + 1) &amp; mask)</span><br><span class="line">        s.writeObject(elements[i]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8FC7;&#x7A0B;</span><br><span class="line">private void readObject(java.io.ObjectInputStream s) throws java.io.IOException, ClassNotFoundException {</span><br><span class="line">    s.defaultReadObject();</span><br><span class="line">    // &#x8BFB;&#x53D6;&#x6570;&#x7EC4;&#x957F;&#x5EA6;</span><br><span class="line">    int size = s.readInt();</span><br><span class="line">    // &#x8BA1;&#x7B97;&#x6700;&#x8FD1;&#x7684; 2 &#x7684;&#x6574;&#x6570;&#x5E42;</span><br><span class="line">    int capacity = calculateSize(size);</span><br><span class="line">    // &#x5206;&#x914D;&#x6570;&#x7EC4;</span><br><span class="line">    SharedSecrets.getJavaOISAccess().checkArray(s, Object[].class, capacity);</span><br><span class="line">    allocateElements(size);</span><br><span class="line">    // &#x8BBE;&#x7F6E;&#x5934;&#x5C3E;&#x6307;&#x9488;</span><br><span class="line">    head = 0;</span><br><span class="line">    tail = size;</span><br><span class="line">    // &#x5C06;&#x6570;&#x636E;&#x89C4;&#x6574;&#x5230;&#x6570;&#x7EC4;&#x4E0B;&#x6807; 0 &#x4F4D;&#x7F6E;</span><br><span class="line">    for (int i = 0; i &lt; size; i++)</span><br><span class="line">        elements[i] = s.readObject();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="4-7-ArrayDeque-&#x7684;-clone-&#x8FC7;&#x7A0B;"><a href="#4-7-ArrayDeque-&#x7684;-clone-&#x8FC7;&#x7A0B;" class="headerlink" title="4.7 ArrayDeque &#x7684; clone() &#x8FC7;&#x7A0B;"></a>4.7 ArrayDeque &#x7684; clone() &#x8FC7;&#x7A0B;</h3><p>ArrayDeque &#x4E2D;&#x7684; elements &#x6570;&#x7EC4;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#xFF0C;&#x56E0;&#x6B64;&#x5728; clone() &#x4E2D;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x6DF1;&#x62F7;&#x8D1D;&#xFF0C;&#x5426;&#x5219;&#x539F;&#x5BF9;&#x8C61;&#x4E0E;&#x514B;&#x9686;&#x5BF9;&#x8C61;&#x4F1A;&#x76F8;&#x4E92;&#x5F71;&#x54CD;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public ArrayDeque&lt;E&gt; clone() {</span><br><span class="line">    try {</span><br><span class="line">        @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">        ArrayDeque&lt;E&gt; result = (ArrayDeque&lt;E&gt;) super.clone();</span><br><span class="line">        result.elements = Arrays.copyOf(elements, elements.length);</span><br><span class="line">        return result;</span><br><span class="line">    } catch (CloneNotSupportedException e) {</span><br><span class="line">        throw new AssertionError();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<ol start="5">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<ul>
<li>1&#x3001;ArrayDeque &#x662F;&#x57FA;&#x4E8E;&#x52A8;&#x6001;&#x6570;&#x7EC4;&#x7684;&#x7EBF;&#x6027;&#x8868;&#xFF0C;&#x5177;&#x5907; Queue &#x548C; Stack &#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4F46;&#x4E0D;&#x5177;&#x5907; List &#x7684;&#x884C;&#x4E3A;&#xFF1B;</li>
<li>2&#x3001;ArrayDeque &#x7684;&#x6570;&#x7EC4;&#x5BB9;&#x91CF;&#x662F; 2 &#x7684;&#x6574;&#x6570;&#x5E42;&#xFF0C;&#x5728;&#x6269;&#x5BB9;&#x65F6;&#x5BB9;&#x91CF;&#x4F1A;&#x7FFB;&#x500D;&#xFF0C;&#x4E14;&#x4E0D;&#x652F;&#x6301; null &#x5143;&#x7D20;&#xFF1B;</li>
<li>3&#x3001;ArrayDeque &#x548C; LinkedList &#x7684;&#x6808;&#x548C;&#x961F;&#x5217;&#x884C;&#x4E3A;&#x90FD;&#x662F; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;ArrayDeque &#x7684;&#x5165;&#x6808;&#x548C;&#x5165;&#x961F;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1;&#x6269;&#x5BB9;&#xFF0C;&#x4F46;&#x4ECE;&#x5747;&#x644A;&#x5206;&#x6790;&#x4E0A;&#x770B;&#x4F9D;&#x7136;&#x662F; O(1) &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1B;</li>
<li>4&#x3001;ArrayDeque &#x662F;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x57FA;&#x4E8E;&#x5C40;&#x90E8;&#x6027;&#x539F;&#x7406;&#x80FD;&#x591F;&#x66F4;&#x597D;&#x5730;&#x547D;&#x4E2D; CPU &#x7F13;&#x5B58;&#x884C;&#xFF0C;&#x800C; LinkedList &#x662F;&#x79BB;&#x6563;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5BF9;&#x7F13;&#x5B58;&#x884C;&#x4E0D;&#x53CB;&#x597D;&#xFF1B;</li>
<li>5&#x3001;ArrayDeque &#x548C; LinkedList &#x90FD;&#x4E0D;&#x8003;&#x8651;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF0C;&#x4E0D;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;</li>
</ul>
<hr>
<h3 id="&#x7248;&#x6743;&#x58F0;&#x660E;"><a href="#&#x7248;&#x6743;&#x58F0;&#x660E;" class="headerlink" title="&#x7248;&#x6743;&#x58F0;&#x660E;"></a>&#x7248;&#x6743;&#x58F0;&#x660E;</h3><p>&#x672C;&#x6587;&#x4E3A;&#x7A00;&#x571F;&#x6398;&#x91D1;&#x6280;&#x672F;&#x793E;&#x533A;&#x9996;&#x53D1;&#x7B7E;&#x7EA6;&#x6587;&#x7AE0;&#xFF0C;14&#x5929;&#x5185;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;14&#x5929;&#x540E;&#x672A;&#x83B7;&#x6388;&#x6743;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;&#xFF0C;&#x4FB5;&#x6743;&#x5FC5;&#x7A76;&#xFF01;</p>
<h3 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><ul>
<li><a href="/external_links/3529d049f48fd001823dfe2eff3eb3ee.html" target="blank" rel="noopener">&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x4E4B;&#x7F8E;&#xFF08;&#x7B2C; 4&#x3001;8&#x3001;9 &#x8BB2;&#xFF09;</a> &#x2014;&#x2014; &#x738B;&#x4E89; &#x8457;&#xFF0C;&#x6781;&#x5BA2;&#x65F6;&#x95F4; &#x51FA;&#x54C1;</li>
<li><a href="https://dev.newban.cn/7120277074589253662">17 &#x5F20;&#x56FE;&#x5E26;&#x4F60;&#x6DF1;&#x5EA6;&#x5256;&#x6790; ArrayDeque&#xFF08;JDK&#x53CC;&#x7AEF;&#x961F;&#x5217;&#xFF09;&#x6E90;&#x7801;</a> &#x2014;&#x2014; &#x4E00;&#x65E0;&#x662F;&#x5904;&#x7684;&#x7814;&#x7A76;&#x50E7;</li>
<li><a href="/external_links/6f06c294629ccbf1e33c13bac888a7f9.html" target="blank" rel="noopener">Java &#x5BB9;&#x5668;&#x6E90;&#x7801;&#x5206;&#x6790;&#x4E4B; Deque &#x4E0E; ArrayDeque</a> &#x2014;&#x2014; jrthe42 &#x8457;</li>
<li><a href="/external_links/68a31969cca01488e23f8b007f626846.html" target="blank" rel="noopener">Why null values are not allowed in ArrayDeque?</a> &#x2014;&#x2014; stack overflow</li>
</ul>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>Java &amp; Android &#x96C6;&#x5408;&#x6846;&#x67B6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#xFF08;2023/07/08 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7161731329078329381">#1 ArrayList &#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x66FF;&#x4EE3;&#x6570;&#x7EC4;&#x5417;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162203434014212109">#2 &#x8BF4;&#x4E00;&#x4E0B; ArrayList &#x548C; LinkedList &#x7684;&#x533A;&#x522B;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162035643785150472">#3 CopyOnWriteArrayList &#x662F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7162819765361672199">#4 ArrayDeque&#xFF1A;&#x5982;&#x4F55;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6808;&#x548C;&#x961F;&#x5217;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7163985718417555487">#5 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164024676618862622">#6 &#x4E07;&#x5B57; HashMap &#x8BE6;&#x89E3;&#xFF0C;&#x57FA;&#x7840;&#xFF08;&#x4F18;&#x96C5;&#xFF09;&#x6C38;&#x4E0D;&#x8FC7;&#x65F6; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7164348785512939551">#7 &#x5982;&#x4F55;&#x4F7F;&#x7528; LinkedHashMap &#x5B9E;&#x73B0; LRU &#x7F13;&#x5B58;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7165044834590261256">#8 &#x8BF4;&#x4E00;&#x4E0B; WeakHashMap &#x5982;&#x4F55;&#x6E05;&#x7406;&#x65E0;&#x6548;&#x6570;&#x636E;&#x7684;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7166202551782604837">#9 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x539F;&#x7406;&#x7BC7;</a></li>
<li><a href="https://dev.newban.cn/7166202801470013476">#10 &#x5168;&#x7F51;&#x6700;&#x5168;&#x7684; ThreadLocal &#x539F;&#x7406;&#x8BE6;&#x7EC6;&#x89E3;&#x6790; &#x2014;&#x2014; &#x6E90;&#x7801;&#x7BC7;</a></li>
</ul>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/6882370280946302983">&#x8DF3;&#x8F6C;&#x9605;&#x8BFB;</a></p>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bc0395bbb4fd179c90d2e7fa7ac7210602cc6f9a1f6d67d395295c57e54d8b98" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c0bb4b05186f061762680af6ab76a21d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../105/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../105/">105</a><span class="page-number current">106</span><a class="page-number" href="../107/">107</a><span class="space">&hellip;</span><a class="page-number" href="../298/">298</a><a class="extend next" rel="next" href="../107/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">2975</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1162</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
