<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/290/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/290/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6937495228743942174.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6937495228743942174.html" itemprop="url">Kong API Gateway 落地 Kubernetes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-09T11:44:41+08:00">
                2021-03-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x7ECF;&#x8FC7;&#x4E0A;&#x4E00;&#x7BC7;&#xFF0C;&#x52A0;&#x4E0A;&#x81EA;&#x5DF1;&#x5C1D;&#x8BD5;&#x7684;&#x8BDD;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x4F1A;&#x5BF9; Kong &#x63D2;&#x4EF6;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x6709;&#x4E2A;&#x5370;&#x8C61;&#x4E86;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x8BF4;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x4EF6;&#x3002;</p>
<p>&#x5F53;&#x73B0;&#x6210;&#x7684;&#x63D2;&#x4EF6;&#x6EE1;&#x8DB3;&#x4E0D;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x501F;&#x8FD9;&#x4E2A;&#x673A;&#x4F1A;&#xFF0C;&#x628A;&#x6574;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x4EF6;&#x7684;&#x5F00;&#x53D1;&#xFF0C;&#x53D1;&#x5E03;&#x6D41;&#x7A0B;&#x8BB0;&#x5F55;&#x4E0B;&#x3002;</p>
<h2 id="&#x8D44;&#x6599;"><a href="#&#x8D44;&#x6599;" class="headerlink" title="&#x8D44;&#x6599;"></a>&#x8D44;&#x6599;</h2><p>&#x9996;&#x5148;&#x662F;&#x57FA;&#x7840;&#x7684; <a href="/external_links/614c025426dec95f628601511fb833ba.html" target="blank" rel="noopener">Plugin Development Guide</a> &#x548C; <a href="/external_links/cb2392bb32cf64ce17ba7bd7db7418a4.html" target="blank" rel="noopener">Plugin Development Kit</a>&#xFF0C;&#x8FD9;&#x4E24;&#x7BC7;&#x53EA;&#x662F;&#x7ED9;&#x4E86;&#x6211;&#x4EEC;&#x63D2;&#x4EF6;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x7684;&#x6587;&#x6863;&#x3002;&#x63A5;&#x7740;&#x5F3A;&#x70C8;&#x63A8;&#x8350; <a href="/external_links/21beecbf6b887932567399c463ca8ba9.html" target="blank" rel="noopener">Setting up custom plugin in Kubernetes environment</a>&#xFF0C;&#x8FD9;&#x7BC7;&#x7279;&#x522B;&#x9002;&#x5408;&#x4E0D;&#x719F;&#x6089; lua &#x7684;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x5176;&#x4E2D;&#x4E5F;&#x7ED9;&#x4E86;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x597D;&#x7684; demo &#x3002;</p>
<h2 id="&#x65B0;&#x63D2;&#x4EF6;&#x4EE3;&#x7801;"><a href="#&#x65B0;&#x63D2;&#x4EF6;&#x4EE3;&#x7801;" class="headerlink" title="&#x65B0;&#x63D2;&#x4EF6;&#x4EE3;&#x7801;"></a>&#x65B0;&#x63D2;&#x4EF6;&#x4EE3;&#x7801;</h2><p>&#x63D2;&#x4EF6;&#x9700;&#x6C42;&#xFF1A;&#x6211;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528; Kong Proxy Cache&#xFF08;&#x8BF7;&#x6C42;&#x7F13;&#x5B58;&#x63D2;&#x4EF6;&#xFF09;&#x540E;&#x53D1;&#x73B0;&#x4EA7;&#x751F;&#x4E86;&#x4E00;&#x4E2A;&#x7591;&#x95EE;&#xFF1A;&#x7F13;&#x5B58;&#x7684;&#x547D;&#x4E2D;&#x7387;&#x5982;&#x4F55;&#xFF1F;</p>
<p>&#x4ECE;&#x76D1;&#x63A7;&#x4E0A;&#xFF0C;&#x6211;&#x80FD;&#x770B;&#x5230;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x7684;&#x7EDF;&#x8BA1;&#x60C5;&#x51B5;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x770B;&#x4E0D;&#x51FA;&#x6709;&#x591A;&#x5C11;&#x8BF7;&#x6C42;&#x662F;&#x547D;&#x4E2D;&#x4E86;&#x7F13;&#x5B58;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x90A3;&#x4E9B;&#x65F6;&#x5EF6;&#x6BD4;&#x8F83;&#x4F4E;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x591F;&#x7CBE;&#x786E;&#x548C;&#x91CF;&#x5316;&#x3002;&#x6211;&#x5C31;&#x60F3;&#x5982;&#x679C;&#x80FD;&#x5728;&#x76D1;&#x63A7;&#x4FE1;&#x606F;&#x4E2D;&#x5939;&#x5E26;&#x662F;&#x5426;&#x547D;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x76D1;&#x63A7;&#x5C55;&#x793A;&#x65F6;&#xFF0C;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x8FC7;&#x6EE4;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x80FD;&#x5F97;&#x5230;&#x51C6;&#x786E;&#x7684;&#x547D;&#x4E2D;&#x7387;&#x4E86;&#x3002;</p>
<p>&#x63D2;&#x4EF6;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#xFF1A;&#x89C2;&#x5BDF; Kong grafana &#x76D1;&#x63A7;&#xFF0C;&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x5230;&#x8BF7;&#x6C42;&#x7684;&#x76D1;&#x63A7;&#x6570;&#x636E;&#x6761;&#x76EE;&#x662F; <code>kong_http_status</code>&#x3002;&#x76F4;&#x63A5;&#x7684;&#x60F3;&#x6CD5;&#x662F;&#xFF0C;&#x8981;&#x662F;&#x5728;&#x8FD9;&#x4E2A; Prometheus &#x6761;&#x76EE;&#x4E0A;&#x589E;&#x52A0;&#x540D;&#x4E3A; &#x201C;cache&#x201D; &#x7684; tag &#x5C31;&#x597D;&#x4E86;&#x3002;</p>
<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x987A;&#x7740;&#x8FD9;&#x4E2A;&#x60F3;&#x6CD5;&#x627E;&#x5230; Prometheus Plugin <a href="/external_links/4c72b4a5974d99ae8fce7cfea7e8b36f.html" target="blank" rel="noopener">&#x6E90;&#x7801;</a>&#xFF0C;&#x4FEE;&#x6539;&#x6E90;&#x7801;&#xFF0C;&#x8BE6;&#x89C1;&#xFF1A;<a href="/external_links/0879314a9d946b173ec0aef9f0cf679f.html" target="blank" rel="noopener">github.com/yuyulei/blo&#x2026;</a></p>
<p>&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x6539;&#x52A8;&#x7684;&#x5730;&#x65B9;&#x6709;&#xFF1A;</p>
<ul>
<li>&#x4FEE;&#x6539; plugin &#x7684;&#x547D;&#x540D;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x8DDF;&#x539F;&#x6765;&#x4E0D;&#x4E00;&#x6837;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;// in handler.lua file</span><br><span class="line"></span><br><span class="line">-- local prometheus = require &quot;kong.plugins.prometheus.exporter&quot;</span><br><span class="line">local prometheus = require &quot;kong.plugins.caoliao-prometheus.exporter&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x589E;&#x52A0;&#x81EA;&#x5B9A;&#x4E49; tag&#xFF1A; cache&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;  metrics.status = prometheus:counter(&quot;http_status&quot;,</span><br><span class="line">        &quot;HTTP status codes per service/route in Kong&quot;,</span><br><span class="line">        -- {&quot;service&quot;, &quot;route&quot;, &quot;code&quot;})</span><br><span class="line">        {&quot;service&quot;, &quot;route&quot;, &quot;code&quot;, &quot;cache&quot;})</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">css&#x590D;&#x5236;&#x4EE3;&#x7801;    labels_table[4] = &quot;Unknown&quot;</span><br><span class="line">    if message.response.headers[&quot;x-cache-status&quot;] then </span><br><span class="line">      labels_table[4] = message.response.headers[&quot;x-cache-status&quot;]</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF1A;<strong>&#x63D2;&#x4EF6;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;</strong>&#x3002;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x76D1;&#x63A7;&#x63D2;&#x4EF6;&#x9700;&#x8981;&#x5224;&#x65AD;&#x51FA;&#x54EA;&#x4E9B;&#x8BF7;&#x6C42;&#x547D;&#x4E2D;&#x4E86;&#x7F13;&#x5B58;&#xFF0C;&#x54EA;&#x4E9B;&#x6CA1;&#x6709;&#x547D;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x5FC5;&#x987B;&#x5B89;&#x6392;&#x5728;&#x7F13;&#x5B58;&#x63D2;&#x4EF6;&#x4E4B;&#x540E;&#x6267;&#x884C;&#x3002;</p>
<p>&#x7B80;&#x5355;&#x89E3;&#x91CA;&#x4E0B; HTTP header&#xFF1A; x-cache-status&#x3002;&#x8BE5; header &#x662F;&#x7ECF;&#x8FC7;&#x7F13;&#x5B58;&#x63D2;&#x4EF6;&#x540E;&#x9644;&#x52A0;&#x5230; response Header &#x4E0A;&#x3002;&#x5176;&#x4E2D;&#x53D6;&#x503C;&#x6709;&#xFF1A;Hit&#xFF08;&#x547D;&#x4E2D;&#xFF09;&#xFF0C;Miss&#xFF08;&#x672A;&#x547D;&#x4E2D;&#xFF09;&#xFF0C;Bypass(&#x4E0D;&#x8003;&#x8651;&#x7F13;&#x5B58;)&#xFF0C;Refresh(&#x7F13;&#x5B58;&#x8D85;&#x65F6;)&#x3002;&#x6211;&#x4EEC;&#x4E0D;&#x5728;&#x4E4E;&#x5177;&#x4F53;&#x53D6;&#x503C;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0; header &#x4E2D;&#x6709; &#x201C;x-cache-status&#x201D; &#xFF0C;&#x5C31;&#x5728;&#x8BE5;&#x8BF7;&#x6C42;&#x7684;&#x76D1;&#x63A7;&#x6761;&#x76EE;&#x4E2D;&#x8BBE;&#x7F6E; cache tag&#x3002;</p>
<h2 id="&#x96C6;&#x6210;&#x65B0;&#x63D2;&#x4EF6;"><a href="#&#x96C6;&#x6210;&#x65B0;&#x63D2;&#x4EF6;" class="headerlink" title="&#x96C6;&#x6210;&#x65B0;&#x63D2;&#x4EF6;"></a>&#x96C6;&#x6210;&#x65B0;&#x63D2;&#x4EF6;</h2><p>&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x9700;&#x8981;&#x5C06;&#x65B0;&#x63D2;&#x4EF6;&#x96C6;&#x6210;&#x5230; Kong &#x7F51;&#x5173;&#x4E2D;&#x3002;&#x6211;&#x89C9;&#x5F97;&#xFF0C;&#x5728; Kong Ingress Controller&#xFF08;K8s &#x96C6;&#x7FA4;&#xFF09;&#x73AF;&#x5883;&#x4E0B;&#x96C6;&#x6210;&#x63D2;&#x4EF6;&#x6BD4;&#x539F;&#x751F; Kong &#x73AF;&#x5883;&#x66F4;&#x65B9;&#x4FBF;&#x3002;</p>
<p>&#x5148;&#x5C06;&#x4EE3;&#x7801;&#x4EE5; configMap &#x7684;&#x5F62;&#x5F0F;&#x5F55;&#x5165;&#x5230; K8s &#x96C6;&#x7FA4;&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl create cm kong-plugin-caoliao-prometheus --from-file=caoliao-prometheus -n kong</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x4FEE;&#x6539; KIC deployment&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;      - env:</span><br><span class="line">        - name: KONG_PLUGINS</span><br><span class="line">          value: bundled,caoliao-prometheus</span><br><span class="line">        - name: KONG_LUA_PACKAGE_PATH</span><br><span class="line">          value: /opt/?.lua;;</span><br><span class="line"></span><br><span class="line">        volumeMounts:</span><br><span class="line">        - mountPath: /opt/kong/plugins/caoliao-prometheus</span><br><span class="line">          name: kong-plugin-caoliao-prometheus</span><br><span class="line"></span><br><span class="line">      volumes:</span><br><span class="line">        - configMap:</span><br><span class="line">            name: kong-plugin-caoliao-prometheus</span><br><span class="line">          name: kong-plugin-caoliao-prometheus</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x4E0A;&#x5982;&#x5347;&#x7EA7;&#x7F51;&#x5173;&#x5373;&#x53EF;&#x3002;</p>
<h2 id="&#x76D1;&#x63A7;&#x5C55;&#x793A;"><a href="#&#x76D1;&#x63A7;&#x5C55;&#x793A;" class="headerlink" title="&#x76D1;&#x63A7;&#x5C55;&#x793A;"></a>&#x76D1;&#x63A7;&#x5C55;&#x793A;</h2><p>&#x8BBE;&#x8BA1; 3 &#x6761; Metrics Query&#xFF0C;&#x5206;&#x522B;&#x662F;&#x547D;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x8BF7;&#x6C42; RPS&#xFF0C;&#x603B;&#x8BF7;&#x6C42; RPS &#x4EE5;&#x53CA;&#x547D;&#x4E2D;&#x7387;&#x3002;</p>
<p><a href="/external_links/f96195c1f5559bb5e6698d4e854d5697.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6580dc8d8282340fe818d3d2fc1ec53193ad67dbe73d4e64440d60d0c1dce9b7" alt="61bqNd.md.jpg"></a></p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5C0F;&#x5C0F;&#x4FEE;&#x6539;&#x4E86; Kong Prometheus Plugin &#x6E90;&#x7801;&#xFF0C;&#x8D70;&#x5B8C;&#x4E86;&#x81EA;&#x5B9A;&#x4E49;&#x63D2;&#x4EF6;&#x4ECE;&#x5F00;&#x53D1;&#x5230;&#x96C6;&#x6210;&#x53D1;&#x5E03;&#x7684;&#x5168;&#x8FC7;&#x7A0B;&#x3002;Kong &#x7684;&#x5F88;&#x591A;&#x63D2;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x6E90;&#x7801;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x548C;&#x6211;&#x4E00;&#x6837;&#x4E0D;&#x719F;&#x6089; lua &#x7684;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x6211;&#x5EFA;&#x8BAE;&#x4F18;&#x5148;&#x8003;&#x8651;&#x5728;&#x6E90;&#x7801;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x6539;&#x8FDB;&#xFF0C;&#x800C;&#x4E0D;&#x8981;&#x81EA;&#x5DF1;&#x9020;&#x8F6E;&#x5B50;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;Kong &#x8FD8;&#x652F;&#x6301; golang &#x63D2;&#x4EF6;&#xFF0C;&#x6709;&#x673A;&#x4F1A;&#x6211;&#x4E5F;&#x60F3;&#x5C1D;&#x8BD5;&#x4E0B;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/995c27ade8c39bcb04f31a8932db8174.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6937494977228308511.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6937494977228308511.html" itemprop="url">小白也能看懂的锁升级过程和锁状态</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-09T11:43:41+08:00">
                2021-03-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x4E00;&#x3001;&#x524D;&#x8A00;"><a href="#&#x4E00;&#x3001;&#x524D;&#x8A00;" class="headerlink" title="&#x4E00;&#x3001;&#x524D;&#x8A00;"></a>&#x4E00;&#x3001;&#x524D;&#x8A00;</h2><p>&#x9501;&#x7684;&#x72B6;&#x6001;&#x603B;&#x5171;&#x6709;&#x56DB;&#x79CD;&#xFF0C;&#x7EA7;&#x522B;&#x7531;&#x4F4E;&#x5230;&#x9AD8;&#x4F9D;&#x6B21;&#x4E3A;&#xFF1A;<strong>&#x65E0;&#x9501;&#x3001;&#x504F;&#x5411;&#x9501;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3001;&#x91CD;&#x91CF;&#x7EA7;&#x9501;</strong>&#xFF0C;&#x8FD9;&#x56DB;&#x79CD;&#x9501;&#x72B6;&#x6001;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x4EC0;&#x4E48;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6709;&#x9501;&#x5347;&#x7EA7;&#xFF1F;&#x5176;&#x5B9E;&#x5728; JDK 1.6&#x4E4B;&#x524D;&#xFF0C;<strong>synchronized &#x8FD8;&#x662F;&#x4E00;&#x4E2A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;</strong>&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x6548;&#x7387;&#x6BD4;&#x8F83;&#x4F4E;&#x4E0B;&#x7684;&#x9501;&#xFF0C;&#x4F46;&#x662F;&#x5728;JDK 1.6&#x540E;&#xFF0C;Jvm&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x9501;&#x7684;&#x83B7;&#x53D6;&#x4E0E;&#x91CA;&#x653E;&#x6548;&#x7387;&#x5BF9;&#xFF08;<strong>synchronized</strong> &#xFF09;&#x8FDB;&#x884C;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x5F15;&#x5165;&#x4E86; <strong>&#x504F;&#x5411;&#x9501; &#x548C; &#x8F7B;&#x91CF;&#x7EA7;&#x9501;</strong> &#xFF0C;&#x4ECE;&#x6B64;&#x4EE5;&#x540E;&#x9501;&#x7684;&#x72B6;&#x6001;&#x5C31;&#x6709;&#x4E86;&#x56DB;&#x79CD;&#xFF08;&#x65E0;&#x9501;&#x3001;&#x504F;&#x5411;&#x9501;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3001;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF09;&#xFF0C;<strong>&#x5E76;&#x4E14;&#x56DB;&#x79CD;&#x72B6;&#x6001;&#x4F1A;&#x968F;&#x7740;&#x7ADE;&#x4E89;&#x7684;&#x60C5;&#x51B5;&#x9010;&#x6E10;&#x5347;&#x7EA7;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x4E0D;&#x53EF;&#x9006;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5373;&#x4E0D;&#x53EF;&#x964D;&#x7EA7;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x53EA;&#x80FD;&#x8FDB;&#x884C;&#x9501;&#x5347;&#x7EA7;&#xFF08;&#x4ECE;&#x4F4E;&#x7EA7;&#x522B;&#x5230;&#x9AD8;&#x7EA7;&#x522B;&#xFF09;&#xFF0C;&#x4E0D;&#x80FD;&#x9501;&#x964D;&#x7EA7;&#xFF08;&#x9AD8;&#x7EA7;&#x522B;&#x5230;&#x4F4E;&#x7EA7;&#x522B;&#xFF09;</strong> &#xFF0C;&#x610F;&#x5473;&#x7740;&#x504F;&#x5411;&#x9501;&#x5347;&#x7EA7;&#x6210;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x540E;&#x4E0D;&#x80FD;&#x964D;&#x7EA7;&#x6210;&#x504F;&#x5411;&#x9501;&#x3002;&#x8FD9;&#x79CD;&#x9501;&#x5347;&#x7EA7;&#x5374;&#x4E0D;&#x80FD;&#x964D;&#x7EA7;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x83B7;&#x5F97;&#x9501;&#x548C;&#x91CA;&#x653E;&#x9501;&#x7684;&#x6548;&#x7387;&#x3002;</p>
<h2 id="&#x4E8C;&#x3001;&#x9501;&#x7684;&#x56DB;&#x79CD;&#x72B6;&#x6001;"><a href="#&#x4E8C;&#x3001;&#x9501;&#x7684;&#x56DB;&#x79CD;&#x72B6;&#x6001;" class="headerlink" title="&#x4E8C;&#x3001;&#x9501;&#x7684;&#x56DB;&#x79CD;&#x72B6;&#x6001;"></a>&#x4E8C;&#x3001;&#x9501;&#x7684;&#x56DB;&#x79CD;&#x72B6;&#x6001;</h2><p>&#x5728; <code>synchronized</code> &#x6700;&#x521D;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x662F; &#x201C;<strong>&#x963B;&#x585E;&#x6216;&#x5524;&#x9192;&#x4E00;&#x4E2A;Java&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5207;&#x6362;CPU&#x72B6;&#x6001;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x8FD9;&#x79CD;&#x72B6;&#x6001;&#x5207;&#x6362;&#x9700;&#x8981;&#x8017;&#x8D39;&#x5904;&#x7406;&#x5668;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x679C;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x5185;&#x5BB9;&#x8FC7;&#x4E8E;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x79CD;&#x5207;&#x6362;&#x7684;&#x65F6;&#x95F4;&#x53EF;&#x80FD;&#x6BD4;&#x7528;&#x6237;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#x8FD8;&#x957F;&#x201D;</strong> &#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5C31;&#x662F; <code>synchronized</code>&#x5B9E;&#x73B0;&#x540C;&#x6B65;&#x6700;&#x521D;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x5F53;&#x521D;&#x5F00;&#x53D1;&#x8005;&#x8BDF;&#x75C5;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x5728;JDK6&#x4EE5;&#x524D; <code>synchronized</code>&#x6548;&#x7387;&#x4F4E;&#x4E0B;&#x7684;&#x539F;&#x56E0;&#xFF0C;JDK6&#x4E2D;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x83B7;&#x5F97;&#x9501;&#x548C;&#x91CA;&#x653E;&#x9501;&#x5E26;&#x6765;&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;&#xFF0C;&#x5F15;&#x5165;&#x4E86;&#x201C;&#x504F;&#x5411;&#x9501;&#x201D;&#x548C;&#x201C;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x201D;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x76EE;&#x524D;&#x9501;&#x72B6;&#x6001;&#x4E00;&#x79CD;&#x6709;&#x56DB;&#x79CD;&#xFF0C;&#x4ECE;&#x7EA7;&#x522B;&#x7531;&#x4F4E;&#x5230;&#x9AD8;&#x4F9D;&#x6B21;&#x662F;&#xFF1A;<strong>&#x65E0;&#x9501;&#x3001;&#x504F;&#x5411;&#x9501;&#xFF0C;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x91CD;&#x91CF;&#x7EA7;&#x9501;</strong>&#xFF0C;&#x9501;&#x72B6;&#x6001;&#x53EA;&#x80FD;&#x5347;&#x7EA7;&#xFF0C;&#x4E0D;&#x80FD;&#x964D;&#x7EA7;</p>
<p><strong>&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF1A;</strong>  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/9f17cdb55337232b288c99a663fc385a6583aadbc4c0ffe3bbd71ff9f6d703e6" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="&#x4E09;&#x3001;&#x9501;&#x72B6;&#x6001;&#x7684;&#x601D;&#x8DEF;&#x4EE5;&#x53CA;&#x7279;&#x70B9;"><a href="#&#x4E09;&#x3001;&#x9501;&#x72B6;&#x6001;&#x7684;&#x601D;&#x8DEF;&#x4EE5;&#x53CA;&#x7279;&#x70B9;" class="headerlink" title="&#x4E09;&#x3001;&#x9501;&#x72B6;&#x6001;&#x7684;&#x601D;&#x8DEF;&#x4EE5;&#x53CA;&#x7279;&#x70B9;"></a>&#x4E09;&#x3001;&#x9501;&#x72B6;&#x6001;&#x7684;&#x601D;&#x8DEF;&#x4EE5;&#x53CA;&#x7279;&#x70B9;</h2><table>
<thead>
<tr>
<th>&#x9501;&#x72B6;&#x6001;</th>
<th>&#x5B58;&#x50A8;&#x5185;&#x5BB9;</th>
<th>&#x6807;&#x5FD7;&#x4F4D;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x65E0;&#x9501;</td>
<td>&#x5BF9;&#x8C61;&#x7684;hashCode&#x3001;&#x5BF9;&#x8C61;&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#x3001;&#x662F;&#x5426;&#x662F;&#x504F;&#x5411;&#x9501;(0)</td>
<td>01</td>
</tr>
<tr>
<td>&#x504F;&#x5411;&#x9501;</td>
<td>&#x504F;&#x5411;&#x7EBF;&#x7A0B;ID&#x3001;&#x504F;&#x5411;&#x65F6;&#x95F4;&#x6233;&#x3001;&#x5BF9;&#x8C61;&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#x3001;&#x662F;&#x5426;&#x662F;&#x504F;&#x5411;&#x9501;(1)</td>
<td>01</td>
</tr>
<tr>
<td>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;</td>
<td>&#x6307;&#x5411;&#x6808;&#x4E2D;&#x9501;&#x8BB0;&#x5F55;&#x7684;&#x6307;&#x9488;</td>
<td>00</td>
</tr>
<tr>
<td>&#x91CD;&#x91CF;&#x7EA7;&#x9501;</td>
<td>&#x6307;&#x5411;&#x4E92;&#x65A5;&#x91CF;&#x7684;&#x6307;&#x9488;</td>
<td>11</td>
</tr>
</tbody></table>
<h2 id="&#x56DB;&#x3001;&#x9501;&#x5BF9;&#x6BD4;"><a href="#&#x56DB;&#x3001;&#x9501;&#x5BF9;&#x6BD4;" class="headerlink" title="&#x56DB;&#x3001;&#x9501;&#x5BF9;&#x6BD4;"></a>&#x56DB;&#x3001;&#x9501;&#x5BF9;&#x6BD4;</h2><table>
<thead>
<tr>
<th>&#x9501;</th>
<th>&#x4F18;&#x70B9;</th>
<th>&#x7F3A;&#x70B9;</th>
<th>&#x9002;&#x7528;&#x573A;&#x666F;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x504F;&#x5411;&#x9501;</td>
<td>&#x52A0;&#x9501;&#x548C;&#x89E3;&#x9501;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x548C;&#x6267;&#x884C;&#x975E;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x76F8;&#x6BD4;&#x4EC5;&#x5B58;&#x5728;&#x7EB3;&#x79D2;&#x7EA7;&#x7684;&#x5DEE;&#x8DDD;</td>
<td>&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x95F4;&#x5B58;&#x5728;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;&#x4F1A;&#x5E26;&#x6765;&#x989D;&#x5916;&#x7684;&#x9501;&#x64A4;&#x9500;&#x7684;&#x6D88;&#x8017;</td>
<td>&#x9002;&#x7528;&#x4E8E;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x540C;&#x6B65;&#x5757;&#x573A;&#x666F;</td>
</tr>
<tr>
<td>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;</td>
<td>&#x7ADE;&#x4E89;&#x7684;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#xFF0C;&#x63D0;&#x9AD8;&#x4E86;&#x7A0B;&#x5E8F;&#x7684;&#x54CD;&#x5E94;&#x901F;&#x5EA6;</td>
<td>&#x5982;&#x679C;&#x59CB;&#x7EC8;&#x5F97;&#x4E0D;&#x5230;&#x7D22;&#x7ADE;&#x4E89;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x4F7F;&#x7528;&#x81EA;&#x65CB;&#x4F1A;&#x6D88;&#x8017;CPU</td>
<td>&#x8FFD;&#x6C42;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#xFF0C;&#x540C;&#x6B65;&#x5757;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x975E;&#x5E38;&#x5FEB;</td>
</tr>
<tr>
<td>&#x91CD;&#x91CF;&#x7EA7;&#x9501;</td>
<td>&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#x4E0D;&#x4F7F;&#x7528;&#x81EA;&#x65CB;&#xFF0C;&#x4E0D;&#x4F1A;&#x6D88;&#x8017;CPU</td>
<td>&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#xFF0C;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x7F13;&#x6162;</td>
<td>&#x8FFD;&#x6C42;&#x541E;&#x5410;&#x91CF;&#xFF0C;&#x540C;&#x6B65;&#x5757;&#x6267;&#x884C;&#x901F;&#x5EA6;&#x8F83;&#x6162;</td>
</tr>
</tbody></table>
<h2 id="&#x4E94;&#x3001;Synchronized&#x9501;"><a href="#&#x4E94;&#x3001;Synchronized&#x9501;" class="headerlink" title="&#x4E94;&#x3001;Synchronized&#x9501;"></a>&#x4E94;&#x3001;Synchronized&#x9501;</h2><p><code>synchronized</code> &#x7528;&#x7684;&#x9501;&#x662F;&#x5B58;&#x5728;Java&#x5BF9;&#x8C61;&#x5934;&#x91CC;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x4EC0;&#x4E48;&#x662F;&#x5BF9;&#x8C61;&#x5934;&#x5462;&#xFF1F;</p>
<h3 id="5-1-Java-&#x5BF9;&#x8C61;&#x5934;"><a href="#5-1-Java-&#x5BF9;&#x8C61;&#x5934;" class="headerlink" title="5.1 Java &#x5BF9;&#x8C61;&#x5934;"></a>5.1 Java &#x5BF9;&#x8C61;&#x5934;</h3><p>&#x6211;&#x4EEC;&#x4EE5; Hotspot &#x865A;&#x62DF;&#x673A;&#x4E3A;&#x4F8B;&#xFF0C;Hopspot &#x5BF9;&#x8C61;&#x5934;&#x4E3B;&#x8981;&#x5305;&#x62EC;&#x4E24;&#x90E8;&#x5206;&#x6570;&#x636E;&#xFF1A;<code>Mark Word&#xFF08;&#x6807;&#x8BB0;&#x5B57;&#x6BB5;&#xFF09; &#x548C; Klass Pointer&#xFF08;&#x7C7B;&#x578B;&#x6307;&#x9488;&#xFF09;</code></p>
<p><strong>Mark Word</strong>&#xFF1A;&#x9ED8;&#x8BA4;&#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x7684;HashCode&#xFF0C;&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#x548C;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x4FE1;&#x606F;&#x3002;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x90FD;&#x662F;&#x4E0E;&#x5BF9;&#x8C61;&#x81EA;&#x8EAB;&#x5B9A;&#x4E49;&#x65E0;&#x5173;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;Mark Word&#x88AB;&#x8BBE;&#x8BA1;&#x6210;&#x4E00;&#x4E2A;&#x975E;&#x56FA;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4EE5;&#x4FBF;&#x5728;&#x6781;&#x5C0F;&#x7684;&#x7A7A;&#x95F4;&#x5185;&#x5B58;&#x5B58;&#x50A8;&#x5C3D;&#x91CF;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x72B6;&#x6001;&#x590D;&#x7528;&#x81EA;&#x5DF1;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x8FD0;&#x884C;&#x671F;&#x95F4;Mark Word&#x91CC;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x968F;&#x7740;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x7684;&#x53D8;&#x5316;&#x800C;&#x53D8;&#x5316;&#x3002;</p>
<p><strong>Klass Point</strong>&#xFF1A;&#x5BF9;&#x8C61;&#x6307;&#x5411;&#x5B83;&#x7684;&#x7C7B;&#x5143;&#x6570;&#x636E;&#x7684;&#x6307;&#x9488;&#xFF0C;&#x865A;&#x62DF;&#x673A;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6307;&#x9488;&#x6765;&#x786E;&#x5B9A;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x662F;&#x54EA;&#x4E2A;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
<p>&#x5728;&#x4E0A;&#x9762;&#x4E2D;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E86;&#xFF0C;<code>synchronized</code> &#x7528;&#x7684;&#x9501;&#x662F;&#x5B58;&#x5728;Java&#x5BF9;&#x8C61;&#x5934;&#x91CC;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5177;&#x4F53;&#x662F;&#x5B58;&#x5728;&#x5BF9;&#x8C61;&#x5934;&#x54EA;&#x91CC;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x662F;&#xFF1A;<strong>&#x5B58;&#x5728;&#x9501;&#x5BF9;&#x8C61;&#x7684;&#x5BF9;&#x8C61;&#x5934;&#x7684;Mark Word&#x4E2D;</strong>&#xFF0C;&#x90A3;&#x4E48;MarkWord&#x5728;&#x5BF9;&#x8C61;&#x5934;&#x4E2D;&#x5230;&#x5E95;&#x957F;&#x4EC0;&#x4E48;&#x6837;&#xFF0C;&#x5B83;&#x5230;&#x5E95;&#x5B58;&#x50A8;&#x4E86;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;</p>
<p><strong>&#x5728;64&#x4F4D;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#xFF1A;</strong>  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/77734cce59e66ada6546d6c8ad03b9103f3fdc61dcd0b408d2862d7b7f8a4d82" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">  </p>
<p><strong>&#x5728;32&#x4F4D;&#x7684;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#xFF1A;</strong>  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/69841cad2faa165424f14d51ab5f3c84ab68d9eb258556bbf5d900186bca16df" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4EE5; 32&#x4F4D;&#x865A;&#x62DF;&#x673A;&#x4E3A;&#x4F8B;&#xFF0C;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x5176; Mark Word &#x7684;&#x5B57;&#x8282;&#x5177;&#x4F53;&#x662F;&#x5982;&#x4F55;&#x5206;&#x914D;&#x7684;</p>
<p><strong>&#x65E0;&#x9501;</strong>&#xFF1A;&#x5BF9;&#x8C61;&#x5934;&#x5F00;&#x8F9F; 25bit &#x7684;&#x7A7A;&#x95F4;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x7684; hashcode &#xFF0C;4bit &#x7528;&#x4E8E;&#x5B58;&#x653E;&#x5BF9;&#x8C61;&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#xFF0C;1bit &#x7528;&#x6765;&#x5B58;&#x653E;&#x662F;&#x5426;&#x504F;&#x5411;&#x9501;&#x7684;&#x6807;&#x8BC6;&#x4F4D;&#xFF0C;2bit &#x7528;&#x6765;&#x5B58;&#x653E;&#x9501;&#x6807;&#x8BC6;&#x4F4D;&#x4E3A;01</p>
<p><strong>&#x504F;&#x5411;&#x9501;&#xFF1A;</strong> &#x5728;&#x504F;&#x5411;&#x9501;&#x4E2D;&#x5212;&#x5206;&#x66F4;&#x7EC6;&#xFF0C;&#x8FD8;&#x662F;&#x5F00;&#x8F9F; 25bit &#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x5176;&#x4E2D;23bit &#x7528;&#x6765;&#x5B58;&#x653E;&#x7EBF;&#x7A0B;ID&#xFF0C;2bit &#x7528;&#x6765;&#x5B58;&#x653E; Epoch&#xFF0C;4bit &#x5B58;&#x653E;&#x5BF9;&#x8C61;&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#xFF0C;1bit &#x5B58;&#x653E;&#x662F;&#x5426;&#x504F;&#x5411;&#x9501;&#x6807;&#x8BC6;&#xFF0C; 0&#x8868;&#x793A;&#x65E0;&#x9501;&#xFF0C;1&#x8868;&#x793A;&#x504F;&#x5411;&#x9501;&#xFF0C;&#x9501;&#x7684;&#x6807;&#x8BC6;&#x4F4D;&#x8FD8;&#x662F;01</p>
<p><strong>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;</strong>&#xFF1A;&#x5728;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x4E2D;&#x76F4;&#x63A5;&#x5F00;&#x8F9F; 30bit &#x7684;&#x7A7A;&#x95F4;&#x5B58;&#x653E;&#x6307;&#x5411;&#x6808;&#x4E2D;&#x9501;&#x8BB0;&#x5F55;&#x7684;&#x6307;&#x9488;&#xFF0C;2bit &#x5B58;&#x653E;&#x9501;&#x7684;&#x6807;&#x5FD7;&#x4F4D;&#xFF0C;&#x5176;&#x6807;&#x5FD7;&#x4F4D;&#x4E3A;00</p>
<p><strong>&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF1A;</strong> &#x5728;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x4E2D;&#x548C;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x4E00;&#x6837;&#xFF0C;30bit &#x7684;&#x7A7A;&#x95F4;&#x7528;&#x6765;&#x5B58;&#x653E;&#x6307;&#x5411;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x7684;&#x6307;&#x9488;&#xFF0C;2bit &#x5B58;&#x653E;&#x9501;&#x7684;&#x6807;&#x8BC6;&#x4F4D;&#xFF0C;&#x4E3A;11</p>
<p><strong>GC&#x6807;&#x8BB0;&#xFF1A;</strong> &#x5F00;&#x8F9F;30bit &#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5374;&#x6CA1;&#x6709;&#x5360;&#x7528;&#xFF0C;2bit &#x7A7A;&#x95F4;&#x5B58;&#x653E;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x4E3A;11&#x3002;</p>
<p>&#x5176;&#x4E2D;&#x65E0;&#x9501;&#x548C;&#x504F;&#x5411;&#x9501;&#x7684;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x90FD;&#x662F;01&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x524D;&#x9762;&#x7684;1bit&#x533A;&#x5206;&#x4E86;&#x8FD9;&#x662F;&#x65E0;&#x9501;&#x72B6;&#x6001;&#x8FD8;&#x662F;&#x504F;&#x5411;&#x9501;&#x72B6;&#x6001;</p>
<p>&#x5173;&#x4E8E;&#x5185;&#x5B58;&#x7684;&#x5206;&#x914D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;git&#x4E2D;openJDK&#x4E2D; <a href="/external_links/9f16045b283625a27459003e76827815.html" target="blank" rel="noopener">markOop.hpp</a> &#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;public:</span><br><span class="line">  // Constants</span><br><span class="line">  enum { age_bits                 = 4,</span><br><span class="line">         lock_bits                = 2,</span><br><span class="line">         biased_lock_bits         = 1,</span><br><span class="line">         max_hash_bits            = BitsPerWord - age_bits - lock_bits - biased_lock_bits,</span><br><span class="line">         hash_bits                = max_hash_bits &gt; 31 ? 31 : max_hash_bits,</span><br><span class="line">         cms_bits                 = LP64_ONLY(1) NOT_LP64(0),</span><br><span class="line">         epoch_bits               = 2</span><br><span class="line">  };</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>age_bits&#xFF1A;</strong> &#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8BF4;&#x7684;&#x5206;&#x4EE3;&#x56DE;&#x6536;&#x7684;&#x6807;&#x8BC6;&#xFF0C;&#x5360;&#x7528;4&#x5B57;&#x8282;</li>
<li><strong>lock_bits&#xFF1A;</strong> &#x662F;&#x9501;&#x7684;&#x6807;&#x5FD7;&#x4F4D;&#xFF0C;&#x5360;&#x7528;2&#x4E2A;&#x5B57;&#x8282;</li>
<li><strong>biased_lock_bits&#xFF1A;</strong> &#x662F;&#x662F;&#x5426;&#x504F;&#x5411;&#x9501;&#x7684;&#x6807;&#x8BC6;&#xFF0C;&#x5360;&#x7528;1&#x4E2A;&#x5B57;&#x8282;</li>
<li><strong>max_hash_bits&#xFF1A;</strong> &#x662F;&#x9488;&#x5BF9;&#x65E0;&#x9501;&#x8BA1;&#x7B97;&#x7684;hashcode &#x5360;&#x7528;&#x5B57;&#x8282;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C;&#x662F;32&#x4F4D;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x5C31;&#x662F; 32 - 4 - 2 -1 = 25 byte&#xFF0C;&#x5982;&#x679C;&#x662F;64 &#x4F4D;&#x865A;&#x62DF;&#x673A;&#xFF0C;64 - 4 - 2 - 1 = 57 byte&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x6709; 25 &#x5B57;&#x8282;&#x672A;&#x4F7F;&#x7528;&#xFF0C;&#x6240;&#x4EE5;64&#x4F4D;&#x7684; hashcode &#x5360;&#x7528; 31 byte</li>
<li><strong>hash_bits&#xFF1A;</strong> &#x662F;&#x9488;&#x5BF9; 64 &#x4F4D;&#x865A;&#x62DF;&#x673A;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x6700;&#x5927;&#x5B57;&#x8282;&#x6570;&#x5927;&#x4E8E; 31&#xFF0C;&#x5219;&#x53D6;31&#xFF0C;&#x5426;&#x5219;&#x53D6;&#x771F;&#x5B9E;&#x7684;&#x5B57;&#x8282;&#x6570;</li>
<li><strong>cms_bits&#xFF1A;</strong> &#x4E0D;&#x662F;64&#x4F4D;&#x865A;&#x62DF;&#x673A;&#x5C31;&#x5360;&#x7528; 0 byte&#xFF0C;&#x662F;64&#x4F4D;&#x5C31;&#x5360;&#x7528; 1byte</li>
<li><strong>epoch_bits&#xFF1A;</strong> &#x5C31;&#x662F; epoch &#x6240;&#x5360;&#x7528;&#x7684;&#x5B57;&#x8282;&#x5927;&#x5C0F;&#xFF0C;2&#x5B57;&#x8282;&#x3002;</li>
</ul>
<h3 id="5-2-Monitor"><a href="#5-2-Monitor" class="headerlink" title="5.2 Monitor"></a>5.2 Monitor</h3><p>Monitor &#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x5DE5;&#x5177;&#x6216;&#x4E00;&#x79CD;&#x540C;&#x6B65;&#x673A;&#x5236;&#xFF0C;&#x901A;&#x5E38;&#x88AB;&#x63CF;&#x8FF0;&#x4E3A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;&#x6BCF;&#x4E00;&#x4E2A; Java &#x5BF9;&#x8C61;&#x5C31;&#x6709;&#x4E00;&#x628A;&#x770B;&#x4E0D;&#x89C1;&#x7684;&#x9501;&#xFF0C;&#x79F0;&#x4E3A;&#x5185;&#x90E8;&#x9501;&#x6216;&#x8005; Monitor &#x9501;&#x3002;</p>
<p>Monitor &#x662F;&#x7EBF;&#x7A0B;&#x79C1;&#x6709;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x53EF;&#x7528; monitor record &#x5217;&#x8868;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x7684;&#x53EF;&#x7528;&#x5217;&#x8868;&#x3002;&#x6BCF;&#x4E00;&#x4E2A;&#x88AB;&#x9501;&#x4F4F;&#x7684;&#x5BF9;&#x8C61;&#x90FD;&#x4F1A;&#x548C;&#x4E00;&#x4E2A; monitor &#x5173;&#x8054;&#xFF0C;&#x540C;&#x65F6; monitor &#x4E2D;&#x6709;&#x4E00;&#x4E2A; Owner &#x5B57;&#x6BB5;&#x5B58;&#x653E;&#x62E5;&#x6709;&#x8BE5;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#xFF0C;&#x8868;&#x793A;&#x8BE5;&#x9501;&#x88AB;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x5360;&#x7528;&#x3002;</p>
<p><code>Synchronized</code>&#x662F;&#x901A;&#x8FC7;&#x5BF9;&#x8C61;&#x5185;&#x90E8;&#x7684;&#x4E00;&#x4E2A;&#x53EB;&#x505A;&#x76D1;&#x89C6;&#x5668;&#x9501;&#xFF08;monitor&#xFF09;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x76D1;&#x89C6;&#x5668;&#x9501;&#x672C;&#x8D28;&#x53C8;&#x662F;&#x4F9D;&#x8D56;&#x4E8E;&#x5E95;&#x5C42;&#x7684;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684; Mutex Lock&#xFF08;&#x4E92;&#x65A5;&#x9501;&#xFF09;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x800C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x5207;&#x6362;&#x9700;&#x8981;&#x4ECE;&#x7528;&#x6237;&#x6001;&#x8F6C;&#x6362;&#x5230;&#x6838;&#x5FC3;&#x6001;&#xFF0C;&#x8FD9;&#x4E2A;&#x6210;&#x672C;&#x975E;&#x5E38;&#x9AD8;&#xFF0C;&#x72B6;&#x6001;&#x4E4B;&#x95F4;&#x7684;&#x8F6C;&#x6362;&#x9700;&#x8981;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x957F;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4E3A;&#x4EC0;&#x4E48; Synchronized &#x6548;&#x7387;&#x4F4E;&#x7684;&#x539F;&#x56E0;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8FD9;&#x79CD;&#x4F9D;&#x8D56;&#x4E8E;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF; Mutex Lock &#x6240;&#x5B9E;&#x73B0;&#x7684;&#x9501;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x3002;</p>
<p>&#x968F;&#x7740;&#x9501;&#x7684;&#x7ADE;&#x4E89;&#xFF0C;&#x9501;&#x53EF;&#x4EE5;&#x4ECE;&#x504F;&#x5411;&#x9501;&#x5347;&#x7EA7;&#x5230;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x518D;&#x5347;&#x7EA7;&#x7684;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x4F46;&#x662F;&#x9501;&#x7684;&#x5347;&#x7EA7;&#x662F;&#x5355;&#x5411;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x53EA;&#x80FD;&#x4ECE;&#x4F4E;&#x5230;&#x9AD8;&#x5347;&#x7EA7;&#xFF0C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x9501;&#x7684;&#x964D;&#x7EA7;&#xFF09;&#x3002;JDK 1.6&#x4E2D;&#x9ED8;&#x8BA4;&#x662F;&#x5F00;&#x542F;&#x504F;&#x5411;&#x9501;&#x548C;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;-XX:-UseBiasedLocking=false&#x6765;&#x7981;&#x7528;&#x504F;&#x5411;&#x9501;&#x3002;</p>
<h2 id="&#x516D;&#x3001;&#x9501;&#x7684;&#x5206;&#x7C7B;"><a href="#&#x516D;&#x3001;&#x9501;&#x7684;&#x5206;&#x7C7B;" class="headerlink" title="&#x516D;&#x3001;&#x9501;&#x7684;&#x5206;&#x7C7B;"></a>&#x516D;&#x3001;&#x9501;&#x7684;&#x5206;&#x7C7B;</h2><h3 id="6-2-&#x65E0;&#x9501;"><a href="#6-2-&#x65E0;&#x9501;" class="headerlink" title="6.2 &#x65E0;&#x9501;"></a>6.2 &#x65E0;&#x9501;</h3><p>&#x65E0;&#x9501;&#x662F;&#x6307;&#x6CA1;&#x6709;&#x5BF9;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x9501;&#x5B9A;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x80FD;&#x8BBF;&#x95EE;&#x5E76;&#x4FEE;&#x6539;&#x540C;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#xFF0C;&#x4F46;&#x540C;&#x65F6;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x80FD;&#x4FEE;&#x6539;&#x6210;&#x529F;&#x3002;</p>
<p>&#x65E0;&#x9501;&#x7684;&#x7279;&#x70B9;&#x662F;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x4F1A;&#x5728;&#x5FAA;&#x73AF;&#x5185;&#x8FDB;&#x884C;&#xFF0C;&#x7EBF;&#x7A0B;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x5C1D;&#x8BD5;&#x4FEE;&#x6539;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51B2;&#x7A81;&#x5C31;&#x4FEE;&#x6539;&#x6210;&#x529F;&#x5E76;&#x9000;&#x51FA;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x7EE7;&#x7EED;&#x5FAA;&#x73AF;&#x5C1D;&#x8BD5;&#x3002;&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4FEE;&#x6539;&#x540C;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x5FC5;&#x5B9A;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x80FD;&#x4FEE;&#x6539;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x4FEE;&#x6539;&#x5931;&#x8D25;&#x7684;&#x7EBF;&#x7A0B;&#x4F1A;&#x4E0D;&#x65AD;&#x91CD;&#x8BD5;&#x76F4;&#x5230;&#x4FEE;&#x6539;&#x6210;&#x529F;&#x3002;</p>
<h3 id="6-3-&#x504F;&#x5411;&#x9501;"><a href="#6-3-&#x504F;&#x5411;&#x9501;" class="headerlink" title="6.3 &#x504F;&#x5411;&#x9501;"></a>6.3 &#x504F;&#x5411;&#x9501;</h3><p>&#x521D;&#x6B21;&#x6267;&#x884C;&#x5230;synchronized&#x4EE3;&#x7801;&#x5757;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9501;&#x5BF9;&#x8C61;&#x53D8;&#x6210;&#x504F;&#x5411;&#x9501;&#xFF08;&#x901A;&#x8FC7;CAS&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x5934;&#x91CC;&#x7684;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#xFF09;&#xFF0C;&#x5B57;&#x9762;&#x610F;&#x601D;&#x662F;&#x201C;&#x504F;&#x5411;&#x4E8E;&#x7B2C;&#x4E00;&#x4E2A;&#x83B7;&#x5F97;&#x5B83;&#x7684;&#x7EBF;&#x7A0B;&#x201D;&#x7684;&#x9501;&#x3002;&#x6267;&#x884C;&#x5B8C;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x540E;&#xFF0C;&#x7EBF;&#x7A0B;&#x5E76;&#x4E0D;&#x4F1A;&#x4E3B;&#x52A8;&#x91CA;&#x653E;&#x504F;&#x5411;&#x9501;&#x3002;&#x5F53;&#x7B2C;&#x4E8C;&#x6B21;&#x5230;&#x8FBE;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x65F6;&#xFF0C;&#x7EBF;&#x7A0B;&#x4F1A;&#x5224;&#x65AD;&#x6B64;&#x65F6;&#x6301;&#x6709;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x5C31;&#x662F;&#x81EA;&#x5DF1;&#xFF08;&#x6301;&#x6709;&#x9501;&#x7684;&#x7EBF;&#x7A0B;ID&#x4E5F;&#x5728;&#x5BF9;&#x8C61;&#x5934;&#x91CC;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5219;&#x6B63;&#x5E38;&#x5F80;&#x4E0B;&#x6267;&#x884C;&#x3002;&#x7531;&#x4E8E;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x52A0;&#x9501;&#x3002;&#x5982;&#x679C;&#x81EA;&#x59CB;&#x81F3;&#x7EC8;&#x4F7F;&#x7528;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x5F88;&#x660E;&#x663E;&#x504F;&#x5411;&#x9501;&#x51E0;&#x4E4E;&#x6CA1;&#x6709;&#x989D;&#x5916;&#x5F00;&#x9500;&#xFF0C;&#x6027;&#x80FD;&#x6781;&#x9AD8;&#x3002;</p>
<p>&#x504F;&#x5411;&#x9501;&#x662F;&#x6307;&#x5F53;&#x4E00;&#x6BB5;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x4E00;&#x76F4;&#x88AB;&#x540C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6240;&#x8BBF;&#x95EE;&#x65F6;&#xFF0C;&#x5373;&#x4E0D;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x7ADE;&#x4E89;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x7EBF;&#x7A0B;&#x5728;&#x540E;&#x7EED;&#x8BBF;&#x95EE;&#x65F6;&#x4FBF;&#x4F1A;&#x81EA;&#x52A8;&#x83B7;&#x5F97;&#x9501;&#xFF0C;&#x4ECE;&#x800C;&#x964D;&#x4F4E;&#x83B7;&#x53D6;&#x9501;&#x5E26;&#x6765;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x5373;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x5E76;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#xFF0C;&#x4F1A;&#x5728; Mark Word &#x91CC;&#x5B58;&#x50A8;&#x9501;&#x504F;&#x5411;&#x7684;&#x7EBF;&#x7A0B; ID&#x3002;&#x5728;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x548C;&#x9000;&#x51FA;&#x540C;&#x6B65;&#x5757;&#x65F6;&#x4E0D;&#x518D;&#x901A;&#x8FC7; CAS &#x64CD;&#x4F5C;&#x6765;&#x52A0;&#x9501;&#x548C;&#x89E3;&#x9501;&#xFF0C;&#x800C;&#x662F;&#x68C0;&#x6D4B; Mark Word &#x91CC;&#x662F;&#x5426;&#x5B58;&#x50A8;&#x7740;&#x6307;&#x5411;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;&#x504F;&#x5411;&#x9501;&#x3002;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x7684;&#x83B7;&#x53D6;&#x53CA;&#x91CA;&#x653E;&#x4F9D;&#x8D56;&#x591A;&#x6B21; CAS &#x539F;&#x5B50;&#x6307;&#x4EE4;&#xFF0C;&#x800C;&#x504F;&#x5411;&#x9501;&#x53EA;&#x9700;&#x8981;&#x5728;&#x7F6E;&#x6362; ThreadID &#x7684;&#x65F6;&#x5019;&#x4F9D;&#x8D56;&#x4E00;&#x6B21; CAS &#x539F;&#x5B50;&#x6307;&#x4EE4;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x504F;&#x5411;&#x9501;&#x53EA;&#x6709;&#x9047;&#x5230;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5C1D;&#x8BD5;&#x7ADE;&#x4E89;&#x504F;&#x5411;&#x9501;&#x65F6;&#xFF0C;&#x6301;&#x6709;&#x504F;&#x5411;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x624D;&#x4F1A;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x7EBF;&#x7A0B;&#x662F;&#x4E0D;&#x4F1A;&#x4E3B;&#x52A8;&#x91CA;&#x653E;&#x504F;&#x5411;&#x9501;&#x7684;&#x3002;</p>
<p>&#x5173;&#x4E8E;&#x504F;&#x5411;&#x9501;&#x7684;&#x64A4;&#x9500;&#xFF0C;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5168;&#x5C40;&#x5B89;&#x5168;&#x70B9;&#xFF0C;&#x5373;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#x4E0A;&#x6CA1;&#x6709;&#x5B57;&#x8282;&#x7801;&#x6B63;&#x5728;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x5148;&#x6682;&#x505C;&#x62E5;&#x6709;&#x504F;&#x5411;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x5224;&#x65AD;&#x9501;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x5904;&#x4E8E;&#x88AB;&#x9501;&#x5B9A;&#x72B6;&#x6001;&#x3002;&#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x4E0D;&#x5904;&#x4E8E;&#x6D3B;&#x52A8;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x5C06;&#x5BF9;&#x8C61;&#x5934;&#x8BBE;&#x7F6E;&#x6210;&#x65E0;&#x9501;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x64A4;&#x9500;&#x504F;&#x5411;&#x9501;&#xFF0C;&#x6062;&#x590D;&#x5230;&#x65E0;&#x9501;&#xFF08;&#x6807;&#x5FD7;&#x4F4D;&#x4E3A;01&#xFF09;&#x6216;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x6807;&#x5FD7;&#x4F4D;&#x4E3A;00&#xFF09;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<h3 id="6-4-&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x81EA;&#x65CB;&#x9501;&#xFF09;"><a href="#6-4-&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x81EA;&#x65CB;&#x9501;&#xFF09;" class="headerlink" title="6.4 &#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x81EA;&#x65CB;&#x9501;&#xFF09;"></a>6.4 &#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x81EA;&#x65CB;&#x9501;&#xFF09;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/9fec39fdcebe87a118783e40308b12d62d8b58b0687ef35ee9524fcc5a08ccb1" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x662F;&#x6307;&#x5F53;&#x9501;&#x662F;&#x504F;&#x5411;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5374;&#x88AB;&#x53E6;&#x5916;&#x7684;&#x7EBF;&#x7A0B;&#x6240;&#x8BBF;&#x95EE;&#xFF0C;&#x6B64;&#x65F6;&#x504F;&#x5411;&#x9501;&#x5C31;&#x4F1A;&#x5347;&#x7EA7;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4F1A;&#x901A;&#x8FC7;&#x81EA;&#x65CB;&#xFF08;&#x5173;&#x4E8E;&#x81EA;&#x65CB;&#x7684;&#x4ECB;&#x7ECD;&#x89C1;&#x6587;&#x672B;&#xFF09;&#x7684;&#x5F62;&#x5F0F;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x3002;</p>
<p>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x7684;&#x83B7;&#x53D6;&#x4E3B;&#x8981;&#x7531;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF1A;  </p>
<p>&#x2460; &#x5F53;&#x5173;&#x95ED;&#x504F;&#x5411;&#x9501;&#x529F;&#x80FD;&#x65F6;&#xFF1B;  </p>
<p>&#x2461; &#x7531;&#x4E8E;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#x504F;&#x5411;&#x9501;&#x5BFC;&#x81F4;&#x504F;&#x5411;&#x9501;&#x5347;&#x7EA7;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x3002;</p>
<p>&#x4E00;&#x65E6;&#x6709;&#x7B2C;&#x4E8C;&#x4E2A;&#x7EBF;&#x7A0B;&#x52A0;&#x5165;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;&#x504F;&#x5411;&#x9501;&#x5C31;&#x5347;&#x7EA7;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x81EA;&#x65CB;&#x9501;&#xFF09;&#x3002;&#x8FD9;&#x91CC;&#x8981;&#x660E;&#x786E;&#x4E00;&#x4E0B;&#x4EC0;&#x4E48;&#x662F;&#x9501;&#x7ADE;&#x4E89;&#xFF1A;&#x5982;&#x679C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x8F6E;&#x6D41;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x9501;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x6B21;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x5F88;&#x987A;&#x5229;&#xFF0C;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x963B;&#x585E;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x5B58;&#x5728;&#x9501;&#x7ADE;&#x4E89;&#x3002;&#x53EA;&#x6709;&#x5F53;&#x67D0;&#x7EBF;&#x7A0B;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53D1;&#x73B0;&#x8BE5;&#x9501;&#x5DF2;&#x7ECF;&#x88AB;&#x5360;&#x7528;&#xFF0C;&#x53EA;&#x80FD;&#x7B49;&#x5F85;&#x5176;&#x91CA;&#x653E;&#xFF0C;&#x8FD9;&#x624D;&#x53D1;&#x751F;&#x4E86;&#x9501;&#x7ADE;&#x4E89;&#x3002;</p>
<p>&#x5728;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x72B6;&#x6001;&#x4E0B;&#x7EE7;&#x7EED;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;&#x6CA1;&#x6709;&#x62A2;&#x5230;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x5C06;&#x81EA;&#x65CB;&#xFF0C;&#x5373;&#x4E0D;&#x505C;&#x5730;&#x5FAA;&#x73AF;&#x5224;&#x65AD;&#x9501;&#x662F;&#x5426;&#x80FD;&#x591F;&#x88AB;&#x6210;&#x529F;&#x83B7;&#x53D6;&#x3002;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x901A;&#x8FC7;CAS&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x5934;&#x91CC;&#x7684;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x3002;&#x5148;&#x6BD4;&#x8F83;&#x5F53;&#x524D;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x662F;&#x5426;&#x4E3A;&#x201C;&#x91CA;&#x653E;&#x201D;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5219;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;&#x201C;&#x9501;&#x5B9A;&#x201D;&#xFF0C;&#x6BD4;&#x8F83;&#x5E76;&#x8BBE;&#x7F6E;&#x662F;&#x539F;&#x5B50;&#x6027;&#x53D1;&#x751F;&#x7684;&#x3002;&#x8FD9;&#x5C31;&#x7B97;&#x62A2;&#x5230;&#x9501;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x7EBF;&#x7A0B;&#x5C06;&#x5F53;&#x524D;&#x9501;&#x7684;&#x6301;&#x6709;&#x8005;&#x4FE1;&#x606F;&#x4FEE;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x3002;</p>
<p>&#x957F;&#x65F6;&#x95F4;&#x7684;&#x81EA;&#x65CB;&#x64CD;&#x4F5C;&#x662F;&#x975E;&#x5E38;&#x6D88;&#x8017;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6301;&#x6709;&#x9501;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5C31;&#x53EA;&#x80FD;&#x5728;&#x539F;&#x5730;&#x7A7A;&#x8017;CPU&#xFF0C;&#x6267;&#x884C;&#x4E0D;&#x4E86;&#x4EFB;&#x4F55;&#x6709;&#x6548;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#x53EB;&#x505A;&#x5FD9;&#x7B49;&#xFF08;busy-waiting&#xFF09;&#x3002;&#x5982;&#x679C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x7528;&#x4E00;&#x4E2A;&#x9501;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;&#x6216;&#x8005;&#x53D1;&#x751F;&#x4E86;&#x5F88;&#x8F7B;&#x5FAE;&#x7684;&#x9501;&#x7ADE;&#x4E89;&#xFF0C;&#x90A3;&#x4E48;synchronized&#x5C31;&#x7528;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x5141;&#x8BB8;&#x77ED;&#x65F6;&#x95F4;&#x7684;&#x5FD9;&#x7B49;&#x73B0;&#x8C61;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x6298;&#x8877;&#x7684;&#x60F3;&#x6CD5;&#xFF0C;&#x77ED;&#x65F6;&#x95F4;&#x7684;&#x5FD9;&#x7B49;&#xFF0C;&#x6362;&#x53D6;&#x7EBF;&#x7A0B;&#x5728;&#x7528;&#x6237;&#x6001;&#x548C;&#x5185;&#x6838;&#x6001;&#x4E4B;&#x95F4;&#x5207;&#x6362;&#x7684;&#x5F00;&#x9500;&#x3002;</p>
<h3 id="6-4-&#x91CD;&#x91CF;&#x7EA7;&#x9501;"><a href="#6-4-&#x91CD;&#x91CF;&#x7EA7;&#x9501;" class="headerlink" title="6.4 &#x91CD;&#x91CF;&#x7EA7;&#x9501;"></a>6.4 &#x91CD;&#x91CF;&#x7EA7;&#x9501;</h3><p>&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x663E;&#x7136;&#xFF0C;&#x6B64;&#x5FD9;&#x7B49;&#x662F;&#x6709;&#x9650;&#x5EA6;&#x7684;&#xFF08;&#x6709;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#x8BB0;&#x5F55;&#x81EA;&#x65CB;&#x6B21;&#x6570;&#xFF0C;&#x9ED8;&#x8BA4;&#x5141;&#x8BB8;&#x5FAA;&#x73AF;10&#x6B21;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x865A;&#x62DF;&#x673A;&#x53C2;&#x6570;&#x66F4;&#x6539;&#xFF09;&#x3002;&#x5982;&#x679C;&#x9501;&#x7ADE;&#x4E89;&#x60C5;&#x51B5;&#x4E25;&#x91CD;&#xFF0C;&#x67D0;&#x4E2A;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x81EA;&#x65CB;&#x6B21;&#x6570;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x4F1A;&#x5C06;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x5347;&#x7EA7;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF08;&#x4F9D;&#x7136;&#x662F;CAS&#x4FEE;&#x6539;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#xFF0C;&#x4F46;&#x4E0D;&#x4FEE;&#x6539;&#x6301;&#x6709;&#x9501;&#x7684;&#x7EBF;&#x7A0B;ID&#xFF09;&#x3002;&#x5F53;&#x540E;&#x7EED;&#x7EBF;&#x7A0B;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#xFF0C;&#x53D1;&#x73B0;&#x88AB;&#x5360;&#x7528;&#x7684;&#x9501;&#x662F;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x5C06;&#x81EA;&#x5DF1;&#x6302;&#x8D77;&#xFF08;&#x800C;&#x4E0D;&#x662F;&#x5FD9;&#x7B49;&#xFF09;&#xFF0C;&#x7B49;&#x5F85;&#x5C06;&#x6765;&#x88AB;&#x5524;&#x9192;&#x3002;</p>
<p>&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#x662F;&#x6307;&#x5F53;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x9501;&#x4E4B;&#x540E;&#xFF0C;&#x5176;&#x4F59;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x8BE5;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x4F1A;&#x5904;&#x4E8E;&#x963B;&#x585E;&#x72B6;&#x6001;&#x3002;</p>
<p>&#x7B80;&#x8A00;&#x4E4B;&#xFF0C;&#x5C31;&#x662F;&#x6240;&#x6709;&#x7684;&#x63A7;&#x5236;&#x6743;&#x90FD;&#x4EA4;&#x7ED9;&#x4E86;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#xFF0C;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x6765;&#x8D1F;&#x8D23;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x8C03;&#x5EA6;&#x548C;&#x7EBF;&#x7A0B;&#x7684;&#x72B6;&#x6001;&#x53D8;&#x66F4;&#x3002;&#x800C;&#x8FD9;&#x6837;&#x4F1A;&#x51FA;&#x73B0;&#x9891;&#x7E41;&#x5730;&#x5BF9;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x7684;&#x5207;&#x6362;&#xFF0C;&#x7EBF;&#x7A0B;&#x7684;&#x6302;&#x8D77;&#x548C;&#x5524;&#x9192;&#xFF0C;&#x4ECE;&#x800C;&#x6D88;&#x8017;&#x5927;&#x91CF;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;</p>
<h2 id="&#x4E94;&#x3001;&#x603B;&#x7ED3;"><a href="#&#x4E94;&#x3001;&#x603B;&#x7ED3;" class="headerlink" title="&#x4E94;&#x3001;&#x603B;&#x7ED3;"></a>&#x4E94;&#x3001;&#x603B;&#x7ED3;</h2><p>&#x6587;&#x4E2D;&#x8BB2;&#x8FF0;&#x4E86;&#x9501;&#x7684;&#x56DB;&#x79CD;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x9501;&#x662F;&#x5982;&#x4F55;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x5347;&#x7EA7;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x6587;&#x4E2D;&#x6709;&#x7406;&#x89E3;&#x4E0D;&#x5230;&#x4F4D;&#x6216;&#x8005;&#x6709;&#x95EE;&#x9898;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x5728;&#x8BC4;&#x8BBA;&#x533A;&#x4E2D;&#x4E0B;&#x65B9;&#x6307;&#x51FA;&#x548C;&#x4EA4;&#x6D41;&#xFF0C;&#x8C22;&#x8C22;&#x5927;&#x5BB6;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/d39a3e2e135afcf221cd0abb8753a950.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6937209611669733413.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6937209611669733413.html" itemprop="url">架构图、用例图、流程图、时序图、类图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-08T17:16:19+08:00">
                2021-03-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/8079e2fa492ccfec372493d893249aec1ebd33ea97cfdc4517216b29d391eb57" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x6587;&#x7AE0;&#x76EE;&#x5F55;"><a href="#&#x6587;&#x7AE0;&#x76EE;&#x5F55;" class="headerlink" title="&#x6587;&#x7AE0;&#x76EE;&#x5F55;"></a>&#x6587;&#x7AE0;&#x76EE;&#x5F55;</h3><ul>
<li><ul>
<li><a href="#_4">&#x524D;&#x8A00;</a><ul>
<li><a href="#_14">&#x67B6;&#x6784;&#x56FE;</a></li>
<li><a href="#_30">&#x7528;&#x4F8B;&#x56FE;</a></li>
<li><a href="#_47">&#x6D41;&#x7A0B;&#x56FE;</a></li>
<li><a href="#_60">&#x90E8;&#x7F72;&#x56FE;</a></li>
<li><a href="#_74">&#x7C7B;&#x56FE;</a></li>
<li><a href="#_92">&#x65F6;&#x5E8F;&#x56FE;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><hr>
<p>&#x4E0D;&#x60F3;&#x505A;&#x67B6;&#x6784;&#x5E08;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x4E0D;&#x662F;&#x4E2A;&#x597D;&#x7EC4;&#x957F;&#x3002;  </p>
<p>&#x6628;&#x5929;&#x7ED9;&#x5B66;&#x957F;&#x770B;&#x4E86;&#x6211;&#x7684;&#x201C;&#x67B6;&#x6784;&#x56FE;&#x201D;&#x4E4B;&#x540E;&#xFF0C;&#x624D;&#x77E5;&#x9053;&#x90A3;&#x4E2A;&#x4E0D;&#x662F;&#x67B6;&#x6784;&#x56FE;&#xFF0C;&#x5DEE;&#x4E0D;&#x591A;&#x4E00;&#x534A;&#x7528;&#x4F8B;&#x56FE;&#x52A0;&#x4E00;&#x534A;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x5427;&#xFF0C;&#x8D3B;&#x7B11;&#x5927;&#x65B9;&#x4E86;&#x3002;  </p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x77E5;&#x803B;&#x800C;&#x540E;&#x52C7;&#xFF0C;&#x592A;&#x5C34;&#x5C2C;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x4E00;&#x7BC7;&#x6211;&#x4E0D;&#x6253;&#x7B97;&#x5199;&#x591A;&#x5C11;&#x7684;&#x6587;&#x5B57;&#xFF0C;&#x4E00;&#x5207;&#x5C3D;&#x5728;&#x4E0D;&#x8A00;&#x4E2D;&#xFF0C;&#x4E00;&#x56FE;&#x9876;&#x5343;&#x8A00;&#x3002;</p>
<hr>
<h2 id="&#x67B6;&#x6784;&#x56FE;"><a href="#&#x67B6;&#x6784;&#x56FE;" class="headerlink" title="&#x67B6;&#x6784;&#x56FE;"></a>&#x67B6;&#x6784;&#x56FE;</h2><p>&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x6536;&#x96C6;&#x4E86;&#x4E00;&#x4E9B;&#x67B6;&#x6784;&#x56FE;&#xFF0C;&#x5B66;&#x957F;&#x4E5F;&#x7ED9;&#x4E86;&#x6211;&#x4E00;&#x4E2A;&#x793A;&#x8303;&#xFF1A;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/7edbc720a0a3ff26ef7790a3e02cf2813a54b14f610904eb285b7265323fc37e" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x6211;&#x627E;&#x7684;&#x793A;&#x4F8B;&#xFF1A;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/1a116a3361df1ac96ff4f9672285f0a0a18de05bee3ac7a07ade89e3e1c33e29" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x53C2;&#x8003;&#x8D44;&#x6599;&#xFF1A;  </p>
<p><a href="/external_links/903a0f3c36e80e9772c740babc033420.html" target="blank" rel="noopener">&#x8F6F;&#x4EF6;&#x67B6;&#x6784;&#x6982;&#x89C8;</a></p>
<p>&#x53C2;&#x4E0E;&#x9636;&#x6BB5;&#xFF1A;  </p>
<p>&#x9700;&#x6C42;&#x5206;&#x6790;&#x9636;&#x6BB5;</p>
<hr>
<h2 id="&#x7528;&#x4F8B;&#x56FE;"><a href="#&#x7528;&#x4F8B;&#x56FE;" class="headerlink" title="&#x7528;&#x4F8B;&#x56FE;"></a>&#x7528;&#x4F8B;&#x56FE;</h2><p>&#x7528;&#x4F8B;&#x56FE;&#xFF1A;&#x7528;&#x4F8B;&#x56FE;&#x662F;&#x6307;&#x7531;&#x53C2;&#x4E0E;&#x8005;&#xFF08;Actor&#xFF09;&#x3001;&#x7528;&#x4F8B;&#xFF08;Use Case&#xFF09;&#xFF0C;&#x8FB9;&#x754C;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x6784;&#x6210;&#x7684;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x7CFB;&#x7EDF;&#x529F;&#x80FD;&#x7684;&#x89C6;&#x56FE;&#x3002;&#x662F;&#x7CFB;&#x7EDF;&#x7684;&#x84DD;&#x56FE;&#x3002;</p>
<p>&#x5B83;&#x4E3B;&#x8981;&#x63CF;&#x8FF0;&#x7CFB;&#x7EDF;&#x529F;&#x80FD;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4ECE;&#x5916;&#x90E8;&#x7528;&#x6237;&#x7684;&#x89D2;&#x5EA6;&#x89C2;&#x5BDF;&#xFF0C;&#x7CFB;&#x7EDF;&#x5E94;&#x8BE5;&#x5B8C;&#x6210;&#x54EA;&#x4E9B;&#x529F;&#x80FD;&#xFF0C;&#x6709;&#x5229;&#x4E8E;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4EE5;&#x4E00;&#x79CD;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x7406;&#x89E3;&#x7CFB;&#x7EDF;&#x7684;&#x529F;&#x80FD;&#x9700;&#x6C42;&#x3002;&#x540C;&#x65F6;&#x4E5F;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x7528;&#x6237;&#x548C;&#x7CFB;&#x7EDF;&#x5206;&#x6790;&#x4EBA;&#x5458;&#x7684;&#x7406;&#x89E3;&#x5C3D;&#x91CF;&#x4E00;&#x81F4;,&#x4E3A;&#x7528;&#x6237;&#x548C;&#x7CFB;&#x7EDF;&#x5206;&#x6790;&#x4EBA;&#x5458;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x5927;&#x4F17;&#x7684;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x51C6;&#x786E;&#x5730;&#x628A;&#x63E1;&#x7CFB;&#x7EDF;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x80FD;&#x591F;&#x8282;&#x7701;&#x65F6;&#x95F4;&#xFF0C;&#x63D0;&#x9AD8;&#x6548;&#x7387;!</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/6ea09b745b28c709c0eb409affef8904706b281ebe4df16ce1ec5037a92dd6fa" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/4bbfd40eff4cdb3d4e837be2c35a0101540b838ee66f45eeae705e39ce7376a2" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x53C2;&#x8003;&#x8D44;&#x6599;&#xFF1A;  </p>
<p><a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x7528;&#x4F8B;</a></p>
<p>&#x53C2;&#x4E0E;&#x9636;&#x6BB5;&#xFF1A;  </p>
<p>&#x9700;&#x6C42;&#x5206;&#x6790;&#x9636;&#x6BB5;</p>
<hr>
<h2 id="&#x6D41;&#x7A0B;&#x56FE;"><a href="#&#x6D41;&#x7A0B;&#x56FE;" class="headerlink" title="&#x6D41;&#x7A0B;&#x56FE;"></a>&#x6D41;&#x7A0B;&#x56FE;</h2><p>&#x4EC0;&#x4E48;&#x662F;&#x6D41;&#x7A0B;&#x56FE;&#x5C31;&#x4E0D;&#x591A;&#x8BF4;&#x4E86;&#xFF0C;&#x9AD8;&#x4E2D;&#x6570;&#x5B66;&#x5FC5;&#x4FEE;&#x4E09;&#x5C31;&#x6709;&#x6559;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/4c11a079cbe96110bc10cce4c5656f7939c570e6575783c7023627ffa527d73c" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/716f31e6e34d1c6ad63f6f5fdf7cdbecc608e1cf7ef75c73cedcd9a2c071ff68" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x53C2;&#x4E0E;&#x9636;&#x6BB5;&#xFF1A;  </p>
<p>&#x9700;&#x6C42;&#x5206;&#x6790;&#x9636;&#x6BB5;</p>
<hr>
<h2 id="&#x90E8;&#x7F72;&#x56FE;"><a href="#&#x90E8;&#x7F72;&#x56FE;" class="headerlink" title="&#x90E8;&#x7F72;&#x56FE;"></a>&#x90E8;&#x7F72;&#x56FE;</h2><p>&#x90E8;&#x7F72;&#x56FE;(deployment diagram&#xFF0C;&#x914D;&#x7F6E;&#x56FE;)&#x662F;&#x7528;&#x6765;&#x663E;&#x793A;&#x7CFB;&#x7EDF;&#x4E2D;&#x8F6F;&#x4EF6;&#x548C;&#x786C;&#x4EF6;&#x7684;&#x7269;&#x7406;&#x67B6;&#x6784;&#x3002;&#x4ECE;&#x90E8;&#x7F72;&#x56FE;&#x4E2D;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5230;&#x8F6F;&#x4EF6;&#x548C;&#x786C;&#x4EF6;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x7269;&#x7406;&#x5173;&#x7CFB;&#x4EE5;&#x53CA;&#x5904;&#x7406;&#x8282;&#x70B9;&#x7684;&#x7EC4;&#x4EF6;&#x5206;&#x5E03;&#x60C5;&#x51B5;&#x3002;&#x4F7F;&#x7528;&#x90E8;&#x7F72;&#x56FE;&#x53EF;&#x4EE5;&#x663E;&#x793A;&#x8FD0;&#x884C;&#x65F6;&#x7CFB;&#x7EDF;&#x7684;&#x7ED3;&#x6784;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x4F20;&#x8FBE;&#x6784;&#x6210;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x786C;&#x4EF6;&#x548C;&#x8F6F;&#x4EF6;&#x5143;&#x7D20;&#x7684;&#x914D;&#x7F6E;&#x548C;&#x90E8;&#x7F72;&#x65B9;&#x5F0F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/7ce84ef963a1121c31e97896180691366ffd1788139a67093c4c28402929f949" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/a19f9de7ab5beb1e9c9f81ab511da9e4032c568a7d3ba947bfd28cd23e72ea18" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<hr>
<p>&#x63A5;&#x4E0B;&#x6765;&#x8FDB;&#x5165;&#x6982;&#x8981;&#x8BBE;&#x8BA1;&#x9636;&#x6BB5;</p>
<hr>
<h2 id="&#x7C7B;&#x56FE;"><a href="#&#x7C7B;&#x56FE;" class="headerlink" title="&#x7C7B;&#x56FE;"></a>&#x7C7B;&#x56FE;</h2><p>&#x7C7B;&#x56FE;:&#x7C7B;&#x56FE;(Class diagram)&#x662F;&#x663E;&#x793A;&#x4E86;&#x6A21;&#x578B;&#x7684;&#x9759;&#x6001;&#x7ED3;&#x6784;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x6A21;&#x578B;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x7C7B;&#x3001;&#x7C7B;&#x7684;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x4E0E;&#x5176;&#x4ED6;&#x7C7B;&#x7684;&#x5173;&#x7CFB;&#x7B49;&#x3002;  </p>
<p>&#x7C7B;&#x56FE;&#x6211;&#x591A;&#x5F97;&#x5F88;&#x5450;&#xFF0C;&#x5199;&#x4E86;&#x90A3;&#x4E48;&#x591A;&#x7BC7;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/563fdf6deaaeaf9fc3387a079ca0f1f899344c0cb7d84b807eba18d22194733e" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x53C2;&#x8003;&#x8D44;&#x6599;&#xFF1A;  </p>
<p><a href="/external_links/feb48874f33ea6bb2258a169118079df.html" target="blank" rel="noopener">UML&#x7C7B;&#x56FE;&#x5FEB;&#x901F;&#x4E0A;&#x624B;</a></p>
<p>&#x53C2;&#x4E0E;&#x9636;&#x6BB5;&#xFF1A;  </p>
<p>&#x6982;&#x8981;&#x8BBE;&#x8BA1;&#x9636;&#x6BB5;</p>
<hr>
<p>&#x63A5;&#x4E0B;&#x6765;&#x8FDB;&#x5165;&#x8BE6;&#x7EC6;&#x8BBE;&#x8BA1;&#x9636;&#x6BB5;</p>
<hr>
<h2 id="&#x65F6;&#x5E8F;&#x56FE;"><a href="#&#x65F6;&#x5E8F;&#x56FE;" class="headerlink" title="&#x65F6;&#x5E8F;&#x56FE;"></a>&#x65F6;&#x5E8F;&#x56FE;</h2><p>&#x65F6;&#x5E8F;&#x56FE;&#xFF1A;&#xFF08;Sequence Diagram&#xFF09;&#xFF0C;&#x53C8;&#x540D;&#x5E8F;&#x5217;&#x56FE;&#x3001;&#x5FAA;&#x5E8F;&#x56FE;&#xFF0C;&#x662F;&#x4E00;&#x79CD;UML&#x4EA4;&#x4E92;&#x56FE;&#x3002;&#x5B83;&#x901A;&#x8FC7;&#x63CF;&#x8FF0;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x65F6;&#x95F4;&#x987A;&#x5E8F;&#x663E;&#x793A;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x52A8;&#x6001;&#x534F;&#x4F5C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/54f62492747b65dec629bf4315ed7036dfbd57688d6330c2c356a4d6f74574d8" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<hr>
<p>&#x7ED3;</p>
<p>&#x5EFA;&#x8BAE;&#x6536;&#x85CF;&#xFF0C;&#x5212;&#x7740;&#x5212;&#x7740;&#x53EF;&#x80FD;&#x5C31;&#x627E;&#x4E0D;&#x5230;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/27c8385f504a963cceb8cdf097e73437fe0ce7cb70fe08d7a4e81475ebda9b81" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/6433dc4ac9e9fb46cb497b79e4fcf307.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6936537969780064269.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6936537969780064269.html" itemprop="url">基于SpringBoot+SpringSecurity+JW</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-06T21:54:08+08:00">
                2021-03-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x73AF;&#x5883;&#xFF1A;Java8+SpringBoot 2.3.8+Spring Security 5.3.6 + java-jwt 3.12.0</p>
<p>&#x4E3B;&#x8981;&#x662F;&#x5229;&#x7528;&#x8FC7;&#x6EE4;&#x5668;&#x62E6;&#x622A;(Filter)</p>
<p>&#x5B9E;&#x73B0;&#x4E86;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6CE8;&#x518C;&#x767B;&#x5F55;&#x7528;&#x6237;&#xFF0C;&#x4F7F;&#x7528;Spring Security&#x7ED3;&#x5408;JWT&#x5B9E;&#x73B0;&#x5B89;&#x5168;&#x8BA4;&#x8BC1;&#x3002;</p>
<p>&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x7528;json&#x63D0;&#x4EA4;&#x6570;&#x636E;</p>
</blockquote>
<h3 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h3><blockquote>
<p>Spring Security&#x662F;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x3001;&#x9AD8;&#x5EA6;&#x53EF;&#x5B9A;&#x5236;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x4E13;&#x6CE8;&#x4E8E;&#x5411;Java&#x5E94;&#x7528;&#x63D0;&#x4F9B;**&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;(authentication )<strong>&#x548C;</strong>&#x6388;&#x6743;(authorization)**&#x7684;&#x6846;&#x67B6;&#x3002;</p>
</blockquote>
<h4 id="authentication&#x4E0E;authorization"><a href="#authentication&#x4E0E;authorization" class="headerlink" title="authentication&#x4E0E;authorization"></a>authentication&#x4E0E;authorization</h4><blockquote>
<p>authentication&#x4E3B;&#x8981;&#x662F;&#x786E;&#x5B9A;&#x4F60;&#x662F;&#x8C01;&#xFF0C;&#x800C;authorization&#x662F;&#x53EF;&#x4EE5;&#x8D4B;&#x4E88;&#x4F60;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;&#xFF0C;&#x505A;&#x67D0;&#x4E9B;&#x4E8B;&#x7684;&#x6743;&#x5229;&#x3002;</p>
</blockquote>
<h3 id="JWT-JSON-Web-Token"><a href="#JWT-JSON-Web-Token" class="headerlink" title="JWT(JSON Web Token)"></a>JWT(JSON Web Token)</h3><blockquote>
<p>JWT&#x4E3B;&#x8981;&#x662F;&#x7528;&#x6765;&#x786E;&#x5B9A;&#x7528;&#x6237;&#x7684;&#x8EAB;&#x4EFD;&#x4FE1;&#x606F;&#x3002;&#x5728;&#x7528;&#x6237;&#x7B2C;&#x4E00;&#x6B21;&#x643A;&#x5E26;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x5668;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x7B7E;&#x53D1;&#x4E00;&#x4E2A;token&#x7ED9;&#x7528;&#x6237;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x7528;&#x6237;&#x643A;&#x5E26;&#x7740;&#x8FD9;&#x4E2A;token&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5C31;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x518D;&#x6B21;&#x767B;&#x5F55;&#x3002;</p>
</blockquote>
<p>&#x5177;&#x4F53;&#x53EF;&#x53C2;&#x8003;&#x8BE5;&#x535A;&#x5BA2;<br><a href="/external_links/35c4c71fdf1fc37e9c35bfbf51ce0dd0.html" target="blank" rel="noopener">&#x4EC0;&#x4E48;&#x662F; JWT &#x2013; JSON WEB TOKEN</a></p>
<h2 id="&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;"><a href="#&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;" class="headerlink" title="&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;"></a>&#x8868;&#x6570;&#x636E;&#x7ED3;&#x6784;</h2><p>&#x672C;&#x6B21;&#x7528;&#x4F8B;&#x91C7;&#x7528;MongoDB&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x73B0;&#x7684;&#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x968F;&#x610F;:)</p>
<h3 id="tb-user"><a href="#tb-user" class="headerlink" title="tb_user"></a>tb_user</h3><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/89a40c1abfe23cf6aae27771d1ff3411e8e68c33fc961e208d3e157475f69d04" alt></p>
<h3 id="tb-role"><a href="#tb-role" class="headerlink" title="tb_role"></a>tb_role</h3><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7f6300c6b71d0df4540cedb3e7c51b8ac269b160ab1fefb1a63e9524c4c409a0" alt></p>
<h3 id="tb-resource"><a href="#tb-resource" class="headerlink" title="tb_resource"></a>tb_resource</h3><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d7727d19bfa65a7412747584d58acad88f281de4cab40c0a8c4b6313c5c68d89" alt></p>
<h3 id="tb-role-res"><a href="#tb-role-res" class="headerlink" title="tb_role_res"></a>tb_role_res</h3><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c11b983677b92c755cb628161acce714f7f42f6c3e2cf7ac5b2a33d617325238" alt></p>
<h2 id="SpringBoot"><a href="#SpringBoot" class="headerlink" title="SpringBoot"></a>SpringBoot</h2><p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;SpringBoot&#x9879;&#x76EE;</p>
<p>&#x672C;&#x9879;&#x76EE;&#x4F7F;&#x7528;&#x4E86;<strong>lombok</strong>&#x63D2;&#x4EF6;</p>
<p><code>@Data</code>&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x751F;&#x6210;<strong>getter</strong>&#x548C;<strong>setter</strong></p>
<p><code>@AllArgsConstructor</code>&#x751F;&#x6210;&#x5168;&#x53C2;&#x6784;&#x9020;&#x51FD;&#x6570;</p>
<p><code>@NoArgsConstructor</code>&#x751F;&#x6210;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x51FD;&#x6570;</p>
<p><code>@Document(value = &quot;tb_user&quot;)</code>&#x5173;&#x8054;MongoDB&#x7684;&#x8868;</p>
<p><code>@Id</code>&#x58F0;&#x660E;&#x8868;&#x7684;&#x4E3B;&#x952E;</p>
<blockquote>
<ul>
<li>&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x4F7F;&#x7528;<strong>lombok</strong>&#x63D2;&#x4EF6;&#xFF0C;&#x6309;&#x7167;&#x5F80;&#x5E38;&#x5199;&#x6CD5;&#x5373;&#x53EF;</li>
<li>&#x4E0E;&#x8868;&#x7684;&#x5173;&#x8054;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x6309;&#x7167;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x5E93;&#x7684;&#x65B9;&#x6CD5;&#x64CD;&#x4F5C;</li>
</ul>
</blockquote>
<p>&#x6709;&#x5173;&#x7684;Json&#x64CD;&#x4F5C;&#x4F7F;&#x7528;&#x4E86;fastjson</p>
<p><strong>maven</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;1.2.73&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><p>&#x5B8C;&#x6574;&#x7684;pom.xml&#x6587;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0</span><br><span class="line">          https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.3.8.RELEASE&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;groupId&gt;com.example&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;demo&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;name&gt;demo&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!-- jwt --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.12.0&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;!-- json --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.73&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">            &lt;optional&gt;true&lt;/optional&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;</span><br><span class="line">                &lt;/exclusion&gt;</span><br><span class="line">            &lt;/exclusions&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;excludes&gt;</span><br><span class="line">                        &lt;exclude&gt;</span><br><span class="line">                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">                        &lt;/exclude&gt;</span><br><span class="line">                    &lt;/excludes&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<h3 id="entity"><a href="#entity" class="headerlink" title="entity"></a>entity</h3><p><strong>UserDo.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.entity;</span><br><span class="line"></span><br><span class="line">import lombok.AllArgsConstructor;</span><br><span class="line">import lombok.Data;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line">import org.springframework.data.annotation.Id;</span><br><span class="line">import org.springframework.data.mongodb.core.mapping.Document;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@Document(value = &quot;tb_user&quot;)</span><br><span class="line">public class UserDo {</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    private String id;          //Id</span><br><span class="line">    private String username;    //&#x7528;&#x6237;&#x540D;</span><br><span class="line">    private String password;    //&#x5BC6;&#x7801;</span><br><span class="line">    private String role_name;   //&#x89D2;&#x8272;&#x540D;</span><br><span class="line"></span><br><span class="line">    public UserDo(String username, String password, String role_name){</span><br><span class="line">        this.username = username;</span><br><span class="line">        this.password = password;</span><br><span class="line">        this.role_name = role_name;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>RoleDo.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.entity;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line">import org.springframework.data.annotation.Id;</span><br><span class="line">import org.springframework.data.mongodb.core.mapping.Document;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@Document(value = &quot;tb_role&quot;)</span><br><span class="line">public class RoleDo {</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    private Integer id;     //Id</span><br><span class="line">    private String name;    //&#x89D2;&#x8272;&#x540D;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>ResourceDo.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.entity;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line">import org.springframework.data.annotation.Id;</span><br><span class="line">import org.springframework.data.mongodb.core.mapping.Document;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@Document(value = &quot;tb_resource&quot;)</span><br><span class="line">public class ResourceDo {</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    private Integer id;     //Id</span><br><span class="line">    private String name;    //&#x8D44;&#x6E90;&#x540D;</span><br><span class="line">    private String desc;    //&#x63CF;&#x8FF0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>RoleResourceDo.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.entity;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line">import org.springframework.data.annotation.Id;</span><br><span class="line">import org.springframework.data.mongodb.core.mapping.Document;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">@Document(value = &quot;tb_role_res&quot;)</span><br><span class="line">public class RoleResourceDo {</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    private String id;          //Id</span><br><span class="line">    private String role_name;   //&#x89D2;&#x8272;&#x540D;</span><br><span class="line">    private String res_name;    //&#x8D44;&#x6E90;&#x540D;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="dao"><a href="#dao" class="headerlink" title="dao"></a>dao</h3><p><strong>UserDao.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.dao;</span><br><span class="line"></span><br><span class="line">import com.example.demo.entity.UserDo;</span><br><span class="line">import org.springframework.data.mongodb.repository.MongoRepository;</span><br><span class="line"></span><br><span class="line">public interface UserDao extends MongoRepository&lt;UserDo,String&gt; {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x67E5;&#x8BE2;&#x7528;&#x6237;</span><br><span class="line">     * @param username  &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @return  {@code UserDo} &#x7528;&#x6237;&#x5BF9;&#x8C61;</span><br><span class="line">     */</span><br><span class="line">    UserDo getUserDoByUsername(String username);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="service"><a href="#service" class="headerlink" title="service"></a>service</h3><p><strong>UserService.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.service;</span><br><span class="line"></span><br><span class="line">import com.example.demo.entity.UserDo;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">public interface UserService {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x83B7;&#x53D6;&#x7528;&#x6237;</span><br><span class="line">     * @param username  &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @return &#x7528;&#x6237;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x8FD4;&#x56DE;{@code UserDo}&#x7528;&#x6237;&#x5BF9;&#x8C61;&#xFF0C;</span><br><span class="line">     *          &#x5426;&#x5219;&#x8FD4;&#x56DE;{@code null}</span><br><span class="line">     */</span><br><span class="line">    UserDo getUserByUsername(String username);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x83B7;&#x53D6;&#x7528;&#x6237;&#x89D2;&#x8272;</span><br><span class="line">     * @param username  &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @return {@code String[]} &#x89D2;&#x8272;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;</span><br><span class="line">     */</span><br><span class="line">    String[] getRolesByUser(String username);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x65B0;&#x7528;&#x6237;</span><br><span class="line">     * @param username &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @param password &#x5BC6;&#x7801;</span><br><span class="line">     * @return &#x521B;&#x5EFA;&#x6210;&#x529F;&#x8FD4;&#x56DE;{@code UserDo}</span><br><span class="line">     */</span><br><span class="line">    UserDo addUser(String username, String password);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x83B7;&#x53D6;&#x5168;&#x90E8;&#x7528;&#x6237;&#x5217;&#x8868;</span><br><span class="line">     * @return {@code List&lt;UserDo&gt;} &#x7528;&#x6237;&#x5217;&#x8868;</span><br><span class="line">     */</span><br><span class="line">    List&lt;UserDo&gt; getUserList();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;Header&#x4E2D;&#x7684;token&#x83B7;&#x53D6;&#x7528;&#x6237;&#x4FE1;&#x606F;</span><br><span class="line">     * @return {@code UserDo} &#x7528;&#x6237;&#x4FE1;&#x606F;</span><br><span class="line">     */</span><br><span class="line">    UserDo getUserByToken();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="impl"><a href="#impl" class="headerlink" title="impl"></a>impl</h4><p><strong>UserServiceImpl.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.service.impl;</span><br><span class="line"></span><br><span class="line">import com.example.demo.dao.UserDao;</span><br><span class="line">import com.example.demo.entity.UserDo;</span><br><span class="line">import com.example.demo.service.UserService;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line">import org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line">import org.springframework.security.core.userdetails.User;</span><br><span class="line">import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class UserServiceImpl implements UserService {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserDao userDao;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public UserDo getUserByUsername(String username) {</span><br><span class="line">        UserDo userDo = userDao.getUserDoByUsername(username);</span><br><span class="line">        if(userDo==null) return null;</span><br><span class="line">        return userDo;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String[] getRolesByUser(String username) {</span><br><span class="line">        UserDo userDo = getUserByUsername(username);</span><br><span class="line">        String role_tmp = userDo.getRole_name();</span><br><span class="line">        String[] roles = role_tmp.split(&quot;,&quot;);</span><br><span class="line">        return roles;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public UserDo addUser(String username, String password) {</span><br><span class="line">        //&#x4F7F;&#x7528;Spring Security&#x63D0;&#x4F9B;&#x7684;BCryptPasswordEncoder&#x52A0;&#x5BC6;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x5B58;&#x5165;&#x6570;&#x636E;&#x5E93;</span><br><span class="line">        //&#x9ED8;&#x8BA4;&#x65B0;&#x52A0;&#x5165;&#x7684;&#x7528;&#x6237;&#x89D2;&#x8272;&#x4E3A;user</span><br><span class="line">        return userDao.save(new UserDo(username, new BCryptPasswordEncoder().encode(password),&quot;user&quot;));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;UserDo&gt; getUserList() {</span><br><span class="line">        return userDao.findAll();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public UserDo getUserByToken() {</span><br><span class="line">        UsernamePasswordAuthenticationToken authentication = (UsernamePasswordAuthenticationToken) 		     SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        User user = (User) authentication.getPrincipal();</span><br><span class="line">        return userDao.getUserDoByUsername(user.getUsername());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h3><p><strong>UserController.java</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.controller;</span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line">import com.example.demo.common.CodeMsg;</span><br><span class="line">import com.example.demo.common.Result;</span><br><span class="line">import com.example.demo.service.UserService;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">import org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">public class UserController {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x83B7;&#x53D6;&#x5168;&#x90E8;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x5217;&#x8868;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(&quot;/admin/getUserList&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Result getUserList(){</span><br><span class="line">        return new Result(CodeMsg.SUCCESS,userService.getUserList());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;Header&#x4E2D;&#x7684;token&#x83B7;&#x53D6;&#x7528;&#x6237;&#x4FE1;&#x606F;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @RequestMapping(&quot;/user/info&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Result getUserInfo(){</span><br><span class="line">        return new Result(CodeMsg.SUCCESS,userService.getUserByToken());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#x521B;&#x5EFA;&#x65B0;&#x7528;&#x6237;</span><br><span class="line">     * @param jsonObject username,password</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @PostMapping(&quot;/register&quot;)</span><br><span class="line">    @ResponseBody</span><br><span class="line">    public Result register(@RequestBody JSONObject jsonObject){</span><br><span class="line">        String username = jsonObject.getString(&quot;username&quot;);</span><br><span class="line">        String password = jsonObject.getString(&quot;password&quot;);</span><br><span class="line">        return new Result(CodeMsg.REGISTER_SUCCESS,userService.addUser(username,password));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="Spring-Security-1"><a href="#Spring-Security-1" class="headerlink" title="Spring Security"></a>Spring Security</h2><p>Spring Security&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7684;Filter&#xFF08;&#x8FC7;&#x6EE4;&#x5668;&#xFF09;&#x6765;&#x5B9E;&#x73B0;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x7684;</p>
<h3 id="Filter&#x7684;&#x987A;&#x5E8F;&#x4E0E;&#x4F5C;&#x7528;"><a href="#Filter&#x7684;&#x987A;&#x5E8F;&#x4E0E;&#x4F5C;&#x7528;" class="headerlink" title="Filter&#x7684;&#x987A;&#x5E8F;&#x4E0E;&#x4F5C;&#x7528;"></a>Filter&#x7684;&#x987A;&#x5E8F;&#x4E0E;&#x4F5C;&#x7528;</h3><p>&#x4EE5;&#x4E0B;&#x662F;&#x9ED8;&#x8BA4;&#x7684;Filter&#x987A;&#x5E8F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/69b8d4b704cd64c3f70dd2fb27ebd5f38e889d1f1946b67b775b9185e5709b50" alt></p>
<p><a href="/external_links/51030f96a5afd0afb6b6c906f04bf956.html" target="blank" rel="noopener">&#x56FE;&#x7247;&#x6765;&#x6E90;</a></p>
<p>&#x5728;debug&#x6A21;&#x5F0F;&#x4E0B;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FC7;&#x6EE4;&#x5668;&#x6267;&#x884C;&#x7684;&#x987A;&#x5E8F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/182b898cc7cb630b0145699d65d6df1940497e2477b1f9486b6d4d7000087d94" alt></p>
<p>&#x5176;&#x4E2D;3&#xFF0C;4&#x662F;&#x6211;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x7528;&#x6765;&#x6DFB;&#x52A0;&#x8FC7;&#x6EE4;&#x5668;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public HttpSecurity addFilterAfter(Filter filter, Class&lt;? extends Filter&gt; afterFilter);	   //&#x5728;&#x67D0;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#x540E;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;</span><br><span class="line">public HttpSecurity addFilterBefore(Filter filter, Class&lt;? extends Filter&gt; beforeFilter);  //&#x5728;&#x67D0;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#x524D;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;</span><br><span class="line">//&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x8BE5;&#x8FC7;&#x6EE4;&#x5668;&#x5FC5;&#x987B;&#x7EE7;&#x627F;filters&#x4E2D;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BE5;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x8FC7;&#x6EE4;&#x5668;</span><br><span class="line">public HttpSecurity addFilter(Filter filter)				</span><br><span class="line">//&#x5728;&#x67D0;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x540C;&#x4E00;&#x4F4D;&#x7F6E;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#xFF0C;&#x4F46;&#x8BE5;&#x8FC7;&#x6EE4;&#x5668;&#x4E0D;&#x4F1A;&#x8986;&#x76D6;&#x539F;&#x6709;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#xFF1B;&#x5E76;&#x4E14;&#x8FD9;&#x4E24;&#x4E2A;&#x8FC7;&#x6EE4;&#x5668;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;</span><br><span class="line">public HttpSecurity addFilterAt(Filter filter, Class&lt;? extends Filter&gt; atFilter);</span><br></pre></td></tr></table></figure>

<h4 id="filters"><a href="#filters" class="headerlink" title="filters"></a>filters</h4><ul>
<li><strong>ChannelProcessingFilter</strong></li>
<li><strong>SecurityContextPersistenceFilter</strong></li>
<li><strong>LogoutFilter</strong></li>
<li><strong>X509AuthenticationFilter</strong></li>
<li><strong>AbstractPreAuthenticatedProcessingFilter</strong></li>
<li><strong>CasAuthenticationFilter</strong></li>
<li><strong>UsernamePasswordAuthenticationFilter</strong></li>
<li><strong>OpenIDAuthenticationFilter</strong></li>
<li><strong>DefaultLoginPageGeneratingFilter</strong></li>
<li><strong>DefaultLogoutPageGeneratingFilter</strong></li>
<li><strong>ConcurrentSessionFilter</strong></li>
<li><strong>DigestAuthenticationFilter</strong></li>
<li><strong>BearerTokenAuthenticationFilter</strong></li>
<li><strong>BasicAuthenticationFilter</strong></li>
<li><strong>RequestCacheAwareFilter</strong></li>
<li><strong>SecurityContextHolderAwareRequestFilter</strong></li>
<li><strong>JaasApiIntegrationFilter</strong></li>
<li><strong>RememberMeAuthenticationFilter</strong></li>
<li><strong>AnonymousAuthenticationFilter</strong></li>
<li><strong>SessionManagementFilter</strong></li>
<li><strong>ExceptionTranslationFilter</strong></li>
<li><strong>FilterSecurityInterceptor</strong></li>
<li><strong>SwitchUserFilter</strong></li>
</ul>
<p><a href="/external_links/32622e0f500081cb2a48d4ca57886415.html" target="blank" rel="noopener">Spring Security Web 5.1.2 &#x6E90;&#x7801;&#x89E3;&#x6790; &#x2013; &#x5B89;&#x5168;&#x76F8;&#x5173;Filter&#x6E05;&#x5355;</a></p>
<p><a href="/external_links/2d02435e68a319afd87a24ac2470b75d.html" target="blank" rel="noopener">SpringSecurity&#x8FC7;&#x6EE4;&#x5668;&#x987A;&#x5E8F;</a></p>
<h3 id="&#x8BA4;&#x8BC1;&#x6D41;&#x7A0B;"><a href="#&#x8BA4;&#x8BC1;&#x6D41;&#x7A0B;" class="headerlink" title="&#x8BA4;&#x8BC1;&#x6D41;&#x7A0B;"></a>&#x8BA4;&#x8BC1;&#x6D41;&#x7A0B;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e9b9d97038383557bf9a98ebe60421cf78a3f9a47f8bdc78bfd8e35d074178de" alt></p>
<p><a href="/external_links/7ba59f629d279e323ae62eebb03a0a69.html" target="blank" rel="noopener">&#x56FE;&#x7247;&#x6765;&#x6E90;</a></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f54927a076ce931066880e3ad90f53bfe136618f06513997d0b7cc675163be5f" alt></p>
<p><a href="/external_links/aa3750abad93b7c744722ce20f67acf1.html" target="blank" rel="noopener">&#x56FE;&#x7247;&#x6765;&#x6E90;</a></p>
<p>&#x4EE5;&#x4E0A;&#x4E24;&#x5F20;&#x56FE;&#x5F88;&#x6E05;&#x6670;&#x5730;&#x5C55;&#x73B0;&#x4E86;Spring Security&#x7684;&#x4E3B;&#x8981;&#x8BA4;&#x8BC1;&#x6D41;&#x7A0B;&#x3002;</p>
<p>&#x5728;&#x63A5;&#x6536;&#x5230;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x5148;&#x7ECF;&#x8FC7;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x3002;</p>
<p>&#x5F53;&#x88AB;<code>UsernamePasswordAuthenticationFilter</code>&#x62E6;&#x622A;&#x5230;&#x540E;&#xFF0C;&#x8C03;&#x7528;&#x5176;<code>attemptAuthentication(request&#xFF0C;response)</code>&#x65B9;&#x6CD5;&#xFF0C;&#x83B7;&#x53D6;&#x5230;username&#x548C;password&#x540E;&#xFF0C;&#x5C01;&#x88C5;&#x6210;<code>UsernamePasswordAuthenticationToken</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(username,password);</span><br></pre></td></tr></table></figure>

<p>&#x518D;&#x8BA9;<code>AuthenticationManager</code>&#x8C03;&#x7528;<code>authenticate(authentication)</code>&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;return this.getAuthenticationManager().authenticate(authenticationToken);</span><br></pre></td></tr></table></figure>

<p><code>AuthenticationManager</code>&#x7684;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;<code>ProviderManager</code>,&#x5176;&#x5185;&#x90E8;&#x7EF4;&#x62A4;&#x7740;&#x4E00;&#x4E2A;<code>AuthenticationProvider</code>&#x7684;&#x5217;&#x8868;&#x3002;&#x8FD9;&#x4E2A;&#x5217;&#x8868;&#x4E2D;&#x5B58;&#x653E;&#x7684;&#x5C31;&#x662F;&#x5C31;&#x662F;&#x5404;&#x79CD;&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;&#x3002;&#x5F53;&#x8C03;&#x7528;<code>ProviderManager</code>&#x7684;<code>authenticate(authentication)</code>&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4F1A;&#x904D;&#x5386;&#x8BE5;&#x5217;&#x8868;&#x3002;</p>
<p>&#x5F53;&#x8BA4;&#x8BC1;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7ECF;&#x8FC7;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x5BF9;&#x8C61;<code>Authentication</code>,&#x5E76;&#x4E14;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x540E;&#x9762;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x6CD5;&#x3002;&#x82E5;&#x5168;&#x90E8;&#x9A8C;&#x8BC1;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x4F1A;&#x629B;&#x51FA;<code>AuthenticationException</code>&#x5F02;&#x5E38;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;//&#x90E8;&#x5206;ProviderManager&#x7684;authenticate(Authentication authentication)&#x65B9;&#x6CD5;&#x6E90;&#x4EE3;&#x7801;</span><br><span class="line">for (AuthenticationProvider provider : getProviders()) {	//&#x904D;&#x5386;&#x8BE5;&#x5217;&#x8868;</span><br><span class="line">		if (!provider.supports(toTest)) {</span><br><span class="line">			continue;</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		if (debug) {</span><br><span class="line">			logger.debug(&quot;Authentication attempt using &quot;</span><br><span class="line">					+ provider.getClass().getName());</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		try {</span><br><span class="line">			result = provider.authenticate(authentication);		//&#x8C03;&#x7528;&#x8BA4;&#x8BC1;&#x65B9;&#x6CD5;</span><br><span class="line"></span><br><span class="line">			if (result != null) {</span><br><span class="line">				copyDetails(authentication, result);</span><br><span class="line">				break;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">		catch (AccountStatusException | InternalAuthenticationServiceException e) {</span><br><span class="line">			prepareException(e, authentication);</span><br><span class="line">			// SEC-546: Avoid polling additional providers if auth failure is due to</span><br><span class="line">			// invalid account status</span><br><span class="line">			throw e;</span><br><span class="line">		} catch (AuthenticationException e) {</span><br><span class="line">			lastException = e;</span><br><span class="line">		}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>AuthenticationProvider</code>&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x73B0;<code>AbstractUserDetailsAuthenticationProvider</code>&#x4F1A;&#x54CD;&#x5E94;&#x4F20;&#x8FC7;&#x6765;&#x7684;<code>UsernamePasswordAuthenticationToken</code>&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x8BF7;&#x6C42;&#x3002;</p>
<p><code>AbstractUserDetailsAuthenticationProvider</code>&#x8C03;&#x7528;<code>authenticate(authentication)</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6839;&#x636E;&#x4F20;&#x8FC7;&#x6765;&#x7684;<code>Authentication</code>&#x83B7;&#x53D6;&#x7528;&#x6237;&#x540D;&#x540E;&#xFF0C;&#x4ECE;&#x7F13;&#x5B58;&#x6216;&#x8005;&#x8C03;&#x7528;<code>retrieveUser(username, authentication)</code>&#x65B9;&#x6CD5;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x7531;<code>AbstractUserDetailsAuthenticationProvider</code>&#x7684;&#x5B50;&#x7C7B;<code>DaoAuthenticationProvider</code>&#x5B9E;&#x73B0;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x8C03;&#x7528;&#x4E86;<code>UserDetailsService</code>&#x7684;<code>loadUserByUsername(username)</code>&#x65B9;&#x6CD5;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4F1A;&#x91CD;&#x5199;&#x8BE5;&#x65B9;&#x6CD5;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x53D6;&#x51FA;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x5728;&#x83B7;&#x53D6;&#x4E86;&#x6B63;&#x786E;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;<code>UserDetails</code>&#x548C;&#x6839;&#x636E;&#x524D;&#x9762;&#x4F20;&#x6570;&#x636E;&#x8FC7;&#x6765;&#x540E;&#x5C01;&#x88C5;&#x7684;<code>UsernamePasswordAuthenticationToken</code>&#x540E;&#xFF0C;&#x8C03;&#x7528;<code>DaoAuthenticationProvider</code>&#x5B9E;&#x73B0;&#x7684;<code>additionalAuthenticationChecks(userDetails,authentication)</code>&#x6BD4;&#x8F83;&#x4E24;&#x8005;&#x7684;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x4E00;&#x81F4;&#x5B8C;&#x6210;&#x9A8C;&#x8BC1;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/29f371138f04b1c88d149dd11e96b8a08834493e6759a444decf9eedd273b822" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;//retrieveUser&#x65B9;&#x6CD5;&#x6E90;&#x7801;</span><br><span class="line">protected final UserDetails retrieveUser(String username,</span><br><span class="line">			UsernamePasswordAuthenticationToken authentication)</span><br><span class="line">			throws AuthenticationException {</span><br><span class="line">		prepareTimingAttackProtection();</span><br><span class="line">		try {</span><br><span class="line">            //&#x6B64;&#x5904;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8C03;&#x7528;&#x4E86;UserDetailsService().loadUserByUsername(username)</span><br><span class="line">			UserDetails loadedUser = this.getUserDetailsService().loadUserByUsername(username);</span><br><span class="line">			if (loadedUser == null) {</span><br><span class="line">				throw new InternalAuthenticationServiceException(</span><br><span class="line">						&quot;UserDetailsService returned null, which is an interface contract violation&quot;);</span><br><span class="line">			}</span><br><span class="line">			return loadedUser;</span><br><span class="line">		}</span><br><span class="line">		catch (UsernameNotFoundException ex) {</span><br><span class="line">			mitigateAgainstTimingAttack(authentication);</span><br><span class="line">			throw ex;</span><br><span class="line">		}</span><br><span class="line">		catch (InternalAuthenticationServiceException ex) {</span><br><span class="line">			throw ex;</span><br><span class="line">		}</span><br><span class="line">		catch (Exception ex) {</span><br><span class="line">			throw new InternalAuthenticationServiceException(ex.getMessage(), ex);</span><br><span class="line">		}</span><br><span class="line">	}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x56FE;&#x662F;<code>AuthenticationManager</code>&#x548C;<code>AuthenticationProvider</code>&#x7B49;&#x51E0;&#x4E2A;&#x7C7B;&#x7684;&#x5173;&#x7CFB;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b3f229370fa4dd989be48b8f2600db7fd7461902b3604295242c37e2d3c992e0" alt></p>
<h3 id="Json&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x767B;&#x5F55;"><a href="#Json&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x767B;&#x5F55;" class="headerlink" title="Json&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x767B;&#x5F55;"></a>Json&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x767B;&#x5F55;</h3><p>&#x56E0;&#x4E3A;Spring Security&#x662F;&#x9ED8;&#x8BA4;&#x901A;&#x8FC7;form&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x8981;&#x901A;&#x8FC7;URL&#x8BBF;&#x95EE;&#x540E;&#x53F0;&#x5E76;&#x63D0;&#x4EA4;Json&#x6570;&#x636E;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;Spring Security&#x7684;&#x914D;&#x7F6E;&#x3002;</p>
<p>&#x5728;&#x67E5;&#x9605;&#x8D44;&#x6599;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x53D1;&#x73B0;&#x5728;&#x6539;&#x5199;&#x767B;&#x5F55;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x65F6;&#xFF0C;&#x6709;&#x7684;&#x662F;&#x4ECE;<code>UsernamePasswordAuthenticationFilter</code>&#x7EE7;&#x627F;&#xFF0C;&#x6709;&#x7684;&#x662F;&#x4ECE;<code>AbstractAuthenticationProcessingFilter</code>&#x7EE7;&#x627F;&#x3002;</p>
<h4 id="UsernamePasswordAuthenticationFilter&#x548C;AbstractAuthenticationProcessingFilter&#x7684;&#x533A;&#x522B;"><a href="#UsernamePasswordAuthenticationFilter&#x548C;AbstractAuthenticationProcessingFilter&#x7684;&#x533A;&#x522B;" class="headerlink" title="UsernamePasswordAuthenticationFilter&#x548C;AbstractAuthenticationProcessingFilter&#x7684;&#x533A;&#x522B;"></a>UsernamePasswordAuthenticationFilter&#x548C;AbstractAuthenticationProcessingFilter&#x7684;&#x533A;&#x522B;</h4><p>&#x9ED8;&#x8BA4;&#x662F;&#x4F7F;&#x7528;<code>UsernamePasswordAuthenticationFilter</code>&#x6765;&#x62E6;&#x622A;&#x8868;&#x5355;&#x767B;&#x5F55;&#x8BF7;&#x6C42;&#x7684;&#xFF0C;&#x800C;<code>UsernamePasswordAuthenticationFilter</code>&#x662F;&#x4ECE;<code>AbstractAuthenticationProcessingFilter</code>&#x7EE7;&#x627F;&#x800C;&#x6765;&#x7684;&#x3002;</p>
<h5 id="UsernamePasswordAuthenticationFilter"><a href="#UsernamePasswordAuthenticationFilter" class="headerlink" title="UsernamePasswordAuthenticationFilter"></a>UsernamePasswordAuthenticationFilter</h5><p>&#x662F;&#x7528;&#x6765;&#x5904;&#x7406;&#x8868;&#x5355;&#x767B;&#x5F55;&#x7684;&#xFF0C;&#x9ED8;&#x8BA4;&#x767B;&#x5F55;URL&#x4E3A;<code>/login</code>&#xFF1B;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF0C;&#x4E5F;&#x6709;&#x9ED8;&#x8BA4;&#x7684;&#x53C2;&#x6570;&#x540D;&#xFF0C;&#x5206;&#x522B;&#x4E3A;<code>username</code>&#x548C;<code>password</code>&#x3002;&#x8981;&#x4FEE;&#x6539;&#x5B83;&#x7684;&#x8BA4;&#x8BC1;&#x65B9;&#x6CD5;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x901A;&#x8FC7;&#x91CD;&#x5199; <code>attemptAuthentication(request&#xFF0C;response)</code>&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response);</span><br></pre></td></tr></table></figure>

<p>&#x82E5;&#x662F;&#x4F7F;&#x7528;&#x8868;&#x5355;&#x767B;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x7EE7;&#x627F;<code>WebSecurityConfigurerAdapter</code>&#x7684;&#x7C7B;&#x91CC;&#x4FEE;&#x6539;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">@EnableWebSecurity</span><br><span class="line">public class WebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(HttpSecurity http) throws Exception {</span><br><span class="line">        //&#x914D;&#x7F6E;&#x767B;&#x5F55;&#x8BF7;&#x6C42;&#x76F8;&#x5173;&#x5185;&#x5BB9;</span><br><span class="line">        http.formLogin()</span><br><span class="line">                .usernameParameter(&quot;user&quot;)</span><br><span class="line">                .passwordParameter(&quot;pswd&quot;)</span><br><span class="line">                .loginPage(&quot;/toLogin&quot;)      //&#x767B;&#x5F55;&#x9875;</span><br><span class="line">                .loginProcessingUrl(&quot;/login&quot;);   //&#x767B;&#x5F55;&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x5730;&#x5740;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x82E5;&#x662F;&#x4F7F;&#x7528;Json&#x4F20;&#x9012;&#x6570;&#x636E;&#x767B;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;<a href="/external_links/8a95f9b22507525a4d4b60607527ea2e.html" target="blank" rel="noopener">&#x53C2;&#x8003;</a>&#x91CC;&#x7684;JwtLoginFilter</p>
<h5 id="AbstractAuthenticationProcessingFilter"><a href="#AbstractAuthenticationProcessingFilter" class="headerlink" title="AbstractAuthenticationProcessingFilter"></a>AbstractAuthenticationProcessingFilter</h5><p>&#x662F;&#x57FA;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;HTTP&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;</p>
<p>&#x7EE7;&#x627F;&#x8BE5;&#x7C7B;&#x65F6;&#xFF0C;&#x4E3B;&#x8981;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E09;&#x4E2A;&#x5730;&#x65B9;</p>
<ol>
<li>&#x8BBE;&#x7F6E;authenticationManager&#x5C5E;&#x6027;&#xFF0C;&#x662F;&#x7528;&#x6765;&#x5904;&#x7406;&#x8EAB;&#x4EFD;&#x8BA4;&#x8BC1;&#x8BF7;&#x6C42;&#x7684;token</li>
<li>&#x9700;&#x8981;&#x8BBE;&#x7F6E;RequestMatcher&#x8BBE;&#x7F6E;&#x62E6;&#x622A;&#x767B;&#x5F55;&#x7528;&#x7684;URL</li>
<li>&#x5B9E;&#x73B0;<code>attemptAuthentication()</code>&#x65B9;&#x6CD5;</li>
</ol>
<h6 id="AuthenticationSuccessHandler"><a href="#AuthenticationSuccessHandler" class="headerlink" title="AuthenticationSuccessHandler"></a>AuthenticationSuccessHandler</h6><p>&#x5F53;&#x9A8C;&#x8BC1;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;Handler&#xFF0C;&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;<code>SavedRequestAwareAuthenticationSuccessHandler</code>&#x3002;&#x5B83;&#x5C06;&#x7528;&#x6237;&#x91CD;&#x5B9A;&#x5411;&#x5230;<code>ExceptionTranslationFilter</code>&#x4E2D;&#x8BBE;&#x7F6E;&#x7684;<code>DefaultSavedRequest</code>&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x91CD;&#x5B9A;&#x5411;&#x5230;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6839;&#x76EE;&#x5F55;&#x3002;</p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x9A8C;&#x8BC1;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x91CD;&#x5199;<code>successfulAuthentication()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8C03;&#x7528;&#x987A;&#x5E8F;&#x662F;&#x5148;&#x6267;&#x884C;<code>successfulAuthentication()</code>&#xFF0C;&#x518D;&#x6267;&#x884C;Handler&#x3002;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x91CD;&#x5199;<code>successfulAuthentication()</code>&#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x8C03;&#x7528;<code>chain.doFilter(request, response)</code>&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x518D;&#x8C03;&#x7528;Handler</p>
<h6 id="AuthenticationFailureHandler"><a href="#AuthenticationFailureHandler" class="headerlink" title="AuthenticationFailureHandler"></a>AuthenticationFailureHandler</h6><p>&#x9ED8;&#x8BA4;&#x5B9E;&#x73B0;&#x662F;<code>SimpleUrlAuthenticationFailureHandler</code>&#x3002;&#x5B83;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;401&#x9519;&#x8BEF;&#x4EE3;&#x7801;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x5931;&#x8D25;&#x7684;URL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.filter;</span><br><span class="line"></span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line">import com.example.demo.util.ServletUtil;</span><br><span class="line">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line">import org.springframework.security.core.Authentication;</span><br><span class="line">import org.springframework.security.core.AuthenticationException;</span><br><span class="line">import org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter;</span><br><span class="line">import org.springframework.security.web.util.matcher.AntPathRequestMatcher;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x8FC7;&#x6EE4;&#x5668;</span><br><span class="line"> */</span><br><span class="line">public class CustomAuthenticationFilter extends AbstractAuthenticationProcessingFilter {</span><br><span class="line"></span><br><span class="line">    public CustomAuthenticationFilter() {</span><br><span class="line">        //&#x62E6;&#x622A; &quot;/login&quot; &#x7684;&#x8BF7;&#x6C42;</span><br><span class="line">        super(new AntPathRequestMatcher(&quot;/login&quot;,&quot;POST&quot;));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException, IOException, ServletException {</span><br><span class="line">        // &#x56E0;request.getParameter()&#x4E0D;&#x80FD;&#x83B7;&#x53D6;&#x5230;application/json&#x4E2D;&#x7684;&#x6570;&#x636E;</span><br><span class="line">        // &#x9700;&#x8981;&#x628A;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#x7684;&#x8BFB;&#x53D6;&#x903B;&#x8F91;&#x4FEE;&#x6539;&#x4E3A;&#x5230;&#x6D41;&#x4E2D;&#x8BFB;&#x53D6;request.getInputStream()</span><br><span class="line">        String body = ServletUtil.getBody(request);</span><br><span class="line">        JSONObject jsonObject = JSON.parseObject(body);</span><br><span class="line">        String username = jsonObject.getString(&quot;username&quot;);</span><br><span class="line">        String password = jsonObject.getString(&quot;password&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        if(username == null){</span><br><span class="line">            username = &quot;&quot;;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        if(password == null){</span><br><span class="line">            password = &quot;&quot;;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        username = username.trim();</span><br><span class="line"></span><br><span class="line">        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(username,password);</span><br><span class="line"></span><br><span class="line">        return this.getAuthenticationManager().authenticate(authenticationToken);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;"><a href="#&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;" class="headerlink" title="&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;"></a>&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;</h3><p>&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x8FC7;&#xFF0C;<code>DaoAuthenticationProvider</code>&#x7684;<code>retrieveUser(username, authentication)</code>&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x4E86;<code>UserDetailsService</code>&#x7684;<code>loadUserByUsername(username)</code>&#x65B9;&#x6CD5;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x7EE7;&#x627F;<code>UserDetailsService</code>&#x63A5;&#x53E3;&#xFF0C;&#x5B9E;&#x73B0;&#x8BE5;&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.service.impl;</span><br><span class="line"></span><br><span class="line">import com.example.demo.entity.UserDo;</span><br><span class="line">import com.example.demo.service.UserService;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.security.core.authority.AuthorityUtils;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line">import org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">import java.util.Arrays;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x52A0;&#x8F7D;&#x7528;&#x6237;&#x4FE1;&#x606F;</span><br><span class="line"> */</span><br><span class="line">@Service</span><br><span class="line">public class JwtUserDetailsServiceImpl implements UserDetailsService {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserService userService;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *</span><br><span class="line">     * @param username  &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @return {@code UserDetails}</span><br><span class="line">     * @throws UsernameNotFoundException</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {</span><br><span class="line">        UserDo userDo = userService.getUserByUsername(username);</span><br><span class="line">        if(userDo==null){</span><br><span class="line">            throw  new UsernameNotFoundException(&quot;&#x7528;&#x6237;&#x4E0D;&#x5B58;&#x5728;&quot;);</span><br><span class="line">        }</span><br><span class="line">        // &#x67E5;&#x8BE2;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x7528;&#x6237;&#x5B58;&#x5728;&#xFF0C;&#x9700;&#x8981;&#x5339;&#x914D;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x662F;&#x5426;&#x6B63;&#x786E;</span><br><span class="line">        // &#x5339;&#x914D;&#x5BC6;&#x7801;&#x662F;&#x7531; Spring Security &#x5185;&#x90E8;&#x903B;&#x8F91;&#x81EA;&#x52A8;&#x5B8C;&#x6210;</span><br><span class="line">        //&#x7528;&#x6237;&#x767B;&#x5F55;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x7684;&#x6743;&#x9650;&#x96C6;&#x5408;&#x3002;</span><br><span class="line">        String[] roles = userService.getRolesByUser(username);</span><br><span class="line"></span><br><span class="line">        String[] authorities = new String[roles.length];</span><br><span class="line">        for(int i = 0; i &lt; roles.length; i++){</span><br><span class="line">            authorities[i] = &quot;ROLE_&quot; + roles[i];</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        System.out.println(&quot;&#x7528;&#x6237;&quot; + userDo.getUsername() + &quot;&#x7684;&#x6743;&#x9650;&#x96C6;&#x5408;&#x662F;&#xFF1A;&quot; + Arrays.toString(authorities));</span><br><span class="line"></span><br><span class="line">        org.springframework.security.core.userdetails.User result =</span><br><span class="line">                new org.springframework.security.core.userdetails.User(username,userDo.getPassword(), AuthorityUtils.createAuthorityList(authorities));</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="JWT"><a href="#JWT" class="headerlink" title="JWT"></a>JWT</h2><p><a href="/external_links/74f20036ce6150ad440394fc802d0ae2.html" target="blank" rel="noopener">JWT&#x5B98;&#x7F51;</a>&#x91CC;&#x9762;&#x6709;&#x5404;&#x79CD;&#x8BED;&#x8A00;&#x7684;JWT&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x91CC;&#x9009;&#x62E9;&#x7684;&#x662F;auth0&#x7684;</p>
<p><strong>maven</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;com.auth0&lt;/groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;</span><br><span class="line">	&lt;version&gt;3.12.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="JWT&#x5DE5;&#x5177;&#x7C7B;"><a href="#JWT&#x5DE5;&#x5177;&#x7C7B;" class="headerlink" title="JWT&#x5DE5;&#x5177;&#x7C7B;"></a>JWT&#x5DE5;&#x5177;&#x7C7B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.util;</span><br><span class="line"></span><br><span class="line">import com.auth0.jwt.JWT;</span><br><span class="line">import com.auth0.jwt.JWTVerifier;</span><br><span class="line">import com.auth0.jwt.algorithms.Algorithm;</span><br><span class="line">import com.auth0.jwt.exceptions.JWTCreationException;</span><br><span class="line">import com.auth0.jwt.exceptions.JWTDecodeException;</span><br><span class="line">import com.auth0.jwt.exceptions.JWTVerificationException;</span><br><span class="line">import com.auth0.jwt.exceptions.TokenExpiredException;</span><br><span class="line">import com.auth0.jwt.interfaces.Claim;</span><br><span class="line">import com.auth0.jwt.interfaces.DecodedJWT;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import java.util.Calendar;</span><br><span class="line">import java.util.Date;</span><br><span class="line">import java.util.function.Function;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * jwt &#x5DE5;&#x5177;&#x7C7B;</span><br><span class="line"> */</span><br><span class="line">public class JwtTokenUtil {</span><br><span class="line"></span><br><span class="line">    public static final int JWT_TOKEN_VALIDITY = 30;    //Token&#x6709;&#x6548;&#x671F;&#xFF0C;&#x5355;&#x4F4D;&#xFF1A;&#x5206;&#x949F;</span><br><span class="line"></span><br><span class="line">    public static final String SECRET = &quot;Secret&quot;;       //&#x79C1;&#x94A5;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;token&#x83B7;&#x53D6;&#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @param token</span><br><span class="line">     * @return {@code String} &#x7528;&#x6237;&#x540D;</span><br><span class="line">     */</span><br><span class="line">    public static String getAudienceByToken(String token){</span><br><span class="line">        String audience = null;</span><br><span class="line">        try {</span><br><span class="line">            audience = JWT.decode(token).getAudience().get(0);</span><br><span class="line">        }catch (JWTDecodeException e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            throw new JWTDecodeException(&quot;jwt token&#x89E3;&#x7801;&#x5931;&#x8D25;&quot;);</span><br><span class="line">        }</span><br><span class="line">        return audience;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;token&#x548C;&#x5B9E;&#x4F53;&#x540D;&#x83B7;&#x53D6;&#x81EA;&#x5B9A;&#x4E49;&#x5B9E;&#x4F53;</span><br><span class="line">     * @param token</span><br><span class="line">     * @param name  &#x5B9E;&#x4F53;&#x540D;</span><br><span class="line">     * @return {@code Claim}</span><br><span class="line">     */</span><br><span class="line">    public static Claim getClaimByName(String token, String name){</span><br><span class="line">        return JWT.decode(token).getClaim(name);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x548C;&#x79C1;&#x94A5;&#x751F;&#x6210;token</span><br><span class="line">     * @param username &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @return {@code String} token</span><br><span class="line">     */</span><br><span class="line">    public static String generateToken(String username){</span><br><span class="line">        String token = null;</span><br><span class="line"></span><br><span class="line">        Calendar nowTime = Calendar.getInstance();</span><br><span class="line">        nowTime.add(Calendar.MINUTE,JWT_TOKEN_VALIDITY);</span><br><span class="line">        Date expiresDate = nowTime.getTime();</span><br><span class="line">        try {</span><br><span class="line">            token = JWT.create()</span><br><span class="line">                    .withAudience(username)    //&#x7B7E;&#x53D1;&#x5BF9;&#x8C61;</span><br><span class="line">                    .withIssuedAt(new Date())   //&#x53D1;&#x884C;&#x65F6;&#x95F4;</span><br><span class="line">                    .withExpiresAt(expiresDate)//&#x6709;&#x6548;&#x65F6;&#x95F4;</span><br><span class="line">                    .sign(Algorithm.HMAC256(username+SECRET));  //&#x52A0;&#x5BC6;&#x7B97;&#x6CD5;</span><br><span class="line"></span><br><span class="line">        }catch (JWTCreationException exception){</span><br><span class="line">            exception.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        return token;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;token&#x548C;&#x7528;&#x6237;&#x540D;&#x9A8C;&#x8BC1;token&#x662F;&#x5426;&#x6B63;&#x786E;</span><br><span class="line">     * @param token</span><br><span class="line">     * @param username &#x7528;&#x6237;&#x540D;</span><br><span class="line">     * @return {@code true} token&#x6B63;&#x786E;</span><br><span class="line">     *         {@code false} token&#x9519;&#x8BEF;</span><br><span class="line">     */</span><br><span class="line">    public static Boolean validateToken(String token, String username){</span><br><span class="line">        try {</span><br><span class="line">            JWTVerifier verifier = JWT.require(Algorithm.HMAC256(username+SECRET))</span><br><span class="line">                    .withAudience(username)</span><br><span class="line">                    .build();</span><br><span class="line">            DecodedJWT jwt = verifier.verify(token);</span><br><span class="line">            return true;</span><br><span class="line">        }catch (TokenExpiredException e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return false;</span><br><span class="line">        }catch (JWTVerificationException e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return false;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x6DFB;&#x52A0;JWT-Token"><a href="#&#x6DFB;&#x52A0;JWT-Token" class="headerlink" title="&#x6DFB;&#x52A0;JWT Token"></a>&#x6DFB;&#x52A0;JWT Token</h3><p>&#x5728;&#x901A;&#x8FC7;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x5229;&#x7528;&#x7528;&#x6237;&#x7684;&#x7528;&#x6237;&#x540D;&#x548C;&#x79C1;&#x94A5;&#x751F;&#x6210;&#x4E00;&#x4E2A;Jwt token&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x53F0;&#x3002;</p>
<p>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>JsonLoginSuccessHandler</code>&#x7C7B;&#x6765;&#x5904;&#x7406;&#x8BE5;&#x903B;&#x8F91;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.handler;</span><br><span class="line"></span><br><span class="line">import com.example.demo.util.JwtTokenUtil;</span><br><span class="line">import org.springframework.security.core.Authentication;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.security.web.authentication.AuthenticationSuccessHandler;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x540E;&#xFF0C;&#x5728;header&#x4E2D;&#x6DFB;&#x52A0;jwt token</span><br><span class="line"> */</span><br><span class="line">public class JsonLoginSuccessHandler implements AuthenticationSuccessHandler {</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {</span><br><span class="line"></span><br><span class="line">        //&#x6DFB;&#x52A0;token</span><br><span class="line">        String token = JwtTokenUtil.generateToken(((UserDetails)authentication.getPrincipal()).getUsername());</span><br><span class="line">        response.addHeader(&quot;Authorization&quot;,token);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x914D;&#x7F6E;Filter"><a href="#&#x914D;&#x7F6E;Filter" class="headerlink" title="&#x914D;&#x7F6E;Filter"></a>&#x914D;&#x7F6E;Filter</h2><p>&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x767B;&#x5F55;&#x5931;&#x8D25;&#x7684;&#x5904;&#x7406;&#x5668;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.handler;</span><br><span class="line"></span><br><span class="line">import org.springframework.http.HttpStatus;</span><br><span class="line">import org.springframework.security.core.AuthenticationException;</span><br><span class="line">import org.springframework.security.web.authentication.AuthenticationFailureHandler;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x767B;&#x5F55;&#x5931;&#x8D25;&#x5904;&#x7406;&#x5668;</span><br><span class="line"> * &#x56DE;&#x590D;401</span><br><span class="line"> */</span><br><span class="line">public class HttpStatusLoginFailureHandler implements AuthenticationFailureHandler {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException {</span><br><span class="line">        response.setStatus(HttpStatus.UNAUTHORIZED.value());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x914D;&#x7F6E;Filter</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.config;</span><br><span class="line"></span><br><span class="line">import com.example.demo.filter.CustomAuthenticationFilter;</span><br><span class="line">import com.example.demo.handler.HttpStatusLoginFailureHandler;</span><br><span class="line">import org.springframework.security.authentication.AuthenticationManager;</span><br><span class="line">import org.springframework.security.config.annotation.web.HttpSecurityBuilder;</span><br><span class="line">import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;</span><br><span class="line">import org.springframework.security.web.authentication.AuthenticationSuccessHandler;</span><br><span class="line">import org.springframework.security.web.authentication.logout.LogoutFilter;</span><br><span class="line">import org.springframework.security.web.authentication.session.NullAuthenticatedSessionStrategy;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x914D;&#x7F6E;CustomAuthenticationFilter</span><br><span class="line"> */</span><br><span class="line">public class JsonLoginConfig&lt;T extends JsonLoginConfig&lt;T, B&gt;, B extends HttpSecurityBuilder&lt;B&gt;&gt; extends AbstractHttpConfigurer&lt;T, B&gt; {</span><br><span class="line"></span><br><span class="line">    private CustomAuthenticationFilter authFilter;</span><br><span class="line"></span><br><span class="line">    public JsonLoginConfig(){</span><br><span class="line">        this.authFilter = new CustomAuthenticationFilter();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void configure(B builder) throws Exception {</span><br><span class="line">        //&#x8BBE;&#x7F6E;Filter&#x4F7F;&#x7528;&#x7684;AuthenticationManager&#xFF0C;&#x8FD9;&#x91CC;&#x53D6;&#x516C;&#x5171;&#x7684;</span><br><span class="line">        authFilter.setAuthenticationManager(builder.getSharedObject(AuthenticationManager.class));</span><br><span class="line">        //&#x8BBE;&#x7F6E;&#x5931;&#x8D25;&#x7684;Handler</span><br><span class="line">        authFilter.setAuthenticationFailureHandler(new HttpStatusLoginFailureHandler());</span><br><span class="line">        //&#x4E0D;&#x5C06;&#x8BA4;&#x8BC1;&#x540E;&#x7684;context&#x653E;&#x5165;session</span><br><span class="line">        authFilter.setSessionAuthenticationStrategy(new NullAuthenticatedSessionStrategy());</span><br><span class="line"></span><br><span class="line">        CustomAuthenticationFilter authenticationFilter = postProcess(authFilter);</span><br><span class="line">        //&#x6307;&#x5B9A;filter&#x7684;&#x4F4D;&#x7F6E;</span><br><span class="line">        builder.addFilterAfter(authenticationFilter, LogoutFilter.class);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    //&#x8BBE;&#x7F6E;&#x6210;&#x529F;&#x7684;Handler&#xFF0C;&#x8FD9;&#x4E2A;handler&#x5B9A;&#x4E49;&#x6210;Bean&#xFF0C;&#x6240;&#x4EE5;&#x4ECE;&#x5916;&#x9762;set&#x8FDB;&#x6765;</span><br><span class="line">    public JsonLoginConfig&lt;T,B&gt; loginSuccessHandler(AuthenticationSuccessHandler authenticationSuccessHandler){</span><br><span class="line">        authFilter.setAuthenticationSuccessHandler(authenticationSuccessHandler);</span><br><span class="line">        return this;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x9A8C;&#x8BC1;Jwt-Token"><a href="#&#x9A8C;&#x8BC1;Jwt-Token" class="headerlink" title="&#x9A8C;&#x8BC1;Jwt Token"></a>&#x9A8C;&#x8BC1;Jwt Token</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.filter;</span><br><span class="line"></span><br><span class="line">import com.auth0.jwt.exceptions.TokenExpiredException;</span><br><span class="line">import com.example.demo.service.impl.JwtUserDetailsServiceImpl;</span><br><span class="line">import com.example.demo.util.JwtTokenUtil;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br><span class="line">import org.springframework.security.core.context.SecurityContextHolder;</span><br><span class="line">import org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line">import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line">import org.springframework.web.filter.OncePerRequestFilter;</span><br><span class="line"></span><br><span class="line">import javax.servlet.FilterChain;</span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x6BCF;&#x4E2A;&#x9700;&#x8981;&#x9A8C;&#x8BC1;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x9A8C;&#x8BC1;token&#x662F;&#x5426;&#x6B63;&#x786E;</span><br><span class="line"> */</span><br><span class="line">@Component</span><br><span class="line">public class JwtAuthenticationFilter extends OncePerRequestFilter {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private JwtUserDetailsServiceImpl jwtUserDetailsServiceImpl;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {</span><br><span class="line">        System.out.println(&quot;JwtAuthorizationFilter&#x6267;&#x884C;...&quot;);</span><br><span class="line">        System.out.println(&quot;&#x9A8C;&#x8BC1;Token...&quot;);</span><br><span class="line">        UsernamePasswordAuthenticationToken authentication = getAuthentication(request);</span><br><span class="line">        if(authentication == null){</span><br><span class="line">            System.out.println(&quot;authentication null&quot;);</span><br><span class="line">            filterChain.doFilter(request,response);</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        SecurityContextHolder.getContext().setAuthentication(authentication);</span><br><span class="line">        filterChain.doFilter(request,response);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6839;&#x636E;request&#x4E2D;&#x7684;token&#xFF0C;&#x9A8C;&#x8BC1;&#x540E;&#x83B7;&#x53D6;UsernamePasswordAuthenticationToken</span><br><span class="line">     * @param request</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request){</span><br><span class="line"></span><br><span class="line">        String username = null;</span><br><span class="line">        String jwtToken = null;</span><br><span class="line"></span><br><span class="line">        jwtToken = request.getHeader(&quot;Authorization&quot;);</span><br><span class="line"></span><br><span class="line">        if(jwtToken != null){</span><br><span class="line">            try {</span><br><span class="line">                username = JwtTokenUtil.getAudienceByToken(jwtToken);</span><br><span class="line">            }catch (IllegalArgumentException e){</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.out.println(&quot;&#x4E0D;&#x80FD;&#x83B7;&#x53D6;token&#x6216;token&#x4E0D;&#x6B63;&#x786E;&quot;);</span><br><span class="line">            }catch (TokenExpiredException e){</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.out.println(&quot;token&#x8FC7;&#x671F;&quot;);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        //&#x83B7;&#x53D6;token&#x540E;&#x9A8C;&#x8BC1;</span><br><span class="line">        if(username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null){</span><br><span class="line">            System.out.println(&quot;username:&quot;+username);</span><br><span class="line"></span><br><span class="line">            UserDetails userDetails = jwtUserDetailsServiceImpl.loadUserByUsername(username);</span><br><span class="line">            if(JwtTokenUtil.validateToken(jwtToken,username)){  //&#x9A8C;&#x8BC1;token</span><br><span class="line">                //&#x521B;&#x5EFA;UsernamePasswordAuthenticationToken</span><br><span class="line">                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken= new UsernamePasswordAuthenticationToken(userDetails,null,userDetails.getAuthorities());</span><br><span class="line">                usernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));</span><br><span class="line">                return usernamePasswordAuthenticationToken;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        return null;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.config;</span><br><span class="line"></span><br><span class="line">import org.springframework.security.core.AuthenticationException;</span><br><span class="line">import org.springframework.security.web.AuthenticationEntryPoint;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import javax.servlet.ServletException;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import javax.servlet.http.HttpServletResponse;</span><br><span class="line">import java.io.IOException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x62D2;&#x7EDD;&#x6BCF;&#x4E2A;&#x672A;&#x7ECF;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF08;token&#xFF09;&#x7684;&#x8BF7;&#x6C42;&#x5E76;&#x53D1;&#x9001;&#x9519;&#x8BEF;&#x4EE3;&#x7801;401</span><br><span class="line"> */</span><br><span class="line">@Component</span><br><span class="line">public class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException e) throws IOException, ServletException {</span><br><span class="line">        response.sendError(HttpServletResponse.SC_UNAUTHORIZED,&quot;Unauthorized&quot;);</span><br><span class="line">        System.out.println(&quot;JWT Unauthorized...&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="Security&#x914D;&#x7F6E;"><a href="#Security&#x914D;&#x7F6E;" class="headerlink" title="Security&#x914D;&#x7F6E;"></a>Security&#x914D;&#x7F6E;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.config;</span><br><span class="line"></span><br><span class="line">import com.example.demo.filter.JwtAuthenticationFilter;</span><br><span class="line">import com.example.demo.handler.JsonLoginSuccessHandler;</span><br><span class="line">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line">import org.springframework.context.annotation.Configuration;</span><br><span class="line">import org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line">import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line">import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line">import org.springframework.security.config.http.SessionCreationPolicy;</span><br><span class="line">import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line">import org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line">import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span><br><span class="line"></span><br><span class="line">@Configuration</span><br><span class="line">@EnableWebSecurity</span><br><span class="line">public class WebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private JwtAuthenticationFilter jwtAuthenticationFilter;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(HttpSecurity http) throws Exception {</span><br><span class="line">        //super.configure(http);</span><br><span class="line"></span><br><span class="line">        //&#x7981;&#x7528;form&#x767B;&#x5F55;</span><br><span class="line">        http.formLogin().disable();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        // &#x914D;&#x7F6E;&#x6743;&#x9650;</span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(&quot;/login&quot;,&quot;/register&quot;).permitAll()</span><br><span class="line">                // &#x57FA;&#x4E8E;&#x89D2;&#x8272;&#x7684;&#x6743;&#x9650;&#x7BA1;&#x7406;</span><br><span class="line">                .antMatchers(&quot;/admin/**&quot;,&quot;/user/**&quot;).hasRole(&quot;admin&quot;)</span><br><span class="line">                .antMatchers(&quot;/user/**&quot;).hasRole(&quot;user&quot;)</span><br><span class="line">                .anyRequest().authenticated();  //&#x4EFB;&#x610F;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x8BA4;&#x8BC1;&#x540E;&#x624D;&#x80FD;&#x8BBF;&#x95EE;</span><br><span class="line"></span><br><span class="line">        // &#x6DFB;&#x52A0;&#x8FC7;&#x6EE4;&#x5668;</span><br><span class="line">        http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);</span><br><span class="line"></span><br><span class="line">        http.apply(new JsonLoginConfig&lt;&gt;()).loginSuccessHandler(jsonLoginSuccessHandler());</span><br><span class="line"></span><br><span class="line">        http.exceptionHandling()</span><br><span class="line">                .authenticationEntryPoint(jwtAuthenticationEntryPoint);</span><br><span class="line"></span><br><span class="line">        //&#x4F7F;&#x7528;&#x65E0;&#x72B6;&#x6001;session&#xFF0C;session&#x4E0D;&#x4F1A;&#x50A8;&#x5B58;&#x7528;&#x6237;&#x72B6;&#x6001;</span><br><span class="line">        http.sessionManagement()</span><br><span class="line">                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //&#x5173;&#x95ED;CSRF&#x5B89;&#x5168;&#x534F;&#x8BAE;</span><br><span class="line">        //&#x5173;&#x95ED;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#x7684;&#x53EF;&#x7528;</span><br><span class="line">        http.csrf().disable();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x6CE8;&#x5165;&#x5BC6;&#x7801;&#x7F16;&#x7801;&#x5668;&#x5BF9;&#x8C61;</span><br><span class="line">    @Bean</span><br><span class="line">    public PasswordEncoder passwordEncoder(){</span><br><span class="line">        return new BCryptPasswordEncoder();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    protected JsonLoginSuccessHandler jsonLoginSuccessHandler(){</span><br><span class="line">        return new JsonLoginSuccessHandler();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x901A;&#x7528;&#x7C7B;"><a href="#&#x901A;&#x7528;&#x7C7B;" class="headerlink" title="&#x901A;&#x7528;&#x7C7B;"></a>&#x901A;&#x7528;&#x7C7B;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.common;</span><br><span class="line"></span><br><span class="line">import lombok.AllArgsConstructor;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">public enum CodeMsg {</span><br><span class="line"></span><br><span class="line">    REGISTER_SUCCESS(2000,&quot;&#x6CE8;&#x518C;&#x6210;&#x529F;&quot;),</span><br><span class="line">    REGISTER_FAILURE(2001,&quot;&#x6CE8;&#x518C;&#x5931;&#x8D25;&quot;),</span><br><span class="line"></span><br><span class="line">    LOGIN_SUCCESS(2002,&quot;&#x767B;&#x5F55;&#x6210;&#x529F;&quot;),</span><br><span class="line">    LOGIN_FAILURE(2003,&quot;&#x767B;&#x5F55;&#x5931;&#x8D25;&quot;),</span><br><span class="line"></span><br><span class="line">    SUCCESS(2004,&quot;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x6210;&#x529F;&quot;),</span><br><span class="line">    FAILURE(2005,&quot;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x5931;&#x8D25;&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    private int code;</span><br><span class="line">    private String message;</span><br><span class="line"></span><br><span class="line">    public int getCode() {</span><br><span class="line">        return code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setCode(int code) {</span><br><span class="line">        this.code = code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getMessage() {</span><br><span class="line">        return message;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void setMessage(String message) {</span><br><span class="line">        this.message = message;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.common;</span><br><span class="line"></span><br><span class="line">import lombok.Data;</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">public class Result {</span><br><span class="line"></span><br><span class="line">    private int code;</span><br><span class="line">    private String message;</span><br><span class="line">    private Object entity;</span><br><span class="line"></span><br><span class="line">    public Result(){}</span><br><span class="line">    public Result(CodeMsg codeMsg, Object entity){</span><br><span class="line">        this.code=codeMsg.getCode();</span><br><span class="line">        this.message=codeMsg.getMessage();</span><br><span class="line">        this.entity=entity;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.example.demo.util;</span><br><span class="line"></span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line">import java.io.InputStreamReader;</span><br><span class="line">import java.nio.charset.Charset;</span><br><span class="line"></span><br><span class="line">public class ServletUtil {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;body</span><br><span class="line">     * @param request</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static String getBody(HttpServletRequest request){</span><br><span class="line">        StringBuilder stringBuilder = new StringBuilder();</span><br><span class="line">        InputStream inputStream = null;</span><br><span class="line">        BufferedReader reader = null;</span><br><span class="line">        try{</span><br><span class="line">            inputStream = request.getInputStream();</span><br><span class="line">            reader = new BufferedReader(new InputStreamReader(inputStream, Charset.forName(&quot;UTF-8&quot;)));</span><br><span class="line">            String line = &quot;&quot;;</span><br><span class="line">            while ((line = reader.readLine())!=null){</span><br><span class="line">                stringBuilder.append(line);</span><br><span class="line">            }</span><br><span class="line">        }catch (IOException e){</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }finally {</span><br><span class="line">            if(inputStream != null){</span><br><span class="line">                try {</span><br><span class="line">                    inputStream.close();</span><br><span class="line">                }catch (IOException e){</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            if(reader != null){</span><br><span class="line">                try{</span><br><span class="line">                    reader.close();</span><br><span class="line">                }catch (IOException e){</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return stringBuilder.toString();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h2><p>&#x4F7F;&#x7528;Postman&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;</p>
<p>&#x4F7F;&#x7528;&#x7BA1;&#x7406;&#x5458;&#x7684;&#x8D26;&#x53F7;&#x5BC6;&#x7801;&#x8FDB;&#x884C;&#x767B;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD4;&#x56DE;&#x7684;header&#x4E2D;&#x5E26;&#x6709;Authorization</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/45400d183093698ea936042b3934a4afca13cbf9999e404339016963ea0a33ce" alt></p>
<p>&#x4E0B;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x5E26;&#x4E0A;&#x8BE5;token&#xFF0C;&#x6210;&#x529F;&#x83B7;&#x53D6;&#x6570;&#x636E;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c52883a11bb3d0dff6fc30e865c7ad491e928cf8232f43a0c7c8def86789044d" alt></p>
<p>&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x66F4;&#x6362;&#x6210;&#x666E;&#x901A;&#x7528;&#x6237;&#x767B;&#x5F55;&#x3002;</p>
<p>&#x83B7;&#x53D6;token&#x540E;&#x8BBF;&#x95EE;&#x53EA;&#x6709;&#x7BA1;&#x7406;&#x5458;&#x80FD;&#x8BBF;&#x95EE;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD4;&#x56DE;&#x4E86;403&#x6CA1;&#x6709;&#x6743;&#x9650;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0d9d705e0624fc1df3902cda61ed7219ebd597d741ab5c446484640fb31282ab" alt></p>
<p>&#x5982;&#x679C;&#x4E0D;&#x5E26;token&#x8BBF;&#x95EE;&#xFF0C;&#x4F1A;&#x8FD4;&#x56DE;401&#x6CA1;&#x6709;&#x6388;&#x6743;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/db8e18cd7ad4154c8fa3a2acaabac4fe1568220d4ac1eb7126eadcc8575890cd" alt></p>
<h2 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h2><p>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x63CF;&#x8FF0;&#x4E86;&#x4F7F;&#x7528;&#x5982;&#x4F55;&#x4F7F;&#x7528;Spring Security&#x548C;JWT&#x7ED3;&#x5408;Springboot&#x8FDB;&#x884C;&#x767B;&#x5F55;&#x9A8C;&#x8BC1;&#x3002;&#x5B9E;&#x73B0;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x8FD8;&#x6709;&#x591A;&#x79CD;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Form&#x8868;&#x5355;&#x767B;&#x5F55;&#xFF0C;&#x524D;&#x540E;&#x7AEF;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x3002;&#x8FD8;&#x6709;&#x66F4;&#x591A;&#x4E2A;&#x6027;&#x5316;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x4E0D;&#x4F7F;&#x7528;<code>UsernamePasswordAuthenticationToken</code>,&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Token&#x7C7B;&#xFF1B;&#x8FD8;&#x6709;&#x4F7F;&#x7528;&#x591A;&#x79CD;&#x9A8C;&#x8BC1;&#x65B9;&#x5F0F;&#xFF0C;&#x90AE;&#x7BB1;&#x767B;&#x5F55;&#x7B49;&#x3002;</p>
<h2 id="&#x53C2;&#x8003;"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</h2><p><a href="/external_links/8a95f9b22507525a4d4b60607527ea2e.html" target="blank" rel="noopener">Spring Security &#x6848;&#x4F8B;&#x5B9E;&#x73B0;&#x548C;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x5256;&#x6790;</a></p>
<p><a href="/external_links/81456c663593b71c72fae38bcc6fde37.html" target="blank" rel="noopener">Spring Security&#x505A;JWT&#x8BA4;&#x8BC1;&#x548C;&#x6388;&#x6743;</a></p>
<p><a href="/external_links/b00d1b18f5da880a5f11951ad7e6f4ab.html" target="blank" rel="noopener">&#x81EA;&#x5B9A;&#x4E49;SpringSecurity&#x8BA4;&#x8BC1;&#x65B9;&#x5F0F;</a></p>
<p><a href="/external_links/9218e5c41f3c4f3da1b9333b206347ce.html" target="blank" rel="noopener">SpringSecurity &#x6838;&#x5FC3;&#x7EC4;&#x4EF6;&#x4ECB;&#x7ECD; + &#x8BA4;&#x8BC1;&#x6D41;&#x7A0B; +&#x5185;&#x7F6E;&#x62E6;&#x622A;&#x5668;&#x987A;&#x5E8F;</a></p>
<p><a href="/external_links/aa3750abad93b7c744722ce20f67acf1.html" target="blank" rel="noopener">Spring-Security&#x6743;&#x9650;&#x6846;&#x67B6;</a></p>
<p><a href="/external_links/1548919feca4c00ce0285c1a98e76ae1.html" target="blank" rel="noopener">&#x5C1A;&#x7845;&#x8C37;SpringSecurity&#x6846;&#x67B6;&#x6559;&#x7A0B;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/db4b3b4fe1b07b2c3790db0266c823e3.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6936470702648197157.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6936470702648197157.html" itemprop="url">震惊！JDK7和JDK8中关于ForkJoinPool的内存</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-06T17:30:46+08:00">
                2021-03-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Bug&#x5730;&#x5740;&#xFF1A;<a href="/external_links/93afaca2817609cd6002f6a07ccd4524.html" target="blank" rel="noopener">bugs.java.com/bugdatabase&#x2026;</a></p>
<h1 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h1><p>&#x7531;&#x4E8E;&#x5F53;&#x65F6;&#x5728;&#x89E3;&#x51B3;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;<a href="/external_links/3d5e8941793a51ec79144fddca224ffc.html" target="blank" rel="noopener">Tomcat&#x5BB9;&#x5668;&#x5E94;&#x7528;&#x4E2D;&#x4F7F;&#x7528;CompletableFuture&#x65F6;&#xFF0C;&#x5173;&#x4E8E;ClassLoader&#x5F15;&#x8D77;&#x7684;&#x95EE;&#x9898;</a>&#xFF0C;&#x4E4B;&#x540E;&#xFF0C;&#x540E;&#x6765;&#x6709;&#x65F6;&#x95F4;&#x5BF9;&#x6B64;&#x6B64;&#x95EE;&#x9898;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x7EC6;&#x8282;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x8865;&#x5145;&#xFF01;</p>
<h1 id="&#x900F;&#x8FC7;ForkJoinPool&#x6E90;&#x7801;&#x4E86;&#x89E3;&#x8FD9;&#x4E2A;BUG"><a href="#&#x900F;&#x8FC7;ForkJoinPool&#x6E90;&#x7801;&#x4E86;&#x89E3;&#x8FD9;&#x4E2A;BUG" class="headerlink" title="&#x900F;&#x8FC7;ForkJoinPool&#x6E90;&#x7801;&#x4E86;&#x89E3;&#x8FD9;&#x4E2A;BUG"></a>&#x900F;&#x8FC7;ForkJoinPool&#x6E90;&#x7801;&#x4E86;&#x89E3;&#x8FD9;&#x4E2A;BUG</h1><p>&#x9996;&#x5148;&#x8D70;&#x4E00;&#x904D;&#x8FC7;&#x7A0B;&#xFF0C;&#x6765;&#x770B;&#x4E0B;&#x5728;Tomcat&#x4E2D;ForkJoinPool&#x7684;&#x9ED8;&#x8BA4;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x7EBF;&#x7A0B;&#x5DE5;&#x7A0B;&#x662F;&#x600E;&#x4E48;&#x53D8;&#x4E3A;SafeForkJoinWorkerThreadFactory&#x7684;&#x3002;</p>
<p>###1&#xFF09;&#x9996;&#x5148;&#x67E5;&#x770B;ForkJoinPool&#x8BBE;&#x7F6E;ThreadFactory&#x7684;&#x5730;&#x65B9;&#x6E90;&#x7801;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;private static ForkJoinPool makeCommonPool() {</span><br><span class="line">        int parallelism = -1;</span><br><span class="line">        ForkJoinWorkerThreadFactory factory = null;</span><br><span class="line">        UncaughtExceptionHandler handler = null;</span><br><span class="line">        try {  // ignore exceptions in accessing/parsing properties</span><br><span class="line">   &#x3001;&#x3001;&#x3001;&#x3001;&#x3001;&#x3001;&#x7701;&#x7565;&#x4E0D;&#x91CD;&#x8981;&#x4EE3;&#x7801;</span><br><span class="line">            String fp = System.getProperty</span><br><span class="line">                (&quot;java.util.concurrent.ForkJoinPool.common.threadFactory&quot;);</span><br><span class="line">            if (fp != null)</span><br><span class="line">                factory = ((ForkJoinWorkerThreadFactory)ClassLoader.</span><br><span class="line">                           getSystemClassLoader().loadClass(fp).newInstance());</span><br><span class="line">   &#x3001;&#x3001;&#x3001;&#x3001;&#x3001;&#x3001;&#x7701;&#x7565;&#x4E0D;&#x91CD;&#x8981;&#x4EE3;&#x7801;</span><br><span class="line">        } catch (Exception ignore) {</span><br><span class="line">        }</span><br><span class="line">        if (factory == null) {</span><br><span class="line">            if (System.getSecurityManager() == null)</span><br><span class="line">                factory = defaultForkJoinWorkerThreadFactory;</span><br><span class="line">            else // use security-managed default</span><br><span class="line">                factory = new InnocuousForkJoinWorkerThreadFactory();</span><br><span class="line">        }</span><br><span class="line">          &#x3001;&#x3001;&#x3001;&#x3001;&#x3001;&#x3001;&#x7701;&#x7565;&#x4E0D;&#x91CD;&#x8981;&#x4EE3;&#x7801;</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x4ECE;<strong>java.util.concurrent.ForkJoinPool.common.threadFactory</strong>&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x503C;&#x4F5C;&#x4E3A;ThreadFactory&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x4E00;&#x4E2A;&#x6269;&#x5C55;&#x3002;</p>
<h3 id="2&#xFF09;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x8BBE;&#x7F6E;&#x8FDB;&#x53BB;&#x7684;&#x5462;&#xFF1F;"><a href="#2&#xFF09;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x8BBE;&#x7F6E;&#x8FDB;&#x53BB;&#x7684;&#x5462;&#xFF1F;" class="headerlink" title="2&#xFF09;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x8BBE;&#x7F6E;&#x8FDB;&#x53BB;&#x7684;&#x5462;&#xFF1F;"></a>2&#xFF09;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x5728;&#x54EA;&#x91CC;&#x8BBE;&#x7F6E;&#x8FDB;&#x53BB;&#x7684;&#x5462;&#xFF1F;</h3><p>&#x8BBE;&#x7F6E;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x662F;org.apache.catalina.core.JreMemoryLeakPreventionListener&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x5B9E;&#x73B0;&#x4E86;LifecycleListener&#x3002;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x884C;&#x4EE3;&#x7801;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;                if (forkJoinCommonPoolProtection &amp;&amp; !JreCompat.isJre9Available()) {</span><br><span class="line">                    // Don&apos;t override any explicitly set property</span><br><span class="line">                    if (System.getProperty(FORK_JOIN_POOL_THREAD_FACTORY_PROPERTY) == null) {</span><br><span class="line">                        System.setProperty(FORK_JOIN_POOL_THREAD_FACTORY_PROPERTY,</span><br><span class="line">                                SafeForkJoinWorkerThreadFactory.class.getName());</span><br><span class="line">                    }</span><br><span class="line">                }</span><br></pre></td></tr></table></figure>

<h2 id="3&#xFF09;&#x4E3A;&#x4EC0;&#x4E48;Tomcat&#x8981;&#x505A;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#xFF1F;"><a href="#3&#xFF09;&#x4E3A;&#x4EC0;&#x4E48;Tomcat&#x8981;&#x505A;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#xFF1F;" class="headerlink" title="3&#xFF09;&#x4E3A;&#x4EC0;&#x4E48;Tomcat&#x8981;&#x505A;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#xFF1F;"></a>3&#xFF09;&#x4E3A;&#x4EC0;&#x4E48;Tomcat&#x8981;&#x505A;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#xFF1F;</h2><p>&#x5230;&#x8FD9;&#x91CC;&#x5C31;&#x5F15;&#x51FA;&#x4E86;&#x6587;&#x7AE0;&#x6807;&#x9898;&#x4E2D;&#x6240;&#x8BF4;&#x7684;JDK7&#x548C;JDK8&#x4E2D;&#x5173;&#x4E8E;ForkJoinPool&#x7684;BUG&#xFF01;&#x4E3A;&#x5565;&#x662F;JDK7&#x548C;JDK8&#xFF1F;&#x56E0;&#x4E3A;ForkJoinPool&#x662F;JDK7&#x5F00;&#x59CB;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x81EA;&#x7136;&#x6CA1;&#x6709;&#xFF0C;&#x800C;JDK9&#x4E4B;&#x540E;&#x9488;&#x5BF9;&#x6B64;BUG&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x590D;&#x3002;</p>
<p>&#x5148;&#x8BF4;&#x4E0B;&#x8FD9;&#x4E2A;BUG&#xFF1A;&#x9996;&#x5148;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x8BF8;&#x5982;CompletableFuture&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x4E00;&#x4E9B;runAsync&#x4E4B;&#x7C7B;&#x65B9;&#x5F0F;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x9ED8;&#x8BA4;&#x6307;&#x5B9A;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5219;&#x4F1A;&#x4F7F;&#x7528;<strong>ForkJoinPool.commonPool()&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;private static final Executor asyncPool = useCommonPool ?</span><br><span class="line">        ForkJoinPool.commonPool() : new ThreadPerTaskExecutor();</span><br><span class="line"></span><br><span class="line">public static CompletableFuture&lt;Void&gt; runAsync(Runnable runnable) {</span><br><span class="line">        return asyncRunStage(asyncPool, runnable);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x6574;&#x4E2A;JVM&#x4E2D;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x4E86;&#x50CF;CompletableFuture&#x6216;&#x8005;&#x4E00;&#x4E9B;parallelStream&#x7B49;&#x65F6;&#xFF0C;&#x4F1A;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;ForkJoinPool&#xFF0C;&#x4E14;&#x5171;&#x7528;&#x4E00;&#x4E2A;ForkJoinPool&#xFF0C;&#x8FD9;&#x770B;&#x8D77;&#x6765;&#x5728;&#x6211;&#x4EEC;&#x666E;&#x901A;&#x7684;Java SE&#x7A0B;&#x5E8F;&#x4E2D;&#x597D;&#x50CF;&#x4E0D;&#x4F1A;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x786E;&#x5B9E;&#x4E0D;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x5728;<strong>JAVA EE</strong>&#x73AF;&#x5883;&#x4E0B;&#x5C31;&#x4E0D;&#x540C;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x5E38;&#x89C1;&#x7684;JAVA WEB&#x7A0B;&#x5E8F;&#x4F1A;&#x653E;&#x5728;Tomcat&#x4E2D;&#x8FD0;&#x884C;&#xFF0C;&#x800C;Tomcat&#x4E3A;&#x4E86;&#x8FBE;&#x5230;&#x4E0D;&#x540C;&#x5E94;&#x7528;&#x7684;&#x9694;&#x79BB;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x4F1A;&#x4E3A;WebApp&#x4E0B;&#x6BCF;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E13;&#x5C5E;ClassLoader&#x52A0;&#x8F7D;&#x6267;&#x884C;&#x3002;&#x90A3;&#x4E48;&#x57FA;&#x4E8E;&#x4E0A;&#x8FF0;&#x673A;&#x5236;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5E94;&#x7528;&#x4E2D;&#x6700;&#x7EC8;&#x4F1A;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x4E2A;ForkJoinPool&#x53BB;&#x6267;&#x884C;&#x5904;&#x7406;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x53EF;&#x80FD;&#x6B64;&#x65F6;&#x8FD8;&#x6709;&#x70B9;&#x61F5;&#x903C;&#xFF1F;&#x63A5;&#x7740;&#x5F80;&#x4E0B;&#x770B;bug&#x6240;&#x5728;&#xFF0C;&#x5728;JDK7&#x548C;JDK8&#x4E2D;&#xFF0C;&#x770B;&#x4E0B;&#x5176;ThreadFactory&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<p>JDK8&#x4E2D;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;    static final class DefaultForkJoinWorkerThreadFactory</span><br><span class="line">        implements ForkJoinWorkerThreadFactory {</span><br><span class="line">        public final ForkJoinWorkerThread newThread(ForkJoinPool pool) {</span><br><span class="line">            return new ForkJoinWorkerThread(pool);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x662F;&#x641E;&#x4E86;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x8FD9;&#x91CC;&#x5DE5;&#x5382;&#x4EA7;&#x751F;&#x7EBF;&#x7A0B;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;new ForkJoinWorkerThread(pool);&#x518D;&#x6765;&#x770B;&#x4E0B;ForkJoinWorkerThread&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;    protected ForkJoinWorkerThread(ForkJoinPool pool) {</span><br><span class="line">        // Use a placeholder until a useful name can be set in registerWorker</span><br><span class="line">        super(&quot;aForkJoinWorkerThread&quot;);</span><br><span class="line">        this.pool = pool;</span><br><span class="line">        this.workQueue = pool.registerWorker(this);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>ForkJoinWorkerThread&#x662F;&#x7EE7;&#x627F;&#x4E86;Thread,&#x8FD9;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x76F4;&#x63A5;&#x8C03;&#x7528; super(&#x201C;aForkJoinWorkerThread&#x201D;);&#x800C;&#x8FD9;&#x4E2A;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;<strong>&#x65B0;&#x7EBF;&#x7A0B;&#x7684;contextClassLoader&#x4F1A;&#x7EE7;&#x627F;&#x7236;&#x7EBF;&#x7A0B;&#x7684;contextClassLoader</strong>&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x662F;<strong>BUG&#x6240;&#x5728;</strong>&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BF4;&#xFF0C;&#x5728;Tomcat&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x7236;&#x7EBF;&#x7A0B;&#x7684;contextClassLoader&#x81EA;&#x7136;&#x5C31;&#x662F;WebAppClassLoader&#xFF0C;WebApp&#x4E0B;&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x5728;&#x4EA7;&#x751F;&#x7684;&#x65B0;&#x7EBF;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;contextClassLoader&#x53BB;&#x52A0;&#x8F7D;&#x4E00;&#x4E9B;&#x7C7B;&#x4F7F;&#x7528;&#xFF0C;&#x540E;&#x6765;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x53EF;&#x80FD;&#x8981;&#x5378;&#x8F7D;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x62FD;&#x4F60;&#x4E66;WebAppClassLoader&#x4F9D;&#x7136;&#x88AB;ForkJoinPool&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x6240;&#x6301;&#x6709;&#xFF0C;&#x6240;&#x4EE5;GC&#x65E0;&#x6CD5;&#x56DE;&#x6536;&#xFF0C;&#x8FDB;&#x800C;&#x4E5F;&#x65E0;&#x6CD5;&#x56DE;&#x6536;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x4E2D;&#x52A0;&#x8F7D;&#x7684;&#x4E00;&#x4E9B;&#x8D44;&#x6E90;&#xFF0C;&#x4ECE;&#x800C;&#x9020;&#x6210;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x3002;</p>
<h2 id="4&#xFF09;BUG&#x662F;&#x5982;&#x4F55;&#x4FEE;&#x590D;&#x7684;&#xFF1F;"><a href="#4&#xFF09;BUG&#x662F;&#x5982;&#x4F55;&#x4FEE;&#x590D;&#x7684;&#xFF1F;" class="headerlink" title="4&#xFF09;BUG&#x662F;&#x5982;&#x4F55;&#x4FEE;&#x590D;&#x7684;&#xFF1F;"></a>4&#xFF09;BUG&#x662F;&#x5982;&#x4F55;&#x4FEE;&#x590D;&#x7684;&#xFF1F;</h2><p>&#x76F4;&#x63A5;&#x770B;&#x4E0B;JDK9&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<p>ForkJoinPool.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;    private static final class DefaultForkJoinWorkerThreadFactory</span><br><span class="line">        implements ForkJoinWorkerThreadFactory {</span><br><span class="line">        private static final AccessControlContext ACC = contextWithPermissions(</span><br><span class="line">            new RuntimePermission(&quot;getClassLoader&quot;),</span><br><span class="line">            new RuntimePermission(&quot;setContextClassLoader&quot;));</span><br><span class="line"></span><br><span class="line">        public final ForkJoinWorkerThread newThread(ForkJoinPool pool) {</span><br><span class="line">            return AccessController.doPrivileged(</span><br><span class="line">                new PrivilegedAction&lt;&gt;() {</span><br><span class="line">                    public ForkJoinWorkerThread run() {</span><br><span class="line">                        return new ForkJoinWorkerThread(</span><br><span class="line">                            pool, ClassLoader.getSystemClassLoader()); }},</span><br><span class="line">                ACC);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E0E;1.8&#x4E4B;&#x524D;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x91CC;&#x5728;&#x65B0;&#x5EFA;ForkJoinWorkerThread&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x624B;&#x52A8;&#x4F20;&#x5165;&#x4E86;ClassLoader.getSystemClassLoader()&#x4F5C;&#x4E3A;contextClassLoader</p>
<p>&#x518D;&#x6765;&#x4ECE;Tomcat8&#x4E2D;&#x7684;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x4E2D;&#x770B;&#x4E0B;Tomcat&#x9488;&#x5BF9;&#x6B64;&#x95EE;&#x9898;&#x7684;&#x5E94;&#x5BF9;&#x63AA;&#x65BD;&#xFF0C;&#x5177;&#x4F53;&#x89C1;<a href="/external_links/0dcc61c712af984350012937168e09e0.html" target="blank" rel="noopener">tomcat.apache.org/tomcat-8.5-&#x2026;</a></p>
<ul>
<li>Tomcat 8.5.11 &#x5728;&#x4E2D;&#x63D0;&#x4F9B;Tomcat&#x5BB9;&#x5668;&#x751F;&#x547D;&#x5468;&#x671F;&#x76D1;&#x542C;&#x7C7B;&#x7684;&#x5B9E;&#x73B0;JreMemoryLeakPreventionListener&#x4FEE;&#x590D;&#x6B64;&#x95EE;&#x9898;</li>
<li>Tomcat 8.5.30 &#x4E2D;&#xFF0C;&#x7531;&#x4E8E;JDK9&#x4E2D;&#x4FEE;&#x590D;&#x4E86;&#x6B64;BUG&#xFF0C;&#x6240;&#x4EE5;&#x5728;JreMemoryLeakPreventionListener&#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x5F00;&#x5173;&#x5224;&#x65AD;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;JVM&#x652F;&#x6301;JDK9&#xFF0C;&#x5219;&#x4E0D;&#x4F7F;&#x7528;SafeForkJoinWorkerThreadFactory&#x3002;</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c97362179b8f0d8569d71f519dce3604.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935751997157031966.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935751997157031966.html" itemprop="url">解决表单重复提交问题的8种解决方案 一 前置知识 二 解决方</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T19:01:02+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x63D0;&#x51FA;&#x95EE;&#x9898;: &#x89E3;&#x51B3;&#x8868;&#x5355;&#x91CD;&#x590D;&#x63D0;&#x4EA4;</p>
<h1 id="&#x4E00;-&#x524D;&#x7F6E;&#x77E5;&#x8BC6;"><a href="#&#x4E00;-&#x524D;&#x7F6E;&#x77E5;&#x8BC6;" class="headerlink" title="&#x4E00; &#x524D;&#x7F6E;&#x77E5;&#x8BC6;"></a><strong>&#x4E00; &#x524D;&#x7F6E;&#x77E5;&#x8BC6;</strong></h1><p>1 HTTP&#x662F;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x8D85;&#x6587;&#x672C;&#x4F20;&#x8F93;&#x534F;&#x8BAE;,&#x662F;&#x7528;&#x4E8E;&#x4ECE;&#x4E07;&#x7EF4;&#x7F51;&#x670D;&#x52A1;&#x5668;&#x4F20;&#x8F93;&#x8D85;&#x6587;&#x672C;&#x5230;&#x672C;&#x5730;&#x6D4F;&#x89C8;&#x5668;&#x7684;&#x4F20;&#x8F93;&#x534F;&#x8BAE;,HTTP&#x662F;&#x5728;TCP/IP&#x534F;&#x8BAE;&#x6A21;&#x578B;&#x4E0A;&#x7684;&#x5E94;&#x7528;&#x5C42;&#x7684;&#x4E00;&#x79CD;&#x4F20;&#x8F93;&#x534F;&#x8BAE;  </p>
<p>2 &#x67E5;&#x770B;HTTP&#x8BF7;&#x6C42;&#x62A5;&#x6587;  </p>
<p><strong>HTTP&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x7531;3&#x90E8;&#x5206;&#x7EC4;&#x6210;: &#x8BF7;&#x6C42;&#x884C;+&#x8BF7;&#x6C42;&#x5934;+&#x8BF7;&#x6C42;&#x4F53;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/988693279ed19d63e973dd8b37658ca34eddbd8ac1efeff80ac409afb2557a6e" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">makefile&#x590D;&#x5236;&#x4EE3;&#x7801;POST /user HTTP/1.1                       // &#x8BF7;&#x6C42;&#x884C;</span><br><span class="line">Host: www.user.com</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">User-agent: Mozilla/5.0.                  // &#x4EE5;&#x4E0A;&#x662F;&#x8BF7;&#x6C42;&#x5934;</span><br><span class="line"></span><br><span class="line">name=world                                // &#x8BF7;&#x6C42;&#x4F53;(&#x53EF;&#x9009;,&#x5982;get&#x8BF7;&#x6C42;&#x65F6;&#x53EF;&#x9009;)</span><br></pre></td></tr></table></figure>

<p><strong>&#x8BF7;&#x6C42;&#x884C;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;,&#x6BD4;&#x5982;&#x4E0A;&#x9762;&#x4F8B;&#x5B50;&#x4E2D;&#x8BF7;&#x6C42;&#x884C;&#x7684;POST</strong>  </p>
<p>3 HTTP&#x534F;&#x8BAE;&#x4E2D;&#x7684;9&#x79CD;&#x65B9;&#x6CD5;(&#x5176;&#x4E2D;HTTP1.0&#x5B9A;&#x4E49;&#x4E86;&#x4E09;&#x79CD;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#xFF1A;GET, POST &#x548C; HEAD&#x65B9;&#x6CD5;&#xFF0C;HTTP1.1&#x65B0;&#x589E;&#x4E86;&#x4E94;&#x79CD;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#xFF1A;OPTIONS, PUT, DELETE, TRACE &#x548C; CONNECT &#x65B9;&#x6CD5;)</p>
<p>OPTIONS:<br>OPTIONS&#x8BF7;&#x6C42;&#x4E0E;HEAD&#x7C7B;&#x4F3C;&#xFF0C;&#x4E00;&#x822C;&#x4E5F;&#x662F;&#x7528;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6027;&#x80FD;&#x3002; &#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F1A;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x8BE5;&#x8D44;&#x6E90;&#x6240;&#x652F;&#x6301;&#x7684;&#x6240;&#x6709;HTTP&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4F1A;&#x7528;&#x2019;*&#x2018;&#x6765;&#x4EE3;&#x66FF;&#x8D44;&#x6E90;&#x540D;&#x79F0;&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;OPTIONS&#x8BF7;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x6D4B;&#x8BD5;&#x670D;&#x52A1;&#x5668;&#x529F;&#x80FD;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x3002;</p>
<p>HEAD:<br>HEAD&#x65B9;&#x6CD5;&#x4E0E;GET&#x65B9;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x662F;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x51FA;&#x6307;&#x5B9A;&#x8D44;&#x6E90;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5728;&#x54CD;&#x5E94;HEAD&#x8BF7;&#x6C42;&#x65F6;&#x4E0D;&#x4F1A;&#x56DE;&#x4F20;&#x8D44;&#x6E90;&#x7684;&#x5185;&#x5BB9;&#x90E8;&#x5206;&#xFF0C;&#x5373;&#xFF1A;&#x54CD;&#x5E94;&#x4E3B;&#x4F53;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0D;&#x4F20;&#x8F93;&#x5168;&#x90E8;&#x5185;&#x5BB9;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x670D;&#x52A1;&#x5668;&#x7684;&#x54CD;&#x5E94;&#x5934;&#x4FE1;&#x606F;&#x3002;HEAD&#x65B9;&#x6CD5;&#x5E38;&#x88AB;&#x7528;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6027;&#x80FD;&#x3002;</p>
<p>GET:<br>GET&#x8BF7;&#x6C42;&#x4F1A;&#x663E;&#x793A;&#x8BF7;&#x6C42;&#x6307;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;GET&#x65B9;&#x6CD5;&#x5E94;&#x8BE5;&#x53EA;&#x7528;&#x4E8E;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x53D6;&#xFF0C;&#x800C;&#x4E0D;&#x5E94;&#x5F53;&#x7528;&#x4E8E;&#x4F1A;&#x4EA7;&#x751F;&#x526F;&#x4F5C;&#x7528;&#x7684;&#x975E;&#x5E42;&#x7B49;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#x3002;&#x5B83;&#x671F;&#x671B;&#x7684;&#x5E94;&#x8BE5;&#x662F;&#x800C;&#x4E14;&#x5E94;&#x8BE5;&#x662F;&#x5B89;&#x5168;&#x7684;&#x548C;&#x5E42;&#x7B49;&#x7684;&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x5B89;&#x5168;&#x6307;&#x7684;&#x662F;&#xFF0C;&#x8BF7;&#x6C42;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x8D44;&#x6E90;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<p>POST:<br>POST&#x8BF7;&#x6C42;&#x4F1A; &#x5411;&#x6307;&#x5B9A;&#x8D44;&#x6E90;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#xFF0C;&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5982;&#xFF1A;&#x8868;&#x5355;&#x6570;&#x636E;&#x63D0;&#x4EA4;&#x3001;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x7B49;&#xFF0C;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x5305;&#x542B;&#x5728;&#x8BF7;&#x6C42;&#x4F53;&#x4E2D;&#x3002;POST&#x65B9;&#x6CD5;&#x662F;&#x975E;&#x5E42;&#x7B49;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x53EF;&#x80FD;&#x4F1A;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x8D44;&#x6E90;&#x6216;/&#x548C;&#x4FEE;&#x6539;&#x73B0;&#x6709;&#x8D44;&#x6E90;&#x3002;</p>
<p>PUT/PATCH:<br>PUT&#x8BF7;&#x6C42;&#x4F1A;&#x8EAB;&#x5411;&#x6307;&#x5B9A;&#x8D44;&#x6E90;&#x4F4D;&#x7F6E;&#x4E0A;&#x4F20;&#x5176;&#x6700;&#x65B0;&#x5185;&#x5BB9;&#xFF0C;PUT&#x65B9;&#x6CD5;&#x662F;&#x5E42;&#x7B49;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x901A;&#x8FC7;&#x8BE5;&#x65B9;&#x6CD5;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x5C06;&#x6307;&#x5B9A;&#x8D44;&#x6E90;&#x7684;&#x6700;&#x65B0;&#x6570;&#x636E;&#x4F20;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x53D6;&#x4EE3;&#x6307;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>PATCH&#x662F;&#x5BF9;PUT&#x65B9;&#x6CD5;&#x7684;&#x8865;&#x5145;&#xFF0C;&#x7528;&#x6765;&#x5BF9;&#x5DF2;&#x77E5;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x5C40;&#x90E8;&#x66F4;&#x65B0;</p>
<p>&#x4E8C;&#x8005;&#x7684;&#x4E0D;&#x540C;&#x70B9;:  </p>
<p>1.PATCH&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x8D44;&#x6E90;&#x7684;&#x90E8;&#x5206;&#x66F4;&#x65B0;&#xFF0C;&#x800C;PUT&#x4E00;&#x822C;&#x7528;&#x4E8E;&#x8D44;&#x6E90;&#x7684;&#x6574;&#x4F53;&#x66F4;&#x65B0;&#x3002;  </p>
<p>2.&#x5F53;&#x8D44;&#x6E90;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;PATCH&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x800C;PUT&#x53EA;&#x4F1A;&#x5BF9;&#x5DF2;&#x5728;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;  </p>
<p>3.PUT &#x662F;&#x5E42;&#x7B49;&#x7684;,PATCH&#x662F;&#x975E;&#x5E42;&#x7B49;&#x7684;  </p>
<p>4.PATCH&#x65B9;&#x6CD5;&#x51FA;&#x73B0;&#x7684;&#x8F83;&#x665A;&#xFF0C;&#x5B83;&#x5728;2010&#x5E74;&#x7684;RFC 5789&#x6807;&#x51C6;&#x4E2D;&#x88AB;&#x5B9A;&#x4E49;&#x3002;\</p>
<p>DELETE:<br>&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x5668;&#x5220;&#x9664;&#x8BF7;&#x6C42;&#x7684;URI&#x6240;&#x6807;&#x8BC6;&#x7684;&#x8D44;&#x6E90;,&#x7528;&#x4E8E;&#x5220;&#x9664;</p>
<p>TRACE:<br>TRACE&#x8BF7;&#x6C42;&#x670D;&#x52A1;&#x5668;&#x56DE;&#x663E;&#x5176;&#x6536;&#x5230;&#x7684;&#x8BF7;&#x6C42;&#x4FE1;&#x606F;,&#x8BE5;&#x65B9;&#x6CD5;&#x4E3B;&#x8981;&#x7528;&#x4E8E;HTTP&#x8BF7;&#x6C42;&#x7684;&#x6D4B;&#x8BD5;&#x6216;&#x8BCA;&#x65AD;</p>
<p>CONNECT:<br>CONNECT&#x65B9;&#x6CD5;&#x662F;HTTP/1.1&#x534F;&#x8BAE;&#x9884;&#x7559;&#x7684;&#xFF0C;&#x80FD;&#x591F;&#x5C06;&#x8FDE;&#x63A5;&#x6539;&#x4E3A;&#x7BA1;&#x9053;&#x65B9;&#x5F0F;&#x7684;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x3002;&#x901A;&#x5E38;&#x7528;&#x4E8E;SSL&#x52A0;&#x5BC6;&#x670D;&#x52A1;&#x5668;&#x7684;&#x94FE;&#x63A5;&#x4E0E;&#x975E;&#x52A0;&#x5BC6;&#x7684;HTTP&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x7684;&#x901A;&#x4FE1;&#x3002;\</p>
<p><strong>&#x6211;&#x4EEC;&#x770B;&#x770B;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x5BF9;&#x5E42;&#x7B49;&#x7684;&#x89E3;&#x91CA;:</strong>  </p>
<p>&#x5E42;&#x7B49;&#xFF08;idempotent&#x3001;idempotence&#xFF09;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x5B66;&#x4E0E;&#x8BA1;&#x7B97;&#x673A;&#x5B66;&#x6982;&#x5FF5;&#xFF0C;&#x5E38;&#x89C1;&#x4E8E;&#x62BD;&#x8C61;&#x4EE3;&#x6570;&#x4E2D;&#x3002; &#x5728;&#x7F16;&#x7A0B;&#x4E2D;&#x4E00;&#x4E2A;&#x5E42;&#x7B49;&#x64CD;&#x4F5C;&#x7684;&#x7279;&#x70B9;&#x662F;&#x5176;&#x4EFB;&#x610F;&#x591A;&#x6B21;&#x6267;&#x884C;&#x6240;&#x4EA7;&#x751F;&#x7684;&#x5F71;&#x54CD;&#x5747;&#x4E0E;&#x4E00;&#x6B21;&#x6267;&#x884C;&#x7684;&#x5F71;&#x54CD;&#x76F8;&#x540C;&#x3002; &#x5E42;&#x7B49;&#x51FD;&#x6570;&#xFF0C;&#x6216;&#x5E42;&#x7B49;&#x65B9;&#x6CD5;&#xFF0C;&#x662F;&#x6307;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F8;&#x540C;&#x53C2;&#x6570;&#x91CD;&#x590D;&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x80FD;&#x83B7;&#x5F97;&#x76F8;&#x540C;&#x7ED3;&#x679C;&#x7684;&#x51FD;&#x6570;&#x3002; &#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x72B6;&#x6001;&#xFF0C;&#x4E5F;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x91CD;&#x590D;&#x6267;&#x884C;&#x4F1A;&#x5BF9;&#x7CFB;&#x7EDF;&#x9020;&#x6210;&#x6539;&#x53D8;&#x3002;<br>&#x6240;&#x4EE5;,&#x5BF9;&#x4E8E;&#x7F16;&#x8F91;&#x8868;&#x5355;&#x7684;&#x8BF7;&#x6C42;,&#x6211;&#x4EEC;&#x4F7F;&#x7528;PUT,&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x505A;&#x4EFB;&#x4F55;&#x4FDD;&#x62A4;&#x64CD;&#x4F5C;,&#x5373;&#x591A;&#x6B21;&#x91CD;&#x590D;&#x63D0;&#x4EA4;&#x4E5F;&#x4E0D;&#x4F1A;&#x5BF9;&#x7CFB;&#x7EDF;&#x9020;&#x6210;&#x4EFB;&#x4F55;&#x6539;&#x53D8;,&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x6760;&#x7CBE;&#x8BF4;:&#x6211;&#x662F;&#x7528;POST&#x8BF7;&#x6C42;&#x540E;&#x53F0;&#x63A5;&#x53E3;,&#x7136;&#x540E;&#x4F7F;&#x7528;update&#x7684;SQL&#x66F4;&#x65B0;&#x6570;&#x636E;&#x5E93;&#x4E0D;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x5417;?<br>&#x6839;&#x636E;REST&#x89C4;&#x8303;&#x63A5;&#x53E3;:&#x6BCF;&#x4E2A;&#x8D44;&#x6E90;&#x90FD;&#x6709;&#x5BF9;&#x5E94;&#x7684;URI&#xFF0C;&#x4E0D;&#x540C;&#x7684;HTTP Method&#x5BF9;&#x5E94;&#x7684;&#x5BF9;&#x8D44;&#x6E90;&#x4E0D;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;GET&#xFF08;&#x8BFB;&#x53D6;&#x8D44;&#x6E90;&#x4FE1;&#x606F;&#xFF09;&#x3001;POST&#xFF08;&#x6DFB;&#x52A0;&#x8D44;&#x6E90;&#xFF09;&#x3001;PUT&#xFF08;&#x66F4;&#x65B0;&#x8D44;&#x6E90;&#x4FE1;&#x606F;&#xFF09;&#x3001;DELETE&#xFF08;&#x5220;&#x9664;&#x8D44;&#x6E90;&#xFF09;&#x3002;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x8BED;&#x8A00;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;HTTP&#x534F;&#x8BAE;&#x540C;REST&#x670D;&#x52A1;&#x5668;&#x901A;&#x4FE1;&#x3002;<br>&#x6240;&#x4EE5;POST&#x8BF7;&#x6C42;&#x6700;&#x597D;&#x53EA;&#x662F;&#x7528;&#x6765;&#x6DFB;&#x52A0;&#x8D44;&#x6E90;,PUT&#x8BF7;&#x6C42;&#x7528;&#x6765;&#x66F4;&#x65B0;&#x8D44;&#x6E90;&#x4FE1;&#x606F;&#x3002;</p>
<h1 id="&#x4E8C;-&#x89E3;&#x51B3;&#x65B9;&#x6CD5;"><a href="#&#x4E8C;-&#x89E3;&#x51B3;&#x65B9;&#x6CD5;" class="headerlink" title="&#x4E8C; &#x89E3;&#x51B3;&#x65B9;&#x6CD5;"></a>&#x4E8C; &#x89E3;&#x51B3;&#x65B9;&#x6CD5;</h1><h1 id="1-&#x786E;&#x4FDD;&#x6309;&#x94AE;&#x53EA;&#x80FD;&#x70B9;&#x51FB;&#x4E00;&#x6B21;"><a href="#1-&#x786E;&#x4FDD;&#x6309;&#x94AE;&#x53EA;&#x80FD;&#x70B9;&#x51FB;&#x4E00;&#x6B21;" class="headerlink" title="1 &#x786E;&#x4FDD;&#x6309;&#x94AE;&#x53EA;&#x80FD;&#x70B9;&#x51FB;&#x4E00;&#x6B21;"></a><strong>1 &#x786E;&#x4FDD;&#x6309;&#x94AE;&#x53EA;&#x80FD;&#x70B9;&#x51FB;&#x4E00;&#x6B21;</strong></h1><p>&#x5982;&#x7528;&#x6237;&#x70B9;&#x51FB;&#x67E5;&#x8BE2;&#x6216;&#x63D0;&#x4EA4;&#x8BA2;&#x5355;&#x53F7;&#xFF0C;&#x6309;&#x94AE;&#x53D8;&#x7070;&#x6216;&#x9875;&#x9762;&#x663E;&#x793A;loding&#x72B6;&#x6001;(&#x4F8B;&#x5982;&#x5C55;&#x793A;&#x4F8B;&#x5982;&#x906E;&#x7F69;&#x5C42;&#x7B49;&#x7EC4;&#x4EF6;)&#x4E13;&#x7528;&#x4E8E;&#x9632;&#x6B62;&#x7528;&#x6237;&#x91CD;&#x590D;&#x70B9;&#x51FB;&#x3002;</p>
<h1 id="2-&#x5728;Session&#x5B58;&#x653E;&#x552F;&#x4E00;&#x6807;&#x8BC6;"><a href="#2-&#x5728;Session&#x5B58;&#x653E;&#x552F;&#x4E00;&#x6807;&#x8BC6;" class="headerlink" title="2 &#x5728;Session&#x5B58;&#x653E;&#x552F;&#x4E00;&#x6807;&#x8BC6;"></a><strong>2 &#x5728;Session&#x5B58;&#x653E;&#x552F;&#x4E00;&#x6807;&#x8BC6;</strong></h1><p>&#x7528;&#x6237;&#x8FDB;&#x5165;&#x9875;&#x9762;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x7684;&#x6807;&#x8BC6;&#x503C;&#xFF0C;&#x5B58;&#x5230;session&#x4E2D;&#xFF0C;&#x540C;&#x65F6;&#x5C06;&#x5B83;&#x5199;&#x5165;&#x8868;&#x5355;&#x7684;&#x9690;&#x85CF;&#x57DF;&#x4E2D;&#xFF0C;&#x7528;&#x6237;&#x5728;&#x8F93;&#x5165;&#x4FE1;&#x606F;&#x540E;&#x70B9;&#x51FB;&#x63D0;&#x4EA4;&#xFF0C;&#x5728;&#x670D;&#x52A1;&#x7AEF;&#x83B7;&#x53D6;&#x8868;&#x5355;&#x7684;&#x9690;&#x85CF;&#x57DF;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x6765;&#x4E0E;session&#x4E2D;&#x7684;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#x503C;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x76F8;&#x7B49;&#x5219;&#x8BF4;&#x660E;&#x662F;&#x9996;&#x6B21;&#x63D0;&#x4EA4;&#xFF0C;&#x5C31;&#x5904;&#x7406;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#xFF0C;&#x7136;&#x540E;&#x5220;&#x9664;session&#x552F;&#x4E00;&#x6807;&#x8BC6;&#xFF0C;&#x4E0D;&#x76F8;&#x7B49;&#x5219;&#x6807;&#x8BC6;&#x91CD;&#x590D;&#x63D0;&#x4EA4;&#xFF0C;&#x5FFD;&#x7565;&#x672C;&#x6B21;&#x5904;&#x7406;&#x3002;</p>
<h1 id="3-&#x7F13;&#x5B58;&#x961F;&#x5217;"><a href="#3-&#x7F13;&#x5B58;&#x961F;&#x5217;" class="headerlink" title="3 &#x7F13;&#x5B58;&#x961F;&#x5217;"></a><strong>3 &#x7F13;&#x5B58;&#x961F;&#x5217;</strong></h1><p>&#x5C06;&#x8BF7;&#x6C42;&#x5FEB;&#x901F;&#x7684;&#x63A5;&#x6536;&#x4E0B;&#x6765;&#xFF0C;&#x653E;&#x5165;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x540E;&#x7EED;&#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x5904;&#x7406;&#x961F;&#x5217;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8FC7;&#x6EE4;&#x6389;&#x91CD;&#x590D;&#x8BF7;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;LinkedList&#x6765;&#x5B9E;&#x73B0;&#x961F;&#x5217;&#xFF0C;&#x4E00;&#x4E2A;HashSet&#x6765;&#x5B9E;&#x73B0;&#x53BB;&#x91CD;&#x3002;&#x6B64;&#x65B9;&#x6CD5;&#x4F18;&#x70B9;&#x662F;&#x5F02;&#x6B65;&#x5904;&#x7406;&#x3001;&#x9AD8;&#x541E;&#x5410;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x80FD;&#x53CA;&#x65F6;&#x8FD4;&#x56DE;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#xFF0C;&#x9700;&#x8981;&#x540E;&#x7EED;&#x8F6E;&#x8BE2;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x3002;</p>
<h1 id="4-token-redis"><a href="#4-token-redis" class="headerlink" title="4 token+redis"></a><strong>4 token+redis</strong></h1><p>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5206;&#x6210;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;&#x83B7;&#x53D6;token&#x548C;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;&#x9636;&#x6BB5;&#x3002;</p>
<p>&#x4EE5;&#x652F;&#x4ED8;&#x4E3A;&#x4F8B;:  </p>
<p>&#x7B2C;&#x4E00;&#x9636;&#x6BB5;&#xFF0C;&#x5728;&#x8FDB;&#x5165;&#x5230;&#x63D0;&#x4EA4;&#x8BA2;&#x5355;&#x9875;&#x9762;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x8BA2;&#x5355;&#x7CFB;&#x7EDF;&#x6839;&#x636E;&#x5F53;&#x524D;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x5411;&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#x53D1;&#x8D77;&#x4E00;&#x6B21;&#x7533;&#x8BF7;token&#x8BF7;&#x6C42;&#xFF0C;&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#x5C06;token&#x4FDD;&#x5B58;&#x5230;redis&#x4E2D;&#xFF0C;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#x652F;&#x4ED8;&#x4F7F;&#x7528;<br>&#x7B2C;&#x4E8C;&#x9636;&#x6BB5;&#xFF0C;&#x524D;&#x7AEF;&#x8BA2;&#x5355;&#x7CFB;&#x7EDF;&#x62FF;&#x7740;&#x7533;&#x8BF7;&#x5230;&#x7684;token&#x53D1;&#x8D77;&#x652F;&#x4ED8;&#x8BF7;&#x6C42;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x5220;&#x9664;redis&#x4E2D;&#x7684;token,&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#x4F1A;&#x68C0;&#x67E5;redis&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x8BE5;token&#xFF0C;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x8868;&#x793A;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x652F;&#x4ED8;&#xFF0C;&#x5F00;&#x59CB;&#x5904;&#x7406;&#x652F;&#x4ED8;&#x903B;&#x8F91;&#xFF0C;&#x5904;&#x7406;&#x5B8C;&#x6210;&#x540E;&#x5220;&#x9664;redis&#x4E2D;&#x7684;token<br>&#x5F53;&#x91CD;&#x590D;&#x8BF7;&#x6C42;&#x65F6;&#x5019;&#xFF0C;&#x68C0;&#x67E5;redis&#x4E2D;token&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x82E5;&#x4E0D;&#x5B58;&#x5728;,&#x5219;&#x4E3A;&#x91CD;&#x590D;&#x8BF7;&#x6C42;</p>
<h1 id="5-&#x57FA;&#x4E8E;&#x4E50;&#x89C2;&#x9501;&#x6765;&#x5B9E;&#x73B0;"><a href="#5-&#x57FA;&#x4E8E;&#x4E50;&#x89C2;&#x9501;&#x6765;&#x5B9E;&#x73B0;" class="headerlink" title="5 &#x57FA;&#x4E8E;&#x4E50;&#x89C2;&#x9501;&#x6765;&#x5B9E;&#x73B0;"></a><strong>5 &#x57FA;&#x4E8E;&#x4E50;&#x89C2;&#x9501;&#x6765;&#x5B9E;&#x73B0;</strong></h1><p>&#x5982;&#x679C;&#x66F4;&#x65B0;&#x5DF2;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#x66F4;&#x65B0;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x8868;&#x7ED3;&#x6784;&#x65F6;&#x4F7F;&#x7528;version&#x6765;&#x505A;&#x4E50;&#x89C2;&#x9501;&#xFF0C;&#x8FD9;&#x6837;&#x65E2;&#x80FD;&#x4FDD;&#x8BC1;&#x6267;&#x884C;&#x6548;&#x7387;&#xFF0C;&#x53C8;&#x80FD;&#x4FDD;&#x8BC1;&#x5E42;&#x7B49;&#x3002;&#x4E50;&#x89C2;&#x9501;version&#x5B57;&#x6BB5;&#x5728;&#x66F4;&#x65B0;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x65F6;&#x503C;&#x8981;&#x81EA;&#x589E;&#x3002;</p>
<p>sql&#x4E3A;&#xFF1A;update table set version = version + 1 where id =1 and version =#{version }</p>
<h1 id="6-Axios&#x62E6;&#x622A;&#x5668;"><a href="#6-Axios&#x62E6;&#x622A;&#x5668;" class="headerlink" title="6 Axios&#x62E6;&#x622A;&#x5668;"></a><strong>6 Axios&#x62E6;&#x622A;&#x5668;</strong></h1><p>Axios&#x7684;&#x4ECB;&#x7ECD;:<br>axios &#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7684; HTTP&#x5BA2;&#x6237;&#x7AEF;</p>
<p>&#x57FA;&#x4E8E; XMLHttpRequest &#x670D;&#x52A1;&#x6765;&#x6267;&#x884C; HTTP &#x8BF7;&#x6C42;&#xFF0C;&#x652F;&#x6301;&#x4E30;&#x5BCC;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x652F;&#x6301; Promise&#xFF0C;&#x652F;&#x6301;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x548C; Node.js &#x7AEF;&#x3002;&#x81EA;Vue2.0&#x8D77;&#xFF0C;&#x5C24;&#x5927;&#x5BA3;&#x5E03;&#x53D6;&#x6D88;&#x5BF9; vue-resource &#x7684;&#x5B98;&#x65B9;&#x63A8;&#x8350;&#xFF0C;&#x8F6C;&#x800C;&#x63A8;&#x8350; axios&#x3002;&#x73B0;&#x5728; axios &#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x5927;&#x90E8;&#x5206; Vue &#x5F00;&#x53D1;&#x8005;&#x7684;&#x9996;&#x9009;</p>
<p><strong>&#x7279;&#x6027;&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;1 &#x4ECE;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x521B;&#x5EFA; XMLHttpRequests</span><br><span class="line">2 &#x4ECE; node.js &#x521B;&#x5EFA; http&#x8BF7;&#x6C42;</span><br><span class="line">3 &#x652F;&#x6301; Promise API</span><br><span class="line">4 &#x62E6;&#x622A;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;</span><br><span class="line">5 &#x8F6C;&#x6362;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x548C;&#x54CD;&#x5E94;&#x6570;&#x636E;</span><br><span class="line">6 &#x53D6;&#x6D88;&#x8BF7;&#x6C42;</span><br><span class="line">7 &#x81EA;&#x52A8;&#x8F6C;&#x6362;JSON &#x6570;&#x636E;</span><br><span class="line">8 &#x5BA2;&#x6237;&#x7AEF;&#x652F;&#x6301;&#x9632;&#x5FA1;XSRF</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x610F;&#x8FD9;&#x4E2A;&#x7279;&#x6027;6&#x53D6;&#x6D88;&#x8BF7;&#x6C42;:</p>
<h2 id="6-1-&#x57FA;&#x672C;&#x4F7F;&#x7528;"><a href="#6-1-&#x57FA;&#x672C;&#x4F7F;&#x7528;" class="headerlink" title="6.1 &#x57FA;&#x672C;&#x4F7F;&#x7528;"></a><strong>6.1 &#x57FA;&#x672C;&#x4F7F;&#x7528;</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;//&#x5B89;&#x88C5;</span><br><span class="line">npm install axios --S</span><br><span class="line">//&#x5BFC;&#x5165;</span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">//&#x5C01;&#x88C5;Axios</span><br><span class="line">//&#x5229;&#x7528;node&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6765;&#x4F5C;&#x5224;&#x65AD;&#xFF0C;&#x7528;&#x6765;&#x533A;&#x5206;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#x3001;&#x751F;&#x4EA7;&#x73AF;&#x5883;</span><br><span class="line">if (process.env.NODE_ENV === &apos;development&apos;) {</span><br><span class="line">  axios.defaults.baseURL = &apos;http://dev.xxx.com&apos;</span><br><span class="line">} else if (process.env.NODE_ENV === &apos;production&apos;) {</span><br><span class="line">  axios.defaults.baseURL = &apos;http://prod.xxx.com&apos;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="6-2-&#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x6587;&#x4EF6;&#x5939;"><a href="#6-2-&#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x6587;&#x4EF6;&#x5939;" class="headerlink" title="6.2 &#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x6587;&#x4EF6;&#x5939;"></a><strong>6.2 &#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x6587;&#x4EF6;&#x5939;</strong></h2><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/ea1a6dd551c8ccd18a9834b13d2bebad94b702416e9981111093b3ee9e98df18" alt></p>
<h2 id="6-3-&#x5728;lib&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;axios-js&#x6587;&#x4EF6;"><a href="#6-3-&#x5728;lib&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;axios-js&#x6587;&#x4EF6;" class="headerlink" title="6.3 &#x5728;lib&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;axios.js&#x6587;&#x4EF6;:"></a><strong>6.3 &#x5728;lib&#x76EE;&#x5F55;&#x4E0B;&#x521B;&#x5EFA;axios.js&#x6587;&#x4EF6;:</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;/* eslint-disable */</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import { baseURL } from &quot;@/config&quot;;</span><br><span class="line">import md5 from &quot;js-md5&quot;;</span><br><span class="line">// &#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8BB0;&#x5F55;map&#x7ED3;&#x6784;</span><br><span class="line">let pending = {};</span><br><span class="line">//&#x53D6;&#x6D88;&#x8BF7;&#x6C42;</span><br><span class="line">let CancelToken = axios.CancelToken;</span><br><span class="line">class HttpRequest {</span><br><span class="line">    constructor(baseUrl = baseURL) {</span><br><span class="line">        this.baseUrl = baseUrl;</span><br><span class="line">        this.queue = {};</span><br><span class="line">    }</span><br><span class="line">    getInsideConfig(auth) {</span><br><span class="line">        var config = {</span><br><span class="line">            baseURL: this.baseUrl,</span><br><span class="line">            headers: {</span><br><span class="line">                Authorization: auth</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        return config;</span><br><span class="line">    }</span><br><span class="line">    distory(url) {</span><br><span class="line">        delete this.queue[url];</span><br><span class="line">        if (!Object.keys(this.queue).length) {</span><br><span class="line">            //Spin.hide()</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    interceptors(instance, url) {</span><br><span class="line">        instance.interceptors.request.use(</span><br><span class="line">            config =&gt; {</span><br><span class="line">                //&#x68C0;&#x67E5;json&#x6570;&#x636E;&#x4E2D;&#x662F;&#x5426;&#x5305;&#x542B;repetitiveRequestLimit&#x5C5E;&#x6027;,&#x82E5;&#x5305;&#x542B;,&#x5219;&#x4E3A;&#x6B64;&#x8BF7;&#x6C42;&#x6DFB;&#x52A0;&#x5E42;&#x7B49;&#x6821;&#x9A8C;</span><br><span class="line">                if(config.data.hasOwnProperty(&quot;repetitiveRequestLimit&quot;)){</span><br><span class="line">                    let key = md5(`${config.url}&amp;${config.method}&amp;${JSON.stringify(config.data)}`);</span><br><span class="line">                    config.cancelToken = new CancelToken(c =&gt; {</span><br><span class="line">                        if (pending[key]) {</span><br><span class="line">                            if (Date.now() - pending[key] &gt; 5000) {</span><br><span class="line">                                // &#x8D85;&#x8FC7;5s&#xFF0C;&#x5220;&#x9664;&#x5BF9;&#x5E94;&#x7684;&#x8BF7;&#x6C42;&#x8BB0;&#x5F55;&#xFF0C;&#x91CD;&#x65B0;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;</span><br><span class="line">                                delete pending[key];</span><br><span class="line">                            } else {</span><br><span class="line">                                // 5s&#x4EE5;&#x5185;&#x7684;&#x5DF2;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#xFF0C;&#x53D6;&#x6D88;&#x91CD;&#x590D;&#x8BF7;&#x6C42;</span><br><span class="line">                                c(&quot;repeated&quot;);</span><br><span class="line">                            }</span><br><span class="line">                        }</span><br><span class="line">                    });</span><br><span class="line">                    // &#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5DF2;&#x5B58;&#x5728;&#x5219;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x6233;</span><br><span class="line">                    pending[key] = Date.now();</span><br><span class="line">                }else{</span><br><span class="line">                    console.log(&apos;&#x6211;&#x662F;&#x6CA1;&#x6709;repetitiveRequestLimit&#x7684;&#x8BF7;&#x6C42;&apos;)</span><br><span class="line">                }</span><br><span class="line">                return config;</span><br><span class="line">            },</span><br><span class="line">            error =&gt; {</span><br><span class="line">                return Promise.reject(error);</span><br><span class="line">            }</span><br><span class="line">        );</span><br><span class="line">        instance.interceptors.response.use(</span><br><span class="line">            res =&gt; {</span><br><span class="line">                this.distory(url);</span><br><span class="line">                var { data } = res;</span><br><span class="line">                return data;</span><br><span class="line">            },</span><br><span class="line">            error =&gt; {</span><br><span class="line">                // &#x9519;&#x8BEF;&#x7684;&#x8BF7;&#x6C42;&#x7ED3;&#x679C;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x6839;&#x636E;&#x540E;&#x53F0;&#x7684;&#x72B6;&#x6001;&#x7801;&#x6765;&#x51B3;&#x5B9A;&#x9519;&#x8BEF;&#x7684;&#x8F93;&#x51FA;&#x4FE1;&#x606F;</span><br><span class="line">                if (error &amp;&amp; error.response) {</span><br><span class="line">                    switch (error.response.status) {</span><br><span class="line">                        case 400:</span><br><span class="line">                            error.message = &quot;&#x9519;&#x8BEF;&#x8BF7;&#x6C42;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 401:</span><br><span class="line">                            error.message = &quot;&#x672A;&#x6388;&#x6743;&#xFF0C;&#x8BF7;&#x91CD;&#x65B0;&#x767B;&#x5F55;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 403:</span><br><span class="line">                            error.message = &quot;&#x62D2;&#x7EDD;&#x8BBF;&#x95EE;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 404:</span><br><span class="line">                            error.message = &quot;&#x8BF7;&#x6C42;&#x9519;&#x8BEF;,&#x672A;&#x627E;&#x5230;&#x8BE5;&#x8D44;&#x6E90;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 405:</span><br><span class="line">                            error.message = &quot;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x672A;&#x5141;&#x8BB8;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 408:</span><br><span class="line">                            error.message = &quot;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 500:</span><br><span class="line">                            error.message = &quot;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x51FA;&#x9519;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 501:</span><br><span class="line">                            error.message = &quot;&#x7F51;&#x7EDC;&#x672A;&#x5B9E;&#x73B0;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 502:</span><br><span class="line">                            error.message = &quot;&#x7F51;&#x7EDC;&#x9519;&#x8BEF;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 503:</span><br><span class="line">                            error.message = &quot;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 504:</span><br><span class="line">                            error.message = &quot;&#x7F51;&#x7EDC;&#x8D85;&#x65F6;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        case 505:</span><br><span class="line">                            error.message = &quot;http&#x7248;&#x672C;&#x4E0D;&#x652F;&#x6301;&#x8BE5;&#x8BF7;&#x6C42;&quot;;</span><br><span class="line">                            break;</span><br><span class="line">                        default:</span><br><span class="line">                            error.message = `&#x8FDE;&#x63A5;&#x9519;&#x8BEF;${error.response.status}`;</span><br><span class="line">                    }</span><br><span class="line">                } else {</span><br><span class="line">                    error.message = &quot;&#x8FDE;&#x63A5;&#x5230;&#x670D;&#x52A1;&#x5668;&#x5931;&#x8D25;&quot;;</span><br><span class="line">                }</span><br><span class="line">                return Promise.reject(error.message);</span><br><span class="line">            }</span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">    request(options) {</span><br><span class="line">        var instance = axios.create();</span><br><span class="line">        options = Object.assign(this.getInsideConfig(localStorage.getItem(&quot;Authorization&quot;)), options);</span><br><span class="line">        this.interceptors(instance, options.url);</span><br><span class="line">        return instance(options);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">export default HttpRequest;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-config-index-js"><a href="#6-4-config-index-js" class="headerlink" title="6.4 config/index.js"></a><strong>6.4 config/index.js</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;//&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x6839;&#x636E;node&#x73AF;&#x5883;&#x6765;&#x8BBE;&#x7F6E;&#x540E;&#x53F0;Url</span><br><span class="line">//&#x5229;&#x7528;node&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x6765;&#x4F5C;&#x5224;&#x65AD;&#xFF0C;&#x7528;&#x6765;&#x533A;&#x5206;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#x3001;&#x751F;&#x4EA7;&#x73AF;&#x5883; </span><br><span class="line">/* eslint-disable */</span><br><span class="line">export var baseURL = process.env.NODE_ENV === &apos;development&apos;?&apos; http://localhost:8080&apos;:&apos; http://localhost:8081&apos;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-api-baseIndex-js"><a href="#6-5-api-baseIndex-js" class="headerlink" title="6.5 api/baseIndex.js"></a><strong>6.5 api/baseIndex.js</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;/* eslint-disable */</span><br><span class="line">import HttpRequest from &quot;@/lib/axios&quot;;</span><br><span class="line">var axios = new HttpRequest();</span><br><span class="line">export default axios;</span><br></pre></td></tr></table></figure>

<h2 id="6-6-api-requestdemo1"><a href="#6-6-api-requestdemo1" class="headerlink" title="6.6 api/requestdemo1"></a><strong>6.6 api/requestdemo1</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">php&#x590D;&#x5236;&#x4EE3;&#x7801;/* eslint-disable */</span><br><span class="line">import axios from &apos;./baseIndex&apos;</span><br><span class="line">//&#x539F;&#x751F;redis&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6D4B;&#x8BD5;</span><br><span class="line">export var getRedisLock = (object) =&gt; {</span><br><span class="line">  return axios.request({</span><br><span class="line">    url: &quot;/demo1/testRedisLock&quot;,</span><br><span class="line">    method: &quot;post&quot;,</span><br><span class="line">    data:object</span><br><span class="line">  });</span><br><span class="line">};</span><br><span class="line">//redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6D4B;&#x8BD5;</span><br><span class="line">export var getRedissonLock = (object) =&gt; {</span><br><span class="line">    return axios.request({</span><br><span class="line">        url: &quot;/demo1/testRedisson&quot;,</span><br><span class="line">        method: &quot;post&quot;,</span><br><span class="line">        data:object</span><br><span class="line">    });</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h2 id="6-7-vue&#x9875;&#x9762;&#x5F15;&#x5165;"><a href="#6-7-vue&#x9875;&#x9762;&#x5F15;&#x5165;" class="headerlink" title="6.7 vue&#x9875;&#x9762;&#x5F15;&#x5165;"></a><strong>6.7 vue&#x9875;&#x9762;&#x5F15;&#x5165;</strong></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;home-container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;home-content&quot;&gt;</span><br><span class="line">            &lt;Button @click=&quot;getUserData&quot;&gt;redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6D4B;&#x8BD5;&lt;/Button&gt;</span><br><span class="line">            &lt;Button @click=&quot;getUserData1&quot;&gt;redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6D4B;&#x8BD5;&lt;/Button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">/* eslint-disable */</span><br><span class="line">import {getRedisLock,getRedissonLock} from &apos;@/api/requestdemo1.js&apos;</span><br><span class="line">export default {</span><br><span class="line">    name: &apos;home&apos;,</span><br><span class="line">    data() {</span><br><span class="line">        return {</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">        getUserData() {</span><br><span class="line">            let person={</span><br><span class="line">                requestName:&apos;&#x8BF7;&#x6C42;&#x540D;&#x79F0;&apos;,</span><br><span class="line">                name:&apos;&#x5F90;&#x8D85;&apos;,</span><br><span class="line">                salary:&quot;10000&quot;,</span><br><span class="line">                age:23,</span><br><span class="line">                //&#x52A0;&#x4E0A;&#x6B64;&#x53C2;&#x6570;&#x4EE5;&#x540E;,axios&#x4F1A;&#x5BF9;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x5E42;&#x7B49;&#x64CD;&#x4F5C;,&#x5373;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x7684;&#x91CD;&#x590D;&#x8BF7;&#x6C42;&#x65E0;&#x6CD5;&#x53D1;&#x9001;&#x51FA;&#x53BB;</span><br><span class="line">                repetitiveRequestLimit:true</span><br><span class="line">            }</span><br><span class="line">            getRedisLock(person).then(res=&gt;{</span><br><span class="line">                console.log(res);</span><br><span class="line">            }).catch((e)=&gt;{</span><br><span class="line">                console.log(e);</span><br><span class="line">            }).finally(() =&gt; {</span><br><span class="line">                console.log(&apos;finish&apos;);</span><br><span class="line">            })</span><br><span class="line">        },</span><br><span class="line">        getUserData1(){</span><br><span class="line">            let person={</span><br><span class="line">                requestName:&apos;&#x8BF7;&#x6C42;&#x540D;&#x79F0;&apos;,</span><br><span class="line">                name:&apos;&#x5F90;&#x8D85;&apos;,</span><br><span class="line">                salary:&quot;10000&quot;,</span><br><span class="line">                age:23,</span><br><span class="line">                orderNumber:&quot;ADW12314123&quot;,</span><br><span class="line">                //&#x52A0;&#x4E0A;&#x6B64;&#x53C2;&#x6570;&#x4EE5;&#x540E;,axios&#x4F1A;&#x5BF9;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x5E42;&#x7B49;&#x64CD;&#x4F5C;,&#x5373;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x7684;&#x91CD;&#x590D;&#x8BF7;&#x6C42;&#x65E0;&#x6CD5;&#x53D1;&#x9001;&#x51FA;&#x53BB;</span><br><span class="line">                //repetitiveRequestLimit:true</span><br><span class="line">            }</span><br><span class="line">            getRedissonLock(person).then(res=&gt;{</span><br><span class="line">                console.log(res);</span><br><span class="line">            }).catch((e)=&gt;{</span><br><span class="line">                console.log(e);</span><br><span class="line">            }).finally(() =&gt; {</span><br><span class="line">                console.log(&apos;finish&apos;);</span><br><span class="line">            })</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.home-container {</span><br><span class="line">    padding: 10px;</span><br><span class="line">    padding-top: 5px;</span><br><span class="line">}</span><br><span class="line">.home-content {</span><br><span class="line">    padding: 10px;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">    background: #fff;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-8-&#x6D4B;&#x8BD5;"><a href="#6-8-&#x6D4B;&#x8BD5;" class="headerlink" title="6.8 &#x6D4B;&#x8BD5;"></a><strong>6.8 &#x6D4B;&#x8BD5;</strong></h2><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d644508a686309ecc83edc5b4f40bf6b81dcdab0c98e76bc7270d5fa17801092" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b3b37dd56887762e172cef58958de398e51184faa8347b71162f73dd32c4c928" alt></p>
<h1 id="7-Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;"><a href="#7-Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;" class="headerlink" title="7 Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;"></a><strong>7 Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;</strong></h1><p>&#x9501;&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5728;&#x7A0B;&#x5E8F;&#x4E2D;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x540C;&#x6B65;&#x5DE5;&#x5177;&#xFF0C;&#x4FDD;&#x8BC1;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BBF;&#x95EE;&#xFF0C;Java&#x4E2D;&#x7684;&#x9501;&#x6211;&#x4EEC;&#x90FD;&#x5F88;&#x719F;&#x6089;&#x4E86;&#xFF0C;&#x50CF;synchronized &#x3001;Lock&#x90FD;&#x662F;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x4F46;&#x662F;Java&#x7684;&#x9501;&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x5355;&#x673A;&#x7684;&#x65F6;&#x5019;&#x6709;&#x6548;&#xFF0C;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x73AF;&#x5883;&#x5C31;&#x65E0;&#x80FD;&#x4E3A;&#x529B;&#x4E86;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x89E3;&#x51B3;&#x8868;&#x5355;&#x91CD;&#x590D;&#x63D0;&#x4EA4;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x540E;&#x53F0;&#x89E3;&#x51B3;&#x65B9;&#x6848;,&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5230;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;</p>
<p><strong>&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x9700;&#x8981;&#x6EE1;&#x8DB3;&#x7684;&#x7279;&#x6027;&#x6709;&#x8FD9;&#x4E48;&#x51E0;&#x70B9;:</strong></p>
<p>1&#x3001;&#x4E92;&#x65A5;&#x6027;&#xFF1A;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x523B;&#xFF0C;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x53F0;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x5206;&#x5E03;&#x5F0F;&#x9501;</p>
<p>2&#x3001;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF1A;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x4E0D;&#x5F71;&#x54CD;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5C31;&#x9700;&#x8981;&#x5C06;&#x63D0;&#x4F9B;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x670D;&#x52A1;&#x4EE5;&#x96C6;&#x7FA4;&#x7684;&#x65B9;&#x5F0F;&#x90E8;&#x7F72;</p>
<p>3&#x3001;&#x9632;&#x6B62;&#x9501;&#x8D85;&#x65F6;&#xFF1A;&#x5982;&#x679C;&#x5BA2;&#x6237;&#x7AEF;&#x6CA1;&#x6709;&#x4E3B;&#x52A8;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4F1A;&#x5728;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x9632;&#x6B62;&#x5BA2;&#x6237;&#x7AEF;&#x5B95;&#x673A;&#x6216;&#x8005;&#x7F51;&#x7EDC;&#x4E0D;&#x53EF;&#x8FBE;&#x65F6;&#x4EA7;&#x751F;&#x6B7B;&#x9501;</p>
<p>4&#x3001;&#x72EC;&#x5360;&#x6027;&#xFF1A;&#x52A0;&#x9501;&#x89E3;&#x9501;&#x5FC5;&#x987B;&#x7531;&#x540C;&#x4E00;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x9501;&#x7684;&#x6301;&#x6709;&#x8005;&#x624D;&#x53EF;&#x4EE5;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x4E0D;&#x80FD;&#x51FA;&#x73B0;&#x4F60;&#x52A0;&#x7684;&#x9501;&#xFF0C;&#x522B;&#x4EBA;&#x7ED9;&#x4F60;&#x89E3;&#x9501;&#x4E86;</p>
<h2 id="7-1-&#x90A3;&#x4E48;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4EC0;&#x4E48;&#x5462;"><a href="#7-1-&#x90A3;&#x4E48;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4EC0;&#x4E48;&#x5462;" class="headerlink" title="7.1 &#x90A3;&#x4E48;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4EC0;&#x4E48;&#x5462;?"></a><strong>7.1 &#x90A3;&#x4E48;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4EC0;&#x4E48;&#x5462;?</strong></h2><p>&#x4ECB;&#x7ECD;&#x4E24;&#x4E2A;Redis&#x83B7;&#x5F97;&#x9501;&#x7684;&#x6307;&#x4EE4;(&#x8FD9;&#x4E24;&#x4E2A;&#x6307;&#x4EE4;&#x5305;&#x542B;&#x7684;&#x83B7;&#x53D6;&#x9501;&#x548C;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x8FD9;&#x4E24;&#x4E2A;&#x64CD;&#x4F5C;&#x662F;&#x539F;&#x5B50;&#x64CD;&#x4F5C;):</p>
<p>1 SETNX&#xFF1A;&#x610F;&#x601D;&#x662F; SET if Not exists , &#x7528;&#x6CD5;&#x662F;:SETEX key seconds value</p>
<p>2 PSETEX&#xFF1A;&#x7528;&#x6CD5;&#x662F;:PSETEX key milliseconds value</p>
<p>(&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#x548C;SETEX&#x547D;&#x4EE4;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x5B83;&#x4EE5;&#x6BEB;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#x8BBE;&#x7F6E; key &#x7684;&#x751F;&#x5B58;&#x65F6;&#x95F4;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x50CF;SETEX&#x547D;&#x4EE4;&#x90A3;&#x6837;&#xFF0C;&#x4EE5;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;)</p>
<p>Redis&#x83B7;&#x53D6;&#x9501;&#x7684;&#x6700;&#x5E38;&#x89C1;&#x5199;&#x6CD5;:</p>
<p>&#x4ECE;Redis 2.6.12 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;SET&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x53C2;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x548C;SETNX&#x3001;SETEX&#x3001;PSETEX &#x4E09;&#x4E2A;&#x547D;&#x4EE4;&#x76F8;&#x540C;&#x7684;&#x6548;&#x679C;</p>
<p>SET key value NX EX seconds:&#x52A0;&#x4E0A;NX&#x3001;EX&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x6548;&#x679C;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;SETEX</p>
<p>&#x4F8B;&#x5B50;:</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/39cae3a6e00142db9036d54dc001ab658b5c521c442e7cc39286061d38216172" alt></p>
<p>&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5F53;&#x524D;&#x767B;&#x9646;&#x4EBA;&#x7684;id&#x548C;&#x8BF7;&#x6C42;&#x7684;uri&#x4F5C;&#x4E3A;&#x9501;&#x7684;&#x540D;&#x5B57;,&#x5F53;&#x628A;key&#x4E3A;lock&#x7684;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A;&#x201D;Java&#x201D;&#x540E;,&#x518D;&#x8BBE;&#x7F6E;&#x6210;&#x522B;&#x7684;&#x503C;&#x5C31;&#x4F1A;&#x5931;&#x8D25;,&#x5373;&#x83B7;&#x5F97;&#x9501;&#x8FD4;&#x56DE;1,&#x672A;&#x83B7;&#x5F97;&#x9501;&#x8FD4;&#x56DE;0  </p>
<p>&#x6240;&#x4EE5;&#x8FD9;&#x6761;&#x547D;&#x4EE4;&#x4F53;&#x73B0;&#x4E86;&#x9501;&#x7684;&#x4E92;&#x65A5;&#x6027;,&#x5373;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x523B;&#xFF0C;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x6761;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x53F0;&#x5E94;&#x7528;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x5206;&#x5E03;&#x5F0F;&#x9501;,&#x8BBE;&#x7F6E;&#x9501;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x8FD8;&#x505A;&#x5230;&#x4E86;&#x9632;&#x6B62;&#x9501;&#x8D85;&#x65F6;</p>
<p><strong>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x6765;&#x4E86;,&#x9501;&#x7684;value&#x503C;&#x771F;&#x7684;&#x53EF;&#x4EE5;&#x50CF;&#x4E0A;&#x9762;&#x90A3;&#x8FB9;&#x8BBE;&#x7F6E;&#x7684;&#x5F88;&#x968F;&#x610F;&#x561B;?</strong></p>
<h2 id="7-2-value&#x7684;&#x503C;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;"><a href="#7-2-value&#x7684;&#x503C;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;" class="headerlink" title="7.2 value&#x7684;&#x503C;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;?"></a>7.2 value&#x7684;&#x503C;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;?</h2><p>&#x7B54;&#x6848;: &#x5E94;&#x8BE5;&#x72EC;&#x7279;&#x552F;&#x4E00;,&#x8FD9;&#x6837;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x72EC;&#x5360;&#x6027;</p>
<p>&#x5982;&#x679C;value&#x503C;&#x4E0D;&#x552F;&#x4E00;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x8BF7;&#x6C42;?</p>
<p>1.&#x670D;&#x52A1;&#x5668;1&#x83B7;&#x53D6;&#x9501;&#x6210;&#x529F;  </p>
<p>2.&#x670D;&#x52A1;&#x5668;1&#x5728;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#x4E0A;&#x963B;&#x585E;&#x4E86;&#x592A;&#x957F;&#x65F6;&#x95F4;  </p>
<p>3.&#x8BBE;&#x7F6E;&#x7684;key&#x8FC7;&#x671F;&#x4E86;&#xFF0C;&#x9501;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x4E86;  </p>
<p>4.&#x670D;&#x52A1;&#x5668;2&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x5BF9;&#x5E94;&#x540C;&#x4E00;&#x4E2A;&#x8D44;&#x6E90;&#x7684;&#x9501;  </p>
<p>5.&#x670D;&#x52A1;&#x5668;1&#x4ECE;&#x963B;&#x585E;&#x4E2D;&#x6062;&#x590D;&#x8FC7;&#x6765;&#xFF0C;&#x56E0;&#x4E3A;value&#x503C;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x6267;&#x884C;&#x91CA;&#x653E;&#x9501;&#x64CD;&#x4F5C;&#x65F6;&#x5C31;&#x4F1A;&#x91CA;&#x653E;&#x6389;&#x670D;&#x52A1;&#x5668;2&#x6301;&#x6709;&#x7684;&#x9501;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x95EE;&#x9898;</p>
<p>&#x8BBE;&#x7F6E;value&#x7684;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;:  </p>
<p><strong>&#x65B9;&#x6CD5;1:UUID</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;String uuid = UUID.randomUUID().toString();</span><br></pre></td></tr></table></figure>

<p><strong>&#x65B9;&#x6CD5;2:&#x5F53;&#x524D;&#x7EBF;&#x7A0B;id</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;String id = Thread.currentThread().getId() + &quot;&quot;;</span><br></pre></td></tr></table></figure>

<p><strong>&#x65B9;&#x6CD5;3:&#x5206;&#x5E03;&#x5F0F;&#x96EA;&#x82B1;&#x7B97;&#x6CD5;id&#x751F;&#x6210;&#x5668;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;&#x53C2;&#x8003;:&#x57FA;&#x4E8E;Snowflake&#x7B97;&#x6CD5;&#x7684;&#x5206;&#x5E03;&#x5F0F;ID&#x751F;&#x6210;&#x5668;</span><br><span class="line">&#x7801;&#x4E91;: https://gitee.com/yu120/neural</span><br></pre></td></tr></table></figure>

<h2 id="7-3-&#x5982;&#x4F55;&#x4FDD;&#x8BC1;Redis&#x9501;&#x9AD8;&#x53EF;&#x7528;&#x5462;"><a href="#7-3-&#x5982;&#x4F55;&#x4FDD;&#x8BC1;Redis&#x9501;&#x9AD8;&#x53EF;&#x7528;&#x5462;" class="headerlink" title="7.3 &#x5982;&#x4F55;&#x4FDD;&#x8BC1;Redis&#x9501;&#x9AD8;&#x53EF;&#x7528;&#x5462;?"></a><strong>7.3 &#x5982;&#x4F55;&#x4FDD;&#x8BC1;Redis&#x9501;&#x9AD8;&#x53EF;&#x7528;&#x5462;?</strong></h2><p>&#x9AD8;&#x53EF;&#x7528;&#x7684;&#x5927;&#x6982;&#x5B9A;&#x4E49;&#x662F;: &#x201C;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#x201D;&#xFF08;High Availability&#xFF09;&#x901A;&#x5E38;&#x6765;&#x63CF;&#x8FF0;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x7ECF;&#x8FC7;&#x4E13;&#x95E8;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x4ECE;&#x800C;&#x51CF;&#x5C11;&#x505C;&#x5DE5;&#x65F6;&#x95F4;&#xFF0C;&#x800C;&#x4FDD;&#x6301;&#x5176;&#x670D;&#x52A1;&#x7684;&#x9AD8;&#x5EA6;&#x53EF;&#x7528;&#x6027;,&#x5373;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4E00;&#x5C0F;&#x90E8;&#x5206;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;&#x4E0D;&#x5F71;&#x54CD;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x4E0D;&#x63A8;&#x8350;: Redis &#x5355;&#x526F;&#x672C;</p>
<p>&#x4E0D;&#x63A8;&#x8350;&#x539F;&#x56E0;&#x5982;&#x4E0B;:&#x5982;&#x679C;redis&#x662F;&#x5355;master&#x6A21;&#x5F0F;&#x7684;&#xFF0C;&#x5F53;&#x8FD9;&#x53F0;&#x673A;&#x5B95;&#x673A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90A3;&#x4E48;&#x6240;&#x6709;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x83B7;&#x53D6;&#x4E0D;&#x5230;&#x9501;&#x4E86;</p>
<p>&#x63A8;&#x8350;:Redis &#x591A;&#x526F;&#x672C;&#xFF08;&#x4E3B;&#x4ECE;&#xFF09;, Redis Sentinel&#xFF08;&#x54E8;&#x5175;&#xFF09;, Redis Cluster</p>
<p>&#x63A8;&#x8350;&#x539F;&#x56E0;: &#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5047;&#x8BBE;&#x90E8;&#x7F72;&#x4E3B;&#x4ECE;&#x67B6;&#x6784;&#x7684;redis,1&#x4E2A;master&#x52A0;1&#x4E2A;slave&#xFF0C;&#x56E0;&#x4E3A;redis&#x7684;&#x4E3B;&#x4ECE;&#x540C;&#x6B65;&#x662F;&#x5F02;&#x6B65;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x5BA2;&#x6237;&#x7AEF;1&#x8BBE;&#x7F6E;&#x5B8C;&#x9501;&#x540E;&#xFF0C;master&#x6302;&#x6389;&#xFF0C;&#x539F;&#x6765;master&#x4E2D;&#x7684;&#x6570;&#x636E;&#x90FD;&#x4F1A;&#x8F6C;&#x79FB;&#x5230;&#x539F;&#x6765;&#x7684;slave&#x4E2D;&#xFF0C;&#x7136;&#x540E;slave&#x63D0;&#x5347;&#x4E3A;master,&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x9501;&#x3002;</p>
<h2 id="7-4-Demo&#x5B9E;&#x8DF5;"><a href="#7-4-Demo&#x5B9E;&#x8DF5;" class="headerlink" title="7.4 Demo&#x5B9E;&#x8DF5;"></a>7.4 Demo&#x5B9E;&#x8DF5;</h2><h3 id="7-4-1-&#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;Jedis&#x5BA2;&#x6237;&#x7AEF;"><a href="#7-4-1-&#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;Jedis&#x5BA2;&#x6237;&#x7AEF;" class="headerlink" title="7.4.1 &#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;Jedis&#x5BA2;&#x6237;&#x7AEF;"></a>7.4.1 &#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;Jedis&#x5BA2;&#x6237;&#x7AEF;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- jedis-redis --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;io.lettuce&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;</span><br><span class="line">                &lt;/exclusion&gt;</span><br><span class="line">            &lt;/exclusions&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5DE5;&#x5177;&#x7C7B;"><a href="#Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5DE5;&#x5177;&#x7C7B;" class="headerlink" title="Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5DE5;&#x5177;&#x7C7B;:"></a>Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5DE5;&#x5177;&#x7C7B;:</h3><p>/**</p>
<ul>
<li>@description:</li>
<li>@author: geekAntony</li>
<li>@create: 2021-01-17 16:52<br>**/</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class RedisLockUtil {</span><br><span class="line"></span><br><span class="line">    // key&#x7684;&#x6301;&#x6709;&#x65F6;&#x95F4;&#xFF0C;5ms</span><br><span class="line">    private long EXPIRE_TIME = 5;</span><br><span class="line"></span><br><span class="line">    // &#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x65F6;&#x95F4;,1s</span><br><span class="line">    private long TIME_OUT = 1000;</span><br><span class="line"></span><br><span class="line">    // redis&#x547D;&#x4EE4;&#x53C2;&#x6570;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;nx&#x548C;px&#x7684;&#x547D;&#x4EE4;&#x5408;&#x96C6;</span><br><span class="line">    private SetParams params = SetParams.setParams().nx().px(EXPIRE_TIME);</span><br><span class="line"></span><br><span class="line">    // redis&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x8FDE;&#x7684;&#x662F;&#x672C;&#x5730;&#x7684;redis&#x5BA2;&#x6237;&#x7AEF;</span><br><span class="line">    JedisPool jedisPool = new JedisPool(&quot;127.0.0.1&quot;, 6379);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x52A0;&#x9501;</span><br><span class="line">     *</span><br><span class="line">     * @param value</span><br><span class="line">     * &#x7EBF;&#x7A0B;&#x7684;id&#xFF0C;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x53EF;&#x8BC6;&#x522B;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E14;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x5B57;&#x6BB5;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public boolean lock(String key,String value) {</span><br><span class="line">        Long start = System.currentTimeMillis();</span><br><span class="line">        Jedis jedis = jedisPool.getResource();</span><br><span class="line">        try {</span><br><span class="line">            for (;;) {</span><br><span class="line">                // SET&#x547D;&#x4EE4;&#x8FD4;&#x56DE;OK &#xFF0C;&#x5219;&#x8BC1;&#x660E;&#x83B7;&#x53D6;&#x9501;&#x6210;&#x529F;</span><br><span class="line">                String lock = jedis.set(key, value, params);</span><br><span class="line">                if (&quot;OK&quot;.equals(lock)) {</span><br><span class="line">                    return true;</span><br><span class="line">                }</span><br><span class="line">                // &#x5426;&#x5219;&#x5FAA;&#x73AF;&#x7B49;&#x5F85;&#xFF0C;&#x5728;TIME_OUT&#x65F6;&#x95F4;&#x5185;&#x4ECD;&#x672A;&#x83B7;&#x53D6;&#x5230;&#x9501;&#xFF0C;&#x5219;&#x83B7;&#x53D6;&#x5931;&#x8D25;</span><br><span class="line">                long l = System.currentTimeMillis() - start;</span><br><span class="line">                if (l &gt;= TIME_OUT) {</span><br><span class="line">                    return false;</span><br><span class="line">                }</span><br><span class="line">                try {</span><br><span class="line">                    // &#x4F11;&#x7720;&#x4E00;&#x4F1A;&#xFF0C;&#x4E0D;&#x7136;&#x53CD;&#x590D;&#x6267;&#x884C;&#x5FAA;&#x73AF;&#x4F1A;&#x4E00;&#x76F4;&#x5931;&#x8D25;</span><br><span class="line">                    Thread.sleep(100);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        } finally {</span><br><span class="line">            jedis.close();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x89E3;&#x9501;</span><br><span class="line">     *</span><br><span class="line">     * @param value</span><br><span class="line">     * &#x7EBF;&#x7A0B;&#x7684;id&#xFF0C;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x53EF;&#x8BC6;&#x522B;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x4E14;&#x4E0D;&#x91CD;&#x590D;&#x7684;&#x5B57;&#x6BB5;</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public boolean unlock(String key,String value) {</span><br><span class="line">        Jedis jedis = jedisPool.getResource();</span><br><span class="line">        // &#x5220;&#x9664;key&#x7684;lua&#x811A;&#x672C;</span><br><span class="line">        String script = &quot;if redis.call(&apos;get&apos;,KEYS[1]) == ARGV[1] then&quot; + &quot;   return redis.call(&apos;del&apos;,KEYS[1]) &quot; + &quot;else&quot;</span><br><span class="line">                + &quot;   return 0 &quot; + &quot;end&quot;;</span><br><span class="line">        try {</span><br><span class="line">            String result =</span><br><span class="line">                    jedis.eval(script, Collections.singletonList(key), Collections.singletonList(value)).toString();</span><br><span class="line">            return &quot;1&quot;.equals(result);</span><br><span class="line">        } finally {</span><br><span class="line">            jedis.close();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x524D;&#x7AEF;&#x63A7;&#x5236;&#x5668;"><a href="#&#x524D;&#x7AEF;&#x63A7;&#x5236;&#x5668;" class="headerlink" title="&#x524D;&#x7AEF;&#x63A7;&#x5236;&#x5668;:"></a><strong>&#x524D;&#x7AEF;&#x63A7;&#x5236;&#x5668;:</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * @program: structure</span><br><span class="line"> * @description:</span><br><span class="line"> * @author: geekAntony</span><br><span class="line"> * @create: 2021-01-19 22:59</span><br><span class="line"> **/</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/demo1&quot;)</span><br><span class="line">public class TestRedisLock {</span><br><span class="line"></span><br><span class="line">    private static RedisLockUtil demo = new RedisLockUtil();</span><br><span class="line"></span><br><span class="line">     @PostMapping(value = &quot;/testRedisLock&quot;)</span><br><span class="line">    public String add(@RequestBody Person person) {</span><br><span class="line">        String id = Thread.currentThread().getId() + &quot;&quot;;</span><br><span class="line">        boolean isLock = demo.lock(&quot;redislockName&quot;,id);</span><br><span class="line">        try {</span><br><span class="line">            //&#x62FF;&#x5230;&#x9501;&#x7684;&#x8BDD;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;...</span><br><span class="line">            if (isLock) {</span><br><span class="line">                //&#x6A21;&#x62DF;3s&#x4E1A;&#x52A1;&#x64CD;&#x4F5C;</span><br><span class="line">                TimeUnit.SECONDS.sleep(3);</span><br><span class="line">            }else{</span><br><span class="line">                return &quot;&#x8BF7;&#x4E0D;&#x8981;&#x91CD;&#x590D;&#x53D1;&#x9001;&#x8868;&#x5355;&#x8BF7;&#x6C42;&quot;;</span><br><span class="line">            }</span><br><span class="line">        } catch (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        } finally {</span><br><span class="line">            // &#x5728;finally&#x4E2D;&#x91CA;&#x653E;&#x9501;</span><br><span class="line">            demo.unlock(&quot;redislockName&quot;,id);</span><br><span class="line">        }</span><br><span class="line">        return &quot;&#x5B8C;&#x6210;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&quot;;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;:"></a>&#x6D4B;&#x8BD5;:</h3><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a4b1c79985d1a71fe606ec94bab14865d45ac48a94b09c7bb134864756cab584" alt></p>
<h1 id="8-&#x4F7F;&#x7528;Redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;"><a href="#8-&#x4F7F;&#x7528;Redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;" class="headerlink" title="8 &#x4F7F;&#x7528;Redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;"></a>8 &#x4F7F;&#x7528;Redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;</h1><h2 id="&#x5F15;&#x5165;Redisson&#x4F9D;&#x8D56;"><a href="#&#x5F15;&#x5165;Redisson&#x4F9D;&#x8D56;" class="headerlink" title="&#x5F15;&#x5165;Redisson&#x4F9D;&#x8D56;:"></a>&#x5F15;&#x5165;Redisson&#x4F9D;&#x8D56;:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801; &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.redisson&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;redisson&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;3.13.4&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h3 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml:"></a>application.yml:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;#Redis &#x914D;&#x7F6E;</span><br><span class="line">spring:</span><br><span class="line">  redis:</span><br><span class="line">    host: 127.0.0.1</span><br><span class="line">    port: 6379</span><br><span class="line">    database: 1</span><br><span class="line">    password:</span><br><span class="line">    timeout: 10000</span><br><span class="line">    jedis:</span><br><span class="line">      pool:</span><br><span class="line">        max-active: 8</span><br><span class="line">        max-idle: 8</span><br><span class="line">        min-idle: 0</span><br><span class="line">        max-wait: -1ms</span><br><span class="line">#&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x5E03;&#x5F0F; Redis &#x5BA2;&#x6237;&#x7AEF; Redisson &#x914D;&#x7F6E;</span><br><span class="line">redisson:</span><br><span class="line">  type: stand-alone  #redis&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#x7C7B;&#x578B;&#xFF0C;stand-alone:&#x5355;&#x673A;&#x90E8;&#x7F72;&#x3001;cluster&#xFF1A;&#x673A;&#x5668;&#x90E8;&#x7F72;.&#x9ED8;&#x8BA4;&#x4E3A;&#x5355;&#x673A;&#x90E8;&#x7F72;</span><br><span class="line">  address: redis://127.0.0.1:6379 #&#x5355;&#x673A;&#x65F6;&#x5FC5;&#x987B;&#x662F;redis://&#x5F00;&#x5934;.</span><br><span class="line">  database: 1</span><br></pre></td></tr></table></figure>

<h3 id="&#x57FA;&#x7840;&#x4FE1;&#x606F;&#x914D;&#x7F6E;&#x7C7B;"><a href="#&#x57FA;&#x7840;&#x4FE1;&#x606F;&#x914D;&#x7F6E;&#x7C7B;" class="headerlink" title="&#x57FA;&#x7840;&#x4FE1;&#x606F;&#x914D;&#x7F6E;&#x7C7B;:"></a>&#x57FA;&#x7840;&#x4FE1;&#x606F;&#x914D;&#x7F6E;&#x7C7B;:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;@Data //lombok</span><br><span class="line">@ConfigurationProperties(prefix = &quot;redisson&quot;)</span><br><span class="line">public class RedssionProperties {</span><br><span class="line">    </span><br><span class="line">    /**</span><br><span class="line">    * redis&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#x7C7B;&#x578B;&#x3002;</span><br><span class="line">    * stand-alone:&#x5355;&#x673A;&#x90E8;&#x7F72;</span><br><span class="line">    * cluster&#xFF1A;&#x96C6;&#x7FA4;&#x90E8;&#x7F72;.</span><br><span class="line">    */</span><br><span class="line">    private String type = &quot;stand-alone&quot;;</span><br><span class="line">    /**</span><br><span class="line">    * Redis &#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</span><br><span class="line">    */</span><br><span class="line">    private String address;</span><br><span class="line">    /**</span><br><span class="line">    * &#x7528;&#x4E8E;Redis&#x8FDE;&#x63A5;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7D22;&#x5F15;</span><br><span class="line">    */</span><br><span class="line">    private int database = 0;</span><br><span class="line">    /**</span><br><span class="line">    * Redis&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x5219;&#x5E94;&#x4E3A;null</span><br><span class="line">    */</span><br><span class="line">    private String password;</span><br><span class="line">    /**</span><br><span class="line">    * Redis&#x6700;&#x5C0F;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x91CF;</span><br><span class="line">    */</span><br><span class="line">    private int connectionMinimumIdleSize = 24;</span><br><span class="line">    /**</span><br><span class="line">    * Redis&#x8FDE;&#x63A5;&#x6700;&#x5927;&#x6C60;&#x5927;&#x5C0F;</span><br><span class="line">    */</span><br><span class="line">    private int connectionPoolSize = 64;</span><br><span class="line">    /**</span><br><span class="line">    * Redis &#x670D;&#x52A1;&#x5668;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;Redis &#x547D;&#x4EE4;&#x6210;&#x529F;&#x53D1;&#x9001;&#x540E;&#x5F00;&#x59CB;&#x5012;&#x8BA1;&#x65F6;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;</span><br><span class="line">    */</span><br><span class="line">    private int timeout = 3000;</span><br><span class="line">    /**</span><br><span class="line">    * &#x8FDE;&#x63A5;&#x5230; Redis &#x670D;&#x52A1;&#x5668;&#x65F6;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;</span><br><span class="line">    */</span><br><span class="line">    private int connectTimeout = 10000;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="Redisson&#x914D;&#x7F6E;&#x7C7B;"><a href="#Redisson&#x914D;&#x7F6E;&#x7C7B;" class="headerlink" title="Redisson&#x914D;&#x7F6E;&#x7C7B;"></a>Redisson&#x914D;&#x7F6E;&#x7C7B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">@EnableConfigurationProperties(RedssionProperties.class)</span><br><span class="line">public class RedissonConfig {</span><br><span class="line"></span><br><span class="line">    private final RedssionProperties redssionProperties;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * &#x4ECE; Spring &#x5BB9;&#x5668;&#x4E2D;&#x83B7;&#x53D6; {@link RedssionProperties}&#x5B9E;&#x4F8B;</span><br><span class="line">    */</span><br><span class="line">    public RedissonConfig(RedssionProperties redssionProperties) {</span><br><span class="line">    	this.redssionProperties = redssionProperties;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * redis &#x670D;&#x52A1;&#x5668;&#x5355;&#x673A;&#x90E8;&#x7F72;&#x65F6;&#xFF0C;&#x521B;&#x5EFA; RedissonClient &#x5B9E;&#x4F8B;&#xFF0C;&#x4EA4;&#x7531; Spring &#x5BB9;&#x5668;&#x7BA1;&#x7406;</span><br><span class="line">    * &#x53EA;&#x6709;&#x5F53;&#x914D;&#x7F6E;&#x4E86; redisson.type=stand-alone &#x65F6;&#xFF0C;&#x624D;&#x7EE7;&#x7EED;&#x751F;&#x6210; RedissonClient &#x5B9E;&#x4F8B;&#x5E76;&#x4EA4;&#x7531; Spring &#x5BB9;&#x5668;&#x7BA1;&#x7406;</span><br><span class="line">    *</span><br><span class="line">    * @return</span><br><span class="line">    */</span><br><span class="line">    @Bean</span><br><span class="line">    @ConditionalOnProperty(prefix = &quot;redisson&quot;, name = &quot;type&quot;, havingValue = &quot;stand-alone&quot;)</span><br><span class="line">        public RedissonClient redissonClient() {</span><br><span class="line">        /**</span><br><span class="line">        * Config&#xFF1A;Redisson &#x914D;&#x7F6E;&#x57FA;&#x7C7B;&#xFF1A;</span><br><span class="line">        * SingleServerConfig&#xFF1A;&#x5355;&#x673A;&#x90E8;&#x7F72;&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;MasterSlaveServersConfig&#xFF1A;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x90E8;&#x7F72;&#x914D;&#x7F6E;</span><br><span class="line">        * SentinelServersConfig&#xFF1A;&#x54E8;&#x5175;&#x6A21;&#x5F0F;&#x914D;&#x7F6E;&#xFF0C;ClusterServersConfig&#xFF1A;&#x96C6;&#x7FA4;&#x90E8;&#x7F72;&#x914D;&#x7F6E;&#x7C7B;&#x3002;</span><br><span class="line">        * useSingleServer()&#xFF1A;&#x521D;&#x59CB;&#x5316; redis &#x5355;&#x670D;&#x52A1;&#x5668;&#x914D;&#x7F6E;&#x3002;&#x5373; redis &#x670D;&#x52A1;&#x5668;&#x5355;&#x673A;&#x90E8;&#x7F72;</span><br><span class="line">        * setAddress(String address)&#xFF1A;&#x8BBE;&#x7F6E; redis &#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;&#x3002;&#x683C;&#x5F0F; -- redis://&#x4E3B;&#x673A;:&#x7AEF;&#x53E3;&#xFF0C;&#x4E0D;&#x5199;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; redis://127.0.0.1:6379</span><br><span class="line">        * setDatabase(int database): &#x8BBE;&#x7F6E;&#x8FDE;&#x63A5;&#x7684; redis &#x6570;&#x636E;&#x5E93;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; 0</span><br><span class="line">        * setPassword(String password)&#xFF1A;&#x8BBE;&#x7F6E; redis &#x670D;&#x52A1;&#x5668;&#x8BA4;&#x8BC1;&#x5BC6;&#x7801;&#xFF0C;&#x6CA1;&#x6709;&#x65F6;&#x8BBE;&#x7F6E;&#x4E3A; null&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; null</span><br><span class="line">        * RedissonClient create(Config config): &#x4F7F;&#x7528;&#x63D0;&#x4F9B;&#x7684;&#x914D;&#x7F6E;&#x521B;&#x5EFA;&#x540C;&#x6B65;/&#x5F02;&#x6B65; Redisson &#x5B9E;&#x4F8B;</span><br><span class="line">        * Redisson &#x7C7B;&#x5B9E;&#x73B0;&#x4E86; RedissonClient &#x63A5;&#x53E3;&#xFF0C;&#x771F;&#x6B63;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E24;&#x4E2A; API</span><br><span class="line">        */</span><br><span class="line">        Config config = new Config();</span><br><span class="line">        config.useSingleServer()</span><br><span class="line">        .setAddress(redssionProperties.getAddress())</span><br><span class="line">        .setDatabase(redssionProperties.getDatabase())</span><br><span class="line">        .setPassword(redssionProperties.getPassword())</span><br><span class="line">        .setConnectionPoolSize(redssionProperties.getConnectionPoolSize())</span><br><span class="line">        .setConnectionMinimumIdleSize(redssionProperties.getConnectionMinimumIdleSize())</span><br><span class="line">        .setTimeout(redssionProperties.getTimeout())</span><br><span class="line">        .setConnectTimeout(redssionProperties.getConnectTimeout());</span><br><span class="line">        RedissonClient redissonClient = Redisson.create(config);</span><br><span class="line">        return redissonClient;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x6D4B;&#x8BD5;-1"><a href="#&#x6D4B;&#x8BD5;-1" class="headerlink" title="&#x6D4B;&#x8BD5;:"></a>&#x6D4B;&#x8BD5;:</h3><p>&#x5177;&#x4F53;&#x8BE6;&#x7EC6;&#x524D;&#x7AEF;&#x4EE3;&#x7801;&#x4E0A;&#x6587;&#x53EF;&#x89C1;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;home-container&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;home-content&quot;&gt;</span><br><span class="line">            &lt;Button @click=&quot;getUserData1&quot;&gt;redisson&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6D4B;&#x8BD5;&lt;/Button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">/* eslint-disable */</span><br><span class="line">import {getRedisLock,getRedissonLock} from &apos;@/api/requestdemo1.js&apos;</span><br><span class="line">export default {</span><br><span class="line">    name: &apos;home&apos;,</span><br><span class="line">    data() {</span><br><span class="line">        return {</span><br><span class="line">            userInfo: &apos;&apos;,</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">        getUserData1(){</span><br><span class="line">            let person={</span><br><span class="line">                requestName:&apos;&#x8BF7;&#x6C42;&#x540D;&#x79F0;&apos;,</span><br><span class="line">                name:&apos;&#x5F90;&#x8D85;&apos;,</span><br><span class="line">                salary:&quot;10000&quot;,</span><br><span class="line">                age:23,</span><br><span class="line">                orderNumber:&quot;ADW12314123&quot;,</span><br><span class="line">                //&#x6CE8;&#x91CA;&#x6389;&#x6B64;&#x5B57;&#x6BB5;&#x4EE5;&#x514D;axios&#x62E6;&#x622A;&#x5668;&#x62E6;&#x622A;</span><br><span class="line">                //repetitiveRequestLimit:true</span><br><span class="line">            }</span><br><span class="line">            getRedissonLock(person).then(res=&gt;{</span><br><span class="line">                console.log(res);</span><br><span class="line">            }).catch((e)=&gt;{</span><br><span class="line">                console.log(e);</span><br><span class="line">            }).finally(() =&gt; {</span><br><span class="line">                console.log(&apos;finish&apos;);</span><br><span class="line">            })</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.home-container {</span><br><span class="line">    padding: 10px;</span><br><span class="line">    padding-top: 5px;</span><br><span class="line">}</span><br><span class="line">.home-content {</span><br><span class="line">    padding: 10px;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">    background: #fff;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="&#x540E;&#x53F0;&#x63A7;&#x5236;&#x5668;"><a href="#&#x540E;&#x53F0;&#x63A7;&#x5236;&#x5668;" class="headerlink" title="&#x540E;&#x53F0;&#x63A7;&#x5236;&#x5668;:"></a>&#x540E;&#x53F0;&#x63A7;&#x5236;&#x5668;:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">vbnet&#x590D;&#x5236;&#x4EE3;&#x7801;@RestController</span><br><span class="line">@RequestMapping(&quot;/demo1&quot;)</span><br><span class="line">public class TestRedisLock {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private RedissonClient redissonClient;</span><br><span class="line"></span><br><span class="line">    private static Logger logger = LoggerFactory.getLogger(TestRedisLock.class);</span><br><span class="line">    /**</span><br><span class="line">    * RedissonClient.getLock(String name)&#xFF1A;&#x53EF;&#x91CD;&#x5165;&#x9501;</span><br><span class="line">    * boolean tryLock(long waitTime, long leaseTime, TimeUnit unit)&#xFF1A;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;</span><br><span class="line">    * 1&#x3001;waitTime&#xFF1A;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x8D85;&#x65F6;&#x81EA;&#x52A8;&#x653E;&#x5F03;&#xFF0C;&#x7EBF;&#x7A0B;&#x4E0D;&#x518D;&#x7EE7;&#x7EED;&#x963B;&#x585E;&#xFF0C;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE; false</span><br><span class="line">    * 2&#x3001;leaseTime&#xFF1A;&#x83B7;&#x53D6;&#x5230;&#x9501;&#x540E;&#xFF0C;&#x6307;&#x5B9A;&#x52A0;&#x9501;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8D85;&#x65F6;&#x540E;&#x81EA;&#x52A8;&#x89E3;&#x9501;</span><br><span class="line">    * 3&#x3001;&#x5982;&#x679C;&#x6210;&#x529F;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x5219;&#x8FD4;&#x56DE; true&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE; false&#x3002;</span><br><span class="line">    */</span><br><span class="line">    @PostMapping(value = &quot;/testRedisson&quot;)</span><br><span class="line">    public String addDemo1(@RequestBody Person person) {</span><br><span class="line">        String result = &quot;&#x8BA2;&#x5355;[&quot; + person.getOrderNumber() + &quot;]&#x652F;&#x4ED8;&#x6210;&#x529F;.&quot;;</span><br><span class="line">        //&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x767B;&#x5F55;&#x7528;&#x6237;&#x7684;id&#x7B49;&#x6570;&#x636E;</span><br><span class="line">        String key = person.getOrderNumber();</span><br><span class="line">        /**</span><br><span class="line">        * getLock(String name)&#xFF1A;&#x6309;&#x540D;&#x79F0;&#x8FD4;&#x56DE;&#x9501;&#x5B9E;&#x4F8B;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x975E;&#x516C;&#x5E73;&#x7684;&#x53EF;&#x91CD;&#x5165;&#x9501;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x83B7;&#x5F97;&#x987A;&#x5E8F;</span><br><span class="line">        * lock():&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x5982;&#x679C;&#x9501;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x5219;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5C06;&#x5904;&#x4E8E;&#x4F11;&#x7720;&#x72B6;&#x6001;&#xFF0C;&#x76F4;&#x5230;&#x83B7;&#x5F97;&#x9501;&#x4E3A;&#x6B62;</span><br><span class="line">        */</span><br><span class="line">        RLock lock = redissonClient.getLock(key);</span><br><span class="line">        boolean tryLock = false;</span><br><span class="line">        try {</span><br><span class="line">            //waitTime&#x662F;&#x5C1D;&#x8BD5;&#x52A0;&#x9501;&#x65F6;&#x95F4;,&#x6700;&#x591A;&#x7B49;&#x5F85;1s,&#x4E0A;&#x9501;60s&#x4EE5;&#x540E;&#x81EA;&#x52A8;&#x89E3;&#x9501;</span><br><span class="line">            tryLock = lock.tryLock(1, 60, TimeUnit.SECONDS);</span><br><span class="line">        } catch (InterruptedException e) {</span><br><span class="line">        	e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        //&#x4E0A;&#x9501;&#x5931;&#x8D25;,&#x5219;&#x4F1A;&#x8FDB;&#x5165;&#x6B64;if</span><br><span class="line">        if (!tryLock) {</span><br><span class="line">        	return &quot;&#x8BA2;&#x5355;[&quot; + person.getOrderNumber() + &quot;]&#x6B63;&#x5728;&#x652F;&#x4ED8;&#x4E2D;&#xFF0C;&#x8BF7;&#x8010;&#x5FC3;&#x7B49;&#x5F85;&#xFF01;&quot;;</span><br><span class="line">        }</span><br><span class="line">        try {</span><br><span class="line">            logger.info(&quot;&#x67E5;&#x8BE2;&#x652F;&#x4ED8;&#x72B6;&#x6001;&quot;);</span><br><span class="line">            TimeUnit.SECONDS.sleep(1);</span><br><span class="line">            logger.info(&quot;&#x6B63;&#x5728;&#x652F;&#x4ED8;&#x8BA2;&#x5355;[&quot; + person.getOrderNumber() + &quot;]&quot;);</span><br><span class="line">            TimeUnit.SECONDS.sleep(1);</span><br><span class="line">         } catch (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            result = &quot;&#x8BA2;&#x5355;&#x53F7;xxx [&quot; + person.getOrderNumber() + &quot;]&#x652F;&#x4ED8;&#x5931;&#x8D25;&#xFF1A;&quot; + e.getMessage();</span><br><span class="line">         } finally {</span><br><span class="line">            /**</span><br><span class="line">            * boolean isLocked():&#x68C0;&#x67E5;&#x9501;&#x662F;&#x5426;&#x88AB;&#x4EFB;&#x4F55;&#x7EBF;&#x7A0B;&#x9501;&#x5B9A;&#xFF0C;&#x88AB;&#x9501;&#x5B9A;&#x65F6;&#x8FD4;&#x56DE; true&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE; false.</span><br><span class="line">            * unlock()&#xFF1A;&#x91CA;&#x653E;&#x9501;&#xFF0C; Lock &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x901A;&#x5E38;&#x4F1A;&#x5BF9;&#x7EBF;&#x7A0B;&#x91CA;&#x653E;&#x9501;&#xFF08;&#x901A;&#x5E38;&#x53EA;&#x6709;&#x9501;&#x7684;&#x6301;&#x6709;&#x8005;&#x624D;&#x80FD;&#x91CA;&#x653E;&#x9501;&#xFF09;&#x65BD;&#x52A0;&#x9650;&#x5236;&#xFF0C;</span><br><span class="line">            * &#x5982;&#x679C;&#x8FDD;&#x53CD;&#x4E86;&#x9650;&#x5236;&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x629B;&#x51FA;&#xFF08;&#x672A;&#x68C0;&#x67E5;&#x7684;&#xFF09;&#x5F02;&#x5E38;&#x3002;&#x5982;&#x679C;&#x9501;&#x5DF2;&#x7ECF;&#x88AB;&#x91CA;&#x653E;&#xFF0C;&#x91CD;&#x590D;&#x91CA;&#x653E;&#x65F6;&#xFF0C;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</span><br><span class="line">            */</span><br><span class="line">            if (lock.isLocked()) {</span><br><span class="line">            	lock.unlock();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"><a href="#&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;:"></a>&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;:</h2><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/004dbcd14490de453454e3060672b5a7cc5ae116d74ba980b948a3b88892fd13" alt></p>
<h1 id="&#x4E09;-&#x603B;&#x7ED3;"><a href="#&#x4E09;-&#x603B;&#x7ED3;" class="headerlink" title="&#x4E09; &#x603B;&#x7ED3;"></a>&#x4E09; &#x603B;&#x7ED3;</h1><p>&#x4EE5;&#x4E0A;&#x65B9;&#x6848;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;1,&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x8F83;&#x4E3A;&#x7B80;&#x5355;,&#x9879;&#x76EE;&#x5F00;&#x53D1;&#x524D;&#x671F;&#x6216;&#x8005;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x91CD;&#x8981;&#x7684;&#x63A5;&#x53E3;&#x4E2D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x65B9;&#x6CD5;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;2&#xFF0C;3&#xFF0C;4&#x4E0D;&#x63A8;&#x8350;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;5 &#x57FA;&#x4E8E;&#x4E50;&#x89C2;&#x9501;&#x6765;&#x5B9E;&#x73B0;,&#x4E2A;&#x4EBA;&#x611F;&#x89C9;&#x5360;&#x786C;&#x76D8;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;,&#x4F46;&#x662F;&#x5B9E;&#x73B0;&#x7B80;&#x5355;,&#x8F83;&#x4E3A;&#x7A33;&#x5B9A;,&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;6 &#x6BD4;&#x8F83;&#x65B0;&#x9896;,&#x53EF;&#x4EE5;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5C1D;&#x8BD5;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;7 &#x662F;Redis&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;Demo,&#x4F9D;&#x8D56;&#x9AD8;&#x53EF;&#x7528;Redis</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;8 &#x662F;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x6BD4;&#x8F83;&#x6D41;&#x884C;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x5F0F;,&#x4F9D;&#x8D56;&#x9AD8;&#x53EF;&#x7528;Redis</p>
<p>&#x53C2;&#x8003;&#x6587;&#x7AE0;:</p>
<p>&#x57FA;&#x4E8E;Redis&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5B9E;&#x73B0;</p>
<p><a href="https://dev.newban.cn/6844903830442737671">juejin.cn/post/684490&#x2026;</a></p>
<p>&#x8FD9;&#x624D;&#x53EB;&#x7EC6;&#xFF1A;&#x5E26;&#x4F60;&#x6DF1;&#x5165;&#x7406;&#x89E3;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;</p>
<p><a href="/external_links/1bb959f901b9dc3904c0fcd8e916a96e.html" target="blank" rel="noopener">mp.weixin.qq.com/s?__biz=MzI&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ead286097e5935975c39f917e29d7fcb.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935691992596742181.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935691992596742181.html" itemprop="url">MyBatis Generator逆向工程-你还在手写map</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T15:07:12+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="MyBatis-Generator&#x9006;&#x5411;&#x5DE5;&#x7A0B;"><a href="#MyBatis-Generator&#x9006;&#x5411;&#x5DE5;&#x7A0B;" class="headerlink" title="MyBatis Generator&#x9006;&#x5411;&#x5DE5;&#x7A0B;"></a>MyBatis Generator&#x9006;&#x5411;&#x5DE5;&#x7A0B;</h3><ul>
<li><a href="#_1">&#x4EC0;&#x4E48;&#x662F;&#x9006;&#x5411;&#x5DE5;&#x7A0B;?</a></li>
<li><a href="#jar_6">&#x5BFC;&#x5165;jar&#x5305;</a></li>
<li><a href="#_22">&#x914D;&#x7F6E;&#x6587;&#x4EF6;</a></li>
<li><a href="#_89">&#x751F;&#x6210;&#x4EE3;&#x7801;</a></li>
</ul>
<h1 id="&#x4EC0;&#x4E48;&#x662F;&#x9006;&#x5411;&#x5DE5;&#x7A0B;"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x9006;&#x5411;&#x5DE5;&#x7A0B;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x9006;&#x5411;&#x5DE5;&#x7A0B;?"></a>&#x4EC0;&#x4E48;&#x662F;&#x9006;&#x5411;&#x5DE5;&#x7A0B;?</h1><hr>
<p>&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;Mybatis&#x9006;&#x5411;&#x5DE5;&#x7A0B;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8868;&#x6765;&#x9006;&#x5411;&#x751F;&#x6210;&#x76F8;&#x5173;java&#x4EE3;&#x7801;&#x548C;sql&#x8BED;&#x53E5;&#xFF0C;&#x5982;mapper.java&#xFF0C;mapper.xml&#x3002;&#x867D;&#x7136;mapper&#x63A5;&#x53E3;&#x53CA;&#x5176;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x5199;&#xFF0C;&#x4E0D;&#x8FC7;&#x5F53;&#x8868;&#x6570;&#x91CF;&#x5F88;&#x591A;&#xFF0C;&#x5173;&#x8054;&#x590D;&#x6742;&#x65F6;&#xFF0C;&#x7528;MyBatis Generator&#x9006;&#x5411;&#x5DE5;&#x7A0B;&#x5C31;&#x5341;&#x5206;&#x65B9;&#x4FBF;&#x4E86;&#x3002;&#x5F53;&#x7136;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x4FEE;&#x6539;&#x5176;&#x751F;&#x6210;&#x7684;mapper&#x3002;</p>
<h1 id="&#x5BFC;&#x5165;jar&#x5305;"><a href="#&#x5BFC;&#x5165;jar&#x5305;" class="headerlink" title="&#x5BFC;&#x5165;jar&#x5305;"></a>&#x5BFC;&#x5165;jar&#x5305;</h1><hr>
<p>&#x5C06;mybatis-generator-core&#x76F8;&#x5173;jar&#x5305;&#x5BFC;&#x5165;&#x9879;&#x76EE;&#xFF0C;&#x5728;<a href="/external_links/2d7a27642b88ccaf08491d6c9dbd9183.html" target="blank" rel="noopener">maven&#x4ED3;&#x5E93;</a>&#x4E2D;&#x641C;&#x7D22;mybatis generator&#xFF0C;&#x590D;&#x5236;&#x4EE3;&#x7801;&#x5230;pom.xml&#x3002;  </p>
<p>&#x4E0D;&#x4E86;&#x89E3;Maven&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#xFF0C;&#x53EF;&#x4EE5;<a href="/external_links/94822490f2b38727e6f05de8c8483f0c.html" target="blank" rel="noopener">&#x70B9;&#x8FD9;&#x91CC;</a>&#x3002;  </p>
<p>&#x6216;&#x8005;&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x5E76;&#x5BFC;&#x5165;jar&#x5305;&#xFF0C;<a href="/external_links/1b236028f8acf6b2172d1b3661bb0568.html" target="blank" rel="noopener">github&#x4E0B;&#x8F7D;&#x5730;&#x5740;</a>&#x3002;<img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/ce9dc96621ae3bd58577539dc4d32d3f64142013534b074c6f7d5575f4a64202" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- https://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.3.5&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h1 id="&#x914D;&#x7F6E;&#x6587;&#x4EF6;"><a href="#&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h1><hr>
<p>&#x65B0;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6;mbg.xml&#xFF0C;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#xFF0C;&#x6307;&#x5B9A;&#x751F;&#x6210;&#x6587;&#x4EF6;&#x53CA;&#x4F4D;&#x7F6E;&#xFF0C;&#x6307;&#x5B9A;&#x5F85;&#x751F;&#x6210;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7684;&#x8868;&#x7B49;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/e24233d9a44b1e8eec7642fe682770a31103d2c5897cf54456ce6b01d22b1e9d" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE generatorConfiguration</span><br><span class="line">  PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span><br><span class="line">  &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;generatorConfiguration&gt;</span><br><span class="line">	&lt;!--&#x8FD9;&#x91CC;&#x7528;&#x7684;&#x662F;MyBatis3Simple&#x5373;&#x7B80;&#x5355;&#x7684;&#x589E;&#x5220;&#x6539;&#x67E5;--&gt;</span><br><span class="line">	&lt;!--&#x4E00;&#x822C;&#x4F7F;&#x7528;MyBatis3--&gt;</span><br><span class="line">  &lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3Simple&quot;&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- &#x9006;&#x5411;&#x751F;&#x6210;&#x6E05;&#x9664;&#x6CE8;&#x91CA; --&gt;</span><br><span class="line">    &lt;commentGenerator&gt;</span><br><span class="line">    &lt;property name=&quot;suppressAllComments&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">	&lt;/commentGenerator&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- &#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x914D;&#x7F6E; --&gt;</span><br><span class="line">    &lt;jdbcConnection </span><br><span class="line">    	driverClass=&quot;com.mysql.cj.jdbc.Driver&quot;</span><br><span class="line">        connectionURL=&quot;jdbc:mysql://localhost:3306/experiment9?serverTimezone=UTC&quot;</span><br><span class="line">        userId=&quot;root&quot;</span><br><span class="line">        password=&quot;&#x6570;&#x636E;&#x5E93;&#x5BC6;&#x7801;&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;nullCatalogMeansCurrent&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;/jdbcConnection&gt;</span><br><span class="line"></span><br><span class="line">    &lt;javaTypeResolver &gt;</span><br><span class="line">      &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot; /&gt;</span><br><span class="line">    &lt;/javaTypeResolver&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- &#x6307;&#x5B9A;javaBean&#x9006;&#x751F;&#x6210;&#x4F4D;&#x7F6E; --&gt;</span><br><span class="line">    &lt;javaModelGenerator </span><br><span class="line">    	targetPackage=&quot;cn.csdn.bean&quot; </span><br><span class="line">    	targetProject=&quot;.\src\main\java&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">      &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/javaModelGenerator&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- &#x6307;&#x5B9A;sql&#x6620;&#x5C04;&#x6587;&#x4EF6;&#x751F;&#x6210;&#x7684;&#x4F4D;&#x7F6E; --&gt;</span><br><span class="line">    &lt;sqlMapGenerator </span><br><span class="line">    targetPackage=&quot;mapper&quot;  </span><br><span class="line">    targetProject=&quot;.\src\main\resources&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/sqlMapGenerator&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- &#x6307;&#x5B9A;dao&#x63A5;&#x53E3;&#x751F;&#x6210;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;mapper&#x63A5;&#x53E3; --&gt;</span><br><span class="line">    &lt;javaClientGenerator </span><br><span class="line">    type=&quot;XMLMAPPER&quot; </span><br><span class="line">    targetPackage=&quot;cn.csdn.dao&quot;  </span><br><span class="line">    targetProject=&quot;.\src\main\java&quot;&gt;</span><br><span class="line">      &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/javaClientGenerator&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;!-- &#x6307;&#x5B9A;&#x6BCF;&#x4E2A;&#x8868;&#x7684;&#x751F;&#x6210;&#x7B56;&#x7565; --&gt;</span><br><span class="line">    &lt;table tableName=&quot;message&quot; domainObjectName=&quot;Message&quot;&gt;&lt;/table&gt;</span><br><span class="line">    &lt;table tableName=&quot;product&quot; domainObjectName=&quot;Product&quot;&gt;&lt;/table&gt;</span><br><span class="line">    &lt;table tableName=&quot;revert&quot; domainObjectName=&quot;Revert&quot;&gt;&lt;/table&gt;</span><br><span class="line">    &lt;table tableName=&quot;user&quot; domainObjectName=&quot;User&quot;&gt;&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/context&gt;</span><br><span class="line">&lt;/generatorConfiguration&gt;</span><br></pre></td></tr></table></figure>

<h1 id="&#x751F;&#x6210;&#x4EE3;&#x7801;"><a href="#&#x751F;&#x6210;&#x4EE3;&#x7801;" class="headerlink" title="&#x751F;&#x6210;&#x4EE3;&#x7801;"></a>&#x751F;&#x6210;&#x4EE3;&#x7801;</h1><hr>
<p>&#x914D;&#x7F6E;&#x5B8C;&#x540E;&#xFF0C;&#x5B98;&#x7F51;&#x4E0A;&#x9006;&#x5411;&#x751F;&#x6210;&#x7684;&#x65B9;&#x6CD5;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5982;&#x547D;&#x4EE4;&#x884C;&#xFF0C;eclipse&#x63D2;&#x4EF6;&#x7B49;&#xFF0C;&#x8FD9;&#x91CC;&#x4ECB;&#x7ECD;&#x7528;java&#x4EE3;&#x7801;&#x8C03;&#x7528;&#x3002;  </p>
<p>&#x65B0;&#x5EFA;MBGTest.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package cn.csdn.test;</span><br><span class="line"></span><br><span class="line">import java.io.File;</span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">import org.mybatis.generator.api.MyBatisGenerator;</span><br><span class="line">import org.mybatis.generator.config.Configuration;</span><br><span class="line">import org.mybatis.generator.config.xml.ConfigurationParser;</span><br><span class="line">import org.mybatis.generator.internal.DefaultShellCallback;</span><br><span class="line"></span><br><span class="line">public class MBGTest {</span><br><span class="line">	public static void main(String[] args) throws Exception {</span><br><span class="line">		 List&lt;String&gt; warnings = new ArrayList&lt;String&gt;();</span><br><span class="line">		   boolean overwrite = true;</span><br><span class="line">		   File configFile = new File(&quot;mbg.xml&quot;);//&#x6CE8;&#x610F;&#x540D;&#x5B57;&#x548C;&#x4E0A;&#x6587;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x5B57;&#x76F8;&#x540C;</span><br><span class="line">		   ConfigurationParser cp = new ConfigurationParser(warnings);</span><br><span class="line">		   Configuration config = cp.parseConfiguration(configFile);</span><br><span class="line">		   DefaultShellCallback callback = new DefaultShellCallback(overwrite);</span><br><span class="line">		   MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config, callback, warnings);</span><br><span class="line">		   myBatisGenerator.generate(null);</span><br><span class="line">		   System.out.println(&quot;finish&quot;);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Run As-&gt;Java Application  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/c51bd49d795cb72e1bf40696235e7cfecce2e64cfaecda2bdfc6ecd213dbb9e7" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">  </p>
<p>&#x6700;&#x540E;&#x63A7;&#x5236;&#x53F0;&#x6253;&#x5370;finish&#xFF0C;&#x5237;&#x65B0;&#x76EE;&#x5F55;&#xFF0C;&#x5C31;&#x6709;&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x4E86;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/1dee6fdc397a64a11b979e13b9760c44e432577a872cb218c4cf602d54195ab3" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<blockquote>
<p><strong>&#x539F;&#x521B;&#x4E0D;&#x6613;&#xFF0C;&#x8BF7;&#x52FF;&#x8F6C;&#x8F7D;</strong>&#xFF08;<del>&#x672C;&#x4E0D;&#x5BCC;&#x88D5;&#x7684;&#x8BBF;&#x95EE;&#x91CF;&#x96EA;&#x4E0A;&#x52A0;&#x971C;</del> &#xFF09;  </p>
<p>&#x535A;&#x4E3B;&#x9996;&#x9875;&#xFF1A;<a href="/external_links/63cbec41ac548ff65b58cb88952490ca.html" target="blank" rel="noopener">blog.csdn.net/qq_45034708</a>  </p>
<p><em>&#x5982;&#x679C;&#x6587;&#x7AE0;&#x5BF9;&#x4F60;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x8BB0;&#x5F97;&#x5173;&#x6CE8;&#x70B9;&#x8D5E;&#x6536;&#x85CF;&#x2764;</em></p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/1f94195d10ba5f5f160aa823d466e796.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935680090990723108.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935680090990723108.html" itemprop="url">谈线程池</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T14:21:26+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x8BE5;&#x7BC7;&#x6587;&#x7AE0;&#x4EE5;&#x8F6C;&#x79FB;&#x81F3;github &#x2013;</p>
<p><a href="/external_links/ca8fbd38540c4db1abaede7589198195.html" target="blank" rel="noopener">github.com/RansongZ/Ti&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/f3afa92fd58f1d20579add4e271e731e.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935635347817070622.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935635347817070622.html" itemprop="url">从小厂逆袭快手，我是如何准备面试的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T11:28:02+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x6211;&#x5C06;&#x6587;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#x7684; MySQL&#x3001;Redis&#x3001;Kafka &#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x653E;&#x5230;&#x4E86;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x4E2D;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;<strong>&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x3010;haxianhe&#x3011;&#xFF0C;&#x56DE;&#x590D; &#x201C;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x201D; &#x9886;&#x53D6;&#x9AD8;&#x6E05;pdf&#x7248;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;</strong>&#x3002;</p>
<hr>
<p>&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0; <a href="/external_links/31efafaab36453ef9dfc78b48c3165ea.html" target="blank" rel="noopener">&#x6DA8;&#x85AA;50%&#xFF0C;&#x4ECE;&#x5C0F;&#x5382;&#x9006;&#x88AD;&#x5FEB;&#x624B; - &#x9644;&#x9762;&#x7ECF;</a> &#x4E2D;&#xFF0C;&#x6211;&#x6982;&#x8FF0;&#x6027;&#x7684;&#x7ED9;&#x51FA;&#x4E86;&#x793E;&#x62DB;&#x8DF3;&#x69FD;&#x6709;&#x54EA;&#x4E9B;&#x73AF;&#x8282;&#x8981;&#x53BB;&#x51C6;&#x5907;&#xFF0C;&#x90A3;&#x4E48;&#x4ECA;&#x5929;&#x6211;&#x4F1A;&#x7ED9;&#x51FA;&#x9762;&#x8BD5;&#x590D;&#x4E60;&#x6BD4;&#x8F83;&#x63A8;&#x8350;&#x7684;&#x590D;&#x4E60;&#x8D44;&#x6599;&#x3001;&#x5982;&#x4F55;&#x590D;&#x4E60;&#x4EE5;&#x53CA;&#x6709;&#x54EA;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/0ee547cd63d78733ee385644247ce24e604ffbb422ea69fb35c0c3ee6aa60ad6" alt></p>
<h2 id="&#x81EA;&#x6211;&#x4ECB;&#x7ECD;"><a href="#&#x81EA;&#x6211;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x81EA;&#x6211;&#x4ECB;&#x7ECD;"></a>&#x81EA;&#x6211;&#x4ECB;&#x7ECD;</h2><p>&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x662F;&#x9762;&#x8BD5;&#x7684;&#x4E00;&#x573A;&#x9762;&#x8BD5;&#x7B2C;&#x4E00;&#x4E2A;&#x73AF;&#x8282;&#xFF0C;&#x800C;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x662F;&#x53EF;&#x4EE5;&#x5F15;&#x5BFC;&#x6574;&#x573A;&#x9762;&#x8BD5;&#x7684;&#x8282;&#x594F;&#x7684;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x5982;&#x4F55;&#x51C6;&#x5907;&#x4E00;&#x4EFD;&#x201C;&#x5408;&#x9002;&#x201D;&#x7684;&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x77E5;&#x9053;&#x9762;&#x8BD5;&#x5B98;&#x60F3;&#x901A;&#x8FC7;&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x4E86;&#x89E3;&#x4EC0;&#x4E48;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x5728;&#x6280;&#x672F;&#x9762;&#x8BD5;&#x4E2D;&#xFF0C;&#x9762;&#x8BD5;&#x5B98;&#x9664;&#x4E86;&#x60F3;&#x5728;&#x4F60;&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x7684;&#x65F6;&#x95F4;&#x770B;&#x5E94;&#x8058;&#x8005;&#x7684;&#x7B80;&#x5386;&#x4E4B;&#x5916;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x60F3;&#x4E86;&#x89E3;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#x4FE1;&#x606F;&#xFF1A;&#x5E74;&#x9F84;&#xFF0C;&#x6BD5;&#x4E1A;&#x9662;&#x6821;&#xFF0C;&#x5DE5;&#x4F5C;&#x5E74;&#x9650;&#xFF0C;&#x5DE5;&#x4F5C;&#x7ECF;&#x5386;&#xFF0C;&#x884C;&#x4E1A;&#x80CC;&#x666F;&#xFF0C;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x6280;&#x672F;&#x9762;&#x7B49;&#x8FD9;&#x4E9B;&#x57FA;&#x7840;&#x4FE1;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x548C;&#x7B80;&#x5386;&#x4FE1;&#x606F;&#x5C31;&#x53EF;&#x4EE5;&#x6DF1;&#x5165;&#x7684;&#x804A;&#x4E00;&#x4E0B;&#x5177;&#x4F53;&#x7684;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x6280;&#x672F;&#x95EE;&#x9898;&#x7B49;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x5728;&#x8FDB;&#x884C;&#x81EA;&#x6211;&#x4ECB;&#x7ECD;&#x7684;&#x65F6;&#x5019;&#x6982;&#x8FF0;&#x6027;&#x7684;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x7684;&#x5B66;&#x5386;&#x80CC;&#x666F;&#x3001;&#x5DE5;&#x4F5C;&#x7ECF;&#x5386;&#x3001;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x4EE5;&#x53CA;&#x81EA;&#x5DF1;&#x64C5;&#x957F;&#x7684;&#x6280;&#x672F;&#x9762;&#x5373;&#x53EF;&#x3002;&#x5982;&#x679C;&#x9762;&#x8BD5;&#x5B98;&#x5BF9;&#x4F60;&#x4ECB;&#x7ECD;&#x7684;&#x54EA;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x4ED6;&#x4F1A;&#x5177;&#x4F53;&#x95EE;&#x4F60;&#x7684;&#x3002;</p>
<h2 id="&#x9879;&#x76EE;&#x7ECF;&#x9A8C;"><a href="#&#x9879;&#x76EE;&#x7ECF;&#x9A8C;" class="headerlink" title="&#x9879;&#x76EE;&#x7ECF;&#x9A8C;"></a>&#x9879;&#x76EE;&#x7ECF;&#x9A8C;</h2><p>&#x8FD9;&#x90E8;&#x5206;&#x662F;&#x793E;&#x62DB;&#x9762;&#x8BD5;&#x7684;&#x91CD;&#x5934;&#x620F;&#xFF0C;&#x603B;&#x7684;&#x539F;&#x5219;&#x662F; <strong>&#x4EE5;&#x201C;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#x201D;&#x5BB9;&#x7EB3;&#x201C;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x201D;&#xFF0C;&#x652F;&#x6491;&#x201C;&#x6280;&#x672F;&#x4EAE;&#x70B9;&#x201D;&#x3002;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b97c1a3da849f9b3351f938cb7f0310c453682f0d533c573fdef9157002f4e85" alt></p>
<p>&#x9762;&#x8BD5;&#x63D0;&#x5230;&#x7684;&#x6280;&#x672F;&#x4EAE;&#x70B9;&#x662F;&#x9700;&#x8981;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#x6765;&#x652F;&#x6491;&#x7684;&#x3002;</p>
<p>&#x5927;&#x591A;&#x6570;&#x4EBA;&#x5728;&#x65E5;&#x5E38;&#x7684;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x7528;&#x5230;&#x7684;&#x6280;&#x672F;&#x662F;&#x975E;&#x5E38;&#x6709;&#x9650;&#x7684;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x662F; CRUD &#x5916;&#x5E26;&#x4E00;&#x4E9B;&#x8C03;&#x4F18;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x666E;&#x904D;&#x73B0;&#x8C61;&#x3002;&#x53CD;&#x4E4B;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x521D;&#x7EA7;&#x5F00;&#x53D1;&#xFF0C;&#x5728;&#x9762;&#x8BD5;&#x4E2D;&#x8BF4;&#xFF0C;&#x4E4B;&#x524D;&#x5F00;&#x53D1;&#x7684;&#x6A21;&#x5757;&#x65E2;&#x6709;jvm&#x8C03;&#x4F18;&#x3001;&#x53C8;&#x6709;&#x5206;&#x5E03;&#x5F0F;&#x7EC4;&#x4EF6;&#xFF0C;&#x518D;&#x5916;&#x5E26;&#x6570;&#x636E;&#x5E93;&#x6027;&#x80FD;&#x4F18;&#x5316;&#xFF0C;&#x4F3C;&#x4E4E;&#x53EF;&#x4FE1;&#x5EA6;&#x4E5F;&#x4E0D;&#x9AD8;&#x3002;</p>
<p>&#x5BF9;&#x6B64;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x7528;&#x201C;&#x89E3;&#x51B3;&#x8FC7;&#x7684;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x201D;&#x53BB;&#x652F;&#x6491;&#x60F3;&#x8981;&#x5C55;&#x5F00;&#x7684;&#x6280;&#x672F;&#x4EAE;&#x70B9;&#xFF0C;&#x9700;&#x8981;&#x4F60;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x4E2D;&#x79EF;&#x6781;&#x4E3B;&#x52A8;&#x7684;&#x53BB;&#x53C2;&#x4E0E;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#xFF0C;&#x6BD4;&#x5982;&#x6709; oom &#x95EE;&#x9898;&#x3001;redis&#x7F13;&#x5B58;&#x88AB;&#x51FB;&#x7A7F;&#xFF0C;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x5206;&#x5E03;&#x5F0F;&#x7EC4;&#x4EF6;&#x7684;case&#xFF0C;&#x4F60;&#x53C2;&#x4E0E;&#x6392;&#x67E5;&#x5E76;&#x89E3;&#x51B3;&#xFF0C;&#x90A3;&#x4E48;&#x5C06;&#x6765;&#x9762;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x81EA;&#x7136;&#x53EF;&#x4EE5;&#x4EE5;&#x6B64;&#x4E3A;&#x57FA;&#x7840;&#x53BB;&#x5C55;&#x5F00;&#x4F60;&#x4E8B;&#x5148;&#x51C6;&#x5907;&#x597D;&#x7684;&#x6280;&#x672F;&#x4EAE;&#x70B9;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x50CF;&#x4E0A;&#x9762;&#x7684;&#x90A3;&#x5F20;&#x56FE;&#x4E00;&#x6837;&#xFF0C;&#x4F60;&#x5C31;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x652F;&#x6491;&#x7269;&#x53BB;&#x652F;&#x6491;&#x4F60;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7EC4;&#x4EF6;&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x503C;&#x94B1;&#x7684;&#x6280;&#x80FD;&#x4E86;&#x3002;</p>
<p>&#x603B;&#x4E4B;&#xFF0C;<strong>&#x6280;&#x672F;&#x672C;&#x8EAB;&#x4E0D;&#x503C;&#x94B1;&#xFF0C;&#x9762;&#x8BD5;&#x5B98;&#x53EA;&#x5173;&#x5FC3;&#x4F60;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x6280;&#x672F;&#x53BB;&#x89E3;&#x51B3;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x7684;&#x3002;</strong></p>
<h3 id="&#x9879;&#x76EE;&#x4ECB;&#x7ECD;"><a href="#&#x9879;&#x76EE;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x9879;&#x76EE;&#x4ECB;&#x7ECD;"></a>&#x9879;&#x76EE;&#x4ECB;&#x7ECD;</h3><p>&#x5728;&#x9762;&#x8BD5;&#x65F6;&#xFF0C;&#x7ECF;&#x8FC7;&#x5BD2;&#x6684;&#x540E;&#xFF0C;&#x4E00;&#x822C;&#x9762;&#x8BD5;&#x5B98;&#x4F1A;&#x8BA9;&#x4ECB;&#x7ECD;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x5E38;&#x89C1;&#x7684;&#x95EE;&#x6CD5;&#x662F;&#xFF1A;&#x201C;&#x8BF4;&#x4E0B;&#x4F60;&#x6700;&#x8FD1;&#x7684;&#xFF08;&#x6216;&#x6700;&#x62FF;&#x5F97;&#x51FA;&#x624B;&#x7684;&#xFF09;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x201D;&#x3002;</p>
<p><strong>&#x5728;&#x9762;&#x8BD5;&#x524D;&#x51C6;&#x5907;&#x9879;&#x76EE;&#x63CF;&#x8FF0;&#xFF0C;&#x522B;&#x5BB3;&#x6015;&#xFF0C;&#x56E0;&#x4E3A;&#x9762;&#x8BD5;&#x5B98;&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x77E5;&#x9053;</strong></p>
<p>&#x9762;&#x8BD5;&#x5B98;&#x662F;&#x4EBA;&#xFF0C;&#x4E0D;&#x662F;&#x795E;&#xFF0C;&#x62FF;&#x5230;&#x4F60;&#x7684;&#x7B80;&#x5386;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x6CA1;&#x6CD5;&#x6838;&#x5B9E;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x7EC6;&#x8282;&#x7684;&#xFF08;&#x4E00;&#x822C;&#x516C;&#x53F8;&#x4F1A;&#x5230;&#x5F55;&#x7528;&#x540E;&#xFF0C;&#x7528;&#x80CC;&#x666F;&#x8C03;&#x67E5;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6838;&#x5B9E;&#xFF09;&#x3002;</p>
<p>&#x66F4;&#x4F55;&#x51B5;&#xFF0C;&#x4F60;&#x505A;&#x7684;&#x9879;&#x76EE;&#x662F;&#x4EE5;&#x6708;&#x4E3A;&#x5355;&#x4F4D;&#x7B97;&#x7684;&#xFF0C;&#x800C;&#x9762;&#x8BD5;&#x5B98;&#x6700;&#x591A;&#x7528;3&#x5206;&#x949F;&#x6765;&#x4ECE;&#x4F60;&#x7684;&#x7B80;&#x5386;&#x4E0A;&#x4E86;&#x89E3;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x5BF9;&#x9879;&#x76EE;&#x7684;&#x719F;&#x6089;&#x7A0B;&#x5EA6;&#x8981;&#x8FDC;&#x8FDC;&#x8D85;&#x8FC7;&#x9762;&#x8BD5;&#x5B98;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x4E00;&#x70B9;&#x4E5F;&#x4E0D;&#x7528;&#x7D27;&#x5F20;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x6BD4;&#x9762;&#x8BD5;&#x5B98;&#x8FD8;&#x4E30;&#x5BCC;&#x7684;&#x8BDD;&#xFF0C;&#x751A;&#x81F3;&#x8FD8;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x6574;&#x4E2A;&#x9762;&#x8BD5;&#x6D41;&#x7A0B;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7ED9;&#x51FA;&#x4E86;&#x4F60;&#x548C;&#x9762;&#x8BD5;&#x5B98;&#x7684;&#x60C5;&#x51B5;&#x5BF9;&#x6BD4;&#xFF1A;</p>
<table>
<thead>
<tr>
<th></th>
<th>&#x4F60;</th>
<th>&#x9762;&#x8BD5;&#x5B98;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x5BF9;&#x4F60;&#x4EE5;&#x524D;&#x7684;&#x9879;&#x76EE;&#x548C;&#x6280;&#x80FD;</td>
<td>&#x5F88;&#x4E86;&#x89E3;</td>
<td>&#x53EA;&#x80FD;&#x542C;&#x4F60;&#x8BF4;&#xFF0C;&#x53EA;&#x80FD;&#x6839;&#x636E;&#x4F60;&#x8BF4;&#x7684;&#x5185;&#x5BB9;&#x505A;&#x51FA;&#x5224;&#x65AD;</td>
</tr>
<tr>
<td>&#x5728;&#x9762;&#x8BD5;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x804C;&#x8D23;</td>
<td>&#x5728;&#x5F88;&#x77ED;&#x7684;&#x65F6;&#x95F4;&#x5185;&#x9632;&#x5B88;&#x6210;&#x529F;&#x5373;&#x53EF;</td>
<td>&#x5982;&#x679C;&#x627E;&#x4E0D;&#x51FA;&#x6F0F;&#x6D1E;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x7B97;&#x4F60;&#x4EE5;&#x524D;&#x505A;&#x8FC7;</td>
</tr>
<tr>
<td>&#x51C6;&#x5907;&#x65F6;&#x95F4;</td>
<td>&#x9762;&#x8BD5;&#x524D;&#x4F60;&#x6709;&#x5145;&#x8DB3;&#x7684;&#x65F6;&#x95F4;&#x51C6;&#x5907;</td>
<td>&#x4E00;&#x822C;&#x5728;&#x9762;&#x8BD5;&#x524D;&#x7528;3&#x5206;&#x949F;&#x9605;&#x8BFB;&#x4F60;&#x7684;&#x7B80;&#x5386;</td>
</tr>
<tr>
<td>&#x6C9F;&#x901A;&#x8FC7;&#x7A0B;</td>
<td>&#x4F60;&#x53EF;&#x4EE5;&#x51FA;&#x9519;&#xFF0C;&#x4F46;&#x522B;&#x51FA;&#x5173;&#x952E;&#x6027;&#x7684;&#x9519;&#x8BEF;</td>
<td>&#x4E0D;&#x4F1A;&#x592A;&#x4E3A;&#x96BE;&#x4F60;&#xFF0C;&#x9664;&#x975E;&#x4F60;&#x592A;&#x5DEE;</td>
</tr>
<tr>
<td>&#x6280;&#x5DE7;</td>
<td>&#x4F60;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x6280;&#x5DE7;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE;&#x7F51;&#x4E0A;&#x627E;&#x5230;&#x8DB3;&#x591F;&#x591A;&#x7684;&#x9762;&#x8BD5;&#x9898;</td>
<td>&#x5176;&#x5B9E;&#x5C31;&#x95EE;&#x4E9B;&#x901A;&#x7528;&#x7684;&#x6709;&#x89C4;&#x5F8B;&#x7684;&#x95EE;&#x9898;</td>
</tr>
</tbody></table>
<p>&#x65E2;&#x7136;&#x9762;&#x8BD5;&#x5B98;&#x65E0;&#x6CD5;&#x4E86;&#x89E3;&#x4F60;&#x7684;&#x5E95;&#x7EC6;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4EEC;&#x600E;&#x4E48;&#x6765;&#x9A8C;&#x8BC1;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#x548C;&#x6280;&#x672F;&#xFF1F;</p>
<p>&#x4E0B;&#x9762;&#x603B;&#x7ED3;&#x4E86;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;&#x63D0;&#x95EE;&#x65B9;&#x5F0F;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x63D0;&#x95EE;&#x65B9;&#x5F0F;</th>
<th>&#x76EE;&#x7684;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x8BA9;&#x4F60;&#x63CF;&#x8FF0;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x548C;&#x9879;&#x76EE;&#xFF08;&#x6781;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x6700;&#x8FD1;&#x7684;&#xFF09;&#xFF0C;&#x770B;&#x770B;&#x4F60;&#x8BF4;&#x7684;&#x662F;&#x5426;&#x548C;&#x7B80;&#x5386;&#x4E0A;&#x4E00;&#x81F4;</td>
<td>&#x770B;&#x4F60;&#x662F;&#x5426;&#x771F;&#x7684;&#x505A;&#x8FC7;&#x8FD9;&#x4E9B;&#x9879;&#x76EE;</td>
</tr>
<tr>
<td>&#x770B;&#x4F60;&#x7B80;&#x5386;&#x4E0A;&#x9879;&#x76EE;&#x91CC;&#x7528;&#x5230;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x6BD4;&#x5982;&#x6846;&#x67B6;&#x3001;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x9488;&#x5BF9;&#x8FD9;&#x4E9B;&#x6280;&#x672F;&#x63D0;&#x4E9B;&#x57FA;&#x672C;&#x95EE;&#x9898;</td>
<td>&#x8FD8;&#x662F;&#x9A8C;&#x8BC1;&#x4F60;&#x662F;&#x5426;&#x505A;&#x8FC7;&#x9879;&#x76EE;&#xFF0C;&#x540C;&#x65F6;&#x770B;&#x4F60;&#x662F;&#x5426;&#x4E86;&#x89E3;&#x8FD9;&#x4E9B;&#x6280;&#x672F;&#xFF0C;&#x4E3A;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x95EE;&#x505A;&#x51C6;&#x5907;</td>
</tr>
<tr>
<td>&#x9488;&#x5BF9;&#x67D0;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x65AD;&#x6DF1;&#x5165;&#x5730;&#x95EE;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x4E0A;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6216;&#x8005;&#x4ECE;&#x4E0D;&#x540C;&#x4FA7;&#x9762;&#x95EE;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x5B9E;&#x73B0;&#xFF0C;&#x770B;&#x4F60;&#x524D;&#x540E;&#x56DE;&#x7B54;&#x91CC;&#x9762;&#x662F;&#x5426;&#x6709;&#x77DB;&#x76FE;</td>
<td>&#x6DF1;&#x5165;&#x6838;&#x5B9E;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x7EC6;&#x8282;</td>
</tr>
<tr>
<td>&#x9488;&#x5BF9;&#x67D0;&#x6280;&#x672F;&#xFF0C;&#x95EE;&#x4E9B;&#x9879;&#x76EE;&#x91CC;&#x4E00;&#x5B9A;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x5019;&#x9009;&#x4EBA;&#x8BF4;&#x505A;&#x8FC7;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x95EE;&#x7D22;&#x5F15;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;</td>
<td>&#x901A;&#x8FC7;&#x8FD9;&#x7C7B;&#x95EE;&#x9898;&#xFF0C;&#x6838;&#x5B9E;&#x5019;&#x9009;&#x4EBA;&#x662F;&#x5426;&#x771F;&#x7684;&#x6709;&#x8FC7;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF08;&#x6216;&#x8005;&#x8FD8;&#x4EC5;&#x4EC5;&#x662F;&#x5B66;&#x4E60;&#x7ECF;&#x9A8C;&#xFF09;</td>
</tr>
</tbody></table>
<p><strong>&#x51C6;&#x5907;&#x9879;&#x76EE;&#x7684;&#x5404;&#x79CD;&#x7EC6;&#x8282;&#xFF0C;&#x4E00;&#x65E6;&#x88AB;&#x95EE;&#x5012;&#x4E86;&#xFF0C;&#x5C31;&#x8BF4;&#x660E;&#x4F60;&#x6CA1;&#x505A;&#x8FC7;</strong></p>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x9762;&#x8BD5;&#x524D;&#xFF0C;&#x5927;&#x5BB6;&#x5E94;&#x5F53;&#x51C6;&#x5907;&#x9879;&#x76EE;&#x63CF;&#x8FF0;&#x7684;&#x8BF4;&#x8F9E;&#xFF0C;&#x81EA;&#x4FE1;&#x4E9B;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x90E8;&#x5206;&#x4F60;&#x8BF4;&#x4E86;&#x7B97;&#xFF0C;&#x6D41;&#x5229;&#x4E9B;&#xFF0C;&#x56E0;&#x4E3A;&#x4F60;&#x7ECF;&#x8FC7;&#x5145;&#x5206;&#x51C6;&#x5907;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x4F60;&#x8981;&#x8BF4;&#x4E9B;&#x4EC0;&#x4E48;&#x3002;</p>
<p>&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x662F;&#x4F60;&#x5B9E;&#x9645;&#x7684;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF08;&#x4E0D;&#x662F;&#x5B66;&#x4E60;&#x7ECF;&#x9A8C;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x57F9;&#x8BAD;&#x7ECF;&#x9A8C;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x65E6;&#x8BA9;&#x9762;&#x8BD5;&#x5B98;&#x611F;&#x89C9;&#x4F60;&#x90FD;&#x8BF4;&#x4E0D;&#x4E0A;&#x6765;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4FE1;&#x5EA6;&#x5C31;&#x5F88;&#x4F4E;&#x4E86;&#x3002;</p>
<p>&#x4E0D;&#x5C11;&#x4EBA;&#x662F;&#x62D8;&#x6CE5;&#x4E8E;&#x201C;&#x9879;&#x76EE;&#x91CC;&#x505A;&#x4E86;&#x4EC0;&#x4E48;&#x4E1A;&#x52A1;&#xFF0C;&#x4EE5;&#x53CA;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x7684;&#x7EC6;&#x8282;&#x201D;&#xFF0C;&#x8FD9;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x628A;&#x540E;&#x7EE7;&#x63D0;&#x95EE;&#x6743;&#x76F4;&#x63A5;&#x4EA4;&#x7ED9;&#x9762;&#x8BD5;&#x5B98;&#x3002;</p>
<p>&#x4E0B;&#x8868;&#x5217;&#x51FA;&#x4E86;&#x4E00;&#x4E9B;&#x4E0D;&#x597D;&#x7684;&#x56DE;&#x7B54;&#x65B9;&#x5F0F;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x56DE;&#x7B54;&#x65B9;&#x5F0F;</th>
<th>&#x540E;&#x679C;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x6211;&#x5728;XX&#x8F6F;&#x4EF6;&#x516C;&#x53F8;&#x505A;&#x4E86;XX&#x95E8;&#x6237;&#x7F51;&#x7AD9;&#x9879;&#x76EE;&#xFF0C;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x505A;&#x5230;&#x4E86;XX&#x529F;&#x80FD;&#xFF0C;&#x5177;&#x4F53;&#x662F;XX&#x548C;XX&#x6A21;&#x5757;&#xFF0C;&#x5404;&#x6A21;&#x5757;&#x505A;&#x4E86;XX&#x529F;&#x80FD;&#xFF0C;&#x5BA2;&#x6237;&#x662F;XX&#xFF0C;&#x6700;&#x540E;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x6323;&#x4E86;XX&#x94B1;</td>
<td>&#x76F4;&#x63A5;&#x6253;&#x65AD;&#xFF0C;&#x56E0;&#x4E3A;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x6211;&#x4E0D;&#x9700;&#x8981;&#x4E86;&#x89E3;&#xFF0C;&#x6211;&#x4F1A;&#x76F4;&#x63A5;&#x95EE;&#x4ED6;&#x9879;&#x76EE;&#x91CC;&#x7684;&#x6280;&#x672F;</td>
</tr>
<tr>
<td>&#xFF08;&#x9700;&#x8981;&#x62DB;&#x8058;&#x4E00;&#x4E2A;Java&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#xFF0C;&#x4F1A;Spring MVC&#xFF09;&#x6700;&#x8FD1;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x6211;&#x662F;&#x7528;C#&#xFF08;&#x6216;&#x5176;&#x4ED6;&#x975E;Java&#x6280;&#x672F;&#xFF09;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x2026;&#x2026;&#x6216;&#x8005;&#x6211;&#x6700;&#x8FD1;&#x505A;&#x7684;&#x4E0D;&#x662F;&#x5F00;&#x53D1;&#xFF0C;&#x800C;&#x662F;&#x6D4B;&#x8BD5;&#x2026;&#x2026;&#x6216;&#x8005;&#x6211;&#x6700;&#x8FD1;&#x7684;&#x9879;&#x76EE;&#x6CA1;&#x6709;&#x7528;&#x5230;Spring MVC</td>
<td>&#x63D0;&#x95EE;&#xFF0C;&#x4F60;&#x6700;&#x8FD1;&#x7528;&#x5230;SSH&#x6280;&#x672F;&#x7684;&#x9879;&#x76EE;&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8BC4;&#x8BED;&#x4E0A;&#x5199;&#xFF1A;&#x6700;&#x8FD1;XX&#x65F6;&#x95F4;&#x6CA1;&#x63A5;&#x89E6;&#x8FC7;SSH</td>
</tr>
<tr>
<td>&#x5728;&#x6BD5;&#x4E1A;&#x8BBE;&#x8BA1;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x6216;&#x8005;&#x5728;&#x8BFB;&#x4E66;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x5B66;&#x4E60;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;XX&#x57F9;&#x8BAD;&#x5B66;&#x6821;&#xFF0C;&#x5728;XX&#x5B9E;&#x8BAD;&#x8BFE;&#x7A0B;&#x4E2D;&#xFF09;&#xFF0C;&#x2026;&#x2026;</td>
<td>&#x76F4;&#x63A5;&#x6253;&#x65AD;&#xFF0C;&#x63D0;&#x95EE;&#x4F60;&#x8FD9;&#x4E2A;&#x662F;&#x5426;&#x662F;&#x5546;&#x4E1A;&#x9879;&#x76EE;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x4F60;&#x6709;&#x6CA1;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x5546;&#x4E1A;&#x7ECF;&#x9A8C;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x5546;&#x4E1A;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x9664;&#x975E;&#x662F;&#x6821;&#x62DB;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x76F4;&#x63A5;&#x7ED3;&#x675F;&#x9762;&#x8BD5;</td>
</tr>
<tr>
<td>&#x63CF;&#x8FF0;&#x9879;&#x76EE;&#x65F6;&#xFF0C;&#x4E00;&#x4E9B;&#x5173;&#x952E;&#x8981;&#x7D20;&#xFF08;&#x6BD4;&#x5982;&#x516C;&#x53F8;&#x3001;&#x65F6;&#x95F4;&#x3001;&#x6240;&#x7528;&#x6280;&#x672F;&#x7B49;&#xFF09;&#x548C;&#x7B80;&#x5386;&#x4E0A;&#x7684;&#x4E0D;&#x5339;&#x914D;</td>
<td>&#x6211;&#x4EEC;&#x4F1A;&#x6DF1;&#x7A76;&#x8FD9;&#x4E2A;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7B80;&#x5386;&#x9020;&#x5047;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x80FD;&#x76F4;&#x63A5;&#x4E2D;&#x65AD;&#x9762;&#x8BD5;&#xFF0C;&#x5982;&#x679C;&#x771F;&#x7684;&#x662F;&#x7B14;&#x8BEF;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x5408;&#x7406;&#x7684;&#x89E3;&#x91CA;</td>
</tr>
</tbody></table>
<p>&#x5728;&#x907F;&#x514D;&#x4E0A;&#x8FF0;&#x4E0D;&#x597D;&#x7684;&#x56DE;&#x7B54;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x6309;&#x4E0B;&#x8868;&#x6240;&#x7ED9;&#x51FA;&#x7684;&#x8981;&#x7D20;&#x51C6;&#x5907;&#x9879;&#x76EE;&#x4ECB;&#x7ECD;&#x3002;</p>
<table>
<thead>
<tr>
<th>&#x8981;&#x7D20;</th>
<th>&#x6837;&#x5F0F;</th>
</tr>
</thead>
<tbody><tr>
<td>&#x63A7;&#x5236;&#x5728;1&#x5206;&#x949F;&#x91CC;&#x9762;&#xFF0C;&#x8BB2;&#x51FA;&#x9879;&#x76EE;&#x57FA;&#x672C;&#x60C5;&#x51B5;&#xFF0C;&#x6BD4;&#x5982;&#x9879;&#x76EE;&#x540D;&#x79F0;&#xFF0C;&#x80CC;&#x666F;&#xFF0C;&#x7ED9;&#x54EA;&#x4E2A;&#x5BA2;&#x6237;&#x505A;&#xFF0C;&#x5B8C;&#x6210;&#x4E86;&#x57FA;&#x672C;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x505A;&#x4E86;&#x591A;&#x4E45;&#xFF0C;&#x9879;&#x76EE;&#x89C4;&#x6A21;&#x591A;&#x5927;&#xFF0C;&#x7528;&#x5230;&#x54EA;&#x4E9B;&#x6280;&#x672F;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7528;&#x4EC0;&#x4E48;&#xFF0C;&#x7136;&#x540E;&#x914C;&#x60C5;&#x7B80;&#x5355;&#x8BF4;&#x4E00;&#x4E0B;&#x6A21;&#x5757;&#x3002;&#x91CD;&#x70B9;&#x7A81;&#x51FA;&#x80CC;&#x666F;&#xFF0C;&#x6280;&#x672F;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x548C;&#x5176;&#x4ED6;&#x548C;&#x6280;&#x672F;&#x6709;&#x5173;&#x7684;&#x4FE1;&#x606F;&#x3002;</td>
<td>&#x6211;&#x5728;XX&#x516C;&#x53F8;&#x505A;&#x4E86;XX&#x5916;&#x6C47;&#x4FDD;&#x8BC1;&#x91D1;&#x4EA4;&#x6613;&#x5E73;&#x53F0;&#xFF0C;&#x5BA2;&#x6237;&#x662F;XX&#x94F6;&#x884C;&#xFF0C;&#x4E3B;&#x8981;&#x5B8C;&#x6210;&#x4E86;&#x6302;&#x76D8;&#xFF0C;&#x5B9E;&#x76D8;&#x6210;&#x4EA4;&#xFF0C;&#x4FDD;&#x8BC1;&#x91D1;&#x6760;&#x6746;&#x6210;&#x4EA4;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x662F;Oracle&#xFF0C;&#x524D;&#x53F0;&#x7528;&#x5230;JS&#x7B49;&#x6280;&#x672F;&#xFF0C;&#x540E;&#x53F0;&#x7528;&#x5230;Java&#x7684;SSH&#xFF0C;&#x51E0;&#x4E2A;&#x4EBA;&#x505A;&#x4E86;X&#x4E2A;&#x6708;&#x3002;&#x4E0D;&#x9700;&#x8981;&#x8BE6;&#x7EC6;&#x63CF;&#x8FF0;&#x5404;&#x529F;&#x80FD;&#x6A21;&#x5757;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x8BF4;&#x592A;&#x591A;&#x548C;&#x4E1A;&#x52A1;&#x6709;&#x5173;&#x4F46;&#x548C;&#x6280;&#x672F;&#x65E0;&#x5173;&#x7684;&#x3002;&#x5982;&#x679C;&#x9762;&#x8BD5;&#x5B98;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x7B49;&#x4ED6;&#x95EE;&#x3002;</td>
</tr>
<tr>
<td>&#x8981;&#x4E3B;&#x52A8;&#x8BF4;&#x51FA;&#x4F60;&#x505A;&#x4E86;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#xFF0C;&#x8FD9;&#x90E8;&#x5206;&#x7684;&#x63CF;&#x8FF0;&#x4E00;&#x5B9A;&#x9700;&#x8981;&#x548C;&#x4F60;&#x7684;&#x6280;&#x672F;&#x80CC;&#x666F;&#x4E00;&#x81F4;&#x3002;</td>
<td>&#x6211;&#x505A;&#x4E86;&#x5916;&#x6C47;&#x5B9E;&#x76D8;&#x4EA4;&#x6613;&#x7CFB;&#x7EDF;&#xFF0C;&#x6302;&#x5355;&#x6210;&#x4EA4;&#x7CFB;&#x7EDF;&#xFF0C;XXX&#x6A21;&#x5757;&#xFF0C;&#x505A;&#x4E86;X&#x4E2A;&#x6708;</td>
</tr>
<tr>
<td>&#x63CF;&#x8FF0;&#x4F60;&#x5728;&#x9879;&#x76EE;&#x91CC;&#x7684;&#x89D2;&#x8272;</td>
<td>&#x6211;&#x4E3B;&#x8981;&#x662F;&#x505A;&#x4E86;&#x5F00;&#x53D1;&#xFF0C;&#x4F46;&#x5728;&#x5F00;&#x53D1;&#x524D;&#xFF0C;&#x6211;&#x5728;&#x9879;&#x76EE;&#x7ECF;&#x7406;&#x7684;&#x5E26;&#x9886;&#x4E0B;&#x53C2;&#x4E0E;&#x4E86;&#x4E1A;&#x52A1;&#x8C03;&#x7814;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x8BBE;&#x8BA1;&#x7B49;&#x5DE5;&#x4F5C;&#xFF0C;&#x540E;&#x671F;&#x6211;&#x53C2;&#x4E0E;&#x4E86;&#x6D4B;&#x8BD5;&#x548C;&#x90E8;&#x7F72;&#x5DE5;&#x4F5C;&#x3002;</td>
</tr>
<tr>
<td>&#x53EF;&#x4EE5;&#x63CF;&#x8FF0;&#x7528;&#x5230;&#x7684;&#x6280;&#x672F;&#x7EC6;&#x8282;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4F60;&#x7528;&#x5230;&#x7684;&#x6280;&#x672F;&#x7EC6;&#x8282;&#xFF0C;&#x8FD9;&#x90E8;&#x5206;&#x5C24;&#x5176;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x4F60;&#x8BF4;&#x51FA;&#x53E3;&#x7684;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x77E5;&#x9053;&#xFF0C;&#x56E0;&#x4E3A;&#x9762;&#x8BD5;&#x5B98;&#x540E;&#x9762;&#x5C31;&#x6839;&#x636E;&#x8FD9;&#x4E2A;&#x95EE;&#x7684;&#x3002;&#x4F60;&#x5982;&#x679C;&#x505A;&#x4E86;5&#x4E2A;&#x6A21;&#x5757;&#xFF0C;&#x5B81;&#x53EF;&#x53EA;&#x8BF4;&#x4F60;&#x80FD;&#x719F;&#x7EC3;&#x8BF4;&#x4E0A;&#x53E3;&#x7684;2&#x4E2A;&#x3002;</td>
<td>&#x7528;&#x5230;&#x4E86;Java&#x91CC;&#x9762;&#x7684;&#x96C6;&#x5408;&#xFF0C;JDBC&#xFF0C;&#x2026;&#x7B49;&#x6280;&#x672F;&#xFF0C;&#x7528;&#x5230;&#x4E86;Spring MVC&#x7B49;&#x6846;&#x67B6;&#xFF0C;&#x7528;&#x6280;&#x672F;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#x3002;</td>
</tr>
<tr>
<td>&#x8FD9;&#x90E8;&#x5206;&#x4F60;&#x98CE;&#x9669;&#x81EA;&#x5DF1;&#x627F;&#x62C5;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#xFF0C;&#x4E0D;&#x9732;&#x58F0;&#x8272;&#x8BF4;&#x51FA;&#x4E00;&#x4E9B;&#x70ED;&#x95E8;&#x7684;&#x8981;&#x7D20;&#xFF0C;&#x6BD4;&#x5982;Linux&#xFF0C;&#x5927;&#x6570;&#x636E;&#xFF0C;&#x5927;&#x8BBF;&#x95EE;&#x538B;&#x529B;&#x7B49;&#x3002;&#x4F46;&#x4E00;&#x65E6;&#x4F60;&#x8BF4;&#x4E86;&#xFF0C;&#x9762;&#x8BD5;&#x5B98;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x95EE;&#x7EC6;&#x8282;&#x3002;</td>
<td>&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x91CC;&#xFF0C;&#x90E8;&#x7F72;&#x5728;Linux&#x4E0A;&#xFF0C;&#x6BCF;&#x5929;&#x8981;&#x5904;&#x7406;&#x7684;&#x6570;&#x636E;&#x91CF;&#x662F;XX&#xFF0C;&#x8981;&#x6C42;&#x662F;&#x5728;4&#x5C0F;&#x65F6;&#xFF0C;1G&#x5185;&#x5B58;&#x662F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5904;&#x7406;&#x5B8C;5&#x5343;&#x4E07;&#x6761;&#x6570;&#x636E;&#x3002;&#x5E73;&#x5747;&#x8BBF;&#x5BA2;&#x662F;&#x6BCF;&#x5206;&#x949F;XXX&#x3002;</td>
</tr>
</tbody></table>
<h3 id="&#x7EBF;&#x4E0A;&#x95EE;&#x9898;"><a href="#&#x7EBF;&#x4E0A;&#x95EE;&#x9898;" class="headerlink" title="&#x7EBF;&#x4E0A;&#x95EE;&#x9898;"></a>&#x7EBF;&#x4E0A;&#x95EE;&#x9898;</h3><p>&#x5927;&#x5BB6;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x4E2D;&#x4E00;&#x5B9A;&#x8981; <strong>&#x628A;&#x63E1;&#x4F4F;&#x51FA;&#x73B0;&#x201C;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x201D;&#x7684;&#x673A;&#x4F1A;&#x3002;</strong></p>
<p>&#x56E0;&#x4E3A;&#xFF0C;&#x529F;&#x80FD;&#x505A;&#x4E86;&#x53EA;&#x662F;&#x5177;&#x5907;&#x4E86;&#x9879;&#x76EE;&#x7ECF;&#x9A8C;&#xFF0C;&#x4F46;&#x662F;&#x9762;&#x8BD5;&#x7684;&#x65F6;&#x5019;&#x771F;&#x6B63;&#x201C;&#x503C;&#x94B1;&#x201D;&#x7684;&#x5176;&#x5B9E;&#x662F;&#x6280;&#x672F;&#x7684;&#x96BE;&#x70B9;&#x4E0E;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x800C;&#x4E00;&#x822C;&#x6280;&#x672F;&#x96BE;&#x70B9;&#x666E;&#x904D;&#x4F34;&#x968F;&#x7740;&#x201C;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x201D;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x4E2D;&#x79EF;&#x6781;&#x4E3B;&#x52A8;&#x70B9;&#xFF0C;&#x51FA;&#x73B0;&#x4E86;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#x4E0D;&#x7BA1;&#x662F;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x90FD;&#x53BB;&#x67E5;&#x3001;&#x53BB;&#x89E3;&#x51B3;&#xFF0C;&#x4E8B;&#x540E;&#x56F4;&#x7ED5;&#x7740;&#x201C;&#x95EE;&#x9898;&#x73B0;&#x8C61;&#x3001;&#x95EE;&#x9898;&#x5206;&#x6790;&#x3001;&#x95EE;&#x9898;&#x5F71;&#x54CD;&#x3001;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3001;&#x95EE;&#x9898;&#x6269;&#x5C55;&#x201D;&#x7B49;&#x53BB;&#x603B;&#x7ED3;&#x3001;&#x8BB0;&#x5F55;&#x5230;&#x81EA;&#x5DF1;&#x7684;&#x7B14;&#x8BB0;&#x603B;&#xFF0C;&#x540E;&#x7EED;&#x90FD;&#x662F;&#x81EA;&#x5DF1;&#x6700;&#x5B9D;&#x8D35;&#x7684;&#x8D22;&#x5BCC;&#x3002;</p>
<h3 id="&#x6280;&#x672F;&#x4EAE;&#x70B9;"><a href="#&#x6280;&#x672F;&#x4EAE;&#x70B9;" class="headerlink" title="&#x6280;&#x672F;&#x4EAE;&#x70B9;"></a>&#x6280;&#x672F;&#x4EAE;&#x70B9;</h3><p>&#x7ED3;&#x5408;&#x81EA;&#x5DF1;&#x9047;&#x5230;&#x8FC7;&#x7684;&#x7EBF;&#x4E0A;&#x95EE;&#x9898;&#xFF0C;&#x4F18;&#x5148;&#x51C6;&#x5907;&#x5206;&#x5E03;&#x5F0F;&#x7EC4;&#x4EF6;&#x65B9;&#x9762;&#x7684;&#x6280;&#x672F;&#x4EAE;&#x70B9;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7EC4;&#x4EF6;&#x4E3B;&#x8981;&#x6709; MySQL&#x3001;Redis&#x3001;Kafka&#x7B49;&#x3002;</p>
<p>&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x53C2;&#x8003;JD&#x4E0A;&#x5BF9;&#x6280;&#x672F;&#x8981;&#x6C42;&#xFF0C;&#x6709;&#x9488;&#x5BF9;&#x6027;&#x7684;&#x53BB;&#x51C6;&#x5907;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x5173;&#x4E8E;&#x4E2D;&#x95F4;&#x4EF6;&#x90E8;&#x5206;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<h2 id="&#x7F16;&#x7A0B;&#x8BED;&#x8A00;"><a href="#&#x7F16;&#x7A0B;&#x8BED;&#x8A00;" class="headerlink" title="&#x7F16;&#x7A0B;&#x8BED;&#x8A00;"></a>&#x7F16;&#x7A0B;&#x8BED;&#x8A00;</h2><p>&#x5173;&#x4E8E;&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#xFF0C;&#x8F6C;&#x8BED;&#x8A00;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x80FD;&#x66F4;&#x9700;&#x8981;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x9700;&#x8981;&#x660E;&#x786E;&#x7684;&#x662F;&#x4F60;&#x60F3;&#x8F6C;&#x5230;&#x4EC0;&#x4E48;&#x8BED;&#x8A00;&#xFF0C;&#x90A3;&#x4F60;&#x5C31;&#x9700;&#x8981;&#x4E8B;&#x5148;&#x51C6;&#x5907;&#x597D;&#x90A3;&#x4E2A;&#x8BED;&#x8A00;&#x9762;&#x8BD5;&#x53EF;&#x80FD;&#x8981;&#x95EE;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x56E0;&#x4E3A;&#x4F01;&#x4E1A;&#x62DB;&#x4F60;&#x8FDB;&#x53BB;&#x662F;&#x5E72;&#x6D3B;&#x7684;&#x800C;&#x4E0D;&#x662F;&#x518D;&#x50CF;&#x6821;&#x62DB;&#x90A3;&#x6837;&#xFF0C;&#x5148;&#x628A;&#x4F60;&#x62DB;&#x8FDB;&#x53BB;&#x518D;&#x53BB;&#x57F9;&#x517B;&#x4F60;&#x3002;&#x6295;&#x7B80;&#x5386;&#x524D;&#x4F60;&#x662F;&#x80FD;&#x770B;&#x5230;JD&#x7684;&#xFF0C;JD&#x4E0A;&#x4E00;&#x822C;&#x90FD;&#x6709;&#x5173;&#x4E8E;&#x9700;&#x8981;&#x638C;&#x63E1;&#x7684;&#x6280;&#x672F;&#x7684;&#x660E;&#x786E;&#x7684;&#x8981;&#x6C42;&#x3002;</p>
<p>&#x5173;&#x4E8E;Java&#x7684;&#x590D;&#x4E60;&#x6750;&#x6599;&#xFF0C;&#x63A8;&#x8350;&#x5F00;&#x6E90;&#x9879;&#x76EE;</p>
<ul>
<li><a href="/external_links/429317c612fec89c6e3af36cb3c29e27.html" target="blank" rel="noopener">JavaGuide</a></li>
</ul>
<h2 id="&#x4E2D;&#x95F4;&#x4EF6;"><a href="#&#x4E2D;&#x95F4;&#x4EF6;" class="headerlink" title="&#x4E2D;&#x95F4;&#x4EF6;"></a>&#x4E2D;&#x95F4;&#x4EF6;</h2><p>&#x5E38;&#x89C1;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x4E3B;&#x8981;&#x6709;&#xFF1A;MySQL&#x3001;Redis&#x3001;Kafka&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x6211;&#x7684;&#x590D;&#x4E60;&#x7ECF;&#x9A8C;&#x3002;</p>
<h3 id="&#x590D;&#x4E60;&#x6750;&#x6599;"><a href="#&#x590D;&#x4E60;&#x6750;&#x6599;" class="headerlink" title="&#x590D;&#x4E60;&#x6750;&#x6599;"></a>&#x590D;&#x4E60;&#x6750;&#x6599;</h3><p>&#x5173;&#x4E8E;&#x4E2D;&#x95F4;&#x4EF6;&#x7684;&#x590D;&#x4E60;&#x6750;&#x6599;&#xFF0C;&#x63A8;&#x8350;&#x5F00;&#x6E90;&#x9879;&#x76EE;</p>
<ul>
<li><a href="/external_links/8c1651ace39ea2815b08a4683d4b2786.html" target="blank" rel="noopener">advanced-java</a></li>
</ul>
<p>MySQL&#x590D;&#x4E60;&#x7684;&#x8BDD;&#xFF0C;&#x8FD8;&#x6709;&#x4E24;&#x672C;&#x4E66;&#x7ED9;&#x5927;&#x5BB6;&#x63A8;&#x8350;&#x4E00;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x300A;MySQL &#x6280;&#x672F;&#x5185;&#x5E55;&#xFF1A;InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x300B;</li>
<li>&#x300A;&#x9AD8;&#x6027;&#x80FD; MySQL&#x300B;</li>
</ul>
<p>Redis &#x590D;&#x4E60;&#x7684;&#x8BDD;&#xFF0C;&#x4E5F;&#x7ED9;&#x5927;&#x5BB6;&#x63A8;&#x8350;&#x4E00;&#x672C;&#x4E66;&#xFF1A;</p>
<ul>
<li>&#x300A;Redis &#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#x300B;</li>
</ul>
<h3 id="&#x590D;&#x4E60;&#x65B9;&#x6CD5;"><a href="#&#x590D;&#x4E60;&#x65B9;&#x6CD5;" class="headerlink" title="&#x590D;&#x4E60;&#x65B9;&#x6CD5;"></a>&#x590D;&#x4E60;&#x65B9;&#x6CD5;</h3><p>&#x4E00;&#x822C;&#x6211;&#x4F1A;&#x7ED3;&#x5408;&#x4E0A;&#x9762;&#x63A8;&#x8350;&#x7684;&#x4E66;&#x548C;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x53BB;&#x6574;&#x7406;&#x4E00;&#x4EFD;&#x81EA;&#x5DF1;&#x7684;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF08;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x6211;&#x5728;&#x4E0B;&#x9762;&#x653E;&#x4E86;&#x622A;&#x56FE;&#xFF09;&#x548C;&#x7B14;&#x8BB0;&#x3002;</p>
<p><strong>MySQL</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/156c7d0331b2f85a9f300b02a632f421c8e20cffb68b1e33110bd159aa946e65" alt><br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/3e497796e1626c54dbaf8ef47ee9ef279bbef38c3ab5303150d147c5573142a3" alt></p>
<p><strong>Redis</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/3b7c0460ac05dae968df22d352fcc1c99e4ccd70d28e15ac35421cf32976b02b" alt><br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/8a425e6af4e34924b37b5d38ab6729a8a236ce579b3dc6de434cc4b5217b03a4" alt></p>
<p><strong>Kafka</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/af23ddd255d91d7e582ee0c5eb9a725a3359f055f5a7fa3864bd3dfcde10dfe2" alt><br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d6bfeb705e41745a9a78849ce5305d01466716a2667dea87120199d7f99b0960" alt></p>
<p>&#x5B8C;&#x6574;&#x7684;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x592A;&#x957F;&#x4E86;&#x4E0D;&#x597D;&#x622A;&#x56FE;&#xFF0C;&#x6709;&#x9700;&#x8981;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5; <strong>&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x3010;haxianhe&#x3011;&#xFF0C;&#x56DE;&#x590D; &#x201C;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x201D; &#x9886;&#x53D6;&#x9AD8;&#x6E05;pdf&#x7248;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;</strong>&#x3002;</p>
<h2 id="&#x573A;&#x666F;&#x9898;"><a href="#&#x573A;&#x666F;&#x9898;" class="headerlink" title="&#x573A;&#x666F;&#x9898;"></a>&#x573A;&#x666F;&#x9898;</h2><p>&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x79D2;&#x6740;&#x7684;&#x5F00;&#x6E90;&#x5B66;&#x4E60;&#x9879;&#x76EE;</p>
<ul>
<li><a href="/external_links/cfa6af4a02f927393f492b181a3d9c3d.html" target="blank" rel="noopener">miaosha</a></li>
</ul>
<p>&#x4E00;&#x7BC7;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x5173;&#x4E8E;&#x79D2;&#x6740;&#x7684;&#x573A;&#x666F;&#x8BBE;&#x8BA1;&#x7684;&#x6587;&#x7AE0;</p>
<ul>
<li><a href="/external_links/f02fcdb0eab46e7eb7a1029d57208a55.html" target="blank" rel="noopener">&#x79D2;&#x6740;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;</a></li>
</ul>
<h2 id="&#x7B97;&#x6CD5;&#x9898;"><a href="#&#x7B97;&#x6CD5;&#x9898;" class="headerlink" title="&#x7B97;&#x6CD5;&#x9898;"></a>&#x7B97;&#x6CD5;&#x9898;</h2><p>&#x7B97;&#x6CD5;&#x7684;&#x8BDD;&#x63A8;&#x8350;&#x5927;&#x5BB6;&#x6700;&#x8D77;&#x7801;&#x5237;&#x4E00;&#x4E0B;&#x725B;&#x5BA2;&#x7F51;&#x4E0A;&#x7684; <a href="/external_links/404321f751a5cc3d8b03744f5fbe62ee.html" target="blank" rel="noopener">&#x300A;&#x5251;&#x6307;offer&#x300B;67&#x9898;</a></p>
<p>&#x7B54;&#x6848;&#x7684;&#x8BDD;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x5728;&#x7F51;&#x4E0A;&#x641C;&#x4E00;&#x4E0B;&#x201C;&#x725B;&#x5BA2;&#x7F51;&#x300A;&#x5251;&#x6307;Offer&#x300B;66&#x9898;&#x9898;&#x89E3;&#x201D;&#xFF0C;&#x6211;&#x672C;&#x4EBA;&#x53C2;&#x8003;&#x7684;leetcode&#x4E0A;&#x7684;&#x300A;&#x753B;&#x89E3;&#x5251;&#x6307; Offer&#x300B;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x8981;&#x5F00;&#x4F1A;&#x5458;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x6C42;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/796988b5c776ae7c9f26821e0eb8a39ee57c85d42860108ade1a5716dcac6d5c" alt></p>
<p>&#x4E4B;&#x540E;&#x8981;&#x662F;&#x8FD8;&#x6709;&#x65F6;&#x95F4;&#x548C;&#x7CBE;&#x529B;&#x7684;&#x8BDD;&#x63A8;&#x8350;&#x5927;&#x5BB6;&#x518D;&#x5237;&#x4E00;&#x4E0B; <a href="/external_links/f4ff0fe8faf2f43f1a3a3c53546ce975.html" target="blank" rel="noopener">&#x725B;&#x5BA2;&#x9738;&#x9898;</a>&#xFF0C;&#x4E0A;&#x9762;&#x53EF;&#x4EE5;&#x7B5B;&#x9009;&#x4F01;&#x4E1A;&#x548C;&#x8003;&#x5BDF;&#x6B21;&#x6570;&#x7B49;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/f9be34c3fea4a22e8f9675c24ad1e3d465a9fc488eb4fa4bf3085ad62f081968" alt></p>
<h2 id="&#x63D0;&#x95EE;&#x73AF;&#x8282;"><a href="#&#x63D0;&#x95EE;&#x73AF;&#x8282;" class="headerlink" title="&#x63D0;&#x95EE;&#x73AF;&#x8282;"></a>&#x63D0;&#x95EE;&#x73AF;&#x8282;</h2><p>&#x6700;&#x540E;&#xFF0C;&#x5C31;&#x662F;&#x63D0;&#x95EE;&#x73AF;&#x8282;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x73AF;&#x8282;&#x548C;&#x7B2C;&#x4E00;&#x4E2A;&#x73AF;&#x8282;&#x4E00;&#x6837;&#x662F;&#x552F;&#x4E8C;&#x5E94;&#x8058;&#x8005;&#x53EF;&#x4EE5;&#x638C;&#x63E1;&#x4E3B;&#x52A8;&#x6743;&#x7684;&#x73AF;&#x8282;&#xFF0C;&#x4E00;&#x822C;&#x900F;&#x8FC7;&#x8FD9;&#x4E2A;&#x73AF;&#x8282;&#x4F60;&#x53EF;&#x4EE5;&#x8868;&#x73B0;&#x81EA;&#x5DF1;&#x7684;&#x9762;&#x8BD5;&#x56E2;&#x961F;&#x7684;&#x5174;&#x8DA3;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8868;&#x73B0;&#x51FA;&#x81EA;&#x5DF1;&#x7684;&#x865A;&#x5FC3;&#x597D;&#x5B66;&#x90FD;&#x53EF;&#x4EE5;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x7ED9;&#x51FA;&#x6211;&#x7ED9;&#x81EA;&#x5DF1;&#x51C6;&#x5907;&#x7684;&#x51E0;&#x4E2A;&#x7ECF;&#x5178;&#x95EE;&#x9898;&#xFF0C;&#x7ED9;&#x5927;&#x5BB6;&#x7528;&#x4F5C;&#x53C2;&#x8003;&#xFF1A;</p>
<p>1.&#x80FD;&#x548C;&#x6211;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x4F60;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x561B;&#xFF1F;<br>2.&#x80FD;&#x548C;&#x6211;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x4F60;&#x4EEC;&#x7684;&#x6280;&#x672F;&#x6808;&#x561B;&#xFF1F;<br>3.&#x5982;&#x679C;&#x6709;&#x6211;&#x6709;&#x5E78;&#x80FD;&#x62FF;&#x5230;offer&#xFF0C;&#x4F60;&#x8BA4;&#x4E3A;&#x6211;&#x5165;&#x804C;&#x4E4B;&#x540E;&#x6700;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;<br>4.&#x8FD9;&#x4E2A;&#x804C;&#x4F4D;&#x5728;&#x516C;&#x53F8;&#x7684;&#x53D1;&#x5C55;&#x524D;&#x666F;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F;&#x6709;&#x4EC0;&#x4E48;&#x664B;&#x5347;&#x673A;&#x5236;&#xFF1F;&#x5728;&#x4EC0;&#x4E48;&#x6761;&#x4EF6;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x664B;&#x5347;&#x673A;&#x4F1A;&#xFF1F;<br>5.&#x56E2;&#x961F;&#x6210;&#x5458;&#x6709;&#x591A;&#x5C11;&#x4EBA;&#xFF1F;&#x5927;&#x5BB6;&#x600E;&#x4E48;&#x5206;&#x5DE5;&#xFF1F;&#x76EE;&#x524D;&#x56E2;&#x961F;&#x7684;&#x6838;&#x5FC3;&#x5DE5;&#x4F5C;&#x662F;&#x54EA;&#x4E9B;&#xFF1F;</p>
<ul>
<li><a href="/external_links/6257913acc030883a4af233831b3d6a6.html" target="blank" rel="noopener">&#x5F53;&#x9762;&#x8BD5;&#x5B98;&#x8BF4;&#xFF0C;&#x201C;&#x4F60;&#x6709;&#x4EC0;&#x4E48;&#x8981;&#x95EE;&#x6211;&#xFF1F;&#x201D;&#x600E;&#x6837;&#x56DE;&#x7B54;&#x6700;&#x52A0;&#x5206;&#xFF1F;</a></li>
</ul>
<h2 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h2><p>&#x5230;&#x8FD9;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5927;&#x4F53;&#x4E0A;&#x628A;&#x6211;&#x60F3;&#x8981;&#x5206;&#x4EAB;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x8BB2;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x5B9E;&#x8FD9;&#x91CC;&#x9762;&#x8FD8;&#x662F;&#x6709;&#x5F88;&#x591A;&#x7EC6;&#x8282;&#x6CA1;&#x6709;&#x5C55;&#x5F00;&#x53BB;&#x8BB2;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x603B;&#x7ED3;&#x7684; MySQL&#x3001;Redis&#x3001;Kafka&#x7684;&#x5B66;&#x4E60;&#x7B14;&#x8BB0;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x540E;&#x7EED;&#x6211;&#x4F1A;&#x7B80;&#x5355;&#x6574;&#x7406;&#x4E00;&#x4E0B;&#x9646;&#x9646;&#x7EED;&#x7EED;&#x5230;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x548C;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#x4E0A;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x4E0D;&#x4F1A;&#x653E;&#x5230;&#x725B;&#x5BA2;&#x7F51;&#x8FD9;&#x79CD;&#x8BA8;&#x8BBA;&#x533A;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x9700;&#x8981;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x3010;haxianhe&#x3011;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x9605;&#x8BFB;&#x3002;</p>
<hr>
<p>&#x6211;&#x5C06;&#x6587;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#x7684; MySQL&#x3001;Redis&#x3001;Kafka &#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x653E;&#x5230;&#x4E86;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x4E2D;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;<strong>&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x3010;haxianhe&#x3011;&#xFF0C;&#x56DE;&#x590D; &#x201C;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x201D; &#x9886;&#x53D6;&#x9AD8;&#x6E05;pdf&#x7248;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;</strong>&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/90ab3d847c9a5b107afc4085563c4167.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935619465438560292.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935619465438560292.html" itemprop="url">Redis最佳实践：7个维度+43条使用规范，带你彻底玩转R</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T10:26:24+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>&#x5FAE;&#x4FE1;&#x641C;&#x7D22;&#x5173;&#x6CE8;&#x300C;&#x6C34;&#x6EF4;&#x4E0E;&#x94F6;&#x5F39;&#x300D;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x83B7;&#x53D6;&#x4F18;&#x8D28;&#x6280;&#x672F;&#x5E72;&#x8D27;&#x3002;7&#x5E74;&#x8D44;&#x6DF1;&#x540E;&#x7AEF;&#x7814;&#x53D1;&#xFF0C;&#x7ED9;&#x4F60;&#x5448;&#x73B0;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x6280;&#x672F;&#x89C6;&#x89D2;&#x3002;</strong></p>
</blockquote>
<p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F; Kaito&#x3002;</p>
<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x60F3;&#x548C;&#x4F60;&#x804A;&#x4E00;&#x804A; Redis &#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
<p>&#x4F60;&#x7684;&#x9879;&#x76EE;&#x6216;&#x8BB8;&#x5DF2;&#x7ECF;&#x4F7F;&#x7528; Redis &#x5F88;&#x957F;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x4F46;&#x5728;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x8FD8;&#x4F1A;&#x6216;&#x591A;&#x6216;&#x5C11;&#x5730;&#x9047;&#x5230;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>&#x6211;&#x7684; Redis &#x5185;&#x5B58;&#x4E3A;&#x4EC0;&#x4E48;&#x589E;&#x957F;&#x8FD9;&#x4E48;&#x5FEB;&#xFF1F;</li>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x7684; Redis &#x64CD;&#x4F5C;&#x5EF6;&#x8FDF;&#x53D8;&#x5927;&#x4E86;&#xFF1F;</li>
<li>&#x5982;&#x4F55;&#x964D;&#x4F4E; Redis &#x6545;&#x969C;&#x53D1;&#x751F;&#x7684;&#x9891;&#x7387;&#xFF1F;</li>
<li>&#x65E5;&#x5E38;&#x8FD0;&#x7EF4; Redis &#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;</li>
<li>&#x90E8;&#x7F72; Redis &#x65F6;&#xFF0C;&#x5982;&#x4F55;&#x505A;&#x597D;&#x8D44;&#x6E90;&#x89C4;&#x5212;&#xFF1F;</li>
<li>Redis &#x76D1;&#x63A7;&#x91CD;&#x70B9;&#x8981;&#x5173;&#x6CE8;&#x54EA;&#x4E9B;&#x6307;&#x6807;&#xFF1F;</li>
</ul>
<p>&#x5C24;&#x5176;&#x662F;&#x5F53;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x8D8A;&#x6765;&#x8D8A;&#x4F9D;&#x8D56; Redis &#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x5C31;&#x53D8;&#x5F97;&#x5C24;&#x4E3A;&#x91CD;&#x8981;&#x3002;</p>
<p><strong>&#x6B64;&#x65F6;&#xFF0C;&#x4F60;&#x8FEB;&#x5207;&#x9700;&#x8981;&#x4E00;&#x4EFD;&#x300C;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x6307;&#x5357;&#x300D;&#x3002;</strong></p>
<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x6211;&#x5C06;&#x4ECE;&#x4EE5;&#x4E0B;&#x4E03;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x5E26;&#x4F60;&#x300C;&#x5168;&#x9762;&#x300D;&#x5206;&#x6790; Redis &#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#xFF1A;</p>
<ul>
<li>&#x5185;&#x5B58;</li>
<li>&#x6027;&#x80FD;</li>
<li>&#x9AD8;&#x53EF;&#x9760;</li>
<li>&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;</li>
<li>&#x8D44;&#x6E90;&#x89C4;&#x5212;</li>
<li>&#x76D1;&#x63A7;</li>
<li>&#x5B89;&#x5168;</li>
</ul>
<p>&#x5728;&#x6587;&#x7AE0;&#x7684;&#x6700;&#x540E;&#xFF0C;&#x6211;&#x8FD8;&#x4F1A;&#x7ED9;&#x4F60;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x6E05;&#x5355;&#xFF0C;&#x4E0D;&#x7BA1;&#x4F60;&#x662F;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x8FD8;&#x662F; DBA &#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#xFF0C;&#x8FD9;&#x4E2A;&#x6E05;&#x5355;&#x5C06;&#x4F1A;&#x5E2E;&#x52A9;&#x4F60;&#x66F4;&#x52A0;&#x300C;&#x4F18;&#x96C5;&#x300D;&#x5730;&#x7528;&#x597D; Redis&#x3002;</p>
<p><strong>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5E72;&#x8D27;&#x5F88;&#x591A;&#xFF0C;&#x5E0C;&#x671B;&#x4F60;&#x53EF;&#x4EE5;&#x8010;&#x5FC3;&#x8BFB;&#x5B8C;&#x3002;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b379fb7566e706d00271c1a85bc3488357fc591ca39fdaeda1ad7cd8ed75d67f" alt></p>
<h1 id="&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-&#x66F4;&#x8282;&#x7701;&#x5185;&#x5B58;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4F7F;&#x7528;-Redis-&#x66F4;&#x8282;&#x7701;&#x5185;&#x5B58;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis &#x66F4;&#x8282;&#x7701;&#x5185;&#x5B58;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4F7F;&#x7528; Redis &#x66F4;&#x8282;&#x7701;&#x5185;&#x5B58;&#xFF1F;</h1><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B; Redis &#x5185;&#x5B58;&#x65B9;&#x9762;&#x7684;&#x4F18;&#x5316;&#x3002;</p>
<p>&#x4F17;&#x6240;&#x5468;&#x77E5;&#xFF0C;Redis &#x7684;&#x6027;&#x80FD;&#x4E4B;&#x6240;&#x4EE5;&#x5982;&#x6B64;&#x4E4B;&#x9AD8;&#xFF0C;&#x539F;&#x56E0;&#x5C31;&#x5728;&#x4E8E;&#x5B83;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5B58;&#x50A8;&#x5728;&#x300C;&#x5185;&#x5B58;&#x300D;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x8BBF;&#x95EE; Redis &#x4E2D;&#x7684;&#x6570;&#x636E;&#x901F;&#x5EA6;&#x6781;&#x5FEB;&#x3002;</p>
<p>&#x4F46;&#x4ECE;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x5C42;&#x9762;&#x6765;&#x8BF4;&#xFF0C;&#x673A;&#x5668;&#x7684;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x76F8;&#x6BD4;&#x4E8E;&#x78C1;&#x76D8;&#xFF0C;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x6602;&#x8D35;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x5728; Redis &#x4E2D;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5F88;&#x5C11;&#x65F6;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x592A;&#x5173;&#x5FC3;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#x3002;&#x4F46;&#x968F;&#x7740;&#x4E1A;&#x52A1;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5B58;&#x50A8;&#x5728; Redis &#x4E2D;&#x7684;&#x6570;&#x636E;&#x5C31;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x63D0;&#x524D;&#x5236;&#x5B9A;&#x597D;&#x5185;&#x5B58;&#x4F18;&#x5316;&#x7B56;&#x7565;&#xFF0C;&#x90A3;&#x4E48;&#x7B49;&#x4E1A;&#x52A1;&#x5F00;&#x59CB;&#x589E;&#x957F;&#x65F6;&#xFF0C;Redis &#x5360;&#x7528;&#x7684;&#x5185;&#x5B58;&#x4E5F;&#x4F1A;&#x5F00;&#x59CB;&#x81A8;&#x80C0;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x63D0;&#x524D;&#x5236;&#x5B9A;&#x5408;&#x7406;&#x7684;&#x5185;&#x5B58;&#x4F18;&#x5316;&#x7B56;&#x7565;&#xFF0C;&#x5BF9;&#x4E8E;&#x8D44;&#x6E90;&#x5229;&#x7528;&#x7387;&#x7684;&#x63D0;&#x5347;&#x662F;&#x5F88;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x3002;</p>
<p>&#x90A3;&#x5728;&#x4F7F;&#x7528; Redis &#x65F6;&#xFF0C;&#x600E;&#x6837;&#x505A;&#x624D;&#x80FD;&#x66F4;&#x8282;&#x7701;&#x5185;&#x5B58;&#x5462;&#xFF1F;&#x8FD9;&#x91CC;&#x6211;&#x7ED9;&#x4F60;&#x603B;&#x7ED3;&#x4E86; 6 &#x70B9;&#x5EFA;&#x8BAE;&#xFF0C;&#x6211;&#x4EEC;&#x4F9D;&#x6B21;&#x6765;&#x770B;&#xFF1A;</p>
<p><strong>1) &#x63A7;&#x5236; key &#x7684;&#x957F;&#x5EA6;</strong></p>
<p>&#x6700;&#x7B80;&#x5355;&#x76F4;&#x63A5;&#x7684;&#x5185;&#x5B58;&#x4F18;&#x5316;&#xFF0C;&#x5C31;&#x662F;&#x63A7;&#x5236; key &#x7684;&#x957F;&#x5EA6;&#x3002;</p>
<p>&#x5728;&#x5F00;&#x53D1;&#x4E1A;&#x52A1;&#x65F6;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x63D0;&#x524D;&#x9884;&#x4F30;&#x6574;&#x4E2A; Redis &#x4E2D;&#x5199;&#x5165; key &#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5982;&#x679C; key &#x6570;&#x91CF;&#x8FBE;&#x5230;&#x4E86;&#x767E;&#x4E07;&#x7EA7;&#x522B;&#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x8FC7;&#x957F;&#x7684; key &#x540D;&#x4E5F;&#x4F1A;&#x5360;&#x7528;&#x8FC7;&#x591A;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x4FDD;&#x8BC1; key &#x5728;&#x7B80;&#x5355;&#x3001;&#x6E05;&#x6670;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x5C3D;&#x53EF;&#x80FD;&#x628A; key &#x5B9A;&#x4E49;&#x5F97;&#x77ED;&#x4E00;&#x4E9B;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x539F;&#x6709;&#x7684; key &#x4E3A; user:book:123&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F18;&#x5316;&#x4E3A; u:bk:123&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x4E00;&#x6765;&#xFF0C;&#x4F60;&#x7684; Redis &#x5C31;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x5927;&#x91CF;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x5BF9;&#x5185;&#x5B58;&#x7684;&#x4F18;&#x5316;&#x975E;&#x5E38;&#x76F4;&#x63A5;&#x548C;&#x9AD8;&#x6548;&#x3002;</p>
<p><strong>2) &#x907F;&#x514D;&#x5B58;&#x50A8; bigkey</strong></p>
<p>&#x9664;&#x4E86;&#x63A7;&#x5236; key &#x7684;&#x957F;&#x5EA6;&#x4E4B;&#x5916;&#xFF0C;&#x4F60;&#x540C;&#x6837;&#x9700;&#x8981;&#x5173;&#x6CE8; value &#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x91CF;&#x5B58;&#x50A8; bigkey&#xFF0C;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4; Redis &#x5185;&#x5B58;&#x589E;&#x957F;&#x8FC7;&#x5FEB;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x8BFB;&#x5199; bigkey &#x65F6;&#xFF0C;&#x8FD8;&#x6709;&#x4EA7;&#x751F;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF08;&#x4E0B;&#x6587;&#x4F1A;&#x5177;&#x4F53;&#x8BE6;&#x8FF0;&#xFF09;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x8981;&#x907F;&#x514D;&#x5728; Redis &#x4E2D;&#x5B58;&#x50A8; bigkey&#xFF0C;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF1A;</p>
<ul>
<li>String&#xFF1A;&#x5927;&#x5C0F;&#x63A7;&#x5236;&#x5728; 10KB &#x4EE5;&#x4E0B;</li>
<li>List/Hash/Set/ZSet&#xFF1A;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x63A7;&#x5236;&#x5728; 1 &#x4E07;&#x4EE5;&#x4E0B;</li>
</ul>
<p><strong>3) &#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;</strong></p>
<p>Redis &#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5728;&#x5B9E;&#x73B0;&#x4E0A;&#xFF0C;&#x4E5F;&#x5BF9;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x505A;&#x4E86;&#x4F18;&#x5316;&#x3002;&#x5177;&#x4F53;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#xFF0C;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5BF9;&#x5E94;&#x591A;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6765;&#x5B9E;&#x73B0;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7b0ba63b36b7ec2c0265a8fecdad5c834de4462f31a9df22066181dab54854ad" alt></p>
<p>&#x4F8B;&#x5982;&#xFF0C;String&#x3001;Set &#x5728;&#x5B58;&#x50A8; int &#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x91C7;&#x7528;&#x6574;&#x6570;&#x7F16;&#x7801;&#x5B58;&#x50A8;&#x3002;Hash&#x3001;ZSet &#x5728;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x6BD4;&#x8F83;&#x5C11;&#x65F6;&#xFF08;&#x53EF;&#x914D;&#x7F6E;&#xFF09;&#xFF0C;&#x4F1A;&#x91C7;&#x7528;&#x538B;&#x7F29;&#x5217;&#x8868;&#xFF08;ziplist&#xFF09;&#x5B58;&#x50A8;&#xFF0C;&#x5728;&#x5B58;&#x50A8;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x8F6C;&#x6362;&#x4E3A;&#x54C8;&#x5E0C;&#x8868;&#x548C;&#x8DF3;&#x8868;&#x3002;</p>
<p>&#x4F5C;&#x8005;&#x8FD9;&#x4E48;&#x8BBE;&#x8BA1;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x8282;&#x7EA6;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x4F60;&#x5728;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x6765;&#x4F18;&#x5316; Redis &#x7684;&#x5185;&#x5B58;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>String&#x3001;Set&#xFF1A;&#x5C3D;&#x53EF;&#x80FD;&#x5B58;&#x50A8; int &#x7C7B;&#x578B;&#x6570;&#x636E;</li>
<li>Hash&#x3001;ZSet&#xFF1A;&#x5B58;&#x50A8;&#x7684;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x63A7;&#x5236;&#x5728;&#x8F6C;&#x6362;&#x9608;&#x503C;&#x4E4B;&#x4E0B;&#xFF0C;&#x4EE5;&#x538B;&#x7F29;&#x5217;&#x8868;&#x5B58;&#x50A8;&#xFF0C;&#x8282;&#x7EA6;&#x5185;&#x5B58;</li>
</ul>
<p><strong>4) &#x628A; Redis &#x5F53;&#x4F5C;&#x7F13;&#x5B58;&#x4F7F;&#x7528;</strong></p>
<p>Redis &#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E5F;&#x610F;&#x5473;&#x7740;&#x5176;&#x8D44;&#x6E90;&#x662F;&#x6709;&#x9650;&#x7684;&#x3002;&#x4F60;&#x5728;&#x4F7F;&#x7528; Redis &#x65F6;&#xFF0C;&#x8981;&#x628A;&#x5B83;&#x5F53;&#x505A;&#x7F13;&#x5B58;&#x6765;&#x4F7F;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x5199;&#x5165;&#x5230; Redis &#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x90FD;&#x8BBE;&#x7F6E;&#x300C;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x300D;&#x3002;</p>
<p>&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x5728; Redis &#x4E2D;&#x67E5;&#x4E0D;&#x5230;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x518D;&#x4ECE;&#x540E;&#x7AEF;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x52A0;&#x8F7D;&#x5230; Redis &#x4E2D;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2ad1a99d2fa5f4bd120f3671f6af915635c2a6b42515e892c0f03df8eb809e83" alt></p>
<p>&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9; Redis &#x4E2D;&#x53EA;&#x4FDD;&#x7559;&#x7ECF;&#x5E38;&#x8BBF;&#x95EE;&#x7684;&#x300C;&#x70ED;&#x6570;&#x636E;&#x300D;&#xFF0C;&#x5185;&#x5B58;&#x5229;&#x7528;&#x7387;&#x4E5F;&#x4F1A;&#x6BD4;&#x8F83;&#x9AD8;&#x3002;</p>
<p><strong>5) &#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E; maxmemory + &#x6DD8;&#x6C70;&#x7B56;&#x7565;</strong></p>
<p>&#x867D;&#x7136;&#x4F60;&#x7684; Redis key &#x90FD;&#x8BBE;&#x7F6E;&#x4E86;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x5199;&#x5165;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x5E76;&#x4E14;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x8BBE;&#x7F6E;&#x5F97;&#x6BD4;&#x8F83;&#x4E45;&#xFF0C;&#x90A3;&#x4E48;&#x77ED;&#x671F;&#x95F4;&#x5185; Redis &#x7684;&#x5185;&#x5B58;&#x4F9D;&#x65E7;&#x4F1A;&#x5FEB;&#x901F;&#x589E;&#x957F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E0D;&#x63A7;&#x5236; Redis &#x7684;&#x5185;&#x5B58;&#x4E0A;&#x9650;&#xFF0C;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x4F7F;&#x7528;&#x8FC7;&#x591A;&#x7684;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x63D0;&#x524D;&#x9884;&#x4F30;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x7ED9;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F8B;&#x8BBE;&#x7F6E; maxmemory &#x63A7;&#x5236;&#x5B9E;&#x4F8B;&#x7684;&#x5185;&#x5B58;&#x4E0A;&#x9650;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D; Redis &#x7684;&#x5185;&#x5B58;&#x6301;&#x7EED;&#x81A8;&#x80C0;&#x3002;</p>
<p>&#x914D;&#x7F6E;&#x4E86; maxmemory&#xFF0C;&#x6B64;&#x65F6;&#x4F60;&#x8FD8;&#x8981;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#xFF0C;&#x800C;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x5982;&#x4F55;&#x9009;&#x62E9;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x7ED3;&#x5408;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#x6765;&#x51B3;&#x5B9A;&#xFF1A;</p>
<ul>
<li>volatile-lru / allkeys-lru&#xFF1A;&#x4F18;&#x5148;&#x4FDD;&#x7559;&#x6700;&#x8FD1;&#x8BBF;&#x95EE;&#x8FC7;&#x7684;&#x6570;&#x636E;</li>
<li>volatile-lfu / allkeys-lfu&#xFF1A;&#x4F18;&#x5148;&#x4FDD;&#x7559;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x6700;&#x9891;&#x7E41;&#x7684;&#x6570;&#x636E;&#xFF08;4.0+&#x7248;&#x672C;&#x652F;&#x6301;&#xFF09;</li>
<li>volatile-ttl &#xFF1A;&#x4F18;&#x5148;&#x6DD8;&#x6C70;&#x5373;&#x5C06;&#x8FC7;&#x671F;&#x7684;&#x6570;&#x636E;</li>
<li>volatile-random / allkeys-random&#xFF1A;&#x968F;&#x673A;&#x6DD8;&#x6C70;&#x6570;&#x636E;</li>
</ul>
<p><strong>6) &#x6570;&#x636E;&#x538B;&#x7F29;&#x540E;&#x5199;&#x5165; Redis</strong></p>
<p>&#x4EE5;&#x4E0A;&#x65B9;&#x6848;&#x57FA;&#x672C;&#x6DB5;&#x76D6;&#x4E86; Redis &#x5185;&#x5B58;&#x4F18;&#x5316;&#x7684;&#x5404;&#x4E2A;&#x65B9;&#x9762;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x60F3;&#x8FDB;&#x4E00;&#x6B65;&#x4F18;&#x5316; Redis &#x5185;&#x5B58;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x4E2D;&#x5148;&#x5C06;&#x6570;&#x636E;&#x538B;&#x7F29;&#xFF0C;&#x518D;&#x5199;&#x5165;&#x5230; Redis &#x4E2D;&#xFF08;&#x4F8B;&#x5982;&#x91C7;&#x7528; snappy&#x3001;gzip &#x7B49;&#x538B;&#x7F29;&#x7B97;&#x6CD5;&#xFF09;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x8BFB;&#x53D6;&#x65F6;&#x8FD8;&#x9700;&#x8981;&#x89E3;&#x538B;&#x7F29;&#xFF0C;&#x5728;&#x8FD9;&#x671F;&#x95F4;&#x4F1A;&#x6D88;&#x8017;&#x66F4;&#x591A; CPU &#x8D44;&#x6E90;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x8FDB;&#x884C;&#x6743;&#x8861;&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x300C;&#x8282;&#x7701;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x300D;&#x65B9;&#x9762;&#x7684;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x90FD;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF1F;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x300C;&#x6027;&#x80FD;&#x300D;&#x65B9;&#x9762;&#x7684;&#x4F18;&#x5316;&#x3002;</p>
<h1 id="&#x5982;&#x4F55;&#x6301;&#x7EED;&#x53D1;&#x6325;-Redis-&#x7684;&#x9AD8;&#x6027;&#x80FD;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x6301;&#x7EED;&#x53D1;&#x6325;-Redis-&#x7684;&#x9AD8;&#x6027;&#x80FD;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x6301;&#x7EED;&#x53D1;&#x6325; Redis &#x7684;&#x9AD8;&#x6027;&#x80FD;&#xFF1F;"></a>&#x5982;&#x4F55;&#x6301;&#x7EED;&#x53D1;&#x6325; Redis &#x7684;&#x9AD8;&#x6027;&#x80FD;&#xFF1F;</h1><p>&#x5F53;&#x4F60;&#x7684;&#x7CFB;&#x7EDF;&#x51B3;&#x5B9A;&#x5F15;&#x5165; Redis &#x65F6;&#xFF0C;&#x60F3;&#x5FC5;&#x770B;&#x4E2D;&#x5B83;&#x6700;&#x5173;&#x952E;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#xFF1A;<strong>&#x6027;&#x80FD;</strong>&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x4E00;&#x4E2A;&#x5355;&#x673A;&#x7248; Redis &#x5C31;&#x53EF;&#x4EE5;&#x8FBE;&#x5230; 10W QPS&#xFF0C;&#x8FD9;&#x4E48;&#x9AD8;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x4E5F;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x5728;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x751F;&#x5EF6;&#x8FDF;&#x60C5;&#x51B5;&#xFF0C;&#x5C31;&#x4F1A;&#x4E0E;&#x6211;&#x4EEC;&#x7684;&#x9884;&#x671F;&#x4E0D;&#x7B26;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5728;&#x4F7F;&#x7528; Redis &#x65F6;&#xFF0C;&#x5982;&#x4F55;&#x6301;&#x7EED;&#x53D1;&#x6325;&#x5B83;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x907F;&#x514D;&#x64CD;&#x4F5C;&#x5EF6;&#x8FDF;&#x7684;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#xFF0C;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x5173;&#x6CE8;&#x7126;&#x70B9;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x65B9;&#x9762;&#xFF0C;&#x6211;&#x7ED9;&#x4F60;&#x603B;&#x7ED3;&#x4E86; 13 &#x6761;&#x5EFA;&#x8BAE;&#xFF1A;</p>
<p><strong>1) &#x907F;&#x514D;&#x5B58;&#x50A8; bigkey</strong></p>
<p>&#x5B58;&#x50A8; bigkey &#x9664;&#x4E86;&#x524D;&#x9762;&#x8BB2;&#x5230;&#x7684;&#x4F7F;&#x7528;&#x8FC7;&#x591A;&#x5185;&#x5B58;&#x4E4B;&#x5916;&#xFF0C;&#x5BF9; Redis &#x6027;&#x80FD;&#x4E5F;&#x4F1A;&#x6709;&#x5F88;&#x5927;&#x5F71;&#x54CD;&#x3002;</p>
<p>&#x7531;&#x4E8E; Redis &#x5904;&#x7406;&#x8BF7;&#x6C42;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x5F53;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x5728;&#x5199;&#x5165;&#x4E00;&#x4E2A; bigkey &#x65F6;&#xFF0C;&#x66F4;&#x591A;&#x65F6;&#x95F4;&#x5C06;&#x6D88;&#x8017;&#x5728;&#x300C;&#x5185;&#x5B58;&#x5206;&#x914D;&#x300D;&#x4E0A;&#xFF0C;&#x8FD9;&#x65F6;&#x64CD;&#x4F5C;&#x5EF6;&#x8FDF;&#x5C31;&#x4F1A;&#x589E;&#x52A0;&#x3002;&#x540C;&#x6837;&#x5730;&#xFF0C;&#x5220;&#x9664;&#x4E00;&#x4E2A; bigkey &#x5728;&#x300C;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x300D;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x8017;&#x65F6;&#x3002;</p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x5F53;&#x4F60;&#x5728;&#x8BFB;&#x53D6;&#x8FD9;&#x4E2A; bigkey &#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x5728;&#x300C;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x300D;&#x4E0A;&#x82B1;&#x8D39;&#x66F4;&#x591A;&#x65F6;&#x95F4;&#xFF0C;&#x6B64;&#x65F6;&#x540E;&#x9762;&#x5F85;&#x6267;&#x884C;&#x7684;&#x8BF7;&#x6C42;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x6392;&#x961F;&#xFF0C;Redis &#x6027;&#x80FD;&#x4E0B;&#x964D;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/071a83e2bf7c1012952dcdcdd90a2e48ef3242e7c95db1f5cf2cf60fcadee1e6" alt></p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x5B58;&#x50A8; bigkey&#xFF0C;&#x907F;&#x514D;&#x64CD;&#x4F5C;&#x5EF6;&#x8FDF;&#x53D1;&#x751F;&#x3002;</p>
<blockquote>
<p>&#x5982;&#x679C;&#x4F60;&#x786E;&#x5B9E;&#x6709;&#x5B58;&#x50A8; bigkey &#x7684;&#x9700;&#x6C42;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x628A; bigkey &#x62C6;&#x5206;&#x4E3A;&#x591A;&#x4E2A;&#x5C0F; key &#x5B58;&#x50A8;&#x3002;</p>
</blockquote>
<p><strong>2) &#x5F00;&#x542F; lazy-free &#x673A;&#x5236;</strong></p>
<p>&#x5982;&#x679C;&#x4F60;&#x65E0;&#x6CD5;&#x907F;&#x514D;&#x5B58;&#x50A8; bigkey&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x5EFA;&#x8BAE;&#x4F60;&#x5F00;&#x542F; Redis &#x7684; lazy-free &#x673A;&#x5236;&#x3002;&#xFF08;4.0+&#x7248;&#x672C;&#x652F;&#x6301;&#xFF09;</p>
<p>&#x5F53;&#x5F00;&#x542F;&#x8FD9;&#x4E2A;&#x673A;&#x5236;&#x540E;&#xFF0C;Redis &#x5728;&#x5220;&#x9664;&#x4E00;&#x4E2A; bigkey &#x65F6;&#xFF0C;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x7684;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#xFF0C;&#x5C06;&#x4F1A;&#x653E;&#x5230;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x4E2D;&#x53BB;&#x6267;&#x884C;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5728;&#x6700;&#x5927;&#x7A0B;&#x5EA6;&#x4E0A;&#xFF0C;&#x907F;&#x514D;&#x5BF9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e4cb4a19418da848becac4cba9e81599ec877883207ad394f2b1129822620910" alt></p>
<p><strong>3) &#x4E0D;&#x4F7F;&#x7528;&#x590D;&#x6742;&#x5EA6;&#x8FC7;&#x9AD8;&#x7684;&#x547D;&#x4EE4;</strong></p>
<p>Redis &#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x9664;&#x4E86;&#x64CD;&#x4F5C; bigkey &#x4F1A;&#x5BFC;&#x81F4;&#x540E;&#x9762;&#x8BF7;&#x6C42;&#x53D1;&#x751F;&#x6392;&#x961F;&#x4E4B;&#x5916;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x590D;&#x6742;&#x5EA6;&#x8FC7;&#x9AD8;&#x7684;&#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x6267;&#x884C;&#x590D;&#x6742;&#x5EA6;&#x8FC7;&#x9AD8;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x4F1A;&#x6D88;&#x8017;&#x66F4;&#x591A;&#x7684; CPU &#x8D44;&#x6E90;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x5176;&#x5B83;&#x8BF7;&#x6C42;&#x53EA;&#x80FD;&#x7B49;&#x5F85;&#xFF0C;&#x8FD9;&#x65F6;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x6392;&#x961F;&#x5EF6;&#x8FDF;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x907F;&#x514D;&#x6267;&#x884C;&#x4F8B;&#x5982; SORT&#x3001;SINTER&#x3001;SINTERSTORE&#x3001;ZUNIONSTORE&#x3001;ZINTERSTORE &#x7B49;&#x805A;&#x5408;&#x7C7B;&#x547D;&#x4EE4;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x79CD;&#x805A;&#x5408;&#x7C7B;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x5EFA;&#x8BAE;&#x4F60;&#x628A;&#x5B83;&#x653E;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x8981;&#x8BA9; Redis &#x627F;&#x62C5;&#x592A;&#x591A;&#x7684;&#x8BA1;&#x7B97;&#x5DE5;&#x4F5C;&#x3002;</p>
<p><strong>4) &#x6267;&#x884C; O(N) &#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x5173;&#x6CE8; N &#x7684;&#x5927;&#x5C0F;</strong></p>
<p>&#x89C4;&#x907F;&#x4F7F;&#x7528;&#x590D;&#x6742;&#x5EA6;&#x8FC7;&#x9AD8;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x9AD8;&#x6795;&#x65E0;&#x5FE7;&#x4E86;&#x4E48;&#xFF1F;</p>
<p>&#x7B54;&#x6848;&#x662F;&#x5426;&#x5B9A;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x5728;&#x6267;&#x884C; O(N) &#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x540C;&#x6837;&#x9700;&#x8981;&#x6CE8;&#x610F; N &#x7684;&#x5927;&#x5C0F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x8FC7;&#x591A;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x4F1A;&#x5728;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x8FC7;&#x7A0B;&#x4E2D;&#x8017;&#x65F6;&#x8FC7;&#x957F;&#xFF0C;&#x64CD;&#x4F5C;&#x5EF6;&#x8FDF;&#x53D8;&#x5927;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5BF9;&#x4E8E;&#x5BB9;&#x5668;&#x7C7B;&#x578B;&#xFF08;List/Hash/Set/ZSet&#xFF09;&#xFF0C;&#x5728;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x672A;&#x77E5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E00;&#x5B9A;&#x4E0D;&#x8981;&#x65E0;&#x8111;&#x6267;&#x884C; LRANGE key 0 -1 / HGETALL / SMEMBERS / ZRANGE key 0 -1&#x3002;</p>
<p>&#x5728;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F60;&#x8981;&#x9075;&#x5FAA;&#x4EE5;&#x4E0B;&#x539F;&#x5219;&#xFF1A;</p>
<ol>
<li>&#x5148;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#xFF08;LLEN/HLEN/SCARD/ZCARD&#xFF09;</li>
<li>&#x5143;&#x7D20;&#x6570;&#x91CF;&#x8F83;&#x5C11;&#xFF0C;&#x53EF;&#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x5168;&#x91CF;&#x6570;&#x636E;</li>
<li>&#x5143;&#x7D20;&#x6570;&#x91CF;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x5206;&#x6279;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF08;LRANGE/HASCAN/SSCAN/ZSCAN&#xFF09;</li>
</ol>
<p><strong>5) &#x5173;&#x6CE8; DEL &#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</strong></p>
<p>&#x4F60;&#x6CA1;&#x770B;&#x9519;&#xFF0C;&#x5728;&#x5220;&#x9664;&#x4E00;&#x4E2A; key &#x65F6;&#xFF0C;&#x5982;&#x679C;&#x59FF;&#x52BF;&#x4E0D;&#x5BF9;&#xFF0C;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x5F71;&#x54CD;&#x5230; Redis &#x6027;&#x80FD;&#x3002;</p>
<p>&#x5220;&#x9664;&#x4E00;&#x4E2A; key&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x662F; DEL &#x547D;&#x4EE4;&#xFF0C;&#x56DE;&#x60F3;&#x4E00;&#x4E0B;&#xFF0C;&#x4F60;&#x89C9;&#x5F97; DEL &#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x662F;&#x591A;&#x5C11;&#xFF1F;</p>
<p>O(1) &#xFF1F;&#x5176;&#x5B9E;&#x4E0D;&#x4E00;&#x5B9A;&#x3002;</p>
<p>&#x5F53;&#x4F60;&#x5220;&#x9664;&#x7684;&#x662F;&#x4E00;&#x4E2A; String &#x7C7B;&#x578B; key &#x65F6;&#xFF0C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x786E;&#x5B9E;&#x662F; O(1)&#x3002;</p>
<p>&#x4F46;&#x5F53;&#x4F60;&#x8981;&#x5220;&#x9664;&#x7684; key &#x662F; List/Hash/Set/ZSet &#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x5176;&#x5B9E;&#x4E3A; O(N)&#xFF0C;N &#x4EE3;&#x8868;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;</p>
<p><strong>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5220;&#x9664;&#x4E00;&#x4E2A; key&#xFF0C;&#x5176;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x8D8A;&#x591A;&#xFF0C;&#x6267;&#x884C; DEL &#x4E5F;&#x5C31;&#x8D8A;&#x6162;&#xFF01;</strong></p>
<p>&#x539F;&#x56E0;&#x5728;&#x4E8E;&#xFF0C;&#x5220;&#x9664;&#x5927;&#x91CF;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x6B21;&#x56DE;&#x6536;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5143;&#x7D20;&#x8D8A;&#x591A;&#xFF0C;&#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x4E5F;&#x5C31;&#x8D8A;&#x4E45;&#xFF01;</p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x9ED8;&#x8BA4;&#x662F;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x8FD9;&#x52BF;&#x5FC5;&#x4F1A;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x4EA7;&#x751F;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x90A3;&#x5220;&#x9664;&#x8FD9;&#x79CD;&#x5143;&#x7D20;&#x6BD4;&#x8F83;&#x591A;&#x7684; key&#xFF0C;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5462;&#xFF1F;</p>
<p>&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF0C;&#x5206;&#x6279;&#x5220;&#x9664;&#xFF1A;</p>
<ul>
<li>List&#x7C7B;&#x578B;&#xFF1A;&#x6267;&#x884C;&#x591A;&#x6B21; LPOP/RPOP&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x5143;&#x7D20;&#x90FD;&#x5220;&#x9664;&#x5B8C;&#x6210;</li>
<li>Hash/Set/ZSet&#x7C7B;&#x578B;&#xFF1A;&#x5148;&#x6267;&#x884C; HSCAN/SSCAN/SCAN &#x67E5;&#x8BE2;&#x5143;&#x7D20;&#xFF0C;&#x518D;&#x6267;&#x884C; HDEL/SREM/ZREM &#x4F9D;&#x6B21;&#x5220;&#x9664;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;</li>
</ul>
<p>&#x6CA1;&#x60F3;&#x5230;&#x5427;&#xFF1F;&#x4E00;&#x4E2A;&#x5C0F;&#x5C0F;&#x7684;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#xFF0C;&#x7A0D;&#x5FAE;&#x4E0D;&#x5C0F;&#x5FC3;&#xFF0C;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x5F15;&#x53D1;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x4F60;&#x5728;&#x64CD;&#x4F5C;&#x65F6;&#x9700;&#x8981;&#x683C;&#x5916;&#x6CE8;&#x610F;&#x3002;</p>
<p><strong>6) &#x6279;&#x91CF;&#x547D;&#x4EE4;&#x4EE3;&#x66FF;&#x5355;&#x4E2A;&#x547D;&#x4EE4;</strong></p>
<p>&#x5F53;&#x4F60;&#x9700;&#x8981;&#x4E00;&#x6B21;&#x6027;&#x64CD;&#x4F5C;&#x591A;&#x4E2A; key &#x65F6;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x6279;&#x91CF;&#x547D;&#x4EE4;&#x6765;&#x5904;&#x7406;&#x3002;</p>
<p>&#x6279;&#x91CF;&#x64CD;&#x4F5C;&#x76F8;&#x6BD4;&#x4E8E;&#x591A;&#x6B21;&#x5355;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x4F18;&#x52BF;&#x5728;&#x4E8E;&#xFF0C;&#x53EF;&#x4EE5;&#x663E;&#x8457;&#x51CF;&#x5C11;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6765;&#x56DE;&#x7F51;&#x7EDC; IO &#x6B21;&#x6570;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF1A;</p>
<ul>
<li>String / Hash &#x4F7F;&#x7528; MGET/MSET &#x66FF;&#x4EE3; GET/SET&#xFF0C;HMGET/HMSET &#x66FF;&#x4EE3; HGET/HSET</li>
<li>&#x5176;&#x5B83;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4F7F;&#x7528; Pipeline&#xFF0C;&#x6253;&#x5305;&#x4E00;&#x6B21;&#x6027;&#x53D1;&#x9001;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x6267;&#x884C;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d5079defe3aa2a3580b6ba2759be8d2578041901f923d59498793af7f452d15f" alt></p>
<p><strong>7) &#x907F;&#x514D;&#x96C6;&#x4E2D;&#x8FC7;&#x671F; key</strong></p>
<p>Redis &#x6E05;&#x7406;&#x8FC7;&#x671F; key &#x662F;&#x91C7;&#x7528;&#x5B9A;&#x65F6; + &#x61D2;&#x60F0;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x505A;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x90FD;&#x662F;&#x5728;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5B58;&#x5728;&#x5927;&#x91CF; key &#x96C6;&#x4E2D;&#x8FC7;&#x671F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x90A3;&#x4E48; Redis &#x5728;&#x6E05;&#x7406;&#x8FC7;&#x671F; key &#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x6709;&#x963B;&#x585E;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x98CE;&#x9669;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/57203e72ca831db1563f3ecd6cc9485de0b04efc4801bcde8e016f32adf47da9" alt></p>
<p>&#x60F3;&#x8981;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x53D1;&#x751F;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x65F6;&#xFF0C;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x65F6;&#x95F4;&#xFF0C;&#x628A;&#x8FD9;&#x4E9B; key &#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x6253;&#x6563;&#xFF0C;&#x4ECE;&#x800C;&#x964D;&#x4F4E;&#x96C6;&#x4E2D;&#x8FC7;&#x671F;&#x5BF9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
<p><strong>8) &#x4F7F;&#x7528;&#x957F;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C; Redis&#xFF0C;&#x5408;&#x7406;&#x914D;&#x7F6E;&#x8FDE;&#x63A5;&#x6C60;</strong></p>
<p>&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x957F;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C; Redis&#xFF0C;&#x907F;&#x514D;&#x77ED;&#x8FDE;&#x63A5;&#x3002;</p>
<p>&#x5F53;&#x4F7F;&#x7528;&#x77ED;&#x8FDE;&#x63A5;&#x64CD;&#x4F5C; Redis &#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x9700;&#x8981;&#x7ECF;&#x8FC7; TCP &#x4E09;&#x6B21;&#x63E1;&#x624B;&#x3001;&#x56DB;&#x6B21;&#x6325;&#x624B;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E5F;&#x4F1A;&#x589E;&#x52A0;&#x64CD;&#x4F5C;&#x8017;&#x65F6;&#x3002;</p>
<p>&#x540C;&#x65F6;&#xFF0C;&#x4F60;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x6C60;&#x7684;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE; Redis&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x957F;&#x65F6;&#x95F4;&#x4E0D;&#x64CD;&#x4F5C; Redis &#x65F6;&#xFF0C;&#x9700;&#x53CA;&#x65F6;&#x91CA;&#x653E;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x3002;</p>
<p><strong>9) &#x53EA;&#x4F7F;&#x7528; db0</strong></p>
<p>&#x5C3D;&#x7BA1; Redis &#x63D0;&#x4F9B;&#x4E86; 16 &#x4E2A; db&#xFF0C;&#x4F46;&#x6211;&#x53EA;&#x5EFA;&#x8BAE;&#x4F60;&#x4F7F;&#x7528; db0&#x3002;</p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x6211;&#x603B;&#x7ED3;&#x4E86;&#x4EE5;&#x4E0B; 3 &#x70B9;&#x539F;&#x56E0;&#xFF1A;</p>
<ol>
<li>&#x5728;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x4E0A;&#x64CD;&#x4F5C;&#x591A;&#x4E2A; db &#x6570;&#x636E;&#x65F6;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x9700;&#x8981;&#x5148;&#x6267;&#x884C; SELECT&#xFF0C;&#x8FD9;&#x4F1A;&#x7ED9; Redis &#x5E26;&#x6765;&#x989D;&#x5916;&#x7684;&#x538B;&#x529B;</li>
<li>&#x4F7F;&#x7528;&#x591A;&#x4E2A; db &#x7684;&#x76EE;&#x7684;&#x662F;&#xFF0C;&#x6309;&#x4E0D;&#x540C;&#x4E1A;&#x52A1;&#x7EBF;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E3A;&#x4F55;&#x4E0D;&#x62C6;&#x5206;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#x5B58;&#x50A8;&#x5462;&#xFF1F;&#x62C6;&#x5206;&#x591A;&#x4E2A;&#x5B9E;&#x4F8B;&#x90E8;&#x7F72;&#xFF0C;&#x591A;&#x4E2A;&#x4E1A;&#x52A1;&#x7EBF;&#x4E0D;&#x4F1A;&#x4E92;&#x76F8;&#x5F71;&#x54CD;&#xFF0C;&#x8FD8;&#x80FD;&#x63D0;&#x9AD8; Redis &#x7684;&#x8BBF;&#x95EE;&#x6027;&#x80FD;</li>
<li>Redis Cluster &#x53EA;&#x652F;&#x6301; db0&#xFF0C;&#x5982;&#x679C;&#x540E;&#x671F;&#x4F60;&#x60F3;&#x8981;&#x8FC1;&#x79FB;&#x5230; Redis Cluster&#xFF0C;&#x8FC1;&#x79FB;&#x6210;&#x672C;&#x9AD8;</li>
</ol>
<p><strong>10) &#x4F7F;&#x7528;&#x8BFB;&#x5199;&#x5206;&#x79BB; + &#x5206;&#x7247;&#x96C6;&#x7FA4;</strong></p>
<p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x8BFB;&#x8BF7;&#x6C42;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x90E8;&#x7F72;&#x591A;&#x4E2A;&#x4ECE;&#x5E93;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5B9E;&#x73B0;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF0C;&#x8BA9; Redis &#x7684;&#x4ECE;&#x5E93;&#x5206;&#x62C5;&#x8BFB;&#x538B;&#x529B;&#xFF0C;&#x8FDB;&#x800C;&#x63D0;&#x5347;&#x6027;&#x80FD;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0d282b4e5bfe8b9ef7223a6a4be0804bd0ffd3c141cb53ca6905e7b8685cc8da" alt></p>
<p>&#x5982;&#x679C;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x5199;&#x8BF7;&#x6C42;&#x91CF;&#x5F88;&#x5927;&#xFF0C;&#x5355;&#x4E2A; Redis &#x5B9E;&#x4F8B;&#x5DF2;&#x65E0;&#x6CD5;&#x652F;&#x6491;&#x8FD9;&#x4E48;&#x5927;&#x7684;&#x5199;&#x6D41;&#x91CF;&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x65F6;&#x4F60;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5206;&#x7247;&#x96C6;&#x7FA4;&#xFF0C;&#x5206;&#x62C5;&#x5199;&#x538B;&#x529B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/79f2a714f52b78ed845dd581ef53d17fd3da2c01eecac3a882d2ecfd06b089ed" alt></p>
<p><strong>11) &#x4E0D;&#x5F00;&#x542F; AOF &#x6216; AOF &#x914D;&#x7F6E;&#x4E3A;&#x6BCF;&#x79D2;&#x5237;&#x76D8;</strong></p>
<p>&#x5982;&#x679C;&#x5BF9;&#x4E8E;&#x4E22;&#x5931;&#x6570;&#x636E;&#x4E0D;&#x654F;&#x611F;&#x7684;&#x4E1A;&#x52A1;&#xFF0C;&#x6211;&#x5EFA;&#x8BAE;&#x4F60;&#x4E0D;&#x5F00;&#x542F; AOF&#xFF0C;&#x907F;&#x514D; AOF &#x5199;&#x78C1;&#x76D8;&#x62D6;&#x6162; Redis &#x7684;&#x6027;&#x80FD;&#x3002;</p>
<p>&#x5982;&#x679C;&#x786E;&#x5B9E;&#x9700;&#x8981;&#x5F00;&#x542F; AOF&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x5EFA;&#x8BAE;&#x4F60;&#x914D;&#x7F6E;&#x4E3A; appendfsync everysec&#xFF0C;&#x628A;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x7684;&#x5237;&#x76D8;&#x64CD;&#x4F5C;&#xFF0C;&#x653E;&#x5230;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x4E2D;&#x53BB;&#x6267;&#x884C;&#xFF0C;&#x5C3D;&#x91CF;&#x964D;&#x4F4E; Redis &#x5199;&#x78C1;&#x76D8;&#x5BF9;&#x6027;&#x80FD;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
<p><strong>12) &#x4F7F;&#x7528;&#x7269;&#x7406;&#x673A;&#x90E8;&#x7F72; Redis</strong></p>
<p>Redis &#x5728;&#x505A;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x521B;&#x5EFA;&#x5B50;&#x8FDB;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x3002;</p>
<p>&#x800C;&#x521B;&#x5EFA;&#x5B50;&#x8FDB;&#x7A0B;&#x4F1A;&#x8C03;&#x7528;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684; fork &#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#x7684;&#x6267;&#x884C;&#x8017;&#x65F6;&#xFF0C;&#x4E0E;&#x7CFB;&#x7EDF;&#x73AF;&#x5883;&#x6709;&#x5173;&#x3002;</p>
<p>&#x865A;&#x62DF;&#x673A;&#x73AF;&#x5883;&#x6267;&#x884C; fork &#x7684;&#x8017;&#x65F6;&#xFF0C;&#x8981;&#x6BD4;&#x7269;&#x7406;&#x673A;&#x6162;&#x5F97;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x7684; Redis &#x5E94;&#x8BE5;&#x5C3D;&#x53EF;&#x80FD;&#x90E8;&#x7F72;&#x5728;&#x7269;&#x7406;&#x673A;&#x4E0A;&#x3002;</p>
<p><strong>13) &#x5173;&#x95ED;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x5B58;&#x5927;&#x9875;&#x673A;&#x5236;</strong></p>
<p>Linux &#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x4E86;&#x5185;&#x5B58;&#x5927;&#x9875;&#x673A;&#x5236;&#xFF0C;&#x5176;&#x7279;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;&#x6BCF;&#x6B21;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5411;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7533;&#x8BF7;&#x5185;&#x5B58;&#x65F6;&#xFF0C;&#x7533;&#x8BF7;&#x5355;&#x4F4D;&#x7531;&#x4E4B;&#x524D;&#x7684; 4KB &#x53D8;&#x4E3A;&#x4E86; 2MB&#x3002;</p>
<p>&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>
<p>&#x5F53; Redis &#x5728;&#x505A;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x65F6;&#xFF0C;&#x4F1A;&#x5148; fork &#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x6B64;&#x65F6;&#x4E3B;&#x8FDB;&#x7A0B;&#x548C;&#x5B50;&#x8FDB;&#x7A0B;&#x5171;&#x4EAB;&#x76F8;&#x540C;&#x7684;&#x5185;&#x5B58;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x3002;</p>
<p>&#x5F53;&#x4E3B;&#x8FDB;&#x7A0B;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x73B0;&#x6709;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x91C7;&#x7528;&#x5199;&#x65F6;&#x590D;&#x5236;&#xFF08;Copy On Write&#xFF09;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x7533;&#x8BF7;&#x5185;&#x5B58;&#x3002;</p>
<p>&#x5982;&#x679C;&#x7533;&#x8BF7;&#x5185;&#x5B58;&#x5355;&#x4F4D;&#x53D8;&#x4E3A;&#x4E86; 2MB&#xFF0C;&#x90A3;&#x4E48;&#x52BF;&#x5FC5;&#x4F1A;&#x589E;&#x52A0;&#x5185;&#x5B58;&#x7533;&#x8BF7;&#x7684;&#x8017;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x65F6;&#x4E3B;&#x8FDB;&#x7A0B;&#x6709;&#x5927;&#x91CF;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x539F;&#x6709;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x6B64;&#x671F;&#x95F4;&#xFF0C;&#x64CD;&#x4F5C;&#x5EF6;&#x8FDF;&#x5C31;&#x4F1A;&#x53D8;&#x5927;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f33a4607ce57c8668be0abd3e46b838b73092a8b53f59f897ecff3357a3eb781" alt></p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x51FA;&#x73B0;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x5728;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0A;&#x5173;&#x95ED;&#x5185;&#x5B58;&#x5927;&#x9875;&#x673A;&#x5236;&#x3002;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E9B;&#x5C31;&#x662F; Redis &#x300C;&#x9AD8;&#x6027;&#x80FD;&#x300D;&#x65B9;&#x9762;&#x7684;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#x3002;&#x5982;&#x679C;&#x4F60;&#x975E;&#x5E38;&#x5173;&#x5FC3; Redis &#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x8FD9;&#x4E9B;&#x65B9;&#x9762;&#x9488;&#x5BF9;&#x6027;&#x4F18;&#x5316;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B; Redis &#x300C;&#x53EF;&#x9760;&#x6027;&#x300D;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x3002;</p>
<h1 id="&#x5982;&#x4F55;&#x4FDD;&#x8BC1;-Redis-&#x7684;&#x53EF;&#x9760;&#x6027;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4FDD;&#x8BC1;-Redis-&#x7684;&#x53EF;&#x9760;&#x6027;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4FDD;&#x8BC1; Redis &#x7684;&#x53EF;&#x9760;&#x6027;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4FDD;&#x8BC1; Redis &#x7684;&#x53EF;&#x9760;&#x6027;&#xFF1F;</h1><p>&#x8FD9;&#x91CC;&#x6211;&#x60F3;&#x63D0;&#x9192;&#x4F60;&#x7684;&#x662F;&#xFF0C;&#x4FDD;&#x8BC1; Redis &#x53EF;&#x9760;&#x6027;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x96BE;&#xFF0C;&#x4F46;&#x96BE;&#x7684;&#x662F;&#x5982;&#x4F55;&#x505A;&#x5230;&#x300C;&#x6301;&#x7EED;&#x7A33;&#x5B9A;&#x300D;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x6211;&#x4F1A;&#x4ECE;&#x300C;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x300D;&#x3001;&#x300C;&#x591A;&#x526F;&#x672C;&#x300D;&#x3001;&#x300C;&#x6545;&#x969C;&#x6062;&#x590D;&#x300D;&#x8FD9;&#x4E09;&#x5927;&#x7EF4;&#x5EA6;&#xFF0C;&#x5E26;&#x4F60;&#x5206;&#x6790;&#x4FDD;&#x969C; Redis &#x53EF;&#x9760;&#x6027;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
<p><strong>1) &#x6309;&#x4E1A;&#x52A1;&#x7EBF;&#x90E8;&#x7F72;&#x5B9E;&#x4F8B;</strong></p>
<p>&#x63D0;&#x5347;&#x53EF;&#x9760;&#x6027;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#xFF0C;&#x5C31;&#x662F;&#x300C;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x300D;&#x3002;</p>
<p>&#x4F60;&#x6700;&#x597D;&#x6309;&#x4E0D;&#x540C;&#x7684;&#x4E1A;&#x52A1;&#x7EBF;&#x6765;&#x90E8;&#x7F72; Redis &#x5B9E;&#x4F8B;&#xFF0C;&#x8FD9;&#x6837;&#x5F53;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x53D1;&#x751F;&#x6545;&#x969C;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x5176;&#x5B83;&#x4E1A;&#x52A1;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x8D44;&#x6E90;&#x9694;&#x79BB;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x5B9E;&#x65BD;&#x6210;&#x672C;&#x662F;&#x6700;&#x4F4E;&#x7684;&#xFF0C;&#x4F46;&#x6210;&#x6548;&#x5374;&#x662F;&#x975E;&#x5E38;&#x5927;&#x7684;&#x3002;</p>
<p><strong>2) &#x90E8;&#x7F72;&#x4E3B;&#x4ECE;&#x96C6;&#x7FA4;</strong></p>
<p>&#x5982;&#x679C;&#x4F60;&#x53EA;&#x4F7F;&#x7528;&#x5355;&#x673A;&#x7248; Redis&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x5B58;&#x5728;&#x673A;&#x5668;&#x5B95;&#x673A;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&#x7684;&#x98CE;&#x9669;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x300C;&#x591A;&#x526F;&#x672C;&#x300D;&#x5B9E;&#x4F8B;&#xFF0C;&#x5373;&#x4E3B;&#x4ECE;&#x96C6;&#x7FA4;&#xFF0C;&#x8FD9;&#x6837;&#x5F53;&#x4E3B;&#x5E93;&#x5B95;&#x673A;&#x540E;&#xFF0C;&#x4F9D;&#x65E7;&#x6709;&#x4ECE;&#x5E93;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x6570;&#x636E;&#x4E22;&#x5931;&#x7684;&#x98CE;&#x9669;&#xFF0C;&#x4E5F;&#x964D;&#x4F4E;&#x4E86;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&#x7684;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x5728;&#x90E8;&#x7F72;&#x4E3B;&#x4ECE;&#x96C6;&#x7FA4;&#x65F6;&#xFF0C;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x4E3B;&#x4ECE;&#x5E93;&#x9700;&#x8981;&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x907F;&#x514D;&#x4EA4;&#x53C9;&#x90E8;&#x7F72;&#x3002;</p>
<p>&#x8FD9;&#x4E48;&#x505A;&#x7684;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#xFF0C;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Redis &#x7684;&#x4E3B;&#x5E93;&#x4F1A;&#x627F;&#x62C5;&#x6240;&#x6709;&#x7684;&#x8BFB;&#x5199;&#x6D41;&#x91CF;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E00;&#x5B9A;&#x8981;&#x4F18;&#x5148;&#x4FDD;&#x8BC1;&#x4E3B;&#x5E93;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x5373;&#x4F7F;&#x4ECE;&#x5E93;&#x673A;&#x5668;&#x5F02;&#x5E38;&#xFF0C;&#x4E5F;&#x4E0D;&#x8981;&#x5BF9;&#x4E3B;&#x5E93;&#x9020;&#x6210;&#x5F71;&#x54CD;&#x3002;</p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x6709;&#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5BF9; Redis &#x505A;&#x65E5;&#x5E38;&#x7EF4;&#x62A4;&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x636E;&#x5B9A;&#x65F6;&#x5907;&#x4EFD;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x65F6;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x53EA;&#x5728;&#x4ECE;&#x5E93;&#x4E0A;&#x8FDB;&#x884C;&#xFF0C;&#x8FD9;&#x53EA;&#x4F1A;&#x6D88;&#x8017;&#x4ECE;&#x5E93;&#x673A;&#x5668;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x4E5F;&#x907F;&#x514D;&#x4E86;&#x5BF9;&#x4E3B;&#x5E93;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
<p><strong>3) &#x5408;&#x7406;&#x914D;&#x7F6E;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x53C2;&#x6570;</strong></p>
<p>&#x5728;&#x90E8;&#x7F72;&#x4E3B;&#x4ECE;&#x96C6;&#x7FA4;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x4E0D;&#x5408;&#x7406;&#xFF0C;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x53D1;&#x751F;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x4E2D;&#x65AD;</li>
<li>&#x4ECE;&#x5E93;&#x53D1;&#x8D77;&#x5168;&#x91CF;&#x590D;&#x5236;&#xFF0C;&#x4E3B;&#x5E93;&#x6027;&#x80FD;&#x53D7;&#x5230;&#x5F71;&#x54CD;</li>
</ul>
<p>&#x5728;&#x8FD9;&#x65B9;&#x9762;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x6709;&#x4EE5;&#x4E0B; 2 &#x70B9;&#xFF1A;</p>
<ol>
<li>&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684; repl-backlog &#x53C2;&#x6570;&#xFF1A;&#x8FC7;&#x5C0F;&#x7684; repl-backlog &#x5728;&#x5199;&#x6D41;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x4E2D;&#x65AD;&#x4F1A;&#x5F15;&#x53D1;&#x5168;&#x91CF;&#x590D;&#x5236;&#x6570;&#x636E;&#x7684;&#x98CE;&#x9669;</li>
<li>&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684; slave client-output-buffer-limit&#xFF1A;&#x5F53;&#x4ECE;&#x5E93;&#x590D;&#x5236;&#x53D1;&#x751F;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x8FC7;&#x5C0F;&#x7684; buffer &#x4F1A;&#x5BFC;&#x81F4;&#x4ECE;&#x5E93;&#x7F13;&#x51B2;&#x533A;&#x6EA2;&#x51FA;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x590D;&#x5236;&#x4E2D;&#x65AD;</li>
</ol>
<p><strong>4) &#x90E8;&#x7F72;&#x54E8;&#x5175;&#x96C6;&#x7FA4;&#xFF0C;&#x5B9E;&#x73B0;&#x6545;&#x969C;&#x81EA;&#x52A8;&#x5207;&#x6362;</strong></p>
<p>&#x53EA;&#x90E8;&#x7F72;&#x4E86;&#x4E3B;&#x4ECE;&#x8282;&#x70B9;&#xFF0C;&#x4F46;&#x6545;&#x969C;&#x53D1;&#x751F;&#x65F6;&#x662F;&#x65E0;&#x6CD5;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x90E8;&#x7F72;&#x54E8;&#x5175;&#x96C6;&#x7FA4;&#xFF0C;&#x5B9E;&#x73B0;&#x6545;&#x969C;&#x7684;&#x300C;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x300D;&#x3002;</p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x591A;&#x4E2A;&#x54E8;&#x5175;&#x8282;&#x70B9;&#x9700;&#x8981;&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x5B9E;&#x4F8B;&#x4E3A;&#x5947;&#x6570;&#x4E2A;&#xFF0C;&#x9632;&#x6B62;&#x54E8;&#x5175;&#x9009;&#x4E3E;&#x5931;&#x8D25;&#xFF0C;&#x5F71;&#x54CD;&#x5207;&#x6362;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#x8FD9;&#x4E9B;&#x5C31;&#x662F;&#x4FDD;&#x969C; Redis&#x300C;&#x9AD8;&#x53EF;&#x9760;&#x300D;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4E5F;&#x53D1;&#x73B0;&#x4E86;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x90E8;&#x7F72;&#x548C;&#x8FD0;&#x7EF4;&#x5C42;&#x7684;&#x4F18;&#x5316;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x8FD8;&#x4F1A;&#x5BF9; Redis &#x505A;&#x4E00;&#x4E9B;&#x300C;&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;&#x300D;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x65F6;&#x4F60;&#x8981;&#x6CE8;&#x610F;&#x54EA;&#x4E9B;&#x95EE;&#x9898;&#x5462;&#xFF1F;</p>
<h1 id="&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;-Redis-&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;-Redis-&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="&#x65E5;&#x5E38;&#x8FD0;&#x7EF4; Redis &#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;"></a>&#x65E5;&#x5E38;&#x8FD0;&#x7EF4; Redis &#x9700;&#x8981;&#x6CE8;&#x610F;&#x4EC0;&#x4E48;&#xFF1F;</h1><p><strong>1) &#x7981;&#x6B62;&#x4F7F;&#x7528; KEYS/FLUSHALL/FLUSHDB &#x547D;&#x4EE4;</strong></p>
<p>&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#xFF0C;&#x4F1A;&#x957F;&#x65F6;&#x95F4;&#x963B;&#x585E; Redis &#x4E3B;&#x7EBF;&#x7A0B;&#xFF0C;&#x5371;&#x5BB3;&#x6781;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x5FC5;&#x987B;&#x7981;&#x6B62;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>
<p>&#x5982;&#x679C;&#x786E;&#x5B9E;&#x60F3;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#xFF0C;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF1A;</p>
<ul>
<li>SCAN &#x66FF;&#x6362; KEYS</li>
<li>4.0+&#x7248;&#x672C;&#x53EF;&#x4F7F;&#x7528; FLUSHALL/FLUSHDB ASYNC&#xFF0C;&#x6E05;&#x7A7A;&#x6570;&#x636E;&#x7684;&#x64CD;&#x4F5C;&#x653E;&#x5728;&#x540E;&#x53F0;&#x7EBF;&#x7A0B;&#x6267;&#x884C;</li>
</ul>
<p><strong>2) &#x626B;&#x63CF;&#x7EBF;&#x4E0A;&#x5B9E;&#x4F8B;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;&#x4F11;&#x7720;&#x65F6;&#x95F4;</strong></p>
<p>&#x4E0D;&#x7BA1;&#x4F60;&#x662F;&#x4F7F;&#x7528; SCAN &#x626B;&#x63CF;&#x7EBF;&#x4E0A;&#x5B9E;&#x4F8B;&#xFF0C;&#x8FD8;&#x662F;&#x5BF9;&#x5B9E;&#x4F8B;&#x505A; bigkey &#x7EDF;&#x8BA1;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x5EFA;&#x8BAE;&#x4F60;&#x5728;&#x626B;&#x63CF;&#x65F6;&#x4E00;&#x5B9A;&#x8BB0;&#x5F97;&#x8BBE;&#x7F6E;&#x4F11;&#x7720;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x9632;&#x6B62;&#x5728;&#x626B;&#x63CF;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5B9E;&#x4F8B; OPS &#x8FC7;&#x9AD8;&#x5BF9; Redis &#x4EA7;&#x751F;&#x6027;&#x80FD;&#x6296;&#x52A8;&#x3002;</p>
<p><strong>3) &#x614E;&#x7528; MONITOR &#x547D;&#x4EE4;</strong></p>
<p>&#x6709;&#x65F6;&#x5728;&#x6392;&#x67E5; Redis &#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x4F7F;&#x7528; MONITOR &#x67E5;&#x770B; Redis &#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x3002;</p>
<p>&#x4F46;&#x5982;&#x679C;&#x4F60;&#x7684; Redis OPS &#x6BD4;&#x8F83;&#x9AD8;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x6267;&#x884C; MONITOR &#x4F1A;&#x5BFC;&#x81F4; Redis &#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5185;&#x5B58;&#x6301;&#x7EED;&#x589E;&#x957F;&#xFF0C;&#x8FD9;&#x4F1A;&#x4E25;&#x91CD;&#x6D88;&#x8017; Redis &#x7684;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#xFF0C;&#x751A;&#x81F3;&#x4F1A;&#x5BFC;&#x81F4;&#x5B9E;&#x4F8B;&#x5185;&#x5B58;&#x8D85;&#x8FC7; maxmemory&#xFF0C;&#x5F15;&#x53D1;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4F60;&#x9700;&#x8981;&#x683C;&#x5916;&#x6CE8;&#x610F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6ccb8680435162320fb7f61142a4ea09d646219d380e0afd96a8b2c8a84a5542" alt></p>
<p>&#x6240;&#x4EE5;&#x4F60;&#x5728;&#x6267;&#x884C; MONITOR &#x547D;&#x4EE4;&#x65F6;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x8C28;&#x614E;&#xFF0C;&#x5C3D;&#x91CF;&#x5C11;&#x7528;&#x3002;</p>
<p><strong>4) &#x4ECE;&#x5E93;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x4E3A; slave-read-only</strong></p>
<p>&#x4F60;&#x7684;&#x4ECE;&#x5E93;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x4E3A; slave-read-only &#x72B6;&#x6001;&#xFF0C;&#x907F;&#x514D;&#x4ECE;&#x5E93;&#x5199;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x5BFC;&#x81F4;&#x4E3B;&#x4ECE;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</p>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4ECE;&#x5E93;&#x5982;&#x679C;&#x662F;&#x975E; read-only &#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684;&#x662F; 4.0 &#x4EE5;&#x4E0B;&#x7684; Redis&#xFF0C;&#x5B83;&#x5B58;&#x5728;&#x8FD9;&#x6837;&#x7684; Bug&#xFF1A;</p>
<p><strong>&#x4ECE;&#x5E93;&#x5199;&#x5165;&#x4E86;&#x6709;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x4F1A;&#x505A;&#x5B9A;&#x65F6;&#x6E05;&#x7406;&#x548C;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;</strong></p>
<p>&#x8FD9;&#x4F1A;&#x9020;&#x6210;&#x4ECE;&#x5E93;&#x7684;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#xFF01;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x76F4;&#x5230; 4.0 &#x7248;&#x672C;&#x624D;&#x4FEE;&#x590D;&#xFF0C;&#x4F60;&#x5728;&#x914D;&#x7F6E;&#x4ECE;&#x5E93;&#x65F6;&#x9700;&#x8981;&#x683C;&#x5916;&#x6CE8;&#x610F;&#x3002;</p>
<p><strong>5) &#x5408;&#x7406;&#x914D;&#x7F6E; timeout &#x548C; tcp-keepalive &#x53C2;&#x6570;</strong></p>
<p>&#x5982;&#x679C;&#x56E0;&#x4E3A;&#x7F51;&#x7EDC;&#x539F;&#x56E0;&#xFF0C;&#x5BFC;&#x81F4;&#x4F60;&#x7684;&#x5927;&#x91CF;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x4E0E; Redis &#x610F;&#x5916;&#x4E2D;&#x65AD;&#xFF0C;&#x6070;&#x597D;&#x4F60;&#x7684; Redis &#x914D;&#x7F6E;&#x7684; maxclients &#x53C2;&#x6570;&#x6BD4;&#x8F83;&#x5C0F;&#xFF0C;&#x6B64;&#x65F6;&#x6709;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x5BA2;&#x6237;&#x7AEF;&#x65E0;&#x6CD5;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x5EFA;&#x7ACB;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#xFF08;&#x670D;&#x52A1;&#x7AEF;&#x8BA4;&#x4E3A;&#x8D85;&#x8FC7;&#x4E86; maxclients&#xFF09;&#x3002;</p>
<p>&#x9020;&#x6210;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x539F;&#x56E0;&#x5728;&#x4E8E;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x6BCF;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#xFF0C;Redis &#x90FD;&#x4F1A;&#x7ED9;&#x8FD9;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x914D;&#x4E86;&#x4E00;&#x4E2A; client fd&#x3002;</p>
<p><strong>&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;&#x670D;&#x52A1;&#x7AEF;&#x7F51;&#x7EDC;&#x53D1;&#x751F;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x5E76;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x91CA;&#x653E;&#x8FD9;&#x4E2A; client fd&#x3002;</strong></p>
<p>&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x91CA;&#x653E;&#x5462;&#xFF1F;</p>
<p>Redis &#x5185;&#x90E8;&#x6709;&#x4E00;&#x4E2A;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#xFF0C;&#x4F1A;&#x5B9A;&#x65F6;&#x68C0;&#x6D4B;&#x6240;&#x6709; client &#x7684;&#x7A7A;&#x95F2;&#x65F6;&#x95F4;&#x662F;&#x5426;&#x8D85;&#x8FC7;&#x914D;&#x7F6E;&#x7684; timeout &#x503C;&#x3002;</p>
<p>&#x5982;&#x679C; Redis &#x6CA1;&#x6709;&#x5F00;&#x542F; tcp-keepalive &#x7684;&#x8BDD;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x76F4;&#x5230;&#x914D;&#x7F6E;&#x7684; timeout &#x65F6;&#x95F4;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x6E05;&#x7406;&#x91CA;&#x653E;&#x8FD9;&#x4E2A; client fd&#x3002;</p>
<p>&#x5728;&#x6CA1;&#x6709;&#x6E05;&#x7406;&#x4E4B;&#x524D;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6709;&#x5927;&#x91CF;&#x65B0;&#x8FDE;&#x63A5;&#x8FDB;&#x6765;&#xFF0C;&#x5C31;&#x6709;&#x53EF;&#x80FD;&#x5BFC;&#x81F4; Redis &#x670D;&#x52A1;&#x7AEF;&#x5185;&#x90E8;&#x6301;&#x6709;&#x7684; client fd &#x8D85;&#x8FC7;&#x4E86; maxclients&#xFF0C;&#x8FD9;&#x65F6;&#x65B0;&#x8FDE;&#x63A5;&#x5C31;&#x4F1A;&#x88AB;&#x62D2;&#x7EDD;&#x3002;</p>
<p>&#x9488;&#x5BF9;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x4F18;&#x5316;&#x5EFA;&#x8BAE;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x4E0D;&#x8981;&#x914D;&#x7F6E;&#x8FC7;&#x9AD8;&#x7684; timeout&#xFF1A;&#x8BA9;&#x670D;&#x52A1;&#x7AEF;&#x5C3D;&#x5FEB;&#x628A;&#x65E0;&#x6548;&#x7684; client fd &#x6E05;&#x7406;&#x6389;</li>
<li>Redis &#x5F00;&#x542F; tcp-keepalive&#xFF1A;&#x8FD9;&#x6837;&#x670D;&#x52A1;&#x7AEF;&#x4F1A;&#x5B9A;&#x65F6;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001; TCP &#x5FC3;&#x8DF3;&#x5305;&#xFF0C;&#x68C0;&#x6D4B;&#x8FDE;&#x63A5;&#x8FDE;&#x901A;&#x6027;&#xFF0C;&#x5F53;&#x7F51;&#x7EDC;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C3D;&#x5FEB;&#x6E05;&#x7406;&#x50F5;&#x5C38; client fd</li>
</ol>
<p><strong>6) &#x8C03;&#x6574; maxmemory &#x65F6;&#xFF0C;&#x6CE8;&#x610F;&#x4E3B;&#x4ECE;&#x5E93;&#x7684;&#x8C03;&#x6574;&#x987A;&#x5E8F;</strong></p>
<p>Redis 5.0 &#x4EE5;&#x4E0B;&#x7248;&#x672C;&#x5B58;&#x5728;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;<strong>&#x4ECE;&#x5E93;&#x5185;&#x5B58;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86; maxmemory&#xFF0C;&#x4E5F;&#x4F1A;&#x89E6;&#x53D1;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x3002;</strong></p>
<p>&#x5728;&#x67D0;&#x4E9B;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4ECE;&#x5E93;&#x662F;&#x53EF;&#x80FD;&#x4F18;&#x5148;&#x4E3B;&#x5E93;&#x8FBE;&#x5230; maxmemory &#x7684;&#xFF08;&#x4F8B;&#x5982;&#x5728;&#x4ECE;&#x5E93;&#x6267;&#x884C; MONITOR &#x547D;&#x4EE4;&#xFF0C;&#x8F93;&#x51FA;&#x7F13;&#x51B2;&#x533A;&#x5360;&#x7528;&#x5927;&#x91CF;&#x5185;&#x5B58;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x6B64;&#x65F6;&#x4ECE;&#x5E93;&#x5F00;&#x59CB;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF0C;&#x4E3B;&#x4ECE;&#x5E93;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x4E0D;&#x4E00;&#x81F4;&#x3002;</p>
<p>&#x8981;&#x60F3;&#x907F;&#x514D;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x8C03;&#x6574; maxmemory &#x65F6;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x6CE8;&#x610F;&#x4E3B;&#x4ECE;&#x5E93;&#x7684;&#x4FEE;&#x6539;&#x987A;&#x5E8F;&#xFF1A;</p>
<ul>
<li>&#x8C03;&#x5927; maxmemory&#xFF1A;&#x5148;&#x4FEE;&#x6539;&#x4ECE;&#x5E93;&#xFF0C;&#x518D;&#x4FEE;&#x6539;&#x4E3B;&#x5E93;</li>
<li>&#x8C03;&#x5C0F; maxmemory&#xFF1A;&#x5148;&#x4FEE;&#x6539;&#x4E3B;&#x5E93;&#xFF0C;&#x518D;&#x4FEE;&#x6539;&#x4ECE;&#x5E93;</li>
</ul>
<p>&#x76F4;&#x5230; Redis 5.0&#xFF0C;Redis &#x624D;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x914D;&#x7F6E; replica-ignore-maxmemory&#xFF0C;&#x9ED8;&#x8BA4;&#x4ECE;&#x5E93;&#x8D85;&#x8FC7; maxmemory &#x4E0D;&#x4F1A;&#x6DD8;&#x6C70;&#x6570;&#x636E;&#xFF0C;&#x624D;&#x89E3;&#x51B3;&#x4E86;&#x6B64;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E9B;&#x5C31;&#x662F;&#x300C;&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;&#x300D;Redis &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5BF9;&#x5404;&#x4E2A;&#x914D;&#x7F6E;&#x9879;&#x67E5;&#x6F0F;&#x8865;&#x7F3A;&#xFF0C;&#x770B;&#x6709;&#x54EA;&#x4E9B;&#x662F;&#x9700;&#x8981;&#x4F18;&#x5316;&#x7684;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#xFF0C;&#x4FDD;&#x969C; Redis&#x300C;&#x5B89;&#x5168;&#x300D;&#x90FD;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x54EA;&#x4E9B;&#x95EE;&#x9898;&#x3002;</p>
<h1 id="Redis-&#x5B89;&#x5168;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#xFF1F;"><a href="#Redis-&#x5B89;&#x5168;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#xFF1F;" class="headerlink" title="Redis &#x5B89;&#x5168;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#xFF1F;"></a>Redis &#x5B89;&#x5168;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#xFF1F;</h1><p>&#x65E0;&#x8BBA;&#x5982;&#x4F55;&#xFF0C;&#x5728;&#x4E92;&#x8054;&#x7F51;&#x65F6;&#x4EE3;&#xFF0C;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x4E00;&#x5B9A;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x968F;&#x65F6;&#x8B66;&#x6212;&#x7684;&#x3002;</p>
<p>&#x4F60;&#x53EF;&#x80FD;&#x542C;&#x8BF4;&#x8FC7; Redis &#x88AB;&#x6CE8;&#x5165;&#x53EF;&#x6267;&#x884C;&#x811A;&#x672C;&#xFF0C;&#x7136;&#x540E;&#x62FF;&#x5230;&#x673A;&#x5668; root &#x6743;&#x9650;&#x7684;&#x5B89;&#x5168;&#x95EE;&#x9898;&#xFF0C;&#x90FD;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x90E8;&#x7F72; Redis &#x65F6;&#xFF0C;&#x6CA1;&#x6709;&#x628A;&#x5B89;&#x5168;&#x98CE;&#x9669;&#x6CE8;&#x610F;&#x8D77;&#x6765;&#x3002;</p>
<p>&#x9488;&#x5BF9;&#x8FD9;&#x65B9;&#x9762;&#xFF0C;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x4E0D;&#x8981;&#x628A; Redis &#x90E8;&#x7F72;&#x5728;&#x516C;&#x7F51;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;</li>
<li>&#x90E8;&#x7F72;&#x65F6;&#x4E0D;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7AEF;&#x53E3; 6379</li>
<li>&#x4EE5;&#x666E;&#x901A;&#x7528;&#x6237;&#x542F;&#x52A8; Redis &#x8FDB;&#x7A0B;&#xFF0C;&#x7981;&#x6B62; root &#x7528;&#x6237;&#x542F;&#x52A8;</li>
<li>&#x9650;&#x5236; Redis &#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;&#x8BBF;&#x95EE;&#x6743;&#x9650;</li>
<li>&#x63A8;&#x8350;&#x5F00;&#x542F;&#x5BC6;&#x7801;&#x8BA4;&#x8BC1;</li>
<li>&#x7981;&#x7528;/&#x91CD;&#x547D;&#x540D;&#x5371;&#x9669;&#x547D;&#x4EE4;&#xFF08;KEYS/FLUSHALL/FLUSHDB/CONFIG/EVAL&#xFF09;</li>
</ol>
<p>&#x53EA;&#x8981;&#x4F60;&#x628A;&#x8FD9;&#x4E9B;&#x505A;&#x5230;&#x4F4D;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1; Redis &#x7684;&#x5B89;&#x5168;&#x98CE;&#x9669;&#x5728;&#x53EF;&#x63A7;&#x8303;&#x56F4;&#x5185;&#x3002;</p>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x6790;&#x4E86; Redis &#x5728;&#x5185;&#x5B58;&#x3001;&#x6027;&#x80FD;&#x3001;&#x53EF;&#x9760;&#x6027;&#x3001;&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;&#x65B9;&#x9762;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#x3002;</p>
<p>&#x9664;&#x4E86;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E9B;&#xFF0C;&#x4F60;&#x8FD8;&#x9700;&#x8981;&#x505A;&#x5230;&#x63D0;&#x524D;&#x300C;&#x9884;&#x9632;&#x300D;&#x3002;</p>
<h1 id="&#x5982;&#x4F55;&#x9884;&#x9632;-Redis-&#x95EE;&#x9898;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x9884;&#x9632;-Redis-&#x95EE;&#x9898;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x9884;&#x9632; Redis &#x95EE;&#x9898;&#xFF1F;"></a>&#x5982;&#x4F55;&#x9884;&#x9632; Redis &#x95EE;&#x9898;&#xFF1F;</h1><p>&#x8981;&#x60F3;&#x63D0;&#x524D;&#x9884;&#x9632; Redis &#x95EE;&#x9898;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x505A;&#x597D;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x65B9;&#x9762;&#xFF1A;</p>
<ol>
<li>&#x5408;&#x7406;&#x7684;&#x8D44;&#x6E90;&#x89C4;&#x5212;</li>
<li>&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x9884;&#x8B66;</li>
</ol>
<p>&#x5148;&#x6765;&#x8BF4;&#x8D44;&#x6E90;&#x89C4;&#x5212;&#x3002;</p>
<p>&#x5728;&#x90E8;&#x7F72; Redis &#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x53EF;&#x4EE5;&#x63D0;&#x524D;&#x505A;&#x597D;&#x8D44;&#x6E90;&#x89C4;&#x5212;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5F88;&#x591A;&#x56E0;&#x4E3A;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#x4EA7;&#x751F;&#x7684;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x65B9;&#x9762;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x6709;&#x4EE5;&#x4E0B; 3 &#x70B9;&#xFF1A;</p>
<ol>
<li>&#x4FDD;&#x8BC1;&#x673A;&#x5668;&#x6709;&#x8DB3;&#x591F;&#x7684; CPU&#x3001;&#x5185;&#x5B58;&#x3001;&#x5E26;&#x5BBD;&#x3001;&#x78C1;&#x76D8;&#x8D44;&#x6E90;</li>
<li>&#x63D0;&#x524D;&#x505A;&#x597D;&#x5BB9;&#x91CF;&#x89C4;&#x5212;&#xFF0C;&#x4E3B;&#x5E93;&#x673A;&#x5668;&#x9884;&#x7559;&#x4E00;&#x534A;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#xFF0C;&#x9632;&#x6B62;&#x4E3B;&#x4ECE;&#x673A;&#x5668;&#x7F51;&#x7EDC;&#x6545;&#x969C;&#xFF0C;&#x5F15;&#x53D1;&#x5927;&#x9762;&#x79EF;&#x5168;&#x91CF;&#x540C;&#x6B65;&#xFF0C;&#x5BFC;&#x81F4;&#x4E3B;&#x5E93;&#x673A;&#x5668;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x7684;&#x95EE;&#x9898;</li>
<li>&#x5355;&#x4E2A;&#x5B9E;&#x4F8B;&#x5185;&#x5B58;&#x5EFA;&#x8BAE;&#x63A7;&#x5236;&#x5728; 10G &#x4EE5;&#x4E0B;&#xFF0C;&#x5927;&#x5B9E;&#x4F8B;&#x5728;&#x4E3B;&#x4ECE;&#x5168;&#x91CF;&#x540C;&#x6B65;&#x3001;RDB &#x5907;&#x4EFD;&#x65F6;&#x6709;&#x963B;&#x585E;&#x98CE;&#x9669;</li>
</ol>
<p>&#x518D;&#x6765;&#x770B;&#x76D1;&#x63A7;&#x5982;&#x4F55;&#x505A;&#x3002;</p>
<p>&#x76D1;&#x63A7;&#x9884;&#x8B66;&#x662F;&#x63D0;&#x9AD8;&#x7A33;&#x5B9A;&#x6027;&#x7684;&#x91CD;&#x8981;&#x73AF;&#x8282;&#xFF0C;&#x5B8C;&#x5584;&#x7684;&#x76D1;&#x63A7;&#x9884;&#x8B66;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x95EE;&#x9898;&#x63D0;&#x524D;&#x66B4;&#x9732;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x624D;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x53CD;&#x5E94;&#xFF0C;&#x628A;&#x95EE;&#x9898;&#x6700;&#x5C0F;&#x5316;&#x3002;</p>
<p>&#x8FD9;&#x65B9;&#x9762;&#x6211;&#x7ED9;&#x4F60;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x505A;&#x597D;&#x673A;&#x5668; CPU&#x3001;&#x5185;&#x5B58;&#x3001;&#x5E26;&#x5BBD;&#x3001;&#x78C1;&#x76D8;&#x76D1;&#x63A7;&#xFF0C;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#x65F6;&#x53CA;&#x65F6;&#x62A5;&#x8B66;&#xFF0C;&#x4EFB;&#x610F;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#x90FD;&#x4F1A;&#x5F71;&#x54CD; Redis &#x6027;&#x80FD;</li>
<li>&#x8BBE;&#x7F6E;&#x5408;&#x7406;&#x7684; slowlog &#x9608;&#x503C;&#xFF0C;&#x5E76;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#xFF0C;slowlog &#x8FC7;&#x591A;&#x53CA;&#x65F6;&#x62A5;&#x8B66;</li>
<li>&#x76D1;&#x63A7;&#x7EC4;&#x4EF6;&#x91C7;&#x96C6; Redis INFO &#x4FE1;&#x606F;&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x957F;&#x8FDE;&#x63A5;&#xFF0C;&#x907F;&#x514D;&#x9891;&#x7E41;&#x7684;&#x77ED;&#x8FDE;&#x63A5;</li>
<li>&#x505A;&#x597D;&#x5B9E;&#x4F8B;&#x8FD0;&#x884C;&#x65F6;&#x76D1;&#x63A7;&#xFF0C;&#x91CD;&#x70B9;&#x5173;&#x6CE8; expired_keys&#x3001;evicted_keys&#x3001;latest_fork_usec &#x6307;&#x6807;&#xFF0C;&#x8FD9;&#x4E9B;&#x6307;&#x6807;&#x77ED;&#x65F6;&#x7A81;&#x589E;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x963B;&#x585E;&#x98CE;&#x9669;</li>
</ol>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x597D;&#x4E86;&#xFF0C;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x5E26;&#x4F60;&#x5168;&#x9762;&#x5206;&#x6790;&#x4E86; Redis &#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x7684;&#x4F18;&#x5316;&#x8DEF;&#x5F84;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x3001;&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x9AD8;&#x53EF;&#x9760;&#x3001;&#x65E5;&#x5E38;&#x8FD0;&#x7EF4;&#x3001;&#x8D44;&#x6E90;&#x89C4;&#x5212;&#x3001;&#x76D1;&#x63A7;&#x3001;&#x5B89;&#x5168; 7 &#x4E2A;&#x7EF4;&#x5EA6;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x753B;&#x6210;&#x4E86;&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#xFF0C;&#x65B9;&#x4FBF;&#x4F60;&#x5728;&#x5B9E;&#x8DF5;&#x65F6;&#x505A;&#x53C2;&#x8003;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a4c410a42083a7fcf0406f1660ed98bdd8a52362cdb2b95d7c1be0a74de997a4" alt></p>
<p>&#x6211;&#x8FD8;&#x628A;&#x8FD9;&#x4E9B;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#xFF0C;&#x6309;&#x7167;&#x300C;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x300D;&#x548C;&#x300C;&#x8FD0;&#x7EF4;&#x300D;2 &#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x505A;&#x4E86;&#x5212;&#x5206;&#xFF0C;&#x5E76;&#x4E14;&#x4EE5;&#x300C;&#x5F3A;&#x5236;&#x300D;&#x3001;&#x300C;&#x63A8;&#x8350;&#x300D;&#x3001;&#x300C;&#x53C2;&#x8003;&#x300D;3 &#x4E2A;&#x7EA7;&#x522B;&#x505A;&#x4E86;&#x6807;&#x6CE8;&#xFF0C;&#x8FD9;&#x6837;&#x4F60;&#x5728;&#x5B9E;&#x8DF5;&#x4F18;&#x5316;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x66F4;&#x660E;&#x786E;&#x54EA;&#x4E9B;&#x8BE5;&#x505A;&#xFF0C;&#x54EA;&#x4E9B;&#x9700;&#x8981;&#x7ED3;&#x5408;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8FDB;&#x4E00;&#x6B65;&#x5206;&#x6790;&#x3002;</p>
<p>&#x8FD9;&#x4E9B;&#x7EA7;&#x522B;&#x7684;&#x5B9E;&#x65BD;&#x89C4;&#x5219;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x5F3A;&#x5236;&#xFF1A;&#x9700;&#x4E25;&#x683C;&#x9075;&#x5B88;&#xFF0C;&#x5426;&#x5219;&#x5371;&#x5BB3;&#x6781;&#x5927;</li>
<li>&#x63A8;&#x8350;&#xFF1A;&#x63A8;&#x8350;&#x9075;&#x5B88;&#xFF0C;&#x53EF;&#x63D0;&#x5347;&#x6027;&#x80FD;&#x3001;&#x964D;&#x4F4E;&#x5185;&#x5B58;&#x3001;&#x4FBF;&#x4E8E;&#x8FD0;&#x7EF4;</li>
<li>&#x53C2;&#x8003;&#xFF1A;&#x6839;&#x636E;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#x53C2;&#x8003;&#x5B9E;&#x65BD;</li>
</ul>
<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x4E86;&#x89E3; Redis &#x7684;&#x8FD0;&#x884C;&#x673A;&#x5236;&#xFF0C;&#x4F8B;&#x5982;&#x5404;&#x4E2A;&#x547D;&#x4EE4;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3001;&#x6570;&#x636E;&#x8FC7;&#x671F;&#x7B56;&#x7565;&#x3001;&#x6570;&#x636E;&#x6DD8;&#x6C70;&#x7B56;&#x7565;&#x7B49;&#xFF0C;&#x4F7F;&#x7528;&#x5408;&#x7406;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x5E76;&#x7ED3;&#x5408;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d0436efb2a20855a8ddb46043523f11c61573c9934c490934ec519702646a7f6" alt></p>
<p>&#x5982;&#x679C;&#x4F60;&#x662F; DBA &#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x505A;&#x5230;&#x672A;&#x96E8;&#x7EF8;&#x7F2A;&#xFF0C;&#x5728;&#x8D44;&#x6E90;&#x89C4;&#x5212;&#x3001;&#x8FD0;&#x7EF4;&#x3001;&#x76D1;&#x63A7;&#x3001;&#x5B89;&#x5168;&#x5C42;&#x9762;&#x505A;&#x5230;&#x4F4D;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e0a36111814aa49388995543e0959f2b2ddda3c1a40b48d3062bb056e701a839" alt></p>
<h1 id="&#x540E;&#x8BB0;"><a href="#&#x540E;&#x8BB0;" class="headerlink" title="&#x540E;&#x8BB0;"></a>&#x540E;&#x8BB0;</h1><p>&#x5982;&#x679C;&#x4F60;&#x80FD;&#x8010;&#x5FC3;&#x5730;&#x8BFB;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x5E94;&#x8BE5;&#x5BF9;&#x5982;&#x4F55;&#x300C;&#x7528;&#x597D;&#x300D;Redis &#x6709;&#x4E86;&#x65B0;&#x7684;&#x8BA4;&#x8BC6;&#x3002;</p>
<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x8BB2;&#x7684;&#x662F; Redis &#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x5BF9;&#x4E8E;&#x300C;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x300D;&#x8FD9;&#x4E2A;&#x8BDD;&#x9898;&#xFF0C;&#x6211;&#x60F3;&#x518D;&#x548C;&#x4F60;&#x591A;&#x804A;&#x51E0;&#x53E5;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x9762;&#x5BF9;&#x7684;&#x4E0D;&#x662F; Redis&#xFF0C;&#x800C;&#x662F;&#x5176;&#x5B83;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982; MySQL&#x3001;Kafka&#xFF0C;&#x4F60;&#x5728;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x7EC4;&#x4EF6;&#x65F6;&#xFF0C;&#x4F1A;&#x6709;&#x4EC0;&#x4E48;&#x4F18;&#x5316;&#x601D;&#x8DEF;&#x5417;&#xFF1F;</p>
<p>&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x6CBF;&#x7528;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x8FD9;&#x51E0;&#x4E2A;&#x7EF4;&#x5EA6;&#x6765;&#x5206;&#x6790;&#xFF1A;</p>
<ul>
<li>&#x6027;&#x80FD;</li>
<li>&#x53EF;&#x9760;&#x6027;</li>
<li>&#x8D44;&#x6E90;</li>
<li>&#x8FD0;&#x7EF4;</li>
<li>&#x76D1;&#x63A7;</li>
<li>&#x5B89;&#x5168;</li>
</ul>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x601D;&#x8003;&#x4E00;&#x4E0B;&#xFF0C;MySQL &#x548C; Kafka &#x5728;&#x8FD9;&#x51E0;&#x4E2A;&#x7EF4;&#x5EA6;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x54EA;&#x4E9B;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x4ECE;&#x5B66;&#x4E60;&#x6280;&#x80FD;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x8BB2;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x5730;&#x53BB;&#x601D;&#x8003;&#x548C;&#x63A2;&#x7D22;&#x300C;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x300D;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x53EA;&#x6709;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x624D;&#x4F1A;&#x4E0D;&#x65AD;&#x7763;&#x4FC3;&#x81EA;&#x5DF1;&#x53BB;&#x601D;&#x8003;&#xFF0C;&#x5BF9;&#x81EA;&#x5DF1;&#x63D0;&#x51FA;&#x66F4;&#x9AD8;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x505A;&#x5230;&#x6301;&#x7EED;&#x8FDB;&#x6B65;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/981a3a0f58aae5269dda44cfbb692681780f8a8b8151d5f904dfa7bae6429458" alt="qr_search.png"></p>
<p><strong>&#x60F3;&#x770B;&#x66F4;&#x591A;&#x786C;&#x6838;&#x6280;&#x672F;&#x6587;&#x7AE0;&#xFF1F;&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x300C;<a href="/external_links/092a5d30e4fee6eaeb287a1fd153194e.html" target="blank" rel="noopener">&#x6C34;&#x6EF4;&#x4E0E;&#x94F6;&#x5F39;</a>&#x300D;&#x3002;</strong></p>
<p><strong>&#x6211;&#x662F; Kaito&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x4E8E;&#x6280;&#x672F;&#x6709;&#x601D;&#x8003;&#x7684;&#x8D44;&#x6DF1;&#x540E;&#x7AEF;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x5728;&#x6211;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x4E0D;&#x4EC5;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#x4E00;&#x4E2A;&#x6280;&#x672F;&#x70B9;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x8FD8;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x505A;&#xFF1F;&#x6211;&#x8FD8;&#x4F1A;&#x5C1D;&#x8BD5;&#x628A;&#x8FD9;&#x4E9B;&#x601D;&#x8003;&#x8FC7;&#x7A0B;&#xFF0C;&#x63D0;&#x70BC;&#x6210;&#x901A;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x8BBA;&#xFF0C;&#x8BA9;&#x4F60;&#x53EF;&#x4EE5;&#x5E94;&#x7528;&#x5728;&#x5176;&#x5B83;&#x9886;&#x57DF;&#x4E2D;&#xFF0C;&#x505A;&#x5230;&#x4E3E;&#x4E00;&#x53CD;&#x4E09;&#x3002;</strong></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/dc2f63d91830f8f24c833e00e9f04c5b.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../289/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../289/">289</a><span class="page-number current">290</span><a class="page-number" href="../291/">291</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../291/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
