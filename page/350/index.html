<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/350/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/350/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903524405346318.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903524405346318.html" itemprop="url">数据结构与算法 排序与搜索</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-10T18:32:59+08:00">
                2018-01-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x6587;&#x7AE0;&#x6765;&#x6E90;&#xFF1A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x7B97;&#x6CD5;&#xFF08;Python&#xFF09;</strong></p>
<blockquote>
<p>#&#x6392;&#x5E8F;&#x4E0E;&#x641C;&#x7D22;</p>
<p>&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Sorting algorithm&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x80FD;&#x5C06;&#x4E00;&#x4E32;&#x6570;&#x636E;&#x4F9D;&#x7167;&#x7279;&#x5B9A;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x6392;&#x5217;&#x7684;&#x4E00;&#x79CD;&#x7B97;&#x6CD5;&#x3002;</p>
</blockquote>
<p>#1.&#x5192;&#x6CE1;&#x6392;&#x5E8F;</p>
<p>**&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Bubble Sort&#xFF09;**&#x662F;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x3002;&#x5B83;&#x91CD;&#x590D;&#x5730;&#x904D;&#x5386;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x5217;&#xFF0C;&#x4E00;&#x6B21;&#x6BD4;&#x8F83;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x4ED6;&#x4EEC;&#x7684;&#x987A;&#x5E8F;&#x9519;&#x8BEF;&#x5C31;&#x628A;&#x4ED6;&#x4EEC;&#x4EA4;&#x6362;&#x8FC7;&#x6765;&#x3002;&#x904D;&#x5386;&#x6570;&#x5217;&#x7684;&#x5DE5;&#x4F5C;&#x662F;&#x91CD;&#x590D;&#x5730;&#x8FDB;&#x884C;&#x76F4;&#x5230;&#x6CA1;&#x6709;&#x518D;&#x9700;&#x8981;&#x4EA4;&#x6362;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x8BE5;&#x6570;&#x5217;&#x5DF2;&#x7ECF;&#x6392;&#x5E8F;&#x5B8C;&#x6210;&#x3002;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x540D;&#x5B57;&#x7531;&#x6765;&#x662F;&#x56E0;&#x4E3A;&#x8D8A;&#x5C0F;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x7ECF;&#x7531;&#x4EA4;&#x6362;&#x6162;&#x6162;&#x201C;&#x6D6E;&#x201D;&#x5230;&#x6570;&#x5217;&#x7684;&#x9876;&#x7AEF;&#x3002;</p>
<p>&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x7684;&#x8FD0;&#x4F5C;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x6BD4;&#x8F83;&#x76F8;&#x90BB;&#x7684;&#x5143;&#x7D20;&#x3002;&#x5982;&#x679C;&#x7B2C;&#x4E00;&#x4E2A;&#x6BD4;&#x7B2C;&#x4E8C;&#x4E2A;&#x5927;&#xFF08;&#x5347;&#x5E8F;&#xFF09;&#xFF0C;&#x5C31;&#x4EA4;&#x6362;&#x4ED6;&#x4EEC;&#x4E24;&#x4E2A;&#x3002;</li>
<li>&#x5BF9;&#x6BCF;&#x4E00;&#x5BF9;&#x76F8;&#x90BB;&#x5143;&#x7D20;&#x4F5C;&#x540C;&#x6837;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4ECE;&#x5F00;&#x59CB;&#x7B2C;&#x4E00;&#x5BF9;&#x5230;&#x7ED3;&#x5C3E;&#x7684;&#x6700;&#x540E;&#x4E00;&#x5BF9;&#x3002;&#x8FD9;&#x6B65;&#x505A;&#x5B8C;&#x540E;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x662F;&#x6700;&#x5927;&#x7684;&#x6570;&#x3002;</li>
<li>&#x9488;&#x5BF9;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#x91CD;&#x590D;&#x4EE5;&#x4E0A;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x9664;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x3002;</li>
<li>&#x6301;&#x7EED;&#x6BCF;&#x6B21;&#x5BF9;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#x7684;&#x5143;&#x7D20;&#x91CD;&#x590D;&#x4E0A;&#x9762;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x76F4;&#x5230;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4E00;&#x5BF9;&#x6570;&#x5B57;&#x9700;&#x8981;&#x6BD4;&#x8F83;&#x3002;<br>##&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x6790;</li>
</ul>
<p>&#x4EA4;&#x6362;&#x8FC7;&#x7A0B;&#x56FE;&#x793A;(&#x7B2C;&#x4E00;&#x6B21;)&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/9e6b2b766d9482d6e476cf0e531c11d698f2cd62f348a9fa5f051bf2176a7b12" alt></p>
<p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;n-1&#x6B21;&#x5192;&#x6CE1;&#x8FC7;&#x7A0B;&#xFF0C;&#x6BCF;&#x6B21;&#x5BF9;&#x5E94;&#x7684;&#x6BD4;&#x8F83;&#x6B21;&#x6570;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1b88c05962619e71f1a4d4bc692e7e15f8cdde2867f4292857e5f5685e1fd870" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def bubble_sort(alist):</span><br><span class="line">    for j in range(len(alist)-1,0,-1):</span><br><span class="line">        # j&#x8868;&#x793A;&#x6BCF;&#x6B21;&#x904D;&#x5386;&#x9700;&#x8981;&#x6BD4;&#x8F83;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x662F;&#x9010;&#x6E10;&#x51CF;&#x5C0F;&#x7684;</span><br><span class="line">        for i in range(j):</span><br><span class="line">            if alist[i] &gt; alist[i+1]:</span><br><span class="line">                alist[i], alist[i+1] = alist[i+1], alist[i]</span><br><span class="line"></span><br><span class="line">li = [54,26,93,17,77,31,44,55,20]</span><br><span class="line">bubble_sort(li)</span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<ul>
<li>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n) &#xFF08;&#x8868;&#x793A;&#x904D;&#x5386;&#x4E00;&#x6B21;&#x53D1;&#x73B0;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x53EF;&#x4EE5;&#x4EA4;&#x6362;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x6392;&#x5E8F;&#x7ED3;&#x675F;&#x3002;&#xFF09;</li>
<li>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n2)</li>
<li>&#x7A33;&#x5B9A;&#x6027;&#xFF1A;&#x7A33;&#x5B9A;</li>
</ul>
<p>##&#x5192;&#x6CE1;&#x6392;&#x5E8F;&#x7684;&#x6F14;&#x793A;<br>&#x6548;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/78d98f05cc98a33398abe5cea9678bdad0755c04c05f59fe1c381b4776cae20b" alt></p>
<p>#2.&#x9009;&#x62E9;&#x6392;&#x5E8F;<br>&#x9009;&#x62E9;&#x6392;&#x5E8F;&#xFF08;Selection sort&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x76F4;&#x89C2;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x3002;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x5982;&#x4E0B;&#x3002;&#x9996;&#x5148;&#x5728;&#x672A;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x4E2D;&#x627E;&#x5230;&#x6700;&#x5C0F;&#xFF08;&#x5927;&#xFF09;&#x5143;&#x7D20;&#xFF0C;&#x5B58;&#x653E;&#x5230;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x7136;&#x540E;&#xFF0C;&#x518D;&#x4ECE;&#x5269;&#x4F59;&#x672A;&#x6392;&#x5E8F;&#x5143;&#x7D20;&#x4E2D;&#x7EE7;&#x7EED;&#x5BFB;&#x627E;&#x6700;&#x5C0F;&#xFF08;&#x5927;&#xFF09;&#x5143;&#x7D20;&#xFF0C;&#x7136;&#x540E;&#x653E;&#x5230;&#x5DF2;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x672B;&#x5C3E;&#x3002;&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x5143;&#x7D20;&#x5747;&#x6392;&#x5E8F;&#x5B8C;&#x6BD5;&#x3002;</p>
<p>&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x7684;&#x4E3B;&#x8981;&#x4F18;&#x70B9;&#x4E0E;&#x6570;&#x636E;&#x79FB;&#x52A8;&#x6709;&#x5173;&#x3002;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x5143;&#x7D20;&#x4F4D;&#x4E8E;&#x6B63;&#x786E;&#x7684;&#x6700;&#x7EC8;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x5219;&#x5B83;&#x4E0D;&#x4F1A;&#x88AB;&#x79FB;&#x52A8;&#x3002;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x6BCF;&#x6B21;&#x4EA4;&#x6362;&#x4E00;&#x5BF9;&#x5143;&#x7D20;&#xFF0C;&#x5B83;&#x4EEC;&#x5F53;&#x4E2D;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x5C06;&#x88AB;&#x79FB;&#x5230;&#x5176;&#x6700;&#x7EC8;&#x4F4D;&#x7F6E;&#x4E0A;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;n&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x8868;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x603B;&#x5171;&#x8FDB;&#x884C;&#x81F3;&#x591A;n-1&#x6B21;&#x4EA4;&#x6362;&#x3002;&#x5728;&#x6240;&#x6709;&#x7684;&#x5B8C;&#x5168;&#x4F9D;&#x9760;&#x4EA4;&#x6362;&#x53BB;&#x79FB;&#x52A8;&#x5143;&#x7D20;&#x7684;&#x6392;&#x5E8F;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x5C5E;&#x4E8E;&#x975E;&#x5E38;&#x597D;&#x7684;&#x4E00;&#x79CD;&#x3002;</p>
<p>##&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x5206;&#x6790;<br>&#x6392;&#x5E8F;&#x8FC7;&#x7A0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/dd3605c2eea43f65a2509f82ee5b64c2013d81f4d54c236422c875caa2443b9d" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/066965a4cd4949bcb2726a13e7e050a64d4a2dc8c9bf4b030d7523f203b82cfe" alt="&#x7EA2;&#x8272;&#x8868;&#x793A;&#x5F53;&#x524D;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x9EC4;&#x8272;&#x8868;&#x793A;&#x5DF2;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x84DD;&#x8272;&#x8868;&#x793A;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;&#x3002;"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def selection_sort(alist):</span><br><span class="line">    n = len(alist)</span><br><span class="line">    # &#x9700;&#x8981;&#x8FDB;&#x884C;n-1&#x6B21;&#x9009;&#x62E9;&#x64CD;&#x4F5C;</span><br><span class="line">    for i in range(n-1):</span><br><span class="line">        # &#x8BB0;&#x5F55;&#x6700;&#x5C0F;&#x4F4D;&#x7F6E;</span><br><span class="line">        min_index = i</span><br><span class="line">        # &#x4ECE;i+1&#x4F4D;&#x7F6E;&#x5230;&#x672B;&#x5C3E;&#x9009;&#x62E9;&#x51FA;&#x6700;&#x5C0F;&#x6570;&#x636E;</span><br><span class="line">        for j in range(i+1, n):</span><br><span class="line">            if alist[j] &lt; alist[min_index]:</span><br><span class="line">                min_index = j</span><br><span class="line">        # &#x5982;&#x679C;&#x9009;&#x62E9;&#x51FA;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x5728;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FDB;&#x884C;&#x4EA4;&#x6362;</span><br><span class="line">        if min_index != i:</span><br><span class="line">            alist[i], alist[min_index] = alist[min_index], alist[i]</span><br><span class="line"></span><br><span class="line">alist = [54,226,93,17,77,31,44,55,20]</span><br><span class="line">selection_sort(alist)</span><br><span class="line">print(alist)</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<ul>
<li>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n2)</li>
<li>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n2)</li>
<li>&#x7A33;&#x5B9A;&#x6027;&#xFF1A;&#x4E0D;&#x7A33;&#x5B9A;&#xFF08;&#x8003;&#x8651;&#x5347;&#x5E8F;&#x6BCF;&#x6B21;&#x9009;&#x62E9;&#x6700;&#x5927;&#x7684;&#x60C5;&#x51B5;&#xFF09;<br>##&#x9009;&#x62E9;&#x6392;&#x5E8F;&#x6F14;&#x793A;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/afb4b18eda8bc45e602548d858c0e72b9ee5019a2259f79a3e5fc54b03120833" alt></p>
<p>#3.&#x63D2;&#x5165;&#x6392;&#x5E8F;</p>
<p>&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Insertion Sort&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x76F4;&#x89C2;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x3002;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x662F;&#x901A;&#x8FC7;&#x6784;&#x5EFA;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#xFF0C;&#x5BF9;&#x4E8E;&#x672A;&#x6392;&#x5E8F;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x5DF2;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x4E2D;&#x4ECE;&#x540E;&#x5411;&#x524D;&#x626B;&#x63CF;&#xFF0C;&#x627E;&#x5230;&#x76F8;&#x5E94;&#x4F4D;&#x7F6E;&#x5E76;&#x63D2;&#x5165;&#x3002;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x5728;&#x5B9E;&#x73B0;&#x4E0A;&#xFF0C;&#x5728;&#x4ECE;&#x540E;&#x5411;&#x524D;&#x626B;&#x63CF;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x53CD;&#x590D;&#x628A;&#x5DF2;&#x6392;&#x5E8F;&#x5143;&#x7D20;&#x9010;&#x6B65;&#x5411;&#x540E;&#x632A;&#x4F4D;&#xFF0C;&#x4E3A;&#x6700;&#x65B0;&#x5143;&#x7D20;&#x63D0;&#x4F9B;&#x63D2;&#x5165;&#x7A7A;&#x95F4;&#x3002;</p>
<p>##&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x5206;&#x6790;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/3e74458f99c7f57067ac2c0f7d68ae7ad5a78596d9b8121b2d643be8cc0fa879" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/8085615d18f5e5617b5dd1e374d8398bc1ca1dce51f80f02c0736b7ec0315272" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def insert_sort(alist):</span><br><span class="line">    # &#x4ECE;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F4D;&#x7F6E;&#xFF0C;&#x5373;&#x4E0B;&#x6807;&#x4E3A;1&#x7684;&#x5143;&#x7D20;&#x5F00;&#x59CB;&#x5411;&#x524D;&#x63D2;&#x5165;</span><br><span class="line">    for i in range(1, len(alist)):</span><br><span class="line">        # &#x4ECE;&#x7B2C;i&#x4E2A;&#x5143;&#x7D20;&#x5F00;&#x59CB;&#x5411;&#x524D;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x5C0F;&#x4E8E;&#x524D;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x4EA4;&#x6362;&#x4F4D;&#x7F6E;</span><br><span class="line">        for j in range(i, 0, -1):</span><br><span class="line">            if alist[j] &lt; alist[j-1]:</span><br><span class="line">                alist[j], alist[j-1] = alist[j-1], alist[j]</span><br><span class="line"></span><br><span class="line">alist = [54,26,93,17,77,31,44,55,20]</span><br><span class="line">insert_sort(alist)</span><br><span class="line">print(alist)</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<ul>
<li>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n) &#xFF08;&#x5347;&#x5E8F;&#x6392;&#x5217;&#xFF0C;&#x5E8F;&#x5217;&#x5DF2;&#x7ECF;&#x5904;&#x4E8E;&#x5347;&#x5E8F;&#x72B6;&#x6001;&#xFF09;</li>
<li>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n2)</li>
<li>&#x7A33;&#x5B9A;&#x6027;&#xFF1A;&#x7A33;&#x5B9A;<br>##&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x6F14;&#x793A;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/0c5b0b5525325934a7b7cc8ca22e3f1594f2b82d91ab0fffe7f37c4f9004bb5b" alt></p>
<p>#4.&#x5FEB;&#x901F;&#x6392;&#x5E8F;</p>
<p>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF08;&#x82F1;&#x8BED;&#xFF1A;Quicksort&#xFF09;&#xFF0C;&#x53C8;&#x79F0;&#x5212;&#x5206;&#x4EA4;&#x6362;&#x6392;&#x5E8F;&#xFF08;partition-exchange sort&#xFF09;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x8D9F;&#x6392;&#x5E8F;&#x5C06;&#x8981;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x5206;&#x5272;&#x6210;&#x72EC;&#x7ACB;&#x7684;&#x4E24;&#x90E8;&#x5206;&#xFF0C;&#x5176;&#x4E2D;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x6BD4;&#x53E6;&#x5916;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#x90FD;&#x8981;&#x5C0F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x6309;&#x6B64;&#x65B9;&#x6CD5;&#x5BF9;&#x8FD9;&#x4E24;&#x90E8;&#x5206;&#x6570;&#x636E;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x6574;&#x4E2A;&#x6392;&#x5E8F;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x9012;&#x5F52;&#x8FDB;&#x884C;&#xFF0C;&#x4EE5;&#x6B64;&#x8FBE;&#x5230;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x53D8;&#x6210;&#x6709;&#x5E8F;&#x5E8F;&#x5217;&#x3002;</p>
<p>&#x6B65;&#x9AA4;&#x4E3A;&#xFF1A;</p>
<p>1.&#x4ECE;&#x6570;&#x5217;&#x4E2D;&#x6311;&#x51FA;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x79F0;&#x4E3A;&#x201D;&#x57FA;&#x51C6;&#x201D;&#xFF08;pivot&#xFF09;&#xFF0C;<br>2.&#x91CD;&#x65B0;&#x6392;&#x5E8F;&#x6570;&#x5217;&#xFF0C;&#x6240;&#x6709;&#x5143;&#x7D20;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5C0F;&#x7684;&#x6446;&#x653E;&#x5728;&#x57FA;&#x51C6;&#x524D;&#x9762;&#xFF0C;&#x6240;&#x6709;&#x5143;&#x7D20;&#x6BD4;&#x57FA;&#x51C6;&#x503C;&#x5927;&#x7684;&#x6446;&#x5728;&#x57FA;&#x51C6;&#x7684;&#x540E;&#x9762;&#xFF08;&#x76F8;&#x540C;&#x7684;&#x6570;&#x53EF;&#x4EE5;&#x5230;&#x4EFB;&#x4E00;&#x8FB9;&#xFF09;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x5206;&#x533A;&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#xFF0C;&#x8BE5;&#x57FA;&#x51C6;&#x5C31;&#x5904;&#x4E8E;&#x6570;&#x5217;&#x7684;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;&#x3002;&#x8FD9;&#x4E2A;&#x79F0;&#x4E3A;&#x5206;&#x533A;&#xFF08;partition&#xFF09;&#x64CD;&#x4F5C;&#x3002;<br>&#x9012;&#x5F52;&#x5730;&#xFF08;recursive&#xFF09;&#x628A;&#x5C0F;&#x4E8E;&#x57FA;&#x51C6;&#x503C;&#x5143;&#x7D20;&#x7684;&#x5B50;&#x6570;&#x5217;&#x548C;&#x5927;&#x4E8E;&#x57FA;&#x51C6;&#x503C;&#x5143;&#x7D20;&#x7684;&#x5B50;&#x6570;&#x5217;&#x6392;&#x5E8F;&#x3002;<br>3.&#x9012;&#x5F52;&#x7684;&#x6700;&#x5E95;&#x90E8;&#x60C5;&#x5F62;&#xFF0C;&#x662F;&#x6570;&#x5217;&#x7684;&#x5927;&#x5C0F;&#x662F;&#x96F6;&#x6216;&#x4E00;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6C38;&#x8FDC;&#x90FD;&#x5DF2;&#x7ECF;&#x88AB;&#x6392;&#x5E8F;&#x597D;&#x4E86;&#x3002;&#x867D;&#x7136;&#x4E00;&#x76F4;&#x9012;&#x5F52;&#x4E0B;&#x53BB;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x603B;&#x4F1A;&#x7ED3;&#x675F;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x6BCF;&#x6B21;&#x7684;&#x8FED;&#x4EE3;&#xFF08;iteration&#xFF09;&#x4E2D;&#xFF0C;&#x5B83;&#x81F3;&#x5C11;&#x4F1A;&#x628A;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x6446;&#x5230;&#x5B83;&#x6700;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x53BB;&#x3002;</p>
<p>##&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x6790;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c1fe1dee453ad8dec90d45a80e243973f5d80ae3b2245d12670b8d15732ff729" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def quick_sort(alist, start, end):</span><br><span class="line">    &quot;&quot;&quot;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    # &#x9012;&#x5F52;&#x7684;&#x9000;&#x51FA;&#x6761;&#x4EF6;</span><br><span class="line">    if start &gt;= end:</span><br><span class="line">        return</span><br><span class="line"></span><br><span class="line">    # &#x8BBE;&#x5B9A;&#x8D77;&#x59CB;&#x5143;&#x7D20;&#x4E3A;&#x8981;&#x5BFB;&#x627E;&#x4F4D;&#x7F6E;&#x7684;&#x57FA;&#x51C6;&#x5143;&#x7D20;</span><br><span class="line">    mid = alist[start]</span><br><span class="line"></span><br><span class="line">    # low&#x4E3A;&#x5E8F;&#x5217;&#x5DE6;&#x8FB9;&#x7684;&#x7531;&#x5DE6;&#x5411;&#x53F3;&#x79FB;&#x52A8;&#x7684;&#x6E38;&#x6807;</span><br><span class="line">    low = start</span><br><span class="line"></span><br><span class="line">    # high&#x4E3A;&#x5E8F;&#x5217;&#x53F3;&#x8FB9;&#x7684;&#x7531;&#x53F3;&#x5411;&#x5DE6;&#x79FB;&#x52A8;&#x7684;&#x6E38;&#x6807;</span><br><span class="line">    high = end</span><br><span class="line"></span><br><span class="line">    while low &lt; high:</span><br><span class="line">        # &#x5982;&#x679C;low&#x4E0E;high&#x672A;&#x91CD;&#x5408;&#xFF0C;high&#x6307;&#x5411;&#x7684;&#x5143;&#x7D20;&#x4E0D;&#x6BD4;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5C0F;&#xFF0C;&#x5219;high&#x5411;&#x5DE6;&#x79FB;&#x52A8;</span><br><span class="line">        while low &lt; high and alist[high] &gt;= mid:</span><br><span class="line">            high -= 1</span><br><span class="line">        # &#x5C06;high&#x6307;&#x5411;&#x7684;&#x5143;&#x7D20;&#x653E;&#x5230;low&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;</span><br><span class="line">        alist[low] = alist[high]</span><br><span class="line"></span><br><span class="line">        # &#x5982;&#x679C;low&#x4E0E;high&#x672A;&#x91CD;&#x5408;&#xFF0C;low&#x6307;&#x5411;&#x7684;&#x5143;&#x7D20;&#x6BD4;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5C0F;&#xFF0C;&#x5219;low&#x5411;&#x53F3;&#x79FB;&#x52A8;</span><br><span class="line">        while low &lt; high and alist[low] &lt; mid:</span><br><span class="line">            low += 1</span><br><span class="line">        # &#x5C06;low&#x6307;&#x5411;&#x7684;&#x5143;&#x7D20;&#x653E;&#x5230;high&#x7684;&#x4F4D;&#x7F6E;&#x4E0A;</span><br><span class="line">        alist[high] = alist[low]</span><br><span class="line"></span><br><span class="line">    # &#x9000;&#x51FA;&#x5FAA;&#x73AF;&#x540E;&#xFF0C;low&#x4E0E;high&#x91CD;&#x5408;&#xFF0C;&#x6B64;&#x65F6;&#x6240;&#x6307;&#x4F4D;&#x7F6E;&#x4E3A;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x7684;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;</span><br><span class="line">    # &#x5C06;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x653E;&#x5230;&#x8BE5;&#x4F4D;&#x7F6E;</span><br><span class="line">    alist[low] = mid</span><br><span class="line"></span><br><span class="line">    # &#x5BF9;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x5DE6;&#x8FB9;&#x7684;&#x5B50;&#x5E8F;&#x5217;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</span><br><span class="line">    quick_sort(alist, start, low-1)</span><br><span class="line"></span><br><span class="line">    # &#x5BF9;&#x57FA;&#x51C6;&#x5143;&#x7D20;&#x53F3;&#x8FB9;&#x7684;&#x5B50;&#x5E8F;&#x5217;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</span><br><span class="line">    quick_sort(alist, low+1, end)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">alist = [54,26,93,17,77,31,44,55,20]</span><br><span class="line">quick_sort(alist,0,len(alist)-1)</span><br><span class="line">print(alist)</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<ul>
<li>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(nlogn)</li>
<li>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n2)</li>
<li>&#x7A33;&#x5B9A;&#x6027;&#xFF1A;&#x4E0D;&#x7A33;&#x5B9A;<br>&#x4ECE;&#x4E00;&#x5F00;&#x59CB;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x5E73;&#x5747;&#x9700;&#x8981;&#x82B1;&#x8D39;O(n log n)&#x65F6;&#x95F4;&#x7684;&#x63CF;&#x8FF0;&#x5E76;&#x4E0D;&#x660E;&#x663E;&#x3002;&#x4F46;&#x662F;&#x4E0D;&#x96BE;&#x89C2;&#x5BDF;&#x5230;&#x7684;&#x662F;&#x5206;&#x533A;&#x8FD0;&#x7B97;&#xFF0C;&#x6570;&#x7EC4;&#x7684;&#x5143;&#x7D20;&#x90FD;&#x4F1A;&#x5728;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x4E2D;&#x8D70;&#x8BBF;&#x8FC7;&#x4E00;&#x6B21;&#xFF0C;&#x4F7F;&#x7528;O(n)&#x7684;&#x65F6;&#x95F4;&#x3002;&#x5728;&#x4F7F;&#x7528;&#x7ED3;&#x5408;&#xFF08;concatenation&#xFF09;&#x7684;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x8FD9;&#x9879;&#x8FD0;&#x7B97;&#x4E5F;&#x662F;O(n)&#x3002;</li>
</ul>
<p>&#x5728;&#x6700;&#x597D;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6BCF;&#x6B21;&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x4E00;&#x6B21;&#x5206;&#x533A;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x628A;&#x4E00;&#x4E2A;&#x6570;&#x5217;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x51E0;&#x8FD1;&#x76F8;&#x7B49;&#x7684;&#x7247;&#x6BB5;&#x3002;&#x8FD9;&#x4E2A;&#x610F;&#x601D;&#x5C31;&#x662F;&#x6BCF;&#x6B21;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x5904;&#x7406;&#x4E00;&#x534A;&#x5927;&#x5C0F;&#x7684;&#x6570;&#x5217;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x5230;&#x8FBE;&#x5927;&#x5C0F;&#x4E3A;&#x4E00;&#x7684;&#x6570;&#x5217;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x4F5C;log n&#x6B21;&#x5D4C;&#x5957;&#x7684;&#x8C03;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x610F;&#x601D;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x6811;&#x7684;&#x6DF1;&#x5EA6;&#x662F;O(log n)&#x3002;&#x4F46;&#x662F;&#x5728;&#x540C;&#x4E00;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7684;&#x4E24;&#x4E2A;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x4E2D;&#xFF0C;&#x4E0D;&#x4F1A;&#x5904;&#x7406;&#x5230;&#x539F;&#x6765;&#x6570;&#x5217;&#x7684;&#x76F8;&#x540C;&#x90E8;&#x5206;&#xFF1B;&#x56E0;&#x6B64;&#xFF0C;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x7684;&#x6BCF;&#x4E00;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x603B;&#x5171;&#x5168;&#x90E8;&#x4EC5;&#x9700;&#x8981;O(n)&#x7684;&#x65F6;&#x95F4;&#xFF08;&#x6BCF;&#x4E2A;&#x8C03;&#x7528;&#x6709;&#x67D0;&#x4E9B;&#x5171;&#x540C;&#x7684;&#x989D;&#x5916;&#x8017;&#x8D39;&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x6BCF;&#x4E00;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x4EC5;&#x4EC5;&#x53EA;&#x6709;O(n)&#x4E2A;&#x8C03;&#x7528;&#xFF0C;&#x8FD9;&#x4E9B;&#x88AB;&#x5F52;&#x7EB3;&#x5728;O(n)&#x7CFB;&#x6570;&#x4E2D;&#xFF09;&#x3002;&#x7ED3;&#x679C;&#x662F;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x4EC5;&#x9700;&#x4F7F;&#x7528;O(n log n)&#x65F6;&#x95F4;&#x3002;</p>
<p>##&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x6F14;&#x793A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1f3ce044b1114f125cfc58a13ce280430a968bc9f30c0507e46f8e0767057e03" alt></p>
<p>#5.&#x5E0C;&#x5C14;&#x6392;&#x5E8F;<br>&#x5E0C;&#x5C14;&#x6392;&#x5E8F;(Shell Sort)&#x662F;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x4E00;&#x79CD;&#x3002;&#x4E5F;&#x79F0;&#x7F29;&#x5C0F;&#x589E;&#x91CF;&#x6392;&#x5E8F;&#xFF0C;&#x662F;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x7684;&#x4E00;&#x79CD;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x6539;&#x8FDB;&#x7248;&#x672C;&#x3002;&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x662F;&#x975E;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x56E0;DL&#xFF0E;Shell&#x4E8E;1959&#x5E74;&#x63D0;&#x51FA;&#x800C;&#x5F97;&#x540D;&#x3002; &#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x662F;&#x628A;&#x8BB0;&#x5F55;&#x6309;&#x4E0B;&#x6807;&#x7684;&#x4E00;&#x5B9A;&#x589E;&#x91CF;&#x5206;&#x7EC4;&#xFF0C;&#x5BF9;&#x6BCF;&#x7EC4;&#x4F7F;&#x7528;&#x76F4;&#x63A5;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x6392;&#x5E8F;&#xFF1B;&#x968F;&#x7740;&#x589E;&#x91CF;&#x9010;&#x6E10;&#x51CF;&#x5C11;&#xFF0C;&#x6BCF;&#x7EC4;&#x5305;&#x542B;&#x7684;&#x5173;&#x952E;&#x8BCD;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#xFF0C;&#x5F53;&#x589E;&#x91CF;&#x51CF;&#x81F3;1&#x65F6;&#xFF0C;&#x6574;&#x4E2A;&#x6587;&#x4EF6;&#x6070;&#x88AB;&#x5206;&#x6210;&#x4E00;&#x7EC4;&#xFF0C;&#x7B97;&#x6CD5;&#x4FBF;&#x7EC8;&#x6B62;&#x3002;</p>
<p>##&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x8FC7;&#x7A0B;</p>
<p>&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x7684;&#x57FA;&#x672C;&#x601D;&#x60F3;&#x662F;&#xFF1A;&#x5C06;&#x6570;&#x7EC4;&#x5217;&#x5728;&#x4E00;&#x4E2A;&#x8868;&#x4E2D;&#x5E76;&#x5BF9;&#x5217;&#x5206;&#x522B;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF0C;&#x91CD;&#x590D;&#x8FD9;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E0D;&#x8FC7;&#x6BCF;&#x6B21;&#x7528;&#x66F4;&#x957F;&#x7684;&#x5217;&#xFF08;&#x6B65;&#x957F;&#x66F4;&#x957F;&#x4E86;&#xFF0C;&#x5217;&#x6570;&#x66F4;&#x5C11;&#x4E86;&#xFF09;&#x6765;&#x8FDB;&#x884C;&#x3002;&#x6700;&#x540E;&#x6574;&#x4E2A;&#x8868;&#x5C31;&#x53EA;&#x6709;&#x4E00;&#x5217;&#x4E86;&#x3002;&#x5C06;&#x6570;&#x7EC4;&#x8F6C;&#x6362;&#x81F3;&#x8868;&#x662F;&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x8FD9;&#x7B97;&#x6CD5;&#xFF0C;&#x7B97;&#x6CD5;&#x672C;&#x8EAB;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5047;&#x8BBE;&#x6709;&#x8FD9;&#x6837;&#x4E00;&#x7EC4;&#x6570;[ 13 14 94 33 82 25 59 94 65 23 45 27 73 25 39 10 ]&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4EE5;&#x6B65;&#x957F;&#x4E3A;5&#x5F00;&#x59CB;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x8FD9;&#x5217;&#x8868;&#x653E;&#x5728;&#x6709;5&#x5217;&#x7684;&#x8868;&#x4E2D;&#x6765;&#x66F4;&#x597D;&#x5730;&#x63CF;&#x8FF0;&#x7B97;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x5C31;&#x5E94;&#x8BE5;&#x770B;&#x8D77;&#x6765;&#x662F;&#x8FD9;&#x6837;(&#x7AD6;&#x7740;&#x7684;&#x5143;&#x7D20;&#x662F;&#x6B65;&#x957F;&#x7EC4;&#x6210;)&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;13 14 94 33 82</span><br><span class="line">25 59 94 65 23</span><br><span class="line">45 27 73 25 39</span><br><span class="line">10</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5BF9;&#x6BCF;&#x5217;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;10 14 73 25 23</span><br><span class="line">13 27 94 33 39</span><br><span class="line">25 59 94 65 82</span><br><span class="line">45</span><br></pre></td></tr></table></figure>

<p>&#x5C06;&#x4E0A;&#x8FF0;&#x56DB;&#x884C;&#x6570;&#x5B57;&#xFF0C;&#x4F9D;&#x5E8F;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#x65F6;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#xFF1A;<code>[ 10 14 73 25 23 13 27 94 33 39 25 59 94 65 82 45 ]</code>&#x3002;&#x8FD9;&#x65F6;10&#x5DF2;&#x7ECF;&#x79FB;&#x81F3;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x4EE5;3&#x4E3A;&#x6B65;&#x957F;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;10 14 73</span><br><span class="line">25 23 13</span><br><span class="line">27 94 33</span><br><span class="line">39 25 59</span><br><span class="line">94 65 82</span><br><span class="line">45</span><br></pre></td></tr></table></figure>

<p>&#x6392;&#x5E8F;&#x4E4B;&#x540E;&#x53D8;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;10 14 13</span><br><span class="line">25 23 33</span><br><span class="line">27 25 59</span><br><span class="line">39 65 73</span><br><span class="line">45 94 82</span><br><span class="line">94</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x540E;&#x4EE5;1&#x6B65;&#x957F;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF08;&#x6B64;&#x65F6;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x4E86;&#xFF09;</p>
<p>##&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x6790;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/ca565c3b7eafa3f2105879e908477d240c806ccb9053bde747941ad3377adc08" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def shell_sort(alist):</span><br><span class="line">    n = len(alist)</span><br><span class="line">    # &#x521D;&#x59CB;&#x6B65;&#x957F;</span><br><span class="line">    gap = n / 2</span><br><span class="line">    while gap &gt; 0:</span><br><span class="line">        # &#x6309;&#x6B65;&#x957F;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x6392;&#x5E8F;</span><br><span class="line">        for i in range(gap, n):</span><br><span class="line">            j = i</span><br><span class="line">            # &#x63D2;&#x5165;&#x6392;&#x5E8F;</span><br><span class="line">            while j&gt;=gap and alist[j-gap] &gt; alist[j]:</span><br><span class="line">                alist[j-gap], alist[j] = alist[j], alist[j-gap]</span><br><span class="line">                j -= gap</span><br><span class="line">        # &#x5F97;&#x5230;&#x65B0;&#x7684;&#x6B65;&#x957F;</span><br><span class="line">        gap = gap / 2</span><br><span class="line"></span><br><span class="line">alist = [54,26,93,17,77,31,44,55,20]</span><br><span class="line">shell_sort(alist)</span><br><span class="line">print(alist)</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<p>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;&#x6839;&#x636E;&#x6B65;&#x957F;&#x5E8F;&#x5217;&#x7684;&#x4E0D;&#x540C;&#x800C;&#x4E0D;&#x540C;<br>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(n2)<br>&#x7A33;&#x5B9A;&#x60F3;&#xFF1A;&#x4E0D;&#x7A33;&#x5B9A;<br>##&#x5E0C;&#x5C14;&#x6392;&#x5E8F;&#x6F14;&#x793A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d557f7218f3d2c679af65374e19d1d508d57e3a2fa5de84fd9dc7241a06458b2" alt></p>
<p>#6.&#x5F52;&#x5E76;&#x6392;&#x5E8F;<br>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x662F;&#x91C7;&#x7528;&#x5206;&#x6CBB;&#x6CD5;&#x7684;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5178;&#x578B;&#x7684;&#x5E94;&#x7528;&#x3002;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7684;&#x601D;&#x60F3;&#x5C31;&#x662F;&#x5148;&#x9012;&#x5F52;&#x5206;&#x89E3;&#x6570;&#x7EC4;&#xFF0C;&#x518D;&#x5408;&#x5E76;&#x6570;&#x7EC4;&#x3002;</p>
<p>&#x5C06;&#x6570;&#x7EC4;&#x5206;&#x89E3;&#x6700;&#x5C0F;&#x4E4B;&#x540E;&#xFF0C;&#x7136;&#x540E;&#x5408;&#x5E76;&#x4E24;&#x4E2A;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&#xFF0C;&#x57FA;&#x672C;&#x601D;&#x8DEF;&#x662F;&#x6BD4;&#x8F83;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x6700;&#x524D;&#x9762;&#x7684;&#x6570;&#xFF0C;&#x8C01;&#x5C0F;&#x5C31;&#x5148;&#x53D6;&#x8C01;&#xFF0C;&#x53D6;&#x4E86;&#x540E;&#x76F8;&#x5E94;&#x7684;&#x6307;&#x9488;&#x5C31;&#x5F80;&#x540E;&#x79FB;&#x4E00;&#x4F4D;&#x3002;&#x7136;&#x540E;&#x518D;&#x6BD4;&#x8F83;&#xFF0C;&#x76F4;&#x81F3;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4E3A;&#x7A7A;&#xFF0C;&#x6700;&#x540E;&#x628A;&#x53E6;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x5269;&#x4F59;&#x90E8;&#x5206;&#x590D;&#x5236;&#x8FC7;&#x6765;&#x5373;&#x53EF;&#x3002;</p>
<p>##&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x7684;&#x5206;&#x6790;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d2de8765d77152ed94a1d4f3b471199c91b16460344cb1bb8ead184d704f979e" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def merge_sort(alist):</span><br><span class="line">    if len(alist) &lt;= 1:</span><br><span class="line">        return alist</span><br><span class="line">    # &#x4E8C;&#x5206;&#x5206;&#x89E3;</span><br><span class="line">    num = len(alist)/2</span><br><span class="line">    left = merge_sort(alist[:num])</span><br><span class="line">    right = merge_sort(alist[num:])</span><br><span class="line">    # &#x5408;&#x5E76;</span><br><span class="line">    return merge(left,right)</span><br><span class="line"></span><br><span class="line">def merge(left, right):</span><br><span class="line">    &apos;&apos;&apos;&#x5408;&#x5E76;&#x64CD;&#x4F5C;&#xFF0C;&#x5C06;&#x4E24;&#x4E2A;&#x6709;&#x5E8F;&#x6570;&#x7EC4;left[]&#x548C;right[]&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x5927;&#x7684;&#x6709;&#x5E8F;&#x6570;&#x7EC4;&apos;&apos;&apos;</span><br><span class="line">    #left&#x4E0E;right&#x7684;&#x4E0B;&#x6807;&#x6307;&#x9488;</span><br><span class="line">    l, r = 0, 0</span><br><span class="line">    result = []</span><br><span class="line">    while l&lt;len(left) and r&lt;len(right):</span><br><span class="line">        if left[l] &lt; right[r]:</span><br><span class="line">            result.append(left[l])</span><br><span class="line">            l += 1</span><br><span class="line">        else:</span><br><span class="line">            result.append(right[r])</span><br><span class="line">            r += 1</span><br><span class="line">    result += left[l:]</span><br><span class="line">    result += right[r:]</span><br><span class="line">    return result</span><br><span class="line"></span><br><span class="line">alist = [54,26,93,17,77,31,44,55,20]</span><br><span class="line">sorted_alist = mergeSort(alist)</span><br><span class="line">print(sorted_alist)</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<ul>
<li>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(nlogn)</li>
<li>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(nlogn)</li>
<li>&#x7A33;&#x5B9A;&#x6027;&#xFF1A;&#x7A33;&#x5B9A;</li>
</ul>
<p>#7.&#x5E38;&#x89C1;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#x6BD4;&#x8F83;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/47062278af5c603828719c1fd84dff39b7283c28df6a13fe384a6c2c7f1981cb" alt></p>
<p>#8.&#x641C;&#x7D22;</p>
<p>&#x641C;&#x7D22;&#x662F;&#x5728;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x96C6;&#x5408;&#x4E2D;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x9879;&#x76EE;&#x7684;&#x7B97;&#x6CD5;&#x8FC7;&#x7A0B;&#x3002;&#x641C;&#x7D22;&#x901A;&#x5E38;&#x7684;&#x7B54;&#x6848;&#x662F;&#x771F;&#x7684;&#x6216;&#x5047;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x9879;&#x76EE;&#x662F;&#x5426;&#x5B58;&#x5728;&#x3002; &#x641C;&#x7D22;&#x7684;&#x51E0;&#x79CD;&#x5E38;&#x89C1;&#x65B9;&#x6CD5;&#xFF1A;&#x987A;&#x5E8F;&#x67E5;&#x627E;&#x3001;&#x4E8C;&#x5206;&#x6CD5;&#x67E5;&#x627E;&#x3001;&#x4E8C;&#x53C9;&#x6811;&#x67E5;&#x627E;&#x3001;&#x54C8;&#x5E0C;&#x67E5;&#x627E;</p>
<p>&#x4E8C;&#x5206;&#x6CD5;&#x67E5;&#x627E;</p>
<p>&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x53C8;&#x79F0;&#x6298;&#x534A;&#x67E5;&#x627E;&#xFF0C;&#x4F18;&#x70B9;&#x662F;&#x6BD4;&#x8F83;&#x6B21;&#x6570;&#x5C11;&#xFF0C;&#x67E5;&#x627E;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x5E73;&#x5747;&#x6027;&#x80FD;&#x597D;&#xFF1B;&#x5176;&#x7F3A;&#x70B9;&#x662F;&#x8981;&#x6C42;&#x5F85;&#x67E5;&#x8868;&#x4E3A;&#x6709;&#x5E8F;&#x8868;&#xFF0C;&#x4E14;&#x63D2;&#x5165;&#x5220;&#x9664;&#x56F0;&#x96BE;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6298;&#x534A;&#x67E5;&#x627E;&#x65B9;&#x6CD5;&#x9002;&#x7528;&#x4E8E;&#x4E0D;&#x7ECF;&#x5E38;&#x53D8;&#x52A8;&#x800C;&#x67E5;&#x627E;&#x9891;&#x7E41;&#x7684;&#x6709;&#x5E8F;&#x5217;&#x8868;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x5047;&#x8BBE;&#x8868;&#x4E2D;&#x5143;&#x7D20;&#x662F;&#x6309;&#x5347;&#x5E8F;&#x6392;&#x5217;&#xFF0C;&#x5C06;&#x8868;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;&#x8BB0;&#x5F55;&#x7684;&#x5173;&#x952E;&#x5B57;&#x4E0E;&#x67E5;&#x627E;&#x5173;&#x952E;&#x5B57;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x4E24;&#x8005;&#x76F8;&#x7B49;&#xFF0C;&#x5219;&#x67E5;&#x627E;&#x6210;&#x529F;&#xFF1B;&#x5426;&#x5219;&#x5229;&#x7528;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;&#x8BB0;&#x5F55;&#x5C06;&#x8868;&#x5206;&#x6210;&#x524D;&#x3001;&#x540E;&#x4E24;&#x4E2A;&#x5B50;&#x8868;&#xFF0C;&#x5982;&#x679C;&#x4E2D;&#x95F4;&#x4F4D;&#x7F6E;&#x8BB0;&#x5F55;&#x7684;&#x5173;&#x952E;&#x5B57;&#x5927;&#x4E8E;&#x67E5;&#x627E;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5219;&#x8FDB;&#x4E00;&#x6B65;&#x67E5;&#x627E;&#x524D;&#x4E00;&#x5B50;&#x8868;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x4E00;&#x6B65;&#x67E5;&#x627E;&#x540E;&#x4E00;&#x5B50;&#x8868;&#x3002;&#x91CD;&#x590D;&#x4EE5;&#x4E0A;&#x8FC7;&#x7A0B;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x4F7F;&#x67E5;&#x627E;&#x6210;&#x529F;&#xFF0C;&#x6216;&#x76F4;&#x5230;&#x5B50;&#x8868;&#x4E0D;&#x5B58;&#x5728;&#x4E3A;&#x6B62;&#xFF0C;&#x6B64;&#x65F6;&#x67E5;&#x627E;&#x4E0D;&#x6210;&#x529F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/7139861eee281ea240657d31684eae38dfea8d4da1c0a79617e609ae03b9aaf2" alt></p>
<p>##&#x4E8C;&#x5206;&#x6CD5;&#x67E5;&#x627E;&#x5B9E;&#x73B0;</p>
<p>##&#xFF08;&#x975E;&#x9012;&#x5F52;&#x5B9E;&#x73B0;&#xFF09;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def binary_search(alist, item):</span><br><span class="line">      first = 0</span><br><span class="line">      last = len(alist)-1</span><br><span class="line">      while first&lt;=last:</span><br><span class="line">          midpoint = (first + last)/2</span><br><span class="line">          if alist[midpoint] == item:</span><br><span class="line">              return True</span><br><span class="line">          elif item &lt; alist[midpoint]:</span><br><span class="line">              last = midpoint-1</span><br><span class="line">          else:</span><br><span class="line">              first = midpoint+1</span><br><span class="line">    return False</span><br><span class="line">testlist = [0, 1, 2, 8, 13, 17, 19, 32, 42,]</span><br><span class="line">print(binary_search(testlist, 3))</span><br><span class="line">print(binary_search(testlist, 13))</span><br></pre></td></tr></table></figure>

<p>##&#xFF08;&#x9012;&#x5F52;&#x5B9E;&#x73B0;&#xFF09;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def binary_search(alist, item):</span><br><span class="line">    if len(alist) == 0:</span><br><span class="line">        return False</span><br><span class="line">    else:</span><br><span class="line">        midpoint = len(alist)//2</span><br><span class="line">        if alist[midpoint]==item:</span><br><span class="line">          return True</span><br><span class="line">        else:</span><br><span class="line">          if item&lt;alist[midpoint]:</span><br><span class="line">            return binary_search(alist[:midpoint],item)</span><br><span class="line">          else:</span><br><span class="line">            return binary_search(alist[midpoint+1:],item)</span><br><span class="line"></span><br><span class="line">testlist = [0, 1, 2, 8, 13, 17, 19, 32, 42,]</span><br><span class="line">print(binary_search(testlist, 3))</span><br><span class="line">print(binary_search(testlist, 13))</span><br></pre></td></tr></table></figure>

<p>##&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;</p>
<ul>
<li>&#x6700;&#x4F18;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(1)</li>
<li>&#x6700;&#x574F;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(logn)</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/bc0bcbd1851e3737c29b2f58b1bf8ba3.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903546190577671.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903546190577671.html" itemprop="url">依赖注入不是Java的专利，Golang也有</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-09T15:09:30+08:00">
                2018-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x7B14;&#x8005;&#x5728;&#x4F7F;&#x7528;Golang&#x7684;&#x65F6;&#x5019;&#x5C31;&#x53D1;&#x73B0;&#x6784;&#x5EFA;&#x7CFB;&#x7EDF;&#x4F9D;&#x8D56;&#x6811;&#x975E;&#x5E38;&#x7E41;&#x7410;&#xFF0C;New&#x4E86;&#x5F88;&#x591A;&#x5BF9;&#x8C61;&#xFF0C;&#x53C8;&#x624B;&#x5DE5;&#x4EE3;&#x7801;&#x5C06;&#x5B83;&#x4EEC;&#x62FC;&#x63A5;&#x8D77;&#x6765;&#xFF0C;&#x5199;&#x4E86;&#x4E00;&#x5806;&#x975E;&#x5E38;&#x5197;&#x7E41;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x7136;&#x540E;&#x5C31;&#x5F00;&#x59CB;&#x60F3;&#xFF0C;&#x8981;&#x662F;Golang&#x50CF;Java&#x4E00;&#x6837;&#x6709;&#x4E00;&#x4E2A;&#x597D;&#x7528;&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6846;&#x67B6;&#x5C31;&#x597D;&#x5566;&#x3002;</p>
<p>&#x679C;&#x4E0D;&#x5176;&#x7136;&#xFF0C;Golang&#x8FD8;&#x771F;&#x6709;&#xFF0C;&#x5C45;&#x7136;&#x8FD8;&#x662F;&#x5927;&#x5382;facebook&#x56E2;&#x961F;&#x5F00;&#x6E90;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/61f47b5cd313665a0c8167b6ade3b7f7169ad936932c754cc6a0df60eb6e9351" alt><br>Golang&#x7684;&#x5F88;&#x591A;&#x7528;&#x6237;&#x90FD;&#x4E0D;&#x662F;&#x6765;&#x81EA;Java&#xFF0C;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x4ED6;&#x4EEC;&#x53EF;&#x80FD;&#x542C;&#x8FC7;&#xFF0C;&#x53EF;&#x662F;&#x4ECE;&#x6765;&#x6CA1;&#x6709;&#x73A9;&#x8FC7;&#x3002;&#x4E3A;&#x4E86;&#x8BF4;&#x660E;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6709;&#x591A;&#x597D;&#x7528;&#xFF0C;&#x6211;&#x5148;&#x7528;Java&#x4EE3;&#x7801;&#x6765;&#x89E3;&#x91CA;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x5148;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x6CA1;&#x6709;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x7684;Java&#x4E16;&#x754C;&#x662F;&#x600E;&#x6837;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;class DBEngine {</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class CacheEngine {</span><br><span class="line">	</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class UserDB {</span><br><span class="line"></span><br><span class="line">	private DBEngine db;</span><br><span class="line">	private CacheEngine cache;</span><br><span class="line"></span><br><span class="line">	public UserDB(DBEngine db, CacheEngine cache) {</span><br><span class="line">		this.db = db;</span><br><span class="line">		this.cache = cache;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class ItemDB {</span><br><span class="line"></span><br><span class="line">	private DBEngine db;</span><br><span class="line">	private CacheEngine cache;</span><br><span class="line"></span><br><span class="line">	public ItemDB(DBEngine db, CacheEngine cache) {</span><br><span class="line">		this.db = db;</span><br><span class="line">		this.cache = cache;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class UserService {</span><br><span class="line"></span><br><span class="line">	private UserDB db;</span><br><span class="line"></span><br><span class="line">	public UserService(UserDB db) {</span><br><span class="line">		this.db = db;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class ItemService {</span><br><span class="line"></span><br><span class="line">	private ItemDB db;</span><br><span class="line"></span><br><span class="line">	public ItemService(ItemDB db) {</span><br><span class="line">		this.db = db;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class App {</span><br><span class="line"></span><br><span class="line">	private UserService user;</span><br><span class="line">	private ItemService item;</span><br><span class="line"></span><br><span class="line">	public App(UserService user, ItemService item) {</span><br><span class="line">		this.user = user;</span><br><span class="line">		this.item = item;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public class GuiceTest {</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) {</span><br><span class="line">		DBEngine db = new DBEngine();</span><br><span class="line">		CacheEngine cache = new CacheEngine();</span><br><span class="line">		UserDB userDB = new UserDB(db, cache);</span><br><span class="line">		ItemDB itemDB = new ItemDB(db, cache);</span><br><span class="line">		UserService userServ = new UserService(userDB);</span><br><span class="line">		ItemService itemServ = new ItemService(itemDB);</span><br><span class="line">		App app = new App(userServ, itemServ);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;main&#x65B9;&#x6CD5;&#x91CC;&#x9762;&#xFF0C;&#x6211;&#x4EEC;new&#x51FA;&#x6765;&#x5F88;&#x591A;&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x7528;&#x4ED6;&#x4EEC;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x9897;&#x4F9D;&#x8D56;&#x6811;&#x3002;&#x6211;&#x4EEC;&#x8FD8;&#x5199;&#x4E86;&#x5F88;&#x591A;&#x6784;&#x9020;&#x5668;&#xFF0C;&#x4E3A;&#x4E86;&#x80FD;&#x65B9;&#x4FBF;&#x7684;&#x6784;&#x9020;&#x51FA;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d2ae2b62ca8a28abb16409a8f0d9b0ee947bc154dc17036b53862f58a1231286" alt><br>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6846;&#x67B6;&#x6765;&#x6539;&#x9020;&#x5B83;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;class DBEngine {</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class CacheEngine {</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Singleton</span><br><span class="line">class UserDB {</span><br><span class="line"></span><br><span class="line">	@Inject</span><br><span class="line">	private DBEngine db;</span><br><span class="line">	@Inject</span><br><span class="line">	private CacheEngine cache;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Singleton</span><br><span class="line">class ItemDB {</span><br><span class="line">	@Inject</span><br><span class="line">	private DBEngine db;</span><br><span class="line">	@Inject</span><br><span class="line">	private CacheEngine cache;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Singleton</span><br><span class="line">class UserService {</span><br><span class="line"></span><br><span class="line">	@Inject</span><br><span class="line">	private UserDB db;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Singleton</span><br><span class="line">class ItemService {</span><br><span class="line"></span><br><span class="line">	@Inject</span><br><span class="line">	private ItemDB db;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Singleton</span><br><span class="line">class App {</span><br><span class="line"></span><br><span class="line">	@Inject</span><br><span class="line">	private UserService user;</span><br><span class="line">	@Inject</span><br><span class="line">	private ItemService item;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class AppModule extends AbstractModule {</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	protected void configure() {</span><br><span class="line">		DBEngine db = new DBEngine();</span><br><span class="line">		CacheEngine cache = new CacheEngine();</span><br><span class="line">		bind(DBEngine.class).toInstance(db);</span><br><span class="line">		bind(CacheEngine.class).toInstance(cache);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public class GuiceTest {</span><br><span class="line"></span><br><span class="line">	public static void main(String[] args) {</span><br><span class="line">		Injector injector = Guice.createInjector(new AppModule());</span><br><span class="line">		App app = injector.getInstance(App.class);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x5927;&#x5382;google&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6846;&#x67B6;Guice&#x3002;&#x6211;&#x4EEC;&#x53D1;&#x73B0;main&#x65B9;&#x6CD5;&#x7F29;&#x51CF;&#x4E86;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#xFF0C;&#x6240;&#x6709;&#x7684;new&#x64CD;&#x4F5C;&#x90FD;&#x4E0D;&#x89C1;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x8FD8;&#x53D1;&#x73B0;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x9020;&#x5668;&#x4E5F;&#x6D88;&#x5931;&#x4E86;&#xFF0C;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x7684;&#x662F;&#x591A;&#x4E86;&#x4E24;&#x4E2A;&#x6CE8;&#x89E3;@Singleton&#x548C;@Inject&#xFF0C;Singleton&#x8868;&#x793A;&#x7C7B;&#x662F;&#x5355;&#x4F8B;&#x7684;&#xFF0C;Inject&#x8868;&#x793A;&#x5F53;&#x524D;&#x5B57;&#x6BB5;&#x4F7F;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x81EA;&#x52A8;&#x8BBE;&#x7F6E;&#x3002;&#x597D;&#x5904;&#x4E0D;&#x7528;&#x591A;&#x8BF4;&#xFF0C;&#x4E00;&#x76EE;&#x4E86;&#x7136;&#xFF0C;&#x5C31;&#x662F;&#x5E2E;&#x6211;&#x4EEC;&#x8282;&#x7701;&#x4EE3;&#x7801;&#xFF0C;&#x7701;&#x53BB;&#x4E86;&#x5F88;&#x591A;&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x6784;&#x5EFA;&#x4E00;&#x7CFB;&#x5217;&#x5BF9;&#x8C61;&#x7684;&#x7EC6;&#x8282;&#x3002;&#x53E6;&#x5916;Guice&#x8FD8;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;Module&#xFF0C;&#x628A;&#x4F9D;&#x8D56;&#x6811;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x624B;&#x5DE5;&#x5B9E;&#x4F8B;&#x5316;&#x4E00;&#x4E0B;&#xFF0C;&#x53F6;&#x5B50;&#x7ED3;&#x70B9;&#x5BF9;&#x8C61;&#x5F80;&#x5F80;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#xFF0C;&#x800C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x6784;&#x9020;&#x3002;&#x5982;&#x679C;&#x628A;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x72B6;&#x6001;&#x6BD4;&#x55BB;&#x6210;&#x73B0;&#x5B9E;&#x7684;&#x7269;&#x7406;&#x4E16;&#x754C;&#xFF0C;&#x90A3;&#x4E48;Module&#x91CC;&#x9762;&#x5E72;&#x7684;&#x4E8B;&#x5C31;&#x662F;&#x5B87;&#x5B99;&#x5927;&#x7206;&#x70B8;&#xFF0C;&#x6240;&#x6709;&#x4E00;&#x5207;&#x5BF9;&#x8C61;&#x7684;&#x8F93;&#x5165;&#x6E90;&#x70B9;&#x3002;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x4EC5;&#x4EC5;&#x5E2E;&#x6211;&#x4EEC;&#x7701;&#x53BB;&#x4E86;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x6784;&#x5EFA;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x5728;&#x6211;&#x4EEC;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x8FD9;&#x68F5;&#x6811;&#x8FD8;&#x8C08;&#x4E0D;&#x4E0A;&#x590D;&#x6742;&#xFF0C;&#x6BD5;&#x7ADF;&#x8282;&#x70B9;&#x6570;&#x5F88;&#x6709;&#x9650;&#xFF0C;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x8FDE;&#x63A5;&#x4E5F;&#x5F88;&#x6709;&#x9650;&#x3002;&#x5728;&#x5927;&#x578B;&#x7684;&#x590D;&#x6742;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x5BF9;&#x8C61;&#x90A3;&#x5C31;&#x662F;&#x6210;&#x767E;&#x4E0A;&#x5343;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x5C31;&#x771F;&#x662F;&#x526A;&#x4E0D;&#x65AD;&#x7406;&#x8FD8;&#x4E71;&#x4E86;&#x3002;</p>
<p>&#x597D;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x8BF4;&#x8BF4;facebookgo&#x56E2;&#x961F;&#x5F00;&#x6E90;&#x7684;&#x8FD9;&#x4E2A;Inject&#x6846;&#x67B6;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x3002;&#x6211;&#x4EEC;&#x8FD8;&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x7528;golang &#x6539;&#x5199;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x6CA1;&#x6709;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x7684;Golang&#x4E16;&#x754C;&#x662F;&#x600E;&#x6837;&#x7684;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;type DBEngine struct{}</span><br><span class="line"></span><br><span class="line">func NewDBEngine() *DBEngine {</span><br><span class="line">	return &amp;DBEngine{}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type CacheEngine struct{}</span><br><span class="line"></span><br><span class="line">func NewCacheEngine() *CacheEngine {</span><br><span class="line">	return &amp;CacheEngine{}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type UserDB struct {</span><br><span class="line">	db    *DBEngine</span><br><span class="line">	cache *CacheEngine</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func NewUserDB(db *DBEngine, cache *CacheEngine) *UserDB {</span><br><span class="line">	return &amp;UserDB{db, cache}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type ItemDB struct {</span><br><span class="line">	db    *DBEngine</span><br><span class="line">	cache *CacheEngine</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func NewItemDB(db *DBEngine, cache *CacheEngine) *ItemDB {</span><br><span class="line">	return &amp;ItemDB{db, cache}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type UserService struct {</span><br><span class="line">	db *UserDB</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func NewUserService(db *UserDB) *UserService {</span><br><span class="line">	return &amp;UserService{db}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type ItemService struct {</span><br><span class="line">	db *ItemDB</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func NewItemService(db *ItemDB) *ItemService {</span><br><span class="line">	return &amp;ItemService{db}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type App struct {</span><br><span class="line">	user *UserService</span><br><span class="line">	item *ItemService</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func NewApp(user *UserService, item *ItemService) *App {</span><br><span class="line">	return &amp;App{user, item}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func main() {</span><br><span class="line">	db := NewDBEngine()</span><br><span class="line">	cache := NewCacheEngine()</span><br><span class="line">	userDB := NewUserDB(db, cache)</span><br><span class="line">	itemDB := NewItemDB(db, cache)</span><br><span class="line">	userServ := NewUserService(userDB)</span><br><span class="line">	itemServ := NewItemService(itemDB)</span><br><span class="line">	_ = NewApp(userServ, itemServ)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8DDF;Java&#x7248;&#x672C;&#x4E00;&#x6837;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x4E0D;&#x5C11;&#x6784;&#x9020;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x624B;&#x5DE5;&#x7EC4;&#x88C5;&#x4F9D;&#x8D56;&#x6811;&#x3002;</p>
<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x628A;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x6539;&#x9020;&#x6210;facebookgo&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x7248;&#x672C;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import &quot;github.com/facebookgo/inject&quot;</span><br><span class="line"></span><br><span class="line">type DBEngine struct{}</span><br><span class="line"></span><br><span class="line">func NewDBEngine() *DBEngine {</span><br><span class="line">	return &amp;DBEngine{}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type CacheEngine struct{}</span><br><span class="line"></span><br><span class="line">func NewCacheEngine() *CacheEngine {</span><br><span class="line">	return &amp;CacheEngine{}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type UserDB struct {</span><br><span class="line">	db    *DBEngine    `inject:&quot;&quot;`</span><br><span class="line">	cache *CacheEngine `inject:&quot;&quot;`</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type ItemDB struct {</span><br><span class="line">	db    *DBEngine    `inject:&quot;&quot;`</span><br><span class="line">	cache *CacheEngine `inject:&quot;&quot;`</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type UserService struct {</span><br><span class="line">	db *UserDB `inject:&quot;&quot;`</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type ItemService struct {</span><br><span class="line">	db *ItemDB `inject:&quot;&quot;`</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">type App struct {</span><br><span class="line">	user *UserService `inject:&quot;&quot;`</span><br><span class="line">	item *ItemService `inject:&quot;&quot;`</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">func main() {</span><br><span class="line">	db := NewDBEngine()</span><br><span class="line">	cache := NewCacheEngine()</span><br><span class="line">	var g inject.Graph</span><br><span class="line">	var app App</span><br><span class="line">	g.Provide(</span><br><span class="line">		&amp;inject.Object{Value: &amp;app},</span><br><span class="line">		&amp;inject.Object{Value: db},</span><br><span class="line">		&amp;inject.Object{Value: cache})</span><br><span class="line">	g.Populate()</span><br><span class="line">	// use app do something</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x8DDF;Java&#x7248;&#x672C;&#x4E5F;&#x5F88;&#x7C7B;&#x4F3C;&#xFF0C;&#x53EA;&#x662F;Module&#x7684;&#x5B9A;&#x4E49;&#x76F4;&#x63A5;&#x653E;&#x5728;&#x4E86;main&#x65B9;&#x6CD5;&#x91CC;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x7684;Provide&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#xFF0C;@Singleton&#x4E0D;&#x9700;&#x8981;&#x4E86;&#xFF0C;@Inject&#x53D8;&#x6210;&#x4E86;<code>inject:&quot;&quot;</code>&#x3002;&#x7136;&#x540E;&#x7528;Populate&#x65B9;&#x6CD5;&#x4E00;&#x6B21;&#x6027;&#x5C06;&#x6574;&#x4E2A;&#x4F9D;&#x8D56;&#x6811;&#x6784;&#x5EFA;&#x51FA;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E86;&#x3002;</p>
<p>&#x770B;&#x8FD9;&#x4E2A;&#x5F00;&#x6E90;&#x5E93;&#x7684;&#x6E90;&#x7801;&#x53D1;&#x73B0;&#xFF0C;&#x6574;&#x4E2A;&#x7C7B;&#x5E93;&#x7684;&#x5B9E;&#x73B0;&#x624D;500&#x591A;&#x884C;&#x4EE3;&#x7801;&#x3002;&#x8FD9;&#x662F;&#x591A;&#x4E48;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x4E00;&#x4E2A;&#x7C7B;&#x5E93;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x4EE3;&#x7801;&#x8FD9;&#x4E48;&#x77ED;&#xFF0C;&#x529F;&#x80FD;&#x4E5F;&#x4E0D;&#x4F1A;&#x592A;&#x591A;&#xFF0C;&#x76F8;&#x6BD4;Java&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x800C;&#x8A00;&#xFF0C;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x5C31;&#x5355;&#x4E00;&#x592A;&#x591A;&#x4E86;&#x3002;&#x4E0D;&#x8FC7;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x76F8;&#x6BD4;Guice&#x800C;&#x8A00;&#x8FD9;&#x4E9B;&#x7F3A;&#x5931;&#x7684;&#x529F;&#x80FD;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#xFF0C;&#x80FD;&#x5E2E;&#x6211;&#x4EEC;&#x7701;&#x6389;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x5B83;&#x5DF2;&#x7ECF;&#x505A;&#x5F97;&#x5F88;&#x597D;&#x4E86;&#xFF0C;&#x8FD9;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;&#x8981;&#x77E5;&#x9053;Java&#x91CC;&#x9762;&#x975E;&#x5E38;&#x5B8C;&#x5584;&#x7684;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x6846;&#x67B6;80%&#x7684;&#x4EE3;&#x7801;&#x90A3;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x90A3;20%&#x7684;&#x7279;&#x6B8A;&#x529F;&#x80FD;&#xFF0C;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x6240;&#x9700;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x662F;&#x975E;&#x5E38;&#x5C11;&#x7684;&#x3002;</p>
<p>&#x9605;&#x8BFB;&#x66F4;&#x591A;&#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x77E5;&#x4E4E;&#x4E13;&#x680F;&#x3010;&#x7801;&#x6D1E;&#x3011;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/f087b40ee0002fbe3d11576d7ea61cfa.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903544978407431.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903544978407431.html" itemprop="url">WebSocket：5分钟从入门到精通</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-05T01:58:19+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x963F;&#x91CC;&#x524D;&#x7AEF;&#x5B9E;&#x4E60;&#x6625;&#x62DB;# &#x963F;&#x91CC;CBU&#x6280;&#x672F;&#x90E8;&#x62DB;&#x524D;&#x7AEF;&#x5B9E;&#x4E60;&#x751F;&#x5566;&#xFF01;2023&#x5C4A;&#x7684;&#x540C;&#x5B66;&#x770B;&#x8FC7;&#x6765;&#xFF0C;&#x4E13;&#x4E1A;&#x8FC7;&#x5173;&#x3001;&#x524D;&#x7AEF;&#x57FA;&#x7840;&#x624E;&#x5B9E;&#x5373;&#x53EF;&#xFF0C;&#x4F4E;&#x4EE3;&#x7801;/&#x8DE8;&#x7AEF;/&#x76F4;&#x64AD;/VR/electron/nodejs &#xFF0C;&#x603B;&#x6709;&#x4E00;&#x6B3E;&#x9002;&#x5408;&#x4F60;! <a href="/external_links/5e086047e9fa9d8558605dd48a8a604e.html" target="blank" rel="noopener">&#x70B9;&#x51FB;&#x6295;&#x9012;&#x7B80;&#x5386;</a>)</p>
</blockquote>
<h2 id="&#x4E00;&#x3001;&#x5185;&#x5BB9;&#x6982;&#x89C8;"><a href="#&#x4E00;&#x3001;&#x5185;&#x5BB9;&#x6982;&#x89C8;" class="headerlink" title="&#x4E00;&#x3001;&#x5185;&#x5BB9;&#x6982;&#x89C8;"></a>&#x4E00;&#x3001;&#x5185;&#x5BB9;&#x6982;&#x89C8;</h2><p>WebSocket&#x7684;&#x51FA;&#x73B0;&#xFF0C;&#x4F7F;&#x5F97;&#x6D4F;&#x89C8;&#x5668;&#x5177;&#x5907;&#x4E86;&#x5B9E;&#x65F6;&#x53CC;&#x5411;&#x901A;&#x4FE1;&#x7684;&#x80FD;&#x529B;&#x3002;&#x672C;&#x6587;&#x7531;&#x6D45;&#x5165;&#x6DF1;&#xFF0C;&#x4ECB;&#x7ECD;&#x4E86;WebSocket&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x3001;&#x4EA4;&#x6362;&#x6570;&#x636E;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x5E27;&#x7684;&#x683C;&#x5F0F;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x8FD8;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;&#x4E86;&#x9488;&#x5BF9;WebSocket&#x7684;&#x5B89;&#x5168;&#x653B;&#x51FB;&#xFF0C;&#x4EE5;&#x53CA;&#x534F;&#x8BAE;&#x662F;&#x5982;&#x4F55;&#x62B5;&#x5FA1;&#x7C7B;&#x4F3C;&#x653B;&#x51FB;&#x7684;&#x3002;</p>
<h2 id="&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;WebSocket"><a href="#&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;WebSocket" class="headerlink" title="&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;WebSocket"></a>&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;WebSocket</h2><p>HTML5&#x5F00;&#x59CB;&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x79CD;&#x6D4F;&#x89C8;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x5168;&#x53CC;&#x5DE5;&#x901A;&#x8BAF;&#x7684;&#x7F51;&#x7EDC;&#x6280;&#x672F;&#xFF0C;&#x5C5E;&#x4E8E;&#x5E94;&#x7528;&#x5C42;&#x534F;&#x8BAE;&#x3002;&#x5B83;&#x57FA;&#x4E8E;TCP&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x590D;&#x7528;HTTP&#x7684;&#x63E1;&#x624B;&#x901A;&#x9053;&#x3002;</p>
<p>&#x5BF9;&#x5927;&#x90E8;&#x5206;web&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#xFF0C;&#x4E0A;&#x9762;&#x8FD9;&#x6BB5;&#x63CF;&#x8FF0;&#x6709;&#x70B9;&#x67AF;&#x71E5;&#xFF0C;&#x5176;&#x5B9E;&#x53EA;&#x8981;&#x8BB0;&#x4F4F;&#x51E0;&#x70B9;&#xFF1A;</p>
<ol>
<li>WebSocket&#x53EF;&#x4EE5;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x91CC;&#x4F7F;&#x7528;</li>
<li>&#x652F;&#x6301;&#x53CC;&#x5411;&#x901A;&#x4FE1;</li>
<li>&#x4F7F;&#x7528;&#x5F88;&#x7B80;&#x5355;</li>
</ol>
<h3 id="1&#x3001;&#x6709;&#x54EA;&#x4E9B;&#x4F18;&#x70B9;"><a href="#1&#x3001;&#x6709;&#x54EA;&#x4E9B;&#x4F18;&#x70B9;" class="headerlink" title="1&#x3001;&#x6709;&#x54EA;&#x4E9B;&#x4F18;&#x70B9;"></a>1&#x3001;&#x6709;&#x54EA;&#x4E9B;&#x4F18;&#x70B9;</h3><p>&#x8BF4;&#x5230;&#x4F18;&#x70B9;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5BF9;&#x6BD4;&#x53C2;&#x7167;&#x7269;&#x662F;HTTP&#x534F;&#x8BAE;&#xFF0C;&#x6982;&#x62EC;&#x5730;&#x8BF4;&#x5C31;&#x662F;&#xFF1A;&#x652F;&#x6301;&#x53CC;&#x5411;&#x901A;&#x4FE1;&#xFF0C;&#x66F4;&#x7075;&#x6D3B;&#xFF0C;&#x66F4;&#x9AD8;&#x6548;&#xFF0C;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x66F4;&#x597D;&#x3002;</p>
<ol>
<li>&#x652F;&#x6301;&#x53CC;&#x5411;&#x901A;&#x4FE1;&#xFF0C;&#x5B9E;&#x65F6;&#x6027;&#x66F4;&#x5F3A;&#x3002;</li>
<li>&#x66F4;&#x597D;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x652F;&#x6301;&#x3002;</li>
<li>&#x8F83;&#x5C11;&#x7684;&#x63A7;&#x5236;&#x5F00;&#x9500;&#x3002;&#x8FDE;&#x63A5;&#x521B;&#x5EFA;&#x540E;&#xFF0C;ws&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x65F6;&#xFF0C;&#x534F;&#x8BAE;&#x63A7;&#x5236;&#x7684;&#x6570;&#x636E;&#x5305;&#x5934;&#x90E8;&#x8F83;&#x5C0F;&#x3002;&#x5728;&#x4E0D;&#x5305;&#x542B;&#x5934;&#x90E8;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5305;&#x5934;&#x53EA;&#x6709;2~10&#x5B57;&#x8282;&#xFF08;&#x53D6;&#x51B3;&#x4E8E;&#x6570;&#x636E;&#x5305;&#x957F;&#x5EA6;&#xFF09;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x4E0A;&#x989D;&#x5916;&#x7684;4&#x5B57;&#x8282;&#x7684;&#x63A9;&#x7801;&#x3002;&#x800C;HTTP&#x534F;&#x8BAE;&#x6BCF;&#x6B21;&#x901A;&#x4FE1;&#x90FD;&#x9700;&#x8981;&#x643A;&#x5E26;&#x5B8C;&#x6574;&#x7684;&#x5934;&#x90E8;&#x3002;</li>
<li>&#x652F;&#x6301;&#x6269;&#x5C55;&#x3002;ws&#x534F;&#x8BAE;&#x5B9A;&#x4E49;&#x4E86;&#x6269;&#x5C55;&#xFF0C;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x534F;&#x8BAE;&#xFF0C;&#x6216;&#x8005;&#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5B50;&#x534F;&#x8BAE;&#x3002;&#xFF08;&#x6BD4;&#x5982;&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x538B;&#x7F29;&#x7B97;&#x6CD5;&#x7B49;&#xFF09;</li>
</ol>
<p>&#x5BF9;&#x4E8E;&#x540E;&#x9762;&#x4E24;&#x70B9;&#xFF0C;&#x6CA1;&#x6709;&#x7814;&#x7A76;&#x8FC7;WebSocket&#x534F;&#x8BAE;&#x89C4;&#x8303;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x80FD;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x4E0D;&#x591F;&#x76F4;&#x89C2;&#xFF0C;&#x4F46;&#x4E0D;&#x5F71;&#x54CD;&#x5BF9;WebSocket&#x7684;&#x5B66;&#x4E60;&#x548C;&#x4F7F;&#x7528;&#x3002;</p>
<h3 id="2&#x3001;&#x9700;&#x8981;&#x5B66;&#x4E60;&#x54EA;&#x4E9B;&#x4E1C;&#x897F;"><a href="#2&#x3001;&#x9700;&#x8981;&#x5B66;&#x4E60;&#x54EA;&#x4E9B;&#x4E1C;&#x897F;" class="headerlink" title="2&#x3001;&#x9700;&#x8981;&#x5B66;&#x4E60;&#x54EA;&#x4E9B;&#x4E1C;&#x897F;"></a>2&#x3001;&#x9700;&#x8981;&#x5B66;&#x4E60;&#x54EA;&#x4E9B;&#x4E1C;&#x897F;</h3><p>&#x5BF9;&#x7F51;&#x7EDC;&#x5E94;&#x7528;&#x5C42;&#x534F;&#x8BAE;&#x7684;&#x5B66;&#x4E60;&#x6765;&#x8BF4;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5F80;&#x5F80;&#x5C31;&#x662F;<strong>&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x8FC7;&#x7A0B;</strong>&#x3001;<strong>&#x6570;&#x636E;&#x4EA4;&#x6362;&#x6559;&#x7A0B;</strong>&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x6570;&#x636E;&#x7684;&#x683C;&#x5F0F;&#x662F;&#x9003;&#x4E0D;&#x6389;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x76F4;&#x63A5;&#x51B3;&#x5B9A;&#x4E86;&#x534F;&#x8BAE;&#x672C;&#x8EAB;&#x7684;&#x80FD;&#x529B;&#x3002;&#x597D;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x80FD;&#x8BA9;&#x534F;&#x8BAE;&#x66F4;&#x9AD8;&#x6548;&#x3001;&#x6269;&#x5C55;&#x6027;&#x66F4;&#x597D;&#x3002;</p>
<p>&#x4E0B;&#x6587;&#x4E3B;&#x8981;&#x56F4;&#x7ED5;&#x4E0B;&#x9762;&#x51E0;&#x70B9;&#x5C55;&#x5F00;&#xFF1A;</p>
<ol>
<li>&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</li>
<li>&#x5982;&#x4F55;&#x4EA4;&#x6362;&#x6570;&#x636E;</li>
<li>&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;</li>
<li>&#x5982;&#x4F55;&#x7EF4;&#x6301;&#x8FDE;&#x63A5;</li>
</ol>
<h2 id="&#x4E09;&#x3001;&#x5165;&#x95E8;&#x4F8B;&#x5B50;"><a href="#&#x4E09;&#x3001;&#x5165;&#x95E8;&#x4F8B;&#x5B50;" class="headerlink" title="&#x4E09;&#x3001;&#x5165;&#x95E8;&#x4F8B;&#x5B50;"></a>&#x4E09;&#x3001;&#x5165;&#x95E8;&#x4F8B;&#x5B50;</h2><p>&#x5728;&#x6B63;&#x5F0F;&#x4ECB;&#x7ECD;&#x534F;&#x8BAE;&#x7EC6;&#x8282;&#x524D;&#xFF0C;&#x5148;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x6709;&#x4E2A;&#x76F4;&#x89C2;&#x611F;&#x53D7;&#x3002;&#x4F8B;&#x5B50;&#x5305;&#x62EC;&#x4E86;WebSocket&#x670D;&#x52A1;&#x7AEF;&#x3001;WebSocket&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x7F51;&#x9875;&#x7AEF;&#xFF09;&#x3002;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5728; <a href="/external_links/a8a0399bf45ad0f886a48faa26767f3c.html" target="blank" rel="noopener">&#x8FD9;&#x91CC;</a> &#x627E;&#x5230;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x670D;&#x52A1;&#x7AEF;&#x7528;&#x4E86;<code>ws</code>&#x8FD9;&#x4E2A;&#x5E93;&#x3002;&#x76F8;&#x6BD4;&#x5927;&#x5BB6;&#x719F;&#x6089;&#x7684;<code>socket.io</code>&#xFF0C;<code>ws</code>&#x5B9E;&#x73B0;&#x66F4;&#x8F7B;&#x91CF;&#xFF0C;&#x66F4;&#x9002;&#x5408;&#x5B66;&#x4E60;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<h3 id="1&#x3001;&#x670D;&#x52A1;&#x7AEF;"><a href="#1&#x3001;&#x670D;&#x52A1;&#x7AEF;" class="headerlink" title="1&#x3001;&#x670D;&#x52A1;&#x7AEF;"></a>1&#x3001;&#x670D;&#x52A1;&#x7AEF;</h3><p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF0C;&#x76D1;&#x542C;8080&#x7AEF;&#x53E3;&#x3002;&#x5F53;&#x6709;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x5230;&#x8FBE;&#x65F6;&#xFF0C;&#x6253;&#x5370;&#x65E5;&#x5FD7;&#xFF0C;&#x540C;&#x65F6;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x3002;&#x5F53;&#x6536;&#x5230;&#x5230;&#x6765;&#x81EA;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6D88;&#x606F;&#x65F6;&#xFF0C;&#x540C;&#x6837;&#x6253;&#x5370;&#x65E5;&#x5FD7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;var app = require(&apos;express&apos;)();</span><br><span class="line">var server = require(&apos;http&apos;).Server(app);</span><br><span class="line">var WebSocket = require(&apos;ws&apos;);</span><br><span class="line"></span><br><span class="line">var wss = new WebSocket.Server({ port: 8080 });</span><br><span class="line"></span><br><span class="line">wss.on(&apos;connection&apos;, function connection(ws) {</span><br><span class="line">    console.log(&apos;server: receive connection.&apos;);</span><br><span class="line">    </span><br><span class="line">    ws.on(&apos;message&apos;, function incoming(message) {</span><br><span class="line">        console.log(&apos;server: received: %s&apos;, message);</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    ws.send(&apos;world&apos;);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">app.get(&apos;/&apos;, function (req, res) {</span><br><span class="line">  res.sendfile(__dirname + &apos;/index.html&apos;);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">app.listen(3000);</span><br></pre></td></tr></table></figure>

<h3 id="2&#x3001;&#x5BA2;&#x6237;&#x7AEF;"><a href="#2&#x3001;&#x5BA2;&#x6237;&#x7AEF;" class="headerlink" title="2&#x3001;&#x5BA2;&#x6237;&#x7AEF;"></a>2&#x3001;&#x5BA2;&#x6237;&#x7AEF;</h3><p>&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF0C;&#x5411;8080&#x7AEF;&#x53E3;&#x53D1;&#x8D77;WebSocket&#x8FDE;&#x63A5;&#x3002;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x540E;&#xFF0C;&#x6253;&#x5370;&#x65E5;&#x5FD7;&#xFF0C;&#x540C;&#x65F6;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x3002;&#x63A5;&#x6536;&#x5230;&#x6765;&#x81EA;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x540C;&#x6837;&#x6253;&#x5370;&#x65E5;&#x5FD7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">htmlbars&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;script&gt;</span><br><span class="line">  var ws = new WebSocket(&apos;ws://localhost:8080&apos;);</span><br><span class="line">  ws.onopen = function () {</span><br><span class="line">    console.log(&apos;ws onopen&apos;);</span><br><span class="line">    ws.send(&apos;from client: hello&apos;);</span><br><span class="line">  };</span><br><span class="line">  ws.onmessage = function (e) {</span><br><span class="line">    console.log(&apos;ws onmessage&apos;);</span><br><span class="line">    console.log(&apos;from server: &apos; + e.data);</span><br><span class="line">  };</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3&#x3001;&#x8FD0;&#x884C;&#x7ED3;&#x679C;"><a href="#3&#x3001;&#x8FD0;&#x884C;&#x7ED3;&#x679C;" class="headerlink" title="3&#x3001;&#x8FD0;&#x884C;&#x7ED3;&#x679C;"></a>3&#x3001;&#x8FD0;&#x884C;&#x7ED3;&#x679C;</h3><p>&#x53EF;&#x5206;&#x522B;&#x67E5;&#x770B;&#x670D;&#x52A1;&#x7AEF;&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x5C55;&#x5F00;&#x3002;</p>
<p>&#x670D;&#x52A1;&#x7AEF;&#x8F93;&#x51FA;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;server: receive connection.</span><br><span class="line">server: received hello</span><br></pre></td></tr></table></figure>

<p>&#x5BA2;&#x6237;&#x7AEF;&#x8F93;&#x51FA;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;client: ws connection is open</span><br><span class="line">client: received world</span><br></pre></td></tr></table></figure>

<h2 id="&#x56DB;&#x3001;&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;"><a href="#&#x56DB;&#x3001;&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;" class="headerlink" title="&#x56DB;&#x3001;&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;"></a>&#x56DB;&#x3001;&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;</h2><p>&#x524D;&#x9762;&#x63D0;&#x5230;&#xFF0C;WebSocket&#x590D;&#x7528;&#x4E86;HTTP&#x7684;&#x63E1;&#x624B;&#x901A;&#x9053;&#x3002;&#x5177;&#x4F53;&#x6307;&#x7684;&#x662F;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;HTTP&#x8BF7;&#x6C42;&#x4E0E;WebSocket&#x670D;&#x52A1;&#x7AEF;&#x534F;&#x5546;&#x5347;&#x7EA7;&#x534F;&#x8BAE;&#x3002;&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x5219;&#x9075;&#x7167;WebSocket&#x7684;&#x534F;&#x8BAE;&#x3002;</p>
<h3 id="1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;&#x7533;&#x8BF7;&#x534F;&#x8BAE;&#x5347;&#x7EA7;"><a href="#1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;&#x7533;&#x8BF7;&#x534F;&#x8BAE;&#x5347;&#x7EA7;" class="headerlink" title="1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;&#x7533;&#x8BF7;&#x534F;&#x8BAE;&#x5347;&#x7EA7;"></a>1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;&#x7533;&#x8BF7;&#x534F;&#x8BAE;&#x5347;&#x7EA7;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#x8BF7;&#x6C42;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x91C7;&#x7528;&#x7684;&#x662F;&#x6807;&#x51C6;&#x7684;HTTP&#x62A5;&#x6587;&#x683C;&#x5F0F;&#xFF0C;&#x4E14;&#x53EA;&#x652F;&#x6301;<code>GET</code>&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">http&#x590D;&#x5236;&#x4EE3;&#x7801;GET / HTTP/1.1</span><br><span class="line">Host: localhost:8080</span><br><span class="line">Origin: http://127.0.0.1:3000</span><br><span class="line">Connection: Upgrade</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Sec-WebSocket-Version: 13</span><br><span class="line">Sec-WebSocket-Key: w4v7O6xFTi36lq3RNcgctw==</span><br></pre></td></tr></table></figure>

<p>&#x91CD;&#x70B9;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x610F;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li><code>Connection: Upgrade</code>&#xFF1A;&#x8868;&#x793A;&#x8981;&#x5347;&#x7EA7;&#x534F;&#x8BAE;</li>
<li><code>Upgrade: websocket</code>&#xFF1A;&#x8868;&#x793A;&#x8981;&#x5347;&#x7EA7;&#x5230;websocket&#x534F;&#x8BAE;&#x3002;</li>
<li><code>Sec-WebSocket-Version: 13</code>&#xFF1A;&#x8868;&#x793A;websocket&#x7684;&#x7248;&#x672C;&#x3002;&#x5982;&#x679C;&#x670D;&#x52A1;&#x7AEF;&#x4E0D;&#x652F;&#x6301;&#x8BE5;&#x7248;&#x672C;&#xFF0C;&#x9700;&#x8981;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>Sec-WebSocket-Version</code>header&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x670D;&#x52A1;&#x7AEF;&#x652F;&#x6301;&#x7684;&#x7248;&#x672C;&#x53F7;&#x3002;</li>
<li><code>Sec-WebSocket-Key</code>&#xFF1A;&#x4E0E;&#x540E;&#x9762;&#x670D;&#x52A1;&#x7AEF;&#x54CD;&#x5E94;&#x9996;&#x90E8;&#x7684;<code>Sec-WebSocket-Accept</code>&#x662F;&#x914D;&#x5957;&#x7684;&#xFF0C;&#x63D0;&#x4F9B;&#x57FA;&#x672C;&#x7684;&#x9632;&#x62A4;&#xFF0C;&#x6BD4;&#x5982;&#x6076;&#x610F;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x6216;&#x8005;&#x65E0;&#x610F;&#x7684;&#x8FDE;&#x63A5;&#x3002;</li>
</ul>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x4E0A;&#x9762;&#x8BF7;&#x6C42;&#x7701;&#x7565;&#x4E86;&#x90E8;&#x5206;&#x975E;&#x91CD;&#x70B9;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x3002;&#x7531;&#x4E8E;&#x662F;&#x6807;&#x51C6;&#x7684;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x7C7B;&#x4F3C;Host&#x3001;Origin&#x3001;Cookie&#x7B49;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x4F1A;&#x7167;&#x5E38;&#x53D1;&#x9001;&#x3002;&#x5728;&#x63E1;&#x624B;&#x9636;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x76F8;&#x5173;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x8FDB;&#x884C; &#x5B89;&#x5168;&#x9650;&#x5236;&#x3001;&#x6743;&#x9650;&#x6821;&#x9A8C;&#x7B49;&#x3002;</p>
</blockquote>
<h3 id="2&#x3001;&#x670D;&#x52A1;&#x7AEF;&#xFF1A;&#x54CD;&#x5E94;&#x534F;&#x8BAE;&#x5347;&#x7EA7;"><a href="#2&#x3001;&#x670D;&#x52A1;&#x7AEF;&#xFF1A;&#x54CD;&#x5E94;&#x534F;&#x8BAE;&#x5347;&#x7EA7;" class="headerlink" title="2&#x3001;&#x670D;&#x52A1;&#x7AEF;&#xFF1A;&#x54CD;&#x5E94;&#x534F;&#x8BAE;&#x5347;&#x7EA7;"></a>2&#x3001;&#x670D;&#x52A1;&#x7AEF;&#xFF1A;&#x54CD;&#x5E94;&#x534F;&#x8BAE;&#x5347;&#x7EA7;</h3><p>&#x670D;&#x52A1;&#x7AEF;&#x8FD4;&#x56DE;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF0C;&#x72B6;&#x6001;&#x4EE3;&#x7801;<code>101</code>&#x8868;&#x793A;&#x534F;&#x8BAE;&#x5207;&#x6362;&#x3002;&#x5230;&#x6B64;&#x5B8C;&#x6210;&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#x90FD;&#x6309;&#x7167;&#x65B0;&#x7684;&#x534F;&#x8BAE;&#x6765;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http&#x590D;&#x5236;&#x4EE3;&#x7801;HTTP/1.1 101 Switching Protocols</span><br><span class="line">Connection:Upgrade</span><br><span class="line">Upgrade: websocket</span><br><span class="line">Sec-WebSocket-Accept: Oy4NRAQ13jhfONC7bP8dTKb4PTU=</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x5907;&#x6CE8;&#xFF1A;&#x6BCF;&#x4E2A;header&#x90FD;&#x4EE5;<code>\r\n</code>&#x7ED3;&#x5C3E;&#xFF0C;&#x5E76;&#x4E14;&#x6700;&#x540E;&#x4E00;&#x884C;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x7A7A;&#x884C;<code>\r\n</code>&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x56DE;&#x5E94;&#x7684;HTTP&#x72B6;&#x6001;&#x7801;&#x53EA;&#x80FD;&#x5728;&#x63E1;&#x624B;&#x9636;&#x6BB5;&#x4F7F;&#x7528;&#x3002;&#x8FC7;&#x4E86;&#x63E1;&#x624B;&#x9636;&#x6BB5;&#x540E;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x91C7;&#x7528;&#x7279;&#x5B9A;&#x7684;&#x9519;&#x8BEF;&#x7801;&#x3002;</p>
</blockquote>
<h3 id="3&#x3001;Sec-WebSocket-Accept&#x7684;&#x8BA1;&#x7B97;"><a href="#3&#x3001;Sec-WebSocket-Accept&#x7684;&#x8BA1;&#x7B97;" class="headerlink" title="3&#x3001;Sec-WebSocket-Accept&#x7684;&#x8BA1;&#x7B97;"></a>3&#x3001;Sec-WebSocket-Accept&#x7684;&#x8BA1;&#x7B97;</h3><p><code>Sec-WebSocket-Accept</code>&#x6839;&#x636E;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x9996;&#x90E8;&#x7684;<code>Sec-WebSocket-Key</code>&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x3002;</p>
<p>&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x4E3A;&#xFF1A;</p>
<ol>
<li>&#x5C06;<code>Sec-WebSocket-Key</code>&#x8DDF;<code>258EAFA5-E914-47DA-95CA-C5AB0DC85B11</code>&#x62FC;&#x63A5;&#x3002;</li>
<li>&#x901A;&#x8FC7;SHA1&#x8BA1;&#x7B97;&#x51FA;&#x6458;&#x8981;&#xFF0C;&#x5E76;&#x8F6C;&#x6210;base64&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
</ol>
<p>&#x4F2A;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;&gt;toBase64( sha1( Sec-WebSocket-Key + 258EAFA5-E914-47DA-95CA-C5AB0DC85B11 )  )</span><br></pre></td></tr></table></figure>

<p>&#x9A8C;&#x8BC1;&#x4E0B;&#x524D;&#x9762;&#x7684;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;const crypto = require(&apos;crypto&apos;);</span><br><span class="line">const magic = &apos;258EAFA5-E914-47DA-95CA-C5AB0DC85B11&apos;;</span><br><span class="line">const secWebSocketKey = &apos;w4v7O6xFTi36lq3RNcgctw==&apos;;</span><br><span class="line"></span><br><span class="line">let secWebSocketAccept = crypto.createHash(&apos;sha1&apos;)</span><br><span class="line">	.update(secWebSocketKey + magic)</span><br><span class="line">	.digest(&apos;base64&apos;);</span><br><span class="line"></span><br><span class="line">console.log(secWebSocketAccept);</span><br><span class="line">// Oy4NRAQ13jhfONC7bP8dTKb4PTU=</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E94;&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;"><a href="#&#x4E94;&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;" class="headerlink" title="&#x4E94;&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;"></a>&#x4E94;&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;</h2><p>&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x6570;&#x636E;&#x7684;&#x4EA4;&#x6362;&#xFF0C;&#x79BB;&#x4E0D;&#x5F00;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x7684;&#x5B9A;&#x4E49;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x8BB2;&#x89E3;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x4E0B;WebSocket&#x7684;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x3002;</p>
<p>WebSocket&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x901A;&#x4FE1;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x4F4D;&#x662F;&#x5E27;&#xFF08;frame&#xFF09;&#xFF0C;&#x7531;1&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x5E27;&#x7EC4;&#x6210;&#x4E00;&#x6761;&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#xFF08;message&#xFF09;&#x3002;</p>
<ol>
<li>&#x53D1;&#x9001;&#x7AEF;&#xFF1A;&#x5C06;&#x6D88;&#x606F;&#x5207;&#x5272;&#x6210;&#x591A;&#x4E2A;&#x5E27;&#xFF0C;&#x5E76;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x7AEF;&#xFF1B;</li>
<li>&#x63A5;&#x6536;&#x7AEF;&#xFF1A;&#x63A5;&#x6536;&#x6D88;&#x606F;&#x5E27;&#xFF0C;&#x5E76;&#x5C06;&#x5173;&#x8054;&#x7684;&#x5E27;&#x91CD;&#x65B0;&#x7EC4;&#x88C5;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#xFF1B;</li>
</ol>
<p>&#x672C;&#x8282;&#x7684;&#x91CD;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x8BB2;&#x89E3;<strong>&#x6570;&#x636E;&#x5E27;</strong>&#x7684;&#x683C;&#x5F0F;&#x3002;&#x8BE6;&#x7EC6;&#x5B9A;&#x4E49;&#x53EF;&#x53C2;&#x8003; <a href="/external_links/8f23ec0857e45dc91c34807ab55e8659.html" target="blank" rel="noopener">RFC6455 5.2&#x8282;</a> &#x3002;</p>
<h3 id="1&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x6982;&#x89C8;"><a href="#1&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x6982;&#x89C8;" class="headerlink" title="1&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x6982;&#x89C8;"></a>1&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x6982;&#x89C8;</h3><p>&#x4E0B;&#x9762;&#x7ED9;&#x51FA;&#x4E86;WebSocket&#x6570;&#x636E;&#x5E27;&#x7684;&#x7EDF;&#x4E00;&#x683C;&#x5F0F;&#x3002;&#x719F;&#x6089;TCP/IP&#x534F;&#x8BAE;&#x7684;&#x540C;&#x5B66;&#x5BF9;&#x8FD9;&#x6837;&#x7684;&#x56FE;&#x5E94;&#x8BE5;&#x4E0D;&#x964C;&#x751F;&#x3002;</p>
<ol>
<li>&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x6BD4;&#x7279;&#x3002;&#x6BD4;&#x5982;<code>FIN</code>&#x3001;<code>RSV1</code>&#x5404;&#x5360;&#x636E;1&#x6BD4;&#x7279;&#xFF0C;<code>opcode</code>&#x5360;&#x636E;4&#x6BD4;&#x7279;&#x3002;</li>
<li>&#x5185;&#x5BB9;&#x5305;&#x62EC;&#x4E86;&#x6807;&#x8BC6;&#x3001;&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#x3001;&#x63A9;&#x7801;&#x3001;&#x6570;&#x636E;&#x3001;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x7B49;&#x3002;&#xFF08;&#x4E0B;&#x4E00;&#x5C0F;&#x8282;&#x4F1A;&#x5C55;&#x5F00;&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">lua&#x590D;&#x5236;&#x4EE3;&#x7801;  0                   1                   2                   3</span><br><span class="line">  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1</span><br><span class="line"> +-+-+-+-+-------+-+-------------+-------------------------------+</span><br><span class="line"> |F|R|R|R| opcode|M| Payload len |    Extended payload length    |</span><br><span class="line"> |I|S|S|S|  (4)  |A|     (7)     |             (16/64)           |</span><br><span class="line"> |N|V|V|V|       |S|             |   (if payload len==126/127)   |</span><br><span class="line"> | |1|2|3|       |K|             |                               |</span><br><span class="line"> +-+-+-+-+-------+-+-------------+ - - - - - - - - - - - - - - - +</span><br><span class="line"> |     Extended payload length continued, if payload len == 127  |</span><br><span class="line"> + - - - - - - - - - - - - - - - +-------------------------------+</span><br><span class="line"> |                               |Masking-key, if MASK set to 1  |</span><br><span class="line"> +-------------------------------+-------------------------------+</span><br><span class="line"> | Masking-key (continued)       |          Payload Data         |</span><br><span class="line"> +-------------------------------- - - - - - - - - - - - - - - - +</span><br><span class="line"> :                     Payload Data continued ...                :</span><br><span class="line"> + - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - +</span><br><span class="line"> |                     Payload Data continued ...                |</span><br><span class="line"> +---------------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="2&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x8BE6;&#x89E3;"><a href="#2&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x8BE6;&#x89E3;" class="headerlink" title="2&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x8BE6;&#x89E3;"></a>2&#x3001;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;&#x8BE6;&#x89E3;</h3><p>&#x9488;&#x5BF9;&#x524D;&#x9762;&#x7684;&#x683C;&#x5F0F;&#x6982;&#x89C8;&#x56FE;&#xFF0C;&#x8FD9;&#x91CC;&#x9010;&#x4E2A;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x8BB2;&#x89E3;&#xFF0C;&#x5982;&#x6709;&#x4E0D;&#x6E05;&#x695A;&#x4E4B;&#x5904;&#xFF0C;&#x53EF;&#x53C2;&#x8003;&#x534F;&#x8BAE;&#x89C4;&#x8303;&#xFF0C;&#x6216;&#x7559;&#x8A00;&#x4EA4;&#x6D41;&#x3002;</p>
<p><strong>FIN</strong>&#xFF1A;1&#x4E2A;&#x6BD4;&#x7279;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;1&#xFF0C;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x6D88;&#x606F;&#xFF08;message&#xFF09;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5206;&#x7247;&#xFF08;fragment&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x662F;0&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x662F;&#x662F;&#x6D88;&#x606F;&#xFF08;message&#xFF09;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5206;&#x7247;&#xFF08;fragment&#xFF09;&#x3002;</p>
<p><strong>RSV1, RSV2, RSV3</strong>&#xFF1A;&#x5404;&#x5360;1&#x4E2A;&#x6BD4;&#x7279;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x5168;&#x4E3A;0&#x3002;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x534F;&#x5546;&#x91C7;&#x7528;WebSocket&#x6269;&#x5C55;&#x65F6;&#xFF0C;&#x8FD9;&#x4E09;&#x4E2A;&#x6807;&#x5FD7;&#x4F4D;&#x53EF;&#x4EE5;&#x975E;0&#xFF0C;&#x4E14;&#x503C;&#x7684;&#x542B;&#x4E49;&#x7531;&#x6269;&#x5C55;&#x8FDB;&#x884C;&#x5B9A;&#x4E49;&#x3002;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x975E;&#x96F6;&#x7684;&#x503C;&#xFF0C;&#x4E14;&#x5E76;&#x6CA1;&#x6709;&#x91C7;&#x7528;WebSocket&#x6269;&#x5C55;&#xFF0C;&#x8FDE;&#x63A5;&#x51FA;&#x9519;&#x3002;</p>
<p><strong>Opcode</strong>: 4&#x4E2A;&#x6BD4;&#x7279;&#x3002;</p>
<p>&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#xFF0C;Opcode&#x7684;&#x503C;&#x51B3;&#x5B9A;&#x4E86;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x89E3;&#x6790;&#x540E;&#x7EED;&#x7684;&#x6570;&#x636E;&#x8F7D;&#x8377;&#xFF08;data payload&#xFF09;&#x3002;&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#x662F;&#x4E0D;&#x8BA4;&#x8BC6;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x63A5;&#x6536;&#x7AEF;&#x5E94;&#x8BE5;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF08;fail the connection&#xFF09;&#x3002;&#x53EF;&#x9009;&#x7684;&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>%x0&#xFF1A;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5EF6;&#x7EED;&#x5E27;&#x3002;&#x5F53;Opcode&#x4E3A;0&#x65F6;&#xFF0C;&#x8868;&#x793A;&#x672C;&#x6B21;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x91C7;&#x7528;&#x4E86;&#x6570;&#x636E;&#x5206;&#x7247;&#xFF0C;&#x5F53;&#x524D;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x5E27;&#x4E3A;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5206;&#x7247;&#x3002;</li>
<li>%x1&#xFF1A;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x5E27;&#xFF08;frame&#xFF09;</li>
<li>%x2&#xFF1A;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x5E27;&#xFF08;frame&#xFF09;</li>
<li>%x3-7&#xFF1A;&#x4FDD;&#x7559;&#x7684;&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#xFF0C;&#x7528;&#x4E8E;&#x540E;&#x7EED;&#x5B9A;&#x4E49;&#x7684;&#x975E;&#x63A7;&#x5236;&#x5E27;&#x3002;</li>
<li>%x8&#xFF1A;&#x8868;&#x793A;&#x8FDE;&#x63A5;&#x65AD;&#x5F00;&#x3002;</li>
<li>%x9&#xFF1A;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;ping&#x64CD;&#x4F5C;&#x3002;</li>
<li>%xA&#xFF1A;&#x8868;&#x793A;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;pong&#x64CD;&#x4F5C;&#x3002;</li>
<li>%xB-F&#xFF1A;&#x4FDD;&#x7559;&#x7684;&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#xFF0C;&#x7528;&#x4E8E;&#x540E;&#x7EED;&#x5B9A;&#x4E49;&#x7684;&#x63A7;&#x5236;&#x5E27;&#x3002;</li>
</ul>
<p><strong>Mask</strong>: 1&#x4E2A;&#x6BD4;&#x7279;&#x3002;</p>
<p>&#x8868;&#x793A;&#x662F;&#x5426;&#x8981;&#x5BF9;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x8FDB;&#x884C;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#x3002;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#xFF1B;&#x4ECE;&#x670D;&#x52A1;&#x7AEF;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x670D;&#x52A1;&#x7AEF;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x8FC7;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x9700;&#x8981;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x3002;</p>
<p>&#x5982;&#x679C;Mask&#x662F;1&#xFF0C;&#x90A3;&#x4E48;&#x5728;Masking-key&#x4E2D;&#x4F1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A9;&#x7801;&#x952E;&#xFF08;masking key&#xFF09;&#xFF0C;&#x5E76;&#x7528;&#x8FD9;&#x4E2A;&#x63A9;&#x7801;&#x952E;&#x6765;&#x5BF9;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x8FDB;&#x884C;&#x53CD;&#x63A9;&#x7801;&#x3002;&#x6240;&#x6709;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5E27;&#xFF0C;Mask&#x90FD;&#x662F;1&#x3002;</p>
<p>&#x63A9;&#x7801;&#x7684;&#x7B97;&#x6CD5;&#x3001;&#x7528;&#x9014;&#x5728;&#x4E0B;&#x4E00;&#x5C0F;&#x8282;&#x8BB2;&#x89E3;&#x3002;</p>
<p><strong>Payload length</strong>&#xFF1A;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x5B57;&#x8282;&#x3002;&#x4E3A;7&#x4F4D;&#xFF0C;&#x6216;7+16&#x4F4D;&#xFF0C;&#x6216;1+64&#x4F4D;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6570;Payload length === x&#xFF0C;&#x5982;&#x679C;</p>
<ul>
<li>x&#x4E3A;0~126&#xFF1A;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x4E3A;x&#x5B57;&#x8282;&#x3002;</li>
<li>x&#x4E3A;126&#xFF1A;&#x540E;&#x7EED;2&#x4E2A;&#x5B57;&#x8282;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;16&#x4F4D;&#x7684;&#x65E0;&#x7B26;&#x53F7;&#x6574;&#x6570;&#xFF0C;&#x8BE5;&#x65E0;&#x7B26;&#x53F7;&#x6574;&#x6570;&#x7684;&#x503C;&#x4E3A;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x3002;</li>
<li>x&#x4E3A;127&#xFF1A;&#x540E;&#x7EED;8&#x4E2A;&#x5B57;&#x8282;&#x4EE3;&#x8868;&#x4E00;&#x4E2A;64&#x4F4D;&#x7684;&#x65E0;&#x7B26;&#x53F7;&#x6574;&#x6570;&#xFF08;&#x6700;&#x9AD8;&#x4F4D;&#x4E3A;0&#xFF09;&#xFF0C;&#x8BE5;&#x65E0;&#x7B26;&#x53F7;&#x6574;&#x6570;&#x7684;&#x503C;&#x4E3A;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x3002;</li>
</ul>
<p>&#x6B64;&#x5916;&#xFF0C;&#x5982;&#x679C;payload length&#x5360;&#x7528;&#x4E86;&#x591A;&#x4E2A;&#x5B57;&#x8282;&#x7684;&#x8BDD;&#xFF0C;payload length&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x8868;&#x8FBE;&#x91C7;&#x7528;&#x7F51;&#x7EDC;&#x5E8F;&#xFF08;big endian&#xFF0C;&#x91CD;&#x8981;&#x7684;&#x4F4D;&#x5728;&#x524D;&#xFF09;&#x3002;</p>
<p><strong>Masking-key</strong>&#xFF1A;0&#x6216;4&#x5B57;&#x8282;&#xFF08;32&#x4F4D;&#xFF09;</p>
<p>&#x6240;&#x6709;&#x4ECE;&#x5BA2;&#x6237;&#x7AEF;&#x4F20;&#x9001;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x6570;&#x636E;&#x5E27;&#xFF0C;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x90FD;&#x8FDB;&#x884C;&#x4E86;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#xFF0C;Mask&#x4E3A;1&#xFF0C;&#x4E14;&#x643A;&#x5E26;&#x4E86;4&#x5B57;&#x8282;&#x7684;Masking-key&#x3002;&#x5982;&#x679C;Mask&#x4E3A;0&#xFF0C;&#x5219;&#x6CA1;&#x6709;Masking-key&#x3002;</p>
<p>&#x5907;&#x6CE8;&#xFF1A;&#x8F7D;&#x8377;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;mask key&#x7684;&#x957F;&#x5EA6;&#x3002;</p>
<p><strong>Payload data</strong>&#xFF1A;(x+y) &#x5B57;&#x8282;</p>
<p>&#x8F7D;&#x8377;&#x6570;&#x636E;&#xFF1A;&#x5305;&#x62EC;&#x4E86;&#x6269;&#x5C55;&#x6570;&#x636E;&#x3001;&#x5E94;&#x7528;&#x6570;&#x636E;&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x6269;&#x5C55;&#x6570;&#x636E;x&#x5B57;&#x8282;&#xFF0C;&#x5E94;&#x7528;&#x6570;&#x636E;y&#x5B57;&#x8282;&#x3002;</p>
<p>&#x6269;&#x5C55;&#x6570;&#x636E;&#xFF1A;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x534F;&#x5546;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x7684;&#x8BDD;&#xFF0C;&#x6269;&#x5C55;&#x6570;&#x636E;&#x6570;&#x636E;&#x4E3A;0&#x5B57;&#x8282;&#x3002;&#x6240;&#x6709;&#x7684;&#x6269;&#x5C55;&#x90FD;&#x5FC5;&#x987B;&#x58F0;&#x660E;&#x6269;&#x5C55;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x6216;&#x8005;&#x53EF;&#x4EE5;&#x5982;&#x4F55;&#x8BA1;&#x7B97;&#x51FA;&#x6269;&#x5C55;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6269;&#x5C55;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5FC5;&#x987B;&#x5728;&#x63E1;&#x624B;&#x9636;&#x6BB5;&#x5C31;&#x534F;&#x5546;&#x597D;&#x3002;&#x5982;&#x679C;&#x6269;&#x5C55;&#x6570;&#x636E;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x8F7D;&#x8377;&#x6570;&#x636E;&#x957F;&#x5EA6;&#x5FC5;&#x987B;&#x5C06;&#x6269;&#x5C55;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x5305;&#x542B;&#x5728;&#x5185;&#x3002;</p>
<p>&#x5E94;&#x7528;&#x6570;&#x636E;&#xFF1A;&#x4EFB;&#x610F;&#x7684;&#x5E94;&#x7528;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x6269;&#x5C55;&#x6570;&#x636E;&#x4E4B;&#x540E;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#x6269;&#x5C55;&#x6570;&#x636E;&#xFF09;&#xFF0C;&#x5360;&#x636E;&#x4E86;&#x6570;&#x636E;&#x5E27;&#x5269;&#x4F59;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x8F7D;&#x8377;&#x6570;&#x636E;&#x957F;&#x5EA6; &#x51CF;&#x53BB; &#x6269;&#x5C55;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF0C;&#x5C31;&#x5F97;&#x5230;&#x5E94;&#x7528;&#x6570;&#x636E;&#x7684;&#x957F;&#x5EA6;&#x3002;</p>
<h3 id="3&#x3001;&#x63A9;&#x7801;&#x7B97;&#x6CD5;"><a href="#3&#x3001;&#x63A9;&#x7801;&#x7B97;&#x6CD5;" class="headerlink" title="3&#x3001;&#x63A9;&#x7801;&#x7B97;&#x6CD5;"></a>3&#x3001;&#x63A9;&#x7801;&#x7B97;&#x6CD5;</h3><p>&#x63A9;&#x7801;&#x952E;&#xFF08;Masking-key&#xFF09;&#x662F;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x6311;&#x9009;&#x51FA;&#x6765;&#x7684;32&#x4F4D;&#x7684;&#x968F;&#x673A;&#x6570;&#x3002;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x63A9;&#x7801;&#x3001;&#x53CD;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#x90FD;&#x91C7;&#x7528;&#x5982;&#x4E0B;&#x7B97;&#x6CD5;&#xFF1A;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5047;&#x8BBE;&#xFF1A;</p>
<ul>
<li>original-octet-i&#xFF1A;&#x4E3A;&#x539F;&#x59CB;&#x6570;&#x636E;&#x7684;&#x7B2C;i&#x5B57;&#x8282;&#x3002;</li>
<li>transformed-octet-i&#xFF1A;&#x4E3A;&#x8F6C;&#x6362;&#x540E;&#x7684;&#x6570;&#x636E;&#x7684;&#x7B2C;i&#x5B57;&#x8282;&#x3002;</li>
<li>j&#xFF1A;&#x4E3A;<code>i mod 4</code>&#x7684;&#x7ED3;&#x679C;&#x3002;</li>
<li>masking-key-octet-j&#xFF1A;&#x4E3A;mask key&#x7B2C;j&#x5B57;&#x8282;&#x3002;</li>
</ul>
<p>&#x7B97;&#x6CD5;&#x63CF;&#x8FF0;&#x4E3A;&#xFF1A; original-octet-i &#x4E0E; masking-key-octet-j &#x5F02;&#x6216;&#x540E;&#xFF0C;&#x5F97;&#x5230; transformed-octet-i&#x3002;</p>
<blockquote>
<p>j = i MOD 4<br>transformed-octet-i = original-octet-i XOR masking-key-octet-j</p>
</blockquote>
<h2 id="&#x516D;&#x3001;&#x6570;&#x636E;&#x4F20;&#x9012;"><a href="#&#x516D;&#x3001;&#x6570;&#x636E;&#x4F20;&#x9012;" class="headerlink" title="&#x516D;&#x3001;&#x6570;&#x636E;&#x4F20;&#x9012;"></a>&#x516D;&#x3001;&#x6570;&#x636E;&#x4F20;&#x9012;</h2><p>&#x4E00;&#x65E6;WebSocket&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x540E;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x6570;&#x636E;&#x5E27;&#x7684;&#x4F20;&#x9012;&#x3002;</p>
<p>WebSocket&#x6839;&#x636E;<code>opcode</code>&#x6765;&#x533A;&#x5206;&#x64CD;&#x4F5C;&#x7684;&#x7C7B;&#x578B;&#x3002;&#x6BD4;&#x5982;<code>0x8</code>&#x8868;&#x793A;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#xFF0C;<code>0x0</code>-<code>0x2</code>&#x8868;&#x793A;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#x3002;</p>
<h3 id="1&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;"><a href="#1&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;" class="headerlink" title="1&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;"></a>1&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;</h3><p>WebSocket&#x7684;&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x53EF;&#x80FD;&#x88AB;&#x5207;&#x5206;&#x6210;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x5E27;&#x3002;&#x5F53;WebSocket&#x7684;&#x63A5;&#x6536;&#x65B9;&#x6536;&#x5230;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E27;&#x65F6;&#xFF0C;&#x4F1A;&#x6839;&#x636E;<code>FIN</code>&#x7684;&#x503C;&#x6765;&#x5224;&#x65AD;&#xFF0C;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x6D88;&#x606F;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E27;&#x3002;</p>
<p>FIN=1&#x8868;&#x793A;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E27;&#x4E3A;&#x6D88;&#x606F;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E27;&#xFF0C;&#x6B64;&#x65F6;&#x63A5;&#x6536;&#x65B9;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;FIN=0&#xFF0C;&#x5219;&#x63A5;&#x6536;&#x65B9;&#x8FD8;&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x76D1;&#x542C;&#x63A5;&#x6536;&#x5176;&#x4F59;&#x7684;&#x6570;&#x636E;&#x5E27;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;<code>opcode</code>&#x5728;&#x6570;&#x636E;&#x4EA4;&#x6362;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x8868;&#x793A;&#x7684;&#x662F;&#x6570;&#x636E;&#x7684;&#x7C7B;&#x578B;&#x3002;<code>0x01</code>&#x8868;&#x793A;&#x6587;&#x672C;&#xFF0C;<code>0x02</code>&#x8868;&#x793A;&#x4E8C;&#x8FDB;&#x5236;&#x3002;&#x800C;<code>0x00</code>&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#xFF0C;&#x8868;&#x793A;&#x5EF6;&#x7EED;&#x5E27;&#xFF08;continuation frame&#xFF09;&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5C31;&#x662F;&#x5B8C;&#x6574;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5E27;&#x8FD8;&#x6CA1;&#x63A5;&#x6536;&#x5B8C;&#x3002;</p>
<h3 id="2&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;&#x4F8B;&#x5B50;"><a href="#2&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;&#x4F8B;&#x5B50;" class="headerlink" title="2&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;&#x4F8B;&#x5B50;"></a>2&#x3001;&#x6570;&#x636E;&#x5206;&#x7247;&#x4F8B;&#x5B50;</h3><p>&#x76F4;&#x63A5;&#x770B;&#x4F8B;&#x5B50;&#x66F4;&#x5F62;&#x8C61;&#x4E9B;&#x3002;&#x4E0B;&#x9762;&#x4F8B;&#x5B50;&#x6765;&#x81EA;<a href="/external_links/2bc9d59d048535cc186ef53462cf471e.html" target="blank" rel="noopener">MDN</a>&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5730;&#x6F14;&#x793A;&#x6570;&#x636E;&#x7684;&#x5206;&#x7247;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x4E24;&#x6B21;&#x53D1;&#x9001;&#x6D88;&#x606F;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x6536;&#x5230;&#x6D88;&#x606F;&#x540E;&#x56DE;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x770B;&#x5BA2;&#x6237;&#x7AEF;&#x5F80;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x3002;</p>
<p><strong>&#x7B2C;&#x4E00;&#x6761;&#x6D88;&#x606F;</strong></p>
<p>FIN=1, &#x8868;&#x793A;&#x662F;&#x5F53;&#x524D;&#x6D88;&#x606F;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E27;&#x3002;&#x670D;&#x52A1;&#x7AEF;&#x6536;&#x5230;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E27;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x6D88;&#x606F;&#x3002;opcode=0x1&#xFF0C;&#x8868;&#x793A;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x7684;&#x662F;&#x6587;&#x672C;&#x7C7B;&#x578B;&#x3002;</p>
<p><strong>&#x7B2C;&#x4E8C;&#x6761;&#x6D88;&#x606F;</strong></p>
<ol>
<li>FIN=0&#xFF0C;opcode=0x1&#xFF0C;&#x8868;&#x793A;&#x53D1;&#x9001;&#x7684;&#x662F;&#x6587;&#x672C;&#x7C7B;&#x578B;&#xFF0C;&#x4E14;&#x6D88;&#x606F;&#x8FD8;&#x6CA1;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x8FD8;&#x6709;&#x540E;&#x7EED;&#x7684;&#x6570;&#x636E;&#x5E27;&#x3002;</li>
<li>FIN=0&#xFF0C;opcode=0x0&#xFF0C;&#x8868;&#x793A;&#x6D88;&#x606F;&#x8FD8;&#x6CA1;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x8FD8;&#x6709;&#x540E;&#x7EED;&#x7684;&#x6570;&#x636E;&#x5E27;&#xFF0C;&#x5F53;&#x524D;&#x7684;&#x6570;&#x636E;&#x5E27;&#x9700;&#x8981;&#x63A5;&#x5728;&#x4E0A;&#x4E00;&#x6761;&#x6570;&#x636E;&#x5E27;&#x4E4B;&#x540E;&#x3002;</li>
<li>FIN=1&#xFF0C;opcode=0x0&#xFF0C;&#x8868;&#x793A;&#x6D88;&#x606F;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x5B8C;&#x6210;&#xFF0C;&#x6CA1;&#x6709;&#x540E;&#x7EED;&#x7684;&#x6570;&#x636E;&#x5E27;&#xFF0C;&#x5F53;&#x524D;&#x7684;&#x6570;&#x636E;&#x5E27;&#x9700;&#x8981;&#x63A5;&#x5728;&#x4E0A;&#x4E00;&#x6761;&#x6570;&#x636E;&#x5E27;&#x4E4B;&#x540E;&#x3002;&#x670D;&#x52A1;&#x7AEF;&#x53EF;&#x4EE5;&#x5C06;&#x5173;&#x8054;&#x7684;&#x6570;&#x636E;&#x5E27;&#x7EC4;&#x88C5;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;Client: FIN=1, opcode=0x1, msg=&quot;hello&quot;</span><br><span class="line">Server: (process complete message immediately) Hi.</span><br><span class="line">Client: FIN=0, opcode=0x1, msg=&quot;and a&quot;</span><br><span class="line">Server: (listening, new message containing text started)</span><br><span class="line">Client: FIN=0, opcode=0x0, msg=&quot;happy new&quot;</span><br><span class="line">Server: (listening, payload concatenated to previous message)</span><br><span class="line">Client: FIN=1, opcode=0x0, msg=&quot;year!&quot;</span><br><span class="line">Server: (process complete message) Happy new year to you too!</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E03;&#x3001;&#x8FDE;&#x63A5;&#x4FDD;&#x6301;-&#x5FC3;&#x8DF3;"><a href="#&#x4E03;&#x3001;&#x8FDE;&#x63A5;&#x4FDD;&#x6301;-&#x5FC3;&#x8DF3;" class="headerlink" title="&#x4E03;&#x3001;&#x8FDE;&#x63A5;&#x4FDD;&#x6301;+&#x5FC3;&#x8DF3;"></a>&#x4E03;&#x3001;&#x8FDE;&#x63A5;&#x4FDD;&#x6301;+&#x5FC3;&#x8DF3;</h2><p>WebSocket&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x5B9E;&#x65F6;&#x53CC;&#x5411;&#x901A;&#x4FE1;&#xFF0C;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x4E4B;&#x95F4;&#x7684;TCP&#x901A;&#x9053;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x6CA1;&#x6709;&#x65AD;&#x5F00;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5BF9;&#x4E8E;&#x957F;&#x65F6;&#x95F4;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x5F80;&#x6765;&#x7684;&#x8FDE;&#x63A5;&#xFF0C;&#x5982;&#x679C;&#x4F9D;&#x65E7;&#x957F;&#x65F6;&#x95F4;&#x4FDD;&#x6301;&#x7740;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6D6A;&#x8D39;&#x5305;&#x62EC;&#x7684;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x3002;</p>
<p>&#x4F46;&#x4E0D;&#x6392;&#x9664;&#x6709;&#x4E9B;&#x573A;&#x666F;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x867D;&#x7136;&#x957F;&#x65F6;&#x95F4;&#x6CA1;&#x6709;&#x6570;&#x636E;&#x5F80;&#x6765;&#xFF0C;&#x4F46;&#x4ECD;&#x9700;&#x8981;&#x4FDD;&#x6301;&#x8FDE;&#x63A5;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x5FC3;&#x8DF3;&#x6765;&#x5B9E;&#x73B0;&#x3002;</p>
<ul>
<li>&#x53D1;&#x9001;&#x65B9;-&gt;&#x63A5;&#x6536;&#x65B9;&#xFF1A;ping</li>
<li>&#x63A5;&#x6536;&#x65B9;-&gt;&#x53D1;&#x9001;&#x65B9;&#xFF1A;pong</li>
</ul>
<p>ping&#x3001;pong&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x662F;WebSocket&#x7684;&#x4E24;&#x4E2A;&#x63A7;&#x5236;&#x5E27;&#xFF0C;<code>opcode</code>&#x5206;&#x522B;&#x662F;<code>0x9</code>&#x3001;<code>0xA</code>&#x3002;</p>
<p>&#x4E3E;&#x4F8B;&#xFF0C;WebSocket&#x670D;&#x52A1;&#x7AEF;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;ping&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF08;&#x91C7;&#x7528;<code>ws</code>&#x6A21;&#x5757;&#xFF09;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;ws.ping(&apos;&apos;, false, true);</span><br></pre></td></tr></table></figure>

<h2 id="&#x516B;&#x3001;Sec-WebSocket-Key-Accept&#x7684;&#x4F5C;&#x7528;"><a href="#&#x516B;&#x3001;Sec-WebSocket-Key-Accept&#x7684;&#x4F5C;&#x7528;" class="headerlink" title="&#x516B;&#x3001;Sec-WebSocket-Key/Accept&#x7684;&#x4F5C;&#x7528;"></a>&#x516B;&#x3001;Sec-WebSocket-Key/Accept&#x7684;&#x4F5C;&#x7528;</h2><p>&#x524D;&#x9762;&#x63D0;&#x5230;&#x4E86;&#xFF0C;<code>Sec-WebSocket-Key/Sec-WebSocket-Accept</code>&#x5728;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x5728;&#x4E8E;&#x63D0;&#x4F9B;&#x57FA;&#x7840;&#x7684;&#x9632;&#x62A4;&#xFF0C;&#x51CF;&#x5C11;&#x6076;&#x610F;&#x8FDE;&#x63A5;&#x3001;&#x610F;&#x5916;&#x8FDE;&#x63A5;&#x3002;</p>
<p>&#x4F5C;&#x7528;&#x5927;&#x81F4;&#x5F52;&#x7EB3;&#x5982;&#x4E0B;&#xFF1A;</p>
<ol>
<li>&#x907F;&#x514D;&#x670D;&#x52A1;&#x7AEF;&#x6536;&#x5230;&#x975E;&#x6CD5;&#x7684;websocket&#x8FDE;&#x63A5;&#xFF08;&#x6BD4;&#x5982;http&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x5C0F;&#x5FC3;&#x8BF7;&#x6C42;&#x8FDE;&#x63A5;websocket&#x670D;&#x52A1;&#xFF0C;&#x6B64;&#x65F6;&#x670D;&#x52A1;&#x7AEF;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x62D2;&#x7EDD;&#x8FDE;&#x63A5;&#xFF09;</li>
<li>&#x786E;&#x4FDD;&#x670D;&#x52A1;&#x7AEF;&#x7406;&#x89E3;websocket&#x8FDE;&#x63A5;&#x3002;&#x56E0;&#x4E3A;ws&#x63E1;&#x624B;&#x9636;&#x6BB5;&#x91C7;&#x7528;&#x7684;&#x662F;http&#x534F;&#x8BAE;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x80FD;ws&#x8FDE;&#x63A5;&#x662F;&#x88AB;&#x4E00;&#x4E2A;http&#x670D;&#x52A1;&#x5668;&#x5904;&#x7406;&#x5E76;&#x8FD4;&#x56DE;&#x7684;&#xFF0C;&#x6B64;&#x65F6;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Sec-WebSocket-Key&#x6765;&#x786E;&#x4FDD;&#x670D;&#x52A1;&#x7AEF;&#x8BA4;&#x8BC6;ws&#x534F;&#x8BAE;&#x3002;&#xFF08;&#x5E76;&#x975E;&#x767E;&#x5206;&#x767E;&#x4FDD;&#x9669;&#xFF0C;&#x6BD4;&#x5982;&#x603B;&#x662F;&#x5B58;&#x5728;&#x90A3;&#x4E48;&#x4E9B;&#x65E0;&#x804A;&#x7684;http&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5149;&#x5904;&#x7406;Sec-WebSocket-Key&#xFF0C;&#x4F46;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x73B0;ws&#x534F;&#x8BAE;&#x3002;&#x3002;&#x3002;&#xFF09;</li>
<li>&#x7528;&#x6D4F;&#x89C8;&#x5668;&#x91CC;&#x53D1;&#x8D77;ajax&#x8BF7;&#x6C42;&#xFF0C;&#x8BBE;&#x7F6E;header&#x65F6;&#xFF0C;Sec-WebSocket-Key&#x4EE5;&#x53CA;&#x5176;&#x4ED6;&#x76F8;&#x5173;&#x7684;header&#x662F;&#x88AB;&#x7981;&#x6B62;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;ajax&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x610F;&#x5916;&#x8BF7;&#x6C42;&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#xFF08;websocket upgrade&#xFF09;</li>
<li>&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#xFF08;&#x4E0D;&#x7406;&#x89E3;ws&#x534F;&#x8BAE;&#xFF09;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x7684;&#x6570;&#x636E;&#x3002;&#x6BD4;&#x5982;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x524D;&#x540E;&#x6536;&#x5230;&#x4E24;&#x6B21;ws&#x8FDE;&#x63A5;&#x7684;&#x5347;&#x7EA7;&#x8BF7;&#x6C42;&#xFF0C;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#x628A;&#x7B2C;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x7684;&#x8FD4;&#x56DE;&#x7ED9;cache&#x4F4F;&#xFF0C;&#x7136;&#x540E;&#x7B2C;&#x4E8C;&#x6B21;&#x8BF7;&#x6C42;&#x5230;&#x6765;&#x65F6;&#x76F4;&#x63A5;&#x628A;cache&#x4F4F;&#x7684;&#x8BF7;&#x6C42;&#x7ED9;&#x8FD4;&#x56DE;&#xFF08;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x8FD4;&#x56DE;&#xFF09;&#x3002;</li>
<li>Sec-WebSocket-Key&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x5E76;&#x4E0D;&#x662F;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x7684;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;Sec-WebSocket-Key&#x3001;Sec-WebSocket-Accept&#x7684;&#x8F6C;&#x6362;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#x662F;&#x516C;&#x5F00;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x9884;&#x9632;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x610F;&#x5916;&#x60C5;&#x51B5;&#xFF08;&#x975E;&#x6545;&#x610F;&#x7684;&#xFF09;&#x3002;</li>
</ol>
<blockquote>
<p>&#x5F3A;&#x8C03;&#xFF1A;Sec-WebSocket-Key/Sec-WebSocket-Accept &#x7684;&#x6362;&#x7B97;&#xFF0C;&#x53EA;&#x80FD;&#x5E26;&#x6765;&#x57FA;&#x672C;&#x7684;&#x4FDD;&#x969C;&#xFF0C;&#x4F46;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x5B89;&#x5168;&#x3001;&#x6570;&#x636E;&#x662F;&#x5426;&#x5B89;&#x5168;&#x3001;&#x5BA2;&#x6237;&#x7AEF;/&#x670D;&#x52A1;&#x7AEF;&#x662F;&#x5426;&#x5408;&#x6CD5;&#x7684; ws&#x5BA2;&#x6237;&#x7AEF;&#x3001;ws&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x5176;&#x5B9E;&#x5E76;&#x6CA1;&#x6709;&#x5B9E;&#x9645;&#x6027;&#x7684;&#x4FDD;&#x8BC1;&#x3002;</p>
</blockquote>
<h2 id="&#x4E5D;&#x3001;&#x6570;&#x636E;&#x63A9;&#x7801;&#x7684;&#x4F5C;&#x7528;"><a href="#&#x4E5D;&#x3001;&#x6570;&#x636E;&#x63A9;&#x7801;&#x7684;&#x4F5C;&#x7528;" class="headerlink" title="&#x4E5D;&#x3001;&#x6570;&#x636E;&#x63A9;&#x7801;&#x7684;&#x4F5C;&#x7528;"></a>&#x4E5D;&#x3001;&#x6570;&#x636E;&#x63A9;&#x7801;&#x7684;&#x4F5C;&#x7528;</h2><p>WebSocket&#x534F;&#x8BAE;&#x4E2D;&#xFF0C;&#x6570;&#x636E;&#x63A9;&#x7801;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x589E;&#x5F3A;&#x534F;&#x8BAE;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;&#x4F46;&#x6570;&#x636E;&#x63A9;&#x7801;&#x5E76;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x62A4;&#x6570;&#x636E;&#x672C;&#x8EAB;&#xFF0C;&#x56E0;&#x4E3A;&#x7B97;&#x6CD5;&#x672C;&#x8EAB;&#x662F;&#x516C;&#x5F00;&#x7684;&#xFF0C;&#x8FD0;&#x7B97;&#x4E5F;&#x4E0D;&#x590D;&#x6742;&#x3002;&#x9664;&#x4E86;&#x52A0;&#x5BC6;&#x901A;&#x9053;&#x672C;&#x8EAB;&#xFF0C;&#x4F3C;&#x4E4E;&#x6CA1;&#x6709;&#x592A;&#x591A;&#x6709;&#x6548;&#x7684;&#x4FDD;&#x62A4;&#x901A;&#x4FE1;&#x5B89;&#x5168;&#x7684;&#x529E;&#x6CD5;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD8;&#x8981;&#x5F15;&#x5165;&#x63A9;&#x7801;&#x8BA1;&#x7B97;&#x5462;&#xFF0C;&#x9664;&#x4E86;&#x589E;&#x52A0;&#x8BA1;&#x7B97;&#x673A;&#x5668;&#x7684;&#x8FD0;&#x7B97;&#x91CF;&#x5916;&#x4F3C;&#x4E4E;&#x5E76;&#x6CA1;&#x6709;&#x592A;&#x591A;&#x7684;&#x6536;&#x76CA;&#xFF08;&#x8FD9;&#x4E5F;&#x662F;&#x4E0D;&#x5C11;&#x540C;&#x5B66;&#x7591;&#x60D1;&#x7684;&#x70B9;&#xFF09;&#x3002;</p>
<p>&#x7B54;&#x6848;&#x8FD8;&#x662F;&#x4E24;&#x4E2A;&#x5B57;&#xFF1A;<strong>&#x5B89;&#x5168;</strong>&#x3002;&#x4F46;&#x5E76;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x6570;&#x636E;&#x6CC4;&#x5BC6;&#xFF0C;&#x800C;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x65E9;&#x671F;&#x7248;&#x672C;&#x7684;&#x534F;&#x8BAE;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#x6C61;&#x67D3;&#x653B;&#x51FB;&#xFF08;proxy cache poisoning attacks&#xFF09;&#x7B49;&#x95EE;&#x9898;&#x3002;</p>
<h3 id="1&#x3001;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#x6C61;&#x67D3;&#x653B;&#x51FB;"><a href="#1&#x3001;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#x6C61;&#x67D3;&#x653B;&#x51FB;" class="headerlink" title="1&#x3001;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#x6C61;&#x67D3;&#x653B;&#x51FB;"></a>1&#x3001;&#x4EE3;&#x7406;&#x7F13;&#x5B58;&#x6C61;&#x67D3;&#x653B;&#x51FB;</h3><p>&#x4E0B;&#x9762;&#x6458;&#x81EA;2010&#x5E74;&#x5173;&#x4E8E;&#x5B89;&#x5168;&#x7684;&#x4E00;&#x6BB5;&#x8BB2;&#x8BDD;&#x3002;&#x5176;&#x4E2D;&#x63D0;&#x5230;&#x4E86;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x5728;&#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#x4E0A;&#x7684;&#x7F3A;&#x9677;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x7684;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x3002;<a href="/external_links/ad5ec83767c9605953cd8d0abb46a392.html" target="blank" rel="noopener">&#x731B;&#x51FB;&#x51FA;&#x5904;</a>&#x3002;</p>
<blockquote>
<p>&#x201C;We show, empirically, that the current version of the WebSocket consent mechanism is vulnerable to proxy cache poisoning attacks. Even though the WebSocket handshake is based on HTTP, which should be understood by most network intermediaries, the handshake uses the esoteric &#x201C;Upgrade&#x201D; mechanism of HTTP [5]. In our experiment, we find that many proxies do not implement the Upgrade mechanism properly, which causes the handshake to succeed even though subsequent traffic over the socket will be misinterpreted by the proxy.&#x201D;</p>
<p>[TALKING] Huang, L-S., Chen, E., Barth, A., Rescorla, E., and C.<br>Jackson, &#x201C;Talking to Yourself for Fun and Profit&#x201D;, 2010,</p>
</blockquote>
<p>&#x5728;&#x6B63;&#x5F0F;&#x63CF;&#x8FF0;&#x653B;&#x51FB;&#x6B65;&#x9AA4;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x6709;&#x5982;&#x4E0B;&#x53C2;&#x4E0E;&#x8005;&#xFF1A;</p>
<ul>
<li>&#x653B;&#x51FB;&#x8005;&#x3001;&#x653B;&#x51FB;&#x8005;&#x81EA;&#x5DF1;&#x63A7;&#x5236;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x7B80;&#x79F0;&#x201C;&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;&#x201D;&#xFF09;&#x3001;&#x653B;&#x51FB;&#x8005;&#x4F2A;&#x9020;&#x7684;&#x8D44;&#x6E90;&#xFF08;&#x7B80;&#x79F0;&#x201C;&#x90AA;&#x6076;&#x8D44;&#x6E90;&#x201D;&#xFF09;</li>
<li>&#x53D7;&#x5BB3;&#x8005;&#x3001;&#x53D7;&#x5BB3;&#x8005;&#x60F3;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x8D44;&#x6E90;&#xFF08;&#x7B80;&#x79F0;&#x201C;&#x6B63;&#x4E49;&#x8D44;&#x6E90;&#x201D;&#xFF09;</li>
<li>&#x53D7;&#x5BB3;&#x8005;&#x5B9E;&#x9645;&#x60F3;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF08;&#x7B80;&#x79F0;&#x201C;&#x6B63;&#x4E49;&#x670D;&#x52A1;&#x5668;&#x201D;&#xFF09;</li>
<li>&#x4E2D;&#x95F4;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</li>
</ul>
<p>&#x653B;&#x51FB;&#x6B65;&#x9AA4;&#x4E00;&#xFF1A;</p>
<ol>
<li><strong>&#x653B;&#x51FB;&#x8005;</strong>&#x6D4F;&#x89C8;&#x5668; &#x5411; <strong>&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;</strong> &#x53D1;&#x8D77;WebSocket&#x8FDE;&#x63A5;&#x3002;&#x6839;&#x636E;&#x524D;&#x6587;&#xFF0C;&#x9996;&#x5148;&#x662F;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#x8BF7;&#x6C42;&#x3002;</li>
<li>&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#x8BF7;&#x6C42; &#x5B9E;&#x9645;&#x5230;&#x8FBE; <strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong>&#x3002;</li>
<li><strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x5C06;&#x534F;&#x8BAE;&#x5347;&#x7EA7;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230; <strong>&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;</strong>&#x3002;</li>
<li><strong>&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;</strong> &#x540C;&#x610F;&#x8FDE;&#x63A5;&#xFF0C;<strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x5C06;&#x54CD;&#x5E94;&#x8F6C;&#x53D1;&#x7ED9; <strong>&#x653B;&#x51FB;&#x8005;</strong>&#x3002;</li>
</ol>
<p>&#x7531;&#x4E8E; upgrade &#x7684;&#x5B9E;&#x73B0;&#x4E0A;&#x6709;&#x7F3A;&#x9677;&#xFF0C;<strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x4EE5;&#x4E3A;&#x4E4B;&#x524D;&#x8F6C;&#x53D1;&#x7684;&#x662F;&#x666E;&#x901A;&#x7684;HTTP&#x6D88;&#x606F;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5F53;<strong>&#x534F;&#x8BAE;&#x670D;&#x52A1;&#x5668;</strong> &#x540C;&#x610F;&#x8FDE;&#x63A5;&#xFF0C;<strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x4EE5;&#x4E3A;&#x672C;&#x6B21;&#x4F1A;&#x8BDD;&#x5DF2;&#x7ECF;&#x7ED3;&#x675F;&#x3002;</p>
<p>&#x653B;&#x51FB;&#x6B65;&#x9AA4;&#x4E8C;&#xFF1A;</p>
<ol>
<li><strong>&#x653B;&#x51FB;&#x8005;</strong> &#x5728;&#x4E4B;&#x524D;&#x5EFA;&#x7ACB;&#x7684;&#x8FDE;&#x63A5;&#x4E0A;&#xFF0C;&#x901A;&#x8FC7;WebSocket&#x7684;&#x63A5;&#x53E3;&#x5411; <strong>&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;</strong> &#x53D1;&#x9001;&#x6570;&#x636E;&#xFF0C;&#x4E14;&#x6570;&#x636E;&#x662F;&#x7CBE;&#x5FC3;&#x6784;&#x9020;&#x7684;HTTP&#x683C;&#x5F0F;&#x7684;&#x6587;&#x672C;&#x3002;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x4E86; <strong>&#x6B63;&#x4E49;&#x8D44;&#x6E90;</strong> &#x7684;&#x5730;&#x5740;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x4F2A;&#x9020;&#x7684;host&#xFF08;&#x6307;&#x5411;<strong>&#x6B63;&#x4E49;&#x670D;&#x52A1;&#x5668;</strong>&#xFF09;&#x3002;&#xFF08;&#x89C1;&#x540E;&#x9762;&#x62A5;&#x6587;&#xFF09;</li>
<li>&#x8BF7;&#x6C42;&#x5230;&#x8FBE; <strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x3002;&#x867D;&#x7136;&#x590D;&#x7528;&#x4E86;&#x4E4B;&#x524D;&#x7684;TCP&#x8FDE;&#x63A5;&#xFF0C;&#x4F46; <strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x4EE5;&#x4E3A;&#x662F;&#x65B0;&#x7684;HTTP&#x8BF7;&#x6C42;&#x3002;</li>
<li><strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x5411; <strong>&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;</strong> &#x8BF7;&#x6C42; <strong>&#x90AA;&#x6076;&#x8D44;&#x6E90;</strong>&#x3002;</li>
<li><strong>&#x90AA;&#x6076;&#x670D;&#x52A1;&#x5668;</strong> &#x8FD4;&#x56DE; <strong>&#x90AA;&#x6076;&#x8D44;&#x6E90;</strong>&#x3002;<strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x7F13;&#x5B58;&#x4F4F; <strong>&#x90AA;&#x6076;&#x8D44;&#x6E90;</strong>&#xFF08;url&#x662F;&#x5BF9;&#x7684;&#xFF0C;&#x4F46;host&#x662F; <strong>&#x6B63;&#x4E49;&#x670D;&#x52A1;&#x5668;</strong> &#x7684;&#x5730;&#x5740;&#xFF09;&#x3002;</li>
</ol>
<p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x53D7;&#x5BB3;&#x8005;&#x53EF;&#x4EE5;&#x767B;&#x573A;&#x4E86;&#xFF1A;</p>
<ol>
<li><strong>&#x53D7;&#x5BB3;&#x8005;</strong> &#x901A;&#x8FC7; <strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x8BBF;&#x95EE; <strong>&#x6B63;&#x4E49;&#x670D;&#x52A1;&#x5668;</strong> &#x7684; <strong>&#x6B63;&#x4E49;&#x8D44;&#x6E90;</strong>&#x3002;</li>
<li><strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x68C0;&#x67E5;&#x8BE5;&#x8D44;&#x6E90;&#x7684;url&#x3001;host&#xFF0C;&#x53D1;&#x73B0;&#x672C;&#x5730;&#x6709;&#x4E00;&#x4EFD;&#x7F13;&#x5B58;&#xFF08;&#x4F2A;&#x9020;&#x7684;&#xFF09;&#x3002;</li>
<li><strong>&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;</strong> &#x5C06; <strong>&#x90AA;&#x6076;&#x8D44;&#x6E90;</strong> &#x8FD4;&#x56DE;&#x7ED9; <strong>&#x53D7;&#x5BB3;&#x8005;</strong>&#x3002;</li>
<li><strong>&#x53D7;&#x5BB3;&#x8005;</strong> &#x5352;&#x3002;</li>
</ol>
<p>&#x9644;&#xFF1A;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;&#x7CBE;&#x5FC3;&#x6784;&#x9020;&#x7684;&#x201C;HTTP&#x8BF7;&#x6C42;&#x62A5;&#x6587;&#x201D;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;Client &#x2192; Server:</span><br><span class="line">POST /path/of/attackers/choice HTTP/1.1 Host: host-of-attackers-choice.com Sec-WebSocket-Key: &lt;connection-key&gt;</span><br><span class="line">Server &#x2192; Client:</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Sec-WebSocket-Accept: &lt;connection-key&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2&#x3001;&#x5F53;&#x524D;&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#2&#x3001;&#x5F53;&#x524D;&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="2&#x3001;&#x5F53;&#x524D;&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>2&#x3001;&#x5F53;&#x524D;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h3><p>&#x6700;&#x521D;&#x7684;&#x63D0;&#x6848;&#x662F;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x52A0;&#x5BC6;&#x5904;&#x7406;&#x3002;&#x57FA;&#x4E8E;&#x5B89;&#x5168;&#x3001;&#x6548;&#x7387;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x6700;&#x7EC8;&#x91C7;&#x7528;&#x4E86;&#x6298;&#x4E2D;&#x7684;&#x65B9;&#x6848;&#xFF1A;&#x5BF9;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x8FDB;&#x884C;&#x63A9;&#x7801;&#x5904;&#x7406;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x91CC;&#x53EA;&#x662F;&#x9650;&#x5236;&#x4E86;&#x6D4F;&#x89C8;&#x5668;&#x5BF9;&#x6570;&#x636E;&#x8F7D;&#x8377;&#x8FDB;&#x884C;&#x63A9;&#x7801;&#x5904;&#x7406;&#xFF0C;&#x4F46;&#x662F;&#x574F;&#x4EBA;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x81EA;&#x5DF1;&#x7684;WebSocket&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x4E0D;&#x6309;&#x89C4;&#x5219;&#x6765;&#xFF0C;&#x653B;&#x51FB;&#x53EF;&#x4EE5;&#x7167;&#x5E38;&#x8FDB;&#x884C;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5BF9;&#x6D4F;&#x89C8;&#x5668;&#x52A0;&#x4E0A;&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5927;&#x589E;&#x52A0;&#x653B;&#x51FB;&#x7684;&#x96BE;&#x5EA6;&#xFF0C;&#x4EE5;&#x53CA;&#x653B;&#x51FB;&#x7684;&#x5F71;&#x54CD;&#x8303;&#x56F4;&#x3002;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x7F51;&#x4E0A;&#x653E;&#x4E2A;&#x9493;&#x9C7C;&#x7F51;&#x7AD9;&#x9A97;&#x4EBA;&#x53BB;&#x8BBF;&#x95EE;&#xFF0C;&#x4E00;&#x4E0B;&#x5B50;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x5C55;&#x5F00;&#x5927;&#x8303;&#x56F4;&#x7684;&#x653B;&#x51FB;&#x3002;</p>
<h2 id="&#x5341;&#x3001;&#x5199;&#x5728;&#x540E;&#x9762;"><a href="#&#x5341;&#x3001;&#x5199;&#x5728;&#x540E;&#x9762;" class="headerlink" title="&#x5341;&#x3001;&#x5199;&#x5728;&#x540E;&#x9762;"></a>&#x5341;&#x3001;&#x5199;&#x5728;&#x540E;&#x9762;</h2><p>WebSocket&#x53EF;&#x5199;&#x7684;&#x4E1C;&#x897F;&#x8FD8;&#x633A;&#x591A;&#xFF0C;&#x6BD4;&#x5982;WebSocket&#x6269;&#x5C55;&#x3002;&#x5BA2;&#x6237;&#x7AEF;&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x4E4B;&#x95F4;&#x662F;&#x5982;&#x4F55;&#x534F;&#x5546;&#x3001;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x7684;&#x3002;WebSocket&#x6269;&#x5C55;&#x53EF;&#x4EE5;&#x7ED9;&#x534F;&#x8BAE;&#x672C;&#x8EAB;&#x589E;&#x52A0;&#x5F88;&#x591A;&#x80FD;&#x529B;&#x548C;&#x60F3;&#x8C61;&#x7A7A;&#x95F4;&#xFF0C;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x7684;&#x538B;&#x7F29;&#x3001;&#x52A0;&#x5BC6;&#xFF0C;&#x4EE5;&#x53CA;&#x591A;&#x8DEF;&#x590D;&#x7528;&#x7B49;&#x3002;</p>
<p>&#x7BC7;&#x5E45;&#x6240;&#x9650;&#xFF0C;&#x8FD9;&#x91CC;&#x5148;&#x4E0D;&#x5C55;&#x5F00;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x7559;&#x8A00;&#x4EA4;&#x6D41;&#x3002;&#x6587;&#x7AE0;&#x5982;&#x6709;&#x9519;&#x6F0F;&#xFF0C;&#x656C;&#x8BF7;&#x6307;&#x51FA;&#x3002;</p>
<h2 id="&#x5341;&#x4E00;&#x3001;&#x76F8;&#x5173;&#x94FE;&#x63A5;"><a href="#&#x5341;&#x4E00;&#x3001;&#x76F8;&#x5173;&#x94FE;&#x63A5;" class="headerlink" title="&#x5341;&#x4E00;&#x3001;&#x76F8;&#x5173;&#x94FE;&#x63A5;"></a>&#x5341;&#x4E00;&#x3001;&#x76F8;&#x5173;&#x94FE;&#x63A5;</h2><p><a href="/external_links/8f23ec0857e45dc91c34807ab55e8659.html" target="blank" rel="noopener">RFC6455&#xFF1A;websocket&#x89C4;&#x8303;</a></p>
<p><a href="/external_links/8f23ec0857e45dc91c34807ab55e8659.html" target="blank" rel="noopener">&#x89C4;&#x8303;&#xFF1A;&#x6570;&#x636E;&#x5E27;&#x63A9;&#x7801;&#x7EC6;&#x8282;</a></p>
<p><a href="/external_links/8f23ec0857e45dc91c34807ab55e8659.html" target="blank" rel="noopener">&#x89C4;&#x8303;&#xFF1A;&#x6570;&#x636E;&#x5E27;&#x683C;&#x5F0F;</a></p>
<p><a href="/external_links/fbc09b1f25e3073a0fc7a18292148f3b.html" target="blank" rel="noopener">server-example</a></p>
<p><a href="/external_links/2bc9d59d048535cc186ef53462cf471e.html" target="blank" rel="noopener">&#x7F16;&#x5199;websocket&#x670D;&#x52A1;&#x5668;</a></p>
<p><a href="/external_links/8f23ec0857e45dc91c34807ab55e8659.html" target="blank" rel="noopener">&#x5BF9;&#x7F51;&#x7EDC;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x7684;&#x653B;&#x51FB;&#xFF08;&#x6570;&#x636E;&#x63A9;&#x7801;&#x64CD;&#x4F5C;&#x6240;&#x8981;&#x9884;&#x9632;&#x7684;&#x4E8B;&#x60C5;&#xFF09;</a></p>
<p><a href="/external_links/ad5ec83767c9605953cd8d0abb46a392.html" target="blank" rel="noopener">Talking to Yourself for Fun and Profit&#xFF08;&#x542B;&#x6709;&#x653B;&#x51FB;&#x63CF;&#x8FF0;&#xFF09;</a></p>
<p><a href="/external_links/d8032f460f4bd51ebccd30f9f0537a2e.html" target="blank" rel="noopener">What is Sec-WebSocket-Key for?</a></p>
<p><a href="/external_links/8f23ec0857e45dc91c34807ab55e8659.html" target="blank" rel="noopener">10.3. Attacks On Infrastructure (Masking)</a></p>
<p><a href="/external_links/ad5ec83767c9605953cd8d0abb46a392.html" target="blank" rel="noopener">Talking to Yourself for Fun and Profit</a></p>
<p><a href="/external_links/d17b314e2cb10fda6d84405221bdf92f.html" target="blank" rel="noopener">Why are WebSockets masked?</a></p>
<p><a href="/external_links/ff5fa97a407a3285c11044ee25a43017.html" target="blank" rel="noopener">How does websocket frame masking protect against cache poisoning?</a></p>
<p><a href="/external_links/41477cd9611709db637de1a78ebdad1f.html" target="blank" rel="noopener">What is the mask in a WebSocket frame?</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/25db856b31eb2e290cd9eeb3f98613b3.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903543585898503.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903543585898503.html" itemprop="url">在 Java 中使用 redis</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-01T17:48:47+08:00">
                2018-01-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>redis &#x652F;&#x6301;&#x5F88;&#x591A;&#x8BED;&#x8A00;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5728;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#x4E0A;&#x6709;&#x652F;&#x6301;&#x7684;&#x6240;&#x6709;&#x7684; <a href="/external_links/fbbf1473543cec10ad5dbda6725ad6bf.html" target="blank" rel="noopener">redis &#x5BA2;&#x6237;&#x7AEF;&#x5217;&#x8868;</a>&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x5E73;&#x65F6;&#x4F7F;&#x7528; java &#x4F5C;&#x4E3A;&#x5F00;&#x53D1;&#x8BED;&#x8A00;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x63CF;&#x8FF0;&#x4E00;&#x4E0B;&#x5982;&#x4F55;&#x901A;&#x8FC7; java &#x6765;&#x8FDE;&#x63A5;&#x548C;&#x64CD;&#x4F5C; redis &#x670D;&#x52A1;&#x5668;&#x3002;&#x5728;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#xFF0C; Java &#x63A8;&#x8350;&#x7684; redis &#x5BA2;&#x6237;&#x7AEF;&#x662F; <strong>Jedis</strong> &#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4E5F;&#x7528;&#x8FD9;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9; redis &#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<hr>
<h2 id="&#x5F15;&#x5165;&#x4F9D;&#x8D56;"><a href="#&#x5F15;&#x5165;&#x4F9D;&#x8D56;" class="headerlink" title="&#x5F15;&#x5165;&#x4F9D;&#x8D56;"></a>&#x5F15;&#x5165;&#x4F9D;&#x8D56;</h2><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A; maven &#x5DE5;&#x7A0B;&#xFF0C;&#x5728;&#x5DE5;&#x7A0B;&#x7684; pom.xml &#x6587;&#x4EF6;&#x4E2D;&#x52A0;&#x5165; <strong>Jedis</strong> &#x7684;&#x4F9D;&#x8D56;&#x5F15;&#x7528;&#x3002;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6D4B;&#x8BD5;&#xFF0C;&#x8FD8;&#x52A0;&#x5165;&#x4E86; Junit &#x4F9D;&#x8D56;&#x3002;&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><br><span class="line">     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">     xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line"></span><br><span class="line">&lt;groupId&gt;com.x9710.common&lt;/groupId&gt;</span><br><span class="line">&lt;artifactId&gt;redis-util&lt;/artifactId&gt;</span><br><span class="line">&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;commons-logging&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;commons-logging&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.1.1&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;log4j&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;log4j&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.2.17&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.9.0&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;4.12&lt;/version&gt;</span><br><span class="line">        &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="&#x521B;&#x5EFA;&#x8FDE;&#x63A5;&#x7C7B;"><a href="#&#x521B;&#x5EFA;&#x8FDE;&#x63A5;&#x7C7B;" class="headerlink" title="&#x521B;&#x5EFA;&#x8FDE;&#x63A5;&#x7C7B;"></a>&#x521B;&#x5EFA;&#x8FDE;&#x63A5;&#x7C7B;</h2><p>&#x5EFA;&#x7ACB; redis &#x8FDE;&#x63A5;&#x7C7B; <strong>com.x9710.common.redis.RedisConnection</strong> &#x3002;&#x5185;&#x5BB9;&#x5982;&#x4E0B;<br>package com.x9710.common.redis;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import redis.clients.jedis.Jedis;</span><br><span class="line">import redis.clients.jedis.JedisPool;</span><br><span class="line">import redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line">public class RedisConnection {</span><br><span class="line">   /**</span><br><span class="line">   * redis &#x8FDE;&#x63A5;&#x6C60;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</span><br><span class="line">   */</span><br><span class="line">  private JedisPoolConfig jedisPoolConfig;</span><br><span class="line">   /**</span><br><span class="line">   * redis &#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;</span><br><span class="line">   */</span><br><span class="line">  private String ip;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * redis &#x670D;&#x52A1;&#x5668;&#x7AEF;&#x53E3;</span><br><span class="line">   */</span><br><span class="line">  private Integer port;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * redis &#x670D;&#x52A1;&#x5668;&#x5BC6;&#x7801;</span><br><span class="line">   */</span><br><span class="line">  private String pwd;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">   * redis &#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;</span><br><span class="line">   */</span><br><span class="line">  private Integer timeOut;</span><br><span class="line"></span><br><span class="line">   /**</span><br><span class="line">   * redis &#x8FDE;&#x63A5;&#x5BA2;&#x6237;&#x7AEF;&#x540D;&#x79F0;</span><br><span class="line">   */</span><br><span class="line">  private String clientName = null;</span><br><span class="line"></span><br><span class="line">  private JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">   public void setJedisPoolConfig(JedisPoolConfig jedisPoolConfig) {</span><br><span class="line">     this.jedisPoolConfig = jedisPoolConfig;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public void setIp(String ip) {</span><br><span class="line">    this.ip = ip;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public void setPort(Integer port) {</span><br><span class="line">    this.port = port;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public void setPwd(String pwd) {</span><br><span class="line">    this.pwd = pwd;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">public void setTimeOut(Integer timeOut) {</span><br><span class="line">    this.timeOut = timeOut;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public void setClientName(String clientName) {</span><br><span class="line">    this.clientName = clientName;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">private void buildConnection() {</span><br><span class="line">    if (jedisPool == null) {</span><br><span class="line">        if (jedisPoolConfig == null) {</span><br><span class="line">            jedisPool = new JedisPool(new JedisPoolConfig(), ip, port, timeOut, pwd, 0, clientName);</span><br><span class="line">        } else {</span><br><span class="line">            jedisPool = new JedisPool(jedisPoolConfig, ip, port, timeOut, pwd, 0, clientName);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public Jedis getJedis() {</span><br><span class="line">    buildConnection();</span><br><span class="line">    if (jedisPool != null) {</span><br><span class="line">        return jedisPool.getResource();</span><br><span class="line">    }</span><br><span class="line">    return null;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>}</p>
<hr>
<h2 id="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;"><a href="#&#x7F16;&#x5199;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;"></a>&#x7F16;&#x5199;&#x6D4B;&#x8BD5;</h2><p>&#x7528;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7C7B; <strong>com.x9710.common.redis.test.RedisConnectionTest</strong> &#x6765;&#x6D4B;&#x8BD5; rdis &#x8FDE;&#x63A5;&#x529F;&#x80FD;.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;package com.x9710.common.redis.test;</span><br><span class="line"></span><br><span class="line">import com.x9710.common.redis.RedisConnection;</span><br><span class="line">import org.junit.Assert;</span><br><span class="line">import org.junit.Before;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import redis.clients.jedis.Jedis;</span><br><span class="line">import redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line">public class RedisConnectionTest {</span><br><span class="line">private RedisConnection redisConnection;</span><br><span class="line"></span><br><span class="line">@Before</span><br><span class="line">public void before() {</span><br><span class="line">    JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();</span><br><span class="line">    //&#x8BBE;&#x7F6E; redis &#x8FDE;&#x63A5;&#x6C60;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x91CF;</span><br><span class="line">    jedisPoolConfig.setMaxTotal(50);</span><br><span class="line">    //&#x8BBE;&#x7F6E; redis &#x8FDE;&#x63A5;&#x6C60;&#x6700;&#x5927;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x6570;&#x91CF;</span><br><span class="line">    jedisPoolConfig.setMaxIdle(10);</span><br><span class="line">    //&#x8BBE;&#x7F6E; redis &#x8FDE;&#x63A5;&#x6C60;&#x6700;&#x5C0F;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x6570;&#x91CF;</span><br><span class="line">    jedisPoolConfig.setMinIdle(1);</span><br><span class="line">    redisConnection = new RedisConnection();</span><br><span class="line">    redisConnection.setIp(&quot;10.110.2.56&quot;);</span><br><span class="line">    redisConnection.setPort(52981);</span><br><span class="line">    redisConnection.setPwd(&quot;hhSbcpotThgWdnxJNhrzwstSP20DvYOldkjf&quot;);</span><br><span class="line">    redisConnection.setClientName(Thread.currentThread().getName());</span><br><span class="line">    redisConnection.setTimeOut(600);</span><br><span class="line">    redisConnection.setJedisPoolConfig(jedisPoolConfig);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">public void testPutGet() {</span><br><span class="line">    Jedis jedis = redisConnection.getJedis();</span><br><span class="line">    try {</span><br><span class="line">        jedis.select(1);</span><br><span class="line">        jedis.set(&quot;name&quot;,&quot;grace&quot;);</span><br><span class="line">        Assert.assertTrue(&quot;grace&quot;.equals(jedis.get(&quot;name&quot;)));</span><br><span class="line">    } finally {</span><br><span class="line">        if (jedis != null) {</span><br><span class="line">            jedis.close();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728; ide &#x73AF;&#x5883;&#x4E2D;&#x6267;&#x884C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF0C;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p8/raw/master/img/0a36e4805e971c32c1f5f6b1cf3cb3069373547af8a9e06a11aee61392faa5ef" alt="&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x6267;&#x884C;&#x7ED3;&#x679C;"></p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5728; Java &#x4E2D;&#x5229;&#x7528; Jedit &#x5BA2;&#x6237;&#x7AEF;&#x5EFA;&#x7ACB;&#x548C; redis &#x7684;&#x8FDE;&#x63A5;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7801;&#x53D1;&#x5E03;&#x5230;&#x4E86; <a href="/external_links/29677032fdff00d05d4bf4912624238a.html" target="blank" rel="noopener">GitHub</a> &#x4E2D;</p>
<p><strong>&#x539F;&#x6587;&#x53D1;&#x8868;&#x5728;&#x7B80;&#x4E66;&#x4E2D;&#xFF0C;<a href="/external_links/c2f686f44b386f4f1efbc71a91acd021.html" target="blank" rel="noopener">&#x539F;&#x59CB;&#x94FE;&#x63A5;</a></strong></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8275ebf705a639436584492b07d213ea.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903529102966792.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903529102966792.html" itemprop="url">C语言结构体内存布局问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-29T18:00:11+08:00">
                2017-12-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x5F15;&#x8A00;"><a href="#&#x5F15;&#x8A00;" class="headerlink" title="&#x5F15;&#x8A00;"></a>&#x5F15;&#x8A00;</h2><p><strong>C</strong>&#x8BED;&#x8A00;&#x7ED3;&#x6784;&#x4F53;&#x5185;&#x5B58;&#x5E03;&#x5C40;&#x662F;&#x4E00;&#x4E2A;&#x8001;&#x751F;&#x5E38;&#x8C08;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7F51;&#x4E0A;&#x4E5F;&#x770B;&#x4E86;&#x4E00;&#x4E9B;&#x8D44;&#x6599;&#xFF0C;&#x6709;&#x4E9B;&#x8BF4;&#x7684;&#x6BD4;&#x8F83;&#x6A21;&#x7CCA;&#xFF0C;&#x6709;&#x4E9B;&#x662F;&#x9519;&#x8BEF;&#x7684;&#x3002;&#x672C;&#x4EBA;&#x501F;&#x9274;&#x4E86;&#x524D;&#x4EBA;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x7ECF;&#x8FC7;&#x5B9E;&#x8DF5;&#xFF0C;&#x603B;&#x7ED3;&#x4E86;&#x4E00;&#x4E9B;&#x89C4;&#x5219;&#xFF0C;&#x5982;&#x6709;&#x9519;&#x8BEF;&#xFF0C;&#x5E0C;&#x671B;&#x6307;&#x6B63;&#xFF0C;&#x4E0D;&#x80DC;&#x611F;&#x6FC0;&#x3002;</p>
<h2 id="&#x5B9E;&#x9645;&#x73AF;&#x5883;"><a href="#&#x5B9E;&#x9645;&#x73AF;&#x5883;" class="headerlink" title="&#x5B9E;&#x9645;&#x73AF;&#x5883;"></a>&#x5B9E;&#x9645;&#x73AF;&#x5883;</h2><ul>
<li>&#x7CFB;&#x7EDF;&#x73AF;&#x5883; <code>macOS Sierra(10.12.4)</code></li>
<li>IDE <code>Xcode(8.3)</code></li>
</ul>
<h2 id="&#x6982;&#x8FF0;"><a href="#&#x6982;&#x8FF0;" class="headerlink" title="&#x6982;&#x8FF0;"></a>&#x6982;&#x8FF0;</h2><p>&#x5F71;&#x54CD;&#x7ED3;&#x6784;&#x4F53;&#x5185;&#x5B58;&#x5E03;&#x5C40;&#x6709;<strong>&#x4F4D;&#x57DF;</strong>&#x548C;**#pragma pack&#x9884;&#x5904;&#x7406;&#x5B8F;**&#x4E24;&#x4E2A;&#x60C5;&#x51B5;&#xFF0C;&#x4E0B;&#x9762;&#x5206;&#x60C5;&#x51B5;&#x8BF4;&#x660E;&#x3002;</p>
<h2 id="&#x6B63;&#x5E38;&#x60C5;&#x51B5;"><a href="#&#x6B63;&#x5E38;&#x60C5;&#x51B5;" class="headerlink" title="&#x6B63;&#x5E38;&#x60C5;&#x51B5;"></a>&#x6B63;&#x5E38;&#x60C5;&#x51B5;</h2><p><strong>&#x7ED3;&#x6784;&#x4F53;&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#x7684;&#x7EC6;&#x8282;&#x548C;&#x5177;&#x4F53;&#x7684;&#x7F16;&#x8BD1;&#x5668;&#x5B9E;&#x73B0;&#x76F8;&#x5173;&#xFF0C;&#x4F46;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#x9075;&#x5FAA;3&#x4E2A;&#x51C6;&#x5219;&#xFF1A;</strong></p>
<ol>
<li>&#x7ED3;&#x6784;&#x4F53;&#x53D8;&#x91CF;&#x7684;&#x9996;&#x5730;&#x5740;&#x80FD;&#x591F;&#x88AB;&#x5176;&#x6700;&#x5BBD;&#x57FA;&#x672C;&#x7C7B;&#x578B;&#x6210;&#x5458;&#x7684;&#x5927;&#x5C0F;(<code>sizeof</code>)&#x6240;&#x6574;&#x9664;&#x3002;</li>
<li>&#x7ED3;&#x6784;&#x4F53;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x76F8;&#x5BF9;&#x7ED3;&#x6784;&#x4F53;&#x9996;&#x5730;&#x5740;&#x7684;&#x504F;&#x79FB;&#x91CF;<code>offset</code>&#x90FD;&#x662F;&#x6210;&#x5458;&#x5927;&#x5C0F;&#x7684;&#x6574;&#x6570;&#x500D;&#xFF0C;&#x5982;&#x6709;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x5728;&#x6210;&#x5458;&#x4E4B;&#x95F4;&#x52A0;&#x4E0A;&#x586B;&#x5145;&#x5B57;&#x8282;&#x3002;</li>
<li>&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x603B;&#x5927;&#x5C0F;<code>sizeof</code>&#x4E3A;&#x7ED3;&#x6784;&#x4F53;&#x6700;&#x5BBD;&#x57FA;&#x672C;&#x6210;&#x5458;&#x5927;&#x5C0F;&#x7684;&#x6574;&#x6570;&#x500D;&#xFF0C;&#x5982;&#x6709;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x5728;&#x6700;&#x672B;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x4E4B;&#x540E;&#x52A0;&#x4E0A;&#x586B;&#x5145;&#x5B57;&#x8282;&#x3002;</li>
</ol>
<p><strong>&#x4E0B;&#x9762;&#x7684;demo&#x4F1A;&#x4E3A;&#x5927;&#x5BB6;&#x89E3;&#x91CA;&#x4EE5;&#x4E0A;&#x89C4;&#x5219;&#xFF1A;</strong></p>
<h3 id="&#x4EE3;&#x7801;"><a href="#&#x4EE3;&#x7801;" class="headerlink" title="&#x4EE3;&#x7801;"></a>&#x4EE3;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;struct student {</span><br><span class="line">  char name[5];</span><br><span class="line">  double weight;</span><br><span class="line">  int age;</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;struct school {</span><br><span class="line">  short age;</span><br><span class="line">  char name[7];</span><br><span class="line">  struct student lilei;</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;int main(int argc, const char * argv[]) {</span><br><span class="line">  @autoreleasepool {</span><br><span class="line">    // insert code here...</span><br><span class="line">    struct student lilei = {&quot;lilei&quot;,112.33,20};</span><br><span class="line">    printf(&quot;size of struct student: %lu\n&quot;,sizeof(lilei));</span><br><span class="line">    printf(&quot;address of student name: %u\n&quot;,lilei.name);</span><br><span class="line">    printf(&quot;address of student weight: %u\n&quot;,&amp;lilei.weight);</span><br><span class="line">    printf(&quot;address of student age: %u\n&quot;,&amp;lilei.age);</span><br><span class="line">    </span><br><span class="line">    struct school shengli = {70,&quot;shengli&quot;,lilei};</span><br><span class="line">    printf(&quot;size of struct school: %lu\n&quot;,sizeof(shengli));</span><br><span class="line">    printf(&quot;address of school age: %u\n&quot;,&amp;shengli.age);</span><br><span class="line">    printf(&quot;address of school name: %u\n&quot;,shengli.name);</span><br><span class="line">    printf(&quot;address of school student: %u\n&quot;,&amp;shengli.lilei);</span><br><span class="line">  }</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x8F93;&#x51FA;&#x7ED3;&#x679C;"><a href="#&#x8F93;&#x51FA;&#x7ED3;&#x679C;" class="headerlink" title="&#x8F93;&#x51FA;&#x7ED3;&#x679C;"></a>&#x8F93;&#x51FA;&#x7ED3;&#x679C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1c00e16c0db1f129d7b8b87fad27646fdfc393600d20182fa7eb94682601b913" alt></p>
<h3 id="&#x89E3;&#x91CA;&#x89C4;&#x5219;"><a href="#&#x89E3;&#x91CA;&#x89C4;&#x5219;" class="headerlink" title="&#x89E3;&#x91CA;&#x89C4;&#x5219;"></a>&#x89E3;&#x91CA;&#x89C4;&#x5219;</h3><ol>
<li>&#x7F16;&#x8BD1;&#x5668;&#x5728;&#x7ED9;&#x7ED3;&#x6784;&#x4F53;&#x5F00;&#x8F9F;&#x7A7A;&#x95F4;&#x65F6;&#xFF0C;&#x9996;&#x5148;&#x627E;&#x5230;&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x6700;&#x5BBD;&#x7684;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x7136;&#x540E;&#x5BFB;&#x627E;&#x5185;&#x5B58;&#x5730;&#x5740;&#x80FD;&#x88AB;&#x8BE5;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6240;&#x6574;&#x9664;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x505A;&#x4E3A;&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x9996;&#x5730;&#x5740;&#x3002;(&#x5728;&#x672C;demo&#x4E2D;<code>struct school</code> &#x5305;&#x542B; <code>struct student</code>&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x5BBD;&#x7684;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E3A;<code>double</code>&#xFF0C;<code>sizeof(double)</code>&#x4E3A;<code>8</code>&#xFF0C;<code>1606416152&#xFF0F;8 = 200802019</code>&#xFF0C;<code>1606416112&#xFF0F;8 = 200802014</code>)&#x3002;</li>
<li>&#x4E3A;&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x5F00;&#x8F9F;&#x7A7A;&#x95F4;&#x4E4B;&#x524D;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x9996;&#x5148;&#x68C0;&#x67E5;&#x9884;&#x5F00;&#x8F9F;&#x7A7A;&#x95F4;&#x9996;&#x5730;&#x5740;&#x76F8;&#x5BF9;&#x4E8E;&#x7ED3;&#x6784;&#x4F53;&#x9996;&#x5730;&#x5740;&#x7684;&#x504F;&#x79FB;&#x662F;&#x5426;&#x662F;&#x672C;&#x6210;&#x5458;&#x5927;&#x5C0F;&#x7684;&#x6574;&#x6570;&#x500D;&#xFF0C;&#x82E5;&#x662F;&#xFF0C;&#x5219;&#x5B58;&#x653E;&#x672C;&#x6210;&#x5458;&#xFF0C;&#x53CD;&#x4E4B;&#xFF0C;&#x5219;&#x5728;&#x672C;&#x6210;&#x5458;&#x548C;&#x4E0A;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x4E4B;&#x95F4;&#x586B;&#x5145;&#x5B57;&#x8282;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x6574;&#x6570;&#x500D;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C06;&#x9884;&#x5F00;&#x8F9F;&#x7A7A;&#x95F4;&#x7684;&#x9996;&#x5730;&#x5740;&#x540E;&#x79FB;&#x51E0;&#x4E2A;&#x5B57;&#x8282;(&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;<code>struct student weight</code>&#x6210;&#x5458;&#x7684;&#x9996;&#x5730;&#x5740;&#x662F;<code>1606416160</code>&#x800C;&#x4E0D;&#x662F;<code>1606416157</code>&#xFF0C;**&#x4F46;&#x6709;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x6210;&#x5458;&#x4E3A;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4E0D;&#x5305;&#x62EC;char&#x7C7B;&#x578B;&#x6570;&#x7EC4;&#x548C;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#xFF0C;char&#x7C7B;&#x578B;&#x6570;&#x7EC4;&#x6309;1&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#xFF0C;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#x5B58;&#x50A8;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#x8981;&#x4ECE;&#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x6700;&#x5927;&#x6210;&#x5458;&#x5927;&#x5C0F;&#x7684;&#x6574;&#x6570;&#x500D;&#x5730;&#x5740;&#x5F00;&#x59CB;&#x5B58;&#x50A8;&#xFF0C;**&#x6BD4;&#x5982;<code>struct a</code>&#x91CC;&#x6709;<code>struct b</code>&#x6210;&#x5458;&#xFF0C;<code>b</code>&#x91CC;&#x6709;<code>char&#xFF0C;int&#xFF0C;double</code>&#x7B49;&#x6210;&#x5458;&#xFF0C;&#x90A3;<code>b</code>&#x5B58;&#x50A8;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&#x5E94;&#x8BE5;&#x4ECE;8&#x7684;&#x6574;&#x6570;&#x500D;&#x5F00;&#x59CB;&#x3002;&#x901A;&#x8FC7;<code>struct school</code>&#x6210;&#x5458;&#x5185;&#x5B58;&#x5206;&#x5E03;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#xFF0C;<code>school.name</code>&#x7684;&#x9996;&#x5730;&#x5740;&#x662F;<code>1606416114</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;<code>1606416119</code>&#xFF0C;<code>school.student</code>&#x7684;&#x9996;&#x5730;&#x5740;&#x662F;<code>1606416128</code>&#xFF0C;&#x80FD;&#x88AB;<code>8</code>&#x6574;&#x9664;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;<code>24</code>&#x6574;&#x9664;)&#x3002;</li>
<li>&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x603B;&#x5927;&#x5C0F;&#x5305;&#x62EC;&#x586B;&#x5145;&#x5B57;&#x8282;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6210;&#x5458;&#x51FA;&#x4E86;&#x6EE1;&#x8DB3;&#x4E0A;&#x9762;&#x4E24;&#x6761;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x7B2C;&#x4E09;&#x6761;&#xFF0C;&#x5426;&#x5219;&#x5FC5;&#x987B;&#x5728;&#x6700;&#x540E;&#x586B;&#x5145;&#x4E00;&#x5B9A;&#x5B57;&#x8282;&#x4EE5;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;(&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;<code>struct student</code>&#x5360;&#x7528;&#x5B57;&#x8282;&#x6570;&#x4E3A;<code>24</code>&#x800C;&#x4E0D;&#x662F;<code>20</code>&#x7684;&#x539F;&#x56E0;)&#x3002;</li>
</ol>
<h3 id="&#x5185;&#x5B58;&#x5206;&#x5E03;"><a href="#&#x5185;&#x5B58;&#x5206;&#x5E03;" class="headerlink" title="&#x5185;&#x5B58;&#x5206;&#x5E03;"></a>&#x5185;&#x5B58;&#x5206;&#x5E03;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1c00e16c0db1f129d7b8b87fad27646fdfc393600d20182fa7eb94682601b913" alt="student"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1c00e16c0db1f129d7b8b87fad27646fdfc393600d20182fa7eb94682601b913" alt="school"></p>
<h3 id="&#x6269;&#x5C55;"><a href="#&#x6269;&#x5C55;" class="headerlink" title="&#x6269;&#x5C55;"></a>&#x6269;&#x5C55;</h3><p>&#x7EC6;&#x5FC3;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x80FD;&#x53D1;&#x73B0;<code>&amp;shengli.lilei</code>(&#x7B49;&#x6548;&#x4E8E;<code>shengli.lilei.name</code>)&#x7684;&#x6570;&#x503C;&#x5E76;&#x4E0D;&#x7B49;&#x4E8E;<code>lilei.name</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;<code>struct school shengli</code>&#x91CC;&#x7684;&#x6210;&#x5458;<code>struct student lilei</code> &#x548C; <code>struct student lilei</code>&#x5E76;&#x4E0D;&#x662F;&#x6307;&#x5411;&#x540C;&#x4E00;&#x5757;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x662F;&#x503C;&#x62F7;&#x8D1D;&#x5F00;&#x8F9F;&#x7684;&#x4E00;&#x5757;&#x65B0;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;struct&#x662F;&#x503C;&#x7C7B;&#x578B;&#x800C;&#x4E0D;&#x662F;&#x5F15;&#x7528;&#x7C7B;&#x578B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;&#x8FD8;&#x6709;&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x4E24;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x53D8;&#x91CF;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x662F;&#x5728;&#x5185;&#x5B58;&#x6808;&#x4E0A;&#x8FDE;&#x7EED;&#x5206;&#x914D;&#x7684;&#x3002;</p>
<h2 id="&#x4F4D;&#x57DF;"><a href="#&#x4F4D;&#x57DF;" class="headerlink" title="&#x4F4D;&#x57DF;"></a>&#x4F4D;&#x57DF;</h2><p>&#x7ED3;&#x6784;&#x4F53;&#x4F7F;&#x7528;&#x4F4D;&#x57DF;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x662F;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#xFF0C;&#x4F4D;&#x57DF;&#x6210;&#x5458;&#x4E0D;&#x80FD;&#x5355;&#x72EC;&#x88AB;&#x53D6;<code>sizeof</code>&#x503C;&#x3002;C99&#x89C4;&#x5B9A;<code>int,unsigned int,bool</code>&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x4F4D;&#x57DF;&#x7C7B;&#x578B;&#xFF0C;&#x4F46;&#x7F16;&#x8BD1;&#x5668;&#x51E0;&#x4E4E;&#x90FD;&#x5BF9;&#x6B64;&#x505A;&#x4E86;&#x6269;&#x5C55;&#xFF0C;&#x5141;&#x8BB8;&#x5176;&#x5B83;&#x7C7B;&#x578B;&#x5B58;&#x5728;&#x3002;<strong>&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x542B;&#x6709;&#x4F4D;&#x57DF;&#x5B57;&#x6BB5;&#xFF0C;&#x9664;&#x4E86;&#x8981;&#x9075;&#x5FAA;&#x4E0A;&#x9762;3&#x4E2A;&#x51C6;&#x5219;&#xFF0C;&#x8FD8;&#x8981;&#x9075;&#x5FAA;&#x4EE5;&#x4E0B;4&#x4E2A;&#x89C4;&#x5219;&#xFF1A;</strong></p>
<ol>
<li>&#x5982;&#x679C;&#x76F8;&#x90BB;&#x4F4D;&#x57DF;&#x5B57;&#x7AEF;&#x7684;&#x7C7B;&#x578B;&#x76F8;&#x540C;&#xFF0C;&#x4E14;&#x4F4D;&#x5BBD;&#x4E4B;&#x548C;&#x5C0F;&#x4E8E;&#x7C7B;&#x578B;&#x7684;<code>sizeof</code>&#x5927;&#x5C0F;&#xFF0C;&#x5219;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x5C06;&#x7D27;&#x90BB;&#x524D;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x5B58;&#x50A8;&#xFF0C;&#x76F4;&#x5230;&#x4E0D;&#x80FD;&#x5BB9;&#x7EB3;&#x4E3A;&#x6B62;&#x3002;</li>
<li>&#x5982;&#x679C;&#x76F8;&#x90BB;&#x4F4D;&#x57DF;&#x5B57;&#x6BB5;&#x7684;&#x7C7B;&#x578B;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x4F4D;&#x5BBD;&#x4E4B;&#x548C;&#x5927;&#x4E8E;&#x7C7B;&#x578B;&#x7684;<code>sizeof</code>&#x5927;&#x5C0F;&#xFF0C;&#x5219;&#x540E;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x5C06;&#x4ECE;&#x65B0;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x5143;&#x5F00;&#x59CB;&#xFF0C;&#x5176;&#x504F;&#x79FB;&#x91CF;&#x4E3A;&#x5176;&#x7C7B;&#x578B;&#x5927;&#x5C0F;&#x7684;&#x6574;&#x6570;&#x500D;&#x3002;</li>
<li>&#x5982;&#x679C;&#x76F8;&#x90BB;&#x7684;&#x4F4D;&#x57DF;&#x5B57;&#x6BB5;&#x7684;&#x7C7B;&#x578B;&#x4E0D;&#x540C;&#xFF0C;&#x5219;&#x5404;&#x7F16;&#x8BD1;&#x5668;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x6709;&#x5DEE;&#x5F02;&#xFF0C;VC6&#x91C7;&#x53D6;&#x4E0D;&#x538B;&#x7F29;&#x65B9;&#x5F0F;&#xFF0C;Dev-C++&#x91C7;&#x53D6;&#x538B;&#x7F29;&#x65B9;&#x5F0F;&#x3002;</li>
<li>&#x5982;&#x679C;&#x4F4D;&#x57DF;&#x5B57;&#x6BB5;&#x4E4B;&#x95F4;&#x7A7F;&#x63D2;&#x7740;&#x975E;&#x4F4D;&#x57DF;&#x5B57;&#x6BB5;&#xFF0C;&#x5219;&#x4E0D;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;</li>
</ol>
<p><strong>&#x4E0B;&#x9762;&#x7684;demo&#x4F1A;&#x4E3A;&#x5927;&#x5BB6;&#x89E3;&#x91CA;&#x4EE5;&#x4E0A;&#x89C4;&#x5219;&#xFF1A;</strong></p>
<h3 id="&#x4EE3;&#x7801;-1"><a href="#&#x4EE3;&#x7801;-1" class="headerlink" title="&#x4EE3;&#x7801;"></a>&#x4EE3;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;typedef struct A {</span><br><span class="line">  char f1:3;</span><br><span class="line">  char f2:4;</span><br><span class="line">  char f3:5;</span><br><span class="line">  char f4:4;</span><br><span class="line">}a;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;typedef struct B {</span><br><span class="line">  char  f1:3;</span><br><span class="line">  short f2:13;</span><br><span class="line">}b;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;typedef struct C {</span><br><span class="line">  char f1:3;</span><br><span class="line">  char f2;</span><br><span class="line">  char f3:5;</span><br><span class="line">}c;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;typedef struct D {</span><br><span class="line">  char f1:3;</span><br><span class="line">  char :0;</span><br><span class="line">  char :4;</span><br><span class="line">  char f3:5;</span><br><span class="line">}d;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;typedef struct E {</span><br><span class="line">  int f1:3;</span><br><span class="line">}e;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;int main(int argc, const char * argv[]) {</span><br><span class="line">  @autoreleasepool {</span><br><span class="line">    // insert code here... </span><br><span class="line">    printf(&quot;size of struct A: %lu\n&quot;,sizeof(a));</span><br><span class="line">    printf(&quot;size of struct B: %lu\n&quot;,sizeof(b));</span><br><span class="line">    printf(&quot;size of struct C: %lu\n&quot;,sizeof(c));</span><br><span class="line">    printf(&quot;size of struct D: %lu\n&quot;,sizeof(d));</span><br><span class="line">    printf(&quot;size of struct E: %lu\n&quot;,sizeof(e));</span><br><span class="line">  }</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x8F93;&#x51FA;&#x7ED3;&#x679C;-1"><a href="#&#x8F93;&#x51FA;&#x7ED3;&#x679C;-1" class="headerlink" title="&#x8F93;&#x51FA;&#x7ED3;&#x679C;"></a>&#x8F93;&#x51FA;&#x7ED3;&#x679C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1c00e16c0db1f129d7b8b87fad27646fdfc393600d20182fa7eb94682601b913" alt></p>
<h3 id="&#x89E3;&#x91CA;&#x89C4;&#x5219;-1"><a href="#&#x89E3;&#x91CA;&#x89C4;&#x5219;-1" class="headerlink" title="&#x89E3;&#x91CA;&#x89C4;&#x5219;"></a>&#x89E3;&#x91CA;&#x89C4;&#x5219;</h3><ol>
<li><code>struct A</code>&#x4E2D;&#x6240;&#x6709;&#x4F4D;&#x57DF;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x90FD;&#x4E3A;<code>char</code>&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x53EA;&#x80FD;&#x5BB9;&#x7EB3;<code>f1</code>&#x548C;<code>f2</code>&#xFF0C;<code>f3</code>&#x4ECE;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x5F00;&#x59CB;&#x5B58;&#x50A8;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x5B57;&#x8282;&#x4E0D;&#x80FD;&#x5BB9;&#x7EB3;<code>f4</code>&#xFF0C;&#x6240;&#x4EE5;<code>f4</code>&#x4E5F;&#x8981;&#x4ECE;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x5F00;&#x59CB;&#x5B58;&#x50A8;&#xFF0C;&#x56E0;&#x6B64;<code>sizeof(a)</code>&#x7ED3;&#x679C;&#x4E3A;<code>3</code>&#x3002;</li>
<li><code>struct B</code>&#x4E2D;&#x4F4D;&#x57DF;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x4E0D;&#x540C;&#xFF0C;&#x8FDB;&#x884C;&#x4E86;&#x538B;&#x7F29;&#xFF0C;&#x56E0;&#x6B64;<code>sizeof(b)</code>&#x7ED3;&#x679C;&#x4E3A;<code>2</code>&#xFF08;&#x4E0D;&#x538B;&#x7F29;&#x65B9;&#x5F0F;&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x5F88;&#x62B1;&#x6B49;&#xFF09;&#x3002;</li>
<li><code>struct C</code>&#x4E2D;&#x4F4D;&#x57DF;&#x6210;&#x5458;&#x4E4B;&#x95F4;&#x6709;&#x975E;&#x4F4D;&#x57DF;&#x7C7B;&#x578B;&#x6210;&#x5458;&#xFF0C;&#x4E0D;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#xFF0C;&#x56E0;&#x6B64;<code>sizeof(c)</code>&#x7ED3;&#x679C;&#x4E3A;3&#x3002;</li>
<li><code>struct D</code>&#x4E2D;&#x6709;&#x65E0;&#x540D;&#x4F4D;&#x57DF;&#x6210;&#x5458;&#xFF0C;<code>char f1:3</code>&#x5360;<code>3</code>&#x4E2A;<code>bit</code>&#xFF0C;<code>char :0</code>&#x79FB;&#x5230;&#x4E0B;<code>1</code>&#x4E2A;&#x5B57;&#x8282;&#xFF08;&#x79FB;&#x52A8;&#x5355;&#x4F4D;&#x548C;&#x5177;&#x4F53;&#x4F4D;&#x57DF;&#x7C7B;&#x578B;&#x6709;&#x5173;&#xFF0C;<code>short</code>&#x79FB;&#x5230;&#x4E0B;<code>2</code>&#x4E2A;&#x5B57;&#x8282;&#xFF0C;<code>int</code>&#x79FB;&#x5230;&#x4E0B;<code>4</code>&#x4E2A;&#x5B57;&#x8282;&#xFF09;,<code>char :4</code>&#x5360;<code>4</code>&#x4E2A;<code>bit</code>,&#x7136;&#x540E;&#x4E0D;&#x80FD;&#x5BB9;&#x7EB3;<code>char f3:5</code>&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x5B58;&#x5230;&#x4E0B;<code>1</code>&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x56E0;&#x6B64;<code>sizeof(d)</code>&#x7ED3;&#x679C;&#x4E3A;<code>3</code>&#x3002;</li>
<li>&#x53EF;&#x80FD;&#x6709;&#x4EBA;&#x4F1A;&#x7591;&#x60D1;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;<code>sizeof(e)</code>&#x7ED3;&#x679C;&#x4E3A;<code>4</code>&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x662F;&#x53EA;&#x5360;&#x7528;<code>1</code>&#x4E2A;&#x5B57;&#x8282;&#x4E48;&#xFF1F;&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;<strong>&#x51C6;&#x5219;3</strong>&#x3002;</li>
</ol>
<h3 id="&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="&#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><ol>
<li>&#x4F4D;&#x57DF;&#x7684;&#x5730;&#x5740;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5141;&#x8BB8;&#x5C06;&amp;&#x8FD0;&#x7B97;&#x7B26;&#x7528;&#x4E8E;&#x4F4D;&#x57DF;&#x3002;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x6307;&#x5411;&#x4F4D;&#x57DF;&#x7684;&#x6307;&#x9488;&#x4E5F;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#x4F4D;&#x57DF;&#x7684;&#x6570;&#x7EC4;(&#x6570;&#x7EC4;&#x662F;&#x79CD;&#x7279;&#x6B8A;&#x6307;&#x9488;)&#x3002;</li>
<li>&#x4F4D;&#x57DF;&#x4E0D;&#x80FD;&#x4F5C;&#x4E3A;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x3002;</li>
<li>&#x4F4D;&#x57DF;&#x4EE5;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x578B;&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;&#x4E14;&#x4F4D;&#x57DF;&#x7684;&#x957F;&#x5EA6;&#x4E0D;&#x80FD;&#x8D85;&#x8FC7;&#x6240;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x4F8B;&#x5982;&#x5B9A;&#x4E49;<code>int a:33</code>&#x662F;&#x4E0D;&#x88AB;&#x5141;&#x8BB8;&#x7684;&#x3002;</li>
<li>&#x4F4D;&#x57DF;&#x53EF;&#x4EE5;&#x4E0D;&#x6307;&#x5B9A;&#x4F4D;&#x57DF;&#x540D;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x65E0;&#x540D;&#x7684;&#x4F4D;&#x57DF;&#x3002;&#x65E0;&#x540D;&#x7684;&#x4F4D;&#x57DF;&#x53EA;&#x7528;&#x505A;&#x586B;&#x5145;&#x6216;&#x8C03;&#x6574;&#x4F4D;&#x7F6E;&#xFF0C;&#x5360;&#x4F4D;&#x5927;&#x5C0F;&#x53D6;&#x51B3;&#x4E8E;&#x8BE5;&#x7C7B;&#x578B;&#x3002;&#x4F8B;&#x5982;<code>char:0</code>&#x8868;&#x793A;&#x6574;&#x4E2A;&#x4F4D;&#x57DF;&#x5411;&#x540E;&#x63A8;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x5373;&#x8BE5;&#x65E0;&#x540D;&#x4F4D;&#x57DF;&#x540E;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x57DF;&#x4ECE;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#x5F00;&#x59CB;&#x5B58;&#x653E;&#xFF0C;&#x540C;&#x7406;<code>short:0</code>&#x548C;<code>int:0</code>&#x5206;&#x522B;&#x4EE3;&#x8868;&#x6574;&#x4E2A;&#x4F4D;&#x57DF;&#x5411;&#x540E;&#x63A8;&#x4E24;&#x4E2A;&#x548C;&#x56DB;&#x4E2A;&#x5B57;&#x8282;&#x3002;&#x5F53;&#x7A7A;&#x4F4D;&#x57DF;&#x7684;&#x957F;&#x5EA6;&#x4E3A;&#x5177;&#x4F53;&#x6570;&#x503C;N&#x65F6;(&#x4F8B;&#x5982; <code>int:2</code>),&#x8BE5;&#x53D8;&#x91CF;&#x4EC5;&#x7528;&#x6765;&#x5360;N&#x4F4D;&#x3002;</li>
</ol>
<h2 id="pragma-pack&#x9884;&#x5904;&#x7406;&#x5B8F;"><a href="#pragma-pack&#x9884;&#x5904;&#x7406;&#x5B8F;" class="headerlink" title="pragma pack&#x9884;&#x5904;&#x7406;&#x5B8F;"></a>pragma pack&#x9884;&#x5904;&#x7406;&#x5B8F;</h2><p>&#x7F16;&#x8BD1;&#x5668;&#x7684;<code>#pragma pack</code>&#x6307;&#x4EE4;&#x4E5F;&#x662F;&#x7528;&#x6765;&#x8C03;&#x6574;&#x7ED3;&#x6784;&#x4F53;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x7684;&#xFF0C;&#x4E0D;&#x540C;&#x7F16;&#x8BD1;&#x5668;&#x540D;&#x79F0;&#x548C;&#x7528;&#x6CD5;&#x7565;&#x6709;&#x4E0D;&#x540C;&#x3002;&#x4F7F;&#x7528;&#x4F2A;&#x6307;&#x4EE4;<code>#pragma pack(n)</code>&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x5C06;&#x6309;&#x7167;n&#x4E2A;&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#xFF0C;&#x5176;&#x53D6;&#x503C;&#x4E3A;1&#x3001;2&#x3001;4&#x3001;8&#x3001;16&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;8&#xFF0C;&#x4F7F;&#x7528;&#x4F2A;&#x6307;&#x4EE4;<code>#pragma pack()</code>&#xFF0C;&#x53D6;&#x6D88;&#x81EA;&#x5B9A;&#x4E49;&#x5B57;&#x8282;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;<code>#pragma pack(1)</code>,&#x5C31;&#x662F;&#x8BA9;&#x7ED3;&#x6784;&#x4F53;&#x6CA1;&#x6709;&#x586B;&#x5145;&#x5B57;&#x8282;&#xFF0C;&#x5B9E;&#x73B0;&#x7A7A;&#x95F4;&#x201C;&#x65E0;&#x7F1D;&#x5B58;&#x50A8;&#x201D;&#xFF0C;&#x8FD9;&#x5BF9;&#x8DE8;&#x5E73;&#x53F0;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x6765;&#x8BF4;&#x662F;&#x53CB;&#x597D;&#x548C;&#x517C;&#x5BB9;&#x7684;&#x3002;<strong>&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x542B;&#x6709;#pragma pack&#x9884;&#x5904;&#x7406;&#x5B8F;&#xFF0C;&#x9664;&#x4E86;&#x8981;&#x9075;&#x5FAA;&#x4E0A;&#x9762;3&#x4E2A;&#x51C6;&#x5219;&#xFF0C;&#x8FD8;&#x8981;&#x9075;&#x5FAA;&#x4EE5;&#x4E0B;2&#x4E2A;&#x89C4;&#x5219;&#xFF1A;</strong></p>
<ol>
<li>&#x5BF9;&#x4E8E;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#x5B58;&#x653E;&#x7684;&#x8D77;&#x59CB;&#x5730;&#x5740;&#x7684;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x5982;&#x679C;n&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x8BE5;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x6240;&#x5360;&#x7528;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x504F;&#x79FB;&#x91CF;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x9ED8;&#x8BA4;&#x7684;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x679C;n&#x5C0F;&#x4E8E;&#x8BE5;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x6240;&#x5360;&#x7528;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x504F;&#x79FB;&#x91CF;&#x4E3A;n&#x7684;&#x500D;&#x6570;&#xFF0C;&#x4E0D;&#x7528;&#x6EE1;&#x8DB3;&#x9ED8;&#x8BA4;&#x7684;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x3002;&#x5373;&#x662F;&#x8BF4;&#xFF0C;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#x7684;&#x504F;&#x79FB;&#x91CF;&#x5E94;&#x8BE5;&#x53D6;&#x4E8C;&#x8005;&#x7684;&#x6700;&#x5C0F;&#x503C;&#xFF0C;&#x516C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;  </li>
</ol>
<p><code>offsetof(item) = min(n, sizeof(item))</code><br>2. &#x5BF9;&#x4E8E;&#x7ED3;&#x6784;&#x4F53;&#x7684;&#x603B;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x679C;n&#x5927;&#x4E8E;&#x6240;&#x6709;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x6240;&#x5360;&#x7528;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x7ED3;&#x6784;&#x7684;&#x603B;&#x5927;&#x5C0F;&#x5FC5;&#x987B;&#x4E3A;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x6700;&#x5927;&#x6210;&#x5458;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x6570;&#x7684;&#x500D;&#x6570;&#xFF0C;&#x5426;&#x5219;&#x5FC5;&#x987B;&#x4E3A;n&#x7684;&#x500D;&#x6570;&#x3002;</p>
<h3 id="&#x7528;&#x6CD5;"><a href="#&#x7528;&#x6CD5;" class="headerlink" title="&#x7528;&#x6CD5;"></a>&#x7528;&#x6CD5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;#pragma pack(push)  //packing stack&#x5165;&#x6808;&#xFF0C;&#x8BBE;&#x7F6E;&#x5F53;&#x524D;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;</span><br><span class="line">#pragma pack(pop)   //packing stack&#x51FA;&#x6808;&#xFF0C;&#x53D6;&#x6D88;&#x5F53;&#x524D;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;</span><br><span class="line">#pragma pack(n)     //n=1,2,4,8,16&#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x7F6E;&#x6309;n&#x5B57;&#x8282;&#x5BF9;&#x9F50;</span><br><span class="line">#pragma pack()      //&#x7B49;&#x6548;&#x4E8E;pack(pop)</span><br><span class="line">#pragma pack(push,n)//&#x7B49;&#x6548;&#x4E8E;pack(push) + pack(n)</span><br></pre></td></tr></table></figure>

<h3 id="&#x4EE3;&#x7801;-2"><a href="#&#x4EE3;&#x7801;-2" class="headerlink" title="&#x4EE3;&#x7801;"></a>&#x4EE3;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;#pragma pack(4)</span><br><span class="line"></span><br><span class="line">typedef struct F {</span><br><span class="line">  int f1;</span><br><span class="line">  double f2;</span><br><span class="line">  char f3;</span><br><span class="line">}f;</span><br><span class="line"></span><br><span class="line">#pragma pack()</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;#pragma pack(16)</span><br><span class="line"></span><br><span class="line">typedef struct G {</span><br><span class="line">  int f1;</span><br><span class="line">  double f2;</span><br><span class="line">  char f3;</span><br><span class="line">}g;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;int main(int argc, const char * argv[]) {</span><br><span class="line">  @autoreleasepool {</span><br><span class="line">    // insert code here...</span><br><span class="line">    printf(&quot;size of struct D: %lu\n&quot;,sizeof(f));</span><br><span class="line">    printf(&quot;size of struct E: %lu\n&quot;,sizeof(g));</span><br><span class="line">  }</span><br><span class="line">  return 0;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x8F93;&#x51FA;&#x7ED3;&#x679C;-2"><a href="#&#x8F93;&#x51FA;&#x7ED3;&#x679C;-2" class="headerlink" title="&#x8F93;&#x51FA;&#x7ED3;&#x679C;"></a>&#x8F93;&#x51FA;&#x7ED3;&#x679C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1c00e16c0db1f129d7b8b87fad27646fdfc393600d20182fa7eb94682601b913" alt></p>
<h3 id="&#x89E3;&#x91CA;&#x89C4;&#x5219;-2"><a href="#&#x89E3;&#x91CA;&#x89C4;&#x5219;-2" class="headerlink" title="&#x89E3;&#x91CA;&#x89C4;&#x5219;"></a>&#x89E3;&#x91CA;&#x89C4;&#x5219;</h3><ol>
<li><code>struct F</code>&#x8BBE;&#x7F6E;&#x7684;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x4E3A;<code>4</code>&#xFF0C;<code>min(4, sizeof(int)) = 4</code>,<code>f1</code>&#x5360;<code>4</code>&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x504F;&#x79FB;&#x91CF;&#x4E3A;<code>0</code>&#xFF0C;<code>min(4, sizeof(double)) = 4</code>&#xFF0C;<code>f2</code>&#x5360;<code>4</code>&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x504F;&#x79FB;&#x91CF;&#x4E3A;<code>4</code>&#xFF0C;<code>min(4, sizeof(char)) = 1</code>&#xFF0C;<code>f3</code>&#x5360;<code>1</code>&#x4E2A;&#x5B57;&#x8282;&#xFF0C;&#x504F;&#x79FB;&#x91CF;&#x4E3A;<code>12</code>&#xFF0C;&#x6700;&#x540E;&#x6574;&#x4E2A;&#x7ED3;&#x6784;&#x4F53;&#x6EE1;&#x8DB3;<strong>&#x51C6;&#x5219;3</strong>&#xFF0C;<code>sizeof(f) = 16</code>&#x3002;</li>
<li><code>struct G</code>&#x8BBE;&#x7F6E;&#x7684;&#x5BF9;&#x9F50;&#x65B9;&#x5F0F;&#x4E3A;<code>16</code>&#xFF0C;&#x6BD4;&#x7ED3;&#x6784;&#x4F53;&#x4E2D;&#x6240;&#x6709;&#x6210;&#x5458;&#x7C7B;&#x578B;&#x90FD;&#x8981;&#x5927;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x6CA1;&#x6709;&#x751F;&#x6548;&#xFF0C;&#x56E0;&#x6B64;<code>sizeof(f) = 24</code>&#x3002;</li>
</ol>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p><strong>&#x4F4D;&#x57DF;</strong>&#x548C;**#pragma pack&#x9884;&#x5904;&#x7406;&#x5B8F;<strong>&#x7684;&#x7ED3;&#x6784;&#x4F53;&#x5728;&#x9075;&#x5FAA;</strong>3&#x4E2A;&#x51C6;&#x5219;**&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x76F8;&#x5E94;&#x89C4;&#x5219;&#x4E5F;&#x8981;&#x9075;&#x5B88;&#x3002;&#x7ED3;&#x6784;&#x4F53;&#x6210;&#x5458;&#x5728;&#x6392;&#x5217;&#x65F6;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x8981;&#x9075;&#x5FAA;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x6392;&#x5217;&#xFF0C;&#x8FD9;&#x6837;&#x80FD;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x8282;&#x7701;&#x7A7A;&#x95F4;&#x3002;</p>
<h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><p><a href="/external_links/3620812daaf06c0e511e180b6bf1179d.html" target="blank" rel="noopener">blog.sina.cn/dpool/blog/&#x2026;</a><br><a href="/external_links/cdc83074b11570ab1c8ef51db62e8187.html" target="blank" rel="noopener">c.biancheng.net/cpp/html/46&#x2026;</a><br><a href="/external_links/7ca5e57806c36909f561c9fc4fb0a14d.html" target="blank" rel="noopener">hubingforever.blog.163.com/blog/static&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/7352d664f760162b90f51c1d69a11c55.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903537629986824.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903537629986824.html" itemprop="url">SOAP与WSDL详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-20T10:02:09+08:00">
                2017-12-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>SOAP&#x662F;&#x6211;&#x4EEC;Web Service&#x4E2D;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x4E00;&#x4E2A;&#x534F;&#x8BAE;&#xFF0C;SOAP&#x786E;&#x5B9A;&#x4E86;&#x4E00;&#x79CD;&#x901A;&#x8FC7;XML&#x5B9E;&#x73B0;&#x8DE8;&#x8BED;&#x8A00;&#x3001;&#x8DE8;&#x673A;&#x5668;&#x4F20;&#x8F93;&#x8C03;&#x7528;&#x7684;&#x534F;&#x8BAE;&#xFF0C;WSDL&#x66F4;&#x50CF;&#x662F;&#x6240;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x4E00;&#x4E2A;&#x89C4;&#x8303;&#x3001;&#x4E00;&#x4E2A;&#x6587;&#x6863;&#xFF0C;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#x4ECB;&#x7ECD;&#x68B3;&#x7406;&#x4E00;&#x4E0B;&#x4ED6;&#x4EEC;&#x7684;&#x89C4;&#x5219;&#x4E0E;&#x903B;&#x8F91;&#xFF0C;&#x66F4;&#x597D;&#x7684;&#x8BA4;&#x8BC6;&#x4E00;&#x4E0B;SOAP&#x534F;&#x8BAE;&#x53CA;WSDL&#x63CF;&#x8FF0;&#x6587;&#x4EF6;&#x3002;  </p>
<h2 id="SOAP&#x7B80;&#x5355;&#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x534F;&#x8BAE;"><a href="#SOAP&#x7B80;&#x5355;&#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x534F;&#x8BAE;" class="headerlink" title="SOAP&#x7B80;&#x5355;&#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x534F;&#x8BAE;"></a>SOAP&#x7B80;&#x5355;&#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x534F;&#x8BAE;</h2><p><strong>SOAP(Simple Object Access Protocol)&#x7B80;&#x5355;&#x5BF9;&#x8C61;&#x8BBF;&#x95EE;&#x534F;&#x8BAE;</strong>&#x662F;&#x4EA4;&#x6362;&#x6570;&#x636E;&#x7684;&#x4E00;&#x79CD;&#x89C4;&#x8303;&#xFF0C;&#x5728;Web Service&#x4E2D;&#xFF0C;&#x4EA4;&#x6362;&#x5E26;&#x7ED3;&#x6784;&#x4FE1;&#x606F;&#x3002;&#x53EF;&#x57FA;&#x4E8E;HTTP&#x7B49;&#x534F;&#x8BAE;&#xFF0C;&#x4F7F;&#x7528;XML&#x683C;&#x5F0F;&#x4F20;&#x8F93;&#xFF0C;&#x62BD;&#x8C61;&#x4E8E;&#x8BED;&#x8A00;&#x5B9E;&#x73B0;&#x3001;&#x5E73;&#x53F0;&#x548C;&#x786C;&#x4EF6;&#x3002;&#x5373;&#x591A;&#x8BED;&#x8A00;&#x5305;&#x62EC;PHP&#x3001;Java&#x3001;.Net&#x5747;&#x53EF;&#x652F;&#x6301;&#x3002;</p>
<p>&#x4F18;&#x70B9;&#x662F;&#x8DE8;&#x8BED;&#x8A00;&#xFF0C;&#x975E;&#x5E38;&#x9002;&#x5408;&#x5F02;&#x6B65;&#x901A;&#x4FE1;&#x548C;&#x9488;&#x5BF9;&#x677E;&#x8026;&#x5408;&#x7684;C/S&#xFF0C;&#x7F3A;&#x70B9;&#x662F;&#x5FC5;&#x987B;&#x505A;&#x5F88;&#x591A;&#x8FD0;&#x884C;&#x65F6;&#x68C0;&#x67E5;&#x3002;</p>
<h3 id="&#x76F8;&#x5173;&#x6982;&#x5FF5;"><a href="#&#x76F8;&#x5173;&#x6982;&#x5FF5;" class="headerlink" title="&#x76F8;&#x5173;&#x6982;&#x5FF5;"></a>&#x76F8;&#x5173;&#x6982;&#x5FF5;</h3><ul>
<li><strong>SOAP&#x5C01;&#x88C5;(envelop)</strong>,&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;&#x63CF;&#x8FF0;&#x6D88;&#x606F;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x662F;&#x8C01;&#x53D1;&#x9001;&#x7684;&#xFF0C;&#x8C01;&#x5E94;&#x5F53;&#x63A5;&#x53D7;&#x5E76;&#x5904;&#x7406;&#x3002;</li>
<li><strong>SOAP&#x7F16;&#x7801;&#x89C4;&#x5219;(encoding rules)</strong>,&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x79CD;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x673A;&#x5236;&#xFF0C;&#x8868;&#x793A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</li>
<li><strong>SOAP RPC&#x8868;&#x793A;(RPC representation)</strong>&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x534F;&#x5B9A;&#xFF0C;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x8FDC;&#x7A0B;&#x8FC7;&#x7A0B;&#x8C03;&#x7528;&#x548C;&#x5E94;&#x7B54;&#x3002;</li>
<li><strong>SOAP&#x7ED1;&#x5B9A;(binding)</strong>&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;SOAP&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x534F;&#x8BAE;&#x4EA4;&#x6362;&#x4FE1;&#x606F;&#x3002;&#x4F7F;&#x7528;HTTP/TCP/UDP&#x534F;&#x8BAE;&#x90FD;&#x53EF;&#x4EE5;&#x3002;</li>
</ul>
<h3 id="&#x57FA;&#x672C;&#x7ED3;&#x6784;"><a href="#&#x57FA;&#x672C;&#x7ED3;&#x6784;" class="headerlink" title="&#x57FA;&#x672C;&#x7ED3;&#x6784;"></a>&#x57FA;&#x672C;&#x7ED3;&#x6784;</h3><p>&#x793A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;soap:Envelope</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;xmlns:soap=&quot;http://www.w3.org/2001/12/soap-envelope&quot;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;soap:encodingStyle=&quot;http://www.w3.org/2001/12/soap-encoding&quot;&gt;</span><br><span class="line">&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:Header&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/soap:Header&gt;</span><br><span class="line">&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:Body&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:Fault&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;...</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/soap:Fault&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/soap:Body&gt;</span><br><span class="line">&lt;/soap:Envelope&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x6761;SOAP&#x6D88;&#x606F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x7684;XML&#x6587;&#x6863;&#xFF0C;Envelope&#x5143;&#x7D20;&#x4E0E;Body&#x5143;&#x7D20;&#xFF08;&#x5305;&#x542B;&#x8C03;&#x7528;&#x548C;&#x54CD;&#x5E94;&#x4FE1;&#x606F;&#xFF09;&#x5FC5;&#x987B;&#x5B58;&#x5728;&#xFF0C;Header&#x5143;&#x7D20;&#xFF08;&#x5305;&#x542B;&#x5934;&#x90E8;&#x4FE1;&#x606F;&#xFF09;&#x548C;Fault&#x5143;&#x7D20;&#xFF08;&#x63D0;&#x4F9B;&#x6709;&#x5173;&#x5728;&#x5904;&#x7406;&#x6B64;&#x6D88;&#x606F;&#x6240;&#x53D1;&#x751F;&#x7684;&#x9519;&#x8BEF;&#x7684;&#x4FE1;&#x606F;&#xFF09;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x53EF;&#x9009;&#x5B58;&#x5728;</p>
<h4 id="SOAP-Envelope&#x5143;&#x7D20;"><a href="#SOAP-Envelope&#x5143;&#x7D20;" class="headerlink" title="SOAP Envelope&#x5143;&#x7D20;"></a>SOAP Envelope&#x5143;&#x7D20;</h4><p>SOAP&#x6D88;&#x606F;&#x7684;&#x6839;&#x5143;&#x7D20;&#xFF0C;&#x53EF;&#x628A;XML&#x6587;&#x6863;&#x5B9A;&#x4E49;&#x4E3A;SOAP&#x6D88;&#x606F;</p>
<h4 id="&#x547D;&#x540D;&#x7A7A;&#x95F4;"><a href="#&#x547D;&#x540D;&#x7A7A;&#x95F4;" class="headerlink" title="&#x547D;&#x540D;&#x7A7A;&#x95F4;"></a>&#x547D;&#x540D;&#x7A7A;&#x95F4;</h4><p>xmlns&#xFF1A;SOAP&#x547D;&#x540D;&#x7A7A;&#x95F4;,&#x56FA;&#x5B9A;&#x4E0D;&#x53D8;&#x3002;</p>
<p>SOAP&#x5728;&#x9ED8;&#x8BA4;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;3&#x4E2A;&#x5C5E;&#x6027;&#xFF1A;actor&#xFF0C;mustUnderstand&#xFF0C;encodingStyle&#x3002;&#x8FD9;&#x4E9B;&#x88AB;&#x5B9A;&#x4E49;&#x5728;SOAP&#x5934;&#x90E8;&#x7684;&#x5C5E;&#x6027;&#x53EF;&#x5B9A;&#x4E49;&#x5BB9;&#x5668;&#x5982;&#x4F55;&#x5BF9;SOAP&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
<ul>
<li>mustUnderstand&#x5C5E;&#x6027;&#x2014;&#x2014;&#x7528;&#x4E8E;&#x6807;&#x8BC6;&#x6807;&#x9898;&#x9879;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x7684;&#x63A5;&#x53D7;&#x8005;&#x6765;&#x8BF4;&#x662F;&#x5F3A;&#x5236;&#x7684;&#x8FD8;&#x662F;&#x53EF;&#x9009;&#x7684;&#x3002;&#xFF08;0&#x53EF;&#x9009;1&#x5F3A;&#x5236;&#xFF09;<code>soap:mustUnderstand=&quot;0/1&quot;</code></li>
<li>SOAP&#x7684;actor&#x5C5E;&#x6027;&#x53EF;&#x7528;&#x4E8E;&#x5C06;Header&#x5143;&#x7D20;&#x5BFB;&#x5740;&#x5230;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7AEF;&#x70B9; <code>soap:actor=&quot;URI&quot;</code></li>
<li>SOAP&#x7684;encodingStyle&#x5C5E;&#x6027;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x5728;&#x6587;&#x6863;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x6B64;&#x5C5E;&#x6027;&#x53EF;&#x51FA;&#x73B0;&#x5728;&#x4EFB;&#x4F55;SOAP&#x5143;&#x7D20;&#x4E2D;&#xFF0C;&#x5E76;&#x4F1A;&#x88AB;&#x5E94;&#x7528;&#x5230;&#x5143;&#x7D20;&#x7684;&#x5185;&#x5BB9;&#x53CA;&#x5143;&#x7D20;&#x7684;&#x6240;&#x6709;&#x5B50;&#x5143;&#x7D20;&#x4E0A;&#x3002;SOAP&#x6D88;&#x606F;&#x6CA1;&#x6709;&#x9ED8;&#x8BA4;&#x7684;&#x7F16;&#x7801;&#x65B9;&#x5F0F;&#x3002;<code>soap:encodingstyle=&quot;URI&quot;</code></li>
</ul>
<h4 id="SOAP-Header&#x5143;&#x7D20;"><a href="#SOAP-Header&#x5143;&#x7D20;" class="headerlink" title="SOAP Header&#x5143;&#x7D20;"></a>SOAP Header&#x5143;&#x7D20;</h4><p>&#x53EF;&#x9009;&#x7684;SOAP Header&#x5143;&#x7D20;&#x53EF;&#x5305;&#x542B;&#x6709;&#x5173;SOAP&#x6D88;&#x606F;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E13;&#x7528;&#x4FE1;&#x606F;&#x3002;&#x5982;&#x679C;Header&#x5143;&#x7D20;&#x88AB;&#x63D0;&#x4F9B;&#xFF0C;&#x5219;&#x5B83;&#x5FC5;&#x987B;&#x662F;Envelope&#x5143;&#x7D20;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B50;&#x5143;&#x7D20;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;soap:Header&gt;</span><br><span class="line">&#xA0;&#xA0; &lt;m:Trans xmlns:m=&quot;http://www.w3schools.com/transaction/&quot;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;soap:mustUnderstand=&quot;1&quot;&gt;234 #&#x8868;&#x793A;&#x5904;&#x7406;&#x6B64;&#x5934;&#x90E8;&#x7684;&#x63A5;&#x53D7;&#x8005;&#x5FC5;&#x987B;&#x8BA4;&#x53EF;&#x6B64;&#x5143;&#x7D20;&#xFF0C;&#x5047;&#x5982;&#x6B64;&#x5143;&#x7D20;&#x63A5;&#x53D7;&#x8005;&#x65E0;&#x6CD5;&#x8BA4;&#x53EF;&#x6B64;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x5728;&#x5904;&#x7406;&#x6B64;&#x5934;&#x90E8;&#x65F6;&#x5FC5;&#x987B;&#x5931;&#x6548;</span><br><span class="line">&#xA0;&#xA0; &lt;/m:Trans&gt;</span><br><span class="line">&lt;/soap:Heaser&gt;</span><br></pre></td></tr></table></figure>

<h4 id="SOAP-Body&#x5143;&#x7D20;"><a href="#SOAP-Body&#x5143;&#x7D20;" class="headerlink" title="SOAP Body&#x5143;&#x7D20;"></a>SOAP Body&#x5143;&#x7D20;</h4><p>&#x5FC5;&#x987B;&#x7684;SOAP Body&#x5143;&#x7D20;&#x53EF;&#x5305;&#x542B;&#x6253;&#x7B97;&#x4F20;&#x9001;&#x5230;&#x6D88;&#x606F;&#x6700;&#x7EC8;&#x7AEF;&#x70B9;&#x7684;&#x5B9E;&#x9645;SOAP&#x6D88;&#x606F;&#x3002;SOAP Body&#x5143;&#x7D20;&#x7684;&#x76F4;&#x63A5;&#x5B50;&#x5143;&#x7D20;&#x53EF;&#x4EE5;&#x4F7F;&#x5408;&#x683C;&#x7684;&#x547D;&#x540D;&#x7A7A;&#x95F4;</p>
<h4 id="SOAP-Fault&#x5143;&#x7D20;"><a href="#SOAP-Fault&#x5143;&#x7D20;" class="headerlink" title="SOAP Fault&#x5143;&#x7D20;"></a>SOAP Fault&#x5143;&#x7D20;</h4><p>&#x7528;&#x4E8E;&#x5B58;&#x7559;SOAP&#x6D88;&#x606F;&#x7684;&#x9519;&#x8BEF;&#x548C;&#x72B6;&#x6001;&#x6D88;&#x606F;&#xFF0C;&#x53EF;&#x9009;&#x7684;SOAP Fault&#x5143;&#x7D20;&#x7528;&#x4E8E;&#x6307;&#x793A;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x3002;&#x5982;&#x679C;&#x5DF2;&#x63D0;&#x4F9B;&#x4E86;Fault&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x5B83;&#x5FC5;&#x987B;&#x662F;Body&#x5143;&#x7D20;&#x7684;&#x5B50;&#x5143;&#x7D20;&#xFF0C;&#x5728;&#x4E00;&#x6761;SOAP&#x6D88;&#x606F;&#x4E2D;&#xFF0C;Fault&#x5143;&#x7D20;&#x53EA;&#x80FD;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#x3002;</p>
<p>SOAP Fault&#x5B50;&#x5143;&#x7D20;&#xFF1A;</p>
<ul>
<li>&#x4F9B;&#x8BC6;&#x522B;&#x969C;&#x788D;&#x7684;&#x4EE3;&#x7801;</li>
<li>&#x53EF;&#x4F9B;&#x4EBA;&#x9605;&#x8BFB;&#x7684;&#x6709;&#x5173;&#x969C;&#x788D;&#x7684;&#x8BF4;&#x660E;</li>
<li>&#x6709;&#x5173;&#x662F;&#x8C01;&#x5F15;&#x53D1;&#x6545;&#x969C;&#x7684;&#x4FE1;&#x606F;</li>
<li>&#x5B58;&#x7559;&#x6D89;&#x53CA;Body&#x5143;&#x7D20;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E13;&#x7528;&#x9519;&#x8BEF;&#x4FE1;&#x606F;</li>
</ul>
<p>faultcode&#x503C;&#x63CF;&#x8FF0;&#xFF1A;</p>
<ul>
<li>versionMismatch SOAP Envelope&#x7684;&#x65E0;&#x6548;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#x88AB;&#x53D1;&#x73B0;</li>
<li>mustUnderstand Header&#x5143;&#x7D20;&#x7684;&#x4E00;&#x4E2A;&#x76F4;&#x63A5;&#x5B50;&#x5143;&#x7D20;(mustUnderstand=&#x201D;1&#x2032;)&#x65E0;&#x6CD5;&#x88AB;&#x7406;&#x89E3;</li>
<li>Client &#x6D88;&#x606F;&#x88AB;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x6784;&#x6210;&#xFF0C;&#x6216;&#x5305;&#x542B;&#x4E0D;&#x6B63;&#x786E;&#x7684;&#x4FE1;&#x606F;</li>
<li>Server &#x670D;&#x52A1;&#x5668;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x6B64;&#x65E0;&#x6CD5;&#x5904;&#x7406;&#x8FDB;&#x884C;&#x4E0B;&#x53BB;</li>
</ul>
<h2 id="WSDL&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;"><a href="#WSDL&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;" class="headerlink" title="WSDL&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;"></a>WSDL&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;</h2><p><strong>WSDL(Web Services Description Language)&#x7F51;&#x7EDC;&#x670D;&#x52A1;&#x63CF;&#x8FF0;&#x8BED;&#x8A00;</strong>&#xFF0C;WSDL &#x662F;&#x4E00;&#x79CD;&#x4F7F;&#x7528; XML &#x7F16;&#x5199;&#x7684;&#x6587;&#x6863;&#x3002;&#x8FD9;&#x79CD;&#x6587;&#x6863;&#x53EF;&#x63CF;&#x8FF0;&#x67D0;&#x4E2A; Web Service&#x3002;</p>
<h2 id="&#x57FA;&#x672C;&#x7ED3;&#x6784;-1"><a href="#&#x57FA;&#x672C;&#x7ED3;&#x6784;-1" class="headerlink" title="&#x57FA;&#x672C;&#x7ED3;&#x6784;"></a>&#x57FA;&#x672C;&#x7ED3;&#x6784;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;definitions&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;types&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; definition of types........</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/types&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;message&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; definition of a message....</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/message&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;portType&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; definition of a port.......</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/portType&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;binding&gt;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; definition of a binding....</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/binding&gt;</span><br><span class="line">&lt;/definitions&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x4E2A;WSDL&#x6587;&#x6863;&#x901A;&#x5E38;&#x5305;&#x542B;7&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x5373;types&#x3001;import&#x3001;message&#x3001;portType&#x3001;operation&#x3001;binding&#x3001;service&#x5143;&#x7D20;&#x3002;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x5D4C;&#x5957;&#x5728;definitions&#x5143;&#x7D20;&#x4E2D;&#xFF0C;definitions&#x662F;WSDL&#x6587;&#x6863;&#x7684;&#x6839;&#x5143;&#x7D20;&#x3002;</p>
<h3 id="&#x7279;&#x5B9A;&#x5B9E;&#x4F8B;&#x5256;&#x6790;"><a href="#&#x7279;&#x5B9A;&#x5B9E;&#x4F8B;&#x5256;&#x6790;" class="headerlink" title="&#x7279;&#x5B9A;&#x5B9E;&#x4F8B;&#x5256;&#x6790;"></a>&#x7279;&#x5B9A;&#x5B9E;&#x4F8B;&#x5256;&#x6790;</h3><p>&#x4EE5;&#x76DB;&#x4ED8;&#x901A;&#x7684;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x4E3A;&#x4F8B;&#xFF0C;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x6574;&#x4E2A;wsdl&#x63CF;&#x8FF0;&#x6587;&#x4EF6;&#xFF0C;&#x7F51;&#x5740;&#x5982;&#x4E0B;<a href="/external_links/5ad1252235d221ca2dcb8ca10c589e0e.html" target="blank" rel="noopener">http://cardpay.shengpay.com/api-acquire-channel/services/receiveOrderService?wsdl</a></p>
<h4 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h4><p>&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x67D0;&#x79CD;&#x7C7B;&#x578B;&#x7CFB;&#x7EDF;(&#x4E00;&#x822C;&#x5730;&#x4F7F;&#x7528;XML Schema&#x4E2D;&#x7684;&#x7C7B;&#x578B;&#x7CFB;&#x7EDF;)&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;xs:element name=&quot;receB2COrderRequest&quot; type=&quot;tns:ReceB2COrderRequest&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&lt;xs:element name=&quot;receB2COrderResponse&quot; type=&quot;tns:ReceB2COrderResponse&quot;/&gt;</span><br><span class="line">&#xA0;</span><br><span class="line">&lt;xs:complexType name=&quot;ReceB2COrderRequest&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;buyerContact&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;.......</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;</span><br><span class="line">&lt;xs:complexType name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;arg0&quot; type=&quot;tns:ReceB2COrderRequest&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&lt;/xs:complexType&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Message"><a href="#Message" class="headerlink" title="Message"></a>Message</h4><p>&#x901A;&#x4FE1;&#x6D88;&#x606F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x62BD;&#x8C61;&#x7C7B;&#x578B;&#x5316;&#x5B9A;&#x4E49;&#x3002;&#x4F7F;&#x7528;Types&#x6240;&#x5B9A;&#x4E49;&#x7684;&#x7C7B;&#x578B;&#x6765;&#x5B9A;&#x4E49;&#x6574;&#x4E2A;&#x6D88;&#x606F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;wsdl:message name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:part element=&quot;tns:receiveB2COrder&quot; name=&quot;parameters&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:message&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Operation-amp-PortType"><a href="#Operation-amp-PortType" class="headerlink" title="Operation &amp; PortType"></a>Operation &amp; PortType</h4><p>Operation &#x5BF9;&#x670D;&#x52A1;&#x4E2D;&#x6240;&#x652F;&#x6301;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x62BD;&#x8C61;&#x63CF;&#x8FF0;&#xFF0C;&#x4E00;&#x822C;&#x5355;&#x4E2A;Operation&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x5165;&#x53E3;&#x7684;&#x8BF7;&#x6C42;/&#x54CD;&#x5E94;&#x6D88;&#x606F;&#x5BF9;&#x3002;<br> PortType &#x5BF9;&#x4E8E;&#x67D0;&#x4E2A;&#x8BBF;&#x95EE;&#x5165;&#x53E3;&#x70B9;&#x7C7B;&#x578B;&#x6240;&#x652F;&#x6301;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x62BD;&#x8C61;&#x96C6;&#x5408;&#xFF0C;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x7531;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x70B9;&#x6765;&#x652F;&#x6301;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;wsdl:portType name=&quot;ReceiveOrderAPI&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:operation name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:input message=&quot;tns:receiveB2COrder&quot; name=&quot;receiveB2COrder&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:output message=&quot;tns:receiveB2COrderResponse&quot; name=&quot;receiveB2COrderResponse&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:fault message=&quot;tns:MasAPIException&quot; name=&quot;MasAPIException&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:operation&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:portType&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Binding"><a href="#Binding" class="headerlink" title="Binding"></a>Binding</h4><p>&#x7279;&#x5B9A;&#x7AEF;&#x53E3;&#x7C7B;&#x578B;&#x7684;&#x5177;&#x4F53;&#x534F;&#x8BAE;&#x548C;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x89C4;&#x8303;&#x7684;&#x7ED1;&#x5B9A;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;wsdl:binding name=&quot;ReceiveOrderAPIExplorterServiceSoapBinding&quot; type=&quot;tns:ReceiveOrderAPI&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:operation name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:operation soapAction=&quot;&quot; style=&quot;document&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:input name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:body use=&quot;literal&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:input&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:output name=&quot;receiveB2COrderResponse&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:body use=&quot;literal&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:output&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:fault name=&quot;MasAPIException&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:fault name=&quot;MasAPIException&quot; use=&quot;literal&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:fault&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:operation&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:binding&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Port-amp-Service"><a href="#Port-amp-Service" class="headerlink" title="Port&amp;Service"></a>Port&amp;Service</h4><p>Port &#x5B9A;&#x4E49;&#x4E3A;&#x534F;&#x8BAE;/&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7ED1;&#x5B9A;&#x4E0E;&#x5177;&#x4F53;Web&#x8BBF;&#x95EE;&#x5730;&#x5740;&#x7EC4;&#x5408;&#x7684;&#x5355;&#x4E2A;&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x70B9;&#x3002;<br> Service &#x76F8;&#x5173;&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x70B9;&#x7684;&#x96C6;&#x5408;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;wsdl:service name=&quot;ReceiveOrderAPIExplorterService&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:port binding=&quot;tns:ReceiveOrderAPIExplorterServiceSoapBinding&quot; name=&quot;ReceiveOrderAPIExplorterPort&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:address location=&quot;http://cardpay.shengpay.com/api-acquire-channel/services/receiveOrderService&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:port&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:service&gt;</span><br></pre></td></tr></table></figure>

<h3 id="PHP&#x64CD;&#x4F5C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;"><a href="#PHP&#x64CD;&#x4F5C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;" class="headerlink" title="PHP&#x64CD;&#x4F5C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;"></a>PHP&#x64CD;&#x4F5C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;//soap&#x7248;&#x672C;&#x4E3A;1.1,&#x4E0D;&#x7F13;&#x5B58;wsdl&#x6587;&#x4EF6;</span><br><span class="line">$options = array(</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&apos;trace&apos;=&gt;true,</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&apos;cache_wsdl&apos;=&gt;WSDL_CACHE_NONE,</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&apos;soap_version&apos;=&gt; SOAP_1_1</span><br><span class="line">);</span><br><span class="line">//&#x4E0A;&#x9001;&#x53C2;&#x6570;</span><br><span class="line">$request = array();//do something</span><br><span class="line">&#xA0;</span><br><span class="line">//&#x51C6;&#x5907;&#x8BF7;&#x6C42;</span><br><span class="line">$soapClient = new SoapClient($url, $options);</span><br><span class="line">try {</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;$response = $soapClient-&gt;__soapCall($function, array(array(&apos;arg0&apos;=&gt;$request)));</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;if (is_object($response)) {</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;$responseArray = get_object_vars($response);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;return $responseArray;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">} catch (SOAPFault $e) {</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;//do something</span><br><span class="line">} catch(Exception $e) {</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;//do something</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h2><p>&#x9644;wsdl&#x793A;&#x4F8B;&#x5168;&#x6587;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&#xA0;</span><br><span class="line">&lt;wsdl:definitions xmlns:wsdl=&quot;http://schemas.xmlsoap.org/wsdl/&quot; xmlns:ns1=&quot;http://schemas.xmlsoap.org/soap/http&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/wsdl/soap/&quot; xmlns:tns=&quot;http://www.sdo.com/mas/api/receive/&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; name=&quot;ReceiveOrderAPIExplorterService&quot; targetNamespace=&quot;http://www.sdo.com/mas/api/receive/&quot;&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:types&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; attributeFormDefault=&quot;unqualified&quot; elementFormDefault=&quot;unqualified&quot; targetNamespace=&quot;http://www.sdo.com/mas/api/receive/&quot;&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element name=&quot;receB2COrderRequest&quot; type=&quot;tns:ReceB2COrderRequest&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element name=&quot;receB2COrderResponse&quot; type=&quot;tns:ReceB2COrderResponse&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;ReceB2COrderRequest&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;buyerContact&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;buyerId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;buyerIp&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;buyerName&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;cardPayInfo&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;cardValue&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;currency&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;depositId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;depositIdType&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;expireTime&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;extension&quot; type=&quot;tns:extension&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;header&quot; type=&quot;tns:header&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;instCode&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;language&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;notifyUrl&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderAmount&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderNo&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderTime&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;pageUrl&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;payChannel&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;payType&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;payeeId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;payerAuthTicket&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;payerId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;payerMobileNo&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;productDesc&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;productId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;productName&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;productNum&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;productUrl&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;sellerId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;signature&quot; type=&quot;tns:signature&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;terminalType&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;unitPrice&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;extension&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;ext1&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;ext2&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;ext3&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;header&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;charset&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;sendTime&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;sender&quot; type=&quot;tns:sender&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;service&quot; type=&quot;tns:service&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;traceNo&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;sender&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;senderId&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;service&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;serviceCode&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;version&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;signature&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;signMsg&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;signType&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;ReceB2COrderResponse&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerLogoUrl&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerName&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;customerNo&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;extension&quot; type=&quot;tns:extension&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;header&quot; type=&quot;tns:header&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderAmount&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderNo&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;orderType&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;returnInfo&quot; type=&quot;tns:returnInfo&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;sessionId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;signature&quot; type=&quot;tns:signature&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;tokenId&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;transNo&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;transStatus&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;transTime&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;returnInfo&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;errorCode&quot; type=&quot;xs:string&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;errorMsg&quot; type=&quot;xs:string&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element name=&quot;MasAPIException&quot; type=&quot;tns:MasAPIException&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;MasAPIException&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element name=&quot;receiveB2COrder&quot; type=&quot;tns:receiveB2COrder&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;arg0&quot; type=&quot;tns:ReceB2COrderRequest&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element name=&quot;receiveB2COrderResponse&quot; type=&quot;tns:receiveB2COrderResponse&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:complexType name=&quot;receiveB2COrderResponse&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;xs:element minOccurs=&quot;0&quot; name=&quot;return&quot; type=&quot;tns:ReceB2COrderResponse&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:sequence&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:complexType&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/xs:schema&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:types&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:message name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:part element=&quot;tns:receiveB2COrder&quot; name=&quot;parameters&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:message&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:message name=&quot;receiveB2COrderResponse&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:part element=&quot;tns:receiveB2COrderResponse&quot; name=&quot;parameters&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:message&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:message name=&quot;MasAPIException&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:part element=&quot;tns:MasAPIException&quot; name=&quot;MasAPIException&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:message&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:portType name=&quot;ReceiveOrderAPI&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:operation name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:input message=&quot;tns:receiveB2COrder&quot; name=&quot;receiveB2COrder&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:output message=&quot;tns:receiveB2COrderResponse&quot; name=&quot;receiveB2COrderResponse&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:fault message=&quot;tns:MasAPIException&quot; name=&quot;MasAPIException&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:operation&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:portType&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:binding name=&quot;ReceiveOrderAPIExplorterServiceSoapBinding&quot; type=&quot;tns:ReceiveOrderAPI&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:operation name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:operation soapAction=&quot;&quot; style=&quot;document&quot;/&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:input name=&quot;receiveB2COrder&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:body use=&quot;literal&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:input&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:output name=&quot;receiveB2COrderResponse&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:body use=&quot;literal&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:output&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:fault name=&quot;MasAPIException&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:fault name=&quot;MasAPIException&quot; use=&quot;literal&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:fault&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:operation&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:binding&gt;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&lt;wsdl:service name=&quot;ReceiveOrderAPIExplorterService&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;wsdl:port binding=&quot;tns:ReceiveOrderAPIExplorterServiceSoapBinding&quot; name=&quot;ReceiveOrderAPIExplorterPort&quot;&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;soap:address location=&quot;http://cardpay.shengpay.com/api-acquire-channel/services/receiveOrderService&quot;/&gt; </span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&lt;/wsdl:port&gt; </span><br><span class="line">&#xA0;&#xA0;&lt;/wsdl:service&gt; </span><br><span class="line">&lt;/wsdl:definitions&gt;</span><br></pre></td></tr></table></figure>

<h3 id="&#x76F8;&#x5173;&#x6587;&#x7AE0;"><a href="#&#x76F8;&#x5173;&#x6587;&#x7AE0;" class="headerlink" title="&#x76F8;&#x5173;&#x6587;&#x7AE0;"></a>&#x76F8;&#x5173;&#x6587;&#x7AE0;</h3><ul>
<li><a href="/external_links/782be95bd9d6fd3e032870d07c27dd0d.html" target="blank" rel="noopener">PHP&#x64CD;&#x4F5C;SOAP&#x8BE6;&#x89E3;</a></li>
<li><a href="/external_links/ac1088f4ee59155f8c9bc126de5b63b5.html" target="blank" rel="noopener">JavaFX&#x5B9E;&#x73B0;Hosts&#x7BA1;&#x7406;&#x5DE5;&#x5177;</a></li>
<li><a href="/external_links/12920f96aa1b174930e85da96c782a6c.html" target="blank" rel="noopener">&#x9006;&#x5411;&#x5206;&#x6790;&#x67D0;app&#x5E76;&#x4F7F;&#x7528;Java&#x4E0E;PHP&#x8BED;&#x8A00;&#x5B9E;&#x73B0;RC4&#x52A0;&#x89E3;&#x5BC6;</a></li>
<li><a href="/external_links/d85c23f8af85e1230fc5a29cf49fc3df.html" target="blank" rel="noopener">&#x89E3;&#x51B3;Windows&#x78C1;&#x76D8;&#x7206;&#x6EE1;&#x5374;&#x4E0D;&#x77E5;&#x5982;&#x4F55;&#x6E05;&#x7406;&#x95EE;&#x9898;</a></li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a74a47ff2e5b25015da546f701f53b02.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903522295611405.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903522295611405.html" itemprop="url">scrapy 爬妹子图 Step1 Step2 Step3</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T11:12:33+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x524D;&#x4E00;&#x7BC7;&#x5199;&#x4E86;&#x57FA;&#x7840;&#x7684;&#x722C;&#x866B;&#xFF0C;&#x8FD9;&#x7BC7;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x722C;&#x56FE;&#x7247;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x3002;&#x73AF;&#x5883;&#x5982;&#x4E0A;&#x4E00;&#x7BC7;<a href="https://dev.newban.cn/6844903522278834183">scrapy &#x722C;&#x7535;&#x5F71; &#x6293;&#x53D6;&#x6570;&#x636E;</a></p>
</blockquote>
<h1 id="Step1"><a href="#Step1" class="headerlink" title="Step1"></a>Step1</h1><p>&#x9996;&#x5148;&#x8FD8;&#x662F;&#x5B9E;&#x4F53;&#x7C7B;&#x5199;&#x597D;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x5B57;&#x6BB5;<br>&#x6CE8;&#x91CA;&#x4E2D;<code>ImagesPipeline</code>&#x540E;&#x9762;&#x4F1A;&#x89E3;&#x91CA;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;from scrapy import Item, Field</span><br><span class="line">class PaimgItem(Item):</span><br><span class="line">    # &#x8FD9;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5; image_urls images&#x662F;ImagesPipeline&#x5B58;&#x653E;&#x9700;&#x8981;&#x7684;</span><br><span class="line">    image_urls = Field()</span><br><span class="line">    images = Field()</span><br><span class="line"></span><br><span class="line">    name = Field()</span><br></pre></td></tr></table></figure>

<h1 id="Step2"><a href="#Step2" class="headerlink" title="Step2"></a>Step2</h1><p>&#x9879;&#x76EE;&#x7ED3;&#x6784;&#x4E0D;&#x53D8;&#xFF0C;&#x4F9D;&#x7136;&#x9996;&#x5148;&#x6765;&#x5199;&#x6211;&#x4EEC;&#x7684;Spider</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import scrapy</span><br><span class="line">from scrapy.spiders import CrawlSpider</span><br><span class="line">from PaImg.items import PaimgItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MeizituSpider(CrawlSpider):</span><br><span class="line">    name = &quot;meizitu&quot;</span><br><span class="line">    host = &apos;http://www.meizitu.com/&apos;</span><br><span class="line">    start_urls = [&apos;http://www.meizitu.com/a/sexy.html&apos;]</span><br><span class="line"></span><br><span class="line">    headers = {</span><br><span class="line">        &apos;Accept&apos;: &apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;,</span><br><span class="line">        &apos;Accept-Language&apos;: &apos;zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3&apos;,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    def parse(self, response):</span><br><span class="line">        nextPage = response.xpath(u&apos;//div[@id=&quot;wp_page_numbers&quot;]//a[text()=&quot;&#x4E0B;&#x4E00;&#x9875;&quot;]/@href&apos;).extract_first()</span><br><span class="line">        nextPage = self.host + nextPage</span><br><span class="line"></span><br><span class="line">        for p in response.xpath(&apos;//li[@class=&quot;wp-item&quot;]//a/@href&apos;).extract():</span><br><span class="line">            # scrapy.Request&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x83B7;&#x53D6;&#x8BE6;&#x60C5;html&#x7531;parse_item&#x89E3;&#x6790;</span><br><span class="line">            yield scrapy.Request(p, callback=self.parse_item)</span><br><span class="line"></span><br><span class="line">        yield scrapy.Request(nextPage, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    def parse_item(self, response):</span><br><span class="line">        item = PaimgItem()</span><br><span class="line">        # &#x8BE6;&#x60C5;&#x4E2D;&#x7684;&#x56FE;&#x7247;&#x5217;&#x8868;</span><br><span class="line">        item[&apos;image_urls&apos;] = response.xpath(&quot;//div[@id=&apos;picture&apos;]//img/@src&quot;).extract()</span><br><span class="line">        item[&apos;name&apos;] = response.xpath(&quot;//div[@id=&apos;picture&apos;]//img/@alt&quot;).extract()[0].split(u&apos;&#xFF0C;&apos;)[0]</span><br><span class="line">        return item</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x4E00;&#x7BC7;&#x5982;&#x679C;&#x4F60;&#x8BA4;&#x771F;&#x770B;&#x4E86;&#x5199;&#x4E86;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x4EE3;&#x7801;&#x76F8;&#x4FE1;&#x4F60;&#x4E00;&#x773C;&#x5C31;&#x770B;&#x61C2;&#x4E86;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x61C2;&#x5148;&#x770B;&#x4E00;&#x4E0B;&#x4E0A;&#x4E00;&#x7BC7;&#x5427;<a href="/external_links/108fb131ca68f9741289e414a3bdd3d1.html" target="blank" rel="noopener">scrapy &#x722C;&#x7535;&#x5F71; &#x6293;&#x53D6;&#x6570;&#x636E;</a></p>
<h1 id="Step3"><a href="#Step3" class="headerlink" title="Step3"></a>Step3</h1><p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5C06;&#x8BE6;&#x60C5;&#x9875;&#x7684;&#x56FE;&#x7247;&#x5217;&#x8868;&#x5730;&#x5740;&#x5B58;&#x50A8;&#x4FDD;&#x5B58;&#x4E86;&#x4E0B;&#x6765;&#x3002;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x4E13;&#x95E8;&#x4E0B;&#x8F7D;&#x6BCF;&#x5F20;&#x56FE;&#x7247;&#x7684;&#x7C7B;&#x3002;<br>&#x4E5F;&#x5C31;&#x662F;Step1&#x4E2D;&#x63D0;&#x5230;&#x7684;<code>ImagesPipeline</code>&#x3002;&#x5B83;&#x662F;&#x7528;&#x6765;&#x5904;&#x7406;&#x4E0B;&#x8F7D;&#x56FE;&#x7247;&#x7684;&#x4E00;&#x4E2A;<code>Pipeline</code>&#x5173;&#x4E8E;Pipline&#x53EF;&#x4EE5;&#x67E5;&#x770B;<a href="/external_links/7cb7e88dcc61c23256cbce09c1b7cecd.html" target="blank" rel="noopener">Pipeline</a>&#x3002;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>PaimgPipeline</code>&#x7C7B;&#x7EE7;&#x627F;&#x81EA;<code>ImagesPipeline</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;class PaimgPipeline(ImagesPipeline):</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x590D;&#x5199;&#x56DB;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;<code>get_media_requests(&#x8FDB;&#x884C;&#x56FE;&#x7247;&#x4E0B;&#x8F7D;&#x8BF7;&#x6C42;&#x5904;&#x7406;) item_completed(&#x56FE;&#x7247;&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x7684;&#x901A;&#x77E5;) file_path(&#x4E0B;&#x8F7D;&#x539F;&#x59CB;&#x56FE;&#x7247;&#x7684;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;) thumb_path(&#x7F29;&#x7565;&#x56FE;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;)</code><br>&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;headers = {</span><br><span class="line">    &apos;Accept&apos;: &apos;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&apos;,</span><br><span class="line">    &apos;Accept-Language&apos;: &apos;zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3&apos;,</span><br><span class="line">    &quot;Referer&quot;: &quot;https://www.meizitu.com/&quot;,  # &#x52A0;&#x5165;referer &#x4E3A;&#x4E0B;&#x8F7D;&#x7684;&#x57DF;&#x540D;&#x7F51;&#x7AD9;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class PaimgPipeline(ImagesPipeline):</span><br><span class="line">    # &#x5728;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x7BA1;&#x9053;&#x4F1A;&#x5F97;&#x5230;&#x56FE;&#x7247;&#x7684;URL&#x5E76;&#x4ECE;&#x9879;&#x76EE;&#x4E2D;&#x4E0B;&#x8F7D;&#x3002;</span><br><span class="line">    # # &#x4E3A;&#x4E86;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x91CD;&#x5199; get_media_requests() &#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x5BF9;&#x5404;&#x4E2A;&#x56FE;&#x7247;URL&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;Request:</span><br><span class="line">    def get_media_requests(self, item, info):</span><br><span class="line">        for image_url in item[&apos;image_urls&apos;]:</span><br><span class="line">            # &#x8FD9;&#x91CC;&#x628A;item&#x4F20;&#x8FC7;&#x53BB;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x9700;&#x8981;&#x7528;item&#x91CC;&#x9762;&#x7684;name&#x4F5C;&#x4E3A;&#x6587;&#x4EF6;&#x540D;</span><br><span class="line">            yield Request(image_url, meta={&apos;item&apos;: item}, headers=headers)</span><br><span class="line"></span><br><span class="line">    def item_completed(self, results, item, info):</span><br><span class="line">        image_paths = [x[&apos;path&apos;] for ok, x in results if ok]</span><br><span class="line">        if not image_paths:</span><br><span class="line">            raise DropItem(&quot;Item contains no images&quot;)</span><br><span class="line">        return item</span><br><span class="line"></span><br><span class="line">    def file_path(self, request, response=None, info=None):</span><br><span class="line">        item = request.meta[&apos;item&apos;]</span><br><span class="line">        image_guid = request.url.split(&apos;/&apos;)[-1]  # &#x5012;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;</span><br><span class="line">        filenames = &quot;full/%s/%s&quot; % (item[&apos;name&apos;], image_guid)</span><br><span class="line">        # print(filename)</span><br><span class="line">        return filenames</span><br><span class="line"></span><br><span class="line">    def thumb_path(self, request, thumb_id, response=None, info=None):</span><br><span class="line">        item = request.meta[&apos;item&apos;]</span><br><span class="line">        image_guid = request.url.split(&apos;/&apos;)[-1]  # &#x5012;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;</span><br><span class="line">        # thumb_id&#x5C31;&#x662F;setting&#x6587;&#x4EF6;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;big small</span><br><span class="line">        filenames = &quot;thumbil/%s/%s/%s&quot; % (thumb_id, item[&apos;name&apos;], image_guid)</span><br><span class="line">        return filenames</span><br></pre></td></tr></table></figure>

<h1 id="Step4"><a href="#Step4" class="headerlink" title="Step4"></a>Step4</h1><p>&#x7F16;&#x5199;&#x968F;&#x673A;&#x7684;<code>UserAgent</code>&#x548C;<code>IP&#x4EE3;&#x7406;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import random</span><br><span class="line">from scrapy.downloadermiddlewares.useragent import UserAgentMiddleware</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">&#x8FD9;&#x4E2A;&#x7C7B;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x4EA7;&#x751F;&#x968F;&#x673A;UserAgent</span><br><span class="line">&apos;&apos;&apos;</span><br><span class="line">class RandomUserAgent(UserAgentMiddleware):</span><br><span class="line"></span><br><span class="line">    def __init__(self, agents):</span><br><span class="line">        self.agents = agents</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def from_crawler(cls, crawler):</span><br><span class="line">        return cls(crawler.settings.getlist(&apos;USER_AGENTS&apos;))  # &#x8FD4;&#x56DE;&#x7684;&#x662F;&#x672C;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;cls ==RandomUserAgent</span><br><span class="line"></span><br><span class="line">    def process_request(self, request, spider):</span><br><span class="line">        request.headers.setdefault(&apos;User-Agent&apos;, random.choice(self.agents))</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import random</span><br><span class="line">from PaImg.settings import IPPOOL</span><br><span class="line"></span><br><span class="line">class ProxiesMiddleware(object):</span><br><span class="line">    def __init__(self, ip=&apos;&apos;):</span><br><span class="line">        self.ip = ip</span><br><span class="line"></span><br><span class="line">    def process_request(self, request, spider):</span><br><span class="line">        thisip = random.choice(IPPOOL)</span><br><span class="line">        print(&quot;this is ip:&quot; + thisip[&quot;ipaddr&quot;])</span><br><span class="line">        request.meta[&quot;proxy&quot;] = &quot;http://&quot; + thisip[&quot;ipaddr&quot;]</span><br></pre></td></tr></table></figure>

<h1 id="Step5"><a href="#Step5" class="headerlink" title="Step5"></a>Step5</h1><p>&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x4E00;&#x4E0B;<code>settings.py</code>&#x4E86;&#x3002;</p>
<ul>
<li>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5148;&#x628A;&#x521A;&#x521A;&#x5199;&#x7684;<code>PaimgPipeline</code>&#x914D;&#x7F6E;&#x5230;settings&#x4E2D;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;ITEM_PIPELINES = {</span><br><span class="line">    &apos;PaImg.pipelines.PaimgPipeline&apos;: 300,</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8BBE;&#x7F6E;&#x4E0A;&#x9762;&#x7F16;&#x5199;&#x7684;<code>RandomUserAgent</code>&#x53CA;<code>ProxiesMiddleware</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;DOWNLOADER_MIDDLEWARES = {</span><br><span class="line">    &apos;scrapy.downloadermiddlewares.useragent.UserAgentMiddleware&apos;: None,</span><br><span class="line">    &apos;PaImg.RandomUserAgent.RandomUserAgent&apos;: 100,</span><br><span class="line"></span><br><span class="line">     # &#x4EE3;&#x7406;IP&#x53EF;&#x80FD;&#x4F1A;&#x5931;&#x6548; &#x9700;&#x8981;&#x91CD;&#x65B0;ping&#x4EE3;&#x7406;ip&#x5730;&#x5740;</span><br><span class="line">  &apos;scrapy.downloadermiddlewares.httpproxy.HttpProxyMiddleware&apos; : None,</span><br><span class="line">    &apos;PaImg.ProxiesMiddleware.ProxiesMiddleware&apos; : 100</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8BBE;&#x7F6E;USER_AGENTS&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7F16;&#x5199;<code>RandomUserAgent</code>&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;USER_AGENTS = [</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20&quot;,</span><br><span class="line">    &quot;Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.11 TaoBrowser/2.0 Safari/536.11&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.71 Safari/537.1 LBBROWSER&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; LBBROWSER)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E; LBBROWSER)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.84 Safari/535.11 LBBROWSER&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SV1; QQDownload 732; .NET4.0C; .NET4.0E; 360SE)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)&quot;,</span><br><span class="line">    &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (iPad; U; CPU OS 4_2_1 like Mac OS X; zh-cn) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:2.0b13pre) Gecko/20110307 Firefox/4.0b13pre&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (X11; U; Linux x86_64; zh-CN; rv:1.9.2.10) Gecko/20100922 Ubuntu/10.10 (maverick) Firefox/3.6.10&quot;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8BBE;&#x7F6E;IPPOOL&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x7F16;&#x5199;<code>ProxiesMiddleware</code>&#x9700;&#x8981;&#x7684;&#x6570;&#x636E;( &#x4EE3;&#x7406;IP&#x53EF;&#x80FD;&#x4F1A;&#x5931;&#x6548; &#x9700;&#x8981;&#x91CD;&#x65B0;ping&#x4EE3;&#x7406;ip&#x5730;&#x5740;)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;IPPOOL=[</span><br><span class="line">    {&quot;ipaddr&quot;:&quot;211.142.141.210:8998&quot;},</span><br><span class="line">    {&quot;ipaddr&quot;:&quot;58.19.15.218:808&quot;},</span><br><span class="line">    {&quot;ipaddr&quot;:&quot;117.90.1.141:9000&quot;},</span><br><span class="line">    {&quot;ipaddr&quot;:&quot;125.117.115.180:9000&quot;},</span><br><span class="line">    {&quot;ipaddr&quot;:&quot;211.142.141.210:8998&quot;},</span><br><span class="line">    {&quot;ipaddr&quot;:&quot;163.125.251.242:8118&quot;}</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8BBE;&#x7F6E;&#x4E0A;&#x9762;&#x7565;&#x7F29;&#x56FE;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;IMAGES_THUMBS = {</span><br><span class="line">    &apos;small&apos;: (50, 50),</span><br><span class="line">    &apos;big&apos;: (270, 270),</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8BBE;&#x7F6E;&#x56FE;&#x7247;(&#x5BBD;&#x6700;&#x5C0F;&#x4E0E;&#x9AD8;&#x6700;&#x5C0F;)&#x8FC7;&#x6EE4;&#x3002;&#x4EE5;&#x9632;&#x6B62;&#x6211;&#x4EEC;&#x4F1A;&#x4E0B;&#x8F7D;&#x4E00;&#x4E9B;&#x5E7F;&#x544A;&#x56FE;&#x6216;&#x5176;&#x4ED6;&#x65E0;&#x7528;&#x56FE;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;IMAGES_MIN_HEIGHT = 110</span><br><span class="line">IMAGES_MIN_WIDTH = 110</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8BBE;&#x7F6E;&#x672C;&#x5730;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;IMAGES_STORE = &apos;/Users/cuiyang/Pictures/meizitu&apos;</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8FD8;&#x6709;&#x6211;&#x4EEC;&#x7684;&#x5EF6;&#x8FDF;&#x4E0B;&#x8F7D;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;DOWNLOAD_DELAY = 2</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x57FA;&#x672C;&#x4E0A;&#x8FD9;&#x4E9B;&#x5C31;&#x5DF2;&#x7ECF;&#x591F;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x518D;&#x4F18;&#x5316;&#x4E00;&#x4E0B;&#x914D;&#x7F6E;&#xFF0C;&#x4E5F;&#x662F;&#x6BD4;&#x8F83;&#x901A;&#x7528;&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;</p>
</blockquote>
<h1 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h1><ul>
<li>&#x51CF;&#x5C11;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4EE5;&#x63D0;&#x9AD8;&#x722C;&#x53D6;&#x901F;&#x5EA6;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;DOWNLOAD_TIMEOUT = 15</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x4E0D;&#x5BF9;&#x5931;&#x8D25;&#x7684;HTTP&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x91CD;&#x8BD5;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;RETRY_ENABLED = False</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x7981;&#x7528;cookie</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;COOKIES_ENABLED = False</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x901A;&#x7528;&#x722C;&#x53D6;&#x7ECF;&#x5E38;&#x6293;&#x53D6;&#x5927;&#x91CF;&#x7684; &#x201C;index&#x201D; &#x9875;&#x9762;&#xFF1B; AjaxCrawlMiddleware&#x80FD;&#x5E2E;&#x52A9;&#x60A8;&#x6B63;&#x786E;&#x5730;&#x722C;&#x53D6;&#x3002; &#x7531;&#x4E8E;&#x6709;&#x4E9B;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x4E14;&#x5BF9;&#x4E8E;&#x7279;&#x5B9A;&#x722C;&#x866B;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x610F;&#x4E49;&#xFF0C;&#x8BE5;&#x4E2D;&#x95F4;&#x9ED8;&#x8BA4;&#x5173;&#x95ED;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;AJAXCRAWL_ENABLED = False</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x540E;&#x9644;&#x4E0A;&#x6E90;&#x7801;&#x5730;&#x5740;&#xFF1A;<a href="/external_links/a0c88c11921b85dc21758e3f9e754265.html" target="blank" rel="noopener">&#x6E90;&#x7801;&#x5730;&#x5740;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/2fbb92560a37df92ae8f6b2388c12b75.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903522278834183.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903522278834183.html" itemprop="url">scrapy 爬电影 抓取数据 序 Step1 Step2</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T11:10:30+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x5B66;python&#x5B66;&#x5B8C;&#x4E86;&#x57FA;&#x7840;&#x7684;&#x77E5;&#x8BC6;&#x5F53;&#x7136;&#x662F;&#x8981;&#x6765;&#x70B9;&#x5B9E;&#x9645;&#x7684;&#x4E1C;&#x897F;&#x73A9;&#x73A9;&#x4E86;&#x3002;&#x722C;&#x866B;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x4E8E;python&#x518D;&#x9002;&#x5408;&#x4E0D;&#x8FC7;&#xFF0C;&#x4ECA;&#x5929;&#x5C31;&#x5148;&#x6765;&#x722C;&#x4E00;&#x4E2A;&#x7535;&#x5F71;&#x7F51;&#x7AD9;&#xFF0C;&#x4E0B;&#x4E00;&#x7BC7;&#x6211;&#x4EEC;&#x6765;&#x722C;&#x7F8E;&#x5973;&#x56FE;&#x7247;&#xFF0C;&#x8FD9;&#x7BC7;&#x5C31;&#x505A;&#x4E3A;&#x4E00;&#x4E2A;&#x722C;&#x866B;&#x57FA;&#x7840;&#x7EC3;&#x7EC3;&#x624B;&#x3002;&#x5C06;&#x4ED6;&#x6709;&#x7684;&#x8D44;&#x6E90;&#x4FE1;&#x606F;&#x722C;&#x4E0B;&#x6765;&#x4FDD;&#x5B58;&#x6210;&#x4E00;&#x4E2A;csv&#x6587;&#x4EF6;&#x3002;</p>
</blockquote>
<h1 id="&#x5E8F;"><a href="#&#x5E8F;" class="headerlink" title="&#x5E8F;"></a>&#x5E8F;</h1><p>&#x73AF;&#x5883; mac python3.6.1 pycharm</p>
<h1 id="Step1"><a href="#Step1" class="headerlink" title="Step1"></a>Step1</h1><p>&#x9ED8;&#x8BA4;scrapy&#x7684;&#x73AF;&#x5883;&#x662F;&#x5B89;&#x88C5;&#x597D;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x7EC8;&#x7AEF;&#x91CC;&#x8F93;&#x5165;<code>scrapy startproject &#x5DE5;&#x7A0B;&#x540D;</code>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x722C;&#x866B;&#x9879;&#x76EE;&#xFF0C;scrapy&#x4F1A;&#x4E3A;&#x6211;&#x4EEC;&#x521D;&#x59CB;&#x5316;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x7ED3;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/196aaec754a77450c4781771c07ffff9e761cf5c50d25f0f2d98d1a0b999bbd3" alt="image.png"></p>
<p>&#x5176;&#x4E2D;Id97Index.py&#x662F;&#x6211;&#x4EEC;&#x7F16;&#x5199;&#x903B;&#x8F91;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4E5F;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x5EFA;&#x7684;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x90FD;&#x4F1A;&#x5728;&#x65B0;&#x5EFA;&#x9879;&#x76EE;&#x65F6;&#x751F;&#x6210;&#x3002;<br>Step2<br>=====</p>
<p>&#x5728;items.py&#x4E2D;&#x521B;&#x5EFA;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/7603a727a9131b818246adc456bfc7bee223a1ccb897189c45cefb2fb36fdb08" alt="image.png"></p>
<p>&#x5206;&#x522B;&#x4E3A;&#x201C;&#x5C01;&#x9762;&#x201D;&#x3001;&#x201C;&#x7535;&#x5F71;&#x540D;&#x201D;&#x3001;&#x201C;&#x8BC4;&#x5206;&#x201D;&#x3001;&#x201C;&#x7C7B;&#x578B;&#x201D;<br>&#x8BE5;&#x5B9E;&#x4F53;&#x7C7B;&#x4F1A;&#x5728;&#x540E;&#x9762;&#x63D0;&#x4EA4;&#x6570;&#x636E;&#x65F6;scrapy&#x8FDB;&#x884C;&#x5199;&#x5165;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#xFF0C;&#x603B;&#x4E4B;&#x5462;&#x3002;&#x4F60;&#x9700;&#x8981;&#x5B58;&#x4EC0;&#x4E48;&#x6570;&#x636E;&#x5C31;&#x5199;&#x5BF9;&#x5E94;&#x5B57;&#x6BB5;&#xFF0C;&#x540E;&#x9762;&#x4FDD;&#x5B58;&#x6587;&#x4EF6;&#x540E;&#x4F60;&#x5C31;&#x660E;&#x767D;&#x4E86;<br>Step3<br>=====</p>
<p>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5199;&#x6211;&#x4EEC;&#x722C;&#x866B;&#x7684;&#x903B;&#x8F91;&#x4E86;<br>&#x5982;Step1&#x6211;&#x4EEC;&#x5728;<code>spiders</code>&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;<code>Index97Index.py</code>&#x518D;&#x65B0;&#x5EFA;&#x7C7B;<code>Id97Movie</code>&#x7EE7;&#x627F;<code>CrawlSpider</code>&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/061bc5ab839ea48b8e063b3246267ffdbf1686cd58759d4eb1e0ba4719cb3657" alt="image.png"></p>
<p>&#x5176;&#x4E2D;<code>name</code>&#x4E3A;&#x6211;&#x4EEC;&#x542F;&#x52A8;&#x9879;&#x76EE;&#x7684;&#x540D;&#x5B57;<br><code>host</code>&#x4E3B;&#x8981;&#x4E3A;&#x540E;&#x9762;&#x505A;&#x4E00;&#x4E9B;&#x62FC;&#x63A5;<br><code>allowed_domains</code>&#x4E3B;&#x57DF;&#x540D;<br><code>start_urls</code>&#x9700;&#x8981;&#x8BF7;&#x6C42;&#x722C;&#x7684;&#x521D;&#x59CB;urls<br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/b0bf6755260dd8a8e7acffb4c403d51c7027ad092b5b29e7765801a287bd4c8f" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d12d9151afdb9901bc2b016a612a0627f8db5ef35c594cc52d3dd1451e648ded" alt="image.png"></p>
<p>&#x4ECE;&#x6E90;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x5230;<code>name</code>&#x548C;<code>start_urls</code>&#x662F;&#x5FC5;&#x8981;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x4E14;&#x4E00;&#x5F00;&#x59CB;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#x5FAA;&#x73AF;start_urls&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x5B9A;&#x4E0D;&#x80FD;&#x5FD8;&#x8BB0;&#xFF0C;&#x540D;&#x5B57;&#x4E5F;&#x4E0D;&#x80FD;&#x5B9A;&#x4E49;&#x3002;</p>
<h1 id="Step4"><a href="#Step4" class="headerlink" title="Step4"></a>Step4</h1><p>&#x8986;&#x5199;<code>parse</code>&#x65B9;&#x6CD5;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/5434c6e532baf21136e54092c664bb349b311d12d7feae23e44dfc11df175bdb" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/69bad085eec84cd39fffee34365cd7e1fdd4859fe1d231556bc2095fbdae433a" alt="image.png"></p>
<ul>
<li>&#x6839;&#x636E;chrome&#x4E2D;&#x67E5;&#x770B;&#x5230;&#x6BCF;&#x4E2A;item&#x5185;&#x5BB9;&#x90FD;&#x5728;&#x7EA2;&#x6846;&#x4E2D;&#x8FD9;&#x4E2A;&#x6807;&#x7B7E;&#x5185;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53F3;&#x952E;&#x9009;&#x62E9;copy xpath(xpath&#x77E5;&#x8BC6;&#x53EF;&#x4EE5;google&#x4E24;&#x5206;&#x949F;&#x5C31;&#x4F1A;)&#x8FDB;&#x884C;xpath&#x9009;&#x53D6;</li>
<li>&#x83B7;&#x53D6;&#x4E0B;&#x4E00;&#x9875;url&#xFF0C;&#x540C;&#x6837;&#x627E;&#x5230;&#x4E0B;&#x4E00;&#x9875;&#x7684;xpath&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x662F;&#x628A;&#x6700;&#x4E0B;&#x9762;&#x7684;&#x201D;&#x4E0A;&#x4E00;&#x9875;&#xFF0C;&#x4E0B;&#x4E00;&#x9875; &#x9875;&#x7801;&#x201D;&#x90FD;&#x62FF;&#x6765;&#x3002;&#x56E0;&#x4E3A;&#x4E0B;&#x4E00;&#x9875;&#x8FD9;&#x4E2A;&#x6807;&#x7B7E;&#x603B;&#x5728;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>pages[-2]</code>&#x83B7;&#x53D6;&#x4E0B;&#x4E00;&#x9875;&#x7684;url</li>
<li><code>for</code>&#x5FAA;&#x73AF;&#x5904;&#x7406;&#x6BCF;&#x4E2A;&#x5217;&#x8868;&#x5217;&#x7684;&#x5185;&#x5BB9;&#x4F7F;&#x7528;<code>parse_item</code>&#x65B9;&#x6CD5;&#x5904;&#x7406;</li>
<li>&#x6700;&#x540E;<code>yield Request(nextPageUrl, callback=self.parse)</code>&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x4E0B;&#x4E00;&#x9875;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4F9D;&#x7136;&#x4F7F;&#x7528;parse&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x8FD9;&#x6837;&#x5FAA;&#x73AF;&#x76F4;&#x5230;&#x6700;&#x540E;&#x4E00;&#x9875;<br>parse_item&#x4EE3;&#x7801;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c90805d5bb82e69abdb0479d6f01bc49b36ebd1bea4ddf5771dce8977a6211a4" alt="image.png"></li>
</ul>
<h1 id="Step5"><a href="#Step5" class="headerlink" title="Step5"></a>Step5</h1><p>&#x8BBE;&#x7F6E;<code>settings.py</code>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5B58;&#x653E;&#x8DEF;&#x5F84;&#x53CA;&#x683C;&#x5F0F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/bc2a987915e059741cd9bf9a14959adcadf449000cbdf853332150ba8cee9f81" alt="image.png"></p>
<h1 id="Step6"><a href="#Step6" class="headerlink" title="Step6"></a>Step6</h1><p>&#x5230;&#x8BE5;&#x9879;&#x76EE;&#x7684;&#x76EE;&#x5F55;&#x4E0B;&#x5728;&#x7EC8;&#x7AEF;&#x6267;&#x884C;<code>scrapy crawl name(step3&#x4E2D;&#x6240;&#x8BF4;&#x7684;name=&apos;id97&apos;)</code>&#xFF0C;&#x4E5F;&#x53EF;&#x5C06;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x653E;&#x5728;python&#x6587;&#x4EF6;&#x4E2D;&#x8FDB;&#x884C;&#x6267;&#x884C;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f8d96714ae551888051020f9da2c33f546299b269a5ca72f4a5070530ac3c823" alt="image.png"></p>
<p>&#x81F3;&#x6B64;&#x8FD9;&#x4E2A;&#x722C;&#x866B;&#x5C31;&#x57FA;&#x672C;&#x7ED3;&#x675F;&#x4E86;&#x3002;<code>settings.py</code>&#x4E2D;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x914D;&#x7F6E;&#x7F51;&#x4E0A;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x914D;&#x7F6E;&#x8BD5;&#x8BD5;&#x770B;<br>&#x6E90;&#x4EE3;&#x7801;&#xFF1A; <a href="/external_links/f0d51ff035d30eb5b98e974ae2974bda.html" target="blank" rel="noopener">&#x6E90;&#x7801;&#x5730;&#x5740;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/074c465d4ce787f6a4f0215bc5e54262.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903529618866189.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903529618866189.html" itemprop="url">如何爬取gerrit</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-14T19:09:24+08:00">
                2017-12-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x8D77;&#x56E0;"><a href="#&#x8D77;&#x56E0;" class="headerlink" title="&#x8D77;&#x56E0;"></a>&#x8D77;&#x56E0;</h2><p>&#x4E3B;&#x8981;&#x662F;&#x516C;&#x53F8;&#x60F3;&#x8981;&#x89C4;&#x8303;&#x5316;&#x5DE5;&#x7A0B;&#x5E08;&#x7684;&#x63D0;&#x4EA4;&#x4FE1;&#x606F;&#xFF0C;&#x867D;&#x8BF4;&#x4E0D;&#x662F;&#x6211;&#x6765;&#x5F04;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x60F3;&#x8BD5;&#x8BD5;&#x7528;&#x4E4B;&#x524D;&#x5B66;&#x7684;&#x722C;&#x866B;&#x6765;&#x5C1D;&#x8BD5;&#x6293;&#x53D6;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x521D;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;&#x5206;&#x6790;&#xFF0C;&#x7136;&#x540E;&#x53EF;&#x89C6;&#x5316;&#x3002;&#x6B63;&#x597D;&#x4E00;&#x6574;&#x5957;&#x7684;&#x6D41;&#x7A0B;&#x8D70;&#x4E00;&#x904D;&#x3002;&#x8BF4;&#x5E72;&#x5C31;&#x5E72;&#xFF0C;&#x6253;&#x5F00;&#x7F51;&#x9875;&#xFF0C;F12&#x3002;<br>&#x53D1;&#x73B0;&#x6570;&#x636E;&#x5728;&#x8868;&#x683C;&#x91CC;&#x3002;&#x6293;&#x5457;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1357260840b5a798c426788ab2f7bbd9e2119ffb6d44ebc6cdbcecd078684cb2" alt></p>
<p>&#x4F46;&#x662F;&#x53D1;&#x73B0;&#x6293;&#x51FA;&#x6765;&#x7684;&#x6570;&#x636E;&#x957F;&#x7684;&#x4E71;&#x4E03;&#x516B;&#x7CDF;&#xFF0C;&#x6700;&#x5173;&#x952E;&#x7684;&#x662F;&#x5E76;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;table&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x731C;&#x60F3;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x52A8;&#x6001;&#x52A0;&#x8F7D;&#x7684;&#xFF0C;&#x8F6C;&#x5230;network&#xFF0C;xhr&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/29354865a87ab4033c5ee13af375db0b391ce92b27d7c507d759b98a9f5d1c3c" alt></p>
<p>&#x518D;&#x5237;&#x65B0;&#x4E0B;&#x9875;&#x9762;&#xFF0C;&#x53D1;&#x73B0;&#x6570;&#x636E;&#x90FD;&#x5728;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x91CC;&#x561B;&#xFF0C;&#x8FD9;&#x5C31;&#x7B80;&#x5355;&#x4E86;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/08dca84b2315fea0f301d7fb5b67be5b9f0b50d27f8e13d4689f5c7a0d96ab76" alt></p>
<h2 id="&#x8BBE;&#x8BA1;&#x6D41;&#x7A0B;&#xFF1A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x3002;"><a href="#&#x8BBE;&#x8BA1;&#x6D41;&#x7A0B;&#xFF1A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x3002;" class="headerlink" title="&#x8BBE;&#x8BA1;&#x6D41;&#x7A0B;&#xFF1A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x3002;"></a>&#x8BBE;&#x8BA1;&#x6D41;&#x7A0B;&#xFF1A;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5904;&#x7406;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x3002;</h2><h3 id="&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5148;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5B58;&#x5230;&#x8868;&#x683C;&#x91CC;&#x3002;"><a href="#&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5148;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5B58;&#x5230;&#x8868;&#x683C;&#x91CC;&#x3002;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5148;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5B58;&#x5230;&#x8868;&#x683C;&#x91CC;&#x3002;"></a>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5148;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5B58;&#x5230;&#x8868;&#x683C;&#x91CC;&#x3002;</h3><p>&#x4E00;&#x5B9A;&#x8981;&#x8BB0;&#x5F97;cookie&#x554A;&#xFF0C;&#x8840;&#x7684;&#x6559;&#x8BAD;&#xFF0C;&#x6211;&#x6298;&#x817E;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x90FD;&#x662F;&#x51E0;&#x4E2A;&#x5B57;&#x7B26;&#xFF0C;&#x540E;&#x6765;&#x624D;&#x9192;&#x609F;&#x8FC7;&#x6765;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def requesst(url,limit_time):</span><br><span class="line">    continue_flag = 1</span><br><span class="line">    # while(url):</span><br><span class="line">    headers = {</span><br><span class="line">        &apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36&apos;,</span><br><span class="line">        &apos;Cookie&apos;: &apos;GerritAccount=aRqdfpU4Oa1tMBZglP3GWlz.y1oY.8am&apos;</span><br><span class="line">    }</span><br><span class="line">    data = requests.get(url, headers=headers).text</span><br><span class="line">    # content = data.text #&#x4F60;&#x8981;&#x7684;&#x6570;&#x636E;,JSON&#x683C;&#x5F0F;&#x7684;</span><br><span class="line">    remove = re.compile(&apos;\)\]\}\&apos;&apos;)</span><br><span class="line">    #&#x53BB;&#x6389;&#x591A;&#x4F59;&#x7684;&#x51E0;&#x4E2A;&#x5783;&#x573E;&#x5B57;&#x7B26;</span><br><span class="line">    # data = data.replace(&apos;)]}\&apos;&apos;,&quot;&quot;)</span><br><span class="line">    data = re.sub(remove, &quot;&quot;, data)</span><br><span class="line">    data_json = json.loads(data)</span><br><span class="line"></span><br><span class="line">    with open(&quot;gerrit.csv&quot;, &quot;a&quot;,newline=&apos;&apos;) as csvfile:</span><br><span class="line">        writer = csv.writer(csvfile)</span><br><span class="line">        for one in data_json:</span><br><span class="line">            one[&quot;updated&quot;] = time_format(one[&quot;updated&quot;])</span><br><span class="line">            if (time_cmp(one[&quot;updated&quot;], limit_time) &lt; 0):</span><br><span class="line">                print(&quot;&#x5DF2;&#x7ECF;&#x53D1;&#x73B0;&#x6709;&#x8D85;&#x8FC7;&#x65F6;&#x95F4;&#x7684;&#x6570;&#x636E;&quot;)</span><br><span class="line">                continue_flag = 0</span><br><span class="line">                break</span><br><span class="line">            else:</span><br><span class="line">                writer.writerow([one[&quot;project&quot;], one[&quot;branch&quot;], one[&quot;subject&quot;], one[&quot;owner&quot;][&quot;name&quot;], one[&quot;updated&quot;]])</span><br><span class="line">                print(one[&quot;project&quot;], one[&quot;branch&quot;], one[&quot;subject&quot;], one[&quot;owner&quot;][&quot;name&quot;], one[&quot;updated&quot;], one[&quot;_sortkey&quot;])</span><br><span class="line">    return continue_flag, DOWNLOAD_URL + &quot;&amp;N=&quot; + data_json[-1][&quot;_sortkey&quot;]</span><br></pre></td></tr></table></figure>

<p>continue_flag&#x662F;&#x4E3A;&#x4E86;&#x4E3B;&#x7A0B;&#x5E8F;&#x91CC;&#x8D85;&#x8FC7;&#x6211;&#x9650;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x540E;&#x5C31;&#x4E0D;&#x518D;&#x722C;&#x53D6;&#x4E0B;&#x4E00;&#x9875;&#x3002;<br>gerrit&#x7684;&#x9ED8;&#x8BA4;url&#x662F;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;url&#xFF0C;&#x7136;&#x540E;&#x4E0B;&#x4E00;&#x9875;&#x6309;&#x94AE;&#x7684;url&#x662F;&#x8FD9;&#x4E2A;url&#x52A0;&#x4E0A;&#x8FD9;&#x4E00;&#x9875;&#x6700;&#x540E;&#x4E00;&#x9879;&#x7684;_sortkey(&#x5F62;&#x5982;0049b98c0000f3b8)&#x3002;&#x6240;&#x4EE5;&#x6211;&#x8981;&#x628A;&#x4E0B;&#x4E00;&#x9875;&#x7684;url&#x4E5F;return&#x51FA;&#x6765;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;DOWNLOAD_URL = &apos;http://192.168.8.40:8080/changes/?q=status:merged&amp;n=25&amp;O=1&apos;</span><br><span class="line"># DOWNLOAD_URL = &apos;http://192.168.8.40:8080/changes/?q=status:merged&amp;n=25&amp;O=1&amp;N=0049b98c0000f3b8&apos;</span><br></pre></td></tr></table></figure>

<p>&#x563F;&#x563F;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x6700;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E2D;&#x95F4;&#x7F16;&#x5199;&#x8FC7;&#x7A0B;&#x5C31;&#x4E0D;&#x653E;&#x4E86;&#xFF0C;&#x603B;&#x4E4B;&#x662F;&#x4E0D;&#x65AD;&#x4E30;&#x5BCC;&#xFF0C;&#x4E0D;&#x65AD;&#x7B80;&#x5316;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<h3 id="&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5904;&#x7406;&#x6570;&#x636E;&#x3002;"><a href="#&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5904;&#x7406;&#x6570;&#x636E;&#x3002;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5904;&#x7406;&#x6570;&#x636E;&#x3002;"></a>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x5904;&#x7406;&#x6570;&#x636E;&#x3002;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;#&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x7EDF;&#x8BA1;&#x4E0D;&#x7B26;&#x5408;&#x89C4;&#x8303;&#x7684;&#x4EBA;&#x5458;&#x53CA;&#x5176;&#x51FA;&#x73B0;&#x7684;&#x4E2A;&#x6570;  &#x5F97;&#x5230;&#x4E00;&#x4E2A;DataFrame</span><br><span class="line">def subject_format_count():</span><br><span class="line">    nonstandard_count={}</span><br><span class="line">    #newline=&apos; &apos;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x4E24;&#x884C;&#x4E4B;&#x95F4;&#x51FA;&#x73B0;&#x7A7A;&#x884C;</span><br><span class="line">    with open(r&quot;gerrit.csv&quot;,newline=&apos;&apos;) as csvfile:</span><br><span class="line">        readCSV = csv.reader(csvfile, delimiter=&apos;,&apos;)</span><br><span class="line">        for row in readCSV:</span><br><span class="line">            matchObj = re.match(r&quot;^TFS_\d+:&quot; + row[3] + &quot;_\D+\w+:.+&quot;, row[2])</span><br><span class="line">            if matchObj:</span><br><span class="line">                pass</span><br><span class="line">            else:</span><br><span class="line">                if row[3] in nonstandard_count:</span><br><span class="line">                    nonstandard_count[row[3]] += 1</span><br><span class="line">                else:</span><br><span class="line">                    nonstandard_count[row[3]] = 1</span><br><span class="line">    #&#x53BB;&#x6389;&#x7EDF;&#x8FDB;&#x6765;&#x7684;&#x6807;&#x7B7E;</span><br><span class="line">    nonstandard_count.pop(&apos;owner&apos;)</span><br><span class="line">    #&#x6309;&#x51FA;&#x73B0;&#x6B21;&#x6570;&#x9012;&#x51CF;&#x6392;&#x5E8F;</span><br><span class="line">    sort_nonstandard_count = sorted(nonstandard_count.items(), key=lambda v: v[1], reverse=True)</span><br><span class="line">    #&#x8FD9;&#x5730;&#x65B9;&#x7684;&#x8BBE;&#x7F6E;&#x53EF;&#x4EE5;&#x5148;&#x67E5;&#x770B;sort_nonstandard_count &#x7136;&#x540E;&#x770B;&#x770B;&#x5177;&#x4F53;&#x8981;&#x7684;&#x662F;&#x54EA;&#x4E2A;&#x503C; &#x6839;&#x636E;&#x8FD9;&#x91CC;&#x518D;&#x5199;&#x53EF;&#x89C6;&#x5316;</span><br><span class="line">    df = pandas.DataFrame(sort_nonstandard_count, index=[item[0] for item in sort_nonstandard_count])</span><br><span class="line">    return df</span><br></pre></td></tr></table></figure>

<p>&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x53EF;&#x4EE5;&#x5EA6;&#x5A18;&#x5728;&#x7EBF;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x6D4B;&#x8BD5;&#x627E;&#x5230;&#x6700;&#x5408;&#x9002;&#x7684;&#x6B63;&#x5219;&#x3002;&#x5982;&#x679C;&#x7B26;&#x5408;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x5219;&#x4E0D;&#x5904;&#x7406;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x7B26;&#x5408;&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x5B58;&#x5230;nonstandard_count&#x5E76;&#x4E14;&#x503C;+1&#x3002;&#x7136;&#x540E;&#x5F97;&#x5230;&#x7684;nonstandard_count&#x6309;&#x7167;&#x503C;&#x6392;&#x5E8F;&#xFF0C;&#x5927;&#x7684;&#x5728;&#x524D;&#x9762;&#x3002;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;DataFrame&#xFF0C;&#x65B9;&#x4FBF;&#x540E;&#x7EED;&#x5904;&#x7406;&#x3002;</p>
<h3 id="&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x53EF;&#x89C6;&#x5316;"><a href="#&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x53EF;&#x89C6;&#x5316;" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x53EF;&#x89C6;&#x5316;"></a>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x53EF;&#x89C6;&#x5316;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;##&#x53EF;&#x89C6;&#x5316;&#x5904;&#x7406;###############</span><br><span class="line">def view_format_count(df):</span><br><span class="line">    # x&#x4E3A;&#x6A2A;&#x5750;&#x6807;&#x523B;&#x5EA6;</span><br><span class="line">    x = np.arange(len(df.index))</span><br><span class="line">    # &#x8BBE;&#x7F6E;y&#x8F74;&#x7684;&#x6570;&#x503C;&#xFF0C;&#x53D6;df&#x7684;1&#x5217;&#xFF0C;0&#x5217;&#x4E3A;&#x6A2A;&#x5750;&#x6807;</span><br><span class="line">    y = np.array(df[1])</span><br><span class="line">    # &#x8BBE;&#x7F6E;x&#x6A2A;&#x5750;&#x6807;&#x663E;&#x793A;&#x4E3A;0&#x5217;&#x7684;&#x540D;&#x5B57;</span><br><span class="line">    xticks1 = np.array(df[0])</span><br><span class="line">    # &#x8BBE;&#x7F6E;&#x6A2A;&#x5750;&#x6807;&#x683C;&#x5F0F; &#x503E;&#x659C;30&#xB0;</span><br><span class="line">    plt.xticks(x, xticks1, size=&apos;small&apos;, rotation=30)</span><br><span class="line">    # &#x753B;&#x51FA;&#x67F1;&#x72B6;&#x56FE; appha&#x4E3A;&#x900F;&#x660E;&#x5EA6;</span><br><span class="line">    plt.bar(x, y, width=0.35, align=&apos;center&apos;, color=&apos;c&apos;, alpha=0.8)</span><br><span class="line">    # &#x5728;&#x67F1;&#x5F62;&#x56FE;&#x4E0A;&#x65B9;&#x663E;&#x793A;y&#x503C; zip&#xFF08;x,y&#xFF09;&#x5F97;&#x5230;&#x7684;&#x662F;tuple&#x5217;&#x8868; &#x5373;&#x5404;&#x5217;&#x9876;&#x70B9;&#x7684;&#x5750;&#x6807;</span><br><span class="line">    # &#x7136;&#x540E;&#x518D;&#x5404;&#x5217;&#x7684;&#x9876;&#x70B9;&#x4E0A;&#x65B9;0.05&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6587;&#x672C; ha&#x6C34;&#x5E73;&#x5BF9;&#x9F50;left,right,center va&#x5782;&#x76F4;&#x5BF9;&#x9F50; &apos;center&apos; , &apos;top&apos; , &apos;bottom&apos; ,&apos;baseline&apos;</span><br><span class="line">    for a, b in zip(x,y):</span><br><span class="line">        plt.text(a, b + 0.05, &apos;%.0f&apos; %b, ha=&apos;center&apos;, va=&apos;bottom&apos;, fontsize=11)</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x91CA;&#x5F88;&#x8BE6;&#x7EC6;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x753B;&#x51FA;df&#xFF0C;&#x7136;&#x540E;&#x5728;&#x67F1;&#x5F62;&#x56FE;&#x4E0A;&#x52A0;&#x4E0A;&#x8FD9;&#x4E2A;&#x503C;&#x7684;text&#x3002;</p>
<h3 id="&#x7B2C;&#x56DB;&#x6B65;-main"><a href="#&#x7B2C;&#x56DB;&#x6B65;-main" class="headerlink" title="&#x7B2C;&#x56DB;&#x6B65; main"></a>&#x7B2C;&#x56DB;&#x6B65; main</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;def main():</span><br><span class="line">    limit_time = input(&quot;&#x8BF7;&#x8F93;&#x5165;&#x622A;&#x6B62;&#x65F6;&#x95F4;  &#x683C;&#x5F0F;&#xFF1A;20171211000000\n&quot;)</span><br><span class="line">    url = DOWNLOAD_URL</span><br><span class="line">    continue_flag = 1</span><br><span class="line">    #&#x5199;&#x6807;&#x9898;</span><br><span class="line">    with open(&quot;gerrit.csv&quot;, &quot;w&quot;,newline=&apos;&apos;) as csvfile:</span><br><span class="line">        writer = csv.writer(csvfile)</span><br><span class="line">        writer.writerow([&quot;project&quot;, &quot;branch&quot;, &quot;subject&quot;, &quot;owner&quot;, &quot;updated&quot;])</span><br><span class="line">	#&#x5FAA;&#x73AF;&#x722C;&#x4E0B;&#x4E00;&#x9875;</span><br><span class="line">    while (continue_flag):</span><br><span class="line">        continue_flag, url = requesst(url,limit_time)</span><br><span class="line">    #&#x5904;&#x7406;&#x6570;&#x636E;&#x5E76;&#x53EF;&#x89C6;&#x5316;</span><br><span class="line">    view_format_count(subject_format_count())</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x53EA;&#x662F;&#x4E32;&#x8D77;&#x6765;&#x4E86;&#x3002;&#x5173;&#x952E;&#x7684;&#x4EE3;&#x7801;&#x57FA;&#x672C;&#x90FD;&#x8D34;&#x51FA;&#x6765;&#x4E86;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x51E0;&#x4E2A;&#x7A0D;&#x5FAE;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#xFF0C;&#x6CA1;&#x6709;&#x8D34;&#x51FA;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x6211;github&#x67E5;&#x770B;&#x3002;</p>
<p><a href="/external_links/a2b5c3afeae64e73b4ca7dbb89f78b0b.html" target="blank" rel="noopener">github</a></p>
<p>&#x8FD9;&#x4E2A;&#x76F4;&#x63A5;&#x722C;&#x662F;&#x6CA1;&#x7528;&#x7684;&#x54C8;&#xFF0C;&#x6211;&#x662F;&#x5185;&#x7F51;&#x3002;</p>
<h3 id="&#x7ED3;&#x679C;"><a href="#&#x7ED3;&#x679C;" class="headerlink" title="&#x7ED3;&#x679C;"></a>&#x7ED3;&#x679C;</h3><p>&#x989D;,&#x6211;&#x5347;&#x7EA7;PyCharm&#x524D;&#x8FD8;&#x597D;&#x597D;&#x7684;&#x554A;&#x3002;&#x5347;&#x7EA7;&#x5B8C;&#x548B;&#x5C31;&#x8FD9;&#x6837;&#x4E86;&#x5462;&#x2026;&#x2026;&#x6211;&#x540E;&#x9762;&#x518D;&#x7422;&#x78E8;&#x7422;&#x78E8;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/9ec2de0e06e87552d61e55edf760857ac095c80212cd10dc147c4f3ca2a97bae" alt></p>
<p>##&#x603B;&#x7ED3;&#x4E00;&#x4E0B;<br>&#x603B;&#x7684;&#x6765;&#x8BF4;&#x6536;&#x83B7;&#x5F88;&#x5927;&#xFF0C;&#x81EA;&#x5DF1;&#x5B9E;&#x6253;&#x5B9E;&#x7684;&#x4ECE;0&#x5F00;&#x59CB;&#x505A;&#x4E00;&#x4E2A;&#x5C0F;&#x7684;&#x5DE5;&#x5177;&#xFF08;&#x90FD;&#x4E0D;&#x7B97;&#x9879;&#x76EE;&#xFF09;&#x3002;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x867D;&#x8BF4;&#x5C0F;&#x56F0;&#x96BE;&#x4E0D;&#x65AD;&#xFF0C;&#x4F46;&#x662F;&#x57FA;&#x672C;&#x90FD;&#x80FD;&#x627E;&#x5230;&#x95EE;&#x9898;&#x6240;&#x5728;&#xFF0C;&#x7F51;&#x4E0A;&#x627E;&#x5230;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x3002;&#x5176;&#x5B9E;&#x6CA1;&#x60F3;&#x8C61;&#x7684;&#x96BE;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x62C6;&#x5206;&#x6210;&#x4E00;&#x90E8;&#x5206;&#x4E00;&#x90E8;&#x5206;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x52A8;&#x624B;&#x5C31;&#x597D;&#x3002;&#x867D;&#x8BF4;&#x4E4B;&#x524D;&#x5B66;&#x5F97;&#x90E8;&#x5206;&#x5B9E;&#x5728;&#x751F;&#x758F;&#xFF0C;&#x4F46;&#x505A;&#x8FD9;&#x4E2A;&#x786E;&#x5B9E;&#x719F;&#x7EC3;&#x4E86;&#x5F88;&#x591A;&#xFF0C;&#x5C31;&#x597D;&#x50CF;&#x4EE5;&#x524D;&#x5B66;&#x4E60;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x770B;&#x7740;&#x8001;&#x5E08;&#x8BB2;&#x90FD;&#x61C2;&#xFF0C;&#x4F46;&#x662F;&#x81EA;&#x5DF1;&#x5B9E;&#x9645;&#x505A;&#x9898;&#x5C31;&#x61F5;&#x4E86;&#x3002;&#x591A;&#x7EC3;&#x5C31;&#x597D;&#xFF01;&#x7136;&#x540E;&#x5EFA;&#x8BAE;&#x5927;&#x5BB6;&#x4E5F;&#x5728;&#x5B66;&#x4E60;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4E0D;&#x65AD;&#x7684;&#x627E;&#x4E00;&#x4E9B;&#x5BF9;&#x81EA;&#x5DF1;&#x80FD;&#x7528;&#x4E0A;&#x7684;&#x5C0F;&#x9879;&#x76EE;&#x53BB;&#x505A;&#xFF0C;&#x4F1A;&#x6709;&#x6210;&#x5C31;&#x611F;&#x7684;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/23d894a25c446fffedd7de28d90547bc.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903529912631303.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903529912631303.html" itemprop="url">Python爬虫实战 - 抓取BOSS直聘职位描述 和 数据</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-14T14:39:36+08:00">
                2017-12-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Pyhton&#x722C;&#x866B;&#x5B9E;&#x6218;-&#x6293;&#x53D6;BOSS&#x76F4;&#x8058;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;-&#x548C;-&#x6570;&#x636E;&#x6E05;&#x6D17;"><a href="#Pyhton&#x722C;&#x866B;&#x5B9E;&#x6218;-&#x6293;&#x53D6;BOSS&#x76F4;&#x8058;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;-&#x548C;-&#x6570;&#x636E;&#x6E05;&#x6D17;" class="headerlink" title="Pyhton&#x722C;&#x866B;&#x5B9E;&#x6218; - &#x6293;&#x53D6;BOSS&#x76F4;&#x8058;&#x804C;&#x4F4D;&#x63CF;&#x8FF0; &#x548C; &#x6570;&#x636E;&#x6E05;&#x6D17;"></a>Pyhton&#x722C;&#x866B;&#x5B9E;&#x6218; - &#x6293;&#x53D6;BOSS&#x76F4;&#x8058;&#x804C;&#x4F4D;&#x63CF;&#x8FF0; &#x548C; &#x6570;&#x636E;&#x6E05;&#x6D17;</h1><h2 id="&#x96F6;&#x3001;&#x81F4;&#x8C22;"><a href="#&#x96F6;&#x3001;&#x81F4;&#x8C22;" class="headerlink" title="&#x96F6;&#x3001;&#x81F4;&#x8C22;"></a>&#x96F6;&#x3001;&#x81F4;&#x8C22;</h2><p>&#x611F;&#x8C22;BOSS&#x76F4;&#x8058;&#x76F8;&#x5BF9;&#x6743;&#x5A01;&#x7684;&#x62DB;&#x8058;&#x4FE1;&#x606F;&#xFF0C;&#x4F7F;&#x672C;&#x4EBA;&#x6709;&#x4E86;&#x8FD9;&#x6B21;&#x6BD4;&#x8F83;&#x6709;&#x610F;&#x601D;&#x7684;&#x7814;&#x7A76;&#x4E4B;&#x65C5;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x722C;&#x866B;&#x6301;&#x7EED;&#x722C;&#x53D6; <a href="/external_links/a8463d3b060cc1c0b5327b8538f0f4dd.html" target="blank" rel="noopener">www.zhipin.com</a> &#x7F51;&#x7AD9;&#xFF0C;&#x4EE5;&#x81F4;&#x4EA7;&#x751F;&#x7684;&#x670D;&#x52A1;&#x5668;&#x538B;&#x529B;&#xFF0C;&#x672C;&#x4EBA;&#x6DF1;&#x611F;&#x6B49;&#x610F;&#xFF0C;&#x5E76;&#x6CA1;&#x6709; DDoS &#x548C;&#x5371;&#x5BB3;&#x8D35;&#x7F51;&#x7AD9;&#x7684;&#x610F;&#x601D;&#x3002;</p>
<blockquote>
<p>2017-12-14 &#x66F4;&#x65B0; : &#x5728;&#x8DD1;&#x4E86;&#x4E00;&#x591C;&#x4E4B;&#x540E;&#xFF0C;&#x670D;&#x52A1;&#x5668; IP &#x8FD8;&#x662F;&#x88AB;&#x5C01;&#x4E86;&#xFF0C;&#x641E;&#x5F97;&#x672C;&#x4EBA;&#x73B0;&#x5728;&#x5BB6;&#x91CC;&#x3001;&#x516C;&#x53F8;&#x3001;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x4E09;&#x7EBF;&#x4F5C;&#x6218;&#x554A;</p>
</blockquote>
<h2 id="&#x4E00;&#x3001;&#x6293;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;"><a href="#&#x4E00;&#x3001;&#x6293;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;" class="headerlink" title="&#x4E00;&#x3001;&#x6293;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;"></a>&#x4E00;&#x3001;&#x6293;&#x53D6;&#x8BE6;&#x7EC6;&#x7684;&#x804C;&#x4F4D;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;</h2><h3 id="1-1-&#x524D;&#x63D0;&#x6570;&#x636E;"><a href="#1-1-&#x524D;&#x63D0;&#x6570;&#x636E;" class="headerlink" title="1.1 &#x524D;&#x63D0;&#x6570;&#x636E;"></a>1.1 &#x524D;&#x63D0;&#x6570;&#x636E;</h3><p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x77E5;&#x9053;&#x9875;&#x9762;&#x7684; id &#x624D;&#x80FD;&#x751F;&#x6210;&#x8BE6;&#x7EC6;&#x7684;&#x94FE;&#x63A5;&#xFF0C;&#x5728; <a href="/external_links/fd65800529634c427726f81847802e84.html" target="blank" rel="noopener">Python&#x722C;&#x866B;&#x6846;&#x67B6;Scrapy&#x5B9E;&#x6218; - &#x6293;&#x53D6;BOSS&#x76F4;&#x8058;&#x62DB;&#x8058;&#x4FE1;&#x606F;</a> &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x62FF;&#x5230;&#x62DB;&#x8058;&#x4FE1;&#x606F;&#x7684;&#x5927;&#x90E8;&#x5206;&#x4FE1;&#x606F;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x4E2A; <code>pid</code> &#x5B57;&#x6BB5;&#x5C31;&#x662F;&#x7528;&#x6765;&#x552F;&#x4E00;&#x533A;&#x5206;&#x67D0;&#x6761;&#x62DB;&#x8058;&#xFF0C;&#x5E76;&#x7528;&#x6765;&#x62FC;&#x51D1;&#x8BE6;&#x7EC6;&#x94FE;&#x63A5;&#x7684;&#x3002;</p>
<p>&#x662F;&#x5427;&#xFF0C;&#x660E;&#x773C;&#x4EBA;&#x4E00;&#x773C;&#x5C31;&#x770B;&#x51FA;&#x6765;&#x4E86;&#x3002;</p>
<hr>
<h3 id="1-2-&#x8BE6;&#x60C5;&#x9875;&#x5206;&#x6790;"><a href="#1-2-&#x8BE6;&#x60C5;&#x9875;&#x5206;&#x6790;" class="headerlink" title="1.2 &#x8BE6;&#x60C5;&#x9875;&#x5206;&#x6790;"></a>1.2 &#x8BE6;&#x60C5;&#x9875;&#x5206;&#x6790;</h3><p>&#x8BE6;&#x60C5;&#x9875;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/deeb5af730cb47ca4d2a7816b9f8be766f4514326aebb1949fd5e799f835f197" alt="P2"> </p>
<p>&#x5728;&#x8BE6;&#x60C5;&#x9875;&#x4E2D;&#xFF0C;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x5C31;&#x662F;<code>&#x804C;&#x4F4D;&#x63CF;&#x8FF0;</code>&#x548C;<code>&#x5DE5;&#x4F5C;&#x5730;&#x5740;</code>&#x8FD9;&#x4E24;&#x4E2A;</p>
<p>&#x7531;&#x4E8E;&#x5728;&#x9875;&#x9762;&#x4EE3;&#x7801;&#x4E2D;<code>&#x5C97;&#x4F4D;&#x804C;&#x8D23;</code>&#x548C;<code>&#x4EFB;&#x804C;&#x8981;&#x6C42;</code>&#x662F;&#x5728;&#x4E00;&#x4E2A; div &#x4E2D;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6293;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4E0D;&#x592A;&#x597D;&#x5206;&#xFF0C;&#x540E;&#x7EED;&#x9700;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x8FDE;&#x4F53;&#x5A74;&#x513F;&#xFF0C;&#x5206;&#x5F00;&#x5206;&#x6790;&#x3002;</p>
<hr>
<h3 id="1-3-&#x722C;&#x866B;&#x7528;&#x5230;&#x7684;&#x5E93;"><a href="#1-3-&#x722C;&#x866B;&#x7528;&#x5230;&#x7684;&#x5E93;" class="headerlink" title="1.3 &#x722C;&#x866B;&#x7528;&#x5230;&#x7684;&#x5E93;"></a>1.3 &#x722C;&#x866B;&#x7528;&#x5230;&#x7684;&#x5E93;</h3><p>&#x4F7F;&#x7528;&#x7684;&#x5E93;&#x6709;</p>
<ul>
<li>requests</li>
<li>BeautifulSoup4</li>
<li>pymongo</li>
</ul>
<p>&#x5BF9;&#x5E94;&#x7684;&#x5B89;&#x88C5;&#x6587;&#x6863;&#x4F9D;&#x6B21;&#x5982;&#x4E0B;&#xFF0C;&#x5C31;&#x4E0D;&#x7EC6;&#x8BF4;&#x4E86;</p>
<ul>
<li><a href="/external_links/387f474b40904a888144a7fb60ab09cc.html" target="blank" rel="noopener">&#x5B89;&#x88C5; Requests - Requests 2.18.1 &#x6587;&#x6863;</a></li>
<li><a href="/external_links/391625debd853af0dfd6d29d18340541.html" target="blank" rel="noopener">&#x5B89;&#x88C5; Beautiful Soup - Beautiful Soup 4.2.0 &#x6587;&#x6863;</a></li>
<li><a href="/external_links/546fd5915215265217ed7b5b7902b0a1.html" target="blank" rel="noopener">PyMongo&#x5B89;&#x88C5;&#x4F7F;&#x7528;&#x7B14;&#x8BB0;</a></li>
</ul>
<hr>
<h3 id="1-4-Python-&#x4EE3;&#x7801;"><a href="#1-4-Python-&#x4EE3;&#x7801;" class="headerlink" title="1.4 Python &#x4EE3;&#x7801;"></a>1.4 Python &#x4EE3;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;&quot;&quot;</span><br><span class="line">@author: jtahstu</span><br><span class="line">@contact: root@jtahstu.com</span><br><span class="line">@site: http://www.jtahstu.com</span><br><span class="line">@time: 2017/12/10 00:25</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import requests</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import time</span><br><span class="line">from pymongo import MongoClient</span><br><span class="line"></span><br><span class="line">headers = {</span><br><span class="line">    &apos;x-devtools-emulate-network-conditions-client-id&apos;: &quot;5f2fc4da-c727-43c0-aad4-37fce8e3ff39&quot;,</span><br><span class="line">    &apos;upgrade-insecure-requests&apos;: &quot;1&quot;,</span><br><span class="line">    &apos;user-agent&apos;: &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.90 Safari/537.36&quot;,</span><br><span class="line">    &apos;accept&apos;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8&quot;,</span><br><span class="line">    &apos;dnt&apos;: &quot;1&quot;,</span><br><span class="line">    &apos;accept-encoding&apos;: &quot;gzip, deflate&quot;,</span><br><span class="line">    &apos;accept-language&apos;: &quot;zh-CN,zh;q=0.8,en;q=0.6&quot;,</span><br><span class="line">    &apos;cookie&apos;: &quot;__c=1501326829; lastCity=101020100; __g=-; __l=r=https%3A%2F%2Fwww.google.com.hk%2F&amp;l=%2F; __a=38940428.1501326829..1501326829.20.1.20.20; Hm_lvt_194df3105ad7148dcf2b98a91b5e727a=1501326839; Hm_lpvt_194df3105ad7148dcf2b98a91b5e727a=1502948718; __c=1501326829; lastCity=101020100; __g=-; Hm_lvt_194df3105ad7148dcf2b98a91b5e727a=1501326839; Hm_lpvt_194df3105ad7148dcf2b98a91b5e727a=1502954829; __l=r=https%3A%2F%2Fwww.google.com.hk%2F&amp;l=%2F; __a=38940428.1501326829..1501326829.21.1.21.21&quot;,</span><br><span class="line">    &apos;cache-control&apos;: &quot;no-cache&quot;,</span><br><span class="line">    &apos;postman-token&apos;: &quot;76554687-c4df-0c17-7cc0-5bf3845c9831&quot;</span><br><span class="line">}</span><br><span class="line">conn = MongoClient(&apos;127.0.0.1&apos;, 27017)</span><br><span class="line">db = conn.iApp  # &#x8FDE;&#x63A5;mydb&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6CA1;&#x6709;&#x5219;&#x81EA;&#x52A8;&#x521B;&#x5EFA;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def init():</span><br><span class="line">    items = db.jobs_php.find().sort(&apos;pid&apos;)</span><br><span class="line">    for item in items:</span><br><span class="line">        if &apos;detail&apos; in item.keys(): # &#x5728;&#x722C;&#x866B;&#x6302;&#x6389;&#x518D;&#x6B64;&#x722C;&#x53D6;&#x65F6;&#xFF0C;&#x8DF3;&#x8FC7;&#x5DF2;&#x722C;&#x53D6;&#x7684;&#x884C;</span><br><span class="line">            continue</span><br><span class="line">        detail_url = &quot;https://www.zhipin.com/job_detail/%s.html?ka=search_list_1&quot; % item[&apos;pid&apos;]</span><br><span class="line">        print(detail_url)</span><br><span class="line">        html = requests.get(detail_url, headers=headers)</span><br><span class="line">        if html.status_code != 200: # &#x722C;&#x7684;&#x592A;&#x5FEB;&#x7F51;&#x7AD9;&#x8FD4;&#x56DE;403&#xFF0C;&#x8FD9;&#x65F6;&#x7B49;&#x5F85;&#x89E3;&#x5C01;&#x5427;</span><br><span class="line">            print(&apos;status_code is %d&apos; % html.status_code)</span><br><span class="line">            break</span><br><span class="line">        soup = BeautifulSoup(html.text, &quot;html.parser&quot;)</span><br><span class="line">        job = soup.select(&quot;.job-sec .text&quot;)</span><br><span class="line">        if len(job) &lt; 1:</span><br><span class="line">            continue</span><br><span class="line">        item[&apos;detail&apos;] = job[0].text.strip()  # &#x804C;&#x4F4D;&#x63CF;&#x8FF0;</span><br><span class="line">        location = soup.select(&quot;.job-sec .job-location&quot;)</span><br><span class="line">        item[&apos;location&apos;] = location[0].text.strip()  # &#x5DE5;&#x4F5C;&#x5730;&#x70B9;</span><br><span class="line">        item[&apos;updated_at&apos;] = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())  # &#x5B9E;&#x65F6;&#x722C;&#x53D6;&#x65F6;&#x95F4;</span><br><span class="line">        res = save(item) # &#x4FDD;&#x5B58;&#x6570;&#x636E;</span><br><span class="line">        print(res)</span><br><span class="line">        time.sleep(40) # &#x505C;&#x505C;&#x505C;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># &#x4FDD;&#x5B58;&#x6570;&#x636E;&#x5230; MongoDB &#x4E2D;</span><br><span class="line">def save(item):</span><br><span class="line">    return db.jobs_php.update_one({&quot;_id&quot;: item[&apos;_id&apos;]}, {&quot;$set&quot;: item})</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    init()</span><br></pre></td></tr></table></figure>

<p>&#x4EE3;&#x7801; easy&#xFF0C;&#x521D;&#x5B66;&#x8005;&#x90FD;&#x80FD;&#x770B;&#x61C2;&#x3002;</p>
<hr>
<h3 id="1-5-&#x518D;&#x5570;&#x55E6;&#x51E0;&#x53E5;"><a href="#1-5-&#x518D;&#x5570;&#x55E6;&#x51E0;&#x53E5;" class="headerlink" title="1.5 &#x518D;&#x5570;&#x55E6;&#x51E0;&#x53E5;"></a>1.5 &#x518D;&#x5570;&#x55E6;&#x51E0;&#x53E5;</h3><p>&#x5728; <a href="/external_links/fd65800529634c427726f81847802e84.html" target="blank" rel="noopener">&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</a> &#x4E2D;&#x53EA;&#x662F;&#x722C;&#x4E86; <code>&#x4E0A;&#x6D77;-PHP</code> &#x8FD1;300&#x6761;&#x6570;&#x636E;&#xFF0C;&#x540E;&#x7EED;&#x6539;&#x4E86;&#x4EE3;&#x7801;&#xFF0C;&#x628A;12&#x4E2A;&#x57CE;&#x5E02;&#x7684; PHP &#x76F8;&#x5173;&#x5C97;&#x4F4D;&#x7684;&#x6570;&#x636E;&#x90FD;&#x6293;&#x4E0B;&#x6765;&#x4E86;&#xFF0C;&#x6709;3500+&#x6761;&#x6570;&#x636E;&#xFF0C;&#x6162;&#x6162;&#x722C;&#x5427;&#xFF0C;&#x6025;&#x4E0D;&#x6765;&#x3002;</p>
<p>&#x50CF;&#x8FD9;&#x6837;<br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/198b8ac028fa45b9957a5570f26fa38b79a70c6b907731d3755e899ded03fab1" alt="P7"><br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/aa9ec1fcba6b5292ba280e87fe7b61f0ddc580b6dba28947ac5318b6dfa182da" alt="P8"> </p>
<h2 id="&#x4E8C;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;"><a href="#&#x4E8C;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;" class="headerlink" title="&#x4E8C;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;"></a>&#x4E8C;&#x3001;&#x6570;&#x636E;&#x6E05;&#x6D17;</h2><h3 id="2-1-&#x6821;&#x6B63;&#x53D1;&#x5E03;&#x65E5;&#x671F;"><a href="#2-1-&#x6821;&#x6B63;&#x53D1;&#x5E03;&#x65E5;&#x671F;" class="headerlink" title="2.1 &#x6821;&#x6B63;&#x53D1;&#x5E03;&#x65E5;&#x671F;"></a>2.1 &#x6821;&#x6B63;&#x53D1;&#x5E03;&#x65E5;&#x671F;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;time&quot; : &quot;&#x53D1;&#x5E03;&#x4E8E;03&#x6708;31&#x65E5;&quot;,</span><br><span class="line">&quot;time&quot; : &quot;&#x53D1;&#x5E03;&#x4E8E;&#x6628;&#x5929;&quot;,</span><br><span class="line">&quot;time&quot; : &quot;&#x53D1;&#x5E03;&#x4E8E;11:31&quot;,</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x62FF;&#x5230;&#x7684;&#x90FD;&#x662F;&#x8FD9;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x7B80;&#x5355;&#x5904;&#x7406;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import datetime</span><br><span class="line"></span><br><span class="line">from pymongo import MongoClient</span><br><span class="line"></span><br><span class="line">db = MongoClient(&apos;127.0.0.1&apos;, 27017).iApp</span><br><span class="line"></span><br><span class="line">def update(data):</span><br><span class="line">    return db.jobs_php.update_one({&quot;_id&quot;: data[&apos;_id&apos;]}, {&quot;$set&quot;: data})</span><br><span class="line"></span><br><span class="line"># &#x628A;&#x65F6;&#x95F4;&#x6821;&#x6B63;&#x8FC7;&#x6765;</span><br><span class="line">def clear_time():</span><br><span class="line">    items = db.jobs_php.find({})</span><br><span class="line">    for item in items:</span><br><span class="line">        if not item[&apos;time&apos;].find(&apos;&#x5E03;&#x4E8E;&apos;):</span><br><span class="line">            continue</span><br><span class="line">        item[&apos;time&apos;] = item[&apos;time&apos;].replace(&quot;&#x53D1;&#x5E03;&#x4E8E;&quot;, &quot;2017-&quot;)</span><br><span class="line">        item[&apos;time&apos;] = item[&apos;time&apos;].replace(&quot;&#x6708;&quot;, &quot;-&quot;)</span><br><span class="line">        item[&apos;time&apos;] = item[&apos;time&apos;].replace(&quot;&#x65E5;&quot;, &quot;&quot;)</span><br><span class="line">        if item[&apos;time&apos;].find(&quot;&#x6628;&#x5929;&quot;) &gt; 0:</span><br><span class="line">            item[&apos;time&apos;] = str(datetime.date.today() - datetime.timedelta(days=1))</span><br><span class="line">        elif item[&apos;time&apos;].find(&quot;:&quot;) &gt; 0:</span><br><span class="line">            item[&apos;time&apos;] = str(datetime.date.today())</span><br><span class="line">        update(item)</span><br><span class="line">    print(&apos;ok&apos;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-2-&#x6821;&#x6B63;&#x85AA;&#x6C34;&#x4EE5;&#x6570;&#x5B57;&#x4FDD;&#x5B58;"><a href="#2-2-&#x6821;&#x6B63;&#x85AA;&#x6C34;&#x4EE5;&#x6570;&#x5B57;&#x4FDD;&#x5B58;" class="headerlink" title="2.2 &#x6821;&#x6B63;&#x85AA;&#x6C34;&#x4EE5;&#x6570;&#x5B57;&#x4FDD;&#x5B58;"></a>2.2 &#x6821;&#x6B63;&#x85AA;&#x6C34;&#x4EE5;&#x6570;&#x5B57;&#x4FDD;&#x5B58;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;salary&quot; : &quot;5K-12K&quot;,</span><br><span class="line"></span><br><span class="line">#&#x5904;&#x7406;&#x6210;&#x4E0B;&#x9762;&#x7684;&#x683C;&#x5F0F;</span><br><span class="line">&quot;salary&quot; : {</span><br><span class="line">    &quot;low&quot; : 5000,</span><br><span class="line">    &quot;high&quot; : 12000,</span><br><span class="line">    &quot;avg&quot; : 8500.0</span><br><span class="line">},</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x85AA;&#x6C34;&#x5904;&#x7406;&#x6210;&#x6570;&#x5B57;</span><br><span class="line">def clear_salary():</span><br><span class="line">    items = db.jobs_php.find({})</span><br><span class="line">    for item in items:</span><br><span class="line">        if type(item[&apos;salary&apos;]) == type({}):</span><br><span class="line">            continue</span><br><span class="line">        salary_list = item[&apos;salary&apos;].replace(&quot;K&quot;, &quot;000&quot;).split(&quot;-&quot;)</span><br><span class="line">        salary_list = [int(x) for x in salary_list]</span><br><span class="line">        item[&apos;salary&apos;] = {</span><br><span class="line">            &apos;low&apos;: salary_list[0],</span><br><span class="line">            &apos;high&apos;: salary_list[1],</span><br><span class="line">            &apos;avg&apos;: (salary_list[0] + salary_list[1]) / 2</span><br><span class="line">        }</span><br><span class="line">        update(item)</span><br><span class="line">    print(&apos;ok&apos;)</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-3-&#x6839;&#x636E;-&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x5E74;&#x9650;-&#x5212;&#x5206;&#x62DB;&#x8058;&#x7B49;&#x7EA7;"><a href="#2-3-&#x6839;&#x636E;-&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x5E74;&#x9650;-&#x5212;&#x5206;&#x62DB;&#x8058;&#x7B49;&#x7EA7;" class="headerlink" title="2.3 &#x6839;&#x636E; &#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x5E74;&#x9650; &#x5212;&#x5206;&#x62DB;&#x8058;&#x7B49;&#x7EA7;"></a>2.3 &#x6839;&#x636E; &#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x5E74;&#x9650; &#x5212;&#x5206;&#x62DB;&#x8058;&#x7B49;&#x7EA7;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x8BBE;&#x7F6E;&#x62DB;&#x8058;&#x7684;&#x6C34;&#x5E73;</span><br><span class="line">def set_level():</span><br><span class="line">    items = db.jobs_php.find({})</span><br><span class="line">    for item in items:</span><br><span class="line">        if item[&apos;workYear&apos;] == &apos;&#x5E94;&#x5C4A;&#x751F;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 1</span><br><span class="line">        elif item[&apos;workYear&apos;] == &apos;1&#x5E74;&#x4EE5;&#x5185;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 2</span><br><span class="line">        elif item[&apos;workYear&apos;] == &apos;1-3&#x5E74;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 3</span><br><span class="line">        elif item[&apos;workYear&apos;] == &apos;3-5&#x5E74;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 4</span><br><span class="line">        elif item[&apos;workYear&apos;] == &apos;5-10&#x5E74;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 5</span><br><span class="line">        elif item[&apos;workYear&apos;] == &apos;10&#x5E74;&#x4EE5;&#x4E0A;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 6</span><br><span class="line">        elif item[&apos;workYear&apos;] == &apos;&#x7ECF;&#x9A8C;&#x4E0D;&#x9650;&apos;:</span><br><span class="line">            item[&apos;level&apos;] = 10</span><br><span class="line">        update(item)</span><br><span class="line">    print(&apos;ok&apos;)</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x6709;&#x70B9;&#x5751;&#x7684;&#x5C31;&#x662F;&#xFF0C;&#x4E00;&#x822C;&#x8981;&#x6C42;<code>&#x7ECF;&#x9A8C;&#x4E0D;&#x9650;</code>&#x7684;&#x5C97;&#x4F4D;&#xFF0C;&#x9700;&#x6C42;&#x57FA;&#x672C;&#x90FD;&#x5199;&#x5728;<code>&#x4EFB;&#x804C;&#x8981;&#x6C42;</code>&#x91CC;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x7EDF;&#x8BA1;&#x7684;&#x51C6;&#x786E;&#x6027;&#xFF0C;&#x8FD9;&#x4E2A;&#x7B49;&#x7EA7;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x540E;&#x9762;&#x4F1A;&#x88AB;&#x820D;&#x5F03;&#x6389;&#x3002;</p>
<blockquote>
<p>2017-12-14 &#x66F4;&#x65B0;&#xFF1A;<br>&#x4ECE;&#x540E;&#x7EED;&#x7684;&#x5E73;&#x5747;&#x6570;&#x636E;&#x6765;&#x770B;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>&#x7ECF;&#x9A8C;&#x4E0D;&#x9650;</code>&#xFF0C;&#x4E00;&#x822C;&#x8981;&#x6C42;&#x7684;&#x662F;<code>1-3&#x5E74;</code>&#x5DE6;&#x53F3;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x5EFA;&#x8BAE;&#x820D;&#x5F03;&#x6389;&#x3002;</p>
</blockquote>
<hr>
<h3 id="2-4-&#x533A;&#x5206;&#x5F00;-lt-&#x5C97;&#x4F4D;&#x804C;&#x8D23;-gt-&#x548C;-lt-&#x4EFB;&#x804C;&#x8981;&#x6C42;-gt"><a href="#2-4-&#x533A;&#x5206;&#x5F00;-lt-&#x5C97;&#x4F4D;&#x804C;&#x8D23;-gt-&#x548C;-lt-&#x4EFB;&#x804C;&#x8981;&#x6C42;-gt" class="headerlink" title="2.4 &#x533A;&#x5206;&#x5F00;&lt;&#x5C97;&#x4F4D;&#x804C;&#x8D23;&gt;&#x548C;&lt;&#x4EFB;&#x804C;&#x8981;&#x6C42;&gt;"></a>2.4 &#x533A;&#x5206;&#x5F00;&lt;&#x5C97;&#x4F4D;&#x804C;&#x8D23;&gt;&#x548C;&lt;&#x4EFB;&#x804C;&#x8981;&#x6C42;&gt;</h3><p>&#x5BF9;&#x4E8E;&#x4F5C;&#x8005;&#x8FD9;&#x4E2A;&#x521D;&#x5B66;&#x8005;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x91CC;&#x8FD8;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x77E5;&#x9053;&#x7684;&#x540C;&#x5B66;&#xFF0C;&#x8BF7;&#x52A1;&#x5FC5;&#x8054;&#x7CFB;&#x4F5C;&#x8005;&#xFF0C;&#x8054;&#x7CFB;&#x65B9;&#x5F0F;&#x5728;<a href="/external_links/e3a6f693ade13af5fbce2020bcc969bf.html" target="blank" rel="noopener">&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;</a>&#x91CC;</p>
<p>so , i&#x2019;m sorry.</p>
<p><strong>&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E24;&#x4E2A;&#x4E0D;&#x597D;&#x5212;&#x5206;&#x51FA;&#x6765;&#x5462;&#xFF1F;</strong></p>
<p>&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x586B;&#x7684;&#x5E76;&#x4E0D;&#x7EDF;&#x4E00;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x5404;&#x79CD;&#x82B1;&#x6837;&#xFF0C;&#x6709;&#x7684;&#x8981;&#x6C42;&#x5728;&#x524D;&#xFF0C;&#x804C;&#x8D23;&#x5728;&#x540E;&#xFF0C;&#x6709;&#x7684;&#x53C8;&#x6362;&#x4E2A;&#x540D;&#x5B57;&#x533A;&#x5206;&#x3002;&#x76EE;&#x524D;&#x770B;&#x5230;&#x7684;&#x5173;&#x4E8E;&#x8981;&#x6C42;&#x7684;&#x6709;<code>[&apos;&#x4EFB;&#x804C;&#x6761;&#x4EF6;&apos;, &apos;&#x6280;&#x672F;&#x8981;&#x6C42;&apos;, &apos;&#x4EFB;&#x804C;&#x8981;&#x6C42;&apos;, &apos;&#x4EFB;&#x804C;&#x8D44;&#x683C;&apos;, &apos;&#x5C97;&#x4F4D;&#x8981;&#x6C42;&apos;]</code>&#x8FD9;&#x4E48;&#x591A;&#x8BF4;&#x6CD5;&#x3002;&#x7136;&#x540E;&#x987A;&#x5E8F;&#x8FD8;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x6709;&#x7684;&#x8981;&#x6C42;&#x5728;&#x524D;&#xFF0C;&#x804C;&#x8D23;&#x5728;&#x540E;&#xFF0C;&#x6709;&#x7684;&#x53C8;&#x53CD;&#x4E4B;&#x3002;</p>
<p>&#x4E3E;&#x4E2A;&#x6817;&#x5B50;</p>
<blockquote>
<p>&#x4F1A;&#x57FA;&#x672C;&#x7684;php&#x7F16;&#x7A0B;&#xFF01;&#x80FD;&#x591F;&#x4FEE;&#x6539;&#x7B80;&#x5355;&#x7684;&#x8F6F;&#x4EF6;&#xFF01;&#x5BF9;&#x4E91;&#x670D;&#x52A1;&#x5668;&#x548C;&#x6570;&#x636E;&#x5E93;&#x80FD;&#x591F;&#x8FD0;&#x7528;&#xFF01;&#x61C2;&#x5F97;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x8D26;&#x53F7;&#x5BF9;&#x63A5;&#x548C;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#x5BF9;&#x63A5;&#xFF01;&#x6211;&#x4EEC;&#x4E0D;&#x662F;&#x8F6F;&#x4EF6;&#x516C;&#x53F8;&#xFF0C;&#x662F;&#x8FD0;&#x8425;&#x516C;&#x53F8;&#xFF01;&#x60F3;&#x627E;&#x597D;&#x7684;&#x516C;&#x53F8;&#x5B66;&#x4E60;&#x7684;&#x9655;&#x897F;&#x57FA;&#x672C;&#x6CA1;&#x6709;&#xFF0C;&#x8981;&#x5230;&#x6CBF;&#x6D77;&#x57CE;&#x5E02;&#x53BB;&#xFF01;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x662F;&#x5B9E;&#x7528;&#x578B;&#x516C;&#x53F8;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x8F6F;&#x4EF6;&#x5E94;&#x7528;&#x548C;&#x66F4;&#x9002;&#x5408;&#x5927;&#x4F17;&#xFF01;</p>
</blockquote>
<p>&#x5565;&#x4E5F;&#x4E0D;&#x8BF4;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x8FD9;&#x662F;&#x4E00;&#x6761;<code>&#x810F;&#x6570;&#x636E;</code>&#x4E86;&#x3002;</p>
<p>&#x4E0D;&#x884C;&#xFF0C;&#x518D;&#x4E3E;&#x4E2A;&#x6817;&#x5B50;</p>
<blockquote>
<p>PHP&#x4E2D;&#x7EA7;&#x7814;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;&#xFF08;ERP/MES&#x65B9;&#x5411;&#xFF09;<br>1&#x3001;&#x8BA1;&#x7B97;&#x673A;&#x6216;&#x76F8;&#x5173;&#x5B66;&#x79D1;&#x672C;&#x79D1;&#x6216;&#x672C;&#x79D1;&#x4EE5;&#x4E0A;&#x5B66;&#x5386;&#xFF1B;<br>2&#x3001;php&#x548C;Java script&#x7684;&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#x3002;<br>3&#x3001;Linux&#x548C;MySQL&#x6570;&#x636E;&#x5E93;&#x7684;&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#xFF1B;<br>5&#x3001;&#x6709;ERP&#x3001;MES&#x76F8;&#x5173;&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#x4F18;&#x5148;&#xFF1B;<br>6&#x3001;&#x82F1;&#x8BED;&#x7684;&#x8BFB;&#x5199;&#x80FD;&#x529B;&#xFF1B;<br>7&#x3001;&#x6587;&#x5316;&#x7684;&#x5F00;&#x653E;&#x6027;&#xFF1B;<br>&#x6211;&#x4EEC;&#x63D0;&#x4F9B;<br>1&#x3001;&#x6709;&#x8DA3;&#x7684;&#x5DE5;&#x4F5C;&#x4EFB;&#x52A1;&#xFF1B;<br>2&#x3001;&#x591A;&#x5143;&#x7684;&#x5DE5;&#x4F5C;&#x9886;&#x57DF;&#xFF1B;<br>3&#x3001;&#x4E0E;&#x80FD;&#x529B;&#x76F8;&#x5173;&#x7684;&#x6536;&#x5165;&#xFF1B;<br>4&#x3001;&#x5E74;&#x8F7B;&#x3001;&#x5F00;&#x653E;&#x5E76;&#x5177;&#x6709;&#x521B;&#x9020;&#x529B;&#x7684;&#x56E2;&#x961F;&#x548C;&#x5DE5;&#x4F5C;&#x6C1B;&#x56F4;&#xFF1B;<br>5&#x3001;&#x4E0D;&#x65AD;&#x63A5;&#x89E6;&#x6700;&#x65B0;&#x79D1;&#x6280;&#xFF08;&#x5C24;&#x5176;&#x662F;&#x5DE5;&#x4E1A;4.0&#x76F8;&#x5173;&#xFF09;&#xFF1B;</p>
</blockquote>
<p>&#x8FD9;&#x4E2A;&#x53EA;&#x6709;&#x8981;&#x6C42;&#xFF0C;&#x6CA1;&#x804C;&#x8D23;&#xFF0C;&#x8FD8;&#x591A;&#x4E86;&#x4E2A;&#x63D0;&#x4F9B;&#xFF0C;&#x6211;&#x4E50;&#x4E2A;&#x8DA3; &#x256E;(&#x256F;&#x25BD;&#x2570;)&#x256D;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x6C14;&#x7684;&#x60F3;&#x9A82;&#x4EBA;&#x3002;</p>
<hr>
<p>ok &#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x6570;&#x636E;&#x57FA;&#x672C;&#x6210;&#x8FD9;&#x6837;&#x4E86;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    &quot;_id&quot; : ObjectId(&quot;5a30ad2068504386f47d9a4b&quot;),</span><br><span class="line">    &quot;city&quot; : &quot;&#x82CF;&#x5DDE;&quot;,</span><br><span class="line">    &quot;companyShortName&quot; : &quot;&#x84DD;&#x6D77;&#x5F64;&#x7FD4;&quot;,</span><br><span class="line">    &quot;companySize&quot; : &quot;100-499&#x4EBA;&quot;,</span><br><span class="line">    &quot;education&quot; : &quot;&#x672C;&#x79D1;&quot;,</span><br><span class="line">    &quot;financeStage&quot; : &quot;B&#x8F6E;&quot;,</span><br><span class="line">    &quot;industryField&quot; : &quot;&#x4E92;&#x8054;&#x7F51;&quot;,</span><br><span class="line">    &quot;level&quot; : 3,</span><br><span class="line">    &quot;pid&quot; : &quot;11889834&quot;,</span><br><span class="line">    &quot;positionLables&quot; : [ </span><br><span class="line">        &quot;PHP&quot;, </span><br><span class="line">        &quot;ThinkPHP&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;positionName&quot; : &quot;php&#x7814;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;&quot;,</span><br><span class="line">    &quot;salary&quot; : {</span><br><span class="line">        &quot;avg&quot; : 7500.0,</span><br><span class="line">        &quot;low&quot; : 7000,</span><br><span class="line">        &quot;high&quot; : 8000</span><br><span class="line">    },</span><br><span class="line">    &quot;time&quot; : &quot;2017-06-06&quot;,</span><br><span class="line">    &quot;updated_at&quot; : &quot;2017-12-13 18:31:15&quot;,</span><br><span class="line">    &quot;workYear&quot; : &quot;1-3&#x5E74;&quot;,</span><br><span class="line">    &quot;detail&quot; : &quot;1&#x3001;&#x5904;&#x7406;landcloud&#x4E91;&#x8BA1;&#x7B97;&#x76F8;&#x5173;&#x7CFB;&#x7EDF;&#x7684;&#x5404;&#x7C7B;&#x5F00;&#x53D1;&#x548C;&#x8C03;&#x7814;&#x5DE5;&#x4F5C;&#xFF1B;2&#x3001;&#x5904;&#x7406;coms&#x9AD8;&#x6027;&#x80FD;&#x8BA1;&#x7B97;&#x7684;&#x5404;&#x7C7B;&#x5F00;&#x53D1;&#x548C;&#x8C03;&#x7814;&#x5DE5;&#x4F5C;&#x5C97;&#x4F4D;&#x8981;&#x6C42;&#xFF1A;1&#x3001;&#x672C;&#x79D1;&#x5B66;&#x5386;&#xFF0C;&#x4E24;&#x5E74;&#x4EE5;&#x4E0A;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#xFF0C;&#x719F;&#x6089;PHP&#x5F00;&#x53D1;&#xFF0C;&#x4E86;&#x89E3;&#x5E38;&#x7528;&#x7684;php&#x5F00;&#x53D1;&#x6280;&#x5DE7;&#x548C;&#x6846;&#x67B6;&#xFF1B;2&#x3001;&#x4E86;&#x89E3;C++&#xFF0C;python&#x53CA;Java&#x5F00;&#x53D1;&#xFF1B;3&#x3001;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x7814;&#x53D1;&#x80FD;&#x529B;&#x548C;&#x94BB;&#x7814;&#x7CBE;&#x795E;&#xFF1B;4&#x3001;&#x6709;&#x4E3B;&#x52A8;&#x6C9F;&#x901A;&#x80FD;&#x529B;&#x548C;&#x5403;&#x82E6;&#x8010;&#x52B3;&#x7684;&#x7CBE;&#x795E;&#x3002;&quot;,</span><br><span class="line">    &quot;location&quot; : &quot;&#x82CF;&#x5DDE;&#x5E02;&#x9AD8;&#x65B0;&#x533A;&#x79D1;&#x6280;&#x57CE;&#x9526;&#x5CF0;&#x8DEF;158&#x53F7;101park8&#x5E62;&quot;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x8FD8;&#x6CA1;&#x5230;&#x6570;&#x636E;&#x5C55;&#x793A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6240;&#x4EE5;&#x73B0;&#x5728;&#x80FD;&#x60F3;&#x5230;&#x7684;&#x5C31;&#x662F;&#x5148;&#x8FD9;&#x6837;&#x5904;&#x7406;&#x4E86;</p>
<p>&#x9879;&#x76EE;&#x5F00;&#x6E90;&#x5730;&#x5740;&#xFF1A;<a href="/external_links/dba3770045ef30ab62a540b56e567877.html" target="blank" rel="noopener">git.jtahstu.com/jtahstu/Scr&#x2026;</a></p>
<h3 id="&#x4E09;&#x3001;&#x5C55;&#x671B;&#x548C;&#x8BBE;&#x60F3;"><a href="#&#x4E09;&#x3001;&#x5C55;&#x671B;&#x548C;&#x8BBE;&#x60F3;" class="headerlink" title="&#x4E09;&#x3001;&#x5C55;&#x671B;&#x548C;&#x8BBE;&#x60F3;"></a>&#x4E09;&#x3001;&#x5C55;&#x671B;&#x548C;&#x8BBE;&#x60F3;</h3><p>&#x9996;&#x5148;&#x8FD9;&#x4E2A;&#x5C0F;&#x73A9;&#x610F;&#x6570;&#x636E;&#x91CF;&#x5E76;&#x4E0D;&#x591F;&#x591A;&#xFF0C;&#x56E0;&#x4E3A;&#x722C;&#x53D6;&#x65F6;&#x95F4;&#x77ED;&#xFF0C;&#x7AD9;&#x70B9;&#x552F;&#x4E00;&#xFF0C;&#x518D;&#x8005;&#x5E7F;&#x5EA6;&#x5C40;&#x9650;&#x5728; PHP &#x8FD9;&#x4E00;&#x4E2A;&#x5C97;&#x4F4D;&#x4E0A;&#xFF0C;&#x4EE5;&#x81F4;&#x5B58;&#x5728;&#x4E00;&#x5B9A;&#x7684;&#x8BEF;&#x5DEE;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x6570;&#x636E;&#x7684;&#x4E30;&#x5BCC;&#x548C;&#x591A;&#x6837;&#x6027;&#xFF0C;&#x8FD9;&#x4E2A;&#x722C;&#x866B;&#x662F;&#x4E00;&#x5B9A;&#x8981;&#x6301;&#x7EED;&#x8DD1;&#x7740;&#x7684;&#xFF0C;&#x81F3;&#x5C11;&#x8981;<code>&#x6293;&#x51E0;&#x4E2A;&#x6708;&#x7684;&#x6570;&#x636E;</code>&#x624D;&#x7B97;&#x53EF;&#x9760;&#x5427;&#x3002;</p>
<p>&#x7136;&#x540E;&#x51C6;&#x5907;&#x518D;&#x53BB;&#x6293;&#x4E0B;<code>&#x62C9;&#x52FE;&#x7F51;</code>&#x7684;&#x62DB;&#x8058;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E2A;&#x76F8;&#x5BF9;&#x4F18;&#x79C0;&#x7684;&#x4E13;&#x4E1A; IT &#x62DB;&#x8058;&#x7F51;&#x7AD9;&#x4E86;&#xFF0C;&#x6570;&#x636E;&#x4E5F;&#x76F8;&#x5F53;&#x591A;&#xFF0C;&#x60F3;&#x5F53;&#x521D;&#x627E;&#x5B9E;&#x4E60;&#x627E;&#x6B63;&#x5F0F;&#x5DE5;&#x4F5C;&#xFF0C;&#x90FD;&#x662F;&#x5728;&#x8FD9;&#x4E24;&#x4E2A; APP &#x4E0A;&#x627E;&#x7684;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x7F51;&#x7AD9;&#x51E0;&#x4E4E;&#x90FD;&#x6CA1;&#x770B;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x5BF9;&#x4E8E;&#x79D1;&#x73ED;&#x51FA;&#x8EAB;&#x7684;&#x5B66;&#x5F1F;&#x5B66;&#x59B9;&#x4EEC;&#xFF0C;&#x8FC7;&#x6765;&#x4EBA;&#x8BF4;&#x4E00;&#x53E5;&#xFF0C;&#x7F16;&#x7A0B;&#x76F8;&#x5173;&#x7684;&#x804C;&#x4E1A;&#x5C31;&#x4E0D;&#x8981;&#x53BB;&#x5FD7;&#x8FDE;&#x3001;&#x94B1;&#x5C18;&#x4E4C;&#x6709;&#x3001;five eight&#x6850;&#x57CE;&#x4E86;&#xFF0C;&#x597D;&#x5417;&#xFF1F;&#x90A3;&#x91CC;&#x9762;&#x90FD;&#x53D1;&#x7684;&#x5565;&#x5440;&#xFF0C;&#x770B;&#x90A3;&#x4E9B;&#x4ECB;&#x7ECD;&#x5FC3;&#x91CC;&#x6CA1;&#x70B9;&#x6570;&#x5417;&#xFF1F;</p>
<h3 id="&#x56DB;&#x3001;help"><a href="#&#x56DB;&#x3001;help" class="headerlink" title="&#x56DB;&#x3001;help"></a>&#x56DB;&#x3001;help</h3><p>&#x8FD9;&#x91CC;&#x5B8C;&#x5168;&#x5C31;&#x662F;&#x4F5C;&#x8005;&#x672C;&#x4EBA;&#x4F9D;&#x636E;&#x4E2A;&#x4EBA;&#x5FAE;&#x8584;&#x7684;&#x89C1;&#x8BC6;&#xFF0C;&#x4E3B;&#x89C2;&#x81C6;&#x65AD;&#x505A;&#x7684;&#x4E00;&#x4E9B;&#x4E8B;&#x60C5;&#xFF0C;&#x6240;&#x4EE5;&#x5927;&#x5BB6;&#x6709;&#x4EC0;&#x4E48;&#x70B9;&#x5B50;&#x548C;&#x5EFA;&#x8BAE;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x8054;&#x7CFB;&#x4F5C;&#x8005;&#xFF0C;&#x591A;&#x4EA4;&#x6D41;&#x4EA4;&#x6D41;&#x561B;&#x3002;</p>
<p>&#x540E;&#x7EED;&#x4F1A;&#x516C;&#x5F00;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x5927;&#x5BB6;&#x81EA;&#x5DF1;&#x53EF;&#x4EE5;&#x5F04;&#x7740;&#x73A9;&#x73A9;&#x5427;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x592A;&#x5E74;&#x8F7B;&#xFF0C;&#x4EE5;&#x81F4;&#x90FD;&#x4E0D;&#x77E5;&#x9053;&#x4EE5;&#x540E;&#x7684;&#x65F6;&#x5149;&#xFF0C;&#x7ADF;&#x7136;&#x90A3;&#x4E48;&#x957F;&#xFF0C;&#x957F;&#x5F97;&#x8DB3;&#x591F;&#x8BA9;&#x6211;&#x4EEC;&#x628A;&#x4E00;&#x95E8;&#x6280;&#x672F;&#x7814;&#x7A76;&#x5230;&#x9876;&#x5CF0;&#xFF0C;&#x4E71;&#x82B1;&#x6E10;&#x6B32;&#x8FF7;&#x4EBA;&#x773C;&#xFF0C;&#x8BF7;&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x6839;&#x672C;&#x597D;&#x5417;&#x3002;</p>
<blockquote>
<p>&#x751F;&#x6D3B;&#x603B;&#x662F;&#x8BA9;&#x6211;&#x4EEC;&#x904D;&#x4F53;&#x9CDE;&#x4F24;&#xFF0C;&#x4F46;&#x5230;&#x540E;&#x6765;&#xFF0C;&#x90A3;&#x4E9B;&#x53D7;&#x4F24;&#x7684;&#x5730;&#x65B9;&#x4E00;&#x5B9A;&#x4F1A;&#x53D8;&#x6210;&#x6211;&#x4EEC;&#x6700;&#x5F3A;&#x58EE;&#x7684;&#x5730;&#x65B9;&#x3002; &#x2014;&#x6D77;&#x660E;&#x5A01; &#x300A;&#x6C38;&#x522B;&#x4E86;&#x6B66;&#x5668;&#x300B;</p>
</blockquote>
<hr>
<p>&#x672C;&#x6587;&#x7AE0;&#x91C7;&#x7528; <a href="/external_links/59cb511ea8425268f9ea9c6dffd6924c.html" target="blank" rel="noopener">&#x77E5;&#x8BC6;&#x5171;&#x4EAB;&#x7F72;&#x540D;2.5&#x4E2D;&#x56FD;&#x5927;&#x9646;&#x8BB8;&#x53EF;&#x534F;&#x8BAE;</a> &#x8FDB;&#x884C;&#x8BB8;&#x53EF;&#xFF0C;&#x6B22;&#x8FCE;&#x8F6C;&#x8F7D;&#xFF0C;&#x6F14;&#x7ECE;&#x6216;&#x7528;&#x4E8E;&#x5546;&#x4E1A;&#x76EE;&#x7684;&#x3002;</p>
<hr>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/433bc0af3254b49f54fd328b0548561f.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../349/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../349/">349</a><span class="page-number current">350</span><a class="page-number" href="../351/">351</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../351/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
