<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/35/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/35/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7340197367515578378.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7340197367515578378.html" itemprop="url">如果iconfont停止服务了，我们怎么办</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-28T09:50:36+08:00">
                2024-02-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9d9b0890fa0fe742ad1771f22fea3001a66210f000e7b188489bfea67744a753" alt="&#x4E16;&#x754C;&#x6700;&#x5927;&#x7684;&#x65E0;&#x8F90;&#x6469;&#x5929;&#x8F6E;.webp"></p>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x4E2A;&#x4EBA;&#x4E00;&#x76F4;&#x90FD;&#x6BD4;&#x8F83;&#x559C;&#x6B22;&#x963F;&#x91CC;&#x5927;&#x4F6C;&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E9B;&#x7EC4;&#x4EF6;&#x670D;&#x52A1;&#x4EC0;&#x4E48;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x53EA;&#x8BF4;&#x56FE;&#x6807;&#x7BA1;&#x7406;&#x5427;&#xFF0C;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x65F6;&#x5019;&#x6211;&#x662F;&#x4F7F;&#x7528;&#x7684;<a href="/external_links/3d03404d59e5656529e414bbf80b04e4.html" target="blank" rel="noopener">icomoon.io</a> &#x540E;&#x9762;&#x53D1;&#x73B0;<a href="/external_links/14b9e6faed15376ced2bf66eed9a10f2.html" target="blank" rel="noopener">www.iconfont.cn/</a> &#x5728;&#x4EE5;&#x524D;&#x5F00;&#x53D1;&#x662F;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E3A;&#x4E86;&#x56FE;&#x7247;&#x7684;&#x8BF7;&#x6C42;&#x5C11;&#x70B9;&#xFF0C;&#x63D0;&#x5347;&#x7F51;&#x7AD9;&#x7684;&#x6027;&#x80FD;&#x4F1A;&#x628A;&#x8FD9;&#x4E9B;&#x5C0F;&#x56FE;&#x6807;&#x505A;&#x5230;&#x4E00;&#x5F20;&#x56FE;&#x4E0A;&#x9762;&#x4E13;&#x4E1A;&#x53EB;&#x6CD5;&#x662F;&#x96EA;&#x78A7;&#x56FE;&#xFF0C;&#x540E;&#x6765;&#x968F;&#x7740;&#x524D;&#x7AEF;&#x53D1;&#x5C55;&#x6709;&#x4E86;&#x5B57;&#x4F53;&#x56FE;&#x6807;&#xFF0C;&#x4E0D;&#x5570;&#x55E6;&#x4E86;&#x5427;&#xFF0C;&#x56DE;&#x5230;&#x6B63;&#x9898;&#xFF0C;&#x7531;&#x4E8E;&#x4E0A;&#x6B21;icofont&#x5B98;&#x7F51;&#x6302;&#x4E86;&#x4E4B;&#x540E;&#xFF0C;&#x5BFC;&#x81F4;&#x6211;&#x7684;&#x9879;&#x76EE;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x6B63;&#x5E38;&#x8FED;&#x4EE3;&#xFF0C;&#x6211;&#x5C31;&#x51B3;&#x5B9A;&#x8981;&#x81EA;&#x5DF1;&#x5F04;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x56FE;&#x6807;&#x7BA1;&#x7406;&#x3002;</p>
<h2 id="&#x9700;&#x6C42;"><a href="#&#x9700;&#x6C42;" class="headerlink" title="&#x9700;&#x6C42;"></a>&#x9700;&#x6C42;</h2><p>&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x9700;&#x8981;&#x7684;&#x662F;&#x628A;&#x8BBE;&#x8BA1;&#x505A;&#x597D;&#x7684;&#x56FE;&#x6807;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#x4E0B;&#x8F7D;&#x7684;svg&#x56FE;&#x6807;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7136;&#x540E;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#xFF0C;&#x5E76;&#x4E14;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A;js&#x6587;&#x4EF6;&#x52A0;&#x8F7D;&#x5230;&#x9879;&#x76EE;&#x4E2D;&#x3002;</p>
<h2 id="&#x51C6;&#x5907;"><a href="#&#x51C6;&#x5907;" class="headerlink" title="&#x51C6;&#x5907;"></a>&#x51C6;&#x5907;</h2><p>&#x90FD;&#x8BF4;&#x5929;&#x4E0B;&#x6587;&#x7AE0;&#x4E00;&#x5927;&#x6284;&#xFF0C;&#x6211;&#x4E5F;&#x662F;&#x53BB;&#x6284;iconfont,&#x6211;&#x628A;iconfont&#x7684;&#x4F7F;&#x7528;demo&#x6253;&#x5F00;&#x7814;&#x7A76;&#x4E86;&#x4E00;&#x4E0B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0f739810422d023d39af2170d02b486277da490fb604be02c0a11f6664cc2e2b" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/2795407031b00527c974856d8311a823f66914cae4ccaf6845349f6f22c44112" alt="image.png"></p>
<p>&#x6211;&#x8FD9;&#x91CC;&#x53EA;&#x8BF4;Symbol&#xFF0C;&#x901A;&#x8FC7;&#x5206;&#x6790;&#x770B;&#x5230;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5F15;&#x5165;./iconfont.js</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a9ebcba6c0a3ac94fcdf9f6fbb8f5cfc234b3444f02419bb5c733f22d2763812" alt="image.png"></p>
<p>iconfont&#x628A;&#x6211;&#x4EEC;&#x4E0A;&#x4F20;&#x7684;&#x56FE;&#x6807;&#x8FDB;&#x884C;&#x4E86;&#x5220;&#x51CF;&#x4F18;&#x5316;,&#x6700;&#x5916;&#x5C42;&#x5C31;&#x4E00;&#x4E2A;svg&#x6807;&#x7B7E;&#x91CC;&#x9762;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;symbol&#x6807;&#x7B7E;&#x6765;&#x5305;&#x88F9;&#x4E4B;&#x524D;&#x7684;&#x56FE;&#x6807;&#x5185;&#x5BB9;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;symbol&#x7684;id&#x90FD;&#x5BF9;&#x5E94;&#x4E4B;&#x524D;&#x7684;svg&#x56FE;&#x6807;&#x540D;&#x79F0;&#x3002;</p>
<blockquote>
<p>iconfont&#x4E5F;&#x6CA1;&#x6709;&#x5F00;&#x6E90;,&#x5177;&#x4F53;&#x600E;&#x4E48;&#x505A;&#x7684;&#x54B1;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#xFF0C;&#x53EA;&#x80FD;&#x77E5;&#x9053;&#x76EE;&#x524D;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x6309;&#x7167;&#x81EA;&#x5DF1;&#x7406;&#x89E3;&#x5F00;&#x59CB;&#x5F00;&#x53D1;&#x5B9E;&#x73B0;&#x4E86;</p>
</blockquote>
<h2 id="&#x524D;&#x7AEF;&#x5F00;&#x53D1;"><a href="#&#x524D;&#x7AEF;&#x5F00;&#x53D1;" class="headerlink" title="&#x524D;&#x7AEF;&#x5F00;&#x53D1;"></a>&#x524D;&#x7AEF;&#x5F00;&#x53D1;</h2><p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x524D;&#x7AEF;&#x9700;&#x8981;&#x7684;&#x662F;&#x628A;&#x8BBE;&#x8BA1;&#x7A3F;&#x7684;svg&#x56FE;&#x53D8;&#x6210;symbol&#x91CC;&#x9762;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6253;&#x5F00;svg&#x56FE;<br>&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x6D4B;&#x8BD5;&#x4E0B;&#xFF0C;&#x76F4;&#x63A5;&#x628A;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x7136;&#x540E;&#x7C98;&#x8D34;&#x5E26;&#x4E86;iconfont.js&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x8FD0;&#x884C;demo&#x56FE;&#x6807;&#x6B63;&#x5E38;&#x663E;&#x793A;&#x5C31;&#x8BF4;&#x660E;&#x662F;ok&#x7684;&#xFF0C;&#x4E0D;&#x7136;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x662F;&#x4E0D;&#x884C;&#x7684;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/251bbeaed0fbe470cd8e42560c67f28672aa99c558cf00c745c04ae00e7e4754" alt="image.png"></p>
<p>&#x901A;&#x8FC7;&#x56FE;&#x7247;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x73B0;&#x5728;&#x9700;&#x8981;&#x7684;&#x5C31;&#x662F;&#x628A;svg&#x91CC;&#x9762;&#x7684;path&#x6539;&#x6210;&#x7528;symblo&#x6765;&#x5305;&#x88F9;&#xFF0C;&#x5728;&#x5F00;&#x53D1;&#x4E2D;svg&#x56FE;&#x6211;&#x4EEC;&#x662F;&#x901A;&#x8FC7;&#x6587;&#x6863;&#x6D41;&#x4E0A;&#x4F20;&#x4E0A;&#x6765;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x5BF9;&#x6587;&#x6863;&#x6D41;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x5148;&#x628A;&#x6587;&#x6863;&#x6D41;&#x53D8;&#x6210;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7136;&#x540E;js&#x64CD;&#x4F5C;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x8FBE;&#x5230;&#x76EE;&#x7684;&#x3002;</p>
<ol>
<li>&#x4F7F;&#x7528;&#x5230;FileReader&#x548C;readAsText&#x83B7;&#x53D6;&#x5230;&#x5B57;&#x7B26;&#x4E32;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801; const fileParse = (file) =&gt; {</span><br><span class="line">   return new Promise((resolve) =&gt; {</span><br><span class="line">     const fileReader = new FileReader();</span><br><span class="line">     fileReader.readAsText(file, &quot;UTF-8&quot;);</span><br><span class="line">     fileReader.onload = (e) =&gt; {</span><br><span class="line">       resolve({ content: e.target?.result, name: file.name })</span><br><span class="line">     }</span><br><span class="line">   })</span><br><span class="line"> }</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x5B57;&#x7B26;&#x64CD;&#x4F5C;&#x62FC;&#x63A5;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x662F;cheerio</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;  const handleUploadSvg = ($, result) =&gt; {</span><br><span class="line">    let index = result.indexOf(&apos;&lt;svg&apos;);</span><br><span class="line">    const str = result.slice(index);</span><br><span class="line">    const svgNode = $(str);</span><br><span class="line"></span><br><span class="line">    $(&apos;svg&apos;).attr(&apos;viewBox&apos;, svgNode.attr(&apos;viewBox&apos;));</span><br><span class="line">    const findPath = svgNode.find(&apos;path&apos;);</span><br><span class="line">    if (!findPath.length) {</span><br><span class="line">      message.error(&apos;&#x56FE;&#x6807;&#x9519;&#x8BEF;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;path&apos;)</span><br><span class="line">      return &apos;&apos;;</span><br><span class="line">    };</span><br><span class="line">    findPath.each((i, el) =&gt; {</span><br><span class="line">      $(el).removeAttr(&apos;id&apos;);</span><br><span class="line">    });</span><br><span class="line">    const gDom = svgNode.find(&apos;g&apos;);</span><br><span class="line"></span><br><span class="line">    gDom.each((i, el) =&gt; {</span><br><span class="line">      const path = $(el).children(&apos;path&apos;);</span><br><span class="line">      const fill = $(el).attr(&apos;fill&apos;);</span><br><span class="line">      if (fill &amp;&amp; fill !== &apos;none&apos; &amp;&amp; path.length &amp;&amp; !$(path[0])?.attr?.(&apos;fill&apos;)) {</span><br><span class="line">        $(path[0])?.attr?.(&apos;fill&apos;, fill)</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">    removeArrtId($, gDom);</span><br><span class="line"></span><br><span class="line">    if (gDom.length) {</span><br><span class="line">      $(&apos;svg&apos;).html(svgNode.html());</span><br><span class="line">    } else {</span><br><span class="line">      $(&apos;svg&apos;).html(svgNode.find(&apos;path&apos;));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    return $.html(&quot;svg&quot;)</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;svg&#x6E90;&#x7801;&#xFF0C;&#x56FE;&#x6807;&#x663E;&#x793A;&#x8FD8;&#x662F;flow</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1893028f19b515a865dfda14764f9ced0099b87b24c3376b98dd14e7ad136564" alt="image.png"></p>
<p>&#x7136;&#x540E;&#x6211;&#x628A;&#x8FD9;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x4F20;&#x9001;&#x7ED9;&#x540E;&#x7AEF;&#x5C31;&#x884C;&#x4E86;</p>
<h2 id="&#x540E;&#x7AEF;&#x5F00;&#x53D1;"><a href="#&#x540E;&#x7AEF;&#x5F00;&#x53D1;" class="headerlink" title="&#x540E;&#x7AEF;&#x5F00;&#x53D1;"></a>&#x540E;&#x7AEF;&#x5F00;&#x53D1;</h2><p>&#x540E;&#x7AEF;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x628A;&#x6211;&#x4E0A;&#x4F20;&#x4E0A;&#x6765;&#x7684;svg&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x5230;&#x4E00;&#x8D77;&#xFF0C;&#x7136;&#x540E;&#x4EE5;iconfont.js&#x4E00;&#x6837;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;get&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x7ED9;&#x6211;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;,<br>&#x901A;&#x8FC7;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5230;&#x5C31;&#x8BF4;&#x660E;ok&#x4E86;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/361da9b48b1dd012185535ee3877e20fdb975f7811e33a439b207bf83ed8dc3c" alt="image.png"></p>
<p>&#x5176;&#x4ED6;&#x4E24;&#x79CD;&#x9700;&#x8981;&#x7528;&#x5230;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x5F53;&#x65F6;&#x4E5F;&#x6709;&#x987A;&#x4FBF;&#x7814;&#x7A76;&#x770B;&#x5230;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x9700;&#x8981;&#x6211;&#x518D;&#x5199;&#x4E00;&#x7BC7;&#x3002;</p>
<p>&#x6587;&#x7AE0;&#x4E2D;&#x4F1A;&#x6709;&#x4E9B;&#x4E0D;&#x600E;&#x4E48;&#x6E05;&#x6670;&#x6216;&#x8005;&#x6709;&#x95EE;&#x9898;&#x7684;&#x5730;&#x65B9;&#x8FD8;&#x671B;&#x5404;&#x4F4D;&#x5927;&#x4F6C;&#x89C1;&#x8C05;&#xFF0C;&#x521A;&#x521A;&#x5F00;&#x59CB;&#x51B3;&#x5B9A;&#x5199;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF0C;&#x8FD8;&#x5F88;&#x751F;&#x758F;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a8b7cc75dbc41fafcd798693371e5fc9.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7340197367515414538.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7340197367515414538.html" itemprop="url">零基础入门AI：一键本地运行各种开源大语言模型 - Olla</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-28T09:33:08+08:00">
                2024-02-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x4EC0;&#x4E48;&#x662F;-Ollama&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;-Ollama&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F; Ollama&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F; Ollama&#xFF1F;</h1><p>Ollama &#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5728;&#x672C;&#x5730;&#x90E8;&#x7F72;&#x548C;&#x7BA1;&#x7406;&#x5F00;&#x6E90;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x6781;&#x5927;&#x7684;&#x7B80;&#x5316;&#x4E86;&#x5F00;&#x6E90;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x7684;&#x5B89;&#x88C5;&#x548C;&#x914D;&#x7F6E;&#x7EC6;&#x8282;&#xFF0C;&#x4E00;&#x7ECF;&#x63A8;&#x51FA;&#x5C31;&#x5E7F;&#x53D7;&#x597D;&#x8BC4;&#xFF0C;&#x76EE;&#x524D;&#x5DF2;&#x5728;github&#x4E0A;&#x83B7;&#x5F97;&#x4E86;46k star&#x3002;</p>
<p>&#x4E0D;&#x7BA1;&#x662F;&#x8457;&#x540D;&#x7684;&#x7F8A;&#x9A7C;&#x7CFB;&#x5217;&#xFF0C;&#x8FD8;&#x662F;&#x6700;&#x65B0;&#x7684;AI&#x65B0;&#x8D35;Mistral&#xFF0C;&#x7B49;&#x7B49;&#x5404;&#x79CD;&#x5F00;&#x6E90;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x7528;Ollama&#x5B9E;&#x73B0;&#x4E00;&#x952E;&#x5B89;&#x88C5;&#x5E76;&#x8FD0;&#x884C;&#xFF0C;&#x652F;&#x6301;&#x7684;&#x66F4;&#x591A;&#x6A21;&#x578B;&#x7684;&#x5217;&#x8868;&#x53EF;&#x4EE5;&#x67E5;&#x770B;Ollama&#x5B98;&#x7F51;&#x3002;</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>Parameters</th>
<th>Size</th>
<th>Download</th>
</tr>
</thead>
<tbody><tr>
<td>Llama 2</td>
<td>7B</td>
<td>3.8GB</td>
<td><code>ollama run llama2</code></td>
</tr>
<tr>
<td>Mistral</td>
<td>7B</td>
<td>4.1GB</td>
<td><code>ollama run mistral</code></td>
</tr>
</tbody></table>
<p>&#x672C;&#x6587;&#x5C31;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x5165;&#x95E8;Ollama&#x3002;</p>
<h1 id="&#x5982;&#x4F55;&#x5B89;&#x88C5;-Ollama&#x6846;&#x67B6;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x5B89;&#x88C5;-Ollama&#x6846;&#x67B6;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5B89;&#x88C5; Ollama&#x6846;&#x67B6;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5B89;&#x88C5; Ollama&#x6846;&#x67B6;&#xFF1F;</h1><p>Ollama&#x652F;&#x6301;&#x5404;&#x4E2A;&#x5E73;&#x53F0;&#xFF1A;Mac&#x3001;Windows &#x548C; Linux&#xFF0C;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;docker image&#x3002;<br>&#x5728;Ollama&#x5B98;&#x7F51;&#x6216;&#x8005;Github&#x53EF;&#x4EE5;&#x4E0B;&#x8F7D;&#xFF0C;&#x7136;&#x540E;&#x4E00;&#x952E;&#x5B89;&#x88C5;Ollama&#x6846;&#x67B6;&#xFF1A;</p>
<ul>
<li><a href="/external_links/234177bbf722239043d3336e8c156bfe.html" target="blank" rel="noopener">macOS</a></li>
<li><a href="/external_links/923a8018b1049b9d03e348d8b242f346.html" target="blank" rel="noopener">Windows</a></li>
<li>Linux: <code>curl -fsSL https://ollama.com/install.sh | sh</code></li>
</ul>
<p>&#x7531;&#x4E8E;Ollama&#x521A;&#x652F;&#x6301;windows&#x4E0D;&#x4E45;&#xFF0C;&#x5728;windows&#x4E0A;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x8FD8;&#x4E0D;&#x591F;&#x5B8C;&#x5584;&#xFF0C;&#x4EE5;&#x4E0B;&#x6211;&#x5C06;&#x4E3B;&#x8981;&#x4EE5;Linux&#x4E0A;&#x8FD0;&#x884C;Ollama&#x6765;&#x4E3E;&#x4F8B;&#x8BF4;&#x660E;&#x3002;</p>
<h1 id="&#x8FD0;&#x884C;-Ollama-&#x670D;&#x52A1;"><a href="#&#x8FD0;&#x884C;-Ollama-&#x670D;&#x52A1;" class="headerlink" title="&#x8FD0;&#x884C; Ollama &#x670D;&#x52A1;"></a>&#x8FD0;&#x884C; Ollama &#x670D;&#x52A1;</h1><p>&#x5728;Ollama&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C; &#x4E00;&#x822C;&#x4F1A;&#x81EA;&#x52A8;&#x542F;&#x52A8; Ollama &#x670D;&#x52A1;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x81EA;&#x52A8;&#x8BBE;&#x7F6E;&#x4E3A;&#x5F00;&#x673A;&#x81EA;&#x542F;&#x52A8;&#x3002;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x662F;&#x5426;Ollama&#x662F;&#x5426;&#x6B63;&#x5E38;&#x542F;&#x52A8;&#x3002;&#x5982;&#x4E0B;&#x4F8B;&#x5B50;&#x4E2D;&#x663E;&#x793A;&#x201C;Active: active (running)&#x201D;&#x8868;&#x793A;Ollama&#x5DF2;&#x7ECF;&#x6B63;&#x5E38;&#x542F;&#x52A8;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;$ systemctl status ollama</span><br><span class="line">&#x25CF; ollama.service - Ollama Service</span><br><span class="line">     Loaded: loaded (/etc/systemd/system/ollama.service; enabled; vendor preset: enabled)</span><br><span class="line">    Drop-In: /etc/systemd/system/ollama.service.d</span><br><span class="line">             &#x2514;&#x2500;environment.conf</span><br><span class="line">     Active: active (running) since Thu 2024-03-07 09:09:39 HKT; 4 days ago</span><br><span class="line">   Main PID: 19975 (ollama)</span><br><span class="line">      Tasks: 29 (limit: 69456)</span><br><span class="line">     Memory: 1.1G</span><br><span class="line">        CPU: 14min 44.702s</span><br><span class="line">     CGroup: /system.slice/ollama.service</span><br><span class="line">             &#x2514;&#x2500;19975 /usr/local/bin/ollama serve</span><br></pre></td></tr></table></figure>

<p>&#x5728;Linux&#x4E0A;&#xFF0C;&#x5982;&#x679C;Ollama&#x672A;&#x542F;&#x52A8;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x5982;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8; Ollama &#x670D;&#x52A1;&#xFF1A;<code>ollama serve</code>&#xFF0C;&#x6216;&#x8005; <code>sudo systemctl start ollama</code>&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x5206;&#x6790;Linux&#x7684;&#x5B89;&#x88C5;&#x811A;&#x672C;install.sh&#xFF0C;&#x5C31;&#x4F1A;&#x770B;&#x5230;&#x5176;&#x4E2D;&#x5DF2;&#x7ECF;&#x5C06;<code>ollama serve</code>&#x914D;&#x7F6E;&#x4E3A;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x670D;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>systemctl</code>&#x6765; start / stop ollama&#x8FDB;&#x7A0B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;    status &quot;Creating ollama systemd service...&quot;</span><br><span class="line">    cat &lt;&lt;EOF | $SUDO tee /etc/systemd/system/ollama.service &gt;/dev/null</span><br><span class="line">[Unit]</span><br><span class="line">Description=Ollama Service</span><br><span class="line">After=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=$BINDIR/ollama serve</span><br><span class="line">User=ollama</span><br><span class="line">Group=ollama</span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=3</span><br><span class="line">Environment=&quot;PATH=$PATH&quot;</span><br></pre></td></tr></table></figure>

<p>&#x542F;&#x52A8;Ollama&#x670D;&#x52A1;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7684;Ollama&#x7248;&#x672C;&#xFF0C;&#x4EE5;&#x53CA;&#x5E38;&#x7528;&#x547D;&#x4EE4;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;~$ ollama -v</span><br><span class="line">ollama version is 0.1.20</span><br><span class="line">~$ ollama --help</span><br><span class="line">Large language model runner</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  ollama [flags]</span><br><span class="line">  ollama [command]</span><br><span class="line"></span><br><span class="line">Available Commands:</span><br><span class="line">  serve       Start ollama</span><br><span class="line">  create      Create a model from a Modelfile</span><br><span class="line">  show        Show information for a model</span><br><span class="line">  run         Run a model</span><br><span class="line">  pull        Pull a model from a registry</span><br><span class="line">  push        Push a model to a registry</span><br><span class="line">  list        List models</span><br><span class="line">  cp          Copy a model</span><br><span class="line">  rm          Remove a model</span><br><span class="line">  help        Help about any command</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">  -h, --help      help for ollama</span><br><span class="line">  -v, --version   Show version information</span><br><span class="line"></span><br><span class="line">Use &quot;ollama [command] --help&quot; for more information about a command.</span><br></pre></td></tr></table></figure>

<h1 id="&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x5E76;&#x8FD0;&#x884C;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x5E76;&#x8FD0;&#x884C;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x5E76;&#x8FD0;&#x884C;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4E0B;&#x8F7D;&#x5E76;&#x8FD0;&#x884C;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF1F;</h1><p>&#x81F3;&#x6B64;&#xFF0C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;Ollama&#x6846;&#x67B6;&#x7684;&#x5B89;&#x88C5;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x5728;&#x672C;&#x5730;&#x8FD0;&#x884C;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x3002;&#x4EE5;&#x8457;&#x540D;&#x7684;&#x7F8A;&#x9A7C;&#x4E3E;&#x4F8B;&#xFF1A;<code>ollama run llama2</code>&#x3002;</p>
<p>&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x6709;&#x4E0B;&#x8F7D;&#x8FC7;&#x6307;&#x5B9A;&#x7684;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#xFF0C;&#x8FD9;&#x6761;&#x547D;&#x4EE4;&#x5C06;&#x4F1A;&#x5148;&#x6267;&#x884C;<code>ollama pull llama2</code>&#xFF0C;&#x5C06;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x4E0B;&#x8F7D;&#x5230;&#x672C;&#x5730;&#xFF0C;&#x518D;&#x5728;&#x672C;&#x5730;&#x8FD0;&#x884C;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x3002;</p>
<p>&#x4E0B;&#x8F7D;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;:~$ ollama run llama2</span><br><span class="line">&gt;&gt;&gt; who are you?</span><br><span class="line"></span><br><span class="line">I am LLaMA, an AI assistant developed by Meta AI that can understand and respond to human input in a conversational manner. I am trained on a massive dataset of text from the internet and can </span><br><span class="line">generate human-like responses to a wide range of topics and questions. I can be used to create chatbots, virtual assistants, and other applications that require natural language understanding and</span><br><span class="line">generation capabilities.</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; Send a message (/? for help)</span><br></pre></td></tr></table></figure>

<h1 id="REST-API"><a href="#REST-API" class="headerlink" title="REST API"></a>REST API</h1><p>Ollama&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;API&#x63A5;&#x53E3;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vbnet&#x590D;&#x5236;&#x4EE3;&#x7801;curl http://localhost:11434/api/generate -d &apos;{</span><br><span class="line">  &quot;model&quot;: &quot;llama2&quot;,</span><br><span class="line">  &quot;prompt&quot;:&quot;Why is the sky blue?&quot;,</span><br><span class="line">  &quot;stream&quot;: false</span><br><span class="line">}&apos;</span><br></pre></td></tr></table></figure>

<p>&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">json&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    &quot;model&quot;: &quot;llama2&quot;,</span><br><span class="line">    &quot;created_at&quot;: &quot;2024-02-26T04:35:10.787352404Z&quot;,</span><br><span class="line">    &quot;response&quot;: &quot;The sky appears blue because of a phenomenon called Rayleigh scattering, which occurs when sunlight enters Earth&apos;s atmosphere. The sunlight encounters tiny molecules of gases such as nitrogen and oxygen, which scatter the light in all directions. The shorter wavelengths of light, such as blue and violet, are scattered more than the longer wavelengths, such as red and orange. This is known as Rayleigh scattering, named after Lord Rayleigh, who first described the phenomenon in the late 19th century. As a result of this scattering, the light that reaches our eyes from the sun appears blue, especially when viewed from a distance. The closer we get to the horizon, the more the blue color appears to fade, as the light has to travel through more of the atmosphere, which scatters the shorter wavelengths even more. It&apos;s worth noting that the exact shade of blue can vary depending on the time of day and atmospheric conditions. For example, during sunrise and sunset, when the sun is low in the sky, the sky can take on a more orange or red hue due to the scattering of light by atmospheric particles. So, to summarize, the sky appears blue because of the way light interacts with the tiny molecules of gases in Earth&apos;s atmosphere, particularly nitrogen and oxygen.&quot;,</span><br><span class="line">    &quot;done&quot;: true,</span><br><span class="line">    &quot;total_duration&quot;: 7001870820,</span><br><span class="line">    &quot;load_duration&quot;: 4930376,</span><br><span class="line">    &quot;prompt_eval_duration&quot;: 60907000,</span><br><span class="line">    &quot;eval_count&quot;: 309,</span><br><span class="line">    &quot;eval_duration&quot;: 6931593000</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F7F;&#x7528;API&#x63A5;&#x53E3;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x66F4;&#x591A;&#x7075;&#x6D3B;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x4E0E;IDE&#x63D2;&#x4EF6;&#x914D;&#x5408;&#xFF0C;&#x5B9E;&#x73B0;&#x672C;&#x5730;&#x7684;&#x7F16;&#x7A0B;&#x52A9;&#x624B;&#xFF0C;&#x53EF;&#x53C2;&#x8003;&#x5982;&#x4E0B;&#x6587;&#x7AE0;&#xFF1A;<br><a href="https://dev.newban.cn/7340461584643112971">&#x96F6;&#x57FA;&#x7840;&#x5165;&#x95E8;AI&#xFF1A;&#x642D;&#x5EFA;&#x672C;&#x5730;&#x7684;&#x7F16;&#x7A0B;&#x52A9;&#x624B;</a></p>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x8FD0;&#x884C;&#x7684;&#x65E5;&#x5FD7;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x67E5;&#x770B;&#x8FD0;&#x884C;&#x7684;&#x65E5;&#x5FD7;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x8FD0;&#x884C;&#x7684;&#x65E5;&#x5FD7;&#xFF1F;"></a>&#x5982;&#x4F55;&#x67E5;&#x770B;&#x8FD0;&#x884C;&#x7684;&#x65E5;&#x5FD7;&#xFF1F;</h2><p>&#x5728;Linux&#x4E0A;&#x8FD0;&#x884C;&#x547D;&#x4EE4;<code>journalctl -u ollama</code>&#xFF0C;&#x5373;&#x53EF;&#x67E5;&#x770B;&#x8FD0;&#x884C;&#x65E5;&#x5FD7;&#x3002;</p>
<h2 id="&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x672C;&#x5730;&#x5927;&#x6A21;&#x578B;&#x5BF9;&#x5C40;&#x57DF;&#x7F51;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x672C;&#x5730;&#x5927;&#x6A21;&#x578B;&#x5BF9;&#x5C40;&#x57DF;&#x7F51;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x672C;&#x5730;&#x5927;&#x6A21;&#x578B;&#x5BF9;&#x5C40;&#x57DF;&#x7F51;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF1F;"></a>&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x672C;&#x5730;&#x5927;&#x6A21;&#x578B;&#x5BF9;&#x5C40;&#x57DF;&#x7F51;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF1F;</h2><p>&#x5728;Linux&#x4E0A;&#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>OLLAMA_HOST</code> &#x6765;&#x6307;&#x5B9A;&#x5BF9;&#x5C40;&#x57DF;&#x7F51;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x518D;&#x91CD;&#x542F;Ollama&#x670D;&#x52A1;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;:~$ cat /etc/systemd/system/ollama.service.d/environment.conf</span><br><span class="line">[Service]</span><br><span class="line">Environment=OLLAMA_HOST=0.0.0.0:11434</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x6B64;&#x914D;&#x7F6E;&#x540E;&#xFF0C;&#x5373;&#x53EF;&#x7531;&#x4E00;&#x53F0;GPU&#x670D;&#x52A1;&#x5668;&#x4E3A;&#x672C;&#x5730;&#x5C40;&#x57DF;&#x7F51;&#x63D0;&#x4F9B;&#x5927;&#x8BED;&#x8A00;&#x6A21;&#x578B;&#x7684;&#x670D;&#x52A1;&#x3002;</p>
<h2 id="&#x672C;&#x5730;&#x6709;&#x591A;&#x5F20;GPU&#xFF0C;&#x5982;&#x4F55;&#x7528;&#x6307;&#x5B9A;&#x7684;GPU&#x6765;&#x8FD0;&#x884C;Ollama&#xFF1F;"><a href="#&#x672C;&#x5730;&#x6709;&#x591A;&#x5F20;GPU&#xFF0C;&#x5982;&#x4F55;&#x7528;&#x6307;&#x5B9A;&#x7684;GPU&#x6765;&#x8FD0;&#x884C;Ollama&#xFF1F;" class="headerlink" title="&#x672C;&#x5730;&#x6709;&#x591A;&#x5F20;GPU&#xFF0C;&#x5982;&#x4F55;&#x7528;&#x6307;&#x5B9A;&#x7684;GPU&#x6765;&#x8FD0;&#x884C;Ollama&#xFF1F;"></a>&#x672C;&#x5730;&#x6709;&#x591A;&#x5F20;GPU&#xFF0C;&#x5982;&#x4F55;&#x7528;&#x6307;&#x5B9A;&#x7684;GPU&#x6765;&#x8FD0;&#x884C;Ollama&#xFF1F;</h2><p>&#x5728;Linux&#x4E0A;&#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF; <code>CUDA_VISIBLE_DEVICES</code> &#x6765;&#x6307;&#x5B9A;&#x8FD0;&#x884C;Ollama&#x7684;GPU&#xFF0C;&#x518D;&#x91CD;&#x542F;Ollama&#x670D;&#x52A1;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;:~$ cat /etc/systemd/system/ollama.service.d/environment.conf</span><br><span class="line">[Service]</span><br><span class="line">Environment=CUDA_VISIBLE_DEVICES=1,2</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x4E2A;&#x8DEF;&#x5F84;&#xFF1F;"><a href="#&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x4E2A;&#x8DEF;&#x5F84;&#xFF1F;" class="headerlink" title="&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x4E2A;&#x8DEF;&#x5F84;&#xFF1F;"></a>&#x4E0B;&#x8F7D;&#x7684;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x5728;&#x54EA;&#x4E2A;&#x8DEF;&#x5F84;&#xFF1F;</h2><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5B58;&#x50A8;&#x7684;&#x8DEF;&#x5F84;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>macOS: <code>~/.ollama/models</code></li>
<li>Linux: <code>/usr/share/ollama/.ollama/models</code></li>
<li>Windows: <code>C:\Users&lt;username&gt;.ollama\models</code></li>
</ul>
<h2 id="&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x7684;&#x8DEF;&#x5F84;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x7684;&#x8DEF;&#x5F84;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x7684;&#x8DEF;&#x5F84;&#xFF1F;"></a>&#x5982;&#x4F55;&#x4FEE;&#x6539;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x7684;&#x8DEF;&#x5F84;&#xFF1F;</h2><p>Linux&#x5E73;&#x53F0;&#x5B89;&#x88C5;Ollama&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x65F6;&#x4F1A;&#x521B;&#x5EFA;&#x7528;&#x6237;ollama&#xFF0C;&#x518D;&#x5C06;&#x6A21;&#x578B;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x5230;&#x8BE5;&#x7528;&#x6237;&#x7684;&#x76EE;&#x5F55;<code>/usr/share/ollama/.ollama/models</code>&#x3002;&#x4F46;&#x7531;&#x4E8E;&#x5927;&#x6A21;&#x578B;&#x6587;&#x4EF6;&#x5F80;&#x5F80;&#x7279;&#x522B;&#x5927;&#xFF0C;&#x6709;&#x65F6;&#x9700;&#x8981;&#x5C06;&#x5927;&#x6A21;&#x578B;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x5230;&#x4E13;&#x95E8;&#x7684;&#x6570;&#x636E;&#x76D8;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5927;&#x6A21;&#x578B;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#x3002;</p>
<p>&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x8BBE;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x201C;OLLAMA_MODELS&#x201D;&#xFF0C;&#x4F46;&#x6211;&#x5728;Linux&#x4E0A;&#x5C1D;&#x8BD5;&#x540E;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x6210;&#x529F;&#x3002;</p>
<p>&#x5206;&#x6790;Linux&#x7248;&#x7684;&#x5B89;&#x88C5;&#x811A;&#x672C;install.sh&#x540E;&#xFF0C;&#x6211;&#x53D1;&#x73B0;&#x662F;&#x7531;&#x4E8E;&#x5176;&#x4E2D;&#x521B;&#x5EFA;&#x4E86;&#x7528;&#x6237;ollama&#x548C;&#x7528;&#x6237;&#x7EC4;ollama&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5927;&#x6A21;&#x578B;&#x5B58;&#x50A8;&#x5230;&#x4E86;&#x8BE5;&#x7528;&#x6237;&#x7684;&#x76EE;&#x5F55;<code>/usr/share/ollama/.ollama/models</code>&#xFF0C;&#x800C;&#x6211;&#x7684;&#x5E10;&#x6237;&#x5BF9;ollama&#x5E10;&#x6237;&#x7684;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x5E76;&#x4E0D;&#x80FD;&#x751F;&#x6548;&#xFF0C;&#x5373;&#x4F7F;&#x6211;&#x518D;&#x624B;&#x52A8;&#x5C06;&#x6211;&#x7684;&#x5E10;&#x6237;&#x6DFB;&#x52A0;&#x8FDB;ollama&#x7528;&#x6237;&#x7EC4;&#xFF0C;&#x4E5F;&#x4ECD;&#x7136;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x6743;&#x9650;&#x95EE;&#x9898;&#xFF0C;&#x5BFC;&#x81F4;&#x5BF9;ollama&#x5E10;&#x6237;&#x7684;&#x76EE;&#x5F55;&#x64CD;&#x4F5C;&#x4E0D;&#x751F;&#x6548;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x65B0;&#x5EFA;&#x7684;ollama&#x5E10;&#x6237;&#x5E76;&#x6CA1;&#x6709;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x989D;&#x5916;&#x7684;&#x4FBF;&#x5229;&#xFF0C;&#x6700;&#x540E;&#x6211;&#x7528;&#x4EE5;&#x4E0B;&#x6B65;&#x9AA4;&#x6765;&#x5B9E;&#x73B0;&#x4FEE;&#x6539;&#x5927;&#x6A21;&#x578B;&#x6587;&#x4EF6;&#x7684;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#xFF1A;</p>
<ol>
<li>&#x4FEE;&#x6539;&#x5B89;&#x88C5;&#x6587;&#x4EF6; install.sh&#xFF0C;&#x53D6;&#x6D88;&#x5176;&#x4E2D;&#x521B;&#x5EFA;&#x7528;&#x6237;ollama&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x53C2;&#x8003;&#x5982;&#x4E0B;&#xFF1A;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;# if ! id ollama &gt;/dev/null 2&gt;&amp;1; then </span><br><span class="line">    # status &quot;Creating ollama user...&quot; </span><br><span class="line">    # $SUDO useradd -r -s /bin/false -m -d /usr/share/ollama ollama </span><br><span class="line"># fi </span><br><span class="line"># status &quot;Adding current user to ollama group...&quot; </span><br><span class="line"># $SUDO usermod -a -G ollama $(whoami)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x4FEE;&#x6539;&#x5B89;&#x88C5;&#x6587;&#x4EF6; install.sh&#xFF0C;&#x4F7F;&#x7528;&#x6211;&#x7684;&#x5E10;&#x6237;&#x6765;&#x542F;&#x52A8;ollama&#x670D;&#x52A1;&#xFF0C;&#x53C2;&#x8003;&#x5982;&#x4E0B;&#xFF1A;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;    status &quot;Creating ollama systemd service...&quot;</span><br><span class="line">    cat &lt;&lt;EOF | $SUDO tee /etc/systemd/system/ollama.service &gt;/dev/null</span><br><span class="line">[Unit]</span><br><span class="line">Description=Ollama Service</span><br><span class="line">After=network-online.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=$BINDIR/ollama serve</span><br><span class="line">User=&lt;myusername&gt;</span><br><span class="line">Group=&lt;myusername&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x4FEE;&#x6539;&#x5B89;&#x88C5;&#x6587;&#x4EF6; install.sh&#xFF0C;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x4E2D;&#x6307;&#x5B9A;&#x73AF;&#x5883;&#x53D8;&#x91CF;<code>OLLAMA_MODELS</code>&#x6307;&#x5B9A;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#xFF0C;&#x518D;&#x7528;&#x6B64;&#x5B89;&#x88C5;&#x6587;&#x4EF6;&#x6765;&#x5B89;&#x88C5;ollama&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Environment=&quot;OLLAMA_MODELS=/home/paco/lab/LLM/ollama/OLLAMA_MODELS&quot;</span><br></pre></td></tr></table></figure>

<p>&#x6216;&#x8005;&#x5728;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x521B;&#x5EFA;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;<code>OLLAMA_MODELS</code>&#x6765;&#x6307;&#x5B9A;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#xFF0C;&#x518D;&#x91CD;&#x542F;Ollama&#x670D;&#x52A1;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;:~$ cat /etc/systemd/system/ollama.service.d/environment.conf</span><br><span class="line">[Service]</span><br><span class="line">Environment=OLLAMA_MODELS=&lt;path&gt;/OLLAMA_MODELS</span><br></pre></td></tr></table></figure>

<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/62d4adc0d7ba6b2eb79e434743543698.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7339827208086896676.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7339827208086896676.html" itemprop="url">【Android 13源码分析】WindowContaine</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-27T11:38:46+08:00">
                2024-02-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;&#x5B89;&#x5353;&#x6E90;&#x7801;&#x7684;&#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x5C06;&#x5C06;&#x5C4F;&#x5E55;&#x5206;&#x4E3A;&#x4E86;37&#x5C42;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x7A97;&#x53E3;&#x5C06;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5C42;&#x7EA7;&#x4E2D;&#x663E;&#x793A;&#x3002;<br>&#x5BF9;&#x8FD9;&#x4E00;&#x5757;&#x7684;&#x6982;&#x5FF5;&#x4EE5;&#x53CA;&#x76F8;&#x5173;&#x6E90;&#x7801;&#x505A;&#x4E86;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#xFF0C;&#x6574;&#x7406;&#x51FA;&#x4EE5;&#x4E0B;&#x51E0;&#x7BC7;&#x3002;</p>
<p><a href="https://dev.newban.cn/7339827208086896676">&#x3010;Android 13&#x6E90;&#x7801;&#x5206;&#x6790;&#x3011;WindowContainer&#x7A97;&#x53E3;&#x5C42;&#x7EA7;-1-&#x521D;&#x8BC6;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;</a></p>
<p><a href="https://dev.newban.cn/7338808893529423883">&#x3010;Android 13&#x6E90;&#x7801;&#x5206;&#x6790;&#x3011;WindowContainer&#x7A97;&#x53E3;&#x5C42;&#x7EA7;-2-&#x6784;&#x5EFA;&#x6D41;&#x7A0B;</a></p>
<p><a href="https://dev.newban.cn/7338808893529440267">&#x3010;Android 13&#x6E90;&#x7801;&#x5206;&#x6790;&#x3011;WindowContainer&#x7A97;&#x53E3;&#x5C42;&#x7EA7;-3-&#x5B9E;&#x4F8B;&#x5206;&#x6790;</a></p>
<p>&#x5F53;&#x524D;&#x4E3A;&#x7B2C;&#x4E00;&#x7BC7;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x4ECB;&#x7ECD;&#x3002;</p>
<p>&#x6253;&#x5F00;&#x201C;&#x7535;&#x8BDD;&#x5E94;&#x7528;&#x201D;&#xFF0C;&#x7136;&#x540E;&#x6309;&#x97F3;&#x91CF;&#x952E;&#x51FA;&#x73B0;&#x4E00;&#x4E0B;&#x754C;&#x9762;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0bfdf1b1987164b58313dc6a2180ce52f72ff2decf911cee7d6ed3d3179aac10" alt="&#x7535;&#x8BDD;&#x5E94;&#x7528;&#x6309;&#x97F3;&#x91CF;&#x622A;&#x56FE;.png"></p>
<p>&#x63D0;&#x51FA;2&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<ol>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x97F3;&#x91CF;&#x7A97;&#x53E3;&#x4F1A;&#x6321;&#x4F4F;&#x5E94;&#x7528;&#x7A97;&#x53E3;&#xFF1F;</li>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x7BA1;&#x6253;&#x5F00;&#x54EA;&#x4E2A;&#x5E94;&#x7528;&#x90FD;&#x80FD;&#x770B;&#x5230;&#x5BFC;&#x822A;&#x680F;&#x548C;&#x72B6;&#x6001;&#x680F;&#xFF1F;</li>
</ol>
<p>&#x518D;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x56FE;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6a43758d3f1edcfff62e4e99143ffbfa9d4a492b6fdee20cc8bb08569e3047c2" alt="&#x97F3;&#x91CF;&#x622A;&#x56FE;&#x5C4F;&#x5E55;&#x5206;&#x7EA7;.png"></p>
<p>&#x5DE6;&#x8FB9;&#x662F;&#x5C06;&#x7B2C;&#x4E00;&#x5F20;&#x622A;&#x56FE;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#x63D0;&#x51FA;&#x6765;&#x753B;&#x4E86;&#x7684;&#x6A21;&#x62DF;&#x56FE;&#xFF0C; &#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#x6BCF;&#x4E2A;&#x7A97;&#x53E3;&#x5176;&#x5B9E;&#x90FD;&#x662F;&#x5168;&#x5C4F;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x7684;&#x524D;&#x540E;&#x987A;&#x5E8F;&#x82E5;&#x53F3;&#x56FE;&#xFF08;&#x6CE8;&#x610F;&#x989C;&#x8272;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#xFF09;&#x3002; &#x5982;&#x679C;&#x8BF4;&#x662F;&#x6309;&#x53F3;&#x8FB9;&#x7684;&#x8FD9;&#x79CD;&#x5C42;&#x7EA7;&#x6392;&#x5E8F;&#xFF0C;&#x90A3;&#x4E48;&#x97F3;&#x91CF;&#x952E;&#x7684;&#x7A97;&#x53E3;&#x548C;&#x72B6;&#x6001;&#x680F;&#x7684;&#x7A97;&#x53E3;&#x5C31;&#x4F1A;&#x6321;&#x4F4F;Activity&#x7684;&#x7A97;&#x53E3;&#x3002;</p>
<p>&#x5728;&#x5B89;&#x5353;&#x4E2D;&#x7A97;&#x53E3;&#x662F;&#x6709;&#x5148;&#x540E;&#x987A;&#x5E8F;&#x7684;&#xFF0C;&#x8D8A;&#x9760;&#x8FD1;&#x7528;&#x6237;&#x7684;&#x5C31;&#x8D8A;&#x9760;&#x524D;&#xFF0C;&#x5C31;&#x80FD;&#x6321;&#x4F4F;&#x5E95;&#x4E0B;&#x7684;&#x7A97;&#x53E3;&#x3002; &#x76EE;&#x524D;&#x8BF4;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x7ED3;&#x8BBA;&#x53EF;&#x80FD;&#x4E3A;&#x65F6;&#x8FC7;&#x65E9;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x5C06;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x3002;</p>
<ol>
<li><h1 id="&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x4ECB;&#x7ECD;"><a href="#&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x4ECB;&#x7ECD;"></a>&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x4ECB;&#x7ECD;</h1></li>
</ol>
<h2 id="1-1-&#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;"><a href="#1-1-&#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;" class="headerlink" title="1.1 &#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;"></a>1.1 &#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;</h2><h3 id="1-1-1-&#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;&#x6E38;&#x620F;3D&#x4E16;&#x754C;"><a href="#1-1-1-&#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;&#x6E38;&#x620F;3D&#x4E16;&#x754C;" class="headerlink" title="1.1.1 &#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;&#x6E38;&#x620F;3D&#x4E16;&#x754C;"></a>1.1.1 &#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;&#x6E38;&#x620F;3D&#x4E16;&#x754C;</h3><p>&#x4E0B;&#x9762;2&#x4E2A;&#x56FE;&#x6765;&#x81EA;Unity3d&#x5B98;&#x7F51;&#x5F00;&#x53D1;&#x6587;&#x6863;:<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/684d0b6d91c3af9505bbf3daa36f0404ecec21f56df189ded8ef965076960efc" alt="unity&#x6444;&#x50CF;&#x5934;-1.png"><br>&#x6211;&#x4EEC;&#x73A9;&#x7684;&#x738B;&#x8005;&#x8363;&#x8000;&#xFF0C;&#x539F;&#x795E;&#x7B49;&#x6E38;&#x620F;&#x7684;&#x5F00;&#x53D1;&#xFF0C;&#x90FD;&#x662F;&#x7C7B;&#x4F3C;&#x5728;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;3D&#x573A;&#x666F;&#x4E0B;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5C06;&#x4F7F;&#x7528;3D&#x5EFA;&#x6A21;&#x5DE5;&#x5177;&#x6765;&#x521B;&#x5EFA;&#x5730;&#x5F62;&#x3001;&#x5EFA;&#x7B51;&#x3001;&#x690D;&#x88AB;&#x7B49;&#x5730;&#x56FE;&#x5143;&#x7D20;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x6750;&#x8D28;&#x548C;&#x8D34;&#x56FE;&#x6765;&#x589E;&#x5F3A;&#x5730;&#x56FE;&#x7684;&#x89C6;&#x89C9;&#x6548;&#x679C;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x8FD9;&#x5F20;&#x56FE;&#x7247;&#x91CC;&#x653E;&#x4E86;3&#x4E2A;&#x989C;&#x8272;&#x7684;&#x67F1;&#x5B50;&#x3002; &#x9664;&#x4E86;&#x8FD9;&#x4E9B;&#x7269;&#x4F53;&#x5916;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x6444;&#x50CF;&#x673A;&#xFF08;Camera&#xFF09;&#xFF0C;&#x5B83;&#x662F;&#x7528;&#x6765;&#x6355;&#x6349;&#x753B;&#x9762;&#x7684;&#xFF0C; &#x6BD5;&#x7ADF;&#x624B;&#x673A;&#x5C4F;&#x5E55;&#x662F;2D&#x7684;&#xFF0C;&#x7B80;&#x5355;&#x6765;&#x8BF4;&#x8FD9;&#x4E2A;&#x6444;&#x50CF;&#x673A;&#x80FD;&#x6355;&#x6349;&#x5230;&#x7684;&#x753B;&#x9762;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x624B;&#x673A;&#x5C4F;&#x5E55;&#x4E0A;&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x5F20;&#x56FE;&#x7247;&#x6355;&#x6349;&#x5230;&#x7684;&#x753B;&#x9762;&#x662F;&#x53F3;&#x4E0B;&#x89D2;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x50CF;&#x6211;&#x4EEC;&#x73A9;&#x6E38;&#x620F;&#x79FB;&#x52A8;&#x89D2;&#x8272;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x8F6C;&#x52A8;&#x8FD9;&#x4E2A;&#x6444;&#x50CF;&#x673A;&#xFF08;Camera&#xFF09;&#x6765;&#x5B8C;&#x6210;&#x7684;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x8FD9;&#x79CD;&#x56FE;&#x4F1A;&#x66F4;&#x52A0;&#x50CF;&#x4E00;&#x4E2A;&#x6E38;&#x620F;&#x7684;&#x753B;&#x9762;&#x4E00;&#x4E9B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1b45aaaee5276f1c7eceaeb3c31f16754347479755fca7363791f1aab241ea15" alt="unity&#x6444;&#x50CF;&#x5934;-2.png"></p>
<p>&#x901A;&#x8FC7;&#x770B;&#x6E38;&#x620F;&#x5730;&#x56FE;&#x7684;3D&#x5F00;&#x53D1;&#x573A;&#x666F;&#xFF0C;&#x5C31;&#x662F;&#x5E0C;&#x671B;&#x80FD;&#x72D7;&#x66F4;&#x52A0;&#x751F;&#x52A8;&#x7684;&#x7406;&#x89E3;&#x5230;&#x5728;2D&#x7684;&#x624B;&#x673A;&#x5C4F;&#x5E55;&#x4E0B;&#xFF0C;&#x5176;&#x5B9E;&#x6709;&#x4E00;&#x4E2A;3D&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x867D;&#x7136;&#x6211;&#x4EEC;&#x7684;&#x5B89;&#x5353;&#x5F00;&#x53D1;&#x4E0D;&#x4F1A;&#x50CF;&#x6E38;&#x620F;&#x5F00;&#x53D1;&#x90A3;&#x4E48;&#x590D;&#x6742;&#xFF0C;&#x4F46;&#x662F;&#x539F;&#x7406;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<h3 id="1-1-2-&#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;Android&#x7684;&#x4E09;&#x7EF4;&#x5750;&#x6807;&#x7CFB;"><a href="#1-1-2-&#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;Android&#x7684;&#x4E09;&#x7EF4;&#x5750;&#x6807;&#x7CFB;" class="headerlink" title="1.1.2 &#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;Android&#x7684;&#x4E09;&#x7EF4;&#x5750;&#x6807;&#x7CFB;"></a>1.1.2 &#x4E09;&#x7EF4;&#x7A7A;&#x95F4;&#x6982;&#x5FF5;&#x2013;Android&#x7684;&#x4E09;&#x7EF4;&#x5750;&#x6807;&#x7CFB;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/46f7a8ddac7e6efd382929c1ee53e4253d97b0fa5c615398de931fcb04c400dc" alt="Android&#x4E09;&#x7EF4;&#x5750;&#x6807;&#x7CFB;.png"><br>Android&#x5750;&#x6807;&#x7CFB;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E09;&#x7EF4;&#x5750;&#x6807;&#xFF0C;Z&#x8F74;&#x5411;&#x4E0A;&#xFF0C;X&#x8F74;&#x5411;&#x53F3;&#xFF0C;Y&#x8F74;&#x5411;&#x4E0B;&#x3002;</p>
<p>&#x7ECF;&#x5E38;&#x542C;&#x5230;&#x7684; Z-Order &#x4E5F;&#x5C31;&#x662F;&#x6307;&#x7A97;&#x53E3;&#x5728;Z&#x8F74;&#x7684;&#x6392;&#x5E8F;&#xFF0C;&#x79BB;&#x7528;&#x6237;&#x8D8A;&#x8FD1;&#xFF0C;Z&#x503C;&#x8D8A;&#x5927;&#x3002;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x906E;&#x6321;&#x4F4F;&#x540E;&#x9762;&#x7684;&#x7A97;&#x53E3;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x518D;&#x52A0;&#x6DF1;&#x4E00;&#x4E0B;&#x5B89;&#x5353;&#x7A97;&#x53E3;&#x7684;&#x5C42;&#x7EA7;&#x5173;&#x7CFB;&#xFF0C;&#x4E0B;&#x9762;&#x770B;&#x4E00;&#x5F20;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x7684;View&#x5C42;&#x7EA7;&#x7684;3D&#x89C6;&#x89D2;&#x3002;</p>
<p><strong>&#x6CE8;&#x610F;&#xFF0C;&#x4E0B;&#x9762;&#x7684;&#x56FE;&#x7247;&#x662F;View&#xFF0C;&#x4E0D;&#x662F;&#x672C;&#x6B21;&#x8981;&#x8BB2;&#x7684;&#x7A97;&#x53E3;&#xFF0C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x52A0;&#x6DF1;&#x4E00;&#x4E0B;&#x5C42;&#x7EA7;&#x5370;&#x8C61;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/4333d3f8b3420080e77562e8da1d3ac916e68fb515a07bdd52cc76f1b793a1b8" alt="APP37&#x5C42;-2.png"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5728;&#x5E03;&#x5C40;&#x4E86;&#x5199;&#x4E86;37&#x5C42;&#x7EA6;&#x675F;&#x5E03;&#x5C40;&#xFF0C;&#x5176;&#x5B9E;&#x7B2C;3&#x5C42;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x6309;&#x94AE;&#x3002; &#x53F3;&#x4E0A;&#x89D2;&#x6211;&#x4EEC;&#x624B;&#x673A;&#x5C4F;&#x5E55;&#x4E0A;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6309;&#x94AE;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x4F46;&#x662F;&#x53F3;&#x4E0B;&#x89D2;&#x901A;&#x8FC7;Android Studio&#x81EA;&#x5E26;&#x7684;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6574;&#x4E2A;View&#x6811;&#x662F;&#x6709;&#x5F88;&#x591A;&#x5C42;&#x7684;&#xFF08;&#x4EE3;&#x7801;&#x5199;&#x4E86;37&#x5C42;&#xFF09;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x770B;&#x5230;&#x7684;View&#x5C42;&#x7EA7;&#x5176;&#x5B9E;&#x548C;&#x540E;&#x9762;&#x8981;&#x8BB2;&#x5C31;&#x7A97;&#x53E3;&#x5206;&#x5C42;&#xFF0C;&#x662F;&#x6709;&#x76F8;&#x4F3C;&#x4E4B;&#x5904;&#x7684;&#x3002; &#x5C06;&#x8FD9;&#x91CC;&#x662F;37&#x5C42;&#x60F3;&#x8C61;&#x5C42;&#x5B89;&#x5353;&#x5728;&#x7A97;&#x53E3;&#x7684;&#x5206;&#x5C42;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;</p>
<h2 id="1-2-ViewTree"><a href="#1-2-ViewTree" class="headerlink" title="1.2 ViewTree"></a>1.2 ViewTree</h2><p>&#x4E3A;&#x4E86;&#x540E;&#x7EED;&#x65B9;&#x4FBF;&#x7406;&#x89E3;&#x7A97;&#x53E3;&#x6811;&#xFF0C; &#x5148;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x5B89;&#x5353;&#x5F00;&#x53D1;&#x90FD;&#x77E5;&#x9053;&#x7684;View&#x6811;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/bc3174df54b9dc0a8fd6bcb36a8989fc46b1ef0262438711719d796a91807469" alt="&#x7EA2;&#x7EFF;&#x5E03;&#x5C40;.png"></p>
<p>XML&#x91CC;&#x5982;&#x56FE;&#x5199;&#x4E0B;2&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7EA2;&#x7EFF;&#x5E03;&#x5C40;&#xFF0C;&#x663E;&#x793A;&#x7684;UI&#x6548;&#x679C;&#x7EFF;&#x8272;&#x7684;&#x4F1A;&#x6321;&#x4F4F;&#x4E00;&#x90E8;&#x5206;&#x7EA2;&#x8272;&#x7684;&#x3002;&#x4F46;&#x662F;&#x7528;&#x5DE5;&#x5177;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x53D1;&#x9001;&#x7EA2;&#x8272;&#x63A7;&#x4EF6;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x5B8C;&#x6210;&#x7ED8;&#x5236;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/fa55458a8d4aad5e94e5396d0c18bb839fa1e3239398294a7d5a95366e0acec7" alt="&#x7EA2;&#x7EFF;&#x5E03;&#x5C40;&#x56FE;&#x5C42;.png"></p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5728;&#x540C;&#x4E00;&#x5C42;&#x7EA7;&#x4E0B;&#xFF0C;&#x5728;ViewGropu&#x5B69;&#x5B50;View&#x6570;&#x7EC4;&#x8FD9;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x4E0B;&#x6807;&#x8D8A;&#x5927;&#x7684;View&#x4F1A;&#x6321;&#x4F4F;&#x540E;&#x9762;&#x7684;View&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x5C42; &#x5C42;&#x7EA7;&#x8D8A;&#x9760;&#x524D;&#xFF0C;&#x5C31;&#x4F1A;&#x5F53;&#x521D;&#x540E;&#x9762;&#x7684;View&#x3002;</p>
<p>&#x7EE7;&#x7EED;&#x589E;&#x52A0;&#x51E0;&#x4E2A;View</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/253796b457ab58c149694d50717b5b61a630c7b36cdcb093c4553b55b836a874" alt="&#x7EA2;&#x7EFF;&#x5E03;&#x5C40;&#x65B0;&#x589E;.png"></p>
<ol>
<li>&#x63A7;&#x4EF6;B&#x4E0B;&#x65B0;&#x589E;&#x63A7;&#x4EF6;D&#xFF0C;D&#x4E0B;&#x9762;&#x653E;&#x4E86;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x63A7;&#x4EF6;G</li>
<li>&#x63A7;&#x4EF6;C&#x4E0B;&#x9762;&#x65B0;&#x589E;&#x4E86;&#x4E00;&#x4E2A;&#x6587;&#x672C;&#x63A7;&#x4EF6;F</li>
</ol>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/b9749901732a861f381c9b5c1bd7d8b66350caee2dfdc4357c4e0a91a6bdf53a" alt="&#x65B0;&#x589E;&#x63A7;&#x4EF6;&#x540E;&#x7684;&#x4E09;&#x7EF4;&#x89C6;&#x89D2;.jpg"></p>
<p>&#x5DE6;&#x8FB9;&#x770B;&#x5230;&#x5BF9;View&#x505A;&#x4E86;&#x5C42;&#x7EA7;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;ViewTree&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x753B;&#x6210;&#x6811;&#x56FE;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/913c4d949ec3ed1ee1a505b2cff7759f0a1aac98e76023d5d7f621ff6a9b6fd1" alt="Tree.png"></p>
<p>&#x8FD9;&#x4E2A;&#x5C31;&#x662F;View&#x5C42;&#x7684;View&#x6811;&#xFF0C;&#x80FD;&#x6784;&#x5EFA;&#x51FA;View&#x6811;&#x7684;&#x539F;&#x56E0;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;ViewGroup&#x8FD9;&#x4E2A;&#x7C7B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;# View</span><br><span class="line"></span><br><span class="line">   // &#x7236;&#x5BB9;&#x5668;</span><br><span class="line">   protected ViewParent mParent;</span><br><span class="line">	</span><br><span class="line"># ViewGroup</span><br><span class="line">    // &#x6240;&#x6709;&#x5B50;View</span><br><span class="line">    private View[] mChildren;</span><br><span class="line"></span><br><span class="line">    public void addView(View child, int index) {</span><br><span class="line">        ......</span><br><span class="line">        // &#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x662F;&#x901A;&#x8FC7;addInArray &#x5C06;View&#x6DFB;&#x52A0;&#x5230;&#x6570;&#x7EC4;mChildren&#x4E2D;</span><br><span class="line">        addView(child, index, params);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void removeView(View view) {</span><br><span class="line">        ......// &#x672C;&#x8D28;&#x8FD8;&#x662F;&#x4ECE;mChildren&#x79FB;&#x9664;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1362892eaec0dbc6e04dae46f5f936f0a85ab13230761ebbcb35138af222531a" alt="&#x5B89;&#x5353;&#x5E38;&#x89C1;&#x5E03;&#x5C40;.png"></p>
<p>&#x5E94;&#x7528;&#x5E03;&#x5C40;&#x7528;&#x7684;&#x573A;&#x666F;&#x7684;&#x51E0;&#x4E2A;&#x7C7B;&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x5171;&#x540C;&#x7684;&#x7236;&#x7C7B;&#x2013;ViewGroup&#x3002;</p>
<p>ViewGroup&#x7EE7;&#x627F;&#x4E86;View,&#x6240;&#x4EE5;&#x6709;&#x7236;&#x4EB2;&#xFF08;mParent&#xFF09;&#xFF0C;&#x81EA;&#x8EAB;&#x5185;&#x90E8;&#x53C8;&#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4E2A;View&#x6570;&#x7EC4;&#xFF08;mChildren&#xFF09;&#x8868;&#x793A;&#x5B83;&#x7684;&#x5B69;&#x5B50;&#x4EEC;&#x3002; &#x4E0A;&#x6709;&#x7236;&#x4EB2;&#x4E0B;&#x6709;&#x4E00;&#x7FA4;&#x5B69;&#x5B50;&#xFF0C;&#x6240;&#x4EE5;&#x80FD;&#x6784;&#x5EFA;&#x51FA;&#x4E00;&#x4E2A;ViewTree&#x3002;</p>
<p>&#x5982;&#x679C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5B69;&#x5B50;&#xFF0C;&#x90A3;&#x662F;&#x7EBF;&#x6027;&#x7ED3;&#x6784;&#xFF0C;&#x56E0;&#x6B64;&#x5B69;&#x5B50;&#x5FC5;&#x987B;&#x662F;&#x591A;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;ViewGroup&#x4E5F;&#x662F;&#x4E00;&#x4E2A;View&#x7684;&#x5BB9;&#x5668;&#x7C7B;&#x3002; <strong>&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5D4C;&#x5957;&#x6765;&#x884C;&#x7A0B;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x590D;&#x6742;&#x7684;ViewTree&#x7ED3;&#x6784;</strong><br>&#x8FD9;&#x4E5F;&#x662F;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x8005;&#x80FD;&#x5199;&#x51FA;&#x5404;&#x79CD;&#x4E30;&#x5BCC;UI&#x7684;&#x57FA;&#x7840;&#x3002;</p>
<p><strong>&#x5728;&#x7A97;&#x53E3;&#x8FD9;&#x4E00;&#x7EA7;&#x522B;&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x4E5F;&#x6709;&#x7A97;&#x53E3;&#x6811;&#xFF0C;&#x4E5F;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x5BB9;&#x5668;&#x7ED3;&#x6784;&#x3002;</strong> &#x540E;&#x9762;&#x4F1A;&#x8BE6;&#x7EC6;&#x89E3;&#x91CA;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7C7B;&#xFF0C;&#x5728;&#x4ECB;&#x7ECD;&#x4E4B;&#x524D;&#x5148;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x4EC0;&#x4E48;&#x662F;&#x7A97;&#x53E3;&#x3002;</p>
<p>ViewTree&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x4E5F;&#x662F;&#x771F;&#x5B9E;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x5728;Activity&#x4E2D;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x5BF9;&#x5E94;ViewTree&#x7684;&#x53D8;&#x5316;&#x505A;&#x76D1;&#x542C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;    View.getViewTreeObserver().addOnGlobalLayoutListener(</span><br><span class="line">        ......</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h2 id="1-3-&#x4EC0;&#x4E48;&#x662F;&#x7A97;&#x53E3;"><a href="#1-3-&#x4EC0;&#x4E48;&#x662F;&#x7A97;&#x53E3;" class="headerlink" title="1.3 &#x4EC0;&#x4E48;&#x662F;&#x7A97;&#x53E3;"></a>1.3 &#x4EC0;&#x4E48;&#x662F;&#x7A97;&#x53E3;</h2><p>&#x4ECE;&#x89C6;&#x89C9;&#x4E0A;&#xFF0C;&#x7528;&#x6237;&#x5728;&#x624B;&#x673A;&#x5C4F;&#x5E55;&#x4E0A;&#x770B;&#x5230;&#x7684;&#x201C;&#x4E00;&#x5757;&#x533A;&#x57DF;&#x201D;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#xFF0C;&#x6BD4;&#x5982;&#x524D;&#x9762;&#x770B;&#x5230;&#x7684;&#x8FD9;&#x5F20;&#x56FE;&#xFF0C;&#x6BCF;&#x4E00;&#x5757;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/b9a975f09e999fd59e7c4a194e27d83e5140104002ca8249feab191c8fb5089f" alt="&#x622A;&#x56FE;&#x5BF9;&#x5E94;&#x7A97;&#x53E3;.png"></p>
<p>&#x4ECE;&#x4EE3;&#x7801;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x5E94;&#x7528;&#x7AEF;&#x7684;&#x7A97;&#x53E3;&#x6307;&#x7684;&#x662F;Window&#xFF0C; framework&#x5C42;&#x7684;&#x7A97;&#x53E3;&#x6307;&#x7684;&#x662F;WindowState</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/75167c702d35c3fc8423356665209a9f46d0b9e2960401371b2f891855f67760" alt="&#x7A97;&#x53E3;&#x4E3E;&#x4F8B;-2.png"></p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x7528;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x7C7B;&#x6765;&#x8868;&#x793A;&#x201C;&#x7A97;&#x53E3;&#x201D;&#x5462;&#xFF1F;</p>
<p>&#x6BD4;&#x5982;&#x8BF4;&#x6709;&#x4E00;&#x4E2A;&#x4EBA;&#xFF0C;&#x4ED6;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;&#x662F;&#x4ED6;&#x7684;&#x552F;&#x4E00;&#x8868;&#x793A;&#xFF0C;&#x4F46;&#x662F;&#x4ED6;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4FDD;&#x5B58;&#x7684;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x516C;&#x53F8;&#xFF0C;&#x516C;&#x53F8;&#x7CFB;&#x7EDF;&#x5BF9;&#x8FD9;&#x4E2A;&#x4EBA;&#x4FDD;&#x5B58;&#x7684;&#x4E2A;&#x4EBA;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#xFF0C;&#x5728;&#x4EA4;&#x8B66;&#x7CFB;&#x7EDF;&#xFF0C;&#x4FDD;&#x5B58;&#x7684;&#x662F;&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x8F66;&#x8F86;&#x4FE1;&#x606F;&#x548C;&#x8FDD;&#x7AE0;&#x4FE1;&#x606F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/47854e640b833696f8437ee48dbe52c1284da94bf8039ff7dabc013ad6070baa" alt="&#x7A97;&#x53E3;&#x4E3E;&#x4F8B;-1.png"></p>
<p>&#x5728;&#x751F;&#x6D3B;&#x4E2D;&#xFF0C;&#x4E0D;&#x540C;&#x7CFB;&#x7EDF;&#x5BF9;&#x4E00;&#x4E2A;&#x4EBA;&#x5173;&#x6CE8;&#x4FDD;&#x5B58;&#x7684;&#x6570;&#x636E;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x8005;&#x4E3A;&#x4E86;&#x964D;&#x4F4E;&#x6A21;&#x5757;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x4E5F;&#x4F1A;&#x6709;&#x8FD9;&#x79CD;&#x8BBE;&#x8BA1;&#x3002;</p>
<ol start="2">
<li><h1 id="&#x521D;&#x8BC6;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;"><a href="#&#x521D;&#x8BC6;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;" class="headerlink" title="&#x521D;&#x8BC6;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;"></a>&#x521D;&#x8BC6;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;</h1></li>
</ol>
<h1 id="2-1-&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7C7B;&#x4ECB;&#x7ECD;"><a href="#2-1-&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7C7B;&#x4ECB;&#x7ECD;" class="headerlink" title="2.1 &#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7C7B;&#x4ECB;&#x7ECD;"></a>2.1 &#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7C7B;&#x4ECB;&#x7ECD;</h1><p>&#x524D;&#x9762;&#x770B;&#x5230;&#x4E86;&#x4E00;&#x4E9B;View&#x6811;&#x6784;&#x5EFA;&#x7684;&#x7C7B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8BF4;&#x7684;&#x5E38;&#x89C1;&#x5E03;&#x5C40;&#xFF0C;&#x73B0;&#x5728;&#x5217;&#x4E3E;&#x6784;&#x5EFA;&#x7A97;&#x53E3;&#x6811;&#x7528;&#x7684;&#x7684;&#x51E0;&#x4E2A;&#x5BB9;&#x5668;&#x7C7B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/5fb012d51982fdfb98eec31e6e8a107148c9e0b024866c32f117148cee075b57" alt="&#x7C7B;-WindowContainer.png"></p>
<p><strong>WindowContainer&#xFF1A;</strong></p>
<p>&#x7C7B;&#x4F3C;ViewGroup&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x662F;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7684;&#x57FA;&#x7C7B;&#xFF0C;&#x540E;&#x9762;&#x4ECB;&#x7ECD;&#x7684;&#x5176;&#x4ED6;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x7C7B;&#x90FD;&#x662F;&#x5B83;&#x7684;&#x5B50;&#x7C7B;&#x3002;</p>
<p>&#x6709;&#x6CDB;&#x578B;&#x9650;&#x5236;&#xFF0C;&#x8BF4;&#x660E;&#x5BB9;&#x5668;&#x7684;&#x5185;&#x5BB9;&#x662F;&#x6709;&#x9650;&#x5236;&#x7684;</p>
<p>mParent&#xFF1A; &#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x5BB9;&#x5668;&#x7684;&#x7236;&#x7A97;&#x53E3;&#x5F15;&#x7528;&#x3002;</p>
<p>mChildren &#xFF1A;&#x4FDD;&#x5B58;&#x5F53;&#x524D;&#x7A97;&#x53E3;&#x7684;&#x6240;&#x6709;&#x5B69;&#x5B50;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x96C6;&#x5408;&#xFF08;&#x6709;&#x6CDB;&#x578B;&#xFF09;&#x3002;&#x6839;&#x636E;&#x6CE8;&#x91CA;&#xFF0C;&#x5217;&#x8868;&#x540E;&#x9762;&#x7684;&#x5B50;&#x5BB9;&#x5668;&#xFF0C;z-order &#x8D8A;&#x5927;&#xFF0C;&#x79BB;&#x5C4F;&#x5E55;&#x8D8A;&#x8FD1;&#x3002;</p>
<p>&#x7236;&#x7C7B;&#x4E3A;ConfigurationContainer&#xFF0C;&#x5C01;&#x88C5;&#x4E86;&#x914D;&#x7F6E;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x5F53;&#x524D;&#x7C7B;&#x5C01;&#x88C5;&#x4E86;&#x5BB9;&#x5668;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/b9b16f97860e405122738bf83833ce356255fcf9258e36496fedb4124024a9e3" alt="&#x7C7B;-RootWindowContainer.png"></p>
<p><strong>RootWindowContainer&#xFF1A;</strong></p>
<p>&#x6839;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#xFF0C;&#x4E5F;&#x662F;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;&#x7684;&#x6839;&#x3002;&#x7BA1;&#x7406;DisplayContent</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/b69d052943551f9f86e4a947e818b6c83a82dda21304ee266bf920f019189413" alt="&#x7C7B;-DisplayContent.png"></p>
<p><strong>DisplayContent&#xFF1A;</strong></p>
<p>&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x5C4F;&#x5E55;&#xFF0C;Android&#x662F;&#x652F;&#x6301;&#x591A;&#x5C4F;&#x5E55;&#x7684;&#x3002;</p>
<p>&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x4E3A;&#xFF1A;<br>DisplayContent-&gt;RootDisplayArea-&gt;DisplayArea.Dimmable-&gt;DisplayArea-&gt;WindowContainer</p>
<p>&#x5B69;&#x5B50;&#x4E3A;DisplayArea&#xFF08;&#x8FD9;&#x4E2A;&#x89C4;&#x5219;&#x5B9A;&#x4E49;&#x5728;DisplayArea&#x7684;&#x5B50;&#x7C7B;Dimmable&#x4E2D;&#xFF09;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9dbda08e336b67374f85a30d81fa8ceecd2b9fdfbe6ed2e12162b6ac494cc426" alt="&#x7C7B;-WindowState.png"></p>
<p><strong>WindowState&#xFF1A;</strong></p>
<p>&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#xFF0C;&#x672C;&#x8EAB;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x6BD4;&#x5982;&#x5B50;&#x7A97;&#x53E3;&#x5C31;&#x662F;&#x5B83;&#x7684;&#x5B69;&#x5B50;&#xFF08;Popupwindow&#x573A;&#x666F;&#xFF09;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6a036471a584b84ebac4169f91b90dac6acd3f9064e42eccea95d9335bf461ab" alt="&#x7C7B;-DisplayArea.png"></p>
<p><strong>DisplayArea&#xFF1A;</strong><br>&#x6CE8;&#x91CA;&#xFF1A;DisplayContent&#x4E0B;&#x7684;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x96C6;&#x5408;&#x3002;</p>
<p>&#x8BF4;&#x4EBA;&#x8BDD;&#xFF1A;&#x8868;&#x793A;&#x4E00;&#x5757;&#x663E;&#x793A;&#x533A;&#x57DF;&#xFF0C;&#x662F;DisplayContent&#x7684;&#x5B50;&#x5BB9;&#x5668;&#x3002;DisplayContent&#x4E0B;&#x5B89;&#x5353;&#x76EE;&#x524D;&#x8BBE;&#x8BA1;&#x4E3A;&#x5206;&#x4E86;37&#x5C42;&#xFF0C;&#x6BCF;&#x4E00;&#x5C42;&#x90FD;&#x662F;&#x4E00;&#x4E2A;DisplayArea&#x3002;</p>
<p>&#x6709;&#x4E09;&#x4E2A;&#x76F4;&#x63A5;&#x5B50;&#x7C7B;&#xFF0C;TaskDisplayArea&#xFF0C;DisplayArea.Tokens&#x548C;DisplayArea.Tokens&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/e83c1a75ded77b7fd74184d636e896cb83b61353dec086dacf3e7a1b832a534e" alt="&#x7C7B;-TaskDisplayArea.png"></p>
<p><strong>TaskDisplayArea&#xFF1A;</strong></p>
<p>&#x6CE8;&#x91CA;&#xFF1A;&#x5B69;&#x5B50;&#x53EF;&#x4EE5;&#x662F;Task&#xFF0C;&#x6216;&#x8005;&#x662F;TaskDisplayArea&#x3002;&#xFF08;&#x4E0D;&#x8FC7;&#x76EE;&#x524D;&#x770B;&#x5230;&#x7684;&#x5B69;&#x5B50;&#x90FD;&#x662F;Task&#x7C7B;&#x578B;&#xFF09;&#x3002;</p>
<p>&#x5BF9;&#x5E94;&#x5C42;&#x7EA7;&#x6811;&#x7684;&#x7B2C;&#x4E8C;&#x5C42;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x6765;&#x5B58;&#x653E;&#x5E94;&#x7528;&#x7684;&#x7A97;&#x53E3;&#x56FE;&#x5C42;&#xFF0C;&#x975E;&#x5E38;&#x91CD;&#x8981;&#xFF0C;APP&#x7684;&#x7A97;&#x53E3;&#x90FD;&#x5728;&#x8FD9;&#x3002;&#x4E5F;&#x662F;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;&#x770B;&#x7684;&#x91CD;&#x70B9;&#x533A;&#x57DF;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/58ee650388936667e6303a3ad31aecdafe7a0a8979f929ea9c57ef71c440c47c" alt="&#x7C7B;-DisplayArea.Token.png"></p>
<p><strong>DisplayArea.Token&#xFF1A;</strong></p>
<p>DisplayArea&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x5176;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x8868;&#x793A;WindowToken&#x7684;&#x5BB9;&#x5668;&#x3002;WindowToken&#x7684;&#x5B50;&#x7C7B;&#x662F;WindowState</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/c0cf42b1f2b13fd462b4cebd8c1b50b81bad98ce503619a77465e1864aff6d6a" alt="&#x7C7B;-DisplayArea.Dimmable.png"></p>
<p><strong>DisplayArea.Dimmable&#xFF1A;</strong></p>
<p>DisplayArea&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x5176;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;DisplayContent&#x7684;&#x7236;&#x7C7B;&#xFF0C;&#x5E26;&#x6A21;&#x7CCA;&#x6548;&#x679C;&#x3002;&#x5B69;&#x5B50;&#x662F;DisplayArea&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ea701248b9534deb2bfd01e8aa4105bd5e36a13051ba5fd3f330b24241f35404" alt="&#x7C7B;-ImeContainer.png"></p>
<p><strong>ImeContainer&#xFF1A;</strong></p>
<p>&#x8F93;&#x5165;&#x6CD5;&#x5BB9;&#x5668;&#xFF0C;&#x7236;&#x7C7B;&#x662F;DisplayArea.Token&#xFF0C;&#x90A3;&#x4E48;&#x5B69;&#x5B50;&#x4E5F;&#x662F;WindowToken&#x3002;&#x8F93;&#x5165;&#x6CD5;&#x4E13;&#x7528;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/19eb83697d4af74c9adfb8d51d0c48306324567694e27887c736f1ca718a7829" alt="&#x7C7B;-Task.png"></p>
<p><strong>Task&#xFF1A;</strong></p>
<p>&#x7236;&#x7C7B;TaskFragment&#x7EE7;&#x627F;WindowContainer&#xFF0C;&#x6CDB;&#x578B;&#x6CA1;&#x6709;&#x9650;&#x5236;&#x5B69;&#x5B50;&#x7684;&#x7C7B;&#x578B;&#x3002;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x4E0B;&#x5B69;&#x5B50;&#x662F;Task&#x548C;ActivityRecord&#x7C7B;&#x578B;&#x3002;</p>
<p>&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7ECF;&#x5E38;&#x89C1;&#x5230;&#x7684;&#x7C7B;&#xFF0C;&#x4E5F;&#x662F;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#xFF0C;&#x591A;&#x7A97;&#x53E3;&#x5F00;&#x53D1;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/847900364c6a1e7be51767260c369c97b82447db9ee34ee49febb56a0cd67393" alt="&#x7C7B;-WindowToken.png"></p>
<p><strong>WindowToken&#xFF1A;</strong></p>
<p>&#x7406;&#x5668;&#x4E2D;&#x4E00;&#x7EC4;&#x76F8;&#x5173;&#x7A97;&#x53E3;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x662F;&#x7A97;&#x53E3;&#x7684;Token,&#x800C;&#x7A97;&#x53E3;&#x7684;&#x5B9A;&#x4E49;WindowState&#x3002;&#x4E00;&#x822C;&#x5728;&#x7A97;&#x53E3;&#x5C42;&#x7EA7;&#x6811;&#x4E2D;WindowToken&#x4E0B;&#x9762;&#x5C31;&#x4F1A;&#x6302;&#x8F7D;&#x4E00;&#x4E2A;WindowState&#x3002;</p>
<p>&#x58C1;&#x7EB8;&#x7528;&#x5230;&#x7684;WallpaperWindowToken&#x4E5F;&#x662F;&#x5176;&#x5B50;&#x7C7B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/27203f4fd618569d02bd7fb7ebb0b22f945e4f4b7a5b4fb5011f4392692b1af2" alt="&#x7C7B;-ActivityRecord.png"></p>
<p><strong>ActivityRecord&#xFF1A;</strong></p>
<p>&#x5BF9;&#x5E94;&#x7740;&#x4E00;&#x4E2A;Activity&#x3002;</p>
<p>&#x662F;WindowToken&#x7684;&#x5B50;&#x7C7B;&#xFF0C;&#x6240;&#x4EE5;&#x5B69;&#x5B50;&#x4E5F;&#x662F;WindowState&#x3002; &#x4ECE;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x89D2;&#x5EA6;&#xFF0C;&#x4E00;&#x4E2A;Activity&#x4E0B;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;Window&#x3002;&#x5E76;&#x4E14;&#x4E00;&#x822C;&#x4F5C;&#x4E3A;&#x662F;Task&#x7684;&#x5B69;&#x5B50;&#x3002;</p>
<h2 id="2-2-Feature&#x4ECB;&#x7ECD;"><a href="#2-2-Feature&#x4ECB;&#x7ECD;" class="headerlink" title="2.2 Feature&#x4ECB;&#x7ECD;"></a>2.2 Feature&#x4ECB;&#x7ECD;</h2><p>&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x8FD9;&#x4E2A;Feature(&#x7279;&#x5F81;)&#x5462;&#xFF1F;</p>
<p>AOSP&#x65E2;&#x7136;&#x5C06;&#x5C4F;&#x5E55;&#x5206;&#x4E86;37&#x5C42;&#xFF0C;&#x90A3;&#x8BF4;&#x660E;&#x56FE;&#x5C42;&#x4E4B;&#x95F4;&#x662F;&#x6709;&#x533A;&#x522B;&#x7684;&#xFF0C;&#x6709;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x662F;Feature&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x4E00;&#x5C42;&#x662F;&#x4E0D;&#x662F;&#x652F;&#x6301;&#x5355;&#x624B;&#x64CD;&#x4F5C;&#x3002;<br>&#x8FD9;&#x91CC;&#x5217;&#x4E3E;5&#x4E2A;&#x5E38;&#x89C1;&#x7684;Feature&#xFF0C;&#x5DF2;&#x7ECF;&#x5B83;&#x4EEC;&#x6240;&#x5728;&#x7684;&#x5C42;&#x7EA7;&#x3002;</p>
<p><strong>WindowedMagnification</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&#x62E5;&#x6709;&#x7279;&#x5F81;&#x7684;&#x5C42;&#x7EA7;&#xFF1A; 0-31</span><br><span class="line">&#x7279;&#x5F81;&#x63CF;&#x8FF0;&#xFF1A; &#x652F;&#x6301;&#x7A97;&#x53E3;&#x7F29;&#x653E;&#x7684;&#x4E00;&#x5757;&#x533A;&#x57DF;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x901A;&#x8FC7;&#x8F85;&#x52A9;&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x7F29;&#x5C0F;&#x6216;&#x653E;&#x5927;</span><br></pre></td></tr></table></figure>

<p><strong>HideDisplayCutout</strong></p>
<p>&#x62E5;&#x6709;&#x7279;&#x5F81;&#x7684;&#x5C42;&#x7EA7;&#xFF1A; 0-14 16 18-23 26-35<br>&#x7279;&#x5F81;&#x63CF;&#x8FF0;&#xFF1A;&#x9690;&#x85CF;&#x526A;&#x5207;&#x533A;&#x57DF;&#xFF0C;&#x5373;&#x5728;&#x9ED8;&#x8BA4;&#x663E;&#x793A;&#x8BBE;&#x5907;&#x4E0A;&#x9690;&#x85CF;&#x4E0D;&#x89C4;&#x5219;&#x5F62;&#x72B6;&#x7684;&#x5C4F;&#x5E55;&#x533A;&#x57DF;&#xFF0C;&#x6BD4;&#x5982;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x6253;&#x5F00;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x540E;&#xFF0C;&#x6709;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x7684;&#x56FE;&#x5C42;&#x5C31;&#x4E0D;&#x4F1A;&#x5EF6;&#x4F38;&#x5230;&#x5218;&#x6D77;&#x5C4F;&#x533A;&#x57DF;&#x3002;</p>
<p><strong>OneHanded</strong></p>
<p>&#x62E5;&#x6709;&#x7279;&#x5F81;&#x7684;&#x5C42;&#x7EA7;&#xFF1A;0-23 26-32 34-35<br>&#x7279;&#x5F81;&#x63CF;&#x8FF0;&#xFF1A;&#x8868;&#x793A;&#x652F;&#x6301;&#x5355;&#x624B;&#x64CD;&#x4F5C;&#x7684;&#x56FE;&#x5C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5728;&#x624B;&#x673A;&#x4E0A;&#x8FD8;&#x662F;&#x633A;&#x5E38;&#x89C1;&#x7684;</p>
<p><strong>FullscreenMagnification</strong></p>
<p>&#x62E5;&#x6709;&#x7279;&#x5F81;&#x7684;&#x5C42;&#x7EA7;&#xFF1A;0-12 15-23 26-27 29-31 33-35<br>&#x7279;&#x5F81;&#x63CF;&#x8FF0;&#xFF1A;&#x652F;&#x6301;&#x5168;&#x5C4F;&#x5E55;&#x7F29;&#x653E;&#x7684;&#x56FE;&#x5C42;&#xFF0C;&#x548C;&#x4E0A;&#x9762;&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x5168;&#x5C4F;&#x7F29;&#x653E;&#xFF0C;&#x524D;&#x9762;&#x90A3;&#x4E2A;&#x53EF;&#x4EE5;&#x5C40;&#x90E8;</p>
<p><strong>ImePlaceholder</strong></p>
<p>&#x62E5;&#x6709;&#x7279;&#x5F81;&#x7684;&#x5C42;&#x7EA7;&#xFF1A; 13-14<br>&#x7279;&#x5F81;&#x63CF;&#x8FF0;&#xFF1A;&#x8F93;&#x5165;&#x6CD5;&#x76F8;&#x5173;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/f61bc505951d3ea0915deacd3627fc160f36ff19f4010d6a7607fd956bcce076" alt="Feature&#x6574;&#x7406;.png"></p>
<h1 id="3-WMS&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;"><a href="#3-WMS&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;" class="headerlink" title="3 WMS&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;"></a>3 WMS&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;</h1><p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x6765;&#x770B;&#x83B7;&#x53D6;&#x5230;&#x8BBE;&#x5907;&#x5F53;&#x524D;&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;adb shell dumpsys activity containers</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x5F00;&#x5B8C;&#x673A;&#x540E;&#x7684;launcher&#x5C31;&#x6267;&#x884C;&#x4E86;dump&#x547D;&#x4EE4;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x80FD;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x8FD9;&#x4E48;&#x4E00;&#x6BB5;&#x8F93;&#x51FA;&#xFF0C;&#x4E4D;&#x4E00;&#x770B;&#x5F88;&#x5BB9;&#x6613;&#x529D;&#x9000;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x90FD;&#x662F;&#x6709;&#x89C4;&#x5F8B;&#xFF0C;&#x800C;&#x4E14;&#x5F88;&#x7B80;&#x5355;&#x3002;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x5148;&#x4E0D;&#x770B;&#xFF0C;&#x7A0D;&#x540E;&#x518D;&#x8BE6;&#x7EC6;&#x89E3;&#x91CA;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;ACTIVITY MANAGER CONTAINERS (dumpsys activity containers)</span><br><span class="line">ROOT type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">  #0 Display 0 name=&quot;Built-in Screen&quot; type=undefined mode=fullscreen override-mode=fullscreen requested-bounds=[0,0][720,1600] bounds=[0,0][720,1600]</span><br><span class="line">   #2 Leaf:36:36 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #1 WindowToken{451b2bd type=2024 android.os.BinderProxy@4526826} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 47e1803 ScreenDecorOverlayBottom type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #0 WindowToken{69b9325 type=2024 android.os.BinderProxy@3a8ab1c} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 799b2ab ScreenDecorOverlay type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">   #1 HideDisplayCutout:32:35 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #2 OneHanded:34:35 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 FullscreenMagnification:34:35 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 Leaf:34:35 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #1 FullscreenMagnification:33:33 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 Leaf:33:33 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #0 OneHanded:32:32 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 Leaf:32:32 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">   #0 WindowedMagnification:0:31 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #6 HideDisplayCutout:26:31 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 OneHanded:26:31 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #2 FullscreenMagnification:29:31 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 Leaf:29:31 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #1 Leaf:28:28 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 FullscreenMagnification:26:27 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 Leaf:26:27 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #5 Leaf:24:25 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #1 WindowToken{922c2bc type=2024 android.os.BinderProxy@d50168e} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 48a6245 pip-dismiss-overlay type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 WindowToken{1a3a19a type=2019 android.os.BinderProxy@1ec36bc} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 50a3d66 NavigationBar0 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #4 HideDisplayCutout:18:23 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 OneHanded:18:23 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 FullscreenMagnification:18:23 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 Leaf:18:23 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #3 OneHanded:17:17 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 FullscreenMagnification:17:17 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 Leaf:17:17 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 WindowToken{7472fe2 type=2040 android.os.BinderProxy@1bfb9c4} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #0 4b26f73 NotificationShade type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #2 HideDisplayCutout:16:16 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 OneHanded:16:16 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 FullscreenMagnification:16:16 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 Leaf:16:16 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #1 OneHanded:15:15 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 FullscreenMagnification:15:15 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 Leaf:15:15 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 WindowToken{3da7d5c type=2000 android.os.BinderProxy@e2c682e} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #0 7619865 StatusBar type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">    #0 HideDisplayCutout:0:14 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">     #0 OneHanded:0:14 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #1 ImePlaceholder:13:14 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 ImeContainer type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #0 WindowToken{1397896 type=2011 android.os.Binder@23bebb1} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">         #0 d0c3c51 InputMethod type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">      #0 FullscreenMagnification:0:12 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #2 Leaf:3:12 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #0 WindowToken{82fa61a type=2038 android.os.BinderProxy@2f86adc} type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">         #0 33a873c ShellDropTarget type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #1 DefaultTaskDisplayArea type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #2 Task=1 type=home mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">         #0 Task=7 type=home mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">          #0 ActivityRecord{bd2b1d4 u0 com.android.launcher3/.uioverrides.QuickstepLauncher} t7} type=home mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">           #1 ae1df9b com.android.launcher3/com.android.launcher3.uioverrides.QuickstepLauncher type=home mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">           #0 b9fa2f0 com.android.launcher3/com.android.launcher3.uioverrides.QuickstepLauncher type=home mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #1 Task=2 type=undefined mode=fullscreen override-mode=fullscreen requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #0 Task=3 type=undefined mode=fullscreen override-mode=fullscreen requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">         #1 Task=6 type=undefined mode=multi-window override-mode=multi-window requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">         #0 Task=5 type=undefined mode=multi-window override-mode=multi-window requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">       #0 Leaf:0:1 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">        #0 WallpaperWindowToken{4b4c99a token=android.os.Binder@9258e45} type=undefined mode=fullscreen override-mode=fullscreen requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">         #0 f3495ce com.android.systemui.ImageWallpaper type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br></pre></td></tr></table></figure>

<p>&#x5148;&#x770B;&#x770B;&#x70B9;&#x51FB;&#x684C;&#x9762;&#x7684;&#x201C;&#x7535;&#x8BDD;&#x201C;&#x8FDB;&#x5165;&#x7535;&#x8BDD;&#x754C;&#x9762;&#x540E;&#xFF0C;&#x518D;&#x6267;&#x884C;&#x8FD9;&#x4E2A;dump&#x547D;&#x4EE4;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a2de342a5b0a0c54ac1ae08106717c440903d1609590d1847f3d6375a97a9950" alt="&#x542F;&#x52A8;Activity&#x540E;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x5BF9;&#x6BD4;.png"></p>
<p>tips: com.google.android.dialer &#x8FD9;&#x4E2A;&#x5305;&#x540D;&#x662F;&#x201D;&#x7535;&#x8BDD;&#x201D;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;<br>&#x8FD9;&#x4E2A;&#x533A;&#x522B;&#x5C31;&#x6BD4;&#x8F83;&#x597D;&#x770B;&#x51FA;&#x6765;&#x4E86;&#xFF0C;&#x5728;#1 DefaultTaskDisplayArea&#x4E0B;&#x591A;&#x4E86;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#x3002;&#x770B;&#x5230;&#x91CC;&#x9762;&#x4E5F;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x662F;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x4E0E;&#x201C;&#x7535;&#x8BDD;&#x201D;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x7684;Activity&#x76F8;&#x5173;&#x7684;&#x4E1C;&#x897F;&#x3002;<br>&#x7136;&#x540E;&#x518D;&#x6309;&#x4E00;&#x4E0B;&#x97F3;&#x91CF;&#x952E;&#x76D8;&#xFF0C;&#x770B;&#x4E00;&#x4E0B;&#x533A;&#x522B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/743831234a33a00fb8aa44af7b15bc263a22bb4f912acf5b7be54c8d3184e4c8" alt="&#x6309;&#x97F3;&#x91CF;&#x6309;&#x94AE;&#x540E;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x5BF9;&#x6BD4;.png"></p>
<p>&#x5728;&#x5176;&#x4ED6;&#x7684;&#x573A;&#x666F;&#x6BD4;&#x5982;&#x6309;power&#x51FA;&#x73B0;&#x7684;&#x5F39;&#x7A97;&#xFF0C; &#x51FA;&#x73B0;toast&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6216;&#x8005;&#x8FDB;&#x5165;&#x5206;&#x5C4F;&#x90FD;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;dump&#xFF0C;&#x5BF9;&#x6BD4;&#x4E00;&#x4E0B;&#x5DEE;&#x5F02;&#x3002;<br>&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x6709;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;&#xFF1A;</p>
<ol>
<li>&#x5F00;&#x5B8C;&#x673A;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x5C31;&#x5B58;&#x5728;</li>
<li>&#x754C;&#x9762;&#x4E0A;&#x6709;&#x76F8;&#x5173;&#x7684;Window&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x90FD;&#x4F1A;&#x5728;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x4E0A;&#x4F53;&#x73B0;</li>
<li>&#x4E0D;&#x540C;&#x7684;window&#x4F1A;&#x88AB;&#x6302;&#x5728;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x7684;&#x5173;&#x952E;&#x3002;<br>&#x5F53;&#x7136;&#x54EA;&#x4E2A;Window&#x5E94;&#x8BE5;&#x6302;&#x5728;&#x5230;&#x90A3;&#x4E00;&#x5C42;&#xFF0C;&#x600E;&#x4E48;&#x4E2A;&#x5148;&#x540E;&#x987A;&#x5E8F;&#xFF0C;&#x8FD9;&#x4E2A;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x65E0;&#x9700;&#x8FC7;&#x4E8E;&#x5728;&#x610F;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x4EA7;&#x54C1;&#x8BBE;&#x8BA1;&#x3002;</li>
</ol>
<p>tips: &#x53EF;&#x4EE5;&#x8BD5;&#x8BD5;&#x4E0D;&#x540C;Activity&#x542F;&#x52A8;&#x6A21;&#x5F0F;&#x540E;&#x7684;&#x533A;&#x522B;</p>
<h2 id="3-1-&#x7B80;&#x5355;&#x5206;&#x6790;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;"><a href="#3-1-&#x7B80;&#x5355;&#x5206;&#x6790;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;" class="headerlink" title="3.1 &#x7B80;&#x5355;&#x5206;&#x6790;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;"></a>3.1 &#x7B80;&#x5355;&#x5206;&#x6790;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;</h2><p>&#x73B0;&#x5728;&#x6765;&#x5206;&#x6790;&#x4E0A;&#x9762;&#x90A3;&#x4E00;&#x56E2;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x600E;&#x4E48;&#x770B;&#x3002;&#xFF08;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#xFF0C;&#x4ECE;&#x5DE6;&#x5F80;&#x53F3;&#xFF09;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">css&#x590D;&#x5236;&#x4EE3;&#x7801;ROOT type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br><span class="line">  #0 Display 0 name=&quot;Built-in Screen&quot; type=undefined mode=fullscreen override-mode=fullscreen requested-bounds=[0,0][720,1600] bounds=[0,0][720,1600]</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x7684;ROOT &#x8868;&#x793A;&#x6839;&#x8282;&#x70B9;&#xFF0C;&#x6682;&#x65F6;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x3002;&#x4E0B;&#x9762;&#x7684; #0 Display 0 name=&#x201D;Built-in Screen&#x201D;&#x8868;&#x793A;&#x5F53;&#x524D;&#x7684;&#x624B;&#x673A;&#x7684;&#x7B2C;0&#x4E2A;&#x5C4F;&#x5E55;&#xFF0C;&#x76EE;&#x524D;&#x4E5F;&#x53EF;&#x5FFD;&#x7565;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x4E0B;&#x9762;&#x90A3;&#x4E00;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x3002;<br>&#x4E0B;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x867D;&#x7136;&#x5F88;&#x957F;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x4E0D;&#x8981;&#x770B;&#x5168;&#x90E8;&#xFF0C;&#x6293;&#x4F4F;&#x51E0;&#x4E2A;&#x70B9;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4EE5;&#x524D;&#x9762;&#x8FD9;&#x6BB5;&#x4E3A;&#x4F8B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801; #2 Leaf:36:36 type=undefined mode=fullscreen override-mode=undefined requested-bounds=[0,0][0,0] bounds=[0,0][720,1600]</span><br></pre></td></tr></table></figure>

<p><strong>1. &#x770B;&#x6240;&#x5728;&#x4F4D;&#x7F6E; #X</strong></p>
<p>&#x6BCF;&#x4E00;&#x884C;&#x6700;&#x524D;&#x9762;&#x90FD;&#x662F; &#x201C;#+&#x6570;&#x5B57;&#x201D;&#x7684;&#x5F62;&#x5F0F;&#x6253;&#x5934;&#xFF0C;&#x6BD4;&#x5982;&#x73B0;&#x5728;&#x770B;&#x7684;&#x662F; &#x201C;#2 Leaf:36:36&#x201D;&#x8FD9;&#x91CC;&#x7684;&#x6570;&#x5B57;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x56FE;&#x5C42;&#x5728;&#x5F53;&#x524D;&#x7236;&#x5BB9;&#x5668;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;&#x3002;&#x5176;&#x5B9E;&#x548C;ViewGrop&#x6216;&#x8BB8;childView&#x7684;&#x4E00;&#x6837;&#x7684;&#x3002;<br>&#x5F53;&#x524D;&#x8FD9;&#x4E2A;&#x4E3A;#2 &#x6240;&#x4EE5;&#x4ED6;&#x7684;&#x7236;&#x5BB9;&#x5668;&#x4E00;&#x5171;&#x6709;3&#x4E2A;&#x5B50;&#x5BB9;&#x5668;&#xFF0C;&#x5F53;&#x524D;&#x8FD9;&#x4E2A;&#x5904;&#x4E8E;&#x7B2C;&#x4E09;&#x4E2A;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6700;&#x4E0A;&#x9762;&#x3002;&#x90A3;&#x4E48;&#x548C;&#x4ED6;&#x540C;&#x7EA7;&#x7684;&#x53E6;&#x5916;2&#x4E2A;&#x600E;&#x4E48;&#x627E;&#x5462;&#xFF1F;<br>&#x9700;&#x8981;&#x5F80;&#x4E0B;&#x770B;&#xFF0C;&#x627E;&#x5230;&#x548C;&#x5F53;&#x524D; #2 &#x524D;&#x9762;&#x7A7A;&#x683C;&#x4E00;&#x6837;&#x591A;&#x7684;#1 &#x548C;#0 &#x5C31;&#x662F;&#x4ED6;&#x540C;&#x7EA7;&#x7684;2&#x4E2A;&#x5BB9;&#x5668;&#x4E86;&#xFF0C;&#x6309;&#x7167;&#x89C4;&#x5219;&#x80FD;&#x80FD;&#x627E;&#x4E0B;&#x9762;&#x8FD9;2&#x4E2A;&#x4E0E;&#x4ED6;&#x540C;&#x7EA7;&#x7684;&#x3002;<br>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x8BF4;&#x7684;&#x540C;&#x7EA7;&#x5E76;&#x4E0D;&#x662F;&#x5728;&#x540C;&#x4E00;&#x56FE;&#x5C42;&#xFF0C;&#x800C;&#x662F;&#x5728;&#x5C42;&#x7EA7;&#x6811;&#x8FD9;&#x4E2A;&#x6811;&#x7684;&#x7ED3;&#x6784;&#x662F;&#x540C;&#x7EA7;&#x5173;&#x7CFB;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;#1 HideDisplayCutout:32:35</span><br><span class="line">#0 WindowedMagnification:0:31</span><br></pre></td></tr></table></figure>

<p><strong>2. &#x5C42;&#x7EA7;name &#x540D;&#x5B57;+&#x8D77;&#x59CB;&#x5C42;&#x7EA7;&#xFF1A;&#x7ED3;&#x675F;&#x5C42;&#x7EA7;</strong><br>&#x6307;&#x7684;&#x662F; &#x201C;Leaf:36:36&#x201D; &#x8FD9;&#x4E00;&#x6BB5;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E2A;&#x7684;&#x683C;&#x5F0F;&#x4E3A;&#x201C;&#x5BB9;&#x5668;&#x540D; &#x8D77;&#x59CB;&#x5C42;&#x7EA7;:&#x7ED3;&#x675F;&#x5C42;&#x7EA7;&#x201D;<br>&#x4F53;&#x73B0;&#x5728;&#x5F53;&#x524D;&#x5C31;&#x662F;&#x8FD9;&#x4E2A; #2 &#x7684;&#x5BB9;&#x5668;&#x53EB; &#x201C;Leaf&#x201D;,&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#xFF0C;&#x4E3B;&#x8981;&#x770B;&#x540E;&#x9762;&#x7684;&#x9891;&#x7E41;&#x51FA;&#x73B0;&#x7684;HideDisplayCutout&#xFF0C;ImePlaceholder&#xFF0C;OneHanded&#x7B49;&#x8FD9;&#x4E9B;&#xFF0C;&#x90FD;&#x6709;&#x5177;&#x4F53;&#x7684;&#x610F;&#x4E49;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6240;&#x6709;&#x7684;&#x4E1C;&#x897F;&#x5728;&#x6E90;&#x7801;&#x4E2D;&#x90FD;&#x80FD;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7801;&#xFF0C; &#x50CF;&#x63D0;&#x5230;&#x7684;HideDisplayCutout&#xFF0C;ImePlaceholder&#xFF0C;OneHanded&#x5728;&#x6E90;&#x7801;&#x4E2D;&#x79F0;&#x4E4B;&#x4E3A;Feature&#xFF08;&#x7279;&#x5F81;&#xFF09;&#xFF0C;&#x5373;&#x8868;&#x793A;&#x5F53;&#x524D;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x6709;&#x5177;&#x6709;&#x8FD9;&#x4E2A;&#x7279;&#x5F81;&#xFF0C;&#x6682;&#x65F6;&#x77E5;&#x9053;&#x5C31;&#x53EF;&#x4EE5;&#xFF0C;&#x540E;&#x9762;&#x4F1A;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x6E90;&#x7801;&#x5BF9;&#x8FD9;&#x4E9B;Feature&#x7684;&#x5177;&#x4F53;&#x5B9A;&#x4E49;&#x3002;<br>&#x7136;&#x540E;&#x5C31;&#x662F;&#x540E;&#x9762;&#x7684;&#x8D77;&#x59CB;&#x5C42;&#x7EA7;:&#x7ED3;&#x675F;&#x5C42;&#x7EA7;&#xFF0C;&#x56E0;&#x4E3A;&#x867D;&#x7136;&#x4E00;&#x5171;&#x662F;&#x5206;&#x4E3A;37&#x5C42;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x6709;37&#x4E2A;Feature&#xFF0C;&#x6BD4;&#x5982;&#x201C;#1 ImePlaceholder:13:14 &#x201D; ImePlaceholder&#x770B;&#x7740;&#x5C31;&#x662F;&#x548C;&#x8F93;&#x5165;&#x6CD5;&#x76F8;&#x5173;&#xFF0C;&#x90A3;&#x5C31;&#x4EE3;&#x8868;&#x7740;13&#xFF0C;14&#x90FD;&#x662F;&#x548C;&#x8F93;&#x5165;&#x6CD5;&#x76F8;&#x5173;&#x7684;window&#x3002;<br>android 13&#x76EE;&#x524D;&#x4E00;&#x5171;&#x4E5F;&#x53EA;&#x6709;5&#x4E2A;Feature&#x3002;</p>
<p>&#x53E6;&#x5916;&#x63D0;&#x4E00;&#x4E0B;&#x8FD9;&#x91CC;&#x7684; &#x201C;Leaf&#x201D;&#x4EE3;&#x8868;&#x7684;&#x4E0D;&#x662F;Feature&#xFF0C;&#x800C;&#x4E14;&#x8BF4;&#x5F53;&#x524D;&#x662F;&#x67D0;&#x4E2A;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x8981;&#x6302;&#x7740;&#x5177;&#x4F53;Window&#x7684;&#x3002;</p>
<p><strong>3. &#x770B;&#x5176;&#x4ED6;&#x5C5E;&#x6027;&#xFF0C;&#x6BD4;&#x5982;type&#xFF0C;mode</strong></p>
<p>&#x77E5;&#x9053;&#x4E0A;&#x9762;&#x8FD9;4&#x70B9;&#x57FA;&#x672C;&#x4E0A;&#x5C31;&#x80FD;&#x770B;&#x5230;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x7684;&#x4FE1;&#x606F;&#x4E86;&#xFF0C;&#x5185;&#x5BB9;&#x867D;&#x7136;&#x5F88;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x4E3B;&#x8981;&#x5173;&#x5FC3;&#x7684;&#x8FD8;&#x662F;&#x4E0B;&#x9762;&#x201C;#1 DefaultTaskDisplayArea&#x201D;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x653E;&#x7684;&#x624D;&#x662F;&#x5E94;&#x7528;&#x76F8;&#x5173;&#x7684;&#x7A97;&#x53E3;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x7CFB;&#x7EDF;&#x7A97;&#x53E3;&#x3002;&#x50CF;&#x5E94;&#x7528;&#x64CD;&#x4F5C;&#xFF0C;&#x5206;&#x5C4F;&#xFF0C;&#x5C0F;&#x7A97;&#xFF0C;&#x81EA;&#x7531;&#x7A97;&#x53E3;&#x64CD;&#x4F5C;&#x5BFC;&#x81F4;&#x5C42;&#x7EA7;&#x6539;&#x53D8;&#x90FD;&#x4F53;&#x73B0;&#x5728;&#x8FD9;&#x4E00;&#x5C42;&#xFF0C;<br>&#x53E6;&#x5916;&#x53EF;&#x4EE5;&#x7559;&#x610F;&#x4E00;&#x4E0B;&#x5982;&#x679C;&#x662F; WindowToken +WindowState&#x7684;&#x90FD;&#x662F;&#x7CFB;&#x7EDF;&#x7A97;&#x53E3;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x9762;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;        #0 WindowToken{1397896</span><br><span class="line">            #0 d0c3c51 InputMethod</span><br></pre></td></tr></table></figure>

<p>d0c3c51 &#x8FD9;&#x4E2A;&#x5E94;&#x8BE5;&#x662F;WindowState&#x7684;&#x5BF9;&#x8C61;&#x540D;&#xFF0C;&#x540E;&#x9762;&#x7684;InputMethod&#x662F;&#x5177;&#x4F53;&#x7684;&#x7A97;&#x53E3;&#x540D;<br>&#x800C; ActivityRecord+WindowState&#x5C31;&#x662F;&#x5E94;&#x7528;&#x4E86;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;         #0 ActivityRecord{91c971c</span><br><span class="line">            #0 9c20028 com.google.android.dialer</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E9B;&#x6709;&#x4E2A;&#x5370;&#x8C61;&#x5C31;&#x884C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x786C;&#x80CC;&#xFF0C;&#x4EE5;&#x540E;&#x770B;&#x7684;&#x591A;&#x4E86;&#x81EA;&#x7136;&#x5C31;&#x6709;&#x611F;&#x89C9;&#x4E86;&#x3002;</p>
<h2 id="3-2-&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x53EF;&#x89C6;&#x5316;"><a href="#3-2-&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x53EF;&#x89C6;&#x5316;" class="headerlink" title="3.2 &#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x53EF;&#x89C6;&#x5316;"></a>3.2 &#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x53EF;&#x89C6;&#x5316;</h2><p>&#x5355;&#x770B;&#x5C42;&#x7EA7;&#x6811;&#x53EF;&#x80FD;&#x8FC7;&#x4E8E;&#x67AF;&#x71E5;&#xFF0C;&#x5728;&#x521A;&#x5F00;&#x59CB;&#x5B66;&#x4E60;&#x7684;&#x65F6;&#x5019;&#x4E00;&#x822C;&#x90FD;&#x4F1A;&#x6839;&#x636E;&#x4FE1;&#x606F;&#x753B;&#x51FA;&#x4E00;&#x4E2A;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x56FE;&#x3002;<br>&#x9996;&#x5148;&#x6839;&#x636E;&#x524D;&#x9762;&#x770B;dump&#x5185;&#x5BB9;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5148;&#x753B;&#x51FA;&#x4E00;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/7f064a2c04c81528b399c510416a80f2f18f50e59877a88efb553bc46e0cbbdb" alt="&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;&#x7B2C;&#x4E00;&#x5C42;.png"></p>
<p>&#x8FD9;&#x91CC;&#x662F;DisplayContent&#x4E0B;&#x7684;3&#x4E2A;&#x5B69;&#x5B50;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5DF2;&#x7ECF;&#x8986;&#x76D6;&#x4E86; 0-36&#x5C42;&#x3002;<br>&#x7136;&#x540E;&#x6309;&#x7167;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5C06;&#x6240;&#x6709;&#x7684;&#x5185;&#x5BB9;&#x90FD;&#x753B;&#x51FA;&#x6765;&#x5C31;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x4E0B;&#x9762;&#x8FD9;&#x5B8C;&#x6574;&#x7684;&#x6811;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/34c6fd44361be2fc984c575531209401ee4bd6c7c282209a2144eadb8c0320c3" alt="&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#x6811;.png"></p>
<p><strong>&#x5F3A;&#x70C8;&#x5EFA;&#x8BAE;&#x60F3;&#x5B66;&#x8FD9;&#x4E00;&#x5757;&#x7684;&#x540C;&#x5B66;&#x4E00;&#x5B9A;&#x8981;&#x624B;&#x52A8;&#x753B;&#x51FA;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x56FE;</strong></p>
<p>android&#x7248;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x753B;&#x51FA;&#x6765;&#x7684;&#x56FE;&#x57FA;&#x672C;&#x4E0A;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x53EA;&#x4F1A;&#x6839;&#x636E;&#x51FA;&#x73B0;&#x4E0D;&#x540C;&#x7684;Window&#x5728;&#x54CD;&#x5E94;&#x7684;Leaf,&#x4E5F;&#x5C31;&#x662F;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4F1A;&#x6709;&#x4E0D;&#x540C;&#x3002;<br>&#x8FD9;&#x91CC;&#x5C06;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x989C;&#x8272;&#x6D82;&#x4E0A;&#x4E86;&#xFF0C;&#x53D1;&#x73B0;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E0B;&#x8981;&#x4E48;&#x4E3A;&#x7A7A;&#xFF0C;&#x8981;&#x4E48;&#x5C31;&#x662F; WindowToken&#xFF0C;&#x9664;&#x4E86;&#x6700;&#x5E95;&#x5C42;&#x7684;&#x58C1;&#x7EB8;&#xFF0C;&#x5176;&#x5B9E;&#x58C1;&#x7EB8;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E0B;&#x7684;WallpaperWindowToken&#x8FD9;&#x4E2A;&#x7C7B;&#xFF0C;&#x4E5F;&#x662F;&#x7EE7;&#x627F;&#x7684;WindowToken&#x3002;</p>
<p>&#x53EF;&#x80FD;&#x4E4B;&#x524D;&#x901A;&#x8FC7;&#x6587;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x8FD8;&#x6709;&#x70B9;&#x964C;&#x751F;&#xFF0C;&#x4F46;&#x662F;&#x8F6C;&#x6362;&#x6210;&#x56FE;&#x7247;&#x540E;&#xFF0C;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x4E1C;&#x897F;&#x5C31;&#x90FD;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x6BD4;&#x5982;launcher,StatusBar,NavigationBar,Wallpaper</p>
<p>&#x7A97;&#x53E3;&#x6811;&#x548C;View&#x6811;&#x8FD8;&#x662F;&#x6709;&#x5DEE;&#x8DDD;&#x7684;&#xFF0C;View&#x6811;&#x4E0A;&#x90FD;&#x662F;View&#xFF0C;&#x800C;&#x7A97;&#x53E3;&#x6811;&#x4E0A;&#x53EA;&#x6709;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E0A;&#x6302;&#x7740;&#x7A97;&#x53E3;&#xFF0C;&#x5176;&#x4ED6;&#x5927;&#x90FD;&#x90FD;&#x662F;&#x4E00;&#x4E9B;&#x5BB9;&#x5668;&#x548C;&#x4E00;&#x4E9B;&#x3002;</p>
<p>&#x7A97;&#x53E3;&#x6811;&#x662F;&#x56FA;&#x5B9A;37&#x5C42;&#x7684;&#xFF0C; &#x7136;&#x540E;&#x5404;&#x4E2A;&#x56FE;&#x5C42;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x652F;&#x6301;&#x7684;Feature&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x4EE3;&#x7801;&#x4E2D;&#x56FA;&#x5B9A;&#x597D;&#x7684;&#x3002; &#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x5F00;&#x53D1;&#x4E2D;&#x518D;&#x5C06;&#x81EA;&#x5DF1;&#x7684;&#x7A97;&#x53E3;&#x6839;&#x636E;&#x9700;&#x6C42;&#x6302;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E2A;&#x548C;View&#x6811;&#x662F;&#x6709;&#x533A;&#x522B;&#x7684;&#x3002;</p>
<h2 id="3-3-&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BBE;&#x8BA1;"><a href="#3-3-&#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BBE;&#x8BA1;" class="headerlink" title="3.3 &#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BBE;&#x8BA1;"></a>3.3 &#x4E3A;&#x4EC0;&#x4E48;&#x8FD9;&#x4E48;&#x8BBE;&#x8BA1;</h2><p><strong>&#x65B9;&#x4FBF;&#x7BA1;&#x7406;</strong><br>&#x5728;&#x5199;&#x5E94;&#x7528;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x4F1A;&#x8FD9;&#x6837;&#x5B9A;&#x4E49;&#xFF0C;&#x8FD9;&#x6837;&#x5982;&#x679C;&#x8BF4;&#x67D0;&#x4E2A;&#x4E1A;&#x52A1;&#x7684;View&#x65E0;&#x8BBA;&#x600E;&#x4E48;&#x5199;&#xFF0C;&#x4ED6;&#x5C31;&#x53EA;&#x80FD;&#x5728;&#x81EA;&#x5DF1;&#x6240;&#x5728;&#x7684;&#x201C;&#x5C42;&#x7EA7;&#x201D;&#x4E0A;&#x663E;&#x793A;&#xFF0C;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x5176;&#x4ED6;&#x3002;</p>
<p>&#x7A97;&#x53E3;&#x8FD9;&#x6837;&#x8BBE;&#x8BA1;&#x7684;&#x539F;&#x56E0;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x5728;&#x8FDC;&#x53E4;&#x65F6;&#x671F;&#x7A97;&#x53E3;&#x7684;&#x987A;&#x5E8F;&#x597D;&#x50CF;&#x662F;&#x7ECF;&#x8FC7;&#x89C4;&#x5219;&#x8BA1;&#x7B97;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x79CD;&#x8BA1;&#x7B97;&#x5F88;&#x9EBB;&#x70E6;&#x51FA;&#x4E86;&#x95EE;&#x9898;&#x4E5F;&#x4E0D;&#x597D;&#x5B9A;&#x4F4D;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x7684;&#x8FD9;&#x79CD;&#x8BBE;&#x8BA1;&#x5C31;&#x5F88;&#x5408;&#x7406;&#xFF0C;&#x7B26;&#x5408;&#x201C;&#x5355;&#x4E00;&#x539F;&#x5219;&#x201D;&#xFF0C;&#x5404;&#x4E2A;&#x7C7B;&#x578B;&#x7684;&#x7A97;&#x53E3;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x5C42;&#x7EA7;&#x4E0A;&#xFF0C;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x5176;&#x4ED6;&#x3002;</p>
<p><strong>&#x65B9;&#x4FBF;&#x529F;&#x80FD;&#x5F00;&#x53D1;</strong><br>&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x4F18;&#x70B9;&#x6211;&#x8BA4;&#x4E3A;&#x662F;&#x8FD9;&#x79CD;&#x8BBE;&#x8BA1;&#x4E3A;&#x5C0F;&#x7A97;&#xFF0C;&#x5206;&#x5C4F;&#x8FD9;&#x79CD;&#x529F;&#x80FD;&#x63D0;&#x4F9B;&#x4E86;&#x5F00;&#x53D1;&#x7684;&#x4FBF;&#x5229;&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x5BF9;&#x5E94;&#x7684;&#x7A97;&#x53E3;&#x79FB;&#x52A8;&#x5230;&#x6240;&#x5728;&#x7684;Task&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<p>&#x50CF;&#x73B0;&#x5728;&#x7684;Activity&#x542F;&#x52A8;&#xFF0C;&#x5728;system_service&#x8FDB;&#x7A0B;&#x7684;&#x5904;&#x7406;&#x7684;&#x5F88;&#x591A;&#x903B;&#x8F91;&#x90FD;&#x662F;&#x56F4;&#x7ED5;&#x7740;&#x8FD9;&#x4E2A;&#x5C42;&#x7EA7;&#x6811;&#x6765;&#x505A;&#x7684;&#x3002;<br>&#x6BD4;&#x5982;&#x770B;&#x4E00;&#x773C;&#x201C;&#x7535;&#x8BDD;&#x201D;&#x548C;&#x201C;&#x77ED;&#x4FE1;&#x201D;2&#x4E2A;&#x5E94;&#x7528;&#x8FDB;&#x884C;&#x5206;&#x5C4F;&#x64CD;&#x4F5C;&#x7684;&#x524D;&#x540E;&#x5BF9;&#x6BD4;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/649464f62949ca7a6eee126a5893d57b98df0eb6f75bf12e9e206e8875fa454e" alt="&#x5206;&#x5C4F;&#x524D;&#x540E;&#x5BB9;&#x5668;&#x5BF9;&#x6BD4;.png"></p>
<p>&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;</p>
<ol>
<li>Task=5,6 &#x8FD9;2&#x4E2A;Task&#x662F;&#x5206;&#x5C4F;&#x7528;&#x5230;&#x7684;Task,&#x5B83;&#x4EEC;&#x6709;&#x5171;&#x540C;&#x7684;&#x7236;&#x4EB2;&#x2013; Task =4&#x3002; &#x8FD9;3&#x4E2A;Task &#x5728;&#x5F00;&#x673A;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x521B;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x9ED8;&#x8BA4;&#x5728;DefaultTaskDisplayArea&#x5B69;&#x5B50;&#x91CC;&#x662F;&#x6700;&#x540E;&#x9762;&#x3002;</li>
<li>&#x542F;&#x52A8;&#x5206;&#x5C4F;&#x540E;&#x5176;&#x5B9E;&#x5BF9;&#x5E94;&#x7A97;&#x53E3;&#x5BB9;&#x5668;&#x8FD9;&#x8FB9;&#x505A;&#x4E86;2&#x4EF6;&#x4E8B;<ol>
<li>&#x5C06;Task=4 &#x79FB;&#x5230;&#x6808;&#x9876;</li>
<li>&#x5C06;2&#x4E2A;&#x5206;&#x5C4F;&#x5E94;&#x7528;&#x7684;Task&#x5206;&#x522B;&#x79FB;&#x5230;&#x5230;Task5,6 &#x4E0B;</li>
</ol>
</li>
</ol>
<p>&#x8FD9;&#x6837;&#x5206;&#x5C4F;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/88c35e9a0596d0163dc5e878784264b6.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7339709247750242355.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7339709247750242355.html" itemprop="url">一次线上Xxl-Job定时任务调度失败的排查与解决 问题 调</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-26T14:55:33+08:00">
                2024-02-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x95EE;&#x9898;"><a href="#&#x95EE;&#x9898;" class="headerlink" title="&#x95EE;&#x9898;"></a>&#x95EE;&#x9898;</h1><p><strong>&#x573A;&#x666F;</strong>&#xFF1A;&#x6BCF;&#x9694;&#x4E00;&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x7684;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;<br><strong>&#x73B0;&#x8C61;</strong>&#xFF1A;&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x5EA6;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x5EA6;<strong>&#x5FC5;&#x4F1A;&#x5931;&#x8D25;</strong>&#x3002;&#x4F46;&#x662F;&#x7B49;&#x5F85;&#x7B2C;&#x4E09;&#x6B21;&#x8C03;&#x5EA6;&#x540E;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;<strong>&#x5374;&#x662F;&#x7B2C;&#x4E09;&#x6B21;&#x8C03;&#x5EA6;</strong>&#x7684;&#x65F6;&#x95F4;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/46e29915a414c58b224dcdb26e9c7424ab3cdbabdc9fb241091bc2bf08835149" alt="image.png"><br>&#x5947;&#x602A;&#x7684;&#x662F;&#xFF0C;&#x53EA;&#x6709;&#x6BCF;&#x9694;&#x4E00;&#x5206;&#x949F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x7684;&#x4EFB;&#x52A1;&#x624D;&#x4F1A;&#x8FD9;&#x6837;&#xFF0C;&#x5176;&#x4ED6;&#x95F4;&#x9694;&#x4E00;&#x79D2;&#x6216;&#x8005;&#x4E00;&#x5C0F;&#x65F6;&#x7684;&#x53C8;&#x4E0D;&#x4F1A;&#x6709;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x3002;<br>&#x67D0;&#x6B21;&#x8C03;&#x5EA6;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/74c68d742c9a35f9ea1952af67564d6ddb12983a609dc40e4c41dfb367813204" alt="image.png"></p>
<h1 id="&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x8C03;&#x5EA6;&#x539F;&#x7406;"><a href="#&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x8C03;&#x5EA6;&#x539F;&#x7406;" class="headerlink" title="&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x8C03;&#x5EA6;&#x539F;&#x7406;"></a>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x8C03;&#x5EA6;&#x539F;&#x7406;</h1><blockquote>
<p>&#x7EBF;&#x4E0A;xxl-job&#x7248;&#x672C;&#xFF1A;2.2.0-SNAPSHOT</p>
</blockquote>
<p>&#x5728;&#x6392;&#x67E5;&#x539F;&#x56E0;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x770B;&#x4E86;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684;&#x6E90;&#x7801;&#xFF0C;&#x5BF9;&#x4EFB;&#x52A1;&#x7684;&#x8C03;&#x5EA6;&#x4EE5;&#x53CA;&#x6267;&#x884C;&#x6709;&#x4E86;&#x4E00;&#x4E9B;&#x4E86;&#x89E3;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9d652178e4dfa167f6dc55bd5a3ed10e2f41a32cdf15303049e1000c36453559" alt="image.png"><br>&#x6267;&#x884C;&#x5668;&#x5185;&#x90E8;&#x4F1A;&#x5F00;&#x542F;&#x4E00;&#x4E2A;http&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x63A5;&#x53D7;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x3002;&#x6BCF;&#x6B21;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x590D;&#x7528;Http&#x8FDE;&#x63A5;&#xFF0C;&#x907F;&#x514D;&#x591A;&#x6B21;&#x8FDE;&#x63A5;&#x6D88;&#x8017;&#x8D44;&#x6E90;&#x3002;<br>&#x8C03;&#x5EA6;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ol>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x4ECE;&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x83B7;&#x53D6;&#x8FDE;&#x63A5;</li>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x53D1;&#x9001;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#xFF08;&#x5E26;&#x6709;<strong>RequestId</strong>&#xFF0C;<strong>JobLogId</strong>&#xFF09;&#xFF0C;&#x5E76;&#x963B;&#x585E;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x6267;&#x884C;&#x5668;&#x54CD;&#x5E94;</li>
<li>&#x6267;&#x884C;&#x5668;&#x8FD4;&#x56DE;&#x8C03;&#x5EA6;&#x54CD;&#x5E94;&#xFF0C;&#x5E76;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;</li>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x6536;&#x5230;&#x8C03;&#x5EA6;&#x54CD;&#x5E94;&#xFF0C;&#x6839;&#x636E;&#x56DE;&#x4F20;&#x7684;<strong>RequestId</strong>&#xFF0C;&#x56DE;&#x5199;&#x6570;&#x636E;&#x5E93;&#x8C03;&#x53D6;&#x72B6;&#x6001;&#x3002;</li>
<li>&#x6267;&#x884C;&#x5668;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x56DE;&#x8C03;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x66F4;&#x65B0;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x72B6;&#x6001;&#x63A5;&#x53E3;&#xFF0C;&#x6839;&#x636E;<strong>JobLogId</strong>&#x56DE;&#x5199;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x60C5;&#x51B5;&#x3002;</li>
</ol>
<h1 id="&#x6839;&#x636E;&#x5F02;&#x5E38;&#x5806;&#x8F7D;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;"><a href="#&#x6839;&#x636E;&#x5F02;&#x5E38;&#x5806;&#x8F7D;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;" class="headerlink" title="&#x6839;&#x636E;&#x5F02;&#x5E38;&#x5806;&#x8F7D;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;"></a>&#x6839;&#x636E;&#x5F02;&#x5E38;&#x5806;&#x8F7D;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;</h1><p>&#x6839;&#x636E;&#x5F02;&#x5E38;&#x5806;&#x6808;<code>XxlRpcFutureResponse.java:117</code>&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x4F4D;&#x4E8E;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x540E;&#xFF0C;&#x4ECE;Future&#x83B7;&#x53D6;&#x5F02;&#x6B65;&#x7ED3;&#x679C;&#x7684;get&#x65B9;&#x6CD5;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/fbe2df9ba6d1125d6f80e711f24fa09178f8172aa56e1bdb8ec941ecbc424089" alt="image.png"><br>futureResponse&#x7684;get&#x65B9;&#x6CD5;&#x7684;&#x903B;&#x8F91;&#x662F;<strong>&#x4F11;&#x7720;&#x8C03;&#x5EA6;&#x7EBF;&#x7A0B;</strong>&#xFF08;&#x9ED8;&#x8BA4;&#x4F11;&#x7720;1&#x79D2;&#xFF09;&#xFF0C;&#x7B49;&#x5F85;&#x6267;&#x884C;&#x5668;&#x54CD;&#x5E94;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x3002;&#x7EBF;&#x7A0B;&#x88AB;&#x5524;&#x9192;&#x540E;&#x53BB;&#x68C0;&#x67E5;&#x672C;&#x6B21;&#x8C03;&#x5EA6;&#x662F;&#x5426;&#x5B8C;&#x6210;&#xFF0C;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x5B8C;&#x6210;&#xFF0C;&#x5C31;&#x629B;&#x51FA;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#x7684;&#x9519;&#x8BEF;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/5cae64badedbbff247722d4bf89db7816aa1c941c5cf3da721b2696cda9b7808" alt="image.png"><br>&#x4ECE;&#x4E0A;&#x9762;&#x903B;&#x8F91;&#x53EF;&#x4EE5;&#x63A8;&#x65AD;&#x51FA;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x662F;<strong>&#x6210;&#x529F;&#x53D1;&#x9001;&#x8C03;&#x7528;&#x8BF7;&#x6C42;</strong>&#x51FA;&#x53BB;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x6267;&#x884C;&#x5668;<strong>&#x6CA1;&#x6709;&#x54CD;&#x5E94;</strong>&#x5BFC;&#x81F4;&#x7684;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#x9519;&#x8BEF;&#x3002;<br>&#x90A3;&#x4E48;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x6267;&#x884C;&#x5668;&#x6CA1;&#x6709;&#x54CD;&#x5E94;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x5C31;&#x5F97;&#x53BB;&#x770B;&#x770B;&#x6267;&#x884C;&#x5668;&#x90A3;&#x8FB9;&#x7684;&#x60C5;&#x51B5;&#x4E86;&#x3002;</p>
<hr>
<p>&#x7531;&#x4E8E;xxl-job&#x4E2D;&#x5904;&#x7406;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x7684;Netty&#x5904;&#x7406;&#x5668;&#x5E76;&#x6CA1;&#x6709;&#x6253;&#x5370;&#x5177;&#x4F53;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x8981;&#x4F7F;&#x7528;<strong>Arthas</strong>&#x6765;&#x89C2;&#x5BDF;Netty&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7684;&#x6267;&#x884C;&#x60C5;&#x51B5;&#x4E86;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/e38c821dbfe0ce4953745dc7a2d99c0fd46e2783b2bdd04736c68c6f1ccc4b39" alt="image.png"></p>
<h1 id="&#x4F7F;&#x7528;Arthas&#x89C2;&#x5BDF;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x6267;&#x884C;&#x60C5;&#x51B5;"><a href="#&#x4F7F;&#x7528;Arthas&#x89C2;&#x5BDF;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x6267;&#x884C;&#x60C5;&#x51B5;" class="headerlink" title="&#x4F7F;&#x7528;Arthas&#x89C2;&#x5BDF;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x6267;&#x884C;&#x60C5;&#x51B5;"></a>&#x4F7F;&#x7528;Arthas&#x89C2;&#x5BDF;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x6267;&#x884C;&#x60C5;&#x51B5;</h1><p>&#x4F7F;&#x7528;arthas&#x7684;watch&#x547D;&#x4EE4;&#x89C2;&#x5BDF;&#x6267;&#x884C;&#x5668;&#x63A5;&#x6536;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x60C5;&#x51B5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;watch com.xxl.rpc.remoting.net.impl.netty_http.server.NettyHttpServerHandler channelRead0 &apos;{params}&apos; -x 2</span><br></pre></td></tr></table></figure>

<h2 id="&#x5206;&#x6790;&#x65E5;&#x5FD7;"><a href="#&#x5206;&#x6790;&#x65E5;&#x5FD7;" class="headerlink" title="&#x5206;&#x6790;&#x65E5;&#x5FD7;"></a>&#x5206;&#x6790;&#x65E5;&#x5FD7;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a317821e506c9a2b834451b8513d4be513489eaa02e7a22fc37fd67852136a6b" alt="image.png"><br>&#x6574;&#x7406;&#x4E00;&#x4E0B;&#x65E5;&#x5FD7;&#xFF0C;&#x5728;&#x95EE;&#x9898;&#x4EA7;&#x751F;&#x7684;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x6267;&#x884C;&#x5668;&#x8FD9;&#x8FB9;&#x7684;Netty&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x53EA;&#x6536;&#x5230;&#x4E86;&#x4E09;&#x4E2A;&#x8BF7;&#x6C42;</p>
<table>
<thead>
<tr>
<th>&#x65F6;&#x95F4;&#x70B9;</th>
<th>channel&#x8FDC;&#x7A0B;&#x5730;&#x5740;&#x4FE1;&#x606F;</th>
<th>&#x8BF7;&#x6C42;&#x4FE1;&#x606F;</th>
</tr>
</thead>
<tbody><tr>
<td>18:02:00</td>
<td>R:/127.0.0.6:41163</td>
<td>POST / HTTP/1.1;content-length: 626</td>
</tr>
<tr>
<td>18:02:30</td>
<td>R:/127.0.0.6:41163</td>
<td>POST / HTTP/1.1;content-length: 159</td>
</tr>
<tr>
<td>18:04:00</td>
<td>R:/127.0.0.6:52551</td>
<td>POST / HTTP/1.1;content-length: 626</td>
</tr>
</tbody></table>
<p>&#x8C03;&#x7528;&#x65E5;&#x5FD7;&#x4E2D;&#xFF0C;&#x6709;&#x4E24;&#x4E2A;&#x70B9;&#x6BD4;&#x8F83;&#x5947;&#x602A;</p>
<ol>
<li><strong>18:02:30&#x6536;&#x5230;&#x4E86;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;</strong></li>
</ol>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6536;&#x5230;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x7684;&#x5462;&#xFF1F;&#x800C;&#x4E14;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x8BF7;&#x6C42;&#x5927;&#x5C0F;&#x4E0E;&#x6B63;&#x5E38;&#x7684;&#x8C03;&#x7528;&#x8BF7;&#x6C42;&#x7684;&#x5927;&#x5C0F;&#x8FD8;&#x4E00;&#x6837;&#xFF0C;&#x4EC5;&#x6709;159&#x5B57;&#x8282;&#x3002;&#x8FD9;&#x4E48;&#x5C0F;&#x7684;&#x8BF7;&#x6C42;&#x4F53;&#xFF0C;&#x8BA9;&#x6211;&#x60F3;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;&#xFF1A;<strong>&#x5FC3;&#x8DF3;&#x5305;</strong>&#x3002;<br>&#x5728;RPC&#x6846;&#x67B6;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x76D1;&#x6D4B;&#x901A;&#x4FE1;&#x901A;&#x9053;&#x7684;&#x6B63;&#x5E38;&#x4EE5;&#x53CA;&#x8282;&#x70B9;&#x7684;&#x5065;&#x5EB7;&#xFF0C;&#x4F1A;&#x5B9A;&#x65F6;&#x5411;&#x8282;&#x70B9;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5305;&#xFF0C;&#x7528;&#x4E8E;&#x5224;&#x65AD;&#x901A;&#x9053;&#x662F;&#x5426;&#x6B63;&#x5E38;&#x8FDE;&#x63A5;&#x3002;<br>&#x867D;&#x7136;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x4E0E;&#x6267;&#x884C;&#x5668;&#x7528;&#x7684;&#x662F;Http&#x8BF7;&#x6C42;&#xFF0C;&#x4F46;&#x662F;<code>xxl-job</code>&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x4E8E;&#x662F;&#x4E5F;&#x5F15;&#x5165;&#x4E86;&#x5FC3;&#x8DF3;&#x76D1;&#x6D4B;&#x3002;&#x5F53;&#x901A;&#x9053;&#x5728;30&#x79D2;&#x5185;&#x6CA1;&#x6709;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5C31;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/8b2fd3532d537fd84248b36df0dca42612d44b247faa06990d0f113b366770fe" alt="image.png"><br>&#x5728;&#x6267;&#x884C;&#x5668;&#x4E5F;&#x80FD;&#x770B;&#x5230;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x7684;&#x65E5;&#x5FD7;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/884995201d3d59a366d733f33d72eb281593a3efab2da03d53495d2e497b87b5" alt="image.png"><br>&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x6709;&#x70B9;&#x5947;&#x602A;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x53EA;&#x5728;18:02:30&#x5206;&#x6536;&#x5230;&#x5462;&#xFF1F;18:03:30&#x6CA1;&#x6709;&#x6536;&#x5230;&#x5462;&#xFF1F;<br>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x8DDF;&#x4E0B;&#x9762;&#x7684;&#x95EE;&#x9898;&#x6709;&#x6240;&#x5173;&#x8054;&#x4E86;&#x3002;</p>
<ol start="2">
<li><strong>channel&#x8FDC;&#x7A0B;&#x5730;&#x5740;&#x7684;IP&#x4E0D;&#x592A;&#x5BF9;&#x52B2;&#xFF0C;&#x5C45;&#x7136;&#x662F;&#x672C;&#x5730;&#x5730;&#x5740;&#x5E76;&#x975E;&#x662F;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7684;&#x5730;&#x5740;</strong></li>
</ol>
<p>&#x7ECF;&#x6211;&#x4E86;&#x89E3;&#x540E;&#xFF0C;&#x516C;&#x53F8;&#x7684;K8S&#x73AF;&#x5883;&#x4E2D;&#x5F15;&#x5165;&#x4E86;<code>Istio</code>&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#xFF0C;&#x5176;&#x4E2D;&#x8FDB;&#x51FA;Pod&#x7684;&#x6D41;&#x91CF;&#x90FD;&#x4F1A;&#x88AB;Envoy&#x4EE3;&#x7406;&#xFF0C;&#x6240;&#x4EE5;<code>127.0.0.6</code>&#x6B63;&#x662F;<strong>Envoy</strong>&#x7684;IP&#x5730;&#x5740;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0181dd02a783bcfaee162117f9ab7d499b519cfe688730538d04ca122ef4e432" alt="image.png"></p>
<blockquote>
<p>Envoy&#x662F;&#x4E00;&#x4E2A;&#x7531;Lyft&#x5F00;&#x53D1;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x4EE3;&#x7406;&#xFF08;Proxy&#xFF09;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x7684;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x3002;&#x5B83;&#x88AB;&#x8BBE;&#x8BA1;&#x6210;&#x53EF;&#x7528;&#x4E8E;&#x591A;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x90E8;&#x7F72;&#x573A;&#x666F;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#x96C6;&#xFF0C;&#x5982;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3001;&#x6D41;&#x91CF;&#x8DEF;&#x7531;&#x3001;&#x6545;&#x969C;&#x6062;&#x590D;&#x3001;&#x5B89;&#x5168;&#x8BA4;&#x8BC1;&#x7B49;&#x3002;</p>
</blockquote>
<h2 id="&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x60C5;&#x51B5;"><a href="#&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x60C5;&#x51B5;" class="headerlink" title="&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x60C5;&#x51B5;"></a>&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x60C5;&#x51B5;</h2><p>&#x6536;&#x96C6;&#x65E5;&#x5FD7;&#x7684;&#x65F6;&#x95F4;&#x6BB5;&#x6B63;&#x597D;&#x5904;&#x4E8E;&#x95EE;&#x9898;&#x53D1;&#x751F;&#x7684;&#x4E00;&#x4E2A;&#x533A;&#x95F4;&#x5185;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x6BB5;&#x5185;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x60C5;&#x51B5;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0dfc5d12ff0206a066739f33d0c64c25a4a540a61402218e41ab4ad0f41ea319" alt="image.png"></p>
<ol>
<li>18:02&#x5206;&#x7684;&#x4EFB;&#x52A1;&#x6B63;&#x5E38;&#x8C03;&#x5EA6;&#x5E76;&#x6267;&#x884C;&#x6210;&#x529F;&#x4E86;&#x3002;</li>
<li>18:03&#x5206;&#x7684;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x7684;&#x56DE;&#x586B;&#x662F;&#x7531;&#x6267;&#x884C;&#x5668;&#x9488;&#x5BF9;JobLogId&#x6765;&#x8FDB;&#x884C;&#x5339;&#x914D;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x80FD;&#x5F97;&#x51FA;&#x4E00;&#x4E2A;&#x7ED3;&#x8BBA;03&#x5206;&#x53D1;&#x9001;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#xFF0C;&#x6267;&#x884C;&#x5668;&#x5728;04&#x5206;&#x6536;&#x5230;&#x4E86;&#x5E76;&#x89E6;&#x53D1;&#x4E86;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x3002;</li>
<li>18:04&#x5206;&#x7684;&#x4EFB;&#x52A1;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#xFF0C;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x60C5;&#x51B5;&#x3002;</li>
</ol>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x622A;&#x81F3;&#x76EE;&#x524D;&#x80FD;&#x5F97;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;</p>
<ol>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x4F1A;&#x5728;&#x901A;&#x9053;30&#x79D2;&#x5185;&#x6CA1;&#x6709;&#x8BFB;&#x5199;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5411;&#x5404;&#x4E2A;&#x6267;&#x884C;&#x5668;&#x53D1;&#x9001;&#x4E00;&#x4E2A;<strong>&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;</strong>&#x3002;</li>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x53D1;&#x9001;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x540E;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x90FD;<strong>&#x65E0;&#x6CD5;&#x8FDB;&#x5165;&#x6267;&#x884C;&#x5668;</strong>&#x4E2D;&#x3002;</li>
<li>&#x56E0;&#x4E3A;&#x6267;&#x884C;&#x5668;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x5728;K8S&#x4E2D;&#xFF0C;&#x800C;&#x4E14;K8S&#x4E2D;&#x5F15;&#x5165;&#x4E86;<code>Istio</code>&#xFF0C;&#x5BFC;&#x81F4;&#x8FDB;&#x5165;Pod&#x7684;&#x6D41;&#x91CF;&#x90FD;&#x4F1A;&#x88AB;<strong>Envoy&#x4EE3;&#x7406;</strong>&#x3002;</li>
<li>&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x5EA6;&#x867D;&#x7136;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x5728;&#x7B2C;&#x4E09;&#x6B21;&#x8C03;&#x5EA6;&#x65F6;&#x88AB;&#x6267;&#x884C;&#x5668;&#x6210;&#x529F;&#x63A5;&#x6536;&#x5E76;&#x5904;&#x7406;&#x3002;</li>
</ol>
<p>&#x597D;&#x50CF;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x7A81;&#x7834;&#x70B9;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x771F;&#x6B63;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7740;&#x91CD;&#x53BB;&#x770B;&#x770B;<strong>Envoy</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x76EE;&#x524D;&#x8FDB;&#x5165;&#x5230;Pod&#x7684;&#x6D41;&#x91CF;&#x90FD;&#x4F1A;&#x88AB;&#x5B83;&#x7ED9;&#x4EE3;&#x7406;&#xFF0C;&#x53BB;&#x89C2;&#x5BDF;&#x4E00;&#x4E0B;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#x53D1;&#x751F;&#x65F6;Envoy&#x7684;&#x65E5;&#x5FD7;&#x3002;</p>
<h1 id="Envoy&#x65E5;&#x5FD7;"><a href="#Envoy&#x65E5;&#x5FD7;" class="headerlink" title="Envoy&#x65E5;&#x5FD7;"></a>Envoy&#x65E5;&#x5FD7;</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;[2024-02-21T18:02:00.026Z] &quot;POST / HTTP/1.1&quot; 200 - via_upstream - &quot;-&quot; 626 176 1 0 &quot;-&quot; &quot;-&quot; &quot;d9313e61-6530-4c08-aae2-fd864930ea31&quot; &quot;ebc-portal.ebc-bpm.svc.cluster.local&quot; &quot;10.64.195.45:7666&quot; inbound|7666|| 127.0.0.6:48733 10.64.195.45:7666 10.64.217.207:45584 - default</span><br><span class="line">[2024-02-21T18:02:30.055Z] &quot;POST / HTTP/1.1&quot; 503 UC upstream_reset_before_response_started{connection_termination} - &quot;-&quot; 159 95 90031 - &quot;-&quot; &quot;-&quot; &quot;3de88bd6-41cf-4078-a381-3542b460dd90&quot; &quot;ebc-portal.ebc-bpm.svc.cluster.local&quot; &quot;10.64.195.45:7666&quot; inbound|7666|| 127.0.0.6:48733 10.64.195.45:7666 10.64.217.207:45584 - default</span><br><span class="line">[2024-02-21T18:04:00.087Z] &quot;POST / HTTP/1.1&quot; 200 - via_upstream - &quot;-&quot; 626 176 1 0 &quot;-&quot; &quot;-&quot; &quot;25dac8f9-8364-42bd-8fdd-d08285ed1632&quot; &quot;ebc-portal.ebc-bpm.svc.cluster.local&quot; &quot;10.64.195.45:7666&quot; inbound|7666|| 127.0.0.6:39739 10.64.195.45:7666 10.64.217.207:45584 - default</span><br><span class="line">[2024-02-21T18:04:00.088Z] &quot;POST / HTTP/1.1&quot; 0 DC downstream_remote_disconnect - &quot;-&quot; 159 0 1 - &quot;-&quot; &quot;-&quot; &quot;bfa7dcee-123f-4582-9368-84edcb8476c7&quot; &quot;ebc-portal.ebc-bpm.svc.cluster.local&quot; &quot;10.64.195.45:7666&quot; inbound|7666|| 127.0.0.6:39739 10.64.195.45:7666 10.64.217.207:45584 - default</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x6BD4;&#x8F83;&#x5F02;&#x5E38;&#x7684;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x6709;&#x4E24;&#x6BB5;&#x5206;&#x522B;&#x662F;18:02:30&#x4EE5;&#x53CA;&#x7B2C;&#x4E8C;&#x4E2A;18:04:00&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x54CD;&#x5E94;&#x7801;&#x90FD;&#x4E0D;&#x662F;&#x6B63;&#x5E38;&#x7684;<code>200</code>&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x5F02;&#x5E38;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<h2 id="&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E00;"><a href="#&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E00;" class="headerlink" title="&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E00;"></a>&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E00;</h2><blockquote>
<p>[2024-02-21T18:02:30.055Z] &#x201C;POST / HTTP/1.1&#x201D; 503 UC upstream_reset_before_response_started{connection_termination} - &#x201C;-&#x201C; 159 95 90031 - &#x201C;-&#x201C; &#x201C;-&#x201C; &#x201C;3de88bd6-41cf-4078-a381-3542b460dd90&#x201D; &#x201C;ebc-portal.ebc-bpm.svc.cluster.local&#x201D; &#x201C;10.64.195.45:7666&#x201D; inbound|7666|| 127.0.0.6:48733 10.64.195.45:7666 10.64.217.207:45584 - default</p>
</blockquote>
<p>&#x63D0;&#x53D6;&#x4E00;&#x4E0B;&#x6BD4;&#x8F83;&#x5173;&#x952E;&#x7684;&#x65E5;&#x5FD7;&#x7FFB;&#x8BD1;&#x4E00;&#x4E0B;&#x3002;</p>
<ul>
<li>&#x201C;2024-02-21T18:02:30&#x201D;&#xFF1A;&#x8BF7;&#x6C42;&#x5230;&#x8FBE;Envoy&#x65F6;&#x95F4;</li>
<li>&#x201C;503&#x201D; &#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x6700;&#x7EC8;&#x7684;&#x54CD;&#x5E94;&#x7801;</li>
<li>&#x201C;UC upstream_reset_before_response_started{connection_termination}&#x201D;&#xFF1A;<code>UC</code>&#x4EE3;&#x8868;<strong>Upstream Connection</strong>&#xFF0C;&#x4E0A;&#x6E38;&#x670D;&#x52A1;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x95EE;&#x9898;&#x4FE1;&#x606F;&#x4E3A;&#x4E0A;&#x6E38;&#x670D;&#x52A1;&#x5728;&#x54CD;&#x5E94;&#x4E4B;&#x524D;&#x91CD;&#x7F6E;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;<strong>&#x8FDE;&#x63A5;&#x88AB;&#x7EC8;&#x6B62;</strong>&#x4E86;&#x3002;</li>
<li>&#x201C;159 95 90031 -&#x201C;&#xFF1A;159&#x662F;&#x8BF7;&#x6C42;&#x4F53;&#x5927;&#x5C0F;&#xFF0C;&#x8BF4;&#x660E;&#x662F;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#xFF1B;95&#x662F;&#x54CD;&#x5E94;&#x4F53;&#x5927;&#x5C0F;&#xFF1B;90031&#x662F;&#x8BF7;&#x6C42;&#x4ECE; Envoy &#x5230;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;</li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x6BD4;&#x8F83;&#x5F02;&#x5E38;&#x7684;&#x70B9;&#x6709;&#x4E09;&#x4E2A;&#xFF1A;</p>
<ol>
<li><strong>&#x8FD4;&#x56DE;&#x4E86;</strong><code>503</code><strong>&#x54CD;&#x5E94;&#x7801;</strong></li>
</ol>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x8FD4;&#x56DE;503&#x54CD;&#x5E94;&#x7801;&#x5462;&#xFF1F;&#x6211;&#x770B;&#x4E86;&#x4E00;&#x4E0B;&#x6267;&#x884C;&#x5668;&#x7684;Netty&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x4E2D;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x8FD4;&#x56DE;503&#x72B6;&#x6001;&#x7801;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;503&#x54CD;&#x5E94;&#x7801;&#x5C31;&#x53EF;&#x80FD;&#x662F;Envoy&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x3002;<br>&#x6211;&#x4FEE;&#x6539;&#x4E86;&#x4E00;&#x4E0B;Envoy&#x65E5;&#x5FD7;&#x7B49;&#x7EA7;&#xFF0C;&#x627E;&#x5230;&#x672C;&#x6B21;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;Debug&#x7B49;&#x7EA7;&#x7684;&#x65E5;&#x5FD7;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">lua&#x590D;&#x5236;&#x4EE3;&#x7801;2024-02-21T18:02:30.846361Z debug envoy router [C32432][S12678816626782510759] cluster &apos;inbound|7666||&apos; match for URL &apos;/&apos;</span><br><span class="line">2024-02-21T18:02:30.846396Z debug envoy router [C32432][S12678816626782510759] router decoding headers:</span><br><span class="line">&apos;:authority&apos;, &apos;ebc-portal.ebc-bpm.svc.cluster.local&apos;</span><br><span class="line">&apos;:path&apos;, &apos;/&apos;</span><br><span class="line">&apos;:method&apos;, &apos;POST&apos;</span><br><span class="line">&apos;:scheme&apos;, &apos;http&apos;</span><br><span class="line">&apos;content-length&apos;, &apos;159&apos;</span><br><span class="line">&apos;x-forwarded-proto&apos;, &apos;http&apos;</span><br><span class="line">&apos;x-request-id&apos;, &apos;ab261a30-679c-403d-be2b-12b161810f28&apos;</span><br><span class="line">2024-02-21T18:02:30.846434Z debug envoy router [C32432][S12678816626782510759] pool ready</span><br><span class="line">2024-02-21T18:02:30.846469Z debug envoy http [C32432][S12678816626782510759] request end stream</span><br><span class="line">2024-02-21T18:04:00.877035Z debug envoy router [C32432][S12678816626782510759] upstream reset: reset reason: connection termination, transport failure reason:</span><br><span class="line">2024-02-21T18:04:00.877095Z debug envoy http [C32432][S12678816626782510759] Sending local reply with details upstream_reset_before_response_started{connection_termination}</span><br><span class="line">2024-02-21T18:04:00.877148Z debug envoy http [C32432][S12678816626782510759] encoding headers via codec (end_stream=false):</span><br><span class="line">&apos;:status&apos;, &apos;503&apos;</span><br><span class="line">&apos;content-length&apos;, &apos;95&apos;</span><br><span class="line">&apos;content-type&apos;, &apos;text/plain&apos;</span><br><span class="line">&apos;date&apos;, &apos;Mon, 21 Feb 2024 18:04:00 GMT&apos;</span><br><span class="line">&apos;server&apos;, &apos;istio-envoy&apos;</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x8FD9;&#x884C;&#x65E5;&#x5FD7;&#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;</p>
<blockquote>
<p>Sending local reply with details upstream_reset_before_response_started{connection_termination}</p>
</blockquote>
<p>&#x672C;&#x6B21;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x4ECE;<code>18:02:30</code>&#x8BF7;&#x6C42;&#x8FDB;&#x6765;&#xFF0C;<code>18:04:00</code>Envoy&#x53D1;&#x73B0;&#x4E0A;&#x6E38;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x7EC8;&#x6B62;&#xFF0C;&#x4E8E;&#x662F;&#x81EA;&#x5DF1;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;<code>503</code>&#x54CD;&#x5E94;&#x7801;&#x7684;&#x54CD;&#x5E94;&#x4F53;&#x8FD4;&#x56DE;&#x7ED9;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x3002;</p>
<ol start="2">
<li><strong>&#x8BF7;&#x6C42;&#x65F6;&#x95F4;90031&#x6BEB;&#x79D2;</strong></li>
</ol>
<p>&#x672C;&#x6B21;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x65F6;&#x95F4;&#x592A;&#x957F;&#x4E86;&#xFF0C;&#x627E;&#x4E86;&#x4E00;&#x4E0B;&#x6267;&#x884C;&#x5668;&#x4E2D;Netty&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x5668;&#x5BF9;&#x4E8E;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x53D1;&#x73B0;<code>xxl-job</code>&#x5728;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x662F;<strong>&#x4E0D;&#x4F1A;&#x5BF9;&#x5FC3;&#x8DF3;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;</strong>&#x7684;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/60de4ed4e6f3629832b3b7cafa3b481280b0e68ea6552d816e36d7952553ec66" alt="image.png"><br>&#x5BFC;&#x81F4;&#x4E00;&#x76F4;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;Http&#x54CD;&#x5E94;&#xFF0C;&#x800C;&#x4E14;&#x5728;Envoy&#x4E2D;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x54CD;&#x5E94;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x8BA4;&#x4E3A;&#x8BE5;&#x8BF7;&#x6C42;&#x4ECD;&#x5728;&#x5904;&#x7406;&#x4E2D;&#x7684;&#x3002;&#x76F4;&#x5230;&#x8FBE;&#x5230;Envoy&#x7684;&#x8BF7;&#x6C42;&#x8D85;&#x65F6;&#x624D;&#x4F1A;&#x53D6;&#x6D88;&#x8FD9;&#x6B21;&#x8BF7;&#x6C42;&#x3002;</p>
<ol start="3">
<li><strong>&#x4E0A;&#x6E38;&#x670D;&#x52A1;&#x7EC8;&#x6B62;&#x4E86;&#x8FDE;&#x63A5;</strong></li>
</ol>
<p>&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x70B9;<code>2024-02-21T18:04:00</code>&#x6267;&#x884C;&#x5668;&#x4E2D;&#x6253;&#x5370;&#x4E86;&#x4E00;&#x884C;&#x65E5;&#x5FD7;&#xFF0C;&#x63D0;&#x793A;&#x6267;&#x884C;&#x5668;&#x5173;&#x95ED;&#x4E86;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/4e56ddebd4f494e50df4f9c3714a8073191872c454f714a636960af763bee2ec" alt="image.png"><br>&#x627E;&#x4E86;&#x4E00;&#x4E0B;&#x8BE5;&#x884C;&#x65E5;&#x5FD7;&#x5728;&#x6E90;&#x7801;&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x7684;&#x524D;&#x63D0;&#x662F;90&#x79D2;&#x5185;&#x901A;&#x9053;<strong>&#x6CA1;&#x6709;&#x8FDB;&#x884C;&#x8BFB;&#x5199;</strong>&#xFF0C;&#x7136;&#x540E;&#x6267;&#x884C;&#x5668;&#x89C9;&#x5F97;&#x8BE5;&#x8FDE;&#x63A5;&#x901A;&#x9053;&#x5DF2;&#x7ECF;&#x5F02;&#x5E38;&#x4E86;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;Envoy&#x4F1A;&#x63D0;&#x793A;&#x4E0A;&#x6E38;&#x670D;&#x52A1;&#x7EC8;&#x6B62;&#x4E86;&#x8FDE;&#x63A5;&#x7684;&#x539F;&#x56E0;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/e6a63c93545b16a49b3bf2022bb28b91e07bf8ff8084ae603f3b541485d7a2ff" alt="image.png"></p>
<h2 id="&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E8C;"><a href="#&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E8C;" class="headerlink" title="&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E8C;"></a>&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E8C;</h2><blockquote>
<p>[2024-02-21T18:04:00.088Z] &#x201C;POST / HTTP/1.1&#x201D; 0 DC downstream_remote_disconnect - &#x201C;-&#x201C; 159 0 1 - &#x201C;-&#x201C; &#x201C;-&#x201C; &#x201C;bfa7dcee-123f-4582-9368-84edcb8476c7&#x201D; &#x201C;ebc-portal.ebc-bpm.svc.cluster.local&#x201D; &#x201C;10.64.195.45:7666&#x201D; inbound|7666|| 127.0.0.6:39739 10.64.195.45:7666 10.64.217.207:45584 - default</p>
</blockquote>
<ul>
<li>&#x201C;2024-02-21T18:04:00&#x201D;&#xFF1A;&#x8BF7;&#x6C42;&#x5230;&#x8FBE;Envoy&#x65F6;&#x95F4;</li>
<li>&#x201C;0&#x201D;&#xFF1A;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x6700;&#x7EC8;&#x7684;&#x54CD;&#x5E94;&#x7801;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x672C;&#x6B21;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7684;&#x8BF7;&#x6C42;&#x5E76;&#x6CA1;&#x6709;&#x5B8C;&#x6210;</li>
<li>&#x201C;DC downstream_remote_disconnect&#x201D;&#xFF1A;<code>DC</code>&#x4EE3;&#x8868;<strong>Downstream Connection</strong>&#xFF0C;&#x4E0B;&#x6E38;&#x670D;&#x52A1;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x95EE;&#x9898;&#x4FE1;&#x606F;&#x4E3A;<strong>&#x4E0B;&#x6E38;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x7EC8;&#x6B62;&#x4E86;&#x8FDE;&#x63A5;</strong>&#x3002;</li>
<li>&#x201C;159 0 1 - &#x201C;&#xFF1A;159&#x662F;&#x8BF7;&#x6C42;&#x4F53;&#x5927;&#x5C0F;&#xFF0C;&#x8BF4;&#x660E;&#x662F;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#xFF1B;0&#x662F;&#x54CD;&#x5E94;&#x4F53;&#x5927;&#x5C0F;&#xFF1B;1&#x662F;&#x8BF7;&#x6C42;&#x4ECE; Envoy &#x5230;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x7684;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x3002;</li>
</ul>
<p>&#x5728;&#x8FD9;&#x884C;&#x65E5;&#x5FD7;&#x4E2D;&#xFF0C;&#x4E0B;&#x6E38;&#x670D;&#x52A1;&#x6307;&#x7684;&#x6B63;&#x662F;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#xFF0C;&#x6B64;&#x523B;&#x67E5;&#x770B;&#x4E00;&#x4E0B;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x6253;&#x5370;&#x7684;&#x65E5;&#x5FD7;&#xFF0C;&#x53D1;&#x73B0;&#x629B;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;<code>XxlRpcException</code>&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x4ECE;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x6536;&#x5230;&#x4E86;&#x4E00;&#x4E2A;<strong>&#x65E0;&#x6548;&#x54CD;&#x5E94;&#x7801;</strong>&#x5BFC;&#x81F4;&#x7684;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/837e1ccb79e06233a08ca2f4bc535c12dcc4188272d1c0d22598fd940ea84ec5" alt="image.png"><br>&#x7167;&#x846B;&#x82A6;&#x753B;&#x74E2;&#xFF0C;&#x6211;&#x4E5F;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x4F4D;&#x4E8E;&#x6E90;&#x7801;&#x7684;&#x4F4D;&#x7F6E;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a034e9595862a445807f1626c63c485e82f1e23fc6b3f1a86b4b2c8b21fb2483" alt="output.png"><br>&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x7684;&#x629B;&#x51FA;&#x662F;&#x7531;&#x4E8E;&#x6267;&#x884C;&#x5668;&#x8FD4;&#x56DE;&#x4E86;&#x975E;<code>200</code>&#x72B6;&#x6001;&#x7801;&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x7ED3;&#x5408;<strong>&#x5F02;&#x5E38;&#x65E5;&#x5FD7;&#x4E00;</strong>&#x4E2D;Envoy&#x751F;&#x6210;&#x7684;<code>503</code>&#x54CD;&#x5E94;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x63A8;&#x65AD;&#x51FA;&#xFF0C;&#x6B63;&#x662F;&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;<code>503</code>&#x54CD;&#x5E94;&#xFF0C;&#x5BFC;&#x81F4;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x5173;&#x95ED;&#x4E86;&#x4E0E;&#x6267;&#x884C;&#x5668;&#x7684;&#x8FDE;&#x63A5;&#x901A;&#x9053;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x8BE5;&#x8FDE;&#x63A5;&#x901A;&#x9053;&#x662F;&#x4E0E;<strong>Pod&#x4E2D;Envoy</strong>&#x7684;&#x8FDE;&#x63A5;&#x901A;&#x9053;&#x3002;</p>
<h1 id="&#x539F;&#x56E0;"><a href="#&#x539F;&#x56E0;" class="headerlink" title="&#x539F;&#x56E0;"></a>&#x539F;&#x56E0;</h1><p>&#x7ECF;&#x8FC7;&#x4E86;&#x4E0A;&#x9762;&#x5BF9;&#x4E8E;&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x7EC6;&#x81F4;&#x5206;&#x6790;&#x6392;&#x67E5;&#xFF0C;&#x7EC8;&#x4E8E;&#x627E;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4EA7;&#x751F;&#x7684;&#x539F;&#x56E0;&#x4E86;&#x3002;<br>&#x7531;&#x4E8E;&#x8BE5;&#x7248;&#x672C;<code>xxl-job</code>&#x5728;Http&#x534F;&#x8BAE;&#x4E0B;&#x7684;RPC&#x8C03;&#x7528;&#x4E2D;&#xFF0C;<strong>&#x7F3A;&#x5C11;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;</strong>&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x4E24;&#x4E2A;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x7A0B;&#x88AB;Envoy&#x7ED9;&#x4EE3;&#x7406;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4EA7;&#x751F;&#x4E86;&#x8BE5;&#x95EE;&#x9898;&#x3002;<br>&#x670D;&#x52A1;&#x8FC1;&#x79FB;&#x81F3;K8S&#x540E;&#xFF0C;&#x5F15;&#x8FDB;&#x4E86;Istio&#x670D;&#x52A1;&#x6CBB;&#x7406;&#xFF0C;&#x7ED9;&#x6BCF;&#x4E2A;Pod&#x90FD;&#x5BFC;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x5BB9;&#x5668;Envoy&#xFF0C;&#x7528;&#x4E8E;&#x4EE3;&#x7406;&#x8FDB;&#x51FA;Pod&#x7684;&#x6D41;&#x91CF;&#x3002;<br>Envoy&#x5728;&#x8F6C;&#x53D1;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5230;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x540E;&#xFF0C;&#x4F1A;&#x7B49;&#x5F85;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x54CD;&#x5E94;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x4E0A;&#x6709;&#x591A;&#x4E2A;&#x8BF7;&#x6C42;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E9B;&#x8BF7;&#x6C42;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#xFF0C;&#x76F4;&#x5230;&#x524D;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x8FD4;&#x56DE;&#x3002;&#x5E76;&#x4E14;&#x7531;&#x4E8E;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;<strong>&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#x6C60;</strong>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x90FD;<strong>&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;</strong>&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x8BF7;&#x6C42;&#x5728;Envoy&#x963B;&#x585E;&#x4E86;&#x3002;<br>&#x5F53;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x8BE5;&#x8BF7;&#x6C42;&#x88AB;Envoy&#x8F6C;&#x53D1;&#x7ED9;&#x6267;&#x884C;&#x5668;&#x540E;&#xFF0C;Envoy&#x4F1A;&#x7B49;&#x5F85;&#x6267;&#x884C;&#x5668;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x7ED3;&#x679C;&#x3002;&#x7531;&#x4E8E;&#x6267;&#x884C;&#x5668;&#x6536;&#x5230;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;<strong>&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;</strong>&#xFF0C;&#x5BFC;&#x81F4;Envoy&#x4E2D;&#x5FC3;&#x4F1A;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x5FC3;&#x8DF3;&#x54CD;&#x5E94;&#xFF0C;<strong>&#x963B;&#x585E;</strong>&#x540E;&#x7EED;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x3002;<br>&#x7531;&#x4E8E;Envoy&#x963B;&#x585E;&#x4E86;&#x540E;&#x7EED;&#x6B63;&#x5E38;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#xFF0C;&#x5BFC;&#x81F4;&#x6267;&#x884C;&#x5668;&#x4E0E;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7684;&#x8FDE;&#x63A5;&#x5728;90S&#x5185;&#x6CA1;&#x6709;<strong>&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;</strong>&#xFF0C;&#x4E8E;&#x662F;&#x6267;&#x884C;&#x5668;&#x5C31;&#x4F1A;&#x5C06;&#x8BE5;&#x8FDE;&#x63A5;&#x901A;&#x9053;&#x5173;&#x95ED;&#x3002;<br><strong>&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#x8DEF;&#x5F84;&#xFF1A;</strong></p>
<ol>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x4E0E;&#x6267;&#x884C;&#x5668;&#x6B63;&#x5E38;&#x8FDE;&#x63A5;&#x3002;</li>
<li>&#x7B2C;&#x4E00;&#x6B21;&#x8C03;&#x5EA6;&#xFF0C;&#x6210;&#x529F;&#x8C03;&#x5EA6;&#x5E76;&#x6267;&#x884C;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#x3002;</li>
<li>&#x7ECF;&#x8FC7;30S&#x540E;&#xFF0C;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x5230;&#x6267;&#x884C;&#x5668;&#x3002;</li>
<li>Envoy&#x4EE3;&#x7406;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x5E76;&#x8F6C;&#x53D1;&#x5230;&#x6267;&#x884C;&#x5668;&#x3002;</li>
<li>&#x6267;&#x884C;&#x5668;&#x5FFD;&#x7565;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#xFF0C;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;Http&#x54CD;&#x5E94;&#x3002;&#x5BFC;&#x81F4;Envoy&#x963B;&#x585E;&#x672C;&#x6761;Http&#x8FDE;&#x63A5;&#xFF0C;&#x4EE5;&#x81F3;&#x4E8E;&#x540E;&#x7EED;&#x7684;&#x8C03;&#x5EA6;&#x8BF7;&#x6C42;&#x65E0;&#x6CD5;&#x8FDB;&#x5165;&#x6267;&#x884C;&#x5668;&#x3002;</li>
<li>&#x6267;&#x884C;&#x5668;90&#x79D2;&#x540E;&#x53D1;&#x73B0;&#x548C;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x7684;Http&#x8FDE;&#x63A5;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4E8E;&#x662F;&#x5173;&#x95ED;&#x8BE5;&#x6761;Http&#x8FDE;&#x63A5;&#x3002;</li>
<li>Envoy&#x7B49;&#x5F85;&#x5FC3;&#x8DF3;&#x54CD;&#x5E94;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53D1;&#x73B0;&#x8F6C;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#x88AB;&#x5F02;&#x5E38;&#x5173;&#x95ED;&#xFF0C;&#x4E8E;&#x662F;&#x81EA;&#x5DF1;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;503&#x7684;&#x54CD;&#x5E94;&#x53D1;&#x9001;&#x7ED9;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x3002;&#x6784;&#x9020;&#x5B8C;503&#x54CD;&#x5E94;&#x540E;&#xFF0C;&#x6309;&#x987A;&#x5E8F;&#x5904;&#x7406;&#x8BE5;&#x901A;&#x9053;&#x540E;&#x7EED;&#x8BF7;&#x6C42;&#xFF0C;&#x6B64;&#x65F6;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x5EA6;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x6267;&#x884C;&#x5668;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x8C03;&#x5EA6;&#x88AB;&#x6267;&#x884C;&#x5668;&#x6B63;&#x5E38;&#x5904;&#x7406;&#x3002;</li>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x6536;&#x5230;503&#x7684;&#x54CD;&#x5E94;&#x540E;&#xFF0C;&#x5185;&#x90E8;Netty&#x7684;&#x5904;&#x7406;&#x5668;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;XxlRpcException&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x5BFC;&#x81F4;&#x5728;&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x4E5F;&#x4F1A;&#x5173;&#x95ED;&#x4E0E;&#x6267;&#x884C;&#x5668;&#x7684;http&#x8FDE;&#x63A5;&#xFF0C;&#x5BFC;&#x81F4;&#x7B2C;&#x4E09;&#x6B21;&#x8C03;&#x5EA6;&#x5931;&#x8D25;&#x3002;</li>
</ol>
<h1 id="&#x89E3;&#x51B3;&#x529E;&#x6CD5;"><a href="#&#x89E3;&#x51B3;&#x529E;&#x6CD5;" class="headerlink" title="&#x89E3;&#x51B3;&#x529E;&#x6CD5;"></a>&#x89E3;&#x51B3;&#x529E;&#x6CD5;</h1><p>&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x6839;&#x56E0;&#x662F;&#x7531;&#x4E8E;&#x5728;&#x8BE5;&#x7248;&#x672C;<code>xxl-job</code>&#x5728;Http&#x534F;&#x8BAE;&#x4E0B;&#x7684;RPC&#x8C03;&#x7528;&#x4E2D;&#xFF0C;<strong>&#x7F3A;&#x5C11;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;</strong>&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x4E24;&#x4E2A;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x7A0B;&#x88AB;Envoy&#x7ED9;&#x4EE3;&#x7406;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4EA7;&#x751F;&#x4E86;&#x8BE5;&#x95EE;&#x9898;&#x3002;<br>&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6709;&#x4E24;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ol>
<li>&#x5728;&#x6267;&#x884C;&#x5668;&#x7AEF;&#x589E;&#x52A0;&#x5FC3;&#x8DF3;&#x8BF7;&#x6C42;&#x54CD;&#x5E94;</li>
<li>&#x8C03;&#x5EA6;&#x4E2D;&#x5FC3;&#x548C;&#x6267;&#x884C;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x91CF;&#x4E0D;&#x518D;&#x7ECF;&#x8FC7;Envoy&#x4EE3;&#x7406;</li>
</ol>
<p>&#x7531;&#x4E8E;<code>xxl-job</code>&#x5728;&#x8BE5;&#x7248;&#x672C;&#x4E0B;&#x7684;<code>xxl-rpc</code>&#x5DF2;&#x7ECF;&#x4E24;&#x5E74;&#x6CA1;&#x6709;&#x66F4;&#x65B0;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x770B;&#x770B;&#x600E;&#x4E48;&#x5C06;&#x4E24;&#x4E2A;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x91CF;&#x4E0D;&#x8D70;Envoy&#x4EE3;&#x7406;&#x3002;<br>&#x6B64;&#x65F6;Istio&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x4E2D;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x89D2;&#x8272;<code>Sidecar</code>&#x51FA;&#x73B0;&#x4E86;&#x3002;</p>
<h2 id="Sidecar"><a href="#Sidecar" class="headerlink" title="Sidecar"></a>Sidecar</h2><blockquote>
<p>Sidecar&#x7684;&#x4F5C;&#x7528;&#xFF1A;<br>&#x53EF;&#x4EE5;&#x62E6;&#x622A;Pod&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5165;&#x53E3;&#x548C;&#x51FA;&#x53E3;&#x6D41;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;Istio&#x7684;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#x5C06;&#x6D41;&#x91CF;&#x8DEF;&#x7531;&#x5230;&#x6B63;&#x786E;&#x7684;&#x670D;&#x52A1;&#x3002;</p>
</blockquote>
<p>&#x5728;k8s&#x4E2D;&#x7684;<code>Istio</code>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;<code>Sidecar</code>&#xFF0C;&#x8BBE;&#x7F6E;&#x8C03;&#x7528;&#x6267;&#x884C;&#x5668;xxl-job&#x7684;http&#x7AEF;&#x53E3;&#x7684;&#x6D41;&#x91CF;&#x4E0D;&#x7ECF;&#x8FC7;&#x4EFB;&#x4F55;<code>Istio</code>&#x529F;&#x80FD;&#x3002;<br>&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;apiVersion: networking.istio.io/v1beta1</span><br><span class="line">kind: Sidecar</span><br><span class="line">metadata:</span><br><span class="line">  name: direct-xxl-job-my-app</span><br><span class="line">  namespace: ebc-bpm</span><br><span class="line">spec:</span><br><span class="line">  # &#x5165;&#x53E3;&#x6D41;&#x91CF;&#x8BBE;&#x7F6E;</span><br><span class="line">  ingress:</span><br><span class="line">  # &#x76F4;&#x63A5;&#x8F6C;&#x53D1;&#x5230;Pod&#x5BB9;&#x5668;&#x7684;7679&#x63A5;&#x53E3;</span><br><span class="line">  - defaultEndpoint: 127.0.0.1:7679</span><br><span class="line">    port:</span><br><span class="line">      name: direct-access-port</span><br><span class="line">      number: 7679</span><br><span class="line">      protocol: TCP</span><br><span class="line">  # &#x5BF9;&#x5E94;&#x7684;&#x5DE5;&#x4F5C;&#x8D1F;&#x8F7D;</span><br><span class="line">  workloadSelector:</span><br><span class="line">    labels:</span><br><span class="line">      app: my-app</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E2A;Sidecar&#x914D;&#x7F6E;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5C06;&#x5E26;&#x6709;&#x6807;&#x7B7E;<code>app=my-app</code>&#x5E94;&#x7528;&#x7684;<strong>7679&#x7AEF;&#x53E3;TCP&#x5165;&#x53E3;&#x6D41;&#x91CF;</strong>&#x91CD;&#x5B9A;&#x5411;&#x5230;Pod&#x4E2D;&#x7684;<strong>7679&#x7AEF;&#x53E3;</strong>&#xFF0C;&#x4E0D;&#x518D;&#x7ECF;&#x8FC7;<code>Envoy</code>&#x7684;&#x4EE3;&#x7406;&#x3002;<br>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;K8S&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x914D;&#x7F6E;Sidecar&#x6765;&#x63A7;&#x5236;&#x6D41;&#x91CF;&#x662F;&#x5426;&#x88AB;Enovy&#x4EE3;&#x7406;&#xFF0C;&#x5C31;&#x80FD;&#x6709;&#x6548;&#x7684;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/192792911a11f4c8d4d1c7133811ade1.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7339416321908457481.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7339416321908457481.html" itemprop="url">Rust Web 框架入门和对比 最适合使用的 Rust W</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-26T10:50:45+08:00">
                2024-02-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/2d0f81a938c7e92358157d61e064f93f5284a29870998d3f4c5f81e5d1fb031b" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h1 id="&#x6700;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x7684;-Rust-Web-&#x6846;&#x67B6;"><a href="#&#x6700;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x7684;-Rust-Web-&#x6846;&#x67B6;" class="headerlink" title="&#x6700;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x7684; Rust Web &#x6846;&#x67B6;"></a>&#x6700;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x7684; Rust Web &#x6846;&#x67B6;</h1><p>&#x5728; Web &#x5F00;&#x53D1;&#x7684;&#x53D8;&#x5316;&#x7684;&#x6D6A;&#x6F6E;&#x4E2D;&#xFF0C;Rust &#x5DF2;&#x6210;&#x4E3A;&#x6784;&#x5EFA;&#x5B89;&#x5168;&#x548C;&#x9AD8;&#x6027;&#x80FD;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x9996;&#x9009;&#x8BED;&#x8A00;&#x3002;&#x968F;&#x7740; Rust &#x7684;&#x6D41;&#x884C;&#xFF0C;&#x4E00;&#x7CFB;&#x5217;&#x65E8;&#x5728;&#x5229;&#x7528;&#x5176;&#x4F18;&#x52BF;&#x7684; Web &#x6846;&#x67B6;&#x4E5F;&#x5728;&#x4E0D;&#x65AD;&#x51FA;&#x73B0;&#x3002;&#x672C;&#x6587;&#x6BD4;&#x8F83;&#x4E86;&#x4E00;&#x4E9B;&#x6700;&#x597D;&#x7684; Rust &#x6846;&#x67B6;&#xFF0C;&#x91CD;&#x70B9;&#x4ECB;&#x7ECD;&#x4E86;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7684;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;&#xFF0C;&#x4EE5;&#x5E2E;&#x52A9;&#x60A8;&#x4E3A;&#x9879;&#x76EE;&#x505A;&#x51FA;&#x660E;&#x667A;&#x7684;&#x51B3;&#x7B56;&#x3002;&#x5B83;&#x8FD8;&#x9700;&#x8981;&#x7559;&#x5FC3;&#x9700;&#x8981;&#x5173;&#x6CE8;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x53EF;&#x80FD;&#x4F1A;&#x6539;&#x53D8;&#x6211;&#x4EEC;&#x5728; Rust &#x4E2D;&#x6784;&#x5EFA; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x5927;&#x591A;&#x6570; Web &#x6846;&#x67B6;&#x4E4D;&#x4E00;&#x770B;&#x5728;&#x4F7F;&#x7528;&#x4E0A;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x5DEE;&#x5F02;&#x66F4;&#x52A0;&#x7EC6;&#x5FAE;&#x548C;&#x7410;&#x788E;&#x3002;&#x6211;&#x5E0C;&#x671B;&#x5F3A;&#x8C03;&#x6587;&#x672C;&#x4E2D;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x4F46;&#x4E3A;&#x4E86;&#x8BA9;&#x60A8;&#x6709;&#x66F4;&#x597D;&#x7684;&#x60F3;&#x6CD5;&#xFF0C;&#x6211;&#x8FD8;&#x5C55;&#x793A;&#x4E86;&#x6BCF;&#x4E2A;&#x6846;&#x67B6;&#x7684;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x4E9B;&#x6846;&#x67B6;&#x7684;&#x4F5C;&#x7528;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x7B80;&#x5355;&#x7684; hello world&#x3002;&#x6240;&#x6709;&#x793A;&#x4F8B;&#x5747;&#x53D6;&#x81EA;&#x5404;&#x81EA;&#x7684; GitHub &#x5B58;&#x50A8;&#x5E93;&#x3002;</p>
<p>&#x53E6;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5217;&#x8868;&#x7EDD;&#x4E0D;&#x662F;&#x8BE6;&#x5C3D;&#x7684;&#xFF0C;&#x6211;&#x80AF;&#x5B9A;&#x9519;&#x8FC7;&#x4E86;&#x4E00;&#x4E9B;&#x73B0;&#x6709;&#x7684;&#x6846;&#x67B6;&#x3002;&#x5982;&#x679C;&#x60A8;&#x60F3;&#x5305;&#x542B;&#x60A8;&#x6700;&#x559C;&#x6B22;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x8BF7;&#x5728; Twitter &#x6216; Mastodon &#x4E0A;&#x4E0E;&#x6211;&#x8054;&#x7CFB;&#x3002;</p>
<h2 id="&#x6D41;&#x884C;&#x7684;-Rust-&#x6846;&#x67B6;"><a href="#&#x6D41;&#x884C;&#x7684;-Rust-&#x6846;&#x67B6;" class="headerlink" title="&#x6D41;&#x884C;&#x7684; Rust &#x6846;&#x67B6;"></a>&#x6D41;&#x884C;&#x7684; Rust &#x6846;&#x67B6;</h2><h3 id="Axum"><a href="#Axum" class="headerlink" title="Axum"></a>Axum</h3><p>Axum &#x662F;&#x4E00;&#x4E2A;&#x5728; Rust &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x5177;&#x6709;&#x7279;&#x6B8A;&#x5730;&#x4F4D;&#x7684; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6846;&#x67B6;&#x3002;&#x5B83;&#x662F; Tokio &#x9879;&#x76EE;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x8BE5;&#x9879;&#x76EE;&#x662F;&#x4F7F;&#x7528; Rust &#x7F16;&#x5199;&#x5F02;&#x6B65;&#x7F51;&#x7EDC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x3002; Axum &#x4E0D;&#x4EC5;&#x4F7F;&#x7528; Tokio &#x4F5C;&#x4E3A;&#x5176;&#x5F02;&#x6B65;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x4E0E; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x5E93;&#x96C6;&#x6210;&#xFF0C;&#x5229;&#x7528; Hyper &#x4F5C;&#x4E3A;&#x5176; HTTP &#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5E76;&#x4F7F;&#x7528; Tower &#x4F5C;&#x4E3A;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5C31;&#x80FD;&#x591F;&#x91CD;&#x7528; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x5E93;&#x548C;&#x5DE5;&#x5177;&#x3002;</p>
<p>Axum &#x8FD8;&#x81F4;&#x529B;&#x4E8E;&#x5728;&#x4E0D;&#x4F9D;&#x8D56;&#x5B8F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x63D0;&#x4F9B;&#x4E00;&#x6D41;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4F53;&#x9A8C;&#xFF0C;&#x800C;&#x662F;&#x5229;&#x7528; Rust &#x7684;&#x7C7B;&#x578B;&#x7CFB;&#x7EDF;&#x6765;&#x63D0;&#x4F9B;&#x5B89;&#x5168;&#x4E14;&#x7B26;&#x5408;&#x4EBA;&#x4F53;&#x5DE5;&#x7A0B;&#x5B66;&#x7684; API&#x3002;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x7279;&#x5F81;&#x6765;&#x5B9A;&#x4E49;&#x6846;&#x67B6;&#x7684;&#x6838;&#x5FC3;&#x62BD;&#x8C61;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4F8B;&#x5982; <code>Handler</code> &#x7279;&#x5F81;&#xFF0C;&#x5B83;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6838;&#x5FC3;&#x903B;&#x8F91;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5141;&#x8BB8;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x8F7B;&#x677E;&#x5730;&#x4ECE;&#x8F83;&#x5C0F;&#x7684;&#x7EC4;&#x4EF6;&#x7EC4;&#x200B;&#x200B;&#x6210;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x8FD9;&#x4E9B;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x5728;&#x591A;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x3002;</p>
<p>Axum &#x4E2D;&#x7684;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x5E76;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x7684;&#x51FD;&#x6570;&#x3002;&#x8FD9;&#x4E0E;&#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x6846;&#x67B6;&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46;&#x5229;&#x7528; Axum &#x7684; <code>FromRequest</code> trait&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x5E94;&#x4ECE;&#x8BF7;&#x6C42;&#x4E2D;&#x63D0;&#x53D6;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x9700;&#x8981;&#x5B9E;&#x73B0; <code>IntoResponse</code> trait&#xFF0C;&#x5E76;&#x4E14;&#x5DF2;&#x7ECF;&#x6709;&#x8BB8;&#x591A;&#x7C7B;&#x578B;&#x5B9E;&#x73B0;&#x4E86;&#x6B64;trait&#xFF0C;&#x5305;&#x62EC;&#x5141;&#x8BB8;&#x8F7B;&#x677E;&#x66F4;&#x6539;&#x7684;&#x5143;&#x7EC4;&#x7C7B;&#x578B;&#xFF0C;&#x4F8B;&#x5982;&#x54CD;&#x5E94;&#x7684;&#x72B6;&#x6001;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x66FE;&#x7ECF;&#x4F7F;&#x7528;&#x8FC7; Rust &#x7684;&#x7C7B;&#x578B;&#x7CFB;&#x7EDF;&#x3001;&#x6CDB;&#x578B;&#xFF0C;&#x5C24;&#x5176;&#x662F;trait&#x4E2D;&#x7684;&#x5F02;&#x6B65;&#x65B9;&#x6CD5;&#xFF08;&#x6216;&#x66F4;&#x5177;&#x4F53;&#x5730;&#x8BF4;&#xFF1A;&#x8FD4;&#x56DE;&#x7684; <code>Future</code> &#xFF09;&#xFF0C;&#x60A8;&#x5C31;&#x4F1A;&#x77E5;&#x9053;&#x5F53;&#x60A8;&#x4E0D;&#x6EE1;&#x8DB3; trait &#x7EA6;&#x675F;(bound) &#x65F6;&#xFF0C;Rust &#x7684;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x4F1A;&#x53D8;&#x5F97;&#x591A;&#x4E48;&#x590D;&#x6742;&#x3002;&#x5C24;&#x5176;&#x662F;&#x5F53;&#x60A8;&#x5C1D;&#x8BD5;&#x9002;&#x914D; &#x62BD;&#x8C61; trait &#x7EA6;&#x675F;(bound)&#x65F6;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#xFF1A;&#x60A8;&#x4F1A;&#x770B;&#x5230;&#x4E00;&#x5835;&#x96BE;&#x4EE5;&#x7834;&#x8BD1;&#x7684;&#x6587;&#x672C;&#x5899;&#x3002;&#x6539;&#x53D8;&#x51E0;&#x884C;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x5C31;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x4F5C;&#x7528;&#x4E86;&#xFF01; Axum &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x8F85;&#x52A9;&#x5B8F;&#x7684;&#x5E93;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x9519;&#x8BEF;&#x5B9A;&#x4F4D;&#x5230;&#x5B9E;&#x9645;&#x53D1;&#x751F;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x51FA;&#x4E86;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x3002;</p>
<p>Axum &#x505A;&#x4E86;&#x5F88;&#x591A;&#x6B63;&#x786E;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x5BB9;&#x6613;&#x542F;&#x52A8;&#x6267;&#x884C;&#x5927;&#x91CF;&#x64CD;&#x4F5C;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E9B;&#x4E8B;&#x9879;&#x3002;&#x8BE5;&#x7248;&#x672C;&#x4ECD;&#x4F4E;&#x4E8E; 1.0&#xFF0C;Axum &#x56E2;&#x961F;&#x53EF;&#x4EE5;&#x4ECE;&#x6839;&#x672C;&#x4E0A;&#x66F4;&#x6539;&#x7248;&#x672C;&#x4E4B;&#x95F4;&#x7684; API&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x60A8;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5D29;&#x6E83;&#x3002;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x8FD9;&#x5C31;&#x662F; 0.x &#x7248;&#x672C;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x6709;&#x4E9B;&#x66F4;&#x6539;&#x4F3C;&#x4E4E;&#x975E;&#x5E38;&#x5FAE;&#x5999;&#xFF0C;&#x4F46;&#x9700;&#x8981;&#x60A8;&#x5F00;&#x53D1;&#x4E00;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x601D;&#x7EF4;&#x6A21;&#x578B;&#x6765;&#x4E86;&#x89E3;&#x5E95;&#x5C42;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;&#x5982;&#x679C;&#x60A8;&#x5305;&#x542B;&#x4E00;&#x4E2A; <code>Timeout</code> &#x5C42;&#xFF08;&#x5185;&#x7F6E;&#x5728; Tower &#x4E2D;&#xFF09;&#xFF0C;&#x5B83;&#x5728;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5DE5;&#x4F5C;&#xFF0C;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6355;&#x83B7;&#x6240;&#x6709;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x5728;&#x4E0B;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#x4E2D;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7ED1;&#x5B9A;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x3002;&#x8FD9;&#x4E0D;&#x662F;&#x4EC0;&#x4E48;&#x5927;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x5F53;&#x60A8;&#x5C1D;&#x8BD5;&#x5B8C;&#x6210;&#x5DE5;&#x4F5C;&#x6216;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7248;&#x672C;&#x542F;&#x52A8;&#x9879;&#x76EE;&#x5E76;&#x4E14;&#x4E8B;&#x60C5;&#x7A81;&#x7136;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x4EE4;&#x4EBA;&#x6CAE;&#x4E27;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x867D;&#x7136;&#x60A8;&#x80FD;&#x591F;&#x5229;&#x7528;&#x6574;&#x4E2A; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x60A8;&#x9700;&#x8981;&#x5904;&#x7406;&#x7C98;&#x5408;&#x7C7B;&#x578B;&#x548C;&#x7279;&#x5F81;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528; Tokio &#x51FD;&#x6570;&#x3002;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x662F;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x4E0E;&#x6D41;&#x548C;&#xFF08;&#x7F51;&#x7EDC;&#xFF09;&#x5957;&#x63A5;&#x5B57;&#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#x597D;&#x7684;&#x4F8B;&#x5B50;&#x4F1A;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#xFF0C;&#x4F46;&#x60A8;&#x9700;&#x8981;&#x6301;&#x7EED;&#x8DDF;&#x8E2A;&#x3002;</p>
<p>&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;Axum &#x662F;&#x6211;&#x4E2A;&#x4EBA;&#x6700;&#x559C;&#x6B22;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x6211;&#x7528;&#x4E8E; Shuttle Launchpad &#x7684;&#x6846;&#x67B6;&#x3002;&#x6211;&#x559C;&#x6B22;&#x5B83;&#x7684;&#x8868;&#x73B0;&#x529B;&#x548C;&#x80CC;&#x540E;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x901A;&#x8FC7;&#x7406;&#x89E3;&#x6B63;&#x786E;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x6211;&#x60F3;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x90FD;&#x662F;&#x6211;&#x65E0;&#x6CD5;&#x51ED;&#x76F4;&#x89C9;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x5982;&#x679C;&#x60A8;&#x60F3;&#x4E86;&#x89E3; Axum &#x6982;&#x5FF5;&#xFF0C;&#x8BF7;&#x67E5;&#x770B;&#x6211;&#x7684; Tokio + &#x5FAE;&#x670D;&#x52A1;&#x7814;&#x8BA8;&#x4F1A;&#x4E0A;&#x7684;&#x5E7B;&#x706F;&#x7247;&#x3002;</p>
<h4 id="Axum-Example"><a href="#Axum-Example" class="headerlink" title="Axum Example"></a>Axum Example</h4><p>Axum &#x4ED3;&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x77ED;&#x793A;&#x4F8B;&#x663E;&#x793A;&#x4E86;&#x4E00;&#x4E2A; WebSocket &#x5904;&#x7406;&#x7A0B;&#x5E8F;&#xFF0C;&#x8BE5;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x4F1A;&#x56DE;&#x663E;&#x5B83;&#x6536;&#x5230;&#x7684;&#x4EFB;&#x4F55;&#x6D88;&#x606F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">rust&#x590D;&#x5236;&#x4EE3;&#x7801;#[tokio::main]</span><br><span class="line">async fn main() {</span><br><span class="line">    let listener = tokio::net::TcpListener::bind(&quot;127.0.0.1:3000&quot;)</span><br><span class="line">        .await</span><br><span class="line">        .unwrap();</span><br><span class="line">    println!(&quot;listening on {}&quot;, listener.local_addr().unwrap());</span><br><span class="line">    axum::serve(listener, app()).await.unwrap();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">fn app() -&gt; Router {</span><br><span class="line">    // WebSocket routes can generally be tested in two ways:</span><br><span class="line">    //</span><br><span class="line">    // - Integration tests where you run the server and connect with a real WebSocket client.</span><br><span class="line">    // - Unit tests where you mock the socket as some generic send/receive type</span><br><span class="line">    //</span><br><span class="line">    // Which version you pick is up to you. Generally we recommend the integration test version</span><br><span class="line">    // unless your app has a lot of setup that makes it hard to run in a test.</span><br><span class="line">    Router::new()</span><br><span class="line">        .route(&quot;/integration-testable&quot;, get(integration_testable_handler))</span><br><span class="line">        .route(&quot;/unit-testable&quot;, get(unit_testable_handler))</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// A WebSocket handler that echos any message it receives.</span><br><span class="line">//</span><br><span class="line">// This one we&apos;ll be integration testing so it can be written in the regular way.</span><br><span class="line">async fn integration_testable_handler(ws: WebSocketUpgrade) -&gt; Response {</span><br><span class="line">    ws.on_upgrade(integration_testable_handle_socket)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">async fn integration_testable_handle_socket(mut socket: WebSocket) {</span><br><span class="line">    while let Some(Ok(msg)) = socket.recv().await {</span><br><span class="line">        if let Message::Text(msg) = msg {</span><br><span class="line">            if socket</span><br><span class="line">                .send(Message::Text(format!(&quot;You said: {msg}&quot;)))</span><br><span class="line">                .await</span><br><span class="line">                .is_err()</span><br><span class="line">            {</span><br><span class="line">                break;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Axum&#x603B;&#x7ED3;"><a href="#Axum&#x603B;&#x7ED3;" class="headerlink" title="Axum&#x603B;&#x7ED3;"></a>Axum&#x603B;&#x7ED3;</h4><ul>
<li>Macro-free API.</li>
<li>&#x5229;&#x7528; Tokio&#x3001;Tower &#x548C; Hyper &#x5EFA;&#x7ACB;&#x5F3A;&#x5927;&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x3002;</li>
<li>&#x5F88;&#x68D2;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x7ECF;&#x9A8C;&#x3002;</li>
<li>&#x4ECD;&#x5904;&#x4E8E; 0.x &#x7248;&#x672C;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x91CD;&#x5927;&#x66F4;&#x6539;&#x3002;</li>
</ul>
<h3 id="Actix-Web-Actix"><a href="#Actix-Web-Actix" class="headerlink" title="Actix Web Actix"></a>Actix Web Actix</h3><p>Actix Web &#x662F; Rust &#x7684; Web &#x6846;&#x67B6;&#x4E4B;&#x4E00;&#xFF0C;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x56E0;&#x6B64;&#x975E;&#x5E38;&#x53D7;&#x6B22;&#x8FCE;&#x3002;&#x4E0E;&#x4EFB;&#x4F55;&#x4F18;&#x79C0;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x4E00;&#x6837;&#xFF0C;&#x5B83;&#x7ECF;&#x5386;&#x4E86;&#x591A;&#x6B21;&#x8FED;&#x4EE3;&#xFF0C;&#x4F46;&#x5B83;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x4E86; 0 &#x4EE5;&#x4E0A;&#x7684;&#x4E3B;&#x8981;&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x4FDD;&#x6301;&#x4E86;&#x7A33;&#x5B9A;&#x6027;&#x4FDD;&#x8BC1;&#xFF1A;&#x5728;&#x4E3B;&#x8981;&#x7248;&#x672C;&#x5185;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x6CA1;&#x6709;&#x91CD;&#x5927;&#x66F4;&#x6539;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x8C08;&#x8BBA; Actix Web &#x65F6;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x5047;&#x8BBE;&#x5B83;&#x662F;&#x57FA;&#x4E8E; <code>actix</code> actor &#x8FD0;&#x884C;&#x65F6;&#x7684;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5DF2;&#x7ECF;&#x6709; 4 &#x5E74;&#x591A;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x4E86;&#xFF1B; Actix Web &#x4E2D;&#x552F;&#x4E00;&#x9700;&#x8981; actor &#x7684;&#x5269;&#x4F59;&#x90E8;&#x5206;&#x662F; WebSocket&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x52AA;&#x529B;&#x5B8C;&#x5168;&#x5220;&#x9664;&#x5176;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x4E3A; <code>actix</code> <strong>&#x65E0;&#x6CD5;&#x4E0E;&#x73B0;&#x4EE3;&#x5F02;&#x6B65; Rust</strong> &#x4E16;&#x754C;&#x5F88;&#x597D;&#x5730;&#x914D;&#x5408;&#x3002;&#x66F4;&#x5E7F;&#x6CDB;&#x7684; Actix &#x9879;&#x76EE;&#x548C; GitHub org &#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5E76;&#x53D1;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5E93;&#xFF0C;&#x4ECE;&#x8F83;&#x4F4E;&#x7EA7;&#x522B;&#x7684; TCP &#x670D;&#x52A1;&#x5668;&#x6784;&#x5EFA;&#x5668;&#xFF0C;&#x5230; HTTP / Web &#x5C42;&#xFF0C;&#x4E00;&#x76F4;&#x5230;&#x9759;&#x6001;&#x6587;&#x4EF6;&#x63D0;&#x4F9B;&#x7A0B;&#x5E8F;&#x548C;&#x4F1A;&#x8BDD;&#x7BA1;&#x7406;crate&#x3002;</p>
<p>&#x4E4D;&#x4E00;&#x770B;&#xFF0C;Actix Web &#x770B;&#x8D77;&#x6765;&#x4E0E; Rust &#x4E2D;&#x7684;&#x5176;&#x4ED6; Web &#x6846;&#x67B6;&#x975E;&#x5E38;&#x719F;&#x6089;&#x3002;&#x60A8;&#x4F7F;&#x7528;&#x5B8F;&#x6765;&#x5B9A;&#x4E49; HTTP &#x65B9;&#x6CD5;&#x548C;&#x8DEF;&#x7531;&#xFF08;&#x5982; Rocket&#xFF09;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x63D0;&#x53D6;&#x5668;&#x4ECE;&#x8BF7;&#x6C42;&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF08;&#x5982; Axum&#xFF09;&#x3002;&#x4E0E; Axum &#x7684;&#x76F8;&#x4F3C;&#x4E4B;&#x5904;&#x662F;&#x60CA;&#x4EBA;&#x7684;&#xFF0C;&#x5728;&#x6982;&#x5FF5;&#x548C;&#x7279;&#x5F81;&#x7684;&#x547D;&#x540D;&#x65B9;&#x5F0F;&#x4E0A;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#x3002;&#x6700;&#x5927;&#x7684;&#x533A;&#x522B;&#x662F; Actix Web &#x5E76;&#x6CA1;&#x6709;&#x5C06;&#x81EA;&#x5DF1;&#x4E0E; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x8054;&#x7CFB;&#x5F97;&#x592A;&#x7D27;&#x5BC6;&#x3002;&#x867D;&#x7136; Tokio &#x4ECD;&#x7136;&#x662F; Actix Web &#x4E0B;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x4F46;&#x8BE5;&#x6846;&#x67B6;&#x5177;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x62BD;&#x8C61;&#x548C;&#x7279;&#x5F81;&#xFF0C;&#x4EE5;&#x53CA;&#x81EA;&#x5DF1;&#x7684;crate&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x3002;&#x8FD9;&#x6709;&#x4F18;&#x70B9;&#x4E5F;&#x6709;&#x7F3A;&#x70B9;&#x3002;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x786E;&#x5B9A;&#x4E8B;&#x7269;&#x901A;&#x5E38;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5730;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x4F1A;&#x9519;&#x8FC7; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x5DF2;&#x7ECF;&#x63D0;&#x4F9B;&#x7684;&#x8BB8;&#x591A;&#x4E8B;&#x7269;&#x3002;</p>
<p>&#x8BA9;&#x6211;&#x611F;&#x5230;&#x5947;&#x602A;&#x7684;&#x4E00;&#x4EF6;&#x4E8B;&#x662F; Actix Web &#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x5DF1;&#x7684; Service trait&#xFF0C;&#x5B83;&#x4E0E; Tower &#x7684;&#x57FA;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x4ECD;&#x7136;&#x4E0D;&#x517C;&#x5BB9;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740; Tower &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x5927;&#x591A;&#x6570;&#x53EF;&#x7528;&#x4E2D;&#x95F4;&#x4EF6;&#x4E0D;&#x9002;&#x7528;&#x4E8E; Actix&#x3002;</p>
<p>&#x540C;&#x6837;&#x6709;&#x8DA3;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x5728; Actix Web &#x4E2D;&#x81EA;&#x884C;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x7279;&#x6B8A;&#x4EFB;&#x52A1;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD0;&#x884C;&#x6846;&#x67B6;&#x4E2D;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x7684; Actor &#x6A21;&#x578B;&#x3002;&#x8FD9;&#x53EF;&#x80FD;&#x4F1A;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x60A8;&#x53EF;&#x80FD;&#x4E0D;&#x60F3;&#x5904;&#x7406;&#x7684;&#x590D;&#x6742;&#x6027;&#x3002;</p>
<p>&#x4F46; Actix Web &#x5468;&#x56F4;&#x7684;&#x793E;&#x533A;&#x63D0;&#x4F9B;&#x4E86;&#x8FD9;&#x4E00;&#x70B9;&#x3002;&#x8BE5;&#x6846;&#x67B6;&#x652F;&#x6301; HTTP/2 &#x548C; Websocket &#x5347;&#x7EA7;&#xFF0C;&#x5B83;&#x5177;&#x6709; Web &#x6846;&#x67B6;&#x4E2D;&#x6700;&#x5E38;&#x89C1;&#x4EFB;&#x52A1;&#x7684;&#x5305;&#x548C;&#x6307;&#x5357;&#xFF0C;&#x4F18;&#x79C0;&#x7684;&#xFF08;&#x6211;&#x7684;&#x610F;&#x601D;&#x662F;&#x4F18;&#x79C0;&#x7684;&#xFF09;&#x6587;&#x6863;&#xFF0C;&#x800C;&#x4E14;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#x3002; Actix Web &#x7684;&#x6D41;&#x884C;&#x662F;&#x6709;&#x539F;&#x56E0;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x4FDD;&#x6301;&#x7248;&#x672C;&#x4FDD;&#x8BC1;&#xFF0C;&#x5B83;&#x53EF;&#x80FD;&#x662F;&#x60A8;&#x73B0;&#x5728;&#x7684;&#x6700;&#x4F73;&#x9009;&#x62E9;&#x3002;</p>
<h4 id="Actix-Web-Example"><a href="#Actix-Web-Example" class="headerlink" title="Actix Web Example"></a>Actix Web Example</h4><p>Actix Web &#x4E2D;&#x7684;&#x7B80;&#x5355; WebSocket &#x56DE;&#x663E;&#x670D;&#x52A1;&#x5668;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">rust&#x590D;&#x5236;&#x4EE3;&#x7801;use actix::{Actor, StreamHandler};</span><br><span class="line">use actix_web::{web, App, Error, HttpRequest, HttpResponse, HttpServer};</span><br><span class="line">use actix_web_actors::ws;</span><br><span class="line"></span><br><span class="line">/// Define HTTP actor</span><br><span class="line">struct MyWs;</span><br><span class="line"></span><br><span class="line">impl Actor for MyWs {</span><br><span class="line">    type Context = ws::WebsocketContext&lt;Self&gt;;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/// Handler for ws::Message message</span><br><span class="line">impl StreamHandler&lt;Result&lt;ws::Message, ws::ProtocolError&gt;&gt; for MyWs {</span><br><span class="line">    fn handle(&amp;mut self, msg: Result&lt;ws::Message, ws::ProtocolError&gt;, ctx: &amp;mut Self::Context) {</span><br><span class="line">        match msg {</span><br><span class="line">            Ok(ws::Message::Ping(msg)) =&gt; ctx.pong(&amp;msg),</span><br><span class="line">            Ok(ws::Message::Text(text)) =&gt; ctx.text(text),</span><br><span class="line">            Ok(ws::Message::Binary(bin)) =&gt; ctx.binary(bin),</span><br><span class="line">            _ =&gt; (),</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">async fn index(req: HttpRequest, stream: web::Payload) -&gt; Result&lt;HttpResponse, Error&gt; {</span><br><span class="line">    let resp = ws::start(MyWs {}, &amp;req, stream);</span><br><span class="line">    println!(&quot;{:?}&quot;, resp);</span><br><span class="line">    resp</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[actix_web::main]</span><br><span class="line">async fn main() -&gt; std::io::Result&lt;()&gt; {</span><br><span class="line">    HttpServer::new(|| App::new().route(&quot;/ws/&quot;, web::get().to(index)))</span><br><span class="line">        .bind((&quot;127.0.0.1&quot;, 8080))?</span><br><span class="line">        .run()</span><br><span class="line">        .await</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Actix-Web-&#x603B;&#x7ED3;"><a href="#Actix-Web-&#x603B;&#x7ED3;" class="headerlink" title="Actix Web &#x603B;&#x7ED3;"></a>Actix Web &#x603B;&#x7ED3;</h4><ul>
<li>&#x5F3A;&#x5927;&#x3001;&#x72EC;&#x7ACB;&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x3002;</li>
<li>Actor model based.</li>
<li>&#x901A;&#x8FC7;&#x4E3B;&#x8981;&#x7248;&#x672C;&#x4FDD;&#x8BC1;&#x5B9E;&#x73B0;&#x7A33;&#x5B9A;&#x7684; API&#x3002;</li>
<li>&#x5F88;&#x68D2;&#x7684;&#x6587;&#x6863;&#x3002;</li>
</ul>
<h3 id="Rocket"><a href="#Rocket" class="headerlink" title="Rocket"></a>Rocket</h3><p>Rocket &#x957F;&#x671F;&#x4EE5;&#x6765;&#x4E00;&#x76F4;&#x662F; Rust Web &#x6846;&#x67B6;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x660E;&#x661F;&#xFF0C;&#x5B83;&#x5BF9;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4F53;&#x9A8C;&#x7684;&#x6001;&#x5EA6;&#x6BEB;&#x65E0;&#x6B49;&#x610F;&#xFF0C;&#x5BF9;&#x719F;&#x6089;&#x7684;&#x73B0;&#x6709;&#x6982;&#x5FF5;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x4EE5;&#x53CA;&#x63D0;&#x4F9B;&#x5305;&#x542B;&#x4E30;&#x5BCC;&#x5185;&#x7F6E;&#x529F;&#x80FD;&#x7684;&#x4F53;&#x9A8C;&#x7684;&#x96C4;&#x5FC3;&#x52C3;&#x52C3;&#x7684;&#x76EE;&#x6807;&#x3002;</p>
<p>&#x5F53;&#x60A8;&#x8FDB;&#x5165;&#x4ED6;&#x4EEC;&#x6F02;&#x4EAE;&#x7684;&#x7F51;&#x7AD9;&#x65F6;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5B83;&#x7684;&#x91CE;&#x5FC3;&#xFF1A;&#x57FA;&#x4E8E;&#x5B8F;&#x7684;&#x8DEF;&#x7531;&#x3001;&#x5185;&#x7F6E;&#x8868;&#x5355;&#x5904;&#x7406;&#x3001;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x548C;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x53CA;&#x5B83;&#x81EA;&#x5DF1;&#x7684;&#x6A21;&#x677F;&#x7248;&#x672C;&#xFF01; Rocket &#x786E;&#x5B9E;&#x5C1D;&#x8BD5;&#x5B8C;&#x6210;&#x6784;&#x5EFA; Web &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6240;&#x9700;&#x7684;&#x4E00;&#x5207;&#x3002;</p>
<p>&#x7136;&#x800C;&#xFF0C;Rocket&#x7684;&#x91CE;&#x5FC3;&#x5374;&#x4ED8;&#x51FA;&#x4E86;&#x4EE3;&#x4EF7;&#x3002;&#x867D;&#x7136;&#x4ECD;&#x5728;&#x79EF;&#x6781;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x4F46;&#x53D1;&#x5E03;&#x5E76;&#x4E0D;&#x50CF;&#x4EE5;&#x524D;&#x90A3;&#x4E48;&#x9891;&#x7E41;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x8BE5;&#x6846;&#x67B6;&#x7684;&#x7528;&#x6237;&#x4F1A;&#x9519;&#x8FC7;&#x5F88;&#x591A;&#x91CD;&#x8981;&#x7684;&#x4E1C;&#x897F;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x7531;&#x4E8E;&#x91C7;&#x7528;&#x4E86;&#x5305;&#x542B;&#x4E30;&#x5BCC;&#x5185;&#x7F6E;&#x529F;&#x80FD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x60A8;&#x8FD8;&#x9700;&#x8981;&#x4E86;&#x89E3; Rocket &#x662F;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#x7684;&#x3002; Rocket &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x6784;&#x5EFA;&#x5757;&#x4EE5;&#x7279;&#x5B9A;&#x65B9;&#x5F0F;&#x8FDE;&#x63A5;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x95EE;&#x9898;&#x6240;&#x5728;&#x3002;</p>
<p>Rocket &#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x68D2;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x5F00;&#x59CB; Rust Web &#x5F00;&#x53D1;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;&#x5C31;&#x6211;&#x4E2A;&#x4EBA;&#x800C;&#x8A00;&#xFF0C;&#x6211;&#x5BF9; Rocket &#x60C5;&#x6709;&#x72EC;&#x949F;&#xFF0C;&#x5E0C;&#x671B;&#x5B83;&#x7684;&#x53D1;&#x5C55;&#x80FD;&#x591F;&#x52A0;&#x5FEB;&#x3002;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x8BB8;&#x591A;&#x4EBA;&#x6765;&#x8BF4;&#xFF0C;Rocket &#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x8FDB;&#x5165; Rust &#x7684;&#x4EBA;&#xFF0C;&#x7528;&#x5B83;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x4ECD;&#x7136;&#x5F88;&#x6709;&#x8DA3;&#x3002;&#x5C3D;&#x7BA1;&#x5982;&#x6B64;&#xFF0C;&#x6211;&#x901A;&#x5E38;&#x4F9D;&#x8D56; Rocket &#x4E2D;&#x4E0D;&#x53EF;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4E0D;&#x4F1A;&#x5728;&#x751F;&#x4EA7;&#x4E2D;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>
<h4 id="Rocket-Example"><a href="#Rocket-Example" class="headerlink" title="Rocket Example"></a>Rocket Example</h4><p>Rocket &#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x77ED;&#x793A;&#x4F8B;&#xFF0C;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x793A;&#x4F8B;&#x5B58;&#x50A8;&#x5E93;&#x4E2D;&#x7684;&#x8868;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">rust&#x590D;&#x5236;&#x4EE3;&#x7801;#[derive(Debug, FromForm)]</span><br><span class="line">struct Password&lt;&apos;v&gt; {</span><br><span class="line">    #[field(validate = len(6..))]</span><br><span class="line">    #[field(validate = eq(self.second))]</span><br><span class="line">    first: &amp;&apos;v str,</span><br><span class="line">    #[field(validate = eq(self.first))]</span><br><span class="line">    second: &amp;&apos;v str,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[derive(Debug, FromForm)]</span><br><span class="line">#[allow(dead_code)]</span><br><span class="line">struct Submission&lt;&apos;v&gt; {</span><br><span class="line">    #[field(validate = len(1..))]</span><br><span class="line">    title: &amp;&apos;v str,</span><br><span class="line">    date: Date,</span><br><span class="line">    #[field(validate = len(1..=250))]</span><br><span class="line">    r#abstract: &amp;&apos;v str,</span><br><span class="line">    #[field(validate = ext(ContentType::PDF))]</span><br><span class="line">    file: TempFile&lt;&apos;v&gt;,</span><br><span class="line">    ready: bool,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[derive(Debug, FromForm)]</span><br><span class="line">#[allow(dead_code)]</span><br><span class="line">struct Account&lt;&apos;v&gt; {</span><br><span class="line">    #[field(validate = len(1..))]</span><br><span class="line">    name: &amp;&apos;v str,</span><br><span class="line">    password: Password&lt;&apos;v&gt;,</span><br><span class="line">    #[field(validate = contains(&apos;@&apos;).or_else(msg!(&quot;invalid email address&quot;)))]</span><br><span class="line">    email: &amp;&apos;v str,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[derive(Debug, FromForm)]</span><br><span class="line">#[allow(dead_code)]</span><br><span class="line">struct Submit&lt;&apos;v&gt; {</span><br><span class="line">    account: Account&lt;&apos;v&gt;,</span><br><span class="line">    submission: Submission&lt;&apos;v&gt;,</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[get(&quot;/&quot;)]</span><br><span class="line">fn index() -&gt; Template {</span><br><span class="line">    Template::render(&quot;index&quot;, &amp;Context::default())</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// NOTE: We use `Contextual` here because we want to collect all submitted form</span><br><span class="line">// fields to re-render forms with submitted values on error. If you have no such</span><br><span class="line">// need, do not use `Contextual`. Use the equivalent of `Form&lt;Submit&lt;&apos;_&gt;&gt;`.</span><br><span class="line">#[post(&quot;/&quot;, data = &quot;&lt;form&gt;&quot;)]</span><br><span class="line">fn submit&lt;&apos;r&gt;(form: Form&lt;Contextual&lt;&apos;r, Submit&lt;&apos;r&gt;&gt;&gt;) -&gt; (Status, Template) {</span><br><span class="line">    let template = match form.value {</span><br><span class="line">        Some(ref submission) =&gt; {</span><br><span class="line">            println!(&quot;submission: {:#?}&quot;, submission);</span><br><span class="line">            Template::render(&quot;success&quot;, &amp;form.context)</span><br><span class="line">        }</span><br><span class="line">        None =&gt; Template::render(&quot;index&quot;, &amp;form.context),</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    (form.context.status(), template)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[launch]</span><br><span class="line">fn rocket() -&gt; _ {</span><br><span class="line">    rocket::build()</span><br><span class="line">        .mount(&quot;/&quot;, routes![index, submit])</span><br><span class="line">        .attach(Template::fairing())</span><br><span class="line">        .mount(&quot;/&quot;, FileServer::from(relative!(&quot;/static&quot;)))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Rocket-&#x603B;&#x7ED3;"><a href="#Rocket-&#x603B;&#x7ED3;" class="headerlink" title="Rocket &#x603B;&#x7ED3;"></a>Rocket &#x603B;&#x7ED3;</h4><ul>
<li>&#x4E30;&#x5BCC;&#x7684;&#x5185;&#x7F6E;&#x529F;&#x80FD;&#x3002;</li>
<li>Great developer experience.</li>
<li>&#x4E0D;&#x50CF;&#x4EE5;&#x524D;&#x90A3;&#x6837;&#x79EF;&#x6781;&#x53D1;&#x5C55;&#x3002;</li>
<li>&#x5BF9;&#x4E8E;&#x521D;&#x5B66;&#x8005;&#x6765;&#x8BF4;&#x4ECD;&#x7136;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x9519;&#x7684;&#x9009;&#x62E9;&#x3002;</li>
</ul>
<h2 id="&#x9C9C;&#x4E3A;&#x4EBA;&#x77E5;&#x4F46;&#x4ECD;&#x7136;&#x4EE4;&#x4EBA;&#x5174;&#x594B;&#x7684;-Rust-&#x6846;&#x67B6;"><a href="#&#x9C9C;&#x4E3A;&#x4EBA;&#x77E5;&#x4F46;&#x4ECD;&#x7136;&#x4EE4;&#x4EBA;&#x5174;&#x594B;&#x7684;-Rust-&#x6846;&#x67B6;" class="headerlink" title="&#x9C9C;&#x4E3A;&#x4EBA;&#x77E5;&#x4F46;&#x4ECD;&#x7136;&#x4EE4;&#x4EBA;&#x5174;&#x594B;&#x7684; Rust &#x6846;&#x67B6;"></a>&#x9C9C;&#x4E3A;&#x4EBA;&#x77E5;&#x4F46;&#x4ECD;&#x7136;&#x4EE4;&#x4EBA;&#x5174;&#x594B;&#x7684; Rust &#x6846;&#x67B6;</h2><h3 id="Warp"><a href="#Warp" class="headerlink" title="Warp"></a>Warp</h3><p>hello&#xFF0C;Warp&#xFF01;&#x4F60;&#x662F;&#x4E00;&#x5934;&#x7F8E;&#x4E3D;&#x3001;&#x5947;&#x602A;&#x3001;&#x5F3A;&#x5927;&#x7684;&#x91CE;&#x517D;&#x3002; Warp &#x662F;&#x4E00;&#x4E2A;&#x6784;&#x5EFA;&#x5728; Tokio &#x4E4B;&#x4E0A;&#x7684; Web &#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x597D;&#x7684;&#x6846;&#x67B6;&#x3002;&#x5B83;&#x4E5F;&#x4E0E;&#x6211;&#x4EEC;&#x8FC4;&#x4ECA;&#x4E3A;&#x6B62;&#x770B;&#x5230;&#x7684;&#x5176;&#x4ED6;&#x6846;&#x67B6;&#x6709;&#x5F88;&#x5927;&#x4E0D;&#x540C;&#x3002;</p>
<p>Warp &#x4E0E; Axum &#x6709;&#x4E00;&#x4E9B;&#x5171;&#x540C;traits&#xFF08;&#x54C8;&#x54C8;&#xFF01;&#xFF09;&#xFF1A;&#x5B83;&#x57FA;&#x4E8E; Tokio &#x548C; Hyper &#x6784;&#x5EFA;&#xFF0C;&#x5E76;&#x4F7F;&#x7528; Tower &#x4E2D;&#x95F4;&#x4EF6;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5B83;&#x7684;&#x65B9;&#x6CD5;&#x5374;&#x975E;&#x5E38;&#x4E0D;&#x540C;&#x3002; Warp &#x662F;&#x5EFA;&#x7ACB;&#x5728; <code>Filter</code> trait&#x4E4B;&#x4E0A;&#x7684;&#x3002;</p>
<p>&#x5728; Warp &#x4E2D;&#xFF0C;&#x60A8;&#x6784;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x4E8E;&#x4F20;&#x5165;&#x8BF7;&#x6C42;&#x7684;&#x8FC7;&#x6EE4;&#x5668;&#x7BA1;&#x9053;&#xFF0C;&#x5E76;&#x4E14;&#x8BF7;&#x6C42;&#x901A;&#x8FC7;&#x7BA1;&#x9053;&#x4F20;&#x9012;&#xFF0C;&#x76F4;&#x5230;&#x5230;&#x8FBE;&#x672B;&#x5C3E;&#x3002;&#x8FC7;&#x6EE4;&#x5668;&#x53EF;&#x4EE5;&#x94FE;&#x63A5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7EC4;&#x5408;&#x3002;&#x8FD9;&#x4F7F;&#x60A8;&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x975E;&#x5E38;&#x590D;&#x6742;&#x4F46;&#x4ECD;&#x7136;&#x6613;&#x4E8E;&#x7406;&#x89E3;&#x7684;&#x7BA1;&#x9053;&#x3002;</p>
<p>Warp &#x4E5F;&#x6BD4; Axum &#x66F4;&#x63A5;&#x8FD1; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x60A8;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x66F4;&#x591A;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7C98;&#x5408;&#x7279;&#x5F81;&#x7684; Tokio &#x7ED3;&#x6784;&#x548C;&#x6982;&#x5FF5;&#x3002;</p>
<p>Warp &#x91C7;&#x7528;&#x975E;&#x5E38;&#x5B9E;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x662F;&#x60A8;&#x7684;&#x7F16;&#x7A0B;&#x98CE;&#x683C;&#xFF0C;&#x60A8;&#x4E00;&#x5B9A;&#x4F1A;&#x559C;&#x6B22; Warp &#x7684;&#x8868;&#x73B0;&#x529B;&#x548C;&#x53EF;&#x7EC4;&#x5408;&#x6027;&#x3002;&#x5F53;&#x4F60;&#x67E5;&#x770B;&#x4E00;&#x6BB5; Warp &#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x5B83;&#x901A;&#x5E38;&#x8BFB;&#x8D77;&#x6765;&#x5C31;&#x50CF;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x53D1;&#x751F;&#x7684;&#x6545;&#x4E8B;&#xFF0C;&#x8FD9;&#x5728; Rust &#x4E2D;&#x8D77;&#x4F5C;&#x7528;&#x662F;&#x6709;&#x8DA3;&#x548C;&#x4EE4;&#x4EBA;&#x60CA;&#x5947;&#x7684;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x60F3;&#x5728; RRust Analyzer&#x8BBE;&#x7F6E;&#x4E2D;&#x5173;&#x95ED; &#x7C7B;&#x578B;&#x5D4C;&#x5957; (inlay) &#x63D0;&#x793A;&#x3002;&#x7531;&#x4E8E;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x4E0D;&#x540C;&#x7684;&#x51FD;&#x6570;&#x548C;&#x8FC7;&#x6EE4;&#x5668;&#x90FD;&#x88AB;&#x94FE;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#xFF0C;Warp &#x4E2D;&#x7684; &#x7C7B;&#x578B; &#x53D8;&#x5F97;&#x975E;&#x5E38;&#x957F;&#x4E14;&#x975E;&#x5E38;&#x590D;&#x6742;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x96BE;&#x4EE5;&#x7834;&#x8BD1;&#x3002;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x5B83;&#x53EF;&#x80FD;&#x662F;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x7684;&#x4E00;&#x5806;&#x6D88;&#x606F;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x867D;&#x7136;&#x8FC7;&#x6EE4;&#x5668;&#x6982;&#x5FF5;&#x5728;&#x60A8;&#x5B8C;&#x6210;&#x540E;&#x5F88;&#x68D2;&#xFF0C;&#x4F46;&#x6709;&#x65F6;&#x60A8;&#x5E0C;&#x671B;&#x62E5;&#x6709;&#x4E0E;&#x6240;&#x6709;&#x5176;&#x4ED6;&#x6846;&#x67B6;&#x4E00;&#x8D77;&#x83B7;&#x5F97;&#x7684;&#x58F0;&#x660E;&#x6027;&#x8DEF;&#x7531;&#x5668;&#x3001;&#x5904;&#x7406;&#x7A0B;&#x5E8F;&#x548C;&#x63D0;&#x53D6;&#x5668;&#x6837;&#x5F0F;&#x3002;</p>
<p>Warp &#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x68D2;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x6211;&#x559C;&#x6B22;&#x5B83;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5B83;&#x4E0D;&#x662F;&#x6700;&#x9002;&#x5408;&#x521D;&#x5B66;&#x8005;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x6700;&#x6D41;&#x884C;&#x7684;&#x6846;&#x67B6;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x60A8;&#x53EF;&#x80FD;&#x5F88;&#x96BE;&#x627E;&#x5230;&#x5E2E;&#x52A9;&#x548C;&#x8D44;&#x6E90;&#x3002;&#x4F46;&#x5BF9;&#x4E8E;&#x5FEB;&#x901F;&#x4E14;&#x5C0F;&#x578B;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6765;&#x8BF4;&#xFF0C;&#x5B83;&#x5F88;&#x6709;&#x8DA3;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x7684;&#x5B9E;&#x9A8C;&#x98CE;&#x683C;&#x53EF;&#x80FD;&#x4F1A;&#x7ED9;&#x60A8;&#x5E26;&#x6765;&#x65B0;&#x7684;&#x60F3;&#x6CD5;&#xFF01;</p>
<h4 id="Warp-Example"><a href="#Warp-Example" class="headerlink" title="Warp Example"></a>Warp Example</h4><p>&#x6765;&#x81EA;&#x793A;&#x4F8B;&#x5B58;&#x50A8;&#x5E93;&#x7684; websocket &#x804A;&#x5929;&#x7684;&#x6F14;&#x793A;&#x793A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">rust&#x590D;&#x5236;&#x4EE3;&#x7801;static NEXT_USER_ID: AtomicUsize = AtomicUsize::new(1);</span><br><span class="line"></span><br><span class="line">/// Our state of currently connected users.</span><br><span class="line">///</span><br><span class="line">/// - Key is their id</span><br><span class="line">/// - Value is a sender of `warp::ws::Message`</span><br><span class="line">type Users = Arc&lt;RwLock&lt;HashMap&lt;usize, mpsc::UnboundedSender&lt;Message&gt;&gt;&gt;&gt;;</span><br><span class="line"></span><br><span class="line">#[tokio::main]</span><br><span class="line">async fn main() {</span><br><span class="line">    let users = Users::default();</span><br><span class="line">    // Turn our &quot;state&quot; into a new Filter...</span><br><span class="line">    let users = warp::any().map(move || users.clone());</span><br><span class="line"></span><br><span class="line">    // GET /chat -&gt; websocket upgrade</span><br><span class="line">    let chat = warp::path(&quot;chat&quot;)</span><br><span class="line">        // The `ws()` filter will prepare Websocket handshake...</span><br><span class="line">        .and(warp::ws())</span><br><span class="line">        .and(users)</span><br><span class="line">        .map(|ws: warp::ws::Ws, users| {</span><br><span class="line">            // This will call our function if the handshake succeeds.</span><br><span class="line">            ws.on_upgrade(move |socket| user_connected(socket, users))</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">    // GET / -&gt; index html</span><br><span class="line">    let index = warp::path::end().map(|| warp::reply::html(INDEX_HTML));</span><br><span class="line"></span><br><span class="line">    let routes = index.or(chat);</span><br><span class="line"></span><br><span class="line">    warp::serve(routes).run(([127, 0, 0, 1], 3030)).await;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">async fn user_connected(ws: WebSocket, users: Users) {</span><br><span class="line">    // Use a counter to assign a new unique ID for this user.</span><br><span class="line">    let my_id = NEXT_USER_ID.fetch_add(1, Ordering::Relaxed);</span><br><span class="line"></span><br><span class="line">    eprintln!(&quot;new chat user: {}&quot;, my_id);</span><br><span class="line"></span><br><span class="line">    // Split the socket into a sender and receive of messages.</span><br><span class="line">    let (mut user_ws_tx, mut user_ws_rx) = ws.split();</span><br><span class="line"></span><br><span class="line">    let (tx, rx) = mpsc::unbounded_channel();</span><br><span class="line">    let mut rx = UnboundedReceiverStream::new(rx);</span><br><span class="line"></span><br><span class="line">    tokio::task::spawn(async move {</span><br><span class="line">        while let Some(message) = rx.next().await {</span><br><span class="line">            user_ws_tx</span><br><span class="line">                .send(message)</span><br><span class="line">                .unwrap_or_else(|e| {</span><br><span class="line">                    eprintln!(&quot;websocket send error: {}&quot;, e);</span><br><span class="line">                })</span><br><span class="line">                .await;</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    // Save the sender in our list of connected users.</span><br><span class="line">    users.write().await.insert(my_id, tx);</span><br><span class="line"></span><br><span class="line">    // Return a `Future` that is basically a state machine managing</span><br><span class="line">    // this specific user&apos;s connection.</span><br><span class="line"></span><br><span class="line">    // Every time the user sends a message, broadcast it to</span><br><span class="line">    // all other users...</span><br><span class="line">    while let Some(result) = user_ws_rx.next().await {</span><br><span class="line">        let msg = match result {</span><br><span class="line">            Ok(msg) =&gt; msg,</span><br><span class="line">            Err(e) =&gt; {</span><br><span class="line">                eprintln!(&quot;websocket error(uid={}): {}&quot;, my_id, e);</span><br><span class="line">                break;</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        user_message(my_id, msg, &amp;users).await;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // user_ws_rx stream will keep processing as long as the user stays</span><br><span class="line">    // connected. Once they disconnect, then...</span><br><span class="line">    user_disconnected(my_id, &amp;users).await;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">async fn user_message(my_id: usize, msg: Message, users: &amp;Users) {</span><br><span class="line">    // Skip any non-Text messages...</span><br><span class="line">    let msg = if let Ok(s) = msg.to_str() {</span><br><span class="line">        s</span><br><span class="line">    } else {</span><br><span class="line">        return;</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    let new_msg = format!(&quot;&lt;User#{}&gt;: {}&quot;, my_id, msg);</span><br><span class="line"></span><br><span class="line">    // New message from this user, send it to everyone else (except same uid)...</span><br><span class="line">    for (&amp;uid, tx) in users.read().await.iter() {</span><br><span class="line">        if my_id != uid {</span><br><span class="line">            if let Err(_disconnected) = tx.send(Message::text(new_msg.clone())) {</span><br><span class="line">                // The tx is disconnected, our `user_disconnected` code</span><br><span class="line">                // should be happening in another task, nothing more to</span><br><span class="line">                // do here.</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">async fn user_disconnected(my_id: usize, users: &amp;Users) {</span><br><span class="line">    eprintln!(&quot;good bye user: {}&quot;, my_id);</span><br><span class="line"></span><br><span class="line">    // Stream closed up, so remove from the user list</span><br><span class="line">    users.write().await.remove(&amp;my_id);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Warp-&#x603B;&#x7ED3;"><a href="#Warp-&#x603B;&#x7ED3;" class="headerlink" title="Warp &#x603B;&#x7ED3;"></a>Warp &#x603B;&#x7ED3;</h4><ul>
<li>Functional approach. &#x51FD;&#x6570;&#x5F0F;&#x65B9;&#x6CD5;&#x3002;</li>
<li>Very expressive. &#x975E;&#x5E38;&#x5BCC;&#x6709;&#x8868;&#x73B0;&#x529B;&#x3002;</li>
<li>&#x9760;&#x8FD1; Tokio&#x3001;Tower &#x548C; Hyper&#xFF0C;&#x62E5;&#x6709;&#x5F3A;&#x5927;&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x3002;</li>
<li>&#x4E0D;&#x662F;&#x6700;&#x9002;&#x5408;&#x521D;&#x5B66;&#x8005;&#x7684;&#x6846;&#x67B6;&#x3002;</li>
</ul>
<h3 id="Tide"><a href="#Tide" class="headerlink" title="Tide"></a>Tide</h3><p>Tide &#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7B80;&#x7EA6;&#x7684; Web &#x6846;&#x67B6;&#xFF0C;&#x6784;&#x5EFA;&#x5728; <code>async-std</code> &#x8FD0;&#x884C;&#x65F6;&#x4E4B;&#x4E0A;&#x3002;&#x7B80;&#x7EA6;&#x7684;&#x65B9;&#x6CD5;&#x610F;&#x5473;&#x7740;&#x60A8;&#x5C06;&#x83B7;&#x5F97;&#x975E;&#x5E38;&#x5C0F;&#x7684; API &#x8868;&#x9762;&#x3002; Tide &#x4E2D;&#x7684;&#x5904;&#x7406;&#x51FD;&#x6570;&#x662F; <code>async fn</code> &#xFF0C;&#x5B83;&#x63A5;&#x53D7; <code>Request</code> &#x5E76;&#x8FD4;&#x56DE; <code>Response</code> &#x7684; <code>tide::Result</code> &#x3002;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x6216;&#x53D1;&#x9001;&#x6B63;&#x786E;&#x7684;&#x54CD;&#x5E94;&#x683C;&#x5F0F;&#x53D6;&#x51B3;&#x4E8E;&#x60A8;&#x3002;</p>
<p>&#x867D;&#x7136;&#x8FD9;&#x5BF9;&#x60A8;&#x6765;&#x8BF4;&#x53EF;&#x80FD;&#x662F;&#x66F4;&#x591A;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F46;&#x5B83;&#x4E5F;&#x66F4;&#x76F4;&#x63A5;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x60A8;&#x53EF;&#x4EE5;&#x5B8C;&#x5168;&#x63A7;&#x5236;&#x6B63;&#x5728;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x5BF9;&#x4E8E;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#xFF0C;&#x80FD;&#x591F;&#x5982;&#x6B64;&#x63A5;&#x8FD1; HTTP &#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x662F;&#x4E00;&#x4EF6;&#x4EE4;&#x4EBA;&#x9AD8;&#x5174;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x4E8B;&#x60C5;&#x53D8;&#x5F97;&#x66F4;&#x5BB9;&#x6613;&#x3002;</p>
<p>&#x5B83;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x65B9;&#x6CD5;&#x4E0E;&#x60A8;&#x4ECE; Tower &#x4E2D;&#x4E86;&#x89E3;&#x5230;&#x7684;&#x7C7B;&#x4F3C;&#xFF0C;&#x4F46; Tide &#x516C;&#x5F00;&#x4E86;&#x5F02;&#x6B65;&#x7279;&#x5F81;&#x7BB1;&#xFF0C;&#x4F7F;&#x5B9E;&#x65BD;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#x3002;&#x7531;&#x4E8E; Tide &#x662F;&#x7531;&#x4E5F;&#x53C2;&#x4E0E; Rust &#x5F02;&#x6B65;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x7684;&#x4EBA;&#x4EEC;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x60A8;&#x53EF;&#x4EE5;&#x671F;&#x671B;&#x50CF;&#x6700;&#x8FD1;&#x767B;&#x9646; Nightly &#x7684;&#x7279;&#x5F81;&#x4E2D;&#x7684;&#x9002;&#x5F53;&#x5F02;&#x6B65;&#x65B9;&#x6CD5;&#x4E4B;&#x7C7B;&#x7684;&#x4E1C;&#x897F;&#x5F88;&#x5FEB;&#x5C31;&#x4F1A;&#x88AB;&#x91C7;&#x7528;&#x3002;</p>
<h4 id="Tide-Example"><a href="#Tide-Example" class="headerlink" title="Tide Example"></a>Tide Example</h4><p>&#x6765;&#x81EA;&#x793A;&#x4F8B;&#x5B58;&#x50A8;&#x5E93;&#x7684;&#x7528;&#x6237;&#x4F1A;&#x8BDD;&#x793A;&#x4F8B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">rust&#x590D;&#x5236;&#x4EE3;&#x7801;#[async_std::main]</span><br><span class="line">async fn main() -&gt; Result&lt;(), std::io::Error&gt; {</span><br><span class="line">    femme::start();</span><br><span class="line">    let mut app = tide::new();</span><br><span class="line">    app.with(tide::log::LogMiddleware::new());</span><br><span class="line"></span><br><span class="line">    app.with(tide::sessions::SessionMiddleware::new(</span><br><span class="line">        tide::sessions::MemoryStore::new(),</span><br><span class="line">        std::env::var(&quot;TIDE_SECRET&quot;)</span><br><span class="line">            .expect(</span><br><span class="line">                &quot;Please provide a TIDE_SECRET value of at \                      least 32 bytes in order to run this example&quot;,</span><br><span class="line">            )</span><br><span class="line">            .as_bytes(),</span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line">    app.with(tide::utils::Before(</span><br><span class="line">        |mut request: tide::Request&lt;()&gt;| async move {</span><br><span class="line">            let session = request.session_mut();</span><br><span class="line">            let visits: usize = session.get(&quot;visits&quot;).unwrap_or_default();</span><br><span class="line">            session.insert(&quot;visits&quot;, visits + 1).unwrap();</span><br><span class="line">            request</span><br><span class="line">        },</span><br><span class="line">    ));</span><br><span class="line"></span><br><span class="line">    app.at(&quot;/&quot;).get(|req: tide::Request&lt;()&gt;| async move {</span><br><span class="line">        let visits: usize = req.session().get(&quot;visits&quot;).unwrap();</span><br><span class="line">        Ok(format!(&quot;you have visited this website {} times&quot;, visits))</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    app.at(&quot;/reset&quot;)</span><br><span class="line">        .get(|mut req: tide::Request&lt;()&gt;| async move {</span><br><span class="line">            req.session_mut().destroy();</span><br><span class="line">            Ok(tide::Redirect::new(&quot;/&quot;))</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">    app.listen(&quot;127.0.0.1:8080&quot;).await?;</span><br><span class="line"></span><br><span class="line">    Ok(())</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Tide-&#x603B;&#x7ED3;"><a href="#Tide-&#x603B;&#x7ED3;" class="headerlink" title="Tide &#x603B;&#x7ED3;"></a>Tide &#x603B;&#x7ED3;</h4><ul>
<li>Minimalistic approach. &#x7B80;&#x7EA6;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
<li>Uses <code>async-std</code> runtime. &#x4F7F;&#x7528; <code>async-std</code> &#x8FD0;&#x884C;&#x65F6;&#x3002;</li>
<li>Simple handler functions.  </li>
</ul>
<p>&#x7B80;&#x5355;&#x7684;&#x5904;&#x7406;&#x51FD;&#x6570;&#x3002;</p>
<ul>
<li>Playground of async features.</li>
</ul>
<h3 id="Poem"><a href="#Poem" class="headerlink" title="Poem"></a>Poem</h3><blockquote>
<p>A program is like a poem, you cannot write a poem without writing it. &#x2014; Dijkstra</p>
</blockquote>
<p>Poem &#x7684;&#x81EA;&#x8FF0;&#x6587;&#x4EF6;&#x7528;&#x8FD9;&#x4E9B;&#x8BDD;&#x5411;&#x60A8;&#x81F4;&#x610F;&#x3002; Poem &#x58F0;&#x79F0;&#x662F;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x9F50;&#x5168;&#x4E14;&#x6613;&#x4E8E;&#x4F7F;&#x7528;&#x7684; Web &#x6846;&#x67B6;&#x3002;&#x5927;&#x80C6;&#x7684;&#x4E3B;&#x5F20;&#xFF0C;&#x4F46;Poem&#x4F3C;&#x4E4E;&#x5151;&#x73B0;&#x4E86;&#x3002;&#x4E4D;&#x4E00;&#x770B;&#xFF0C;&#x5B83;&#x7684;&#x7528;&#x6CD5;&#x4E0E; Axum &#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x552F;&#x4E00;&#x7684;&#x533A;&#x522B;&#x662F;&#x60A8;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x5B8F;&#x6765;&#x6807;&#x8BB0;&#x5904;&#x7406;&#x51FD;&#x6570;&#x3002;&#x5B83;&#x8FD8;&#x57FA;&#x4E8E; Tokio &#x548C; Hyper &#x6784;&#x5EFA;&#xFF0C;&#x4E0E; Tower &#x4E2D;&#x95F4;&#x4EF6;&#x5B8C;&#x5168;&#x517C;&#x5BB9;&#xFF0C;&#x540C;&#x65F6;&#x4ECD;&#x7136;&#x66B4;&#x9732;&#x81EA;&#x5DF1;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x7279;&#x5F81;&#x3002;</p>
<p>Poem &#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x7279;&#x6027;&#x4E5F;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x6613;&#x7528;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4E3A;&#x6240;&#x6709;&#x6216;&#x7279;&#x5B9A;&#x7684; <code>Endpoint</code> &#x5B9E;&#x73B0;&#x8BE5;&#x7279;&#x5F81;&#xFF08;Poem &#x8868;&#x8FBE;&#x53EF;&#x4EE5;&#x5904;&#x7406; HTTP &#x8BF7;&#x6C42;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#x7684;&#x65B9;&#x5F0F;&#xFF09;&#xFF0C;&#x6216;&#x8005;&#x60A8;&#x53EA;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x63A5;&#x53D7; <code>Endpoint</code> &#x4F5C;&#x4E3A;&#x7684;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#x8303;&#x56F4;&#x3002;&#x5728;&#x4E0E;&#x5854;&#x548C;&#x670D;&#x52A1;&#x7279;&#x5F81;&#x6253;&#x4EA4;&#x9053;&#x5E76;&#x6709;&#x65F6;&#x6323;&#x624E;&#x4E86;&#x8FD9;&#x4E48;&#x957F;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x80A1;&#x65B0;&#x9C9C;&#x7A7A;&#x6C14;&#x3002;</p>
<p>Poem &#x4E0D;&#x4EC5;&#x4E0E;&#x66F4;&#x5E7F;&#x6CDB;&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x529F;&#x80FD;&#x517C;&#x5BB9;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x672C;&#x8EAB;&#x4E5F;&#x5145;&#x6EE1;&#x4E86;&#x529F;&#x80FD;&#xFF0C;&#x5305;&#x62EC;&#x5BF9; OpenAPI &#x548C; Swagger &#x6587;&#x6863;&#x7684;&#x5B8C;&#x5168;&#x652F;&#x6301;&#x3002;&#x800C;&#x4E14;&#x5B83;&#x4E0D;&#x4EC5;&#x9650;&#x4E8E;&#x57FA;&#x4E8E;HTTP&#x7684;Web&#x670D;&#x52A1;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x57FA;&#x4E8E;Tonic&#x7684;gRPC&#x670D;&#x52A1;&#xFF0C;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;Lambda&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x5207;&#x6362;&#x6846;&#x67B6;&#x3002;&#x6DFB;&#x52A0;&#x5BF9; OpenTelemetry&#x3001;Redis&#x3001;Prometheus &#x7B49;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x52FE;&#x9009;&#x4F01;&#x4E1A;&#x7EA7;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x73B0;&#x4EE3; Web &#x6846;&#x67B6;&#x7684;&#x6240;&#x6709;&#x6846;&#x3002;</p>
<p>Poem &#x4ECD;&#x5904;&#x4E8E; 0.x &#x7248;&#x672C;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x5B83;&#x4FDD;&#x6301;&#x52BF;&#x5934;&#x5E76;&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x7684; 1.0&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x6846;&#x67B6;&#xFF01;</p>
<h4 id="Poem-Example"><a href="#Poem-Example" class="headerlink" title="Poem Example"></a>Poem Example</h4><p>&#x6765;&#x81EA;&#x793A;&#x4F8B;&#x5B58;&#x50A8;&#x5E93;&#x7684; websocket &#x804A;&#x5929;&#x7684;&#x7F29;&#x5199;&#x7248;&#x672C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">rust&#x590D;&#x5236;&#x4EE3;&#x7801;#[handler]</span><br><span class="line">fn ws(</span><br><span class="line">    Path(name): Path&lt;String&gt;,</span><br><span class="line">    ws: WebSocket,</span><br><span class="line">    sender: Data&lt;&amp;tokio::sync::broadcast::Sender&lt;String&gt;&gt;,</span><br><span class="line">) -&gt; impl IntoResponse {</span><br><span class="line">    let sender = sender.clone();</span><br><span class="line">    let mut receiver = sender.subscribe();</span><br><span class="line">    ws.on_upgrade(move |socket| async move {</span><br><span class="line">        let (mut sink, mut stream) = socket.split();</span><br><span class="line"></span><br><span class="line">        tokio::spawn(async move {</span><br><span class="line">            while let Some(Ok(msg)) = stream.next().await {</span><br><span class="line">                if let Message::Text(text) = msg {</span><br><span class="line">                    if sender.send(format!(&quot;{name}: {text}&quot;)).is_err() {</span><br><span class="line">                        break;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        tokio::spawn(async move {</span><br><span class="line">            while let Ok(msg) = receiver.recv().await {</span><br><span class="line">                if sink.send(Message::Text(msg)).await.is_err() {</span><br><span class="line">                    break;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">    })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#[tokio::main]</span><br><span class="line">async fn main() -&gt; Result&lt;(), std::io::Error&gt; {</span><br><span class="line">    let app = Route::new().at(&quot;/&quot;, get(index)).at(</span><br><span class="line">        &quot;/ws/:name&quot;,</span><br><span class="line">        get(ws.data(tokio::sync::broadcast::channel::&lt;String&gt;(32).0)),</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    Server::new(TcpListener::bind(&quot;127.0.0.1:3000&quot;))</span><br><span class="line">        .run(app)</span><br><span class="line">        .await</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="Poem-&#x603B;&#x7ED3;"><a href="#Poem-&#x603B;&#x7ED3;" class="headerlink" title="Poem &#x603B;&#x7ED3;"></a>Poem &#x603B;&#x7ED3;</h4><ul>
<li>&#x5E9E;&#x5927;&#x7684;&#x529F;&#x80FD;&#x96C6;&#x3002;</li>
<li>&#x4E0E; Tokio &#x751F;&#x6001;&#x7CFB;&#x7EDF;&#x517C;&#x5BB9;&#x3002;</li>
<li>&#x4FBF;&#x4E8E;&#x4F7F;&#x7528;&#x3002;</li>
<li>&#x9002;&#x7528;&#x4E8E; gRPC &#x548C; Lambda&#x3002;</li>
</ul>
<h2 id="&#x9700;&#x8981;&#x5173;&#x6CE8;&#x7684;"><a href="#&#x9700;&#x8981;&#x5173;&#x6CE8;&#x7684;" class="headerlink" title="&#x9700;&#x8981;&#x5173;&#x6CE8;&#x7684;"></a>&#x9700;&#x8981;&#x5173;&#x6CE8;&#x7684;</h2><h3 id="Pavex"><a href="#Pavex" class="headerlink" title="Pavex"></a>Pavex</h3><p>&#x6700;&#x521D;&#x6211;&#x8BF4;&#x8FC7;&#x6240;&#x6709; Rust Web &#x6846;&#x67B6;&#x4E4D;&#x4E00;&#x770B;&#x90FD;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#x3002;&#x4ED6;&#x4EEC;&#x5728;&#x7EC6;&#x5FAE;&#x5DEE;&#x522B;&#x4E0A;&#x6709;&#x6240;&#x4E0D;&#x540C;&#xFF0C;&#x6709;&#x65F6;&#x751A;&#x81F3;&#x6BD4;&#x5176;&#x4ED6;&#x4EBA;&#x505A;&#x5F97;&#x66F4;&#x597D;&#x3002;</p>
<p>Pavex &#x662F;&#x8BE5;&#x89C4;&#x5219;&#x7684;&#x4F8B;&#x5916;&#x3002;&#x76EE;&#x524D;&#xFF0C;Pavex &#x7684;&#x5B9E;&#x65BD;&#x8005;&#x6B63;&#x662F; Luca Palmieri&#xFF0C;&#x4ED6;&#x662F;&#x5E7F;&#x53D7;&#x6B22;&#x8FCE;&#x7684;&#x300A;&#x96F6;&#x5230;&#x751F;&#x4EA7;&#x300B;&#x4E00;&#x4E66;&#x7684;&#x4F5C;&#x8005;&#x3002;&#x53EF;&#x4EE5;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x5730;&#x8BF4;&#xFF0C;Luca &#x77E5;&#x9053;&#x4ED6;&#x5728;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x4ED6;&#x6240;&#x6709;&#x7684;&#x60F3;&#x6CD5;&#x548C;&#x7ECF;&#x9A8C;&#x90FD;&#x878D;&#x5165;&#x5230;&#x4E86; Pavex &#x4E2D;&#x3002;</p>
<p>Pavex &#x6709;&#x7740;&#x663E;&#x7740;&#x7684;&#x4E0D;&#x540C;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5C06;&#x81EA;&#x5DF1;&#x89C6;&#x4E3A;&#x6784;&#x5EFA; Rust API &#x7684;&#x4E13;&#x7528;&#x7F16;&#x8BD1;&#x5668;&#x3002;&#x5B83;&#x9700;&#x8981;&#x5BF9;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5E94;&#x8BE5;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x9AD8;&#x7EA7;&#x63CF;&#x8FF0;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684; API Server SDK &#x5305;&#xFF0C;&#x53EF;&#x4F9B;&#x914D;&#x7F6E;&#x548C;&#x542F;&#x52A8;&#x3002;</p>
<p>Pavex &#x4ECD;&#x5904;&#x4E8E;&#x65E9;&#x671F;&#x9636;&#x6BB5;&#xFF0C;&#x4F46;&#x5B83;&#x7EDD;&#x5BF9;&#x662F;&#x4E00;&#x4E2A;&#x503C;&#x5F97;&#x5173;&#x6CE8;&#x7684;&#x9879;&#x76EE;&#x3002;&#x67E5;&#x770B; Luca &#x7684;&#x535A;&#x5BA2;&#x6587;&#x7AE0;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#x4FE1;&#x606F;&#x3002;</p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x6B63;&#x5982;&#x60A8;&#x6240;&#x770B;&#x5230;&#x7684;&#xFF0C;Rust Web &#x6846;&#x67B6;&#x7684;&#x4E16;&#x754C;&#x975E;&#x5E38;&#x591A;&#x6837;&#x5316;&#x3002;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x4E07;&#x80FD;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x60A8;&#x9700;&#x8981;&#x9009;&#x62E9;&#x6700;&#x9002;&#x5408;&#x60A8;&#x9700;&#x6C42;&#x7684;&#x6846;&#x67B6;&#x3002;&#x5982;&#x679C;&#x60A8;&#x521A;&#x521A;&#x5F00;&#x59CB;&#xFF0C;&#x6211;&#x5EFA;&#x8BAE;&#x60A8;&#x4F7F;&#x7528; Actix &#x6216; Axum&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x662F;&#x6700;&#x9002;&#x5408;&#x521D;&#x5B66;&#x8005;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x5F88;&#x68D2;&#x7684;&#x6587;&#x6863;&#x3002;&#x5C31;&#x6211;&#x4E2A;&#x4EBA;&#x800C;&#x8A00;&#xFF0C;&#x6211;&#x5BF9; Pavex &#x5C06;&#x5E26;&#x6765;&#x4EC0;&#x4E48;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x8BF4;&#x5B9E;&#x8BDD;&#xFF0C;&#x5728;&#x6210;&#x4E3A; Axum &#x7684;&#x957F;&#x671F;&#x7528;&#x6237;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x771F;&#x7684;&#x5F88;&#x60F3;&#x770B;&#x770B; Poem&#x3002;</p>
<p><a href="/external_links/24fa49b5b8a06e4c03ef3ab56bfc3ed8.html" target="blank" rel="noopener">&#x539F;&#x6587;&#x5730;&#x5740;:Best Rust Web Frameworks to Use in 2023</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/275c76e627f1fb57697726e2bffca3ff.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7339024907718967359.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7339024907718967359.html" itemprop="url">古茗是如何将小程序编译速度提升3倍的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-26T08:00:00+08:00">
                2024-02-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/eba7d30e33978f5740b33ecfe8720c0bcdb3e4e6e7e8d9d0f798c0f3ceefc32c" alt="unclechong"></p>
<h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><p>&#x968F;&#x7740;&#x4E1A;&#x52A1;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x4E5F;&#x5728;&#x98DE;&#x901F;&#x81A8;&#x80C0;&#xFF0C;&#x53E4;&#x8317;&#x6700;&#x5927;&#x7684; B &#x7AEF;&#x5C0F;&#x7A0B;&#x5E8F;&#x9875;&#x9762;&#x5DF2;&#x7ECF;&#x8D85;&#x8FC7; 260+&#xFF0C;dev &#x6A21;&#x5F0F;&#x4E0B; <code>dist</code> &#x76EE;&#x5F55;&#x8FD1; 35M&#xFF0C;&#x6027;&#x80FD;&#x7A0D;&#x5DEE;&#x7684;&#x8BBE;&#x5907;&#x4ECE; &#x300E;&#x4EE3;&#x7801;&#x6539;&#x52A8; - Taro &#x70ED;&#x66F4;&#x65B0; - &#x5C0F;&#x7A0B;&#x5E8F;IDE build - &#x9875;&#x9762;reload&#x300F;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x8D85;&#x8FC7; 13s&#xFF1B;&#x800C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5728;&#x65E5;&#x5E38;&#x9700;&#x6C42;&#x5F00;&#x53D1;&#x65F6;&#x6BCF;&#x5929;&#x53EF;&#x80FD;&#x91CD;&#x590D;&#x4E0A;&#x767E;&#x6B21;&#xFF0C;&#x8FD9;&#x4F1A;&#x6781;&#x5927;&#x7684;&#x964D;&#x4F4E;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<h2 id="&#x6784;&#x5EFA;&#x73B0;&#x72B6;&#x5206;&#x6790;"><a href="#&#x6784;&#x5EFA;&#x73B0;&#x72B6;&#x5206;&#x6790;" class="headerlink" title="&#x6784;&#x5EFA;&#x73B0;&#x72B6;&#x5206;&#x6790;"></a>&#x6784;&#x5EFA;&#x73B0;&#x72B6;&#x5206;&#x6790;</h2><p>&#x5148;&#x804A;&#x4E0B;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF0C;&#x6211;&#x4EEC;&#x7684; B &#x7AEF;&#x5C0F;&#x7A0B;&#x5E8F;&#x90FD;&#x8DD1;&#x5728;&#x9489;&#x9489;&#x5C0F;&#x7A0B;&#x5E8F;&#x5185;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x4E3A; <code>Taro</code> + <code>React</code>&#xFF0C;debug &#x5DE5;&#x5177;&#x662F;<a href="/external_links/aa0f40f81c1f74a0900c839ab72934a7.html" target="blank" rel="noopener">&#x652F;&#x4ED8;&#x5B9D;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;</a>&#xFF08;&#x4EE5;&#x4E0B;&#x7B80;&#x79F0;IDE&#xFF09;&#xFF0C;&#x5148;&#x6807;&#x8BB0;&#x4E00;&#x4E0B;&#x5B83;&#x65B9;&#x4FBF;&#x540E;&#x9762;&#x5BF9;&#x5B83;&#x5F00;&#x5927;&#x62DB;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/d773ede81d3699b8cc4516fd047f150f25b3d215a0bcd4ae87c65d76ebe76bad" alt="image.png"></p>
<p>&#x7528;&#x8FC7;&#x5C0F;&#x7A0B;&#x5E8F;&#x591A;&#x7AEF;&#x6846;&#x67B6;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x5E94;&#x8BE5;&#x90FD;&#x6E05;&#x695A;&#xFF0C;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x7531;&#x6846;&#x67B6;&#x5C42;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6784;&#x5EFA;&#xFF0C;&#x5C06;&#x8FD0;&#x884C;&#x65F6;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;&#x5BF9;&#x5E94;&#x5E73;&#x53F0;&#x7684; <code>DSL</code> &#x5E76;&#x4E14;&#x8F93;&#x51FA; <code>dist</code> &#x5305;&#xFF0C;&#x5728;&#x7531;&#x5BF9;&#x5E94;&#x5E73;&#x53F0;&#x5BF9; <code>dist</code> &#x5305;&#x5728;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5168;&#x91CF;&#x6784;&#x5EFA;&#xFF0C;&#x6700;&#x7EC8;&#x8F93;&#x51FA;&#x79BB;&#x7EBF;&#x5305;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F; watch &#x6A21;&#x5F0F; <code>IDE</code> &#x8FD8;&#x4F1A;&#x5BF9; <code>dist</code> &#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x5168;&#x91CF;&#x7684;&#x76D1;&#x542C;&#xFF0C;&#x6587;&#x4EF6;&#x6BCF;&#x4E00;&#x6B21;&#x7684;&#x6539;&#x52A8;&#x90FD;&#x4F1A;&#x91CD;&#x65B0;&#x7684;&#x8D70;&#x4E00;&#x904D;&#x8FD9;&#x9053;&#x6D41;&#x7A0B;&#x3002;</p>
<p>&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x7684;&#x6280;&#x672F;&#x6808;&#xFF0C;&#x5C31;&#x662F;&#x5148;&#x7531; <code>Taro</code> &#x6784;&#x5EFA;&#xFF0C;&#x5BF9;&#x5E94;&#x4E0B;&#x56FE;&#x5DE6;&#x4FA7;&#x7684;&#x65E5;&#x5FD7;&#xFF1B;&#x7136;&#x540E;&#x5462; <code>IDE</code> &#x518D;&#x6B21;&#x6784;&#x5EFA;&#xFF0C;&#x4E0B;&#x56FE;&#x6A21;&#x62DF;&#x5668;&#x4E0B;&#x9762;&#x7684; <strong>&#x7F16;&#x8BD1;&#x4E2D;</strong> &#x5C31;&#x662F; <code>IDE</code> &#x6784;&#x5EFA;&#x7684;&#x6807;&#x5FD7;&#xFF1B;<code>IDE</code> &#x6784;&#x5EFA;&#x5B8C;&#x6210;&#x540E;&#x6A21;&#x62DF;&#x5668;&#x5C31;&#x4F1A;&#x81EA;&#x52A8; reload &#x52A0;&#x8F7D;&#x6700;&#x65B0;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6dbb0e8df107820fee9e009d7b1e69eaa6a4fd4187d9fb077072664c5a852f86" alt="&#x89C6;&#x9891;&#x8F6C;Gif_&#x7231;&#x7ED9;&#x7F51;_aigei_com (2).gif"></p>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x4E00;&#x6B21;&#x5C0F;&#x7A0B;&#x5E8F;&#x70ED;&#x66F4;&#x65B0;&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#xFF0C;&#x770B;&#x4F3C;&#x633A;&#x5FEB;&#x6CA1;&#x95EE;&#x9898;&#x5BF9;&#x5427;&#xFF0C;&#x6765;&#x6211;&#x4EEC;&#x628A;&#x5242;&#x91CF;&#x52A0;&#x5927;&#x3002;</p>
<h3 id="Taro-&#x6784;&#x5EFA;&#x6CA1;&#x6BDB;&#x75C5;"><a href="#Taro-&#x6784;&#x5EFA;&#x6CA1;&#x6BDB;&#x75C5;" class="headerlink" title="Taro &#x6784;&#x5EFA;&#x6CA1;&#x6BDB;&#x75C5;"></a>Taro &#x6784;&#x5EFA;&#x6CA1;&#x6BDB;&#x75C5;</h3><p>&#x521A;&#x521A;&#x53EA;&#x662F; hello world&#xFF0C;&#x6211;&#x4EEC;&#x4E0A;&#x771F;&#x5B9E;&#x7684;&#x9879;&#x76EE;&#xFF08;&#x9875;&#x9762;&#x505A;&#x4E86;&#x8131;&#x654F;&#xFF09;&#xFF0C;&#x6D4B;&#x8BD5;&#x8BBE;&#x5907;&#x662F;&#x4E00;&#x53F0; M1 Pro&#xFF0C;&#x4EC5;&#x6539;&#x52A8;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x8FDE;&#x7EED;&#x8DD1;&#x4E09;&#x6B21;&#x53D6;&#x6700;&#x5FEB;&#x7684;&#x4E00;&#x6B21;&#xFF0C;&#x4F60;&#x4EEC;&#x770B;&#x8DD1;&#x4E86;&#x51E0;&#x79D2;&#xFF0C;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x8981; <strong>10s+</strong>&#x3002;&#x8FD8;&#x6709;&#x4E9B;&#x540C;&#x5B66;&#x5728;&#x7528;&#x516C;&#x53F8;&#x914D;&#x7684; windows &#x8BBE;&#x5907;&#xFF0C;&#x8FD8;&#x4F1A;&#x66F4;&#x6162;&#x3002;&#x52A8;&#x56FE;&#x4E2D;&#x7684; <code>IDE&#x7248;&#x672C;&#x53F7;</code> &#x5148;&#x5FFD;&#x7565;&#x540E;&#x9762;&#x4F1A;&#x6709;&#x5927;&#x7528;&#x5904;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/2488bf6e27819461ccd50b8a6d743ca31e5e3ea019e94e39183e337bf560424a" alt="a.gif"></p>
<p>&#x4ECE;&#x4E24;&#x5F20;&#x5BF9;&#x6BD4;&#x56FE;&#x53EF;&#x4EE5;&#x76F4;&#x89C2;&#x7684;&#x770B;&#x51FA;&#xFF0C;&#x70ED;&#x66F4;&#x65B0;&#x7684;&#x65F6;&#x95F4;&#x4E3B;&#x8981;&#x82B1;&#x8D39;&#x540E;&#x534A;&#x6BB5; <code>IDE</code> &#x7684;&#x6784;&#x5EFA;&#x4E0A;&#x3002;&#x4ECE;&#x6570;&#x636E;&#x4E0A;&#x770B;&#x4E5F;&#x786E;&#x5B9E;&#x5982;&#x6B64;&#xFF0C;<code>Taro</code> &#x7684;&#x6784;&#x5EFA;&#x65F6;&#x95F4;&#x4ECE; 0.3s+ &#x4E0A;&#x5347;&#x5230; 1.6s+&#xFF0C;<code>IDE</code> &#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x4ECE; 2s &#x5DE6;&#x53F3;&#x5C45;&#x7136;&#x5347;&#x5230;&#x4E86;&#x6050;&#x6016;&#x7684; <strong>9s</strong> &#x591A;&#xFF0C;&#x53EF;&#x6015;&#x2026;</p>
<p><code>Taro 3.5</code> &#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C; <code>webpack</code> &#x8FD8;&#x505C;&#x7559;&#x5728;&#x8001;&#x7248;&#x672C;&#xFF0C;&#x5404;&#x79CD;&#x7F13;&#x5B58;&#x8BBE;&#x7F6E;&#x4E5F;&#x6CA1;&#x6709;&#x4F18;&#x5316;&#xFF0C;&#x70ED;&#x66F4;&#x65B0;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x4E9B;&#x6162;&#x7684;&#x3002;&#x78B0;&#x5DE7;&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x521A;&#x521A;&#x5B8C;&#x6210;&#x4E86; <code>Taro</code> &#x7684;&#x5347;&#x7EA7;&#xFF0C;&#x4ECE; <code>3.4.0</code> &#x5347;&#x7EA7;&#x5230; <code>3.6.19</code> &#xFF0C;&#x5728;&#x5347;&#x7EA7;&#x540E;&#x9996;&#x6B21;&#x6784;&#x5EFA;&#x8FD8;&#x6709;&#x70ED;&#x66F4;&#x65B0;&#x901F;&#x5EA6;&#x90FD;&#x5F97;&#x5230;&#x4E86;&#x5F88;&#x5927;&#x7684;&#x63D0;&#x5347;&#xFF0C;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x4E0B; <strong>200+ &#x9875;&#x9762;&#x7684;&#x5C0F;&#x7A0B;&#x5E8F;&#x70ED;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x63A7;&#x5236;&#x5728; 2s &#x5185;</strong>&#xFF0C;&#x8FD9;&#x5BF9;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x8DB3;&#x591F;&#xFF01;&#x6240;&#x4EE5; <code>Taro</code> &#x6784;&#x5EFA;&#x8FD9;&#x90E8;&#x5206;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FC7;&#x3002;</p>
<p>&#x81F3;&#x4E8E; <code>Taro 3.5+</code> &#x6DFB;&#x52A0;&#x54EA;&#x4E9B;&#x9ED1;&#x79D1;&#x6280;&#xFF0C;&#x53EF;&#x4EE5;&#x79FB;&#x6B65;<a href="/external_links/b2fc4bf19718291edef33e781cf250e6.html" target="blank" rel="noopener">Taro v3.5 &#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#xFF1A;&#x5F00;&#x53D1;&#x4F53;&#x9A8C;&#x63D0;&#x5347;</a>&#x3002;&#x542C;&#x8BF4;&#x540E;&#x7EED; 4.0 &#x7248;&#x672C;&#x8FD8;&#x652F;&#x6301;&#x4E86; <code>vite</code> &#x6784;&#x5EFA;&#xFF08;&#x597D;&#x5947;&#x662F;&#x5982;&#x4F55;&#x652F;&#x6301;&#x539F;&#x751F; <code>esm</code> &#x7684;&#xFF09;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x63A8;&#x8350;&#x5927;&#x5BB6; <code>Taro</code> &#x7684;&#x7248;&#x672C;&#x81F3;&#x5C11;&#x5728;3.5+&#xFF0C;&#x9664;&#x4E86;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x63D0;&#x5347;&#x5916;&#xFF0C;&#x963F;&#x91CC;&#x7CFB;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x5305;&#x4F53;&#x79EF;&#x4E5F;&#x4F1A;&#x964D;&#x4F4E;&#x975E;&#x5E38;&#x591A;&#xFF0C;<strong>&#x6CE8;&#x610F;&#x662F;&#x963F;&#x91CC;&#x7CFB;</strong>&#xFF0C;&#x56E0;&#x4E3A;&#x6A21;&#x677F;&#x652F;&#x6301;&#x4E86; <code>import</code> &#x8BED;&#x6CD5;&#x6BCF;&#x4E2A;&#x6A21;&#x677F;&#x90FD;&#x4F1A;&#x51CF;&#x5C11;10k&#xFF0C;&#x9875;&#x9762;&#x8D8A;&#x591A;&#x6548;&#x679C;&#x8D8A;&#x660E;&#x663E;&#x8FD9;&#x91CC;&#x4E0D;&#x5C55;&#x5F00;&#x8BF4;&#x4E86;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x8BF7;&#x6CE8;&#x610F;<strong>&#x5347;&#x7EA7;&#x6709;&#x98CE;&#x9669;</strong>&#xFF0C;Breaking change &#x8FD8;&#x662F;&#x6709;&#x4E00;&#x4E9B;&#x7684;&#x3002;&#x4E5F;&#x5DE7;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4EFD;&#x5347;&#x7EA7;&#x8E29;&#x5751;&#x8BB0;&#x5F55;&#xFF0C;&#x4EC5;&#x4F9B;&#x53C2;&#x8003;<a href="/external_links/4880a934fe75b2ce00b5ac52dc896ef9.html" target="blank" rel="noopener">Taro 3.6+&#x5347;&#x7EA7;&#x8E29;&#x5751;&#x8BB0;&#x5F55;</a>&#x3002;</p>
<h3 id="IDE-&#x6784;&#x5EFA;&#x6210;&#x4E3A;&#x74F6;&#x9888;"><a href="#IDE-&#x6784;&#x5EFA;&#x6210;&#x4E3A;&#x74F6;&#x9888;" class="headerlink" title="IDE &#x6784;&#x5EFA;&#x6210;&#x4E3A;&#x74F6;&#x9888;"></a>IDE &#x6784;&#x5EFA;&#x6210;&#x4E3A;&#x74F6;&#x9888;</h3><p>&#x90A3; <code>IDE</code> &#x6784;&#x5EFA;&#x90E8;&#x5206;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6162;&#x8FD9;&#x4E48;&#x591A;&#x5462;&#xFF1F;</p>
<h4 id="&#x4EE3;&#x7801;&#x91CF;&#x589E;&#x52A0;"><a href="#&#x4EE3;&#x7801;&#x91CF;&#x589E;&#x52A0;" class="headerlink" title="&#x4EE3;&#x7801;&#x91CF;&#x589E;&#x52A0;"></a>&#x4EE3;&#x7801;&#x91CF;&#x589E;&#x52A0;</h4><p><strong>&#x6700;&#x76F4;&#x89C2;&#x7684;&#x56E0;&#x7D20;&#x5C31;&#x4EE3;&#x7801;&#x91CF;&#x589E;&#x591A;&#x4E86;</strong>&#xFF0C;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x6784;&#x5EFA;&#x5DE5;&#x5177;&#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x90FD;&#x548C;&#x4EE3;&#x7801;&#x91CF;&#x6210;&#x6B63;&#x76F8;&#x5173;&#x3002;&#x524D;&#x9762;&#x804A;&#x5230; <code>IDE</code> &#x4F1A;&#x518D;&#x6B21;&#x5168;&#x91CF;&#x6784;&#x5EFA; <code>Taro</code> &#x8F93;&#x51FA;&#x7684; <code>dist</code> &#x6587;&#x4EF6;&#x5939;&#xFF1A;</p>
<ul>
<li>demo &#x9879;&#x76EE; <code>dist</code> &#x4F53;&#x79EF;&#x4E3A; <strong>2.8M</strong></li>
<li>&#x771F;&#x5B9E;&#x9879;&#x76EE;&#x5728; dev &#x6A21;&#x5F0F;&#x4E0B; <code>Taro</code> &#x8F93;&#x51FA;&#x7684; <code>dist</code> &#x8FD1; <strong>35M</strong> &#x7684;</li>
</ul>
<p>&#x4E0B;&#x56FE;&#x662F;&#x76EE;&#x524D;&#x771F;&#x5B9E;&#x9879;&#x76EE;&#x5728; dev &#x6A21;&#x5F0F;&#x4E0B;&#x7684; <code>dist</code> &#x76EE;&#x5F55;&#xFF0C;&#x5728;&#x7ECF;&#x8FC7;&#x51E0;&#x8F6E;&#x6784;&#x5EFA;&#x914D;&#x7F6E;&#x4F18;&#x5316;&#x540E;&#x505C;&#x7559;&#x5728; <strong>35M</strong> &#x5DE6;&#x53F3;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/7668a2ae02958f9b5070bb05424cdb93db195eea991db8739d4f18b51d1eb83d" alt><br>&#x524D;&#x540E;&#x4EE3;&#x7801;&#x4F53;&#x79EF;&#x81A8;&#x80C0;&#x4E86;&#x5341;&#x51E0;&#x500D;&#xFF0C;&#x6240;&#x4EE5; <code>IDE</code> &#x76F8;&#x6BD4; demo &#x9879;&#x76EE;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x6162;&#x662F;&#x5FC5;&#x7136;&#x7684;&#x3002;&#x5373;&#x4F7F;&#x4E0D;&#x7ECF;&#x8FC7; <code>Taro</code> &#x7684;&#x6784;&#x5EFA;&#x76F4;&#x63A5;&#x5728; <code>IDE</code> &#x4E2D;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x518D;&#x89E6;&#x53D1;&#x70ED;&#x66F4;&#x65B0;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#x7684;&#x6162;&#x3002;</p>
<p>&#x4F30;&#x8BA1;&#x6709;&#x5C0F;&#x4F19;&#x4F34;&#x4F1A;&#x8BF4;&#x4E86;&#x201C;&#x8FD9;&#x4E0D;&#x516C;&#x5E73;&#x201D;&#xFF0C;&#x4F60;&#x8FD9;&#x662F; <code>Taro</code> &#x5E94;&#x7528;&#xFF0C;&#x4E03;&#x8F6C;&#x516B;&#x8F6C;&#x5168;&#x662F;&#x6A21;&#x7248;&#x4EE3;&#x7801;&#xFF0C;&#x5982;&#x679C;&#x7EAF;&#x539F;&#x751F;&#x5C0F;&#x7A0B;&#x5E8F;&#x80AF;&#x5B9A;&#x4E0D;&#x4F1A;&#x8FD9;&#x6837;&#xFF01;&#xFF01;&#xFF01;&#x55EF;~&#xFF0C;&#x6211;&#x731C;&#x53EF;&#x80FD;&#x4F1A;&#x597D;&#x4E00;&#x4E9B;&#x5427;&#x6211;&#x4E5F;&#x6CA1;&#x9A8C;&#x8BC1;&#x8FC7;&#xFF08;&#x6CA1;&#x6709;&#x8FD9;&#x4E48;&#x5927;&#x539F;&#x751F;&#x5C0F;&#x7A0B;&#x5E8F;&#x9879;&#x76EE;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x89C9;&#x5F97;&#x7ED3;&#x8BBA;&#x5E94;&#x8BE5;&#x4E5F;&#x662F;&#x5927;&#x5DEE;&#x4E0D;&#x5DEE;&#x3002;&#x5982;&#x679C;&#x6709;&#x5C0F;&#x4F19;&#x4F34;&#x80FD;&#x9A8C;&#x8BC1;&#x539F;&#x751F;&#x652F;&#x4ED8;&#x5B9D;&#x5C0F;&#x7A0B;&#x5E8F;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x4E0D;&#x4F1A;&#x968F;&#x7740;&#x4EE3;&#x7801;&#x589E;&#x52A0;&#x800C;&#x53D8;&#x6162;&#xFF0C;&#x90A3;&#x6211;&#x8BC4;&#x8BBA;&#x533A;&#x76F4;&#x63A5;&#x9001; 10 &#x676F;&#x53E4;&#x8317;&#x597D;&#x5427;&#x1F604;&#x1F604;&#x1F604;</p>
<h4 id="IDE-&#x7248;&#x672C;&#x5F69;&#x86CB;"><a href="#IDE-&#x7248;&#x672C;&#x5F69;&#x86CB;" class="headerlink" title="IDE &#x7248;&#x672C;&#x5F69;&#x86CB;"></a>IDE &#x7248;&#x672C;&#x5F69;&#x86CB;</h4><p>&#x7EE7;<a href="https://dev.newban.cn/7255480546427371578">&#x4E0A;&#x7BC7;</a>&#x53CB;&#x597D;&#x7684;&#x63A2;&#x8BA8;&#x7684;&#x6587;&#x7AE0;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x81F4;&#x656C;&#x4E0B;&#x652F;&#x4ED8;&#x5B9D;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;(IDE)</p>
<p>&#x91CD;&#x70B9;&#x6765;&#x4E86;&#xFF0C;&#x524D;&#x65B9;&#x9AD8;&#x80FD;&#xFF01;&#xFF01;&#xFF01;&#x80FD;&#x770B;&#x5230;&#x7684;&#x90FD;&#x662F;&#x6709;&#x7F18;&#x4EBA;&#xFF0C;<strong>&#x8BF7;&#x5927;&#x5BB6;&#x5C06;&#x652F;&#x4ED8;&#x5B9D;&#x5C0F;&#x7A0B;&#x5E8F;&#x5F00;&#x53D1;&#x8005;&#x5DE5;&#x5177;(IDE) &#x964D;&#x7EA7;&#x5230;3.4.3&#x4E4B;&#x524D;</strong>&#xFF0C;<br>&#x6211;&#x4FDD;&#x4F60;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x63D0;&#x5347;30%&#x4EE5;&#x4E0A;&#xFF0C;&#x964D;&#x7EA7;&#x540E;&#x90FD;&#x8BF4;&#x597D;&#xFF0C;Mac Windows&#x771F;&#x7684;&#x90FD;&#x7BA1;&#x7528;&#xFF0C;&#x6CA1;&#x6709;&#x6548;&#x679C;&#x6211;&#x518D;&#x9001;5&#x676F;&#x53E4;&#x8317;&#xFF0C;&#x7BA1;&#x7528;&#x7684;&#x8BDD;&#x8BB0;&#x5F97;&#x56DE;&#x6765;&#x8D4F;&#x4E2A;&#x4E00;&#x952E;&#x4E09;&#x8FDE;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/e3761767f6ac6298a0be245f79fafac16b39820cb00a22719866a2f3468c3f8d" alt><br>&#x65E0;&#x56FE;&#x65E0;&#x8BC1;&#x636E;&#xFF0C;&#x5148;&#x4E0A;&#x56FE;&#x3002;&#x964D;&#x7EA7;&#x540E;&#xFF0C;&#x76F8;&#x540C;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x76F8;&#x540C;&#x7684;&#x6539;&#x52A8;&#xFF0C;<code>IDE</code> &#x76F8;&#x540C;&#x7684;&#x914D;&#x7F6E; <strong>&#x53EA;&#x8981; 4s</strong>&#xFF0C;&#x60CA;&#x4E86;&#xFF01;&#xFF01;&#xFF01;&#x8FD9;&#x4E2A;&#x6587;&#x7AE0;&#x6211;&#x662F;&#x4E0D;&#x662F;&#x4E0D;&#x7528;&#x518D;&#x5199;&#x7684;&#xFF0C;&#x54C8;&#x54C8;&#xFF0C;&#x76F4;&#x63A5;&#x5B8C;&#x7ED3;&#x3002;&#x8FD9;&#x4E5F;&#x89E3;&#x91CA;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x8981;&#x5728;&#x52A8;&#x56FE;&#x4E0A;&#x9762;&#x52A0; <code>IDE&#x7248;&#x672C;&#x53F7;</code> &#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/70ffbd4c7c3907a51c48dbe9971f1964a3bb261c630fa736bc431a2d8dbdd91c" alt="&#x89C6;&#x9891;&#x8F6C;Gif_&#x7231;&#x7ED9;&#x7F51;_aigei_com (1).gif"></p>
<p>&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x4E0D;&#x6E05;&#x695A;&#xFF0C;&#x6211;&#x662F;&#x4EBA;&#x8089;&#x8BD5;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x8BB0;&#x5F97;&#x90A3;&#x662F;&#x67D0;&#x5929;&#x7684;&#x4E0B;&#x5348;&#x5076;&#x7136;&#x95F4;&#x7684;&#x4E00;&#x4E2A;&#x964D;&#x7EA7;&#x53D1;&#x73B0;&#x4E86;&#x65B0;&#x5927;&#x9646;&#x3002;&#x6709;&#x5B98;&#x65B9;&#x5927;&#x5927;&#x770B;&#x5230;&#x5E0C;&#x671B;&#x89E3;&#x51B3;&#x6211;&#x7684;&#x7591;&#x60D1;&#xFF0C;&#x4F60;&#x4EEC;&#x5230;&#x5E95;&#x505A;&#x4E86;&#x5565; &#x201C;&#x4F18;&#x5316;&#x201D; &#xFF1F;</p>
<p>3.4.3 &#x4E4B;&#x540E;&#x5B98;&#x65B9;&#x53C8;&#x53D1;&#x4E86;&#x597D;&#x591A;&#x65B0;&#x7248;&#x672C;&#xFF0C;&#x751A;&#x81F3;&#x6709;&#x6BD4;&#x8D5B;&#x4E13;&#x7528;&#x7248;&#x672C;&#x1F604;&#xFF08;&#x8868;&#x626C;&#x4E0B; changelog &#x5199;&#x7684;&#x771F;&#x597D;&#x771F;&#x8BE6;&#x7EC6;&#xFF0C;&#x6BD4;&#x9489;&#x9489;&#x5C0F;&#x7A0B;&#x5E8F;&#x6587;&#x6863;&#x5F3A;&#x591A;&#x4E86;&#xFF09;&#xFF0C;&#x65B0;&#x7248;&#x672C;&#x589E;&#x52A0;&#x4E86;&#x5F88;&#x591A;&#x7684; feature &#x4FEE;&#x590D;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x7F3A;&#x9677;&#xFF0C;&#x752D;&#x7BA1;&#x5176;&#x4ED6;&#x5728;&#x7889;&#x5821;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5C31;&#x4F18;&#x5316;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x8FC7;&#x5FEB;&#x8FD9;&#x4E2A;&#x4E00;&#x70B9;&#xFF0C;&#x53CD;&#x6B63;&#x6211;&#x662F;&#x4E0D;&#x4F1A;&#x5347;&#x7EA7;&#x3002;</p>
<h2 id="&#x53EF;&#x884C;&#x65B9;&#x6848;"><a href="#&#x53EF;&#x884C;&#x65B9;&#x6848;" class="headerlink" title="&#x53EF;&#x884C;&#x65B9;&#x6848;"></a>&#x53EF;&#x884C;&#x65B9;&#x6848;</h2><p>&#x90A3;&#x73B0;&#x72B6;&#x5982;&#x6B64;&#xFF0C;&#x6765;&#x5206;&#x6790;&#x4E0B;&#x770B;&#x770B;&#x6709;&#x54EA;&#x4E9B;&#x53EF;&#x884C;&#x7684;&#x65B9;&#x6848;&#x3002;</p>
<h3 id="&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E00;&#x62C6;&#x591A;"><a href="#&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E00;&#x62C6;&#x591A;" class="headerlink" title="&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E00;&#x62C6;&#x591A;"></a>&#x65B9;&#x6848;&#x4E00;&#xFF1A;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E00;&#x62C6;&#x591A;</h3><p>&#x5355;&#x4E00;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x4EE3;&#x7801;&#x91CF;&#x592A;&#x5927;&#xFF0C;&#x90A3;&#x5C31;&#x6309;&#x4E1A;&#x52A1;&#x57DF;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#xFF0C;&#x4ECE;&#x6E90;&#x5934;&#x6765;&#x964D;&#x4F4E;&#x4EE3;&#x7801;&#x91CF;&#x3002;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x5927;&#x76D8;&#x3001;&#x5546;&#x54C1;&#x7BA1;&#x7406;&#x8FD9;&#x79CD;&#x5173;&#x8054;&#x6027;&#x4E0D;&#x9AD8;&#xFF0C;&#x903B;&#x8F91;&#x53C8;&#x5F88;&#x590D;&#x6742;&#x7684;&#x4E1A;&#x52A1;&#x5C31;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x62C6;&#x6210;&#x72EC;&#x7ACB;&#x7684;&#x4E24;&#x4E2A;&#x5C0F;&#x7A0B;&#x9879;&#x76EE;&#x3002;&#x8FD9;&#x6837;&#x4EE3;&#x7801;&#x91CF;&#x5C31;&#x4F1A;&#x88AB;&#x6253;&#x6563;&#xFF0C;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x81EA;&#x7136;&#x800C;&#x7136;&#x5C31;&#x89E3;&#x51B3;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x76EE;&#x524D;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x963B;&#x529B;&#xFF0C;&#x4F46;&#x786E;&#x5B9E;&#x662F;&#x6211;&#x4EEC;&#x540E;&#x7EED;b&#x7AEF;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x8FED;&#x4EE3;&#x7684;&#x4E00;&#x4E2A;&#x5927;&#x65B9;&#x5411;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/f8d11403fda5e5afb180df5a2588c623b81645804eaa3a4c8ffcac1ac6b7fd98" alt><br>&#x4ECE;&#x5F00;&#x53D1;&#x7684;&#x89D2;&#x5EA6;&#x770B;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x662F;&#x975E;&#x5E38;&#x5408;&#x7406;&#x7684;&#xFF0C;&#x5C0F;&#x7A0B;&#x5E8F;&#x5C31;&#x662F;&#x8981; <strong>&#x201C;&#x5C0F;&#x201D;</strong>, <strong>&#x201C;&#x5FEB;&#x201D;</strong>&#xFF0C;<strong>&#x201C;&#x8F7B;&#x201D;</strong>&#xFF1B;&#x5C0F;&#x7A0B;&#x5E8F;&#x8D8A;&#x5C0F;&#xFF0C;&#x542F;&#x52A8;&#x4F53;&#x9A8C;&#x3001;&#x5185;&#x5B58;&#x5360;&#x7528;&#x90FD;&#x4F1A;&#x66F4;&#x4F18;&#xFF0C;&#x800C;&#x4E14;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x67B6;&#x6784;&#x5C42;&#x4E5F;&#x5BF9;&#x53D1;&#x5E03;&#x3001;&#x9884;&#x89C8;&#x7B49;&#x73AF;&#x8282;&#x5BF9;&#x5305;&#x4F53;&#x79EF;&#x505A;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x9650;&#x5236;&#x3002;&#x4F46;&#x662F;&#x4ECE;&#x4E1A;&#x52A1;&#x7684;&#x89C6;&#x89D2;&#x770B;&#x5C24;&#x5176;&#x662F;&#x64CD;&#x4F5C;&#x4EA4;&#x4E92;&#x5DF2;&#x7ECF;&#x56FA;&#x5316;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x518D;&#x53BB;&#x6539;&#x9020;&#xFF0C;&#x8FD9;&#x4F1A;&#x5927;&#x5927;&#x63D0;&#x5347;&#x7528;&#x6237;&#x7684;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8FDB;&#x884C;&#x5FEB;&#x901F;&#x62C6;&#x5206;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x5E94;&#x7528;&#x5E95;&#x5C42;&#x7684;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x8981;&#x975E;&#x5E38;&#x5065;&#x58EE;&#xFF0C;&#x57FA;&#x7840;&#x7EC4;&#x4EF6;&#x3001;&#x5DE5;&#x5177;&#x5E93;&#x3001;uuc &#x7B49;&#x901A;&#x7528;&#x80FD;&#x529B;&#x4E0D;&#x80FD;&#x518D;&#x6BCF;&#x4E2A;&#x5C0F;&#x7A0B;&#x5E8F;&#x90FD;&#x5197;&#x4F59;&#x4E00;&#x4EFD;&#x3002;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x5E94;&#x7528;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3001;&#x4E1A;&#x52A1;&#x62C6;&#x89E3;&#x68B3;&#x7406;&#x3001;&#x7248;&#x672C;&#x7BA1;&#x7406;&#x3001;&#x4EE5;&#x53CA;&#x540E;&#x671F;&#x7684;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x8FD9;&#x90FD;&#x662F;&#x9700;&#x8981;&#x8003;&#x8651;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<h3 id="&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x7F16;&#x8BD1;&#x6210;-h5"><a href="#&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x7F16;&#x8BD1;&#x6210;-h5" class="headerlink" title="&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x7F16;&#x8BD1;&#x6210; h5"></a>&#x65B9;&#x6848;&#x4E8C;&#xFF1A;&#x7F16;&#x8BD1;&#x6210; h5</h3><p>&#x65E2;&#x7136; <code>IDE</code> &#x70ED;&#x66F4;&#x65B0;&#x6162;&#xFF0C;&#x90A3;&#x5C31;&#x4E0D;&#x80FD;&#x8DF3;&#x51FA;&#x5B83;&#x5417;&#xFF1F;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x9999;&#x5417;&#xFF1F;</p>
<p>&#x5BF9;&#xFF0C;&#x786E;&#x5B9E;&#x53EF;&#x4EE5;&#xFF0C;&#x4E0D;&#x8981;&#x5FD8;&#x4E86;&#x53E4;&#x8317;&#x6240;&#x6709;&#x7684;&#x5C0F;&#x7A0B;&#x5E8F;&#x90FD;&#x662F;&#x8DD1;&#x5728; <code>Taro</code> &#x91CC;&#x9762;&#x7684;&#xFF0C;<code>Taro</code> &#x591A;&#x7AEF;&#x7684;&#x7279;&#x6027;&#x5929;&#x7136;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x6210;web&#x5E94;&#x7528;&#x7684;&#x54E6;&#x3002;&#x8FD9;&#x6837;&#x786E;&#x5B9E;&#x53EF;&#x4EE5;&#x8DD1;&#x7684;&#x901A;&#xFF0C;&#x5355;&#x7EAF;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x9884;&#x89C8;&#x662F;&#x6CA1;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x8981;&#x771F;&#x6B63;&#x7684;&#x5E94;&#x7528;&#x5230;&#x5F00;&#x53D1;&#x4E2D;&#x8FD8;&#x6709;&#x6709;&#x4E9B;&#x5C0F;&#x95EE;&#x9898;&#x3002;</p>
<h4 id="API-&#x7684;&#x5DEE;&#x5F02;"><a href="#API-&#x7684;&#x5DEE;&#x5F02;" class="headerlink" title="API &#x7684;&#x5DEE;&#x5F02;"></a>API &#x7684;&#x5DEE;&#x5F02;</h4><p>&#x6D4F;&#x89C8;&#x5668;&#x548C; <code>IDE</code> &#x4E0A;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B; <code>api</code> &#x7684;&#x9884;&#x89C8;&#x6A21;&#x62DF;&#x5DEE;&#x5F02;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x5E76;&#x4E14;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#x6D4F;&#x89C8;&#x5668;&#x80FD;&#x652F;&#x6301;&#x7684;api&#x6BD4;&#x8F83;&#x5C11;&#xFF0C;&#x5982;&#x679C;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x9700;&#x8981;&#x8C03;&#x8BD5;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x5207;&#x6362;&#x5230; <code>IDE</code> &#x4E2D;&#x3002;</p>
<h4 id="&#x8BBE;&#x8BA1;&#x8FD8;&#x539F;"><a href="#&#x8BBE;&#x8BA1;&#x8FD8;&#x539F;" class="headerlink" title="&#x8BBE;&#x8BA1;&#x8FD8;&#x539F;"></a>&#x8BBE;&#x8BA1;&#x8FD8;&#x539F;</h4><p>&#x5728;&#x5BF9;&#x8BBE;&#x8BA1;&#x7A3F;&#x8FDB;&#x884C;&#x8FD8;&#x539F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x59CB;&#x7EC8;&#x548C; <code>IDE</code> &#x662F;&#x6709;&#x5DEE;&#x8DDD;&#x7684;&#xFF0C;&#x4E0D;&#x80FD;&#x7CBE;&#x51C6;&#x7684;&#x505A;&#x5230;&#x50CF;&#x7D20;&#x7EA7;&#x8FD8;&#x539F;&#x3002;&#x56E0;&#x4E3A;&#x672C;&#x8EAB;&#x6784;&#x5EFA;&#x7684;&#x4EA7;&#x7269;&#x5C31;&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x5305;&#x62EC;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x7684;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#x3002;</p>
<h4 id="&#x6D41;&#x7A0B;&#x95EE;&#x9898;"><a href="#&#x6D41;&#x7A0B;&#x95EE;&#x9898;" class="headerlink" title="&#x6D41;&#x7A0B;&#x95EE;&#x9898;"></a>&#x6D41;&#x7A0B;&#x95EE;&#x9898;</h4><p>&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x524D;&#x7AEF;&#x5728;&#x5F00;&#x53D1;&#x7684;&#x65F6;&#x5019;&#x4EE5;&#x6D4F;&#x89C8;&#x5668;&#x4E3A;&#x51C6;&#xFF0C;&#x5728;&#x63D0;&#x6D4B;&#x548C;&#x6700;&#x7EC8;&#x4E0A;&#x7EBF;&#x7684;&#x65F6;&#x5019;&#x53C8;&#x4EE5;&#x5C0F;&#x7A0B;&#x5E8F;&#x5BB9;&#x5668;&#x4E3A;&#x51C6;&#xFF0C;&#x9B3C;&#x77E5;&#x9053;&#x8FD9;&#x91CC;&#x9762;&#x4F1A;&#x6709;&#x591A;&#x5C11;&#x5751;&#xFF0C;&#x5F00;&#x53D1;&#x90FD;&#x662F;&#x597D;&#x597D;&#x7684;&#xFF0C;&#x5230; <code>IDE</code> &#x4E2D;&#x5C31;&#x5404;&#x79CD;&#x95EE;&#x9898;&#xFF0C;&#x8981;&#x77E5;&#x9053;&#x5C0F;&#x7A0B;&#x5E8F;&#x5BB9;&#x5668;&#x53EF;&#x662F;&#x5404;&#x79CD;&#x5B9A;&#x5236;&#x7684;&#x9ED1;&#x76D2;&#x3002;&#x5C31;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x53EA;&#x7528;&#x5C0F;&#x7A0B;&#x5E8F;&#x73AF;&#x5883;&#x90FD;&#x4F1A;&#x51FA;&#x73B0; <code>IDE</code> &#x5230;&#x771F;&#x673A;&#x7684;&#x5404;&#x79CD;&#x517C;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x66F4;&#x4E0D;&#x8981;&#x8BF4;&#x6D4F;&#x89C8;&#x5668;&#x5230;&#x771F;&#x673A;&#x5C0F;&#x7A0B;&#x5E8F;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x89C9;&#x5F97;&#x4ECE;&#x6D41;&#x7A0B;&#x4E0A;&#x548C;&#x7EF4;&#x62A4;&#x7684;&#x6210;&#x672C;&#x4E0A;&#x8003;&#x8651;&#x8FD8;&#x662F;&#x8981;&#x4EE5;&#x5C0F;&#x7A0B;&#x5E8F;&#x73AF;&#x5883;&#x4E3A;&#x51C6;&#x3002;</p>
<p>&#x73B0;&#x5728; <code>Taro</code> &#x8F6C; web &#x7684;&#x573A;&#x666F;&#x6211;&#x4EEC;&#x4E5F;&#x5728;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x8FD8;&#x662F;&#x4EC5;&#x9650;&#x4E8E;&#x6587;&#x6863;&#x4E2D;&#x7684; demo &#x9884;&#x89C8;&#xFF0C;&#x57FA;&#x7840;&#x7EC4;&#x4EF6;&#x7684;&#x5F00;&#x53D1;&#x9884;&#x89C8;&#x3002;</p>
<h3 id="&#x65B9;&#x6848;&#x4E09;&#xFF1A;&#x52A8;&#x6001;&#x6784;&#x5EFA;"><a href="#&#x65B9;&#x6848;&#x4E09;&#xFF1A;&#x52A8;&#x6001;&#x6784;&#x5EFA;" class="headerlink" title="&#x65B9;&#x6848;&#x4E09;&#xFF1A;&#x52A8;&#x6001;&#x6784;&#x5EFA;"></a>&#x65B9;&#x6848;&#x4E09;&#xFF1A;&#x52A8;&#x6001;&#x6784;&#x5EFA;</h3><p>&#x90A3;&#x80FD;&#x4E0D;&#x80FD; <strong>&#x201D;&#x6E10;&#x8FDB;&#x5F0F;&#x201C;</strong> &#x6784;&#x5EFA;&#x5462;&#xFF1F;&#x6BD4;&#x5982;&#x521D;&#x59CB;&#x5316;&#x7684;&#x65F6;&#x5019;&#x53EA;&#x6784;&#x5EFA;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x8BBF;&#x95EE;&#x5230;&#x54EA;&#x4E2A;&#x9875;&#x9762;&#x5728;&#x52A8;&#x6001;&#x5206;&#x6790;&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x7684;&#x4F9D;&#x8D56;&#x7136;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x6784;&#x5EFA;&#xFF0C;&#x6C38;&#x8FDC;&#x53EA;&#x6784;&#x5EFA;&#x9700;&#x8981;&#x7684;&#x3002;</p>
<p><code>IDE</code> &#x80AF;&#x5B9A;&#x662F;&#x505A;&#x4E0D;&#x5230;&#x4E86;&#xFF0C;&#x5B83;&#x662F;&#x63A5;&#x6536; <code>Taro</code> &#x8F93;&#x51FA;&#x7684; <code>dist</code> &#xFF0C;&#x8F93;&#x51FA;&#x591A;&#x5C11;&#x5C31;&#x6784;&#x5EFA;&#x591A;&#x5C11;&#xFF0C;&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x53EA;&#x80FD;&#x5728; <code>Taro</code> &#x8FD9;&#x8FB9;&#x60F3;&#x529E;&#x6CD5;&#x3002;</p>
<p>&#x90A3;&#x5C31;&#x51CF;&#x5C11; <code>Taro</code> &#x4FA7;&#x6784;&#x5EFA;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x4EC5;&#x80FD;&#x964D;&#x4F4E; <code>IDE</code> &#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#xFF0C;<code>Taro</code> &#x7684;&#x6784;&#x5EFA;&#x901F;&#x5EA6;&#x4E5F;&#x4F1A;&#x968F;&#x4E4B;&#x964D;&#x4F4E;&#x3002;</p>
<p>&#x5B9E;&#x9645;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x7684;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x624B;&#x52A8;&#x6321;&#x1F604;&#x3002;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#x5148;&#x6765;&#x7B80;&#x5355;&#x7684;&#x4E86;&#x89E3;&#x4E0B; <code>Taro</code> &#x7684;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/b43bf5cb207a63f4fa961cc56d2cdf2572ce7525d1f350a155fd96fe55790006" alt="image.png"></p>
<p><code>app.config.js</code> &#x5C31;&#x662F;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF0C;&#x8FD9;&#x91CC;&#x9762;&#x5305;&#x62EC;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#xFF0C;<code>Taro</code> &#x4F1A;&#x904D;&#x5386;&#x8FD9;&#x4EFD;&#x8DEF;&#x7531;&#x914D;&#x7F6E;&#xFF0C;&#x5E76;&#x4E14;&#x9010;&#x4E00;&#x63A8;&#x5230; <code>webpack</code> &#x7684;&#x76D1;&#x542C;&#x961F;&#x5217;&#x91CC;&#x9762;&#xFF0C;&#x88AB;&#x76D1;&#x542C;&#x7684;&#x6587;&#x4EF6;&#x540E;&#x6BCF;&#x6B21;&#x6539;&#x52A8;&#x4EE3;&#x7801; <code>Taro</code> &#x5C31;&#x4F1A;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x751F;&#x6210;&#x65B0;&#x7684; <code>dist</code>&#x3002;&#x5E76;&#x4E14;&#x8FD9;&#x4EFD;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;<code>app.config.js</code>&#xFF09;&#x4E5F;&#x4F1A;&#x88AB;&#x63A8;&#x9001;&#x5230; <code>Taro</code> &#x7684;&#x6784;&#x5EFA;&#x76D1;&#x542C;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x8FD9;&#x4EFD;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;<code>app.config.js</code>&#xFF09;&#xFF0C;<code>Taro</code> &#x4F1A;&#x91CD;&#x65B0;&#x8D70;&#x4E00;&#x904D;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/2090d3ecd88551d360ad5800c958e8b549750b413bad1c6799a7d392f40e336e" alt="image.png"></p>
<p>&#x90A3;&#x4E48;&#x4E4B;&#x524D;&#x7684;&#x624B;&#x52A8;&#x6321;&#x64CD;&#x4F5C;&#x5C31;&#x662F;&#x624B;&#x52A8;&#x53BB;&#x8FD9;&#x4EFD;&#x914D;&#x7F6E;&#x8868;&#xFF08;<code>app.config.js</code>&#xFF09;&#x91CC;&#x6CE8;&#x91CA;&#x6389;&#x4E00;&#x4E9B;&#x5F53;&#x524D;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x53EA;&#x4FDD;&#x7559;&#x672C;&#x6B21;&#x5F00;&#x53D1;&#x9700;&#x8981;debug&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x8FD9;&#x6837;<code>Taro</code> &#x5C31;&#x53EA;&#x662F;&#x6784;&#x5EFA;&#x653E;&#x5F00;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x751F;&#x6210;&#x7684; <code>dist</code> &#x6587;&#x4EF6;&#x5C31;&#x5C0F;&#x5F88;&#x591A;&#xFF0C;<code>IDE</code> &#x7684;&#x6784;&#x5EFA;&#x538B;&#x529B;&#x4E5F;&#x4F1A;&#x76F8;&#x5BF9;&#x5C0F;&#x5F88;&#x591A;&#x3002;&#x4F46;&#x662F;&#x624B;&#x52A8;&#x9664;&#x4E86;&#x64CD;&#x4F5C;&#x7E41;&#x7410;&#x8FD8;&#x4F1A;&#x4EA7;&#x751F;&#x5F88;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x6CE8;&#x91CA;&#x9519;&#x4E86;&#xFF0C;&#x6216;&#x8005;&#x628A;&#x6CE8;&#x91CA;&#x63D0;&#x4EA4;&#x4E0A;&#x53BB;&#x4E86;&#xFF0C;&#x53C8;&#x6216;&#x8005;&#x9700;&#x8981;&#x8DF3;&#x8F6C;&#x5230;&#x88AB;&#x6CE8;&#x91CA;&#x7684;&#x8DEF;&#x7531;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x7B49;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x8FD9;&#x6761;&#x8DEF;&#x80AF;&#x5B9A;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF0C;&#x6838;&#x5FC3;&#x7684;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x5982;&#x4F55;&#x53D8;&#x6210;&#x81EA;&#x52A8;&#x6321;&#xFF0C;&#x52A8;&#x6001;&#x6309;&#x9700;&#x6784;&#x5EFA;&#x3002;</p>
<h2 id="&#x8054;&#x60F3;&#x5230;&#x5355;&#x9875;&#x5E94;&#x7528;&#xFF08;SPA&#xFF09;"><a href="#&#x8054;&#x60F3;&#x5230;&#x5355;&#x9875;&#x5E94;&#x7528;&#xFF08;SPA&#xFF09;" class="headerlink" title="&#x8054;&#x60F3;&#x5230;&#x5355;&#x9875;&#x5E94;&#x7528;&#xFF08;SPA&#xFF09;"></a>&#x8054;&#x60F3;&#x5230;&#x5355;&#x9875;&#x5E94;&#x7528;&#xFF08;SPA&#xFF09;</h2><p>&#x6211;&#x4EEC;&#x4ECE;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x89C6;&#x89D2;&#x8DF3;&#x51FA;&#x6765;&#x5148;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x4F20;&#x7EDF;&#x7684;web&#x5355;&#x9875;&#x5E94;&#x7528;&#x60F3;&#x8981;&#x63D0;&#x5347;&#x70ED;&#x66F4;&#x65B0;&#x7684;&#x901F;&#x5EA6;&#x53EF;&#x4EE5;&#x505A;&#x54EA;&#x4E9B;&#x4E8B;&#x60C5;&#x5462;&#xFF1F;</p>
<ol>
<li>&#x5C11;&#x76D1;&#x542C;&#xFF0C;&#x4E0A;&#x5404;&#x79CD;&#x61D2;&#x52A0;&#x8F7D;&#x2026;</li>
<li>&#x5C11;&#x7F16;&#x8BD1;&#xFF0C;&#x4E0A;&#x5404;&#x79CD;&#x7F13;&#x5B58;&#x8FD8;&#x6709; esm&#x3001;umd&#x3001;cdn&#x2026;</li>
<li>&#x5176;&#x4ED6;<ul>
<li>&#x5347;&#x7EA7;&#x786C;&#x4EF6;</li>
<li>&#x591A;&#x7EBF;&#x7A0B;</li>
<li>&#x4F7F;&#x7528; native &#x8BED;&#x8A00;&#xFF1F;swc&#x3001;esbuild&#x2026;</li>
</ul>
</li>
</ol>
<p>&#x5728;&#x56DE;&#x5230;&#x5C0F;&#x7A0B;&#x5E8F; <code>IDE</code> &#x7684;&#x573A;&#x666F;&#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x8003;&#x8651;&#x6784;&#x5EFA;&#x76F8;&#x5173;&#x7684;&#x4F18;&#x5316;&#xFF08;&#x6784;&#x5EFA;&#x76F8;&#x5173;&#x5DF2;&#x7ECF;&#x88AB; <code>IDE</code> &#x6536;&#x655B;&#x4E86;&#xFF09;&#xFF0C;&#x4E5F;&#x53EA;&#x80FD;&#x4ECE; <strong>&#x5C11;&#x76D1;&#x542C;</strong> &#x8FD9;&#x4E00;&#x70B9;&#x5165;&#x624B;&#x3002;</p>
<h2 id="&#x6700;&#x7EC8;&#x5B9E;&#x73B0;"><a href="#&#x6700;&#x7EC8;&#x5B9E;&#x73B0;" class="headerlink" title="&#x6700;&#x7EC8;&#x5B9E;&#x73B0;"></a>&#x6700;&#x7EC8;&#x5B9E;&#x73B0;</h2><p>&#x6765;&#x770B;&#x4E0B;&#x6700;&#x7EC8;&#x65B9;&#x6848;&#x81EA;&#x52A8;&#x6321;&#x7684;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/cb29946f6eec9d77b49771d346b52a183690e07a4dfd44d41c5064f5bd2913b3" alt="image.png"></p>
<p>&#x6838;&#x5FC3;&#x7684;&#x5173;&#x952E;&#x6B65;&#x9AA4;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#xFF1A;</p>
<h3 id="&#x52AB;&#x6301;-app-config-js"><a href="#&#x52AB;&#x6301;-app-config-js" class="headerlink" title="&#x52AB;&#x6301; app.config.js"></a>&#x52AB;&#x6301; app.config.js</h3><p>&#x5728; <code>Taro</code> &#x6784;&#x5EFA;&#x662F;&#x751F;&#x6210;&#x4E34;&#x65F6;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6; <code>temp.app.config.js</code>&#xFF0C;&#x4EC5;&#x4FDD;&#x7559;&#x6700;&#x57FA;&#x672C;&#x7684;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#xFF08;tabbar&#x3001;&#x767B;&#x5F55;&#x548C;&#x843D;&#x5730;&#x9875;&#xFF09;&#xFF0C;&#x5176;&#x4ED6;&#x914D;&#x7F6E;&#x4FDD;&#x6301;&#x4E0E; <code>app.config.js</code> &#x4E00;&#x81F4;&#x3002;</p>
<p>&#x5E76;&#x4E14;&#x66FF;&#x6362; <code>Taro</code> &#x7684; <code>app.config.js</code> &#x7684;&#x5F15;&#x7528;&#x6307;&#x5411;&#x6362;&#x6210; <code>temp.app.config.js</code>&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x4FDD;&#x8BC1;&#x9879;&#x76EE;&#x521D;&#x59CB;&#x5316;&#x6784;&#x5EFA;&#x4E3A;&#x6700;&#x5C0F;&#x4F53;&#x79EF;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/82225e28b4440e20a869536746a24708cc1efdf4c4946e47a76efda977b205e6" alt="image.png"></p>
<h3 id="&#x542F;&#x52A8;&#x672C;&#x5730;&#x670D;&#x52A1;&#x7BA1;&#x7406;&#x4E34;&#x65F6;&#x914D;&#x7F6E;"><a href="#&#x542F;&#x52A8;&#x672C;&#x5730;&#x670D;&#x52A1;&#x7BA1;&#x7406;&#x4E34;&#x65F6;&#x914D;&#x7F6E;" class="headerlink" title="&#x542F;&#x52A8;&#x672C;&#x5730;&#x670D;&#x52A1;&#x7BA1;&#x7406;&#x4E34;&#x65F6;&#x914D;&#x7F6E;"></a>&#x542F;&#x52A8;&#x672C;&#x5730;&#x670D;&#x52A1;&#x7BA1;&#x7406;&#x4E34;&#x65F6;&#x914D;&#x7F6E;</h3><p>&#x5728; <code>Taro</code> &#x5B8C;&#x6210;&#x540E;&#x542F;&#x52A8;&#x672C;&#x5730; <code>node</code> &#x670D;&#x52A1;&#xFF0C;&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x5BF9;&#x4E34;&#x65F6;&#x914D;&#x7F6E;&#xFF08;<code>temp.app.config.js</code>&#xFF09;&#x8FDB;&#x884C; <code>CRUD</code>&#x3002;</p>
<p>&#x5E76;&#x5BF9;&#x5916;&#x66B4;&#x9732;&#x4E00;&#x4E2A;http&#x7684;&#x63A5;&#x53E3; <code>http://localhost:xxxx/update?target=/pages/xxx/a</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x4F1A;&#x505A;&#x5982;&#x4E0B;&#x51E0;&#x4EF6;&#x4E8B;&#x60C5;</p>
<ol>
<li>&#x63A5;&#x53E3;&#x63A5;&#x6536;&#x4E00;&#x4E2A; <code>path</code> &#x53C2;&#x6570;</li>
<li>&#x7528; <code>path</code> &#x53BB;&#x539F;&#x914D;&#x7F6E;&#xFF08;<code>app.config.js</code>&#xFF09;&#x67E5;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x5B8C;&#x6574;&#x8DEF;&#x7531;&#x4FE1;&#x606F;&#xFF0C;&#x56E0;&#x4E3A;&#x8DEF;&#x7531;&#x53EF;&#x80FD;&#x4E3A;<a href="/external_links/7ea42bf009ac761423f60785d96c6b92.html" target="blank" rel="noopener">&#x5206;&#x5305;&#x8DEF;&#x7531;</a></li>
<li>&#x5C06;&#x5339;&#x914D;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x66F4;&#x65B0;&#x5230;&#x4E34;&#x65F6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;<code>temp.app.config.js</code>&#xFF09;</li>
</ol>
<h3 id="&#x6821;&#x9A8C;&#x7EC6;&#x8282;"><a href="#&#x6821;&#x9A8C;&#x7EC6;&#x8282;" class="headerlink" title="&#x6821;&#x9A8C;&#x7EC6;&#x8282;"></a>&#x6821;&#x9A8C;&#x7EC6;&#x8282;</h3><p>&#x56E0;&#x4E3A;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x5206;&#x5305;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x7684;&#x7684;&#x573A;&#x666F;&#x5927;&#x90E8;&#x5206;&#x4F1A;&#x5728;&#x4E00;&#x4E2A;&#x5206;&#x5305;&#x5185;&#x5B8C;&#x6210;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8DEF;&#x7531;&#x6BD4;&#x5BF9;&#x547D;&#x4E2D;&#x540E;&#x4F1A;&#x76F4;&#x63A5;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5206;&#x5305;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x5206;&#x5305;&#x4E2D; &#x6709; <code>/package/a</code>&#xFF0C;<code>/package/b</code>&#xFF0C;<code>/package/c</code> &#x4E09;&#x4E2A;&#x9875;&#x9762;&#xFF0C;&#x5F53;&#x8BBF;&#x95EE; <code>/package/a</code> &#x65F6;&#xFF0C;&#x4F1A;&#x76F4;&#x63A5;&#x5C06;&#x8FD9;&#x4E2A;&#x4E09;&#x4E2A;&#x9875;&#x9762;&#x4E00;&#x6B21;&#x6027;&#x6784;&#x5EFA;&#xFF0C;&#x4E0D;&#x7136; <code>package/a</code> &#x8DF3;&#x8F6C; <code>package/b</code> &#x518D;&#x8DF3;&#x8F6C; <code>package/c</code> &#x5C31;&#x4F1A;&#x6784;&#x5EFA;&#x4E09;&#x6B21;&#x3002;&#x5F53;&#x7136;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x3002;</p>
<h3 id="&#x62E6;&#x622A;api"><a href="#&#x62E6;&#x622A;api" class="headerlink" title="&#x62E6;&#x622A;api"></a>&#x62E6;&#x622A;api</h3><ul>
<li>&#x62E6;&#x622A;&#x8DF3;&#x8F6C;api <code>Taro.navigateTo</code>&#xFF1A;&#x6211;&#x4EEC;&#x628A;&#x89E6;&#x53D1;&#x52A8;&#x6001;&#x6784;&#x5EFA;&#x7684;&#x65F6;&#x673A;&#x6807;&#x5B9A;&#x5728;&#x8DF3;&#x8F6C;&#x65F6;&#xFF0C;&#x5728;&#x8DF3;&#x8F6C;&#x65F6;&#x4F1A;&#x6821;&#x9A8C;&#x5F53;&#x524D;&#x7684;&#x8DEF;&#x7531;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x88AB;&#x6784;&#x5EFA;&#x8FC7;&#xFF0C;&#x68C0;&#x9A8C;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x662F;&#x7528;&#x5F53;&#x524D;&#x8DF3;&#x8F6C;&#x8DEF;&#x7531;&#x53BB;&#x4E34;&#x65F6;&#x914D;&#x7F6E;&#xFF08;<code>temp.app.config.js</code>&#xFF09;&#x67E5;&#x627E;&#x662F;&#x5426;&#x5B58;&#x5728;&#xFF0C;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#x53D1;&#x8D77;<code>http://localhost:xxxx/update?target=/pages/xxx/a</code>&#x8BF7;&#x6C42;&#xFF1B;&#x5982;&#x679C;&#x5B58;&#x5728;&#x7684;&#x8BDD;&#x76F4;&#x63A5;&#x8D70; <code>Taro.navigateTo</code> &#x539F;&#x903B;&#x8F91;&#x5C31;&#x597D;&#x3002;</li>
<li>&#x62E6;&#x622A; <code>Taro DidMount</code>&#xFF1A;&#x5F53; <code>http://localhost:xxxx/update?target=/pages/xxx/a</code> &#x66F4;&#x65B0;&#x5B8C;&#x4E34;&#x65F6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;<code>temp.app.config.js</code>&#xFF09;&#x540E;&#xFF0C;<code>Taro</code> &#x4F1A;&#x76D1;&#x542C;&#x5230;&#x4E34;&#x65F6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;<code>temp.app.config.js</code>&#xFF09;&#x7684;&#x6539;&#x52A8;&#xFF0C;&#x5E76;&#x89E6;&#x53D1;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x3002;&#x5C0F;&#x7A0B;&#x5E8F;reload&#x540E;&#x8FDB;&#x5165;&#x5230; <code>DidMount</code>&#xFF0C;<code>DidMount</code> &#x5728;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x76EE;&#x6807;&#x8DF3;&#x8F6C;&#x9875;&#x9762;</li>
</ul>
<h3 id="&#x7EDF;&#x4E00;&#x5C01;&#x88C5;"><a href="#&#x7EDF;&#x4E00;&#x5C01;&#x88C5;" class="headerlink" title="&#x7EDF;&#x4E00;&#x5C01;&#x88C5;"></a>&#x7EDF;&#x4E00;&#x5C01;&#x88C5;</h3><p>&#x56E0;&#x4E3A;&#x96F6;&#x96F6;&#x6563;&#x6563;&#x7684;&#x903B;&#x8F91;&#x5F88;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x4E8E; <code>Taro</code> &#x7684;<a href="/external_links/7b673b640184753eb3ecb22d4321f634.html" target="blank" rel="noopener">&#x63D2;&#x4EF6;&#x673A;&#x5236;</a> &#x5C06;&#x4E0A;&#x8FF0;&#x7684;&#x6240;&#x6709;&#x903B;&#x8F91;&#x5305;&#x88C5;&#x6210;&#x4E86; <code>Taro Plugin</code>&#x3002;&#x5F00;&#x542F;&#x540C;&#x5176;&#x4ED6;&#x7684; <code>Taro Plugin</code> &#x662F;&#x4E00;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x53EA;&#x8981;&#x5728;&#x7F16;&#x8BD1;&#x914D;&#x7F6E;&#x4E2D;&#x6DFB;&#x52A0;&#x6B64;&#x63D2;&#x4EF6;&#x5C31; ok &#x4E86;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x4F2A;&#x4EE3;&#x7801;&#xFF0C;Taro&#x7684;&#x6784;&#x5EFA;&#x914D;&#x7F6E;&#x6587;&#x4EF6; https://docs.taro.zone/docs/config-detail</span><br><span class="line"> * config/index.js</span><br><span class="line"> */</span><br><span class="line">module.exports =  {</span><br><span class="line">  ...</span><br><span class="line">  plugins: [&apos;taro-plugin-xxx&apos;],</span><br><span class="line">  ...</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<p>&#x57FA;&#x4E8E;&#x6B64;&#x540E;&#x7EED;&#x4E5F;&#x4F1A;&#x5728;&#x8FD9;&#x4E2A;&#x63D2;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x5176;&#x4ED6;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x6BD4;&#x5982;&#x6536;&#x655B;&#x5176;&#x4ED6;&#x63D2;&#x4EF6;&#x3001;&#x6536;&#x655B; patch-package&#x3001;&#x5185;&#x7F6E;&#x901A;&#x7528;&#x9875;&#x9762;&#x7B49;&#x3002;</p>
<h2 id="&#x53EF;&#x89C6;&#x5316;&#x62D3;&#x5C55;"><a href="#&#x53EF;&#x89C6;&#x5316;&#x62D3;&#x5C55;" class="headerlink" title="&#x53EF;&#x89C6;&#x5316;&#x62D3;&#x5C55;"></a>&#x53EF;&#x89C6;&#x5316;&#x62D3;&#x5C55;</h2><p>&#x65B9;&#x6848;&#x5185;&#x6D4B;&#x7684;&#x65F6;&#x5019;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x5728;&#x5F00;&#x53D1;&#x65F6;&#x4E00;&#x65E6;&#x9700;&#x8981; debug &#x7684;&#x9875;&#x9762;&#x4F1A;&#x8DE8;&#x591A;&#x4E2A;&#x5206;&#x5305;&#x65F6;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x8FDE;&#x8DF3;&#x8F6C; 3 &#x4E2A;&#x5206;&#x5305;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x4E09;&#x6B21;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x5FC5;&#x8981;&#x914D;&#x5408;&#x8FD9;&#x5957;&#x65B9;&#x6848;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x53EF;&#x89C6;&#x5316;&#x5DE5;&#x5177;&#x6765;&#x7CBE;&#x7EC6;&#x5316;&#x7BA1;&#x7406;&#x8DEF;&#x7531;&#xFF0C;&#x76F4;&#x63A5;&#x52FE;&#x52FE;&#x52FE;&#x5C31;&#x80FD;&#x5B8C;&#x6210;&#x4E0B;&#x4E00;&#x6B21;&#x7684;&#x6784;&#x5EFA;&#x3002;</p>
<p>&#x6240;&#x4EE5; <code>vscode</code> &#x63D2;&#x4EF6;&#x6765;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x7CBE;&#x7EC6;&#x5316;&#x63A7;&#x5236;&#x5355;&#x4E2A;&#x8DEF;&#x7531;&#xFF0C;&#x4E0A;&#x8FF0;&#x7684;&#x573A;&#x666F;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x641C;&#x7D22;&#x548C;&#x52FE;&#x9009;&#x63D0;&#x524D;&#x5C06;&#x4E09;&#x4E2A;&#x5206;&#x5305;&#x52FE;&#x9009;&#x597D;&#xFF0C;&#x7136;&#x540E;&#x63D0;&#x4EA4;&#xFF0C;&#x8FD9;&#x6837;&#x4E00;&#x6B21;&#x6784;&#x5EFA;&#x5C31;&#x597D;&#x4E86;&#x3002;&#x5E76;&#x4E14;&#x4F1A;&#x548C;&#x4E34;&#x65F6;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF08;<code>temp.app.config.js</code>&#xFF09;&#x6570;&#x636E;&#x5171;&#x4EAB;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/e0211353bf6143f9bb2cec4ae1e75c263ee9772c35f53c5d035132fc27da81af" alt><br>&#x7981;&#x7528;&#x7684;&#x9009;&#x9879;&#x4E3A;&#x9ED8;&#x8BA4;&#x6700;&#x5C0F;&#x8DEF;&#x7531;&#x96C6;&#x5408;&#x3002;</p>
<h2 id="&#x95EE;&#x9898;"><a href="#&#x95EE;&#x9898;" class="headerlink" title="&#x95EE;&#x9898;"></a>&#x95EE;&#x9898;</h2><p>&#x8FD8;&#x662F;&#x7559;&#x4E86;&#x4E00;&#x4E9B;&#x5751;&#x7684;&#xFF1A;</p>
<ul>
<li>&#x56E0;&#x4E3A;&#x662F;&#x672C;&#x5730; <code>node</code> &#x670D;&#x52A1;&#xFF0C;&#x5728;&#x771F;&#x673A;&#x9884;&#x89C8;&#x65F6;&#x8BBF;&#x95EE;&#x6CA1;&#x6709;&#x88AB;&#x6784;&#x5EFA;&#x7684;&#x8DEF;&#x7531;&#x4E0D;&#x80FD;&#x89E6;&#x53D1;&#x52A8;&#x6001;&#x6784;&#x5EFA;&#xFF0C;&#x9700;&#x8981;&#x63D0;&#x524D;&#x6784;&#x5EFA;&#x540E;&#x771F;&#x673A;&#x624D;&#x80FD;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;</li>
<li>&#x76F8;&#x5BF9;&#x9ED1;&#x76D2;&#xFF0C;&#x52AB;&#x6301; <code>app.config.js</code> &#x5F15;&#x7528;&#x4EE5;&#x53CA;&#x590D;&#x5199; <code>Taro</code> &#x76F8;&#x5173;&#x7684;api&#x90FD;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x6E90;&#x7801;&#x624D;&#x80FD;&#x5F97;&#x4EE5;&#x5B9E;&#x73B0;</li>
</ul>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x8FD9;&#x5957;&#x65B9;&#x6848;&#x76EE;&#x524D;&#x56E2;&#x961F;&#x5185;&#x9875;&#x9762;&#x8FC7;&#x767E;&#x7684;&#x5C0F;&#x7A0B;&#x5E8F;&#x90FD;&#x5DF2;&#x7ECF;&#x63A5;&#x5165;&#x4E86;&#xFF0C;&#x5728;&#x914D;&#x5408; <code>IDE</code> &#x964D;&#x7EA7;&#xFF0C;&#x8FD9;&#x4E00;&#x5957; &#x201C;&#x7EC4;&#x5408;&#x62F3;&#x201D; &#x4E0B;&#x6765;&#x70ED;&#x66F4;&#x65B0;&#x901F;&#x5EA6;&#x5927;&#x7EA6;&#x63D0;&#x5347; 3 &#x500D;&#xFF0C;&#x6211;&#x81EA;&#x5DF1;&#x65E5;&#x5E38;&#x5F00;&#x53D1;&#x6574;&#x4E2A;&#x70ED;&#x66F4;&#x65B0;&#x7684;&#x6D41;&#x7A0B;&#x57FA;&#x672C;&#x63A7;&#x5236;&#x5728; 3s &#x5DE6;&#x53F3;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x8FD9;&#x5957;&#x65B9;&#x6848;&#x524D;&#x671F;&#x5927;&#x91CF;&#x7684; <code>Taro</code> &#x7684;&#x6E90;&#x7801;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;&#x5F88;&#x591A;&#x6709;&#x610F;&#x601D;&#x7684;&#x9ED1;&#x79D1;&#x6280;&#xFF0C;&#x4E5F;&#x7B97;&#x662F;&#x610F;&#x6599;&#x4E4B;&#x5916;&#x7684;&#x6536;&#x83B7;&#xFF0C;&#x4E5F;&#x53C2;&#x4E0E;&#x4E86;&#x5171;&#x5EFA;&#xFF0C;&#x5F88;&#x5E86;&#x5E78;&#x80FD;&#x53C2;&#x4E0E;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x5F00;&#x6E90;&#x6846;&#x67B6;&#xFF0C;<code>Taro</code> &#x8FD9;&#x4E48;&#x591A;&#x5E74;&#x8FD8;&#x5728;&#x4E00;&#x76F4;&#x575A;&#x6301;&#x8FED;&#x4EE3;&#x7EF4;&#x62A4;&#x4E5F;&#x662F;&#x771F;&#x7684;&#x5F88;&#x4E0D;&#x5BB9;&#x6613;&#xFF0C;<strong>&#x81F4;&#x656C;</strong>&#xFF01;</p>
<h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p>&#x1F31F; &#x62DB;&#x8058;&#x4FE1;&#x606F;&#xFF1A;</p>
<ul>
<li><a href="/external_links/0452f0c3e491d6cd0ba36a50fb45e1de.html" target="blank" rel="noopener">25 / 26 &#x5C4A;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x5B9E;&#x4E60;&#x751F;</a></li>
</ul>
<p>&#x1F4DA; &#x5C0F;&#x8317;&#x6587;&#x7AE0;&#x63A8;&#x8350;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7329034439408500763">&#x9489;&#x9489;&#x5C0F;&#x7A0B;&#x5E8F;&#x5B9E;&#x73B0;&#x7B7E;&#x540D;&#x677F;</a></li>
<li><a href="https://dev.newban.cn/7323436080312893476">JSPDF + html2canvas A4&#x5206;&#x9875;&#x622A;&#x65AD;</a></li>
<li><a href="https://dev.newban.cn/7321779224338448411">Formily JSON Schema &#x6E32;&#x67D3;&#x6D41;&#x7A0B;&#x53CA;&#x6848;&#x4F8B;&#x6D45;&#x6790;</a></li>
</ul>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x300C;<a href="/external_links/f40b7034b31e24ca9725d4bcf11e27fb.html" target="blank" rel="noopener">Goodme&#x524D;&#x7AEF;&#x56E2;&#x961F;</a>&#x300D;&#xFF0C;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x5E72;&#x8D27;&#x5B9E;&#x8DF5;&#xFF0C;&#x6B22;&#x8FCE;&#x4EA4;&#x6D41;&#x5206;&#x4EAB;~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/280c780d17fa407404f9c68a0ba0d08e.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7337170233603866687.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7337170233603866687.html" itemprop="url">MapStruct 进阶用法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-19T19:24:36+08:00">
                2024-02-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>MapStruct &#x662F;&#x4E00;&#x4E2A; Java &#x7F16;&#x8BD1;&#x65F6;&#x6CE8;&#x89E3;&#x5904;&#x7406;&#x6846;&#x67B6;&#xFF0C;&#x7528;&#x6765;&#x81EA;&#x52A8;&#x5316;&#x5C06;&#x4E00;&#x79CD; Java Bean &#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x6210;&#x53E6;&#x4E00;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x8BE5;&#x6846;&#x67B6;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x6807;&#x662F;&#x4F7F;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5728;&#x5C3D;&#x53EF;&#x80FD;&#x5C11;&#x7684;&#x4EE3;&#x7801;&#x548C;&#x6700;&#x4F4E;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x6210;&#x672C;&#x4E0B;&#x5B9E;&#x73B0;&#x5C5E;&#x6027;&#x6620;&#x5C04;&#x3002;MapStruct &#x901A;&#x8FC7;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x751F;&#x6210;&#x4EE3;&#x7801;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x70B9;&#xFF0C;&#x8FD9;&#x4E0E;&#x5927;&#x591A;&#x6570;&#x5176;&#x4ED6; Java Bean &#x6620;&#x5C04;&#x6846;&#x67B6;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x8FDB;&#x884C;&#x6620;&#x5C04;&#x5F62;&#x6210;&#x4E86;&#x9C9C;&#x660E;&#x5BF9;&#x6BD4;&#x3002;</p>
<p>MapStruct &#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x4E3B;&#x8981;&#x7279;&#x6027;&#xFF1A;</p>
<ol>
<li>&#x7B80;&#x6D01;&#xFF1A;&#x7B80;&#x5316;&#x4E86; Java Beans &#x4E4B;&#x95F4;&#x8F6C;&#x6362;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x7684;&#x8D4B;&#x503C;&#x8BED;&#x53E5;&#x5B8C;&#x6210;&#x7684;&#x6620;&#x5C04;&#x5B9E;&#x73B0;&#x3002;</li>
<li>&#x6027;&#x80FD;&#x4F18;&#x79C0;&#xFF1A;&#x7531;&#x4E8E; MapStruct &#x662F;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x751F;&#x6210;&#x4EE3;&#x7801;&#xFF0C;&#x4E0D;&#x6D89;&#x53CA;&#x4EFB;&#x4F55;&#x53CD;&#x5C04;&#xFF0C;&#x56E0;&#x6B64;&#x6267;&#x884C;&#x6620;&#x5C04;&#x7684;&#x6027;&#x80FD;&#x4F18;&#x8D8A;&#x3002;</li>
<li>&#x5B89;&#x5168;&#xFF1A;&#x901A;&#x8FC7;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x751F;&#x6210;&#x6620;&#x5C04;&#x4EE3;&#x7801;&#xFF0C;MapStruct &#x63D0;&#x4F9B;&#x4E86;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#x7684;&#x6620;&#x5C04;&#xFF0C;&#x5E76;&#x80FD;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x5C31;&#x53D1;&#x73B0;&#x6F5C;&#x5728;&#x7684;&#x9519;&#x8BEF;&#x3002;</li>
<li>&#x7075;&#x6D3B;&#xFF1A;&#x53EF;&#x901A;&#x8FC7;&#x81EA;&#x5B9A;&#x4E49;&#x8F6C;&#x6362;&#x65B9;&#x6CD5;&#x3001;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x548C;&#x6620;&#x5C04;&#x7B56;&#x7565;&#x7B49;&#x6765;&#x6EE1;&#x8DB3;&#x590D;&#x6742;&#x7684;&#x6620;&#x5C04;&#x9700;&#x6C42;&#x3002;</li>
<li>&#x826F;&#x597D;&#x7684; IDE &#x652F;&#x6301;&#xFF1A;&#x7531;&#x4E8E; MapStruct &#x662F;&#x7F16;&#x8BD1;&#x65F6;&#x5DE5;&#x5177;&#xFF0C;&#x6240;&#x4EE5;&#x62E5;&#x6709;&#x826F;&#x597D;&#x7684; IDE &#x96C6;&#x6210;&#xFF0C;&#x5982;&#x4EE3;&#x7801;&#x81EA;&#x52A8;&#x5B8C;&#x6210;&#x3001;&#x9519;&#x8BEF;&#x9AD8;&#x4EAE;&#x7B49;&#x3002;</li>
</ol>
<p>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C; MapStruct &#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x4E14;&#x7075;&#x6D3B;&#x7684;&#x6620;&#x5C04;&#x6846;&#x67B6;&#xFF0C;&#x5F88;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x6709;&#x5173;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x4EE3;&#x7801;&#x7684;&#x7B80;&#x6D01;&#x548C;&#x6027;&#x80FD;&#x7684;&#x517C;&#x987E;&#x3002;</p>
<p>MapStruct&#x7684;&#x5E38;&#x89C4;&#x7528;&#x6CD5;&#xFF0C;&#x7F51;&#x4E0A;&#x6709;&#x5F88;&#x591A;&#x6559;&#x7A0B;&#x4E86;&#xFF0C;&#x672C;&#x6587;&#x5C06;&#x5217;&#x4E3E;&#x4E00;&#x4E9B;&#x8FDB;&#x9636;&#x7528;&#x6CD5;&#xFF0C;&#x65B9;&#x4FBF;&#x65E5;&#x5E38;&#x5F00;&#x53D1;&#x4F7F;&#x7528;&#x3002;</p>
<h2 id="expression"><a href="#expression" class="headerlink" title="expression"></a>expression</h2><p>&#x5728;&#x8F6C;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6267;&#x884C; java &#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x770B;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Mapper(componentModel = &quot;spring&quot;)</span><br><span class="line">public interface MyMapper {</span><br><span class="line">    @Mapping(target = &quot;createTime&quot;, expression = &quot;java(System.currentTimeMillis())&quot;)</span><br><span class="line">    Target toTarget(Source source);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8F6C;&#x5316;&#x6210; target &#x5BF9;&#x8C61;&#x65F6;&#xFF0C;createTime&#x5B57;&#x6BB5;&#x7684;&#x503C;&#xFF0C;&#x4F1A;&#x8BBE;&#x7F6E;&#x4E3A;System.currentTimeMillis()&#xFF0C;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class MyMapperImpl implements MyMapper {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Target toTarget(Source source) {</span><br><span class="line">        Target target = new Target();</span><br><span class="line">        target.setCreateTime( System.currentTimeMillis() );</span><br><span class="line">        return target;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="qualifiedByName"><a href="#qualifiedByName" class="headerlink" title="qualifiedByName"></a>qualifiedByName</h2><p>&#x505A;&#x6620;&#x5C04;&#x65F6;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4ECE;source &#x5B57;&#x6BB5;&#x5230;target &#x5B57;&#x6BB5;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528; get/set&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Data</span><br><span class="line">public class Source {</span><br><span class="line">    private String name;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Data</span><br><span class="line">public class Target {</span><br><span class="line">    private String name;</span><br><span class="line">}</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">@Mapper(componentModel = &quot;spring&quot;)</span><br><span class="line">public interface MyMapper {</span><br><span class="line">    Target toTarget(Source source);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x751F;&#x6210;&#x7684;&#x8F6C;&#x5316;&#x4EE3;&#x7801;&#x7C7B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class MyMapperImpl implements MyMapper {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Target toTarget(Source source) {</span><br><span class="line">        if ( source == null ) {</span><br><span class="line">            return null;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        Target target = new Target();</span><br><span class="line"></span><br><span class="line">        // &#x65E0;&#x8111; set/get</span><br><span class="line">        target.setName( source.getName() );</span><br><span class="line"></span><br><span class="line">        return target;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x8FD9;&#x79CD;&#x76F4;&#x63A5;&#x7684; set/get &#x65E0;&#x6CD5;&#x6EE1;&#x8DB3;&#x9700;&#x6C42;&#xFF0C;&#x6BD4;&#x5982;&#x9700;&#x8981;&#x628A; name &#x8F6C;&#x5316;&#x6210;&#x5927;&#x5199;&#x683C;&#x5F0F;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;qualifiedByName:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Mapper(componentModel = &quot;spring&quot;)</span><br><span class="line">public interface MyMapper {</span><br><span class="line">    @Mapping(target = &quot;name&quot;, source = &quot;name&quot;, qualifiedByName = &quot;toUpperCase&quot;)</span><br><span class="line">    Target toTarget(Source source);</span><br><span class="line"></span><br><span class="line">    @Named(&quot;toUpperCase&quot;)</span><br><span class="line">    default String toUpperCase(String value) {</span><br><span class="line">        // &#x8FD9;&#x91CC;&#x5199;&#x8F6C;&#x6362;&#x5927;&#x5199;&#x7684;&#x903B;&#x8F91;</span><br><span class="line">        return value == null ? null : value.toUpperCase();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class MyMapperImpl implements MyMapper {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Target toTarget(Source source) {</span><br><span class="line">        if ( source == null ) {</span><br><span class="line">            return null;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        Target target = new Target();</span><br><span class="line"></span><br><span class="line">        target.setName( toUpperCase( source.getName() ) );</span><br><span class="line"></span><br><span class="line">        return target;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="nullValueMappingStrategy"><a href="#nullValueMappingStrategy" class="headerlink" title="nullValueMappingStrategy"></a>nullValueMappingStrategy</h2><p>&#x5982;&#x679C; source &#x4E3A; null &#x65F6;&#xFF0C;&#x5BF9;&#x5E94;&#x7684; target &#x7684;&#x5904;&#x7406;&#x7B56;&#x7565;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F; NullValueMappingStrategy.RETURN_NULL&#xFF0C;&#x5373; target &#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x5B57;&#x6BB5;&#x4E5F;&#x8BBE;&#x7F6E;&#x4E3A; null&#x3002;</p>
<p>&#x4F46;&#x6709;&#x65F6;&#x5019;&#x8BBE;&#x7F6E;&#x4E3A; null &#x53EF;&#x80FD;&#x4E0D;&#x7B26;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x6BD4;&#x5982; target &#x4E2D;&#x6709;&#x4E2A; List ids&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x5982;&#x679C; source &#x4E2D;ids &#x4E3A; null &#x65F6;&#xFF0C;target &#x7684; ids &#x8BBE;&#x7F6E;&#x4E3A;&#x7A7A; list&#x3002;&#x8FD9;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;nullValueMappingStrategy&#x7B56;&#x7565;&#x4E2D;&#x7684;NullValueMappingStrategy.RETURN_DEFAULT&#x3002;</p>
<p>nullValueMappingStrategy &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x4E0A;&#xFF08;&#x53EA;&#x5BF9;&#x8BE5;&#x65B9;&#x6CD5;&#x751F;&#x6548;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x7C7B;&#x4E0A;&#xFF08;&#x5BF9;&#x7C7B;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x751F;&#x6548;&#xFF09;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Component</span><br><span class="line">public class MyMapperImpl implements MyMapper {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Target toTarget(Source source) {</span><br><span class="line">        if ( source == null ) {</span><br><span class="line">            return null;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        Target target = new Target();</span><br><span class="line"></span><br><span class="line">        target.setName( source.getName() );</span><br><span class="line">        List&lt;Integer&gt; list = source.getIds();</span><br><span class="line">        if ( list != null ) {</span><br><span class="line">            target.setIds( new ArrayList&lt;Integer&gt;( list ) );</span><br><span class="line">        }</span><br><span class="line">        else {</span><br><span class="line">            target.setIds( null );</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        return target;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6307;&#x5B9A;NullValueMappingStrategy.RETURN_DEFAULT&#x7B56;&#x7565;&#x540E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Mapper(componentModel = &quot;spring&quot;,</span><br><span class="line">        nullValueMappingStrategy = org.mapstruct.NullValueMappingStrategy.RETURN_DEFAULT)</span><br><span class="line">public interface MyMapper {</span><br><span class="line"></span><br><span class="line">    Target toTarget(Source source);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Component</span><br><span class="line">public class MyMapperImpl implements MyMapper {</span><br><span class="line">    @Override</span><br><span class="line">    public Target toTarget(Source source) {</span><br><span class="line"></span><br><span class="line">        Target target = new Target();</span><br><span class="line"></span><br><span class="line">        if ( source != null ) {</span><br><span class="line">            target.setName( toUpperCase( source.getName() ) );</span><br><span class="line">            List&lt;Integer&gt; list = source.getIds();</span><br><span class="line">            if ( list != null ) {</span><br><span class="line">                target.setIds( new ArrayList&lt;Integer&gt;( list ) );</span><br><span class="line">            }</span><br><span class="line">            else {</span><br><span class="line">                target.setIds( new ArrayList&lt;Integer&gt;() );</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        return target;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5F53; source &#x6216;&#x8005; source.ids &#x4E3A; null &#x65F6;&#xFF0C;&#x8FD4;&#x56DE;&#x7684; target &#x548C; target.ids &#x90FD;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x7A7A;&#x503C;&#xFF08;&#x7A7A;&#x5BF9;&#x8C61;+&#x7A7A; list&#xFF09;&#x3002;</p>
<h2 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h2><p>&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; Decorator &#x7C7B;&#x6765;&#x5BF9;&#x4F60;&#x7684;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x4FEE;&#x9970;&#x5E76;&#x5B9E;&#x73B0;&#x5168;&#x5C40;&#x5904;&#x7406;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;public abstract class YourMapperDecorator implements YourMapper {</span><br><span class="line"></span><br><span class="line">    private final YourMapper delegate;</span><br><span class="line"></span><br><span class="line">    public YourMapperDecorator(YourMapper delegate) {</span><br><span class="line">        this.delegate = delegate;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Target toTarget(Source source) {</span><br><span class="line">        Target result = delegate.toTarget(source);</span><br><span class="line">        if (result != null) {</span><br><span class="line">            if (result.getField() == null) {</span><br><span class="line">                result.setField(&quot;&quot;);</span><br><span class="line">            }</span><br><span class="line">            // &#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x91CC;&#x5BF9;&#x5176;&#x4ED6;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x540C;&#x6837;&#x7684;&#x5904;&#x7406;...</span><br><span class="line">        }</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x4F60;&#x53EA;&#x9700;&#x5728;&#x4F60;&#x7684; Mapper &#x63A5;&#x53E3;&#x4E0A;&#x6DFB;&#x52A0; @DecoratedWith &#x6CE8;&#x89E3;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;@Mapper</span><br><span class="line">@DecoratedWith(YourMapperDecorator.class)</span><br><span class="line">public interface YourMapper {</span><br><span class="line">    Target toTarget(Source source);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#xFF0C;&#x6BCF;&#x6B21;&#x8C03;&#x7528; toTarget &#x65B9;&#x6CD5;&#x65F6;&#xFF0C;YourMapperDecorator &#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4EFB;&#x4F55;&#x4F60;&#x60F3;&#x8981;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x4F8B;&#x5982;&#x5BF9;&#x7A7A;&#x5B57;&#x6BB5;&#x8D4B;&#x4E88;&#x7279;&#x5B9A;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/de91f62350c7da0fdaf37f392d28e121.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7335463274619273266.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7335463274619273266.html" itemprop="url">Dart 33 发布：扩展类型、JavaScript In</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-16T15:28:41+08:00">
                2024-02-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href="/external_links/abb403837627ea84c955440e7725dd3e.html" target="blank" rel="noopener">medium.com/dartlang/da&#x2026;</a></p>
</blockquote>
<p>&#x8DDF;&#x968F; <a href="https://dev.newban.cn/7334503381200781363">Flutter 3.19 &#x53D1;&#x5E03;</a>&#x7684;&#x8FD8;&#x6709; Dart 3.3 &#xFF0C;Dart 3.3 &#x4E3B;&#x8981;&#x5305;&#x542B;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x589E;&#x5F3A;&#xFF0C;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x548C; native &#x4EE3;&#x7801;&#x4EA4;&#x4E92;&#x63A8;&#x8FDB;&#xFF0C;&#x4F8B;&#x5982;&#x672C;&#x6B21;&#x6539;&#x8FDB;&#x7684;<strong>JavaScript Interop</strong> &#x6A21;&#x578B;&#x5C31;&#x5F15;&#x5165;&#x4E86;&#x7C7B;&#x578B;&#x5B89;&#x5168;&#xFF0C;<a href="https://dev.newban.cn/7232164444985622588">&#x6240;&#x4EE5;&#x8FD9;&#x4E00;&#x5207;&#x90FD;&#x4E3A; WebAssembly &#x652F;&#x6301;&#x94FA;&#x5E73;&#x4E86;&#x9053;&#x8DEF;</a>&#x3002;</p>
<blockquote>
<p>&#x5728;<a href="https://dev.newban.cn/7335067315452428297">&#x300A;Flutter 2024 &#x8DEF;&#x7EBF;&#x89C4;&#x5212;&#x91CC;&#x300B;</a> &#xFF0C;<strong>Web &#x5E73;&#x53F0;&#x4E0A;&#x672A;&#x6765; CanvasKit &#x5C06;&#x6210;&#x4E3A;&#x9ED8;&#x8BA4;&#x6E32;&#x67D3;</strong>&#xFF0C;&#x6240;&#x4EE5;&#x672A;&#x6765; Dart &#x5728; Web &#x4E0A;&#x80AF;&#x5B9A;&#x662F; Wasm Native &#x7684;&#x8DEF;&#x7EBF;&#x3002;</p>
</blockquote>
<h1 id="&#x6269;&#x5C55;&#x7C7B;&#x578B;"><a href="#&#x6269;&#x5C55;&#x7C7B;&#x578B;" class="headerlink" title="&#x6269;&#x5C55;&#x7C7B;&#x578B;"></a>&#x6269;&#x5C55;&#x7C7B;&#x578B;</h1><p>&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x662F;&#x4E00;&#x79CD;&#x7F16;&#x8BD1;&#x65F6;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x7EAF;&#x9759;&#x6001;&#x63A5;&#x53E3;&#x6765; &#x201C;Wrapper&#x201D; &#x73B0;&#x6709;&#x7C7B;&#x578B;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x4EEC;&#x4E5F;&#x662F; Dart &#x548C;<a href="/external_links/e6aafaee97d0909dc2e8617e186dccb2.html" target="blank" rel="noopener">&#x9759;&#x6001; JS &#x4E92;&#x64CD;&#x4F5C;</a>&#x7684;&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x57FA;&#x7840;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x4FEE;&#x6539;&#x73B0;&#x6709;&#x7C7B;&#x578B;&#x7684;&#x63A5;&#x53E3;&#xFF08;&#x5BF9;&#x4E8E;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#x90FD;&#x81F3;&#x5173;&#x91CD;&#x8981;&#xFF09;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x5B9E;&#x9645; Wrapper &#x7684;&#x6210;&#x672C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;extension type E(int i) {</span><br><span class="line">  // Define set of operations.</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x5F15;&#x5165;&#x4E86;&#x7C7B;&#x578B;&#x7684;&#x96F6;&#x6210;&#x672C; wrappers&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x6765;&#x4F18;&#x5316;&#x6027;&#x80FD;&#x654F;&#x611F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x4E0E; native &#x5E73;&#x53F0;&#x4EA4;&#x4E92;&#x65F6;&#xFF0C;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x63D0;&#x4F9B;&#x4E86;&#x5177;&#x6709;&#x7279;&#x5B9A;&#x6210;&#x5458;&#x81EA;&#x5B9A;&#x4E49;&#x7C7B;&#x578B;&#x7684;&#x4FBF;&#x5229;&#x6027;&#xFF0C;&#x540C;&#x65F6;&#x6D88;&#x9664;&#x4E86;&#x5178;&#x578B;&#x7684; wrappers &#x5206;&#x914D;&#x5F00;&#x9500;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;extension type Wrapper(int i) {</span><br><span class="line">  void showValue() {</span><br><span class="line">    print(&apos;my value is $i&apos;);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">void main() {</span><br><span class="line">  final wrapper = Wrapper(42);</span><br><span class="line">  wrapper.showValue(); // Prints &apos;my value is 42&apos;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x4E2A; <strong><code>Wrapper</code></strong> &#x6269;&#x5C55;&#x7C7B;&#x578B;&#xFF0C;&#x4F46;&#x5C06;&#x5176;&#x7528;&#x4F5C;&#x666E;&#x901A;&#x7684; Dart &#x7C7B;&#x578B;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x91CC;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x5B9E;&#x4F8B;&#x5316;&#x5B83;&#x5E76;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x5728;&#x4E8E; Dart &#x5C06;&#x5176;&#x7F16;&#x8BD1;&#x4E3A;&#x666E;&#x901A; Dart <strong><code>int</code></strong> &#x7C7B;&#x578B;&#xFF0C;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x5141;&#x8BB8;&#x521B;&#x5EFA;&#x5177;&#x6709;&#x552F;&#x4E00;&#x7684;&#x6210;&#x5458;&#x7C7B;&#x578B;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x5206;&#x914D;&#x5178;&#x578B; wrappers &#x7C7B;&#x578B;&#x7684;&#x95F4;&#x63A5;&#x6210;&#x672C;&#xFF0C;&#x4F8B;&#x5982;&#x4EE5;&#x4E0B;&#x4F8B;&#x5B50;&#x5305;&#x88C5;&#x4E86;&#x5BF9;&#x5E94;&#x7684; <code>int</code> &#x7C7B;&#x578B;&#x4EE5;&#x521B;&#x5EFA;&#x4EC5;&#x5141;&#x8BB8;&#x5BF9; ID &#x53F7;&#x6709;&#x610F;&#x4E49;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;extension type IdNumber(int id) {</span><br><span class="line">  // Wraps the &apos;int&apos; type&apos;s &apos;&lt;&apos; operator:</span><br><span class="line">  operator &lt;(IdNumber other) =&gt; id &lt; other.id;</span><br><span class="line">  // Doesn&apos;t declare the &apos;+&apos; operator, for example,</span><br><span class="line">  // because addition does not make sense for ID numbers.</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">void main() {</span><br><span class="line">  // Without the discipline of an extension type,</span><br><span class="line">  // &apos;int&apos; exposes ID numbers to unsafe operations:</span><br><span class="line">  int myUnsafeId = 42424242;</span><br><span class="line">  myUnsafeId = myUnsafeId + 10; // This works, but shouldn&apos;t be allowed for IDs.</span><br><span class="line"></span><br><span class="line">  var safeId = IdNumber(42424242);</span><br><span class="line">  safeId + 10; // Compile-time error: No &apos;+&apos; operator.</span><br><span class="line">  myUnsafeId = safeId; // Compile-time error: Wrong type.</span><br><span class="line">  myUnsafeId = safeId as int; // OK: Run-time cast to representation type.</span><br><span class="line">  safeId &lt; IdNumber(42424241); // OK: Uses wrapped &apos;&lt;&apos; operator.</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x56E0;&#x6B64;&#xFF0C;&#x867D;&#x7136; <a href="/external_links/5c549ddaec28a744f664d01c0857d34a.html" target="blank" rel="noopener">extension members</a> &#x529F;&#x80FD;&#xFF08;Dart 2.7 &#x5F00;&#x59CB;&#xFF09;&#x5141;&#x8BB8;&#x5411;&#x73B0;&#x6709;&#x7C7B;&#x578B;&#x6DFB;&#x52A0;&#x51FD;&#x6570;&#x548C;&#x5C5E;&#x6027;&#xFF0C;&#x4F46;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x529F;&#x80FD;&#x4E5F;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;<strong>&#x5E76;&#x4E14;&#x8FD8;&#x5141;&#x8BB8;&#x5B9A;&#x4E49;&#x9690;&#x85CF;&#x5E95;&#x5C42;&#x8868;&#x793A;&#x7684;&#x65B0; API</strong>&#x3002;</p>
<p>&#x8FD9;&#x5BF9;&#x4E8E;&#x4E0E; native code &#x7684;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#x7279;&#x522B;&#x6709;&#x7528;&#x3002;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x539F;&#x751F;&#x7C7B;&#x578B;&#xFF0C;&#x65E0;&#x9700;&#x521B;&#x5EFA; Wrapper &#x548C;&#x76F8;&#x5173;&#x95F4;&#x63A5;&#x7684;&#x6210;&#x672C;&#xFF0C;&#x540C;&#x65F6;&#x4ECD;&#x7136;&#x63D0;&#x4F9B;&#x5E72;&#x51C0;&#x7684;&#x751F;&#x4EA7; Dart API&#x3002;</p>
<blockquote>
<p>&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x4E0E; Wrapper &#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x7528;&#x9014;&#xFF0C;&#x4F46;&#x4E0D;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x5BF9;&#x8C61;&#xFF0C;&#x5F53;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x5305;&#x88C5;&#x5927;&#x91CF;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;Wrapper &#x8FD9;&#x4E2A;&#x884C;&#x4E3A;&#x53EF;&#x80FD;&#x4F1A;&#x53D8;&#x5F97;&#x6602;&#x8D35;&#xFF0C;&#x7531;&#x4E8E;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x4EC5;&#x662F;&#x9759;&#x6001;&#x7684;&#x5E76;&#x4E14;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x7F16;&#x8BD1;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x4EEC;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x96F6;&#x6210;&#x672C;&#x3002;</p>
<p><a href="/external_links/5c549ddaec28a744f664d01c0857d34a.html" target="blank" rel="noopener"><strong>&#x6269;&#x5C55;&#x65B9;&#x6CD5;</strong></a>&#xFF08;&#x4E5F;&#x79F0;&#x4E3A;&#x201C;&#x6269;&#x5C55;&#x201D;&#xFF09;&#x662F;&#x7C7B;&#x4F3C;&#x4E8E;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x9759;&#x6001;&#x62BD;&#x8C61;&#x3002;&#x4F46;&#x662F;&#x6269;&#x5C55;&#x65B9;&#x6CD5;&#x662F;<strong>&#x76F4;&#x63A5;</strong>&#x5411;&#x5176;&#x57FA;&#x7840;&#x7C7B;&#x578B;&#x7684;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x6DFB;&#x52A0;&#x529F;&#x80FD;&#xFF1B;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x4E0D;&#x540C;&#xFF0C;<strong>&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x63A5;&#x53E3;&#x4EC5;&#x9002;&#x7528;&#x4E8E;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x4E3A;&#x8BE5;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x8868;&#x8FBE;&#x5F0F;</strong>&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x5B83;&#x4EEC;&#x4E0E;&#x5176;&#x57FA;&#x7840;&#x7C7B;&#x578B;&#x7684;&#x63A5;&#x53E3;&#x4E0D;&#x540C;&#x3002;</p>
</blockquote>
<p>&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x6709;&#x4E24;&#x4E2A;&#x540C;&#x6837;&#x6709;&#x6548;&#x4F46;&#x672C;&#x8D28;&#x4E0A;&#x4E0D;&#x540C;&#x7684;&#x6838;&#x5FC3;&#x7528;&#x4F8B;&#xFF1A;</p>
<ul>
<li><strong>&#x4E3A;&#x73B0;&#x6709;&#x7C7B;&#x578B;&#x63D0;&#x4F9B;&#x6269;&#x5C55;&#x63A5;&#x53E3;</strong>&#xFF0C;&#x5F53;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x5B9E;&#x73B0;&#x5176;&#x8868;&#x793A;&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x4E00;&#x822C;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x5B83;&#x662F;&#x201C;&#x900F;&#x660E;&#x7684;&#x201D;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x5141;&#x8BB8;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x201C;&#x770B;&#x5230;&#x201D;&#x5E95;&#x5C42;&#x7C7B;&#x578B;&#x3002;</li>
</ul>
<p>&#x900F;&#x660E;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x8868;&#x793A;&#x7C7B;&#x578B;&#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#xFF08;<a href="/external_links/506d98f053c256e1ab80854f27df42e6.html" target="blank" rel="noopener">&#x672A;&#x91CD;&#x65B0;&#x58F0;&#x660E;&#x7684;</a>&#xFF09;&#xFF0C;&#x4EE5;&#x53CA;&#x5B83;&#x5B9A;&#x4E49;&#x7684;&#x4EFB;&#x4F55;&#x8F85;&#x52A9;&#x6210;&#x5458;&#xFF0C;&#x8FD9;&#x5C06;&#x4E3A;&#x73B0;&#x6709;&#x7C7B;&#x578B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6269;&#x5C55;&#x63A5;&#x53E3;&#xFF0C;&#x65B0;&#x63A5;&#x53E3;&#x53EF;&#x7528;&#x4E8E;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x4E3A;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x91CC;&#xFF0C;<code>v1.i</code> &#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8C03;&#x7528;&#xFF0C;&#x4F46;&#x662F; int &#x7C7B;&#x4F3C;&#x7684; <code>v2</code> &#x4E0D;&#x53EF;&#x4EE5;&#x8C03;&#x7528; <code>v2.i</code>&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;extension type NumberT(int value)</span><br><span class="line">implements int {</span><br><span class="line">// Doesn&apos;t explicitly declare any members of &apos;int&apos;.</span><br><span class="line">NumberT get i =&gt; this;</span><br><span class="line">}</span><br><span class="line">void main () {</span><br><span class="line">// All OK: Transparency allows invoking `int` members on the extension type:</span><br><span class="line">var v1 = NumberT(1); // v1 type: NumberT</span><br><span class="line">int v2 = NumberT(2); // v2 type: int</span><br><span class="line">var v3 = v1.i - v1;  // v3 type: int</span><br><span class="line">var v4 = v2 + v1; // v4 type: int</span><br><span class="line">var v5 = 2 + v1; // v5 type: int</span><br><span class="line">// Error: Extension type interface is not available to representation type</span><br><span class="line">v2.i;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/94a7c73f9689d4c7d7c757ab060efd5812593f0d31e1d736962286c84434c5ea" alt></p>
<ul>
<li><strong>&#x4E3A;&#x73B0;&#x6709;&#x7C7B;&#x578B;&#x63D0;&#x4F9B;&#x4E0D;&#x540C;&#x7684;&#x63A5;&#x53E3;</strong>&#xFF0C;<a href="/external_links/506d98f053c256e1ab80854f27df42e6.html" target="blank" rel="noopener">&#x4E0D;&#x900F;&#x660E;</a>&#x7684;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#xFF08;&#x4E0D;&#x662F; <a href="/external_links/506d98f053c256e1ab80854f27df42e6.html" target="blank" rel="noopener"><code>implement</code></a> &#x5176;&#x8868;&#x793A;&#x7C7B;&#x578B;&#xFF09;&#x88AB;&#x9759;&#x6001;&#x5730;&#x89C6;&#x4E3A;&#x5168;&#x65B0;&#x7C7B;&#x578B;&#xFF0C;&#x4E0E;&#x5176;&#x8868;&#x793A;&#x7C7B;&#x578B;&#x4E0D;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x5C06;&#x5176;&#x5206;&#x914D;&#x7ED9;&#x5176;&#x8868;&#x793A;&#x7C7B;&#x578B;&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x4E0D;&#x4F1A;&#x516C;&#x5F00;&#x5176;&#x8868;&#x793A;&#x7C7B;&#x578B;&#x7684;&#x6210;&#x5458;&#xFF0C;&#x4F8B;&#x5982; <code>NumberE</code> &#x4E0D;&#x80FD;&#x4E3A; int &#xFF0C;&#x5E76;&#x4E14; &#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;extension type NumberE(int value) {</span><br><span class="line">  NumberE operator +(NumberE other) =&gt;</span><br><span class="line">      NumberE(value + other.value);</span><br><span class="line"></span><br><span class="line">  NumberE get next =&gt; NumberE(value + 1);</span><br><span class="line">  bool isValid() =&gt; !value.isNegative;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">void testE() { </span><br><span class="line">  var num1 = NumberE(1);</span><br><span class="line">  int num2 = NumberE(2); // Error: Can&apos;t assign &apos;NumberE&apos; to &apos;int&apos;.</span><br><span class="line">  </span><br><span class="line">  num1.isValid(); // OK: Extension member invocation.</span><br><span class="line">  num1.isNegative(); // Error: &apos;NumberE&apos; does not define &apos;int&apos; member &apos;isNegative&apos;.</span><br><span class="line">  </span><br><span class="line">  var sum1 = num1 + num1; // OK: &apos;NumberE&apos; defines &apos;+&apos;.</span><br><span class="line">  var diff1 = num1 - num1; // Error: &apos;NumberE&apos; does not define &apos;int&apos; member &apos;-&apos;.</span><br><span class="line">  var diff2 = num1.value - 2; // OK: Can access representation object with reference.</span><br><span class="line">  var sum2 = num1 + 2; // Error: Can&apos;t assign &apos;int&apos; to parameter type &apos;NumberE&apos;. </span><br><span class="line">  </span><br><span class="line">  List&lt;NumberE&gt; numbers = [</span><br><span class="line">    NumberE(1), </span><br><span class="line">    num1.next, // OK: &apos;i&apos; getter returns type &apos;NumberE&apos;.</span><br><span class="line">    1, // Error: Can&apos;t assign &apos;int&apos; element to list type &apos;NumberE&apos;.</span><br><span class="line">  ];</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1ccecdcd06b9ee6710280d710b0967d2348e2a632954de36b516a90c9d4ccaeb" alt></p>
<p>&#x53E6;&#x5916;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;<strong>&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x662F;&#x7F16;&#x8BD1;&#x65F6;&#x5305;&#x88C5;&#x6784;&#x9020;&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x7EDD;&#x5BF9;&#x6CA1;&#x6709;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x8E2A;&#x8FF9;</strong>&#xFF0C;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x67E5;&#x8BE2;&#x6216;&#x7C7B;&#x4F3C;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x64CD;&#x4F5C;&#x90FD;&#x9002;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x7C7B;&#x578B;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x8868;&#x793A;&#x7C7B;&#x578B;&#x90FD;&#x4E0D;&#x662F;&#x5176;&#x5B50;&#x7C7B;&#x578B;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x9700;&#x8981;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8868;&#x793A;&#x7C7B;&#x578B;&#x4E0D;&#x80FD;&#x4E92;&#x6362;&#x4F7F;&#x7528;&#x3002;</p>
<h1 id="JavaScript-Interop"><a href="#JavaScript-Interop" class="headerlink" title="JavaScript Interop"></a>JavaScript Interop</h1><p>Dart 3.3 &#x5F15;&#x5165;&#x4E86;&#x4E00;&#x79CD;&#x4E0E; JavaScript &#x548C; Web &#x76F8;&#x4E92;&#x8C03;&#x7528;&#x7684;&#x65B0;&#x6A21;&#x578B;&#xFF0C;&#x5B83;&#x4ECE;&#x4E00;&#x7EC4;&#x7528;&#x4E8E;&#x4E0E; JavaScript &#x4EA4;&#x4E92;&#x7684;&#x65B0; API &#x5F00;&#x59CB;&#xFF1A;<a href="/external_links/5cf3f36a0027d07a40f9222028829e32.html" target="blank" rel="noopener">dart:js_interop</a> &#x3002;</p>
<p>&#x73B0;&#x5728;&#xFF0C;<strong>Dart &#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7C7B;&#x578B;&#x5316; API &#x6765;&#x4E0E; JavaScript &#x4EA4;&#x4E92;</strong>&#xFF0C;&#x8BE5; API &#x901A;&#x8FC7;&#x9759;&#x6001;&#x5F3A;&#x5236;&#x660E;&#x786E;&#x5B9A;&#x4E49;&#x4E86;&#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x4E4B;&#x95F4;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x4E4B;&#x524D;&#x6D88;&#x9664;&#x4E86;&#x8BB8;&#x591A;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x9664;&#x4E86;&#x7528;&#x4E8E;&#x8BBF;&#x95EE; JavaScript &#x4EE3;&#x7801;&#x7684;&#x65B0; API &#x4E4B;&#x5916;&#xFF0C;Dart &#x73B0;&#x5728;&#x8FD8;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x65B0;&#x6A21;&#x578B;&#xFF0C;&#x7528;&#x4E8E;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x5728; Dart &#x4E2D;&#x8868;&#x793A; JavaScript &#x7C7B;&#x578B;&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#x524D;&#x9762;&#x62D3;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x5B9E;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;import &apos;dart:js_interop&apos;;</span><br><span class="line"></span><br><span class="line">/// Represents the `console` browser API.</span><br><span class="line">extension type MyConsole(JSObject _) implements JSObject {</span><br><span class="line">  external void log(JSAny? value);</span><br><span class="line">  external void debug(JSAny? value);</span><br><span class="line">  external void info(JSAny? value);</span><br><span class="line">  external void warn(JSAny? value);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x57FA;&#x4E8E;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x7684;&#x8BED;&#x6CD5;&#x6BD4;&#x6269;&#x5C55;&#x6210;&#x5458;&#x5141;&#x8BB8;&#x66F4;&#x591A;&#x7684;&#x8868;&#x8FBE;&#x548C;&#x5065;&#x5168;&#x6027;&#x3002;&#x8FD9;&#x7B80;&#x5316;&#x4E86; Dart &#x4E2D; JavaScript API &#x7684;&#x5229;&#x7528;&#xFF0C;&#x66F4;&#x591A;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#xFF1A;<a href="/external_links/88895249dc237b4d099bf7a64bb100b2.html" target="blank" rel="noopener">dart.dev/interop/js-&#x2026;</a> &#x3002;</p>
<h1 id="&#x6539;&#x8FDB;-browser-libraries"><a href="#&#x6539;&#x8FDB;-browser-libraries" class="headerlink" title="&#x6539;&#x8FDB; browser libraries"></a>&#x6539;&#x8FDB; browser libraries</h1><p>&#x4ECE; 1.0 &#x7248;&#x672C;&#x5F00;&#x59CB;&#xFF0C;Dart SDK &#x5C31;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x5957;&#x5168;&#x9762;&#x7684; browser libraries&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x6838;&#x5FC3; <a href="/external_links/5821517e6065dc26887ebf36142d5fb5.html" target="blank" rel="noopener">dart:html</a> &#x5E93;&#x4EE5;&#x53CA; SVG&#x3001;WebGL &#x7B49;&#x5E93;&#x3002;</p>
<p>&#x6539;&#x8FDB;&#x540E;&#x7684; JavaScript &#x8C03;&#x7528;&#x6A21;&#x578B;&#x63D0;&#x4F9B;&#x4E86;&#x91CD;&#x65B0;&#x6784;&#x60F3;&#x8FD9;&#x4E9B;&#x5E93;&#x7684;&#x673A;&#x4F1A;&#xFF0C;&#x672A;&#x6765; browser libraries &#x652F;&#x6301;&#x5C06;&#x96C6;&#x4E2D;&#x5728; <a href="/external_links/f39dbe63e0ee173fd2e2f8baca2ac170.html" target="blank" rel="noopener">package:web</a>&#x4E0A;&#xFF0C;&#x8FD9;&#x7B80;&#x5316;&#x4E86;&#x7248;&#x672C;&#x63A7;&#x5236;&#x3001;&#x52A0;&#x901F;&#x4E86;&#x66F4;&#x65B0;&#x5E76;&#x4E0E;<a href="/external_links/c2a340b85102725118e3449741d7b551.html" target="blank" rel="noopener">MDN</a>&#x8D44;&#x6E90;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x8FD9;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x6539;&#x8FDB;&#x63A8;&#x52A8;&#x4E86;<a href="https://dev.newban.cn/7232164444985622588">&#x5C06; Dart &#x7F16;&#x8BD1;&#x4E3A; WebAssembly</a>&#x3002;</p>
<h1 id="&#x4ECE;&#x4ECA;&#x5929;&#x5F00;&#x59CB;&#xFF0C;&#x5F00;&#x542F;-WebAssembly-&#x7684;&#x672A;&#x6765;"><a href="#&#x4ECE;&#x4ECA;&#x5929;&#x5F00;&#x59CB;&#xFF0C;&#x5F00;&#x542F;-WebAssembly-&#x7684;&#x672A;&#x6765;" class="headerlink" title="&#x4ECE;&#x4ECA;&#x5929;&#x5F00;&#x59CB;&#xFF0C;&#x5F00;&#x542F; WebAssembly &#x7684;&#x672A;&#x6765;"></a>&#x4ECE;&#x4ECA;&#x5929;&#x5F00;&#x59CB;&#xFF0C;&#x5F00;&#x542F; WebAssembly &#x7684;&#x672A;&#x6765;</h1><p>Dart 3.3 &#x4E3A;WebAssembly &#x7684; Web &#x5E94;&#x7528;&#x5960;&#x5B9A;&#x57FA;&#x7840;&#xFF0C;&#x867D;&#x7136; Flutter Web &#x4E2D;&#x7684; WebAssembly &#x652F;&#x6301;&#x4ECD;&#x5904;&#x4E8E;&#x8BD5;&#x9A8C;&#x9636;&#x6BB5;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x5BF9;&#x4E8E; Dart &#x548C; Flutter &#x662F;&#x660E;&#x663E;&#x7684;&#x65B9;&#x5411;&#x3002;</p>
<p>&#x8981;&#x4F7F;&#x7528; WebAssembly &#x5728; Web &#x4E0A;&#x8FD0;&#x884C; Flutter &#x5E94;&#x7528;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x65B0;&#x7684; JavaScript Interop &#x673A;&#x5236;&#x548C; <code>package:web</code> &#xFF0C;&#x65E7;&#x7248; JavaScript &#x548C; browser libraries &#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#xFF0C;&#x5E76;&#x652F;&#x6301;&#x7F16;&#x8BD1;&#x4E3A; JavaScript &#x4EE3;&#x7801;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x7F16;&#x8BD1;&#x4E3A; WebAssembly &#x9700;&#x8981;&#x8FC1;&#x79FB;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dart&#x590D;&#x5236;&#x4EE3;&#x7801;import &apos;dart:html&apos; as html; // Remove</span><br><span class="line">import &apos;package:web/web.dart&apos; as web; // Add</span><br><span class="line"></span><br><span class="line">dependencies:</span><br><span class="line">  web: ^0.5.0</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x66F4;&#x591A;&#x53EF;&#x89C1;&#xFF1A;<a href="/external_links/1cb93ed652de4f1c43810acc44ef0ecc.html" target="blank" rel="noopener">dart.dev/interop/js-&#x2026;</a></p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/2c420db7a012daaf139d71d157f73e88.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7334653735358939177.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7334653735358939177.html" itemprop="url">阿里云已经不同步最新的docker hub了，别再用阿里云的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-16T15:24:59+08:00">
                2024-02-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4E4B;&#x524D;&#x7528;docker&#xFF0C;&#x4E00;&#x76F4;&#x90FD;&#x662F;&#x4E60;&#x60EF;&#x6027;&#x7684;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x955C;&#x50CF;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/023b579b2cdbe164494ad2839f5b7b8b59206a69ef77bbc38ff02c0f6ada319e" alt="image.png"></p>
<p>&#x540E;&#x9762;&#x53D1;&#x73B0;&#xFF0C;&#x5728;&#x62C9;&#x53D6;&#x955C;&#x50CF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x660E;&#x660E;&#x62C9;&#x7684;&#x662F;&#x6700;&#x65B0;&#x7684;latest&#x7248;&#xFF0C;&#x800C;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x5374;&#x662F;&#x4E24;&#x5E74;&#x524D;&#x7684;&#xFF0C;&#x8FD9;&#x975E;&#x5E38;&#x7684;&#x4E0D;&#x5408;&#x7406;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/41defc83a5432c2f1e3afdb918845b5cfd3c4ff0f037a236e5a766adb3c5581e" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/3b93983379db19d33b1a51bf6ece3b1400f04a5401e2490ea2deadad87fdebad" alt="image.png"></p>
<p>&#x641C;&#x4E86;&#x4E00;&#x4E0B;&#x624D;&#x53D1;&#x73B0;&#xFF0C;&#x539F;&#x6765;&#x662F;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x95EE;&#x9898;&#x3002;<a href="/external_links/04b0507bda32f2e8481f21c37d83a041.html" target="blank" rel="noopener">segmentfault.com/q/101000004&#x2026;</a></p>
<p>&#x4E8E;&#x662F;&#x5207;&#x6362;&#x5230;&#x65B0;&#x7684;&#x955C;&#x50CF;&#x7AD9;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x8FD9;&#x4E2A;<code>https://dockerproxy.com</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/25ef9ad9a4ad99fe5ed21930f7ad4e3d2028dc9316d3aa67961e2caeb3091cfa" alt="image.png"></p>
<p>&#x5220;&#x9664;&#x955C;&#x50CF;&#xFF0C;&#x91CD;&#x65B0;&#x62C9;&#x53D6;&#xFF0C;&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#x53D8;&#x6210;&#x6700;&#x8FD1;&#x7684;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/1c8bd274d71ff6e34a0c42e46d56438c24e14e83c989053c2129712f056fb77b" alt="image.png"></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/14bf04f16169e1d2c7bb62f131bff214.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7335067315452428297.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7335067315452428297.html" itemprop="url">Flutter 2024 路线规划，更多可期待的功能正在路上</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-02-16T08:44:35+08:00">
                2024-02-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<a href="/external_links/de4e63ee46853ae08c96c814b5492522.html" target="blank" rel="noopener">github.com/flutter/flu&#x2026;</a></p>
</blockquote>
<p>2024 &#x6765;&#x4E86;&#xFF0C;Flutter 3.19 &#x4E5F;&#x53D1;&#x5E03;&#x4E86;&#xFF0C;&#x76EE;&#x524D; Flutter &#x5B98;&#x65B9;&#x56E2;&#x961F;&#x4E5F;&#x53D1;&#x5E03;&#x4E86; 2024 &#x7684;&#x89C4;&#x5212;&#xFF0C;&#x800C;&#x968F;&#x7740; 3.19 &#x7684;&#x53D1;&#x5E03;&#xFF0C;&#x76EE;&#x524D; Impeller &#x5728; Android &#x5E73;&#x53F0;&#x5DF2;&#x7ECF;&#x652F;&#x6301;&#x4E86; Android OpenGL &#x9884;&#x89C8;&#xFF0C;&#x968F;&#x7740; Impeller &#x7684;&#x8D28;&#x91CF;&#x548C;&#x6027;&#x80FD;&#x7684;&#x63D0;&#x5347;&#xFF0C;Impeller &#x5C06;&#x6709;&#x8F83;&#x5927;&#x7684;&#x8BA1;&#x5212;&#x53D8;&#x52A8;&#xFF1A;</p>
<ul>
<li><strong>&#x4ECA;&#x5E74; Flutter Team &#x5C06;&#x8BA1;&#x5212;&#x5220;&#x9664; iOS &#x4E0A;&#x7684; Skia &#x7684;&#x652F;&#x6301;&#xFF0C;&#x4ECE;&#x800C;&#x5B8C;&#x6210; iOS &#x5230; Impeller &#x7684;&#x5B8C;&#x5168;&#x8FC1;&#x79FB;</strong>&#xFF1B;</li>
<li>&#x5728; Android &#x4E0A; Impeller &#x4ECA;&#x5E74;&#x9884;&#x8BA1;&#x5C06;&#x5B8C;&#x6210; Vulkan &#x548C; OpenGLES &#x652F;&#x6301;&#xFF0C;&#x9884;&#x8BA1;&#x76EE;&#x6807;&#x540C;&#x6837;&#x662F;&#x5B8C;&#x5168;&#x629B;&#x5F03;&#x4F7F;&#x7528; Skia</li>
</ul>
<p>&#x770B;&#x6765;&#x4ECA;&#x5E74; Impeller &#x6709;&#x671B;&#x8FBE;&#x5230; Flutter &#x539F;&#x672C; Skia &#x7684;&#x53EF;&#x7528;&#x9AD8;&#x5EA6;&#xFF0C;&#x53E6;&#x5916;&#x629B;&#x5F03; Skia &#x4E5F;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x751F;&#x4EA7;&#x4E2D;&#x7684;&#x95EE;&#x9898;&#x56DE;&#x5F52;&#xFF0C;&#x5C31;&#x662F;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x5207;&#x6362;&#x5230; Impeller &#xFF0C;&#x8FD9;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x8F83;&#x5927;&#x7684;&#x5347;&#x7EA7;&#x6311;&#x6218;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x5173;&#x4E8E; Material 3 &#x7EE7;&#x7EED;&#x652F;&#x6301;&#xFF0C;&#x4E5F;&#x662F; 2024 &#x7684;&#x8BA1;&#x5212;&#x4E4B;&#x4E00;&#xFF0C;&#x4ECE; 3.16 &#x5F00;&#x59CB;&#x5C31;&#x662F; Material 3 default &#xFF08;M3&#xFF09;&#xFF0C;&#x4ECE; 3.16 &#x5F00;&#x59CB; <code>MaterialApp</code> &#x91CC;&#x7684; <code>useMaterial3</code> &#x9ED8;&#x8BA4;&#x4F1A;&#x662F; true&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x662F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>useMaterial3: false</code> &#x6765;&#x5173;&#x95ED;&#xFF0C;&#x5C31;&#x662F;&#x672A;&#x6765; <strong>Material 2 &#x76F8;&#x5173;&#x7684;&#x4E1C;&#x897F;&#x4F1A;&#x88AB;&#x5F03;&#x7528;&#x5E76;&#x5220;&#x9664;</strong>&#x3002;</p>
<blockquote>
<p>&#x66F4;&#x591A;&#x53EF;&#x89C1;&#xFF1A;<a href="https://dev.newban.cn/7304537109850472499">juejin.cn/post/730453&#x2026;</a></p>
</blockquote>
<p>&#x5728; 2023 &#x5E74;&#x7684;&#x65F6;&#x5019;&#xFF0C;<strong>Flutter &#x53D1;&#x5E03;&#x4E86; Multiple Flutter Views &#x7684;&#x652F;&#x6301;&#x8BA1;&#x5212;</strong>&#xFF0C;&#x867D;&#x7136;&#x76EE;&#x524D;&#x8FD9;&#x9879;&#x652F;&#x6301;&#x5728; PC &#x7AEF;&#x8FD8;&#x6CA1;&#x5B8C;&#x5168;&#x843D;&#x5730;&#xFF0C;&#x4F46;&#x662F;&#x5B98;&#x65B9;&#x5DF2;&#x7ECF;&#x8BA1;&#x5212;&#x5C06;&#x8FD9;&#x79CD;&#x652F;&#x6301;&#x6269;&#x5C55;&#x5230; Android &#x548C; iOS&#xFF0C;&#x540C;&#x65F6;&#x7EE7;&#x7EED;&#x63D0;&#x9AD8; platform views &#x7684;&#x6027;&#x80FD;&#x548C;&#x5B9E;&#x7528;&#x6027;&#xFF0C;&#x76EE;&#x524D; 3.19 &#x4E0A;&#x5F88;&#x591A;&#x652F;&#x6301;&#x90FD;&#x5DF2;&#x7ECF;&#x5207;&#x6362;&#x5230; THLC&#x3002;</p>
<p>&#x5728; iOS &#x4E0A;&#xFF0C;3.19 &#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x9002;&#x914D; <strong>Apple &#x5B98;&#x65B9;&#x8981;&#x6C42;&#x7684;<a href="https://dev.newban.cn/7311876701909549065">&#x9690;&#x79C1;&#x6E05;&#x5355;</a></strong> &#xFF0C;&#x672A;&#x6765;&#x5C06;&#x7EE7;&#x7EED;&#x652F;&#x6301; <a href="/external_links/8bb3f2a9ae086bd9dc47fcc4a00a9bb2.html" target="blank" rel="noopener">Swift Package Manager</a> &#x7B49;&#x76F8;&#x5173;&#x6807;&#x51C6;&#x9700;&#x8981;&#xFF0C;&#x5728; Android &#x4E0A;&#x5C06;&#x542F;&#x52A8; Kotlin &#x6784;&#x5EFA;&#x811A;&#x672C;&#x7684;&#x652F;&#x6301;&#xFF08;kts&#xFF09; &#x3002;</p>
<p>&#x53E6;&#x5916; <strong>Dart &#x4E0E;&#x5176;&#x4ED6;&#x5E73;&#x53F0;&#x4EE3;&#x7801;&#x76F4;&#x63A5;&#x4EA4;&#x4E92;&#x7684;&#x652F;&#x6301;&#x4E00;&#x76F4;&#x662F; Dart &#x7684;&#x6838;&#x5FC3;&#x5DE5;&#x4F5C;&#x4E4B;&#x4E00;</strong>&#xFF0C;&#x76EE;&#x524D; Dart &#x76F4;&#x63A5;&#x8C03;&#x7528; <a href="/external_links/4ba88f2101847423250c4a53a0cdb89f.html" target="blank" rel="noopener">Objective C</a> &#x5DF2;&#x7ECF;&#x63A5;&#x8FD1;&#x7A33;&#x5B9A;&#xFF0C;&#x672A;&#x6765;&#x5173;&#x4E8E; Dart &#x76F4;&#x63A5;&#x8C03;&#x7528; swift/java/kotlin &#x652F;&#x6301;&#x7684;&#x4E5F;&#x5C06;&#x7EE7;&#x7EED;&#x63A8;&#x8FDB;&#x5176;&#x7A33;&#x5B9A;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x76F8;&#x4FE1;&#x968F;&#x7740; <a href="https://dev.newban.cn/7334503381200781363#heading-22">Native assets</a> &#x76F8;&#x5173;&#x7684;&#x652F;&#x6301;&#x7684;&#x6210;&#x719F;&#xFF0C;&#x672A;&#x6765; Dart &#x76F4;&#x63A5;&#x548C;&#x539F;&#x751F;&#x8BED;&#x8A00;&#x4EA4;&#x4E92;&#x7684;&#x80FD;&#x529B;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x6210;&#x719F;&#x3002;</p>
<p>&#x5728; Web &#x5E73;&#x53F0;&#x4E0A;&#xFF0C;2024 &#x5C06;&#x7EE7;&#x7EED;&#x63A8;&#x8FDB;&#x5E94;&#x7528;&#x7684;&#x5927;&#x5C0F;&#x4F18;&#x5316;&#xFF0C;&#x66F4;&#x597D;&#x7528;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x652F;&#x6301;&#xFF0C;PlatformView &#x7684;&#x652F;&#x6301;&#x548C;&#x5E94;&#x7528;&#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x7684;&#x7F29;&#x51CF;&#xFF0C;&#x540C;&#x65F6; <strong>CanvasKit &#x5C06;&#x6210;&#x4E3A;&#x9ED8;&#x8BA4;&#x6E32;&#x67D3;&#xFF0C;&#x8FD9;&#x548C;&#x53BB;&#x5E74;&#x53D1;&#x5E03;&#x7684;&#x89C4;&#x5212;&#x4E00;&#x81F4;&#xFF0C;&#x8BE6;&#x7EC6;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x53BB;&#x5E74;&#x7684;<a href="https://dev.newban.cn/7232164444985622588">&#x300A;Flutter Web &#x8DEF;&#x7EBF;&#x5DF2;&#x5B9A;&#xFF0C;&#x53EF;&#x7528;&#x6027;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#xFF0C;&#x5FEB;&#x6765;&#x5C1D;&#x9C9C; WasmGC&#x300B;</a></strong> &#xFF0C;&#x53E6;&#x5916;&#x6539;&#x8FDB;&#x6587;&#x672C;&#x8F93;&#x5165;&#x4EE5;&#x53CA;&#x7814;&#x7A76;&#x652F;&#x6301;&#x9009;&#x9879; <a href="/external_links/5fe132a3bc96f81d1bc191744c1059db.html" target="blank" rel="noopener">Flutter Web &#x7684; SEO</a> &#x4E5F;&#x5728;&#x4ECA;&#x5E74;&#x7684;&#x8BA1;&#x5212;&#x91CC;&#x3002;</p>
<blockquote>
<p>&#x8FD9;&#x5305;&#x6DB5;&#x4E86; Dart &#x7F16;&#x8BD1;&#x4E3A; WasmGC &#x5E76;&#x652F;&#x6301; <a href="/external_links/0e0a8b745f23bb40049844b6c75bdaf6.html" target="blank" rel="noopener">Flutter Web &#x7684; Wasm &#x7F16;&#x8BD1;</a>&#xFF0C;&#x8FD8;&#x6709;Dart <a href="/external_links/ddc629dd4971acec299507d34157033a.html" target="blank" rel="noopener">&#x65B0;&#x7684; JS &#x4E92;&#x64CD;&#x4F5C;&#x673A;&#x5236;&#xFF0C;&#x652F;&#x6301; JS &#x548C; Wasm &#x7F16;&#x8BD1;</a> &#x76F8;&#x5173;&#x5185;&#x5BB9;&#x3002;</p>
</blockquote>
<p>&#x53E6;&#x5916; Web &#x8FD8;&#x5728;&#x8BA1;&#x5212;&#x6062;&#x590D;&#x652F;&#x6301;<a href="/external_links/4a509fad580de302cc29d07549fa6eb1.html" target="blank" rel="noopener">&#x7F51;&#x7EDC;&#x70ED;&#x91CD;&#x8F7D;</a>&#x3002;</p>
<p>&#x5173;&#x4E8E;&#x684C;&#x9762;&#x7AEF;&#xFF0C;&#x56E0;&#x4E3A;&#x67D0;&#x4E9B;&#x4F17;&#x6240;&#x5468;&#x77E5;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x867D;&#x7136;&#x8FC7;&#x53BB;&#x4E00;&#x5E74;&#x6CA1;&#x4EC0;&#x4E48;&#x5927;&#x7684;&#x8FDB;&#x5C55;&#xFF0C;&#x4F46;&#x662F;&#x4ECA;&#x5E74;&#x8FD8;&#x662F;&#x6709;&#x76F8;&#x5173;&#x7684;&#x63A8;&#x8FDB;&#x8BA1;&#x5212;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x63A8;&#x8FDB; <a href="/external_links/88598379b89f28646f1e9f8166c4aff6.html" target="blank" rel="noopener">macOS</a> &#x548C; <a href="/external_links/d89a30d2f6893904c0756822cf38bbfa.html" target="blank" rel="noopener">Windows</a> &#x4E0A;&#x7684; PlatformView &#x652F;&#x6301;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x5BF9; webview &#x7B49;&#x5185;&#x5BB9;&#x7684;&#x652F;&#x6301;</li>
</ul>
<ul>
<li>&#x5728; Linux &#x4E0A;&#x7684;&#x91CD;&#x70B9;&#x5C06;&#x662F; GTK4 &#x652F;&#x6301;&#x548C;&#x53EF;&#x8BBF;&#x95EE;&#x6027;</li>
</ul>
<ul>
<li>&#x5728;&#x6240;&#x6709;&#x5E73;&#x53F0;&#x4E0A;&#x5C06;&#x7EE7;&#x7EED;&#x652F;&#x6301;&#x6765;&#x81EA;&#x4E00;&#x4E2A; Dart isolate &#x7684;&#x591A;&#x4E2A;&#x89C6;&#x56FE;&#xFF0C;&#x6700;&#x7EC8;&#x76EE;&#x6807;&#x662F;&#x652F;&#x6301;&#x4ECE;&#x4E00;&#x4E2A; Widget &#x6811;&#x6E32;&#x67D3;&#x591A;&#x4E2A;&#x7A97;&#x53E3;&#x3002;</li>
</ul>
<blockquote>
<p>&#x591A;&#x7A97;&#x53E3;&#x95EE;&#x9898;&#x63D0;&#x4E86;&#x597D;&#x4E45;&#xFF0C;&#x53BB;&#x5E74;<a href="https://dev.newban.cn/7233964656287973436">&#x300A;&#x4F8B; Window &#x5F03;&#x7528;&#xFF0C;&#x4E00;&#x8D77;&#x6765;&#x4E86;&#x89E3; View.of &#x548C; PlatformDispatcher&#x300B;</a>&#x51FA;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x8FD8;&#x4EE5;&#x4E3A;&#x9A6C;&#x4E0A;&#x684C;&#x9762;&#x591A;&#x7A97;&#x53E3;&#x652F;&#x6301;&#x5C31;&#x8981;&#x6765;&#x4E86;&#xFF0C;&#x6CA1;&#x60F3;&#x5230;&#x8FD9;&#x4E48;&#x4E00;&#x7B49;&#x5C31;&#x662F; 2024 &#x4E86;&#x3002;</p>
</blockquote>
<p>&#x800C;&#x5728; Dart &#x8BED;&#x8A00;&#x65B9;&#x4FBF;&#xFF0C; <strong><a href="https://dev.newban.cn/7330528367354282034">2024 &#x9996;&#x8981;&#x652F;&#x6301;&#x5C31;&#x662F;Dart &#x5B8F;&#xFF08;Macros&#xFF09;&#x7F16;&#x7A0B;</a></strong>&#xFF0C;&#x53EA;&#x6709;&#x8FD9;&#x6837; JSON &#x5E8F;&#x5217;&#x5316;&#x6709;&#x6551;&#xFF0C;&#x9884;&#x8BA1;&#x8FD9;&#x4E2A;&#x80FD;&#x529B;&#x4F1A;&#x5728; <a href="/external_links/31752df27313086fa9f3e428b7e48f58.html" target="blank" rel="noopener">2024 &#x5E74;&#x4EA4;&#x4ED8;&#x652F;&#x6301;&#x5B83;&#x4EEC;&#x7684;&#x7B2C;&#x4E00;&#x9636;&#x6BB5;</a>&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4E00;&#x4E9B;&#x65E0;&#x6CD5;&#x89E3;&#x51B3;&#x7684;&#x67B6;&#x6784;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x4F1A;&#x653E;&#x5F03;&#x8FD9;&#x9879;&#x5DE5;&#x4F5C;&#x5B8F;&#xFF0C;&#x5B8F;&#x652F;&#x6301;&#x8BE6;&#x7EC6;&#x53EF;&#x89C1;&#xFF1A;<a href="https://dev.newban.cn/7330528367354282034">juejin.cn/post/733052&#x2026;</a></p>
<p>&#x6700;&#x540E;&#xFF0C;&#x5B98;&#x65B9;&#x53C8;&#x518D;&#x6B21;&#x58F0;&#x660E;&#xFF0C; <strong><a href="/external_links/8e9763f50381fef93db4d1c322adf1ac.html" target="blank" rel="noopener">Flutter &#x4ECD;&#x7136;&#x4E0D;&#x6253;&#x7B97;&#x6295;&#x8D44;&#x5BF9;&#x4EE3;&#x7801;&#x63A8;&#x9001;&#x6216;&#x70ED;&#x66F4;&#x65B0;</a>&#x7684;&#x5185;&#x7F6E;&#x652F;&#x6301;&#xFF0C;&#x5BF9;&#x4E8E;&#x4EE3;&#x7801;&#x63A8;&#x9001;&#xFF0C;&#x63A8;&#x8350;&#x53EF;&#x4EE5;&#x5173;&#x6CE8; <a href="/external_links/29f56543c81383bfcf5ec5d550178ff1.html" target="blank" rel="noopener">shorebird.dev</a>&#xFF0C;&#x5BF9;&#x4E8E; UI &#x63A8;&#x9001;&#xFF08;&#x4E5F;&#x79F0;&#x4E3A;&#x670D;&#x52A1;&#x5668;&#x9A71;&#x52A8;&#x7684; UI&#xFF09;&#x76F8;&#x5173;&#x652F;&#x6301;&#xFF0C;&#x63A8;&#x8350; <a href="/external_links/8d5efac6ef7ed1c76c98662de91e5cc9.html" target="blank" rel="noopener">rfw</a> &#x5305;&#x7684;&#x5B9E;&#x73B0;</strong>&#x3002;</p>
<p>&#x603B;&#x7684;&#x6765;&#x770B;&#xFF0C;Flutter 2024 &#x7684;&#x6838;&#x5FC3;&#x8FD8;&#x662F; Impeller &#x7684;&#x63A8;&#x8FDB;&#x843D;&#x5730;&#xFF0C;Web &#x4E0A;&#x7EE7;&#x7EED;&#x63A8;&#x52A8; WasmGC &#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x5168;&#x65B0;&#x7684; Wasm Native &#x652F;&#x6301;&#xFF0C;PC &#x7AEF;&#x8FD8;&#x662F;&#x7EE7;&#x7EED;&#x586B;&#x8865;&#x66FE;&#x7ECF;&#x7684;&#x5927;&#x997C;&#xFF0C;&#x6700;&#x503C;&#x5F97;&#x671F;&#x5F85;&#x7684;&#x5C31;&#x662F; Dart &#x5B8F;&#xFF08;Macros&#xFF09;&#x7F16;&#x7A0B;&#x672A;&#x6765;&#x7684;&#x652F;&#x6301;&#x843D;&#x5730;&#x4E86;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#xFF0C;2024 &#x7684; Flutter &#x5B98;&#x65B9;&#x8BA1;&#x5212;&#x91CC;&#xFF0C;&#x662F;&#x5426;&#x7B26;&#x5408;&#x4F60;&#x7684;&#x9884;&#x671F;&#x5462;&#xFF1F;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/40e0d4326e81ed120395eafa09161e8d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../34/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../34/">34</a><span class="page-number current">35</span><a class="page-number" href="../36/">36</a><span class="space">&hellip;</span><a class="page-number" href="../80/">80</a><a class="extend next" rel="next" href="../36/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">795</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">327</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
