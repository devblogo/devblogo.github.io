<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/378/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/378/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903516809461773.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903516809461773.html" itemprop="url">解决spring security自定义filter重复执行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T11:58:16+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x5E8F;"><a href="#&#x5E8F;" class="headerlink" title="&#x5E8F;"></a>&#x5E8F;</h2><p>&#x672C;&#x6587;&#x8BB2;&#x4E00;&#x4E2A;spring security&#x81EA;&#x5B9A;&#x4E49;filter&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x51FA;&#x73B0;&#x7684;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x5C31;&#x662F;filter&#x88AB;&#x6267;&#x884C;&#x4E24;&#x904D;&#x3002;</p>
<h2 id="&#x590D;&#x73B0;"><a href="#&#x590D;&#x73B0;" class="headerlink" title="&#x590D;&#x73B0;"></a>&#x590D;&#x73B0;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@EnableWebSecurity</span><br><span class="line">public class SecurityConfig extends WebSecurityConfigurerAdapter {</span><br><span class="line">    @Bean</span><br><span class="line">    public DemoFilter demoFilter(){</span><br><span class="line">        return new DemoFilter();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(HttpSecurity http) throws Exception {</span><br><span class="line">        http</span><br><span class="line">                .addFilterBefore(demoFilter(),AnonymousAuthenticationFilter.class)</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(&quot;/login&quot;,&quot;/css/**&quot;, &quot;/js/**&quot;,&quot;/fonts/**&quot;).permitAll()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x5176;&#x4E2D;DemoFilter&#x5982;&#x4E0B;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class DemoFilter extends GenericFilterBean {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {</span><br><span class="line">        //do something</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x539F;&#x56E0;"><a href="#&#x539F;&#x56E0;" class="headerlink" title="&#x539F;&#x56E0;"></a>&#x539F;&#x56E0;</h2><p>&#x5728;spring&#x5BB9;&#x5668;&#x6258;&#x7BA1;&#x7684;GenericFilterBean&#x7684;bean&#xFF0C;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x52A0;&#x5165;&#x5230;servlet&#x7684;filter chain&#xFF0C;&#x800C;&#x4E0A;&#x9762;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x8FD8;&#x989D;&#x5916;&#x628A;filter&#x52A0;&#x5165;&#x5230;&#x4E86;spring security&#x7684;<br>AnonymousAuthenticationFilter&#x4E4B;&#x524D;&#x3002;&#x800C;spring security&#x4E5F;&#x662F;&#x4E00;&#x7CFB;&#x5217;&#x7684;filter&#xFF0C;&#x5728;mvc&#x7684;filter&#x4E4B;&#x524D;&#x6267;&#x884C;&#x3002;&#x56E0;&#x6B64;&#x5728;&#x9274;&#x6743;&#x901A;&#x8FC7;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C31;&#x4F1A;&#x5148;&#x540E;&#x5404;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;</p>
<h2 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><h3 id="&#x65B9;&#x6848;1"><a href="#&#x65B9;&#x6848;1" class="headerlink" title="&#x65B9;&#x6848;1"></a>&#x65B9;&#x6848;1</h3><p>&#x4E0D;&#x628A;filter&#x6258;&#x7BA1;&#x7ED9;spring&#xFF0C;&#x76F4;&#x63A5;new&#xFF0C;&#x6BD4;&#x5982;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@EnableWebSecurity</span><br><span class="line">public class SecurityConfig extends WebSecurityConfigurerAdapter {</span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(HttpSecurity http) throws Exception {</span><br><span class="line">        http</span><br><span class="line">                .addFilterBefore(new DemoFilter(),AnonymousAuthenticationFilter.class)</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(&quot;/login&quot;,&quot;/css/**&quot;, &quot;/js/**&quot;,&quot;/fonts/**&quot;).permitAll()</span><br><span class="line">                .anyRequest().authenticated();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x65B9;&#x6848;2"><a href="#&#x65B9;&#x6848;2" class="headerlink" title="&#x65B9;&#x6848;2"></a>&#x65B9;&#x6848;2</h3><p>&#x6709;&#x65F6;&#x5019;filter&#x9700;&#x8981;&#x8BBF;&#x95EE;spring&#x5BB9;&#x5668;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x6258;&#x7BA1;&#x7ED9;&#x5BB9;&#x5668;&#x53EF;&#x80FD;&#x597D;&#x4E9B;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x50CF;FilterSecurityInterceptor&#x505A;&#x4E2A;&#x6807;&#x8BB0;FILTER_APPLIED</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class DemoFilter extends GenericFilterBean {</span><br><span class="line"></span><br><span class="line">    private static final String FILTER_APPLIED = &quot;__spring_security_demoFilter_filterApplied&quot;;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {</span><br><span class="line">        if (servletRequest.getAttribute(FILTER_APPLIED) != null) {</span><br><span class="line">            filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">            return ;</span><br><span class="line">        }</span><br><span class="line">        //do something</span><br><span class="line">        servletRequest.setAttribute(FILTER_APPLIED,true);</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="doc"><a href="#doc" class="headerlink" title="doc"></a>doc</h2><ul>
<li><a href="/external_links/401f4f006bf661d7049ef3f7d18b56e0.html" target="blank" rel="noopener">Spring security custom filter called multiple times</a></li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/648ac0cf02dba8656bd7ab8edb284e19.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513982500877.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513982500877.html" itemprop="url">记使用Kotlin进行服务端开发所遇到的问题（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T11:56:37+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4EE5;&#x4E0B;&#x662F;&#x5728;&#x4F7F;&#x7528;Kotlin&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x7AEF;&#x5F00;&#x53D1;&#x4EE5;&#x6765;&#x6240;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x8BB0;&#x5F55;&#x3002;</p>
<h5 id="1-fastjson&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x6570;&#x636E;&#x7C7B;&#xFF08;data-class&#xFF09;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x53CA;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;"><a href="#1-fastjson&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x6570;&#x636E;&#x7C7B;&#xFF08;data-class&#xFF09;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x53CA;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;" class="headerlink" title="1. fastjson&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x6570;&#x636E;&#x7C7B;&#xFF08;data class&#xFF09;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x53CA;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;"></a>1. fastjson&#x4E0D;&#x80FD;&#x6B63;&#x786E;&#x7684;&#x5BF9;&#x6570;&#x636E;&#x7C7B;&#xFF08;data class&#xFF09;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x53CA;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;</h5><p>&#x9996;&#x5148;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x76F8;&#x5173;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;data class User(</span><br><span class="line">        val id: Long?,</span><br><span class="line">        val username: String </span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F53;&#x7C7B;&#xFF0C;&#x5728;&#x4F7F;&#x7528;fastjson&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#xFF0C;&#x4F1A;&#x62A5;&#x627E;&#x4E0D;&#x5230;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#x3002;</p>
<p><strong>&#x539F;&#x56E0;&#xFF1A;</strong><br> Kotlin&#x7684;&#x8BED;&#x6CD5;&#x4E2D;User&#x4E4B;&#x540E;&#x7684;&#x5927;&#x62EC;&#x53F7;&#x8868;&#x793A;User&#x7C7B;&#x7684;&#x4E3B;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x540C;&#x65F6;data&#x4FEE;&#x9970;&#x7684;class&#x5FC5;&#x987B;&#x5728;&#x4E3B;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x5B9A;&#x4E49;&#x6240;&#x6709;&#x7684;&#x5C5E;&#x6027;&#x5B57;&#x6BB5;&#xFF0C;&#x56E0;&#x6B64;&#x7F16;&#x8BD1;&#x8FC7;&#x540E;&#x53EA;&#x4F1A;&#x5B58;&#x5728;&#x6307;&#x5B9A;&#x53C2;&#x6570;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</p>
<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;:</strong></p>
<ol>
<li>&#x4FEE;&#x6539;&#x6570;&#x636E;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x5C5E;&#x6027;&#x5B57;&#x6BB5;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#xFF08;<strong>&#x4E0D;&#x63A8;&#x8350;</strong>&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;data class User(</span><br><span class="line">    val id: Long? = null,</span><br><span class="line">    val username: String = &quot;&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&#x5229;&#x7528;Kotlin&#x901A;&#x8FC7;&#x652F;&#x6301;&#x53C2;&#x6570;&#x9ED8;&#x8BA4;&#x503C;&#x6765;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x91CD;&#x8F7D;&#x7684;&#x7279;&#x6027;&#x4F7F;&#x8BE5;&#x7C7B;&#x5728;&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x65F6;&#x53EF;&#x4EE5;&#x627E;&#x5230;&#x91CD;&#x8F7D;&#x7684;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</p>
<ol>
<li>&#x4F7F;&#x7528;1.2.36+&#x7248;&#x672C;&#x7684;fastjson&#xFF08;<strong>&#x63A8;&#x8350;</strong>&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.36&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>Kotlin&#x7F16;&#x8BD1;&#x63D2;&#x4EF6;&#x4E2D;&#x5F00;&#x542F;noarg&#x7684;&#x652F;&#x6301;&#xFF08;<strong>&#x63A8;&#x8350;</strong>&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;plugin&gt;</span><br><span class="line">                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;</span><br><span class="line">                &lt;version&gt;${kotlin.version}&lt;/version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;compilerPlugins&gt;</span><br><span class="line">                        &lt;plugin&gt;no-arg&lt;/plugin&gt;</span><br><span class="line">                    &lt;/compilerPlugins&gt;</span><br><span class="line">                    &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;</span><br><span class="line">                    &lt;experimentalCoroutines&gt;enable&lt;/experimentalCoroutines&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;compile&lt;/id&gt;</span><br><span class="line">                        &lt;phase&gt;compile&lt;/phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;compile&lt;/goal&gt;</span><br><span class="line">                        &lt;/goals&gt;</span><br><span class="line">                    &lt;/execution&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;test-compile&lt;/id&gt;</span><br><span class="line">                        &lt;phase&gt;test-compile&lt;/phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;test-compile&lt;/goal&gt;</span><br><span class="line">                        &lt;/goals&gt;</span><br><span class="line">                    &lt;/execution&gt;</span><br><span class="line">                &lt;/executions&gt;</span><br><span class="line">                &lt;dependencies&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;kotlin-maven-noarg&lt;/artifactId&gt;</span><br><span class="line">                        &lt;version&gt;${kotlin.version}&lt;/version&gt;</span><br><span class="line">                    &lt;/dependency&gt;</span><br><span class="line">                &lt;/dependencies&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>

<h5 id="2-Mybatis&#xFF0F;JPA&#x4E2D;&#x5B9E;&#x4F53;&#x7C7B;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7C7B;&#xFF08;data-class&#xFF09;&#x5B9A;&#x4E49;&#x65F6;&#xFF0C;&#x4F1A;&#x62A5;&#x627E;&#x4E0D;&#x5230;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#x3002;"><a href="#2-Mybatis&#xFF0F;JPA&#x4E2D;&#x5B9E;&#x4F53;&#x7C7B;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7C7B;&#xFF08;data-class&#xFF09;&#x5B9A;&#x4E49;&#x65F6;&#xFF0C;&#x4F1A;&#x62A5;&#x627E;&#x4E0D;&#x5230;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#x3002;" class="headerlink" title="2. Mybatis&#xFF0F;JPA&#x4E2D;&#x5B9E;&#x4F53;&#x7C7B;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7C7B;&#xFF08;data class&#xFF09;&#x5B9A;&#x4E49;&#x65F6;&#xFF0C;&#x4F1A;&#x62A5;&#x627E;&#x4E0D;&#x5230;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#x3002;"></a>2. Mybatis&#xFF0F;JPA&#x4E2D;&#x5B9E;&#x4F53;&#x7C7B;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7C7B;&#xFF08;data class&#xFF09;&#x5B9A;&#x4E49;&#x65F6;&#xFF0C;&#x4F1A;&#x62A5;&#x627E;&#x4E0D;&#x5230;&#x65E0;&#x53C2;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x7684;&#x9519;&#x8BEF;&#x3002;</h5><p><strong>&#x539F;&#x56E0;&#xFF1A;</strong><br> &#x540C;&#x4E0A;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ol>
<li>&#x4FEE;&#x6539;&#x6570;&#x636E;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5BF9;&#x6BCF;&#x4E2A;&#x5C5E;&#x6027;&#x5B57;&#x6BB5;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#xFF08;<strong>&#x4E0D;&#x63A8;&#x8350;</strong>&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;data class User(</span><br><span class="line">    val id: Long? = null,</span><br><span class="line">    val username: String = &quot;&quot;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ol>
<li>Kotlin&#x7F16;&#x8BD1;&#x63D2;&#x4EF6;&#x4E2D;&#x5F00;&#x542F;noarg&#x7684;&#x652F;&#x6301;&#xFF08;<strong>&#x63A8;&#x8350;</strong>&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;plugin&gt;</span><br><span class="line">                &lt;artifactId&gt;kotlin-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;</span><br><span class="line">                &lt;version&gt;${kotlin.version}&lt;/version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;compilerPlugins&gt;</span><br><span class="line">                        &lt;plugin&gt;no-arg&lt;/plugin&gt;</span><br><span class="line">                    &lt;/compilerPlugins&gt;</span><br><span class="line">                    &lt;jvmTarget&gt;1.8&lt;/jvmTarget&gt;</span><br><span class="line">                    &lt;experimentalCoroutines&gt;enable&lt;/experimentalCoroutines&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;compile&lt;/id&gt;</span><br><span class="line">                        &lt;phase&gt;compile&lt;/phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;compile&lt;/goal&gt;</span><br><span class="line">                        &lt;/goals&gt;</span><br><span class="line">                    &lt;/execution&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;test-compile&lt;/id&gt;</span><br><span class="line">                        &lt;phase&gt;test-compile&lt;/phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;test-compile&lt;/goal&gt;</span><br><span class="line">                        &lt;/goals&gt;</span><br><span class="line">                    &lt;/execution&gt;</span><br><span class="line">                &lt;/executions&gt;</span><br><span class="line">                &lt;dependencies&gt;</span><br><span class="line">                    &lt;dependency&gt;</span><br><span class="line">                        &lt;groupId&gt;org.jetbrains.kotlin&lt;/groupId&gt;</span><br><span class="line">                        &lt;artifactId&gt;kotlin-maven-noarg&lt;/artifactId&gt;</span><br><span class="line">                        &lt;version&gt;${kotlin.version}&lt;/version&gt;</span><br><span class="line">                    &lt;/dependency&gt;</span><br><span class="line">                &lt;/dependencies&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-SpringMVC&#x4E2D;validator&#x7684;&#x6CE8;&#x89E3;&#x4E0D;&#x751F;&#x6548;&#x7684;&#x95EE;&#x9898;&#x3002;"><a href="#3-SpringMVC&#x4E2D;validator&#x7684;&#x6CE8;&#x89E3;&#x4E0D;&#x751F;&#x6548;&#x7684;&#x95EE;&#x9898;&#x3002;" class="headerlink" title="3. SpringMVC&#x4E2D;validator&#x7684;&#x6CE8;&#x89E3;&#x4E0D;&#x751F;&#x6548;&#x7684;&#x95EE;&#x9898;&#x3002;"></a>3. SpringMVC&#x4E2D;validator&#x7684;&#x6CE8;&#x89E3;&#x4E0D;&#x751F;&#x6548;&#x7684;&#x95EE;&#x9898;&#x3002;</h5><p>&#x901A;&#x5E38;&#x5728;Java Web&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;SpringMVC&#x652F;&#x6301;&#x7684;&#x53C2;&#x6570;&#x9A8C;&#x8BC1;&#x5668;&#x7684;&#x6B65;&#x9AA4;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;//DTO</span><br><span class="line">public class LoginDTO {</span><br><span class="line">      @Size(min=6, max=12, message=&quot;{username.condition}&quot;)</span><br><span class="line">      private String username;</span><br><span class="line">      @Size(min=6, max=12, message=&quot;{password.condition}&quot;)</span><br><span class="line">      private String password;</span><br><span class="line">      // getter and setter</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// Request Handle Method</span><br><span class="line">...</span><br><span class="line">public ResponseEntity login(@Valiadted LoginDTO loginDTO,</span><br><span class="line">                                                  BindingResult result) {</span><br><span class="line">}</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x8868;&#x73B0;&#x5C42;&#x7684;&#x6570;&#x636E;&#x4F20;&#x8F93;&#x5BF9;&#x8C61;&#x4E2D;&#x4F7F;&#x7528;validtor&#x76F8;&#x5173;&#x7684;&#x7EA6;&#x675F;&#x6CE8;&#x89E3;&#x6807;&#x6CE8;&#x5B57;&#x6BB5;&#x7684;&#x6821;&#x9A8C;&#x6761;&#x4EF6;&#xFF0C;&#x540C;&#x65F6;&#x5728;controller&#x7684;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x4E0A;&#x4F7F;&#x7528;@Validated&#x6CE8;&#x89E3;&#x6807;&#x6CE8;&#x8981;&#x8FDB;&#x884C;&#x6821;&#x9A8C;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x914D;&#x7F6E;&#x597D;&#x6821;&#x9A8C;&#x5668;&#x4E4B;&#x540E;&#xFF0C;SpringMVC&#x5C31;&#x80FD;&#x81EA;&#x52A8;&#x7684;&#x5728;&#x8BF7;&#x6C42;&#x53C2;&#x6570;&#x89E3;&#x6790;&#x65F6;&#x8FDB;&#x884C;&#x53C2;&#x6570;&#x6821;&#x9A8C;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x9AD8;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x7684;&#x5065;&#x58EE;&#x6027;&#x3002; &#x4F46;&#x5C06;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x6210;Kotlin&#x540E;, &#x5176;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x5BF9;&#x8C61;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;data class LoginDTO(</span><br><span class="line">      val username: String,</span><br><span class="line">      val password: String</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x65F6;&#x4F7F;&#x7528;validator&#x7684;&#x7EA6;&#x675F;&#x6CE8;&#x89E3;&#x8FDB;&#x884C;&#x6807;&#x6CE8;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;data class LoginDTO(</span><br><span class="line">      @Size(min=6, max=12, message=&quot;{username.condition}&quot;)</span><br><span class="line">      val username: String,</span><br><span class="line">      @Size(min=6, max=12, message=&quot;{password.condition}&quot;)</span><br><span class="line">      val password: String</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&#x518D;&#x542F;&#x52A8;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x8BF7;&#x6C42;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x53C2;&#x6570;&#x6821;&#x9A8C;&#x5931;&#x6548;&#x3002;&#x901A;&#x8FC7;&#x65AD;&#x70B9;&#x8C03;&#x8BD5;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5728;&#x8FDB;&#x884C;&#x6821;&#x9A8C;&#x65F6;&#xFF0C;&#x6821;&#x9A8C;&#x5668;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x5230;&#x5B57;&#x6BB5;&#x4E0A;&#x7684;&#x7EA6;&#x675F;&#x96C6;&#x5408;&#xFF0C;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x53C2;&#x6570;&#x6821;&#x9A8C;&#x7684;&#x5931;&#x6548;&#x3002;</p>
<p><strong>&#x539F;&#x56E0;&#xFF1A;</strong><br> &#x5728;Java&#x4E2D;validator&#x7684;&#x7EA6;&#x675F;&#x6CE8;&#x89E3;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4F5C;&#x7528;&#x4E8E;&#x5C5E;&#x6027;&#x7684;getter&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x5728;Kotlin&#x7684;&#x6570;&#x636E;&#x7C7B;&#x4E2D;&#x6240;&#x6709;&#x7684;&#x5C5E;&#x6027;&#x5747;&#x4E3A;&#x4E0D;&#x53EF;&#x53D8;&#x5C5E;&#x6027;&#xFF0C;&#x4E14;&#x5FC5;&#x987B;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x6307;&#x5B9A;&#x6216;&#x5728;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E2D;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#xFF0C;&#x56E0;&#x6B64;&#x6570;&#x636E;&#x7C7B;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5B89;&#x5168;&#x7684;&#x6570;&#x636E;&#x627F;&#x8F7D;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>.&#x5C5E;&#x6027;&#x540D;</code>&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x8BBF;&#x95EE;&#x5C5E;&#x6027;&#x7684;&#x503C;&#xFF0C;&#x56E0;&#x800C;&#x4E5F;&#x4E0D;&#x5B58;&#x5728;getter&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x4E86;&#x7EA6;&#x675F;&#x6CE8;&#x89E3;&#x7684;&#x5931;&#x6548;&#x3002;</p>
<p><strong>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#xFF1A;</strong><br> &#x4F7F;&#x7528;@field:&#x4FEE;&#x9970;&#x7EA6;&#x675F;&#x6CE8;&#x89E3;&#xFF0C;&#x53EF;&#x4F7F;&#x4E4B;&#x751F;&#x6548;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;data class LoginDTO(</span><br><span class="line">      @field:Size(min=6, max=12, message=&quot;{username.condition}&quot;)</span><br><span class="line">      val username: String,</span><br><span class="line">      @field:Size(min=6, max=12, message=&quot;{password.condition}&quot;)</span><br><span class="line">      val password: String,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h5 id="4-Spring-Bean&#x6CE8;&#x5165;&#x7684;&#x95EE;&#x9898;&#x3002;"><a href="#4-Spring-Bean&#x6CE8;&#x5165;&#x7684;&#x95EE;&#x9898;&#x3002;" class="headerlink" title="4. Spring Bean&#x6CE8;&#x5165;&#x7684;&#x95EE;&#x9898;&#x3002;"></a>4. Spring Bean&#x6CE8;&#x5165;&#x7684;&#x95EE;&#x9898;&#x3002;</h5><p>&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5728;Java Web&#x5E94;&#x7528;&#x4E2D;&#x4F7F;&#x7528;Spring&#x65F6;&#xFF0C;&#x6700;&#x5E38;&#x7528;&#x7684;&#x4E24;&#x79CD;&#x6CE8;&#x5165;&#x65B9;&#x5F0F;<code>1. &#x6784;&#x9020;&#x5668;&#x6CE8;&#x5165;&#xFF1B;2. &#x5C5E;&#x6027;&#x503C;&#x6CE8;&#x5165;</code>&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Service</span><br><span class="line">public class UserServcieImpl implements UserService {</span><br><span class="line">        @Autowired</span><br><span class="line">        private UserRepo userRepo;</span><br><span class="line">        private MessageSource messageSource;</span><br><span class="line">        </span><br><span class="line">        public UserServiceImpl(MessageSource messageSource) {</span><br><span class="line">                  this.messgeSource = messageSource</span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x800C;&#x5728;Kotlin&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x7C7B;&#x7684;&#x5B9A;&#x4E49;&#x65B9;&#x5F0F;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x901A;&#x5E38;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x4F7F;&#x7528;&#x6784;&#x9020;&#x5668;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Service</span><br><span class="line">class UserServiceImpl(</span><br><span class="line">      val userRepo: UserRepo,</span><br><span class="line">      val messageSource: MessageSource</span><br><span class="line">): UserService</span><br></pre></td></tr></table></figure>

<p>&#x540C;&#x65F6;Kotlin&#x4E2D;&#x4E5F;&#x652F;&#x6301;&#x5C5E;&#x6027;&#x503C;&#x6CE8;&#x5165;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Service</span><br><span class="line">class userServiceImpl: UserService {</span><br><span class="line">        @Autowired</span><br><span class="line">        lateinit var userRepo: UserRepo</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#x5728;&#x4F7F;&#x7528;Kotlin&#x7F16;&#x5199;&#x7684;Junit&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x7C7B;&#x4E2D;&#xFF0C;&#x5C06;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x503C;&#x6CE8;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;class UserServiceTest : ServiceTest() {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    lateinit var userRepo: UserRepo</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    fun baseJPAQueryTest() {}</span><br></pre></td></tr></table></figure>

<p><strong>&#x56E0;&#x4E3A;Junit&#x6D4B;&#x8BD5;&#x7C7B;&#x8981;&#x6C42;&#xFF0C;&#x6D4B;&#x8BD5;&#x7C7B;&#x4E0D;&#x80FD;&#x6709;&#x542B;&#x53C2;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x3002;</strong></p>
<hr>
<h4 id="&#x672A;&#x5B8C;&#x5F85;&#x7EED;&#x3002;&#x3002;&#x3002;"><a href="#&#x672A;&#x5B8C;&#x5F85;&#x7EED;&#x3002;&#x3002;&#x3002;" class="headerlink" title="&#x672A;&#x5B8C;&#x5F85;&#x7EED;&#x3002;&#x3002;&#x3002;"></a>&#x672A;&#x5B8C;&#x5F85;&#x7EED;&#x3002;&#x3002;&#x3002;</h4><h3 id="PS&#xFF1A;"><a href="#PS&#xFF1A;" class="headerlink" title="PS&#xFF1A;"></a>PS&#xFF1A;</h3><ol>
<li>&#x611F;&#x8C22;&#x60A8;&#x7684;&#x9605;&#x8BFB;&#xFF0C;&#x5E0C;&#x671B;&#x6211;&#x7684;&#x8BB0;&#x5F55;&#x5BF9;&#x60A8;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;</li>
<li>&#x6B22;&#x8FCE;&#x5404;&#x79CD;&#x63D0;&#x95EE;&#xFF0C;&#x5728;&#x76F8;&#x4E92;&#x63A2;&#x8BA8;&#x4E2D;&#x5171;&#x540C;&#x63D0;&#x9AD8;&#x3002;</li>
<li>&#x5982;&#x679C;&#x7B52;&#x5B50;&#x4EEC;&#x6709;&#x9047;&#x5230;&#x8FC7;&#x5176;&#x4ED6;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4E5F;&#x6B22;&#x8FCE;&#x7559;&#x8A00;&#x7ED9;&#x6211;&#x63D0;&#x4F9B;&#x7814;&#x7A76;&#x7684;&#x7D20;&#x6750;&#x3002;</li>
</ol>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/1eebe166a462eed7cb7b274037493f71.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513999278094.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513999278094.html" itemprop="url">POI读取文件的最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T11:55:40+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="/external_links/cb178cc36ce22eb63c0bfb93b473f098.html" target="blank" rel="noopener">POI</a>&#x662F; Apache &#x65D7;&#x4E0B;&#x4E00;&#x6B3E;&#x8BFB;&#x5199;&#x5FAE;&#x8F6F;&#x5BB6;&#x6587;&#x6863;&#x58F0;&#x540D;&#x663E;&#x8D6B;&#x7684;&#x7C7B;&#x5E93;&#x3002;&#x5E94;&#x8BE5;&#x5F88;&#x591A;&#x4EBA;&#x5728;&#x505A;&#x62A5;&#x8868;&#x7684;&#x5BFC;&#x51FA;&#xFF0C;&#x6216;&#x8005;&#x521B;&#x5EFA; word &#x6587;&#x6863;&#x4EE5;&#x53CA;&#x8BFB;&#x53D6;&#x4E4B;&#x7C7B;&#x7684;&#x90FD;&#x662F;&#x7528;&#x8FC7; POI&#x3002;POI &#x4E5F;&#x7684;&#x786E;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x5E26;&#x6765;&#x5F88;&#x5927;&#x7684;&#x904D;&#x5386;&#x6027;&#x3002;&#x6211;&#x6700;&#x8FD1;&#x505A;&#x7684;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x5C31;&#x662F;&#x8BFB;&#x53D6;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x7684; word &#x4EE5;&#x53CA; excel &#x6587;&#x4EF6;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x5C31;&#x4E24;&#x65B9;&#x9762;&#x8BB2;&#x89E3;&#x4EE5;&#x4E0B;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#xFF1A;</p>
<h2 id="word-&#x7BC7;"><a href="#word-&#x7BC7;" class="headerlink" title="word &#x7BC7;"></a>word &#x7BC7;</h2><p>&#x5BF9;&#x4E8E; word &#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x9700;&#x8981;&#x7684;&#x5C31;&#x662F;&#x63D0;&#x53D6;&#x6587;&#x4EF6;&#x4E2D;&#x6B63;&#x6587;&#x7684;&#x6587;&#x5B57;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x6765;&#x8BFB;&#x53D6; doc &#x6216;&#x8005; docx &#x6587;&#x4EF6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    private static String readDoc(String filePath, InputStream is) {</span><br><span class="line">        String text= &quot;&quot;;</span><br><span class="line">        try {</span><br><span class="line">            if (filePath.endsWith(&quot;doc&quot;)) {</span><br><span class="line">                WordExtractor ex = new WordExtractor(is);</span><br><span class="line">                text = ex.getText();</span><br><span class="line">                ex.close();</span><br><span class="line">                is.close();</span><br><span class="line">            } else if(filePath.endsWith(&quot;docx&quot;)) {</span><br><span class="line">                XWPFDocument doc = new XWPFDocument(is);</span><br><span class="line">                XWPFWordExtractor extractor = new XWPFWordExtractor(doc);</span><br><span class="line">                text = extractor.getText();</span><br><span class="line">                extractor.close();</span><br><span class="line">                is.close();</span><br><span class="line">            }</span><br><span class="line">        } catch (Exception e) {</span><br><span class="line">            logger.error(filePath, e);</span><br><span class="line">        } finally {</span><br><span class="line">            if (is != null) {</span><br><span class="line">                is.close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return text;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x7406;&#x8BBA;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5E94;&#x8BE5;&#x5BF9;&#x4E8E;&#x8BFB;&#x53D6;&#x5927;&#x591A;&#x6570; doc &#x6216;&#x8005; docx &#x6587;&#x4EF6;&#x90FD;&#x662F;&#x6709;&#x6548;&#x7684;&#x3002;&#x4F46;&#x662F;!!!!&#x6211;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x5947;&#x602A;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x7684;&#x4EE3;&#x7801;&#x5728;&#x8BFB;&#x53D6;&#x67D0;&#x4E9B; doc &#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x7ED9;&#x51FA;&#x8FD9;&#x6837;&#x7684;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;org.apache.poi.poifs.filesystem.OfficeXmlFileException: The supplied data appears to be in the Office 2007+ XML. You are calling the part of POI that deals with OLE2 Office Documents.</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x7684;&#x610F;&#x601D;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF0C;&#x901A;&#x4FD7;&#x7684;&#x6765;&#x8BB2;&#xFF0C;&#x5C31;&#x662F;&#x4F60;&#x6253;&#x5F00;&#x7684;&#x6587;&#x4EF6;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A; doc &#x6587;&#x4EF6;&#xFF0C;&#x4F60;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x8BFB;&#x53D6; docx &#x7684;&#x65B9;&#x6CD5;&#x53BB;&#x8BFB;&#x53D6;&#x3002;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x660E;&#x660E;&#x6253;&#x5F00;&#x7684;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x540E;&#x7F00;&#x662F; doc &#x7684;&#x6587;&#x4EF6;&#x554A;&#xFF01;</p>
<p>&#x5176;&#x5B9E; doc &#x548C; docx &#x7684;&#x672C;&#x8D28;&#x4E0D;&#x540C;&#x7684;&#xFF0C;doc &#x662F; OLE2 &#x7C7B;&#x578B;&#xFF0C;&#x800C; docx &#x800C;&#x662F; OOXML &#x7C7B;&#x578B;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7528;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x4E00;&#x4E2A; docx &#x6587;&#x4EF6;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x4E00;&#x4E9B;&#x6587;&#x4EF6;&#x5939;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f88d23c46383808acd57b1b1af17a471e729a3e450d604897f98ebaaffad5539" alt></p>
<p>&#x672C;&#x8D28;&#x4E0A; docx &#x6587;&#x4EF6;&#x5C31;&#x662F;&#x4E00;&#x4E2A; zip &#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E9B; xml &#x6587;&#x4EF6;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4E00;&#x4E9B; docx &#x6587;&#x4EF6;&#x867D;&#x7136;&#x5927;&#x5C0F;&#x4E0D;&#x5927;&#xFF0C;&#x4F46;&#x662F;&#x5176;&#x5185;&#x90E8;&#x7684; xml &#x6587;&#x4EF6;&#x786E;&#x5B9E;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5728;&#x8BFB;&#x53D6;&#x67D0;&#x4E9B;&#x770B;&#x8D77;&#x6765;&#x4E0D;&#x662F;&#x5F88;&#x5927;&#x7684; docx &#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x5374;&#x8017;&#x8D39;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x5185;&#x5B58;&#x3002;</p>
<p>&#x7136;&#x540E;&#x6211;&#x4F7F;&#x7528;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x8FD9;&#x4E2A; doc &#x6587;&#x4EF6;&#xFF0C;&#x679C;&#x4E0D;&#x5176;&#x7136;&#xFF0C;&#x5176;&#x5185;&#x90E8;&#x6B63;&#x662F;&#x5982;&#x4E0A;&#x56FE;&#xFF0C;&#x6240;&#x4EE5;&#x672C;&#x8D28;&#x4E0A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x5B83;&#x662F;&#x4E00;&#x4E2A; docx &#x6587;&#x4EF6;&#x3002;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x662F;&#x4EE5;&#x67D0;&#x79CD;&#x517C;&#x5BB9;&#x6A21;&#x5F0F;&#x4FDD;&#x5B58;&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#x5982;&#x6B64;&#x5751;&#x7239;&#x7684;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6839;&#x636E;&#x540E;&#x7F00;&#x540D;&#x6765;&#x5224;&#x65AD;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x662F; doc &#x6216;&#x8005; docx &#x5C31;&#x662F;&#x4E0D;&#x53EF;&#x9760;&#x7684;&#x4E86;&#x3002;</p>
<p>&#x8001;&#x5B9E;&#x8BF4;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x8FD9;&#x5E94;&#x8BE5;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5C11;&#x89C1;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x6211;&#x5728;&#x8C37;&#x6B4C;&#x4E0A;&#x5E76;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x4EFB;&#x4F55;&#x5173;&#x4E8E;&#x6B64;&#x7684;&#x4FE1;&#x606F;&#x3002;<a href="/external_links/f14e67cd8bfe2846b02fff7d51100bc9.html" target="blank" rel="noopener">how to know whether a file is .docx or .doc format from Apache POI</a> &#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x662F;&#x901A;&#x8FC7; ZipInputStream<br> &#x6765;&#x5224;&#x65AD;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x662F; docx &#x6587;&#x4EF6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;boolean isZip = new ZipInputStream( fileStream ).getNextEntry() != null;</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x6211;&#x5E76;&#x4E0D;&#x89C9;&#x5F97;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x5F97;&#x53BB;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;ZipInpuStream&#xFF0C;&#x8FD9;&#x5F88;&#x663E;&#x7136;&#x4E0D;&#x597D;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x8C8C;&#x4F3C;&#x4F1A;&#x5F71;&#x54CD;&#x5230; InputStream&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x5728;&#x8BFB;&#x53D6;&#x6B63;&#x5E38;&#x7684; doc &#x6587;&#x4EF6;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#x3002;&#x6216;&#x8005;&#x4F60;&#x4F7F;&#x7528; File &#x5BF9;&#x8C61;&#x53BB;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A; zip &#x6587;&#x4EF6;&#x3002;&#x4F46;&#x8FD9;&#x4E5F;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x8FD8;&#x9700;&#x8981;&#x5728;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6; doc &#x6216;&#x8005; docx &#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x7684;&#x8F93;&#x5165;&#x5FC5;&#x987B;&#x662F; Inputstream&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x4E5F;&#x662F;&#x4E0D;&#x53EF;&#x4EE5;&#x7684;&#x3002; &#x6211;&#x5728; stackoverflow &#x4E0A;&#x548C;&#x4E00;&#x5E2E;&#x8001;&#x5916;&#x626F;&#x4E86;&#x5927;&#x534A;&#x5929;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x771F;&#x7684;&#x5F88;&#x6000;&#x7591;&#x8FD9;&#x5E2E;&#x8001;&#x5916;&#x7684;&#x7406;&#x89E3;&#x80FD;&#x529B;&#xFF0C;&#x4E0D;&#x8FC7;&#x6700;&#x7EC8;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x5927;&#x4F6C;&#x7ED9;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x8BA9;&#x6211;&#x6B23;&#x559C;&#x82E5;&#x72C2;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;<br> <a href="/external_links/06113eb95ab51dc3d6c34ac586049b55.html" target="blank" rel="noopener">FileMagic</a>&#x3002;&#x8FD9;&#x4E2A;&#x662F;&#x4E00;&#x4E2A; POI 3.17&#x65B0;&#x589E;&#x52A0;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public enum FileMagic {</span><br><span class="line">    /** OLE2 / BIFF8+ stream used for Office 97 and higher documents */</span><br><span class="line">    OLE2(HeaderBlockConstants._signature),</span><br><span class="line">    /** OOXML / ZIP stream */</span><br><span class="line">    OOXML(OOXML_FILE_HEADER),</span><br><span class="line">    /** XML file */</span><br><span class="line">    XML(RAW_XML_FILE_HEADER),</span><br><span class="line">    /** BIFF2 raw stream - for Excel 2 */</span><br><span class="line">    BIFF2(new byte[]{</span><br><span class="line">            0x09, 0x00, // sid=0x0009</span><br><span class="line">            0x04, 0x00, // size=0x0004</span><br><span class="line">            0x00, 0x00, // unused</span><br><span class="line">            0x70, 0x00  // 0x70 = multiple values</span><br><span class="line">    }),</span><br><span class="line">    /** BIFF3 raw stream - for Excel 3 */</span><br><span class="line">    BIFF3(new byte[]{</span><br><span class="line">            0x09, 0x02, // sid=0x0209</span><br><span class="line">            0x06, 0x00, // size=0x0006</span><br><span class="line">            0x00, 0x00, // unused</span><br><span class="line">            0x70, 0x00  // 0x70 = multiple values</span><br><span class="line">    }),</span><br><span class="line">    /** BIFF4 raw stream - for Excel 4 */</span><br><span class="line">    BIFF4(new byte[]{</span><br><span class="line">            0x09, 0x04, // sid=0x0409</span><br><span class="line">            0x06, 0x00, // size=0x0006</span><br><span class="line">            0x00, 0x00, // unused</span><br><span class="line">            0x70, 0x00  // 0x70 = multiple values</span><br><span class="line">    },new byte[]{</span><br><span class="line">            0x09, 0x04, // sid=0x0409</span><br><span class="line">            0x06, 0x00, // size=0x0006</span><br><span class="line">            0x00, 0x00, // unused</span><br><span class="line">            0x00, 0x01</span><br><span class="line">    }),</span><br><span class="line">    /** Old MS Write raw stream */</span><br><span class="line">    MSWRITE(</span><br><span class="line">            new byte[]{0x31, (byte)0xbe, 0x00, 0x00 },</span><br><span class="line">            new byte[]{0x32, (byte)0xbe, 0x00, 0x00 }),</span><br><span class="line">    /** RTF document */</span><br><span class="line">    RTF(&quot;{\\rtf&quot;),</span><br><span class="line">    /** PDF document */</span><br><span class="line">    PDF(&quot;%PDF&quot;),</span><br><span class="line">    // keep UNKNOWN always as last enum!</span><br><span class="line">    /** UNKNOWN magic */</span><br><span class="line">    UNKNOWN(new byte[0]);</span><br><span class="line"></span><br><span class="line">    final byte[][] magic;</span><br><span class="line"></span><br><span class="line">    FileMagic(long magic) {</span><br><span class="line">        this.magic = new byte[1][8];</span><br><span class="line">        LittleEndian.putLong(this.magic[0], 0, magic);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    FileMagic(byte[]... magic) {</span><br><span class="line">        this.magic = magic;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    FileMagic(String magic) {</span><br><span class="line">        this(magic.getBytes(LocaleUtil.CHARSET_1252));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static FileMagic valueOf(byte[] magic) {</span><br><span class="line">        for (FileMagic fm : values()) {</span><br><span class="line">            int i=0;</span><br><span class="line">            boolean found = true;</span><br><span class="line">            for (byte[] ma : fm.magic) {</span><br><span class="line">                for (byte m : ma) {</span><br><span class="line">                    byte d = magic[i++];</span><br><span class="line">                    if (!(d == m || (m == 0x70 &amp;&amp; (d == 0x10 || d == 0x20 || d == 0x40)))) {</span><br><span class="line">                        found = false;</span><br><span class="line">                        break;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                if (found) {</span><br><span class="line">                    return fm;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return UNKNOWN;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Get the file magic of the supplied InputStream (which MUST</span><br><span class="line">     *  support mark and reset).&lt;p&gt;</span><br><span class="line">     *</span><br><span class="line">     * If unsure if your InputStream does support mark / reset,</span><br><span class="line">     *  use {@link #prepareToCheckMagic(InputStream)} to wrap it and make</span><br><span class="line">     *  sure to always use that, and not the original!&lt;p&gt;</span><br><span class="line">     *</span><br><span class="line">     * Even if this method returns {@link FileMagic#UNKNOWN} it could potentially mean,</span><br><span class="line">     *  that the ZIP stream has leading junk bytes</span><br><span class="line">     *</span><br><span class="line">     * @param inp An InputStream which supports either mark/reset</span><br><span class="line">     */</span><br><span class="line">    public static FileMagic valueOf(InputStream inp) throws IOException {</span><br><span class="line">        if (!inp.markSupported()) {</span><br><span class="line">            throw new IOException(&quot;getFileMagic() only operates on streams which support mark(int)&quot;);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // Grab the first 8 bytes</span><br><span class="line">        byte[] data = IOUtils.peekFirst8Bytes(inp);</span><br><span class="line"></span><br><span class="line">        return FileMagic.valueOf(data);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Checks if an {@link InputStream} can be reseted (i.e. used for checking the header magic) and wraps it if not</span><br><span class="line">     *</span><br><span class="line">     * @param stream stream to be checked for wrapping</span><br><span class="line">     * @return a mark enabled stream</span><br><span class="line">     */</span><br><span class="line">    public static InputStream prepareToCheckMagic(InputStream stream) {</span><br><span class="line">        if (stream.markSupported()) {</span><br><span class="line">            return stream;</span><br><span class="line">        }</span><br><span class="line">        // we used to process the data via a PushbackInputStream, but user code could provide a too small one</span><br><span class="line">        // so we use a BufferedInputStream instead now</span><br><span class="line">        return new BufferedInputStream(stream);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x8FD9;&#x7ED9;&#x51FA;&#x4E3B;&#x8981;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x6839;&#x636E; InputStream &#x524D; 8 &#x4E2A;&#x5B57;&#x8282;&#x6765;&#x5224;&#x65AD;&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x6BEB;&#x65E0;&#x4EE5;&#x4E3A;&#x8FD9;&#x5C31;&#x662F;&#x6700;&#x4F18;&#x96C5;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x5F0F;&#x3002;&#x4E00;&#x5F00;&#x59CB;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4E5F;&#x662F;&#x5728;&#x60F3;&#x5BF9;&#x4E8E;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x7684;&#x524D;&#x51E0;&#x4E2A;&#x5B57;&#x8282;&#x4F3C;&#x4E4E;&#x662F;&#x7531;&#x4E0D;&#x540C;&#x7684;&#x5B9A;&#x4E49;&#x7684;&#xFF0C;<a href="/external_links/762601a84abaed893bf3eb1f16d9cd43.html" target="blank" rel="noopener">magicmumber</a>&#x3002;&#x56E0;&#x4E3A; FileMagic &#x7684;&#x4F9D;&#x8D56;&#x548C;3.16 &#x7248;&#x672C;&#x662F;&#x517C;&#x5BB9;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x53EA;&#x9700;&#x8981;&#x52A0;&#x5165;&#x8FD9;&#x4E2A;&#x7C7B;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x8BFB;&#x53D6; word &#x6587;&#x4EF6;&#x7684;&#x6B63;&#x786E;&#x505A;&#x6CD5;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    private static String readDoc (String filePath, InputStream is) {</span><br><span class="line">        String text= &quot;&quot;;</span><br><span class="line">        is = FileMagic.prepareToCheckMagic(is);</span><br><span class="line">        try {</span><br><span class="line">            if (FileMagic.valueOf(is) == FileMagic.OLE2) {</span><br><span class="line">                WordExtractor ex = new WordExtractor(is);</span><br><span class="line">                text = ex.getText();</span><br><span class="line">                ex.close();</span><br><span class="line">            } else if(FileMagic.valueOf(is) == FileMagic.OOXML) {</span><br><span class="line">                XWPFDocument doc = new XWPFDocument(is);</span><br><span class="line">                XWPFWordExtractor extractor = new XWPFWordExtractor(doc);</span><br><span class="line">                text = extractor.getText();</span><br><span class="line">                extractor.close();</span><br><span class="line">            }</span><br><span class="line">        } catch (Exception e) {</span><br><span class="line">            logger.error(&quot;for file &quot; + filePath, e);</span><br><span class="line">        } finally {</span><br><span class="line">            if (is != null) {</span><br><span class="line">                is.close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return text;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h2 id="excel-&#x7BC7;"><a href="#excel-&#x7BC7;" class="headerlink" title="excel &#x7BC7;"></a>excel &#x7BC7;</h2><p>&#x5BF9;&#x4E8E; excel &#x7BC7;&#xFF0C;&#x6211;&#x4E5F;&#x5C31;&#x4E0D;&#x53BB;&#x627E;&#x4E4B;&#x524D;&#x7684;&#x65B9;&#x6848;&#x548C;&#x73B0;&#x5728;&#x7684;&#x65B9;&#x6848;&#x7684;&#x5BF9;&#x6BD4;&#x4E86;&#x3002;&#x5C31;&#x7ED9;&#x51FA;&#x6211;&#x73B0;&#x5728;&#x7684;&#x6700;&#x4F73;&#x505A;&#x6CD5;&#x4E86;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    @SuppressWarnings(&quot;deprecation&quot; )</span><br><span class="line">    private static String readExcel(String filePath, InputStream inp) throws Exception {</span><br><span class="line">        Workbook wb;</span><br><span class="line">        StringBuilder sb = new StringBuilder();</span><br><span class="line">        try {</span><br><span class="line">            if (filePath.endsWith(&quot;.xls&quot;)) {</span><br><span class="line">                wb = new HSSFWorkbook(inp);</span><br><span class="line">            } else {</span><br><span class="line">                wb = StreamingReader.builder()</span><br><span class="line">                        .rowCacheSize(1000)    // number of rows to keep in memory (defaults to 10)</span><br><span class="line">                        .bufferSize(4096)     // buffer size to use when reading InputStream to file (defaults to 1024)</span><br><span class="line">                        .open(inp);            // InputStream or File for XLSX file (required)</span><br><span class="line">            }</span><br><span class="line">            sb = readSheet(wb, sb, filePath.endsWith(&quot;.xls&quot;));</span><br><span class="line">            wb.close();</span><br><span class="line">        } catch (OLE2NotOfficeXmlFileException e) {</span><br><span class="line">            logger.error(filePath, e);</span><br><span class="line">        } finally {</span><br><span class="line">            if (inp != null) {</span><br><span class="line">                inp.close();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return sb.toString();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    private static String readExcelByFile(String filepath, File file) {</span><br><span class="line">        Workbook wb;</span><br><span class="line">        StringBuilder sb = new StringBuilder();</span><br><span class="line">        try {</span><br><span class="line">            if (filepath.endsWith(&quot;.xls&quot;)) {</span><br><span class="line">                wb = WorkbookFactory.create(file);</span><br><span class="line">            } else {</span><br><span class="line">                wb = StreamingReader.builder()</span><br><span class="line">                        .rowCacheSize(1000)    // number of rows to keep in memory (defaults to 10)</span><br><span class="line">                        .bufferSize(4096)     // buffer size to use when reading InputStream to file (defaults to 1024)</span><br><span class="line">                        .open(file);            // InputStream or File for XLSX file (required)</span><br><span class="line">            }</span><br><span class="line">            sb = readSheet(wb, sb, filepath.endsWith(&quot;.xls&quot;));</span><br><span class="line">            wb.close();</span><br><span class="line">        } catch (Exception e) {</span><br><span class="line">            logger.error(filepath, e);</span><br><span class="line">        }</span><br><span class="line">        return sb.toString();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    private static StringBuilder readSheet(Workbook wb, StringBuilder sb, boolean isXls) throws Exception {</span><br><span class="line">        for (Sheet sheet: wb) {</span><br><span class="line">            for (Row r: sheet) {</span><br><span class="line">                for (Cell cell: r) {</span><br><span class="line">                    if (cell.getCellType() == Cell.CELL_TYPE_STRING) {</span><br><span class="line">                        sb.append(cell.getStringCellValue());</span><br><span class="line">                        sb.append(&quot; &quot;);</span><br><span class="line">                    } else if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {</span><br><span class="line">                        if (isXls) {</span><br><span class="line">                            DataFormatter formatter = new DataFormatter();</span><br><span class="line">                            sb.append(formatter.formatCellValue(cell));</span><br><span class="line">                        } else {</span><br><span class="line">                            sb.append(cell.getStringCellValue());</span><br><span class="line">                        }</span><br><span class="line">                        sb.append(&quot; &quot;);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return sb;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x5B9E;&#xFF0C;&#x5BF9;&#x4E8E; excel &#x8BFB;&#x53D6;&#xFF0C;&#x6211;&#x7684;&#x5DE5;&#x5177;&#x9762;&#x4E34;&#x7684;&#x6700;&#x5927;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x3002;&#x7ECF;&#x5E38;&#x5728;&#x8BFB;&#x53D6;&#x67D0;&#x4E9B;&#x7279;&#x522B;&#x5927;&#x7684; excel &#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x5E26;&#x6765;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x7684;&#x95EE;&#x9898;&#x3002;&#x540E;&#x6765;&#x6211;&#x7EC8;&#x4E8E;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x4F18;&#x79C0;&#x7684;&#x5DE5;&#x5177; <a href="/external_links/040ceafec7b692bc9cd7636257b7ae8b.html" target="blank" rel="noopener">excel-streaming-reader</a>&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x6D41;&#x5F0F;&#x7684;&#x8BFB;&#x53D6; xlsx &#x6587;&#x4EF6;&#xFF0C;&#x5C06;&#x4E00;&#x4E9B;&#x7279;&#x522B;&#x5927;&#x7684;&#x6587;&#x4EF6;&#x62C6;&#x5206;&#x6210;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x53BB;&#x8BFB;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x505A;&#x7684;&#x4F18;&#x5316;&#x5C31;&#x662F;&#xFF0C;&#x5BF9;&#x4E8E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; File &#x5BF9;&#x8C61;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x6211;&#x662F;&#x53BB;&#x4F7F;&#x7528; File &#x5BF9;&#x8C61;&#x53BB;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528; InputStream &#x53BB;&#x8BFB;&#x53D6;&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528; InputStream &#x9700;&#x8981;&#x628A;&#x5B83;&#x5168;&#x90E8;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x6837;&#x662F;&#x975E;&#x5E38;&#x5360;&#x7528;&#x5185;&#x5B58;&#x7684;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x7684;&#x4E00;&#x70B9;&#x5C0F;&#x6280;&#x5DE7;&#x5C31;&#x662F;&#x4F7F;&#x7528; <code>cell.getCellType</code> &#x53BB;&#x51CF;&#x5C11;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x53EA;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x4E00;&#x4E9B;&#x6587;&#x5B57;&#x4EE5;&#x53CA;&#x6570;&#x5B57;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5185;&#x5BB9;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x5728;&#x4F7F;&#x7528; POI &#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x7684;&#x4E00;&#x4E9B;&#x63A2;&#x7D22;&#x548C;&#x53D1;&#x73B0;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x80FD;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;&#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E9B;&#x4F8B;&#x5B50;&#x4E5F;&#x662F;&#x5728;&#x6211;&#x7684;&#x4E00;&#x6B3E;&#x5DE5;&#x5177; <a href="/external_links/f22753e4ae1704e08472328c824a521c.html" target="blank" rel="noopener">everywhere</a> &#x4E2D;&#x7684;&#x5E94;&#x7528;&#xFF08;&#x8FD9;&#x6B3E;&#x5DE5;&#x5177;&#x4E3B;&#x8981;&#x662F;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4F60;&#x5728;&#x7535;&#x8111;&#x4E2D;&#x8FDB;&#x884C;&#x5185;&#x5BB9;&#x7684;&#x5168;&#x6587;&#x641C;&#x7D22;&#xFF09;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#xFF0C;&#x6B22;&#x8FCE; star &#x6216;&#x8005; pr&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/0dc641ba5fd11efe9d369f57631a524a.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903516780101640.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903516780101640.html" itemprop="url">aria2 及 DLNA 服务 Docker 部署 -（3）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T11:53:09+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d006500b4200223f75e35556ed7236ee737b19c7edd5944f6cb06cee276d5936" alt="tv"></p>
<p>&#x524D;&#x4E24;&#x7BC7;&#x8C08;&#x5230;&#x4E86; aria2 &#x670D;&#x52A1;&#xFF0C;Web &#x9875;&#x9762;&#xFF0C;&#x4EE5;&#x53CA;&#x4ECE;&#x767E;&#x5EA6;&#x4E91;&#x4E0B;&#x8F7D;&#x548C; BT &#x79CD;&#x5B50; tracker list &#x7684;&#x66F4;&#x65B0;&#x3002;&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x8BF4;&#x8BF4;&#x4E0B;&#x8F7D;&#x6587;&#x4EF6;&#x7684;&#x591A;&#x7EC8;&#x7AEF;&#x5171;&#x4EAB;&#x3002;</p>
<h2 id="Samba"><a href="#Samba" class="headerlink" title="Samba"></a>Samba</h2><p>&#x8BF4;&#x5230;&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#xFF0C;&#x6700;&#x5148;&#x60F3;&#x5230;&#x7684; Samba&#x3002;Samba &#x662F;&#x4E00;&#x6B3E;&#x5B9E;&#x73B0; SMB&#xFF08;Server Messages Block&#xFF09;&#x534F;&#x8BAE;&#x7684;&#x514D;&#x8D39;&#x8F6F;&#x4EF6;&#xFF0C;&#x7528;&#x6765;&#x4E3A;&#x5C40;&#x57DF;&#x7F51;&#x7684;&#x4E0D;&#x540C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x63D0;&#x4F9B;&#x6587;&#x4EF6;&#x53CA;&#x6253;&#x5370;&#x673A;&#x7B49;&#x8D44;&#x6E90;&#x7684;&#x5171;&#x4EAB;&#x670D;&#x52A1;&#x3002;&#x6211;&#x5F00;&#x59CB;&#x5C31;&#x662F;&#x7528; Samba &#x7528;&#x6765;&#x5171;&#x4EAB;&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;&#x7684;&#x89C6;&#x9891;&#xFF0C;&#x5E76;&#x4E14;&#x7B80;&#x5355;&#x7684;&#x8BBE;&#x7F6E;&#x4E86;&#x76EE;&#x5F55;&#x548C;&#x7528;&#x6237;&#x6743;&#x9650;&#xFF0C;&#x7528;&#x6237;&#x5BC6;&#x7801;&#x7B49;&#x57FA;&#x672C;&#x914D;&#x7F6E;&#x3002;&#x4F7F;&#x7528;&#x4E86; <code>joebiellik/samba-server</code> &#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x5C40;&#x57DF;&#x7F51;&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x3002;</p>
<p><code>docker-compose.yml</code> &#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;version: &apos;3.1&apos;</span><br><span class="line">services:</span><br><span class="line">  samba:</span><br><span class="line">    image: joebiellik/samba-server:latest</span><br><span class="line">    container_name: samba</span><br><span class="line">    restart: always</span><br><span class="line">    network_mode: &apos;host&apos;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./data:/mnt</span><br><span class="line">      - ./conf.d/smb.conf:/config/smb.conf</span><br><span class="line">      - /etc/localtime:/etc/localtime:ro</span><br><span class="line">    environment:</span><br><span class="line">      - USERNAME=samba</span><br><span class="line">      - PASSWORD=samba</span><br><span class="line">    logging:</span><br><span class="line">      driver: &quot;json-file&quot;</span><br><span class="line">      options:</span><br><span class="line">        max-size: &quot;1m&quot;</span><br></pre></td></tr></table></figure>

<p>&#x5C40;&#x57DF;&#x7F51;&#x5185;&#x7684;&#x624B;&#x673A;&#xFF0C;&#x7535;&#x89C6;&#x548C; iPad &#x5F88;&#x5BB9;&#x6613;&#x5C31;&#x641C;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x6D4F;&#x89C8;&#x548C;&#x64AD;&#x653E;&#x89C6;&#x9891;&#x8D44;&#x6E90;&#x3002;&#x7528;&#x4E86;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x611F;&#x89C9;&#x8FD8;&#x53EF;&#x4EE5;&#xFF0C;&#x5E73;&#x5E38;&#x90FD;&#x64AD;&#x653E;&#x4E00;&#x4E9B;&#x51E0;&#x767E;&#x5146;&#x4E0D;&#x662F;&#x5F88;&#x5927;&#x7684;&#x7F8E;&#x5267;&#xFF0C;&#x6CA1;&#x89C9;&#x5F97;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#x540E;&#x6765;&#x4E0B;&#x8F7D;&#x4E00;&#x4E9B;&#x51E0;&#x4E2A; G &#x7684;&#x9AD8;&#x6E05;&#x7535;&#x5F71;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BD4;&#x8F83;&#x5403;&#x529B;&#x4E86;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x52A0;&#x8F7D;&#x4E0D;&#x52A8;&#xFF0C;&#x611F;&#x89C9;&#x53EF;&#x80FD;&#x5C31;&#x9700;&#x8981;&#x6D41;&#x670D;&#x52A1;&#x4E86;&#x3002;&#x1F917;</p>
<h2 id="MiniDLNA"><a href="#MiniDLNA" class="headerlink" title="MiniDLNA"></a>MiniDLNA</h2><p>MiniDLNA &#x662F;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7AEF;&#x8F6F;&#x4EF6;&#xFF0C;&#x65E8;&#x5728;&#x4E3A;&#x517C;&#x5BB9; <a href="/external_links/ac94fcc6a9832e1c0d27cd8b0b4a9876.html" target="blank" rel="noopener">DLNA</a>/<a href="/external_links/5e39116c9442256744c09a58c09a95a2.html" target="blank" rel="noopener">UPnP</a> &#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x5A92;&#x4F53;&#x6587;&#x4EF6;&#xFF08;&#x97F3;&#x4E50;&#x3001;&#x56FE;&#x7247;&#x548C;&#x89C6;&#x9891;&#xFF09;&#x3002;MiniDLNA &#x529F;&#x80FD;&#x7B80;&#x5355;&#xFF0C;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x6CA1;&#x6709;&#x7BA1;&#x7406;&#x9875;&#x9762;&#x6765;&#x914D;&#x7F6E;&#x548C;&#x7BA1;&#x7406;&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6765;&#x914D;&#x7F6E;&#x3002;&#x5E76;&#x4E14;&#x4E0D;&#x80FD;&#x50CF; Samba<br> &#x4E00;&#x6837;&#x914D;&#x7F6E;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#x7B49;&#xFF0C;&#x8BBE;&#x7F6E;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002;&#x4F46;&#x662F;&#x5BF9;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#xFF0C;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x4E86;&#x3002;</p>
<p>MiniDLNA &#x4F7F;&#x7528;&#x7684;&#x662F; <code>vladgh/minidlna</code> &#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x914D;&#x7F6E;&#x7B80;&#x5355;&#xFF0C;<code>docker-compose.yml</code> &#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;version: &apos;3.1&apos;</span><br><span class="line">services:</span><br><span class="line">  minidlna:</span><br><span class="line">    image: vladgh/minidlna</span><br><span class="line">    container_name: minidlna</span><br><span class="line">    restart: always</span><br><span class="line">    network_mode: &apos;host&apos;</span><br><span class="line">    environment:</span><br><span class="line">      - MINIDLNA_MEDIA_DIR=/media</span><br><span class="line">      - MINIDLNA_FRIENDLY_NAME=MiniDLNA</span><br><span class="line">      - MINIDLNA_INOTIFY=yes</span><br><span class="line">      - MINIDLNA_NOTIFY_INTERVAL=3</span><br><span class="line">    volumes:</span><br><span class="line">      - ./cache/minidlna:/var/lib/minidlna</span><br><span class="line">      - ./data:/media</span><br><span class="line">    logging:</span><br><span class="line">      driver: &quot;json-file&quot;</span><br><span class="line">      options:</span><br><span class="line">        max-size: &quot;1m&quot;</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x4E2D; <code>network_mode</code> &#x8BBE;&#x7F6E;&#x7684; <code>host</code> &#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x8BBE;&#x5B9A;&#x4E3A; <code>host</code> &#xFF0C;&#x5982;&#x679C;&#x4EE5; <code>bridge</code> &#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F1A;&#x51FA;&#x4E00;&#x4E9B;&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x7684;&#x95EE;&#x9898;&#x3002;<code>inotify</code> &#x914D;&#x7F6E;&#x4E3A; <code>yes</code> &#xFF0C;&#x662F;&#x4F7F;&#x7528; inotify &#x670D;&#x52A1;&#xFF0C;&#x53D1;&#x73B0;&#x6587;&#x4EF6;&#x53D8;&#x66F4;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5237;&#x65B0; MiniDLNA &#x6570;&#x636E;&#x5E93;&#xFF1B;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A; <code>no</code> &#x7684;&#x8BDD;&#xFF0C;&#x6709;&#x65B0;&#x4E0B;&#x8F7D;&#x4E0B;&#x6765;&#x7684;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD8;&#x5F97;&#x624B;&#x52A8;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x624D;&#x80FD;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8F83;&#x4E3A;&#x9EBB;&#x70E6;&#x3002;&#x7136;&#x540E;&#x6253;&#x5F00;&#x9632;&#x706B;&#x5899;&#x7684;<br> <code>1900/udp</code> &#x548C; <code>8200/tcp</code> &#x7AEF;&#x53E3;&#x3002;</p>
<p>&#x521A;&#x5F00;&#x59CB;&#x914D;&#x7F6E;&#x5B8C;&#xFF0C;&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF0C;&#x7535;&#x89C6;&#x4E0A;&#x4F7F;&#x7528;&#x7684; Moli Player &#x7ACB;&#x5373;&#x5C31;&#x641C;&#x7D22;&#x5230;&#x4E86; MiniDLNA &#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x6D4F;&#x89C8;&#x76EE;&#x5F55;&#xFF0C;&#x64AD;&#x653E;&#x89C6;&#x9891;&#x6587;&#x4EF6;&#xFF0C;&#x901F;&#x5EA6;&#x98DE;&#x5FEB;&#xFF0C;&#x5FEB;&#x8FDB;&#x65E0;&#x611F;&#x3002;&#x4F46;&#x662F;&#x8FC7;&#x4E86;&#x4E00;&#x4F1A;&#x513F;&#xFF0C;&#x5C31;&#x518D;&#x4E5F;&#x627E;&#x4E0D;&#x5230; MiniDLNA &#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x4E86;&#x3002;</p>
<p>&#x7136;&#x540E;&#x641C;&#x7D22;&#x95EE;&#x9898;&#xFF0C;&#x770B;&#x5230;&#x5B98;&#x65B9; Troubleshooting &#x91CC;&#x9762;&#x6709;&#x5199;&#xFF1A;</p>
<blockquote>
<h3 id="Server-not-visible-on-Wireless-behind-a-router"><a href="#Server-not-visible-on-Wireless-behind-a-router" class="headerlink" title="Server not visible on Wireless behind a router"></a>Server not visible on Wireless behind a router</h3><p>On some network configurations when the machine hosting MiniDLNA server is connected to the router through Ethernet, there may be problems accessing MiniDLNA server on WiFi (same router). To solve this, make sure that &#x201C;Multicast Isolation&#x201D; is<br> turned off on the router. For example, on ADB / Pirelli P.RG EA4202N router, connect to the configuration page, then Settings-&gt;Bridge and VLAN-&gt;Bridge List-&gt;click edit on Bridge Ethernet WiFi-&gt;set Multicast Isolation to No-&gt;Apply.</p>
</blockquote>
<p>&#x54E6;&#xFF0C;&#x770B;&#x6765;&#x662F;&#x65E0;&#x7EBF;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x65E0;&#x7EBF;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x591A;&#x64AD;&#x9694;&#x79BB;&#xFF0C;&#x5F71;&#x54CD;&#x5230;&#x4E86; MiniDLNA &#x7684;&#x591A;&#x64AD;&#x3002;&#x4F46;&#x662F;&#x4E00;&#x60F3;&#xFF0C;&#x4E5F;&#x4E0D;&#x5BF9;&#x554A;&#xFF0C;&#x670D;&#x52A1;&#x521A;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x662F;&#x80FD;&#x53D1;&#x73B0;&#x7684;&#xFF0C;&#x662F;&#x8FC7;&#x4E86;&#x4E00;&#x4F1A;&#x513F;&#xFF0C;&#x624D;&#x641C;&#x7D22;&#x4E0D;&#x5230;&#x670D;&#x52A1;&#x7684;&#x3002;&#x5982;&#x679C;&#x662F;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x8BDD;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x4E0D;&#x53EF;&#x80FD;&#x53D1;&#x73B0;&#x670D;&#x52A1;&#x3002;</p>
<p>&#x63A5;&#x7740; Troubleshooting &#x5F80;&#x4E0B;&#x770B;&#xFF1A;</p>
<blockquote>
<h3 id="DLNA-server-stops-being-visible-after-some-time-when"><a href="#DLNA-server-stops-being-visible-after-some-time-when" class="headerlink" title="DLNA server stops being visible after some time when"></a>DLNA server stops being visible after some time when</h3><p> being shared on a bridge device</p>
<p>If you are using ReadyMedia to &#x201C;broadcast&#x201D; on a bridged device (such as an OpenVPN device bridged to an Ethernet device), the server may stop being seen by the clients after some time (which may vary from a few seconds to half a day). In order<br> to solve this you need to disable &#x2018;multicast snooping&#x2019;. You can do it instantly with the following command:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#x590D;&#x5236;&#x4EE3;&#x7801;# echo 0 &gt;&gt; /sys/devices/virtual/net/br0/bridge/multicast_snooping</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>&#x8FD9;&#x4E2A;&#x6807;&#x9898;&#x63CF;&#x8FF0;&#x7684;&#x5F88;&#x5BF9;&#x75C7;&#x554A;&#xFF0C;&#x4F46;&#x662F;&#x7EC6;&#x770B;&#x63CF;&#x8FF0;&#xFF0C;&#x53C8;&#x4E0D;&#x592A;&#x50CF;&#x3002;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x7740;&#x91CD;&#x8BF4;&#x4E86; <code>network_mode</code> &#x4F7F;&#x7528;&#x7684;&#x662F; <code>host</code> &#x6A21;&#x5F0F;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5728;&#x5BBF;&#x4E3B;&#x673A;&#x4E0A;&#x76F4;&#x63A5;&#x8DD1;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x6D89;&#x53CA;&#x5230;&#x6865;&#x63A5;&#x8BBE;&#x5907;&#xFF0C;&#x770B;&#x6765;&#x4E5F;&#x4E0D;&#x662F;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x3002;&#x90A3;&#x8BE5;&#x5982;&#x4F55;&#x662F;&#x597D;&#xFF1F;&#x1F613;</p>
<p>&#x542F;&#x52A8;&#x670D;&#x52A1;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x914D;&#x7F6E;&#x9632;&#x706B;&#x5899;&#x6253;&#x5F00;&#x4E86; <code>1900/udp</code> &#x7AEF;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x7AEF;&#x53E3;&#x5C31;&#x662F; SSDP &#x7684;&#x670D;&#x52A1;&#x7AEF;&#x53E3;&#xFF0C;MiniDLNA &#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86; SSDP &#x534F;&#x8BAE;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x7684;&#x53D1;&#x73B0;&#x3002;&#x90A3;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x4E86;&#x89E3;&#x4E0B; SSDP &#x7684;&#x534F;&#x8BAE;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<blockquote>
<p>&#x6309;&#x7167;&#x534F;&#x8BAE;&#x7684;&#x89C4;&#x5B9A;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x63A7;&#x5236;&#x70B9;&#xFF08;&#x5BA2;&#x6237;&#x7AEF;&#xFF09;&#x63A5;&#x5165;&#x7F51;&#x7EDC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5411;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x591A;&#x64AD;&#x5730;&#x5740;&#x7684; SSDP &#x7AEF;&#x53E3;&#x4F7F;&#x7528; M-SEARCH &#x65B9;&#x6CD5;&#x53D1;&#x9001; &#x201C;ssdp:discover&#x201D; &#x6D88;&#x606F;&#x3002;&#x5F53;&#x8BBE;&#x5907;&#x76D1;&#x542C;&#x5230;&#x8FD9;&#x4E2A;&#x4FDD;&#x7559;&#x7684;&#x591A;&#x64AD;&#x5730;&#x5740;&#x4E0A;&#x7531;&#x63A7;&#x5236;&#x70B9;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BBE;&#x5907;&#x4F1A;&#x5206;&#x6790;&#x63A7;&#x5236;&#x70B9;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x81EA;&#x8EAB;&#x63D0;&#x4F9B;&#x4E86;&#x63A7;&#x5236;&#x70B9;&#x8BF7;&#x6C42;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x8BBE;&#x5907;&#x5C06;&#x901A;&#x8FC7;&#x5355;&#x64AD;&#x7684;&#x65B9;&#x5F0F;&#x76F4;&#x63A5;&#x54CD;&#x5E94;&#x63A7;&#x5236;&#x70B9;&#x7684;&#x8BF7;&#x6C42;&#x3002;</p>
<p>&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x8BBE;&#x5907;&#x63A5;&#x5165;&#x7F51;&#x7EDC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x5E94;&#x5F53;&#x5411;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x591A;&#x64AD;&#x5730;&#x5740;&#x7684; SSDP &#x7AEF;&#x53E3;&#x4F7F;&#x7528; NOTIFY &#x65B9;&#x6CD5;&#x53D1;&#x9001; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#x3002;&#x63A7;&#x5236;&#x70B9;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x5904;&#x7406;&#x76D1;&#x542C;&#x5230;&#x7684;&#x6D88;&#x606F;&#x3002;&#x8003;&#x8651;&#x5230;&#x8BBE;&#x5907;&#x53EF;&#x80FD;&#x5728;&#x6CA1;&#x6709;&#x901A;&#x77E5;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x505C;&#x6B62;&#x670D;&#x52A1;&#x6216;&#x8005;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x5378;&#x8F7D;&#xFF0C;&#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#x5FC5;&#x987B;&#x5728; HTTP &#x534F;&#x8BAE;&#x5934; CACHE-CONTROL &#x91CC;&#x9762;&#x6307;&#x5B9A;&#x8D85;&#x65F6;&#x503C;&#xFF0C;&#x8BBE;&#x5907;&#x5FC5;&#x987B;&#x5728;&#x7EA6;&#x5B9A;&#x7684;&#x8D85;&#x65F6;&#x503C;&#x5230;&#x8FBE;&#x4EE5;&#x524D;&#x91CD;&#x53D1; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#x3002;&#x5982;&#x679C;&#x63A7;&#x5236;&#x70B9;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x8D85;&#x65F6;&#x503C;&#x5185;&#x6CA1;&#x6709;&#x518D;&#x6B21;&#x6536;&#x5230;&#x8BBE;&#x5907;&#x53D1;&#x9001;&#x7684; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#xFF0C;&#x63A7;&#x5236;&#x70B9;&#x5C06;&#x8BA4;&#x4E3A;&#x8BBE;&#x5907;&#x5DF2;&#x7ECF;&#x5931;&#x6548;&#x3002;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x8BBE;&#x5907;&#x8BA1;&#x5212;&#x4ECE;&#x7F51;&#x7EDC;&#x4E0A;&#x5378;&#x8F7D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5B83;&#x4E5F;&#x5E94;&#x5F53;&#x5411;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x591A;&#x64AD;&#x5730;&#x5740;&#x7684; SSDP &#x7AEF;&#x53E3;&#x4F7F;&#x7528; NOTIFY &#x65B9;&#x6CD5;&#x53D1;&#x9001; &#x201C;ssdp:byebye&#x201D; &#x6D88;&#x606F;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x53D1;&#x9001; &#x201C;ssdp:byebye&#x201D; &#x6D88;&#x606F;&#xFF0C;&#x63A7;&#x5236;&#x70B9;&#x4E5F;&#x4F1A;&#x6839;&#x636E; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#x6307;&#x5B9A;&#x7684;&#x8D85;&#x65F6;&#x503C;&#xFF0C;&#x5C06;&#x8D85;&#x65F6;&#x5E76;&#x4E14;&#x6CA1;&#x6709;&#x518D;&#x6B21;&#x6536;&#x5230;&#x7684; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x7684;&#x8BBE;&#x5907;&#x8BA4;&#x4E3A;&#x662F;&#x5931;&#x6548;&#x7684;&#x8BBE;&#x5907;&#x3002;</p>
</blockquote>
<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x63CF;&#x8FF0;&#x53EF;&#x77E5;&#xFF0C;&#x6211;&#x4EEC;&#x7684; MiniDLNA &#x5728;&#x521A;&#x63A5;&#x5165;&#x7F51;&#x7EDC;&#x7684;&#x65F6;&#x5019;&#xFF0C;NOTIFY &#x53D1;&#x9001;&#x7684; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#x662F;&#x6210;&#x529F;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5BA2;&#x6237;&#x7AEF;&#x4E5F;&#x662F;&#x901A;&#x8FC7; &#x201C;ssdp:discover&#x201D; &#x6D88;&#x606F;&#x53D1;&#x73B0;&#x4E86; MiniDLNA&#x3002;&#x4F46;&#x662F;&#x540E;&#x7EED;&#x7684;&#x4E0D;&#x6E05;&#x695A;&#x662F; MiniDLNA &#x5728;&#x8D85;&#x65F6;&#x503C;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x91CD;&#x53D1; &#x201C;ssdp:alive&#x201D; &#x6D88;&#x606F;&#xFF0C;&#x8FD8;&#x662F;&#x7531;&#x4E8E; Troubleshotting &#x91CC;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x6CA1;&#x6709;&#x63A5;&#x5230;&#x6765;&#x81EA; MiniDLNA &#x7684;&#x5B58;&#x6D3B;&#x6D88;&#x606F;&#x3002;&#x4F46;&#x662F;&#x4E0D;&#x7BA1;&#x600E;&#x4E48;&#x6837;&#xFF0C;&#x5148;&#x80FD;&#x7528;&#x4E86;&#x518D;&#x8BF4;&#x3002;</p>
<p><code>notify_interval</code> &#x662F;&#x7528;&#x6765;&#x914D;&#x7F6E; MiniDLNA &#x670D;&#x52A1;&#x7684; SSDP NOTIFY &#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x9ED8;&#x8BA4;&#x65F6;&#x95F4;&#x662F; 895 &#x79D2;&#x3002;&#x90A3;&#x6211;&#x51CF;&#x5C0F;&#x8FD9;&#x4E2A;&#x95F4;&#x9694;&#xFF0C;&#x5728;&#x8D85;&#x65F6;&#x503C;&#x8303;&#x56F4;&#x5185;&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x5BA2;&#x6237;&#x7AEF;&#x4E00;&#x76F4;&#x663E;&#x793A;&#x8FD9;&#x4E2A;&#x5171;&#x4EAB;&#x670D;&#x52A1;&#x7684;&#x5B58;&#x5728;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x914D;&#x7F6E;&#x4E86; 3s&#xFF0C;&#x867D;&#x7136;&#x6709;&#x70B9;&#x5C0F;&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#xFF08;&#x5BF9;&#x8DEF;&#x7531;&#x5668;&#x7684;&#x7F51;&#x7EDC;&#x62E5;&#x5835;&#x5F71;&#x54CD;&#x4E0D;&#x662F;&#x5F88;&#x5927;&#xFF09;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x4E00;&#x76F4;&#x770B;&#x5230; MiniDLNA &#x7684;&#x5B58;&#x5728;&#xFF0C;&#x95EE;&#x9898;&#x7B97;&#x662F;&#x4ECE;&#x8868;&#x9762;&#x4E0A;&#x89E3;&#x51B3;&#x4E86;&#x3002;&#x540E;&#x9762;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x7814;&#x7A76;&#x4E0B;&#x5177;&#x4F53;&#x539F;&#x56E0;&#x3002;</p>
<p>&#x73A9;&#x5F97;&#x5F00;&#x5FC3; &#x1F920;</p>
<h2 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;</h2><ol>
<li><a href="/external_links/08c9a4854708c2c4ff20e763f9d178ce.html" target="blank" rel="noopener">ReadyMedia</a></li>
<li><a href="/external_links/3fea7bb0c270f8c15a24dd1f9c1047a2.html" target="blank" rel="noopener">Samba</a></li>
<li><a href="/external_links/51c5e0b34c8bbb75ea2ac4eacc36b1a0.html" target="blank" rel="noopener">MiniDLNA</a></li>
<li><a href="/external_links/d2570b923018eaf52d7a8ab1759b9039.html" target="blank" rel="noopener">minidlna.conf</a></li>
<li><a href="/external_links/3e3783acbf474c6a43147d8afc050880.html" target="blank" rel="noopener">ReadyMedia Repo</a></li>
</ol>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/5fd1cccee2766395502d6a676fcdbdcc.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903516834627592.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903516834627592.html" itemprop="url">我们需要什么样的主存储</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T11:31:27+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;"><a href="#&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;" class="headerlink" title="&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;"></a>&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;</h2><p>&#x6570;&#x636E;&#x5E93;&#x7684;&#x95EE;&#x9898;&#x4ECE;&#x6765;&#x5C31;&#x4E0D;&#x662F;&#x6570;&#x636E;&#x5E93;&#x81EA;&#x8EAB;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4ECE;&#x80FD;&#x5B58;&#x53D6;&#x6570;&#x636E;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x662F;&#x5408;&#x683C;&#x7684;&#x3002;&#x5173;&#x952E;&#x7684;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x6570;&#x636E;&#x5E93;&#x53BB;&#x6EE1;&#x8DB3;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;&#xFF0C;&#x4F1A;&#x5BF9;&#x4E0A;&#x5C42;&#x7684;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x7684;&#x98CE;&#x683C;&#x4EA7;&#x751F;&#x975E;&#x5E38;&#x6DF1;&#x8FDC;&#x7684;&#x5F71;&#x54CD;&#x3002;&#x4ECE;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF0C;&#x5F00;&#x53D1;&#x4F53;&#x9A8C;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x4ECE;&#x8FD0;&#x884C;&#x65F6;&#x6027;&#x80FD;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x6B63;&#x786E;&#x6027;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x4ECE;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#x7684;&#x89D2;&#x5EA6;&#xFF0C;&#x53EF;&#x4EE5;&#x89E3;&#x8BFB;&#x51FA;&#x975E;&#x5E38;&#x591A;&#x5143;&#x548C;&#x4E30;&#x5BCC;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x6765;&#x8BF4;&#x4E0D;&#x80FD;&#x7B80;&#x5355;&#x5730;&#x7528;&#x597D;&#x6216;&#x8005;&#x4E0D;&#x597D;&#x6765;&#x8BC4;&#x4EF7;&#x3002;&#x53E6;&#x5916;&#x8FC7;&#x53BB;&#x7684;&#x7ECF;&#x9A8C;&#x4E5F;&#x4F1A;&#x6210;&#x4E3A;&#x4E00;&#x79CD;&#x675F;&#x7F1A;&#xFF0C;&#x4ECE;&#x89E3;&#x51B3;&#x7684;&#x4E1A;&#x52A1;&#x95EE;&#x9898;&#x672C;&#x8EAB;&#xFF0C;&#x5230;&#x5B9E;&#x9645;&#x4F7F;&#x7528;MySQL&#xFF0C;&#x4E2D;&#x95F4;&#x662F;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x53EF;&#x80FD;&#x7684;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x4E60;&#x60EF;&#x4E86;&#x4E00;&#x79CD;&#x73B0;&#x6709;&#x7684;&#x5F00;&#x53D1;&#x98CE;&#x683C;&#x4E4B;&#x540E;&#xFF0C;&#x601D;&#x8DEF;&#x5F88;&#x5BB9;&#x6613;&#x88AB;&#x9650;&#x5236;&#x5728;&#x539F;&#x6709;&#x7684;&#x9886;&#x57DF;&#x91CC;&#x3002;&#x5982;&#x679C;&#x4EC5;&#x4EC5;&#x4ECE;&#x95EE;&#x9898;&#x7684;&#x672C;&#x8D28;&#x51FA;&#x53D1;&#x53BB;&#x63A8;&#x5BFC;&#x4E00;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x66F4;&#x5E7F;&#x9614;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/11ada27636de9e156336e02b5c2483dafa9c8dd0963978c1005db923cb311105" alt><br>&#x6240;&#x6709;&#x7684;&#x4FE1;&#x606F;&#x7CFB;&#x7EDF;&#x7684;&#x8D77;&#x70B9;&#x90FD;&#x662F;&#x6570;&#x636E;&#x7684;&#x5199;&#x5165;&#x3002;&#x65E0;&#x8BBA;&#x662F;&#x4E00;&#x4E2A;&#x7535;&#x5B50;&#x5546;&#x52A1;&#x7CFB;&#x7EDF;&#xFF0C;&#x9700;&#x8981;&#x4EA4;&#x6613;&#x591A;&#x65B9;&#x8FDB;&#x884C;&#x4FE1;&#x606F;&#x7684;&#x5F55;&#x5165;&#x3002;&#x8FD8;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x5185;&#x5BB9;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x7F16;&#x8F91;&#x4E0A;&#x4F20;&#x5185;&#x5BB9;&#x3002;&#x6240;&#x6709;&#x7684;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x8D77;&#x70B9;&#x5FC5;&#x7136;&#x662F;&#x4EA4;&#x6613;&#x6570;&#x636E;&#x7684;&#x4EA7;&#x751F;&#x6216;&#x8005;&#x6570;&#x636E;&#x7684;&#x5F55;&#x5165;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x7684;&#x5B58;&#x50A8;&#x53EB;&#x201C;&#x4E3B;&#x5B58;&#x50A8;&#x201D;&#xFF0C;&#x5B83;&#x4FDD;&#x5B58;&#x4E86;source system of record&#x3002;</p>
<p>&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x534F;&#x4F5C;&#x7684;&#x6C9F;&#x901A;&#x6865;&#x6881;&#x3002;&#x591A;&#x4E2A;&#x7528;&#x6237;&#x89D2;&#x8272;&#x5728;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x4E0A;&#x8FDB;&#x884C;&#x534F;&#x4F5C;&#xFF0C;&#x901A;&#x8FC7;&#x628A;&#x8FC7;&#x53BB;&#x8FBE;&#x6210;&#x7684;&#x534F;&#x8BAE;&#x8BB0;&#x5F55;&#x6210;&#x4E00;&#x6761;&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x4ECE;&#x800C;&#x5F71;&#x54CD;&#x540E;&#x7EED;&#x7684;&#x884C;&#x4E3A;&#x7684;&#x5C65;&#x7EA6;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x60F3;&#x8C61;&#x6210;&#x7EBF;&#x4E0B;&#x591A;&#x65B9;&#x4EA4;&#x6613;&#x91CC;&#x7684;&#x7EB8;&#x8D28;&#x5355;&#x636E;&#x3002;&#x505A;&#x4E00;&#x6B21;&#x5B58;&#x50A8;&#x5C31;&#x662F;&#x76F8;&#x5F53;&#x4E8E;&#x7EBF;&#x4E0B;&#x4E00;&#x6B21;&#x5408;&#x540C;&#x7684;&#x7B7E;&#x7F72;&#x3002;&#x8FD9;&#x4E2A;&#x6B65;&#x9AA4;&#x7B7E;&#x7F72;&#x7684;&#x534F;&#x8BAE;&#xFF0C;&#x51B3;&#x5B9A;&#x4E86;&#x540E;&#x7EED;&#x591A;&#x65B9;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x8FD9;&#x91CC;&#x6709;&#x4E24;&#x79CD;&#x7EC6;&#x5FAE;&#x5730;&#x4E0D;&#x540C;&#x5730;&#x4E3B;&#x5B58;&#x50A8;&#xFF1A;</p>
<ul>
<li>&#x4EA4;&#x6613;&#x53D1;&#x751F;&#x5728;&#x7EBF;&#x4E0B;&#xFF1A;&#x6BD4;&#x5982;&#x7EBF;&#x4E0B;&#x5DF2;&#x7ECF;&#x7B7E;&#x7EA6;&#x4E86;&#x5408;&#x540C;&#x4E86;&#x3002;&#x7EBF;&#x4E0A;&#x7684;&#x7535;&#x5B50;&#x5316;&#x6863;&#x6848;&#x53EA;&#x662F;&#x4E00;&#x4EFD;&#x4FE1;&#x606F;&#x7684;&#x62F7;&#x8D1D;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x8FC7;&#x53BB;&#x53D1;&#x751F;&#x4E86;&#x4EC0;&#x4E48;&#xFF0C;&#x5C31;&#x5E94;&#x8BE5;&#x662F;&#x4EC0;&#x4E48;&#x3002;&#x6269;&#x5927;&#x4E00;&#x70B9;&#x8303;&#x56F4;&#xFF0C;&#x5BF9;&#x81EA;&#x7136;&#x73B0;&#x8C61;&#x7684;&#x91C7;&#x96C6;&#xFF0C;&#x6BD4;&#x5982;&#x6E29;&#x5EA6;&#x4F20;&#x611F;&#x5668;&#xFF0C;&#x4E5F;&#x662F;&#x7C7B;&#x4F3C;&#x7684;&#x3002;&#x67D0;&#x65F6;&#x67D0;&#x5206;&#x662F;&#x591A;&#x5C11;&#x5EA6;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x81EA;&#x7136;&#x53D1;&#x751F;&#x7684;&#xFF0C;&#x91C7;&#x96C6;&#x867D;&#x7136;&#x662F;&#x6570;&#x5B57;&#x5316;&#x7684;&#x7B2C;&#x4E00;&#x624B;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;&#x91C7;&#x96C6;&#x672C;&#x8EAB;&#x5E76;&#x4E0D;&#x80FD;&#x51B3;&#x5B9A;&#x8FD9;&#x4E2A;&#x503C;&#x662F;&#x4EC0;&#x4E48;&#x3002;</li>
<li>&#x7EBF;&#x4E0A;&#x4EA4;&#x6613;&#xFF1A;&#x7B7E;&#x7EA6;&#x7684;&#x884C;&#x4E3A;&#x653E;&#x5728;&#x4E86;&#x7EBF;&#x4E0A;&#x3002;&#x6BD4;&#x5982;&#x5BA1;&#x6279;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x662F;&#x5426;&#x5408;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x53D1;&#x5355;&#x3002;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x64CD;&#x4F5C;&#x7684;&#x7ED3;&#x679C;&#x662F;&#x7531;&#x7EBF;&#x4E0A;&#x7CFB;&#x7EDF;&#x6765;&#x51B3;&#x5B9A;&#x7684;&#x3002;&#x8FD9;&#x79CD;&#x4EBA;&#x4E0E;&#x4EBA;&#x4E4B;&#x95F4;&#xFF0C;&#x4EBA;&#x4E0E;&#x5E73;&#x53F0;&#xFF08;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x4EBA;&#xFF0C;&#x53EA;&#x662F;&#x5E73;&#x53F0;&#x4EE3;&#x8868;&#x4E86;&#x5177;&#x4F53;&#x7684;&#x4EBA;&#x683C;&#xFF09;&#x4E4B;&#x95F4;&#x5B8C;&#x5168;&#x901A;&#x8FC7;&#x7EBF;&#x4E0A;&#x8FDB;&#x884C;&#x534F;&#x4F5C;&#xFF0C;&#x4EE5;&#x6570;&#x5B57;&#x5316;&#x8BB0;&#x5F55;&#x7684;&#x65B9;&#x5F0F;&#x7B7E;&#x8BA2;&#x201C;&#x5408;&#x540C;&#x201D;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E3B;&#x5B58;&#x50A8;&#x5C31;&#x63D0;&#x51FA;&#x4E86;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#x8981;&#x6C42;&#x3002;</li>
</ul>
<h2 id="&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x804C;&#x8D23;"><a href="#&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x804C;&#x8D23;" class="headerlink" title="&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x804C;&#x8D23;"></a>&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x804C;&#x8D23;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/19bf5fb6e753ab136fa92514a18a3a22bb51d7a7deecea8cea0014d96841ff0c" alt><br>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F52;&#x7EB3;&#x51FA;&#xFF0C;&#x5982;&#x679C;&#x4E3B;&#x5B58;&#x50A8;&#x8981;&#x652F;&#x6301;&#x597D;&#x7528;&#x6237;&#x4EEC;&#x5728;&#x7EBF;&#x4E0A;&#x8FDB;&#x884C;&#x534F;&#x8BAE;&#xFF0C;&#x9700;&#x8981;&#x5177;&#x5907;&#x56DB;&#x4E2A;&#x57FA;&#x672C;&#x804C;&#x8D23;&#xFF1A;</p>
<ul>
<li>&#x652F;&#x6301;&#x7EBF;&#x4E0A;&#x4EA4;&#x6613;&#xFF0C;&#x4E3B;&#x8981;&#x7684;&#x4F53;&#x73B0;&#x5C31;&#x662F;&#x5F3A;&#x5236;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x89C4;&#x5219;&#xFF0C;&#x8BA9;&#x53C2;&#x4E0E;&#x534F;&#x4F5C;&#x7684;&#x4E3B;&#x4F53;&#x5BF9;&#x63A5;&#x4E0B;&#x6765;&#x8981;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#xFF0C;&#x7528;&#x4E8E;&#x6307;&#x5BFC;&#x540E;&#x7EED;&#x7684;&#x884C;&#x4E3A;&#xFF08;&#x7EBF;&#x4E0A;&#x6216;&#x8005;&#x7EBF;&#x4E0B;&#x7684;&#x884C;&#x4E3A;&#xFF09;&#x3002;&#x7B80;&#x5355;&#x7684;&#x53EF;&#x80FD;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x7A7A;&#x7684;&#x6821;&#x9A8C;&#xFF0C;&#x590D;&#x6742;&#x7684;&#x7275;&#x6D89;&#x5230;&#x5E76;&#x53D1;&#x60C5;&#x51B5;&#x4E0B;&#x72B6;&#x6001;&#x673A;&#x7684;&#x7EA6;&#x675F;&#x4FDD;&#x8BC1;&#x3002;</li>
<li>&#x5904;&#x7406;&#x5E76;&#x53D1;&#xFF1A;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x8FD8;&#x662F;&#x5F3A;&#x5236;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x89C4;&#x5219;&#xFF0C;&#x53EA;&#x662F;&#x5B9E;&#x73B0;&#x96BE;&#x5EA6;&#x66F4;&#x9AD8;&#x4E00;&#x70B9;&#xFF0C;&#x88AB;&#x5355;&#x72EC;&#x63D0;&#x51FA;&#x6765;&#x3002;&#x5F53;&#x591A;&#x4EBA;&#x540C;&#x65F6;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x505A;&#x5230;&#x8A00;&#x800C;&#x6709;&#x4FE1;&#x3002;&#x7B54;&#x5E94;&#x4E86;&#x7684;&#x4E8B;&#x60C5;&#xFF08;&#x6BD4;&#x5982;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x662F;success&#xFF09;&#xFF0C;&#x5C31;&#x8981;&#x505A;&#x5230;&#xFF08;&#x6BD4;&#x5982;&#x5B9E;&#x9645;&#x7684;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x7684;&#x8BB0;&#x5F55;&#x4E0D;&#x5BF9;&#xFF09;&#x3002;&#x8FD9;&#x79CD;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x5546;&#x4E1A;&#x4E0A;&#x7684;&#x8FDD;&#x7EA6;&#x884C;&#x4E3A;&#x3002;</li>
<li>&#x4FDD;&#x5B58;&#x8FC7;&#x53BB;&#x771F;&#x5B9E;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x4FDD;&#x5B58;&#x591A;&#x65B9;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8FBE;&#x6210;&#x8FC7;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x534F;&#x8BAE;&#x3002;&#x8FD9;&#x4E2A;&#x4E3B;&#x8981;&#x4F53;&#x73B0;&#x4E3A;&#x5355;&#x636E;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x4E0A;&#x3002;&#x751A;&#x81F3;&#x662F;&#x53EF;&#x4EE5;&#x6309;&#x5386;&#x53F2;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x56DE;&#x6EAF;&#x67E5;&#x8BE2;&#x3002;</li>
<li>&#x505A;&#x4E3A;&#x5176;&#x4ED6;&#x89C6;&#x56FE;&#x7684;&#x6570;&#x636E;&#x6E90;&#x3002;&#x6BD4;&#x5982;&#x641C;&#x7D22;&#xFF0C;&#x53EF;&#x4EE5;&#x67E5;&#x8BE2;&#x5230;&#x5546;&#x5BB6;&#x4E0A;&#x67B6;&#x7684;&#x5546;&#x54C1;&#x3002;&#x5E76;&#x4E0D;&#x4EE3;&#x8868;&#x5546;&#x54C1;&#x4E0A;&#x67B6;&#x8981;&#x76F4;&#x63A5;&#x5199;&#x5165;&#x5230;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x91CC;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x505A;&#x4E3A;&#x4E00;&#x4E2A;&#x5546;&#x4E1A;&#x4E0A;&#x7684;&#x5951;&#x7EA6;&#x843D;&#x5230;&#x4E3B;&#x5B58;&#x50A8;&#x91CC;&#x3002;&#x518D;&#x505A;&#x4E3A;&#x6570;&#x636E;&#x6E90;&#x590D;&#x5236;&#x5230;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x4E3B;&#x5B58;&#x50A8;&#x4E5F;&#x80FD;&#x652F;&#x6301;&#x5404;&#x79CD;&#x5404;&#x6837;&#x7684;&#x68C0;&#x7D22;&#xFF0C;&#x627F;&#x62C5;&#x90E8;&#x5206;&#x89C6;&#x56FE;&#x7684;&#x529F;&#x80FD;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x3002;&#x4F46;&#x662F;&#x80FD;&#x591F;&#x652F;&#x6301;&#x4E0E;&#x5176;&#x4ED6;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x96C6;&#x6210;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x804C;&#x8D23;&#x3002;</li>
</ul>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4EE5;&#x6263;&#x8D39;&#x4E1A;&#x52A1;&#x4E3A;&#x4F8B;&#xFF0C;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5F53;&#x4E3B;&#x5B58;&#x50A8;&#x8FD9;&#x4E2A;&#x89D2;&#x8272;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9047;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x6311;&#x6218;</p>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>&#x6263;&#x8D39;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x6263;&#x8D39;&#x4E0D;&#x80FD;&#x628A;&#x4F59;&#x989D;&#x6263;&#x6210;&#x8D1F;&#x6570;</li>
<li>&#x540C;&#x4E00;&#x4E2A;&#x5355;&#x53F7;&#x7684;&#x6263;&#x8D39;&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x6263;&#x3002;&#x7B2C;&#x4E00;&#x6B21;&#x6263;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x518D;&#x6263;&#x8FD8;&#x662F;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#xFF0C;&#x4F46;&#x662F;&#x4F59;&#x989D;&#x4E0D;&#x518D;&#x53D8;&#x5316;&#x3002;</li>
<li>&#x8981;&#x80FD;&#x591F;&#x8BA9;&#x7528;&#x6237;&#x67E5;&#x770B;&#x8D26;&#x6237;&#x7684;&#x4ECA;&#x65E5;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x4EA4;&#x6613;&#x5F15;&#x8D77;&#x7684;&#x4F59;&#x989D;&#x53D8;&#x5316;&#x60C5;&#x51B5;</li>
<li>&#x6263;&#x8D39;&#x4E0D;&#x5355;&#x5355;&#x662F;&#x76F4;&#x63A5;&#x628A;&#x94B1;&#x6263;&#x4E86;&#xFF0C;&#x5F97;&#x8BB0;&#x5F55;&#x4E3A;&#x4EC0;&#x4E48;&#x8BA2;&#x5355;&#x6263;&#x7684;&#x7B49;&#x5176;&#x4ED6;&#x4FE1;&#x606F;&#xFF0C;&#x4EE5;&#x7528;&#x4E8E;&#x540E;&#x7EED;&#x6D41;&#x7A0B;&#x7684;&#x5F00;&#x5C55;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;&#x8D26;&#x9700;&#x6C42;&#x3002;&#x5373;&#x4F7F;&#x5E10;&#x8FD9;&#x8FB9;&#x4E0D;&#x8BB0;&#x5F55;&#xFF0C;&#x8BA2;&#x5355;&#x7CFB;&#x7EDF;&#x90A3;&#x8FB9;&#x4E5F;&#x5F97;&#x8BB0;&#x5F55;&#xFF0C;&#x8981;&#x4E0D;&#x7136;&#x6D41;&#x7A0B;&#x4E32; &#x4E0D;&#x8D77;&#x6765;&#x3002;</li>
</ul>
<p>MySQL &#x5728;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x9700;&#x6C42;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9047;&#x5230;&#x54EA;&#x4E9B;&#x6311;&#x6218;&#x5462;?</p>
<ul>
<li>&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x4F59;&#x989D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8981;&#x4FDD;&#x8BC1;&#x4F59;&#x989D;&#x4E0D;&#x53D8;&#x6210;&#x8D1F;&#x6570;&#x3002;&#x9700;&#x8981;&#x628A;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5199;&#x6210;SQL&#xFF0C;&#x901A;&#x8FC7;&#x5355;&#x6761;SQL&#x7684;&#x539F;&#x5B50;&#x6027;&#x6765;&#x4FDD;&#x8BC1;&#x5E76;&#x53D1;&#x4E0B;&#x7684;&#x201C;&#x89C4;&#x5219;&#x68C0;&#x67E5;&#x201D;&#x4E0E;&#x201C;&#x5B9E;&#x9645;&#x6263;&#x8D39;&#x201D;&#x8FD9;&#x4E24;&#x4E2A;&#x64CD;&#x4F5C;&#x662F;&#x539F;&#x5B50;&#x7684;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x9700;&#x8981;&#x628A;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x4E0B;&#x63A8;&#x5230;&#x6570;&#x636E;&#x5E93;&#x53BB;&#x505A;&#x3002;&#x7136;&#x540E;&#x6570;&#x636E;&#x5E93;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#x7684;&#x80FD;&#x529B;&#x5C31;&#x9650;&#x5236;&#x4E86;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x8868;&#x8FBE;&#x80FD;&#x529B;&#x4E86;&#x3002;</li>
<li>&#x540C;&#x4E00;&#x4E2A;&#x5355;&#x53F7;&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x6263;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C31;&#x5FC5;&#x987B;&#x628A;&#x6263;&#x6B3E;&#x5355;&#x7ED9;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#x4E86;&#x3002;&#x4F46;&#x662F;&#x4F59;&#x989D;&#x4E5F;&#x8981;&#x5B58;&#x554A;&#xFF0C;&#x56E0;&#x4E3A;&#x524D;&#x9762;&#x8FD8;&#x6709;&#x7B2C;&#x4E00;&#x6761;&#x7684;&#x4E1A;&#x52A1;&#x89C4;&#x5219;&#x6446;&#x5728;&#x90A3;&#x5462;&#x3002;&#x5F53;&#x9700;&#x8981;&#x65E2;&#x66F4;&#x65B0;&#x4F59;&#x989D;&#xFF0C;&#x53C8;&#x4FDD;&#x5B58;&#x6263;&#x6B3E;&#x5355;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x600E;&#x4E48;&#x4FDD;&#x8BC1;&#x8FD9;&#x4E24;&#x4E2A;&#x7684;&#x66F4;&#x65B0;&#x662F;&#x539F;&#x5B50;&#x7684;&#x5462;&#xFF1F;&#x5C31;&#x5FC5;&#x987B;&#x4F7F;&#x7528;mysql&#x7684;&#x591A;&#x8868;&#x4E8B;&#x52A1;&#x4E86;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x964D;&#x4F4E;&#x4E86;&#x541E;&#x5410;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x65B9;&#x9762;&#x4E5F;&#x7ED9;&#x5206;&#x5E93;&#x5206;&#x8868;&#x5E26;&#x6765;&#x4E86;&#x6311;&#x6218;&#x3002;</li>
<li>&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x4ECA;&#x65E5;&#x7684;&#x4F59;&#x989D;&#x53D8;&#x5316;&#xFF0C;&#x8FD8;&#x8981;&#x5206;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x4E2A;&#x62FF;&#x4E3B;&#x8868;&#x6765;&#x505A;&#x663E;&#x7136;&#x662F;&#x4E0D;&#x5408;&#x9002;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5F15;&#x5165;&#x5176;&#x4ED6;&#x7684;&#x5B58;&#x50A8;&#x53BB;&#x505A;&#x5B9E;&#x65F6;&#x805A;&#x5408;&#xFF0C;&#x53C8;&#x4F1A;&#x6709;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x673A;&#x5236;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x9760;&#x6027;&#x95EE;&#x9898;&#x548C;&#x5EF6;&#x8FDF;&#x95EE;&#x9898;&#x3002;</li>
<li>&#x56E0;&#x4E3A;&#x6263;&#x8D39;&#x5355;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x6709;&#x6263;&#x8D39;&#x76F8;&#x5173;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x8FD8;&#x5F97;&#x9644;&#x52A0;&#x5176;&#x4ED6;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x548C;&#x4E0A;&#x6E38;&#x7684;&#x4EA4;&#x6613;&#x6D41;&#x7A0B;&#x8FD8;&#x6709;&#x5173;&#x7CFB;&#x3002;&#x8FD9;&#x6837;&#x4E09;&#x5929;&#x4E24;&#x5934;&#x5C31;&#x8981;&#x52A0;&#x5B57;&#x6BB5;&#x3002;&#x800C;&#x6BCF;&#x6B21;&#x52A0;&#x5B57;&#x6BB5;&#x90FD;&#x8981;&#x5728;&#x534A;&#x591C;&#x907F;&#x5F00;&#x4E1A;&#x52A1;&#x9AD8;&#x5CF0;&#x671F;&#x8FDB;&#x884C;&#x3002;&#x5F53;&#x5206;&#x5E93;&#x5206;&#x8868;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x52A0;&#x5B57;&#x6BB5;&#x7684;&#x5B9E;&#x4F8B;&#x591A;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5C31;&#x66F4;&#x52A0;&#x6F2B;&#x957F;&#x3002;&#x5BFC;&#x81F4;&#x65B0;&#x9700;&#x6C42;&#x8F7B;&#x6613;&#x662F;&#x4E0D;&#x52A0;&#x5B57;&#x6BB5;&#xFF0C;&#x80FD;&#x7528;&#x201C;&#x5176;&#x4ED6;&#x5B58;&#x50A8;&#x201D;&#x89E3;&#x51B3;&#x5C31;&#x7528;&#x201C;&#x5176;&#x4ED6;&#x5B58;&#x50A8;&#x201D;&#x89E3;&#x51B3;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x5F88;&#x591A;&#x5E94;&#x8BE5;&#x8FDB;&#x4E3B;&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x88AB;&#x653E;&#x5230;&#x4E86;&#x5176;&#x4ED6;&#x7684;&#x5730;&#x65B9;&#x3002;&#x7ED9;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5B89;&#x5168;&#x6027;&#x548C;&#x53EF;&#x9760;&#x6027;&#x90FD;&#x5E26;&#x6765;&#x4E86;&#x98CE;&#x9669;&#x3002;</li>
</ul>
<p>&#x53E6;&#x5916;&#x56E0;&#x4E3A;MySQL&#x63D0;&#x4F9B;&#x4E86;&#x5F00;&#x653E;&#x6027;&#x7684;&#x8BFB;&#x5199;&#x63A5;&#x53E3;&#x3002;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5B89;&#x5168;&#xFF0C;&#x4E00;&#x822C;&#x8FD8;&#x8981;&#x518D;&#x5C01;&#x88C5;&#x4E00;&#x5C42;&#x6570;&#x636E;&#x670D;&#x52A1;&#x3002;&#x8BA9;&#x5E95;&#x5C42;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x80FD;&#x7531;&#x6570;&#x636E;&#x670D;&#x52A1;&#x8BFB;&#x5199;&#xFF08;&#x6BD4;&#x5982;ip&#x767D;&#x540D;&#x5355;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x4E1A;&#x52A1;&#x89C4;&#x5219;&#x5199;&#x5230;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x670D;&#x52A1;&#x91CC;&#x3002;&#x518D;&#x7531;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x670D;&#x52A1;&#x53BB;&#x63D0;&#x4F9B;&#x7ED9;&#x66F4;&#x591A;&#x6837;&#x5316;&#x7684;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x79CD;&#x6570;&#x636E;&#x670D;&#x52A1;&#x7684;&#x5C01;&#x88C5;&#x5F80;&#x5F80;&#x5F15;&#x8D77;&#x4E86;&#x91CD;&#x590D;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x53CA;&#x591A;&#x4E86;&#x4E00;&#x5C42;&#x5EF6;&#x8FDF;&#x3002;&#x4F46;&#x662F;&#x5F00;&#x53D1;&#x8005;&#x76F8;&#x6BD4;&#x5B58;&#x50A8;&#x8FC7;&#x7A0B;&#x66F4;&#x559C;&#x6B22;&#x81EA;&#x5DF1;&#x5C01;&#x88C5;&#x4E00;&#x5C42;&#x3002;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x670D;&#x52A1;&#x81EA;&#x8EAB;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x65B9;&#x4FBF;&#x6269;&#x5BB9;&#x3002;&#x53E6;&#x5916;&#x53EF;&#x4EE5;&#x62FF;&#x4EFB;&#x610F;&#x81EA;&#x5DF1;&#x559C;&#x6B22;&#x7684;&#x8BED;&#x8A00;&#x6765;&#x5199;&#xFF0C;&#x4E0D;&#x4E00;&#x5B9A;&#x8981;&#x7528;SQL&#x3002;</p>
<h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><p>&#x548C; MySQL &#x7684;&#x60C5;&#x51B5;&#x662F;&#x975E;&#x5E38;&#x7C7B;&#x4F3C;&#x7684;</p>
<ul>
<li>&#x4F59;&#x989D;&#x4E0D;&#x80FD;&#x4E3A;&#x8D1F;&#x901A;&#x8FC7;&#x628A;&#x64CD;&#x4F5C;&#x4E0B;&#x63A8;&#x5230;db&#x6765;&#x89E3;&#x51B3;&#x3002;&#x9700;&#x8981;&#x7EC4;&#x5408;findAndModify&#x4E0E;$inc&#x6765;&#x5B8C;&#x6210;&#x3002;&#x540C;&#x6837;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x5E93;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#x6765;&#x8868;&#x8FBE;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x540C;&#x65F6;&#x56E0;&#x4E3A;MongoDB&#x76F8;&#x5BF9;&#x5C0F;&#x4F17;&#xFF0C;&#x4F7F;&#x5F97;&#x8FD9;&#x4E2A;&#x9650;&#x5236;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x75DB;&#x82E6;&#x3002;</li>
<li>&#x4E0D;&#x80FD;&#x91CD;&#x590D;&#x6263;&#x8FD9;&#x4E2A;MongoDB&#x91CC;&#x6CA1;&#x6709;&#x76F4;&#x63A5;&#x7684;&#x89E3;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x4E0D;&#x652F;&#x6301;&#x591A;&#x884C;&#x4E8B;&#x52A1;&#x3002;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x628A;&#x6D41;&#x6C34;&#x548C;&#x4F59;&#x989D;&#x5B58;&#x5230;&#x4E00;&#x4E2A;document&#x91CC;&#x6765;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5728;&#x6D41;&#x6C34;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#x7684;&#x60C5;&#x51B5;&#x5C31;&#x4F1A;&#x8D85;&#x8FC7;&#x4E0A;&#x9650;&#x3002;</li>
<li>&#x6570;&#x636E;&#x540C;&#x6B65;&#x65B9;&#x9762;MongoDB&#x8FD8;&#x4E0D;&#x5982;MySQL&#x3002;MySQL&#x57FA;&#x4E8E;binlog&#xFF0C;canal&#x548C;kafka&#x4E5F;&#x7B97;&#x6709;&#x4E00;&#x5957;&#x76F8;&#x5BF9;&#x5B8C;&#x5584;&#x7684;&#x5F00;&#x6E90;&#x65B9;&#x6848;&#x3002;&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#x57FA;&#x4E8E; oplog &#x7684;&#x65B9;&#x6848;&#x6CA1;&#x6709;&#x90A3;&#x4E48;&#x6210;&#x719F;&#x3002;</li>
<li>&#x52A0;&#x5B57;&#x6BB5;&#x65B9;&#x9762;&#xFF0C;MongoDB&#x6BD4;MySQL&#x5F3A;&#x3002;&#x56E0;&#x4E3A;MySQL&#x6539;&#x8868;&#x7ED3;&#x6784;&#x8981;&#x91CD;&#x5199;&#x5DF2;&#x6709;&#x7684;&#x884C;&#xFF0C;&#x800C;MongoDB&#x52A0;&#x5B57;&#x6BB5;&#x4E0D;&#x9700;&#x8981;&#x52A8;&#x5230;&#x73B0;&#x6709;&#x7684;&#x6570;&#x636E;&#x3002;</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ba4fe2908908e6e9c30523308fe7e761.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513990889485.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513990889485.html" itemprop="url">JVM菜鸟进阶高手之路十四：分析篇</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T10:19:14+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x539F;&#x521B;&#x51FA;&#x5904;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>
</blockquote>
<h2 id="&#x9898;&#x76EE;&#x56DE;&#x987E;"><a href="#&#x9898;&#x76EE;&#x56DE;&#x987E;" class="headerlink" title="&#x9898;&#x76EE;&#x56DE;&#x987E;"></a>&#x9898;&#x76EE;&#x56DE;&#x987E;</h2><p><a href="/external_links/93ea75b0cc0cf8fc96d4c8e837a327d6.html" target="blank" rel="noopener">JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x5341;&#x4E09;</a>,&#x95EE;&#x9898;&#x73B0;&#x8C61;&#x5C31;&#x662F;&#x76F8;&#x540C;&#x7684;&#x4EE3;&#x7801;&#xFF0C;jvm&#x53C2;&#x6570;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x8868;&#x73B0;&#x7684;&#x73B0;&#x8C61;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;private static final int _1MB = 1024 * 1024;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception {</span><br><span class="line">        byte[] all1 = new byte[2 * _1MB];</span><br><span class="line">        byte[] all2 = new byte[2 * _1MB];</span><br><span class="line">        byte[] all3 = new byte[2 * _1MB];</span><br><span class="line">        byte[] all4 = new byte[7 * _1MB];</span><br><span class="line">        System.in.read();</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p><strong>jvm&#x53C2;&#x6570;&#x914D;&#x7F6E;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-Xmx20m</span><br><span class="line">-Xms20m</span><br><span class="line">-Xmn10m</span><br><span class="line">-XX:+UseParNewGC </span><br><span class="line">-XX:+UseConcMarkSweepGC </span><br><span class="line">-XX:+UseCMSInitiatingOccupancyOnly </span><br><span class="line">-XX:CMSInitiatingOccupancyFraction=75</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;jstat&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x770B;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8b07cd5afad1874ca4b3e9a85c039b22635f2a6174e08e80e8a027f5bea8daa2" alt></p>
<p>&#x5173;&#x4E8E;jstat&#x547D;&#x4EE4;&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#xFF1A;<br><a href="/external_links/5179bb6b62c4897dc29024d924a1dc1c.html" target="blank" rel="noopener">docs.oracle.com/javase/8/do&#x2026;</a><br><strong>jvm&#x53C2;&#x6570;&#x8C03;&#x6574;&#x5982;&#x4E0B;&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-Xmx20m</span><br><span class="line">-Xms20m</span><br><span class="line">-Xmn10m</span><br><span class="line">-XX:+UseParNewGC</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;jstat&#x547D;&#x4EE4;&#xFF0C;&#x67E5;&#x770B;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d4dd52e7e02396fad8f16940f448aff9ef309fe336bbc3722f2cb50729495507" alt></p>
<h2 id="&#x8BF4;&#x660E;"><a href="#&#x8BF4;&#x660E;" class="headerlink" title="&#x8BF4;&#x660E;"></a>&#x8BF4;&#x660E;</h2><p>&#x4E0A;&#x9762;&#x7684;&#x9898;&#x76EE;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x5207;&#x5165;&#x70B9;&#x800C;&#x5DF2;&#xFF0C;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5207;&#x5165;&#x70B9;&#x628A;jvm&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#x521A;&#x521A;&#x597D;&#x8BF4;&#x660E;&#x4E0B;&#xFF0C;&#x987A;&#x4FBF;&#x89E3;&#x7B54;&#x4E0B;&#x4E0A;&#x9762;&#x7684;&#x73B0;&#x8C61;&#x3002;</p>
<h2 id="&#x5185;&#x5B58;&#x76F8;&#x5173;&#x7B80;&#x5355;&#x8BF4;&#x660E;"><a href="#&#x5185;&#x5B58;&#x76F8;&#x5173;&#x7B80;&#x5355;&#x8BF4;&#x660E;" class="headerlink" title="&#x5185;&#x5B58;&#x76F8;&#x5173;&#x7B80;&#x5355;&#x8BF4;&#x660E;"></a>&#x5185;&#x5B58;&#x76F8;&#x5173;&#x7B80;&#x5355;&#x8BF4;&#x660E;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/dca0bb926ec592637a699dbcd8ac6d584e7b22c28a463c438cc22e36b34cf42f" alt="&#x81EA;&#x5DF1;&#x753B;&#x7684;&#x56FE;&#xFF0C;&#x89C1;&#x8C05;&#xFF01;"></p>
<p>&#x81EA;&#x5DF1;&#x753B;&#x7684;&#x56FE;&#xFF0C;&#x89C1;&#x8C05;&#xFF01;</p>
<p><strong>&#x56FE;&#x4E2D;&#x53C2;&#x6570;&#xFF1A;</strong><br>-Xms&#x8BBE;&#x7F6E;&#x6700;&#x5C0F;&#x5806;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#xFF08;&#x4E00;&#x822C;&#x5EFA;&#x8BAE;&#x548C;-Xmx&#x4E00;&#x6837;&#xFF09;&#x3002;<br>-Xmx&#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x5806;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x3002;<br>-Xmn&#x8BBE;&#x7F6E;&#x65B0;&#x751F;&#x4EE3;&#x5927;&#x5C0F;&#x3002;<br>-XX:MetaspaceSize&#x8BBE;&#x7F6E;&#x6700;&#x5C0F;&#x5143;&#x6570;&#x636E;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x3002;<br>-XX:MaxMetaspaceSize&#x8BBE;&#x7F6E;&#x6700;&#x5927;&#x5143;&#x6570;&#x636E;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x3002;<br>-Xss&#x8BBE;&#x7F6E;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x6808;&#x5927;&#x5C0F;&#xFF08;&#x8FD9;&#x91CC;&#x6709;&#x4E2A;&#x6545;&#x4E8B;&#xFF0C;3&#x5E74;&#x524D;&#x7528;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x540E;&#x7EED;&#x6709;&#x7A7A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x518D;&#x8BF4;&#xFF09;&#x3002;</p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>tenured&#x7A7A;&#x95F4;&#x5C31;&#x7528;&#x51CF;&#x6CD5;&#x64CD;&#x4F5C;&#x5373;&#x53EF;&#x660E;&#x767D;&#xFF0C;&#x5806;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x51CF;&#x53BB;&#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
</blockquote>
<p><strong>&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x51E0;&#x4E2A;&#x53C2;&#x6570;&#x5E94;&#x8BE5;&#x660E;&#x767D;&#x4E86;&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-Xmx20m</span><br><span class="line">-Xms20m</span><br><span class="line">-Xmn10m</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>&#x53C2;&#x6570;-XX:SurvivorRatio&#x7528;&#x6765;&#x8868;&#x793A;s0&#x3001;s1&#x3001;eden&#x4E4B;&#x95F4;&#x7684;&#x6BD4;&#x4F8B;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;-XX:SurvivorRatio=8&#x8868;&#x793A; s0:s1:eden=1:1:8&#x3002;</p>
</blockquote>
<p><strong>&#x5F97;&#x51FA;&#x7ED3;&#x8BBA;&#xFF1A;eden=8M,s0=1M,s1=1M,tenured=10M&#x3002;</strong></p>
<h2 id="JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x7EC4;&#x5408;"><a href="#JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x7EC4;&#x5408;" class="headerlink" title="JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x7EC4;&#x5408;"></a>JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x7EC4;&#x5408;</h2><p>&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x9700;&#x8981;&#x89E3;&#x51B3;&#xFF0C;jvm&#x5783;&#x573E;&#x56DE;&#x6536;&#x5668;&#x65B9;&#x9762;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x56FE;&#xFF0C;&#x6211;&#x662F;&#x6211;&#x7684;<a href="/external_links/86ee3ee727fcb946cb55e6c76995a523.html" target="blank" rel="noopener">JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x516B;&#xFF08;&#x4E00;&#x4E9B;&#x7EC6;&#x8282;&#xFF09;</a>&#xFF0C;&#x91CC;&#x9762;&#x7684;&#xFF0C;&#x5F53;&#x65F6;&#x4F9D;&#x7A00;&#x8BB0;&#x5F97;&#x8FD9;&#x4E2A;&#x56FE;&#x5E94;&#x8BE5;&#x662F;&#x98DE;&#x54E5;&#x53D1;&#x7ED9;&#x6211;&#x7684;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/87aec26bcbd797e663a2f92ee814b991915aa039213f3fbdb97c779e858188c9" alt="JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x7EC4;&#x5408;"></p>
<p>JVM&#x5783;&#x573E;&#x56DE;&#x6536;&#x671F;&#x7EC4;&#x5408;</p>
<p>&#x7531;&#x4E8E;&#x90A3;&#x4E2A;&#x65F6;&#x5019;jdk9&#x8FD8;&#x6CA1;&#x6709;&#x51FA;&#x6765;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x770B;&#x770B;&#x6211;&#x7684;<a href="/external_links/7af96325b3393f148ad4b93f1b90884f.html" target="blank" rel="noopener">JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x5341;&#x4E8C;&#xFF08;jdk9&#x3001;JVM&#x65B9;&#x9762;&#x53D8;&#x5316;&#xFF0C; &#x8E6D;&#x70ED;&#x5EA6;&#xFF09;</a>&#xFF0C;&#x867D;&#x7136;&#x6709;&#x4E9B;&#x6709;&#x4E9B;&#x7A0D;&#x5FAE;&#x53BB;&#x6389;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6574;&#x4F53;&#x7684;&#x7EC4;&#x5408;&#x8FD8;&#x662F;&#x5F71;&#x54CD;&#x4E0D;&#x5927;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c54fae74c847ffdad5a01abf6d68c204fcbcbe5609db34a267e7d3535809e69b" alt="&#x53D6;&#x622A;&#x53D6;&#x4E8E;JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x5341;&#x4E8C;"></p>
<p>&#x53D6;&#x622A;&#x53D6;&#x4E8E;JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x5341;&#x4E8C;</p>
<p>&#x7531;&#x4E8E;&#x4E0A;&#x9762;&#x7684;2&#x4E2A;jvm&#x53C2;&#x6570;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x5206;&#x4EE3;&#x6536;&#x96C6;&#x7B97;&#x6CD5;&#x7684;&#xFF08;<strong>&#x5148;&#x4E0D;&#x8003;&#x8651;G1</strong>&#xFF09;</p>
<ul>
<li>&#x4F9D;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x6D3B;&#x5468;&#x671F;&#x8FDB;&#x884C;&#x5206;&#x4E3A;&#x65B0;&#x751F;&#x4EE3;&#xFF0C;&#x8001;&#x5E74;&#x4EE3;&#x3002;</li>
<li>&#x6839;&#x636E;&#x4E0D;&#x540C;&#x4EE3;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x9009;&#x53D6;&#x5408;&#x9002;&#x7684;&#x6536;&#x96C6;&#x7B97;&#x6CD5;<ul>
<li>&#x65B0;&#x751F;&#x4EE3;&#xFF0C;&#x9002;&#x5408;&#x590D;&#x5236;&#x7B97;&#x6CD5;</li>
<li>&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x9002;&#x5408;&#x6807;&#x8BB0;&#x6E05;&#x7406;&#x6216;&#x8005;&#x6807;&#x8BB0;&#x538B;&#x7F29;</li>
</ul>
</li>
</ul>
<p><strong>&#x590D;&#x5236;&#x7B97;&#x6CD5;</strong></p>
<ul>
<li>&#x5C06;&#x539F;&#x6709;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x5206;&#x4E3A;&#x4E24;&#x5757;&#xFF0C;&#x6BCF;&#x6B21;&#x53EA;&#x4F7F;&#x7528;&#x5176;&#x4E2D;&#x4E00;&#x5757;&#xFF0C;&#x5728;&#x5783;&#x573E;&#x56DE;&#x6536;&#x65F6;&#xFF0C;&#x5C06;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#x590D;&#x5236;&#x5230;&#x672A;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x5757;&#x4E2D;&#xFF0C;&#x4E4B;&#x540E;&#xFF0C;&#x6E05;&#x9664;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x5757;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#xFF0C;&#x4EA4;&#x6362;&#x4E24;&#x4E2A;&#x5185;&#x5B58;&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x5B8C;&#x6210;&#x5783;&#x573E;&#x56DE;&#x6536;&#x3002;</li>
<li>&#x4E0D;&#x9002;&#x7528;&#x4E8E;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#x8F83;&#x591A;&#x7684;&#x573A;&#x5408; &#x5982;&#x8001;&#x5E74;&#x4EE3;&#x3002;&#xFF08;&#x5E74;&#x8F7B;&#x4EE3;&#x5BF9;&#x8C61;&#x57FA;&#x672C;&#x90FD;&#x662F;&#x671D;&#x751F;&#x5915;&#x706D;&#x6240;&#x4EE5;&#x7279;&#x522B;&#x9002;&#x5408;&#xFF0C;&#x7531;&#x4E8E;&#x90A3;&#x6837;&#x7684;&#x8BDD;&#x590D;&#x5236;&#x5C31;&#x5C11;&#xFF0C;&#x5982;&#x679C;&#x7C7B;&#x4F3C;&#x8001;&#x5E74;&#x4EE3;&#x6709;&#x5927;&#x91CF;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#xFF0C;&#x90A3;&#x4E48;&#x8FDB;&#x884C;&#x590D;&#x5236;&#x7B97;&#x6CD5;&#x6027;&#x80FD;&#x5C31;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x597D;&#x4E86;&#xFF09;<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>&#x4F7F;&#x7528;&#x590D;&#x5236;&#x7B97;&#x6CD5;&#x7684;<strong>&#x4F18;&#x70B9;&#xFF1A;</strong>&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x5BF9;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x5757;&#x8FDB;&#x884C;&#x5185;&#x5B58;&#x56DE;&#x6536;&#xFF0C;&#x5185;&#x5B58;&#x5206;&#x914D;&#x65F6;&#x4E5F;&#x5C31;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x5185;&#x5B58;&#x788E;&#x7247;&#x7B49;&#x590D;&#x6742;&#x60C5;&#x51B5;&#x4E86;&#xFF0C;&#x4F7F;&#x7528;&#x590D;&#x5236;&#x7B97;&#x6CD5;&#x7684;<strong>&#x7F3A;&#x70B9;&#xFF1A;</strong>&#x5BF9;&#x7A7A;&#x95F4;&#x6709;&#x4E00;&#x5B9A;&#x6D6A;&#x8D39;&#xFF0C;&#x6240;&#x4EE5;&#x590D;&#x5236;&#x7A7A;&#x95F4;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x7279;&#x522B;&#x5927;&#x3002;</p>
</blockquote>
</li>
</ul>
<p><strong>&#x6807;&#x8BB0;&#x6E05;&#x9664;</strong><br>&#x6807;&#x8BB0;-&#x6E05;&#x9664;&#x7B97;&#x6CD5;&#x5C06;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x9636;&#x6BB5;&#xFF1A;&#x6807;&#x8BB0;&#x9636;&#x6BB5;&#x548C;&#x6E05;&#x9664;&#x9636;&#x6BB5;&#x3002;&#x5728;&#x6807;&#x8BB0;&#x9636;&#x6BB5;&#xFF0C;&#x9996;&#x5148;&#x5148;&#x627E;&#x51FA;&#x6839;&#x5BF9;&#x8C61;&#xFF0C;&#x6807;&#x8BB0;&#x6240;&#x6709;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#x7684;&#x53EF;&#x8FBE;&#x5BF9;&#x8C61;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x672A;&#x88AB;&#x6807;&#x8BB0;&#x7684;&#x5BF9;&#x8C61;&#x5C31;&#x662F;&#x672A;&#x88AB;&#x5F15;&#x7528;&#x7684;&#x5783;&#x573E;&#x5BF9;&#x8C61;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5728;&#x6E05;&#x9664;&#x9636;&#x6BB5;&#xFF0C;&#x6E05;&#x9664;&#x6240;&#x6709;&#x672A;&#x88AB;&#x6807;&#x8BB0;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>java&#x6839;&#x5BF9;&#x8C61;&#xFF1A;</p>
<ul>
<li>&#x865A;&#x62DF;&#x673A;&#x6808;&#x4E2D;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x65B9;&#x6CD5;&#x533A;&#x4E2D;&#x7C7B;&#x9759;&#x6001;&#x5C5E;&#x6027;&#x5B9E;&#x4F53;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x65B9;&#x6CD5;&#x533A;&#x4E2D;&#x5E38;&#x91CF;&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x672C;&#x5730;&#x65B9;&#x6CD5;&#x6808;&#x4E2D;JNI&#x5F15;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;<br>&#x7B49;&#x7B49;&#x3002;<br>&#x6807;&#x8BB0;&#x6E05;&#x9664;&#x7B97;&#x6CD5;<strong>&#x7F3A;&#x70B9;&#xFF1A;</strong>&#x6807;&#x8BB0;&#x6E05;&#x9664;&#x4F1A;&#x4EA7;&#x751F;&#x4E0D;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x788E;&#x7247;&#xFF0C;&#x5982;&#x679C;&#x7A7A;&#x95F4;&#x5185;&#x5B58;&#x788E;&#x7247;&#x8FC7;&#x591A;&#x4F1A;&#x5BFC;&#x81F4;&#xFF0C;&#x5F53;&#x7A0B;&#x5E8F;&#x5728;&#x8FD0;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x9700;&#x8981;&#x5206;&#x914D;&#x7A7A;&#x95F4;&#x65F6;&#x627E;&#x4E0D;&#x5230;&#x8DB3;&#x591F;&#x7684;&#x8FDE;&#x7EED;&#x7A7A;&#x95F4;&#x800C;&#x4E0D;&#x5F97;&#x4E0D;&#x63D0;&#x524D;&#x89E6;&#x53D1;&#x4E00;&#x6B21;&#x5783;&#x573E;&#x6536;&#x96C6;&#x52A8;&#x4F5C;&#xFF08;&#x6839;&#x636E;&#x7B97;&#x6CD5;&#x4E0D;&#x4E00;&#x6837;&#x6548;&#x679C;&#x4E5F;&#x4E0D;&#x4E00;&#x6837;&#xFF09;&#x3002;</li>
</ul>
</blockquote>
<p><strong>&#x6807;&#x8BB0;&#x538B;&#x7F29;</strong><br>&#x6807;&#x8BB0;-&#x538B;&#x7F29;&#x7B97;&#x6CD5;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#x8F83;&#x591A;&#x7684;&#x573A;&#x5408;&#xFF0C;&#x5982;&#x8001;&#x5E74;&#x4EE3;&#x3002;&#x5B83;&#x5728;&#x6807;&#x8BB0;-&#x6E05;&#x9664;&#x7B97;&#x6CD5;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x4F18;&#x5316;&#x3002;&#x548C;&#x6807;&#x8BB0;-&#x6E05;&#x9664;&#x7B97;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;&#x6807;&#x8BB0;-&#x538B;&#x7F29;&#x7B97;&#x6CD5;&#x4E5F;&#x9996;&#x5148;&#x9700;&#x8981;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x5BF9;&#x6240;&#x6709;&#x53EF;&#x8FBE;&#x5BF9;&#x8C61;&#x505A;&#x4E00;&#x6B21;&#x6807;&#x8BB0;&#x3002;&#x4F46;&#x4E4B;&#x540E;&#xFF0C;&#x5B83;&#x5E76;&#x4E0D;&#x7B80;&#x5355;&#x7684;&#x6E05;&#x7406;&#x672A;&#x6807;&#x8BB0;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x662F;&#x5C06;&#x6240;&#x6709;&#x7684;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#x538B;&#x7F29;&#x5230;&#x5185;&#x5B58;&#x7684;&#x4E00;&#x7AEF;&#x3002;&#x4E4B;&#x540E;&#xFF0C;&#x6E05;&#x7406;&#x8FB9;&#x754C;&#x5916;&#x6240;&#x6709;&#x7684;&#x7A7A;&#x95F4;&#x3002;</p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>&#x8FD9;&#x6837;&#x5E26;&#x6765;&#x7684;&#x597D;&#x5904;&#x5C31;&#x662F;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x5185;&#x5B58;&#x788E;&#x7247;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
</blockquote>
<p><strong>&#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x660E;&#x4E86;&#x8FD9;&#x4E48;&#x591A;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x8BF4;&#x660E;&#x4E0A;&#x9898;&#x4E2D;JVM&#x7684;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x4E86;&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-XX:+UseParNewGC</span><br><span class="line">-XX:+UseConcMarkSweepGC</span><br></pre></td></tr></table></figure>

<p>-XX:+UseParNewGC &#x8868;&#x793A;&#x65B0;&#x751F;&#x4EE3;&#x4F7F;&#x7528;ParNew&#x5E76;&#x884C;&#x6536;&#x96C6;&#x5668;&#xFF0C;-XX:+UseConcMarkSweepGC &#x8868;&#x793A;&#x8001;&#x5E74;&#x4EE3;&#x4F7F;&#x7528;CMS&#x56DE;&#x6536;&#x5668;&#xFF08;CMS&#x6536;&#x96C6;&#x5668;&#x662F;&#x57FA;&#x4E8E;&#x201C;&#x6807;&#x8BB0;-&#x6E05;&#x9664;&#x201D;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;<strong>&#x7279;&#x522B;&#x63D0;&#x9192;&#x7531;&#x4E8E;CMS&#x662F;&#x6807;&#x8BB0;&#x6E05;&#x9664;&#x7B97;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#x6240;&#x4EE5;&#x662F;&#x5B58;&#x5728;&#x788E;&#x7247;&#x95EE;&#x9898;&#x7684;</strong>&#xFF09;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/4a434430550ea25787f2c9924708bc8e159076ec418338298f1037e3e6777cfc" alt></p>
<p>&#x53EF;&#x4EE5;&#x53BB;&#x770B;&#x770B;&#x6211;&#x7684;<a href="/external_links/3639eae0a527e48f84f21612dca53934.html" target="blank" rel="noopener">JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x516D;&#xFF08;JVM&#x6BCF;&#x9694;&#x4E00;&#x5C0F;&#x65F6;&#x6267;&#x884C;&#x4E00;&#x6B21;Full GC&#xFF09;</a>&#x3001;&#x4EE5;&#x53CA;<a href="/external_links/d23b7f3b42d706f8f9626bc2b3cbd514.html" target="blank" rel="noopener">JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x4E03;&#xFF08;tomcat&#x8C03;&#x4F18;&#x4EE5;&#x53CA;tomcat7&#x3001;8&#x6027;&#x80FD;&#x5BF9;&#x6BD4;&#xFF09;</a>&#x56FE;&#x7247;&#x5C31;&#x53D6;&#x7684;&#x8FD9;&#x4E24;&#x7BC7;&#x91CC;&#x9762;&#x7684;&#x3002;</p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>&#x901A;&#x8FC7;jstat -gcutil pid &#x67E5;&#x770B;&#x7684;FGC&#x8FD9;&#x5217;&#x7684;&#x65F6;&#x5019;&#xFF0C;CMS gc&#x901A;&#x5E38;&#x90FD;&#x662F;<strong>+2</strong>&#x4E00;&#x6B21;&#x7684;&#xFF0C;&#x7531;&#x4E8E;CMS-initial-mark&#x548C;CMS-remark&#x4F1A;stop-the-world&#x3002;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8b07cd5afad1874ca4b3e9a85c039b22635f2a6174e08e80e8a027f5bea8daa2" alt></p>
<p>&#x6240;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x56FE;&#x7684;FGC&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x4E86;&#x5427;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-XX:+UseCMSInitiatingOccupancyOnly </span><br><span class="line">-XX:CMSInitiatingOccupancyFraction=75</span><br></pre></td></tr></table></figure>

<p>&#x8FD8;&#x6709;&#x8FD9;2&#x4E2A;&#x53C2;&#x6570;&#x5173;&#x4E8E;cms&#x7684;&#xFF0C;-XX:+UseCMSInitiatingOccupancyOnly&#x8868;&#x793A;JVM&#x4E0D;&#x57FA;&#x4E8E;&#x8FD0;&#x884C;&#x65F6;&#x6536;&#x96C6;&#x7684;&#x6570;&#x636E;&#x6765;&#x542F;&#x52A8;CMS&#x5783;&#x573E;&#x6536;&#x96C6;&#x5468;&#x671F;&#x901A;&#x8FC7;CMSInitiatingOccupancyFraction&#x7684;&#x503C;&#x8FDB;&#x884C;&#x6BCF;&#x4E00;&#x6B21;CMS&#x6536;&#x96C6;&#xFF0C;-XX:CMSInitiatingOccupancyFraction=75 &#x8868;&#x793A;&#x5F53;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x4F7F;&#x7528;&#x7387;&#x8FBE;&#x5230;&#x9608;&#x503C;75%&#x65F6;&#x4F1A;&#x89E6;&#x53D1;CMS GC&#x3002;</p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>jstat -gcutil&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x4E0A;&#x56FE;&#x7684;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x4F7F;&#x7528;&#x7387;&#x624D;60.02%</p>
</blockquote>
<p>&#x8FD8;&#x6709;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x89E3;&#x91CA;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-XX:+UseParNewGC</span><br></pre></td></tr></table></figure>

<p>-XX:+UseParNewGC &#x8868;&#x793A;&#x65B0;&#x751F;&#x4EE3;&#x4F7F;&#x7528;ParNew&#x5E76;&#x884C;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x8001;&#x5E74;&#x4EE3;&#x5462;&#xFF1F;<br>&#x53EF;&#x4EE5;&#x8BA9;&#x540C;&#x6837;&#x53C2;&#x6570;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x4E00;&#x6B21;old gc&#x5373;&#x53EF;&#x770B;&#x65E5;&#x5FD7;&#x6709;&#x7C7B;&#x4F3C;<strong>[Tenured:</strong>&#x8BF4;&#x660E;&#x8001;&#x5E74;&#x4EE3;&#x4F7F;&#x7528;&#x7684;&#x662F;Serial Old</p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>Serial Old&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6807;&#x8BB0;&#x538B;&#x7F29;&#x7B97;&#x6CD5;&#x3002;</p>
</blockquote>
<h2 id="&#x89E3;&#x9898;"><a href="#&#x89E3;&#x9898;" class="headerlink" title="&#x89E3;&#x9898;"></a>&#x89E3;&#x9898;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;private static final int _1MB = 1024 * 1024;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws Exception {</span><br><span class="line">        byte[] all1 = new byte[2 * _1MB];</span><br><span class="line">        byte[] all2 = new byte[2 * _1MB];</span><br><span class="line">        byte[] all3 = new byte[2 * _1MB];</span><br><span class="line">        byte[] all4 = new byte[7 * _1MB];</span><br><span class="line">        System.in.read();</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p><strong>&#x8BF4;&#x660E;&#xFF1A;</strong>&#x6700;&#x540E;System.in.read();&#x8FD9;&#x53E5;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#xFF0C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x7A0B;&#x5E8F;&#x963B;&#x585E;&#x5728;&#x90A3;&#x91CC;&#xFF0C;&#x4E0D;&#x7ED3;&#x675F;&#xFF0C;&#x8FD9;&#x6837;&#x597D;&#x770B;&#x65E5;&#x5FD7;&#xFF0C;&#x597D;&#x770B;&#x73B0;&#x8C61;&#x800C;&#x5DF2;&#x3002;</p>
<p><strong>&#x806A;&#x660E;&#x5982;&#x4F60;</strong>&#x4E00;&#x4E0B;&#x5B50;&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x95EE;&#x9898;&#x672C;&#x8D28;:&#x540C;&#x4E00;&#x4EFD;&#x4EE3;&#x7801;&#xFF0C;jvm&#x53C2;&#x6570;&#x5806;&#x8BBE;&#x7F6E;&#x5565;&#x7684;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x5E74;&#x8F7B;&#x4EE3;gc&#x53C2;&#x6570;&#x4E5F;&#x4E00;&#x6837;&#xFF0C;&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x7684;&#x5C31;&#x5728;&#x4E8E;&#x8001;&#x5E74;&#x4EE3;gc&#x4F7F;&#x7528;&#x4E0A;&#x9762;&#xFF0C;&#x800C;jstat -gcutil&#x56FE;&#x8868;&#x4E2D;FGC&#x6CA1;&#x53D8;&#x7684;&#x5E94;&#x8BE5;&#x662F;&#x6B63;&#x5E38;&#x7ED3;&#x679C;&#xFF0C;&#x53D8;&#x4E86;&#x7684;CMS&#x90A3;&#x4E2A;&#x5C31;&#x662F;&#x610F;&#x5916;&#x7ED3;&#x679C;&#xFF0C;&#x6240;&#x4EE5;&#x5173;&#x952E;&#x70B9;&#x5C31;&#x5728;CMS&#x4E0A;&#x9762;&#x4E86;&#x3002;</p>
<p>&#x5148;&#x6765;&#x8BF4;&#x8BF4;all1 &#x3001;all12&#x3001;all3&#x3001;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x5316;&#x5F00;&#x8F9F;&#x7A7A;&#x95F4;&#x4E4B;&#x540E;&#xFF0C;eden&#x7A7A;&#x95F4;&#x90FD;&#x591F;&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x5728;eden&#x7A7A;&#x95F4;&#x4E2D;&#xFF0C;&#x5F53;all4&#x8FC7;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;eden&#x7A7A;&#x95F4;&#x4E0D;&#x591F;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x6267;&#x884C;ygc&#x4E86;&#x3002;<br>&#x4E0B;&#x9762;&#x6709;2&#x4E2A;&#x95EE;&#x9898;&#x9700;&#x8981;&#x8BF4;&#x660E;&#xFF0C;1&#x3001;&#x5982;&#x679C;s0&#x80FD;&#x5B58;&#x7684;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;<a href="/external_links/c1b41ef946108e58066c8fe01c680681.html" target="blank" rel="noopener">JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x4E09;&#xFF1A;MaxTenuringThreshold</a>&#x65B0;&#x751F;&#x4EE3;&#x7684;&#x5BF9;&#x8C61;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;<strong>&#x6700;&#x591A;</strong>&#x7ECF;&#x8FC7;&#x591A;&#x5C11;&#x6B21;YGC&#x7684;&#x8FC7;&#x7A0B;&#x4F1A;&#x664B;&#x5347;&#x5230;&#x8001;&#x751F;&#x4EE3;&#xFF08;CMS&#x60C5;&#x51B5;&#x4E0B;&#x9ED8;&#x8BA4;&#x4E3A;6&#xFF09;&#xFF0C;&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#x53EF;&#x80FD;&#x8FD8;&#x9700;&#x8981;&#x63D0;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF1A;-XX:TargetSurvivorRatio&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x98DE;&#x54E5;&#x7684;&#xFF1A;<a href="/external_links/e70f44cae6dd896291edd8553d9eda4d.html" target="blank" rel="noopener">JVM Survivor&#x884C;&#x4E3A;&#x4E00;&#x63A2;&#x7A76;&#x7ADF;</a> 2&#x3001;&#x5982;&#x679C;s0&#x5B58;&#x4E0D;&#x4E0B;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x7684;&#x60C5;&#x51B5;&#xFF08;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;s0&#x5C31;&#x662F;1M&#x800C;&#x5DF2;&#xFF09;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x5230;old&#x7A7A;&#x95F4;&#x4E86;&#xFF0C;<strong>&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;jstat -gcutil &#x91CC;&#x9762;&#x7684;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x6BD4;&#x4F8B;&#x90FD;&#x662F;60%&#x51E0;&#x4E86;&#x5427;</strong>&#x3002;<br>ygc&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;all4&#x5C31;&#x8FD8;&#x53EF;&#x4EE5;&#x5728;eden&#x5206;&#x914D;&#xFF08;&#x7A7A;&#x95F4;&#x591F;&#xFF09;&#xFF0C;<strong>&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;jstat -gcutil &#x91CC;&#x9762;&#x7684;eden&#x7684;&#x6BD4;&#x4F8B;&#x90FD;&#x662F;89%&#x51E0;&#x4E86;&#x5427;</strong></p>
<blockquote>
<p><strong>&#x5907;&#x6CE8;&#xFF1A;</strong>-XX:PretenureSizeThreshold&#x53C2;&#x6570;&#x6765;&#x8BBE;&#x7F6E;&#x591A;&#x5927;&#x7684;&#x5BF9;&#x8C61;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x8001;&#x5E74;&#x4EE3;&#xFF08;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x5176;&#x5B9E;&#x53EA;&#x5BF9;&#x4E32;&#x884C;&#x56DE;&#x6536;&#x5668;&#x548C;ParNew&#x6709;&#x6548;&#xFF0C;&#x5BF9;ParallelGC&#x65E0;&#x6548;&#xFF09;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;&#x662F;-Xmx20m -Xms20m -Xmn10m -XX:+UseParNewGC &#x8FD9;&#x5957;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x5982;&#x56FE;&#x53EF;&#x4EE5;&#x89E3;&#x91CA;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E2A;&#x53C2;&#x6570;&#x6BD4;&#x4F8B;&#x5565;&#x7684;&#x90FD;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E86;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d4dd52e7e02396fad8f16940f448aff9ef309fe336bbc3722f2cb50729495507" alt></p>
<p>&#x4E0B;&#x9762;&#x6765;&#x597D;&#x597D;&#x89E3;&#x91CA;&#x4E0B;&#x8FD9;&#x4E2A;&#x73B0;&#x8C61;&#xFF1A;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8b07cd5afad1874ca4b3e9a85c039b22635f2a6174e08e80e8a027f5bea8daa2" alt></p>
<p><strong>&#x806A;&#x660E;&#x5982;&#x4F60;</strong>&#x4E00;&#x4E0B;&#x5B50;&#x5E94;&#x8BE5;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x662F;<strong>&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x662F;&#x6BCF;&#x9694;2s&#x6267;&#x884C;&#x4E00;&#x6B21;</strong>&#xFF0C;&#x6CA1;&#x9519;&#x5C31;&#x662F;2s&#x6267;&#x884C;&#x4E00;&#x6B21;&#x3002;&#x9700;&#x8981;&#x8BF4;&#x9053;-XX:CMSWaitDuration(Time in milliseconds that CMS thread waits for young GC)&#x9ED8;&#x8BA4;&#x503C;&#x662F;2s&#xFF0C;&#x6211;&#x4EEC;&#x4FEE;&#x6539;&#x4E3A;-XX:CMSWaitDuration=5000&#x770B;&#x770B;&#x6548;&#x679C;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3dabded9ab652a8c5c951b49945d3bf62c7904ef1046f79ad50236eb54968c4f" alt="CMSWaitDuration&#x53D8;&#x5316;"></p>
<p>CMSWaitDuration&#x53D8;&#x5316;</p>
<p>&#x770B;&#x5230;&#x4E86;&#x5427;&#xFF0C;&#x4FEE;&#x6539;&#x4E3A;5s&#x5C31;&#x662F;5s&#x6267;&#x884C;&#x4E00;&#x6B21;&#x53D8;&#x5316;&#x4E86;&#x3002;&#x90A3;&#x4E48;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6267;&#x884C;&#x5462;&#xFF1F;&#xFF1F;<img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c9f6a3e6d5ed0b7a226ab47efc8bd23a1418a41b1e02d49ee00db65fdf4940df" alt="&#x6267;&#x884C;&#x7684;CMS GC&#x7684;3&#x4E2D;&#x60C5;&#x51B5;"></p>
<p>&#x6267;&#x884C;&#x7684;CMS GC&#x7684;3&#x4E2D;&#x60C5;&#x51B5;</p>
<p>&#x672C;&#x9898;&#x5C31;&#x662F;&#x5F53;&#x524D;&#x65B0;&#x751F;&#x4EE3;&#x7684;&#x5BF9;&#x8C61;&#x662F;&#x5426;&#x80FD;&#x591F;&#x5168;&#x90E8;&#x987A;&#x5229;&#x7684;&#x664B;&#x5347;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x80FD;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;CMS GC&#x3002;<br>&#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6211;&#x6BD4;&#x8F83;&#x5D07;&#x62DC;&#x7684;&#x72FC;&#x54E5;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x4E00;&#x4E2A;&#x6BD4;&#x6211;&#x725B;&#x903C;&#x5E76;&#x4E14;&#x6BD4;&#x6211;&#x52AA;&#x529B;&#x7684;&#x5927;&#x725B;&#x3002;<a href="/external_links/cd0c5c704806dda04223dbb3ceb872cc.html" target="blank" rel="noopener">&#x4E00;&#x4E2A;&#x6709;&#x610F;&#x601D;&#x7684;&#x9891;&#x7E41;CMS&#x95EE;&#x9898;</a></p>
<p>&#x672C;&#x4EBA;&#x5176;&#x4ED6;JVM&#x83DC;&#x9E1F;&#x8FDB;&#x9636;&#x9AD8;&#x624B;&#x4E4B;&#x8DEF;&#x76F8;&#x5173;&#x6587;&#x7AE0;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x3010;&#x5320;&#x5FC3;&#x96F6;&#x5EA6;&#x3011;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#xFF01;&#xFF01;&#xFF01;</p>
<p><strong>&#x5982;&#x679C;&#x8BFB;&#x5B8C;&#x89C9;&#x5F97;&#x6709;&#x6536;&#x83B7;&#x7684;&#x8BDD;&#xFF0C;&#x6B22;&#x8FCE;&#x70B9;&#x8D5E;&#x3001;&#x5173;&#x6CE8;&#x3001;&#x52A0;&#x516C;&#x4F17;&#x53F7;&#x3010;&#x5320;&#x5FC3;&#x96F6;&#x5EA6;&#x3011;&#x3002;</strong></p>
<hr>
<p>&#x4E2A;&#x4EBA;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#xFF0C;&#x67E5;&#x9605;&#x66F4;&#x591A;&#x7CBE;&#x5F69;&#x5386;&#x53F2;&#xFF01;&#xFF01;&#xFF01;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3134f2b26882bc93354ddf27e7f642bcb4337af174d0a73d85f5dd4085ac9c54" alt="&#x5320;&#x5FC3;&#x96F6;&#x5EA6;&#x516C;&#x4F17;&#x53F7;"></p>
<p>&#x5320;&#x5FC3;&#x96F6;&#x5EA6;&#x516C;&#x4F17;&#x53F7;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/08fc7a436d8935c2ae49887fe752272a.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903516771713032.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903516771713032.html" itemprop="url">万字解读 Service Mesh服务网格新生代--Isti</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-27T07:37:08+08:00">
                2017-11-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x89D2;&#x540D;&#x53EB; Istio&#xFF0C;&#x4F30;&#x8BA1;&#x5F88;&#x591A;&#x540C;&#x5B66;&#x5728;&#x6B64;&#x4E4B;&#x524D;&#x53EF;&#x80FD;&#x5B8C;&#x5168;&#x6CA1;&#x6709;&#x542C;&#x8FC7;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x3002;&#x8BF7;&#x4E0D;&#x5FC5;&#x4ECB;&#x610F;&#xFF0C;&#x6CA1;&#x542C;&#x8FC7;&#x5F88;&#x6B63;&#x5E38;&#xFF0C;&#x56E0;&#x4E3A;Istio&#x7684;&#x786E;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x65B0;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x51FA;&#x4E16;&#x4E5F;&#x624D;&#x56DB;&#x4E2A;&#x6708;&#x800C;&#x5DF2;&#x3002; </p>
<p>&#x4ECA;&#x5929;&#x7684;&#x5185;&#x5BB9;&#x5C06;&#x4F1A;&#x5206;&#x6210;&#x4E09;&#x4E2A;&#x90E8;&#x5206;:</p>
<ul>
<li>&#x4ECB;&#x7ECD;&#xFF1A; &#x8BA9;&#x5927;&#x5BB6;&#x4E86;&#x89E3;Istio&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4EE5;&#x53CA;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x5904;&#xFF0C;&#x4EE5;&#x53CA;Istio&#x80CC;&#x540E;&#x7684;&#x5F00;&#x53D1;&#x56E2;&#x961F;</li>
<li>&#x67B6;&#x6784;&#xFF1A; &#x4ECB;&#x7ECD;Istio&#x7684;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x548C;&#x56DB;&#x4E2A;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x6A21;&#x5757;&#x7684;&#x5177;&#x4F53;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x5757;&#x5185;&#x5BB9;&#x4F1A;&#x6BD4;&#x8F83;&#x504F;&#x6280;&#x672F;</li>
<li>&#x5C55;&#x671B;&#xFF1A; &#x4ECB;&#x7ECD;Istio&#x7684;&#x540E;&#x7EED;&#x5F00;&#x53D1;&#x8BA1;&#x5212;&#xFF0C;&#x63A2;&#x8BA8;&#x672A;&#x6765;&#x7684;&#x53D1;&#x5C55;&#x9884;&#x671F;</li>
</ul>
<p><strong>&#x4ECB;&#x7ECD;</strong><br><strong>Istio&#x662F;&#x4EC0;&#x4E48;&#xFF1A;</strong></p>
<p>Istio&#x662F;Google/IBM/Lyft&#x8054;&#x5408;&#x5F00;&#x53D1;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;2017&#x5E74;5&#x6708;&#x53D1;&#x5E03;&#x7B2C;&#x4E00;&#x4E2A;release 0.1.0&#xFF0C; &#x5B98;&#x65B9;&#x5B9A;&#x4E49;&#x4E3A;:</p>
<p><strong>Istio&#xFF1A;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#xFF0C;&#x7BA1;&#x7406;&#x548C;&#x4FDD;&#x62A4;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#x3002;</strong></p>
<p>&#x6309;&#x7167;isito&#x6587;&#x6863;&#x4E2D;&#x7ED9;&#x51FA;&#x7684;&#x5B9A;&#x4E49;:</p>
<blockquote>
<p>Istio&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5EFA;&#x7ACB;&#x5DF2;&#x90E8;&#x7F72;&#x7684;&#x670D;&#x52A1;&#x7684;&#x7F51;&#x7EDC;&#xFF0C;&#x5177;&#x5907;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x670D;&#x52A1;&#x5230;&#x670D;&#x52A1;&#x8BA4;&#x8BC1;&#xFF0C;&#x76D1;&#x63A7;&#x7B49;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x800C; <strong>&#x4E0D;&#x9700;&#x8981;&#x6539;&#x52A8;&#x4EFB;&#x4F55;&#x670D;&#x52A1;&#x4EE3;&#x7801;</strong>&#x3002;</p>
</blockquote>
<p>&#x7B80;&#x5355;&#x7684;&#x8BF4;&#xFF0C;&#x6709;&#x4E86;Istio&#xFF0C;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5C31;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x5FAE;&#x670D;&#x52A1;&#x5F00;&#x53D1;&#x6846;&#x67B6;&#xFF08;&#x5178;&#x578B;&#x5982;Spring Cloud&#xFF0C;Dubbo&#xFF09;&#xFF0C;&#x4E5F;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#x5B9E;&#x73B0;&#x5404;&#x79CD;&#x590D;&#x6742;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x7684;&#x529F;&#x80FD;&#xFF08;&#x5F88;&#x591A;&#x662F;Spring Cloud&#x548C;Dubbo&#x4E5F;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x52A8;&#x624B;&#xFF09;&#x3002;&#x53EA;&#x8981;&#x670D;&#x52A1;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x76F4;&#x63A5;&#x7F51;&#x7EDC;&#x8BBF;&#x95EE;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x7F51;&#x7EDC;&#x5C42;&#x59D4;&#x6258;&#x7ED9;Istio&#xFF0C;&#x4ECE;&#x800C;&#x83B7;&#x5F97;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5B8C;&#x5907;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x8FD1;&#x4F3C;&#x7684;&#x7406;&#x89E3;&#x4E3A;&#xFF1A;</p>
<p><strong>Istio = &#x5FAE;&#x670D;&#x52A1;&#x6846;&#x67B6; + &#x670D;&#x52A1;&#x6CBB;&#x7406;</strong></p>
<p><strong>&#x540D;&#x5B57;&#x548C;&#x56FE;&#x6807;&#xFF1A;</strong>  </p>
<p>Istio&#x6765;&#x81EA;&#x5E0C;&#x814A;&#x8BED;&#xFF0C;&#x82F1;&#x6587;&#x610F;&#x601D;&#x662F;&#x201D;Sail&#x201D;&#xFF0C; &#x7FFB;&#x8BD1;&#x4E3A;&#x4E2D;&#x6587;&#x662F;&#x201C;&#x542F;&#x822A;&#x201D;&#x3002;&#x5B83;&#x7684;&#x56FE;&#x6807;&#x5982;&#x4E0B;: </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/48e7e0fb1eb3503c9bf50c2d73cbb91a35c8e67aea7dcbf81fcb5cd41a475071" alt></p>
<p>&#x53EF;&#x4EE5;&#x7C7B;&#x6BD4;Google&#x7684;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x76F8;&#x5173;&#x4EA7;&#x54C1;&#xFF1A;Kubernetes&#xFF0C;&#x540D;&#x5B57;&#x4E5F;&#x662F;&#x540C;&#x6837;&#x8D77;&#x6E90;&#x4E8E;&#x53E4;&#x5E0C;&#x814A;&#xFF0C;&#x662F;&#x8239;&#x957F;&#x6216;&#x8005;&#x9A7E;&#x9A76;&#x5458;&#x7684;&#x610F;&#x601D;&#x3002;&#x4E0B;&#x56FE;&#x662F;Kubernetes&#x7684;&#x56FE;&#x6807;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/1e4876d659fd7edafa8f1da2ca87298876d37947f69129136956d723410d1e0e" alt></p>
<p>&#x540E;&#x9762;&#x4F1A;&#x770B;&#x5230;&#xFF0C;Istio&#x548C;Kubernetes&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x5C31;&#x50CF;&#x5B83;&#x4EEC;&#x7684;&#x540D;&#x5B57;&#x548C;&#x56FE;&#x6807;&#x4E00;&#x6837;&#xFF0C; &#x53EF;&#x8C13;&#x201D;&#x4E00;&#x8109;&#x76F8;&#x4F20;&#x201D;&#x3002;</p>
<p><strong>&#x4E3B;&#x8981;&#x7279;&#x6027;&#xFF1A;</strong> </p>
<p>Istio&#x7684;&#x5173;&#x952E;&#x529F;&#x80FD;:</p>
<ul>
<li>HTTP/1.1&#xFF0C;HTTP/2&#xFF0C;gRPC&#x548C;TCP&#x6D41;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x533A;&#x57DF;&#x611F;&#x77E5;&#x8D1F;&#x8F7D;&#x5E73;&#x8861;&#x548C;&#x6545;&#x969C;&#x5207;&#x6362;&#x3002;</li>
<li>&#x901A;&#x8FC7;&#x4E30;&#x5BCC;&#x7684;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#xFF0C;&#x5BB9;&#x9519;&#x548C;&#x6545;&#x969C;&#x6CE8;&#x5165;&#xFF0C;&#x5BF9;&#x6D41;&#x884C;&#x4E3A;&#x7684;&#x7EC6;&#x7C92;&#x5EA6;&#x63A7;&#x5236;&#x3002;</li>
<li>&#x652F;&#x6301;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#xFF0C;&#x901F;&#x7387;&#x9650;&#x5236;&#x548C;&#x914D;&#x989D;&#x7684;&#x53EF;&#x63D2;&#x62D4;&#x7B56;&#x7565;&#x5C42;&#x548C;&#x914D;&#x7F6E;API&#x3002;</li>
<li>&#x96C6;&#x7FA4;&#x5185;&#x6240;&#x6709;&#x6D41;&#x91CF;&#x7684;&#x81EA;&#x52A8;&#x91CF;&#x5EA6;&#xFF0C;&#x65E5;&#x5FD7;&#x548C;&#x8DDF;&#x8E2A;&#xFF0C;&#x5305;&#x62EC;&#x96C6;&#x7FA4;&#x5165;&#x53E3;&#x548C;&#x51FA;&#x53E3;&#x3002;</li>
<li>&#x5B89;&#x5168;&#x7684;&#x670D;&#x52A1;&#x5230;&#x670D;&#x52A1;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#xFF0C;&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x5177;&#x6709;&#x5F3A;&#x5927;&#x7684;&#x8EAB;&#x4EFD;&#x6807;&#x8BC6;&#x3002;</li>
</ul>
<p>&#x8FD9;&#x4E9B;&#x7279;&#x6027;&#x5728;&#x7A0D;&#x540E;&#x7684;&#x67B6;&#x6784;&#x7AE0;&#x8282;&#x65F6;&#x4F1A;&#x6709;&#x4ECB;&#x7ECD;&#x3002;</p>
<p><strong>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;Istio</strong><br>&#x5728;&#x6DF1;&#x5165;Istio&#x7EC6;&#x8282;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x6765;&#x770B;&#x770B;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;Istio&#xFF1F;&#x5B83;&#x53EF;&#x4EE5;&#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;?</p>
<h3 id="&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x4E24;&#x9762;&#x6027;"><a href="#&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x4E24;&#x9762;&#x6027;" class="headerlink" title="&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x4E24;&#x9762;&#x6027;"></a>&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x4E24;&#x9762;&#x6027;</h3><p>&#x6700;&#x8FD1;&#x4E24;&#x4E09;&#x5E74;&#x6765;&#x5FAE;&#x670D;&#x52A1;&#x65B9;&#x5174;&#x672A;&#x827E;&#xFF0C; &#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x516C;&#x53F8;&#x548C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x9646;&#x9646;&#x7EED;&#x7EED;&#x6295;&#x8EAB;&#x5230;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#xFF0C; &#x8BA9;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x9879;&#x76EE;&#x843D;&#x5730;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5728;&#x8FD9;&#x4E00;&#x7247;&#x53EB;&#x597D;&#x7684;&#x55A7;&#x95F9;&#x4E2D;&#xFF0C; &#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x53D1;&#x89C9;&#x4E00;&#x4E9B;&#x666E;&#x904D;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;&#x867D;&#x7136;&#x5FAE;&#x670D;&#x52A1;&#x5BF9;&#x5F00;&#x53D1;&#x8FDB;&#x884C;&#x4E86;&#x7B80;&#x5316;&#xFF0C;&#x901A;&#x8FC7;&#x5C06;&#x590D;&#x6742;&#x7CFB;&#x7EDF;&#x5207;&#x5206;&#x4E3A;&#x82E5;&#x5E72;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x6765;&#x5206;&#x89E3;&#x548C;&#x964D;&#x4F4E;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x4F7F;&#x5F97;&#x8FD9;&#x4E9B;&#x5FAE;&#x670D;&#x52A1;&#x6613;&#x4E8E;&#x88AB;&#x5C0F;&#x578B;&#x7684;&#x5F00;&#x53D1;&#x56E2;&#x961F;&#x6240;&#x7406;&#x89E3;&#x548C;&#x7EF4;&#x62A4;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x590D;&#x6742;&#x5EA6;&#x5E76;&#x975E;&#x4ECE;&#x6B64;&#x6D88;&#x5931;&#x3002;&#x5FAE;&#x670D;&#x52A1;&#x62C6;&#x5206;&#x4E4B;&#x540E;&#xFF0C;&#x5355;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x5927;&#x5E45;&#x964D;&#x4F4E;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x7CFB;&#x7EDF;&#x88AB;&#x4ECE;&#x4E00;&#x4E2A;&#x5355;&#x4F53;&#x62C6;&#x5206;&#x4E3A;&#x51E0;&#x5341;&#x751A;&#x81F3;&#x66F4;&#x591A;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#xFF0C; &#x5C31;&#x5E26;&#x6765;&#x4E86;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x5EA6;&#xFF1A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x8FDE;&#x63A5;&#x3001;&#x7BA1;&#x7406;&#x548C;&#x76D1;&#x63A7;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/89810d3ff15bd742ef463b4c1c7eedf4537b2bf026977a8bfc8e19525a59f246" alt></p>
<p>&#x8BD5;&#x60F3;&#xFF0C; &#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5927;&#x578B;&#x7CFB;&#x7EDF;&#xFF0C; &#x9700;&#x8981;&#x5BF9;&#x591A;&#x8FBE;&#x4E0A;&#x767E;&#x4E2A;&#x751A;&#x81F3;&#x4E0A;&#x5343;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x7BA1;&#x7406;&#x3001;&#x90E8;&#x7F72;&#x3001;&#x7248;&#x672C;&#x63A7;&#x5236;&#x3001;&#x5B89;&#x5168;&#x3001;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x3001;&#x7B56;&#x7565;&#x6267;&#x884C;&#x3001;&#x9065;&#x6D4B;&#x548C;&#x76D1;&#x63A7;&#x7B49;&#xFF0C;&#x8C08;&#x4F55;&#x5BB9;&#x6613;&#x3002;&#x66F4;&#x4E0D;&#x8981;&#x8BF4;&#x66F4;&#x590D;&#x6742;&#x7684;&#x8FD0;&#x7EF4;&#x9700;&#x6C42;&#xFF0C;&#x4F8B;&#x5982;A/B&#x6D4B;&#x8BD5;&#xFF0C;&#x91D1;&#x4E1D;&#x96C0;&#x53D1;&#x5E03;&#xFF0C;&#x9650;&#x6D41;&#xFF0C;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x548C;&#x7AEF;&#x5230;&#x7AEF;&#x8BA4;&#x8BC1;&#x3002;</p>
<p>&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x548C;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x5728;&#x5355;&#x4F53;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5411;&#x5206;&#x5E03;&#x5F0F;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x7684;&#x8F6C;&#x578B;&#x4E2D;&#xFF0C; &#x4E0D;&#x5F97;&#x4E0D;&#x9762;&#x4E34;&#x4E0A;&#x8FF0;&#x6311;&#x6218;&#x3002;</p>
<h3 id="&#x670D;&#x52A1;&#x7F51;&#x683C;"><a href="#&#x670D;&#x52A1;&#x7F51;&#x683C;" class="headerlink" title="&#x670D;&#x52A1;&#x7F51;&#x683C;"></a>&#x670D;&#x52A1;&#x7F51;&#x683C;</h3><p>Service Mesh&#xFF0C;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF0C;&#x4E5F;&#x6709;&#x4EBA;&#x7FFB;&#x8BD1;&#x4E3A;&#x201D;&#x670D;&#x52A1;&#x556E;&#x5408;&#x5C42;&#x201D;.</p>
<p>&#x8FD9;&#x8C8C;&#x4F3C;&#x662F;&#x4ECA;&#x5E74;&#x624D;&#x51FA;&#x6765;&#x7684;&#x65B0;&#x540D;&#x8BCD;&#xFF1F;&#x5728;2017&#x5E74;&#x4E4B;&#x524D;&#x6CA1;&#x6709;&#x542C;&#x8FC7;&#xFF0C;&#x867D;&#x7136;&#x7C7B;&#x4F3C;&#x7684;&#x4EA7;&#x54C1;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x633A;&#x957F;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x4EC0;&#x4E48;&#x662F;Service Mesh&#xFF08;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF09;&#xFF1F;</p>
<ul>
<li>Service Mesh&#x662F;&#x4E13;&#x7528;&#x7684;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x5C42;&#x3002;</li>
<li>&#x8F7B;&#x91CF;&#x7EA7;&#x9AD8;&#x6027;&#x80FD;&#x7F51;&#x7EDC;&#x4EE3;&#x7406;&#x3002;</li>
<li>&#x63D0;&#x4F9B;&#x5B89;&#x5168;&#x7684;&#x3001;&#x5FEB;&#x901F;&#x7684;&#x3001;&#x53EF;&#x9760;&#x5730;&#x670D;&#x52A1;&#x95F4;&#x901A;&#x8BAF;&#x3002;</li>
<li>&#x4E0E;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x90E8;&#x7F72;&#x4E00;&#x8D77;&#xFF0C;&#x4F46;&#x5BF9;&#x5E94;&#x7528;&#x900F;&#x660E;&#x3002;</li>
</ul>
<p>&#x4E3A;&#x4E86;&#x5E2E;&#x52A9;&#x7406;&#x89E3;&#xFF0C; &#x4E0B;&#x56FE;&#x5C55;&#x793A;&#x4E86;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x7684;&#x5178;&#x578B;&#x8FB9;&#x8F66;&#x90E8;&#x7F72;&#x65B9;&#x5F0F;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/4d7d687398f77c40b5fe62db13fecb714d14e6dbef53e5f456b1152d0a71523b" alt></p>
<p>&#x56FE;&#x4E2D;&#x5E94;&#x7528;&#x4F5C;&#x4E3A;&#x670D;&#x52A1;&#x7684;&#x53D1;&#x8D77;&#x65B9;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x7528;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7ED9;&#x672C;&#x5730;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4EE3;&#x7406;&#xFF0C;&#x7136;&#x540E;&#x7F51;&#x683C;&#x4EE3;&#x7406;&#x4F1A;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x6700;&#x540E;&#x5C06;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x7ED9;&#x76EE;&#x6807;&#x670D;&#x52A1;&#x3002;</p>
<p>&#x5F53;&#x6709;&#x5927;&#x91CF;&#x670D;&#x52A1;&#x76F8;&#x4E92;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x5173;&#x7CFB;&#x5C31;&#x4F1A;&#x5F62;&#x6210;&#x7F51;&#x683C;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2ebd1cd11c410450da09f304101de3f4080f3c8c48c5ec649150b9ddc6652914" alt></p>
<p>&#x5728;&#x4E0A;&#x56FE;&#x4E2D;&#x7EFF;&#x8272;&#x65B9;&#x5757;&#x4E3A;&#x670D;&#x52A1;&#xFF0C;&#x84DD;&#x8272;&#x65B9;&#x5757;&#x4E3A;&#x8FB9;&#x8F66;&#x90E8;&#x7F72;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF0C;&#x84DD;&#x8272;&#x7EBF;&#x6761;&#x4E3A;&#x670D;&#x52A1;&#x95F4;&#x901A;&#x8BAF;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x84DD;&#x8272;&#x7684;&#x65B9;&#x5757;&#x548C;&#x7EBF;&#x6761;&#x7EC4;&#x6210;&#x4E86;&#x6574;&#x4E2A;&#x7F51;&#x683C;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x56FE;&#x7247;&#x65CB;&#x8F6C;90&#xB0;&#xFF0C;&#x5C31;&#x66F4;&#x52A0;&#x660E;&#x663E;&#x4E86;&#xFF1A;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x5448;&#x73B0;&#x51FA;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x652F;&#x6491;&#x6001;&#x52BF;&#xFF0C;&#x5C06;&#x6240;&#x6709;&#x7684;&#x670D;&#x52A1;&#x201D;&#x67B6;&#x201D;&#x5728;&#x7F51;&#x683C;&#x4E4B;&#x4E0A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b4e4063623bc6b20b7893897a5d514062cdd86a22b00a26fd51c4142c3046870" alt></p>
<p>&#x670D;&#x52A1;&#x7F51;&#x683C;&#x7684;&#x7EC6;&#x8282;&#x6211;&#x4EEC;&#x4ECA;&#x5929;&#x4E0D;&#x8BE6;&#x7EC6;&#x5C55;&#x5F00;&#xFF0C; &#x8BE6;&#x7EC6;&#x5185;&#x5BB9;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x7F51;&#x4E0A;&#x8D44;&#x6599;&#x3002;&#x6216;&#x8005;&#x7A0D;&#x540E;&#x6211;&#x5C06;&#x4F1A;&#x63A8;&#x51FA;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x7684;&#x4E13;&#x9898;&#xFF0C;&#x5355;&#x72EC;&#x6DF1;&#x5165;&#x4ECB;&#x7ECD;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x3002;</p>
<p>Istio&#x4E5F;&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x662F;&#x4E00;&#x79CD;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF0C; &#x5728;Istio&#x7F51;&#x7AD9;&#x4E0A;&#x8BE6;&#x7EC6;&#x89E3;&#x91CA;&#x4E86;&#x8FD9;&#x4E00;&#x6982;&#x5FF5;&#xFF1A;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x67B6;&#x6784;&#x4E2D;&#x7684;&#x670D;&#x52A1;&#x548C;&#x7F51;&#x7EDC;&#x95F4;&#x900F;&#x660E;&#x5730;&#x6CE8;&#x5165;&#x4E00;&#x5C42;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x5C42;&#x5C06;&#x8D4B;&#x4E88;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x5BF9;&#x6240;&#x9700;&#x529F;&#x80FD;&#x7684;&#x63A7;&#x5236;&#xFF0C;&#x540C;&#x65F6;&#x5C06;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4ECE;&#x7F16;&#x7801;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x95EE;&#x9898;&#x4E2D;&#x89E3;&#x653E;&#x51FA;&#x6765;&#x3002;&#x901A;&#x5E38;&#x5C06;&#x8FD9;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x67B6;&#x6784;&#x5C42;&#x4E0E;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x7EDF;&#x79F0;&#x4E3A;&#x201C;&#x670D;&#x52A1;&#x556E;&#x5408;&#x5C42;&#x201D;&#x3002;&#x7531;&#x4E8E;&#x5FAE;&#x670D;&#x52A1;&#x6709;&#x52A9;&#x4E8E;&#x5206;&#x79BB;&#x5404;&#x4E2A;&#x529F;&#x80FD;&#x56E2;&#x961F;&#xFF0C;&#x56E0;&#x6B64;&#x670D;&#x52A1;&#x556E;&#x5408;&#x5C42;&#x6709;&#x52A9;&#x4E8E;&#x5C06;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x4ECE;&#x5E94;&#x7528;&#x7279;&#x6027;&#x5F00;&#x53D1;&#x548C;&#x53D1;&#x5E03;&#x8FC7;&#x7A0B;&#x4E2D;&#x5206;&#x79BB;&#x51FA;&#x6765;&#x3002;&#x901A;&#x8FC7;&#x7CFB;&#x7EDF;&#x5730;&#x6CE8;&#x5165;&#x4EE3;&#x7406;&#x5230;&#x5FAE;&#x670D;&#x52A1;&#x95F4;&#x7684;&#x7F51;&#x7EDC;&#x8DEF;&#x5F84;&#x4E2D;&#xFF0C;Istio&#x5C06;&#x8FE5;&#x5F02;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x8F6C;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x96C6;&#x6210;&#x7684;&#x670D;&#x52A1;&#x556E;&#x5408;&#x5C42;&#x3002;</p>
<h3 id="Istio&#x80FD;&#x505A;&#x4EC0;&#x4E48;"><a href="#Istio&#x80FD;&#x505A;&#x4EC0;&#x4E48;" class="headerlink" title="Istio&#x80FD;&#x505A;&#x4EC0;&#x4E48;?"></a>Istio&#x80FD;&#x505A;&#x4EC0;&#x4E48;?</h3><p>Istio&#x529B;&#x56FE;&#x89E3;&#x51B3;&#x524D;&#x9762;&#x5217;&#x51FA;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x5B9E;&#x65BD;&#x540E;&#x9700;&#x8981;&#x9762;&#x5BF9;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>Istio &#x9996;&#x5148;&#x662F;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7F51;&#x7EDC;&#xFF0C;&#x4F46;&#x662F;Istio&#x53C8;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x670D;&#x52A1;&#x7F51;&#x683C;: &#x5728; Linkerd&#xFF0C; Envoy &#x8FD9;&#x6837;&#x7684;&#x5178;&#x578B;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E4B;&#x4E0A;&#xFF0C;Istio&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4E3A;&#x6574;&#x4E2A;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x63D0;&#x4F9B;&#x884C;&#x4E3A;&#x6D1E;&#x5BDF;&#x548C;&#x64CD;&#x4F5C;&#x63A7;&#x5236;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x5FAE;&#x670D;&#x52A1;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x591A;&#x6837;&#x5316;&#x9700;&#x6C42;&#x3002;</p>
<p>Istio&#x5728;&#x670D;&#x52A1;&#x7F51;&#x7EDC;&#x4E2D;&#x7EDF;&#x4E00;&#x63D0;&#x4F9B;&#x4E86;&#x8BB8;&#x591A;&#x5173;&#x952E;&#x529F;&#x80FD;(&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x6765;&#x81EA;&#x5B98;&#x65B9;&#x6587;&#x6863;)&#xFF1A;</p>
<ul>
<li><strong>&#x6D41;&#x91CF;&#x7BA1;&#x7406;&#xFF1A;</strong>&#x63A7;&#x5236;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x6D41;&#x91CF;&#x548C;API&#x8C03;&#x7528;&#x7684;&#x6D41;&#x5411;&#xFF0C;&#x4F7F;&#x5F97;&#x8C03;&#x7528;&#x66F4;&#x53EF;&#x9760;&#xFF0C;&#x5E76;&#x4F7F;&#x7F51;&#x7EDC;&#x5728;&#x6076;&#x52A3;&#x60C5;&#x51B5;&#x4E0B;&#x66F4;&#x52A0;&#x5065;&#x58EE;&#x3002;</li>
<li><strong>&#x53EF;&#x89C2;&#x5BDF;&#x6027;&#xFF1A;</strong>&#x4E86;&#x89E3;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x6D41;&#x91CF;&#x7684;&#x672C;&#x8D28;&#x548C;&#x6D41;&#x5411;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x4F9B;&#x5FEB;&#x901F;&#x8BC6;&#x522B;&#x95EE;&#x9898;&#x7684;&#x80FD;&#x529B;&#x3002;</li>
<li><strong>&#x7B56;&#x7565;&#x6267;&#x884C;&#xFF1A;</strong>&#x5C06;&#x7EC4;&#x7EC7;&#x7B56;&#x7565;&#x5E94;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x4E92;&#x52A8;&#xFF0C;&#x786E;&#x4FDD;&#x8BBF;&#x95EE;&#x7B56;&#x7565;&#x5F97;&#x4EE5;&#x6267;&#x884C;&#xFF0C;&#x8D44;&#x6E90;&#x5728;&#x6D88;&#x8D39;&#x8005;&#x4E4B;&#x95F4;&#x826F;&#x597D;&#x5206;&#x914D;&#x3002;&#x7B56;&#x7565;&#x7684;&#x66F4;&#x6539;&#x662F;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x7F51;&#x683C;&#x800C;&#x4E0D;&#x662F;&#x4FEE;&#x6539;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x3002;</li>
<li><strong>&#x670D;&#x52A1;&#x8EAB;&#x4EFD;&#x548C;&#x5B89;&#x5168;&#xFF1A;</strong>&#x4E3A;&#x7F51;&#x683C;&#x4E2D;&#x7684;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x53EF;&#x9A8C;&#x8BC1;&#x8EAB;&#x4EFD;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4FDD;&#x62A4;&#x670D;&#x52A1;&#x6D41;&#x91CF;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x4F7F;&#x5176;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x540C;&#x53EF;&#x4FE1;&#x5EA6;&#x7684;&#x7F51;&#x7EDC;&#x4E0A;&#x6D41;&#x8F6C;&#x3002;</li>
</ul>
<p>&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;Istio&#x9488;&#x5BF9;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x8FDB;&#x884C;&#x4E86;&#x8BBE;&#x8BA1;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x4E0D;&#x540C;&#x7684;&#x90E8;&#x7F72;&#x9700;&#x8981;&#xFF1A;</p>
<ul>
<li><strong>&#x5E73;&#x53F0;&#x652F;&#x6301;&#xFF1A;</strong>Istio&#x65E8;&#x5728;&#x5728;&#x5404;&#x79CD;&#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;&#xFF0C;&#x5305;&#x62EC;&#x8DE8;&#x4E91;&#xFF0C; &#x9884;&#x7F6E;&#xFF0C;Kubernetes&#xFF0C;Mesos&#x7B49;&#x3002;&#x6700;&#x521D;&#x4E13;&#x6CE8;&#x4E8E;Kubernetes&#xFF0C;&#x4F46;&#x5F88;&#x5FEB;&#x5C06;&#x652F;&#x6301;&#x5176;&#x4ED6;&#x73AF;&#x5883;&#x3002;</li>
<li><strong>&#x96C6;&#x6210;&#x548C;&#x5B9A;&#x5236;&#xFF1A;</strong>&#x7B56;&#x7565;&#x6267;&#x884C;&#x7EC4;&#x4EF6;&#x53EF;&#x4EE5;&#x6269;&#x5C55;&#x548C;&#x5B9A;&#x5236;&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0E;&#x73B0;&#x6709;&#x7684;ACL&#xFF0C;&#x65E5;&#x5FD7;&#xFF0C;&#x76D1;&#x63A7;&#xFF0C;&#x914D;&#x989D;&#xFF0C;&#x5BA1;&#x6838;&#x7B49;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x96C6;&#x6210;&#x3002;</li>
</ul>
<p>&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x6781;&#x5927;&#x7684;&#x51CF;&#x5C11;&#x4E86;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#xFF0C;&#x5E95;&#x5C42;&#x5E73;&#x53F0;&#x548C;&#x7B56;&#x7565;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#xFF0C;&#x4F7F;&#x5FAE;&#x670D;&#x52A1;&#x66F4;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x3002;</p>
<p>Istio&#x7684;&#x771F;&#x6B63;&#x4EF7;&#x503C; </p>
<p>&#x4E0A;&#x9762;&#x6458;&#x6284;&#x4E86;Istio&#x5B98;&#x65B9;&#x7684;&#x5927;&#x6BB5;&#x6587;&#x6863;&#x8BF4;&#x660E;&#xFF0C;&#x6D0B;&#x6D0B;&#x6D12;&#x6D12;&#x7684;&#x5217;&#x51FA;&#x4E86;Istio&#x7684;&#x5927;&#x628A;&#x5927;&#x628A;&#x9AD8;&#x5927;&#x4E0A;&#x7684;&#x529F;&#x80FD;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E9B;&#x90FD;&#x4E0D;&#x662F;&#x91CD;&#x70B9;&#xFF01;&#x7406;&#x8BBA;&#x4E0A;&#x8BF4;&#xFF0C;&#x4EFB;&#x4F55;&#x5FAE;&#x670D;&#x52A1;&#x6846;&#x67B6;&#xFF0C;&#x53EA;&#x8981;&#x613F;&#x610F;&#x5F80;&#x4E0A;&#x9762;&#x5806;&#x529F;&#x80FD;&#xFF0C;&#x65E9;&#x665A;&#x90FD;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x3002;</p>
<p>&#x90A3;&#xFF0C;&#x5173;&#x952E;&#x5728;&#x54EA;&#x91CC;&#xFF1F;</p>
<p>&#x4E0D;&#x59A8;&#x8BBE;&#x60F3;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x5E73;&#x65F6;&#x7406;&#x89E3;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5728;&#x6CA1;&#x6709;Istio&#x8FD9;&#x6837;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8981;&#x5982;&#x4F55;&#x5F00;&#x53D1;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x624D;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x524D;&#x9762;&#x5217;&#x51FA;&#x7684;&#x8FD9;&#x4E9B;&#x4E30;&#x5BCC;&#x591A;&#x5F69;&#x7684;&#x529F;&#x80FD;? &#x8FD9;&#x6570;&#x4EE5;&#x51E0;&#x5341;&#x8BB0;&#x7684;&#x5404;&#x79CD;&#x7279;&#x6027;&#xFF0C;&#x5982;&#x4F55;&#x624D;&#x53EF;&#x4EE5;&#x52A0;&#x5165;&#x5230;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;?</p>
<p>&#x65E0;&#x5916;&#x4E4E;&#xFF0C;&#x627E;&#x4E2A;Spring Cloud&#x6216;&#x8005;Dubbo&#x7684;&#x6210;&#x719F;&#x6846;&#x67B6;&#xFF0C;&#x76F4;&#x63A5;&#x641E;&#x5B9A;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#xFF0C;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x7194;&#x65AD;&#x7B49;&#x57FA;&#x7840;&#x529F;&#x80FD;&#x3002;&#x7136;&#x540E;&#x81EA;&#x5DF1;&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x8DEF;&#x7531;&#x7B49;&#x9AD8;&#x7EA7;&#x529F;&#x80FD;&#xFF0C; &#x63A5;&#x5165;Zipkin&#x7B49;Apm&#x505A;&#x5168;&#x94FE;&#x8DEF;&#x76D1;&#x63A7;&#xFF0C;&#x81EA;&#x5DF1;&#x505A;&#x52A0;&#x5BC6;&#x3001;&#x8BA4;&#x8BC1;&#x3001;&#x6388;&#x6743;&#x3002; &#x60F3;&#x529E;&#x6CD5;&#x641E;&#x5B9A;&#x7070;&#x5EA6;&#x65B9;&#x6848;&#xFF0C;&#x7528;Redis&#x7B49;&#x5B9E;&#x73B0;&#x9650;&#x901F;&#x3001;&#x914D;&#x989D;&#x3002; &#x8BF8;&#x5982;&#x6B64;&#x7C7B;&#xFF0C;&#x4E00;&#x5927;&#x5806;&#x7684;&#x4E8B;&#x60C5;&#xFF0C; &#x90FD;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x505A;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x627E;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x8FD8;&#x662F;&#x81EA;&#x5DF1;&#x64CD;&#x5200;&#xFF0C;&#x6700;&#x540E;&#x6574;&#x51FA;&#x4E00;&#x4E2A;&#x5E26;&#x6709;&#x4E00;&#x5927;&#x5806;&#x529F;&#x80FD;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x4E0A;&#x7EBF;&#x90E8;&#x7F72;&#x3002;&#x7136;&#x540E;&#x7ED9;&#x4E2A;&#x914D;&#x7F6E;&#x8BF4;&#x660E;&#x5230;&#x8FD0;&#x7EF4;&#xFF0C;&#x544A;&#x8BC9;&#x4ED6;&#x8BF4;&#x5982;&#x4F55;&#x9700;&#x8981;&#x7070;&#x5EA6;&#xFF0C;&#x8981;&#x5982;&#x4F55;&#x5982;&#x4F55;&#xFF0C; &#x5982;&#x679C;&#x8981;&#x9650;&#x901F;&#xFF0C;&#x914D;&#x7F6E;&#x54EA;&#x91CC;&#x54EA;&#x91CC;&#x3002;</p>
<p>&#x8FD9;&#x4E9B;&#x5DE5;&#x4F5C;&#xFF0C;&#x76F8;&#x4FE1;&#x505A;&#x5FAE;&#x670D;&#x52A1;&#x843D;&#x5730;&#x7684;&#x516C;&#x53F8;&#xFF0C;&#x57FA;&#x672C;&#x90FD;&#x8DD1;&#x4E0D;&#x6389;&#xFF0C;&#x9700;&#x6C42;&#x662F;&#x73B0;&#x5B9E;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x65E0;&#x975E;&#x80FD;&#x5426;&#x5B9E;&#x73B0;&#xFF0C;&#x4EE5;&#x53CA;&#x5B9E;&#x73B0;&#x591A;&#x5C11;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x662F;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#x7684;&#x662F;&#xFF0C;&#x8981;&#x505A;&#x5230;&#x8FD9;&#x4E9B;&#xFF0C;&#x7EDD;&#x5BF9;&#x4E0D;&#x662F;&#x4E00;&#x4EF6;&#x5BB9;&#x6613;&#x7684;&#x4E8B;&#x60C5;&#x3002;</p>
<p>&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5373;&#x4F7F;&#x8D39;&#x529B;&#x505A;&#x5230;&#x8FD9;&#x4E9B;&#x4E8B;&#x60C5;&#x5230;&#x8FD9;&#x91CC;&#x8FD8;&#x6CA1;&#x6709;&#x5B8C;&#xFF1A;&#x8FD0;&#x7EF4;&#x8DD1;&#x6765;&#x63D0;&#x4E86;&#x70B9;&#x8981;&#x6C42;&#xFF0C;&#x5728;&#x4ED6;&#x770B;&#x6765;&#x5F88;&#x5408;&#x7406;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#xFF1A;&#x7B80;&#x5355;&#x70B9;&#x7684;&#x52A0;&#x4E2A;&#x9ED1;&#x540D;&#x5355;&#xFF0C; &#x590D;&#x6742;&#x70B9;&#x7684;&#x8981;&#x505A;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x7070;&#x5EA6;&#xFF1A;&#x5C06;&#x6765;&#x81EA;iPhone&#x7684;&#x7528;&#x6237;&#x6D41;&#x91CF;&#x5BFC;1%&#x5230;Stagging&#x73AF;&#x5883;&#x7684;2.0&#x65B0;&#x7248;&#x672C;&#x2026;&#x2026;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a73d9fcde62a75b3033355e938430ae92124c05f3b636633aa1141ae1fcf11f8" alt></p>
<p>&#x8FD9;&#x91CC;&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x4E25;&#x8083;&#x7684;&#x95EE;&#x9898;&#xFF0C; &#x7ED9;&#x6BCF;&#x4E2A;&#x4E1A;&#x52A1;&#x7A0B;&#x5E8F;&#x7684;&#x5F00;&#x53D1;&#x4EBA;&#x5458;: &#x4F60;&#x5230;&#x5E95;&#x60F3;&#x5F80;&#x4F60;&#x7684;&#x4E1A;&#x52A1;&#x7A0B;&#x5E8F;&#x91CC;&#x9762;&#x585E;&#x591A;&#x5C11;&#x7BA1;&#x7406;&#x548C;&#x8FD0;&#x7EF4;&#x7684;&#x529F;&#x80FD;? &#x5C31;&#x7B97;&#x4F60;hold&#x7684;&#x4F4F;&#x6280;&#x672F;&#x548C;&#x65F6;&#x95F4;&#xFF0C;&#x4F60;&#x6709;&#x80FD;&#x529B;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x7684;&#x6EE1;&#x8DB3;&#x5404;&#x79CD;&#x8FD0;&#x7EF4;&#x548C;&#x7BA1;&#x7406;&#x7684;&#x9700;&#x6C42;&#x5417;&#xFF1F; &#x5F53;&#x4F60;&#x53D1;&#x73B0;&#x4F60;&#x5F00;&#x59CB;&#x75B2;&#x4E8E;&#x54CD;&#x5E94;&#x5404;&#x79CD;&#x975E;&#x529F;&#x80FD;&#x6027;&#x7684;&#x9700;&#x6C42;&#x65F6;&#xFF0C;&#x5C31;&#x8BE5;&#x5F00;&#x59CB;&#x53CD;&#x7701;&#x4E86;: &#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x7684;&#x662F;&#x4E1A;&#x52A1;&#x7A0B;&#x5E8F;&#xFF0C;&#x5B83;&#x7684;&#x6838;&#x5FC3;&#x4EF7;&#x503C;&#x5728;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x5904;&#x7406;&#x548C;&#x5B9E;&#x73B0;&#xFF0C;&#x5C06;&#x5982;&#x6B64;&#x4E4B;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x7CBE;&#x529B;&#x82B1;&#x8D39;&#x5728;&#x8FD9;&#x4E9B;&#x975E;&#x4E1A;&#x52A1;&#x529F;&#x80FD;&#x4E0A;&#xFF0C; &#x8FD9;&#x771F;&#x7684;&#x5408;&#x7406;&#x5417;? &#x800C;&#x4E14;&#x5373;&#x4F7F;&#x662F;&#x5728;&#x5B9E;&#x73B0;&#x5C42;&#x9762;&#xFF0C;&#x5FAE;&#x670D;&#x52A1;&#x5B9E;&#x65BD;&#x65F6;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#x5982;&#x4F55;&#x5212;&#x5206;&#x5FAE;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x4F55;&#x5236;&#x5B9A;&#x63A5;&#x53E3;&#x534F;&#x8BAE;&#xFF0C;&#x4F60;&#x8BE5;&#x5982;&#x4F55;&#x5206;&#x914D;&#x4F60;&#x6709;&#x9650;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x8D44;&#x6E90;&#xFF1F;</p>
<p>Istio <strong>&#x8D85;&#x8D8A; spring cloud&#x548C;dubbo</strong>&#x7B49;&#x4F20;&#x7EDF;&#x5F00;&#x53D1;&#x6846;&#x67B6;&#x4E4B;&#x5904;&#xFF0C; &#x5C31;&#x5728;&#x4E8E;&#x4E0D;&#x4EC5;&#x4EC5;&#x5E26;&#x6765;&#x4E86;&#x8FDC;&#x8D85;&#x8FD9;&#x4E9B;&#x6846;&#x67B6;&#x6240;&#x80FD;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#xFF0C; &#x800C;&#x4E14;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E3A;&#x6B64;&#x505A;&#x5927;&#x91CF;&#x7684;&#x6539;&#x52A8;&#xFF0C; &#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4E5F;&#x4E0D;&#x5FC5;&#x4E3A;&#x4E0A;&#x9762;&#x7684;&#x529F;&#x80FD;&#x5B9E;&#x73B0;&#x8FDB;&#x884C;&#x5927;&#x91CF;&#x7684;&#x77E5;&#x8BC6;&#x50A8;&#x5907;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/ca4cee50adb9f1e0ad43c78957dc4fede6a89a9a38ed1b7b43b5dddf58ca8efa" alt></p>
<p>&#x603B;&#x7ED3;:</p>
<p><strong>Istio &#x5927;&#x5E45;&#x964D;&#x4F4E;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E0B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5F00;&#x53D1;&#x96BE;&#x5EA6;&#xFF0C;&#x52BF;&#x5FC5;&#x6781;&#x5927;&#x7684;&#x63A8;&#x52A8;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x666E;&#x53CA;&#x3002;</strong></p>
<p>&#x4E2A;&#x4EBA;&#x4E50;&#x89C2;&#x4F30;&#x8BA1;&#xFF0C;&#x968F;&#x7740;isito&#x7684;&#x6210;&#x719F;&#xFF0C;&#x5FAE;&#x670D;&#x52A1;&#x5F00;&#x53D1;&#x9886;&#x57DF;&#x5C06;&#x8FCE;&#x6765;&#x4E00;&#x6B21;&#x98A0;&#x8986;&#x6027;&#x7684;&#x53D8;&#x9769;&#x3002;</p>
<p>&#x540E;&#x9762;&#x6211;&#x4EEC;&#x5728;&#x4ECB;&#x7ECD;Istio&#x7684;&#x67B6;&#x6784;&#x548C;&#x529F;&#x80FD;&#x6A21;&#x5757;&#x65F6;, &#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x4E86;&#x89E3;&#x5230;Istio&#x662F;&#x5982;&#x4F55;&#x505A;&#x5230;&#x8FD9;&#x4E9B;&#x7684;&#x3002;</p>
<p><strong>&#x5F00;&#x53D1;&#x56E2;&#x961F;</strong></p>
<p>&#x5728;&#x5F00;&#x59CB;&#x4ECB;&#x7ECD;Istio&#x7684;&#x67B6;&#x6784;&#x4E4B;&#x524D;, &#x6211;&#x4EEC;&#x518D;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;Istio&#x7684;&#x5F00;&#x53D1;&#x56E2;&#x961F;, &#x770B;&#x770B;&#x80CC;&#x540E;&#x7684;&#x5927;&#x4F6C;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;Istio&#x7684;&#x5F00;&#x53D1;&#x56E2;&#x961F;&#x4E3B;&#x8981;&#x6765;&#x81EA; Google&#xFF0C; IBM&#x548C;Lyft&#xFF0C;&#x6458;&#x6284;&#x4E00;&#x6BB5;&#x5B98;&#x65B9;&#x516B;&#x80A1;&#xFF1A;</p>
<blockquote>
<p>&#x57FA;&#x4E8E;&#x6211;&#x4EEC;&#x4E3A;&#x5185;&#x90E8;&#x548C;&#x4F01;&#x4E1A;&#x5BA2;&#x6237;&#x6784;&#x5EFA;&#x548C;&#x8FD0;&#x8425;&#x5927;&#x89C4;&#x6A21;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x5E38;&#x89C1;&#x7ECF;&#x9A8C;&#xFF0C;Google&#xFF0C;IBM&#x548C;Lyft&#x8054;&#x624B;&#x521B;&#x5EFA;Istio&#xFF0C;&#x5E0C;&#x671B;&#x4E3A;&#x5FAE;&#x670D;&#x52A1;&#x5F00;&#x53D1;&#x548C;&#x7EF4;&#x62A4;&#x63D0;&#x4F9B;&#x53EF;&#x9760;&#x7684;&#x57FA;&#x7840;&#x3002;</p>
</blockquote>
<p>Google&#x548C;IBM&#x76F8;&#x4FE1;&#x4E0D;&#x9700;&#x8981;&#x4ECB;&#x7ECD;&#x4E86;, &#x5728;Istio&#x9879;&#x76EE;&#x4E2D;&#x8FD9;&#x4E24;&#x4E2A;&#x516C;&#x53F8;&#x662F;&#x7EDD;&#x5BF9;&#x4E3B;&#x529B;&#xFF0C;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;,&#x4E0B;&#x56FE;&#x662F; Istio Working Group&#x7684;&#x6210;&#x5458;&#x5217;&#x8868;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7769b07f5261b5e1b76e64114ad58b39dffc84fbe3dd375abf32ba6ebce8e0c1" alt></p>
<p>&#x6570;&#x4E00;&#x4E0B;, &#x603B;&#x5171;18&#x4EBA;&#xFF0C;10&#x4E2A;google&#xFF0C;8&#x4E2A;IBM&#x3002;&#x6CE8;&#x610F;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;Lyft&#x51FA;&#x73B0;&#xFF0C;&#x56E0;&#x4E3A;Lyft&#x7684;&#x8D21;&#x732E;&#x4E3B;&#x8981;&#x96C6;&#x4E2D;&#x5728;Envoy&#x3002;</p>
<h3 id="Google"><a href="#Google" class="headerlink" title="Google"></a>Google</h3><p>Istio&#x6765;&#x81EA;&#x9F0E;&#x9F0E;&#x5927;&#x540D;&#x7684;GCP/Google Cloud Platform, &#x8FD9;&#x91CC;&#x8BDE;&#x751F;&#x4E86;&#x540C;&#x6837;&#x5927;&#x540D;&#x9F0E;&#x9F0E;&#x7684; App Engine, Cloud Engine&#x7B49;&#x91CD;&#x91CF;&#x7EA7;&#x4EA7;&#x54C1;&#x3002;</p>
<p>Google&#x4E3A;Istio&#x5E26;&#x6765;&#x4E86;Kubernetes&#x548C;gRPC, &#x8FD8;&#x6709;&#x548C;Envoy&#x76F8;&#x5173;&#x7684;&#x7279;&#x6027;&#x5982;&#x5B89;&#x5168;&#xFF0C;&#x6027;&#x80FD;&#x548C;&#x6269;&#x5C55;&#x6027;&#x3002;</p>
<blockquote>
<p>&#x516B;&#x5366;: &#x8D1F;&#x8D23;Istio&#x7684;GCP&#x4EA7;&#x54C1;&#x7ECF;&#x7406;Varun Talwar&#xFF0C; &#x540C;&#x65F6;&#x4E5F;&#x8D1F;&#x8D23;gRPC&#x9879;&#x76EE;, &#x6240;&#x4EE5;&#x5173;&#x6CE8;gRPC&#x7684;&#x540C;&#x5B66;&#xFF08;&#x6BD4;&#x5982;&#x6211;&#x81EA;&#x5DF1;&#xFF09;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#xFF1A;Istio&#x5BF9;gRPC&#x7684;&#x652F;&#x6301;&#x5FC5;&#x7136;&#x662F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;</p>
</blockquote>
<h3 id="IBM"><a href="#IBM" class="headerlink" title="IBM"></a>IBM</h3><p>IBM&#x7684;&#x56E2;&#x961F;&#x540C;&#x6765;&#x6765;&#x81EA;IBM&#x4E91;&#x5E73;&#x53F0;, IBM&#x7684;&#x8D21;&#x732E;&#x662F;:</p>
<blockquote>
<p>&#x9664;&#x4E86;&#x5F00;&#x53D1;Istio&#x63A7;&#x5236;&#x9762;&#x677F;&#x4E4B;&#x5916;, &#x8FD8;&#x6709;&#x548C;Envoy&#x76F8;&#x5173;&#x7684;&#x5176;&#x4ED6;&#x7279;&#x6027;&#x5982;&#x8DE8;&#x670D;&#x52A1;&#x7248;&#x672C;&#x7684;&#x6D41;&#x91CF;&#x5207;&#x5206;, &#x5206;&#x5E03;&#x5F0F;&#x8BF7;&#x6C42;&#x8FFD;&#x8E2A;(Zipkin)&#x548C;&#x5931;&#x8D25;&#x6CE8;&#x5165;.</p>
</blockquote>
<h3 id="Lyft"><a href="#Lyft" class="headerlink" title="Lyft"></a>Lyft</h3><p>Lyft&#x7684;&#x8D21;&#x732E;&#x4E3B;&#x8981;&#x96C6;&#x4E2D;&#x5728;Envoy&#x4EE3;&#x7406;&#xFF0C;&#x8FD9;&#x662F;Lyft&#x5F00;&#x6E90;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF0C;&#x57FA;&#x4E8E;C++&#x3002;&#x636E;&#x8BF4;Envoy&#x5728;Lyft&#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x8D85;&#x8FC7;100&#x4E2A;&#x670D;&#x52A1;&#xFF0C;&#x8DE8;&#x8D8A;10000&#x4E2A;&#x865A;&#x62DF;&#x673A;&#xFF0C;&#x6BCF;&#x79D2;&#x5904;&#x7406;2&#x767E;&#x4E07;&#x8BF7;&#x6C42;&#x3002;&#x672C;&#x5468;&#x6700;&#x65B0;&#x6D88;&#x606F;&#xFF0C;Envoy&#x521A;&#x521A;&#x52A0;&#x5165;CNCF&#xFF0C;&#x6210;&#x4E3A;&#x8BE5;&#x57FA;&#x91D1;&#x4F1A;&#x7684;&#x7B2C;&#x5341;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C; &#x5728;Isito&#x7684;&#x4ECB;&#x7ECD;&#x5B8C;&#x6210;&#x4E4B;&#x540E;, &#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x4E0B;&#x4E00;&#x8282;&#x5185;&#x5BB9;&#xFF0C;Istio&#x7684;&#x67B6;&#x6784;&#x3002;</p>
<p><strong>&#x67B6;&#x6784;</strong><br><strong>&#x6574;&#x4F53;&#x67B6;&#x6784;</strong> </p>
<p>Istio&#x670D;&#x52A1;&#x7F51;&#x683C;&#x903B;&#x8F91;&#x4E0A;&#x5206;&#x4E3A;<strong>&#x6570;&#x636E;&#x9762;&#x677F;</strong>&#x548C;<strong>&#x63A7;&#x5236;&#x9762;&#x677F;</strong>&#x3002;</p>
<ul>
<li><strong>&#x6570;&#x636E;&#x9762;&#x677F;</strong>&#x7531;&#x4E00;&#x7EC4;&#x667A;&#x80FD;&#x4EE3;&#x7406;&#xFF08;Envoy&#xFF09;&#x7EC4;&#x6210;&#xFF0C;&#x4EE3;&#x7406;&#x90E8;&#x7F72;&#x4E3A;&#x8FB9;&#x8F66;&#xFF0C;&#x8C03;&#x89E3;&#x548C;&#x63A7;&#x5236;&#x5FAE;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x6240;&#x6709;&#x7684;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x3002;</li>
<li><strong>&#x63A7;&#x5236;&#x9762;&#x677F;</strong>&#x8D1F;&#x8D23;&#x7BA1;&#x7406;&#x548C;&#x914D;&#x7F6E;&#x4EE3;&#x7406;&#x6765;&#x8DEF;&#x7531;&#x6D41;&#x91CF;&#xFF0C;&#x4EE5;&#x53CA;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x6267;&#x884C;&#x7B56;&#x7565;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x56FE;&#x4E3A;Istio&#x7684;&#x67B6;&#x6784;&#x8BE6;&#x7EC6;&#x5206;&#x89E3;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d0b1b9e44ed9733007461fcf0eb73efed7720c33bdc4367dacb6cd097c8f7361" alt></p>
<p>&#x8FD9;&#x662F;&#x5B8F;&#x89C2;&#x89C6;&#x56FE;&#xFF0C;&#x53EF;&#x4EE5;&#x66F4;&#x5F62;&#x8C61;&#x7684;&#x5C55;&#x793A;Istio&#x4E24;&#x4E2A;&#x9762;&#x677F;&#x7684;&#x529F;&#x80FD;&#x548C;&#x5408;&#x4F5C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/1f46b3fe5f8db6b523ddc7f3648359b8c56aeae59609f20c68cfe8f4521b2b79" alt></p>
<p>&#x4EE5;&#x4E0B;&#x5206;&#x522B;&#x4ECB;&#x7ECD; Istio &#x4E2D;&#x7684;&#x4E3B;&#x8981;&#x6A21;&#x5757; Envoy/Mixer/Pilot/Auth&#x3002;</p>
<p><strong>Envory</strong> </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b7523b6b90556c9a074427339a46fe4551d291d0301afff4a2de470d49c2830a" alt></p>
<p>&#x4EE5;&#x4E0B;&#x4ECB;&#x7ECD;&#x5185;&#x5BB9;&#x6765;&#x81EA;Istio&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF1A;</p>
<blockquote>
<p>Istio &#x4F7F;&#x7528;Envoy&#x4EE3;&#x7406;&#x7684;&#x6269;&#x5C55;&#x7248;&#x672C;&#xFF0C;Envoy&#x662F;&#x4EE5;C++&#x5F00;&#x53D1;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x4EE3;&#x7406;&#xFF0C;&#x7528;&#x4E8E;&#x8C03;&#x89E3;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E2D;&#x6240;&#x6709;&#x670D;&#x52A1;&#x7684;&#x6240;&#x6709;&#x5165;&#x7AD9;&#x548C;&#x51FA;&#x7AD9;&#x6D41;&#x91CF;&#x3002;</p>
<p>Istio&#x5229;&#x7528;&#x4E86;Envoy&#x7684;&#x8BB8;&#x591A;&#x5185;&#x7F6E;&#x529F;&#x80FD;&#xFF0C;&#x4F8B;&#x5982;&#x52A8;&#x6001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;TLS termination&#xFF0C;HTTP/2&amp;gRPC&#x4EE3;&#x7406;&#xFF0C;&#x7194;&#x65AD;&#x5668;&#xFF0C;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#xFF0C;&#x57FA;&#x4E8E;&#x767E;&#x5206;&#x6BD4;&#x6D41;&#x91CF;&#x62C6;&#x5206;&#x7684;&#x5206;&#x6BB5;&#x63A8;&#x51FA;&#xFF0C;&#x6545;&#x969C;&#x6CE8;&#x5165;&#x548C;&#x4E30;&#x5BCC;&#x7684;metrics&#x3002;</p>
<p>Envoy&#x5B9E;&#x73B0;&#x4E86;&#x8FC7;&#x6EE4;&#x548C;&#x8DEF;&#x7531;&#x3001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x3001;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x5177;&#x6709;&#x5F39;&#x6027;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3002;&#x5B83;&#x5728;&#x5B89;&#x5168;&#x4E0A;&#x652F;&#x6301;TLS&#xFF0C;&#x5728;&#x901A;&#x4FE1;&#x65B9;&#x9762;&#x652F;&#x6301;gRPC.</p>
</blockquote>
<p>&#x6982;&#x62EC;&#x8BF4;&#xFF0C;Envoy&#x63D0;&#x4F9B;&#x7684;&#x662F;&#x670D;&#x52A1;&#x95F4;&#x7F51;&#x7EDC;&#x901A;&#x8BAF;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5305;&#x62EC;(&#x4EE5;&#x4E0B;&#x5747;&#x53EF;&#x652F;&#x6301;TLS)&#xFF1A;</p>
<ul>
<li>HTTP&#xFF0F;1.1</li>
<li>HTTP/2</li>
<li>gRPC</li>
<li>TCP</li>
</ul>
<p>&#x4EE5;&#x53CA;&#x7F51;&#x7EDC;&#x901A;&#x8BAF;&#x76F4;&#x63A5;&#x76F8;&#x5173;&#x7684;&#x529F;&#x80FD;&#xFF1A;</p>
<ul>
<li>&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF1A;&#x4ECE;Pilot&#x5F97;&#x5230;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x4FE1;&#x606F;</li>
<li>&#x8FC7;&#x6EE4;</li>
<li>&#x8D1F;&#x8F7D;&#x5747;&#x8861;</li>
<li>&#x5065;&#x5EB7;&#x68C0;&#x67E5;</li>
<li>&#x6267;&#x884C;&#x8DEF;&#x7531;&#x89C4;&#x5219;(Rule): &#x89C4;&#x5219;&#x6765;&#x81EA;Polit,&#x5305;&#x62EC;&#x8DEF;&#x7531;&#x548C;&#x76EE;&#x7684;&#x5730;&#x7B56;&#x7565;</li>
<li>&#x52A0;&#x5BC6;&#x548C;&#x8BA4;&#x8BC1;: TLS certs&#x6765;&#x81EA; Istio-Auth</li>
</ul>
<p>&#x6B64;&#x5916;, Envoy &#x4E5F;&#x5410;&#x51FA;&#x5404;&#x79CD;&#x6570;&#x636E;&#x7ED9;Mixer:</p>
<ul>
<li>Metrics</li>
<li>Logging</li>
<li>Distribution Trace: &#x76EE;&#x524D;&#x652F;&#x6301; Zipkin</li>
</ul>
<p>&#x603B;&#x7ED3;: Envoy&#x662F;Istio&#x4E2D;&#x8D1F;&#x8D23;&#x201D;&#x5E72;&#x6D3B;&#x201D;&#x7684;&#x6A21;&#x5757;,&#x5982;&#x679C;&#x5C06;&#x6574;&#x4E2A;Istio&#x4F53;&#x7CFB;&#x6BD4;&#x55BB;&#x4E3A;&#x4E00;&#x4E2A;&#x65BD;&#x5DE5;&#x961F;,&#x90A3;&#x4E48; Envoy &#x5C31;&#x662F;&#x6700;&#x5E95;&#x5C42;&#x8D1F;&#x8D23;&#x642C;&#x7816;&#x7684;&#x6C11;&#x5DE5;&#xFF0C;&#x6240;&#x6709;&#x4F53;&#x529B;&#x6D3B;&#x90FD;&#x7531;Envoy&#x5B8C;&#x6210;&#x3002;&#x6240;&#x6709;&#x9700;&#x8981;&#x63A7;&#x5236;&#xFF0C;&#x51B3;&#x7B56;&#xFF0C;&#x7BA1;&#x7406;&#x7684;&#x529F;&#x80FD;&#x90FD;&#x662F;&#x5176;&#x4ED6;&#x6A21;&#x5757;&#x6765;&#x8D1F;&#x8D23;&#xFF0C;&#x7136;&#x540E;&#x914D;&#x7F6E;&#x7ED9;Envoy&#x3002;</p>
<h3 id="Istio&#x67B6;&#x6784;&#x56DE;&#x987E;"><a href="#Istio&#x67B6;&#x6784;&#x56DE;&#x987E;" class="headerlink" title="Istio&#x67B6;&#x6784;&#x56DE;&#x987E;"></a>Istio&#x67B6;&#x6784;&#x56DE;&#x987E;</h3><p> &#x5728;&#x7EE7;&#x7EED;&#x4ECB;&#x7ECD;Istio&#x5176;&#x4ED6;&#x7684;&#x6A21;&#x5757;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x56DE;&#x987E;&#x4E00;&#x4E0B;Istio&#x7684;&#x67B6;&#x6784;&#xFF0C;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x63D0;&#x5230;, Istio&#x670D;&#x52A1;&#x7F51;&#x683C;&#x5206;&#x4E3A;&#x4E24;&#x5927;&#x5757;&#xFF1A; <strong>&#x6570;&#x636E;&#x9762;&#x677F;&#x548C;&#x63A7;&#x5236;&#x9762;&#x677F;&#x3002;</strong> </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d0b1b9e44ed9733007461fcf0eb73efed7720c33bdc4367dacb6cd097c8f7361" alt></p>
<p> &#x521A;&#x521A;&#x4ECB;&#x7ECD;&#x7684;Envoy&#xFF0C;&#x5728;Istio&#x4E2D;&#x626E;&#x6F14;&#x7684;&#x5C31;&#x662F;&#x6570;&#x636E;&#x9762;&#x677F;&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x6211;&#x4EEC;&#x4E0B;&#x9762;&#x5C06;&#x8981;&#x9646;&#x7EED;&#x4ECB;&#x7ECD;&#x7684;Mixer&#x3001;Pilot&#x548C;Auth&#x5C5E;&#x4E8E;&#x63A7;&#x5236;&#x9762;&#x677F;&#x3002;&#x4E0A;&#x9762;&#x6211;&#x7ED9;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x7C7B;&#x6BD4;&#xFF1A;Istio&#x4E2D;Envoy (&#x6216;&#x8005;&#x8BF4;&#x6570;&#x636E;&#x9762;&#x677F;)&#x626E;&#x6F14;&#x7684;&#x89D2;&#x8272;&#x662F;&#x5E95;&#x5C42;&#x5E72;&#x6D3B;&#x7684;&#x6C11;&#x5DE5;&#xFF0C;&#x800C;&#x8BE5;&#x8BA9;&#x8FD9;&#x4E9B;&#x6C11;&#x5DE5;&#x5982;&#x4F55;&#x5DE5;&#x4F5C;&#xFF0C;&#x7531;&#x5305;&#x5DE5;&#x5934;&#x63A7;&#x5236;&#x9762;&#x677F;&#x6765;&#x8D1F;&#x8D23;&#x5B8C;&#x6210;&#x3002; </p>
<p> &#x5728;Istio&#x7684;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x6A21;&#x5757;&#x7684;&#x5206;&#x5DE5;&#x975E;&#x5E38;&#x7684;&#x6E05;&#x6670;&#xFF0C;&#x4F53;&#x73B0;&#x5728;&#x67B6;&#x6784;&#x4E0A;&#x4E5F;&#x662F;&#x7ECF;&#x7EAC;&#x5206;&#x660E;&#xFF1A; Mixer&#xFF0C;Pilot&#x548C;Auth&#x8FD9;&#x4E09;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x662F;Go&#x8BED;&#x8A00;&#x5F00;&#x53D1;&#xFF0C;&#x4EE3;&#x7801;&#x6258;&#x7BA1;&#x5728;Github&#x4E0A;&#xFF0C;&#x4E09;&#x4E2A;&#x4ED3;&#x5E93;&#x5206;&#x522B;&#x662F; Istio/mixer, Istio/pilot/auth&#x3002;&#x800C;Envoy&#x6765;&#x81EA;Lyft&#xFF0C;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x662F;c++ 11&#xFF0C;&#x4EE3;&#x7801;&#x6258;&#x7BA1;&#x5728;Github&#x4F46;&#x4E0D;&#x662F;Istio&#x4E0B;&#x3002;&#x4ECE;&#x56E2;&#x961F;&#x5206;&#x5DE5;&#x770B;&#xFF0C;Google&#x548C;IBM&#x5173;&#x6CE8;&#x4E8E;&#x63A7;&#x5236;&#x9762;&#x677F;&#x4E2D;&#x7684;Mixer&#xFF0C;Pilot&#x548C;Auth&#xFF0C;&#x800C;Lyft&#x7EE7;&#x7EED;&#x4E13;&#x6CE8;&#x4E8E;Envoy&#x3002; </p>
<p> Istio&#x7684;&#x8FD9;&#x4E2A;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#xFF0C;&#x5C06;&#x5E95;&#x5C42;Service Mesh&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#xFF0C;&#x548C;Istio&#x6838;&#x5FC3;&#x7684;&#x63A7;&#x5236;&#x9762;&#x677F;&#x62C6;&#x5206;&#x5F00;&#x3002;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;Istio&#x53EF;&#x4EE5;&#x501F;&#x52A9;&#x6210;&#x719F;&#x7684;Envoy&#x5FEB;&#x901F;&#x63A8;&#x51FA;&#x4EA7;&#x54C1;&#xFF0C;&#x672A;&#x6765;&#x5982;&#x679C;&#x6709;&#x66F4;&#x597D;&#x7684;Service Mesh&#x65B9;&#x6848;&#x4E5F;&#x65B9;&#x4FBF;&#x96C6;&#x6210;&#x3002; </p>
<h3 id="Envoy&#x7684;&#x7ADE;&#x4E89;&#x8005;"><a href="#Envoy&#x7684;&#x7ADE;&#x4E89;&#x8005;" class="headerlink" title="Envoy&#x7684;&#x7ADE;&#x4E89;&#x8005;"></a>Envoy&#x7684;&#x7ADE;&#x4E89;&#x8005;</h3><p> &#x8C08;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x804A;&#x4E00;&#x4E0B;&#x76EE;&#x524D;&#x5E02;&#x9762;&#x4E0A;Envoy&#x4E4B;&#x5916;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x4E2A;Service Mesh&#x6210;&#x719F;&#x4EA7;&#x54C1;&#xFF1A;&#x57FA;&#x4E8E;Scala&#x7684;Linkerd&#x3002; Linkerd&#x7684;&#x529F;&#x80FD;&#x548C;&#x5B9A;&#x4F4D;&#x548C;Envoy&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x800C;&#x4E14;&#x5C31;&#x5728;&#x4ECA;&#x5E74;&#x4E0A;&#x534A;&#x5E74;&#x6210;&#x529F;&#x8FDB;&#x5165;CNCF&#x3002;&#x800C;&#x5728; Istio &#x63A8;&#x51FA;&#x4E4B;&#x540E;&#xFF0C;Linkerd&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x5F88;&#x6709;&#x610F;&#x601D;&#x7684;&#x52A8;&#x4F5C;&#xFF1A;Istio&#x63A8;&#x51FA;&#x4E86;&#x548C;Istio&#x7684;&#x96C6;&#x6210;&#xFF0C;&#x5B9E;&#x9645;&#x4E3A;&#x66FF;&#x6362;Envoy&#x4F5C;&#x4E3A;Istio&#x7684;&#x6570;&#x636E;&#x9762;&#x677F;&#xFF0C;&#x548C;Istio&#x7684;&#x63A7;&#x5236;&#x9762;&#x677F;&#x5BF9;&#x63A5;&#x3002; </p>
<p> &#x56DE;&#x5230;Istio&#x7684;&#x67B6;&#x6784;&#x56FE;&#xFF0C;&#x5C06;&#x8FD9;&#x5E45;&#x56FE;&#x4E2D;&#x7684;Envoy&#x5B57;&#x6837;&#x66FF;&#x6362;&#x4E3A;Linkerd&#x5373;&#x53EF;&#x3002;&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E0D;&#x5728;&#x56FE;&#x4E2D;&#x8868;&#x793A;&#x7684;Linkerd Ingress / Linkerd Egress&#x7528;&#x4E8E;&#x66FF;&#x4EE3;Envoy&#x5B9E;&#x73B0; k8s&#x7684;Ingress/Egress&#x3002; </p>
<p> &#x672C;&#x5468;&#x6700;&#x65B0;&#x6D88;&#x606F;&#xFF1A; Nginx&#x63A8;&#x51FA;&#x4E86;&#x81EA;&#x5DF1;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4EA7;&#x54C1;Nginmesh&#xFF0C;&#x529F;&#x80FD;&#x7C7B;&#x4F3C;&#xFF0C;&#x6BD4;&#x8F83;&#x6709;&#x610F;&#x601D;&#x7684;&#x5730;&#x65B9;&#x662F;Ngxinmesh&#x4E00;&#x51FA;&#x6765;&#x5C31;&#x76F4;&#x63A5;&#x5BA3;&#x5E03;&#x8981;&#x548C;Istio&#x96C6;&#x6210;&#xFF0C;&#x66FF;&#x6362;Envoy&#x3002; </p>
<blockquote>
<p>&#x7EE7;&#x7EED;&#x516B;&#x5366;&#xFF1A;&#x4E00;&#x51FA;&#x5C0F;&#x4E09;&#x4E0A;&#x4F4D;&#x539F;&#x914D;&#x51FA;&#x5C40;&#x7684;&#x72D7;&#x8840;&#x5267;&#x60C5;&#x8C8C;&#x4F3C;&#x6B63;&#x5728;&#x915D;&#x917F;&#x4E2D;&#x3002; &#x7ED3;&#x5C40;&#x5982;&#x4F55;&#x6211;&#x7B49;&#x4E0D;&#x59A8;&#x62ED;&#x76EE;&#x4EE5;&#x5F85;&#xFF0C;&#x8FD8;&#x662F;&#x90A3;&#x53E5;&#x8BDD;: &#x6CA1;&#x6709;&#x6316;&#x4E0D;&#x5012;&#x7684;&#x5899;&#x89D2;&#xFF0C;&#x53EA;&#x6709;&#x4E0D;&#x52AA;&#x529B;&#x7684;&#x5C0F;&#x4E09;! Linkerd&#xFF0C;Nginmesh&#xFF0C;&#x52A0;&#x6CB9;&#xFF01;</p>
</blockquote>
<p> &#x4E0B;&#x9762;&#x5F00;&#x59CB;&#x4ECB;&#x7ECD; Istio &#x4E2D;&#x6700;&#x6838;&#x5FC3;&#x7684;&#x63A7;&#x5236;&#x9762;&#x677F;&#x3002; </p>
<p> <strong>Pilot</strong>  </p>
<ul>
<li>&#x6D41;&#x91CF;&#x7BA1;&#x7406;</li>
</ul>
<p> Istio&#x6700;&#x6838;&#x5FC3;&#x7684;&#x529F;&#x80FD;&#x662F;&#x6D41;&#x91CF;&#x7BA1;&#x7406;&#xFF0C;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x7684;&#x6570;&#x636E;&#x9762;&#x677F;&#xFF0C;&#x7531;Envoy&#x7EC4;&#x6210;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF0C;&#x5C06;&#x6574;&#x4E2A;&#x670D;&#x52A1;&#x95F4;&#x901A;&#x8BAF;&#x548C;&#x5165;&#x53E3;/&#x51FA;&#x53E3;&#x8BF7;&#x6C42;&#x90FD;&#x627F;&#x8F7D;&#x4E8E;&#x5176;&#x4E0A;&#x3002; </p>
<p> &#x4F7F;&#x7528;Istio&#x7684;&#x6D41;&#x91CF;&#x7BA1;&#x7406;&#x6A21;&#x578B;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x5C06; <strong>&#x6D41;&#x91CF;&#x548C;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x6269;&#x5C55;&#x89E3;&#x8026;&#xFF0C;</strong>&#x8BA9;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x901A;&#x8FC7;Pilot&#x6307;&#x5B9A;&#x5B83;&#x4EEC;&#x5E0C;&#x671B;&#x6D41;&#x91CF;&#x9075;&#x5FAA;&#x4EC0;&#x4E48;&#x89C4;&#x5219;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x54EA;&#x4E9B;&#x7279;&#x5B9A;&#x7684;pod/VM&#x5E94;&#x8BE5;&#x63A5;&#x6536;&#x6D41;&#x91CF;&#x3002; </p>
<p> &#x5BF9;&#x8FD9;&#x6BB5;&#x8BDD;&#x7684;&#x7406;&#x89E3;, &#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;&#x5047;&#x5B9A;&#x6211;&#x4EEC;&#x539F;&#x6709;&#x670D;&#x52A1;B&#xFF0C;&#x90E8;&#x7F72;&#x5728;Pod1/2/3&#x4E0A;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x90E8;&#x7F72;&#x4E00;&#x4E2A;&#x65B0;&#x7248;&#x672C;&#x5728;Pod4&#x5728;&#xFF0C;&#x5E0C;&#x671B;&#x5B9E;&#x73B0;&#x5207;5%&#x7684;&#x6D41;&#x91CF;&#x5230;&#x65B0;&#x7248;&#x672C;&#x3002; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/86d7e84df804f62d1947ee1f435cfc2c51130ba64a9355ce15818f8a688bba3c" alt></p>
<p> &#x5982;&#x679C;&#x4EE5;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x4E3A;&#x57FA;&#x7840;&#x5B9E;&#x73B0;&#x4E0A;&#x8FF0;5%&#x7684;&#x6D41;&#x91CF;&#x5207;&#x5206;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x67D0;&#x4E9B;&#x624B;&#x6BB5;&#x5C06;&#x6D41;&#x91CF;&#x5207;5%&#x5230;Pod4&#x8FD9;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x90E8;&#x7F72;&#x5355;&#x4F4D;&#xFF0C;&#x5B9E;&#x65BD;&#x65F6;&#x5C31;&#x5FC5;&#x987B;&#x548C;ServiceB&#x7684;&#x5177;&#x4F53;&#x90E8;&#x7F72;&#x8FD8;&#x6709;ServiceA&#x8BBF;&#x95EE;ServiceB&#x7684;&#x7279;&#x5B9A;&#x65B9;&#x5F0F;&#x7D27;&#x5BC6;&#x8054;&#x7CFB;&#x5728;&#x4E00;&#x8D77;. &#x6BD4;&#x5982;&#x5982;&#x679C;&#x4E24;&#x4E2A;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x662F;&#x7528;Nginx&#x505A;&#x53CD;&#x5411;&#x4EE3;&#x7406;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x589E;&#x52A0;Pod4&#x7684;IP&#x4F5C;&#x4E3A;Upstream&#xFF0C;&#x5E76;&#x8C03;&#x6574;Pod1/2/3/4&#x7684;&#x6743;&#x91CD;&#x4EE5;&#x5B9E;&#x73B0;&#x6D41;&#x91CF;&#x5207;&#x5206;&#x3002; </p>
<p> &#x5982;&#x679C;&#x4F7F;&#x7528;Istio&#x7684;&#x6D41;&#x91CF;&#x7BA1;&#x7406;&#x529F;&#x80FD;, &#x7531;&#x4E8E;Envoy&#x7EC4;&#x6210;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x7EDC;&#x5B8C;&#x5168;&#x5728;Istio&#x7684;&#x63A7;&#x5236;&#x4E4B;&#x4E0B;,&#x56E0;&#x6B64;&#x8981;&#x5B9E;&#x73B0;&#x4E0A;&#x8FF0;&#x7684;&#x6D41;&#x91CF;&#x62C6;&#x5206;&#x975E;&#x5E38;&#x7B80;&#x5355;. &#x5047;&#x5B9A;&#x539F;&#x7248;&#x672C;&#x4E3A;1.0&#xFF0C;&#x65B0;&#x7248;&#x672C;&#x4E3A;2.0&#xFF0C;&#x53EA;&#x8981;&#x901A;&#x8FC7;Polit &#x7ED9;Envoy&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x89C4;&#x5219;&#xFF1A;2.0&#x7248;&#x672C;5%&#x6D41;&#x91CF;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x7ED9;1.0&#x3002; </p>
<p> &#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x5173;&#x6CE8;2.0&#x7248;&#x672C;&#x7684;&#x90E8;&#x7F72;&#xFF0C;&#x4E5F;&#x65E0;&#x9700;&#x6539;&#x52A8;&#x4EFB;&#x4F55;&#x6280;&#x672F;&#x8BBE;&#x7F6E;, &#x66F4;&#x4E0D;&#x9700;&#x8981;&#x5728;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x4E2D;&#x4E3A;&#x6B64;&#x63D0;&#x4F9B;&#x4EFB;&#x4F55;&#x914D;&#x7F6E;&#x652F;&#x6301;&#x548C;&#x4EE3;&#x7801;&#x4FEE;&#x6539;&#x3002;&#x4E00;&#x5207;&#x7531; Pilot &#x548C;&#x667A;&#x80FD;Envoy&#x4EE3;&#x7406;&#x641E;&#x5B9A;&#x3002; </p>
<p> &#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x73A9;&#x7684;&#x66F4;&#x70AB;&#x4E00;&#x70B9;, &#x6BD4;&#x5982;&#x6839;&#x636E;&#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5BB9;&#x6765;&#x6E90;&#x5C06;&#x6D41;&#x91CF;&#x53D1;&#x9001;&#x5230;&#x7279;&#x5B9A;&#x7248;&#x672C;&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0dcaa48705e38670ce2cfc53b2e4fd02354d16455e9c2c2bfe68bd29ba7503fb" alt></p>
<p> &#x540E;&#x9762;&#x6211;&#x4EEC;&#x4F1A;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x4ECE;&#x8BF7;&#x6C42;&#x4E2D;&#x63D0;&#x53D6;&#x51FA;User-Agent&#x8FD9;&#x6837;&#x7684;&#x5C5E;&#x6027;&#x6765;&#x914D;&#x5408;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x6D41;&#x91CF;&#x63A7;&#x5236;&#x3002; </p>
<ul>
<li><h3 id="Pilot&#x7684;&#x529F;&#x80FD;&#x6982;&#x8FF0;"><a href="#Pilot&#x7684;&#x529F;&#x80FD;&#x6982;&#x8FF0;" class="headerlink" title="Pilot&#x7684;&#x529F;&#x80FD;&#x6982;&#x8FF0;"></a>Pilot&#x7684;&#x529F;&#x80FD;&#x6982;&#x8FF0;</h3></li>
</ul>
<p> &#x6211;&#x4EEC;&#x5728;&#x524D;&#x9762;&#x6709;&#x5F3A;&#x8C03;&#x8BF4;&#xFF0C;Envoy&#x5728;&#x5176;&#x4E2D;&#x626E;&#x6F14;&#x7684;&#x8D1F;&#x8D23;&#x642C;&#x7816;&#x7684;&#x6C11;&#x5DE5;&#x89D2;&#x8272;&#xFF0C;&#x800C;&#x6307;&#x6325;Envoy&#x5DE5;&#x4F5C;&#x7684;&#x6C11;&#x5DE5;&#x5934;&#x5C31;&#x662F;Pilot&#x6A21;&#x5757;&#x3002; </p>
<p> &#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x5BF9;Pilot&#x7684;&#x529F;&#x80FD;&#x63CF;&#x8FF0;&#xFF1A; </p>
<blockquote>
<p>Pilot&#x8D1F;&#x8D23;&#x6536;&#x96C6;&#x548C;&#x9A8C;&#x8BC1;&#x914D;&#x7F6E;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x64AD;&#x5230;&#x5404;&#x79CD;Istio&#x7EC4;&#x4EF6;&#x3002;&#x5B83;&#x4ECE;Mixer&#x548C;Envoy&#x4E2D;&#x62BD;&#x53D6;&#x73AF;&#x5883;&#x7279;&#x5B9A;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#xFF0C;&#x4E3A;&#x4ED6;&#x4EEC;&#x63D0;&#x4F9B;&#x72EC;&#x7ACB;&#x4E8E;&#x5E95;&#x5C42;&#x5E73;&#x53F0;&#x7684;&#x7528;&#x6237;&#x670D;&#x52A1;&#x7684;&#x62BD;&#x8C61;&#x8868;&#x793A;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6D41;&#x91CF;&#x7BA1;&#x7406;&#x89C4;&#x5219;&#xFF08;&#x5373;&#x901A;&#x7528;4&#x5C42;&#x89C4;&#x5219;&#x548C;7&#x5C42;HTTP/gRPC&#x8DEF;&#x7531;&#x89C4;&#x5219;&#xFF09;&#x53EF;&#x4EE5;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x901A;&#x8FC7;Pilot&#x8FDB;&#x884C;&#x7F16;&#x7A0B;&#x3002; </p>
<p> &#x6BCF;&#x4E2A;Envoy&#x5B9E;&#x4F8B;&#x6839;&#x636E;&#x5176;&#x4ECE;Pilot&#x83B7;&#x5F97;&#x7684;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x5176;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6C60;&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x5B9E;&#x4F8B;&#x7684;&#x5B9A;&#x671F;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#x6765;&#x7EF4;&#x62A4; &#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x4FE1;&#x606F;&#xFF0C;&#x4ECE;&#x800C;&#x5141;&#x8BB8;&#x5176;&#x5728;&#x76EE;&#x6807;&#x5B9E;&#x4F8B;&#x4E4B;&#x95F4;&#x667A;&#x80FD;&#x5206;&#x914D;&#x6D41;&#x91CF;&#xFF0C;&#x540C;&#x65F6;&#x9075;&#x5FAA;&#x5176;&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x7531;&#x89C4;&#x5219;&#x3002; </p>
<p> Pilot&#x8D1F;&#x8D23;&#x5728;Istio&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E2D;&#x90E8;&#x7F72;&#x7684;Envoy&#x5B9E;&#x4F8B;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;</p>
</blockquote>
<ul>
<li><h3 id="Pilot&#x7684;&#x67B6;&#x6784;"><a href="#Pilot&#x7684;&#x67B6;&#x6784;" class="headerlink" title="Pilot&#x7684;&#x67B6;&#x6784;"></a>Pilot&#x7684;&#x67B6;&#x6784;</h3></li>
</ul>
<p> &#x4E0B;&#x56FE;&#x662F;Pilot&#x7684;&#x67B6;&#x6784;&#x56FE;&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6d288b5b838f4c1893d943bb574807a020956ea4f7ed1ccb43e7fa90cd13a29e" alt></p>
<ol>
<li>Envoy API&#x8D1F;&#x8D23;&#x548C;Envoy&#x7684;&#x901A;&#x8BAF;, &#x4E3B;&#x8981;&#x662F;&#x53D1;&#x9001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x4FE1;&#x606F;&#x548C;&#x6D41;&#x91CF;&#x63A7;&#x5236;&#x89C4;&#x5219;&#x7ED9;Envoy</li>
<li>Envoy&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x6C60;&#x548C;&#x8DEF;&#x7531;&#x8868;&#x7684;&#x52A8;&#x6001;&#x66F4;&#x65B0;&#x7684;API&#x3002;&#x8FD9;&#x4E9B;API&#x5C06;Istio&#x548C;Envoy&#x7684;&#x5B9E;&#x73B0;&#x89E3;&#x8026;&#x3002;(&#x53E6;&#x5916;&#xFF0C;&#x4E5F;&#x4F7F;&#x5F97;Linkerd&#x4E4B;&#x7C7B;&#x7684;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x7F51;&#x7EDC;&#x5B9E;&#x73B0;&#x5F97;&#x4EE5;&#x5E73;&#x6ED1;&#x63A5;&#x7BA1;Envoy)</li>
<li>Polit&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x6A21;&#x578B;&#xFF0C;&#x4EE5;&#x4ECE;&#x7279;&#x5B9A;&#x5E73;&#x53F0;&#x7EC6;&#x8282;&#x4E2D;&#x89E3;&#x8026;&#xFF0C;&#x4E3A;&#x8DE8;&#x5E73;&#x53F0;&#x63D0;&#x4F9B;&#x57FA;&#x7840;</li>
<li>Platform Adapter&#x5219;&#x662F;&#x8FD9;&#x4E2A;&#x62BD;&#x8C61;&#x6A21;&#x578B;&#x7684;&#x73B0;&#x5B9E;&#x5B9E;&#x73B0;&#x7248;&#x672C;, &#x7528;&#x4E8E;&#x5BF9;&#x63A5;&#x5916;&#x90E8;&#x7684;&#x4E0D;&#x540C;&#x5E73;&#x53F0;</li>
<li>&#x6700;&#x540E;&#x662F; Rules API&#xFF0C;&#x63D0;&#x4F9B;&#x63A5;&#x53E3;&#x7ED9;&#x5916;&#x90E8;&#x8C03;&#x7528;&#x4EE5;&#x7BA1;&#x7406;Pilot&#xFF0C;&#x5305;&#x62EC;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;Istioctl&#x4EE5;&#x53CA;&#x672A;&#x6765;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x7BA1;&#x7406;&#x754C;&#x9762;</li>
</ol>
<ul>
<li><h3 id="&#x670D;&#x52A1;&#x89C4;&#x8303;&#x548C;&#x5B9E;&#x73B0;"><a href="#&#x670D;&#x52A1;&#x89C4;&#x8303;&#x548C;&#x5B9E;&#x73B0;" class="headerlink" title="&#x670D;&#x52A1;&#x89C4;&#x8303;&#x548C;&#x5B9E;&#x73B0;"></a>&#x670D;&#x52A1;&#x89C4;&#x8303;&#x548C;&#x5B9E;&#x73B0;</h3></li>
</ul>
<p> Pilot&#x67B6;&#x6784;&#x4E2D;, &#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;Abstract Model&#x548C;Platform Adapter&#xFF0C;&#x6211;&#x4EEC;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x3002; </p>
<ul>
<li>Abstract Model&#xFF1A;&#x662F;&#x5BF9;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E2D;&#x201D;&#x670D;&#x52A1;&#x201D;&#x7684;&#x89C4;&#x8303;&#x8868;&#x793A;, &#x5373;&#x5B9A;&#x4E49;&#x5728;istio&#x4E2D;&#x4EC0;&#x4E48;&#x662F;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x4E2A;&#x89C4;&#x8303;&#x72EC;&#x7ACB;&#x4E8E;&#x5E95;&#x5C42;&#x5E73;&#x53F0;&#x3002;</li>
<li>Platform Adapter&#xFF1A;&#x8FD9;&#x91CC;&#x6709;&#x5404;&#x79CD;&#x5E73;&#x53F0;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x76EE;&#x524D;&#x4E3B;&#x8981;&#x662F;Kubernetes&#xFF0C;&#x53E6;&#x5916;&#x6700;&#x65B0;&#x7684;0.2&#x7248;&#x672C;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x51FA;&#x73B0;&#x4E86;Consul&#x548C;Eureka&#x3002;</li>
</ul>
<p> &#x6765;&#x770B;&#x4E00;&#x4E0B;Pilot 0.2&#x7684;&#x4EE3;&#x7801;&#xFF0C;pilot/platform &#x76EE;&#x5F55;&#x4E0B;: </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b589d36dda53600b3e12151f222c55b3b2eadeb442581a2963b2eae4e9a5b3f6" alt></p>
<p> &#x7784;&#x4E00;&#x773C;platform.go&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f97be5bdfbe5dd6062f1234aeabcd1d4491a390a2a70e21f539f413bf9fc9088" alt></p>
<p> &#x670D;&#x52A1;&#x89C4;&#x8303;&#x7684;&#x5B9A;&#x4E49;&#x5728; <code>modle/service.go</code>  &#x4E2D;: </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/dfe78613da6b28bc88c4af20ceccae4a1a25432b0a066d371fad6730dde8be9e" alt></p>
<p> &#x7531;&#x4E8E;&#x7BC7;&#x5E45;&#x6709;&#x9650;&#xFF0C;&#x4EE3;&#x7801;&#x90E8;&#x5206;&#x8FD9;&#x91CC;&#x4E0D;&#x6DF1;&#x5165;, &#x53EA;&#x662F;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4E24;&#x6BB5;&#x4EE3;&#x7801;&#x6765;&#x5C55;&#x793A;Pilot&#x4E2D;&#x5BF9;&#x670D;&#x52A1;&#x7684;&#x89C4;&#x8303;&#x5B9A;&#x4E49;&#x548C;&#x76EE;&#x524D;&#x7684;&#x51E0;&#x4E2A;&#x5B9E;&#x73B0;&#x3002; </p>
<p> &#x6682;&#x65F6;&#x800C;&#x8A00;(&#x5F53;&#x524D;&#x7248;&#x672C;&#x662F;0.1.6, 0.2&#x7248;&#x672C;&#x5C1A;&#x672A;&#x6B63;&#x5F0F;&#x53D1;&#x5E03;)&#xFF0C;&#x76EE;&#x524D; Istio &#x53EA;&#x652F;&#x6301;K8s&#x4E00;&#x79CD;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x673A;&#x5236;&#x3002; </p>
<p> &#x5907;&#x6CE8;: Consul&#x7684;&#x5B9E;&#x73B0;&#x636E;&#x8BF4;&#x4E3B;&#x8981;&#x662F;&#x4E3A;&#x4E86;&#x652F;&#x6301;&#x540E;&#x9762;&#x5C06;&#x8981;&#x652F;&#x6301;&#x7684;Cloud Foundry&#xFF0C;Eureka&#x6CA1;&#x6709;&#x627E;&#x5230;&#x8D44;&#x6599;&#x3002;Etcd3 &#x7684;&#x652F;&#x6301;&#x8FD8;&#x5728;Issue&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x770B;Issue&#x8BB0;&#x5F55;&#x4E89;&#x6267;&#x4E2D;&#x3002; </p>
<ul>
<li><h3 id="Pilot&#x529F;&#x80FD;"><a href="#Pilot&#x529F;&#x80FD;" class="headerlink" title="Pilot&#x529F;&#x80FD;"></a>Pilot&#x529F;&#x80FD;</h3></li>
</ul>
<p> &#x57FA;&#x4E8E;&#x4E0A;&#x8FF0;&#x7684;&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#xFF0C;Pilot&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x91CD;&#x8981;&#x529F;&#x80FD;&#xFF1A; </p>
<ul>
<li>&#x8BF7;&#x6C42;&#x8DEF;&#x7531;</li>
<li>&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</li>
<li>&#x6545;&#x969C;&#x5904;&#x7406;</li>
<li>&#x6545;&#x969C;&#x6CE8;&#x5165;</li>
<li>&#x89C4;&#x5219;&#x914D;&#x7F6E;</li>
</ul>
<p> &#x7531;&#x4E8E;&#x7BC7;&#x5E45;&#x9650;&#x5236;&#xFF0C;&#x4ECA;&#x5929;&#x4E0D;&#x9010;&#x4E2A;&#x5C55;&#x5F00;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x6BCF;&#x4E2A;&#x529F;&#x80FD;&#x7684;&#x8BE6;&#x60C5;&#x3002;&#x5927;&#x5BB6;&#x901A;&#x8FC7;&#x540D;&#x5B57;&#x5C31;&#x5927;&#x6982;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x5982;&#x679C;&#x5E0C;&#x671B;&#x4E86;&#x89E3;&#x8BE6;&#x60C5;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x4E4B;&#x540E;&#x7684;&#x5206;&#x4EAB;&#x3002;&#x6216;&#x8005;&#x67E5;&#x9605;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x7684;&#x4ECB;&#x7ECD;&#x3002; </p>
<p> <strong>Mixer</strong> </p>
<p> Mixer&#x7FFB;&#x8BD1;&#x6210;&#x4E2D;&#x6587;&#x662F;&#x6DF7;&#x97F3;&#x5668;, &#x4E0B;&#x9762;&#x662F;&#x5B83;&#x7684;&#x56FE;&#x6807;&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/810fd9f80a40484360b92cbe0dc23fd15a4473e1e19270c3ca3f9fcfcb4d5757" alt></p>
<p> &#x529F;&#x80FD;&#x6982;&#x62EC;&#xFF1A;Mixer&#x8D1F;&#x8D23;&#x5728;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E0A;&#x6267;&#x884C;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x548C;&#x4F7F;&#x7528;&#x7B56;&#x7565;&#xFF0C;&#x5E76;&#x6536;&#x96C6;Envoy&#x4EE3;&#x7406;&#x548C;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x7684;&#x9065;&#x6D4B;&#x6570;&#x636E;&#x3002; </p>
<ul>
<li><h3 id="Mixer&#x7684;&#x8BBE;&#x8BA1;&#x80CC;&#x666F;"><a href="#Mixer&#x7684;&#x8BBE;&#x8BA1;&#x80CC;&#x666F;" class="headerlink" title="Mixer&#x7684;&#x8BBE;&#x8BA1;&#x80CC;&#x666F;"></a>Mixer&#x7684;&#x8BBE;&#x8BA1;&#x80CC;&#x666F;</h3></li>
</ul>
<p> &#x6211;&#x4EEC;&#x7684;&#x7CFB;&#x7EDF;&#x901A;&#x5E38;&#x4F1A;&#x57FA;&#x4E8E;&#x5927;&#x91CF;&#x7684;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x800C;&#x6784;&#x5EFA;&#xFF0C;&#x8FD9;&#x4E9B;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x7684;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x4E3A;&#x4E1A;&#x52A1;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5404;&#x79CD;&#x652F;&#x6301;&#x529F;&#x80FD;&#x3002;&#x5305;&#x62EC;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x7CFB;&#x7EDF;&#xFF0C;&#x9065;&#x6D4B;&#x6355;&#x83B7;&#x7CFB;&#x7EDF;&#xFF0C;&#x914D;&#x989D;&#x6267;&#x884C;&#x7CFB;&#x7EDF;&#xFF0C;&#x8BA1;&#x8D39;&#x7CFB;&#x7EDF;&#x7B49;&#x3002;&#x5728;&#x4F20;&#x7EDF;&#x8BBE;&#x8BA1;&#x4E2D;, &#x670D;&#x52A1;&#x76F4;&#x63A5;&#x4E0E;&#x8FD9;&#x4E9B;&#x540E;&#x7AEF;&#x7CFB;&#x7EDF;&#x96C6;&#x6210;&#xFF0C;&#x5BB9;&#x6613;&#x4EA7;&#x751F;&#x786C;&#x8026;&#x5408;&#x3002; </p>
<p> &#x5728;Istio&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x548C;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x7684;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86; Mixer &#x4F5C;&#x4E3A;&#x4E24;&#x8005;&#x7684;&#x901A;&#x7528;&#x4E2D;&#x4ECB;&#x5C42;&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2a03c28d5432ba7ce4f68daaf5f8c626111454b97b4853fad3e32b2e2ddda974" alt></p>
<p> Mixer &#x8BBE;&#x8BA1;&#x5C06;&#x7B56;&#x7565;&#x51B3;&#x7B56;&#x4ECE;&#x5E94;&#x7528;&#x5C42;&#x79FB;&#x51FA;&#x5E76;&#x7528;&#x914D;&#x7F6E;&#x66FF;&#x4EE3;&#xFF0C;&#x5E76;&#x5728;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x63A7;&#x5236;&#x4E0B;&#x3002;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4E0D;&#x518D;&#x5C06;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4E0E;&#x7279;&#x5B9A;&#x540E;&#x7AEF;&#x96C6;&#x6210;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x800C;&#x662F;&#x4E0E;Mixer&#x8FDB;&#x884C;&#x76F8;&#x5F53;&#x7B80;&#x5355;&#x7684;&#x96C6;&#x6210;&#xFF0C;&#x7136;&#x540E; Mixer &#x8D1F;&#x8D23;&#x4E0E;&#x540E;&#x7AEF;&#x7CFB;&#x7EDF;&#x8FDE;&#x63A5;&#x3002; </p>
<p> &#x7279;&#x522B;&#x63D0;&#x9192;: Mixer <strong>&#x4E0D;&#x662F;</strong>&#x4E3A;&#x4E86;&#x5728;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x540E;&#x7AEF;&#x4E4B;&#x4E0A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x5C42;&#x6216;&#x8005;&#x53EF;&#x79FB;&#x690D;&#x6027;&#x5C42;&#x3002;&#x4E5F;&#x4E0D;&#x662F;&#x8BD5;&#x56FE;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;Logging API&#xFF0C;&#x901A;&#x7528;&#x7684;Metric API&#xFF0C;&#x901A;&#x7528;&#x7684;&#x8BA1;&#x8D39;API&#x7B49;&#x7B49;&#x3002; </p>
<p> Mixer&#x7684;&#x8BBE;&#x8BA1;&#x76EE;&#x6807;&#x662F;&#x51CF;&#x5C11;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x590D;&#x6742;&#x6027;&#xFF0C; <strong>&#x5C06;&#x7B56;&#x7565;&#x903B;&#x8F91;&#x4ECE;&#x4E1A;&#x52A1;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x4EE3;&#x7801;&#x8F6C;&#x79FB;&#x5230;Mixer&#x4E2D;</strong>, &#x5E76;&#x4E14;&#x6539;&#x4E3A;&#x8BA9;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x63A7;&#x5236;&#x3002; </p>
<ul>
<li><h3 id="Mixer&#x7684;&#x529F;&#x80FD;"><a href="#Mixer&#x7684;&#x529F;&#x80FD;" class="headerlink" title="Mixer&#x7684;&#x529F;&#x80FD;"></a>Mixer&#x7684;&#x529F;&#x80FD;</h3></li>
</ul>
<p> Mixer &#x63D0;&#x4F9B;&#x4E09;&#x4E2A;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#xFF1A; </p>
<ul>
<li><strong>&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x68C0;&#x67E5;</strong>&#x3002;&#x5141;&#x8BB8;&#x670D;&#x52A1;&#x5728;&#x54CD;&#x5E94;&#x6765;&#x81EA;&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x8005;&#x7684;&#x4F20;&#x5165;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#x9A8C;&#x8BC1;&#x4E00;&#x4E9B;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x3002;&#x524D;&#x63D0;&#x6761;&#x4EF6;&#x5305;&#x62EC;&#x8BA4;&#x8BC1;&#xFF0C;&#x9ED1;&#x767D;&#x540D;&#x5355;&#xFF0C;ACL&#x68C0;&#x67E5;&#x7B49;&#x7B49;&#x3002;</li>
<li><strong>&#x914D;&#x989D;&#x7BA1;&#x7406;</strong>&#x3002;&#x4F7F;&#x670D;&#x52A1;&#x80FD;&#x591F;&#x5728;&#x591A;&#x4E2A;&#x7EF4;&#x5EA6;&#x4E0A;&#x5206;&#x914D;&#x548C;&#x91CA;&#x653E;&#x914D;&#x989D;&#x3002;&#x5178;&#x578B;&#x4F8B;&#x5B50;&#x5982;&#x9650;&#x901F;&#x3002;</li>
<li><strong>&#x9065;&#x6D4B;&#x62A5;&#x544A;</strong>&#x3002;&#x4F7F;&#x670D;&#x52A1;&#x80FD;&#x591F;&#x4E0A;&#x62A5;&#x65E5;&#x5FD7;&#x548C;&#x76D1;&#x63A7;&#x3002;</li>
</ul>
<p> &#x5728;Istio&#x5185;&#xFF0C; <strong>Envoy&#x91CD;&#x5EA6;&#x4F9D;&#x8D56;Mixer</strong>&#x3002; </p>
<ul>
<li><h3 id="Mixer&#x7684;&#x9002;&#x914D;&#x5668;"><a href="#Mixer&#x7684;&#x9002;&#x914D;&#x5668;" class="headerlink" title="Mixer&#x7684;&#x9002;&#x914D;&#x5668;"></a>Mixer&#x7684;&#x9002;&#x914D;&#x5668;</h3></li>
</ul>
<p> Mixer&#x662F;&#x9AD8;&#x5EA6;&#x6A21;&#x5757;&#x5316;&#x548C;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x7EC4;&#x4EF6;&#x3002;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x529F;&#x80FD;&#x662F;&#x62BD;&#x8C61;&#x51FA;&#x4E0D;&#x540C;&#x7B56;&#x7565;&#x548C;&#x9065;&#x6D4B;&#x540E;&#x7AEF;&#x7CFB;&#x7EDF;&#x7684;&#x7EC6;&#x8282;&#xFF0C;&#x5141;&#x8BB8;Envoy&#x548C;&#x57FA;&#x4E8E;Istio&#x7684;&#x670D;&#x52A1;&#x4E0E;&#x8FD9;&#x4E9B;&#x540E;&#x7AEF;&#x65E0;&#x5173;&#xFF0C;&#x4ECE;&#x800C;&#x4FDD;&#x6301;&#x4ED6;&#x4EEC;&#x7684;&#x53EF;&#x79FB;&#x690D;&#x3002; </p>
<p> Mixer&#x5728;&#x5904;&#x7406;&#x4E0D;&#x540C;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x540E;&#x7AEF;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x662F;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x901A;&#x7528;&#x63D2;&#x4EF6;&#x6A21;&#x578B;&#x5B9E;&#x73B0;&#x7684;&#x3002;&#x5355;&#x4E2A;&#x7684;&#x63D2;&#x4EF6;&#x88AB;&#x79F0;&#x4E3A;&#x9002;&#x914D;&#x5668;&#xFF0C;&#x5B83;&#x4EEC;&#x5141;&#x8BB8;Mixer&#x4E0E;&#x4E0D;&#x540C;&#x7684;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x540E;&#x7AEF;&#x8FDE;&#x63A5;&#xFF0C;&#x8FD9;&#x4E9B;&#x540E;&#x53F0;&#x53EF;&#x63D0;&#x4F9B;&#x6838;&#x5FC3;&#x529F;&#x80FD;&#xFF0C;&#x4F8B;&#x5982;&#x65E5;&#x5FD7;&#xFF0C;&#x76D1;&#x63A7;&#xFF0C;&#x914D;&#x989D;&#xFF0C;ACL&#x68C0;&#x67E5;&#x7B49;&#x3002;&#x9002;&#x914D;&#x5668;&#x4F7F;Mixer&#x80FD;&#x591F;&#x66B4;&#x9732;&#x4E00;&#x81F4;&#x7684;API&#xFF0C;&#x4E0E;&#x4F7F;&#x7528;&#x7684;&#x540E;&#x7AEF;&#x65E0;&#x5173;&#x3002;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x786E;&#x5B9A;&#x786E;&#x5207;&#x7684;&#x9002;&#x914D;&#x5668;&#x5957;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x6307;&#x5411;&#x65B0;&#x7684;&#x6216;&#x5B9A;&#x5236;&#x7684;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x540E;&#x7AEF;&#x3002; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/406fbd5ac98bce39844306c750bdcbc225f05b77712db8d820a1c1a958075673" alt></p>
<p> &#x8FD9;&#x4E2A;&#x56FE;&#x662F;&#x5B98;&#x7F51;&#x7ED9;&#x7684;&#xFF0C;&#x5217;&#x51FA;&#x7684;&#x529F;&#x80FD;&#x4E0D;&#x591A;&#xFF0C;&#x6211;&#x4ECE;Github&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x6293;&#x4E2A;&#x56FE;&#x7ED9;&#x5927;&#x5BB6;&#x5C55;&#x793A;&#x4E00;&#x4E0B;&#x76EE;&#x524D;&#x5DF2;&#x6709;&#x7684;Mixer Adapter&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/4143c080144ac5525427df2bdef76963af63abfc4de234b3f1732fcde7fa0475" alt></p>
<ul>
<li><h3 id="Mixer&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;"><a href="#Mixer&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;" class="headerlink" title="Mixer&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;"></a>Mixer&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;</h3></li>
</ul>
<p> Istio&#x4F7F;&#x7528; <code>&#x5C5E;&#x6027;</code>  &#x6765;&#x63A7;&#x5236;&#x5728;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x670D;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x884C;&#x4E3A;&#x3002;&#x5C5E;&#x6027;&#x662F;&#x63CF;&#x8FF0;&#x5165;&#x53E3;&#x548C;&#x51FA;&#x53E3;&#x6D41;&#x91CF;&#x7684;&#x6709;&#x540D;&#x79F0;&#x548C;&#x7C7B;&#x578B;&#x7684;&#x5143;&#x6570;&#x636E;&#x7247;&#x6BB5;&#xFF0C;&#x4EE5;&#x53CA;&#x6B64;&#x6D41;&#x91CF;&#x53D1;&#x751F;&#x7684;&#x73AF;&#x5883;&#x3002;Istio&#x5C5E;&#x6027;&#x643A;&#x5E26;&#x7279;&#x5B9A;&#x4FE1;&#x606F;&#x7247;&#x6BB5;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f52a605535c9dabc2274fba9893742df15289aaf40d123b1b562eb97ad905059" alt></p>
<p> &#x8BF7;&#x6C42;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5C5E;&#x6027;&#x7531;Envoy&#x6536;&#x96C6;&#x5E76;&#x53D1;&#x9001;&#x7ED9;Mixer&#xFF0C;Mixer&#x4E2D;&#x6839;&#x636E;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x8BBE;&#x7F6E;&#x7684;&#x914D;&#x7F6E;&#x6765;&#x5904;&#x7406;&#x5C5E;&#x6027;&#x3002;&#x57FA;&#x4E8E;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;Mixer&#x4F1A;&#x4EA7;&#x751F;&#x5BF9;&#x5404;&#x79CD;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x540E;&#x7AEF;&#x7684;&#x8C03;&#x7528;&#x3002; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d01b690edbf3ae9f8b9ed72d6dfb6c92ec9c39d536c0ac8c34f29983ede94be1" alt></p>
<p> Mixer&#x8BBE;&#x8BA1;&#x6709;&#x4E00;&#x5957;&#x5F3A;&#x5927;(&#x4E5F;&#x5F88;&#x590D;&#x6742;, &#x582A;&#x79F0;Istio&#x4E2D;&#x6700;&#x590D;&#x6742;&#x7684;&#x4E00;&#x4E2A;&#x90E8;&#x5206;)&#x7684;&#x914D;&#x7F6E;&#x6A21;&#x578B;&#x6765;&#x914D;&#x7F6E;&#x9002;&#x914D;&#x5668;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#xFF0C;&#x8BBE;&#x8BA1;&#x6709;&#x9002;&#x914D;&#x5668;&#x3001;&#x5207;&#x9762;&#x3001;&#x5C5E;&#x6027;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x9009;&#x62E9;&#x5668;&#x3001;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;manifests &#x7B49;&#x4E00;&#x5806;&#x6982;&#x5FF5;. </p>
<p> &#x7531;&#x4E8E;&#x7BC7;&#x5E45;&#x6240;&#x9650;&#xFF0C;&#x4ECA;&#x5929;&#x4E0D;&#x5C55;&#x5F00;&#x8FD9;&#x5757;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x91CC;&#x7ED9;&#x51FA;&#x4E24;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4F8B;&#x5B50;&#x8BA9;&#x5927;&#x5BB6;&#x5BF9;Mixer&#x7684;&#x914D;&#x7F6E;&#x6709;&#x4E2A;&#x611F;&#x6027;&#x7684;&#x8BA4;&#x8BC6;: </p>
<ol>
<li>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;IP&#x5730;&#x5740;&#x68C0;&#x67E5;&#x7684;Adapter&#xFF0C;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x9ED1;&#x540D;&#x5355;&#x6216;&#x8005;&#x767D;&#x540D;&#x5355;&#x7684;&#x529F;&#x80FD;&#xFF1A; </li>
</ol>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/168fa62ae906c4edec961768798083ca6a730377aa501d4918fe1f9ccc5d03eb" alt><br>2. metrics&#x7684;&#x9002;&#x914D;&#x5668;,&#x5C06;&#x6570;&#x636E;&#x62A5;&#x544A;&#x7ED9;Prometheus&#x7CFB;&#x7EDF; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0b95b0083d6500ade6505966ba54babc3d8e8e724fda97bc97e5e95b19c3264d" alt><br>3. &#x5B9A;&#x4E49;&#x5207;&#x9762;, &#x4F7F;&#x7528;&#x524D;&#x9762;&#x5B9A;&#x4E49;&#x7684; myListChecker &#x8FD9;&#x4E2A;adapter &#x5BF9;&#x5C5E;&#x6027; source.ip &#x8FDB;&#x884C;&#x9ED1;&#x540D;&#x5355;&#x68C0;&#x67E5;&#x3002;</p>
<pre><code>![](https://gitee.com/songjianzaina/juejin_p5/raw/master/img/75d6f093ecd6c993f20cf83da40b994c2ff0851e52459423c72986daf2ed07ef)</code></pre><p> <strong>Istio-Auth</strong>  </p>
<p> Istio-Auth&#x63D0;&#x4F9B;&#x5F3A;&#x5927;&#x7684;&#x670D;&#x52A1;&#x5230;&#x670D;&#x52A1;&#x548C;&#x7EC8;&#x7AEF;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#xFF0C;&#x4F7F;&#x7528;&#x4EA4;&#x4E92;TLS&#xFF0C;&#x5185;&#x7F6E;&#x8EAB;&#x4EFD;&#x548C;&#x51ED;&#x636E;&#x7BA1;&#x7406;&#x3002;&#x5B83;&#x53EF;&#x7528;&#x4E8E;&#x5347;&#x7EA7;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x4E2D;&#x7684;&#x672A;&#x52A0;&#x5BC6;&#x6D41;&#x91CF;&#xFF0C;&#x5E76;&#x4E3A;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x63D0;&#x4F9B;&#x57FA;&#x4E8E;&#x670D;&#x52A1;&#x8EAB;&#x4EFD;&#x800C;&#x4E0D;&#x662F;&#x7F51;&#x7EDC;&#x63A7;&#x5236;&#x5B9E;&#x65BD;&#x7B56;&#x7565;&#x7684;&#x80FD;&#x529B;&#x3002; </p>
<p> Istio&#x7684;&#x672A;&#x6765;&#x7248;&#x672C;&#x5C06;&#x589E;&#x52A0;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x548C;&#x5BA1;&#x8BA1;&#xFF0C;&#x4EE5;&#x4F7F;&#x7528;&#x5404;&#x79CD;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x673A;&#x5236;&#xFF08;&#x5305;&#x62EC;&#x57FA;&#x4E8E;&#x5C5E;&#x6027;&#x548C;&#x89D2;&#x8272;&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x4EE5;&#x53CA;&#x6388;&#x6743;&#x94A9;&#x5B50;&#xFF09;&#x6765;&#x63A7;&#x5236;&#x548C;&#x76D1;&#x89C6;&#x8BBF;&#x95EE;&#x60A8;&#x7684;&#x670D;&#x52A1;&#xFF0C;API&#x6216;&#x8D44;&#x6E90;&#x7684;&#x4EBA;&#x5458;&#x3002; </p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3c4f8df6918a73b09b776c3061159e54ccd0c795a3f8d391dbf295c36c8fe47c" alt></p>
<ul>
<li><h3 id="Auth&#x7684;&#x67B6;&#x6784;"><a href="#Auth&#x7684;&#x67B6;&#x6784;" class="headerlink" title="Auth&#x7684;&#x67B6;&#x6784;"></a>Auth&#x7684;&#x67B6;&#x6784;</h3></li>
</ul>
<p> &#x4E0B;&#x56FE;&#x5C55;&#x793A;Istio Auth&#x67B6;&#x6784;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x4E09;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF1A;&#x8EAB;&#x4EFD;&#xFF0C;&#x5BC6;&#x94A5;&#x7BA1;&#x7406;&#x548C;&#x901A;&#x4FE1;&#x5B89;&#x5168;&#x3002; </p>
<p> &#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;, &#x670D;&#x52A1;A&#x4EE5;&#x670D;&#x52A1;&#x5E10;&#x6237;&#x201C;foo&#x201D;&#x8FD0;&#x884C;, &#x670D;&#x52A1;B&#x4EE5;&#x670D;&#x52A1;&#x5E10;&#x6237;&#x201C;bar&#x201D;&#x8FD0;&#x884C;, &#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x8BAF;&#x539F;&#x6765;&#x662F;&#x6CA1;&#x6709;&#x52A0;&#x5BC6;&#x7684;. &#x4F46;&#x662F;Istio&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x4EE3;&#x7801;&#x7684;&#x60C5;&#x51B5;, &#x4F9D;&#x6258;Envoy&#x5F62;&#x6210;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;, &#x76F4;&#x63A5;&#x5728;&#x5BA2;&#x6237;&#x7AEF;Envoy&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;Envoy&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#x52A0;&#x5BC6;&#x3002; </p>
<p> &#x76EE;&#x524D;&#x5728;Kubernetes&#x4E0A;&#x8FD0;&#x884C;&#x7684; Istio&#xFF0C;&#x4F7F;&#x7528;Kubernetes service account/&#x670D;&#x52A1;&#x5E10;&#x6237;&#x6765;&#x8BC6;&#x522B;&#x8FD0;&#x884C;&#x8BE5;&#x670D;&#x52A1;&#x7684;&#x4EBA;&#x5458;&#x3002; </p>
<ul>
<li><h3 id="&#x672A;&#x6765;&#x5C06;&#x63A8;&#x51FA;&#x7684;&#x529F;&#x80FD;"><a href="#&#x672A;&#x6765;&#x5C06;&#x63A8;&#x51FA;&#x7684;&#x529F;&#x80FD;" class="headerlink" title="&#x672A;&#x6765;&#x5C06;&#x63A8;&#x51FA;&#x7684;&#x529F;&#x80FD;"></a>&#x672A;&#x6765;&#x5C06;&#x63A8;&#x51FA;&#x7684;&#x529F;&#x80FD;</h3></li>
</ul>
<p> Auth&#x5728;&#x76EE;&#x524D;&#x7684;Istio&#x7248;&#x672C;(0.1.6&#x548C;&#x5373;&#x5C06;&#x53D1;&#x5E03;&#x7684;0.2)&#x4E2D;&#xFF0C;&#x529F;&#x80FD;&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x5168;&#xFF0C;&#x672A;&#x6765;&#x5219;&#x89C4;&#x5212;&#x6709;&#x975E;&#x5E38;&#x591A;&#x7684;&#x7279;&#x6027;&#xFF1A; </p>
<ul>
<li>&#x7EC6;&#x7C92;&#x5EA6;&#x6388;&#x6743;&#x548C;&#x5BA1;&#x6838;</li>
<li>&#x5B89;&#x5168;Istio&#x7EC4;&#x4EF6;&#xFF08;Mixer, Pilot&#x7B49;&#xFF09;</li>
<li>&#x96C6;&#x7FA4;&#x95F4;&#x670D;&#x52A1;&#x5230;&#x670D;&#x52A1;&#x8BA4;&#x8BC1;</li>
<li>&#x4F7F;&#x7528;JWT/OAuth2/OpenID_Connect&#x7EC8;&#x7AEF;&#x5230;&#x670D;&#x52A1;&#x7684;&#x8BA4;&#x8BC1;</li>
<li>&#x652F;&#x6301;GCP&#x670D;&#x52A1;&#x5E10;&#x6237;&#x548C;AWS&#x670D;&#x52A1;&#x5E10;&#x6237;</li>
<li>&#x975E;http&#x6D41;&#x91CF;&#xFF08;MySql&#xFF0C;Redis&#x7B49;&#xFF09;&#x652F;&#x6301;</li>
<li>Unix&#x57DF;&#x5957;&#x63A5;&#x5B57;&#xFF0C;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x548C;Envoy&#x4E4B;&#x95F4;&#x7684;&#x672C;&#x5730;&#x901A;&#x4FE1;</li>
<li>&#x4E2D;&#x95F4;&#x4EE3;&#x7406;&#x652F;&#x6301;</li>
<li>&#x53EF;&#x63D2;&#x62D4;&#x5BC6;&#x94A5;&#x7BA1;&#x7406;&#x7EC4;&#x4EF6;</li>
</ul>
<p> &#x9700;&#x8981;&#x63D0;&#x9192;&#x7684;&#x662F;&#xFF1A;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x90FD;&#x662F;&#x4E0D;&#x6539;&#x52A8;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x4EE3;&#x7801;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x5B9E;&#x73B0;&#x7684;&#x3002; </p>
<p> &#x56DE;&#x5230;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x7684;&#x66FE;&#x7ECF;&#x8BA8;&#x8BBA;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x81EA;&#x5DF1;&#x6765;&#x505A;&#xFF0C;&#x5B8C;&#x6210;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x5927;&#x5BB6;&#x89C9;&#x5F97;&#x9700;&#x8981;&#x591A;&#x5C11;&#x5DE5;&#x4F5C;&#x91CF;&#xFF1F;&#x8981;&#x628A;&#x6240;&#x6709;&#x7684;&#x4E1A;&#x52A1;&#x6A21;&#x5757;&#x90FD;&#x8FC1;&#x79FB;&#x5230;&#x5177;&#x5907;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x7684;&#x6846;&#x67B6;&#x548C;&#x4F53;&#x7CFB;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x6539;&#x52A8;&#x591A;&#x5C11;&#xFF1F;&#x800C;Istio&#xFF0C;&#x672A;&#x6765;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x5C06;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x6446;&#x4E0A;&#x6211;&#x4EEC;&#x7684;&#x9910;&#x684C;&#x3002; </p>
<p> &#x672A;&#x6765; </p>
<p>  &#x524D;&#x9762;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86;Istio&#x7684;&#x57FA;&#x672C;&#x60C5;&#x51B5;&#xFF0C;&#x8FD8;&#x6709;Istio&#x7684;&#x67B6;&#x6784;&#x548C;&#x4E3B;&#x8981;&#x7EC4;&#x4EF6;&#x3002;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5BF9;Istio&#x5E94;&#x8BE5;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x521D;&#x6B65;&#x7684;&#x8BA4;&#x8BC6;&#x3002; </p>
<p> &#x9700;&#x8981;&#x63D0;&#x9192;&#x7684;&#x662F;&#xFF0C;Istio&#x662F;&#x4E00;&#x4E2A;&#x4ECA;&#x5E74;5&#x6708;&#x624D;&#x53D1;&#x5E03; 0.1.0 &#x7248;&#x672C;&#x7684;&#x65B0;&#x9C9C;&#x51FA;&#x7089;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x76EE;&#x524D;&#x8BE5;&#x9879;&#x76EE;&#x4E5F;&#x624D;&#x53D1;&#x5E03;&#x5230;0.1.6&#x6B63;&#x5F0F;&#x7248;&#x672C;&#x548C; 0.2.2 pre release&#x7248;&#x672C;. &#x5F88;&#x591A;&#x5730;&#x65B9;&#x8FD8;&#x4E0D;&#x5B8C;&#x5584;&#xFF0C;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#xFF0C;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;&#x6700;&#x65E9;&#x671F;&#x9636;&#x6BB5;&#x7684;Kubernetes&#x3002; </p>
<p> &#x5728;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;Istio&#x540E;&#x9762;&#x7684;&#x4E00;&#x4E9B;&#x5F00;&#x53D1;&#x8BA1;&#x5212;&#x548C;&#x53D1;&#x5C55;&#x9884;&#x671F;&#x3002; </p>
<p><strong>&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x652F;&#x6301;</strong><br> Istio&#x76EE;&#x524D;&#x53EA;&#x652F;&#x6301;Kubernetes, &#x8FD9;&#x662F;&#x4EE4;&#x4EBA;&#x6BD4;&#x8F83;&#x9057;&#x61BE;&#x7684;&#x4E00;&#x70B9;. &#x4E0D;&#x8FC7; istio &#x7ED9;&#x51FA;&#x7684;&#x89E3;&#x91CA;&#x662F;istio&#x672A;&#x6765;&#x4F1A;&#x652F;&#x6301;&#x5728;&#x5404;&#x79CD;&#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;&#xFF0C;&#x53EA;&#x662F;&#x76EE;&#x524D;&#x5728; 0.1/0.2 &#x8FD9;&#x6837;&#x7684;&#x521D;&#x59CB;&#x9636;&#x6BB5;&#x6682;&#x65F6;&#x4E13;&#x6CE8;&#x4E8E;Kubernetes&#xFF0C;&#x4F46;&#x5F88;&#x5FEB;&#x4F1A;&#x652F;&#x6301;&#x5176;&#x4ED6;&#x73AF;&#x5883;&#x3002; </p>
<p> &#x6CE8;&#x610F;: Kubernetes&#x5E73;&#x53F0;&#xFF0C;&#x9664;&#x4E86;&#x539F;&#x751F;Kubernetes, &#x8FD8;&#x6709;&#x8BF8;&#x5982; IBM Bluemix Container Service&#x548C;RedHat OpenShift&#x8FD9;&#x6837;&#x7684;&#x5546;&#x4E1A;&#x5E73;&#x53F0;&#x3002; &#x4EE5;&#x53CA;google&#x81EA;&#x5BB6;&#x7684; Google Container Engine&#x3002;&#x8FD9;&#x662F;&#x81EA;&#x5BB6;&#x7684;&#x4E1C;&#x897F;, &#x800C;&#x4E14;&#x73B0;&#x5728;k8s/istio/gRPC&#x90FD;&#x5DF2;&#x7ECF;&#x88AB;&#x5212;&#x5F52;&#x5230; Google cloud platform&#x90E8;&#x95E8;, &#x81EA;&#x7136;&#x4F1A;&#x4F18;&#x5148;&#x652F;&#x6301;. </p>
<p> &#x53E6;&#x5916;isito&#x6240;&#x8BF4;&#x7684;&#x5176;&#x4ED6;&#x73AF;&#x5883;&#x6307;&#x7684;&#x662F;: </p>
<ul>
<li>Mesos: &#x8FD9;&#x4E2A;&#x4F30;&#x8BA1;&#x662F;&#x5927;&#x591A;&#x4EBA;&#x975E;K8s&#x7684;Docker&#x4F7F;&#x7528;&#x8005;&#x6700;&#x5173;&#x5FC3;&#x7684;&#x4E86;, &#x6682;&#x65F6;&#x4ECE;Github&#x4E0A;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x672A;&#x89C1;&#x5230;&#x6709;&#x5F00;&#x5DE5;&#x8FF9;&#x8C61;, &#x4F46;&#x662F;Istio&#x7684;&#x6587;&#x6863;&#x548C;&#x5B98;&#x65B9;&#x58F0;&#x660E;&#x90FD;&#x660E;&#x663E;&#x8BF4;&#x4F1A;&#x652F;&#x6301;, &#x4F30;&#x8BA1;&#x8FD8;&#x662F;&#x5E0C;&#x671B;&#x5F88;&#x5927;&#x7684;.</li>
<li>Cloud foundry: &#x8FD9;&#x4E2A;&#x4E1C;&#x4E1C;&#x6211;&#x4EEC;&#x56FD;&#x5185;&#x9664;&#x4E86;&#x79C1;&#x6709;&#x4E91;&#x5916;&#x73A9;&#x7684;&#x4E0D;&#x591A;, Istio&#x5BF9;&#x5B83;&#x7684;&#x652F;&#x6301;&#x4F3C;&#x4E4E;&#x5DF2;&#x7ECF;&#x542F;&#x52A8;. &#x6BD4;&#x5982;&#x6211;&#x770B;&#x5230;&#x4EE3;&#x7801;&#x4E2D;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;Consul&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x7684;&#x652F;&#x6301;, &#x4ECE;Issue&#x8BA8;&#x8BBA;&#x4E0A;&#x770B;&#x5230;&#x662F;&#x8BF4;&#x4E3A;&#x4E0A;Cloud foundry&#x505A;&#x51C6;&#x5907;, &#x56E0;&#x4E3A;Cloud foundry&#x6CA1;&#x6709;k8s&#x90A3;&#x6837;&#x7684;&#x539F;&#x751F;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x673A;&#x5236;&#x3002;</li>
<li>VM: &#x8FD9;&#x5757;&#x6CA1;&#x6709;&#x770B;&#x5230;&#x4ECB;&#x7ECD;, &#x4F46;&#x662F;&#x6709;&#x770B;&#x5230;Istio&#x7684;&#x8BA8;&#x8BBA;&#x4E2D;&#x63D0;&#x5230;&#x4F1A;&#x652F;&#x6301;&#x5BB9;&#x5668;&#x548C;&#x975E;&#x5BB9;&#x5668;&#x7684;&#x6DF7;&#x5408;(Hybrid)&#x652F;&#x6301;</li>
</ul>
<p> &#x503C;&#x5F97;&#x7279;&#x522B;&#x6307;&#x51FA;&#x7684;&#x662F;&#xFF0C;&#x76EE;&#x524D;&#x6211;&#x8FD8;&#x6CA1;&#x6709;&#x770B;&#x5230;Istio&#x6709;&#x5BF9;Docker&#x5BB6;&#x7684;Swarm&#x6709;&#x652F;&#x6301;&#x7684;&#x8BA1;&#x5212;&#x6216;&#x8005;&#x8BA8;&#x8BBA;, &#x76EE;&#x524D;&#x6211;&#x627E;&#x5230;&#x7684;&#x4EFB;&#x4F55;Istio&#x7684;&#x8D44;&#x6599;&#x4E2D;&#x90FD;&#x4E0D;&#x5B58;&#x5728;Swarm&#x8FD9;&#x4E2A;&#x4E1C;&#x4E1C;&#x3002;&#x6211;&#x53EA;&#x80FD;&#x4E0D;&#x8D1F;&#x8D23;&#x4EFB;&#x7684;&#x89E3;&#x8BFB;&#x4E3A;&#xFF1A;&#x6709;&#x4EBA;&#x7684;&#x5730;&#x65B9;&#x5C31;&#x6709;&#x6C5F;&#x6E56;&#xFF0C;&#x6709;&#x6C5F;&#x6E56;&#x5C31;&#x81EA;&#x7136;&#x4F1A;&#x6709;&#x6C5F;&#x6E56;&#x6069;&#x6028;&#x3002; </p>
<p><strong>&#x8DEF;&#x7EBF;&#x56FE;</strong><br> &#x6309;&#x7167;Istio&#x7684;&#x8BF4;&#x6CD5;&#xFF0C;&#x4ED6;&#x4EEC;&#x8BA1;&#x5212;&#x6BCF;3&#x4E2A;&#x6708;&#x53D1;&#x5E03;&#x4E00;&#x6B21;&#x65B0;&#x7248;&#x672C;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B;&#x76EE;&#x524D;&#x5F97;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x4FE1;&#x606F;&#xFF1A; </p>
<ul>
<li>0.1 &#x7248;&#x672C;2017&#x5E74;5&#x6708;&#x53D1;&#x5E03;,&#x53EA;&#x652F;&#x6301;Kubernetes</li>
<li>0.2 &#x5373;&#x5C06;&#x53D1;&#x5E03;,&#x5F53;&#x524D;&#x662F;0.2.1 pre-release, &#x4E5F;&#x53EA;&#x652F;&#x6301;Kubernetes</li>
<li>0.3 roadmap&#x4E0A;&#x8BF4;&#x8981;&#x652F;&#x6301;k8s&#x4E4B;&#x5916;&#x7684;&#x5E73;&#x53F0;, &#x201C;Support for Istio meshes without Kubernetes.&#x201D;, &#x4F46;&#x662F;&#x5177;&#x4F53;&#x54EA;&#x4E9B;&#x7279;&#x6027;&#x4F1A;&#x653E;&#x5728;0.3&#x4E2D;,&#x8FD8;&#x5728;&#x8BA8;&#x8BBA;&#x4E2D;</li>
<li>1.0 &#x7248;&#x672C;&#x9884;&#x8BA1;&#x4ECA;&#x5E74;&#x5E74;&#x5E95;&#x53D1;&#x5E03;</li>
</ul>
<p> &#x6CE8;: 1.0&#x7248;&#x672C;&#x7684;&#x53D1;&#x5E03;&#x65F6;&#x95F4;&#x5B98;&#x65B9;&#x6CA1;&#x6709;&#x660E;&#x786E;&#x7ED9;&#x51FA;&#xFF0C;&#x6211;&#x53EA;&#x662F;&#x770B;&#x5230;&#x5B98;&#x7F51;&#x8D44;&#x6599;&#x91CC;&#x9762;&#x6709;&#x4FE1;&#x606F;&#x900F;&#x9732;&#x5982;&#x4E0B;: </p>
<blockquote>
<p>&#x201C;we invite the community to join us in shaping the project as we work toward a 1.0 release later this year.&#x201D;</p>
</blockquote>
<p> &#x6309;&#x7167;&#x4E0A;&#x9762;&#x7ED9;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x7B80;&#x5355;&#x63A8;&#x7B97;&#xFF1A;&#x5E94;&#x8BE5;&#x662F;9&#x6708;&#x53D1;0.2, &#x7136;&#x540E;12&#x6708;&#x53D1;0.3, &#x4F46;&#x662F;&#x8FD9;&#x5C31;&#x5DF2;&#x7ECF;&#x662F;&#x5E74;&#x5E95;&#x4E86;, &#x6240;&#x4EE5;&#x4E0D;&#x6392;&#x9664;1.0&#x63A8;&#x8FDF;&#x53D1;&#x5E03;&#x7684;&#x53EF;&#x80FD;&#xFF0C;&#x6216;&#x8005;0.3&#x76F4;&#x63A5;&#x5F53;&#x6210; 1.0 &#x53D1;&#x5E03;&#x3002; </p>
<p><strong>&#x793E;&#x533A;&#x652F;&#x6301;</strong><br> &#x867D;&#x7136;Istio&#x521D;&#x51FA;&#x6C5F;&#x6E56;&#xFF0C;&#x4E73;&#x81ED;&#x672A;&#x5E72;&#xFF0C;&#x4F46;&#x662F;&#x51ED;&#x501F;google&#x548C;IBM&#x7684;&#x91D1;&#x5B57;&#x62DB;&#x724C;&#xFF0C;&#x8FD8;&#x6709;Istio&#x524D;&#x536B;&#x800C;&#x5B9E;&#x9645;&#x7684;&#x8BBE;&#x8BA1;&#x7406;&#x5FF5;&#xFF0C;&#x76EE;&#x524D;&#x5DF2;&#x7ECF;&#x6709;&#x5F88;&#x591A;&#x516C;&#x53F8;&#x5728;&#x5F00;&#x59CB;&#x63D0;&#x4F9B;&#x5BF9;Istio&#x7684;&#x652F;&#x6301;&#x6216;&#x8005;&#x96C6;&#x6210;&#xFF0C;&#x8FD9;&#x662F;Istio&#x5B98;&#x65B9;&#x9875;&#x9762;&#x6709;&#x8BB0;&#x8F7D;&#x7684;&#xFF1A; </p>
<ul>
<li>Red Hat&#xFF1A;Openshift and OpenShift Application Runtimes</li>
<li>Pivotal&#xFF1A;Cloud Foundry</li>
<li>Weaveworks&#xFF1A;Weave Cloud and Weave Net 2.0</li>
<li>Tigera&#xFF1A;Project Calico Network Policy Engine</li>
<li>Datawire&#xFF1A;Ambassador project</li>
</ul>
<p> &#x7136;&#x540E;&#x4E00;&#x4E9B;&#x5176;&#x4ED6;&#x5916;&#x56F4;&#x652F;&#x6301;, &#x4ECE;&#x4EE3;&#x7801;&#x4E2D;&#x770B;&#x5230;&#x7684;: </p>
<ul>
<li>eureka</li>
<li>consul</li>
<li>etcd v3: &#x8FD9;&#x4E2A;&#x8FD8;&#x5728;&#x4E89;&#x6267;&#x4E2D;,&#x4F5C;&#x4E3A;etcd&#x7684;&#x575A;&#x5B9A;&#x62E5;&#x62A4;&#x8005;, &#x6211;&#x5BF9;&#x6B64;&#x4FDD;&#x6301;&#x5BC6;&#x5207;&#x5173;&#x6CE8;</li>
</ul>
<p><strong>&#x5B58;&#x5728;&#x95EE;&#x9898;</strong><br> Istio&#x6BD5;&#x7ADF;&#x76EE;&#x524D;&#x624D;&#x662F;0.2.2 pre release&#x7248;&#x672C;&#xFF0C;&#x6BD5;&#x7ADF;&#x624D;&#x51FA;&#x6765;&#x56DB;&#x4E2A;&#x6708;&#xFF0C;&#x56E0;&#x6B64;&#x8FD8;&#x662F;&#x5B58;&#x5728;&#x5927;&#x91CF;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x96C6;&#x4E2D;&#x8868;&#x73B0;&#x4E3A;&#xFF1A; </p>
<ol>
<li>&#x53EA;&#x652F;&#x6301;k8s&#xFF0C;&#x800C;&#x4E14;&#x8981;&#x6C42;k8s 1.7.4+&#xFF0C;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;&#x5230;k8s&#x7684; CustomResourceDefinitions</li>
<li>&#x6027;&#x80FD;&#x8F83;&#x4F4E;&#xFF0C;&#x4ECE;&#x76EE;&#x524D;&#x7684;&#x6D4B;&#x8BD5;&#x60C5;&#x51B5;&#x770B;&#xFF0C;0.1&#x7248;&#x672C;&#x5F88;&#x7CDF;&#x7CD5;&#xFF0C;0.2&#x7248;&#x672C;&#x6709;&#x6539;&#x5584;</li>
<li>&#x5F88;&#x591A;&#x529F;&#x80FD;&#x5C1A;&#x672A;&#x5B8C;&#x6210;</li>
</ol>
<p> &#x7ED9;&#x5927;&#x5BB6;&#x7684;&#x5EFA;&#x8BAE;&#xFF1A;&#x53EF;&#x4EE5;&#x5BC6;&#x5207;&#x5173;&#x6CE8;Istio&#x7684;&#x52A8;&#x5411;&#xFF0C;&#x63D0;&#x524D;&#x505A;&#x597D;&#x6280;&#x672F;&#x50A8;&#x5907;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x6700;&#x8D77;&#x7801;&#x5728;&#x5E74;&#x5E95;&#x7684;1.0&#x7248;&#x672C;&#x51FA;&#x6765;&#x4E4B;&#x524D;&#xFF0C;&#x522B;&#x6025;&#x7740;&#x4E0A;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x3002; </p>
<p><strong>&#x63A8;&#x8350;&#x9605;&#x8BFB;</strong> </p>
<ul>
<li><a href="/external_links/db2e50595301a237035b7b200955b9a7.html" target="blank" rel="noopener">Service<br>Mesh&#xFF1A;&#x4E0B;&#x4E00;&#x4EE3;&#x5FAE;&#x670D;&#x52A1;&#xFF1F;</a></li>
</ul>
<hr>
<ul>
<li><a href="/external_links/c10352d49b29b3825233ab15e968a72d.html" target="blank" rel="noopener">&#x963F;&#x91CC;Dubbo&#x75AF;&#x72C2;&#x66F4;&#x65B0;&#xFF0C;&#x5173;Spring<br>Cloud&#x4EC0;&#x4E48;<br>&#x4E8B;&#xFF1F;</a></li>
</ul>
<hr>
<ul>
<li><a href="/external_links/f96df52ba71f155bc20aafbbbe46f7f8.html" target="blank" rel="noopener">&#x4ECE;&#x67B6;&#x6784;&#x6F14;&#x8FDB;&#x7684;&#x89D2;&#x5EA6;&#x804A;&#x804A;Spring<br>Cloud&#x90FD;&#x505A;&#x4E86;&#x4E9B;&#x4EC0;&#x4E48;<br>&#xFF1F;</a></li>
</ul>
<hr>
<ul>
<li><a href="/external_links/db1b7ddb99dcbf546f0d362f48c4c9e4.html" target="blank" rel="noopener">&#x5FAE;&#x670D;&#x52A1;&#xFF08;Microservice&#xFF09;&#x90A3;<br>&#x70B9;&#x4E8B;</a></li>
</ul>
<hr>
<ul>
<li><h2 id="&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x7684;&#x7406;&#x8BBA;&#x57FA;&#x7840;"><a href="#&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x7684;&#x7406;&#x8BBA;&#x57FA;&#x7840;" class="headerlink" title="[&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x7684;&#x7406;&#x8BBA;&#x57FA;&#x7840;"></a>[&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x7684;&#x7406;&#x8BBA;&#x57FA;&#x7840;</h2>&#x5EB7;&#x5A01;&#x5B9A;&#x5F8B;](<a href="/external_links/b9ed4846f84ed652ceb9afd08c63b860.html" target="blank" rel="noopener">http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484170&amp;idx=1&amp;sn=5f93458d66937fe27fcdea575097a5ef&amp;chksm=ebf6db75dc81526387e5b325cfb821821f1d8d247d00778616b0ee2dcac316909c5a9e16f2c2&amp;scene=21#wechat_redirect</a>)</li>
</ul>
<hr>
<ul>
<li><p>[&#x5FAE;&#x670D;&#x52A1;-<br>Martin </p>
<p>Fowler](<a href="/external_links/364d852f373644275358bcaca5afc7f4.html" target="blank" rel="noopener">http://mp.weixin.qq.com/s?__biz=MzI4NDY5Mjc1Mg==&amp;mid=2247484107&amp;idx=1&amp;sn=d5bbd6c3d3dad950ca12e06b13b5dc78&amp;chksm=ebf6dab4dc8153a2eb9910f52beb581b489b7c5a1054bc3a9c2aea3d0d88dc729113bc2afe3b&amp;scene=21#wechat_redirect</a>)</p>
</li>
</ul>
<hr>
<p><strong>&#x6D3B;&#x52A8;&#x63A8;&#x8350;</strong><br> &#x6D3B;&#x52A8;&#x63A8;&#x8350;&#xFF1A;12&#x6708;16&#x65E5;&#xFF0C;&#x6570;&#x4EBA;&#x4E91;&#x5C06;&#x5728;&#x5317;&#x4EAC;&#x4E3E;&#x529E;&#x300A;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF1A;ServiceMesh is coming&#x300B;&#x4E13;&#x573A;Meetup&#xFF0C;&#x5C0F;&#x5251;&#x8001;&#x5E08;&#x6B64;&#x6B21;&#x5C06;&#x4F1A;&#x5E26;&#x6765;&#x300A;&#x5C71;&#x96E8;&#x6B32;&#x6765;&#x98CE;&#x6EE1;&#x697C;&#xFF1A;ServiceMesh&#x65F6;&#x4EE3;&#x7684;&#x9009;&#x8FB9;&#x4E0E;&#x7AD9;&#x961F;&#x300B;&#x7684;&#x65B0;&#x6F14;&#x8BB2;&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x89E3;&#x8BFB;ServiceMesh&#x53D1;&#x5C55;&#x8D8B;&#x52BF; &#x70B9;&#x51FB;&#x9605;&#x8BFB;&#x539F;&#x6587;&#xFF0C;&#x5373;&#x53EF;&#x62A5;&#x540D;&#x53C2;&#x4E0E;&#x672C;&#x6B21;&#x6D3B;&#x52A8;<del>&#x73B0;&#x573A;&#x66F4;&#x6709;TalkingData&#x3001;&#x5F53;&#x5F53;&#x3001;&#x5FAE;&#x535A;&#x6280;&#x672F;&#x5927;&#x5496;&#x5206;&#x4EAB;&#x5173;&#x4E8E;Kubernetes&#x3001;&#x4E91;&#x539F;&#x751F;&#x3001;ServiceMesh&#x843D;&#x5730;&#x5B9E;&#x8DF5;&#x7684;&#x7CBE;&#x5F69;&#x6F14;&#x8BB2;</del> </p>
<h4 id="&#x1F447;&#x6233;&#x9605;&#x8BFB;&#x539F;&#x6587;-&#xFF0C;&#x5373;&#x53EF;&#x514D;&#x8D39;&#x62A5;&#x540D;&#x3002;"><a href="#&#x1F447;&#x6233;&#x9605;&#x8BFB;&#x539F;&#x6587;-&#xFF0C;&#x5373;&#x53EF;&#x514D;&#x8D39;&#x62A5;&#x540D;&#x3002;" class="headerlink" title="&#x1F447;&#x6233;&#x9605;&#x8BFB;&#x539F;&#x6587; &#xFF0C;&#x5373;&#x53EF;&#x514D;&#x8D39;&#x62A5;&#x540D;&#x3002;"></a>&#x1F447;&#x6233;&#x9605;&#x8BFB;&#x539F;&#x6587; &#xFF0C;&#x5373;&#x53EF;&#x514D;&#x8D39;&#x62A5;&#x540D;&#x3002;</h4><p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/2caf07799861151cd4544362ebc9349b.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513995083789.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513995083789.html" itemprop="url">线程条件队列ConditionObject源码解读</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-26T15:17:15+08:00">
                2017-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>&#x5C0F;&#x8BB0;</strong><br> &#x597D;&#x4E45;&#x6CA1;&#x66F4;&#x535A;&#xFF0C;&#x7A97;&#x5916;&#x5149;&#x8292;&#x4E07;&#x4E08;&#xFF0C;&#x51AC;&#x65E5;&#x7684;&#x665A;&#x6668;&#xFF0C;&#x591A;&#x4E48;&#x7F8E;&#x597D;&#xFF0C;&#x5C31;&#x4E0D;&#x6D6A;&#x8D39;&#x4E86;&#xFF0C;&#x5FAA;&#x7740;&#x952E;&#x76D8;&#x4E0A;&#x7684;&#x70B9;&#x70B9;&#x661F;&#x8FB0;&#xFF0C;&#x5F00;&#x5DE5;&#xFF01;</p>
</blockquote>
<h4 id="&#x5565;&#x5B50;&#x662F;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF1F;"><a href="#&#x5565;&#x5B50;&#x662F;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF1F;" class="headerlink" title="&#x5565;&#x5B50;&#x662F;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF1F;"></a><strong>&#x5565;&#x5B50;&#x662F;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF1F;</strong></h4><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5728;&#x4E07;&#x7C7B;&#x4E4B;&#x7956;Object&#x91CC;&#x9762;&#x5B9A;&#x4E49;&#x4E86;&#x51E0;&#x4E2A;&#x76D1;&#x89C6;&#x5668;&#x65B9;&#x6CD5;&#xFF1A;wait()&#xFF0C;notify<br> ()&#xFF0C;notifyAll()&#xFF0C;&#x914D;&#x5408;synchronized&#x8BED;&#x4E49;&#x6765;&#x63A7;&#x5236;&#x7EBF;&#x7A0B;&#x7684;&#x4E00;&#x4E9B;&#x72B6;&#x6001;&#xFF0C;&#x5728;JDK1.5&#x4E4B;&#x540E;&#xFF0C;&#x7531;Lock&#x66FF;&#x4EE3;&#x4E86;synchronized&#xFF0C;&#x800C;&#x8FD9;&#x51E0;&#x4E2A;&#x76D1;&#x89C6;&#x5668;&#x7531;&#x6761;&#x4EF6;&#x961F;&#x5217;Condition&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x67D0;&#x4E2A;&#x72B6;&#x6001;&#x6761;&#x4EF6;&#x73B0;&#x5728;&#x53EF;&#x80FD;&#x4E3A; true &#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x901A;&#x77E5;&#x5B83;&#x4E4B;&#x524D;&#xFF0C;&#x4E00;&#x76F4;&#x6302;&#x8D77;&#x8BE5;&#x7EBF;&#x7A0B;&#xFF08;&#x5373;&#x8BA9;&#x5176;&#x201C;&#x7B49;&#x5F85;&#x201D;&#xFF09;&#xFF0C;&#x4EE5;&#x539F;&#x5B50;&#x7684;&#x65B9;&#x5F0F;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x5E76;&#x6302;&#x8D77;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53EB;&#x5B83;&#x4E3A;<code>&#x7EBF;&#x7A0B;&#x7684;&#x6761;&#x4EF6;&#x961F;&#x5217;</code>(&#x81EA;&#x521B;&#x7684;)&#x3002;</p>
<h4 id="&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x793A;&#x4F8B;"><a href="#&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x793A;&#x4F8B;" class="headerlink" title="&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x793A;&#x4F8B;"></a><strong>&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x793A;&#x4F8B;</strong></h4><p>&#x5728;&#x4EE5;&#x524D;&#x521A;&#x5B66;&#x4E60;Java&#x7684;&#x65F6;&#x5019;&#x5199;&#x8FC7;&#x4E00;&#x4E2A;&#x9898;&#xFF0C;&#x9898;&#x5E72;&#x5927;&#x6982;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x5F00;&#x542F;&#x4E09;&#x4E2A;&#x7EBF;&#x7A0B;&#x4F9D;&#x6B21;&#x8F6E;&#x6D41;&#x6253;&#x5370;&#x51FA;75&#x4E2A;&#x6570;&#xFF0C;&#x4E14;&#x6B21;&#x5E8F;&#x4E0D;&#x80FD;&#x4E71;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import java.util.concurrent.locks.Condition;</span><br><span class="line">import java.util.concurrent.locks.Lock;</span><br><span class="line">import java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line">public class CountTo_75 {</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        final Box box = new Box();</span><br><span class="line"></span><br><span class="line">        new Thread(new Runnable() { // &#x7EBF;&#x7A0B;1</span><br><span class="line">            @Override</span><br><span class="line">            public void run() {</span><br><span class="line">                for (int i = 1; i &lt;= 5; i++) {</span><br><span class="line">                    box.main_1();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        },&quot;Thread-1&quot;).start();</span><br><span class="line">        new Thread(new Runnable() { // &#x7EBF;&#x7A0B;2</span><br><span class="line">            @Override</span><br><span class="line">            public void run() {</span><br><span class="line">                for (int i = 1; i &lt;= 5; i++) {</span><br><span class="line">                    box.main_2();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        },&quot;Thread-2&quot;).start();</span><br><span class="line">        new Thread(new Runnable() { // &#x7EBF;&#x7A0B;3</span><br><span class="line">            @Override</span><br><span class="line">            public void run() {</span><br><span class="line">                for (int i = 1; i &lt;= 5; i++) {</span><br><span class="line">                    box.main_3();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        },&quot;Thread-3&quot;).start();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    static class Box {</span><br><span class="line">        Lock lock = new ReentrantLock();</span><br><span class="line">        Condition condition_1 = lock.newCondition();</span><br><span class="line">        Condition condition_2 = lock.newCondition();</span><br><span class="line">        Condition condition_3 = lock.newCondition();</span><br><span class="line">        private volatile int flag = 1;</span><br><span class="line">        public static int count = 0;   //&#x7528;&#x4E8E;&#x8BA1;&#x6570;&#x7684;&#x53D8;&#x91CF;</span><br><span class="line"></span><br><span class="line">        public void main_1() {</span><br><span class="line">            lock.lock();</span><br><span class="line">            try {</span><br><span class="line">                while(flag != 1){</span><br><span class="line">                    try {</span><br><span class="line">                        condition_1.await();</span><br><span class="line">                    } catch (InterruptedException e) {</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                for (int j = 0; j &lt; 5; j++) {</span><br><span class="line">                    count++;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() +&quot; &quot;+ count);</span><br><span class="line">                }</span><br><span class="line">                flag = 2;</span><br><span class="line">                condition_2.signal();</span><br><span class="line">            } finally {</span><br><span class="line">                lock.unlock();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        public void main_2() {</span><br><span class="line">            lock.lock();</span><br><span class="line">            try {</span><br><span class="line">                while(flag != 2){</span><br><span class="line">                    try {</span><br><span class="line">                        condition_2.await();</span><br><span class="line">                    } catch (InterruptedException e) {</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                for (int j = 0; j &lt; 5; j++) {</span><br><span class="line">                    count++;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() +&quot; &quot; + count);</span><br><span class="line">                }</span><br><span class="line">                flag = 3;</span><br><span class="line">                condition_3.signal();</span><br><span class="line">            } finally {</span><br><span class="line">                lock.unlock();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        public void main_3() {</span><br><span class="line">            lock.lock();</span><br><span class="line">            try {</span><br><span class="line">                while(flag != 3){</span><br><span class="line">                    try {</span><br><span class="line">                        condition_3.await();</span><br><span class="line">                    } catch (InterruptedException e) {</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                for (int j = 0; j &lt; 5; j++) {</span><br><span class="line">                    count++;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + &quot; &quot; + count);</span><br><span class="line">                }</span><br><span class="line">                flag = 1;</span><br><span class="line">                condition_1.signal();</span><br><span class="line">            } finally {</span><br><span class="line">                lock.unlock();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x629B;&#x5F00;&#x5F53;&#x65F6;&#x6DF7;&#x4E71;&#x7684;&#x903B;&#x8F91;&#x548C;&#x6027;&#x80FD;&#x8003;&#x8651;&#x4E0D;&#x8DB3;&#x4E0D;&#x8C08;&#xFF0C;&#x8FD9;&#x6BB5;&#x4E11;&#x964B;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x7EC8;&#x5F52;&#x662F;&#x5B9E;&#x73B0;&#x4E86;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x8FD0;&#x7528;&#x4E86;Lock&#x548C;Condition&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x7528;&#x5728;&#x8FD9;&#x91CC;&#x6765;&#x8BF4;&#x660E;Condition&#x7684;&#x8BED;&#x4E49;&#x518D;&#x597D;&#x4E0D;&#x8FC7;&#x4E86;&#x3002;&#x4EE3;&#x7801;&#x4E2D;&#x521D;&#x59CB;&#x5316;&#x4E86;3&#x4E2A;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF0C;&#x5206;&#x522B;&#x6765;&#x63A7;&#x5236;3&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x6302;&#x8D77;&#x72B6;&#x6001;&#xFF0C;flag&#x53D8;&#x91CF;&#x5219;&#x63A7;&#x5236;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x3002;</p>
<h4 id="&#x4E0E;Lock&#x4E4B;&#x95F4;&#x7684;&#x5B9E;&#x73B0;&#x5173;&#x7CFB;"><a href="#&#x4E0E;Lock&#x4E4B;&#x95F4;&#x7684;&#x5B9E;&#x73B0;&#x5173;&#x7CFB;" class="headerlink" title="&#x4E0E;Lock&#x4E4B;&#x95F4;&#x7684;&#x5B9E;&#x73B0;&#x5173;&#x7CFB;"></a><strong>&#x4E0E;Lock&#x4E4B;&#x95F4;&#x7684;&#x5B9E;&#x73B0;&#x5173;&#x7CFB;</strong></h4><p>Condition&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5176;&#x5B9E;&#x73B0;&#x7C7B;&#x53EA;&#x6709;&#x4E24;&#x4E2A;&#xFF1A;AQS&#x548C;AQLS&#xFF0C;&#x90FD;&#x4EE5;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x5F62;&#x5F0F;&#x5B58;&#x5728;&#xFF0C;&#x5185;&#x90E8;&#x7C7B;&#x53EB;&#x505A;ConditionObject&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x70B9;&#x7EB3;&#x95F7;&#xFF0C;&#x65E2;&#x7136;&#x8FD9;&#x4E2A;&#x7C7B;&#x662F;&#x4E3A;Lock&#x4E13;&#x5C5E;&#x5B9A;&#x5236;&#x7684;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x5728;ReentrantLock&#x91CC;&#x9762;&#x6765;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;&#x653E;&#x5728;AQS&#x4E0D;&#x4F1A;&#x592A;&#x81C3;&#x80BF;&#x5417;&#xFF1F;&#x4E0D;&#x77E5;&#x9053;Doug Lea&#x4E0A;&#x795E;&#x5F53;&#x65F6;&#x662F;&#x600E;&#x4E48;&#x8003;&#x8651;&#x7684;&#x3002; &#x7531;&#x4E8E;&#x5728;AQS&#x4E2D;&#x5DF2;&#x7ECF;&#x5B9E;&#x73B0;&#xFF0C;&#x56E0;&#x6B64;&#x5728;ReentrantLock&#x91CC;&#x9762;&#x5BF9;&#x5176;&#x64CD;&#x4F5C;&#x4E5F;&#x662F;&#x5F88;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x961F;&#x5217;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    public Condition newCondition() {</span><br><span class="line">        return sync.newCondition();</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>sync&#x4E2D;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    abstract static class Sync extends AbstractQueuedSynchronizer {</span><br><span class="line">        private static final long serialVersionUID = -5179523762034025860L;</span><br><span class="line">        final ConditionObject newCondition() {</span><br><span class="line">            return new ConditionObject();</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x7B80;&#x5355;&#x5427;&#xFF1F;&#x5475;&#x5475;&#xFF0C;&#x4E0B;&#x9762;&#x6765;&#x770B;ConditionObject</p>
<h4 id="ConditionObject&#x5B9E;&#x73B0;"><a href="#ConditionObject&#x5B9E;&#x73B0;" class="headerlink" title="ConditionObject&#x5B9E;&#x73B0;"></a><strong>ConditionObject&#x5B9E;&#x73B0;</strong></h4><p>&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x4E86;&#x4E24;&#x4E2A;&#x6838;&#x5FC3;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x6761;&#x4EF6;&#x961F;&#x5217;&#x7684;&#x5934;&#x8282;&#x70B9;&#x548C;&#x5C3E;&#x8282;&#x70B9;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;/** First node of condition queue. */</span><br><span class="line">private transient Node firstWaiter;</span><br><span class="line"></span><br><span class="line">/** Last node of condition queue. */</span><br><span class="line">private transient Node lastWaiter;</span><br></pre></td></tr></table></figure>

<h5 id="1&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;await-&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;&#x7B49;&#x5F85;&#x5B9E;&#x73B0;"><a href="#1&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;await-&#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;&#x7B49;&#x5F85;&#x5B9E;&#x73B0;" class="headerlink" title="1&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;await() &#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;&#x7B49;&#x5F85;&#x5B9E;&#x73B0;"></a><strong>1&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;await() &#x4E0D;&#x53EF;&#x4E2D;&#x65AD;&#x7684;&#x6761;&#x4EF6;&#x7B49;&#x5F85;&#x5B9E;&#x73B0;</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public final void await() throws InterruptedException {</span><br><span class="line">     //&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;&#x5219;&#x629B;&#x5F02;&#x5E38;</span><br><span class="line">     if (Thread.interrupted()) throw new InterruptedException();</span><br><span class="line">     //&#x6DFB;&#x52A0;&#x8FDB;&#x6761;&#x4EF6;&#x961F;&#x5217;</span><br><span class="line">     Node node = addConditionWaiter();</span><br><span class="line">     //&#x91CA;&#x653E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6301;&#x6709;&#x7684;&#x9501;</span><br><span class="line">     int savedState = fullyRelease(node);</span><br><span class="line">     int interruptMode = 0;</span><br><span class="line">     //&#x5728;&#x8FD9;&#x91CC;&#x4E00;&#x76F4;&#x67E5;&#x627E;&#x521B;&#x5EFA;&#x7684;Node&#x8282;&#x70B9;&#x5728;&#x4E0D;&#x5728;Sync&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x5728;&#x5C31;&#x4E00;&#x76F4;&#x7981;&#x7528;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;</span><br><span class="line">     while (!isOnSyncQueue(node)) {</span><br><span class="line">         //park&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#xFF0C;&#x76F4;&#x5230;&#x5524;&#x9192;</span><br><span class="line">         LockSupport.park(this);</span><br><span class="line">         //&#x5982;&#x88AB;&#x4E2D;&#x65AD;&#x4E5F;&#x8DF3;&#x51FA;&#x5FAA;&#x73AF;</span><br><span class="line">         if ((interruptMode = checkInterruptWhileWaiting(node)) != 0) </span><br><span class="line">         break;</span><br><span class="line">     }</span><br><span class="line">     //&#x6B64;&#x65F6;&#x5DF2;&#x88AB;&#x5524;&#x9192;&#xFF0C;&#x83B7;&#x53D6;&#x4E4B;&#x524D;&#x88AB;&#x91CA;&#x653E;&#x7684;&#x9501;&#xFF0C;</span><br><span class="line">     if (acquireQueued(node, savedState) &amp;&amp; interruptMode != THROW_IE)   </span><br><span class="line">       interruptMode = REINTERRUPT;</span><br><span class="line">     //&#x79FB;&#x9664;&#x8282;&#x70B9;&#xFF0C;&#x91CA;&#x653E;&#x5185;&#x5B58;</span><br><span class="line">     if (node.nextWaiter != null) // clean up if cancelled</span><br><span class="line">       unlinkCancelledWaiters();</span><br><span class="line">     //&#x88AB;&#x4E2D;&#x65AD;&#x540E;&#x7684;&#x64CD;&#x4F5C;</span><br><span class="line">     if (interruptMode != 0)</span><br><span class="line">       reportInterruptAfterWait(interruptMode);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7B80;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;await()&#x65B9;&#x6CD5;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E3A;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Node&#x8282;&#x70B9;&#xFF0C;&#x52A0;&#x5165;&#x5230;Condition&#x961F;&#x5217;&#x5E76;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x4E4B;&#x540E;&#x5C31;&#x4E00;&#x76F4;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x662F;&#x5426;&#x5728;Sync&#x961F;&#x5217;&#x4E2D;&#x4E86;(signal()&#x65B9;&#x6CD5;&#x5C06;&#x5B83;&#x79FB;&#x5230;Sync&#x961F;&#x5217;)&#xFF0C;&#x5982;&#x679C;&#x5728;&#x7684;&#x8BDD;&#x5C31;&#x5524;&#x9192;&#x6B64;&#x7EBF;&#x7A0B;&#xFF0C;&#x91CD;&#x65B0;&#x83B7;&#x53D6;&#x9501;&#x3002;&#x6B64;&#x5916;&#xFF0C;awaitNanos(long nanosTimeout) &#x65B9;&#x6CD5;&#x548C;await(long time, TimeUnit unit) &#x65B9;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x5927;&#x540C;&#x5C0F;&#x5F02;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x4F55;&#x65F6;&#x8DF3;&#x51FA;while&#x5FAA;&#x73AF;&#x7684;&#x65F6;&#x5019;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x8D85;&#x65F6;&#x7F62;&#x4E86;&#x3002; &#x53E6;&#x5916;&#x8FD8;&#x6709;&#x51E0;&#x4E2A;&#x76F8;&#x5173;&#x7684;&#x65B9;&#x6CD5;&#x4E5F;&#x770B;&#x4E00;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> *  &#x6DFB;&#x52A0;&#x4E00;&#x4E2A;Node&#x8282;&#x70B9;&#x5230;Condition&#x961F;&#x5217;&#x4E2D;</span><br><span class="line"> */</span><br><span class="line">private Node addConditionWaiter() {</span><br><span class="line">  Node t = lastWaiter;</span><br><span class="line">  //&#x5982;&#x679C;&#x5C3E;&#x8282;&#x70B9;&#x88AB;&#x53D6;&#x6D88;&#xFF0C;&#x5C31;&#x6E05;&#x7406;&#x6389;</span><br><span class="line">  if (t != null &amp;&amp; t.waitStatus != Node.CONDITION) {</span><br><span class="line">      unlinkCancelledWaiters();</span><br><span class="line">      t = lastWaiter;</span><br><span class="line">  }</span><br><span class="line">  //&#x65B0;&#x5EFA;&#x72B6;&#x6001;&#x4E3A;&#x7684;CONDITION&#x8282;&#x70B9;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x5728;&#x5C3E;&#x90E8;</span><br><span class="line">  Node node = new Node(Thread.currentThread(), Node.CONDITION);</span><br><span class="line">  if (t == null)</span><br><span class="line">      firstWaiter = node;</span><br><span class="line">  else</span><br><span class="line">      t.nextWaiter = node;</span><br><span class="line">  lastWaiter = node;</span><br><span class="line">  return node;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    /**</span><br><span class="line">     *  &#x91CA;&#x653E;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;state&#xFF0C;&#x5B9E;&#x9645;&#x8FD8;&#x662F;&#x8C03;&#x7528;tryRelease&#x65B9;&#x6CD5;</span><br><span class="line">     */</span><br><span class="line">   final int fullyRelease(Node node) {</span><br><span class="line">       boolean failed = true;</span><br><span class="line">       try {</span><br><span class="line">           int savedState = getState();</span><br><span class="line">           if (release(savedState)) {</span><br><span class="line">               failed = false;</span><br><span class="line">               return savedState;</span><br><span class="line">           } else {</span><br><span class="line">               throw new IllegalMonitorStateException();</span><br><span class="line">           }</span><br><span class="line">       } finally {</span><br><span class="line">           if (failed)</span><br><span class="line">               node.waitStatus = Node.CANCELLED;</span><br><span class="line">       }</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    /**</span><br><span class="line">     *  &#x68C0;&#x67E5;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x5728;&#x4E0D;&#x5728;Sync&#x961F;&#x5217;</span><br><span class="line">     */</span><br><span class="line">   final boolean isOnSyncQueue(Node node) {</span><br><span class="line">       //&#x5982;&#x679C;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x72B6;&#x6001;&#x4E3A;CONDITION&#xFF0C;&#x4E00;&#x5B9A;&#x8FD8;&#x5728;Condition&#x961F;&#x5217;</span><br><span class="line">       //&#x5982;&#x679C;Sync&#x961F;&#x5217;&#x7684;&#x524D;&#x7F6E;&#x8282;&#x70B9;&#x4E3A;null&#xFF0C;&#x5219;&#x8868;&#x660E;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x4E00;&#x5B9A;&#x8FD8;&#x5728;Condition&#x961F;&#x5217;</span><br><span class="line">       if (node.waitStatus == Node.CONDITION || node.prev == null)</span><br><span class="line">           return false;</span><br><span class="line">       //&#x6709;&#x540E;&#x7EE7;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x6709;&#x524D;&#x7F6E;&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x5728;Sync&#x961F;&#x5217;</span><br><span class="line">       if (node.next != null) // If has successor, it must be on queue</span><br><span class="line">           return true;</span><br><span class="line"></span><br><span class="line">       //&#x5012;&#x67E5;Node&#x8282;&#x70B9;&#xFF0C;&#x524D;&#x7F6E;&#x8282;&#x70B9;&#x4E0D;&#x80FD;&#x4E3A;null&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;if&#x5DF2;&#x7ECF;&#x505A;&#x4E86;&#x5224;&#x65AD;&#xFF0C;&#x5176;&#x524D;&#x7F6E;&#x8282;&#x70B9;&#x4E3A;non-null,&#x4F46;&#x662F;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x4E5F;&#x4E0D;&#x5728;Sync&#x4E5F;&#x662F;&#x53EF;&#x80FD;&#x7684;,&#x56E0;&#x4E3A;CAS&#x64CD;&#x4F5C;&#x5C06;&#x5176;&#x52A0;&#x5165;&#x961F;&#x5217;&#x4E5F;&#x53EF;&#x80FD;&#x5931;&#x8D25;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4ECE;&#x5C3E;&#x90E8;&#x5F00;&#x59CB;&#x904D;&#x5386;&#x786E;&#x4FDD;&#x5176;&#x5728;&#x961F;&#x5217;</span><br><span class="line">       return findNodeFromTail(node);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<h5 id="2&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signal-&#x5C06;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;&#x7EBF;&#x7A0B;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#x4ECE;Condition&#x961F;&#x5217;&#x4E2D;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;"><a href="#2&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signal-&#x5C06;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;&#x7EBF;&#x7A0B;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#x4ECE;Condition&#x961F;&#x5217;&#x4E2D;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;" class="headerlink" title="2&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signal() &#x5C06;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;&#x7EBF;&#x7A0B;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#x4ECE;Condition&#x961F;&#x5217;&#x4E2D;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;"></a><strong>2&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signal() &#x5C06;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;&#x7EBF;&#x7A0B;&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#x4ECE;Condition&#x961F;&#x5217;&#x4E2D;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;   public final void signal() {</span><br><span class="line">       //&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x975E;&#x72EC;&#x5360;&#x7EBF;&#x7A0B;&#xFF0C;&#x62A5;&#x975E;&#x6CD5;&#x76D1;&#x89C6;&#x5668;&#x72B6;&#x6001;&#x5F02;&#x5E38;</span><br><span class="line">       if (!isHeldExclusively())</span><br><span class="line">           throw new IllegalMonitorStateException();</span><br><span class="line">       //&#x5934;&#x8282;&#x70B9;&#x662F;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x6700;&#x957F;&#x7684;&#x8282;&#x70B9;</span><br><span class="line">       Node first = firstWaiter;</span><br><span class="line">       if (first != null)</span><br><span class="line">           doSignal(first);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;   private void doSignal(Node first) {</span><br><span class="line">         do {</span><br><span class="line">             //&#x5982;&#x679C;&#x5934;&#x8282;&#x70B9;&#x7684;&#x4E0B;&#x4E00;&#x8282;&#x70B9;&#x4E3A;null&#xFF0C;&#x5219;&#x5C06;Condition&#x7684;lastWaiter&#x7F6E;&#x4E3A;null</span><br><span class="line">             if ( (firstWaiter = first.nextWaiter) == null)</span><br><span class="line">                 lastWaiter = null;</span><br><span class="line">             //&#x5C06;&#x5934;&#x7ED3;&#x70B9;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x8BBE;&#x4E3A;null</span><br><span class="line">             first.nextWaiter = null;</span><br><span class="line">             //&#x88AB;&#x5524;&#x9192;&#x5E76;&#x4E14;&#x5934;&#x8282;&#x70B9;&#x4E0D;&#x4E3A;null&#x5219;&#x7ED3;&#x675F;&#x5FAA;&#x73AF;</span><br><span class="line">         } while (!transferForSignal(first) &amp;&amp;</span><br><span class="line">                  (first = firstWaiter) != null);</span><br><span class="line">     }</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;   final boolean transferForSignal(Node node) {</span><br><span class="line">       //&#x5982;&#x679C;&#x65E0;&#x6CD5;&#x6539;&#x53D8;&#x8282;&#x70B9;&#x72B6;&#x6001;&#xFF0C;&#x8BF4;&#x660E;&#x8282;&#x70B9;&#x5DF2;&#x7ECF;&#x88AB;&#x5524;&#x9192;</span><br><span class="line">       if (!compareAndSetWaitStatus(node, Node.CONDITION, 0))</span><br><span class="line">           return false;</span><br><span class="line">       //&#x5C06;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x6DFB;&#x52A0;&#x5230;Sync&#x961F;&#x5217;&#x5C3E;&#x90E8;&#xFF0C;&#x5E76;&#x8BBE;&#x7F6E;&#x524D;&#x7F6E;&#x8282;&#x70B9;&#x7684;waitStatus&#x4E3A;SIGNAL&#xFF0C;&#x8868;&#x660E;&#x540E;&#x7EE7;&#x6709;&#x8282;&#x70B9;&#xFF08;&#x53EF;&#x80FD;&#xFF09;&#x5C06;&#x88AB;&#x5524;&#x9192;&#xFF0C;&#x5982;&#x679C;&#x53D6;&#x6D88;&#x6216;&#x8005;&#x8BBE;&#x7F6E;waitStatus&#x5931;&#x8D25;&#xFF0C;&#x4F1A;&#x5524;&#x9192;&#x91CD;&#x65B0;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;waitStatus&#x662F;&#x77AC;&#x65F6;&#x7684;&#xFF0C;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#x4E5F;&#x662F;&#x65E0;&#x59A8;&#x7684;</span><br><span class="line">       Node p = enq(node);</span><br><span class="line">       int ws = p.waitStatus;</span><br><span class="line">       if (ws &gt; 0 || !compareAndSetWaitStatus(p, ws, Node.SIGNAL))</span><br><span class="line">           LockSupport.unpark(node.thread);</span><br><span class="line">       return true;</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<h5 id="3&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signalAll-&#x5C06;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x4ECE;Condition&#x961F;&#x5217;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;&#x4E2D;&#x3002;"><a href="#3&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signalAll-&#x5C06;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x4ECE;Condition&#x961F;&#x5217;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;&#x4E2D;&#x3002;" class="headerlink" title="3&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signalAll() &#x5C06;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x4ECE;Condition&#x961F;&#x5217;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;&#x4E2D;&#x3002;"></a><strong>3&#x3001;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#xFF1A;signalAll() &#x5C06;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x4ECE;Condition&#x961F;&#x5217;&#x79FB;&#x52A8;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;&#x4E2D;&#x3002;</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;   public final void signalAll() {</span><br><span class="line">       if (!isHeldExclusively())</span><br><span class="line">           throw new IllegalMonitorStateException();</span><br><span class="line">       Node first = firstWaiter;</span><br><span class="line">       if (first != null)</span><br><span class="line">           doSignalAll(first);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;    /**</span><br><span class="line">     * &#x904D;&#x5386;&#x6240;&#x6709;&#x8282;&#x70B9;&#xFF0C;&#x52A0;&#x5165;&#x5230;&#x62E5;&#x6709;&#x9501;&#x7684;Sync&#x961F;&#x5217;</span><br><span class="line">     */</span><br><span class="line">   private void doSignalAll(Node first) {</span><br><span class="line">       lastWaiter = firstWaiter = null;</span><br><span class="line">       do {</span><br><span class="line">           Node next = first.nextWaiter;</span><br><span class="line">           first.nextWaiter = null;</span><br><span class="line">           transferForSignal(first);</span><br><span class="line">           first = next;</span><br><span class="line">       } while (first != null);</span><br><span class="line">   }</span><br></pre></td></tr></table></figure>

<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c54cf338adc1ccb6d62cf912159dd2f4.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513986695182.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513986695182.html" itemprop="url">一个朋友圈泛型问题引发的“案子”</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-26T13:11:24+08:00">
                2017-11-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x6628;&#x5929;&#x670B;&#x53CB;&#x5708;&#x95EE;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;<br>&#x5BF9;&#x4E8E;&#x4E0B;&#x9762;&#x7684;list&#xFF0C;&#x4F55;&#x5982;&#x5728;list&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;Integer&#x578B;&#x6574;&#x6570;&#xFF1F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();</span><br></pre></td></tr></table></figure>

<p>&#x6709;&#x8FD9;&#x6837;&#x51E0;&#x79CD;&#x56DE;&#x7B54;&#xFF1A;</p>
<ul>
<li>1.&#x4E0D;&#x77E5;&#x9053;&#xFF08;&#x975E;&#x4E13;&#x4E1A;&#x56DE;&#x7B54;&#xFF09;</li>
<li>2.&#x786C;&#x585E;&#xFF08;&#x975E;&#x4E13;&#x4E1A;&#x56DE;&#x7B54;&#xFF09;</li>
<li>3.&#x628A;String &#x6539;&#x6210;Integer&#x518D;&#x6DFB;&#x52A0;&#xFF08;&#x8FDD;&#x80CC;&#x4E86;&#x95EE;&#x9898;&#x521D;&#x8877;&#xFF09;</li>
<li>4.&#x628A;String&#x6539;&#x6210;Object&#xFF0C;&#x53EF;&#x4EE5;&#x52A0;&#x4EFB;&#x610F;&#x7C7B;&#x578B;&#xFF08;&#x8FDD;&#x80CC;&#x4E86;&#x95EE;&#x9898;&#x521D;&#x8877;&#xFF09;</li>
<li>5.String&#x6362;&#x6210;&#x901A;&#x914D;&#x7B26;</li>
<li>6.&#x53CD;&#x5C04;</li>
</ul>
<p>&#x5BF9;&#x4E8E;1&#x3001;2&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x5C5E;&#x4E8E;&#x641E;&#x4E8B;&#x60C5;&#x7684;&#xFF01;3&#x3001;4&#x3001;5&#x4E09;&#x79CD;&#x65B9;&#x5F0F;&#x8FDD;&#x80CC;&#x4E86;&#x95EE;&#x9898;&#x7684;&#x521D;&#x8877;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x6539;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x76F4;&#x63A5;new&#x4E09;&#x4E2A;ArrayList&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;6&#x53CD;&#x5C04;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x65E0;&#x9650;&#x63A5;&#x8FD1;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x548C;&#x53CD;&#x5C04;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#x5462;&#xFF1F;&#x4E0B;&#x6765;&#x770B;&#x4E0B;&#x4E0B;&#x9762;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public static void main(String[] args) {</span><br><span class="line"></span><br><span class="line">        ArrayList list=new ArrayList();</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; str_list=new ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Integer&gt; int_list=new ArrayList&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Object&gt; obj_list=new ArrayList&lt;Object&gt;();</span><br><span class="line">        //&#x5BF9;&#x8C61;&#x6BD4;&#x8F83;</span><br><span class="line">        System.out.println(list == str_list);</span><br><span class="line">        System.out.println(list == int_list);</span><br><span class="line">        System.out.println(list == obj_list);</span><br><span class="line"></span><br><span class="line">        //&#x5BF9;&#x8C61;&#x7684;&#x8FD0;&#x884C;&#x65F6;class&#x6BD4;&#x8F83;</span><br><span class="line">        System.out.println(list.getClass() == str_list.getClass());</span><br><span class="line">        System.out.println(list.getClass() == int_list.getClass());</span><br><span class="line">        System.out.println(list.getClass() == obj_list.getClass());</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x7ED3;&#x679C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;false</span><br><span class="line">false</span><br><span class="line">false</span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x5B9E;&#x4E0A;&#x9762;&#x4E09;&#x4E2A;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x4E0D;&#x540C;&#x5BF9;&#x8C61;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5730;&#x5740;&#x80AF;&#x5B9A;&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x5747;&#x4E3A;false;&#x4E0B;&#x9762;&#x4E09;&#x4E2A;&#x5747;&#x4E3A;true?&#x662F;&#x7684;&#xFF0C;&#x786E;&#x5B9E;&#x4E3A;true,&#x8FD9;&#x5C31;&#x5F15;&#x51FA;&#x4E86;&#x670B;&#x53CB;&#x5708;&#x7684;&#x90A3;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x540C;&#x7684;&#x4E09;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;getClass&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x4E0D;&#x5E94;&#x8BE5;&#x662F;&#x6709;&#x4E09;&#x4E2A;&#x4E0D;&#x540C;&#x7684;hashCode&#x5417;&#xFF1F;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x5C31;&#x662F;<strong>&#x6CDB;&#x578B;&#x7F16;&#x8BD1;&#x65F6;&#x548C;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x95EE;&#x9898;</strong>&#x3002;<br>&#x5BF9;&#x4E8E;&#x6CDB;&#x578B;&#x6765;&#x8BF4;&#xFF0C;<strong>&#x6CDB;&#x578B;&#x53EA;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x6709;&#x6548;&#xFF0C;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#xFF0C;&#x96C6;&#x5408;&#x7684;&#x6CDB;&#x578B;&#x662F;&#x53BB;&#x6CDB;&#x578B;&#x5316;&#x7684;&#xFF1B;&#x539F;&#x56E0;&#xFF1A;&#x7531;&#x4E8E;JVM&#x6CDB;&#x578B;&#x7684;&#x64E6;&#x9664;&#x673A;&#x5236;&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x65F6;JVM&#x662F;&#x4E0D;&#x77E5;&#x9053;&#x6CDB;&#x578B;&#x4FE1;&#x606F;&#x7684;</strong>&#x3002;<br>&#x56E0;&#x6B64;&#xFF1A;java&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6CDB;&#x578B;&#xFF0C;&#x662F;&#x6765;&#x7EA6;&#x675F;&#x7528;&#x6237;&#x7684;&#x9519;&#x8BEF;&#x8F93;&#x5165;&#x7684;&#xFF0C;&#x53EA;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x6709;&#x6548;&#xFF1B;<br>&#x5728;&#x56DE;&#x5230;&#x95EE;&#x9898;&#x6700;&#x521D;&#xFF0C;&#x6211;&#x4EEC;&#x600E;&#x4E48;&#x624D;&#x80FD;&#x5C06;&#x4E00;&#x4E2A;Integer&#x5BF9;&#x50CF;&#x653E;&#x5165;&#x4E0A;&#x9762;&#x5B9A;&#x4E49;&#x7684;list&#x4E2D;&#x5462;&#xFF1F;&#x65E2;&#x7136;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6CDB;&#x578B;&#x662F;&#x7F16;&#x8BD1;&#x65F6;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x90A3;&#x6211;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x7ED5;&#x8FC7;&#x7F16;&#x8BD1;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x7ED5;&#x8FC7;&#x7F16;&#x8BD1;&#x65F6;&#x7684;&#x6821;&#x9A8C;&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x5C31;&#x662F;&#x7528;&#x53CD;&#x5C04;&#xFF1B;&#x6211;&#x4EEC;&#x77E5;&#x9053;JAVA&#x53CD;&#x5C04;&#x673A;&#x5236;&#x662F;&#x6307;&#xFF1A;<br><strong>&#x201C;&#x5728;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x4E2D;&#xFF0C;&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x7C7B;&#xFF0C;&#x90FD;&#x80FD;&#x591F;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF1B;&#x5BF9;&#x4E8E;&#x4EFB;&#x610F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x90FD;&#x80FD;&#x591F;&#x8C03;&#x7528;&#x5B83;&#x7684;&#x4EFB;&#x610F;&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#xFF1B;&#x8FD9;&#x79CD;&#x52A8;&#x6001;&#x83B7;&#x53D6;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x52A8;&#x6001;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x65B9;&#x6CD5;&#x7684;&#x529F;&#x80FD;&#x79F0;&#x4E3A;java&#x8BED;&#x8A00;&#x7684;&#x53CD;&#x5C04;&#x673A;&#x5236;&#x3002;</strong><br>OK&#xFF0C;&#x518D;&#x6765;&#x770B;&#x7A0B;&#x5E8F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;        ArrayList&lt;String&gt; str_list=new ArrayList&lt;String&gt;();</span><br><span class="line">        //&#x83B7;&#x53D6;&#x7C7B;&#x4FE1;&#x606F;</span><br><span class="line">        Class c=str_list.getClass();</span><br><span class="line">        //&#x83B7;&#x53D6;add&#x65B9;&#x6CD5;</span><br><span class="line">        Method m=c.getMethod(&quot;add&quot;, Object.class);</span><br><span class="line">        //&#x8FD0;&#x884C;&#x65F6;&#x8C03;&#x7528;add&#x65B9;&#x6CD5;</span><br><span class="line">        m.invoke(str_list, 20);</span><br><span class="line">        //&#x8F93;&#x51FA;&#x5F53;&#x524D;str_list</span><br><span class="line">        System.out.println(str_list);</span><br></pre></td></tr></table></figure>

<p>&#x7ED3;&#x679C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;[20]</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x7ED3;&#x679C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x6211;&#x4EEC;&#x5B8C;&#x6210;&#x4E86;&#x5728;list&#x4E2D;&#x6DFB;&#x52A0;Integer&#x7684;&#x4EFB;&#x52A1;&#x3002;<br>&#x3010;&#x6CDB;&#x578B;&#x3001;&#x53CD;&#x5C04;&#x3001;&#x7F16;&#x8BD1;&#x65F6;&#x3001;&#x8FD0;&#x884C;&#x65F6;&#x3011;<br>&#x5927;&#x5BB6;&#x5468;&#x672B;&#x6109;&#x5FEB;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/bb46261755f5d7b48b9d454d96572107.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513936527368.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513936527368.html" itemprop="url">Scala入门教程 （一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-25T22:11:06+08:00">
                2017-11-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Scala&#x5165;&#x95E8;&#x6559;&#x7A0B;"><a href="#Scala&#x5165;&#x95E8;&#x6559;&#x7A0B;" class="headerlink" title="Scala&#x5165;&#x95E8;&#x6559;&#x7A0B;"></a>Scala&#x5165;&#x95E8;&#x6559;&#x7A0B;</h2><p>[TOC]</p>
<h4 id="Scala&#x662F;&#x795E;&#x9A6C;&#xFF1F;"><a href="#Scala&#x662F;&#x795E;&#x9A6C;&#xFF1F;" class="headerlink" title="Scala&#x662F;&#x795E;&#x9A6C;&#xFF1F;"></a>Scala&#x662F;&#x795E;&#x9A6C;&#xFF1F;</h4><ul>
<li>&#x8BF4;&#x7684;&#x6B63;&#x5F0F;&#x70B9;&#xFF0C;Scala&#x662F;&#x4E00;&#x79CD;&#x591A;&#x8303;&#x5F0F;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x5176;&#x5C06;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x4E0E;&#x51FD;&#x6570;&#x5F0F;&#x7F16;&#x7A0B;&#x7684;&#x7279;&#x6027;&#x7ED3;&#x5408;&#x4E86;&#x8D77;&#x6765;&#x3002;&#x5E76;&#x4E14;Scala&#x540C;Java&#x4E00;&#x6837;&#x90FD;&#x8FD0;&#x884C;&#x5728;Java&#x865A;&#x62DF;&#x673A;&#x4E4B;&#x4E0A;&#xFF0C;&#x7ECF;&#x8FC7;&#x7F16;&#x8BD1;&#x4E4B;&#x540E;&#x90FD;&#x751F;&#x6210;&#x7684;&#x662F;class&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;scala&#x540C;&#x6837;&#x5177;&#x6709;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x4E00;&#x6B21;&#x7F16;&#x5199;&#xFF0C;&#x5230;&#x5904;&#x8FD0;&#x884C;&#x3002;</li>
<li>&#x8BF4;&#x7684;&#x901A;&#x4FD7;&#x70B9;&#xFF0C;Scala&#x662F;&#x4E00;&#x79CD;&#x5F88;&#x6709;&#x903C;&#x683C;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x5177;&#x6709;&#x4F18;&#x96C5;&#xFF0C;&#x7B80;&#x6D01;&#xFF0C;&#x901F;&#x5EA6;&#x7B49;&#x4F18;&#x70B9;&#xFF0C;&#x5BF9;&#x4E8E;&#x733F;&#x5708;&#x7684;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#xFF0C;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x6BD4;&#x88C5;&#x903C;&#x66F4;&#x80FD;&#x5438;&#x5F15;&#x6211;&#x4EEC;&#x7684;&#x5462;&#xFF1F;&#x5728;&#x6DF1;&#x5165;&#x4E86;&#x89E3;&#x540E;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5F88;&#x591A;&#x5728;Java&#x4E2D;&#x7684;&#x9057;&#x61BE;&#x5728;scala&#x4E2D;&#x90FD;&#x6709;&#x5F88;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x5927;&#x540D;&#x9F0E;&#x9F0E;&#x7684;Spark&#x5E95;&#x5C42;&#x5C31;&#x662F;&#x7528;scala&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x597D;&#x597D;&#x6DF1;&#x5165;&#x4E86;&#x89E3;&#x8FD9;&#x4E2A;&#x5927;&#x6570;&#x636E;&#x6846;&#x67B6;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x8981;&#x597D;&#x597D;&#x5B66;&#x4E60;&#x8FD9;&#x95E8;&#x8BED;&#x8A00;&#x3002;</li>
</ul>
<h4 id="Scala&#x7684;&#x5B89;&#x88C5;"><a href="#Scala&#x7684;&#x5B89;&#x88C5;" class="headerlink" title="Scala&#x7684;&#x5B89;&#x88C5;"></a>Scala&#x7684;&#x5B89;&#x88C5;</h4><p>&#x200B; &#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BF4;&#x5230;&#x8FC7;&#xFF0C;Scala&#x662F;&#x8FD0;&#x884C;&#x5728;JVM&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x60F3;&#x8FD0;&#x884C;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x6211;&#x4EEC;&#x7684;&#x7535;&#x8111;&#x4E0A;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x597D;&#x4E86;JDK&#xFF0C;&#x8FD9;&#x4E2A;&#x76F4;&#x63A5;&#x5728;oracle&#x7684;&#x5B98;&#x7F51;&#x4E0A;&#x5C31;&#x6709;&#xFF0C;&#x73B0;&#x5728;&#x6700;&#x65B0;&#x7684;&#x5DF2;&#x7ECF;&#x662F;JDK9&#x4E86;&#x3002;</p>
<p>&#x200B; &#x5B89;&#x88C5;&#x5B8C;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x5B89;&#x88C5;Scala&#x7684;&#x7F16;&#x8BD1;&#x5668;&#x4E86;&#xFF0C;Scala&#x7684;&#x7F16;&#x8BD1;&#x5668;&#x5C06;Scala&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x4E3A;class&#x5B57;&#x8282;&#x7801;&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x50CF;&#x8FD0;&#x884C;Java&#x7684;&#x5B57;&#x8282;&#x7801;&#x90A3;&#x6837;&#x5728;JVM&#x4E2D;&#x8FD0;&#x884C;&#x3002;</p>
<ul>
<li>Windows&#x4E0A;&#x5B89;&#x88C5;Scala&#x7F16;&#x8BD1;&#x5668;</li>
</ul>
<p>&#x76F4;&#x63A5;&#x767B;&#x9646;<a href="/external_links/68b02b4a3b481137d5eccfb1e68eee4f.html" target="blank" rel="noopener">scala</a>&#x7684;&#x5B98;&#x7F51;&#x8FDB;&#x5165;&#x4E0B;&#x8F7D;&#xFF0C;&#x4E0B;&#x8F7D;windows&#x7684;&#x5B89;&#x88C5;&#x5305;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3f0c726c71d6b654a9fd733b76e9d2a99e27a1dad572bcf34cd3a5e74797d058" alt="image.png"></p>
<p>image.png</p>
<ul>
<li>&#x5728;Linux&#x4E2D;&#x5B89;&#x88C5;scala</li>
</ul>
<p>&#x4E0B;&#x8F7D;&#x4E0A;&#x9762;&#x622A;&#x56FE;&#x4E2D;<a href="/external_links/c0c3635af969d8de99949c9ec4440e69.html" target="blank" rel="noopener">scala-sources-2.12.4.tar.gz</a>&#x7684;&#x90A3;&#x4E2A;&#xFF0C;&#x89E3;&#x538B;&#x5230;Linux&#x4E2D;&#x4F60;&#x559C;&#x6B22;&#x7684;&#x76EE;&#x5F55;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;tar -zxvf scala-2.10.6.tgz -C /usr/share/local</span><br></pre></td></tr></table></figure>

<p>&#x914D;&#x7F6E;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#xFF0C;&#x7528;vim&#x7F16;&#x8F91;&#x5668;&#x7F16;&#x8F91;/etc/profile&#x6587;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;export JAVA_HOME=/usr/share/local/jdk</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:/usr/share/local/scala/bin</span><br></pre></td></tr></table></figure>

<p>&#x7F16;&#x8F91;&#x4FDD;&#x5B58;&#x540E;&#x4E0D;&#x8981;&#x5FD8;&#x4E86;source&#x4E00;&#x4E0B;&#xFF0C;&#x4F7F;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x7ACB;&#x5373;&#x751F;&#x6548;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;source  /etc/profile</span><br></pre></td></tr></table></figure>

<h4 id="&#x5199;&#x4E2A;HelloWorld&#x6D4B;&#x8BD5;&#x4E0B;&#x5427;"><a href="#&#x5199;&#x4E2A;HelloWorld&#x6D4B;&#x8BD5;&#x4E0B;&#x5427;" class="headerlink" title="&#x5199;&#x4E2A;HelloWorld&#x6D4B;&#x8BD5;&#x4E0B;&#x5427;"></a>&#x5199;&#x4E2A;HelloWorld&#x6D4B;&#x8BD5;&#x4E0B;&#x5427;</h4><ul>
<li>&#x6309;&#x7167;&#x56FD;&#x9645;&#x60EF;&#x4F8B;&#xFF0C;&#x5B66;&#x4E60;&#x4EFB;&#x4F55;&#x4E00;&#x95E8;&#x8BED;&#x8A00;&#x9996;&#x5148;&#x90FD;&#x8981;&#x5199;&#x4E2A;<code>HelloWorld</code>&#xFF0C;&#x5C31;&#x50CF;&#x65B0;&#x5E97;&#x5F00;&#x5F20;&#x7684;&#x526A;&#x5F69;&#x4EEA;&#x5F0F;&#x4E00;&#x6837;&#x3002;&#x6211;&#x4EEC;&#x5148;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;Hello.scala&#x6587;&#x4EF6;&#x3002;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;object Hello{</span><br><span class="line">    def main(args: Array[String]) {</span><br><span class="line">        println(&quot;Hello World!&quot;)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7C7B;&#x4F3C;&#x4E8E;Java&#x7684;main&#x51FD;&#x6570;&#xFF0C;&#x4E0D;&#x8FC7;&#x8BED;&#x6CD5;&#x770B;&#x4E0A;&#x53BB;&#x6709;&#x70B9;&#x533A;&#x522B;&#xFF0C;&#x7EC6;&#x5FC3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x4E5F;&#x8BB8;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x8FD9;&#x91CC;&#x6BCF;&#x53E5;&#x4EE3;&#x7801;&#x7ED3;&#x675F;&#x5C45;&#x7136;&#x6CA1;&#x6709;<code>;</code>&#x5206;&#x53F7;&#x7ED3;&#x675F;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;Scala&#x7684;&#x6781;&#x7B80;&#x539F;&#x5219;&#xFF0C;&#x80FD;&#x5C11;&#x5199;&#x7EDD;&#x4E0D;&#x591A;&#x8C22;&#xFF0C;&#x5F53;&#x7136;&#x5199;&#x4E86;&#x4E5F;&#x4E0D;&#x4F1A;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;</p>
<p>&#x7F16;&#x8BD1;&#x6E90;&#x6587;&#x4EF6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;scalac ./Hello.scala</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x65F6;&#x5019;&#x8BE5;&#x76EE;&#x5F55;&#x4E0B;&#x5C31;&#x4F1A;&#x751F;&#x6210;Hello.class&#x6587;&#x4EF6;&#xFF0C;&#x63A5;&#x4E0B;&#x7C7B;&#x8FD0;&#x884C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;scala Hello</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d708a88fc3e4d67f86944df0773d433e7ead8a2b029ef5e046ba8dfa379492d9" alt="image.png"></p>
<p>image.png</p>
<p>&#x51FA;&#x73B0;&#x5982;&#x4E0B;&#x7ED3;&#x679C;&#x5C31;&#x8BF4;&#x660E;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x4E86;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x4E00;&#x8D77;&#x6765;&#x6253;&#x5F00;Scala&#x7684;&#x5F02;&#x4E16;&#x754C;&#x5927;&#x95E8;&#x5427;&#x3002;</p>
<ul>
<li>&#x76F8;&#x4FE1;&#x5BF9;Java&#x6709;&#x4E00;&#x5B9A;&#x4E86;&#x89E3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x90FD;&#x4E86;&#x89E3;class&#x6587;&#x4EF6;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x53CD;&#x7F16;&#x8BD1;&#x4E3A;Java&#x4EE3;&#x7801;&#x7684;&#xFF0C;&#x90A3;&#x4E48;Scala&#x751F;&#x6210;&#x7684;class&#x6587;&#x4EF6;&#x53EF;&#x4E0D;&#x53EF;&#x4EE5;&#x53CD;&#x7F16;&#x8BD1;&#x4E3A;Java&#x6587;&#x4EF6;&#x5462;&#xFF1F;&#x5F53;&#x7136;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#x5440;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;import scala.reflect.ScalaSignature;</span><br><span class="line">public final class Hello</span><br><span class="line">{</span><br><span class="line">  public static void main(String[] paramArrayOfString)</span><br><span class="line">  {</span><br><span class="line">    Hello..MODULE$.main(paramArrayOfString);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x5C31;&#x662F;&#x901A;&#x8FC7;Decompiler&#x53CD;&#x7F16;&#x8BD1;&#x540E;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x662F;&#x6CA1;&#x95EE;&#x9898;&#x7684;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;scala&#x548C;java&#x51E0;&#x4E4E;&#x662F;&#x53EF;&#x4EE5;&#x65E0;&#x7F1D;&#x5BF9;&#x63A5;&#x7684;&#xFF0C;&#x5728;scala&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5F15;&#x7528;Java&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x5728;scala&#x662F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Java&#x975E;&#x5E38;&#x4E30;&#x5BCC;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x6846;&#x67B6;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x4E4B;&#x540E;&#x4E5F;&#x4F1A;&#x4ECB;&#x7ECD;&#x7684;&#x3002;</p>
<h4 id="Scala&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x5177;"><a href="#Scala&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x5177;" class="headerlink" title="Scala&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x5177;"></a>Scala&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x5177;</h4><ul>
<li>&#x5DE5;&#x6B32;&#x5584;&#x5176;&#x4E8B;&#xFF0C;&#x5FC5;&#x5148;&#x5229;&#x5176;&#x5668;&#x3002;&#x8981;&#x60F3;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x5927;&#x578B;&#x9879;&#x76EE;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4EEC;&#x603B;&#x4E0D;&#x80FD;&#x4E00;&#x76F4;&#x5728;&#x6587;&#x672C;&#x7F16;&#x8F91;&#x5668;&#x4E2D;&#x5199;&#x4EE3;&#x7801;&#x5427;&#xFF08;&#x5927;&#x4F6C;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;&#x8FD9;&#x4E2A;&#xFF09;&#xFF0C;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x4E60;&#x60EF;&#x5728;IDEA&#x4E2D;&#x5F00;&#x53D1;&#xFF0C;&#x5728;&#x5B89;&#x88C5;&#x5B8C;IDEA&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x5B89;&#x88C5;&#x4E00;&#x4E2A;scala&#x7684;&#x63D2;&#x4EF6;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x7B80;&#x5355;&#x65B9;&#x4FBF;&#x5FEB;&#x6377;&#x3002;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e4a10d95ee9c5b099c525e0255d4968a56094267b4e591faa1458831509e3e16" alt="image.png"></p>
<p>image.png</p>
<p>&#x63D2;&#x4EF6;&#x7684;&#x540D;&#x5B57;&#x5C31;&#x53EB;scala&#xFF0C;&#x76F4;&#x63A5;&#x641C;&#x7D22;&#x5E76;&#x5B89;&#x88C5;&#x5C31;ok&#x4E86;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x50CF;&#x521A;&#x624D;&#x90A3;&#x6837;&#x5199;&#x4E00;&#x4E2A;HelloWorld&#x5C31;Ok&#x4E86;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/91a6b60c0f7b71ba1711ac0312d01fc4344a26856757742af7e9503ee37232bb" alt="image.png"></p>
<p>image.png</p>
<p>&#x200B;</p>
<h4 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h4><p>&#x200B; Ok&#xFF0C;&#x5165;&#x95E8;&#x6559;&#x7A0B;&#x5C31;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#x3002;&#x4E4B;&#x540E;&#x5C31;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD; Scala&#x7684;&#x66F4;&#x591A;&#x57FA;&#x7840;&#x4EE5;&#x53CA;&#x9AD8;&#x7EA7;&#x7528;&#x6CD5;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x4F1A;&#x5728;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x66F4;&#x65B0;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/11989bc5daf4fa77d9ca02634db300c5a7b4b14333718b8a496382459b839050" alt="img"></p>
<p>img</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/7c2bfea43cd7044b24c576826c109ecd.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../377/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../377/">377</a><span class="page-number current">378</span><a class="page-number" href="../379/">379</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../379/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
