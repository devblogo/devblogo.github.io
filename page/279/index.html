<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/279/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/279/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513563234312.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513563234312.html" itemprop="url">使用dropwizard(6)-国际化-easy-i18n</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T15:34:03+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4F5C;&#x8005;&#xFF1A;<a href="/external_links/130e1094be034c71dc8e3acb642fac39.html" target="blank" rel="noopener">@Ryan-Miao</a><br>&#x672C;&#x6587;&#x4E3A;&#x4F5C;&#x8005;&#x539F;&#x521B;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x6CE8;&#x660E;&#x51FA;&#x5904;&#xFF1A;<a href="/external_links/4354b0406442f77de6d95a2324c8aa5a.html" target="blank" rel="noopener">www.cnblogs.com/woshimrf/p/&#x2026;</a></p>
<hr>
<blockquote>
<h4 id="&#x76EE;&#x5F55;"><a href="#&#x76EE;&#x5F55;" class="headerlink" title="&#x76EE;&#x5F55;"></a>&#x76EE;&#x5F55;</h4><p><a href="#_caption_0"><strong>&#x7B80;&#x5355;&#x4F7F;&#x7528;</strong></a><br>#&#x60C5;&#x5F62;&#x4E00; &#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource Bundle<br>#&#x60C5;&#x5F62;&#x4E8C; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle<br>#&#x60C5;&#x5F62;&#x4E09; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;<br>#&#x60C5;&#x5F62;4<br><a href="#_caption_1"><strong>&#x5F15;&#x5165;easy-i18n</strong></a><br> <a href="#_caption_2"><strong>&#x6DFB;&#x52A0;Resource Bundle</strong></a><br> <a href="#_caption_3"><strong>&#x65B0;&#x5EFA;MessageService</strong></a><br><a href="#_caption_4"><strong>&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource</strong></a><br><a href="#_caption_5"><strong>&#x6D4B;&#x8BD5;</strong></a></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/baf6b6ada7fe7b59137243363439a471798e0a6bcf2e44854c3b1f69c29854ca" alt><br> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/dcb7a2f90e213c2e3dabad7fcb675995fd7c5d54f809f0e46dc8d2f08681698c" alt></p>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>Dropwizard&#x5B98;&#x65B9;&#x6587;&#x6863;&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x56FD;&#x9645;&#x5316;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x81EA;&#x5DF1;&#x52A0;&#x3002;Spring&#x7684;MessageResource&#x7528;&#x7684;&#x5F88;&#x987A;&#x624B;&#xFF0C;&#x6240;&#x4EE5;copy&#x8FC7;&#x6765;&#x3002;</p>
<h1 id="Easy-i18n"><a href="#Easy-i18n" class="headerlink" title="Easy i18n"></a>Easy i18n</h1><p>&#x5728;&#x6574;&#x5408;Dropwizard&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x591A;&#x8BED;&#x8A00;&#x8C8C;&#x4F3C;&#x53EA;&#x80FD;&#x901A;&#x8FC7;jdk&#x81EA;&#x5E26;&#x7684;ResourceBundle&#x62FF;&#x6570;&#x636E;&#x3002;&#x5176;&#x5B9E;&#x4E5F;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4F46;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x73B0;&#x9700;&#x8981;&#x7F13;&#x5B58;&#xFF0C;&#x9700;&#x8981;&#x89E3;&#x6790;&#x5360;&#x4F4D;&#x7B26;&#x7B49;&#x3002;&#x4EE3;&#x7801;&#x8D8A;&#x5199;&#x8D8A;&#x591A;&#xFF0C;&#x663E;&#x7136;&#x4E0D;&#x662F;&#x4EC5;&#x4EC5;&#x4E00;&#x4E2A;&#x8C03;&#x7528;&#x5C31;&#x5B8C;&#x4E8B;&#x7684;&#x3002;&#x5199;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#x7684;&#x65F6;&#x5019;&#x7A81;&#x7136;&#x89C9;&#x5F97;&#x548C;spring context&#x91CC;&#x7684;message source&#x7ED3;&#x6784;&#x7C7B;&#x4F3C;&#x3002;&#x4E8E;&#x662F;&#xFF0C;&#x653E;&#x5F03;&#x7EF4;&#x62A4;&#x5DF2;&#x7ECF;&#x5F00;&#x59CB;&#x53D8;&#x7684;&#x590D;&#x6742;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;spring&#x3002;</p>
<p>&#x4F46;&#x9009;&#x53D6;dropwizard&#x7684;&#x65F6;&#x5019;&#x5C31;&#x662F;&#x6452;&#x5F03;&#x4E86;spring&#xFF0C;&#x518D;&#x62FF;&#x8FC7;&#x6765;&#x4E5F;&#x4E0D;&#x597D;&#x73A9;&#x4E86;&#x3002;&#x5E72;&#x8106;&#xFF0C;&#x62BD;&#x53D6;Spring context&#x9879;&#x76EE;&#x7684;MessageResource&#x76F8;&#x5173;&#x4EE3;&#x7801;&#xFF0C;&#x91CD;&#x5199;&#x5C01;&#x88C5;&#x4E86;&#x4E00;&#x4E2A;library: <a href="/external_links/31ee1f1ba92ee662e6b157434d8b063e.html" target="blank" rel="noopener">github.com/Ryan-Miao/e&#x2026;</a>, &#x6B22;&#x8FCE;star&#x3002;</p>
<p><a href="/external_links/31ee1f1ba92ee662e6b157434d8b063e.html" target="blank" rel="noopener">easy-i18n</a>&#x8FD8;&#x662F;&#x548C;&#x5728;Spring&#x9879;&#x76EE;&#x4E2D;&#x76F8;&#x540C;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5F15;&#x5165;&#x4F9D;&#x8D56;&#xFF0C;&#x7531;&#x4E8E;github&#x9879;&#x76EE;&#x7684;library&#x5DF2;&#x7ECF;&#x6709;&#x4ED3;&#x5E93;&#x53BB;&#x7EF4;&#x62A4;&#x4E86;&#xFF0C;&#x5C31;&#x6CA1;&#x8D39;&#x5FC3;&#x601D;&#x653E;&#x5230;maven&#x548C;jcenter&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;github&#x4E0A;&#x62C9;&#x53D6;&#x3002;&#x7C7B;&#x5E93;&#x5730;&#x5740;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;repositories&gt;`</span><br><span class="line">    &lt;repository&gt;</span><br><span class="line">        &lt;id&gt;jitpack.io&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;https://jitpack.io&lt;/url&gt;</span><br><span class="line">    &lt;/repository&gt;</span><br><span class="line">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F15;&#x5165;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;dependency&gt;`</span><br><span class="line">    &lt;groupId&gt;com.github.Ryan-Miao&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;easy-i18n&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>


<h2 id="&#x7B80;&#x5355;&#x4F7F;&#x7528;"><a href="#&#x7B80;&#x5355;&#x4F7F;&#x7528;" class="headerlink" title="&#x7B80;&#x5355;&#x4F7F;&#x7528;"></a>&#x7B80;&#x5355;&#x4F7F;&#x7528;</h2><h3 id="&#x60C5;&#x5F62;&#x4E00;-&#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource-Bundle"><a href="#&#x60C5;&#x5F62;&#x4E00;-&#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource-Bundle" class="headerlink" title="#&#x60C5;&#x5F62;&#x4E00; &#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource Bundle"></a>#&#x60C5;&#x5F62;&#x4E00; &#x53EA;&#x6709;&#x4E00;&#x4E2A;Resource Bundle</h3><p>&#x5728;resources&#x4E0B;&#x65B0;&#x5EFA;<code>i18n/messages.properties</code>&#x4EE5;&#x53CA;<code>i18n/messages_zh_CN.properties</code>. demo&#x4F4D;&#x7F6E;&#xFF1A;<a href="/external_links/d5f4e1eb9ada5e192a76c23ce65fcdbf.html" target="blank" rel="noopener">l4dropwizard</a></p>
<p>&#x7136;&#x540E;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`@Test`</span><br><span class="line">public void testI18n(){</span><br><span class="line">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String index = messageSource.getMessage(&quot;index&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(index);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x60C5;&#x5F62;&#x4E8C;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle"><a href="#&#x60C5;&#x5F62;&#x4E8C;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle" class="headerlink" title="#&#x60C5;&#x5F62;&#x4E8C; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle"></a>#&#x60C5;&#x5F62;&#x4E8C; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle</h3><p>&#x5B9E;&#x9645;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x4EA7;&#x54C1;&#x5206;&#x7C7B;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x591A;&#x4E2A;Resource Bundle&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x4E5F;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x8981;&#x521B;&#x5EFA;&#x591A;&#x4E2A;<code>ResourceBundleMessageSource</code>&#x6765;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void testI18n2(){</span><br><span class="line">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String index = messageSource.getMessage(&quot;index&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(index);</span><br><span class="line">    </span><br><span class="line">    ResourceBundleMessageSource messageSource2 = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages2&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String second = messageSource.getMessage(&quot;second&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(second);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x60C5;&#x5F62;&#x4E09;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;"><a href="#&#x60C5;&#x5F62;&#x4E09;-&#x6211;&#x6709;&#x591A;&#x4E2A;Resource-Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;" class="headerlink" title="#&#x60C5;&#x5F62;&#x4E09; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;"></a>#&#x60C5;&#x5F62;&#x4E09; &#x6211;&#x6709;&#x591A;&#x4E2A;Resource Bundle&#x4F46;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6211;&#x60F3;&#x4E00;&#x8D77;</h3><p>&#x6709;&#x65F6;&#x5019;&#xFF0C;&#x60F3;&#x8981;&#x8BFB;&#x53D6;&#x7FFB;&#x8BD1;&#xFF0C;&#x53EF;&#x80FD;&#x7FFB;&#x8BD1;&#x6587;&#x4EF6;&#x5728;&#x4E0D;&#x540C;&#x7684;Resource Bundle&#xFF0C;&#x4F46;&#x6211;&#x6307;&#x5411;&#x7528;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x53BB;&#x8C03;&#x7528;&#x3002;&#x8FD9;&#x65F6;&#x5019;&#xFF0C;&#x505A;&#x6CD5;&#x65F6;&#x5019;&#x5728;&#x8FD9;&#x51E0;&#x4E2A;Resource Bundle&#x7684;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x547D;&#x540D;&#x7A7A;&#x95F4;&#xFF0C;&#x5373;key&#x8981;&#x5728;&#x8FD9;&#x51E0;&#x4E2A;Resource Bundle&#x91CC;&#x552F;&#x4E00;&#xFF0C;&#x800C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x672C;&#x6587;&#x4EF6;&#x552F;&#x4E00;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void testI18n2(){</span><br><span class="line">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">    messageSource.addBasenames(&quot;i18n/messages&quot;, &quot;i18n/messages2&quot;);</span><br><span class="line">    messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">    String index = messageSource.getMessage(&quot;index&quot;, null, Locale.US);</span><br><span class="line">    System.out.println(index);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#xFF0C;&#x4F1A;&#x4E00;&#x6B21;&#x4ECE;&#x4E24;&#x4E2A;Resource Bundle&#x91CC;&#x5BFB;&#x627E;&#x7FFB;&#x8BD1;&#xFF0C;&#x627E;&#x5230;&#x5373;&#x8FD4;&#x56DE;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x76F8;&#x540C;&#x7684;key&#xFF0C;&#x5C06;&#x5BFC;&#x81F4;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x751F;&#x6548;&#x3002;</p>
<h3 id="&#x60C5;&#x5F62;4"><a href="#&#x60C5;&#x5F62;4" class="headerlink" title="#&#x60C5;&#x5F62;4"></a>#&#x60C5;&#x5F62;4</h3><p>&#x6CA1;&#x6709;&#x4E86;&#xFF0C;&#x4F60;&#x7FFB;&#x8BD1;&#x8981;&#x90A3;&#x4E48;&#x590D;&#x6742;&#x5417;&#x3002;</p>
<p>&#x66F4;&#x591A;&#x7528;&#x6CD5;&#xFF0C;&#x53C2;&#x8003;&#x6D4B;&#x8BD5;&#x7C7B;&#xFF1A;<a href="/external_links/cb30553fd60cbb2f6c9551b39d85bfee.html" target="blank" rel="noopener">ResourceBundleMessageSourceTest</a></p>
<h1 id="Demo-source"><a href="#Demo-source" class="headerlink" title="Demo source"></a>Demo source</h1><p><a href="/external_links/bfc2da5629c4986752ce2c39769f83ff.html" target="blank" rel="noopener">github.com/Ryan-Miao/l&#x2026;</a></p>
<p>&#x672C;&#x6587;&#x662F;&#x57FA;&#x4E8E;<a href="/external_links/9c9bdb8e0145dc7a46f17266e07b9c1a.html" target="blank" rel="noopener">dropwizard&#x5165;&#x95E8;</a>&#x4E4B;&#x4E0A;&#x7684;&#x6F14;&#x8FDB;&#x3002;</p>
<p>&#x786E;&#x4FDD;&#x4F9D;&#x8D56;&#x90FD;&#x662F;&#x6700;&#x65B0;&#x7684;&#xFF0C;&#x6216;&#x8005;&#x81EA;&#x884C;&#x89E3;&#x51B3;&#x7248;&#x672C;&#x51B2;&#x7A81;&#xFF0C;&#x6BD4;&#x5982;jackson&#x4E0D;&#x540C;&#x7248;&#x672C;&#x4E4B;&#x95F4;&#x7684;&#x7C7B;&#x6709;&#x6240;&#x4E0D;&#x540C;&#x3002;</p>
<h2 id="&#x5F15;&#x5165;easy-i18n"><a href="#&#x5F15;&#x5165;easy-i18n" class="headerlink" title="&#x5F15;&#x5165;easy-i18n"></a>&#x5F15;&#x5165;easy-i18n</h2><p>repository url</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;repositories&gt;`</span><br><span class="line">    &lt;repository&gt;</span><br><span class="line">        &lt;id&gt;jitpack.io&lt;/id&gt;</span><br><span class="line">        &lt;url&gt;https://jitpack.io&lt;/url&gt;</span><br><span class="line">    &lt;/repository&gt;</span><br><span class="line">&lt;/repositories&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F15;&#x5165;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`&lt;dependency&gt;`</span><br><span class="line">    &lt;groupId&gt;com.github.Ryan-Miao&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;easy-i18n&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>


<h2 id="&#x6DFB;&#x52A0;Resource-Bundle"><a href="#&#x6DFB;&#x52A0;Resource-Bundle" class="headerlink" title="&#x6DFB;&#x52A0;Resource Bundle"></a>&#x6DFB;&#x52A0;Resource Bundle</h2><p>&#x5728;<a href="/external_links/7ab414a260b7b15846945677fef2a009.html" target="blank" rel="noopener">resources</a>&#x4E0B;&#x65B0;&#x589E;&#x6587;&#x4EF6;&#x5939;<code>i18n</code>, &#x4F9D;&#x6B21;&#x6DFB;&#x52A0;&#x51E0;&#x4E2A;Resource Bundle&#x3002;&#x5177;&#x4F53;&#x505A;&#x6CD5;&#x662F;&#xFF0C;&#x5728;&#x6587;&#x4EF6;&#x5939;<code>i18n</code>&#x53F3;&#x952E; -&gt; <code>new</code> -&gt; <code>Resource Bundle</code>, &#x7136;&#x540E;&#x9009;&#x62E9;&#x60F3;&#x8981;&#x652F;&#x6301;&#x7684;&#x8BED;&#x8A00;&#x3002;&#x6BD4;&#x5982;&#x7F8E;&#x56FD;<code>en_US</code>&#xFF0C;&#x7B80;&#x4F53;&#x4E2D;&#x6587;<code>zh_CN</code>&#x3002;</p>
<h2 id="&#x65B0;&#x5EFA;MessageService"><a href="#&#x65B0;&#x5EFA;MessageService" class="headerlink" title="&#x65B0;&#x5EFA;MessageService"></a>&#x65B0;&#x5EFA;MessageService</h2><p>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Util&#x6765;&#x5904;&#x7406;&#x7FFB;&#x8BD1;&#x529F;&#x80FD;&#x3002; com.test.domain.service.IMessageService</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.service;`</span><br><span class="line"></span><br><span class="line">import java.text.MessageFormat;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Locale;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * The Message translation service</span><br><span class="line"> * Created by Ryan Miao on 11/23/17.</span><br><span class="line"> */</span><br><span class="line">public interface IMessageService {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Get translation by message key.</span><br><span class="line">     *</span><br><span class="line">     * @param key The message key in the properties</span><br><span class="line">     * @return the translated message</span><br><span class="line">     */</span><br><span class="line">    String getMessage(String key, Locale locale);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Get translation by message key and compose it with variables.</span><br><span class="line">     * Note that the variable would be injected by {@link MessageFormat}</span><br><span class="line">     *</span><br><span class="line">     * @param key The message key in the properties</span><br><span class="line">     * @param args The variables to inject into the message.</span><br><span class="line">     * @return the translated message.</span><br><span class="line">     */</span><br><span class="line">    String getMessage(String key, List&lt;String&gt; args, Locale locale);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5B9E;&#x73B0;&#x7C7B;<code>com.test.domain.service.impl.MessageService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.service.impl;`</span><br><span class="line"></span><br><span class="line">import com.miao.easyi18n.support.ResourceBundleMessageSource;</span><br><span class="line">import com.test.domain.service.IMessageService;</span><br><span class="line"></span><br><span class="line">import javax.inject.Inject;</span><br><span class="line">import javax.inject.Singleton;</span><br><span class="line">import java.util.List;</span><br><span class="line">import java.util.Locale;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by Ryan Miao on 11/23/17.</span><br><span class="line"> */</span><br><span class="line">@Singleton</span><br><span class="line">public class MessageService implements IMessageService{</span><br><span class="line"></span><br><span class="line">    private final ResourceBundleMessageSource messageSource;</span><br><span class="line"></span><br><span class="line">    @Inject</span><br><span class="line">    public MessageService(ResourceBundleMessageSource messageSource) {</span><br><span class="line">        this.messageSource = messageSource;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getMessage(String key, Locale locale) {</span><br><span class="line">        return messageSource.getMessage(key, null, locale);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String getMessage(String key, List&lt;String&gt; args, Locale locale) {</span><br><span class="line">        return messageSource.getMessage(key, args.toArray(), locale);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<h2 id="&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource"><a href="#&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource" class="headerlink" title="&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource"></a>&#x5728;IoC&#x4E2D;&#x63D0;&#x4F9B;ResourceBundleMessageSource</h2><p>&#x7531;&#x4E8E;<code>ResourceBundleMessageSource</code>&#x662F;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x521B;&#x5EFA;&#x3002;&#x5173;&#x4E8E;IoC&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x53C2;&#x9605;<a href="/external_links/5630fc493e335c72a0b3bb990663dfd7.html" target="blank" rel="noopener">dropwizard&#x4E2D;&#x6DFB;&#x52A0;DI</a></p>
<p>&#x5728;<code>ConfigurationModule</code>&#x4E2D;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.ioc.module;`</span><br><span class="line"></span><br><span class="line">import com.miao.easyi18n.support.ResourceBundleMessageSource;</span><br><span class="line">import com.test.configuration.HelloWorldConfiguration;</span><br><span class="line">import dagger.Module;</span><br><span class="line">import dagger.Provides;</span><br><span class="line"></span><br><span class="line">import javax.inject.Singleton;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by Ryan Miao on 11/20/17.</span><br><span class="line"> */</span><br><span class="line">@Module</span><br><span class="line">public class ConfigurationModule {</span><br><span class="line">    private final HelloWorldConfiguration configuration;</span><br><span class="line"></span><br><span class="line">    public ConfigurationModule(HelloWorldConfiguration configuration) {</span><br><span class="line">        this.configuration = configuration;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Provides</span><br><span class="line">    @Singleton</span><br><span class="line">    HelloWorldConfiguration helloWorldConfiguration(){</span><br><span class="line">        return configuration;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Singleton</span><br><span class="line">    @Provides</span><br><span class="line">    ResourceBundleMessageSource resourceBundleMessageSource(){</span><br><span class="line">        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br><span class="line">        messageSource.addBasenames(&quot;i18n/messages&quot;, &quot;i18n/messages2&quot;, &quot;i18n/otherGroup&quot;);</span><br><span class="line">        messageSource.setDefaultEncoding(&quot;UTF-8&quot;);</span><br><span class="line"></span><br><span class="line">        return messageSource;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#xFF0C;&#x5173;&#x4E8E;Resource Bundle&#x7684;&#x4F4D;&#x7F6E;&#x6CA1;&#x6709;&#x5355;&#x72EC;&#x63D0;&#x51FA;&#x6765;&#xFF0C;&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x653E;&#x5230;<code>HelloWorldConfiguration</code>&#xFF0C;&#x63D0;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x3002;</p>
<h2 id="&#x6D4B;&#x8BD5;"><a href="#&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6D4B;&#x8BD5;"></a>&#x6D4B;&#x8BD5;</h2><p>&#x5728;dagger&#x4E2D;&#xFF0C;&#x63A5;&#x53E3;&#x548C;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x7ED1;&#x5B9A;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x624B;&#x52A8;&#x58F0;&#x660E;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x7ED1;&#x5B9A;<code>IMessageService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`@Singleton`</span><br><span class="line">@Provides</span><br><span class="line">IMessageService messageService(MessageService messageService){</span><br><span class="line">    return messageService;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;Resource&#xFF0C; <code>com.test.domain.resource.LocalResource</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`package com.test.domain.resource;`</span><br><span class="line"></span><br><span class="line">import com.codahale.metrics.annotation.Timed;</span><br><span class="line">import com.google.common.collect.ImmutableMap;</span><br><span class="line">import com.test.domain.entiry.GithubUser;</span><br><span class="line">import com.test.domain.service.IMessageService;</span><br><span class="line">import io.swagger.annotations.Api;</span><br><span class="line">import io.swagger.annotations.ApiOperation;</span><br><span class="line">import io.swagger.annotations.ApiResponse;</span><br><span class="line">import io.swagger.annotations.ApiResponses;</span><br><span class="line"></span><br><span class="line">import javax.inject.Inject;</span><br><span class="line">import javax.validation.Valid;</span><br><span class="line">import javax.validation.constraints.NotNull;</span><br><span class="line">import javax.validation.constraints.Pattern;</span><br><span class="line">import javax.ws.rs.GET;</span><br><span class="line">import javax.ws.rs.HeaderParam;</span><br><span class="line">import javax.ws.rs.Path;</span><br><span class="line">import javax.ws.rs.PathParam;</span><br><span class="line">import javax.ws.rs.Produces;</span><br><span class="line">import javax.ws.rs.core.MediaType;</span><br><span class="line">import java.util.Locale;</span><br><span class="line">import java.util.Map;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Test localization</span><br><span class="line"> * Created by Ryan Miao on 11/23/17.</span><br><span class="line"> */</span><br><span class="line">@Api(&quot;/local&quot;)</span><br><span class="line">@Path(&quot;/local&quot;)</span><br><span class="line">@Produces(MediaType.APPLICATION_JSON)</span><br><span class="line">public class LocalResource {</span><br><span class="line"></span><br><span class="line">    private final IMessageService messageService;</span><br><span class="line"></span><br><span class="line">    @Inject</span><br><span class="line">    public LocalResource(IMessageService messageService) {</span><br><span class="line">        this.messageService = messageService;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @GET</span><br><span class="line">    @Timed</span><br><span class="line">    @Path(&quot;/{key}&quot;)</span><br><span class="line">    @ApiOperation(value = &quot;Get github user profile.&quot;, notes = &quot;There should be the note.&quot;)</span><br><span class="line">    @ApiResponses({</span><br><span class="line">            @ApiResponse(code = 401, message = &quot;Valid credentials are required to access this resource.&quot;),</span><br><span class="line">            @ApiResponse(code = 400, message = &quot;Params not valid.&quot;),</span><br><span class="line">            @ApiResponse(code = 500, message = &quot;Something wrong from the server.&quot;),</span><br><span class="line">            @ApiResponse(code = 200, message = &quot;Success.&quot;, response = GithubUser.class)</span><br><span class="line">    })</span><br><span class="line">    public Map&lt;String, String&gt; getIndex(</span><br><span class="line">            @PathParam(&quot;key&quot;) final String index,</span><br><span class="line">            @HeaderParam(&quot;Accept-Language&quot;) @Valid</span><br><span class="line">            @NotNull(message = &quot;cannot be null.&quot;)</span><br><span class="line">            @Pattern(regexp = &quot;([a-z]{2}-[A-Z]{2})&quot;, message = &quot;pattern should like zh-CN, en-US.&quot;)</span><br><span class="line">            final String language</span><br><span class="line">    ) {</span><br><span class="line">        final Locale locale = Locale.forLanguageTag(language);</span><br><span class="line">        final String message = messageService.getMessage(index, locale);</span><br><span class="line">        return ImmutableMap.of(index, message);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7ED3;&#x679C;<br> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0e64f8b389963472c93b177c786b29e22bb09ce8d6fc6543423b889dbe05d4cf" alt><br> <img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/aacafca975ea13a79d7ff264e9af71cc18fdc325a78af76e1458507631cc0faf" alt></p>
<p> So do it,and<br> change it,no regret!</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/24a903aee9de684a597b179533f54432.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513709871112.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513709871112.html" itemprop="url">PHP 调用 Go 服务的正确方式 - Unix Domai</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T14:51:25+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="&#x95EE;&#x9898;"><a href="#&#x95EE;&#x9898;" class="headerlink" title="&#x95EE;&#x9898;"></a>&#x95EE;&#x9898;</h1><p>&#x53EF;&#x80FD;&#x662F;&#x7531;&#x4E8E;&#x7ECF;&#x9A8C;&#x592A;&#x5C11;&#xFF0C;&#x5DE5;&#x4F5C;&#x4E2D;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#xFF0C;&#x63A2;&#x7A76;&#x548C;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#x7684;&#x8FC7;&#x7A0B;&#x603B;&#x60F3;&#x8BB0;&#x5F55;&#x4E00;&#x4E0B;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5199;&#x535A;&#x5BA2;&#x7ECF;&#x5E38;&#x662F;&#x95EE;&#x9898;&#x9A71;&#x52A8;&#xFF0C;&#x9996;&#x5148;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x4ECA;&#x5929;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<h3 id="&#x670D;&#x52A1;&#x8026;&#x5408;"><a href="#&#x670D;&#x52A1;&#x8026;&#x5408;" class="headerlink" title="&#x670D;&#x52A1;&#x8026;&#x5408;"></a>&#x670D;&#x52A1;&#x8026;&#x5408;</h3><p>&#x6211;&#x4EEC;&#x5728;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#xFF1A;</p>
<ul>
<li>&#x8FDB;&#x7A0B;&#x4F9D;&#x8D56;&#x4E8E;&#x67D0;&#x670D;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x628A;&#x670D;&#x52A1;&#x8026;&#x5408;&#x5728;&#x8FDB;&#x7A0B;&#x4EE3;&#x7801;&#x4E2D;&#xFF1B;</li>
<li>&#x670D;&#x52A1;&#x521D;&#x59CB;&#x5316;&#x8017;&#x65F6;&#x957F;&#xFF0C;&#x62D6;&#x6162;&#x4E86;&#x8FDB;&#x7A0B;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#xFF1B;</li>
<li>&#x670D;&#x52A1;&#x8FD0;&#x884C;&#x8981;&#x5360;&#x7528;&#x5927;&#x91CF;&#x5185;&#x5B58;&#xFF0C;&#x591A;&#x8FDB;&#x7A0B;&#x65F6;&#x5185;&#x5B58;&#x635F;&#x8017;&#x4E25;&#x91CD;&#x3002;</li>
</ul>
<p>&#x5982;&#x6211;&#x4E0A;&#x7BC7;&#x6587;&#x7AE0; <a href="/external_links/39354503396c2126938dfe6049cde4b3.html" target="blank" rel="noopener">&#x5C0F;&#x65F6;&#x5230;&#x5206;&#x949F; - &#x4E00;&#x6B65;&#x6B65;&#x4F18;&#x5316;&#x5DE8;&#x91CF;&#x5173;&#x952E;&#x8BCD;&#x7684;&#x5339;&#x914D;</a> &#x4E2D;&#x4ECB;&#x7ECD;&#x7684;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x662F;&#x6D88;&#x606F;&#x5904;&#x7406;&#x6D41;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x73AF;&#xFF0C;&#x88AB;&#x591A;&#x4E2A;&#x6D88;&#x606F;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x4F9D;&#x8D56;&#xFF0C;&#x6BCF;&#x6B21;&#x521D;&#x59CB;&#x5316;&#x8FDB;&#x7A0B;&#x8981; <code>6&#x79D2;</code> &#x5DE6;&#x53F3;&#x65F6;&#x95F4;&#x6784;&#x9020; Trie &#x6811;&#xFF0C;&#x800C;&#x4E14;&#x670D;&#x52A1;&#x8BFB;&#x53D6;&#x5173;&#x952E;&#x8BCD;&#x5927;&#x6587;&#x4EF6;&#x3001;&#x4F7F;&#x7528;&#x6811;&#x7EC4;&#x6784;&#x9020; Trie &#x6811;&#xFF0C;&#x4F1A;&#x5360;&#x7528;&#x5927;&#x91CF;(&#x76EE;&#x524D;&#x8BBE;&#x7F6E;&#x4E3A; <code>256M</code> )&#x5185;&#x5B58;&#x3002;</p>
<p>&#x6211;&#x5DF2;&#x7ECF;&#x628A;&#x8FDB;&#x7A0B;&#x5199;&#x6210;&#x4E86;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x8BA9;&#x5B83;&#x4EEC;&#x957F;&#x65F6;&#x95F4;&#x6267;&#x884C;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x7528;&#x66F4;&#x591A;&#x5730;&#x8003;&#x8651;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x4F46;&#x5360;&#x7528;&#x5185;&#x5B58;&#x91CF;&#x5DE8;&#x5927;&#x7684;&#x95EE;&#x9898;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x3002;&#x5982;&#x679C;&#x5173;&#x952E;&#x8BCD;&#x91CF;&#x518D;&#x5927;&#x4E00;&#x4E9B;&#xFF0C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E0A;&#x9762;&#x8DD1;&#x5341;&#x6765;&#x4E2A;&#x6D88;&#x606F;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x540E;&#x5C31;&#x5E72;&#x4E0D;&#x4E86;&#x5176;&#x4ED6;&#x4E86;&#x3002;</p>
<p>&#x800C;&#x4E14;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x9700;&#x6C42;&#x8BA9;&#x6211;&#x628A;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#x5C01;&#x88C5;&#x4E3A;&#x63A5;&#x53E3;&#x7ED9;&#x5916;&#x90E8;&#x8C03;&#x7528;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;web &#x670D;&#x52A1;&#x65F6;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5904;&#x7406;&#x8FDB;&#x7A0B;&#x7684;&#x751F;&#x5B58;&#x5468;&#x671F;&#x662F;&#x4ECE;&#x53D7;&#x7406;&#x8BF7;&#x6C42;&#x5230;&#x54CD;&#x5E94;&#x7ED3;&#x675F;&#xFF0C;&#x5982;&#x679C;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x90FD;&#x7528;&#x5927;&#x91CF;&#x5185;&#x5B58;&#x548C;&#x65F6;&#x95F4;&#x6765;&#x521D;&#x59CB;&#x5316;&#x670D;&#x52A1;&#xFF0C;&#x90A3;&#x63A5;&#x53E3;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x548C;&#x670D;&#x52A1;&#x5668;&#x538B;&#x529B;&#x53EF;&#x60F3;&#x800C;&#x77E5;&#x3002;</p>
<h3 id="&#x670D;&#x52A1;&#x62BD;&#x53D6;"><a href="#&#x670D;&#x52A1;&#x62BD;&#x53D6;" class="headerlink" title="&#x670D;&#x52A1;&#x62BD;&#x53D6;"></a>&#x670D;&#x52A1;&#x62BD;&#x53D6;</h3><p>&#x8FD9;&#x6837;&#xFF0C;&#x670D;&#x52A1;&#x5F62;&#x5F0F;&#x5FC5;&#x987B;&#x8981;&#x6539;&#x53D8;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x8FD9;&#x4E2A;&#x6587;&#x672C;&#x5339;&#x914D;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x80FD;&#x505A;&#x5230;&#xFF1A;</p>
<ul>
<li>&#x968F;&#x8C03;&#x968F;&#x8D70;&#xFF0C;&#x4E0D;&#x4F9D;&#x8D56;&#xFF0C;&#x4E0D;&#x518D;&#x4E0E;&#x201C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x670D;&#x52A1;&#x201D;&#x8026;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF1B;</li>
<li>&#x4E00;&#x6B21;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x671F;&#x95F4;&#x6301;&#x7EED;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF1B;</li>
<li>&#x540C;&#x6B65;&#x54CD;&#x5E94;&#xFF0C;&#x9AD8;&#x6548;&#x800C;&#x51C6;&#x786E;&#xFF0C;&#x6700;&#x597D;&#x80FD;&#x4E0D;&#x7528;&#x5404;&#x79CD;&#x9501;&#x6765;&#x4FDD;&#x6301;&#x8D44;&#x6E90;&#x5360;&#x6709;&#xFF1B;</li>
</ul>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x8FD9;&#x4E2A;&#x6587;&#x672C;&#x5339;&#x914D;&#x7684;&#x670D;&#x52A1;&#x62BD;&#x53D6;&#x51FA;&#x6765;&#xFF0C;&#x5355;&#x72EC;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x6765;&#x8FD0;&#x884C;&#xFF0C;&#x50CF;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x591A;&#x4E2A;&#x201C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x670D;&#x52A1;&#x201D;&#x5728;&#x6709;&#x9700;&#x8981;&#x65F6;&#x80FD;&#x8C03;&#x7528;&#x6B64;&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8003;&#x8651;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#x8FDB;&#x7A0B;&#x5982;&#x4F55;&#x4E0E;&#x5916;&#x754C;&#x901A;&#x4FE1;&#xFF0C;&#x63A5;&#x53D7;&#x5339;&#x914D;&#x8BF7;&#x6C42;&#xFF0C;&#x54CD;&#x5E94;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x3002;&#x7ED5;&#x6765;&#x7ED5;&#x53BB;&#xFF0C;&#x95EE;&#x9898;&#x8FD8;&#x662F;&#x56DE;&#x5230;&#x4E86; <code>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</code>&#x3002;</p>
<hr>
<h1 id="Unix-Domain-Sockets"><a href="#Unix-Domain-Sockets" class="headerlink" title="Unix Domain Sockets"></a>Unix Domain Sockets</h1><h3 id="&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"><a href="#&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;" class="headerlink" title="&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;"></a>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;</h3><blockquote>
<p>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#xFF08;IPC&#xFF0C;Inter-Process Communication&#xFF09;&#xFF0C;&#x6307;&#x81F3;&#x5C11;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x6216;&#x7EBF;&#x7A0B;&#x95F4;&#x4F20;&#x9001;&#x6570;&#x636E;&#x6216;&#x4FE1;&#x53F7;&#x7684;&#x4E00;&#x4E9B;&#x6280;&#x672F;&#x6216;&#x65B9;&#x6CD5;&#x3002;&#x8FDB;&#x7A0B;&#x662F;&#x8BA1;&#x7B97;&#x673A;&#x7CFB;&#x7EDF;&#x5206;&#x914D;&#x8D44;&#x6E90;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x4F4D;(&#x4E25;&#x683C;&#x8BF4;&#x6765;&#x662F;&#x7EBF;&#x7A0B;)&#x3002;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x72EC;&#x7ACB;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x5F7C;&#x6B64;&#x662F;&#x9694;&#x79BB;&#x7684;&#x3002;&#x4E3A;&#x4E86;&#x80FD;&#x4F7F;&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x4E92;&#x76F8;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;&#x5E76;&#x8FDB;&#x884C;&#x534F;&#x8C03;&#x5DE5;&#x4F5C;&#xFF0C;&#x624D;&#x6709;&#x4E86;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x3002;</p>
</blockquote>
<p>&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x7F51;&#x4E0A;&#x5BF9;&#x6B64;&#x4ECB;&#x7ECD;&#x7684;&#x4E5F;&#x5F88;&#x591A;&#xFF0C;&#x4E0B;&#x9762;&#x6839;&#x636E;&#x6587;&#x7AE0;&#x7684;&#x9700;&#x6C42;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x8FD9;&#x4E9B;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ul>
<li>&#x7BA1;&#x9053;&#xFF1A;&#x7BA1;&#x9053;&#x662F;Unix&#x6700;&#x521D;&#x7684;IPC&#x5F62;&#x5F0F;&#xFF0C;&#x4F46;&#x5B83;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5177;&#x6709;&#x5171;&#x540C;&#x7956;&#x5148;&#x8FDB;&#x7A0B;&#x7684;&#x5404;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x65E0;&#x6CD5;&#x7528;&#x4E8E;&#x5728;&#x6CA1;&#x6709;&#x4EB2;&#x7F18;&#x5173;&#x7CFB;&#x7684;&#x8FDB;&#x7A0B;&#x3002;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x201C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x670D;&#x52A1;&#x201D;&#x4E2D;&#x542F;&#x52A8;&#x201C;&#x6587;&#x672C;&#x5339;&#x914D;&#x670D;&#x52A1;&#x201D;&#xFF0C;&#x8DDF;&#x539F;&#x6765;&#x5DEE;&#x522B;&#x4E0D;&#x5927;&#x3002;</li>
<li>&#x547D;&#x540D;&#x7BA1;&#x9053;&#xFF1A;&#x4E5F;&#x88AB;&#x79F0;&#x4E3A;&#x6709;&#x540D;&#x7BA1;&#x9053;&#xFF0C;&#x5B83;&#x5728;Unix&#x79F0;&#x4E3A;<code>FIFO</code>&#xFF0C;&#x5B83;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x6765;&#x8FDB;&#x884C;&#x8FDB;&#x7A0B;&#x95F4;&#x6570;&#x636E;&#x4EA4;&#x4E92;&#xFF0C;&#x4F46;&#x670D;&#x52A1;&#x4E8E;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x9501;&#x6765;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x5199;&#x5165;&#x548C;&#x8BFB;&#x53D6;&#x4E0D;&#x5BF9;&#x5E94;&#x3002;</li>
<li>&#x4FE1;&#x53F7;&#x548C;&#x4FE1;&#x53F7;&#x91CF;&#xFF1A;&#x7528;&#x4E8E;&#x8FDB;&#x7A0B;/&#x7EBF;&#x7A0B;&#x4E8B;&#x4EF6;&#x7EA7;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x80FD;&#x4EA4;&#x6D41;&#x7684;&#x4FE1;&#x606F;&#x592A;&#x5C11;&#x3002;</li>
<li>&#x6D88;&#x606F;&#x961F;&#x5217;&#x548C;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#xFF1A;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x516C;&#x5171;&#x5185;&#x5B58;&#x4ECB;&#x8D28;&#x6765;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x6211;&#x4E4B;&#x524D;&#x4E5F;&#x5199;&#x8FC7;&#x4E00;&#x7BC7;&#x5173;&#x4E8E;PHP&#x8FDB;&#x7A0B;&#x95F4;&#x4F7F;&#x7528;&#x6D88;&#x606F;&#x961F;&#x5217;&#x548C;&#x5171;&#x4EAB;&#x5185;&#x5B58;&#x901A;&#x4FE1;&#x7684;&#x6587;&#x7AE0;&#xFF1A; <a href="/external_links/979ef93cfa42dfe557261c427610d31c.html" target="blank" rel="noopener">&#x4ECE;&#x5E76;&#x53D1;&#x5904;&#x7406;&#x8C08;PHP&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#xFF08;&#x4E8C;&#xFF09;System V IPC</a>&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x5728;&#x901A;&#x4FE1;&#x4E0A;&#x90FD;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF0C;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x65F6;&#x65E0;&#x6CD5;&#x5206;&#x8FA8;&#x8BF7;&#x6C42;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x54CD;&#x5E94;&#x4FE1;&#x606F;&#x3002;</li>
<li>socket&#xFF1A;&#x901A;&#x8FC7;Unix&#x5C01;&#x88C5;&#x597D;&#x7684;&#x7F51;&#x7EDC;API&#x6765;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x50CF;&#x6570;&#x636E;&#x5E93;&#x3001;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x662F;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#xFF0C;&#x5B83;&#x4EEC;&#x4E5F;&#x80FD;&#x63D0;&#x4F9B;&#x672C;&#x5730;&#x670D;&#x52A1;&#x3002;&#x4E0D;&#x8FC7;&#x7F51;&#x7EDC;socket&#x56FA;&#x7136;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x8981;&#x9762;&#x4E34;&#x7740;&#x6570;&#x636E;&#x5305;&#x88C5;&#x548C;&#x7F51;&#x7EDC;&#x8C03;&#x7528;&#x5F00;&#x9500;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F;&#x5B8C;&#x7F8E;&#x7684;&#x9009;&#x62E9;&#x3002;</li>
</ul>
<h3 id="&#x7B80;&#x5355;&#x4ECB;&#x7ECD;"><a href="#&#x7B80;&#x5355;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x7B80;&#x5355;&#x4ECB;&#x7ECD;"></a>&#x7B80;&#x5355;&#x4ECB;&#x7ECD;</h3><p>&#x5F53;&#x7136;&#x8FD8;&#x662F;&#x6709;&#x5B8C;&#x7F8E;&#x7684;&#x65B9;&#x5F0F;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x89D2; - <code>Unix Domain Sockets</code> &#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684; Socket&#xFF0C;&#x4F46;&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x7ECF;&#x8FC7;&#x7F51;&#x7EDC;&#x534F;&#x8BAE;&#x6808;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x6253;&#x5305;&#x62C6;&#x5305;&#x3001;&#x8BA1;&#x7B97;&#x6821;&#x9A8C;&#x548C;&#x3001;&#x7EF4;&#x62A4;&#x5E8F;&#x53F7;&#x548C;&#x5E94;&#x7B54;&#x7B49;&#xFF0C;&#x53EA;&#x662F;&#x5C06;&#x5E94;&#x7528;&#x5C42;&#x6570;&#x636E;&#x4ECE;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x62F7;&#x8D1D;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x7CFB;&#x7EDF;&#x5185;&#x901A;&#x4FE1;&#x6548;&#x7387;&#x66F4;&#x9AD8;&#x3002;&#x800C;&#x4E14;&#x514D;&#x53BB;&#x4E86;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#xFF0C;&#x5B83;&#x4E5F;&#x66F4;&#x80FD;&#x4FDD;&#x8BC1;&#x6D88;&#x606F;&#x7684;&#x5B8C;&#x6574;&#x6027;&#xFF0C;&#x65E2;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x4E5F;&#x4E0D;&#x4F1A;&#x987A;&#x5E8F;&#x9519;&#x4E71;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x7279;&#x6B8A;&#x7684; Socket&#xFF0C;&#x5B83;&#x7684;&#x521B;&#x5EFA;&#x3001;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x548C;&#x7F51;&#x7EDC; Socket &#x4E00;&#x6837;&#xFF0C;&#x4E00;&#x6B21;&#x5B8C;&#x6574;&#x7684;&#x4EA4;&#x4E92;&#xFF0C;&#x670D;&#x52A1;&#x7AEF;&#x90FD;&#x8981;&#x7ECF;&#x8FC7;<code>create&#x3001;bind&#x3001;listen&#x3001;accept&#x3001;read&#x3001;write</code>&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x8981;&#x901A;&#x8FC7;<code>create&#x3001;connect&#x3001;write&#x3001;read</code>&#x3002;&#x4E0E;&#x666E;&#x901A; Socket &#x4E0D;&#x540C;&#x7684;&#x662F;&#x5B83;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x5185;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x4E0D;&#x662F; IP &#x548C;&#x7AEF;&#x53E3;&#x3002;</p>
<p>&#x521B;&#x5EFA;&#x4EE3;&#x7801;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x591A;&#x4ECB;&#x7ECD;&#x4E86;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0; <a href="/external_links/4071c9a5b9a86bbda369c1b0bc97e5d2.html" target="blank" rel="noopener">&#x7528;C&#x5199;&#x4E00;&#x4E2A;web&#x670D;&#x52A1;&#x5668;&#xFF08;&#x4E00;&#xFF09; &#x57FA;&#x7840;&#x529F;&#x80FD;</a> &#x7684;<code>&#x529F;&#x80FD;&#x5B9E;&#x73B0;</code>&#x5C0F;&#x8282;&#x91CC;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x4E86; socket &#x901A;&#x4FE1;&#x7684;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#xFF0C;C &#x7CFB;&#x7684;&#x8BED;&#x8A00;&#x90FD;&#x662F;&#x76F8;&#x4F3C;&#x7684;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;</p>
<h3 id="&#x9002;&#x7528;&#x573A;&#x666F;"><a href="#&#x9002;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x9002;&#x7528;&#x573A;&#x666F;"></a>&#x9002;&#x7528;&#x573A;&#x666F;</h3><p>Unix Domain Sockets &#x771F;&#x7684;&#x662F;&#x8FDB;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x7684;&#x4E00;&#x4E2A;&#x91CD;&#x578B;&#x6B66;&#x5668;&#xFF0C;&#x7528;&#x5B83;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x3001;&#x4FE1;&#x606F;&#x4EA4;&#x4E92;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x9501;&#x7B49;&#x7E41;&#x6742;&#x64CD;&#x4F5C;&#xFF0C;&#x4E5F;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x6548;&#x7387;&#xFF0C;&#x53EF;&#x8C13;&#x662F;&#x7B80;&#x5355;&#x9AD8;&#x6548;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x201C;&#x91CD;&#x578B;&#x6B66;&#x5668;&#x201D; &#x7684;&#x5728;&#x5404;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#x4E5F;&#x6709;&#x9002;&#x5408;&#x4E0D;&#x9002;&#x5408;&#x3002;Unix Domain Sockets&#x9002;&#x7528;&#x4E8E;&#x4EE5;&#x4E0B;&#x573A;&#x666F;&#xFF1A;</p>
<ul>
<li>&#x670D;&#x52A1;&#x957F;&#x65F6;&#x95F4;&#x5B58;&#x5728;&#x3002; Unix Domain Sockets &#x7684;&#x670D;&#x52A1;&#x7AEF;&#x662F;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x4E00;&#x6837;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x5728;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x4E2D;&#xFF0C;&#x5B83;&#x963B;&#x585E;&#x5E76;&#x7B49;&#x5F85;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x7684;&#x7279;&#x6027;&#x53EF;&#x4EE5;&#x88AB;&#x5145;&#x5206;&#x5229;&#x7528;&#x3002;</li>
<li>&#x4E00;&#x670D;&#x52A1;&#x5668;&#x591A;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x5B83;&#x80FD;&#x901A;&#x8FC7; Socket &#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x6765;&#x533A;&#x5206;&#x4E0D;&#x540C;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x907F;&#x514D;&#x8D44;&#x6E90;&#x4E4B;&#x95F4;&#x7684;&#x9501;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x540C;&#x4E00;&#x7CFB;&#x7EDF;&#x5185;&#x3002;&#x5B83;&#x53EA;&#x80FD;&#x5728;&#x540C;&#x4E00;&#x7CFB;&#x7EDF;&#x5185;&#x8FDB;&#x884C;&#x8FDB;&#x7A0B;&#x6570;&#x636E;&#x590D;&#x5236;&#xFF0C;&#x8DE8;&#x7CFB;&#x7EDF;&#x8BF7;&#x4F7F;&#x7528;&#x4F20;&#x7EDF; Sockets&#x3002;</li>
</ul>
<hr>
<h1 id="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x4EE3;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"></a>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</h1><p>&#x63A5;&#x4E0B;&#x6765;&#x8981; show code &#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x5B66; PHP &#x7684;&#x90FD;&#x77E5;&#x9053;&#xFF0C;PHP &#x4E0D;&#x592A;&#x9002;&#x5408;&#x5904;&#x7406; CPU &#x5BC6;&#x96C6;&#x5F62;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x6211;&#x521A;&#x597D;&#x5B66;&#x4E86;&#x70B9; Go&#xFF0C;&#x4E00;&#x65F6;&#x624B;&#x75D2;&#xFF0C;&#x5C31;&#x7528; Go &#x5B9E;&#x73B0;&#x4E86;&#x4E0B; Trie &#x6811;&#xFF0C;&#x6240;&#x4EE5;&#x624D;&#x7275;&#x626F;&#x5230; PHP &#x548C; Go &#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x6709;&#x4E86;&#x4ECA;&#x5929;&#x7684;&#x6587;&#x7AE0;&#x3002;&#x5F53;&#x7136;&#x4ECB;&#x7ECD;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E0D;&#x53EA;&#x9002;&#x5408; PHP &#x4E0E; Go &#x901A;&#x4FE1;&#xFF0C;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x4E5F;&#x53EF;&#x4EE5;&#xFF0C;&#x81F3;&#x5C11; C&#x7CFB;&#x8BED;&#x8A00;&#x4E2D;&#x662F;&#x901A;&#x7528;&#x7684;&#x3002;</p>
<p>&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x89C1; <a href="/external_links/8e07dc91fdcd74682ff72a27e5ee617b.html" target="blank" rel="noopener">IPC-GitHub-&#x6795;&#x8FB9;&#x4E66;</a>&#xFF0C;&#x91CC;&#x9762;&#x8FD8;&#x9644;&#x5E26;&#x4E86;&#x4E00;&#x4EFD;&#x968F;&#x624B;&#x5199;&#x7684; PHP &#x7248;&#x672C;&#x7684; Unix Domain Sockets server &#x7AEF;&#x3002;</p>
<h3 id="Go-&#x5B9E;&#x73B0;&#x7684;-Trie-&#x6811;"><a href="#Go-&#x5B9E;&#x73B0;&#x7684;-Trie-&#x6811;" class="headerlink" title="Go &#x5B9E;&#x73B0;&#x7684; Trie &#x6811;"></a>Go &#x5B9E;&#x73B0;&#x7684; Trie &#x6811;</h3><p>Trie&#x6811;&#x4E0D;&#x518D;&#x662F;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x8FD9;&#x91CC;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x548C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`// trie&#x6811;&#x7ED3;&#x70B9;&#x5B9A;&#x4E49;`</span><br><span class="line">type Node struct {</span><br><span class="line">    depth    int</span><br><span class="line">    children map[int32]Node // &#x7528;map&#x5B9E;&#x73B0;key-value&#x578B;&#x7684; &#x5B57;&#x7B26;-&#x8282;&#x70B9; &#x5BF9;&#x5E94;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528; slice &#x7684; <code>append()</code> &#x51FD;&#x6570;&#x4FDD;&#x5B58;&#x9012;&#x589E;&#x7684;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x65F6;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x7531;&#x4E8E; slice &#x5BB9;&#x91CF;&#x4E0D;&#x591F;&#x800C;&#x91CD;&#x65B0;&#x5206;&#x914D;&#x5730;&#x5740;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x4F20;&#x5165; slice &#x7684;&#x5730;&#x5740;&#x6765;&#x4FDD;&#x5B58;&#x9012;&#x589E;&#x540E;&#x7684;&#x5339;&#x914D;&#x7ED3;&#x679C;&#x7ED3;&#x679C;&#xFF0C;<code>*result = append(*result, word)</code>&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5C06;&#x9012;&#x589E;&#x4E4B;&#x540E;&#x7684; slice &#x5730;&#x5740;&#x4F20;&#x56DE;&#x3002;</li>
<li>&#x7531;&#x4E8E; Go &#x4E2D;&#x7684;&#x7F16;&#x7801;&#x7EDF;&#x4E00;&#x4F7F;&#x7528;&#x7684; <code>utf-8</code>&#xFF0C;&#x4E0D;&#x7528;&#x50CF; PHP &#x4E00;&#x6837;&#x5224;&#x65AD;&#x5B57;&#x7B26;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x8FDB;&#x884C;&#x5173;&#x952E;&#x8BCD;&#x62C6;&#x6563;&#x548C;&#x6D88;&#x606F;&#x62C6;&#x6563;&#x65F6;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528; <code>int32()</code> &#x65B9;&#x6CD5;&#x5C06;&#x5173;&#x952E;&#x8BCD;&#x548C;&#x6D88;&#x606F;&#x90FD;&#x8F6C;&#x6362;&#x4E3A;&#x6210;&#x5458;&#x4E3A; <code>int32</code> &#x7C7B;&#x578B;&#x7684; slice&#xFF0C;&#x5339;&#x914D;&#x8FC7;&#x7A0B;&#x4E2D;&#x5C31;&#x4F7F;&#x7528; <code>int32</code> &#x7C7B;&#x578B;&#x7684;&#x6570;&#x5B57;&#x6765;&#x4EE3;&#x8868;&#x8FD9;&#x4E2A;&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#xFF0C;&#x5339;&#x914D;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x4F7F;&#x7528;<code>fmt.Printf(&quot;%c&quot;, int32)</code>&#x5C06;&#x5176;&#x8F6C;&#x6362;&#x4E3A;&#x4E2D;&#x6587;&#x3002;</li>
</ul>
<h3 id="Go-Server"><a href="#Go-Server" class="headerlink" title="Go Server"></a>Go Server</h3><p>Go &#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; socket &#x5E76;&#x4F7F;&#x7528;&#x7684;&#x6B65;&#x9AA4;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x662F; Go &#x6CA1;&#x6709;&#x5F02;&#x5E38;&#xFF0C;&#x5224;&#x65AD; error &#x4F1A;&#x6BD4;&#x8F83;&#x6076;&#x5FC3;&#x4E00;&#x70B9;&#xFF0C;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x6CA1;&#x6709;&#x5927;&#x795E;&#x6709;&#x66F4;&#x597D;&#x7684;&#x5199;&#x6CD5;&#x3002;&#x4E0B;&#x9762;&#x4E3A;&#x4E86;&#x7CBE;&#x7B80;&#xFF0C;&#x628A; error &#x5168;&#x7F6E;&#x7A7A;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801; `// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;Unix domain soceket`</span><br><span class="line">    socket, _ := net.Listen(&quot;unix&quot;, &quot;/tmp/keyword_match.sock&quot;)</span><br><span class="line">    // &#x5173;&#x95ED;&#x65F6;&#x5220;&#x9664;&#x7ED1;&#x5B9A;&#x7684;&#x6587;&#x4EF6;</span><br><span class="line">    defer syscall.Unlink(&quot;/tmp/keyword_match.sock&quot;) </span><br><span class="line">    // &#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x76D1;&#x542C;&#x548C;&#x53D7;&#x7406;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;</span><br><span class="line">    for {</span><br><span class="line">        client, _ := socket.Accept()</span><br><span class="line">        </span><br><span class="line">        buf := make([]byte, 1024)</span><br><span class="line">        data_len, _ := client.Read(buf)</span><br><span class="line">        data := buf[0:data_len]</span><br><span class="line">        msg := string(data)</span><br><span class="line">        </span><br><span class="line">        matched := trie.Match(tree, msg)</span><br><span class="line">        response := []byte(&quot;[]&quot;) // &#x7ED9;&#x54CD;&#x5E94;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;</span><br><span class="line">        if len(matched) &gt; 0 {</span><br><span class="line">            json_str, _ := json.Marshal(matched)</span><br><span class="line">            response = []byte(string(json_str))</span><br><span class="line">        }</span><br><span class="line">        _, _ = client.Write(response)</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h3 id="PHP-Client"><a href="#PHP-Client" class="headerlink" title="PHP Client"></a>PHP Client</h3><p>&#x4E0B;&#x9762;&#x662F; PHP &#x5B9E;&#x73B0;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;`$msg = &quot;msg&quot;;`</span><br><span class="line">// &#x521B;&#x5EFA; &#x8FDE;&#x63A5; &#x53D1;&#x9001;&#x6D88;&#x606F; &#x63A5;&#x6536;&#x54CD;&#x5E94; &#x5173;&#x95ED;&#x8FDE;&#x63A5;</span><br><span class="line">$socket = socket_create(AF_UNIX, SOCK_STREAM, 0);</span><br><span class="line">socket_connect($socket, &apos;/tmp/keyword_match.sock&apos;);</span><br><span class="line">socket_send($socket, $msg, strlen($msg), 0);</span><br><span class="line">$response = socket_read($socket, 1024);</span><br><span class="line">socket_close($socket);</span><br><span class="line"></span><br><span class="line">// &#x6709;&#x503C;&#x5219;&#x4E3A;&#x5339;&#x914D;&#x6210;&#x529F;</span><br><span class="line">if (strlen($response) &gt; 3) {</span><br><span class="line">    var_dump($response);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h1><h3 id="&#x6548;&#x7387;"><a href="#&#x6548;&#x7387;" class="headerlink" title="&#x6548;&#x7387;"></a>&#x6548;&#x7387;</h3><p>&#x8FD9;&#x91CC;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x8FD9;&#x5957;&#x8BBE;&#x8BA1;&#x7684;&#x6548;&#x7387;&#x8868;&#x73B0;&#xFF1A;</p>
<p>&#x7EAF;&#x7CB9;&#x7528; Go &#x8FDB;&#x884C;&#x6587;&#x672C;&#x5173;&#x952E;&#x8BCD;&#x5339;&#x914D;&#xFF0C;&#x4E00;&#x5343;&#x6761;&#x6570;&#x636E;&#x8FD0;&#x884C;&#x4E00;&#x79D2;&#x591A;&#xFF0C;&#x5DEE;&#x4E0D;&#x591A;&#x662F; PHP &#x6548;&#x7387;&#x7684;&#x4E24;&#x500D;&#x3002;&#x4E0D;&#x8FC7;&#x8BF4;&#x597D;&#x7684; 8&#x500D;&#x6548;&#x7387;&#x5462;&#xFF1F;&#x679C;&#x7136;&#x6D4B;&#x8BC4;&#x90FD;&#x662F;&#x9A97;&#x4EBA;&#x7684;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x6211;&#x5199;&#x6CD5;&#x6709;&#x95EE;&#x9898;&#x6216;&#x8005; Trie &#x6811;&#x4E0D;&#x5728; Go &#x7684;&#x53D1;&#x6325;&#x8303;&#x56F4;&#x4E4B;&#x5185;&#x3002;&#x7136;&#x540E;&#x662F; PHP &#x4F7F;&#x7528; Unix Domain Socket &#x8C03;&#x7528; Go &#x670D;&#x52A1;&#x7684;&#x8017;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x8FDB;&#x7A0B;&#x95F4;&#x590D;&#x5236;&#x6570;&#x636E;&#x8017;&#x65F6;&#x6216; PHP &#x62D6;&#x4E86;&#x540E;&#x817F;&#xFF0C;3&#x79D2;&#x591A;&#x4E00;&#x70B9;&#xFF0C;&#x8DDF;&#x7EAF; PHP &#x811A;&#x672C;&#x5DEE;&#x4E0D;&#x591A;&#x3002;</p>
<h3 id="&#x6742;&#x8C08;"><a href="#&#x6742;&#x8C08;" class="headerlink" title="&#x6742;&#x8C08;"></a>&#x6742;&#x8C08;</h3><p>&#x7528; PHP &#x7684;&#x90FD;&#x77E5;&#x9053;&#xFF0C;PHP &#x56E0;&#x4E3A;&#x89E3;&#x91CA;&#x578B;&#x8BED;&#x8A00;&#x7684;&#x7279;&#x6027;&#x548C;&#x5176;&#x9AD8;&#x5EA6;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x5BFC;&#x81F4;&#x5176;&#x867D;&#x7136;&#x5728;&#x5F00;&#x53D1;&#x4E0A;&#x901F;&#x5EA6;&#x5F88;&#x5FEB;&#xFF0C;&#x53EF;&#x662F;&#x6267;&#x884C;&#x4E0E;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x76F8;&#x6BD4;&#x7565;&#x5DEE;&#x3002;&#x5BF9;&#x6B64;&#xFF0C;&#x4E1A;&#x754C;&#x7684; FB &#x6709; HHVM&#xFF0C;PHP7 &#x6709; opcache &#x65B0;&#x7279;&#x6027;&#xFF0C;&#x636E;&#x8BF4;&#x8FD8;&#x8981;&#x5728; PHP8 &#x6DFB;&#x52A0; JIT&#xFF0C;&#x7528;&#x4EE5;&#x5F25;&#x8865;&#x5176;&#x5148;&#x5929;&#x786C;&#x4F24;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#xFF0C;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x8DDF;&#x6211;&#x4E00;&#x6837;&#x5BF9;&#x4E8E;&#x6548;&#x7387;&#x6709;&#x6267;&#x8457;&#x8FFD;&#x6C42;&#x7684;&#x4EBA;&#x6765;&#x8BF4;&#xFF0C;&#x5728;&#x4E86;&#x89E3;&#x4F7F;&#x7528; PHP &#x7684;&#x65B0;&#x7279;&#x6027;&#x4E4B;&#x5916;&#xFF0C;&#x81EA;&#x5DF1;&#x518D;&#x638C;&#x63E1;&#x4E00;&#x95E8;&#x8F83;&#x9AD8;&#x6267;&#x884C;&#x6548;&#x7387;&#x3001;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x7565;&#x4F4E;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x7528;&#x6765;&#x5199;&#x4E00;&#x4E9B;&#x9AD8;&#x8BA1;&#x7B97;&#x91CF;&#xFF0C;&#x903B;&#x8F91;&#x5355;&#x4E00;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4E0E; PHP &#x4E92;&#x8865;&#x6216;&#x8BB8;&#x4F1A;&#x66F4;&#x597D;&#x4E00;&#x70B9;&#x3002;</p>
<p>&#x4E8E;&#x662F;&#xFF0C;&#x5728;&#x8003;&#x8651;&#x826F;&#x4E45;&#xFF0C;&#x4E5F;&#x89C1;&#x8BC6;&#x4E86;&#x5404;&#x79CD; Go &#x7684;&#x652F;&#x6301;&#x8005;&#x548C;&#x53CD;&#x5BF9;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x6495;&#x903C;&#x540E;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x8FD8;&#x662F;&#x8981;&#x76F8;&#x4FE1;&#x4E00;&#x4E0B;&#x8C37;&#x6B4C;&#x7238;&#x7238;&#xFF0C;&#x6BD5;&#x7ADF;&#x4E5F;&#x6CA1;&#x4EC0;&#x4E48;&#x5176;&#x4ED6;&#x6211;&#x89C9;&#x5F97;&#x53EF;&#x9009;&#x7684;&#x8BED;&#x8A00;&#x4E86;&#x3002;PS&#xFF1A;&#x8BF7;&#x4E0D;&#x8981;&#x9488;&#x5BF9;&#x8FD9;&#x4E00;&#x6BB5;&#x53D1;&#x8868;&#x610F;&#x89C1;&#xFF0C;&#x8C22;&#x8C22;&#xFF1A;&#xFF09;</p>
<p>&#x53E6;&#x5916;C&#x5462;&#xFF0C;&#x867D;&#x7136;&#x6682;&#x65F6;&#x5F00;&#x53D1;&#x4E2D;&#x7528;&#x4E0D;&#x5230;&#xFF0C;&#x53EF;&#x662F;&#x6BD5;&#x7ADF;&#x662F;&#x5F53;&#x4EE3;N&#x591A;&#x8BED;&#x8A00;&#x7684;&#x8D77;&#x6E90;&#xFF0C;&#x5076;&#x5C14;&#x5199;&#x5199;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3001;&#x7B97;&#x6CD5;&#x4EC0;&#x4E48;&#x7684;&#x4EE5;&#x514D;&#x751F;&#x9508;&#x3002;&#x800C;&#x4E14;&#x5B66;&#x4E86;&#x4E9B;C&#xFF0C;&#x4ECE; PHP &#x5230; Go&#xFF0C;&#x5207;&#x6362;&#x8D77;&#x6765;&#x8FD8;&#x7565;&#x6709;&#x4E9B;&#x5F97;&#x5FC3;&#x5E94;&#x624B;&#x7684;&#x611F;&#x89C9;~</p>
<p>&#x5173;&#x4E8E;&#x672C;&#x6587;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#x53EF;&#x4EE5;&#x5728;&#x4E0B;&#x9762;&#x7559;&#x8A00;&#x4EA4;&#x6D41;&#xFF0C;&#x5982;&#x679C;&#x60A8;&#x89C9;&#x5F97;&#x672C;&#x6587;&#x5BF9;&#x60A8;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x53EF;&#x4EE5;&#x70B9;&#x51FB;&#x4E0B;&#x9762;&#x7684; <strong>&#x63A8;&#x8350;</strong> &#x652F;&#x6301;&#x4E00;&#x4E0B;&#x6211;&#x3002;&#x535A;&#x5BA2;&#x4E00;&#x76F4;&#x5728;&#x66F4;&#x65B0;&#xFF0C;&#x6B22;&#x8FCE; <strong>&#x5173;&#x6CE8;</strong> &#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/e473388aea6f063bf21ba5e42eeb8614.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513584058382.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513584058382.html" itemprop="url">一个开源的 Java 我的世界 (Minecraft) 服务</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T14:42:36+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="/external_links/386f8248e741a4c439f0ae4e517e5c23.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7009fd5f1e19cb335be7f726ce5b17960f9e04124c7b45029528d38808f97512" alt="Built with Love"></a> <a href="/external_links/253eba59384fa3fe19e429929ebe9de3.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/53f2b3481e01c7b07eaa7071e793006ad03fa3b57318b6cf3cc8b0245a42d940" alt="Join the Discord chat"></a><br><a href="/external_links/23aabcf390e0572b3e4db86730a00e26.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/29751c5455ba7ec2aa809b3830c876906ce33fa7345ed1ac051cb14fc9470ae4" alt="Build Status"></a></p>
<p><a href="/external_links/dc13f69afec3ddfa183ddbbd38ec0199.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/271f3ee3062b97fb0241d57253583defde0b447a72a380dd793819b3de2814b9" alt="Glowstone logo"></a></p>
<p>A fast, customizable and compatible open source server for Minecraft: Java Edition.</p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Glowstone is a lightweight, from scratch, open source <a href="/external_links/00e650df22650fbcdfc91b0fb741e5c9.html" target="blank" rel="noopener">Minecraft</a> server written in Java that supports plugins written for the Bukkit API and its major forks, Spigot and Paper.</p>
<p>The main goals of the project are to provide a lightweight implementation of the Bukkit API and Minecraft server where exact vanilla functionality is not needed or higher performance is desired than the official software can deliver. Glowstone<br> makes use of a thread-per-world model and performs synchronization only when necessitated by the Bukkit API.</p>
<p>Still have questions? Check out our <a href="/external_links/1776b152fa072446af83a0a3e1c8f2d7.html" target="blank" rel="noopener">FAQ</a>.</p>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><p>Glowstone has a few key advantages over CraftBukkit:</p>
<ul>
<li>It is <strong>100% open source</strong>. While CraftBukkit and most other mods are open source, they rely on decompiled Minecraft source code. Glowstone&#x2019;s code is completely original.</li>
<li>Because of this, it is easy to contribute to Glowstone&#x2019;s development. The barrier of entry to contributions is lower because there is no need to work around decompiled source or maintain a minimal diff.</li>
<li>Glowstone supports all plugins written for the Bukkit, Spigot and Paper APIs natively. In practice, some plugins may try to make use of parts of the API which are not yet implemented, but in a completed state Glowstone would support all Bukkit<br>plugins.</li>
<li>Glowstone&#x2019;s simplicity affords it a performance improvement over CraftBukkit and other servers, making it especially suited for situations where a large amount of players must be supported but vanilla game features are not needed.</li>
</ul>
<p>However, there are several drawbacks:</p>
<ul>
<li>Glowstone <strong>is not finished</strong>. Nothing is guaranteed to work, though many things are likely to. If in doubt, file an issue.</li>
<li>Bukkit plugins which expect the presence of CraftBukkit-specific code (that are in the <code>org.bukkit.craftbukkit</code> or <code>net.minecraft.server</code> packages) will not work on Glowstone unless they are designed to fail gracefully.</li>
<li>Glowstone is not produced by the Bukkit team, and while we do make an effort to produce quality work, Glowstone does not undergo the same rigorious testing as the Bukkit project.</li>
</ul>
<p>For a current list of features, <a href="/external_links/e944457123dfbfc2109370bac9d0f48e.html" target="blank" rel="noopener">check the wiki</a>.</p>
<h2 id="Downloads"><a href="#Downloads" class="headerlink" title="Downloads"></a>Downloads</h2><p><a href="/external_links/23aabcf390e0572b3e4db86730a00e26.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d0197832c4e1522d07ad86dd8c730102d10698076c51f8dd0b63c787221df052" alt="Build Status"></a></p>
<p>If you don&#x2019;t want to build from source, pre-built jar files are available to download from <a href="/external_links/23aabcf390e0572b3e4db86730a00e26.html" target="blank" rel="noopener"><strong>CircleCI</strong></a> - click the latest build and then open the &#x201C;Artifacts&#x201D;<br> tab <strong>(you must be logged in for this to show)</strong>. The <code>glowstone.jar</code> artifact will be under <code>tmp/circle-artifacts.#######/</code>.</p>
<h2 id="Building"><a href="#Building" class="headerlink" title="Building"></a>Building</h2><h3 id="1-Setup"><a href="#1-Setup" class="headerlink" title="1. Setup"></a>1. Setup</h3><p>After installing <a href="/external_links/163cf0953b986f55976af500587eea1e.html" target="blank" rel="noopener">Oracle JDK</a> (recommended) or <a href="/external_links/818ff2cdb47d176ca319ceea2a7a9f83.html" target="blank" rel="noopener">OpenJDK</a>, and <a href="/external_links/6b70a1e38eca7135d863dbbeb7fc1013.html" target="blank" rel="noopener">Maven</a>, checkout the source:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;git clone https://github.com/GlowstoneMC/Glowstone</span><br><span class="line">cd Glowstone</span><br></pre></td></tr></table></figure>

<h3 id="2-Build"><a href="#2-Build" class="headerlink" title="2. Build"></a>2. Build</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;./setup.sh</span><br></pre></td></tr></table></figure>

<p>The final jar will be placed in <code>target/</code> named <code>glowstone.jar</code>.</p>
<h2 id="Running"><a href="#Running" class="headerlink" title="Running"></a>Running</h2><p>Running Glowstone is simple because its dependencies are shaded into the output jar at compile time. Simply execute <code>java -jar glowstone.jar</code> along with any extra JVM options desired (we recommend using <code>java -Xms1G -Xmx1G -XX:+UseG1GC -jar glowstone.jar</code>).<br> A variety of command-line options are also available - run <code>java -jar glowstone.jar --help</code> for more information.</p>
<p>By default, configuration is stored in the <code>config/</code> subdirectory and logs are stored in the <code>logs/</code> subdirectory. The main configuration file is <code>config/glowstone.yml</code>, which replaces CraftBukkit&#x2019;s <code>server.properties</code> and <code>bukkit.yml</code>. Settings from these two files will be copied over to Glowstone&#x2019;s configuration during the default configuration generation process.</p>
<p>Glowstone uses <a href="/external_links/ceeb11fd2a8011816bc1afd8241792e4.html" target="blank" rel="noopener">JLine</a> for console input and colored console output. The JLine console can be disabled in the configuration if a flat console is desired.</p>
<p>Need more help? Check out <a href="/external_links/c1428d0df94141375ae6f2392c92157a.html" target="blank" rel="noopener">our wiki</a> for some guides that will help you with running, maintaining and configuring your Glowstone server.</p>
<h2 id="Playing"><a href="#Playing" class="headerlink" title="Playing"></a>Playing</h2><p>For those of you who just want to play on a Glowstone server, we have one available for testing at <code>mc.glowstone.net</code>. Have fun!</p>
<h2 id="Docs-and-Support"><a href="#Docs-and-Support" class="headerlink" title="Docs and Support"></a>Docs and Support</h2><p>The best place to receive support is on <a href="/external_links/08ce0382ab12ac38f1bc622de9b03cbb.html" target="blank" rel="noopener">GitHub issues</a>. When reporting bugs, please retest and include whether the problem reproduces on:</p>
<ul>
<li>Earlier <a href="/external_links/201d39cc20ed3bee5d5b33aea7756fdf.html" target="blank" rel="noopener">builds</a> of Glowstone</li>
<li><a href="/external_links/9464a353a7218227ed8529e1a4147217.html" target="blank" rel="noopener">Glowstone Legacy</a>, if applicable</li>
</ul>
<p>Javadocs for Glowstone can be found <a href="/external_links/34caf3a2f51358d4351aedcbca27da09.html" target="blank" rel="noopener">here</a>.</p>
<p>For documentation on the Glowkit API (an updated Bukkit for Glowstone, based on the Paper API, compatible with Spigot&#x2019;s update to Bukkit), see the <a href="/external_links/7fd6e3ae3c53e126666602ca933f2c91.html" target="blank" rel="noopener">Glowkit Javadocs</a>.</p>
<h2 id="Contributing"><a href="#Contributing" class="headerlink" title="Contributing"></a>Contributing</h2><p>First of all, thank you for your interest in advancing Glowstone! We always love to see new developers work on the project! You can find all of our resources on how to get started on our <a href="/external_links/c1428d0df94141375ae6f2392c92157a.html" target="blank" rel="noopener">wiki</a>.</p>
<h2 id="Credits"><a href="#Credits" class="headerlink" title="Credits"></a>Credits</h2><ul>
<li><a href="/external_links/e35692a32a635f68a392946a058d6b39.html" target="blank" rel="noopener">The Minecraft Coalition</a> and <a href="/external_links/f4965101a80e5b6e517b632d8d1aab79.html" target="blank" rel="noopener"><code>#mcdevs</code></a> - protocol and file formats research.</li>
<li><a href="/external_links/30bd8e6cdb5bb5015c36187a8b524e83.html" target="blank" rel="noopener">The Bukkit team</a> for their outstandingly well-designed plugin API.</li>
<li><a href="/external_links/c81dc5aee729e0a920ad6ed46741a61a.html" target="blank" rel="noopener">The SpigotMC team</a> for updating and enhancing the Bukkit plugin API.</li>
<li><a href="/external_links/32730324a98c1dbf07bac16fcc1c659f.html" target="blank" rel="noopener">AquiferMC</a> for further enhancing the Bukkit API.</li>
<li><a href="/external_links/c0c78cfe060f257db39816ab9c77a409.html" target="blank" rel="noopener">The SpongePowered Team</a> for creating the Sponge API.</li>
<li><a href="/external_links/7770a79f283a24bc161828803ac3db5c.html" target="blank" rel="noopener">Trustin Lee</a> - author of the <a href="/external_links/78e423c73721e0a137a7db08b8359df6.html" target="blank" rel="noopener">Netty</a> library.</li>
<li><a href="/external_links/83fbdef8bda2a868d9c4f7504c418525.html" target="blank" rel="noopener">Graham Edgecombe</a> - author of the original <a href="/external_links/edbda91e84ea0677ea3c49eca19102ba.html" target="blank" rel="noopener">Lightstone</a>.</li>
<li><a href="/external_links/d19cfe6a362155584db5b6a0f9272b01.html" target="blank" rel="noopener">Tad Hardesty</a> and <a href="/external_links/0a4a905000744f227a8aaa614a83fcac.html" target="blank" rel="noopener">all the contributors</a> to Glowstone Legacy.</li>
<li>All the people behind <a href="/external_links/8f6256833776d582c8ccdbfa4fb30f21.html" target="blank" rel="noopener">Maven</a> and <a href="/external_links/d2190730ef976fbfd5a89270a0a038e0.html" target="blank" rel="noopener">Java</a>.</li>
<li><a href="/external_links/636480b2d050dd3813213554c6a239d9.html" target="blank" rel="noopener">Notch</a> and <a href="/external_links/02f5d71363a0158af9f9dd6e46890d64.html" target="blank" rel="noopener">Mojang</a> - for making such an awesome game in the first place!</li>
</ul>
<h2 id="Copyright"><a href="#Copyright" class="headerlink" title="Copyright"></a>Copyright</h2><p>Glowstone is open-source software released under the MIT license. Please see the <code>LICENSE</code> file for details.</p>
<p>Glowkit is open-source software released under the GPL license. Please see the <code>LICENSE.txt</code> file in the Glowkit repository for details.</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/3e93e15617ce6f6139e14dab8669a107.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513630179335.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513630179335.html" itemprop="url">分析型数据仓库中读写分离的实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:58:51+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x672C;&#x6587;&#x4F5C;&#x8005;&#x4E3A;&#x795E;&#x7B56;&#x6570;&#x636E;&#x8D44;&#x6DF1;&#x7814;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;&#x5F20;&#x5E7F;&#x5F3A;&#xFF0C;&#x7248;&#x6743;&#x5F52;&#x795E;&#x7B56;&#x6570;&#x636E;&#x6240;&#x6709;&#x3002;</strong></p>
<p> &#x548C;&#x4EE5; MySQL<br> &#x4E3A;&#x4EE3;&#x8868;&#x7684;&#x4F20;&#x7EDF;&#x4E8B;&#x52A1;&#x578B;&#x6570;&#x636E;&#x5E93;&#x76F8;&#x6BD4;&#xFF0C;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x4E3B;&#x8981;&#x9762;&#x5411;&#x6279;&#x91CF;&#x5199;&#x548C;&#x67E5;&#x8BE2;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x652F;&#x6301;&#x66F4;&#x65B0;&#x3001;&#x4E8B;&#x52A1;&#x8FD9;&#x4E9B;&#x9AD8;&#x7EA7;&#x7279;&#x6027;&#x3002;&#x4E00;&#x4E9B;&#x5546;&#x7528;&#x7684;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5206;&#x6790;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F8B;&#x5982; Vertica<br> &#xFF0C;&#x5DF2;&#x7ECF;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x5343;&#x4EBF;&#x7EA7;&#x6570;&#x636E;&#x7684;&#x79D2;&#x7EA7;&#x5BFC;&#x5165;&#x548C;&#x79D2;&#x7EA7;&#x67E5;&#x8BE2;&#x3002;</p>
<p> &#x795E;&#x7B56;&#x6570;&#x636E;&#x4E00;&#x76F4;&#x81F4;&#x529B;&#x4E8E;&#x5E2E;&#x52A9;&#x4F01;&#x4E1A;&#x642D;&#x5EFA;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#xFF0C;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7684;&#x79D2;&#x7EA7;&#x54CD;&#x5E94;&#xFF0C;&#x79EF;&#x7D2F;&#x6570;&#x636E;&#x8D44;&#x4EA7;&#x3002;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x795E;&#x7B56;&#x6570;&#x636E;&#x5728;&#x6280;&#x672F;&#x4E0A;&#x7684;&#x63A2;&#x7D22;&#x4E0E;&#x5B9E;&#x8DF5;&#xFF0C;&#x63A2;&#x8BA8;&#x5982;&#x4F55;&#x5229;&#x7528;&#x73B0;&#x6709;&#x7684;&#x5F00;&#x6E90;&#x7EC4;&#x4EF6;&#x5B9E;&#x73B0;&#x5206;&#x6790;&#x578B;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5F53;&#x4E2D;&#x7684;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x3002;</p>
<p> &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x5206;&#x79BB;</p>
<p> &#x5206;&#x6790;&#x6027;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x4E00;&#x822C;&#x6709;&#x5982;&#x4E0B;&#x51E0;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#xFF08;1<br>&#xFF09;&#x9762;&#x4E34;&#x7740;&#x590D;&#x6742;&#x7684;&#x591A;&#x7EF4;&#x5206;&#x6790;&#x9700;&#x6C42;&#xFF0C;&#x80FD;&#x591F;&#x8FDB;&#x884C;&#x4EFB;&#x610F;&#x7EF4;&#x5EA6;&#x7684;&#x4E0A;&#x5377;&#x4E0B;&#x94BB;&#x3002;</li>
<li>&#xFF08;2<br>&#xFF09;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x7EF4;&#x5EA6;&#x4E00;&#x822C;&#x8F83;&#x591A;&#xFF0C;&#x6240;&#x4EE5;&#x662F;&#x5BBD;&#x8868;&#xFF0C;&#x800C;&#x4E14;&#x4E00;&#x822C;&#x6BD4;&#x8F83;&#x7A00;&#x758F;&#x3002;</li>
<li>&#xFF08;3<br>&#xFF09;&#x6570;&#x636E;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x4E00;&#x6B21;&#x5199;&#x5165;&#xFF0C;&#x591A;&#x6B21;&#x67E5;&#x8BE2;&#x3002;</li>
</ul>
<p> &#x9488;&#x5BF9;&#x8FD9;&#x6837;&#x7279;&#x70B9;&#xFF0C;&#x5206;&#x6790;&#x6027;&#x6570;&#x636E;&#x5E93;&#x4E00;&#x822C;&#x9009;&#x62E9;&#x5217;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982; Parquet<br> &#x7B49;&#x3002;&#x4F18;&#x70B9;&#x662F;&#x5BF9;&#x4E8E;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x6548;&#x7387;&#x5F88;&#x9AD8;&#xFF0C;&#x800C;&#x4E14;&#x5BF9;&#x4E8E;&#x7A00;&#x758F;&#x7684;&#x5BBD;&#x8868;&#x5177;&#x6709;&#x5F88;&#x9AD8;&#x7684;&#x5B58;&#x50A8;&#x538B;&#x7F29;&#x6BD4;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x5217;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x9762;&#x5411;&#x8BFB;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E3A; ReadOptimized Store<br> &#xFF08;ROS<br> &#xFF09;&#x3002;</p>
<p> &#x4F46;&#x662F;&#x5217;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x7F3A;&#x70B9;&#xFF1A;&#x8FD9;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x4E00;&#x65E6;&#x751F;&#x6210;&#xFF0C;&#x5C31;&#x5F88;&#x96BE;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x4E5F;&#x5F88;&#x96BE;&#x5F80;&#x5DF2;&#x6709;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x5F53;&#x4E2D;&#x63D2;&#x5165;&#x65B0;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x80FD;&#x589E;&#x52A0;&#x65B0;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x3002;&#x50CF; MySQL<br> &#x8FD9;&#x79CD;&#x4F20;&#x7EDF;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4F7F;&#x7528;&#x7684;&#x884C;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x9002;&#x5408;&#x4FEE;&#x6539;&#x548C;&#x63D2;&#x5165;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x8FD9;&#x79CD;&#x884C;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x662F;&#x9762;&#x5411;&#x5199;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#xFF0C;&#x79F0;&#x4E3A; WriteOptimized Store<br> &#xFF08;WOS<br> &#xFF09;&#x3002;</p>
<p> &#x7EFC;&#x4E0A;&#x6240;&#x8BC9;&#xFF0C;&#x8981;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x79D2;&#x7EA7;&#x5BFC;&#x5165;&#x3001;&#x79D2;&#x7EA7;&#x67E5;&#x8BE2;&#x7684;&#x5206;&#x6790;&#x578B;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5982;&#x679C;&#x53EA;&#x9009;&#x7528; ROS<br> &#xFF0C;&#x5219;&#x5F88;&#x96BE;&#x652F;&#x6301;&#x5927;&#x6570;&#x636E;&#x91CF;&#x7684;&#x79D2;&#x7EA7;&#x5BFC;&#x5165;&#x3002;&#x5982;&#x679C;&#x53EA;&#x9009;&#x7528; WOS<br> &#xFF0C;&#x5219;&#x5F88;&#x96BE;&#x5B9E;&#x73B0;&#x4EFB;&#x610F;&#x7EF4;&#x5EA6;&#x7684;&#x79D2;&#x7EA7;&#x67E5;&#x8BE2;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x3002;</p>
<p> &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;</p>
<p> &#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5F53;&#x4E2D;&#x9700;&#x8981;&#x540C;&#x65F6;&#x5B58;&#x5728; WOS<br> &#x548C; ROS<br> &#xFF0C;&#x8FD9;&#x6837;&#x5BF9;&#x4E8E;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x90FD;&#x751F;&#x6210; WOS<br> &#x578B;&#x6587;&#x4EF6;&#xFF1B;&#x540C;&#x65F6;&#x6240;&#x6709;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#xFF0C;&#x5219;&#x4E3B;&#x8981;&#x4F9D;&#x8D56;&#x4E8E; ROS<br> &#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x4E5F;&#x8981;&#x67E5;&#x8BE2;&#x5C11;&#x91CF;&#x7684; WOS<br> &#x6587;&#x4EF6;&#x3002;&#x6574;&#x4F53;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/58d713f4fb5cd9b390ff42e37e5238db587261328af4ad244253a60abb1521e8" alt> </p>
<p> &#x56FE;1<br> &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x539F;&#x7406;&#x56FE;</p>
<p> &#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;WOS<br> &#x6587;&#x4EF6;&#x9700;&#x8981;&#x5B9A;&#x671F;&#x8F6C;&#x6362;&#x4E3A; ROS<br> &#x6587;&#x4EF6;&#xFF0C;&#x540C;&#x65F6;&#x56E0;&#x4E3A; ROS<br> &#x5728;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x5F53;&#x4E2D;&#x4E00;&#x822C;&#x662F;&#x5206;&#x4E3A;&#x591A;&#x4E2A; Partition<br> &#x5B58;&#x5728;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x4E2A; WOS<br> &#x53EF;&#x80FD;&#x8F6C;&#x5316;&#x4E3A;&#x591A;&#x4E2A; ROS<br> &#x3002;&#x8F6C;&#x5316;&#x7684;&#x8FC7;&#x7A0B;&#x9700;&#x8981;&#x662F;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x4E0A;&#x5C42;&#x67E5;&#x8BE2;&#x5F15;&#x64CE;&#x6765;&#x8BF4;&#xFF0C;&#x540C;&#x4E00;&#x65F6;&#x523B;&#xFF0C;&#x540C;&#x6837;&#x7684;&#x6570;&#x636E;&#x53EA;&#x80FD;&#x6709;&#x4E00;&#x4EFD;&#x3002;</p>
<p> &#x5F00;&#x6E90;&#x65B9;&#x6848;&#x7684;&#x64CD;&#x4F5C;</p>
<p> &#x524D;&#x9762;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E86;&#x8BFB;&#x5199;&#x5206;&#x79BB;&#x65B9;&#x6848;&#x7684;&#x539F;&#x7406;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x7A0B;&#x5B9E;&#x8DF5;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x795E;&#x7B56;&#x6570;&#x636E;&#x7684;&#x5DE5;&#x7A0B;&#x5E08;&#x8FD8;&#x9762;&#x4E34;&#x7740;&#x5F88;&#x591A;&#x65B9;&#x6848;&#x7684;&#x9009;&#x62E9;&#x548C;&#x5B9E;&#x8DF5;&#x96BE;&#x70B9;&#x3002;&#x4E0B;&#x9762;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#x795E;&#x7B56;&#x6570;&#x636E;&#x5728;&#x642D;&#x5EFA;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x5B9E;&#x8DF5;&#x4E2D;&#x5543;&#x8FC7;&#x7684;&#x201C;&#x786C;&#x9AA8;&#x5934;&#x201D;&#x3002;</p>
<p>ROS<br> &#x7684;&#x9009;&#x62E9;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x5DE5;&#x7A0B;&#x5E08;&#x9009;&#x62E9;&#x4E86; Parquet+ Impala<br> &#x7684;&#x67E5;&#x8BE2;&#x65B9;&#x6848;&#xFF0C;&#x540C;&#x65F6;&#x7ED3;&#x5408;&#x6211;&#x4EEC;&#x7684;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#x505A;&#x4E86;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x7EA7;&#x522B;&#x7684;&#x4F18;&#x5316;&#x3002;&#xFF08;&#x76F8;&#x5173;&#x94FE;&#x63A5;&#xFF1A;<br> <a href="#wechat_redirect">&#x4ED8;&#x529B;&#x529B;:<br> &#x57FA;&#x4E8E;<br> Impala<br> &#x6784;&#x5EFA;&#x5B9E;&#x65F6;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x5206;&#x6790;&#x5F15;&#x64CE;</a><br> &#xFF09;WOS<br> &#x7684;&#x9009;&#x62E9;&#x53EF;&#x80FD;&#x4F1A;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5E38;&#x7528;&#x7684; HDFS<br> &#x884C;&#x5B58;&#x50A8;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982; TextFile<br> &#x3001;SequenceFile<br> &#x3001;Avro<br> &#x7B49;&#x3002;</p>
<p> &#x4EE5; SequenceFile<br> &#x4E3A;&#x4F8B;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x5B9A;&#x4E49;&#x81EA;&#x5DF1;&#x7684; Impala<br> &#x8868;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684; Partition<br> &#x6587;&#x4EF6;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x4E3A; SequenceFile<br> &#xFF0C;&#x540C;&#x65F6;&#x5176;&#x5B83;&#x7684; Partition<br> &#x4F5C;&#x4E3A;&#x6B63;&#x5E38;&#x7684;&#x6309;&#x7167;&#x65E5;&#x671F; Partition<br> &#x7684;&#x6570;&#x636E;&#xFF0C;&#x6307;&#x5B9A;&#x683C;&#x5F0F;&#x4E3A; Parquet<br> &#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x7684;&#x4F18;&#x52BF;&#x4F53;&#x73B0;&#x5728;&#x59CB;&#x7EC8;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x8868;&#x3002;</p>
<p> &#x540E;&#x6765;&#x57FA;&#x4E8E;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x548C;&#x672A;&#x6765;&#x67B6;&#x6784;&#x5347;&#x7EA7;&#x65B9;&#x9762;&#x7684;&#x8003;&#x8651;&#xFF0C;&#x6211;&#x4EEC;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x4E86; Kudu<br> &#x4F5C;&#x4E3A; WOS<br> &#xFF0C;&#x67B6;&#x6784;&#x5B9E;&#x73B0;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/46a7c52245f24ab99ff402f545f665bfb85a305e1e6e0ce14e73ff78a8379db5" alt> </p>
<p> &#x56FE;2<br> &#x8BFB;&#x5199;&#x5206;&#x79BB;&#x7684;&#x5B9E;&#x73B0;&#x56FE;</p>
<p> &#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E09;&#x5F20;&#x7269;&#x7406;&#x8868;&#xFF0C;&#x5176;&#x4E2D;&#x4E24;&#x5F20; Kudu<br> &#x8868;&#x4F5C;&#x4E3A; WOS<br> &#xFF0C;&#x4E00;&#x5F20; Parquet<br> &#x8868;&#x4F5C;&#x4E3A; ROS<br> &#x3002;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x4F1A;&#x5199;&#x5165;&#x5230; Ingesting<br> &#x72B6;&#x6001;&#x7684; Kudu<br> &#x8868;&#x4E2D;&#xFF0C;&#x5F53; Ingesting<br> &#x8868;&#x5199;&#x5230;&#x4E00;&#x5B9A;&#x5927;&#x5C0F;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x8F6C;&#x6362;&#x4E3A; Staging<br> &#x72B6;&#x6001;&#x3002;</p>
<p> &#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x4E00;&#x65B9;&#x9762;&#x751F;&#x6210;&#x4E00;&#x5F20;&#x65B0;&#x7684; Kudu<br> &#x8868;&#x4F5C;&#x4E3A; Ingesting<br> &#x8868;&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x5F00;&#x59CB; WOS<br> &#x5230; ROS<br> &#x7684;&#x8F6C;&#x6362;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x53EB;&#x505A; Mover<br> &#x7684;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;&#x5C06; Staging<br> &#x72B6;&#x6001;&#x7684; Kudu<br> &#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5168;&#x90E8;&#x8F6C;&#x6362;&#x5230;&#x5BF9;&#x5E94; Partition<br> &#x7684; Parquet<br> &#x8868;&#x5F53;&#x4E2D;&#x3002;</p>
<p>Staging<br> &#x72B6;&#x6001;&#x7684;&#x8868;&#x8F6C;&#x6362;&#x5B8C;&#x6210;&#x4E14; Ingesting<br> &#x72B6;&#x6001;&#x7684;&#x8868;&#x5199;&#x6EE1;&#x65F6;&#xFF0C;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;&#x5207;&#x8868;&#x64CD;&#x4F5C;&#xFF0C;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x5143;&#x6570;&#x636E;&#xFF0C;&#x544A;&#x8BC9; Impala<br> &#x4F7F;&#x7528;&#x65B0;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#xFF0C;&#x6574;&#x4E2A;&#x5207;&#x8868;&#x7684;&#x64CD;&#x4F5C;&#x662F;&#x539F;&#x5B50;&#x7684;&#x3002;&#x800C;&#x4E14;&#x5DF2;&#x7ECF;&#x8F6C;&#x5316;&#x7684; Staging<br> &#x8868;&#x8FD8;&#x9700;&#x8981;&#x4FDD;&#x7559;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x907F;&#x514D;&#x5207;&#x8868;&#x4E4B;&#x524D;&#x53D1;&#x8D77;&#x7684;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x6CA1;&#x6709;&#x53CA;&#x65F6;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x3002;</p>
<p> &#x5BF9;&#x4E8E;&#x67E5;&#x8BE2;&#x8BF7;&#x6C42;&#x6765;&#x8BF4;&#x6211;&#x4EEC;&#x4F1A;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x5305;&#x542B; Staging<br> &#x8868;&#x3001;Ingesting<br> &#x8868;&#x548C; ROS<br> &#x8868;&#x7684;&#x865A;&#x62DF;&#x8868;&#xFF0C;&#x5373;&#x4E00;&#x4E2A; View<br> &#x3002;&#x7528;&#x6237;&#x7684;&#x67E5;&#x8BE2;&#x59CB;&#x7EC8;&#x6307;&#x5411;&#x4E00;&#x4E2A; View<br> &#xFF0C;&#x4F46;&#x662F;&#x4E0B;&#x9762;&#x7684;&#x7269;&#x7406;&#x8868;&#x4F1A;&#x7ECF;&#x5E38;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;&#x8FD9;&#x6837;&#x5C31;&#x517C;&#x987E;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x7684;&#x4E0D;&#x65AD;&#x66F4;&#x65B0;&#x53CA;&#x67E5;&#x8BE2;&#x6027;&#x80FD;&#x7684;&#x4F18;&#x5316;&#x4E24;&#x65B9;&#x9762;&#x4E86;&#x3002;</p>
<p> &#x5728;&#x5B9E;&#x73B0;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x5982;&#x4F55;&#x5BF9;&#x8868;&#x8FDB;&#x884C;&#x52A0;&#x5217;&#x64CD;&#x4F5C;&#xFF0C;&#x4FDD;&#x8BC1;&#x5404;&#x4E2A;&#x8868;&#x7684;&#x7ED3;&#x6784;&#x4E00;&#x81F4;&#xFF1B;Parquet<br> &#x8868;&#x4E2D;&#x788E;&#x6587;&#x4EF6;&#x8F83;&#x591A;&#x5F71;&#x54CD;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#xFF0C;&#x5982;&#x4F55;&#x5B9A;&#x671F;&#x5408;&#x5E76;&#x7B49;&#x3002;&#x9650;&#x4E8E;&#x7BC7;&#x5E45;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x5177;&#x4F53;&#x4ECB;&#x7ECD;&#x3002;&#x795E;&#x7B56;&#x6570;&#x636E;&#x6700;&#x7EC8;&#x7684;&#x6280;&#x672F;&#x67B6;&#x6784;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d9914011079b9a844a1db2d12374b984023b13132356f2190629dd5bbefc97d3" alt> </p>
<p> &#x56FE;3<br> &#x795E;&#x7B56;&#x6570;&#x636E;&#x6280;&#x672F;&#x67B6;&#x6784;&#x56FE;</p>
<p> &#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x795E;&#x7B56;&#x6570;&#x636E;&#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x9A71;&#x52A8;&#xFF0C;&#x5728;&#x6570;&#x636E;&#x4ED3;&#x5E93;&#x7684;&#x8BFB;&#x5199;&#x6548;&#x7387;&#x65B9;&#x9762;&#x505A;&#x4E86;&#x6BD4;&#x8F83;&#x6DF1;&#x5165;&#x7684;&#x63A2;&#x7D22;&#xFF0C;&#x4E5F;&#x53C2;&#x8003;&#x4E86;&#x4F17;&#x591A;&#x4F18;&#x79C0;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x505A;&#x4E86;&#x9002;&#x914D;&#x4EA7;&#x54C1;&#x7684;&#x4F18;&#x5316;&#xFF0C;&#x7D2F;&#x8BA1;&#x5341;&#x4E07;&#x884C;&#x4EE3;&#x7801;&#x4EE5;&#x4E0A;&#xFF0C;&#x5927;&#x6570;&#x636E;&#x884C;&#x4E1A;&#x6280;&#x672F;&#x624D;&#x662F;&#x4F01;&#x4E1A;&#x7684;&#x6838;&#x5FC3;&#x7ADE;&#x4E89;&#x529B;&#xFF0C;&#x4E5F;&#x5E0C;&#x671B;&#x5927;&#x5BB6;&#x5728;&#x6280;&#x672F;&#x548C;&#x4E1A;&#x52A1;&#x5C42;&#x9762;&#x8FDB;&#x884C;&#x5F00;&#x653E;&#x6027;&#x7684;&#x63A2;&#x8BA8;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x5BF9;&#x66F4;&#x591A;&#x5927;&#x6570;&#x636E;&#x5E72;&#x8D27;&#x6709;&#x5174;&#x8DA3;&#xFF0C;&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#x795E;&#x7B56;&#x6570;&#x636E;&#xFF08;ID&#xFF1A;SensorsDataCrop&#xFF09;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/fab86bd7b4a61f1c35d5ea24749a1a0e35e5037b52782799c80b90cd9164d876" alt="&#x795E;&#x7B56;.jpg">  </p>
<blockquote>
<p>&#x539F;    &#x6587;&#xFF1A;&#x795E;&#x7B56;&#x6570;&#x636E;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a56609a7a8194e7e906a84d78774609d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513621807118.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513621807118.html" itemprop="url">【译】Java中9个处理Exception的最佳实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:53:16+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;Java&#x4E2D;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x4E0D;&#x4EC5;&#x4EC5;&#x521D;&#x5B66;&#x8005;&#x5F88;&#x96BE;&#x7406;&#x89E3;&#xFF0C;&#x5373;&#x4F7F;&#x4E00;&#x4E9B;&#x6709;&#x7ECF;&#x9A8C;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x4E5F;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x5F88;&#x591A;&#x65F6;&#x95F4;&#x6765;&#x601D;&#x8003;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5F02;&#x5E38;&#xFF0C;&#x5305;&#x62EC;&#x9700;&#x8981;&#x5904;&#x7406;&#x54EA;&#x4E9B;&#x5F02;&#x5E38;&#xFF0C;&#x600E;&#x6837;&#x5904;&#x7406;&#x7B49;&#x7B49;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x5F00;&#x53D1;&#x56E2;&#x961F;&#x90FD;&#x4F1A;&#x5236;&#x5B9A;&#x4E00;&#x4E9B;&#x89C4;&#x5219;&#x6765;&#x89C4;&#x8303;&#x5BF9;&#x5F02;&#x5E38;&#x7684;&#x5904;&#x7406;&#x7684;&#x539F;&#x56E0;&#x3002;&#x800C;&#x56E2;&#x961F;&#x4E4B;&#x95F4;&#x7684;&#x8FD9;&#x4E9B;&#x89C4;&#x8303;&#x5F80;&#x5F80;&#x662F;&#x622A;&#x7136;&#x4E0D;&#x540C;&#x7684;&#x3002;</p>
<p>&#x672C;&#x6587;&#x7ED9;&#x51FA;&#x51E0;&#x4E2A;&#x88AB;&#x5F88;&#x591A;&#x56E2;&#x961F;&#x4F7F;&#x7528;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
<ol>
<li>&#x5728;Finally&#x5757;&#x4E2D;&#x6E05;&#x7406;&#x8D44;&#x6E90;&#x6216;&#x8005;&#x4F7F;&#x7528;try-with-resource&#x8BED;&#x53E5;</li>
</ol>
<hr>
<p>&#x5F53;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C;InputStream&#x8FD9;&#x79CD;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x540E;&#x5173;&#x95ED;&#x7684;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x9519;&#x8BEF;&#x5C31;&#x662F;&#x5728;try&#x5757;&#x7684;&#x6700;&#x540E;&#x5173;&#x95ED;&#x8D44;&#x6E90;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void doNotCloseResourceInTry() {</span><br><span class="line">    FileInputStream inputStream = null;</span><br><span class="line">    try {</span><br><span class="line">        File file = new File(&quot;./tmp.txt&quot;);</span><br><span class="line">        inputStream = new FileInputStream(file);</span><br><span class="line">        // use the inputStream to read a file</span><br><span class="line">        // do NOT do this</span><br><span class="line">        inputStream.close();</span><br><span class="line">    } catch (FileNotFoundException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } catch (IOException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x5728;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;exception&#x7684;&#x65F6;&#x5019;&#x8FD0;&#x884C;&#x662F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x7684;&#x3002;&#x4F46;&#x662F;&#x5F53;try&#x5757;&#x4E2D;&#x7684;&#x8BED;&#x53E5;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x7684;&#x4EE3;&#x7801;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x6700;&#x540E;&#x7684;&#x5173;&#x95ED;&#x8BED;&#x53E5;&#xFF0C;&#x4ECE;&#x800C;&#x8D44;&#x6E90;&#x4E5F;&#x65E0;&#x6CD5;&#x91CA;&#x653E;&#x3002;</p>
<p>&#x5408;&#x7406;&#x7684;&#x505A;&#x6CD5;&#x5219;&#x662F;&#x5C06;&#x6240;&#x6709;&#x6E05;&#x7406;&#x7684;&#x4EE3;&#x7801;&#x90FD;&#x653E;&#x5230;finally&#x5757;&#x4E2D;&#x6216;&#x8005;&#x4F7F;&#x7528;try-with-resource&#x8BED;&#x53E5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void closeResourceInFinally() {</span><br><span class="line">    FileInputStream inputStream = null;</span><br><span class="line">    try {</span><br><span class="line">        File file = new File(&quot;./tmp.txt&quot;);</span><br><span class="line">        inputStream = new FileInputStream(file);</span><br><span class="line">        // use the inputStream to read a file</span><br><span class="line">    } catch (FileNotFoundException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } finally {</span><br><span class="line">        if (inputStream != null) {</span><br><span class="line">            try {</span><br><span class="line">                inputStream.close();</span><br><span class="line">            } catch (IOException e) {</span><br><span class="line">                log.error(e);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public void automaticallyCloseResource() {</span><br><span class="line">    File file = new File(&quot;./tmp.txt&quot;);</span><br><span class="line">    try (FileInputStream inputStream = new FileInputStream(file);) {</span><br><span class="line">        // use the inputStream to read a file</span><br><span class="line">    } catch (FileNotFoundException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } catch (IOException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528;&#x6700;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;&#x6765;&#x58F0;&#x660E;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x4F7F;&#x5F97;&#x4EE3;&#x7801;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void doNotDoThis() throws Exception {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">public void doThis() throws NumberFormatException {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x5982;&#x4E0A;&#xFF0C;NumberFormatException&#x5B57;&#x9762;&#x4E0A;&#x5373;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x662F;&#x6570;&#x5B57;&#x683C;&#x5F0F;&#x5316;&#x9519;&#x8BEF;&#x3002;</p>
<ol start="3">
<li>&#x5BF9;&#x5F02;&#x5E38;&#x8FDB;&#x884C;&#x6587;&#x6863;&#x8BF4;&#x660E;</li>
</ol>
<hr>
<p>&#x5F53;&#x5728;&#x65B9;&#x6CD5;&#x4E0A;&#x58F0;&#x660E;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6587;&#x6863;&#x8BF4;&#x660E;&#x3002;&#x548C;&#x524D;&#x9762;&#x7684;&#x4E00;&#x70B9;&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x7ED9;&#x8C03;&#x7528;&#x8005;&#x63D0;&#x4F9B;&#x5C3D;&#x53EF;&#x80FD;&#x591A;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x907F;&#x514D;/&#x5904;&#x7406;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x5728;Javadoc&#x4E2D;&#x52A0;&#x5165;throws&#x58F0;&#x660E;&#xFF0C;&#x5E76;&#x4E14;&#x63CF;&#x8FF0;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * This method does something extremely useful ...</span><br><span class="line"> *</span><br><span class="line"> * @param input</span><br><span class="line"> * @throws MyBusinessException if ... happens</span><br><span class="line"> */</span><br><span class="line">public void doSomething(String input) throws MyBusinessException {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="4">
<li>&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x7684;&#x65F6;&#x5019;&#x5305;&#x542B;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;</li>
</ol>
<hr>
<p>&#x5728;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5C3D;&#x53EF;&#x80FD;&#x7CBE;&#x786E;&#x5730;&#x63CF;&#x8FF0;&#x95EE;&#x9898;&#x548C;&#x76F8;&#x5173;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x6837;&#x65E0;&#x8BBA;&#x662F;&#x6253;&#x5370;&#x5230;&#x65E5;&#x5FD7;&#x4E2D;&#x8FD8;&#x662F;&#x76D1;&#x63A7;&#x5DE5;&#x5177;&#x4E2D;&#xFF0C;&#x90FD;&#x80FD;&#x591F;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x4EBA;&#x9605;&#x8BFB;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x5B9A;&#x4F4D;&#x5177;&#x4F53;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3001;&#x9519;&#x8BEF;&#x7684;&#x4E25;&#x91CD;&#x7A0B;&#x5EA6;&#x7B49;&#x3002;</p>
<p>&#x4F46;&#x8FD9;&#x91CC;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x8981;&#x5BF9;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x957F;&#x7BC7;&#x5927;&#x8BBA;&#xFF0C;&#x56E0;&#x4E3A;&#x672C;&#x6765;Exception&#x7684;&#x7C7B;&#x540D;&#x5C31;&#x80FD;&#x591F;&#x53CD;&#x6620;&#x9519;&#x8BEF;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x9700;&#x8981;&#x7528;&#x4E00;&#x5230;&#x4E24;&#x53E5;&#x8BDD;&#x63CF;&#x8FF0;&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;try {</span><br><span class="line">    new Long(&quot;xyz&quot;);</span><br><span class="line">} catch (NumberFormatException e) {</span><br><span class="line">    log.error(e);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>NumberFormatException&#x5373;&#x544A;&#x8BC9;&#x4E86;&#x8FD9;&#x4E2A;&#x5F02;&#x5E38;&#x662F;&#x683C;&#x5F0F;&#x5316;&#x9519;&#x8BEF;&#xFF0C;&#x5F02;&#x5E38;&#x7684;&#x989D;&#x5916;&#x4FE1;&#x606F;&#x53EA;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x8FD9;&#x4E2A;&#x9519;&#x8BEF;&#x5B57;&#x7B26;&#x4E32;&#x5373;&#x53EF;&#x3002;&#x5F53;&#x5F02;&#x5E38;&#x7684;&#x540D;&#x79F0;&#x4E0D;&#x591F;&#x660E;&#x663E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5219;&#x9700;&#x8981;&#x63D0;&#x4F9B;&#x5C3D;&#x53EF;&#x80FD;&#x5177;&#x4F53;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x3002;</p>
<ol start="5">
<li>&#x9996;&#x5148;&#x6355;&#x83B7;&#x6700;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x73B0;&#x5728;&#x5F88;&#x591A;IDE&#x90FD;&#x80FD;&#x667A;&#x80FD;&#x63D0;&#x793A;&#x8FD9;&#x4E2A;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x5F53;&#x4F60;&#x8BD5;&#x56FE;&#x9996;&#x5148;&#x6355;&#x83B7;&#x6700;&#x7B3C;&#x7EDF;&#x7684;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4F1A;&#x63D0;&#x793A;<em>&#x4E0D;&#x80FD;&#x8FBE;&#x5230;&#x7684;&#x4EE3;&#x7801;</em>&#x3002;</p>
<p>&#x5F53;&#x6709;&#x591A;&#x4E2A;catch&#x5757;&#x4E2D;&#xFF0C;&#x6309;&#x7167;&#x6355;&#x83B7;&#x987A;&#x5E8F;&#x53EA;&#x6709;&#x7B2C;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x5230;&#x7684;catch&#x5757;&#x624D;&#x80FD;&#x6267;&#x884C;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x5148;&#x6355;&#x83B7;IllegalArgumentException&#xFF0C;&#x90A3;&#x4E48;&#x5219;&#x65E0;&#x6CD5;&#x8FD0;&#x884C;&#x5230;&#x5BF9;NumberFormatException&#x7684;&#x6355;&#x83B7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void catchMostSpecificExceptionFirst() {</span><br><span class="line">    try {</span><br><span class="line">        doSomething(&quot;A message&quot;);</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        log.error(e);</span><br><span class="line">    } catch (IllegalArgumentException e) {</span><br><span class="line">        log.error(e)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="6">
<li>&#x4E0D;&#x8981;&#x6355;&#x83B7;Throwable</li>
</ol>
<hr>
<p>Throwable&#x662F;&#x6240;&#x6709;&#x5F02;&#x5E38;&#x548C;&#x9519;&#x8BEF;&#x7684;&#x7236;&#x7C7B;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5728;catch&#x8BED;&#x53E5;&#x4E2D;&#x6355;&#x83B7;&#xFF0C;&#x4F46;&#x662F;&#x6C38;&#x8FDC;&#x4E0D;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#x3002;</p>
<p>&#x5982;&#x679C;catch&#x4E86;throwable&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x4EC5;&#x4EC5;&#x4F1A;&#x6355;&#x83B7;&#x6240;&#x6709;exception&#xFF0C;&#x8FD8;&#x4F1A;&#x6355;&#x83B7;error&#x3002;&#x800C;error&#x662F;&#x8868;&#x660E;&#x65E0;&#x6CD5;&#x6062;&#x590D;&#x7684;jvm&#x9519;&#x8BEF;&#x3002;&#x56E0;&#x6B64;&#x9664;&#x975E;&#x7EDD;&#x5BF9;&#x80AF;&#x5B9A;&#x80FD;&#x591F;&#x5904;&#x7406;&#x6216;&#x8005;&#x88AB;&#x8981;&#x6C42;&#x5904;&#x7406;error&#xFF0C;&#x4E0D;&#x8981;&#x6355;&#x83B7;throwable&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void doNotCatchThrowable() {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (Throwable t) {</span><br><span class="line">        // don&apos;t do this!</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="7">
<li>&#x4E0D;&#x8981;&#x5FFD;&#x7565;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5F88;&#x6709;&#x81EA;&#x4FE1;&#x4E0D;&#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x56E0;&#x6B64;&#x5199;&#x4E86;&#x4E00;&#x4E2A;catch&#x5757;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6709;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#x6216;&#x8005;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void doNotIgnoreExceptions() {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        // this will never happen</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x4F46;&#x73B0;&#x5B9E;&#x662F;&#x7ECF;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x65E0;&#x6CD5;&#x9884;&#x6599;&#x7684;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x8FD9;&#x91CC;&#x7684;&#x4EE3;&#x7801;&#x672A;&#x6765;&#x662F;&#x4E0D;&#x662F;&#x4F1A;&#x6539;&#x52A8;(&#x5220;&#x9664;&#x4E86;&#x963B;&#x6B62;&#x5F02;&#x5E38;&#x629B;&#x51FA;&#x7684;&#x4EE3;&#x7801;)&#xFF0C;&#x800C;&#x6B64;&#x65F6;&#x7531;&#x4E8E;&#x5F02;&#x5E38;&#x88AB;&#x6355;&#x83B7;&#xFF0C;&#x4F7F;&#x5F97;&#x65E0;&#x6CD5;&#x62FF;&#x5230;&#x8DB3;&#x591F;&#x7684;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x6765;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5408;&#x7406;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x81F3;&#x5C11;&#x8981;&#x8BB0;&#x5F55;&#x5F02;&#x5E38;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void logAnException() {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        log.error(&quot;This should never happen: &quot; + e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<ol start="8">
<li>&#x4E0D;&#x8981;&#x8BB0;&#x5F55;&#x5E76;&#x629B;&#x51FA;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x5F88;&#x591A;&#x4EE3;&#x7801;&#x751A;&#x81F3;&#x7C7B;&#x5E93;&#x4E2D;&#x90FD;&#x4F1A;&#x6709;&#x6355;&#x83B7;&#x5F02;&#x5E38;&#x3001;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x5E76;&#x518D;&#x6B21;&#x629B;&#x51FA;&#x7684;&#x903B;&#x8F91;&#x3002;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;try {</span><br><span class="line">    new Long(&quot;xyz&quot;);</span><br><span class="line">} catch (NumberFormatException e) {</span><br><span class="line">    log.error(e);</span><br><span class="line">    throw e;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x8FD9;&#x4E2A;&#x5904;&#x7406;&#x903B;&#x8F91;&#x770B;&#x7740;&#x662F;&#x5408;&#x7406;&#x7684;&#x3002;&#x4F46;&#x8FD9;&#x7ECF;&#x5E38;&#x4F1A;&#x7ED9;&#x540C;&#x4E00;&#x4E2A;&#x5F02;&#x5E38;&#x8F93;&#x51FA;&#x591A;&#x6761;&#x65E5;&#x5FD7;&#x3002;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;17:44:28,945 ERROR TestExceptionHandling:65 - java.lang.NumberFormatException: For input string: &quot;xyz&quot;</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string: &quot;xyz&quot;</span><br><span class="line">at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)</span><br><span class="line">at java.lang.Long.parseLong(Long.java:589)</span><br><span class="line">at java.lang.Long.(Long.java:965)</span><br><span class="line">at com.stackify.example.TestExceptionHandling.logAndThrowException(TestExceptionHandling.java:63)</span><br><span class="line">at com.stackify.example.TestExceptionHandling.main(TestExceptionHandling.java:58)</span><br></pre></td></tr></table></figure>


<p>&#x5982;&#x4E0A;&#x6240;&#x793A;&#xFF0C;&#x540E;&#x9762;&#x7684;&#x65E5;&#x5FD7;&#x4E5F;&#x6CA1;&#x6709;&#x9644;&#x52A0;&#x66F4;&#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#x3002;&#x5982;&#x679C;&#x60F3;&#x8981;&#x63D0;&#x4F9B;&#x66F4;&#x52A0;&#x6709;&#x7528;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x5C06;&#x5F02;&#x5E38;&#x5305;&#x88C5;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x5F02;&#x5E38;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">public void wrapException(String input) throws MyBusinessException {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        throw new MyBusinessException(&quot;A message that describes the error.&quot;, e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>&#x56E0;&#x6B64;&#xFF0C;&#x4EC5;&#x4EC5;&#x5F53;&#x60F3;&#x8981;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x65F6;&#x624D;&#x53BB;&#x6355;&#x83B7;&#xFF0C;&#x5426;&#x5219;&#x53EA;&#x9700;&#x8981;&#x5728;&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#x4E2D;&#x58F0;&#x660E;&#x8BA9;&#x8C03;&#x7528;&#x8005;&#x53BB;&#x5904;&#x7406;&#x3002;</p>
<ol start="9">
<li>&#x5305;&#x88C5;&#x5F02;&#x5E38;&#x65F6;&#x4E0D;&#x8981;&#x629B;&#x5F03;&#x539F;&#x59CB;&#x7684;&#x5F02;&#x5E38;</li>
</ol>
<hr>
<p>&#x6355;&#x83B7;&#x6807;&#x51C6;&#x5F02;&#x5E38;&#x5E76;&#x5305;&#x88C5;&#x4E3A;&#x81EA;&#x5B9A;&#x4E49;&#x5F02;&#x5E38;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x5E38;&#x89C1;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x66F4;&#x4E3A;&#x5177;&#x4F53;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x5E76;&#x80FD;&#x591F;&#x505A;&#x9488;&#x5BF9;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x3002;</p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5305;&#x88C5;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x628A;&#x539F;&#x59CB;&#x7684;&#x5F02;&#x5E38;&#x8BBE;&#x7F6E;&#x4E3A;cause(Exception&#x6709;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x4F20;&#x5165;cause)&#x3002;&#x5426;&#x5219;&#xFF0C;&#x4E22;&#x5931;&#x4E86;&#x539F;&#x59CB;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x4F1A;&#x8BA9;&#x9519;&#x8BEF;&#x7684;&#x5206;&#x6790;&#x53D8;&#x5F97;&#x56F0;&#x96BE;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public void wrapException(String input) throws MyBusinessException {</span><br><span class="line">    try {</span><br><span class="line">        // do something</span><br><span class="line">    } catch (NumberFormatException e) {</span><br><span class="line">        throw new MyBusinessException(&quot;A message that describes the error.&quot;, e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x7EFC;&#x4E0A;&#x53EF;&#x77E5;&#xFF0C;&#x5F53;&#x629B;&#x51FA;&#x6216;&#x8005;&#x6355;&#x83B7;&#x5F02;&#x5E38;&#x65F6;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x4E1C;&#x897F;&#x9700;&#x8981;&#x8003;&#x8651;&#x3002;&#x5176;&#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x70B9;&#x90FD;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x9605;&#x8BFB;&#x6027;&#x6216;&#x8005;api&#x7684;&#x53EF;&#x7528;&#x6027;&#x3002;</p>
<p>&#x5F02;&#x5E38;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x63A7;&#x5236;&#x673A;&#x5236;&#xFF0C;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x6C9F;&#x901A;&#x5A92;&#x4ECB;&#xFF0C;&#x56E0;&#x6B64;&#x4E0E;&#x4F60;&#x7684;&#x534F;&#x4F5C;&#x8005;&#x8BA8;&#x8BBA;&#x8FD9;&#x4E9B;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x5E76;&#x5236;&#x5B9A;&#x4E00;&#x4E9B;&#x89C4;&#x8303;&#x80FD;&#x591F;&#x8BA9;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x7406;&#x89E3;&#x76F8;&#x5173;&#x7684;&#x901A;&#x7528;&#x6982;&#x5FF5;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x6309;&#x7167;&#x540C;&#x6837;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x3002;</p>
<p>&#x539F;&#x6587;&#x94FE;&#x63A5;: <a href="/external_links/b0afa6aedd3f1afb8855bcc599448307.html" target="blank" rel="noopener">dzone.com/articles/9-&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/cd50875403602f0632400223de428819.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513600983054.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513600983054.html" itemprop="url">Spring Boot与RabbitMQ结合实现延迟队列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:23:06+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><h3 id="&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;"><a href="#&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;" class="headerlink" title="&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;"></a>&#x4F55;&#x4E3A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF1F;</h3><p>&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x5C31;&#x662F;&#x8FDB;&#x5165;&#x8BE5;&#x961F;&#x5217;&#x7684;&#x6D88;&#x606F;&#x4F1A;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x961F;&#x5217;&#x3002;&#x800C;&#x4E00;&#x822C;&#x7684;&#x961F;&#x5217;&#xFF0C;&#x6D88;&#x606F;&#x4E00;&#x65E6;&#x5165;&#x961F;&#x4E86;&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x88AB;&#x6D88;&#x8D39;&#x8005;&#x9A6C;&#x4E0A;&#x6D88;&#x8D39;&#x3002;</p>
<h3 id="&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;"></a>&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x80FD;&#x505A;&#x4EC0;&#x4E48;&#xFF1F;</h3><p>&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x591A;&#x7528;&#x4E8E;&#x9700;&#x8981;&#x5EF6;&#x8FDF;&#x5DE5;&#x4F5C;&#x7684;&#x573A;&#x666F;&#x3002;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x662F;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x573A;&#x666F;&#xFF1A;</p>
<ol>
<li>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x3002;&#x6BD4;&#x5982;&#xFF1A;<ul>
<li>&#x7528;&#x6237;&#x751F;&#x6210;&#x8BA2;&#x5355;&#x4E4B;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x6821;&#x9A8C;&#x8BA2;&#x5355;&#x7684;&#x652F;&#x4ED8;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x8BA2;&#x5355;&#x4ECD;&#x672A;&#x652F;&#x4ED8;&#x5219;&#x9700;&#x8981;&#x53CA;&#x65F6;&#x5730;&#x5173;&#x95ED;&#x8BA2;&#x5355;&#x3002;</li>
<li>&#x7528;&#x6237;&#x6CE8;&#x518C;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x6BD4;&#x5982;&#x4E00;&#x5468;&#x540E;&#x6821;&#x9A8C;&#x7528;&#x6237;&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x7528;&#x6237;&#x6D3B;&#x8DC3;&#x5EA6;&#x8F83;&#x4F4E;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x6216;&#x8005;&#x77ED;&#x4FE1;&#x6765;&#x63D0;&#x9192;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x3002;</li>
</ul>
</li>
<li>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x3002;&#x6BD4;&#x5982;&#x6D88;&#x8D39;&#x8005;&#x4ECE;&#x961F;&#x5217;&#x91CC;&#x6D88;&#x8D39;&#x6D88;&#x606F;&#x65F6;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x60F3;&#x8981;&#x5EF6;&#x8FDF;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x8BD5;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;&#x4E0D;&#x4F7F;&#x7528;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8F6E;&#x8BE2;&#x626B;&#x63CF;&#x7A0B;&#x5E8F;&#x53BB;&#x5B8C;&#x6210;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x65E2;&#x4E0D;&#x4F18;&#x96C5;&#xFF0C;&#x4E5F;&#x4E0D;&#x65B9;&#x4FBF;&#x505A;&#x6210;&#x7EDF;&#x4E00;&#x7684;&#x670D;&#x52A1;&#x4FBF;&#x4E8E;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x4F7F;&#x7528;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8F7B;&#x800C;&#x6613;&#x4E3E;&#x5730;&#x5B8C;&#x6210;&#x3002;</p>
<h3 id="&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;</h3><p>&#x522B;&#x6025;&#xFF0C;&#x5728;&#x4E0B;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5229;&#x7528;<strong>Spring Boot</strong>&#x52A0;<strong>RabbitMQ</strong>&#x6765;&#x5B9E;&#x73B0;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;</p>
<p>&#x672C;&#x6587;&#x51FA;&#x73B0;&#x7684;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x90FD;&#x5DF2;push&#x5230;Github&#x4ED3;&#x5E93;&#x4E2D;&#xFF1A;<a href="/external_links/81e05fe58f8aa432fd1916bcd1af3e9f.html" target="blank" rel="noopener">github.com/Lovelcp/blo&#x2026;</a></p>
<h2 id="&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"><a href="#&#x5B9E;&#x73B0;&#x601D;&#x8DEF;" class="headerlink" title="&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"></a>&#x5B9E;&#x73B0;&#x601D;&#x8DEF;</h2><p>&#x5728;&#x4ECB;&#x7ECD;&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;RabbitMQ&#x7684;&#x4E24;&#x4E2A;&#x7279;&#x6027;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;Time-To-Live Extensions&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;Dead Letter Exchanges&#x3002;</p>
<h3 id="Time-To-Live-Extensions"><a href="#Time-To-Live-Extensions" class="headerlink" title="Time-To-Live Extensions"></a>Time-To-Live Extensions</h3><p>RabbitMQ&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x4E3A;&#x6D88;&#x606F;&#x6216;&#x8005;&#x961F;&#x5217;&#x8BBE;&#x7F6E;TTL&#xFF08;time to live&#xFF09;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;TTL&#x8868;&#x660E;&#x4E86;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x53EF;&#x5728;&#x961F;&#x5217;&#x4E2D;&#x5B58;&#x6D3B;&#x7684;&#x6700;&#x5927;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x6BEB;&#x79D2;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;&#x67D0;&#x6761;&#x6D88;&#x606F;&#x88AB;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x6216;&#x8005;&#x5F53;&#x67D0;&#x6761;&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x4E86;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x7684;&#x961F;&#x5217;&#x65F6;&#xFF0C;&#x8FD9;&#x6761;&#x6D88;&#x606F;&#x4F1A;&#x5728;&#x7ECF;&#x8FC7;TTL&#x79D2;&#x540E;&#x201C;&#x6B7B;&#x4EA1;&#x201D;&#xFF0C;&#x6210;&#x4E3A;Dead Letter&#x3002;&#x5982;&#x679C;&#x65E2;&#x914D;&#x7F6E;&#x4E86;&#x6D88;&#x606F;&#x7684;TTL&#xFF0C;&#x53C8;&#x914D;&#x7F6E;&#x4E86;&#x961F;&#x5217;&#x7684;TTL&#xFF0C;&#x90A3;&#x4E48;&#x8F83;&#x5C0F;&#x7684;&#x90A3;&#x4E2A;&#x503C;&#x4F1A;&#x88AB;&#x53D6;&#x7528;&#x3002;&#x66F4;&#x591A;&#x8D44;&#x6599;&#x8BF7;&#x67E5;&#x9605;<a href="/external_links/cabe18b3657563c495bae4522e66f737.html" target="blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;</p>
<h3 id="Dead-Letter-Exchange"><a href="#Dead-Letter-Exchange" class="headerlink" title="Dead Letter Exchange"></a>Dead Letter Exchange</h3><p>&#x521A;&#x624D;&#x63D0;&#x5230;&#x4E86;&#xFF0C;&#x88AB;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x7684;&#x6D88;&#x606F;&#x5728;&#x8FC7;&#x671F;&#x540E;&#x4F1A;&#x6210;&#x4E3A;Dead Letter&#x3002;&#x5176;&#x5B9E;&#x5728;RabbitMQ&#x4E2D;&#xFF0C;&#x4E00;&#x5171;&#x6709;&#x4E09;&#x79CD;&#x6D88;&#x606F;&#x7684;&#x201C;&#x6B7B;&#x4EA1;&#x201D;&#x5F62;&#x5F0F;&#xFF1A;</p>
<ol>
<li>&#x6D88;&#x606F;&#x88AB;&#x62D2;&#x7EDD;&#x3002;&#x901A;&#x8FC7;&#x8C03;&#x7528;basic.reject&#x6216;&#x8005;basic.nack&#x5E76;&#x4E14;&#x8BBE;&#x7F6E;&#x7684;requeue&#x53C2;&#x6570;&#x4E3A;false&#x3002;</li>
<li>&#x6D88;&#x606F;&#x56E0;&#x4E3A;&#x8BBE;&#x7F6E;&#x4E86;TTL&#x800C;&#x8FC7;&#x671F;&#x3002;</li>
<li>&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x4E86;&#x4E00;&#x6761;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x7684;&#x961F;&#x5217;&#x3002;</li>
</ol>
<p>&#x5982;&#x679C;&#x961F;&#x5217;&#x8BBE;&#x7F6E;&#x4E86;Dead Letter Exchange&#xFF08;DLX&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E9B;Dead Letter&#x5C31;&#x4F1A;&#x88AB;&#x91CD;&#x65B0;publish&#x5230;Dead Letter Exchange&#xFF0C;&#x901A;&#x8FC7;Dead Letter Exchange&#x8DEF;&#x7531;&#x5230;&#x5176;&#x4ED6;&#x961F;&#x5217;&#x3002;&#x66F4;&#x591A;&#x8D44;&#x6599;&#x8BF7;&#x67E5;&#x9605;<a href="/external_links/6860a50a8eaecf5f3074b655020a8d29.html" target="blank" rel="noopener">&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#x3002;</p>
<h3 id="&#x6D41;&#x7A0B;&#x56FE;"><a href="#&#x6D41;&#x7A0B;&#x56FE;" class="headerlink" title="&#x6D41;&#x7A0B;&#x56FE;"></a>&#x6D41;&#x7A0B;&#x56FE;</h3><p>&#x806A;&#x660E;&#x7684;&#x4F60;&#x80AF;&#x5B9A;&#x5DF2;&#x7ECF;&#x60F3;&#x5230;&#x4E86;&#xFF0C;&#x5982;&#x4F55;&#x5C06;RabbitMQ&#x7684;TTL&#x548C;DLX&#x7279;&#x6027;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;</p>
<p>&#x9488;&#x5BF9;&#x4E8E;&#x4E0A;&#x8FF0;&#x7684;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x4E24;&#x4E2A;&#x573A;&#x666F;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x6709;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x6D41;&#x7A0B;&#x56FE;&#xFF1A;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;"><a href="#&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;"></a>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;</h4><p>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x662F;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x6700;&#x4E3A;&#x5E38;&#x7528;&#x7684;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x4EA7;&#x751F;&#x7684;&#x6D88;&#x606F;&#x9996;&#x5148;&#x4F1A;&#x8FDB;&#x5165;&#x7F13;&#x51B2;&#x961F;&#x5217;&#xFF08;&#x56FE;&#x4E2D;&#x7EA2;&#x8272;&#x961F;&#x5217;&#xFF09;&#x3002;&#x901A;&#x8FC7;RabbitMQ&#x63D0;&#x4F9B;&#x7684;TTL&#x6269;&#x5C55;&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x4F1A;&#x88AB;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x7B49;&#x6D88;&#x606F;&#x8FC7;&#x671F;&#x4E4B;&#x540E;&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x4F1A;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x597D;&#x7684;DLX&#x8F6C;&#x53D1;&#x5230;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#xFF08;&#x56FE;&#x4E2D;&#x84DD;&#x8272;&#x961F;&#x5217;&#xFF09;&#xFF0C;&#x4EE5;&#x6B64;&#x8FBE;&#x5230;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8ae293b84759ee2d975c1f8a933fe7e8e758fc630c080e1a262a34485fdcacf1" alt></p>
<h4 id="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;"><a href="#&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;"></a>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;</h4><p>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x672C;&#x8D28;&#x4E0A;&#x4E5F;&#x662F;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x7684;&#x7ED3;&#x6784;&#x4E0E;&#x666E;&#x901A;&#x7684;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x8F83;&#x4E3A;&#x4E0D;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x5355;&#x72EC;&#x62CE;&#x51FA;&#x6765;&#x4ECB;&#x7ECD;&#x3002;</p>
<p>&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x53D1;&#x73B0;&#x8BE5;&#x6D88;&#x606F;&#x5904;&#x7406;&#x51FA;&#x73B0;&#x4E86;&#x5F02;&#x5E38;&#xFF0C;&#x6BD4;&#x5982;&#x662F;&#x56E0;&#x4E3A;&#x7F51;&#x7EDC;&#x6CE2;&#x52A8;&#x5F15;&#x8D77;&#x7684;&#x5F02;&#x5E38;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x4E0D;&#x7B49;&#x5F85;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x76F4;&#x63A5;&#x5C31;&#x91CD;&#x8BD5;&#x7684;&#x8BDD;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x5728;&#x8FD9;&#x671F;&#x95F4;&#x5185;&#x4E00;&#x76F4;&#x65E0;&#x6CD5;&#x6210;&#x529F;&#xFF0C;&#x9020;&#x6210;&#x4E00;&#x5B9A;&#x7684;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5148;&#x653E;&#x5728;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#xFF08;&#x56FE;&#x4E2D;&#x7EA2;&#x8272;&#x961F;&#x5217;&#xFF09;&#xFF0C;&#x7B49;&#x6D88;&#x606F;&#x7ECF;&#x8FC7;&#x4E00;&#x6BB5;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x540E;&#x518D;&#x6B21;&#x8FDB;&#x5165;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x4E2D;&#xFF08;&#x56FE;&#x4E2D;&#x84DD;&#x8272;&#x961F;&#x5217;&#xFF09;&#xFF0C;&#x6B64;&#x65F6;&#x7531;&#x4E8E;&#x5DF2;&#x7ECF;&#x8FC7;&#x4E86;&#x201C;&#x8F83;&#x957F;&#x201D;&#x7684;&#x65F6;&#x95F4;&#x4E86;&#xFF0C;&#x5F02;&#x5E38;&#x7684;&#x4E00;&#x4E9B;&#x6CE2;&#x52A8;&#x901A;&#x5E38;&#x5DF2;&#x7ECF;&#x6062;&#x590D;&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x53EF;&#x4EE5;&#x88AB;&#x6B63;&#x5E38;&#x5730;&#x6D88;&#x8D39;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b6bdf3cb650ce3d5577a4b9c3c870399a3ab269c89e7e25be117a207bb5db602" alt></p>
<h2 id="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x4EE3;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"></a>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</h2><p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5C06;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5728;Spring Boot&#x4E2D;&#x5B9E;&#x73B0;&#x57FA;&#x4E8E;RabbitMQ&#x7684;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;&#x6211;&#x4EEC;&#x5047;&#x8BBE;&#x8BFB;&#x8005;&#x5DF2;&#x7ECF;&#x62E5;&#x6709;&#x4E86;Spring Boot&#x4E0E;RabbitMQ&#x7684;&#x57FA;&#x672C;&#x77E5;&#x8BC6;&#x3002;&#x5982;&#x679C;&#x60F3;&#x5FEB;&#x901F;&#x4E86;&#x89E3;Spring Boot&#x7684;&#x76F8;&#x5173;&#x57FA;&#x7840;&#x77E5;&#x8BC6;&#xFF0C;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x4E4B;&#x524D;&#x5199;&#x7684;<a href="/external_links/d3cc17262c42ac75c80165b7102bd504.html" target="blank" rel="noopener">&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</a>&#x3002;</p>
<h3 id="&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;"><a href="#&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;" class="headerlink" title="&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;"></a>&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x7A0B;</h3><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5728;Intellij&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Spring Boot&#x5DE5;&#x7A0B;&#xFF0C;&#x5E76;&#x4E14;&#x6DFB;&#x52A0;<code>spring-boot-starter-amqp</code>&#x6269;&#x5C55;&#x3002;</p>
<h3 id="&#x914D;&#x7F6E;&#x961F;&#x5217;"><a href="#&#x914D;&#x7F6E;&#x961F;&#x5217;" class="headerlink" title="&#x914D;&#x7F6E;&#x961F;&#x5217;"></a>&#x914D;&#x7F6E;&#x961F;&#x5217;</h3><p>&#x4ECE;&#x4E0A;&#x8FF0;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x5B9E;&#x9645;&#x7684;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x3002;&#x53C8;&#x7531;&#x4E8E;&#x5728;RabbitMQ&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x62E5;&#x6709;&#x4E24;&#x79CD;&#x6D88;&#x606F;&#x8FC7;&#x671F;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x5171;&#x914D;&#x7F6E;&#x4E86;&#x4E09;&#x6761;&#x961F;&#x5217;&#xFF1A;</p>
<ul>
<li>delay_queue_per_message_ttl&#xFF1A;TTL&#x914D;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x3002;</li>
<li>delay_queue_per_queue_ttl&#xFF1A;TTL&#x914D;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x3002;</li>
<li>delay_process_queue&#xFF1A;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x3002;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;Java Config&#x7684;&#x65B9;&#x5F0F;&#x5C06;&#x4E0A;&#x8FF0;&#x7684;&#x961F;&#x5217;&#x914D;&#x7F6E;&#x4E3A;Bean&#x3002;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;<code>spring-boot-starter-amqp</code>&#x6269;&#x5C55;&#xFF0C;Spring Boot&#x5728;&#x542F;&#x52A8;&#x65F6;&#x4F1A;&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;&#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x521B;&#x5EFA;&#x8FD9;&#x4E9B;&#x961F;&#x5217;&#x3002;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x6D4B;&#x8BD5;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;delay_queue_per_message_ttl&#x4EE5;&#x53CA;delay_queue_per_queue_ttl&#x7684;DLX&#x914D;&#x7F6E;&#x4E3A;&#x540C;&#x4E00;&#x4E2A;&#xFF0C;&#x4E14;&#x8FC7;&#x671F;&#x7684;&#x6D88;&#x606F;&#x90FD;&#x4F1A;&#x901A;&#x8FC7;DLX&#x8F6C;&#x53D1;&#x5230;delay_process_queue&#x3002;</p>
<h4 id="delay-queue-per-message-ttl"><a href="#delay-queue-per-message-ttl" class="headerlink" title="delay_queue_per_message_ttl"></a>delay_queue_per_message_ttl</h4><p>&#x9996;&#x5148;&#x4ECB;&#x7ECD;delay_queue_per_message_ttl&#x7684;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Queue delayQueuePerMessageTTL() {</span><br><span class="line">    return QueueBuilder.durable(DELAY_QUEUE_PER_MESSAGE_TTL_NAME)</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-exchange&quot;, DELAY_EXCHANGE_NAME) // DLX&#xFF0C;dead letter&#x53D1;&#x9001;&#x5230;&#x7684;exchange</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-routing-key&quot;, DELAY_PROCESS_QUEUE_NAME) // dead letter&#x643A;&#x5E26;&#x7684;routing key</span><br><span class="line">                       .build();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x4E2D;&#xFF0C;<code>x-dead-letter-exchange</code>&#x58F0;&#x660E;&#x4E86;&#x961F;&#x5217;&#x91CC;&#x7684;&#x6B7B;&#x4FE1;&#x8F6C;&#x53D1;&#x5230;&#x7684;DLX&#x540D;&#x79F0;&#xFF0C;<code>x-dead-letter-routing-key</code>&#x58F0;&#x660E;&#x4E86;&#x8FD9;&#x4E9B;&#x6B7B;&#x4FE1;&#x5728;&#x8F6C;&#x53D1;&#x65F6;&#x643A;&#x5E26;&#x7684;routing-key&#x540D;&#x79F0;&#x3002;</p>
<h4 id="delay-queue-per-queue-ttl"><a href="#delay-queue-per-queue-ttl" class="headerlink" title="delay_queue_per_queue_ttl"></a>delay_queue_per_queue_ttl</h4><p>&#x7C7B;&#x4F3C;&#x5730;&#xFF0C;delay_queue_per_queue_ttl&#x7684;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Queue delayQueuePerQueueTTL() {</span><br><span class="line">    return QueueBuilder.durable(DELAY_QUEUE_PER_QUEUE_TTL_NAME)</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-exchange&quot;, DELAY_EXCHANGE_NAME) // DLX</span><br><span class="line">                       .withArgument(&quot;x-dead-letter-routing-key&quot;, DELAY_PROCESS_QUEUE_NAME) // dead letter&#x643A;&#x5E26;&#x7684;routing key</span><br><span class="line">                       .withArgument(&quot;x-message-ttl&quot;, QUEUE_EXPIRATION) // &#x8BBE;&#x7F6E;&#x961F;&#x5217;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</span><br><span class="line">                       .build();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>delay_queue_per_queue_ttl&#x961F;&#x5217;&#x7684;&#x914D;&#x7F6E;&#x6BD4;delay_queue_per_message_ttl&#x961F;&#x5217;&#x7684;&#x914D;&#x7F6E;&#x591A;&#x4E86;&#x4E00;&#x4E2A;<code>x-message-ttl</code>&#xFF0C;&#x8BE5;&#x914D;&#x7F6E;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x961F;&#x5217;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x3002;</p>
<h4 id="delay-process-queue"><a href="#delay-process-queue" class="headerlink" title="delay_process_queue"></a>delay_process_queue</h4><p>delay_process_queue&#x7684;&#x914D;&#x7F6E;&#x6700;&#x4E3A;&#x7B80;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Queue delayProcessQueue() {</span><br><span class="line">    return QueueBuilder.durable(DELAY_PROCESS_QUEUE_NAME)</span><br><span class="line">                       .build();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x914D;&#x7F6E;Exchange"><a href="#&#x914D;&#x7F6E;Exchange" class="headerlink" title="&#x914D;&#x7F6E;Exchange"></a>&#x914D;&#x7F6E;Exchange</h3><h4 id="&#x914D;&#x7F6E;DLX"><a href="#&#x914D;&#x7F6E;DLX" class="headerlink" title="&#x914D;&#x7F6E;DLX"></a>&#x914D;&#x7F6E;DLX</h4><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x914D;&#x7F6E;DLX&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">DirectExchange delayExchange() {</span><br><span class="line">    return new DirectExchange(DELAY_EXCHANGE_NAME);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x518D;&#x5C06;&#x8BE5;DLX&#x7ED1;&#x5B9A;&#x5230;&#x5B9E;&#x9645;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x5373;delay_process_queue&#x4E0A;&#x3002;&#x8FD9;&#x6837;&#x6240;&#x6709;&#x7684;&#x6B7B;&#x4FE1;&#x90FD;&#x4F1A;&#x901A;&#x8FC7;DLX&#x88AB;&#x8F6C;&#x53D1;&#x5230;delay_process_queue&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">Binding dlxBinding(Queue delayProcessQueue, DirectExchange delayExchange) {</span><br><span class="line">    return BindingBuilder.bind(delayProcessQueue)</span><br><span class="line">                         .to(delayExchange)</span><br><span class="line">                         .with(DELAY_PROCESS_QUEUE_NAME);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange"><a href="#&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange" class="headerlink" title="&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange"></a>&#x914D;&#x7F6E;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x6240;&#x9700;&#x7684;Exchange</h4><p>&#x4ECE;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6D88;&#x606F;&#x5904;&#x7406;&#x5931;&#x8D25;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x6D88;&#x606F;&#x8F6C;&#x53D1;&#x5230;&#x7F13;&#x51B2;&#x961F;&#x5217;&#xFF0C;&#x6240;&#x4EE5;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E5F;&#x9700;&#x8981;&#x7ED1;&#x5B9A;&#x4E00;&#x4E2A;Exchange&#x3002;<strong>&#x5728;&#x672C;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;delay_process_per_queue_ttl&#x4F5C;&#x4E3A;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x91CC;&#x7684;&#x7F13;&#x51B2;&#x961F;&#x5217;</strong>&#x3002;&#x5177;&#x4F53;&#x4EE3;&#x7801;&#x662F;&#x5982;&#x4F55;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x4E86;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x67E5;&#x9605;&#x6211;<a href="/external_links/81e05fe58f8aa432fd1916bcd1af3e9f.html" target="blank" rel="noopener">Github</a>&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<h3 id="&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;"><a href="#&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;" class="headerlink" title="&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;"></a>&#x5B9A;&#x4E49;&#x6D88;&#x8D39;&#x8005;</h3><p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;&#x6D88;&#x8D39;&#x8005;ProcessReceiver&#xFF0C;&#x8FD9;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x76D1;&#x542C;delay_process_queue&#x961F;&#x5217;&#xFF0C;&#x5BF9;&#x4E8E;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x4ED6;&#x4F1A;&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;&#x6D88;&#x606F;&#x91CC;&#x7684;&#x6D88;&#x606F;&#x4F53;&#x4E0D;&#x7B49;&#x4E8E;FAIL_MESSAGE&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4F1A;&#x8F93;&#x51FA;&#x6D88;&#x606F;&#x4F53;&#x3002;</li>
<li>&#x5982;&#x679C;&#x6D88;&#x606F;&#x91CC;&#x7684;&#x6D88;&#x606F;&#x4F53;&#x6070;&#x597D;&#x662F;FAIL_MESSAGE&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4F1A;&#x6A21;&#x62DF;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x8BE5;&#x6D88;&#x606F;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x7F13;&#x51B2;&#x961F;&#x5217;&#xFF08;&#x5BF9;&#x5E94;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;&#xFF09;&#x3002;</li>
</ul>
<p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x5BB9;&#x5668;&#x7528;&#x4E8E;&#x5B58;&#x653E;&#x6D88;&#x8D39;&#x8005;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Bean</span><br><span class="line">SimpleMessageListenerContainer processContainer(ConnectionFactory connectionFactory, ProcessReceiver processReceiver) {</span><br><span class="line">    SimpleMessageListenerContainer container = new SimpleMessageListenerContainer();</span><br><span class="line">    container.setConnectionFactory(connectionFactory);</span><br><span class="line">    container.setQueueNames(DELAY_PROCESS_QUEUE_NAME); // &#x76D1;&#x542C;delay_process_queue</span><br><span class="line">    container.setMessageListener(new MessageListenerAdapter(processReceiver));</span><br><span class="line">    return container;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x524D;&#x7F6E;&#x7684;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x5DF2;&#x7ECF;&#x5168;&#x90E8;&#x7F16;&#x5199;&#x5B8C;&#x6210;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x6765;&#x6D4B;&#x8BD5;&#x6211;&#x4EEC;&#x7684;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;</p>
<h3 id="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;"><a href="#&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;" class="headerlink" title="&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;"></a>&#x7F16;&#x5199;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;</h3><h4 id="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;"><a href="#&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;</h4><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x7F16;&#x5199;&#x7528;&#x4E8E;&#x6D4B;&#x8BD5;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x501F;&#x52A9;<code>spring-rabbit</code>&#x5305;&#x4E0B;&#x63D0;&#x4F9B;&#x7684;RabbitTemplate&#x7C7B;&#x6765;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x3002;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;<code>spring-boot-starter-amqp</code>&#x6269;&#x5C55;&#xFF0C;Spring Boot&#x4F1A;&#x5728;&#x521D;&#x59CB;&#x5316;&#x65F6;&#x81EA;&#x52A8;&#x5730;&#x5C06;RabbitTemplate&#x5F53;&#x6210;bean&#x52A0;&#x8F7D;&#x5230;&#x5BB9;&#x5668;&#x4E2D;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x4E86;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x4E48;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x4E3A;&#x6BCF;&#x4E2A;&#x6D88;&#x606F;&#x8BBE;&#x7F6E;TTL&#x5462;&#xFF1F;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x501F;&#x52A9;MessagePostProcessor&#x3002;MessagePostProcessor&#x901A;&#x5E38;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x6D88;&#x606F;&#x7684;Header&#x4EE5;&#x53CA;&#x6D88;&#x606F;&#x7684;&#x5C5E;&#x6027;&#x3002;&#x6211;&#x4EEC;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;ExpirationMessagePostProcessor&#x7C7B;&#x6765;&#x8D1F;&#x8D23;&#x8BBE;&#x7F6E;&#x6D88;&#x606F;&#x7684;TTL&#x5C5E;&#x6027;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x8BBE;&#x7F6E;&#x6D88;&#x606F;&#x7684;&#x5931;&#x6548;&#x65F6;&#x95F4;</span><br><span class="line"> */</span><br><span class="line">public class ExpirationMessagePostProcessor implements MessagePostProcessor {</span><br><span class="line">    private final Long ttl; // &#x6BEB;&#x79D2;</span><br><span class="line">    public ExpirationMessagePostProcessor(Long ttl) {</span><br><span class="line">        this.ttl = ttl;</span><br><span class="line">    }</span><br><span class="line">    @Override</span><br><span class="line">    public Message postProcessMessage(Message message) throws AmqpException {</span><br><span class="line">        message.getMessageProperties()</span><br><span class="line">               .setExpiration(ttl.toString()); // &#x8BBE;&#x7F6E;per-message&#x7684;&#x5931;&#x6548;&#x65F6;&#x95F4;</span><br><span class="line">        return message;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5728;&#x8C03;&#x7528;RabbitTemplate&#x7684;convertAndSend&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4F20;&#x5165;ExpirationMessagePostPorcessor&#x5373;&#x53EF;&#x3002;&#x6211;&#x4EEC;&#x5411;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#x53D1;&#x9001;3&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4F9D;&#x6B21;&#x4E3A;1&#x79D2;&#xFF0C;2&#x79D2;&#x548C;3&#x79D2;&#x3002;&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Test</span><br><span class="line">public void testDelayQueuePerMessageTTL() throws InterruptedException {</span><br><span class="line">    ProcessReceiver.latch = new CountDownLatch(3);</span><br><span class="line">    for (int i = 1; i &lt;= 3; i++) {</span><br><span class="line">        long expiration = i * 1000;</span><br><span class="line">        rabbitTemplate.convertAndSend(QueueConfig.DELAY_QUEUE_PER_MESSAGE_TTL_NAME,</span><br><span class="line">                (Object) (&quot;Message From delay_queue_per_message_ttl with expiration &quot; + expiration), new ExpirationMessagePostProcessor(expiration));</span><br><span class="line">    }</span><br><span class="line">    ProcessReceiver.latch.await();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7EC6;&#x5FC3;&#x7684;&#x670B;&#x53CB;&#x4E00;&#x5B9A;&#x4F1A;&#x95EE;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x52A0;&#x4E00;&#x4E2A;CountDownLatch&#x5462;&#xFF1F;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x6CA1;&#x6709;latch&#x963B;&#x585E;&#x4F4F;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;&#x7684;&#x8BDD;&#xFF0C;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x4F1A;&#x76F4;&#x63A5;&#x7ED3;&#x675F;&#xFF0C;&#x7A0B;&#x5E8F;&#x9000;&#x51FA;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x770B;&#x4E0D;&#x5230;&#x6D88;&#x606F;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x8868;&#x73B0;&#x4E86;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x7C7B;&#x4F3C;&#x5730;&#xFF0C;&#x6D4B;&#x8BD5;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Test</span><br><span class="line">public void testDelayQueuePerQueueTTL() throws InterruptedException {</span><br><span class="line">    ProcessReceiver.latch = new CountDownLatch(3);</span><br><span class="line">    for (int i = 1; i &lt;= 3; i++) {</span><br><span class="line">        rabbitTemplate.convertAndSend(QueueConfig.DELAY_QUEUE_PER_QUEUE_TTL_NAME,</span><br><span class="line">                &quot;Message From delay_queue_per_queue_ttl with expiration &quot; + QueueConfig.QUEUE_EXPIRATION);</span><br><span class="line">    }</span><br><span class="line">    ProcessReceiver.latch.await();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5411;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E2D;&#x53D1;&#x9001;3&#x6761;&#x6D88;&#x606F;&#x3002;&#x7406;&#x8BBA;&#x4E0A;&#x8FD9;3&#x6761;&#x6D88;&#x606F;&#x4F1A;&#x5728;4&#x79D2;&#x540E;&#x540C;&#x65F6;&#x8FC7;&#x671F;&#x3002;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;"><a href="#&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;</h4><p>&#x6211;&#x4EEC;&#x540C;&#x6837;&#x8FD8;&#x9700;&#x6D4B;&#x8BD5;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Test</span><br><span class="line">public void testFailMessage() throws InterruptedException {</span><br><span class="line">    ProcessReceiver.latch = new CountDownLatch(6);</span><br><span class="line">    for (int i = 1; i &lt;= 3; i++) {</span><br><span class="line">        rabbitTemplate.convertAndSend(QueueConfig.DELAY_PROCESS_QUEUE_NAME, ProcessReceiver.FAIL_MESSAGE);</span><br><span class="line">    }</span><br><span class="line">    ProcessReceiver.latch.await();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5411;delay_process_queue&#x53D1;&#x9001;3&#x6761;&#x4F1A;&#x89E6;&#x53D1;FAIL&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x8FD9;3&#x6761;&#x6D88;&#x606F;&#x4F1A;&#x5728;4&#x79D2;&#x540E;&#x81EA;&#x52A8;&#x91CD;&#x8BD5;&#x3002;</p>
<h3 id="&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"><a href="#&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;" class="headerlink" title="&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"></a>&#x67E5;&#x770B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</h3><h4 id="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;-1"><a href="#&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;-1" class="headerlink" title="&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;</h4><p>&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x7684;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6211;&#x4EEC;&#x5206;&#x4E3A;&#x4E86;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x548C;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x4E24;&#x79CD;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E0B;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e7a4b6771bdadee329dde65dc3da3f0cfc6db8a1ae7ae0624b7f5313b11eef0c" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;ProcessReceiver&#x5206;&#x522B;&#x7ECF;&#x8FC7;1&#x79D2;&#x3001;2&#x79D2;&#x3001;3&#x79D2;&#x6536;&#x5230;&#x6D88;&#x606F;&#x3002;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x8868;&#x660E;&#x6D88;&#x606F;&#x4E0D;&#x4EC5;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x4E86;&#xFF0C;&#x800C;&#x4E14;&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x4E2A;&#x6027;&#x5316;&#x8BBE;&#x7F6E;&#x7684;&#x3002;TTL&#x8BBE;&#x7F6E;&#x5728;&#x6D88;&#x606F;&#x4E0A;&#x7684;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x3002;<br>&#x7136;&#x540E;&#xFF0C;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/eac2cc9ad410cf9e95428d806932746b22e5b327c91cfcd65ed62815922fff90" alt></p>
<p>&#x4ECE;&#x4E0A;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;ProcessReceiver&#x7ECF;&#x8FC7;&#x4E86;4&#x79D2;&#x7684;&#x5EF6;&#x8FDF;&#x4E4B;&#x540E;&#xFF0C;&#x540C;&#x65F6;&#x6536;&#x5230;&#x4E86;3&#x6761;&#x6D88;&#x606F;&#x3002;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#x8868;&#x660E;&#x6D88;&#x606F;&#x4E0D;&#x4EC5;&#x88AB;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x4E86;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x8BC1;&#x660E;&#x4E86;&#x5F53;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6D88;&#x606F;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x3002;TTL&#x8BBE;&#x7F6E;&#x5728;&#x961F;&#x5217;&#x4E0A;&#x7684;&#x5EF6;&#x8FDF;&#x6D88;&#x8D39;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x3002;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;-1"><a href="#&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;-1" class="headerlink" title="&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;"></a>&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;</h4><p>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/48fe1014ef84749cd60030cefb4b4a9b8179411857b5fdb99f499c575e57bc76" alt></p>
<p>ProcessReceiver&#x9996;&#x5148;&#x6536;&#x5230;&#x4E86;3&#x6761;&#x4F1A;&#x89E6;&#x53D1;FAIL&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x5176;&#x79FB;&#x52A8;&#x5230;&#x7F13;&#x51B2;&#x961F;&#x5217;&#x4E4B;&#x540E;&#xFF0C;&#x8FC7;&#x4E86;4&#x79D2;&#xFF0C;&#x53C8;&#x6536;&#x5230;&#x4E86;&#x521A;&#x624D;&#x7684;&#x90A3;3&#x6761;&#x6D88;&#x606F;&#x3002;&#x5EF6;&#x8FDF;&#x91CD;&#x8BD5;&#x573A;&#x666F;&#x6D4B;&#x8BD5;&#x6210;&#x529F;&#x3002;</p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x672C;&#x6587;&#x9996;&#x5148;&#x4ECB;&#x7ECD;&#x4E86;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x7684;&#x6982;&#x5FF5;&#x4EE5;&#x53CA;&#x7528;&#x9014;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x4EE3;&#x7801;&#x8BE6;&#x7EC6;&#x8BB2;&#x89E3;&#x4E86;&#x5982;&#x4F55;&#x901A;&#x8FC7;Spring Boot&#x548C;RabbitMQ&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;&#x961F;&#x5217;&#x3002;&#x5E0C;&#x671B;&#x672C;&#x6587;&#x80FD;&#x591F;&#x5BF9;&#x5927;&#x5BB6;&#x5E73;&#x65F6;&#x7684;&#x5B66;&#x4E60;&#x548C;&#x5DE5;&#x4F5C;&#x80FD;&#x6709;&#x6240;&#x542F;&#x53D1;&#x548C;&#x5E2E;&#x52A9;&#x3002;&#x6709;&#x4EC0;&#x4E48;&#x610F;&#x89C1;&#x6216;&#x8005;&#x95EE;&#x9898;&#x6B22;&#x8FCE;&#x5728;&#x8BC4;&#x8BBA;&#x4E0B;&#x65B9;&#x7559;&#x8A00;&#xFF0C;&#x8C22;&#x8C22;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/6a91354470f7dbbe8838bbb536a228d1.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513600819213.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513600819213.html" itemprop="url">架构师之路-在Dubbo中开发REST风格的远程调用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:20:23+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="&#x6982;&#x8FF0;"><a href="#&#x6982;&#x8FF0;" class="headerlink" title="&#x6982;&#x8FF0;"></a>&#x6982;&#x8FF0;</h4><p><a href="/external_links/2ddf5ee60d19e54b14d1916fa8e28af9.html" target="blank" rel="noopener">dubbo</a>&#x652F;&#x6301;&#x591A;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;dubbo RPC&#xFF08;&#x4E8C;&#x8FDB;&#x5236;&#x5E8F;&#x5217;&#x5316; + tcp&#x534F;&#x8BAE;&#xFF09;&#x3001;http invoker&#xFF08;&#x4E8C;&#x8FDB;&#x5236;&#x5E8F;&#x5217;&#x5316; + http&#x534F;&#x8BAE;&#xFF0C;&#x81F3;&#x5C11;&#x5728;&#x5F00;&#x6E90;&#x7248;&#x672C;&#x6CA1;&#x53D1;&#x73B0;&#x5BF9;&#x6587;&#x672C;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x652F;&#x6301;&#xFF09;&#x3001;hessian&#xFF08;&#x4E8C;&#x8FDB;&#x5236;&#x5E8F;&#x5217;&#x5316; + http&#x534F;&#x8BAE;&#xFF09;&#x3001;WebServices &#xFF08;&#x6587;&#x672C;&#x5E8F;&#x5217;&#x5316; + http&#x534F;&#x8BAE;&#xFF09;&#x7B49;&#x7B49;&#xFF0C;&#x4F46;&#x7F3A;&#x4E4F;&#x5BF9;&#x5F53;&#x4ECA;&#x7279;&#x522B;&#x6D41;&#x884C;&#x7684;REST&#x98CE;&#x683C;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#xFF08;&#x6587;&#x672C;&#x5E8F;&#x5217;&#x5316;</p>
<ul>
<li>http&#x534F;&#x8BAE;&#xFF09;&#x7684;&#x652F;&#x6301;&#x3002;</li>
</ul>
<p>&#x6709;&#x9274;&#x4E8E;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x57FA;&#x4E8E;&#x6807;&#x51C6;&#x7684;Java REST API&#x2014;&#x2014;JAX-RS 2.0&#xFF08;Java API for RESTful Web Services&#x7684;&#x7B80;&#x5199;&#xFF09;&#xFF0C;&#x4E3A;dubbo&#x63D0;&#x4F9B;&#x4E86;&#x63A5;&#x8FD1;&#x900F;&#x660E;&#x7684;REST&#x8C03;&#x7528;&#x652F;&#x6301;&#x3002;&#x7531;&#x4E8E;&#x5B8C;&#x5168;&#x517C;&#x5BB9;Java&#x6807;&#x51C6;API&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;dubbo&#x5F00;&#x53D1;&#x7684;&#x6240;&#x6709;REST&#x670D;&#x52A1;&#xFF0C;&#x672A;&#x6765;&#x8131;&#x79BB;dubbo&#x6216;&#x8005;&#x4EFB;&#x4F55;&#x7279;&#x5B9A;&#x7684;REST&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4E00;&#x822C;&#x4E5F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002;</p>
<p>&#x7279;&#x522B;&#x503C;&#x5F97;&#x6307;&#x51FA;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x5B8C;&#x5168;&#x4E25;&#x683C;&#x9075;&#x5B88;REST&#x7684;&#x539F;&#x59CB;&#x5B9A;&#x4E49;&#x548C;&#x67B6;&#x6784;&#x98CE;&#x683C;&#x3002;&#x5373;&#x4F7F;&#x8457;&#x540D;&#x7684;Twitter REST API&#x4E5F;&#x4F1A;&#x6839;&#x636E;&#x60C5;&#x51B5;&#x505A;&#x9002;&#x5EA6;&#x8C03;&#x6574;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x673A;&#x68B0;&#x7684;&#x9075;&#x5B88;&#x539F;&#x59CB;&#x7684;REST&#x98CE;&#x683C;&#x3002;</p>
<blockquote>
<p>&#x9644;&#x6CE8;&#xFF1A;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x79F0;&#x4E4B;&#x4E3A;REST&#x98CE;&#x683C;&#x7684;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#xFF0C;&#x5373;RESTful Remoting&#xFF08;&#x62BD;&#x8C61;&#x7684;&#x8FDC;&#x7A0B;&#x5904;&#x7406;&#x6216;&#x8005;&#x8C03;&#x7528;&#xFF09;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x53EB;RESTful RPC&#xFF08;&#x5177;&#x4F53;&#x7684;&#x8FDC;&#x7A0B;&#x201C;&#x8FC7;&#x7A0B;&#x201D;&#x8C03;&#x7528;&#xFF09;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;REST&#x548C;RPC&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x88AB;&#x8BA4;&#x4E3A;&#x662F;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x98CE;&#x683C;&#x3002;&#x5728;dubbo&#x7684;REST&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x8BF4;&#x6709;&#x4E24;&#x4E2A;&#x9762;&#x5411;&#xFF0C;&#x5176;&#x4E00;&#x662F;&#x63D0;&#x4F9B;&#x6216;&#x6D88;&#x8D39;&#x6B63;&#x5E38;&#x7684;REST&#x670D;&#x52A1;&#xFF0C;&#x5176;&#x4E8C;&#x662F;&#x5C06;REST&#x4F5C;&#x4E3A;dubbo RPC&#x4F53;&#x7CFB;&#x4E2D;&#x4E00;&#x79CD;&#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;RESTful Remoting&#x540C;&#x65F6;&#x6DB5;&#x76D6;&#x4E86;&#x8FD9;&#x4E2A;&#x9762;&#x5411;&#x3002;</p>
</blockquote>
<h4 id="REST&#x7684;&#x4F18;&#x70B9;"><a href="#REST&#x7684;&#x4F18;&#x70B9;" class="headerlink" title="REST&#x7684;&#x4F18;&#x70B9;"></a>REST&#x7684;&#x4F18;&#x70B9;</h4><p>&#x4EE5;&#x4E0B;&#x6458;&#x81EA;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#xFF1A;</p>
<p>&#x53EF;&#x66F4;&#x9AD8;&#x6548;&#x5229;&#x7528;&#x7F13;&#x5B58;&#x6765;&#x63D0;&#x9AD8;&#x54CD;&#x5E94;&#x901F;&#x5EA6;<br>&#x901A;&#x8BAF;&#x672C;&#x8EAB;&#x7684;&#x65E0;&#x72B6;&#x6001;&#x6027;&#x53EF;&#x4EE5;&#x8BA9;&#x4E0D;&#x540C;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5904;&#x7406;&#x4E00;&#x7CFB;&#x5217;&#x8BF7;&#x6C42;&#x4E2D;&#x7684;&#x4E0D;&#x540C;&#x8BF7;&#x6C42;&#xFF0C;&#x63D0;&#x9AD8;&#x670D;&#x52A1;&#x5668;&#x7684;&#x6269;&#x5C55;&#x6027;<br>&#x6D4F;&#x89C8;&#x5668;&#x5373;&#x53EF;&#x4F5C;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7B80;&#x5316;&#x8F6F;&#x4EF6;&#x9700;&#x6C42;<br>&#x76F8;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x53E0;&#x52A0;&#x5728;HTTP&#x534F;&#x8BAE;&#x4E4B;&#x4E0A;&#x7684;&#x673A;&#x5236;&#xFF0C;REST&#x7684;&#x8F6F;&#x4EF6;&#x4F9D;&#x8D56;&#x6027;&#x66F4;&#x5C0F;<br>&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x8D44;&#x6E90;&#x53D1;&#x73B0;&#x673A;&#x5236;<br>&#x5728;&#x8F6F;&#x4EF6;&#x6280;&#x672F;&#x6F14;&#x8FDB;&#x4E2D;&#x7684;&#x957F;&#x671F;&#x7684;&#x517C;&#x5BB9;&#x6027;&#x66F4;&#x597D;<br>&#x8FD9;&#x91CC;&#x6211;&#x8FD8;&#x60F3;&#x7279;&#x522B;&#x8865;&#x5145;REST&#x7684;&#x663E;&#x8457;&#x4F18;&#x70B9;&#xFF1A;&#x57FA;&#x4E8E;&#x7B80;&#x5355;&#x7684;&#x6587;&#x672C;&#x683C;&#x5F0F;&#x6D88;&#x606F;&#x548C;&#x901A;&#x7528;&#x7684;HTTP&#x534F;&#x8BAE;&#xFF0C;&#x4F7F;&#x5B83;&#x5177;&#x5907;&#x6781;&#x5E7F;&#x7684;&#x9002;&#x7528;&#x6027;&#xFF0C;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x8BED;&#x8A00;&#x548C;&#x5E73;&#x53F0;&#x90FD;&#x5BF9;&#x5B83;&#x63D0;&#x4F9B;&#x652F;&#x6301;&#xFF0C;&#x540C;&#x65F6;&#x5176;&#x5B66;&#x4E60;&#x548C;&#x4F7F;&#x7528;&#x7684;&#x95E8;&#x69DB;&#x4E5F;&#x8F83;&#x4F4E;&#x3002;</p>
<h4 id="&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x5E94;&#x7528;&#x573A;&#x666F;"></a>&#x5E94;&#x7528;&#x573A;&#x666F;</h4><p>&#x6B63;&#x662F;&#x7531;&#x4E8E;REST&#x5728;&#x9002;&#x7528;&#x6027;&#x65B9;&#x9762;&#x7684;&#x4F18;&#x70B9;&#xFF0C;&#x6240;&#x4EE5;&#x5728;dubbo&#x4E2D;&#x652F;&#x6301;REST&#xFF0C;&#x53EF;&#x4EE5;&#x4E3A;&#x5F53;&#x4ECA;&#x591A;&#x6570;&#x4E3B;&#x6D41;&#x7684;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x573A;&#x666F;&#x90FD;&#x5E26;&#x6765;&#xFF08;&#x663E;&#x8457;&#xFF09;&#x597D;&#x5904;&#xFF1A;</p>
<p>&#x663E;&#x8457;&#x7B80;&#x5316;&#x4F01;&#x4E1A;&#x5185;&#x90E8;&#x7684;&#x5F02;&#x6784;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x7684;&#xFF08;&#x8DE8;&#x8BED;&#x8A00;&#xFF09;&#x8C03;&#x7528;&#x3002;&#x6B64;&#x5904;&#x4E3B;&#x8981;&#x9488;&#x5BF9;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#xFF1A;dubbo&#x7684;&#x7CFB;&#x7EDF;&#x505A;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#xFF0C;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x7684;&#x7CFB;&#x7EDF;&#xFF08;&#x4E5F;&#x5305;&#x62EC;&#x67D0;&#x4E9B;&#x4E0D;&#x57FA;&#x4E8E;dubbo&#x7684;java&#x7CFB;&#x7EDF;&#xFF09;&#x505A;&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x7AEF;&#xFF0C;&#x4E24;&#x8005;&#x901A;&#x8FC7;HTTP&#x548C;&#x6587;&#x672C;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;&#x5373;&#x4F7F;&#x76F8;&#x6BD4;Thrift&#x3001;ProtoBuf&#x7B49;&#x4E8C;&#x8FDB;&#x5236;&#x8DE8;&#x8BED;&#x8A00;&#x8C03;&#x7528;&#x65B9;&#x6848;&#xFF0C;REST&#x4E5F;&#x6709;&#x81EA;&#x5DF1;&#x72EC;&#x7279;&#x7684;&#x4F18;&#x52BF;&#xFF08;&#x8BE6;&#x89C1;&#x540E;&#x9762;&#x8BA8;&#x8BBA;&#xFF09;</p>
<p>&#x663E;&#x8457;&#x7B80;&#x5316;&#x5BF9;&#x5916;Open API&#xFF08;&#x5F00;&#x653E;&#x5E73;&#x53F0;&#xFF09;&#x7684;&#x5F00;&#x53D1;&#x3002;&#x65E2;&#x53EF;&#x4EE5;&#x7528;dubbo&#x6765;&#x5F00;&#x53D1;&#x4E13;&#x95E8;&#x7684;Open API&#x5E94;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x539F;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;dubbo service&#x76F4;&#x63A5;&#x201C;&#x900F;&#x660E;&#x201D;&#x53D1;&#x5E03;&#x4E3A;&#x5BF9;&#x5916;&#x7684;Open REST API&#xFF08;&#x5F53;&#x7136;dubbo&#x672C;&#x8EAB;&#x672A;&#x6765;&#x6700;&#x597D;&#x53EF;&#x4EE5;&#x8F83;&#x900F;&#x660E;&#x7684;&#x63D0;&#x4F9B;&#x8BF8;&#x5982;&#x6743;&#x9650;&#x63A7;&#x5236;&#x3001;&#x9891;&#x6B21;&#x63A7;&#x5236;&#x3001;&#x8BA1;&#x8D39;&#x7B49;&#x8BF8;&#x591A;&#x529F;&#x80FD;&#xFF09;</p>
<p>&#x663E;&#x8457;&#x7B80;&#x5316;&#x624B;&#x673A;&#xFF08;&#x5E73;&#x677F;&#xFF09;APP&#x6216;&#x8005;PC&#x684C;&#x9762;&#x5BA2;&#x6237;&#x7AEF;&#x5F00;&#x53D1;&#x3002;&#x7C7B;&#x4F3C;&#x4E8E;2&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x7528;dubbo&#x6765;&#x5F00;&#x53D1;&#x4E13;&#x95E8;&#x9488;&#x5BF9;&#x65E0;&#x7EBF;&#x6216;&#x8005;&#x684C;&#x9762;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x539F;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;dubbo service&#x76F4;&#x63A5;&#x201D;&#x900F;&#x660E;&#x201C;&#x7684;&#x66B4;&#x9732;&#x7ED9;&#x624B;&#x673A;APP&#x6216;&#x684C;&#x9762;&#x7A0B;&#x5E8F;&#x3002;&#x5F53;&#x7136;&#x5728;&#x6709;&#x4E9B;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x624B;&#x673A;&#x6216;&#x684C;&#x9762;&#x7A0B;&#x5E8F;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x4EE5;&#x4E0A;&#x573A;&#x666F;2&#x4E2D;&#x6240;&#x8FF0;&#x7684;Open API&#x3002;</p>
<p>&#x663E;&#x8457;&#x7B80;&#x5316;&#x6D4F;&#x89C8;&#x5668;AJAX&#x5E94;&#x7528;&#x7684;&#x5F00;&#x53D1;&#x3002;&#x7C7B;&#x4F3C;&#x4E8E;2&#xFF0C;&#x65E2;&#x53EF;&#x4EE5;&#x7528;dubbo&#x6765;&#x5F00;&#x53D1;&#x4E13;&#x95E8;&#x7684;AJAX&#x670D;&#x52A1;&#x5668;&#x7AEF;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x539F;&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x7684;dubbo service&#x76F4;&#x63A5;&#x201D;&#x900F;&#x660E;&#x201C;&#x7684;&#x66B4;&#x9732;&#x7ED9;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;JavaScript&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5F88;&#x591A;AJAX&#x5E94;&#x7528;&#x66F4;&#x9002;&#x5408;&#x4E0E;web&#x6846;&#x67B6;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;dubbo service&#x5728;&#x5F88;&#x591A;web&#x9879;&#x76EE;&#x4E2D;&#x672A;&#x5FC5;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x4F18;&#x96C5;&#x7684;&#x67B6;&#x6784;&#x3002;</p>
<p>&#x4E3A;&#x4F01;&#x4E1A;&#x5185;&#x90E8;&#x7684;dubbo&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#xFF08;&#x5373;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x548C;&#x6D88;&#x8D39;&#x7AEF;&#x90FD;&#x662F;&#x57FA;&#x4E8E;dubbo&#x7684;&#x7CFB;&#x7EDF;&#xFF09;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x57FA;&#x4E8E;&#x6587;&#x672C;&#x7684;&#x3001;&#x6613;&#x8BFB;&#x7684;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x7B80;&#x5316;dubbo&#x7CFB;&#x7EDF;&#x5BF9;&#x5176;&#x5B83;&#x5F02;&#x6784;&#x7CFB;&#x7EDF;&#x7684;&#x8C03;&#x7528;&#x3002;&#x53EF;&#x4EE5;&#x7528;&#x7C7B;&#x4F3C;dubbo&#x7684;&#x7B80;&#x4FBF;&#x65B9;&#x5F0F;&#x201C;&#x900F;&#x660E;&#x201D;&#x7684;&#x8C03;&#x7528;&#x975E;dubbo&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x7684;REST&#x670D;&#x52A1;&#xFF08;&#x4E0D;&#x7BA1;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x662F;&#x5728;&#x4F01;&#x4E1A;&#x5185;&#x90E8;&#x8FD8;&#x662F;&#x5916;&#x90E8;&#xFF09;</p>
<p>&#x9700;&#x8981;&#x6307;&#x51FA;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x8BA4;&#x4E3A;1&#xFF5E;3&#x662F;dubbo&#x7684;REST&#x8C03;&#x7528;&#x6700;&#x6709;&#x4EF7;&#x503C;&#x7684;&#x4E09;&#x79CD;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5E76;&#x4E14;&#x6211;&#x4EEC;&#x4E3A;dubbo&#x6DFB;&#x52A0;REST&#x8C03;&#x7528;&#xFF0C;&#x5176;&#x6700;&#x4E3B;&#x8981;&#x5230;&#x76EE;&#x7684;&#x4E5F;&#x662F;&#x9762;&#x5411;&#x670D;&#x52A1;&#x7684;&#x63D0;&#x4F9B;&#x7AEF;&#xFF0C;&#x5373;&#x5F00;&#x53D1;REST&#x670D;&#x52A1;&#x6765;&#x63D0;&#x4F9B;&#x7ED9;&#x975E;dubbo&#x7684;&#xFF08;&#x5F02;&#x6784;&#xFF09;&#x6D88;&#x8D39;&#x7AEF;&#x3002;</p>
<p>&#x5F52;&#x7EB3;&#x8D77;&#x6765;&#xFF0C;&#x6240;&#x6709;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f67eb8f10c1da5e760c5e03bbe1dc6a6127afb452ec75ab2194ad9bb0136657d" alt></p>
<p>&#x501F;&#x7528;Java&#x8FC7;&#x53BB;&#x6700;&#x6D41;&#x884C;&#x7684;&#x5BA3;&#x4F20;&#x8BED;&#xFF0C;&#x4E3A;dubbo&#x6DFB;&#x52A0;REST&#x8C03;&#x7528;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x670D;&#x52A1;&#x7684;&#x201D;&#x4E00;&#x6B21;&#x7F16;&#x5199;&#xFF0C;&#x5230;&#x5904;&#x8BBF;&#x95EE;&#x201C;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x53EF;&#x4EE5;&#x9762;&#x5411;&#x5168;&#x4E16;&#x754C;&#x5F00;&#x653E;&#xFF0C;&#x4ECE;&#x800C;&#x771F;&#x6B63;&#x5B9E;&#x73B0;&#x6BD4;&#x8F83;&#x7406;&#x60F3;&#x5316;&#x7684;&#x9762;&#x5411;&#x670D;&#x52A1;&#x67B6;&#x6784;&#xFF08;SOA&#xFF09;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;WebServices&#xFF08;WSDL/SOAP&#xFF09;&#x4E5F;&#x57FA;&#x672C;&#x540C;&#x6837;&#x80FD;&#x6EE1;&#x8DB3;&#x4EE5;&#x4E0A;&#x573A;&#x666F;&#xFF08;&#x9664;&#x4E86;&#x573A;&#x666F;4&#xFF09;&#x7684;&#x8981;&#x6C42;&#xFF08;&#x751A;&#x81F3;&#x8FD8;&#x80FD;&#x6EE1;&#x8DB3;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x4F01;&#x4E1A;&#x7EA7;&#x7279;&#x6027;&#x7684;&#x573A;&#x666F;&#xFF09;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x5176;&#x590D;&#x6742;&#x6027;&#x7B49;&#x95EE;&#x9898;&#xFF0C;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#x88AB;&#x5B9E;&#x9645;&#x91C7;&#x7528;&#x4E86;&#x3002;</p>
<h4 id="&#x5FEB;&#x901F;&#x5165;&#x95E8;"><a href="#&#x5FEB;&#x901F;&#x5165;&#x95E8;" class="headerlink" title="&#x5FEB;&#x901F;&#x5165;&#x95E8;"></a>&#x5FEB;&#x901F;&#x5165;&#x95E8;</h4><p>&#x5728;dubbo&#x4E2D;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;REST&#x98CE;&#x683C;&#x7684;&#x670D;&#x52A1;&#x4F1A;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x4E0B;&#x9762;&#x4EE5;&#x4E00;&#x4E2A;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x7684;&#x7B80;&#x5355;&#x670D;&#x52A1;&#x4E3A;&#x4F8B;&#x8BF4;&#x660E;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x8981;&#x5B9E;&#x73B0;&#x7684;&#x529F;&#x80FD;&#x662F;&#x63D0;&#x4F9B;&#x5982;&#x4E0B;URL&#xFF08;&#x6CE8;&#xFF1A;&#x8FD9;&#x4E2A;URL&#x4E0D;&#x662F;&#x5B8C;&#x5168;&#x7B26;&#x5408;REST&#x7684;&#x98CE;&#x683C;&#xFF0C;&#x4F46;&#x662F;&#x66F4;&#x7B80;&#x5355;&#x5B9E;&#x7528;&#xFF09;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;http://localhost:8080/users/register</span><br></pre></td></tr></table></figure>

<p>&#x800C;&#x4EFB;&#x4F55;&#x5BA2;&#x6237;&#x7AEF;&#x90FD;&#x53EF;&#x4EE5;&#x5C06;&#x5305;&#x542B;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x7684;JSON&#x5B57;&#x7B26;&#x4E32;POST&#x5230;&#x4EE5;&#x4E0A;URL&#x6765;&#x5B8C;&#x6210;&#x7528;&#x6237;&#x6CE8;&#x518C;&#x3002;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x7684;&#x63A5;&#x53E3;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class UserService {    </span><br><span class="line">   void registerUser(User user);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#xFF0C;&#x5F00;&#x53D1;&#x670D;&#x52A1;&#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Path(&quot;users&quot;)public class UserServiceImpl implements UserService {    @POST</span><br><span class="line">    @Path(&quot;register&quot;)    @Consumes({MediaType.APPLICATION_JSON})    public void registerUser(User user) {        // save the user...</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x7684;&#x670D;&#x52A1;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;REST&#x670D;&#x52A1;&#x662F;&#x8981;&#x88AB;&#x53D1;&#x5E03;&#x5230;&#x7279;&#x5B9A;HTTP URL&#xFF0C;&#x4F9B;&#x4EFB;&#x610F;&#x8BED;&#x8A00;&#x5BA2;&#x6237;&#x7AEF;&#x751A;&#x81F3;&#x6D4F;&#x89C8;&#x5668;&#x6765;&#x8BBF;&#x95EE;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x8981;&#x989D;&#x5916;&#x6DFB;&#x52A0;&#x4E86;&#x51E0;&#x4E2A;JAX-RS&#x7684;&#x6807;&#x51C6;annotation&#x6765;&#x505A;&#x76F8;&#x5173;&#x7684;&#x914D;&#x7F6E;&#xFF1A;</p>
<p>@Path(&#x201C;users&#x201D;)&#xFF1A;&#x6307;&#x5B9A;&#x8BBF;&#x95EE;UserService&#x7684;URL&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x662F;/users&#xFF0C;&#x5373;<a href="/external_links/86a9106ae65537651a8e456835b316ab.html" target="blank" rel="noopener">http://localhost</a>:8080/users</p>
<p>@Path(&#x201C;register&#x201D;)&#xFF1A;&#x6307;&#x5B9A;&#x8BBF;&#x95EE;registerUser()&#x65B9;&#x6CD5;&#x7684;URL&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x662F;/register&#xFF0C;&#x518D;&#x7ED3;&#x5408;&#x4E0A;&#x4E00;&#x4E2A;@Path&#x4E3A;UserService&#x6307;&#x5B9A;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x5219;&#x8C03;&#x7528;UserService.register()&#x7684;&#x5B8C;&#x6574;&#x8DEF;&#x5F84;&#x4E3A;<a href="/external_links/86a9106ae65537651a8e456835b316ab.html" target="blank" rel="noopener">http://localhost</a>:8080/users/register</p>
<p>@POST&#xFF1A;&#x6307;&#x5B9A;&#x8BBF;&#x95EE;registerUser()&#x7528;HTTP POST&#x65B9;&#x6CD5;</p>
<p>@Consumes({MediaType.APPLICATION_JSON})&#xFF1A;&#x6307;&#x5B9A;registerUser()&#x63A5;&#x6536;JSON&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x3002;REST&#x6846;&#x67B6;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;JSON&#x6570;&#x636E;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x4E3A;User&#x5BF9;&#x8C61;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x5728;spring&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x6B64;&#x670D;&#x52A1;&#xFF0C;&#x5373;&#x5B8C;&#x6210;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x7528;rest&#x534F;&#x8BAE;&#x5728;8080&#x7AEF;&#x53E3;&#x66B4;&#x9732;&#x670D;&#x52A1; --&gt;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8080&quot;/&gt;&lt;!-- &#x58F0;&#x660E;&#x9700;&#x8981;&#x66B4;&#x9732;&#x7684;&#x670D;&#x52A1;&#x63A5;&#x53E3; --&gt;&lt;dubbo:service interface=&quot;xxx.UserService&quot; ref=&quot;userService&quot;/&gt;&lt;!-- &#x548C;&#x672C;&#x5730;bean&#x4E00;&#x6837;&#x5B9E;&#x73B0;&#x670D;&#x52A1; --&gt;&lt;bean id=&quot;userService&quot; class=&quot;xxx.UserServiceImpl&quot; /&gt;</span><br></pre></td></tr></table></figure>

<h4 id="&#x6807;&#x51C6;Java-REST-API&#xFF1A;JAX-RS&#x7B80;&#x4ECB;"><a href="#&#x6807;&#x51C6;Java-REST-API&#xFF1A;JAX-RS&#x7B80;&#x4ECB;" class="headerlink" title="&#x6807;&#x51C6;Java REST API&#xFF1A;JAX-RS&#x7B80;&#x4ECB;"></a>&#x6807;&#x51C6;Java REST API&#xFF1A;JAX-RS&#x7B80;&#x4ECB;</h4><p>JAX-RS&#x662F;&#x6807;&#x51C6;&#x7684;Java REST API&#xFF0C;&#x5F97;&#x5230;&#x4E86;&#x4E1A;&#x754C;&#x7684;&#x5E7F;&#x6CDB;&#x652F;&#x6301;&#x548C;&#x5E94;&#x7528;&#xFF0C;&#x5176;&#x8457;&#x540D;&#x7684;&#x5F00;&#x6E90;&#x5B9E;&#x73B0;&#x5C31;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5305;&#x62EC;Oracle&#x7684;Jersey&#xFF0C;RedHat&#x7684;RestEasy&#xFF0C;Apache&#x7684;CXF&#x548C;Wink&#xFF0C;&#x4EE5;&#x53CA;restlet&#x7B49;&#x7B49;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6240;&#x6709;&#x652F;&#x6301;JavaEE 6.0&#x4EE5;&#x4E0A;&#x89C4;&#x8303;&#x7684;&#x5546;&#x7528;JavaEE&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x90FD;&#x5BF9;JAX-RS&#x63D0;&#x4F9B;&#x4E86;&#x652F;&#x6301;&#x3002;&#x56E0;&#x6B64;&#xFF0C;JAX-RS&#x662F;&#x4E00;&#x79CD;&#x5DF2;&#x7ECF;&#x975E;&#x5E38;&#x6210;&#x719F;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5E76;&#x4E14;&#x91C7;&#x7528;&#x5B83;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x6240;&#x8C13;vendor lock-in&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>JAX-RS&#x5728;&#x7F51;&#x4E0A;&#x7684;&#x8D44;&#x6599;&#x975E;&#x5E38;&#x4E30;&#x5BCC;&#xFF0C;&#x4F8B;&#x5982;&#x4E0B;&#x9762;&#x7684;&#x5165;&#x95E8;&#x6559;&#x7A0B;&#xFF1A;</p>
<p>Oracle&#x5B98;&#x65B9;&#x7684;tutorial&#xFF1A;<a href="/external_links/1d3c86d0f233468af2bbbaaf40537e28.html" target="blank" rel="noopener">docs.oracle.com/javaee&#x2026;</a><br>IBM developerWorks&#x4E2D;&#x56FD;&#x7AD9;&#x6587;&#x7AE0;&#xFF1A;<a href="/external_links/af48a35f35bb93e32ac6dd811651087c.html" target="blank" rel="noopener">www.ibm.com/developerw.&#x2026;</a><br>&#x66F4;&#x591A;&#x7684;&#x8D44;&#x6599;&#x8BF7;&#x81EA;&#x884C;google&#x6216;&#x8005;&#x767E;&#x5EA6;&#x4E00;&#x4E0B;&#x3002;&#x5C31;&#x5B66;&#x4E60;JAX-RS&#x6765;&#x8BF4;&#xFF0C;&#x4E00;&#x822C;&#x4E3B;&#x8981;&#x638C;&#x63E1;&#x5176;&#x5404;&#x79CD;annotation&#x7684;&#x7528;&#x6CD5;&#x5373;&#x53EF;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;dubbo&#x662F;&#x57FA;&#x4E8E;JAX-RS 2.0&#x7248;&#x672C;&#x7684;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#x8D44;&#x6599;&#x6216;REST&#x5B9E;&#x73B0;&#x6240;&#x6D89;&#x53CA;&#x7684;&#x7248;&#x672C;&#x3002;</p>
</blockquote>
<h4 id="REST&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x8BE6;&#x89E3;"><a href="#REST&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x8BE6;&#x89E3;" class="headerlink" title="REST&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x8BE6;&#x89E3;"></a>REST&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x8BE6;&#x89E3;</h4><p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6269;&#x5145;&#x201C;&#x5FEB;&#x901F;&#x5165;&#x95E8;&#x201D;&#x4E2D;&#x7684;UserService&#xFF0C;&#x8FDB;&#x4E00;&#x6B65;&#x5C55;&#x793A;&#x5728;dubbo&#x4E2D;REST&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x7684;&#x5F00;&#x53D1;&#x8981;&#x70B9;&#x3002;</p>
<h4 id="HTTP-POST-GET&#x7684;&#x5B9E;&#x73B0;"><a href="#HTTP-POST-GET&#x7684;&#x5B9E;&#x73B0;" class="headerlink" title="HTTP POST/GET&#x7684;&#x5B9E;&#x73B0;"></a>HTTP POST/GET&#x7684;&#x5B9E;&#x73B0;</h4><p>REST&#x670D;&#x52A1;&#x4E2D;&#x867D;&#x7136;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;HTTP&#x534F;&#x8BAE;&#x4E2D;&#x56DB;&#x79CD;&#x6807;&#x51C6;&#x65B9;&#x6CD5;POST&#x3001;DELETE&#x3001;PUT&#x3001;GET&#x6765;&#x5206;&#x522B;&#x5B9E;&#x73B0;&#x5E38;&#x89C1;&#x7684;&#x201C;&#x589E;&#x5220;&#x6539;&#x67E5;&#x201D;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x76F4;&#x63A5;&#x7528;POST&#x6765;&#x5B9E;&#x73B0;&#x201C;&#x589E;&#x6539;&#x201D;&#xFF0C;GET&#x6765;&#x5B9E;&#x73B0;&#x201C;&#x5220;&#x67E5;&#x201D;&#x5373;&#x53EF;&#xFF08;DELETE&#x548C;PUT&#x751A;&#x81F3;&#x4F1A;&#x88AB;&#x4E00;&#x4E9B;&#x9632;&#x706B;&#x5899;&#x963B;&#x6321;&#xFF09;&#x3002;</p>
<p>&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x7B80;&#x5355;&#x6F14;&#x793A;&#x4E86;POST&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5728;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;UserService&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x83B7;&#x53D6;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x8D44;&#x6599;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6765;&#x6F14;&#x793A;GET&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5C31;&#x662F;&#x8981;&#x5B9E;&#x73B0;&#x5BA2;&#x6237;&#x7AEF;&#x901A;&#x8FC7;&#x8BBF;&#x95EE;&#x5982;&#x4E0B;&#x4E0D;&#x540C;URL&#x6765;&#x83B7;&#x53D6;&#x4E0D;&#x540C;ID&#x7684;&#x7528;&#x6237;&#x8D44;&#x6599;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;http://localhost:8080/users/1001</span><br><span class="line">http://localhost:8080/users/1002</span><br><span class="line">http://localhost:8080/users/1003</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5176;&#x4ED6;&#x5F62;&#x5F0F;&#x7684;URL&#x6765;&#x8BBF;&#x95EE;&#x4E0D;&#x540C;ID&#x7684;&#x7528;&#x6237;&#x8D44;&#x6599;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;http://localhost:8080/users/load?id=1001</span><br></pre></td></tr></table></figure>

<p>JAX-RS&#x672C;&#x8EAB;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x5F62;&#x5F0F;&#x3002;&#x4F46;&#x662F;&#x4E0A;&#x9762;&#x90A3;&#x79CD;&#x5728;URL&#x8DEF;&#x5F84;&#x4E2D;&#x5305;&#x542B;&#x67E5;&#x8BE2;&#x53C2;&#x6570;&#x7684;&#x5F62;&#x5F0F;&#xFF08;<a href="/external_links/86a9106ae65537651a8e456835b316ab.html" target="blank" rel="noopener">http://localhost</a>:8080/users/1001&#xFF09; &#x66F4;&#x7B26;&#x5408;REST&#x7684;&#x4E00;&#x822C;&#x4E60;&#x60EF;&#xFF0C;&#x6240;&#x4EE5;&#x66F4;&#x63A8;&#x8350;&#x5927;&#x5BB6;&#x6765;&#x4F7F;&#x7528;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5C31;&#x4E3A;UserService&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;getUser()&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684;URL&#x8BBF;&#x95EE;&#xFF1A;</p>
<p>@GET@Path(&#x201C;{id : \d+}&#x201D;)<br>@Produces({MediaType.APPLICATION_JSON})public User getUser(@PathParam(&#x201C;id&#x201D;) Long id) { // &#x2026;}<br>@GET&#xFF1A;&#x6307;&#x5B9A;&#x7528;HTTP GET&#x65B9;&#x6CD5;&#x8BBF;&#x95EE;</p>
<p>@Path(&#x201C;{id : d+}&#x201D;)&#xFF1A;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x529F;&#x80FD;&#x9700;&#x6C42;&#xFF0C;&#x8BBF;&#x95EE;getUser()&#x7684;URL&#x5E94;&#x5F53;&#x662F;&#x201C;<a href="/external_links/86a9106ae65537651a8e456835b316ab.html" target="blank" rel="noopener">http://localhost</a>:8080/users/ + &#x4EFB;&#x610F;&#x6570;&#x5B57;&#x201D;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E2A;&#x6570;&#x5B57;&#x8981;&#x88AB;&#x505A;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5165;getUser()&#x65B9;&#x6CD5;&#x3002; &#x8FD9;&#x91CC;&#x7684;annotation&#x914D;&#x7F6E;&#x4E2D;&#xFF0C;@Path&#x4E2D;&#x95F4;&#x7684;{id: xxx}&#x6307;&#x5B9A;URL&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x540D;&#x4E3A;id&#x53C2;&#x6570;&#xFF0C;&#x800C;&#x5B83;&#x7684;&#x503C;&#x4E5F;&#x5C06;&#x88AB;&#x81EA;&#x52A8;&#x4F20;&#x9012;&#x7ED9;&#x4E0B;&#x9762;&#x7528;@PathParam(&#x201C;id&#x201D;)&#x4FEE;&#x9970;&#x7684;&#x65B9;&#x6CD5;&#x53C2;&#x6570;id&#x3002;{id:&#x540E;&#x9762;&#x7D27;&#x8DDF;&#x7684;d+&#x662F;&#x4E00;&#x4E2A;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x6307;&#x5B9A;&#x4E86;id&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x662F;&#x6570;&#x5B57;&#x3002;</p>
<p>@Produces({MediaType.APPLICATION_JSON})&#xFF1A;&#x6307;&#x5B9A;getUser()&#x8F93;&#x51FA;JSON&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x3002;&#x6846;&#x67B6;&#x4F1A;&#x81EA;&#x52A8;&#x5C06;User&#x5BF9;&#x8C61;&#x5E8F;&#x5217;&#x5316;&#x4E3A;JSON&#x6570;&#x636E;&#x3002;</p>
<h4 id="Annotation&#x653E;&#x5728;&#x63A5;&#x53E3;&#x7C7B;&#x8FD8;&#x662F;&#x5B9E;&#x73B0;&#x7C7B;"><a href="#Annotation&#x653E;&#x5728;&#x63A5;&#x53E3;&#x7C7B;&#x8FD8;&#x662F;&#x5B9E;&#x73B0;&#x7C7B;" class="headerlink" title="Annotation&#x653E;&#x5728;&#x63A5;&#x53E3;&#x7C7B;&#x8FD8;&#x662F;&#x5B9E;&#x73B0;&#x7C7B;"></a>Annotation&#x653E;&#x5728;&#x63A5;&#x53E3;&#x7C7B;&#x8FD8;&#x662F;&#x5B9E;&#x73B0;&#x7C7B;</h4><p>&#x5728;Dubbo&#x4E2D;&#x5F00;&#x53D1;REST&#x670D;&#x52A1;&#x4E3B;&#x8981;&#x90FD;&#x662F;&#x901A;&#x8FC7;JAX-RS&#x7684;annotation&#x6765;&#x5B8C;&#x6210;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x662F;&#x5C06;annotation&#x653E;&#x5728;&#x670D;&#x52A1;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x4E2D;&#x3002;&#x4F46;&#x5176;&#x5B9E;&#xFF0C;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;annotation&#x653E;&#x5230;&#x670D;&#x52A1;&#x7684;&#x63A5;&#x53E3;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x5B8C;&#x5168;&#x7B49;&#x4EF7;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Path(&quot;users&quot;)public interface UserService {    @GET</span><br><span class="line">    @Path(&quot;{id : \\d+}&quot;)    @Produces({MediaType.APPLICATION_JSON})    User getUser(@PathParam(&quot;id&quot;) Long id);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E00;&#x822C;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#x5C06;annotation&#x653E;&#x5230;&#x670D;&#x52A1;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x8FD9;&#x6837;annotation&#x548C;java&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x4F4D;&#x7F6E;&#x66F4;&#x63A5;&#x8FD1;&#xFF0C;&#x66F4;&#x4FBF;&#x4E8E;&#x5F00;&#x53D1;&#x548C;&#x7EF4;&#x62A4;&#x3002;&#x53E6;&#x5916;&#x66F4;&#x91CD;&#x8981;&#x7684;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x503E;&#x5411;&#x4E8E;&#x907F;&#x514D;&#x5BF9;&#x63A5;&#x53E3;&#x7684;&#x6C61;&#x67D3;&#xFF0C;&#x4FDD;&#x6301;&#x63A5;&#x53E3;&#x7684;&#x7EAF;&#x51C0;&#x6027;&#x548C;&#x5E7F;&#x6CDB;&#x9002;&#x7528;&#x6027;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x540E;&#x6587;&#x6240;&#x8FF0;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8981;&#x7528;dubbo&#x76F4;&#x63A5;&#x5F00;&#x53D1;&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x6765;&#x8BBF;&#x95EE;&#x6B64;&#x670D;&#x52A1;&#xFF0C;&#x5219;annotation&#x5FC5;&#x987B;&#x653E;&#x5230;&#x63A5;&#x53E3;&#x4E0A;&#x3002;</p>
<p>&#x5982;&#x679C;&#x63A5;&#x53E3;&#x548C;&#x5B9E;&#x73B0;&#x7C7B;&#x90FD;&#x540C;&#x65F6;&#x6DFB;&#x52A0;&#x4E86;annotation&#xFF0C;&#x5219;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;annotation&#x914D;&#x7F6E;&#x4F1A;&#x751F;&#x6548;&#xFF0C;&#x63A5;&#x53E3;&#x4E0A;&#x7684;annotation&#x88AB;&#x76F4;&#x63A5;&#x5FFD;&#x7565;&#x3002;</p>
<h4 id="JSON&#x3001;XML&#x7B49;&#x591A;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x652F;&#x6301;"><a href="#JSON&#x3001;XML&#x7B49;&#x591A;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x652F;&#x6301;" class="headerlink" title="JSON&#x3001;XML&#x7B49;&#x591A;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x652F;&#x6301;"></a>JSON&#x3001;XML&#x7B49;&#x591A;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x652F;&#x6301;</h4><p>&#x5728;dubbo&#x4E2D;&#x5F00;&#x53D1;&#x7684;REST&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x652F;&#x6301;&#x4F20;&#x8F93;&#x591A;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x6700;&#x5927;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x3002;&#x5176;&#x4E2D;&#x6211;&#x4EEC;&#x76EE;&#x524D;&#x5BF9;&#x6700;&#x5E38;&#x7528;&#x7684;JSON&#x548C;XML&#x683C;&#x5F0F;&#x7279;&#x522B;&#x6DFB;&#x52A0;&#x4E86;&#x989D;&#x5916;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x8BA9;&#x4E0A;&#x4F8B;&#x4E2D;&#x7684;getUser()&#x65B9;&#x6CD5;&#x652F;&#x6301;&#x5206;&#x522B;&#x8FD4;&#x56DE;JSON&#x548C;XML&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;annotation&#x4E2D;&#x540C;&#x65F6;&#x5305;&#x542B;&#x4E24;&#x79CD;&#x683C;&#x5F0F;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Produces({MediaType.APPLICATION_JSON, MediaType.TEXT_XML})User getUser(@PathParam(&quot;id&quot;) Long id);</span><br></pre></td></tr></table></figure>

<p>&#x6216;&#x8005;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x8FD8;&#x652F;&#x6301;&#x901A;&#x914D;&#x7B26;&#xFF09;&#x8868;&#x793A;MediaType&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Produces({&quot;application/json&quot;, &quot;text/xml&quot;})User getUser(@PathParam(&quot;id&quot;) Long id);</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x90FD;&#x652F;&#x6301;&#x540C;&#x6837;&#x7C7B;&#x578B;&#x7684;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x5219;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x5728;&#x6BCF;&#x4E2A;&#x65B9;&#x6CD5;&#x4E0A;&#x505A;&#x914D;&#x7F6E;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x670D;&#x52A1;&#x7C7B;&#x4E0A;&#x6DFB;&#x52A0;annotation&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Path(&quot;users&quot;)</span><br><span class="line">@Consumes({MediaType.APPLICATION_JSON, MediaType.TEXT_XML})</span><br><span class="line">@Produces({MediaType.APPLICATION_JSON, MediaType.TEXT_XML})public class UserServiceImpl implements UserService {    // ...}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E00;&#x4E2A;REST&#x670D;&#x52A1;&#x540C;&#x65F6;&#x5BF9;&#x591A;&#x79CD;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x652F;&#x6301;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6839;&#x636E;JAX-RS&#x6807;&#x51C6;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x901A;&#x8FC7;HTTP&#x4E2D;&#x7684;MIME header&#xFF08;content-type&#x548C;accept&#xFF09;&#x6765;&#x6307;&#x5B9A;&#x5F53;&#x524D;&#x60F3;&#x7528;&#x7684;&#x662F;&#x54EA;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5728;dubbo&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x81EA;&#x52A8;&#x652F;&#x6301;&#x76EE;&#x524D;&#x4E1A;&#x754C;&#x666E;&#x904D;&#x4F7F;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x7528;&#x4E00;&#x4E2A;URL&#x540E;&#x7F00;&#xFF08;.json&#x548C;.xml&#xFF09;&#x6765;&#x6307;&#x5B9A;&#x60F3;&#x7528;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;&#x4E0A;&#x8FF0;annotation&#x540E;&#xFF0C;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;<a href="/external_links/86a9106ae65537651a8e456835b316ab.html" target="blank" rel="noopener">http://localhost</a>:8888/users/1001.json&#x5219;&#x8868;&#x793A;&#x7528;json&#x683C;&#x5F0F;&#xFF0C;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;<a href="/external_links/86a9106ae65537651a8e456835b316ab.html" target="blank" rel="noopener">http://localhost</a>:8888/users/1002.xml&#x5219;&#x8868;&#x793A;&#x7528;xml&#x683C;&#x5F0F;&#xFF0C;&#x6BD4;&#x7528;HTTP<br> Header&#x66F4;&#x7B80;&#x5355;&#x76F4;&#x89C2;&#x3002;Twitter&#x3001;&#x5FAE;&#x535A;&#x7B49;&#x7684;REST API&#x90FD;&#x662F;&#x91C7;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x65E2;&#x4E0D;&#x52A0;HTTP header&#xFF0C;&#x4E5F;&#x4E0D;&#x52A0;&#x540E;&#x7F00;&#xFF0C;&#x5219;dubbo&#x7684;REST&#x4F1A;&#x4F18;&#x5148;&#x542F;&#x7528;&#x5728;&#x4EE5;&#x4E0A;annotation&#x5B9A;&#x4E49;&#x4E2D;&#x6392;&#x4F4D;&#x6700;&#x9760;&#x524D;&#x7684;&#x90A3;&#x79CD;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x8981;&#x652F;&#x6301;XML&#x683C;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x5728;annotation&#x4E2D;&#x65E2;&#x53EF;&#x4EE5;&#x7528;MediaType.TEXT_XML&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;MediaType.APPLICATION_XML&#xFF0C;&#x4F46;&#x662F;TEXT_XML&#x662F;&#x66F4;&#x5E38;&#x7528;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x8981;&#x5229;&#x7528;&#x4E0A;&#x8FF0;&#x7684;URL&#x540E;&#x7F00;&#x65B9;&#x5F0F;&#x6765;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x53EA;&#x80FD;&#x914D;&#x7F6E;&#x4E3A;TEXT_XML&#x624D;&#x80FD;&#x751F;&#x6548;&#x3002;</p>
</blockquote>
<h4 id="&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#x652F;&#x6301;"><a href="#&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#x652F;&#x6301;" class="headerlink" title="&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#x652F;&#x6301;"></a>&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#x652F;&#x6301;</h4><p>&#x4E3A;&#x4E86;&#x5728;dubbo REST&#x4E2D;&#x6B63;&#x5E38;&#x8F93;&#x51FA;&#x4E2D;&#x6587;&#x5B57;&#x7B26;&#xFF0C;&#x548C;&#x901A;&#x5E38;&#x7684;Java web&#x5E94;&#x7528;&#x4E00;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;HTTP&#x54CD;&#x5E94;&#x7684;contentType&#x8BBE;&#x7F6E;&#x4E3A;UTF-8&#x7F16;&#x7801;&#x3002;</p>
<p>&#x57FA;&#x4E8E;JAX-RS&#x7684;&#x6807;&#x51C6;&#x7528;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x505A;&#x5982;&#x4E0B;annotation&#x914D;&#x7F6E;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Produces({&quot;application/json; charset=UTF-8&quot;, &quot;text/xml; charset=UTF-8&quot;})User getUser(@PathParam(&quot;id&quot;) Long id);</span><br></pre></td></tr></table></figure>

<p>&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x7528;&#x6237;&#xFF0C;&#x6211;&#x4EEC;&#x5728;dubbo REST&#x4E2D;&#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x652F;&#x6301;&#x7C7B;&#xFF0C;&#x6765;&#x5B9A;&#x4E49;&#x4EE5;&#x4E0A;&#x7684;&#x5E38;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x51CF;&#x5C11;&#x51FA;&#x9519;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Produces({ContentType.APPLICATION_JSON_UTF_8, ContentType.TEXT_XML_UTF_8})User getUser(@PathParam(&quot;id&quot;) Long id);</span><br></pre></td></tr></table></figure>

<h4 id="XML&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x989D;&#x5916;&#x8981;&#x6C42;"><a href="#XML&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x989D;&#x5916;&#x8981;&#x6C42;" class="headerlink" title="XML&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x989D;&#x5916;&#x8981;&#x6C42;"></a>XML&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x989D;&#x5916;&#x8981;&#x6C42;</h4><p>&#x7531;&#x4E8E;JAX-RS&#x7684;&#x5B9E;&#x73B0;&#x4E00;&#x822C;&#x90FD;&#x7528;&#x6807;&#x51C6;&#x7684;JAXB&#xFF08;Java API for XML Binding&#xFF09;&#x6765;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;XML&#x683C;&#x5F0F;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8981;&#x7528;XML&#x4F20;&#x8F93;&#x7684;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x7C7B;&#x7EA7;&#x522B;&#x7684;JAXB annotation&#xFF0C;&#x5426;&#x5219;&#x5E8F;&#x5217;&#x5316;&#x5C06;&#x62A5;&#x9519;&#x3002;&#x4F8B;&#x5982;&#x4E3A;getUser()&#x4E2D;&#x8FD4;&#x56DE;&#x7684;User&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@XmlRootElementpublic class User implements Serializable {    // ...}</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x5916;&#xFF0C;&#x5982;&#x679C;service&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x662F;Java&#x7684; primitive&#x7C7B;&#x578B;&#xFF08;&#x5982;int&#xFF0C;long&#xFF0C;float&#xFF0C;double&#x7B49;&#xFF09;&#xFF0C;&#x6700;&#x597D;&#x4E3A;&#x5B83;&#x4EEC;&#x6DFB;&#x52A0;&#x4E00;&#x5C42;wrapper&#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x4E3A;JAXB&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x5E8F;&#x5217;&#x5316;primitive&#x7C7B;&#x578B;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8BA9;&#x524D;&#x8FF0;&#x7684;registerUser()&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x4E3A;&#x7528;&#x6237;&#x751F;&#x6210;&#x7684;ID&#x53F7;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;long registerUser(User user);</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;primitive&#x7C7B;&#x578B;&#x4E0D;&#x88AB;JAXB&#x5E8F;&#x5217;&#x5316;&#x652F;&#x6301;&#xFF0C;&#x6240;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;wrapper&#x5BF9;&#x8C61;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@XmlRootElementpublic class RegistrationResult implements Serializable {    private Long id;    public RegistrationResult() {</span><br><span class="line">    }    public RegistrationResult(Long id) {        this.id = id;</span><br><span class="line">    }    public Long getId() {        return id;</span><br><span class="line">    }    public void setId(Long id) {        this.id = id;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5E76;&#x4FEE;&#x6539;service&#x65B9;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;RegistrationResult registerUser(User user);</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x4E0D;&#x4F46;&#x80FD;&#x591F;&#x89E3;&#x51B3;XML&#x5E8F;&#x5217;&#x5316;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x4E14;&#x4F7F;&#x5F97;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x90FD;&#x7B26;&#x5408;XML&#x548C;JSON&#x7684;&#x89C4;&#x8303;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5728;JSON&#x4E2D;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x5C06;&#x662F;&#x5982;&#x4E0B;&#x5F62;&#x5F0F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;{&quot;id&quot;: 1001}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x4E0D;&#x52A0;wrapper&#xFF0C;JSON&#x8FD4;&#x56DE;&#x503C;&#x5C06;&#x76F4;&#x63A5;&#x662F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;1001</span><br></pre></td></tr></table></figure>

<p>&#x800C;&#x5728;XML&#x4E2D;&#xFF0C;&#x52A0;wrapper&#x540E;&#x8FD4;&#x56DE;&#x503C;&#x5C06;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;registrationResult&gt;</span><br><span class="line">    &lt;id&gt;1002&lt;/id&gt;</span><br><span class="line">&lt;/registrationResult&gt;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;wrapper&#x5BF9;&#x8C61;&#x5176;&#x5B9E;&#x5229;&#x7528;&#x6240;&#x8C13;Data Transfer Object&#xFF08;DTO&#xFF09;&#x6A21;&#x5F0F;&#xFF0C;&#x91C7;&#x7528;DTO&#x8FD8;&#x80FD;&#x5BF9;&#x4F20;&#x8F93;&#x6570;&#x636E;&#x505A;&#x66F4;&#x591A;&#x6709;&#x7528;&#x7684;&#x5B9A;&#x5236;&#x3002;</p>
<h4 id="&#x5B9A;&#x5236;&#x5E8F;&#x5217;&#x5316;"><a href="#&#x5B9A;&#x5236;&#x5E8F;&#x5217;&#x5316;" class="headerlink" title="&#x5B9A;&#x5236;&#x5E8F;&#x5217;&#x5316;"></a>&#x5B9A;&#x5236;&#x5E8F;&#x5217;&#x5316;</h4><p>&#x5982;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;REST&#x7684;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4F1A;&#x5728;service&#x7684;&#x5BF9;&#x8C61;&#x548C;JSON/XML&#x6570;&#x636E;&#x683C;&#x5F0F;&#x4E4B;&#x95F4;&#x81EA;&#x52A8;&#x505A;&#x5E8F;&#x5217;&#x5316;/&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;&#x4F46;&#x6709;&#x4E9B;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x89C9;&#x5F97;&#x8FD9;&#x79CD;&#x81EA;&#x52A8;&#x8F6C;&#x6362;&#x4E0D;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5176;&#x505A;&#x5B9A;&#x5236;&#x3002;</p>
<p>Dubbo&#x4E2D;&#x7684;REST&#x5B9E;&#x73B0;&#x662F;&#x7528;JAXB&#x505A;XML&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x7528;Jackson&#x505A;JSON&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5BF9;&#x8C61;&#x4E0A;&#x6DFB;&#x52A0;JAXB&#x6216;Jackson&#x7684;annotation&#x5373;&#x53EF;&#x4EE5;&#x5B9A;&#x5236;&#x6620;&#x5C04;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5B9A;&#x5236;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x6620;&#x5C04;&#x5230;XML&#x5143;&#x7D20;&#x7684;&#x540D;&#x5B57;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@XmlRootElement@XmlAccessorType(XmlAccessType.FIELD)public class User implements Serializable {    @XmlElement(name=&quot;username&quot;) </span><br><span class="line">    private String name;  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5B9A;&#x5236;&#x5BF9;&#x8C61;&#x5C5E;&#x6027;&#x6620;&#x5C04;&#x5230;JSON&#x5B57;&#x6BB5;&#x7684;&#x540D;&#x5B57;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class User implements Serializable {    @JsonProperty(&quot;username&quot;)    private String name;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x66F4;&#x591A;&#x8D44;&#x6599;&#x8BF7;&#x53C2;&#x8003;JAXB&#x548C;Jackson&#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x6216;&#x81EA;&#x884C;google&#x3002;</p>
<h4 id="&#x914D;&#x7F6E;REST-Server&#x7684;&#x5B9E;&#x73B0;"><a href="#&#x914D;&#x7F6E;REST-Server&#x7684;&#x5B9E;&#x73B0;" class="headerlink" title="&#x914D;&#x7F6E;REST Server&#x7684;&#x5B9E;&#x73B0;"></a>&#x914D;&#x7F6E;REST Server&#x7684;&#x5B9E;&#x73B0;</h4><p>&#x76EE;&#x524D;&#x5728;dubbo&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x652F;&#x6301;5&#x79CD;&#x5D4C;&#x5165;&#x5F0F;rest server&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x540C;&#x65F6;&#x652F;&#x6301;&#x91C7;&#x7528;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6765;&#x505A;rest server&#x7684;&#x5B9E;&#x73B0;&#x3002;rest server&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x901A;&#x8FC7;&#x5982;&#x4E0B;server&#x8FD9;&#x4E2A;XML&#x5C5E;&#x6027;&#x6765;&#x9009;&#x62E9;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; server=&quot;jetty&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x9009;&#x7528;&#x4E86;&#x5D4C;&#x5165;&#x5F0F;&#x7684;jetty&#x6765;&#x505A;rest server&#xFF0C;&#x540C;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x914D;&#x7F6E;server&#x5C5E;&#x6027;&#xFF0C;rest&#x534F;&#x8BAE;&#x9ED8;&#x8BA4;&#x4E5F;&#x662F;&#x9009;&#x7528;jetty&#x3002;jetty&#x662F;&#x975E;&#x5E38;&#x6210;&#x719F;&#x7684;java servlet&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x548C;dubbo&#x5DF2;&#x7ECF;&#x6709;&#x8F83;&#x597D;&#x7684;&#x96C6;&#x6210;&#xFF08;&#x76EE;&#x524D;5&#x79CD;&#x5D4C;&#x5165;&#x5F0F;server&#x4E2D;&#x53EA;&#x6709;jetty&#x548C;&#x540E;&#x9762;&#x6240;&#x8FF0;&#x7684;tomcat&#x3001;tjws&#xFF0C;&#x4E0E;dubbo&#x76D1;&#x63A7;&#x7CFB;&#x7EDF;&#x7B49;&#x5B8C;&#x6210;&#x4E86;&#x65E0;&#x7F1D;&#x7684;&#x96C6;&#x6210;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;dubbo&#x7CFB;&#x7EDF;&#x662F;&#x5355;&#x72EC;&#x542F;&#x52A8;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x9ED8;&#x8BA4;&#x91C7;&#x7528;jetty&#x5373;&#x53EF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; server=&quot;tomcat&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x9009;&#x7528;&#x4E86;&#x5D4C;&#x5165;&#x5F0F;&#x7684;tomcat&#x6765;&#x505A;rest server&#x3002;&#x5728;&#x5D4C;&#x5165;&#x5F0F;tomcat&#x4E0A;&#xFF0C;REST&#x7684;&#x6027;&#x80FD;&#x6BD4;jetty&#x4E0A;&#x8981;&#x597D;&#x5F97;&#x591A;&#xFF08;&#x53C2;&#x89C1;&#x540E;&#x9762;&#x7684;&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;&#xFF09;&#xFF0C;&#x5EFA;&#x8BAE;&#x5728;&#x9700;&#x8981;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x573A;&#x666F;&#x4E0B;&#x91C7;&#x7528;tomcat&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; server=&quot;netty&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x9009;&#x7528;&#x5D4C;&#x5165;&#x5F0F;&#x7684;netty&#x6765;&#x505A;rest server&#x3002;&#xFF08;TODO more contents to add&#xFF09;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; server=&quot;tjws&quot;/&gt; (tjws is now deprecated)</span><br><span class="line">&lt;dubbo:protocol name=&quot;rest&quot; server=&quot;sunhttp&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x914D;&#x7F6E;&#x9009;&#x7528;&#x5D4C;&#x5165;&#x5F0F;&#x7684;tjws&#x6216;Sun HTTP server&#x6765;&#x505A;rest server&#x3002;&#x8FD9;&#x4E24;&#x4E2A;server&#x5B9E;&#x73B0;&#x975E;&#x5E38;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x975E;&#x5E38;&#x65B9;&#x4FBF;&#x5728;&#x96C6;&#x6210;&#x6D4B;&#x8BD5;&#x4E2D;&#x5FEB;&#x901F;&#x542F;&#x52A8;&#x4F7F;&#x7528;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x8D1F;&#x8377;&#x4E0D;&#x9AD8;&#x7684;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528;&#x3002; &#x6CE8;&#xFF1A;tjws&#x76EE;&#x524D;&#x5DF2;&#x7ECF;&#x88AB;deprecated&#x6389;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x548C;servlet 3.1 API&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x7684;dubbo&#x7CFB;&#x7EDF;&#x4E0D;&#x662F;&#x5355;&#x72EC;&#x542F;&#x52A8;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x800C;&#x662F;&#x90E8;&#x7F72;&#x5230;&#x4E86;Java&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x4F60;&#x91C7;&#x7528;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; server=&quot;servlet&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x5C06;server&#x8BBE;&#x7F6E;&#x4E3A;servlet&#xFF0C;dubbo&#x5C06;&#x91C7;&#x7528;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684;servlet&#x5BB9;&#x5668;&#x6765;&#x505A;rest server&#x3002;&#x540C;&#x65F6;&#xFF0C;&#x8FD8;&#x8981;&#x5728;dubbo&#x7CFB;&#x7EDF;&#x7684;web.xml&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;web-app&gt;</span><br><span class="line">    &lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;/WEB-INF/classes/META-INF/spring/dubbo-demo-provider.xml&lt;/param-value&gt;</span><br><span class="line">    &lt;/context-param&gt;</span><br><span class="line"></span><br><span class="line">    &lt;listener&gt;</span><br><span class="line">        &lt;listener-class&gt;com.alibaba.dubbo.remoting.http.servlet.BootstrapListener&lt;/listener-class&gt;</span><br><span class="line">    &lt;/listener&gt;</span><br><span class="line"></span><br><span class="line">    &lt;listener&gt;</span><br><span class="line">        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;</span><br><span class="line">    &lt;/listener&gt;</span><br><span class="line"></span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;com.alibaba.dubbo.remoting.http.servlet.DispatcherServlet&lt;/servlet-class&gt;</span><br><span class="line">        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line"></span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;</span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5373;&#x5FC5;&#x987B;&#x5C06;dubbo&#x7684;BootstrapListener&#x548C;DispatherServlet&#x6DFB;&#x52A0;&#x5230;web.xml&#xFF0C;&#x4EE5;&#x5B8C;&#x6210;dubbo&#x7684;REST&#x529F;&#x80FD;&#x4E0E;&#x5916;&#x90E8;servlet&#x5BB9;&#x5668;&#x7684;&#x96C6;&#x6210;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4F60;&#x662F;&#x7528;spring&#x7684;ContextLoaderListener&#x6765;&#x52A0;&#x8F7D;spring&#xFF0C;&#x5219;&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;BootstrapListener&#x914D;&#x7F6E;&#x5728;ContextLoaderListener&#x4E4B;&#x524D;&#xFF0C;&#x5426;&#x5219;dubbo&#x521D;&#x59CB;&#x5316;&#x4F1A;&#x51FA;&#x9519;&#x3002;</p>
</blockquote>
<p>&#x5176;&#x5B9E;&#xFF0C;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#x4F60;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x575A;&#x6301;&#x7528;&#x5D4C;&#x5165;&#x5F0F;server&#xFF0C;&#x4F46;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684;servlet&#x5BB9;&#x5668;&#x5F80;&#x5F80;&#x6BD4;&#x5D4C;&#x5165;&#x5F0F;server&#x66F4;&#x52A0;&#x5F3A;&#x5927;&#xFF08;&#x7279;&#x522B;&#x662F;&#x5982;&#x679C;&#x4F60;&#x662F;&#x90E8;&#x7F72;&#x5230;&#x66F4;&#x5065;&#x58EE;&#x66F4;&#x53EF;&#x4F38;&#x7F29;&#x7684;WebLogic&#xFF0C;WebSphere&#x7B49;&#xFF09;&#xFF0C;&#x53E6;&#x5916;&#x6709;&#x65F6;&#x4E5F;&#x4FBF;&#x4E8E;&#x5728;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x505A;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x3001;&#x76D1;&#x63A7;&#x7B49;&#x7B49;&#x3002;</p>
<h4 id="&#x83B7;&#x53D6;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;Context&#xFF09;&#x4FE1;&#x606F;"><a href="#&#x83B7;&#x53D6;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;Context&#xFF09;&#x4FE1;&#x606F;" class="headerlink" title="&#x83B7;&#x53D6;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;Context&#xFF09;&#x4FE1;&#x606F;"></a>&#x83B7;&#x53D6;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;Context&#xFF09;&#x4FE1;&#x606F;</h4><p>&#x5728;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x4E2D;&#xFF0C;&#x503C;&#x5F97;&#x83B7;&#x53D6;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#x53EF;&#x80FD;&#x6709;&#x5F88;&#x591A;&#x79CD;&#xFF0C;&#x8FD9;&#x91CC;&#x7279;&#x522B;&#x4EE5;&#x83B7;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;IP&#x4E3A;&#x4F8B;&#x3002;</p>
<p>&#x5728;dubbo&#x7684;REST&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x83B7;&#x53D6;&#x5BA2;&#x6237;&#x7AEF;IP&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x7528;JAX-RS&#x6807;&#x51C6;&#x7684;@Context annotation&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public User getUser(@PathParam(&quot;id&quot;) Long id, @Context HttpServletRequest request) {    System.out.println(&quot;Client address is &quot; + request.getRemoteAddr());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7528;Context&#x4FEE;&#x9970;getUser()&#x7684;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x540E;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x5F53;&#x524D;&#x7684;HttpServletRequest&#x6CE8;&#x5165;&#x8FDB;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x76F4;&#x63A5;&#x8C03;&#x7528;servlet api&#x83B7;&#x53D6;IP&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EA;&#x80FD;&#x5728;&#x8BBE;&#x7F6E;server=&#x201D;tjws&#x201D;&#x6216;&#x8005;server=&#x201D;tomcat&#x201D;&#x6216;&#x8005;server=&#x201D;jetty&#x201D;&#x6216;&#x8005;server=&#x201D;servlet&#x201D;&#x7684;&#x65F6;&#x5019;&#x624D;&#x80FD;&#x5DE5;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x6709;&#x8FD9;&#x51E0;&#x79CD;REST server&#x7684;&#x5B9E;&#x73B0;&#x624D;&#x63D0;&#x4F9B;&#x4E86;servlet&#x5BB9;&#x5668;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6807;&#x51C6;&#x7684;JAX-RS&#x8FD8;&#x652F;&#x6301;&#x7528;@Context&#x4FEE;&#x9970;service&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x5B57;&#x6BB5;&#x6765;&#x83B7;&#x53D6;HttpServletRequest&#xFF0C;&#x4F46;&#x5728;dubbo&#x4E2D;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5BF9;&#x6B64;&#x4F5C;&#x51FA;&#x652F;&#x6301;&#x3002;</p>
</blockquote>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x7528;dubbo&#x4E2D;&#x5E38;&#x7528;&#x7684;RpcContext&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public User getUser(@PathParam(&quot;id&quot;) Long id) {    System.out.println(&quot;Client address is &quot; + RpcContext.getContext().getRemoteAddressString());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EA;&#x80FD;&#x5728;&#x8BBE;&#x7F6E;server=&#x201D;jetty&#x201D;&#x6216;&#x8005;server=&#x201D;tomcat&#x201D;&#x6216;&#x8005;server=&#x201D;servlet&#x201D;&#x6216;&#x8005;server=&#x201D;tjws&#x201D;&#x7684;&#x65F6;&#x5019;&#x624D;&#x80FD;&#x5DE5;&#x4F5C;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x76EE;&#x524D;dubbo&#x7684;RpcContext&#x662F;&#x4E00;&#x79CD;&#x6BD4;&#x8F83;&#x6709;&#x4FB5;&#x5165;&#x6027;&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x672A;&#x6765;&#x6211;&#x4EEC;&#x5F88;&#x53EF;&#x80FD;&#x4F1A;&#x505A;&#x51FA;&#x91CD;&#x6784;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4FDD;&#x6301;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x5BF9;JAX-RS&#x7684;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x672A;&#x6765;&#x8131;&#x79BB;dubbo&#x4E5F;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#xFF0C;&#x8BF7;&#x9009;&#x62E9;&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x3002;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8981;&#x66F4;&#x4F18;&#x96C5;&#x7684;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x5B9A;&#x4E49;&#xFF0C;&#x8BF7;&#x9009;&#x7528;&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x5728;&#x6700;&#x65B0;&#x7684;dubbo rest&#x4E2D;&#xFF0C;&#x8FD8;&#x652F;&#x6301;&#x901A;&#x8FC7;RpcContext&#x6765;&#x83B7;&#x53D6;HttpServletRequest&#x548C;HttpServletResponse&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;&#x66F4;&#x5927;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x6765;&#x65B9;&#x4FBF;&#x7528;&#x6237;&#x5B9E;&#x73B0;&#x67D0;&#x4E9B;&#x590D;&#x6742;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x5728;dubbo&#x6807;&#x51C6;&#x7684;filter&#x4E2D;&#x8BBF;&#x95EE;HTTP Header&#x3002;&#x7528;&#x6CD5;&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;if (RpcContext.getContext().getRequest() != null &amp;&amp; RpcContext.getContext().getRequest() instanceof HttpServletRequest) {    System.out.println(&quot;Client address is &quot; + ((HttpServletRequest) RpcContext.getContext().getRequest()).getRemoteAddr());</span><br><span class="line">}if (RpcContext.getContext().getResponse() != null &amp;&amp; RpcContext.getContext().getResponse() instanceof HttpServletResponse) {    System.out.println(&quot;Response object from RpcContext: &quot; + RpcContext.getContext().getResponse());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x534F;&#x8BAE;&#x7684;&#x4E2D;&#x7ACB;&#x6027;&#xFF0C;RpcContext.getRequest()&#x548C;RpcContext.getResponse()&#x8FD4;&#x56DE;&#x7684;&#x4EC5;&#x4EC5;&#x662F;&#x4E00;&#x4E2A;Object&#x7C7B;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x80FD;&#x4E3A;null&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x81EA;&#x5DF1;&#x505A;null&#x548C;&#x7C7B;&#x578B;&#x7684;&#x68C0;&#x67E5;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x53EA;&#x6709;&#x5728;&#x8BBE;&#x7F6E;server=&#x201D;jetty&#x201D;&#x6216;&#x8005;server=&#x201D;tomcat&#x201D;&#x6216;&#x8005;server=&#x201D;servlet&#x201D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F60;&#x624D;&#x80FD;&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x65B9;&#x6CD5;&#x6B63;&#x786E;&#x7684;&#x5F97;&#x5230;HttpServletRequest&#x548C;HttpServletResponse&#xFF0C;&#x56E0;&#x4E3A;&#x53EA;&#x6709;&#x8FD9;&#x51E0;&#x79CD;server&#x5B9E;&#x73B0;&#x4E86;servlet&#x5BB9;&#x5668;&#x3002;</p>
</blockquote>
<p>&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#x7F16;&#x7A0B;&#xFF0C;&#x5728;&#x6B64;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6CDB;&#x578B;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x7279;&#x5B9A;&#x7C7B;&#x578B;&#x7684;request/response&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;if (RpcContext.getContext().getRequest(HttpServletRequest.class) != null) {    System.out.println(&quot;Client address is &quot; + RpcContext.getContext().getRequest(HttpServletRequest.class).getRemoteAddr());</span><br><span class="line">}if (RpcContext.getContext().getResponse(HttpServletResponse.class) != null) {    System.out.println(&quot;Response object from RpcContext: &quot; + RpcContext.getContext().getResponse(HttpServletResponse.class));</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;request/response&#x4E0D;&#x7B26;&#x5408;&#x6307;&#x5B9A;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x4F1A;&#x8FD4;&#x56DE;null&#x3002;</p>
<h4 id="&#x914D;&#x7F6E;&#x7AEF;&#x53E3;&#x53F7;&#x548C;Context-Path"><a href="#&#x914D;&#x7F6E;&#x7AEF;&#x53E3;&#x53F7;&#x548C;Context-Path" class="headerlink" title="&#x914D;&#x7F6E;&#x7AEF;&#x53E3;&#x53F7;&#x548C;Context Path"></a>&#x914D;&#x7F6E;&#x7AEF;&#x53E3;&#x53F7;&#x548C;Context Path</h4><p>dubbo&#x4E2D;&#x7684;rest&#x534F;&#x8BAE;&#x9ED8;&#x8BA4;&#x5C06;&#x91C7;&#x7528;80&#x7AEF;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#xFF0C;&#x76F4;&#x63A5;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x524D;&#x6240;&#x8FF0;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;@Path&#x6765;&#x914D;&#x7F6E;&#x5355;&#x4E2A;rest&#x670D;&#x52A1;&#x7684;URL&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#x3002;&#x4F46;&#x5176;&#x5B9E;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6240;&#x6709;rest&#x670D;&#x52A1;&#x90FD;&#x9002;&#x7528;&#x7684;&#x57FA;&#x7840;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x5373;java web&#x5E94;&#x7528;&#x4E2D;&#x5E38;&#x8BF4;&#x7684;context path&#x3002;</p>
<p>&#x53EA;&#x9700;&#x8981;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;contextpath&#x5C5E;&#x6027;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot; contextpath=&quot;services&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x524D;&#x9762;&#x4EE3;&#x7801;&#x4E3A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Path(&quot;users&quot;)public class UserServiceImpl implements UserService {    @POST</span><br><span class="line">    @Path(&quot;register&quot;)    @Consumes({MediaType.APPLICATION_JSON})    public void registerUser(User user) {        // save the user...</span><br><span class="line">    }   </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x73B0;&#x5728;registerUser()&#x7684;&#x5B8C;&#x6574;&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;http://localhost:8888/services/users/register</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4F60;&#x662F;&#x9009;&#x7528;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x505A;rest server&#xFF0C;&#x5373;&#x914D;&#x7F6E;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot; contextpath=&quot;services&quot; server=&quot;servlet&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5219;&#x5FC5;&#x987B;&#x4FDD;&#x8BC1;&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x7684;port&#x3001;contextpath&#xFF0C;&#x4E0E;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684;&#x7AEF;&#x53E3;&#x3001;DispatcherServlet&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x8DEF;&#x5F84;&#xFF08;&#x5373;webapp path&#x52A0;&#x4E0A;servlet url pattern&#xFF09;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5BF9;&#x4E8E;&#x90E8;&#x7F72;&#x4E3A;tomcat ROOT&#x8DEF;&#x5F84;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;contextpath&#x5FC5;&#x987B;&#x4E0E;web.xml&#x4E2D;DispacherServlet&#x7684;<url-pattern>&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#xFF1A;</url-pattern></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;servlet-mapping&gt;</span><br><span class="line">     &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;</span><br><span class="line">     &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;</span><br><span class="line">&lt;/servlet-mapping&gt;</span><br></pre></td></tr></table></figure>

<h4 id="&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6570;&#x548C;IO&#x7EBF;&#x7A0B;&#x6570;"><a href="#&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6570;&#x548C;IO&#x7EBF;&#x7A0B;&#x6570;" class="headerlink" title="&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6570;&#x548C;IO&#x7EBF;&#x7A0B;&#x6570;"></a>&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6570;&#x548C;IO&#x7EBF;&#x7A0B;&#x6570;</h4><p>&#x53EF;&#x4EE5;&#x4E3A;rest&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; threads=&quot;500&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x610F;&#xFF1A;&#x76EE;&#x524D;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x8BBE;&#x7F6E;&#x53EA;&#x6709;&#x5F53;server=&#x201D;netty&#x201D;&#x6216;&#x8005;server=&#x201D;jetty&#x201D;&#x6216;&#x8005;server=&#x201D;tomcat&#x201D;&#x7684;&#x65F6;&#x5019;&#x624D;&#x80FD;&#x751F;&#x6548;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;server=&#x201D;servlet&#x201D;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x65F6;&#x5019;&#x542F;&#x7528;&#x7684;&#x662F;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x505A;rest server&#xFF0C;&#x4E0D;&#x53D7;dubbo&#x63A7;&#x5236;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x8BBE;&#x7F6E;&#x4E5F;&#x65E0;&#x6548;&#x3002;&#x5982;&#x679C;&#x662F;&#x9009;&#x7528;netty server&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;Netty&#x7684;IO worker&#x7EBF;&#x7A0B;&#x6570;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; iothreads=&quot;5&quot; threads=&quot;100&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="&#x914D;&#x7F6E;&#x957F;&#x8FDE;&#x63A5;"><a href="#&#x914D;&#x7F6E;&#x957F;&#x8FDE;&#x63A5;" class="headerlink" title="&#x914D;&#x7F6E;&#x957F;&#x8FDE;&#x63A5;"></a>&#x914D;&#x7F6E;&#x957F;&#x8FDE;&#x63A5;</h4><p>Dubbo&#x4E2D;&#x7684;rest&#x670D;&#x52A1;&#x9ED8;&#x8BA4;&#x90FD;&#x662F;&#x91C7;&#x7528;http&#x957F;&#x8FDE;&#x63A5;&#x6765;&#x8BBF;&#x95EE;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x5207;&#x6362;&#x4E3A;&#x77ED;&#x8FDE;&#x63A5;&#xFF0C;&#x76F4;&#x63A5;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; keepalive=&quot;false&quot;/&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x76EE;&#x524D;&#x53EA;&#x5BF9;server=&#x201D;netty&#x201D;&#x548C;server=&#x201D;tomcat&#x201D;&#x624D;&#x80FD;&#x751F;&#x6548;&#x3002;</p>
</blockquote>
<h4 id="&#x914D;&#x7F6E;&#x6700;&#x5927;&#x7684;HTTP&#x8FDE;&#x63A5;&#x6570;"><a href="#&#x914D;&#x7F6E;&#x6700;&#x5927;&#x7684;HTTP&#x8FDE;&#x63A5;&#x6570;" class="headerlink" title="&#x914D;&#x7F6E;&#x6700;&#x5927;&#x7684;HTTP&#x8FDE;&#x63A5;&#x6570;"></a>&#x914D;&#x7F6E;&#x6700;&#x5927;&#x7684;HTTP&#x8FDE;&#x63A5;&#x6570;</h4><p>&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4F9B;&#x7AEF;&#x6240;&#x80FD;&#x540C;&#x65F6;&#x63A5;&#x6536;&#x7684;&#x6700;&#x5927;HTTP&#x8FDE;&#x63A5;&#x6570;&#xFF0C;&#x9632;&#x6B62;REST server&#x88AB;&#x8FC7;&#x591A;&#x8FDE;&#x63A5;&#x6491;&#x7206;&#xFF0C;&#x4EE5;&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x6700;&#x57FA;&#x672C;&#x7684;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; accepts=&quot;500&quot; server=&quot;tomcat/&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x76EE;&#x524D;&#x53EA;&#x5BF9;server=&#x201D;tomcat&#x201D;&#x624D;&#x80FD;&#x751F;&#x6548;&#x3002;</p>
</blockquote>
<h4 id="&#x914D;&#x7F6E;&#x6BCF;&#x4E2A;&#x6D88;&#x8D39;&#x7AEF;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x548C;HTTP&#x8FDE;&#x63A5;&#x6570;"><a href="#&#x914D;&#x7F6E;&#x6BCF;&#x4E2A;&#x6D88;&#x8D39;&#x7AEF;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x548C;HTTP&#x8FDE;&#x63A5;&#x6570;" class="headerlink" title="&#x914D;&#x7F6E;&#x6BCF;&#x4E2A;&#x6D88;&#x8D39;&#x7AEF;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x548C;HTTP&#x8FDE;&#x63A5;&#x6570;"></a>&#x914D;&#x7F6E;&#x6BCF;&#x4E2A;&#x6D88;&#x8D39;&#x7AEF;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x548C;HTTP&#x8FDE;&#x63A5;&#x6570;</h4><p>&#x5982;&#x679C;rest&#x670D;&#x52A1;&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x4E5F;&#x662F;dubbo&#x7CFB;&#x7EDF;&#xFF0C;&#x53EF;&#x4EE5;&#x50CF;&#x5176;&#x4ED6;dubbo RPC&#x673A;&#x5236;&#x4E00;&#x6837;&#xFF0C;&#x914D;&#x7F6E;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;&#x6B64;rest&#x670D;&#x52A1;&#x7684;&#x6700;&#x5927;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4EE5;&#x53CA;&#x6BCF;&#x4E2A;&#x6D88;&#x8D39;&#x7AEF;&#x6240;&#x80FD;&#x542F;&#x52A8;&#x7684;&#x6700;&#x5927;HTTP&#x8FDE;&#x63A5;&#x6570;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:service interface=&quot;xxx&quot; ref=&quot;xxx&quot; protocol=&quot;rest&quot; timeout=&quot;2000&quot; connections=&quot;10&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9488;&#x5BF9;&#x6D88;&#x8D39;&#x7AEF;&#x751F;&#x6548;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x6D88;&#x8D39;&#x7AEF;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:reference id=&quot;xxx&quot; interface=&quot;xxx&quot; timeout=&quot;2000&quot; connections=&quot;10&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#xFF0C;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#x914D;&#x7F6E;&#x5728;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x63D0;&#x4F9B;&#x6B64;&#x7C7B;&#x914D;&#x7F6E;&#x3002;&#x6309;&#x7167;dubbo&#x5B98;&#x65B9;&#x6587;&#x6863;&#x7684;&#x8BF4;&#x6CD5;&#xFF1A;&#x201C;Provider&#x4E0A;&#x5C3D;&#x91CF;&#x591A;&#x914D;&#x7F6E;Consumer&#x7AEF;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x8BA9;Provider&#x5B9E;&#x73B0;&#x8005;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x601D;&#x8003;Provider&#x670D;&#x52A1;&#x7279;&#x70B9;&#x3001;&#x670D;&#x52A1;&#x8D28;&#x91CF;&#x7684;&#x95EE;&#x9898;&#x3002;&#x201D;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;dubbo&#x7684;REST&#x670D;&#x52A1;&#x662F;&#x53D1;&#x5E03;&#x7ED9;&#x975E;dubbo&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4F7F;&#x7528;&#xFF0C;&#x5219;&#x8FD9;&#x91CC;<a href="dubbo:service/" target="_blank" rel="noopener">dubbo:service/</a>&#x4E0A;&#x7684;&#x914D;&#x7F6E;&#x5B8C;&#x5168;&#x65E0;&#x6548;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x79CD;&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x53D7;dubbo&#x63A7;&#x5236;&#x3002;</p>
</blockquote>
<h4 id="GZIP&#x6570;&#x636E;&#x538B;&#x7F29;"><a href="#GZIP&#x6570;&#x636E;&#x538B;&#x7F29;" class="headerlink" title="GZIP&#x6570;&#x636E;&#x538B;&#x7F29;"></a>GZIP&#x6570;&#x636E;&#x538B;&#x7F29;</h4><p>Dubbo&#x7684;REST&#x652F;&#x6301;&#x7528;GZIP&#x538B;&#x7F29;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x65F6;&#x95F4;&#x548C;&#x5E26;&#x5BBD;&#x5360;&#x7528;&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4F1A;&#x4E5F;&#x589E;&#x52A0;CPU&#x5F00;&#x9500;&#x3002;</p>
<p>TODO more contents to add</p>
<h4 id="&#x7528;Annotation&#x53D6;&#x4EE3;&#x90E8;&#x5206;Spring-XML&#x914D;&#x7F6E;"><a href="#&#x7528;Annotation&#x53D6;&#x4EE3;&#x90E8;&#x5206;Spring-XML&#x914D;&#x7F6E;" class="headerlink" title="&#x7528;Annotation&#x53D6;&#x4EE3;&#x90E8;&#x5206;Spring XML&#x914D;&#x7F6E;"></a>&#x7528;Annotation&#x53D6;&#x4EE3;&#x90E8;&#x5206;Spring XML&#x914D;&#x7F6E;</h4><p>&#x4EE5;&#x4E0A;&#x6240;&#x6709;&#x7684;&#x8BA8;&#x8BBA;&#x90FD;&#x662F;&#x57FA;&#x4E8E;dubbo&#x5728;spring&#x4E2D;&#x7684;xml&#x914D;&#x7F6E;&#x3002;&#x4F46;&#x662F;&#xFF0C;dubbo/spring&#x672C;&#x8EAB;&#x4E5F;&#x652F;&#x6301;&#x7528;annotation&#x6765;&#x4F5C;&#x914D;&#x7F6E;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x6309;dubbo&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x7684;&#x6B65;&#x9AA4;&#xFF0C;&#x628A;&#x76F8;&#x5173;annotation&#x52A0;&#x5230;REST&#x670D;&#x52A1;&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x53D6;&#x4EE3;&#x4E00;&#x4E9B;xml&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Service(protocol = &quot;rest&quot;)</span><br><span class="line">@Path(&quot;users&quot;)public class UserServiceImpl implements UserService {    @Autowired</span><br><span class="line">    private UserRepository userRepository;    @POST</span><br><span class="line">    @Path(&quot;register&quot;)    @Consumes({MediaType.APPLICATION_JSON})    public void registerUser(User user) {        // save the user</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">    }   </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>annotation&#x7684;&#x914D;&#x7F6E;&#x66F4;&#x7B80;&#x5355;&#x66F4;&#x7CBE;&#x786E;&#xFF0C;&#x7ECF;&#x5E38;&#x4E5F;&#x66F4;&#x4FBF;&#x4E8E;&#x7EF4;&#x62A4;&#xFF08;&#x5F53;&#x7136;&#x73B0;&#x4EE3;IDE&#x90FD;&#x53EF;&#x4EE5;&#x5728;xml&#x4E2D;&#x652F;&#x6301;&#x6BD4;&#x5982;&#x7C7B;&#x540D;&#x91CD;&#x6784;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x8FD9;&#x91CC;&#x7684;&#x7279;&#x5B9A;&#x7528;&#x4F8B;&#x800C;&#x8A00;&#xFF0C;xml&#x7684;&#x7EF4;&#x62A4;&#x6027;&#x4E5F;&#x5F88;&#x597D;&#xFF09;&#x3002;&#x800C;xml&#x5BF9;&#x4EE3;&#x7801;&#x5BF9;&#x4FB5;&#x5165;&#x6027;&#x66F4;&#x5C0F;&#x4E00;&#x4E9B;&#xFF0C;&#x5C24;&#x5176;&#x6709;&#x5229;&#x4E8E;&#x52A8;&#x6001;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x6BD4;&#x5982;&#x4F60;&#x8981;&#x9488;&#x5BF9;&#x5355;&#x4E2A;&#x670D;&#x52A1;&#x914D;&#x7F6E;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3001;&#x6BCF;&#x5BA2;&#x6237;&#x7AEF;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x3001;&#x96C6;&#x7FA4;&#x7B56;&#x7565;&#x3001;&#x6743;&#x91CD;&#x7B49;&#x7B49;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x7279;&#x522B;&#x5BF9;&#x590D;&#x6742;&#x5E94;&#x7528;&#x6216;&#x8005;&#x6A21;&#x5757;&#x6765;&#x8BF4;&#xFF0C;xml&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x4E2D;&#x5FC3;&#x70B9;&#x6765;&#x6DB5;&#x76D6;&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x548C;&#x914D;&#x7F6E;&#xFF0C;&#x66F4;&#x4E00;&#x76EE;&#x4E86;&#x7136;&#xFF0C;&#x4E00;&#x822C;&#x66F4;&#x4FBF;&#x4E8E;&#x9879;&#x76EE;&#x957F;&#x65F6;&#x671F;&#x7684;&#x7EF4;&#x62A4;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x9009;&#x62E9;&#x54EA;&#x79CD;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x6CA1;&#x6709;&#x7EDD;&#x5BF9;&#x7684;&#x4F18;&#x52A3;&#xFF0C;&#x548C;&#x4E2A;&#x4EBA;&#x7684;&#x504F;&#x597D;&#x4E5F;&#x4E0D;&#x65E0;&#x5173;&#x7CFB;&#x3002;</p>
<h4 id="&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Filter&#x3001;Interceptor&#x7B49;"><a href="#&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Filter&#x3001;Interceptor&#x7B49;" class="headerlink" title="&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Filter&#x3001;Interceptor&#x7B49;"></a>&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Filter&#x3001;Interceptor&#x7B49;</h4><p>Dubbo&#x7684;REST&#x4E5F;&#x652F;&#x6301;JAX-RS&#x6807;&#x51C6;&#x7684;Filter&#x548C;Interceptor&#xFF0C;&#x4EE5;&#x65B9;&#x4FBF;&#x5BF9;REST&#x7684;&#x8BF7;&#x6C42;&#x4E0E;&#x54CD;&#x5E94;&#x8FC7;&#x7A0B;&#x505A;&#x5B9A;&#x5236;&#x5316;&#x7684;&#x62E6;&#x622A;&#x5904;&#x7406;&#x3002;</p>
<p>&#x5176;&#x4E2D;&#xFF0C;Filter&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#x548C;&#x8BBE;&#x7F6E;HTTP&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x3001;URI&#x7B49;&#x7B49;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x8BBE;&#x7F6E;HTTP&#x54CD;&#x5E94;&#x7684;cache header&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class CacheControlFilter implements ContainerResponseFilter {    public void filter(ContainerRequestContext req, ContainerResponseContext res) {        if (req.getMethod().equals(&quot;GET&quot;)) {</span><br><span class="line">            res.getHeaders().add(&quot;Cache-Control&quot;, &quot;someValue&quot;);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Interceptor&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x8BBF;&#x95EE;&#x548C;&#x4FEE;&#x6539;&#x8F93;&#x5165;&#x4E0E;&#x8F93;&#x51FA;&#x5B57;&#x8282;&#x6D41;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x624B;&#x52A8;&#x6DFB;&#x52A0;GZIP&#x538B;&#x7F29;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class GZIPWriterInterceptor implements WriterInterceptor {    @Override</span><br><span class="line">    public void aroundWriteTo(WriterInterceptorContext context)                    throws IOException, WebApplicationException {        OutputStream outputStream = context.getOutputStream();</span><br><span class="line">        context.setOutputStream(new GZIPOutputStream(outputStream));</span><br><span class="line">        context.proceed();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6807;&#x51C6;JAX-RS&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x662F;&#x4E3A;Filter&#x548C;Interceptor&#x6DFB;&#x52A0;@Provider annotation&#xFF0C;&#x7136;&#x540E;JAX-RS runtime&#x4F1A;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x5E76;&#x542F;&#x7528;&#x5B83;&#x4EEC;&#x3002;&#x800C;&#x5728;dubbo&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x901A;&#x8FC7;&#x6DFB;&#x52A0;XML&#x914D;&#x7F6E;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6CE8;&#x518C;Filter&#x548C;Interceptor&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot; extension=&quot;xxx.TraceInterceptor, xxx.TraceFilter&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;Filter&#x3001;Interceptor&#x548C;DynamicFuture&#x8FD9;&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x90FD;&#x6DFB;&#x52A0;&#x5230;extension&#x5C5E;&#x6027;&#x4E0A;&#xFF0C;&#x591A;&#x4E2A;&#x4E4B;&#x95F4;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;&#x3002;&#xFF08;DynamicFuture&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x66F4;&#x52A8;&#x6001;&#x7684;&#x542F;&#x7528;Filter&#x548C;Interceptor&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x8BF7;&#x81EA;&#x884C;google&#x3002;&#xFF09;</p>
<p>&#x5F53;&#x7136;&#xFF0C;dubbo&#x81EA;&#x8EAB;&#x4E5F;&#x652F;&#x6301;Filter&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8BA8;&#x8BBA;&#x7684;Filter&#x548C;Interceptor&#x66F4;&#x52A0;&#x63A5;&#x8FD1;&#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#x7684;&#x5E95;&#x5C42;&#xFF0C;&#x76F8;&#x6BD4;dubbo&#x7684;filter&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x66F4;&#x5E95;&#x5C42;&#x7684;&#x5B9A;&#x5236;&#x5316;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#xFF1A;&#x8FD9;&#x91CC;&#x7684;XML&#x5C5E;&#x6027;&#x53EB;extension&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x53EB;interceptor&#x6216;&#x8005;filter&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x9664;&#x4E86;Interceptor&#x548C;Filter&#xFF0C;&#x672A;&#x6765;&#x6211;&#x4EEC;&#x8FD8;&#x4F1A;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x6269;&#x5C55;&#x7C7B;&#x578B;&#x3002;</p>
</blockquote>
<p>&#x5982;&#x679C;REST&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x4E5F;&#x662F;dubbo&#x7CFB;&#x7EDF;&#xFF08;&#x53C2;&#x89C1;&#x4E0B;&#x6587;&#x7684;&#x8BA8;&#x8BBA;&#xFF09;&#xFF0C;&#x5219;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x7C7B;&#x4F3C;&#x65B9;&#x5F0F;&#x4E3A;&#x6D88;&#x8D39;&#x7AEF;&#x914D;&#x7F6E;Interceptor&#x548C;Filter&#x3002;&#x4F46;&#x6CE8;&#x610F;&#xFF0C;JAX-RS&#x4E2D;&#x6D88;&#x8D39;&#x7AEF;&#x7684;Filter&#x548C;&#x63D0;&#x4F9B;&#x7AEF;&#x7684;Filter&#x662F;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x63A5;&#x53E3;&#x3002;&#x4F8B;&#x5982;&#x524D;&#x9762;&#x4F8B;&#x5B50;&#x4E2D;&#x670D;&#x52A1;&#x7AEF;&#x662F;ContainerResponseFilter&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x6D88;&#x8D39;&#x7AEF;&#x5BF9;&#x5E94;&#x7684;&#x662F;ClientResponseFilter:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class LoggingFilter implements ClientResponseFilter {    public void filter(ClientRequestContext reqCtx, ClientResponseContext resCtx) throws IOException {        System.out.println(&quot;status: &quot; + resCtx.getStatus());        System.out.println(&quot;date: &quot; + resCtx.getDate());        System.out.println(&quot;last-modified: &quot; + resCtx.getLastModified());        System.out.println(&quot;location: &quot; + resCtx.getLocation());        System.out.println(&quot;headers:&quot;);        for (Entry&lt;String, List&lt;String&gt;&gt; header : resCtx.getHeaders().entrySet()) {            System.out.print(&quot;\t&quot; + header.getKey() + &quot; :&quot;);            for (String value : header.getValue()) {                System.out.print(value + &quot;, &quot;);</span><br><span class="line">            }            System.out.print(&quot;\n&quot;);</span><br><span class="line">        }        System.out.println(&quot;media-type: &quot; + resCtx.getMediaType().getType());</span><br><span class="line">    } </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h4 id="&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Exception&#x5904;&#x7406;"><a href="#&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Exception&#x5904;&#x7406;" class="headerlink" title="&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Exception&#x5904;&#x7406;"></a>&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Exception&#x5904;&#x7406;</h4><p>Dubbo&#x7684;REST&#x4E5F;&#x652F;&#x6301;JAX-RS&#x6807;&#x51C6;&#x7684;ExceptionMapper&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B9A;&#x5236;&#x7279;&#x5B9A;exception&#x53D1;&#x751F;&#x540E;&#x5E94;&#x8BE5;&#x8FD4;&#x56DE;&#x7684;HTTP&#x54CD;&#x5E94;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class CustomExceptionMapper implements ExceptionMapper&lt;NotFoundException&gt; {    public Response toResponse(NotFoundException e) {     </span><br><span class="line">        return Response.status(Response.Status.NOT_FOUND).entity(&quot;Oops! the requested resource is not found!&quot;).type(&quot;text/plain&quot;).build();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x548C;Interceptor&#x3001;Filter&#x7C7B;&#x4F3C;&#xFF0C;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;XML&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5373;&#x53EF;&#x542F;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot; extension=&quot;xxx.CustomExceptionMapper&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="&#x914D;&#x7F6E;HTTP&#x65E5;&#x5FD7;&#x8F93;&#x51FA;"><a href="#&#x914D;&#x7F6E;HTTP&#x65E5;&#x5FD7;&#x8F93;&#x51FA;" class="headerlink" title="&#x914D;&#x7F6E;HTTP&#x65E5;&#x5FD7;&#x8F93;&#x51FA;"></a>&#x914D;&#x7F6E;HTTP&#x65E5;&#x5FD7;&#x8F93;&#x51FA;</h4><p>Dubbo rest&#x652F;&#x6301;&#x8F93;&#x51FA;&#x6240;&#x6709;HTTP&#x8BF7;&#x6C42;/&#x54CD;&#x5E94;&#x4E2D;&#x7684;header&#x5B57;&#x6BB5;&#x548C;body&#x6D88;&#x606F;&#x4F53;&#x3002;</p>
<p>&#x5728;XML&#x914D;&#x7F6E;&#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x81EA;&#x5E26;&#x7684;REST filter&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot; extension=&quot;com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x914D;&#x7F6E;&#x5728;logging&#x914D;&#x7F6E;&#x4E2D;&#x81F3;&#x5C11;&#x4E3A;com.alibaba.dubbo.rpc.protocol.rest.support&#x6253;&#x5F00;INFO&#x7EA7;&#x522B;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5728;log4j.xml&#x4E2D;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;logger name=&quot;com.alibaba.dubbo.rpc.protocol.rest.support&quot;&gt;</span><br><span class="line">    &lt;level value=&quot;INFO&quot;/&gt;</span><br><span class="line">    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;</span><br><span class="line">&lt;/logger&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#xFF0C;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;ROOT logger&#x6253;&#x5F00;INFO&#x7EA7;&#x522B;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;root&gt;</span><br><span class="line">    &lt;level value=&quot;INFO&quot; /&gt;</span><br><span class="line">    &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;</span><br><span class="line">&lt;/root&gt;</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5728;&#x65E5;&#x5FD7;&#x4E2D;&#x4F1A;&#x6709;&#x7C7B;&#x4F3C;&#x5982;&#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x8F93;&#x51FA;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;The HTTP headers are: </span><br><span class="line">accept: application/json;charset=UTF-8</span><br><span class="line">accept-encoding: gzip, deflate</span><br><span class="line">connection: Keep-Alive</span><br><span class="line">content-length: 22</span><br><span class="line">content-type: application/json</span><br><span class="line">host: 192.168.1.100:8888</span><br><span class="line">user-agent: Apache-HttpClient/4.2.1 (java 1.5)</span><br><span class="line">The contents of request body is: </span><br><span class="line">{&quot;id&quot;:1,&quot;name&quot;:&quot;dang&quot;}</span><br></pre></td></tr></table></figure>

<p>&#x6253;&#x5F00;HTTP&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x540E;&#xFF0C;&#x9664;&#x4E86;&#x6B63;&#x5E38;&#x65E5;&#x5FD7;&#x8F93;&#x51FA;&#x7684;&#x6027;&#x80FD;&#x5F00;&#x9500;&#x5916;&#xFF0C;&#x4E5F;&#x4F1A;&#x5728;&#x6BD4;&#x5982;HTTP&#x8BF7;&#x6C42;&#x89E3;&#x6790;&#x65F6;&#x4EA7;&#x751F;&#x989D;&#x5916;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x56E0;&#x4E3A;&#x9700;&#x8981;&#x5EFA;&#x7ACB;&#x989D;&#x5916;&#x7684;&#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#x6765;&#x4E3A;&#x65E5;&#x5FD7;&#x7684;&#x8F93;&#x51FA;&#x505A;&#x6570;&#x636E;&#x51C6;&#x5907;&#x3002;</p>
<h4 id="&#x8F93;&#x5165;&#x53C2;&#x6570;&#x7684;&#x6821;&#x9A8C;"><a href="#&#x8F93;&#x5165;&#x53C2;&#x6570;&#x7684;&#x6821;&#x9A8C;" class="headerlink" title="&#x8F93;&#x5165;&#x53C2;&#x6570;&#x7684;&#x6821;&#x9A8C;"></a>&#x8F93;&#x5165;&#x53C2;&#x6570;&#x7684;&#x6821;&#x9A8C;</h4><p>dubbo&#x7684;rest&#x652F;&#x6301;&#x91C7;&#x7528;Java&#x6807;&#x51C6;&#x7684;bean validation annotation&#xFF08;JSR 303)&#x6765;&#x505A;&#x8F93;&#x5165;&#x6821;&#x9A8C;<a href="/external_links/9c5098cc3e769bc10b15e2fbc3f664e3.html" target="blank" rel="noopener">beanvalidation.org/</a></p>
<p>&#x4E3A;&#x4E86;&#x548C;&#x5176;&#x4ED6;dubbo&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x534F;&#x8BAE;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x5728;rest&#x4E2D;&#x4F5C;&#x6821;&#x9A8C;&#x7684;annotation&#x5FC5;&#x987B;&#x653E;&#x5728;&#x670D;&#x52A1;&#x7684;&#x63A5;&#x53E3;&#x4E0A;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public interface UserService {    User getUser(@Min(value=1L, message=&quot;User ID must be greater than 1&quot;) Long id);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#xFF0C;&#x5728;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x7684;bean validation&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x90FD;&#x662F;&#x5C06;annotation&#x653E;&#x5230;&#x5B9E;&#x73B0;&#x7C7B;&#x800C;&#x4E0D;&#x662F;&#x63A5;&#x53E3;&#x4E0A;&#x3002;&#x628A;annotation&#x653E;&#x5728;&#x63A5;&#x53E3;&#x4E0A;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x597D;&#x5904;&#x662F;&#xFF0C;dubbo&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x7684;&#x4FE1;&#x606F;&#xFF0C;dubbo&#x751A;&#x81F3;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#xFF0C;&#x5728;&#x672C;&#x5730;&#x5C31;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x8F93;&#x5165;&#x6821;&#x9A8C;&#x3002;</p>
<p>&#x7136;&#x540E;&#x6309;&#x7167;dubbo&#x7684;&#x6807;&#x51C6;&#x65B9;&#x5F0F;&#x5728;XML&#x914D;&#x7F6E;&#x4E2D;&#x6253;&#x5F00;&#x9A8C;&#x8BC1;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:service interface=xxx.UserService&quot; ref=&quot;userService&quot; protocol=&quot;rest&quot; validation=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5728;dubbo&#x7684;&#x5176;&#x4ED6;&#x5F88;&#x591A;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x534F;&#x8BAE;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x51FA;&#x9519;&#xFF0C;&#x662F;&#x76F4;&#x63A5;&#x5C06;RpcException&#x629B;&#x5411;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x800C;&#x5728;rest&#x4E2D;&#x7531;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x7ECF;&#x5E38;&#x662F;&#x975E;dubbo&#xFF0C;&#x751A;&#x81F3;&#x975E;java&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4FBF;&#x76F4;&#x63A5;&#x629B;&#x51FA;Java&#x5F02;&#x5E38;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x5C06;&#x6821;&#x9A8C;&#x9519;&#x8BEF;&#x4EE5;XML&#x7684;&#x683C;&#x5F0F;&#x8FD4;&#x56DE;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;violationReport&gt;</span><br><span class="line">    &lt;constraintViolations&gt;</span><br><span class="line">        &lt;path&gt;getUserArgument0&lt;/path&gt;</span><br><span class="line">        &lt;message&gt;User ID must be greater than 1&lt;/message&gt;</span><br><span class="line">        &lt;value&gt;0&lt;/value&gt;</span><br><span class="line">    &lt;/constraintViolations&gt;</span><br><span class="line">&lt;/violationReport&gt;</span><br></pre></td></tr></table></figure>

<p>&#x7A0D;&#x540E;&#x4E5F;&#x4F1A;&#x652F;&#x6301;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x3002;&#x81F3;&#x4E8E;&#x5982;&#x4F55;&#x5BF9;&#x9A8C;&#x8BC1;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x4F5C;&#x56FD;&#x9645;&#x5316;&#x5904;&#x7406;&#xFF0C;&#x76F4;&#x63A5;&#x53C2;&#x8003;bean validation&#x7684;&#x76F8;&#x5173;&#x6587;&#x6863;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x8BA4;&#x4E3A;&#x9ED8;&#x8BA4;&#x7684;&#x6821;&#x9A8C;&#x9519;&#x8BEF;&#x8FD4;&#x56DE;&#x683C;&#x5F0F;&#x4E0D;&#x7B26;&#x5408;&#x4F60;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x5982;&#x4E0A;&#x9762;&#x7AE0;&#x8282;&#x6240;&#x8FF0;&#xFF0C;&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;ExceptionMapper&#x6765;&#x81EA;&#x7531;&#x7684;&#x5B9A;&#x5236;&#x9519;&#x8BEF;&#x8FD4;&#x56DE;&#x683C;&#x5F0F;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E2A;ExceptionMapper&#x5FC5;&#x987B;&#x7528;&#x6CDB;&#x578B;&#x58F0;&#x660E;&#x6765;&#x6355;&#x83B7;dubbo&#x7684;RpcException&#xFF0C;&#x624D;&#x80FD;&#x6210;&#x529F;&#x8986;&#x76D6;dubbo rest&#x9ED8;&#x8BA4;&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x7B56;&#x7565;&#x3002;&#x4E3A;&#x4E86;&#x7B80;&#x5316;&#x64CD;&#x4F5C;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x91CC;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x76F4;&#x63A5;&#x7EE7;&#x627F;dubbo rest&#x7684;RpcExceptionMapper&#xFF0C;&#x5E76;&#x8986;&#x76D6;&#x5176;&#x4E2D;&#x5904;&#x7406;&#x6821;&#x9A8C;&#x5F02;&#x5E38;&#x7684;&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class MyValidationExceptionMapper extends RpcExceptionMapper {    protected Response handleConstraintViolationException(ConstraintViolationException cve) {        ViolationReport report = new ViolationReport();        for (ConstraintViolation cv : cve.getConstraintViolations()) {</span><br><span class="line">            report.addConstraintViolation(new RestConstraintViolation(</span><br><span class="line">                    cv.getPropertyPath().toString(),</span><br><span class="line">                    cv.getMessage(),</span><br><span class="line">                    cv.getInvalidValue() == null ? &quot;null&quot; : cv.getInvalidValue().toString()));</span><br><span class="line">        }        // &#x91C7;&#x7528;json&#x8F93;&#x51FA;&#x4EE3;&#x66FF;xml&#x8F93;&#x51FA;</span><br><span class="line">        return Response.status(Response.Status.INTERNAL_SERVER_ERROR).entity(report).type(ContentType.APPLICATION_JSON_UTF_8).build();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5C06;&#x8FD9;&#x4E2A;ExceptionMapper&#x6DFB;&#x52A0;&#x5230;XML&#x914D;&#x7F6E;&#x4E2D;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;rest&quot; port=&quot;8888&quot; extension=&quot;xxx.MyValidationExceptionMapper&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x900F;&#x660E;&#x53D1;&#x5E03;REST&#x670D;&#x52A1;"><a href="#&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x900F;&#x660E;&#x53D1;&#x5E03;REST&#x670D;&#x52A1;" class="headerlink" title="&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x900F;&#x660E;&#x53D1;&#x5E03;REST&#x670D;&#x52A1;"></a>&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x900F;&#x660E;&#x53D1;&#x5E03;REST&#x670D;&#x52A1;</h4><p>Dubbo&#x7684;REST&#x8C03;&#x7528;&#x548C;dubbo&#x4E2D;&#x5176;&#x5B83;&#x67D0;&#x4E9B;RPC&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x670D;&#x52A1;&#x4EE3;&#x7801;&#x4E2D;&#x6DFB;&#x52A0;JAX-RS&#x7684;annotation&#xFF08;&#x4EE5;&#x53CA;JAXB&#x3001;Jackson&#x7684;annotation&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x8FD9;&#x4E9B;annotation&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x201C;&#x6C61;&#x67D3;&#x201D;&#x4E86;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x4EE3;&#x7801;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x7F16;&#x5199;&#x989D;&#x5916;&#x7684;Facade&#x548C;DTO&#x7C7B;&#xFF0C;&#x5728;Facade&#x548C;DTO&#x4E0A;&#x6DFB;&#x52A0;annotation&#xFF0C;&#x800C;Facade&#x5C06;&#x8C03;&#x7528;&#x8F6C;&#x53D1;&#x7ED9;&#x771F;&#x6B63;&#x7684;&#x670D;&#x52A1;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;&#x5F53;&#x7136;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x670D;&#x52A1;&#x4EE3;&#x7801;&#x4E2D;&#x6DFB;&#x52A0;annotation&#x57FA;&#x672C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x8D1F;&#x9762;&#x4F5C;&#x7528;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x672C;&#x8EAB;&#x662F;Java EE&#x7684;&#x6807;&#x51C6;&#x7528;&#x6CD5;&#xFF0C;&#x53E6;&#x5916;JAX-RS&#x548C;JAXB&#x7684;annotation&#x662F;&#x5C5E;&#x4E8E;java&#x6807;&#x51C6;&#xFF0C;&#x6BD4;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x7684;spring&#x3001;dubbo&#x7B49;&#x7B49;annotation&#x66F4;&#x6CA1;&#x6709;vendor<br> lock-in&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x56E0;&#x6B64;&#x800C;&#x5F15;&#x5165;&#x989D;&#x5916;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x7528;&#x524D;&#x8FF0;&#x7684;@Context annotation&#xFF0C;&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x6CE8;&#x5165;HttpServletRequest&#xFF08;&#x5982;public User getUser(@PathParam(&#x201C;id&#x201D;) Long id, @Context HttpServletRequest request)&#xFF09;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x7531;&#x4E8E;&#x6539;&#x53D8;&#x4E86;&#x670D;&#x52A1;&#x7684;&#x65B9;&#x6CD5;&#x7B7E;&#x540D;&#xFF0C;&#x5E76;&#x4E14;HttpServletRequest&#x662F;REST&#x7279;&#x6709;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x8981;&#x652F;&#x6301;&#x591A;&#x79CD;RPC&#x673A;&#x5236;&#x7684;&#x8BDD;&#xFF0C;&#x5219;&#x5F15;&#x5165;&#x989D;&#x5916;&#x7684;Facade&#x7C7B;&#x662F;&#x6BD4;&#x8F83;&#x9002;&#x5F53;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5728;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;REST&#x8C03;&#x7528;&#x4E4B;&#x524D;&#xFF0C;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x4EE3;&#x7801;&#x53EF;&#x80FD;&#x672C;&#x8EAB;&#x5DF2;&#x7ECF;&#x5C31;&#x5145;&#x5F53;&#x4E86;Facade&#x548C;DTO&#x7684;&#x89D2;&#x8272;&#xFF08;&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x6709;&#x4E9B;&#x573A;&#x666F;&#x9700;&#x8981;&#x8FD9;&#x4E9B;&#x89D2;&#x8272;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x53EF;&#x53C2;&#x8003;&#x5FAE;&#x89C2;SOA&#xFF1A;&#x670D;&#x52A1;&#x8BBE;&#x8BA1;&#x539F;&#x5219;&#x53CA;&#x5176;&#x5B9E;&#x8DF5;&#x65B9;&#x5F0F;&#xFF09;&#x3002;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5728;&#x6DFB;&#x52A0;REST&#x4E4B;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x518D;&#x989D;&#x5916;&#x6DFB;&#x52A0;&#x4E0E;REST&#x76F8;&#x5173;&#x7684;Facade&#x548C;DTO&#xFF0C;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x5BF9;&#x539F;&#x6709;&#x4EE3;&#x7801;&#x5BF9;&#x518D;&#x4E00;&#x6B21;&#x5305;&#x88C5;&#xFF0C;&#x5373;&#x5F62;&#x6210;&#x5982;&#x4E0B;&#x8C03;&#x7528;&#x94FE;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;RestFacade/RestDTO -&gt; Facade/DTO -&gt; Service</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x4F53;&#x7CFB;&#x6BD4;&#x8F83;&#x7E41;&#x7410;&#xFF0C;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x4E4B;&#x7C7B;&#x7684;&#x5DE5;&#x4F5C;&#x91CF;&#x4E5F;&#x4E0D;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x822C;&#x5E94;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x5982;&#x6B64;&#x3002;</p>
<h4 id="REST&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x7AEF;&#x8BE6;&#x89E3;"><a href="#REST&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x7AEF;&#x8BE6;&#x89E3;" class="headerlink" title="REST&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x7AEF;&#x8BE6;&#x89E3;"></a>REST&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x7AEF;&#x8BE6;&#x89E3;</h4><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7528;&#x4E09;&#x79CD;&#x573A;&#x666F;&#x6765;&#x5206;&#x522B;&#x8BA8;&#x8BBA;&#xFF1A;</p>
<p>&#x975E;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;&#xFF08;non-dubbo &#x2013;&gt; dubbo&#xFF09;<br>dubbo&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1; &#xFF08;dubbo &#x2013;&gt; dubbo&#xFF09;<br>dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;&#x975E;dubbo&#x7684;REST&#x670D;&#x52A1; &#xFF08;dubbo &#x2013;&gt; non-dubbo&#xFF09;</p>
<h4 id="&#x573A;&#x666F;1&#xFF1A;&#x975E;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;"><a href="#&#x573A;&#x666F;1&#xFF1A;&#x975E;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;" class="headerlink" title="&#x573A;&#x666F;1&#xFF1A;&#x975E;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;"></a>&#x573A;&#x666F;1&#xFF1A;&#x975E;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;</h4><p>&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4E0E;dubbo&#x672C;&#x8EAB;&#x65E0;&#x5173;&#xFF0C;&#x76F4;&#x63A5;&#x9009;&#x7528;&#x76F8;&#x5E94;&#x8BED;&#x8A00;&#x548C;&#x6846;&#x67B6;&#x4E2D;&#x5408;&#x9002;&#x7684;&#x65B9;&#x5F0F;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;&#x8FD8;&#x662F;java&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#xFF08;&#x4F46;&#x6CA1;&#x7528;dubbo&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x7684;JAX-RS Client API&#x6216;&#x8005;&#x7279;&#x5B9A;REST&#x5B9E;&#x73B0;&#x7684;Client API&#x6765;&#x8C03;&#x7528;REST&#x670D;&#x52A1;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x7528;JAX-RS Client API&#x6765;&#x8BBF;&#x95EE;&#x4E0A;&#x8FF0;&#x7684;UserService&#x7684;registerUser()&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;User user = new User();</span><br><span class="line">user.setName(&quot;Larry&quot;);Client client = ClientBuilder.newClient();WebTarget target = client.target(&quot;http://localhost:8080/services/users/register.json&quot;);Response response = target.request().post(Entity.entity(user, MediaType.APPLICATION_JSON_TYPE));try {    if (response.getStatus() != 200) {        throw new RuntimeException(&quot;Failed with HTTP error code : &quot; + response.getStatus());</span><br><span class="line">    }    System.out.println(&quot;The generated id is &quot; + response.readEntity(RegistrationResult.class).getId());</span><br><span class="line">} finally {</span><br><span class="line">    response.close();</span><br><span class="line">    client.close(); // &#x5728;&#x771F;&#x6B63;&#x5F00;&#x53D1;&#x4E2D;&#x4E0D;&#x8981;&#x6BCF;&#x6B21;&#x5173;&#x95ED;client&#xFF0C;&#x6BD4;&#x5982;HTTP&#x957F;&#x8FDE;&#x63A5;&#x662F;&#x7531;client&#x6301;&#x6709;&#x7684;}</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x4E2D;&#x7684;User&#x548C;RegistrationResult&#x7C7B;&#x90FD;&#x662F;&#x6D88;&#x8D39;&#x7AEF;&#x81EA;&#x5DF1;&#x7F16;&#x5199;&#x7684;&#xFF0C;JAX-RS Client API&#x4F1A;&#x81EA;&#x52A8;&#x5BF9;&#x5B83;&#x4EEC;&#x505A;&#x5E8F;&#x5217;&#x5316;/&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5728;java&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x81EA;&#x5DF1;&#x719F;&#x6089;&#x7684;&#x6BD4;&#x5982;HttpClient&#xFF0C;FastJson&#xFF0C;XStream&#x7B49;&#x7B49;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x6280;&#x672F;&#x6765;&#x5B9E;&#x73B0;REST&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5728;&#x6B64;&#x4E0D;&#x518D;&#x8BE6;&#x8FF0;&#x3002;</p>
<h4 id="&#x573A;&#x666F;2&#xFF1A;dubbo&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;"><a href="#&#x573A;&#x666F;2&#xFF1A;dubbo&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;" class="headerlink" title="&#x573A;&#x666F;2&#xFF1A;dubbo&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;"></a>&#x573A;&#x666F;2&#xFF1A;dubbo&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;</h4><p>&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x548C;&#x4F7F;&#x7528;&#x5176;&#x4ED6;dubbo&#x7684;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E00;&#x6837;&#xFF0C;&#x76F4;&#x63A5;&#x5728;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x7AEF;&#x5171;&#x4EAB;Java&#x670D;&#x52A1;&#x63A5;&#x53E3;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;spring xml&#x914D;&#x7F6E;&#xFF08;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;spring/dubbo&#x7684;annotation&#x914D;&#x7F6E;&#xFF09;&#xFF0C;&#x5373;&#x53EF;&#x900F;&#x660E;&#x7684;&#x8C03;&#x7528;&#x8FDC;&#x7A0B;REST&#x670D;&#x52A1;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:reference id=&quot;userService&quot; interface=&quot;xxx.UserService&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x524D;&#x6240;&#x8FF0;&#xFF0C;&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#x5FC5;&#x987B;&#x628A;JAX-RS&#x7684;annotation&#x6DFB;&#x52A0;&#x5230;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x5728;dubbo&#x5728;&#x6D88;&#x8D39;&#x7AEF;&#x624D;&#x80FD;&#x5171;&#x4EAB;&#x76F8;&#x5E94;&#x7684;REST&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x636E;&#x4E4B;&#x505A;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Path(&quot;users&quot;)public interface UserService {    @GET</span><br><span class="line">    @Path(&quot;{id : \\d+}&quot;)    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})    User getUser(@PathParam(&quot;id&quot;) Long id);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x7684;annotation&#x4E2D;&#x914D;&#x7F6E;&#x4E86;&#x591A;&#x79CD;&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x8FD9;&#x91CC;&#x7531;&#x4E8E;&#x4E24;&#x7AEF;&#x90FD;&#x662F;dubbo&#x7CFB;&#x7EDF;&#xFF0C;REST&#x7684;&#x5927;&#x91CF;&#x7EC6;&#x8282;&#x88AB;&#x5C4F;&#x853D;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5B58;&#x5728;&#x7528;&#x524D;&#x8FF0;URL&#x540E;&#x7F00;&#x4E4B;&#x7C7B;&#x9009;&#x62E9;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x7684;&#x53EF;&#x80FD;&#x3002;&#x76EE;&#x524D;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6392;&#x540D;&#x6700;&#x9760;&#x524D;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x5C06;&#x76F4;&#x63A5;&#x88AB;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5EFA;&#x8BAE;&#x4F60;&#x5728;&#x5B9A;&#x4E49;annotation&#x7684;&#x65F6;&#x5019;&#x6700;&#x597D;&#x628A;&#x6700;&#x5408;&#x9002;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x653E;&#x5230;&#x524D;&#x9762;&#xFF0C;&#x6BD4;&#x5982;&#x4EE5;&#x4E0A;&#x6211;&#x4EEC;&#x662F;&#x628A;json&#x653E;&#x5728;xml&#x524D;&#x9762;&#xFF0C;&#x56E0;&#x4E3A;json&#x7684;&#x4F20;&#x8F93;&#x6027;&#x80FD;&#x4F18;&#x4E8E;xml&#x3002;</p>
<h4 id="&#x573A;&#x666F;3&#xFF1A;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;&#x975E;dubbo&#x7684;REST&#x670D;&#x52A1;"><a href="#&#x573A;&#x666F;3&#xFF1A;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;&#x975E;dubbo&#x7684;REST&#x670D;&#x52A1;" class="headerlink" title="&#x573A;&#x666F;3&#xFF1A;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;&#x975E;dubbo&#x7684;REST&#x670D;&#x52A1;"></a>&#x573A;&#x666F;3&#xFF1A;dubbo&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x8C03;&#x7528;&#x975E;dubbo&#x7684;REST&#x670D;&#x52A1;</h4><p>&#x8FD9;&#x79CD;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x573A;&#x666F;1&#x4E2D;&#x63CF;&#x8FF0;&#x7684;Java&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8C03;&#x7528;REST&#x670D;&#x52A1;&#x3002;&#x4F46;&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x573A;&#x666F;2&#x4E2D;&#x63CF;&#x8FF0;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x66F4;&#x900F;&#x660E;&#x7684;&#x8C03;&#x7528;REST&#x670D;&#x52A1;&#xFF0C;&#x5373;&#x4F7F;&#x8FD9;&#x4E2A;&#x670D;&#x52A1;&#x5E76;&#x4E0D;&#x662F;dubbo&#x63D0;&#x4F9B;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x7528;&#x573A;&#x666F;2&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x7531;&#x4E8E;&#x8FD9;&#x91CC;REST&#x670D;&#x52A1;&#x5E76;&#x975E;dubbo&#x63D0;&#x4F9B;&#xFF0C;&#x4E00;&#x822C;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x524D;&#x8FF0;&#x7684;&#x5171;&#x4EAB;&#x7684;Java&#x670D;&#x52A1;&#x63A5;&#x53E3;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6839;&#x636E;&#x5916;&#x90E8;REST&#x670D;&#x52A1;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x81EA;&#x5DF1;&#x6765;&#x7F16;&#x5199;Java&#x63A5;&#x53E3;&#x4EE5;&#x53CA;&#x76F8;&#x5E94;&#x53C2;&#x6570;&#x7C7B;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;JAX-RS&#x3001;JAXB&#x3001;Jackson&#x7B49;&#x7684;annotation&#xFF0C;dubbo&#x7684;REST&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x4F1A;&#x636E;&#x6B64;&#x53BB;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x8BF7;&#x6C42;&#x6D88;&#x606F;&#xFF0C;&#x81EA;&#x52A8;&#x89E3;&#x6790;&#x54CD;&#x5E94;&#x6D88;&#x606F;&#x7B49;&#x7B49;&#xFF0C;&#x4ECE;&#x800C;&#x900F;&#x660E;&#x7684;&#x505A;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x3002;&#x6216;&#x8005;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E5F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#xFF0C;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x7528;JAX-RS&#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x4EFF;&#x9020;&#x5B9E;&#x73B0;&#x4E00;&#x904D;&#x5916;&#x90E8;&#x7684;REST&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x5199;&#x6210;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x653E;&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x6765;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;dubbo&#x7684;REST&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x5C31;&#x80FD;&#x50CF;&#x8C03;&#x7528;dubbo&#x7684;REST&#x670D;&#x52A1;&#x4E00;&#x6837;&#x8C03;&#x7528;&#x5176;&#x4ED6;REST&#x670D;&#x52A1;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x8981;&#x8C03;&#x7528;&#x5982;&#x4E0B;&#x7684;&#x5916;&#x90E8;&#x670D;&#x52A1;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;http://api.foo.com/services/users/1001</span><br><span class="line">http://api.foo.com/services/users/1002</span><br></pre></td></tr></table></figure>

<p>&#x83B7;&#x53D6;&#x4E0D;&#x540C;ID&#x7684;&#x7528;&#x6237;&#x8D44;&#x6599;&#xFF0C;&#x8FD4;&#x56DE;&#x683C;&#x5F0F;&#x662F;JSON</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;{    &quot;id&quot;: 1001,    &quot;name&quot;: &quot;Larry&quot;}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x53EF;&#x6839;&#x636E;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#xFF0C;&#x7F16;&#x5199;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x548C;&#x53C2;&#x6570;&#x7C7B;&#x5373;&#x53EF;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Path(&quot;users&quot;)public interface UserService {    @GET</span><br><span class="line">    @Path(&quot;{id : \\d+}&quot;)    @Produces({MediaType.APPLICATION_JSON})    User getUser(@PathParam(&quot;id&quot;) Long id);</span><br><span class="line">}</span><br><span class="line">public class User implements Serializable {    private Long id;    private String name;    // &#x2026;}</span><br></pre></td></tr></table></figure>

<p>&#x5BF9;&#x4E8E;spring&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x7684;REST&#x670D;&#x52A1;&#x4E0D;&#x662F;dubbo&#x63D0;&#x4F9B;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;dubbo&#x7684;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#xFF0C;&#x76F4;&#x63A5;&#x914D;&#x7F6E;&#x5916;&#x90E8;REST&#x670D;&#x52A1;&#x7684;url&#x5730;&#x5740;&#x5373;&#x53EF;&#xFF08;&#x5982;&#x591A;&#x4E2A;&#x5730;&#x5740;&#x7528;&#x9017;&#x53F7;&#x5206;&#x9694;&#xFF09;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:reference id=&quot;userService&quot; interface=&quot;xxx.UserService&quot; url=&quot;rest://api.foo.com/services/&quot;/&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x534F;&#x8BAE;&#x5FC5;&#x987B;&#x7528;rest://&#x800C;&#x4E0D;&#x662F;<a href="http://%E4%B9%8B%E7%B1%BB" target="_blank" rel="noopener">http://&#x4E4B;&#x7C7B;</a>&#x3002;&#x5982;&#x679C;&#x5916;&#x90E8;&#x7684;REST&#x670D;&#x52A1;&#x6709;context path&#xFF0C;&#x5219;&#x5728;url&#x4E2D;&#x4E5F;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;&#x4E0A;&#xFF08;&#x9664;&#x975E;&#x4F60;&#x5728;&#x6BCF;&#x4E2A;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x7684;@Pathannotation&#x4E2D;&#x90FD;&#x5E26;&#x4E0A;context path&#xFF09;&#xFF0C;&#x4F8B;&#x5982;&#x4E0A;&#x9762;&#x7684;/services/&#x3002;&#x540C;&#x65F6;&#x8FD9;&#x91CC;&#x7684;services&#x540E;&#x9762;&#x5FC5;&#x987B;&#x5E26;&#x4E0A;/&#xFF0C;&#x8FD9;&#x6837;&#x624D;&#x80FD;&#x4F7F;dubbo&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</p>
</blockquote>
<p>&#x53E6;&#x5916;&#xFF0C;&#x8FD9;&#x91CC;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x542F;&#x52A8;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x548C;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:reference id=&quot;userService&quot; interface=&quot;xxx.UserService&quot; url=&quot;rest://api.foo.com/services/&quot; timeout=&quot;2000&quot; connections=&quot;10&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Dubbo&#x4E2D;JAX-RS&#x7684;&#x9650;&#x5236;"><a href="#Dubbo&#x4E2D;JAX-RS&#x7684;&#x9650;&#x5236;" class="headerlink" title="Dubbo&#x4E2D;JAX-RS&#x7684;&#x9650;&#x5236;"></a>Dubbo&#x4E2D;JAX-RS&#x7684;&#x9650;&#x5236;</h4><p>Dubbo&#x4E2D;&#x7684;REST&#x5F00;&#x53D1;&#x662F;&#x5B8C;&#x5168;&#x517C;&#x5BB9;&#x6807;&#x51C6;JAX-RS&#x7684;&#xFF0C;&#x4F46;&#x5176;&#x652F;&#x6301;&#x7684;&#x529F;&#x80FD;&#x76EE;&#x524D;&#x662F;&#x5B8C;&#x6574;JAX-RS&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#xFF0C;&#x90E8;&#x5206;&#x56E0;&#x4E3A;&#x5B83;&#x8981;&#x53D7;&#x9650;&#x4E8E;dubbo&#x548C;spring&#x7684;&#x7279;&#x5B9A;&#x4F53;&#x7CFB;&#x3002;</p>
<p>&#x5728;dubbo&#x4E2D;&#x4F7F;&#x7528;&#x7684;JAX-RS&#x7684;&#x5C40;&#x9650;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x9650;&#x4E8E;&#xFF1A;</p>
<p>&#x670D;&#x52A1;&#x5B9E;&#x73B0;&#x53EA;&#x80FD;&#x662F;singleton&#x7684;&#xFF0C;&#x4E0D;&#x80FD;&#x652F;&#x6301;per-request scope&#x548C;per-lookup scope&#x4E0D;&#x652F;&#x6301;&#x7528;@Context annotation&#x5BF9;&#x670D;&#x52A1;&#x7684;&#x5B9E;&#x4F8B;&#x5B57;&#x6BB5;&#x6CE8;&#x5165; ServletConfig&#x3001;ServletContext&#x3001;HttpServletRequest&#x3001;HttpServletResponse&#x7B49;&#x7B49;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x652F;&#x6301;&#x5BF9;&#x670D;&#x52A1;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x7684;&#x6CE8;&#x5165;&#x3002;&#x4F46;&#x5BF9;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;REST server&#x5B9E;&#x73B0;&#xFF0C;&#xFF08;&#x7965;&#x89C1;&#x524D;&#x9762;&#x7684;&#x53D9;&#x8FF0;&#xFF09;&#xFF0C;&#x4E5F;&#x4E0D;&#x652F;&#x6301;&#x5BF9;&#x670D;&#x52A1;&#x65B9;&#x6CD5;&#x53C2;&#x6570;&#x7684;&#x6CE8;&#x5165;&#x3002;</p>
<h4 id="REST&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x7B54;&#xFF08;REST-FAQ&#xFF09;"><a href="#REST&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x7B54;&#xFF08;REST-FAQ&#xFF09;" class="headerlink" title="REST&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x7B54;&#xFF08;REST FAQ&#xFF09;"></a>REST&#x5E38;&#x89C1;&#x95EE;&#x9898;&#x89E3;&#x7B54;&#xFF08;REST FAQ&#xFF09;</h4><h3 id="Dubbo-REST&#x7684;&#x670D;&#x52A1;&#x80FD;&#x548C;Dubbo&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x3001;&#x76D1;&#x63A7;&#x4E2D;&#x5FC3;&#x96C6;&#x6210;&#x5417;&#xFF1F;"><a href="#Dubbo-REST&#x7684;&#x670D;&#x52A1;&#x80FD;&#x548C;Dubbo&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x3001;&#x76D1;&#x63A7;&#x4E2D;&#x5FC3;&#x96C6;&#x6210;&#x5417;&#xFF1F;" class="headerlink" title="Dubbo REST&#x7684;&#x670D;&#x52A1;&#x80FD;&#x548C;Dubbo&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x3001;&#x76D1;&#x63A7;&#x4E2D;&#x5FC3;&#x96C6;&#x6210;&#x5417;&#xFF1F;"></a>Dubbo REST&#x7684;&#x670D;&#x52A1;&#x80FD;&#x548C;Dubbo&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x3001;&#x76D1;&#x63A7;&#x4E2D;&#x5FC3;&#x96C6;&#x6210;&#x5417;&#xFF1F;</h3><p>&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x81EA;&#x52A8;&#x96C6;&#x6210;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F60;&#x5728;dubbo&#x4E2D;&#x5F00;&#x53D1;&#x7684;&#x6240;&#x6709;REST&#x670D;&#x52A1;&#x90FD;&#x4F1A;&#x81EA;&#x52A8;&#x6CE8;&#x518C;&#x5230;&#x670D;&#x52A1;&#x518C;&#x4E2D;&#x5FC3;&#x548C;&#x76D1;&#x63A7;&#x4E2D;&#x5FC3;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B83;&#x4EEC;&#x505A;&#x7BA1;&#x7406;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x53EA;&#x6709;&#x5F53;REST&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;dubbo&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x4E2D;&#x7684;&#x8BB8;&#x591A;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x64CD;&#x4F5C;&#x624D;&#x80FD;&#x5B8C;&#x5168;&#x8D77;&#x4F5C;&#x7528;&#x3002;&#x800C;&#x5982;&#x679C;&#x6D88;&#x8D39;&#x7AEF;&#x662F;&#x975E;dubbo&#x7684;&#xFF0C;&#x81EA;&#x7136;&#x4E0D;&#x53D7;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x7BA1;&#x7406;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x4E2D;&#x5F88;&#x591A;&#x64CD;&#x4F5C;&#x662F;&#x4E0D;&#x4F1A;&#x5BF9;&#x6D88;&#x8D39;&#x7AEF;&#x8D77;&#x4F5C;&#x7528;&#x7684;&#x3002;</p>
<h3 id="Dubbo-REST&#x4E2D;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;&#x5BB9;&#x9519;&#xFF08;failover&#xFF09;&#xFF1F;"><a href="#Dubbo-REST&#x4E2D;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;&#x5BB9;&#x9519;&#xFF08;failover&#xFF09;&#xFF1F;" class="headerlink" title="Dubbo REST&#x4E2D;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;&#x5BB9;&#x9519;&#xFF08;failover&#xFF09;&#xFF1F;"></a>Dubbo REST&#x4E2D;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;&#x5BB9;&#x9519;&#xFF08;failover&#xFF09;&#xFF1F;</h3><p>&#x5982;&#x679C;dubbo REST&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x4E5F;&#x662F;dubbo&#x7684;&#xFF0C;&#x5219;Dubbo REST&#x548C;&#x5176;&#x4ED6;dubbo&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x534F;&#x8BAE;&#x57FA;&#x672C;&#x5B8C;&#x5168;&#x4E00;&#x6837;&#xFF0C;&#x7531;dubbo&#x6846;&#x67B6;&#x900F;&#x660E;&#x7684;&#x5728;&#x6D88;&#x8D39;&#x7AEF;&#x505A;load balance&#x3001;failover&#x7B49;&#x7B49;&#x3002;</p>
<p>&#x5982;&#x679C;dubbo REST&#x7684;&#x6D88;&#x8D39;&#x7AEF;&#x662F;&#x975E;dubbo&#x7684;&#xFF0C;&#x751A;&#x81F3;&#x662F;&#x975E;java&#x7684;&#xFF0C;&#x5219;&#x6700;&#x597D;&#x914D;&#x7F6E;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x7AEF;&#x7684;&#x8F6F;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x673A;&#x5236;&#xFF0C;&#x76EE;&#x524D;&#x53EF;&#x8003;&#x8651;&#x7528;LVS&#x3001;HAProxy&#x3001; Nginx&#x7B49;&#x7B49;&#x5BF9;HTTP&#x8BF7;&#x6C42;&#x505A;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3002;</p>
<h3 id="JAX-RS&#x4E2D;&#x91CD;&#x8F7D;&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00;URL&#x5730;&#x5740;&#x5417;&#xFF1F;"><a href="#JAX-RS&#x4E2D;&#x91CD;&#x8F7D;&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00;URL&#x5730;&#x5740;&#x5417;&#xFF1F;" class="headerlink" title="JAX-RS&#x4E2D;&#x91CD;&#x8F7D;&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00;URL&#x5730;&#x5740;&#x5417;&#xFF1F;"></a>JAX-RS&#x4E2D;&#x91CD;&#x8F7D;&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x6620;&#x5C04;&#x5230;&#x540C;&#x4E00;URL&#x5730;&#x5740;&#x5417;&#xFF1F;</h3><p><a href="/external_links/97bb4f4c07fe73c89f54747aa2541c48.html" target="blank" rel="noopener">stackoverflow.com/ques&#x2026;</a></p>
<h3 id="JAX-RS&#x4E2D;&#x4F5C;POST&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x63A5;&#x6536;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x5417;&#xFF1F;"><a href="#JAX-RS&#x4E2D;&#x4F5C;POST&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x63A5;&#x6536;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x5417;&#xFF1F;" class="headerlink" title="JAX-RS&#x4E2D;&#x4F5C;POST&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x63A5;&#x6536;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x5417;&#xFF1F;"></a>JAX-RS&#x4E2D;&#x4F5C;POST&#x7684;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x63A5;&#x6536;&#x591A;&#x4E2A;&#x53C2;&#x6570;&#x5417;&#xFF1F;</h3><p><a href="/external_links/ee3e0aa2ddf1d73874fce3be73d8276f.html" target="blank" rel="noopener">stackoverflow.com/ques&#x2026;</a></p>
<h3 id="Dubbo&#x5F53;&#x524D;&#x4F53;&#x7CFB;&#x7684;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF08;&#x4E0E;REST&#x76F8;&#x5173;&#x7684;&#xFF09;"><a href="#Dubbo&#x5F53;&#x524D;&#x4F53;&#x7CFB;&#x7684;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF08;&#x4E0E;REST&#x76F8;&#x5173;&#x7684;&#xFF09;" class="headerlink" title="Dubbo&#x5F53;&#x524D;&#x4F53;&#x7CFB;&#x7684;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF08;&#x4E0E;REST&#x76F8;&#x5173;&#x7684;&#xFF09;"></a>Dubbo&#x5F53;&#x524D;&#x4F53;&#x7CFB;&#x7684;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF08;&#x4E0E;REST&#x76F8;&#x5173;&#x7684;&#xFF09;</h3><p>&#x6211;&#x8BA4;&#x4E3A;dubbo&#x5F53;&#x524D;&#x4F53;&#x7CFB;&#x4E2D;&#x663E;&#x7136;&#x4E5F;&#x6709;&#x4E0D;&#x5C11;&#x4E0D;&#x8DB3;&#x4E4B;&#x5904;&#xFF0C;&#x8FD9;&#x91CC;&#x5217;&#x51FA;&#x51E0;&#x4E2A;&#x4E0E;REST&#x6709;&#x5173;&#x7684;&#x3001;&#x5E76;&#x5F71;&#x54CD;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x7684;&#x95EE;&#x9898;&#xFF08;&#x4E0D;&#x5305;&#x62EC;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x7684;&#x95EE;&#x9898;&#xFF09;&#xFF0C;&#x4F9B;&#x53C2;&#x8003;&#x8BC4;&#x8BBA;&#xFF0C;&#x4E3A;&#x4E0B;&#x4E00;&#x6B65;&#x91CD;&#x6784;&#x4F5C;&#x51C6;&#x5907;&#x3002;</p>
<p>RpcContext&#x7684;&#x4FB5;&#x5165;&#x6027;&#x5728;&#x524D;&#x6587;&#xFF0C;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x63D0;&#x5230;&#x8FC7;RpcContext&#x7528;&#x6CD5;&#x7684;&#x4FB5;&#x5165;&#x6027;&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x662F;&#x7528;&#x5355;&#x4F8B;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x8BBF;&#x95EE;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x5B8C;&#x5168;&#x4E0D;&#x7B26;&#x5408;spring&#x5E94;&#x7528;&#x7684;&#x4E00;&#x822C;&#x98CE;&#x683C;&#xFF0C;&#x4E0D;&#x5229;&#x4E8E;&#x5E94;&#x7528;&#x6269;&#x5C55;&#x548C;&#x5355;&#x5143;&#x6D4B;&#x8BD5;&#x3002;&#x672A;&#x6765;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x7528;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x65B9;&#x5F0F;&#x6CE8;&#x5165;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x518D;&#x7528;&#x5B83;&#x53BB;&#x8BBF;&#x95EE;ThreadLocal&#x4E2D;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#x3002;</p>
<h3 id="Protocol&#x914D;&#x7F6E;&#x7684;&#x5C40;&#x9650;&#x6027;"><a href="#Protocol&#x914D;&#x7F6E;&#x7684;&#x5C40;&#x9650;&#x6027;" class="headerlink" title="Protocol&#x914D;&#x7F6E;&#x7684;&#x5C40;&#x9650;&#x6027;"></a>Protocol&#x914D;&#x7F6E;&#x7684;&#x5C40;&#x9650;&#x6027;</h3><p>dubbo&#x652F;&#x6301;&#x591A;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x6240;&#x6709;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x90FD;&#x662F;&#x7528;<a href="dubbo:protocol/" target="_blank" rel="noopener">dubbo:protocol/</a>&#x6765;&#x914D;&#x7F6E;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;9090&quot; server=&quot;netty&quot; client=&quot;netty&quot; codec=&quot;dubbo&quot; serialization=&quot;hessian2&quot; </span><br><span class="line">    charset=&quot;UTF-8&quot; threadpool=&quot;fixed&quot; threads=&quot;100&quot; queues=&quot;0&quot; iothreads=&quot;9&quot; buffer=&quot;8192&quot; accepts=&quot;1000&quot; payload=&quot;8388608&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x5B9E;&#xFF0C;&#x4E0A;&#x9762;&#x5F88;&#x591A;&#x5C5E;&#x6027;&#x5B9E;&#x9645;&#x4E0A;dubbo RPC&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x7279;&#x6709;&#x7684;&#xFF0C;&#x5F88;&#x591A;dubbo&#x4E2D;&#x7684;&#x5176;&#x5B83;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x6839;&#x672C;&#x5C31;&#x4E0D;&#x652F;&#x6301;&#x4F8B;&#x5982;server, client, codec, iothreads, accepts, payload&#x7B49;&#x7B49;&#xFF08;&#x5F53;&#x7136;&#xFF0C;&#x6709;&#x7684;&#x662F;&#x6761;&#x4EF6;&#x6240;&#x9650;&#x4E0D;&#x652F;&#x6301;&#xFF0C;&#x6709;&#x7684;&#x662F;&#x6839;&#x672C;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x652F;&#x6301;&#xFF09;&#x3002;&#x8FD9;&#x7ED9;&#x7528;&#x6237;&#x7684;&#x4F7F;&#x7528;&#x5F92;&#x589E;&#x5F88;&#x591A;&#x56F0;&#x60D1;&#xFF0C;&#x7528;&#x6237;&#x4E5F;&#x5E76;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x4E9B;&#x5C5E;&#x6027;&#xFF08;&#x6BD4;&#x5982;&#x505A;&#x6027;&#x80FD;&#x8C03;&#x4F18;&#xFF09;&#x6DFB;&#x52A0;&#x4E86;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;&#x7684;&#x3002;</p>
<p>&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5404;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x5F80;&#x5F80;&#x6709;&#x5927;&#x91CF;&#x81EA;&#x5DF1;&#x72EC;&#x7279;&#x7684;&#x914D;&#x7F6E;&#x9700;&#x8981;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x6211;&#x4EEC;&#x9010;&#x6B65;&#x4E3A;&#x6BCF;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x90FD;&#x6DFB;&#x52A0;&#x66F4;&#x4E30;&#x5BCC;&#x3001;&#x66F4;&#x9AD8;&#x7EA7;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x5C31;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x6269;&#x5C55;<protocol>&#x4E2D;&#x7684;&#x5C5E;&#x6027;&#xFF08;&#x4F8B;&#x5982;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x5728;REST&#x4E2D;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x4E86;keepalive&#x548C;extension&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#xFF09;&#xFF0C;&#x5230;&#x6700;&#x540E;&#x4F1A;&#x5BFC;&#x81F4;<protocol>&#x81C3;&#x80BF;&#x4E0D;&#x582A;&#xFF0C;&#x7528;&#x6237;&#x7684;&#x4F7F;&#x7528;&#x4E5F;&#x66F4;&#x52A0;&#x56F0;&#x60D1;&#x3002;</protocol></protocol></p>
<p>&#x5F53;&#x7136;&#xFF0C;dubbo&#x4E2D;&#x6709;&#x4E00;&#x79CD;&#x6269;&#x5C55;<protocol>&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x7528;<a href="dubbo:parameter/" target="_blank" rel="noopener">dubbo:parameter/</a>&#xFF0C;&#x4F46;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x663E;&#x7136;&#x5F88;&#x6709;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x800C;&#x4E14;&#x7528;&#x6CD5;&#x590D;&#x6742;&#xFF0C;&#x7F3A;&#x4E4F;schema&#x6821;&#x9A8C;&#x3002;</protocol></p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x4E3A;&#x6BCF;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x81EA;&#x5DF1;&#x7684;protocol&#x5143;&#x7D20;&#xFF0C;&#x6BD4;&#x5982;<protocol-dubbo>&#xFF0C;<protocol-rest>&#x7B49;&#x7B49;&#xFF0C;&#x6BCF;&#x79CD;&#x5143;&#x7D20;&#x7528;XML schema&#x89C4;&#x5B9A;&#x81EA;&#x5DF1;&#x7684;&#x5C5E;&#x6027;&#xFF08;&#x5F53;&#x7136;&#x5C5E;&#x6027;&#x5728;&#x5404;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E4B;&#x95F4;&#x80FD;&#x901A;&#x7528;&#x662F;&#x6700;&#x597D;&#x7684;&#xFF09;&#x3002;</protocol-rest></protocol-dubbo></p>
<p>&#x5982;&#x6B64;&#x4E00;&#x6765;&#xFF0C;&#x4F8B;&#x5982;&#x524D;&#x9762;&#x63D0;&#x5230;&#x8FC7;&#x7684;extension&#x914D;&#x7F6E;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x66F4;&#x81EA;&#x7531;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4ECE;&#x800C;&#x66F4;&#x6E05;&#x695A;&#x66F4;&#x53EF;&#x6269;&#x5C55;&#xFF08;&#x4EE5;&#x4E0B;&#x53EA;&#x662F;&#x4E3E;&#x4F8B;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x8BB8;&#x6709;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#xFF09;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol-rest port=&quot;8080&quot;&gt;</span><br><span class="line">    &lt;dubbo:extension&gt;someInterceptor&lt;/dubbo:extension&gt;</span><br><span class="line">    &lt;dubbo:extension&gt;someFilter&lt;/dubbo:extension&gt;</span><br><span class="line">    &lt;dubbo:extension&gt;someDynamicFeature&lt;/dubbo:extension&gt;</span><br><span class="line">    &lt;dubbo:extension&gt;someEntityProvider&lt;/dubbo:extension&gt;</span><br><span class="line">&lt;/dubbo:protocol-rest&gt;</span><br></pre></td></tr></table></figure>

<h4 id="XML&#x547D;&#x540D;&#x4E0D;&#x7B26;&#x5408;spring&#x89C4;&#x8303;"><a href="#XML&#x547D;&#x540D;&#x4E0D;&#x7B26;&#x5408;spring&#x89C4;&#x8303;" class="headerlink" title="XML&#x547D;&#x540D;&#x4E0D;&#x7B26;&#x5408;spring&#x89C4;&#x8303;"></a>XML&#x547D;&#x540D;&#x4E0D;&#x7B26;&#x5408;spring&#x89C4;&#x8303;</h4><p>dubbo&#x7684;XML&#x914D;&#x7F6E;&#x4E2D;&#x5927;&#x91CF;&#x547D;&#x540D;&#x90FD;&#x4E0D;&#x7B26;&#x5408;spring&#x89C4;&#x8303;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;9090&quot; server=&quot;netty&quot; client=&quot;netty&quot; codec=&quot;dubbo&quot; serialization=&quot;hessian2&quot; </span><br><span class="line">    charset=&quot;UTF-8&quot; threadpool=&quot;fixed&quot; threads=&quot;100&quot; queues=&quot;0&quot; iothreads=&quot;9&quot; buffer=&quot;8192&quot; accepts=&quot;1000&quot; payload=&quot;8388608&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x9762;threadpool&#x5E94;&#x8BE5;&#x6539;&#x4E3A;thread-pool&#xFF0C;iothreads&#x5E94;&#x8BE5;&#x6539;&#x4E3A;io-threads&#xFF0C;&#x5355;&#x8BCD;&#x4E4B;&#x95F4;&#x5E94;&#x8BE5;&#x7528;&#x201D;-&#x201C;&#x5206;&#x9694;&#x3002;&#x8FD9;&#x867D;&#x7136;&#x770B;&#x8D77;&#x6765;&#x662F;&#x4E2A;&#x5C0F;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x4E5F;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x53EF;&#x8BFB;&#x6027;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x8981;&#x7528;&#x66F4;&#x591A;&#x5355;&#x8BCD;&#x6765;&#x63CF;&#x8FF0;XML&#x5143;&#x7D20;&#x548C;&#x5C5E;&#x6027;&#x3002;</p>
<p>&#x5176;&#x5B9E;dubbo&#x672C;&#x8EAB;&#x4E5F;&#x662F;&#x5EFA;&#x8BAE;&#x9075;&#x5B88;spring&#x5230;XML&#x7684;&#x547D;&#x540D;&#x89C4;&#x8303;&#x3002;</p>
<h4 id="REST&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"><a href="#REST&#x6700;&#x4F73;&#x5B9E;&#x8DF5;" class="headerlink" title="REST&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"></a>REST&#x6700;&#x4F73;&#x5B9E;&#x8DF5;</h4><p>TODO</p>
<h4 id="&#x6027;&#x80FD;&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;"><a href="#&#x6027;&#x80FD;&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x6027;&#x80FD;&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;"></a>&#x6027;&#x80FD;&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;</h4><h3 id="&#x6D4B;&#x8BD5;&#x73AF;&#x5883;"><a href="#&#x6D4B;&#x8BD5;&#x73AF;&#x5883;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x73AF;&#x5883;"></a>&#x6D4B;&#x8BD5;&#x73AF;&#x5883;</h3><p>&#x7C97;&#x7565;&#x5982;&#x4E0B;&#xFF1A;</p>
<p>&#x4E24;&#x53F0;&#x72EC;&#x7ACB;&#x670D;&#x52A1;&#x5668;<br>4&#x6838;Intel(R) Xeon(R) CPU E5-2603 0 @ 1.80GHz<br>8G&#x5185;&#x5B58;<br>&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x7F51;&#x7EDC;&#x901A;&#x8FC7;&#x767E;&#x5146;&#x4EA4;&#x6362;&#x673A;<br>CentOS 5<br>JDK 7<br>Tomcat 7<br>JVM&#x53C2;&#x6570;-server -Xms1g -Xmx1g -XX:PermSize=64M -XX:+UseConcMarkSweepGC</p>
<h3 id="&#x6D4B;&#x8BD5;&#x811A;&#x672C;"><a href="#&#x6D4B;&#x8BD5;&#x811A;&#x672C;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x811A;&#x672C;"></a>&#x6D4B;&#x8BD5;&#x811A;&#x672C;</h3><p>&#x548C;dubbo&#x81EA;&#x8EAB;&#x7684;&#x57FA;&#x51C6;&#x6D4B;&#x8BD5;&#x4FDD;&#x6301;&#x63A5;&#x8FD1;&#xFF1A;</p>
<p>10&#x4E2A;&#x5E76;&#x53D1;&#x5BA2;&#x6237;&#x7AEF;&#x6301;&#x7EED;&#x4E0D;&#x65AD;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#xFF1A;</p>
<p>&#x4F20;&#x5165;&#x5D4C;&#x5957;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#xFF08;&#x4F46;&#x5355;&#x4E2A;&#x6570;&#x636E;&#x91CF;&#x5F88;&#x5C0F;&#xFF09;&#xFF0C;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#xFF0C;&#x539F;&#x6837;&#x8FD4;&#x56DE;<br>&#x4F20;&#x5165;50K&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x5904;&#x7406;&#xFF0C;&#x539F;&#x6837;&#x8FD4;&#x56DE;&#xFF08;TODO&#xFF1A;&#x7ED3;&#x679C;&#x5C1A;&#x672A;&#x5217;&#x51FA;&#xFF09;<br>&#x8FDB;&#x884C;5&#x5206;&#x949F;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x3002;&#xFF08;&#x5F15;&#x7528;dubbo&#x81EA;&#x8EAB;&#x6D4B;&#x8BD5;&#x7684;&#x8003;&#x8651;&#xFF1A;&#x201C;&#x4E3B;&#x8981;&#x8003;&#x5BDF;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x7F51;&#x7EDC;IO&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x56E0;&#x6B64;&#x670D;&#x52A1;&#x7AEF;&#x65E0;&#x4EFB;&#x4F55;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x53D6;10&#x5E76;&#x53D1;&#x662F;&#x8003;&#x8651;&#x5230;http&#x534F;&#x8BAE;&#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x4E0B;&#x5BF9;CPU&#x7684;&#x4F7F;&#x7528;&#x7387;&#x8F83;&#x9AD8;&#x53EF;&#x80FD;&#x4F1A;&#x5148;&#x6253;&#x5230;&#x74F6;&#x9888;&#x3002;&#x201D;&#xFF09;</p>
<h3 id="&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"><a href="#&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;" class="headerlink" title="&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;"></a>&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;</h3><p>&#x4E0B;&#x9762;&#x7684;&#x7ED3;&#x679C;&#x4E3B;&#x8981;&#x5BF9;&#x6BD4;&#x7684;&#x662F;REST&#x548C;dubbo RPC&#x4E24;&#x79CD;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x5E76;&#x5BF9;&#x5B83;&#x4EEC;&#x4F5C;&#x4E0D;&#x540C;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<p>&#x201C;REST: Jetty + XML + GZIP&#x201D;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF1A;&#x6D4B;&#x8BD5;REST&#xFF0C;&#x5E76;&#x91C7;&#x7528;jetty server&#xFF0C;XML&#x6570;&#x636E;&#x683C;&#x5F0F;&#xFF0C;&#x542F;&#x7528;GZIP&#x538B;&#x7F29;&#x3002;<br>&#x201C;Dubbo: hessian2&#x201D;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF1A;&#x6D4B;&#x8BD5;dubbo RPC&#xFF0C;&#x5E76;&#x91C7;&#x7528;hessian2&#x5E8F;&#x5217;&#x5316;&#x65B9;&#x5F0F;&#x3002;<br>&#x9488;&#x5BF9;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF08;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x8D8A;&#x5C0F;&#x8D8A;&#x597D;&#xFF0C;TPS&#x8D8A;&#x5927;&#x8D8A;&#x597D;&#xFF09;&#xFF1A;</p>
<p>&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x65B9;&#x5F0F; &#x5E73;&#x5747;&#x54CD;&#x5E94;&#x65F6;&#x95F4; &#x5E73;&#x5747;TPS&#xFF08;&#x6BCF;&#x79D2;&#x4E8B;&#x52A1;&#x6570;&#xFF09;</p>
<p>REST: Jetty + JSON 7.806 1280<br>REST: Jetty + JSON + GZIP TODO TODO<br>REST: Jetty + XML TODO TODO<br>REST: Jetty + XML + GZIP TODO TODO<br>REST: Tomcat + JSON 2.082 4796<br>REST: Netty + JSON 2.182 4576<br>Dubbo: FST 1.211 8244<br>Dubbo: kyro 1.182<br> 8444<br>Dubbo: dubbo serialization 1.43 6982<br>Dubbo: hessian2 1.49 6701<br>Dubbo: fastjson 1.572 6352</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/223547a5580c8c5f83084273d21c80f466b2de2bf6eb5b398b66262724488852" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d586e57584eafa57b50b8fa323a711ee82a1360b293b127c7f5a6c466c2bbca0" alt></p>
<p>&#x4EC5;&#x5C31;&#x76EE;&#x524D;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E00;&#x70B9;&#x7B80;&#x5355;&#x603B;&#x7ED3;&#xFF1A;</p>
<p>dubbo RPC&#xFF08;&#x7279;&#x522B;&#x662F;&#x57FA;&#x4E8E;&#x9AD8;&#x6548;java&#x5E8F;&#x5217;&#x5316;&#x65B9;&#x5F0F;&#x5982;kryo&#xFF0C;fst&#xFF09;&#x6BD4;REST&#x7684;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x548C;&#x541E;&#x5410;&#x91CF;&#x90FD;&#x6709;&#x8F83;&#x663E;&#x8457;&#x4F18;&#x52BF;&#xFF0C;&#x5185;&#x7F51;&#x7684;dubbo&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x4F18;&#x5148;&#x9009;&#x62E9;dubbo RPC&#x3002;<br>&#x5728;REST&#x7684;&#x5B9E;&#x73B0;&#x9009;&#x62E9;&#x4E0A;&#xFF0C;&#x4EC5;&#x5C31;&#x6027;&#x80FD;&#x800C;&#x8A00;&#xFF0C;&#x76EE;&#x524D;tomcat7&#x548C;netty&#x6700;&#x4F18;&#xFF08;&#x5F53;&#x7136;&#x76EE;&#x524D;&#x4F7F;&#x7528;&#x7684;jetty&#x548C;netty&#x7248;&#x672C;&#x90FD;&#x8F83;&#x4F4E;&#xFF09;&#x3002;tjws&#x548C;sun http server&#x5728;&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x4E2D;&#x8868;&#x73B0;&#x6781;&#x5DEE;&#xFF0C;&#x5E73;&#x5747;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;200ms&#xFF0C;&#x5E73;&#x5747;tps&#x53EA;&#x6709;50&#x5DE6;&#x53F3;&#xFF08;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x5F71;&#x54CD;&#x56FE;&#x7247;&#x6548;&#x679C;&#xFF0C;&#x6CA1;&#x5728;&#x4E0A;&#x9762;&#x5217;&#x51FA;&#xFF09;&#x3002;<br>&#x5728;REST&#x4E2D;JSON&#x6570;&#x636E;&#x683C;&#x5F0F;&#x6027;&#x80FD;&#x4F18;&#x4E8E;XML&#xFF08;&#x6570;&#x636E;&#x6682;&#x672A;&#x5728;&#x4EE5;&#x4E0A;&#x5217;&#x51FA;&#xFF09;&#x3002;<br>&#x5728;REST&#x4E2D;&#x542F;&#x7528;GZIP&#x5BF9;&#x4F01;&#x4E1A;&#x5185;&#x7F51;&#x4E2D;&#x7684;&#x5C0F;&#x6570;&#x636E;&#x91CF;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x5E2E;&#x52A9;&#x4E0D;&#x5927;&#xFF0C;&#x6027;&#x80FD;&#x53CD;&#x800C;&#x6709;&#x4E0B;&#x964D;&#xFF08;&#x6570;&#x636E;&#x6682;&#x672A;&#x5728;&#x4EE5;&#x4E0A;&#x5217;&#x51FA;&#xFF09;&#x3002;</p>
<h3 id="&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5EFA;&#x8BAE;"><a href="#&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5EFA;&#x8BAE;" class="headerlink" title="&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5EFA;&#x8BAE;"></a>&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5EFA;&#x8BAE;</h3><p>&#x5982;&#x679C;&#x5C06;dubbo REST&#x90E8;&#x7F72;&#x5230;&#x5916;&#x90E8;Tomcat&#x4E0A;&#xFF0C;&#x5E76;&#x914D;&#x7F6E;server=&#x201D;servlet&#x201D;&#xFF0C;&#x5373;&#x542F;&#x7528;&#x5916;&#x90E8;&#x7684;tomcat&#x6765;&#x505A;&#x4E3A;rest server&#x7684;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#xFF0C;&#x5219;&#x6700;&#x597D;&#x5728;tomcat&#x4E0A;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;Connector port=&quot;8080&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span><br><span class="line">               connectionTimeout=&quot;20000&quot;</span><br><span class="line">               redirectPort=&quot;8443&quot;</span><br><span class="line">               minSpareThreads=&quot;20&quot;</span><br><span class="line">               enableLookups=&quot;false&quot;</span><br><span class="line">               maxThreads=&quot;100&quot;</span><br><span class="line">               maxKeepAliveRequests=&quot;-1&quot;</span><br><span class="line">               keepAliveTimeout=&quot;60000&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x7279;&#x522B;&#x662F;maxKeepAliveRequests=&#x201D;-1&#x201D;&#xFF0C;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x4E3B;&#x8981;&#x662F;&#x4FDD;&#x8BC1;tomcat&#x4E00;&#x76F4;&#x542F;&#x7528;http&#x957F;&#x8FDE;&#x63A5;&#xFF0C;&#x4EE5;&#x63D0;&#x9AD8;REST&#x8C03;&#x7528;&#x6027;&#x80FD;&#x3002;&#x4F46;&#x662F;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;REST&#x6D88;&#x8D39;&#x7AEF;&#x4E0D;&#x662F;&#x6301;&#x7EED;&#x7684;&#x8C03;&#x7528;REST&#x670D;&#x52A1;&#xFF0C;&#x5219;&#x4E00;&#x76F4;&#x542F;&#x7528;&#x957F;&#x8FDE;&#x63A5;&#x672A;&#x5FC5;&#x662F;&#x6700;&#x597D;&#x7684;&#x505A;&#x6CD5;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4E00;&#x76F4;&#x542F;&#x7528;&#x957F;&#x8FDE;&#x63A5;&#x7684;&#x65B9;&#x5F0F;&#x4E00;&#x822C;&#x4E0D;&#x9002;&#x5408;&#x9488;&#x5BF9;&#x666E;&#x901A;webapp&#xFF0C;&#x66F4;&#x9002;&#x5408;&#x8FD9;&#x79CD;&#x7C7B;&#x4F3C;rpc&#x7684;&#x573A;&#x666F;&#x3002;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;&#x5728;tomcat&#x4E2D;&#xFF0C;dubbo REST&#x5E94;&#x7528;&#x548C;&#x666E;&#x901A;web&#x5E94;&#x7528;&#x6700;&#x597D;&#x4E0D;&#x8981;&#x6DF7;&#x5408;&#x90E8;&#x7F72;&#xFF0C;&#x800C;&#x5E94;&#x8BE5;&#x7528;&#x5355;&#x72EC;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
<p>TODO more contents to add</p>
<p>&#x6269;&#x5C55;&#x8BA8;&#x8BBA;<br>REST&#x4E0E;Thrift&#x3001;Protobuf&#x7B49;&#x7684;&#x5BF9;&#x6BD4;<br>TODO</p>
<p>REST&#x4E0E;&#x4F20;&#x7EDF;WebServices&#x7684;&#x5BF9;&#x6BD4;TODO</p>
<p>JAX-RS&#x4E0E;Spring MVC&#x7684;&#x5BF9;&#x6BD4;<br>&#x521D;&#x6B65;&#x770B;&#x6CD5;&#xFF0C;&#x6458;&#x81EA;<a href="/external_links/ee8a6ff82dc3c3c537b89dab16e4fb8e.html" target="blank" rel="noopener">www.infoq.com/cn/news/&#x2026;</a></p>
<blockquote>
<p>&#x8C22;&#x8C22;&#xFF0C;&#x5BF9;&#x4E8E;jax-rs&#x548C;spring mvc&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x5BF9;spring mvc&#x7684;rest&#x652F;&#x6301;&#x8FD8;&#x6CA1;&#x6709;&#x592A;&#x6DF1;&#x5165;&#x7684;&#x770B;&#x8FC7;&#xFF0C;&#x8BF4;&#x70B9;&#x521D;&#x6B65;&#x60F3;&#x6CD5;&#xFF0C;&#x8BF7;&#x5927;&#x5BB6;&#x6307;&#x6B63;&#xFF1A;</p>
<p>spring mvc&#x4E5F;&#x652F;&#x6301;annotation&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5176;&#x5B9E;&#x548C;jax-rs&#x770B;&#x8D77;&#x6765;&#x662F;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x7C7B;&#x4F3C;&#x7684;&#x3002;</p>
<p>&#x6211;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;spring mvc&#x76F8;&#x5BF9;&#x66F4;&#x9002;&#x5408;&#x4E8E;&#x9762;&#x5411;web&#x5E94;&#x7528;&#x7684;restful&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;&#x88AB;AJAX&#x8C03;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x8F93;&#x51FA;HTML&#x4E4B;&#x7C7B;&#x7684;&#xFF0C;&#x5E94;&#x7528;&#x4E2D;&#x8FD8;&#x6709;&#x9875;&#x9762;&#x8DF3;&#x8F6C;&#x6D41;&#x7A0B;&#x4E4B;&#x7C7B;&#xFF0C;spring mvc&#x65E2;&#x53EF;&#x4EE5;&#x505A;&#x597D;&#x6B63;&#x5E38;&#x7684;web&#x9875;&#x9762;&#x8BF7;&#x6C42;&#x4E5F;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x5904;&#x7406;rest&#x8BF7;&#x6C42;&#x3002;&#x4F46;&#x603B;&#x7684;&#x6765;&#x8BF4;&#x8FD9;&#x4E2A;restful&#x670D;&#x52A1;&#x662F;&#x5728;&#x5C55;&#x73B0;&#x5C42;&#x6216;&#x8005;&#x53EB;web&#x5C42;&#x4E4B;&#x7C7B;&#x5B9E;&#x73B0;&#x7684;</p>
<p>&#x800C;jax-rs&#x76F8;&#x5BF9;&#x66F4;&#x9002;&#x5408;&#x7EAF;&#x7CB9;&#x7684;&#x670D;&#x52A1;&#x5316;&#x5E94;&#x7528;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4F20;&#x7EDF;Java EE&#x4E2D;&#x6240;&#x8BF4;&#x7684;&#x4E2D;&#x95F4;&#x5C42;&#x670D;&#x52A1;&#xFF0C;&#x6BD4;&#x5982;&#x5B83;&#x53EF;&#x4EE5;&#x628A;&#x4F20;&#x7EDF;&#x7684;EJB&#x53D1;&#x5E03;&#x6210;restful&#x670D;&#x52A1;&#x3002;&#x5728;spring&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x4E5F;&#x5C31;&#x628A;spring&#x4E2D;&#x5145;&#x5F53;service&#x4E4B;&#x7C7B;&#x7684;bean&#x76F4;&#x63A5;&#x53D1;&#x5E03;&#x6210;restful&#x670D;&#x52A1;&#x3002;&#x603B;&#x7684;&#x6765;&#x8BF4;&#x8FD9;&#x4E2A;restful&#x670D;&#x52A1;&#x662F;&#x5728;&#x4E1A;&#x52A1;&#x3001;&#x5E94;&#x7528;&#x5C42;&#x6216;&#x8005;facade&#x5C42;&#x3002;&#x800C;MVC&#x5C42;&#x6B21;&#x548C;&#x6982;&#x5FF5;&#x5728;&#x8FD9;&#x79CD;&#x505A;&#x6BD4;&#x5982;&#xFF08;&#x540E;&#x53F0;&#xFF09;&#x670D;&#x52A1;&#x5316;&#x7684;&#x5E94;&#x7528;&#x4E2D;&#x901A;&#x5E38;&#x662F;&#x6CA1;&#x6709;&#x591A;&#x5927;&#x4EF7;&#x503C;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x7136;jax-rs&#x7684;&#x6709;&#x4E9B;&#x5B9E;&#x73B0;&#x6BD4;&#x5982;jersey&#xFF0C;&#x4E5F;&#x8BD5;&#x56FE;&#x63D0;&#x4F9B;mvc&#x652F;&#x6301;&#xFF0C;&#x4EE5;&#x66F4;&#x597D;&#x7684;&#x9002;&#x5E94;&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#x7684;web&#x5E94;&#x7528;&#xFF0C;&#x4F46;&#x5E94;&#x8BE5;&#x662F;&#x4E0D;&#x5982;spring mvc&#x3002;</p>
<p>&#x5728;dubbo&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6211;&#x60F3;&#x5F88;&#x591A;&#x4EBA;&#x90FD;&#x6BD4;&#x8F83;&#x559C;&#x6B22;&#x76F4;&#x63A5;&#x5C06;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x7684;spring service bean&#xFF08;&#x6216;&#x8005;&#x53EB;manager&#x4E4B;&#x7C7B;&#x7684;&#xFF09;&#x5B8C;&#x5168;&#x900F;&#x660E;&#x7684;&#x53D1;&#x5E03;&#x6210;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#xFF0C;&#x5219;&#x8FD9;&#x91CC;&#x7528;JAX-RS&#x662F;&#x66F4;&#x81EA;&#x7136;&#x66F4;&#x76F4;&#x63A5;&#x7684;&#xFF0C;&#x4E0D;&#x5FC5;&#x989D;&#x5916;&#x7684;&#x5F15;&#x5165;MVC&#x6982;&#x5FF5;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5148;&#x4E0D;&#x8BA8;&#x8BBA;&#x900F;&#x660E;&#x53D1;&#x5E03;&#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x662F;&#x4E0D;&#x662F;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#xFF0C;&#x8981;&#x4E0D;&#x8981;&#x6DFB;&#x52A0;facade&#x4E4B;&#x7C7B;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x77E5;&#x9053;&#x5728;dubbo&#x4E0D;&#x652F;&#x6301;rest&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5F88;&#x591A;&#x670B;&#x53CB;&#x91C7;&#x7528;&#x7684;&#x67B6;&#x6784;&#x662F;spring mvc restful&#x8C03;&#x7528;dubbo (spring) service&#x6765;&#x53D1;&#x5E03;restful&#x670D;&#x52A1;&#x7684;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6211;&#x89C9;&#x5F97;&#x4E5F;&#x975E;&#x5E38;&#x597D;&#xFF0C;&#x53EA;&#x662F;&#x5982;&#x679C;&#x4E0D;&#x4FEE;&#x6539;spring mvc&#x5E76;&#x5C06;&#x5176;&#x4E0E;dubbo&#x6DF1;&#x5EA6;&#x96C6;&#x6210;&#xFF0C;restful&#x670D;&#x52A1;&#x4E0D;&#x80FD;&#x50CF;dubbo&#x4E2D;&#x7684;&#x5176;&#x4ED6;&#x8FDC;&#x7A0B;&#x8C03;&#x7528;&#x534F;&#x8BAE;&#x6BD4;&#x5982;webservices&#x3001;dubbo rpc&#x3001;hessian&#x7B49;&#x7B49;&#x90A3;&#x6837;&#xFF0C;&#x4EAB;&#x53D7;&#x8BF8;&#x591A;&#x9AD8;&#x7EA7;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x6CE8;&#x518C;&#x5230;dubbo&#x7684;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#xFF0C;&#x901A;&#x8FC7;dubbo&#x76D1;&#x63A7;&#x4E2D;&#x5FC3;&#x76D1;&#x63A7;&#x5176;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x3001;TPS&#x3001;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x4E4B;&#x7C7B;&#xFF0C;&#x901A;&#x8FC7;dubbo&#x7684;&#x7EDF;&#x4E00;&#x7684;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x63A7;&#x5236;&#x5176;&#x6BD4;&#x5982;&#x7EBF;&#x7A0B;&#x6C60;&#x5927;&#x5C0F;&#x3001;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x7B49;&#x7B49;&#xFF0C;&#x901A;&#x8FC7;dubbo&#x7EDF;&#x4E00;&#x65B9;&#x5F0F;&#x505A;&#x670D;&#x52A1;&#x6D41;&#x91CF;&#x63A7;&#x5236;&#x3001;&#x6743;&#x9650;&#x63A7;&#x5236;&#x3001;&#x9891;&#x6B21;&#x63A7;&#x5236;&#x3002;&#x53E6;&#x5916;spring<br> mvc&#x4EC5;&#x4EC5;&#x8D1F;&#x8D23;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x800C;&#x5728;&#x6D88;&#x8D39;&#x7AEF;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x7528;spring restTemplate&#xFF0C;&#x5982;&#x679C;restTemplate&#x4E0D;&#x548C;dubbo&#x96C6;&#x6210;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x50CF;dubbo&#x670D;&#x52A1;&#x5BA2;&#x6237;&#x7AEF;&#x90A3;&#x6837;&#x81EA;&#x52A8;&#x6216;&#x8005;&#x4EBA;&#x5DE5;&#x5E72;&#x9884;&#x505A;&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x3002;&#x5982;&#x679C;&#x670D;&#x52A1;&#x7AEF;&#x6D88;&#x8D39;&#x7AEF;&#x90FD;&#x662F;dubbo&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x8FC7;spring&#x7684;rest&#x4EA4;&#x4E92;&#xFF0C;&#x5982;&#x679C;spring rest&#x4E0D;&#x6DF1;&#x5EA6;&#x6574;&#x5408;dubbo&#xFF0C;&#x5219;&#x4E0D;&#x80FD;&#x7528;dubbo&#x7EDF;&#x4E00;&#x7684;&#x8DEF;&#x7531;&#x5206;&#x6D41;&#x7B49;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E9B;&#x4E1C;&#x897F;&#x4E0D;&#x5FC5;&#x8981;&#x975E;&#x6B64;&#x5373;&#x5F7C;&#x7684;&#x3002;&#x6211;&#x542C;&#x8BF4;spring&#x521B;&#x59CB;&#x4EBA;rod johnson&#x603B;&#x662F;&#x7231;&#x8BF4;&#x4E00;&#x53E5;&#x8BDD;&#xFF0C;the customer is always right&#xFF0C;&#x5176;&#x5B9E;&#x4E0E;&#x5176;&#x975E;&#x8981;&#x63A2;&#x8BA8;&#x54EA;&#x79CD;&#x65B9;&#x5F0F;&#x66F4;&#x597D;&#xFF0C;&#x4E0D;&#x5982;&#x540C;&#x65F6;&#x652F;&#x6301;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#x5C31;&#x662F;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x539F;&#x6765;&#x5728;&#x6587;&#x6863;&#x4E2D;&#x4E5F;&#x5199;&#x8FC7;&#x8BA1;&#x5212;&#x652F;&#x6301;spring rest annoation&#xFF0C;&#x53EA;&#x662F;&#x4E0D;&#x77E5;&#x9053;&#x5177;&#x4F53;&#x53EF;&#x884C;&#x6027;&#x6709;&#x591A;&#x9AD8;&#x3002;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/32e24ba0363c5f515812229746a86c26.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513600819207.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513600819207.html" itemprop="url">spring security ajax登录及返回</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T11:13:42+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x5E8F;"><a href="#&#x5E8F;" class="headerlink" title="&#x5E8F;"></a>&#x5E8F;</h2><p>&#x672C;&#x6587;&#x8BB2;&#x8FF0;&#x4E00;&#x4E0B;&#x5982;&#x4F55;&#x81EA;&#x5B9A;&#x4E49;spring security&#x7684;&#x767B;&#x5F55;&#x9875;&#xFF0C;&#x7F51;&#x4E0A;&#x7ED9;&#x7684;&#x8D44;&#x6599;&#x5927;&#x591A;&#x8FC7;&#x65F6;&#xFF0C;&#x800C;&#x4E14;&#x662F;&#x57FA;&#x4E8E;&#x540E;&#x7AEF;&#x6A21;&#x677F;&#x6280;&#x672F;&#x7684;&#xFF0C;&#x8BB2;&#x7684;&#x4E0D;&#x662F;&#x592A;&#x6E05;&#x6670;&#xFF0C;&#x672C;&#x6587;&#x7ED9;&#x51FA;&#x4E00;&#x4E2A;&#x91C7;&#x7528;ajax&#x7684;&#x767B;&#x5F55;&#x53CA;&#x8FD4;&#x56DE;&#x7684;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x65B9;&#x5F0F;&#x3002;</p>
<h2 id="ajax&#x8FD4;&#x56DE;"><a href="#ajax&#x8FD4;&#x56DE;" class="headerlink" title="ajax&#x8FD4;&#x56DE;"></a>ajax&#x8FD4;&#x56DE;</h2><blockquote>
<p>&#x603B;&#x5171;&#x9700;&#x8981;&#x5904;&#x7406;3&#x4E2A;&#x5730;&#x65B9;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5F02;&#x5E38;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x9700;&#x8981;&#x517C;&#x5BB9;ajax&#x8BF7;&#x6C42;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6210;&#x529F;&#x8FD4;&#x56DE;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5931;&#x8D25;&#x8FD4;&#x56DE;&#x7684;&#x5904;&#x7406;&#x3002;</p>
</blockquote>
<h3 id="ajax&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;"><a href="#ajax&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;" class="headerlink" title="ajax&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;"></a>ajax&#x7684;&#x5F02;&#x5E38;&#x5904;&#x7406;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class UnauthorizedEntryPoint implements AuthenticationEntryPoint {</span><br><span class="line">    @Override</span><br><span class="line">    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {</span><br><span class="line">        if(isAjaxRequest(request)){</span><br><span class="line">            response.sendError(HttpServletResponse.SC_UNAUTHORIZED,authException.getMessage());</span><br><span class="line">        }else{</span><br><span class="line">            response.sendRedirect(&quot;/login.html&quot;);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static boolean isAjaxRequest(HttpServletRequest request) {</span><br><span class="line">        String ajaxFlag = request.getHeader(&quot;X-Requested-With&quot;);</span><br><span class="line">        return ajaxFlag != null &amp;&amp; &quot;XMLHttpRequest&quot;.equals(ajaxFlag);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x6210;&#x529F;&#x53CA;&#x5931;&#x8D25;&#x7684;ajax&#x8FD4;&#x56DE;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7B80;&#x5355;&#x5904;&#x7406;&#xFF0C;&#x53EA;&#x8FD4;&#x56DE;statusCode</p>
<h3 id="AjaxAuthSuccessHandler"><a href="#AjaxAuthSuccessHandler" class="headerlink" title="AjaxAuthSuccessHandler"></a>AjaxAuthSuccessHandler</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class AjaxAuthSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {</span><br><span class="line">    @Override</span><br><span class="line">    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {</span><br><span class="line">        response.setStatus(HttpServletResponse.SC_OK);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="AjaxAuthFailHandler"><a href="#AjaxAuthFailHandler" class="headerlink" title="AjaxAuthFailHandler"></a>AjaxAuthFailHandler</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class AjaxAuthFailHandler extends SimpleUrlAuthenticationFailureHandler {</span><br><span class="line">    @Override</span><br><span class="line">    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException {</span><br><span class="line">        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Authentication failed&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="security&#x914D;&#x7F6E;"><a href="#security&#x914D;&#x7F6E;" class="headerlink" title="security&#x914D;&#x7F6E;"></a>security&#x914D;&#x7F6E;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">@EnableWebSecurity</span><br><span class="line">public class SecurityConfig extends WebSecurityConfigurerAdapter {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void configure(HttpSecurity http) throws Exception {</span><br><span class="line">        http</span><br><span class="line">                .exceptionHandling().authenticationEntryPoint(new UnauthorizedEntryPoint())</span><br><span class="line">                .and()</span><br><span class="line">                .csrf().disable()</span><br><span class="line">                .authorizeRequests()</span><br><span class="line">                .antMatchers(&quot;/login&quot;,&quot;/css/**&quot;, &quot;/js/**&quot;,&quot;/fonts/**&quot;).permitAll()</span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">                .formLogin()</span><br><span class="line">                .loginPage(&quot;/login.html&quot;)</span><br><span class="line">                .loginProcessingUrl(&quot;/login&quot;)</span><br><span class="line">                .usernameParameter(&quot;name&quot;)</span><br><span class="line">                .passwordParameter(&quot;password&quot;)</span><br><span class="line">                .successHandler(new AjaxAuthSuccessHandler())</span><br><span class="line">                .failureHandler(new AjaxAuthFailHandler())</span><br><span class="line">                .permitAll()</span><br><span class="line">                .and()</span><br><span class="line">                .logout()</span><br><span class="line">                .logoutUrl(&quot;/logout&quot;)</span><br><span class="line">                .permitAll();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {</span><br><span class="line">        auth</span><br><span class="line">                .inMemoryAuthentication()</span><br><span class="line">                .withUser(&quot;admin&quot;).password(&quot;admin&quot;).roles(&quot;USER&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x8FD9;&#x91CC;&#x6709;&#x51E0;&#x4E2A;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#xFF1A;</p>
</blockquote>
<ul>
<li>permitAll</li>
</ul>
<p>&#x8FD9;&#x91CC;&#x8981;&#x6DFB;&#x52A0;&#x524D;&#x7AEF;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#xFF0C;&#x4EE5;&#x53CA;&#x767B;&#x9646;&#x8868;&#x5355;&#x8BF7;&#x6C42;&#x7684;&#x63A5;&#x53E3;&#x5730;&#x5740;/login</p>
<ul>
<li>loginPage</li>
</ul>
<p>&#x8FD9;&#x91CC;&#x8BBE;&#x7F6E;&#x767B;&#x5F55;&#x9875;&#x9762;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7528;&#x9759;&#x6001;&#x9875;&#x9762;&#xFF0C;&#x5373;static&#x76EE;&#x5F55;&#x4E0B;&#x7684;login.html</p>
<ul>
<li>ajax&#x914D;&#x7F6E;</li>
</ul>
<p>&#x5C06;authenticationEntryPoint&#xFF0C;successHandler&#xFF0C;failureHandler&#x8BBE;&#x7F6E;&#x4E3A;&#x4E0A;&#x9762;&#x81EA;&#x5B9A;&#x4E49;&#x7684;ajax&#x5904;&#x7406;&#x7C7B;</p>
<h2 id="&#x767B;&#x5F55;&#x9875;&#x9762;"><a href="#&#x767B;&#x5F55;&#x9875;&#x9762;" class="headerlink" title="&#x767B;&#x5F55;&#x9875;&#x9762;"></a>&#x767B;&#x5F55;&#x9875;&#x9762;</h2><blockquote>
<p>&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x7EAF;&#x7CB9;&#x7684;html&#x9875;&#x9762;&#xFF0C;&#x5176;&#x4E2D;&#x767B;&#x5F55;&#x6309;&#x94AE;&#x7684;ajax&#x8BF7;&#x6C42;&#x5982;&#x4E0B;&#xFF1A;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;$.ajax({</span><br><span class="line">            url: &apos;/login&apos;,</span><br><span class="line">            type: &apos;POST&apos;,</span><br><span class="line">            data: &quot;name=&quot;+name+&quot;&amp;password=&quot;+password,</span><br><span class="line">            success: function (res, status) {</span><br><span class="line">                window.location.href=&apos;/ok.html&apos;</span><br><span class="line">            },</span><br><span class="line">            error: function (res, status) {</span><br><span class="line">                dangerDialog(res.statusText);</span><br><span class="line">            }</span><br><span class="line">        });</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x8FD9;&#x91CC;&#x662F;&#x8BF7;&#x6C42;/login&#xFF0C;&#x4E5F;&#x5C31;&#x662F;spring security&#x4F1A;&#x9ED8;&#x8BA4;&#x62E6;&#x622A;&#x7684;&#x8DEF;&#x5F84;&#xFF0C;&#x4E0D;&#x4E86;&#x89E3;spring security&#x7684;&#x4EBA;&#x53EF;&#x80FD;&#x4F1A;&#x7EB3;&#x95F7;&#xFF0C;&#x6211;&#x8BF7;&#x6C42;&#x8FD9;&#x4E2A;&#x8DEF;&#x5F84;&#xFF0C;&#x4F46;&#x662F;&#x5DE5;&#x7A0B;&#x91CC;&#x5934;&#x6CA1;&#x6709;&#x5B9A;&#x4E49;/login&#x7684;request mapping&#xFF0C;&#x4E0D;&#x8981;&#x7D27;&#x4E48;&#x3002;&#x4E0B;&#x9762;&#x6765;&#x5256;&#x6790;&#x4E00;&#x4E0B;&#x3002;</p>
</blockquote>
<h2 id="spring-security&#x5185;&#x7F6E;&#x7684;&#x5404;&#x79CD;filter&#xFF1A;"><a href="#spring-security&#x5185;&#x7F6E;&#x7684;&#x5404;&#x79CD;filter&#xFF1A;" class="headerlink" title="spring security&#x5185;&#x7F6E;&#x7684;&#x5404;&#x79CD;filter&#xFF1A;"></a>spring security&#x5185;&#x7F6E;&#x7684;&#x5404;&#x79CD;filter&#xFF1A;</h2><table>
<thead>
<tr>
<th>Alias</th>
<th>Filter Class</th>
<th>Namespace Element or Attribute</th>
</tr>
</thead>
<tbody><tr>
<td>CHANNEL_FILTER</td>
<td>ChannelProcessingFilter</td>
<td>http/intercept-url@requires-channel</td>
</tr>
<tr>
<td>SECURITY_CONTEXT_FILTER</td>
<td>SecurityContextPersistenceFilter</td>
<td>http</td>
</tr>
<tr>
<td>CONCURRENT_SESSION_FILTER</td>
<td>ConcurrentSessionFilter</td>
<td>session-management/concurrency-control</td>
</tr>
<tr>
<td>HEADERS_FILTER</td>
<td>HeaderWriterFilter</td>
<td>http/headers</td>
</tr>
<tr>
<td>CSRF_FILTER</td>
<td>CsrfFilter</td>
<td>http/csrf</td>
</tr>
<tr>
<td>LOGOUT_FILTER</td>
<td>LogoutFilter</td>
<td>http/logout</td>
</tr>
<tr>
<td>X509_FILTER</td>
<td>X509AuthenticationFilter</td>
<td>http/x509</td>
</tr>
<tr>
<td>PRE_AUTH_FILTER</td>
<td>AbstractPreAuthenticatedProcessingFilter Subclasses</td>
<td>N/A</td>
</tr>
<tr>
<td>CAS_FILTER</td>
<td>CasAuthenticationFilter</td>
<td>N/A</td>
</tr>
<tr>
<td>FORM_LOGIN_FILTER</td>
<td>UsernamePasswordAuthenticationFilter</td>
<td>http/form-login</td>
</tr>
<tr>
<td>BASIC_AUTH_FILTER</td>
<td>BasicAuthenticationFilter</td>
<td>http/http-basic</td>
</tr>
<tr>
<td>SERVLET_API_SUPPORT_FILTER</td>
<td>SecurityContextHolderAwareRequestFilter</td>
<td>http/@servlet-api-provision</td>
</tr>
<tr>
<td>JAAS_API_SUPPORT_FILTER</td>
<td>JaasApiIntegrationFilter</td>
<td>http/@jaas-api-provision</td>
</tr>
<tr>
<td>REMEMBER_ME_FILTER</td>
<td>RememberMeAuthenticationFilter</td>
<td>http/remember-me</td>
</tr>
<tr>
<td>ANONYMOUS_FILTER</td>
<td>AnonymousAuthenticationFilter</td>
<td>http/anonymous</td>
</tr>
<tr>
<td>SESSION_MANAGEMENT_FILTER</td>
<td>SessionManagementFilter</td>
<td>session-management</td>
</tr>
<tr>
<td>EXCEPTION_TRANSLATION_FILTER</td>
<td>ExceptionTranslationFilter</td>
<td>http</td>
</tr>
<tr>
<td>FILTER_SECURITY_INTERCEPTOR</td>
<td>FilterSecurityInterceptor</td>
<td>http</td>
</tr>
<tr>
<td>SWITCH_USER_FILTER</td>
<td>SwitchUserFilter</td>
<td>N/A</td>
</tr>
</tbody></table>
<blockquote>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x5173;&#x6CE8;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;UsernamePasswordAuthenticationFilter&#xFF0C;&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5B83;&#x662F;filter&#xFF0C;&#x5728;&#x6267;&#x884C;/login&#x8BF7;&#x6C42;&#x7684;&#x65F6;&#x5019;&#x62E6;&#x622A;&#xFF0C;&#x56E0;&#x800C;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x5DE5;&#x7A0B;&#x91CC;&#x5934;&#x53BB;&#x5B9A;&#x4E49;login&#x7684;request mapping&#x7684;&#x3002;</p>
</blockquote>
<h2 id="UsernamePasswordAuthenticationFilter"><a href="#UsernamePasswordAuthenticationFilter" class="headerlink" title="UsernamePasswordAuthenticationFilter"></a>UsernamePasswordAuthenticationFilter</h2><p>spring-security-web-4.2.3.RELEASE-sources.jar!/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;public class UsernamePasswordAuthenticationFilter extends</span><br><span class="line">        AbstractAuthenticationProcessingFilter {</span><br><span class="line"></span><br><span class="line">public Authentication attemptAuthentication(HttpServletRequest request,</span><br><span class="line">            HttpServletResponse response) throws AuthenticationException {</span><br><span class="line">        if (postOnly &amp;&amp; !request.getMethod().equals(&quot;POST&quot;)) {</span><br><span class="line">            throw new AuthenticationServiceException(</span><br><span class="line">                    &quot;Authentication method not supported: &quot; + request.getMethod());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        String username = obtainUsername(request);</span><br><span class="line">        String password = obtainPassword(request);</span><br><span class="line"></span><br><span class="line">        if (username == null) {</span><br><span class="line">            username = &quot;&quot;;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        if (password == null) {</span><br><span class="line">            password = &quot;&quot;;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        username = username.trim();</span><br><span class="line"></span><br><span class="line">        UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(</span><br><span class="line">                username, password);</span><br><span class="line"></span><br><span class="line">        // Allow subclasses to set the &quot;details&quot; property</span><br><span class="line">        setDetails(request, authRequest);</span><br><span class="line"></span><br><span class="line">        return this.getAuthenticationManager().authenticate(authRequest);</span><br><span class="line">    }</span><br><span class="line">    //......</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x8FD9;&#x91CC;&#x5C31;&#x662F;&#x62E6;&#x622A;&#xFF0C;&#x83B7;&#x53D6;login.html&#x63D0;&#x4EA4;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x4EA4;&#x7ED9;authenticationManager&#x53BB;&#x8BA4;&#x8BC1;&#x3002;&#x4E4B;&#x540E;&#x5C31;&#x662F;&#x8D70;&#x540E;&#x7EED;&#x7684;filter&#xFF0C;&#x5982;&#x679C;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x4F1A;&#x8FDB;&#x884C;&#x76F8;&#x5E94;&#x7684;session&#x914D;&#x7F6E;&#x3002;</p>
</blockquote>
<h2 id="doc"><a href="#doc" class="headerlink" title="doc"></a>doc</h2><ul>
<li><a href="/external_links/bbd04bed528ffe10433b2a55cde55fa5.html" target="blank" rel="noopener">spring security&#x52A8;&#x6001;&#x914D;&#x7F6E;url&#x6743;&#x9650;</a></li>
<li><a href="/external_links/f735cd326148aac9bcd558839e67054a.html" target="blank" rel="noopener">Spring Security&#x7B14;&#x8BB0;&#xFF1A;&#x81EA;&#x5B9A;&#x4E49;Login/Logout Filter&#x3001;AuthenticationProvider&#x3001;AuthenticationToken</a></li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/41351a28f0f04322c0232507d23c2de3.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513575833608.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513575833608.html" itemprop="url">Apache Pulsar中的地域复制，第2篇：模式和实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-24T10:19:47+08:00">
                2017-11-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;<a href="/external_links/79a582842ea4035dfc0d1200ed786598.html" target="blank" rel="noopener">&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</a>&#x4E2D;&#xFF0C;&#x66FE;&#x7ECF;&#x6982;&#x62EC;&#x4ECB;&#x7ECD;&#x4E86;<a href="/external_links/49aea8833530b41db5f480c17792ab50.html" target="blank" rel="noopener">Apache Pulsar</a>&#x7684;&#x5730;&#x57DF;&#x590D;&#x5236;&#x529F;&#x80FD;&#x3002;Apache Pulsar&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Apache BookKeeper&#x63D0;&#x4F9B;&#x7684;&#x53EF;&#x4F38;&#x7F29;&#x6D41;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x53EF;&#x8DE8;&#x8D8A;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x540C;&#x65F6;&#x652F;&#x6301;&#x540C;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#xFF08;&#x501F;&#x52A9;Apache<br> BookKeeper&#xFF09;&#x548C;&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#xFF08;&#x5728;Pulsar Broker&#x7684;&#x5C42;&#x9762;&#x4E0A;&#x914D;&#x7F6E;&#xFF09;&#x7684;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;&#x3002;&#x672C;&#x6587;&#x5C06;&#x4ECB;&#x7ECD;&#x8DE8;&#x8D8A;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x914D;&#x7F6E;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x51E0;&#x79CD;&#x5E38;&#x89C1;&#x6A21;&#x5F0F;&#x3002;</p>
<h2 id="&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7B80;&#x4ECB;"><a href="#&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7B80;&#x4ECB;" class="headerlink" title="&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7B80;&#x4ECB;"></a>&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7B80;&#x4ECB;</h2><p>&#x9996;&#x5148;&#x60F3;&#x7B80;&#x8981;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;Apache Pulsar&#x4E2D;&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x3002;&#x56FE;1&#x5C55;&#x793A;&#x4E86;&#x5728;3&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x4E3A;Apache Pulsar&#x914D;&#x7F6E;&#x7684;&#x5168;&#x8FDE;&#x63A5;&#xFF08;Full-mesh&#xFF09;&#x5730;&#x57DF;&#x590D;&#x5236;&#x3002;</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/11/24/15febd30881357da~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt><br> &#x56FE;1&#xFF1A;&#x4E09;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x4E3A;Apache<br> Pulsar&#x914D;&#x7F6E;&#x7684;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;</p>
<p>&#x5728;&#x4E0A;&#x56FE;&#x4E2D;&#xFF0C;&#x65E0;&#x8BBA;&#x751F;&#x4EA7;&#x65B9;&#xFF08;Producer&#xFF09;<strong>P1</strong>&#x3001;<strong>P2</strong>&#x548C;<strong>P3</strong>&#x5728;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5206;&#x522B;&#x5C06;&#x6D88;&#x606F;&#x53D1;&#x5E03;&#x7ED9;<strong>Cluster A</strong>&#x3001;<strong>Cluster B</strong>&#x548C;<strong>Cluster C</strong>&#x4E2D;&#x7684;&#x4E3B;&#x9898;<strong>T1</strong>&#xFF0C;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x5747;&#x4F1A;&#x7ACB;&#x523B;&#x590D;&#x5236;&#x5230;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x3002;&#x4E00;&#x65E6;&#x5B8C;&#x6210;&#x590D;&#x5236;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#xFF08;Consumer&#xFF09;<strong>C1</strong>&#x548C;<strong>C2</strong>&#x5373;&#x53EF;&#x4ECE;&#x81EA;&#x5DF1;&#x6240;&#x5728;&#x7684;&#x96C6;&#x7FA4;&#x6D88;&#x8017;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x3002;</p>
<p>Pulsar&#x4E2D;&#x7684;&#x5730;&#x57DF;&#x590D;&#x5236;&#x53EF;&#x9488;&#x5BF9;<a href="/external_links/47e8c25ad79759ab92f0a608d81315c3.html" target="blank" rel="noopener">&#x6BCF;&#x4E2A;&#x79DF;&#x6237;</a>&#x542F;&#x7528;&#xFF0C;&#x4F46;&#x53EA;&#x6709;&#x5728;&#x79DF;&#x6237;&#x80FD;&#x8BBF;&#x95EE;&#x6240;&#x6709;&#x96C6;&#x7FA4;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x624D;&#x80FD;&#x5728;&#x8FD9;&#x4E9B;&#x96C6;&#x7FA4;&#x4E4B;&#x95F4;&#x542F;&#x7528;&#x5730;&#x57DF;&#x590D;&#x5236;&#x3002;&#x590D;&#x5236;&#x662F;&#x5728;<a href="/external_links/47e8c25ad79759ab92f0a608d81315c3.html" target="blank" rel="noopener">&#x540D;&#x79F0;&#x7A7A;&#x95F4;</a>&#x7684;&#x5C42;&#x9762;&#x4E0A;&#x7BA1;&#x7406;&#x7684;&#xFF0C;&#x501F;&#x6B64;&#x5373;&#x53EF;&#x5728;&#x79DF;&#x6237;&#x80FD;&#x591F;&#x8BBF;&#x95EE;&#x7684;&#x4E24;&#x4E2A;&#x6216;&#x66F4;&#x591A;&#x5DF2;&#x914D;&#x7F6E;&#x7684;&#x96C6;&#x7FA4;&#x4E2D;&#x521B;&#x5EFA;&#x5E76;&#x914D;&#x7F6E;&#x8981;&#x590D;&#x5236;&#x7684;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x3002;&#x968F;&#x540E;&#xFF0C;&#x53D1;&#x5E03;&#x5230;&#x8FD9;&#x79CD;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x5185;&#x4EFB;&#x4F55;&#x4E3B;&#x9898;&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x90FD;&#x4F1A;&#x590D;&#x5236;&#x5230;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x6240;&#x6709;&#x96C6;&#x7FA4;&#x4E2D;&#x3002;</p>
<h2 id="3&#x4E2A;&#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;"><a href="#3&#x4E2A;&#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;" class="headerlink" title="3&#x4E2A;&#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;"></a>3&#x4E2A;&#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;</h2><p>&#x53EA;&#x9700;&#x8981;&#x51E0;&#x6761;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x8F7B;&#x677E;&#x5730;&#x5728;Apache Pulsar&#x4E2D;&#x542F;&#x7528;&#x5730;&#x57DF;&#x590D;&#x5236;&#xFF08;&#x4E0E;&#x73B0;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;&#x622A;&#x7136;&#x4E0D;&#x540C;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x989D;&#x5916;&#x7684;&#x590D;&#x5236;&#x7A0B;&#x5E8F;&#x6216;&#x955C;&#x50CF;&#x7A0B;&#x5E8F;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x5730;&#x57DF;&#x590D;&#x5236;&#xFF09;&#x3002;&#x4E0B;&#x6587;&#x5C06;&#x5C1D;&#x8BD5;&#x5728;Pulsar&#x96C6;&#x7FA4;&#x4E4B;&#x95F4;&#x914D;&#x7F6E;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6709;&#x4E09;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF1A;<code>us-west</code>&#x3001;<code>eu-central</code>&#x548C;<code>apac-australia</code>&#x3002;&#x5F00;&#x59CB;&#x64CD;&#x4F5C;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x5728;Pulsar&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8D44;&#x4EA7;&#xFF08;&#x79DF;&#x6237;&#xFF09;&#xFF0C;&#x5E76;&#x4E3A;&#x8BE5;&#x79DF;&#x6237;&#x63D0;&#x4F9B;&#x8BBF;&#x95EE;&#x6240;&#x6709;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684;&#x6743;&#x9650;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__$ bin/pulsar-admin properties create my-property \</span><br><span class="line">--admin-roles my-admin-role \</span><br><span class="line">--allowed-clusters us-west,eu-central,apac-australia__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__</span><br></pre></td></tr></table></figure>

<p>&#x968F;&#x540E;&#x5373;&#x53EF;&#x9488;&#x5BF9;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x914D;&#x7F6E;&#x590D;&#x5236;&#x3002;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<code>full-mesh</code>&#x7684;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__$ bin/pulsar-admin namespaces create my-property/global/full-mesh__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__</span><br></pre></td></tr></table></figure>

<p>&#x521B;&#x5EFA;&#x540E;&#x7684;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x5E76;&#x672A;&#x5206;&#x914D;&#x7ED9;&#x4EFB;&#x4F55;&#x96C6;&#x7FA4;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x5176;&#x5206;&#x914D;&#x7ED9;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x96C6;&#x7FA4;&#xFF0C;&#x4E3A;&#x6B64;&#x53EF;&#x4F7F;&#x7528;<code>set-clusters</code>&#x547D;&#x4EE4;&#x3002;&#x4E0B;&#x5217;&#x547D;&#x4EE4;&#x53EF;&#x5C06;&#x8BE5;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x5206;&#x914D;&#x7ED9;&#x5168;&#x90E8;&#x7684;&#x4E09;&#x4E2A;&#x53EF;&#x7528;&#x96C6;&#x7FA4;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__$ bin/pulsar-admin namespaces set-clusters my-property/global/full-mesh \</span><br><span class="line">--clusters us-west,eu-central,apac-australia__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x5B8C;&#x8FD9;&#x4E09;&#x6761;&#x547D;&#x4EE4;&#x540E;&#xFF0C;&#x4E09;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x5C31;&#x5EFA;&#x7ACB;&#x4E86;&#x5168;&#x8FDE;&#x63A5;&#x7684;&#x5730;&#x57DF;&#x590D;&#x5236;&#x3002;&#x968F;&#x540E;&#xFF0C;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x5185;&#x4EA7;&#x751F;&#x7684;&#x6D88;&#x606F;&#x90FD;&#x53EF;&#x81EA;&#x52A8;&#x590D;&#x5236;&#x5230;&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4EE5;&#x4F9B;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5982;&#x679C;&#x968F;&#x540E;&#x9700;&#x8981;&#x66F4;&#x6539;&#x590D;&#x5236;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F8B;&#x5982;&#x516C;&#x53F8;&#x5EFA;&#x6210;&#x4E86;&#x7B2C;&#x56DB;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x6216;&#x5173;&#x95ED;&#x4E86;&#x67D0;&#x4E2A;&#x73B0;&#x6709;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x968F;&#x65F6;&#x66F4;&#x6539;&#x590D;&#x5236;&#x8BBE;&#x7F6E;&#xFF0C;&#x540C;&#x65F6;&#x4E0D;&#x4F1A;&#x5BF9;&#x6D41;&#x91CF;&#x4EA7;&#x751F;&#x4EFB;&#x4F55;&#x5F71;&#x54CD;&#x3002;&#x53EA;&#x8981;&#x914D;&#x7F6E;&#x6539;&#x52A8;&#x5E94;&#x7528;&#x5230;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x6240;&#x6709;&#x96C6;&#x7FA4;&#x7684;&#x590D;&#x5236;&#x6E20;&#x9053;&#x4F1A;&#x7ACB;&#x523B;&#x505A;&#x51FA;&#x8C03;&#x6574;&#x6216;&#x505C;&#x7528;&#x3002;&#x4E0B;&#x5217;&#x4F8B;&#x5B50;&#x4E3A;<code>full-mesh</code>&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x6DFB;&#x52A0;&#x4E86;&#x7B2C;&#x56DB;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF1A;<code>apac-china</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__$ bin/pulsar-admin namespaces set-clusters my-property/global/full-mesh \</span><br><span class="line">--clusters us-west,eu-central,apac-australia,apac-china__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__</span><br></pre></td></tr></table></figure>

<h2 id="&#x9009;&#x62E9;&#x6027;&#x590D;&#x5236;&#x6BCF;&#x6761;&#x6D88;&#x606F;"><a href="#&#x9009;&#x62E9;&#x6027;&#x590D;&#x5236;&#x6BCF;&#x6761;&#x6D88;&#x606F;" class="headerlink" title="&#x9009;&#x62E9;&#x6027;&#x590D;&#x5236;&#x6BCF;&#x6761;&#x6D88;&#x606F;"></a>&#x9009;&#x62E9;&#x6027;&#x590D;&#x5236;&#x6BCF;&#x6761;&#x6D88;&#x606F;</h2><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5168;&#x8FDE;&#x63A5;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4F1A;&#x5728;&#x96C6;&#x7FA4;&#x4E4B;&#x95F4;&#x521B;&#x5EFA;&#x5168;&#x8FDE;&#x63A5;&#x590D;&#x5236;&#xFF0C;&#x6D88;&#x606F;&#x4F1A;&#x590D;&#x5236;&#x5230;&#x8BE5;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x914D;&#x7F6E;&#x7684;&#x6240;&#x6709;&#x96C6;&#x7FA4;&#x3002;&#x4F46;&#x4E5F;&#x53EF;&#x4EE5;&#x5BF9;&#x590D;&#x5236;&#x8FDB;&#x884C;&#x9009;&#x62E9;&#x6027;&#x5730;&#x9650;&#x5236;&#xFF0C;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5C42;&#x9762;&#x4E0A;&#x76F4;&#x63A5;&#x4E3A;&#x6D88;&#x606F;&#x6307;&#x5B9A;&#x8981;&#x4F7F;&#x7528;&#x7684;&#x590D;&#x5236;&#x5217;&#x8868;&#x3002;&#x968F;&#x540E;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x5C06;&#x53EA;&#x590D;&#x5236;&#x5230;&#x590D;&#x5236;&#x5217;&#x8868;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5B50;&#x96C6;&#x8303;&#x56F4;&#x5185;&#x3002;</p>
<p>&#x4E0B;&#x5217;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="/external_links/5467701d395576945bea819d7da1dd98.html" target="blank" rel="noopener">Pulsar Java&#x5BA2;&#x6237;&#x7AEF;</a>&#x751F;&#x6210;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x5E76;&#x53EA;&#x590D;&#x5236;&#x5230;<code>apac-australia</code>&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__List&lt;String&gt; restrictDatacenters = Lists.newArrayList(&quot;apac-australia&quot;);</span><br><span class="line"></span><br><span class="line">Message message = MessageBuilder.create()</span><br><span class="line">&#x2026;</span><br><span class="line">.setReplicationClusters(restrictDatacenters)</span><br><span class="line">.build();</span><br><span class="line"></span><br><span class="line">producer.send(message);__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__</span><br></pre></td></tr></table></figure>

<h2 id="&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x4E0D;&#x540C;&#x6A21;&#x5F0F;"><a href="#&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x4E0D;&#x540C;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x4E0D;&#x540C;&#x6A21;&#x5F0F;"></a>&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x4E0D;&#x540C;&#x6A21;&#x5F0F;</h2><p>&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x5168;&#x8FDE;&#x63A5;&#x590D;&#x5236;&#xFF0C;&#x5E76;&#x5728;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x65F6;&#x5E94;&#x7528;&#x9009;&#x62E9;&#x6027;&#x590D;&#x5236;&#x4FE1;&#x606F;&#xFF0C;&#x5373;&#x53EF;&#x83B7;&#x5F97;&#x6781;&#x5927;&#x7684;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x501F;&#x6B64;&#x5728;&#x4EFB;&#x4F55;&#x6570;&#x91CF;&#x7684;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x8FD0;&#x884C;&#x51E0;&#x6761;&#x547D;&#x4EE4;&#xFF0C;&#x5373;&#x53EF;&#x6253;&#x9020;&#x4EFB;&#x4F55;&#x7C7B;&#x578B;&#x7684;&#x590D;&#x5236;&#x62D3;&#x6251;&#x3002;</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/11/24/15febd30880e43b7~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt><br> &#x56FE;2&#xFF1A;&#x8DE8;&#x8D8A;&#x4E09;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;</p>
<p>&#x9664;&#x4E86;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x51E0;&#x79CD;&#x590D;&#x5236;&#x6A21;&#x5F0F;&#x3002;</p>
<h2 id="&#x53CC;&#x6D3B;&#x590D;&#x5236;"><a href="#&#x53CC;&#x6D3B;&#x590D;&#x5236;" class="headerlink" title="&#x53CC;&#x6D3B;&#x590D;&#x5236;"></a>&#x53CC;&#x6D3B;&#x590D;&#x5236;</h2><p>&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x5F62;&#x6001;&#x7684;&#x5168;&#x8FDE;&#x63A5;&#x5730;&#x57DF;&#x590D;&#x5236;&#xFF0C;&#x53EA;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x53EF;&#x5728;&#x4EFB;&#x4E00;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E2D;&#x8FD0;&#x884C;&#x5E76;&#x751F;&#x6210;&#x6D88;&#x606F;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x5185;&#x6D88;&#x8017;&#x8FD9;&#x4E9B;&#x6D88;&#x606F;&#x3002;</p>
<h2 id="&#x4E3B;&#x5907;&#x590D;&#x5236;"><a href="#&#x4E3B;&#x5907;&#x590D;&#x5236;" class="headerlink" title="&#x4E3B;&#x5907;&#x590D;&#x5236;"></a>&#x4E3B;&#x5907;&#x590D;&#x5236;</h2><p>&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7C7B;&#x578B;&#x7684;&#x53CC;&#x6D3B;&#x590D;&#x5236;&#x3002;&#x751F;&#x4EA7;&#x8005;&#x5728;&#x4E3B;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x5185;&#x751F;&#x6210;&#x6D88;&#x606F;&#xFF0C;&#x6D88;&#x606F;&#x590D;&#x5236;&#x5230;&#x5907;&#x7528;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4F46;&#x4EC5;&#x4EC5;&#x662F;&#x4E3A;&#x4E86;&#x5907;&#x4EFD;&#x3002;&#x5F53;&#x4E3B;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#x540E;&#xFF0C;&#x5907;&#x7528;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x5C06;&#x63A5;&#x624B;&#x5E76;&#x6210;&#x4E3A;&#x4E3B;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x3002;&#x968F;&#x540E;&#x5373;&#x53EF;&#x8BA9;&#x751F;&#x4EA7;&#x8005;&#x5728;&#x5907;&#x7528;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF08;&#x4F46;&#x73B0;&#x5728;&#x5DF2;&#x6210;&#x4E3A;&#x4E3B;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF09;&#x751F;&#x6210;&#x6D88;&#x606F;&#x3002;</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/11/24/15febd308cc9096b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt><br> &#x56FE;3&#xFF1A;&#x4E3B;&#x5907;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x914D;&#x7F6E;</p>
<h2 id="&#x6C47;&#x805A;&#x590D;&#x5236;"><a href="#&#x6C47;&#x805A;&#x590D;&#x5236;" class="headerlink" title="&#x6C47;&#x805A;&#x590D;&#x5236;"></a>&#x6C47;&#x805A;&#x590D;&#x5236;</h2><p>&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4ECE;&#x591A;&#x4E2A;&#x524D;&#x7AEF;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x590D;&#x5236;&#x6D88;&#x606F;&#x5230;&#x4E00;&#x4E2A;&#x4E2D;&#x592E;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4EE5;&#x5B9E;&#x73B0;&#x6C47;&#x805A;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5047;&#x8BBE;&#x6709;&#x4E09;&#x4E2A;&#x524D;&#x7AEF;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF1A;<strong>front1</strong>&#x3001;<strong>front2</strong>&#x548C;<strong>front3</strong>&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x6C47;&#x805A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF08;&#x5047;&#x8BBE;&#x53EB;<strong>aggregated</strong>&#xFF09;&#x3002;&#x968F;&#x540E;&#x4E3A;<strong>front1</strong>&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x9898;&#x521B;&#x5EFA;&#x540D;&#x79F0;&#x7A7A;&#x95F4;<code>front1-aggregation</code>&#xFF0C;&#x4E3A;<strong>front2</strong>&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x9898;&#x521B;&#x5EFA;&#x540D;&#x79F0;&#x7A7A;&#x95F4;<code>front2-aggregation</code>&#xFF0C;&#x5E76;&#x4E3A;<strong>front3</strong>&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4F7F;&#x7528;&#x7684;&#x4E3B;&#x9898;&#x521B;&#x5EFA;&#x540D;&#x79F0;&#x7A7A;&#x95F4;<code>front3-aggregation</code>&#x3002;&#x6700;&#x540E;&#x53EF;&#x5C06;<strong>aggregated</strong>&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x5206;&#x914D;&#x5230;&#x8FD9;&#x4E9B;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x3002;</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2017/11/24/15febd30d89a495e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp" alt><br> &#x56FE;4&#xFF1A;&#x8DE8;&#x8D8A;&#x56DB;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684;&#x6C47;&#x805A;&#x5730;&#x57DF;&#x590D;&#x5236;</p>
<h2 id="&#x6C47;&#x805A;&#x548C;&#x8FB9;&#x7F18;&#x8BA1;&#x7B97;"><a href="#&#x6C47;&#x805A;&#x548C;&#x8FB9;&#x7F18;&#x8BA1;&#x7B97;" class="headerlink" title="&#x6C47;&#x805A;&#x548C;&#x8FB9;&#x7F18;&#x8BA1;&#x7B97;"></a>&#x6C47;&#x805A;&#x548C;&#x8FB9;&#x7F18;&#x8BA1;&#x7B97;</h2><p>&#x6C47;&#x805A;&#x6A21;&#x5F0F;&#x901A;&#x5E38;&#x4F1A;&#x88AB;&#x7528;&#x4E8E;&#x5C06;&#x7269;&#x8054;&#x7F51;&#x6D88;&#x606F;&#x4ECE;&#x8FB9;&#x7F18;&#x590D;&#x5236;&#x5230;&#x4E91;&#x7AEF;&#xFF0C;Pulsar&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x8F7B;&#x677E;&#x5730;&#x652F;&#x6301;&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#x3002;&#x8BE5;&#x6280;&#x672F;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x4EE5;&#x53CA;&#x9AD8;&#x6548;&#x5B9E;&#x7528;&#x7684;&#x590D;&#x5236;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x4F7F;&#x5F97;&#x8BE5;&#x6280;&#x672F;&#x6210;&#x4E3A;&#x8FB9;&#x7F18;&#x8BA1;&#x7B97;&#x7684;&#x5173;&#x952E;&#x3002;&#x501F;&#x6B64;&#xFF0C;&#x7528;&#x6237;&#x5B8C;&#x5168;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x975E;&#x5E38;&#x7E41;&#x7410;&#x7684;&#x590D;&#x5236;&#x7A0B;&#x5E8F;&#x6216;&#x955C;&#x50CF;&#x7A0B;&#x5E8F;&#x3002;</p>
<h2 id="&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"><a href="#&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;" class="headerlink" title="&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"></a>&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;</h2><p>&#x9664;&#x4E86;&#x81EA;&#x884C;&#x8BBE;&#x7F6E;&#x5730;&#x57DF;&#x590D;&#x5236;&#x67B6;&#x6784;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x5E38;&#x89C4;&#x6307;&#x5BFC;&#xFF0C;&#x5EFA;&#x8BAE;&#x5927;&#x5BB6;&#x80FD;&#x8003;&#x8651;&#x6D4B;&#x4E0B;&#x5217;&#x8FD9;&#x4E9B;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
<h3 id="&#x5BC6;&#x5207;&#x76D1;&#x89C6;&#x590D;&#x5236;&#x79EF;&#x538B;"><a href="#&#x5BC6;&#x5207;&#x76D1;&#x89C6;&#x590D;&#x5236;&#x79EF;&#x538B;" class="headerlink" title="&#x5BC6;&#x5207;&#x76D1;&#x89C6;&#x590D;&#x5236;&#x79EF;&#x538B;"></a>&#x5BC6;&#x5207;&#x76D1;&#x89C6;&#x590D;&#x5236;&#x79EF;&#x538B;</h3><p>Pulsar&#x96C6;&#x7FA4;&#x7684;&#x76D1;&#x89C6;&#x5BF9;&#x4E1A;&#x52A1;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4EA7;&#x751F;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#xFF0C;&#x6216;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x7F51;&#x7EDC;&#x6027;&#x80FD;&#x7684;&#x9000;&#x5316;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x4F1A;&#x8FDC;&#x8FDC;&#x9AD8;&#x8FC7;&#x53EA;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684;&#x65F6;&#x5019;&#x3002;&#x56E0;&#x6B64;&#x4E00;&#x5B9A;&#x8981;&#x5BC6;&#x5207;&#x76D1;&#x89C6;&#x590D;&#x5236;&#x72B6;&#x6001;&#xFF0C;&#x5C24;&#x5176;&#x8981;&#x6CE8;&#x610F;&#x662F;&#x5426;&#x5B58;&#x5728;&#x590D;&#x5236;&#x79EF;&#x538B;&#x3002;</p>
<p>&#x590D;&#x5236;&#x79EF;&#x538B;&#x662F;&#x6307;&#x6E90;&#x96C6;&#x7FA4;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x6D88;&#x606F;&#xFF0C;&#x4F46;&#x5C1A;&#x672A;&#x590D;&#x5236;&#x5230;&#x5176;&#x4ED6;&#x8FDC;&#x7A0B;&#x96C6;&#x7FA4;&#x3002;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x76D1;&#x89C6;&#x590D;&#x5236;&#x79EF;&#x538B;&#x7684;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x6709;&#x4E24;&#x4E2A;&#xFF1A;</p>
<ol>
<li>&#x5982;&#x679C;&#x6709;&#x5FC5;&#x8981;&#x4ECE;&#x6E90;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x81F3;&#x76EE;&#x6807;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF0C;&#x90A3;&#x4E48;&#x6240;&#x6709;&#x5728;&#x6E90;&#x4F4D;&#x7F6E;&#x751F;&#x6210;&#x4F46;&#x5C1A;&#x672A;&#x590D;&#x5236;&#x5230;&#x76EE;&#x6807;&#x4F4D;&#x7F6E;&#x7684;&#x6D88;&#x606F;&#x5C06;&#x6682;&#x65F6;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x76F4;&#x5230;&#x6E90;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x91CD;&#x65B0;&#x4E0A;&#x7EBF;&#x624D;&#x80FD;&#x6062;&#x590D;&#x3002;</li>
<li>&#x76EE;&#x6807;&#x4F4D;&#x7F6E;&#x8FDB;&#x884C;&#x7684;&#x4EFB;&#x4F55;&#x6D88;&#x606F;&#x5904;&#x7406;&#x5DE5;&#x4F5C;&#x90FD;&#x4F1A;&#x56E0;&#x4E3A;&#x79EF;&#x538B;&#x800C;&#x4EA7;&#x751F;&#x5EF6;&#x8FDF;&#x3002;</li>
</ol>
<p>&#x901A;&#x5E38;&#x53EA;&#x4F1A;&#x79EF;&#x538B;&#x51E0;&#x6761;&#x6D88;&#x606F;&#xFF08;&#x53D6;&#x51B3;&#x4E8E;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x7684;&#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#xFF09;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x5B58;&#x5728;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#xFF0C;&#x6570;&#x91CF;&#x53EF;&#x80FD;&#x4F1A;&#x589E;&#x591A;&#x3002;&#x5982;&#x679C;&#x79EF;&#x538B;&#x6570;&#x91CF;&#x6301;&#x7EED;&#x589E;&#x957F;&#xFF0C;&#x8FD9;&#x4EE3;&#x8868;&#x590D;&#x5236;&#x541E;&#x5410;&#x7387;&#x4F4E;&#x4E8E;&#x6E90;&#x96C6;&#x7FA4;&#x4EA7;&#x751F;&#x65B0;&#x6D88;&#x606F;&#x7684;&#x901F;&#x7387;&#xFF08;&#x4F8B;&#x5982;&#x6E90;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x751F;&#x4EA7;&#x8005;&#x6B63;&#x5728;&#x4EE5;100 MB/s&#x7684;&#x901F;&#x5EA6;&#x4EA7;&#x751F;&#x6D88;&#x606F;&#xFF0C;&#x800C;Pulsar&#x590D;&#x5236;&#x6D88;&#x606F;&#x7684;&#x901F;&#x5EA6;&#x53EA;&#x80FD;&#x8FBE;&#x5230;50 MB/s&#xFF09;&#xFF0C;&#x6B64;&#x65F6;&#x6709;&#x5FC5;&#x8981;&#x5728;&#x8FDC;&#x7A0B;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x589E;&#x52A0;&#x66F4;&#x591A;Broker&#xFF0C;&#x6216;&#x589E;&#x52A0;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x4E4B;&#x95F4;&#x7684;&#x5E26;&#x5BBD;&#x3002;</p>
<p>&#x6709;&#x5173;&#x590D;&#x5236;&#x72B6;&#x6001;&#x5982;&#x4F55;&#x76D1;&#x89C6;&#xFF0C;&#x5177;&#x4F53;&#x76D1;&#x89C6;&#x793E;&#x4E48;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x9605;&#x8BFB;&#x6709;&#x5173;<a href="/external_links/e713c1e1b5cef249f469f14604f2b077.html" target="blank" rel="noopener">Pulsar&#x72B6;&#x6001;</a>&#x7684;&#x6587;&#x6863;&#x3002;</p>
<h3 id="&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#x540E;&#x7684;&#x5BB9;&#x91CF;&#x89C4;&#x5212;"><a href="#&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#x540E;&#x7684;&#x5BB9;&#x91CF;&#x89C4;&#x5212;" class="headerlink" title="&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#x540E;&#x7684;&#x5BB9;&#x91CF;&#x89C4;&#x5212;"></a>&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#x540E;&#x7684;&#x5BB9;&#x91CF;&#x89C4;&#x5212;</h3><p>&#x5728;&#x4E3A;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x8BBE;&#x8BA1;&#x5730;&#x57DF;&#x590D;&#x5236;&#x89C4;&#x5212;&#x65F6;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x95EE;&#x9898;&#x662F;&#x5FC5;&#x987B;&#x786E;&#x4FDD;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6545;&#x969C;&#xFF0C;&#x6D88;&#x606F;&#xFF08;Apache Pulsar&#x4E2D;&#x7684;Broker&#xFF09;&#x4EE5;&#x53CA;&#x5B58;&#x50A8;&#x7EC4;&#x4EF6;&#xFF08;Apache BookKeeper&#x4E2D;&#x7684;Bookie&#xFF09;&#x80FD;&#x591F;&#x627F;&#x53D7;&#x8DB3;&#x591F;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x6784;&#x5EFA;&#x79EF;&#x538B;&#xFF0C;&#x65F6;&#x95F4;&#x53EF;&#x80FD;&#x4ECE;&#x6570;&#x5C0F;&#x65F6;&#x5230;&#x6570;&#x5929;&#x4E0D;&#x7B49;&#x3002;&#x81F3;&#x5C11;&#x8981;&#x4FDD;&#x8BC1;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x96C6;&#x7FA4;&#x5177;&#x5907;&#x8DB3;&#x591F;&#x7684;&#x5BB9;&#x91CF;&#x4EE5;&#x5B58;&#x50A8;&#x6545;&#x969C;&#x8F6C;&#x79FB;&#x8FC7;&#x6765;&#x7684;&#x6240;&#x6709;&#x6D41;&#x91CF;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x5F53;&#x8DE8;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7F51;&#x7EDC;&#x7684;&#x6545;&#x969C;&#x6210;&#x529F;&#x89E3;&#x51B3;&#x540E;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x80FD;&#x63D0;&#x4F9B;&#x8DB3;&#x591F;&#x7684;&#x7F51;&#x7EDC;&#x6216;I/O&#x5E26;&#x5BBD;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x7528;&#x6BD4;&#x65B0;&#x6D88;&#x606F;&#x751F;&#x6210;&#x66F4;&#x5FEB;&#x7684;&#x901F;&#x5EA6;&#x5C3D;&#x5FEB;&#x6392;&#x7A7A;&#x79EF;&#x538B;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x540C;&#x65F6;&#x4E0D;&#x80FD;&#x5BF9;&#x73B0;&#x6709;&#x6D41;&#x91CF;&#x4EA7;&#x751F;&#x5F71;&#x54CD;&#x3002;</p>
<h3 id="&#x590D;&#x5236;&#x7684;&#x9650;&#x6D41;&#x8C03;&#x8282;"><a href="#&#x590D;&#x5236;&#x7684;&#x9650;&#x6D41;&#x8C03;&#x8282;" class="headerlink" title="&#x590D;&#x5236;&#x7684;&#x9650;&#x6D41;&#x8C03;&#x8282;"></a>&#x590D;&#x5236;&#x7684;&#x9650;&#x6D41;&#x8C03;&#x8282;</h3><p>&#x5F53;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x51FA;&#x73B0;&#x6545;&#x969C;&#x540E;&#xFF0C;&#x76EE;&#x6807;&#x96C6;&#x7FA4;&#x4F1A;&#x79EF;&#x7D2F;&#x5927;&#x91CF;&#x6D88;&#x606F;&#x3002;&#x5F53;&#x6545;&#x969C;&#x7684;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x6062;&#x590D;&#x540E;&#xFF0C;Pulsar&#x9700;&#x8981;&#x5C06;&#x76EE;&#x6807;&#x96C6;&#x7FA4;&#x79EF;&#x7D2F;&#x7684;&#x6D88;&#x606F;&#x91CD;&#x65B0;&#x590D;&#x5236;&#x56DE;&#x6E90;&#x96C6;&#x7FA4;&#x3002;&#x7531;&#x4E8E;&#x79EF;&#x538B;&#x7684;&#x5927;&#x91CF;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x590D;&#x5236;&#x6392;&#x7A7A;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x5BC6;&#x5207;&#x6CE8;&#x610F;&#x79EF;&#x538B;&#x5185;&#x5BB9;&#x7684;&#x6392;&#x7A7A;&#x901F;&#x7387;&#xFF0C;&#x5E76;&#x4E3A;&#x91CD;&#x8981;&#x4E3B;&#x9898;&#x7684;I/O&#x914D;&#x7F6E;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x5BF9;&#x4E0D;&#x90A3;&#x4E48;&#x91CD;&#x8981;&#x7684;&#x4E3B;&#x9898;&#x8FDB;&#x884C;&#x9650;&#x6D41;&#x8C03;&#x8282;&#x3002;&#x8FD9;&#x6837;&#x5373;&#x53EF;&#x786E;&#x4FDD;&#x4E1A;&#x52A1;&#x53EF;&#x4EE5;&#x5C3D;&#x5FEB;&#x6062;&#x590D;&#x81F3;&#x5E38;&#x6001;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5728;&#x540D;&#x79F0;&#x7A7A;&#x95F4;&#x4E2D;&#x9488;&#x5BF9;&#x6BCF;&#x4E2A;&#x4E3B;&#x9898;&#x9650;&#x5236;&#x6392;&#x7A7A;&#x901F;&#x7387;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__$ bin/pulsar-admin namespaces set-dispatch-rate my-property/global/full-mesh \</span><br><span class="line">--msg-dispatch-rate 20000__Fri Nov 24 2017 10:19:52 GMT+0800 (CST)____Fri Nov 24 2017 10:19:52 GMT+0800 (CST)__</span><br></pre></td></tr></table></figure>

<h2 id="&#x7ED3;&#x8BBA;"><a href="#&#x7ED3;&#x8BBA;" class="headerlink" title="&#x7ED3;&#x8BBA;"></a>&#x7ED3;&#x8BBA;</h2><p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;Apache Pulsar&#x4E2D;&#x5F02;&#x6B65;&#x5730;&#x57DF;&#x590D;&#x5236;&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x76F8;&#x5173;&#x7684;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;&#x5E0C;&#x671B;&#x672C;&#x6587;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5927;&#x5BB6;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;Apache Pulsar&#x53CA;&#x5176;&#x5730;&#x57DF;&#x590D;&#x5236;&#x529F;&#x80FD;&#x3002;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x5C06;&#x4F1A;&#x4ECB;&#x7ECD;Apache Pulsar&#x4E2D;&#x7684;&#x6301;&#x4E45;&#x6D88;&#x606F;&#x529F;&#x80FD;&#x548C;Effectively-once&#x8BED;&#x4E49;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5BF9;Pulsar&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x5217;&#x65B9;&#x5F0F;&#x52A0;&#x5165;Pulsar&#x793E;&#x533A;&#xFF1A;</p>
<ul>
<li>Pulsar <a href="/external_links/102c9e9a7a4d03b29ed35463e5597e43.html" target="blank" rel="noopener">Slack&#x9891;&#x9053;</a>&#xFF0C;&#x53EF;&#x5728;&#x8FD9;&#x91CC;&#x81EA;&#x884C;&#x6CE8;&#x518C;&#xFF1A;<a href="/external_links/82d737a72a0cd92065dfac0ae50f5da9.html" target="blank" rel="noopener">apache-pulsar.herokuapp.com</a>&#x3002;</li>
<li><a href="/external_links/efbcdfd4aa4503a1c1199386c9e168b5.html" target="blank" rel="noopener">Pulsar&#x90AE;&#x4EF6;&#x5217;&#x8868;</a>&#x3002;</li>
</ul>
<p>&#x6709;&#x5173;Apache Pulsar&#x9879;&#x76EE;&#x7684;&#x5E38;&#x89C4;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x8BBF;&#x95EE;&#x5B98;&#x7F51;&#xFF1A;<a href="/external_links/23f1fe18d2716ce17d5f03c6e49821d8.html" target="blank" rel="noopener">pulsar.incubator.apache.org/</a>&#xFF0C;&#x5E76;&#x53EF;&#x5173;&#x6CE8;&#x8BE5;&#x9879;&#x76EE;&#x7684;Twitter&#x5E10;&#x53F7;&#xFF1A;<a href="/external_links/b8ba0880e63f73476cd1076f8f4137f0.html" target="blank" rel="noopener">@apache_pulsar</a>&#x3002;</p>
<p><strong>&#x4F5C;&#x8005;</strong>&#xFF1A;Sijie Guo&#xFF0C;<strong>&#x9605;&#x8BFB;&#x82F1;&#x6587;&#x539F;&#x6587;</strong>&#xFF1A;<a href="/external_links/db0eeb5436f2f0cbabc4aef1ef683b49.html" target="blank" rel="noopener">Geo-replication in Apache Pulsar, part 2: patterns and practices</a></p>
<p>&#x611F;&#x8C22;<a href="/external_links/5ac3608fb113d288215f9b3bbf82c8c8.html" target="blank" rel="noopener">&#x675C;&#x5C0F;&#x82B3;</a>&#x5BF9;&#x672C;&#x6587;&#x7684;&#x5BA1;&#x6821;&#x3002;</p>
<p> <a href="/external_links/0c10cfe9c274e00f15941334d6bec7ff.html" target="blank" rel="noopener"><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d0df45f43748a57a05001e0f1705663d8349b773b3463b49548735db8289a4c8" alt></a>  </p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8ec3f1934e902984ac9e2f1363a0d8be.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6844903513252724744.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6844903513252724744.html" itemprop="url">还不明白 Docker 的镜像跟容器？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-23T18:17:13+08:00">
                2017-11-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="&#x4E00;&#x3001;docker-&#x662F;&#x4EC0;&#x4E48;"><a href="#&#x4E00;&#x3001;docker-&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="&#x4E00;&#x3001;docker &#x662F;&#x4EC0;&#x4E48;"></a>&#x4E00;&#x3001;docker &#x662F;&#x4EC0;&#x4E48;</h3><p>Docker&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;&#x5F15;&#x64CE;&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x7684;&#x4E3A;&#x4EFB;&#x4F55;&#x5E94;&#x7528;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x3001;&#x53EF;&#x79FB;&#x690D;&#x7684;&#x3001;&#x81EA;&#x7ED9;&#x81EA;&#x8DB3;&#x7684;&#x5BB9;&#x5668;&#x3002;&#x5F00;&#x53D1;&#x8005;&#x5728;&#x81EA;&#x5DF1;&#x673A;&#x5668;&#x4E0A;&#x7F16;&#x8BD1;&#x6D4B;&#x8BD5;&#x901A;&#x8FC7;&#x7684;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x6279;&#x91CF;&#x5730;&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#x90E8;&#x7F72;&#xFF0C;&#x5305;&#x62EC;VMs&#xFF08;&#x865A;&#x62DF;&#x673A;&#xFF09;&#x3001;bare metal&#x3001;OpenStack &#x96C6;&#x7FA4;&#x548C;&#x5176;&#x4ED6;&#x7684;&#x57FA;&#x7840;&#x5E94;&#x7528;&#x5E73;&#x53F0;&#x3002;&#x8FD9;&#x662F;docker&#x7684;&#x767E;&#x5EA6;&#x767E;&#x79D1;&#x5B9A;&#x4E49;&#xFF0C;&#x770B;&#x5B8C;&#x8FD9;&#x4E2A;&#x597D;&#x50CF;&#x5E76;&#x4E0D;&#x80FD;&#x8BF4;&#x660E;docker&#x6709;&#x4EC0;&#x4E48;&#x7528;&#xFF0C;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x5BF9;&#x6BD4;&#x4E00;&#x4E0B;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#xFF0C;&#x9996;&#x5148;&#x8BF4;&#x660E;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x4E0D;&#x4F1A;&#x6D89;&#x53CA;&#x5F88;&#x6DF1;&#x5965;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x65E8;&#x5728;&#x7528;&#x901A;&#x4FD7;&#x6613;&#x61C2;&#x7684;&#x8BDD;&#x8BED;&#x6765;&#x9610;&#x8FF0;docke&#x7684;&#x4F18;&#x70B9;&#x53CA;&#x5176;&#x57FA;&#x7840;&#x7528;&#x6CD5;&#x3002;&#x6211;&#x4EEC;&#x90FD;&#x7528;&#x8FC7;&#x865A;&#x62DF;&#x673A;&#x5427;&#xFF0C;&#x7B2C;&#x4E00;&#x6620;&#x50CF;&#x80AF;&#x5B9A;&#x662F;&#x7B28;&#x91CD;&#xFF0C;&#x542F;&#x52A8;&#x6162;&#xFF0C;&#x5F53;&#x7136;&#x529F;&#x80FD;&#x4E0A;&#x662F;&#x5B8C;&#x5168;&#x65E0;&#x53EF;&#x6311;&#x5254;&#x7684;&#xFF0C;&#x4F46;&#x8FD9;&#x8FD8;&#x4E0D;&#x591F;&#xFF0C;&#x4E8E;&#x662F;docker&#x6A2A;&#x7A7A;&#x51FA;&#x4E16;&#xFF0C;&#x8FD8;&#x6709;&#x4EC0;&#x4E48;&#x8BED;&#x8A00;&#x80FD;&#x6BD4;&#x56FE;&#x7247;&#x66F4;&#x80FD;&#x8BF4;&#x660E;&#x4E00;&#x5207;&#x5462;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/3564679341c3c94702427547031baee53f429af0fbc9fa4aef8fba812a3b2320" alt="docker"></p>
<p>docker</p>
<p>&#x4E0A;&#x9762;&#x8FD9;&#x5F20;&#x56FE;&#x5C31;&#x5F88;&#x597D;&#x7684;&#x8BF4;&#x660E;&#x4E00;&#x5207;&#x4E86;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;&#x865A;&#x62DF;&#x673A;&#x662F;&#x901A;&#x8FC7;&#x8F6F;&#x4EF6;&#x628A;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x4E00;&#x4E2A;&#x4E2A;&#x786C;&#x4EF6;&#x7ED9;&#x6A21;&#x62DF;&#x51FA;&#x6765;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x5728;&#x6A21;&#x62DF;&#x51FA;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x4E2D;&#x5B89;&#x88C5;&#x7CFB;&#x7EDF;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x5728;&#x7CFB;&#x7EDF;&#x5185;&#x90E8;&#x8DD1;&#x5E94;&#x7528;&#xFF0C;&#x5C31;&#x6BD4;&#x5982;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x4E00;&#x4E2A;&#x8DD1;Nginx&#x4E00;&#x4E2A;&#x8DD1;MySQL&#xFF0C;&#x90A3;&#x4E48;&#x7528;&#x865A;&#x62DF;&#x673A;&#x7684;&#x8BDD;&#x5C31;&#x8981;&#x5B89;&#x88C5;&#x4E24;&#x6B21;&#x7CFB;&#x7EDF;&#xFF0C;&#x5BBF;&#x4E3B;&#x673A;&#x4E5F;&#x5C31;&#x662F;&#x771F;&#x5B9E;&#x7684;&#x975E;&#x865A;&#x62DF;&#x51FA;&#x6765;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x8981;&#x4FDD;&#x5B58;&#x8FD9;&#x4E24;&#x4E2A;&#x865A;&#x62DF;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x4E0D;&#x8BF4;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x7ED9;&#x5BBF;&#x4E3B;&#x673A;&#x989D;&#x5916;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x865A;&#x62DF;&#x673A;&#x7684;&#x7CFB;&#x7EDF;&#x90FD;&#x662F;&#x9700;&#x8981;cpu&#x548C;&#x5185;&#x5B58;&#x8D44;&#x6E90;&#x7684;&#xFF0C;&#x518D;&#x6765;&#x770B;&#x770B;docke&#xFF0C;&#x53EF;&#x770B;&#x5230;&#x7684;&#x662F;&#x5B83;&#x53EA;&#x5728;&#x5BBF;&#x4E3B;&#x673A;&#x5185;&#x5B89;&#x88C5;&#x4E2A;Docker Engine&#x5C31;&#x652F;&#x6301;&#x9694;&#x79BB;&#x591A;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x6CE8;&#x610F;&#x8FD8;&#x662F;&#x73AF;&#x5883;&#x9694;&#x79BB;&#x7684;&#x54E6;&#xFF0C;&#x5C11;&#x4E86;&#x4E24;&#x4E2A;OS&#x65E0;&#x7591;&#x662F;&#x8282;&#x7EA6;&#x4E86;&#x5DE8;&#x5927;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5E94;&#x7528;&#x7ED9;&#x6211;&#x4EEC;&#x7684;&#x611F;&#x89C9;&#x5C31;&#x662F;&#x8DD1;&#x5728;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E00;&#x6837;&#xFF0C;&#x4E24;&#x8005;&#x901A;&#x4FE1;&#x8FD8;&#x8981;&#x501F;&#x52A9;&#x7279;&#x5B9A;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#xFF0C;&#x4F46;&#x4ED6;&#x4EEC;&#x5176;&#x5B9E;&#x662F;&#x5171;&#x7528;&#x7684;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x81F3;&#x4E8E;&#x4ED6;&#x4EEC;&#x662F;&#x600E;&#x4E48;&#x505A;&#x5230;&#x9694;&#x79BB;&#x7684;&#x8FD9;&#x53C8;&#x662F;&#x4E00;&#x4E2A;&#x9AD8;&#x6DF1;&#x7684;&#x8BDD;&#x9898;&#x4E86;&#xFF0C;&#x770B;&#x5230;docker&#x6709;&#x8FD9;&#x4E48;&#x591A;&#x7684;&#x4F18;&#x70B9;&#x662F;&#x4E0D;&#x662F;&#x8FEB;&#x4E0D;&#x53CA;&#x5F85;&#x7684;&#x60F3;&#x8981;&#x8BD5;&#x4E00;&#x8BD5;&#x4E86;&#xFF1F;</p>
<h3 id="&#x4E8C;&#x3001;docker&#x5B89;&#x88C5;&#x53CA;&#x57FA;&#x672C;&#x914D;&#x7F6E;"><a href="#&#x4E8C;&#x3001;docker&#x5B89;&#x88C5;&#x53CA;&#x57FA;&#x672C;&#x914D;&#x7F6E;" class="headerlink" title="&#x4E8C;&#x3001;docker&#x5B89;&#x88C5;&#x53CA;&#x57FA;&#x672C;&#x914D;&#x7F6E;"></a>&#x4E8C;&#x3001;docker&#x5B89;&#x88C5;&#x53CA;&#x57FA;&#x672C;&#x914D;&#x7F6E;</h3><p>&#x5728;win7&#x4E2D;&#x5B89;&#x88C5;&#x662F;&#x8981;&#x901A;&#x8FC7;&#x865A;&#x62DF;&#x673A;&#x6765;&#x5B89;&#x88C5;&#x7684;&#xFF0C;&#x5728;win10&#x4E2D;&#x5C31;&#x65B9;&#x4FBF;&#x591A;&#x4E86;&#xFF0C;&#x6709;<a href="/external_links/3e8d455160e6f70f6a16bae173d66bd3.html" target="blank" rel="noopener">Docker for Windows</a>&#x5B89;&#x88C5;&#x5305;&#xFF0C;linux&#x4E0B;&#x4E0B;&#x8F7D;&#x5BF9;&#x5E94;&#x6E90;&#x7801;&#x7F16;&#x8BD1;&#x5B89;&#x88C5;&#x5373;&#x53EF;&#xFF0C;&#x56E0;&#x4E3A;&#x5E73;&#x65F6;&#x5F00;&#x53D1;&#x90FD;&#x662F;&#x5728;win10&#x4E0A;&#x5F00;&#x53D1;&#xFF0C;&#x6545;&#x5728;&#x8FD9;&#x5C31;&#x7B80;&#x5355;&#x8BF4;&#x4E00;&#x4E0B;win10&#x5B89;&#x88C5;Docker for Windows&#x540E;&#x7684;&#x914D;&#x7F6E;&#x5427;&#xFF0C;&#x6CE8;&#x610F;&#x5728;win10&#x4E2D;&#x5B89;&#x88C5;docker for window&#x9700;&#x8981;&#x6709; Hyper-V &#x652F;&#x6301;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x8FD9;&#x4E2A;&#x7684;&#x4E5F;&#x53EA;&#x80FD;&#x662F;&#x5B89;&#x88C5;&#x865A;&#x62DF;&#x673A;&#x6765;&#x4F53;&#x9A8C;docker&#x4E86;&#xFF0C;&#x5B89;&#x88C5;&#x5B8C;&#x540E;&#x8FDB;&#x5165;&#x8BBE;&#x7F6E;&#x754C;&#x9762;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e16b0a0a22570e2d15c8cdcc96408559635e41694dd0cea212ec7a2e1a6e5178" alt="docker_settings"></p>
<p>docker_settings</p>
<p>&#x7ED9;&#x9700;&#x8981;&#x5171;&#x4EAB;&#x7684;&#x78C1;&#x76D8;&#x52FE;&#x9009;&#xFF0C;&#x53EA;&#x6709;&#x52FE;&#x9009;&#x4E86;&#x8FD9;&#x4E2A;&#xFF0C;&#x5BB9;&#x5668;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#x5BBF;&#x4E3B;&#x673A;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x662F;&#x9700;&#x8981;&#x7BA1;&#x7406;&#x5458;&#x5BC6;&#x7801;&#x7684;&#xFF0C;&#x6CA1;&#x8BBE;&#x5BC6;&#x7801;&#x7684;&#x9700;&#x8981;&#x53BB;&#x8BBE;&#x7F6E;&#x7BA1;&#x7406;&#x5458;&#x5BC6;&#x7801;&#xFF0C;&#x4E0D;&#x7136;&#x4E0D;&#x80FD;&#x914D;&#x7F6E;&#x6210;&#x529F;&#xFF0C;&#x63A5;&#x7740;&#x5C31;&#x662F;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#x4E86;&#xFF0C;docker&#x5BB9;&#x5668;&#x662F;&#x4F9D;&#x8D56;&#x955C;&#x50CF;&#xFF08;&#x5728;docker&#x91CC;&#x9762;&#x662F;image&#xFF09;&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x955C;&#x50CF;&#x662F;&#x4ECE;&#x8FDC;&#x7A0B;&#x62C9;&#x53D6;&#x7684;&#xFF0C;&#x5C31;&#x8DDF;&#x6211;&#x4EEC;&#x4ECE;github&#x4E0A;&#x62C9;&#x53D6;&#x4EE3;&#x7801;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x4F17;&#x6240;&#x5468;&#x77E5;&#x56FD;&#x5185;&#x7684;&#x7F51;&#x8DEF;&#x60F3;&#x8981;&#x62C9;&#x53D6;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x662F;&#x591A;&#x4E48;&#x7684;&#x4E0D;&#x5BB9;&#x6613;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x9700;&#x8981;&#x914D;&#x7F6E;&#x955C;&#x50CF;&#x52A0;&#x901F;&#xFF0C;&#x5728;Daemon&#x90A3;&#x4E00;&#x680F;&#x7684;Registry mirrors &#x4E2D;&#x586B;&#x4E0A;&#x52A0;&#x901F;&#x5730;&#x5740;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x6211;&#x4E60;&#x60EF;&#x662F;&#x4F7F;&#x7528;&#x963F;&#x91CC;&#x4E91;&#x7684; &#x2018; <a href="/external_links/98f91c21e15412325bc1ec2c9bdf6506.html" target="blank" rel="noopener">otsyn80i.mirror.aliyuncs.com</a> &#x2018; &#x52A0;&#x901F;&#x5730;&#x5740;&#xFF0C;&#x4E00;&#x5207;&#x90FD;ok&#x4E86;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x4E86;&#x6211;&#x4EEC;&#x559C;&#x6B22;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x6572;&#x547D;&#x4EE4;&#x4E86;&#xFF01;</p>
<h3 id="&#x4E09;&#x3001;docker&#x57FA;&#x672C;&#x64CD;&#x4F5C;"><a href="#&#x4E09;&#x3001;docker&#x57FA;&#x672C;&#x64CD;&#x4F5C;" class="headerlink" title="&#x4E09;&#x3001;docker&#x57FA;&#x672C;&#x64CD;&#x4F5C;"></a>&#x4E09;&#x3001;docker&#x57FA;&#x672C;&#x64CD;&#x4F5C;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801; -&gt;docker --version  #&#x67E5;&#x770B;&#x7248;&#x672C;</span><br><span class="line">   Docker version 17.09.0-ce, build afdb6d4</span><br></pre></td></tr></table></figure>

<p>&#x641C;&#x7D22;&#x4E00;&#x4E2A;image&#x5E76;&#x4E14;&#x62C9;&#x53D6;&#x4E0B;&#x6765;<br>&#x4E0B;&#x8F7D;&#x955C;&#x50CF;&#x7684;&#x547D;&#x4EE4;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x4F7F;&#x7528;docker pull&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x3002;&#x5728;docker&#x7684;&#x955C;&#x50CF;&#x7F51;&#x7AD9;&#x4E0A;&#x9762;&#xFF0C;&#x955C;&#x50CF;&#x90FD;&#x662F;&#x6309;&#x7167;&#x201D;&#x7528;&#x6237;&#x540D;/&#x955C;&#x50CF;&#x540D;&#x201D;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B58;&#x50A8;&#x7684;&#x3002;<br>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;docker images&#x67E5;&#x770B;&#x62C9;&#x53D6;&#x4E0B;&#x6765;&#x7684;&#x955C;&#x50CF;,&#x5176;&#x4E2D;IMAGE ID&#x5C31;&#x662F;&#x955C;&#x50CF;id&#xFF0C;&#x5220;&#x9664;&#x955C;&#x50CF;&#x65F6;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;IMAGE ID&#x5220;&#x9664; docker rmi [IMAGE ID,REPOSITORY]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801; -&gt;docker search centos</span><br><span class="line">   NAME            DESCRIPTION                      STARS         OFFICIAL      AUTOMATED</span><br><span class="line">   centos          The official build of CentOS.    3824          [OK]</span><br><span class="line">                            ...</span><br><span class="line"> -&gt;docker pull centos #&#x62C9;&#x53D6;&#x955C;&#x50CF;</span><br><span class="line"> -&gt;docker images</span><br><span class="line">   REPOSITORY          TAG        IMAGE ID        CREATED       SIZE</span><br><span class="line">   centos              latest     a7876479f1aa    4 years ago   128MB</span><br><span class="line"> -&gt;docker rmi a7876479f1aa #&#x5220;&#x9664;image</span><br></pre></td></tr></table></figure>

<p>&#x5728;docker&#x5BB9;&#x5668;&#x4E2D;&#x8FD0;&#x884C;hello world,&#x4F7F;&#x7528;docker run&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;docker run&#x4E4B;&#x540E;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x5E76;&#x4E14;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x4E4B;&#x540E;&#x8981;&#x8FD0;&#x884C;&#x5C31;&#x53EF;&#x4EE5;&#x505A;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x800C;&#x4E0D;&#x7528;&#x4ECE;&#x65B0;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x5BB9;&#x5668;&#x5C31;&#x662F; container,docker&#x7684;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x5728;&#x6C99;&#x76D2;&#x4E2D;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x3002;&#x8FD9;&#x4E2A;&#x6C99;&#x76D2;&#x5305;&#x542B;&#x4E86;&#x8BE5;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x6240;&#x5FC5;&#x987B;&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5305;&#x62EC;&#x6587;&#x4EF6;&#x7CFB;&#x7EDF;&#x3001;&#x7CFB;&#x7EDF;&#x7C7B;&#x5E93;&#x3001;shell &#x73AF;&#x5883;&#x7B49;&#x7B49;&#x3002;&#x4F46;&#x8FD9;&#x4E2A;&#x6C99;&#x76D2;&#x9ED8;&#x8BA4;&#x662F;&#x4E0D;&#x4F1A;&#x8FD0;&#x884C;&#x4EFB;&#x4F55;&#x7A0B;&#x5E8F;&#x7684;&#x3002;&#x9700;&#x8981;&#x5728;&#x6C99;&#x76D2;&#x4E2D;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x6765;&#x542F;&#x52A8;&#x67D0;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x3002;&#x8FD9;&#x4E2A;&#x8FDB;&#x7A0B;&#x662F;&#x8BE5;&#x5BB9;&#x5668;&#x7684;&#x552F;&#x4E00;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x8BE5;&#x8FDB;&#x7A0B;&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5BB9;&#x5668;&#x4E5F;&#x4F1A;&#x5B8C;&#x5168;&#x7684;&#x505C;&#x6B62;&#x3002;<br>&#x53EF;&#x4EE5;&#x901A;&#x8FC7; docker ps &#x67E5;&#x770B;&#x6B63;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8FD0;&#x884C;docker run centos echo &#x201C;hello word&#x201D;&#x540E;&#x770B;&#x5230;&#x8F93;&#x51FA; &#x201C;hello word&#x201D; &#x540E;&#x518D;&#x8FD0;&#x884C; docker ps &#x65F6;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5BB9;&#x5668;&#x8F93;&#x51FA;&#x51FA;&#x6765;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x5BB9;&#x5668;&#x5728;&#x8FD0;&#x884C;&#x5B8C; echo &#x201C;hello word&#x201D; &#x540E;&#x6CA1;&#x6709;&#x8FD0;&#x884C;&#x4EFB;&#x4F55;&#x8FDB;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x5BB9;&#x5668;&#x5C31;&#x9000;&#x51FA;&#x4E86;&#x3002;&#x901A;&#x8FC7; docker ps -a &#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x5230;&#x6240;&#x6709;&#x7684; container</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801; -&gt;docker run centos echo &quot;hello word&quot; #&#x901A;&#x8FC7; centos &#x955C;&#x50CF;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x6765;&#x8F93;&#x51FA; &quot;hello word&quot;</span><br><span class="line">   hello word</span><br><span class="line"> -&gt;docker ps -a</span><br><span class="line">   CONTAINER ID   IMAGE      COMMAND              CREATED          STATUS              PORTS     NAMES</span><br><span class="line">   e46ec634bbe1   centos     &quot;echo &apos;hello word&apos;&quot;  12 minutes ago   Exited (0) 12 minutes ago</span><br></pre></td></tr></table></figure>

<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x7ED9;&#x5BB9;&#x5668;&#x5B89;&#x88C5;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x7A0B;&#x5E8F;&#x3002;&#x4E4B;&#x524D;&#x4E0B;&#x8F7D;&#x7684;&#x662F;centos&#x955C;&#x50CF;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; yum &#x547D;&#x4EE4;&#x6765;&#x5B89;&#x88C5;&#x7A0B;&#x5E8F;&#x3002;<br>&#x5907;&#x6CE8;&#xFF1A;yum &#x547D;&#x4EE4;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#xFF0C;&#x5BB9;&#x5668;&#x5C31;&#x4F1A;&#x505C;&#x6B62;&#xFF0C;&#x4F46;&#x5BF9;&#x5BB9;&#x5668;&#x7684;&#x6539;&#x52A8;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x3002;&#x4F46;&#x662F;&#x4ECE; image &#x91CD;&#x65B0; run &#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x51FA;&#x6765;&#xFF0C;&#x4E4B;&#x524D;&#x5B89;&#x88C5;&#x7684;&#x7A0B;&#x5E8F;&#x5E76;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x56E0;&#x4E3A;&#x6240;&#x6709;&#x7684;&#x4FEE;&#x6539;&#x90FD;&#x662F;&#x9488;&#x5BF9;&#x5BB9;&#x5668; (container) &#x7684;&#xFF0C;&#x5E76;&#x4E0D;&#x9488;&#x5BF9; image&#xFF0C;&#x6240;&#x4EE5;&#x4ECE; image run &#x51FA;&#x6765;&#x7684;&#x5BB9;&#x5668;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker run centos yum -y install net-tools</span><br><span class="line">-&gt;docker ps -a  #&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x4E24;&#x4E2A; container</span><br><span class="line">  CONTAINER ID  IMAGE     COMMAND                CREATED         STATUS           PORTS     NAMES</span><br><span class="line">  2f1bbd6c30e3  centos    &quot;yum install -y ne...&quot; 1 minutes ago   Exited (0) 1 minute ago    competent</span><br><span class="line">  35129633c933  centos    &quot;echo hello word&quot;      1 minutes ago   Exited (0) 1 minute ago    dazzling</span><br></pre></td></tr></table></figure>

<p>&#x73B0;&#x5728;&#x5BB9;&#x5668;&#x662F;&#x6709;&#x4E86;&#xFF0C;&#x9700;&#x8981;&#x7684;&#x7A0B;&#x5E8F;&#x4E5F;&#x5B89;&#x88C5;&#x597D;&#x4E86;&#xFF0C;&#x4F46;&#x5C31;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x4E0D;&#x80FD;&#x8FD0;&#x884C;&#x53C8;&#x6709;&#x4EC0;&#x4E48;&#x7528;&#xFF0C;&#x522B;&#x6025;&#x4E0B;&#x9762;&#x5C31;&#x6765;&#x770B;&#x770B;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#xFF0C;&#x4F46;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x4E5F;&#x6709;&#x51E0;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x4E00;&#x79CD;&#x5C31;&#x662F;&#x5728;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x7684;&#x65F6;&#x5019;&#x5E76;&#x8FD0;&#x884C;&#xFF0C;&#x4E4B;&#x524D;&#x8BF4;&#x8FC7;&#xFF0C;&#x5BB9;&#x5668;&#x8981;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x6D3B;&#x52A8;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5F53;&#x5BB9;&#x5668;&#x5185;&#x6240;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x90FD;&#x9000;&#x51FA;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x5BB9;&#x5668;&#x4E5F;&#x5C31;&#x76F8;&#x5E94;&#x7684;&#x505C;&#x6B62;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x521B;&#x5EFA;&#x5BB9;&#x5668;&#x5E76;&#x4FDD;&#x6301;&#x8FD0;&#x884C;&#x5BB9;&#x5668;&#x7684;&#x8BDD;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x7528;ping&#x547D;&#x4EE4;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker run centos ping lozz.cc</span><br><span class="line">  PING lorencoll.coding.me (103.218.240.147) 56(84) bytes of data.</span><br><span class="line">  64 bytes from 103.218.240.147 (103.218.240.147): icmp_seq=1 ttl=37 time=16.0 ms</span><br><span class="line">  64 bytes from 103.218.240.147 (103.218.240.147): icmp_seq=2 ttl=37 time=16.4 ms</span><br><span class="line">  Ctrl+C</span><br><span class="line">-&gt;docker ps  #&#x67E5;&#x770B;&#x6D3B;&#x52A8;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  CONTAINER ID    IMAGE      COMMAND        CREATED              STATUS       PORTS        NAMES</span><br><span class="line">  10c5c2754279     centos    &quot;ping lozz.cc&quot; About a minute ago   Up About a minute         jolly</span><br></pre></td></tr></table></figure>

<p>&#x6709;&#x542F;&#x52A8;&#x5C31;&#x4F1A;&#x6709;&#x505C;&#x6B62;&#xFF0C;&#x505C;&#x6B62;&#x53EF;&#x4EE5;&#x7528; docker stop container_id &#x547D;&#x4EE4;&#x6765;&#x505C;&#x6B62;&#x67D0;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x597D;&#x4E86;&#x73B0;&#x5728;&#x5F00;&#x59CB;&#x8BB2;&#x7B2C;&#x4E8C;&#x79CD;&#x542F;&#x52A8;&#x5BB9;&#x5668;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x5BB9;&#x5668;&#x5DF2;&#x7ECF;&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6BCF;&#x6B21; run &#x90FD;&#x662F;&#x521B;&#x5EFA;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x6709;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x9700;&#x8981;&#x521B;&#x5EFA;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; docker start container_id &#x6765;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E86;&#xFF0C;&#x542F;&#x52A8;&#x540E;&#x7684;&#x5BB9;&#x5668;&#x6CA1;&#x6D3B;&#x52A8;&#x7684;&#x8FDB;&#x7A0B;&#x5BB9;&#x5668;&#x4F9D;&#x7136;&#x662F;&#x4F1A;&#x9000;&#x51FA;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5BB9;&#x5668;&#x662F;&#x4ECE;&#x955C;&#x50CF;&#x521B;&#x5EFA;&#x800C;&#x6765;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5BB9;&#x5668;&#x4E5F;&#x662F;&#x5305;&#x542B;&#x4E86;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7684;&#x9644;&#x52A0;&#x547D;&#x4EE4;&#x7684;&#xFF0C;&#x5728; docker start &#x7684;&#x65F6;&#x5019;&#x53C8;&#x4F1A;&#x4ECE;&#x65B0;&#x6267;&#x884C;&#x4E00;&#x904D;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x7684;&#x9644;&#x4EF6;&#x547D;&#x4EE4;&#xFF0C;&#x6709;&#x70B9;&#x7ED5;&#x53E3;&#x662F;&#x4E0D;&#x662F;&#xFF0C;&#x6572;&#x4E00;&#x904D;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker ps    #&#x67E5;&#x770B;&#x6D3B;&#x52A8;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  CONTAINER ID    IMAGE    COMMAND          CREATED          STATUS      PORTS         NAMES</span><br><span class="line">  10c5c2754279    centos   &quot;ping lozz.cc&quot;   23 minutes ago   Up 23 minutes             jolly</span><br><span class="line"></span><br><span class="line">-&gt;docker ps -a #&#x67E5;&#x770B;&#x6240;&#x6709;&#x5B58;&#x5728;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  CONTAINER ID    IMAGE    COMMAND                CREATED          STATUS      PORTS        NAMES</span><br><span class="line">  10c5c2754279    centos   &quot;ping lozz.cc&quot;         21 minutes ago   Up 21 minutes            jolly</span><br><span class="line">  2f1bbd6c30e3    centos   &quot;yum install -y ne...&quot; 36 minutes ago   Exited (0) 3 minute ago  competent</span><br><span class="line">  35129633c933    centos   &quot;echo hello word&quot;      About hour ago   Exited (0) hour ago      dazzling</span><br><span class="line"></span><br><span class="line"># &#x5C1D;&#x8BD5;&#x542F;&#x52A8;&#x5B89;&#x88C5;&#x4E86; net-tools &#x7684;&#x5BB9;&#x5668;&#xFF0C;</span><br><span class="line"># -i &#x7684;&#x610F;&#x601D;&#x662F;&#x628A;&#x4FE1;&#x606F;&#x8F93;&#x51FA;&#x5230;&#x63A7;&#x5236;&#x53F0;&#x4E2D;&#xFF0C;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6267;&#x884C;&#x540E;&#x5C31;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;CONTAINER ID</span><br><span class="line">-&gt;docker start -i 2f1bbd6c30e3</span><br><span class="line">  Loaded plugins: fastestmirror, ovl</span><br><span class="line">  Loading mirror speeds from cached hostfile</span><br><span class="line">   * base: mirrors.aliyun.com</span><br><span class="line">   * extras: mirrors.aliyun.com</span><br><span class="line">   * updates: mirrors.cn99.com</span><br><span class="line">  Package net-tools-2.0-0.22.20131004git.el7.x86_64 already installed and latest version</span><br><span class="line">  Nothing to do</span><br><span class="line">-&gt;docker ps  #&#x67E5;&#x770B;&#x6D3B;&#x52A8;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  CONTAINER ID    IMAGE    COMMAND          CREATED          STATUS      PORTS         NAMES</span><br><span class="line">  10c5c2754279    centos   &quot;ping lozz.cc&quot;   30 minutes ago   Up 30 minutes             jolly</span><br><span class="line">-&gt;docker stop 10c5c2754279  #&#x505C;&#x6B62;&#x6267;&#x884C;ping&#x547D;&#x4EE4;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  10c5c2754279</span><br><span class="line">-&gt;docker start -i 10c5c2754279  #&#x542F;&#x52A8;&#x6267;&#x884C;ping&#x547D;&#x4EE4;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  PING lorencoll.coding.me (103.72.144.62) 56(84) bytes of data.</span><br><span class="line">  64 bytes from 103.72.144.62 (103.72.144.62): icmp_seq=1 ttl=37 time=15.1 ms</span><br><span class="line">  64 bytes from 103.72.144.62 (103.72.144.62): icmp_seq=2 ttl=37 time=16.3 ms</span><br><span class="line">  64 bytes from 103.72.144.62 (103.72.144.62): icmp_seq=3 ttl=37 time=16.8 ms</span><br><span class="line">  Ctrl+C</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x4E0A;&#x9762;&#x7684;&#x63D0;&#x793A;&#x5C31;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;&#x8FD9;&#x4E2A; start &#x547D;&#x4EE4;&#x628A;&#x4E4B;&#x524D;&#x521B;&#x5EFA;&#x547D;&#x4EE4; docker run centos yum -y install net-tools &#x4E2D;&#x7684; yum -y install net-tools &#x4E5F;&#x6267;&#x884C;&#x4E86;&#x4E00;&#x904D;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x8FC7;&#x4E86; net-tools &#xFF0C;&#x6240;&#x4EE5; yum &#x624D;&#x63D0;&#x793A;&#x4E0D;&#x9700;&#x8981;&#x5B89;&#x88C5;&#xFF0C;&#x67E5;&#x770B;&#x6D3B;&#x52A8;&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#x8FD8;&#x662F;&#x53EA;&#x6709;&#x4E4B;&#x524D;&#x7684;&#x5BB9;&#x5668;&#x5728;&#x8FD0;&#x884C;&#x3002;&#x90A3;&#x4E48;&#x73B0;&#x5728;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x5B89;&#x88C5; net-tools &#x7684;&#x90A3;&#x4E2A;&#x5BB9;&#x5668;&#x4E0D;&#x80FD;&#x7528;&#x4E86;&#x5417;&#xFF0C;&#x5176;&#x5B9E;&#x4E0D;&#x7136;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x4E4B;&#x6240;&#x4EE5;&#x201C;&#x4E0D;&#x80FD;&#x7528;&#x201D;&#x53EA;&#x662F;&#x56E0;&#x4E3A;&#x521B;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x5408;&#x9002;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x8981;&#x7528;&#x5B83;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x628A;&#x4ED6;&#x4ECE;&#x65B0;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A; image &#x4E5F;&#x5C31;&#x662F;&#x955C;&#x50CF;&#xFF0C;&#x6253;&#x5305;&#x597D;&#x4E86;&#x540E;&#x518D;&#x901A;&#x8FC7;&#x5B83;&#x751F;&#x6210;&#x5BB9;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x8FD9;&#x4E5F;&#x7B26;&#x5408; Docker &#x7684;&#x5E94;&#x7528;&#x9694;&#x79BB;&#x601D;&#x60F3;&#xFF0C;&#x628A;&#x5BB9;&#x5668;&#x6253;&#x5305;&#x6210;&#x955C;&#x50CF;&#x7684;&#x547D;&#x4EE4;&#x5F88;&#x7B80;&#x5355; docker commit container_id image_name&#xFF0C;&#x6211;&#x7684;&#x6253;&#x5305;&#x547D;&#x4EE4;&#x662F; docker commit 2f1bbd6c30e3 lorenwe/centos_net_tools&#xFF0C;&#x8FD9;&#x4E2A;&#x547D;&#x540D;&#x662F;&#x6709;&#x89C4;&#x77E9;&#x7684;&#xFF0C;&#x524D;&#x9762;&#x662F; docker &#x7684;&#x7528;&#x6237;id&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x628A;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x63A8;&#x9001;&#x5230; docker hub &#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x5C31;&#x4E0D;&#x80FD;&#x968F;&#x4FBF;&#x547D;&#x540D;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x63A8;&#x9001;&#x5230; docker hub &#x5C31;&#x65E0;&#x6240;&#x8C13;&#x4E86;&#xFF0C;&#x4F46;&#x4E5F;&#x4E0D;&#x80FD;&#x592A;&#x968F;&#x4FBF;&#x5BF9;&#x4E0D;&#x5BF9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker ps -a</span><br><span class="line">  CONTAINER ID    IMAGE    COMMAND                CREATED        STATUS     PORTS     NAMES</span><br><span class="line">  10c5c2754279    centos   &quot;ping lozz.cc&quot;         About an hour ago                   jolly</span><br><span class="line">  2f1bbd6c30e3    centos   &quot;yum install -y ne...&quot; About an hour ago                   competent</span><br><span class="line">  35129633c933    centos   &quot;echo hello word&quot;      About an hour ago                   dazzling</span><br><span class="line">-&gt;docker commit 2f1bbd6c30e3 lorenwe/centos_net_tools</span><br><span class="line">  sha256:35f8073cede14473601d9f138a9815bc9ab5c7d97f914ca2f5ce910bd78b5750</span><br><span class="line">-&gt;docker images</span><br><span class="line">  REPOSITORY                  TAG          IMAGE ID         CREATED             SIZE</span><br><span class="line">  lorenwe/centos_net_tools    latest       35f8073cede1     23 seconds ago      277MB</span><br><span class="line">  centos                      latest       d123f4e55e12     2 weeks ago         197MB</span><br><span class="line">  d4w/nsenter                 latest       9e4f13a0901e     14 months ago       83.8kB</span><br></pre></td></tr></table></figure>

<p>&#x5C31;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF0C;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x955C;&#x50CF;(image)&#x5C31;&#x521B;&#x5EFA;&#x597D;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x6765;&#x505A;&#x4E9B;&#x6709;&#x8DA3;&#x7684;&#x4E8B;&#x60C5;&#x4E86;&#xFF0C;&#x4F9D;&#x7136;&#x662F; docker run &#x547D;&#x4EE4;&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x8FD9;&#x6B21;&#x591A;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;&#x5982; docker run -itd &#x2013;name my_net_tools lorenwe/centos_net_tools /bin/bash<br>&#x5176;&#x4E2D;&#x53C2;&#x6570; itd &#x5206;&#x522B;&#x662F;&#x8868;&#x793A; &#x2018;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x7ED9;&#x5BB9;&#x5668;&#x2019;&#xFF0C;&#x2018;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x865A;&#x62DF;&#x7EC8;&#x7AEF;&#x2019;&#xFF0C;&#x2018;&#x4EE5;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#x65B9;&#x5F0F;&#x8FD0;&#x884C;&#xFF08;&#x540E;&#x53F0;&#xFF09;&#x2019;&#xFF0C; &#x2013;name &#x81EA;&#x7136;&#x662F;&#x6307;&#x5B9A;&#x521B;&#x5EFA;&#x540E;&#x5BB9;&#x5668;&#x7684;&#x540D;&#x79F0;&#x4E86;&#xFF0C;/bin/bash &#x6267;&#x884C;bash&#x811A;&#x672C;&#xFF0C;&#x6267;&#x884C;&#x4EE5;&#x4E0A;&#x547D;&#x4EE4;&#xFF0C;&#x5C31;&#x80FD;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x540E;&#x53F0;&#x8FD0;&#x884C;&#x7684;&#x5BB9;&#x5668;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker run -itd --name my_net_tools lorenwe/centos_net_tools /bin/bash</span><br><span class="line">  e1d843f7726f67d2635042695e2065b383736a341edd2e83753be9fabec03de0</span><br><span class="line">-&gt;docker ps  #&#x67E5;&#x770B;&#x6D3B;&#x52A8;&#x7684;&#x5BB9;&#x5668;</span><br><span class="line">  CONTAINER ID   IMAGE                     COMMAND      CREATED      STATUS   PORTS      NAMES</span><br><span class="line">  e1d843f7726f   lorenwe/centos_net_tools  &quot;/bin/bash&quot;  7 seconds ago                    my_net_tools</span><br><span class="line">  10c5c2754279   centos                    &quot;ping lozz.cc&quot;            Up 25 minutes       jolly</span><br></pre></td></tr></table></figure>

<p>&#x55EF;&#xFF0C;&#x8FD0;&#x884C;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x5462;&#xFF0C;&#x5F53;&#x7136;&#x662F;&#x53EF;&#x4EE5;&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x4E2D;&#x73A9;&#x73A9;&#x5440;&#xFF0C;&#x4F7F;&#x7528; docker attach container_id &#x8FDB;&#x5165;Docker&#x5BB9;&#x5668;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker attach e1d843f7726f</span><br><span class="line">[root@e1d843f7726f /]# ip addr</span><br><span class="line">bash: ip: command not found</span><br><span class="line">[root@e1d843f7726f /]# ifconfig</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.3  netmask 255.255.0.0  broadcast 0.0.0.0</span><br><span class="line">        ether 02:42:ac:11:00:03  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 40  bytes 1900 (1.8 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@e1d843f7726f /]#</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x662F;&#x57FA;&#x4E8E; centos &#x6765;&#x7684;&#xFF0C;&#x800C; docker &#x7684;&#x57FA;&#x7840; centos &#x955C;&#x50CF;&#x90FD;&#x662F;&#x7CBE;&#x7B80;&#x7248;&#x7684;&#xFF0C;&#x6545;&#x5F88;&#x591A;&#x547D;&#x4EE4;&#x6CA1;&#x6709;&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x4E2A; ip addr &#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E4B;&#x524D;&#x9009;&#x62E9;&#x5B89;&#x88C5; net-tools &#x7684;&#x539F;&#x56E0;&#xFF0C;&#x56E0;&#x4E3A;&#x5B89;&#x88C5;&#x4E86;&#x8FD9;&#x4E2A;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ifconfig &#x6765;&#x67E5;&#x770B;&#x7F51;&#x5361;&#x914D;&#x7F6E;&#x3002;&#x81F3;&#x6B64;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5BF9; docker &#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x672C;&#x7684;&#x4E86;&#x89E3;&#x4E86;&#x5462;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x7A81;&#x7136;&#x6765;&#x4E86;&#x4E00;&#x4E2A;&#x7075;&#x611F;&#xFF0C;&#x6BD4;&#x5982;&#x60F3;&#x8981;&#x642D;&#x5EFA;&#x4E00;&#x4E2A; Nginx &#x9759;&#x6001;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6B65;&#x9AA4;&#x5C31;&#x662F; pull &#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x955C;&#x50CF;&#x4E0B;&#x6765;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x57FA;&#x7840;&#x955C;&#x50CF; run &#x51FA;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x540E;&#x518D;&#x5BB9;&#x5668;&#x5185;&#x5B89;&#x88C5;&#x4E0A; Nginx &#x4E4B;&#x540E;&#x518D;&#x4ECE;&#x65B0;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x955C;&#x50CF;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#x4F7F;&#x7528; docke &#x6784;&#x5EFA;&#x955C;&#x50CF;&#x4E0D;&#x4F1A;&#x90A3;&#x6837;&#x53BB;&#x505A;&#xFF0C;&#x6B65;&#x9AA4;&#x7E41;&#x7410;&#x4E0D;&#x8BF4;&#xFF0C;&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x7075;&#x6D3B;&#xFF0C;&#x6BD5;&#x7ADF;&#x4E4B;&#x524D;&#x6784;&#x5EFA;&#x7684; lorenwe/centos_net_tools &#x955C;&#x50CF;&#x4E5F;&#x6709;277MB&#x5462;&#xFF01;&#x5206;&#x53D1;&#x8D77;&#x6765;&#x4E0D;&#x592A;&#x65B9;&#x4FBF;&#xFF0C;&#x4E8E;&#x662F; Dockerfile &#x51FA;&#x73B0;&#x4E86;&#xFF0C;&#x5176;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x7279;&#x5B9A;&#x7684;&#x683C;&#x5F0F;&#x628A;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x63CF;&#x8FF0;&#x51FA;&#x6765;&#xFF0C;&#x901A;&#x8FC7; docker &#x6765;&#x6784;&#x5EFA;&#x51FA;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#xFF0C;&#x63CF;&#x8FF0;&#x7684;&#x6D41;&#x7A0B;&#x5176;&#x5B9E;&#x548C;&#x4E4B;&#x524D;&#x7684;&#x624B;&#x52A8;&#x6784;&#x5EFA;&#x7684;&#x6D41;&#x7A0B;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x901A;&#x8FC7;&#x540C;&#x4E00;&#x4E2A; Dockerfile &#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x51FA;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F; docke &#x5E38;&#x7528;&#x4E8E;&#x5DE5;&#x4F5C;&#x4E2D;&#x7EDF;&#x4E00;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<h3 id="&#x56DB;&#x3001;&#x628A;-docker-&#x63A8;&#x9001;&#x5230;-docker-hub"><a href="#&#x56DB;&#x3001;&#x628A;-docker-&#x63A8;&#x9001;&#x5230;-docker-hub" class="headerlink" title="&#x56DB;&#x3001;&#x628A; docker &#x63A8;&#x9001;&#x5230; docker hub"></a>&#x56DB;&#x3001;&#x628A; docker &#x63A8;&#x9001;&#x5230; docker hub</h3><p>&#x63A8;&#x9001;&#x955C;&#x50CF;&#x7684;&#x547D;&#x4EE4;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981; docker push image_name &#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x5728;&#x628A;&#x955C;&#x50CF;&#x63A8;&#x9001;&#x5230; docker hub &#x4E4B;&#x524D;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x4E9B;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#x8981;&#x505A;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x53BB; docker hub &#x6CE8;&#x518C;&#x4E00;&#x4E2A;&#x8D26;&#x53F7;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x5728; docker &#x4E2D;&#x767B;&#x5165;&#x8FD9;&#x4E2A;&#x8D26;&#x53F7;&#x5C31;&#x53EF;&#x4EE5;&#x63A8;&#x9001;&#x955C;&#x50CF;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;-&gt;docker login  #&#x767B;&#x5165;&#x5230; docker hub</span><br><span class="line">  Login with your Docker ID to push and pull images from Docker Hub. </span><br><span class="line">  If you don&apos;t have a Docker ID, head over to https://hub.docker.com to create one.</span><br><span class="line">  Username (lorenwe): lorenwe</span><br><span class="line">  Password:</span><br><span class="line">  Login Succeeded</span><br><span class="line">  # &#x73B0;&#x5728;&#x5C31;&#x53EF;&#x63A8;&#x9001;&#x955C;&#x50CF;&#x5230; docker hub</span><br><span class="line">-&gt;docker images</span><br><span class="line">  REPOSITORY                TAG        IMAGE ID            CREATED             SIZE</span><br><span class="line">  lorenwe/centos_net_tools  latest     35f8073cede1        About an hour ago   277MB</span><br><span class="line">  centos                    latest     d123f4e55e12        2 weeks ago         197MB</span><br><span class="line">  d4w/nsenter               latest     9e4f13a0901e        14 months ago       83.8kB</span><br><span class="line">-&gt;docker push lorenwe/centos_net_tools</span><br><span class="line">  The push refers to a repository [docker.io/lorenwe/centos_net_tools]</span><br><span class="line">  d0ba94ecc37e: Pushed</span><br><span class="line">  cf516324493c: Mounted from library/centos</span><br><span class="line">  latest: digest: sha256:276814315437cf5d416ed4b5713fe10c914beaea96bcf583b786a6778c80830f size: 741</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x5899;&#x548C; docker hub &#x7684;&#x670D;&#x52A1;&#x5668;&#x79BB;&#x5929;&#x671D;&#x8FDC;&#x7684;&#x539F;&#x56E0;&#x63A8;&#x9001;&#x4F1A;&#x5F88;&#x6162;&#xFF0C;&#x6210;&#x529F;&#x540E;&#x5C31;&#x80FD;&#x5728; docker hub &#x7684;&#x4E2A;&#x4EBA;&#x4E2D;&#x5FC3;&#x770B;&#x5230;&#x81EA;&#x5DF1;&#x63A8;&#x9001;&#x7684;&#x955C;&#x50CF;&#x4E86;&#xFF0C;&#x4EE5;&#x540E;&#x60F3;&#x8981;&#x5728;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x955C;&#x50CF;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5; docker pull &#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x628A;&#x955C;&#x50CF;&#x63A8;&#x9001;&#x5230;&#x56FD;&#x5185;&#x7684;&#x5BB9;&#x5668;&#x955C;&#x50CF;&#x670D;&#x52A1;&#x5E73;&#x53F0;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x7528;&#x7684;&#x662F;&#x963F;&#x91CC;&#x4E91;&#x7684;&#x5BB9;&#x5668;Hub&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x901F;&#x5EA6;&#x5FEB;&#x5427;&#x6240;&#x4EE5;&#x7528;&#x7740;&#x8212;&#x670D;&#x4E86;&#xFF0C;&#x552F;&#x4E00;&#x4E0D;&#x597D;&#x7684;&#x5C31;&#x662F;&#x90A3;&#x53C8;&#x81ED;&#x53C8;&#x957F;&#x7684;&#x955C;&#x50CF;&#x540D;&#x79F0;&#x6709;&#x70B9;&#x96BE;&#x53D7;&#x3002;</p>
<h3 id="&#x4E94;&#x3001;&#x7ED3;&#x8BED;"><a href="#&#x4E94;&#x3001;&#x7ED3;&#x8BED;" class="headerlink" title="&#x4E94;&#x3001;&#x7ED3;&#x8BED;"></a>&#x4E94;&#x3001;&#x7ED3;&#x8BED;</h3><p>docker &#x57FA;&#x7840;&#x5230;&#x8FD9;&#x4E00;&#x6B65;&#x5DF2;&#x7ECF;&#x662F;&#x4ECB;&#x7ECD;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#xFF0C;&#x5199;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x76EE;&#x7684;&#x5C31;&#x662F;&#x7528;&#x901A;&#x4FD7;&#x6613;&#x61C2;&#x7684;&#x8BED;&#x8A00;&#x53CA;&#x793A;&#x4F8B;&#x6765;&#x8BB2;&#x660E; docker &#x955C;&#x50CF;&#x4E0E;&#x5BB9;&#x5668;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x9650;&#x4E8E;&#x7BC7;&#x5E45; docker &#x8FD8;&#x6709;&#x5F88;&#x591A;&#x529F;&#x80FD;&#x6CA1;&#x6709;&#x4ECB;&#x7ECD;&#xFF0C;&#x65E5;&#x540E;&#x6709;&#x65F6;&#x95F4;&#x518D;&#x6765;&#x505A;&#x540E;&#x7EED;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x4F8B;&#x5982; Dockerfile&#xFF0C;docker &#x5377;&#x7684;&#x5171;&#x4EAB;&#x548C;&#x7F51;&#x7EDC;&#x901A;&#x4FE1;&#x7B49;&#x7B49;&#x90FD;&#x662F;&#x4E00;&#x4E9B;&#x7279;&#x522B;&#x6709;&#x610F;&#x601D;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6A21;&#x62DF;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x53EF;&#x79FB;&#x690D;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x5F00;&#x53D1;&#x5E73;&#x53F0;&#x5DF2;&#x7ECF;&#x4E0D;&#x662F;&#x68A6;&#x4E86;&#x3002;<br>&#x5904;&#x5973;&#x4F5C;&#xFF0C;&#x8FD8;&#x671B;&#x8F7B;&#x55B7;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/cc3ace6bdbd1f4047fbe8cd285bd6fc4.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../278/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../278/">278</a><span class="page-number current">279</span><a class="page-number" href="../280/">280</a><span class="space">&hellip;</span><a class="page-number" href="../298/">298</a><a class="extend next" rel="next" href="../280/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">2975</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1162</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
