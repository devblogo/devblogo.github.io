<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/83/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/83/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7326759726893367296.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7326759726893367296.html" itemprop="url">2023年总结：聊一聊我这10年做过的副业</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-22T20:42:43+08:00">
                2024-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/0afbc145cf2a2486d51b16e67efca562125a0de20084284720eb24d05ed6d68e" alt="&#x5FC5;&#x770B;&#x5927;&#x5B57;&#x6700;&#x65B0;&#x6D88;&#x606F;&#x91CD;&#x78C5;&#x516C;&#x4F17;&#x53F7;&#x9996;&#x56FE;.jpg"></p>
<blockquote>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x6211;&#x7684;2023&#x5E74;&#x7EC8;&#x603B;&#x7ED3;&#xFF0C;&#x6211;&#x4ECE;&#x516C;&#x4F17;&#x53F7;&#x540C;&#x6B65;&#x5230;&#x6398;&#x91D1;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6211;&#x8FD9;10&#x5E74;&#x7684;&#x526F;&#x4E1A;&#x7ECF;&#x9A8C;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x5927;&#x5BB6;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;</p>
</blockquote>
<p>&#x4ECA;&#x5929;&#x662F;2023&#x5E74;&#x6700;&#x540E;&#x4E00;&#x5929;&#xFF0C;&#x4ECA;&#x5E74;&#x662F;&#x4E0D;&#x5E73;&#x51E1;&#x7684;&#x4E00;&#x5E74;&#xFF0C;&#x4E5F;&#x662F;&#x53D8;&#x52A8;&#x6700;&#x5927;&#x7684;&#x4E00;&#x5E74;&#xFF0C;&#x5927;&#x5BB6;&#x4E5F;&#x77E5;&#x9053;&#xFF0C;&#x561F;&#x561F;&#x6700;&#x8FD1;&#x79BB;&#x804C;&#x4E86;&#xFF0C;&#x5230;&#x73B0;&#x5728;&#x4E5F;&#x6709;72&#x5929;&#x4E86;&#xFF0C;&#x4ECE;&#x6B64;&#x5F00;&#x59CB;&#x8D70;&#x81EA;&#x7531;&#x804C;&#x4E1A;&#x7684;&#x9053;&#x8DEF;&#xFF0C;&#x800C;&#x80FD;&#x652F;&#x6491;&#x6211;&#x4E0B;&#x51B3;&#x5B9A;&#x505A;&#x81EA;&#x7531;&#x804C;&#x4E1A;&#xFF0C;&#x5DE7;&#x597D;&#x662F;&#x8FD9;&#x51E0;&#x5E74;&#x4E0D;&#x65AD;&#x7684;&#x526F;&#x4E1A;&#x5C1D;&#x8BD5;&#xFF0C;&#x6BCF;&#x4E2A;&#x6708;&#x8D5A;&#x5230;&#x7684;&#x94B1;&#x53EF;&#x4EE5;&#x8986;&#x76D6;&#x6211;&#x7684;&#x751F;&#x6D3B;&#x652F;&#x51FA;&#xFF0C;&#x8FD9;&#x7ED9;&#x6211;&#x4E86;&#x83AB;&#x5927;&#x7684;&#x4FE1;&#x5FC3;&#xFF0C;&#x6211;&#x4E00;&#x76F4;&#x76F8;&#x4FE1;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x50CF;&#x8FD0;&#x8425;&#x516C;&#x53F8;&#x4E00;&#x4E0B;&#x8FD0;&#x8425;&#x81EA;&#x5DF1;&#xFF0C;&#x6211;&#x4EEC;&#x5E73;&#x65F6;&#x5DE5;&#x4F5C;&#x53EA;&#x662F;&#x7528;8&#x5C0F;&#x65F6;&#x6362;&#x53D6;&#x5BF9;&#x5E94;&#x7684;&#x62A5;&#x916C;&#x800C;&#x5DF2;&#xFF0C;&#x90A3;&#x6211;&#x628A;&#x8FD9;8&#x5C0F;&#x65F6;&#x6295;&#x5165;&#x5230;&#x5176;&#x4ED6;&#x9886;&#x57DF;&#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x9020;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x4EF7;&#x503C;&#x3002;</p>
<p>&#x6211;&#x8EAB;&#x8FB9;&#x5C31;&#x6709;2&#x4E2A;&#x540C;&#x5B66;&#x90FD;&#x662F;&#x505A;&#x81EA;&#x7531;&#x804C;&#x4E1A;&#x7684;&#xFF0C;&#x4E5F;&#x662F;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x5DF2;&#x7ECF;2-3&#x5E74;&#x4E86;&#xFF0C;&#x4ED6;&#x4EEC;&#x4E5F;&#x662F;&#x901A;&#x8FC7;&#x81EA;&#x5DF1;&#x5F00;&#x62D3;&#x4E86;&#x7A33;&#x5B9A;&#x7684;&#x6536;&#x76CA;&#x6A21;&#x5F0F;&#xFF0C;&#x6211;&#x5F88;&#x4F69;&#x670D;&#xFF0C;&#x56E0;&#x4E3A;&#x770B;&#x5230;&#xFF0C;&#x6240;&#x4EE5;&#x76F8;&#x4FE1;&#x3002;&#x7A0B;&#x5E8F;&#x5458;&#x662F;&#x4E2A;&#x9AD8;&#x5371;&#x804C;&#x4E1A;&#xFF0C;35+&#x540E;&#x8D8A;&#x6765;&#x8D8A;&#x96BE;&#xFF0C;&#x8981;&#x4E48;&#x4F60;&#x80FD;&#x6DF7;&#x5230;&#x7BA1;&#x7406;&#x5C42;&#xFF0C;&#x6216;&#x8005;&#x5728;&#x5927;&#x5382;&#x8D5A;&#x5230;&#x4E86;&#x8DB3;&#x591F;&#x591A;&#x7684;&#x94B1;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x4EBA;&#x8FD8;&#x662F;&#x505A;&#x7F16;&#x7A0B;&#x7684;&#x8BDD;&#xFF0C;&#x672A;&#x6765;&#x7684;&#x96BE;&#x5EA6;&#x4F1A;&#x6BD4;&#x8F83;&#x5927;&#x7684;&#xFF0C;&#x8FD9;&#x4E24;&#x5E74;&#x4E92;&#x8054;&#x7F51;&#x884C;&#x4E1A;&#x7EA2;&#x5229;&#x671F;&#x5DF2;&#x7ECF;&#x8FC7;&#x4E86;&#xFF0C; &#x6709;&#x70B9;&#x50CF;&#x571F;&#x6728;&#x4E13;&#x4E1A;&#xFF0C;&#x5404;&#x5927;&#x5E73;&#x53F0;&#x73B0;&#x5728;&#x6C42;&#x7A33;&#x7684;&#x6BD4;&#x8F83;&#x591A;&#xFF0C;&#x5F88;&#x591A;&#x4E1A;&#x52A1;&#x7EBF;&#x90FD;&#x780D;&#x6389;&#x4E86;&#xFF0C;&#x88C1;&#x5458;&#x7684;&#x6D88;&#x606F;&#x4ECE;&#x6765;&#x4E0D;&#x95F4;&#x65AD;&#x8FC7;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;&#x6BCF;&#x4E2A;&#x4EBA;&#x9700;&#x8981;&#x6709;&#x8FD9;&#x79CD;&#x5FE7;&#x60A3;&#x610F;&#x8BC6;&#xFF0C;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x81EA;&#x5DF1;&#x7684;&#x7B2C;&#x4E8C;&#x6761;&#x53D1;&#x5C55;&#x66F2;&#x7EBF;&#x3002;</p>
<p>&#x5411;&#x6211;&#x54A8;&#x8BE2;&#x7684;&#x670B;&#x53CB;&#x4E5F;&#x633A;&#x591A;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x4E5F;&#x6709;&#x8FD9;&#x4E2A;&#x610F;&#x8BC6;&#xFF0C;&#x77E5;&#x9053;&#x9E21;&#x86CB;&#x4E0D;&#x80FD;&#x653E;&#x4E00;&#x4E2A;&#x7BEE;&#x5B50;&#x91CC;&#xFF0C;&#x5E94;&#x8BE5;&#x65E9;&#x70B9;&#x601D;&#x8003;&#x804C;&#x573A;&#x4E4B;&#x5916;&#x7684;&#x53E6;&#x4E00;&#x6761;&#x8DEF;&#xFF0C;&#x4F46;&#x662F;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x8FF7;&#x832B;&#x70B9;&#x5728;&#x4E8E;&#x4E0D;&#x77E5;&#x9053;&#x4ECE;&#x4F55;&#x5165;&#x624B;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x561F;&#x561F;&#x8FD9;&#x91CC;&#x51C6;&#x5907;&#x638F;&#x5FC3;&#x7A9D;&#xFF0C;&#x7ED9;&#x5927;&#x4F19;&#x8BF4;&#x4E00;&#x4E0B;&#x6211;&#x4ECE;&#x6BD5;&#x4E1A;&#x5230;&#x73B0;&#x5728;&#xFF0C;&#x8FD9;&#x4E48;&#x591A;&#x5E74;&#x671F;&#x95F4;&#xFF0C;&#x6211;&#x90FD;&#x5C1D;&#x8BD5;&#x4E86;&#x54EA;&#x4E9B;&#x526F;&#x4E1A;&#xFF0C;&#x6211;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x60F3;&#x505A;&#x526F;&#x4E1A;&#xFF0C;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x4E00;&#x70B9;&#x4E00;&#x70B9;&#x6478;&#x7D22;&#x7684;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x8FF7;&#x832B;&#x7684;&#x670B;&#x53CB;&#x6709;&#x70B9;&#x5E2E;&#x52A9;&#x3002;</p>
<p>&#x6211;&#x662F;2012&#x5E74;&#x6BD5;&#x4E1A;&#x7684;&#xFF0C;java&#x65B9;&#x5411;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;&#x4E0D;&#x7B97;&#x5F88;&#x806A;&#x660E;&#xFF0C;&#x4F46;&#x662F;&#x4E3A;&#x4EBA;&#x6BD4;&#x8F83;&#x8001;&#x5B9E;&#x80AF;&#x5E72;&#xFF0C;&#x4E5F;&#x6709;&#x4E00;&#x80A1;&#x62FC;&#x52B2;&#xFF0C;&#x8FD0;&#x6C14;&#x597D;&#x9047;&#x5230;&#x4E00;&#x4E2A;&#x597D;&#x5BFC;&#x5E08;&#xFF0C;&#x5E26;&#x7740;&#x6211;&#x5F00;&#x59CB;&#x4E86;&#x7F16;&#x7A0B;&#x4E4B;&#x65C5;&#x3002;&#x6211;&#x7684;<strong>&#x7B2C;&#x4E00;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x662F;&#x63A5;&#x79C1;&#x6D3B;&#xFF0C;&#x8DDF;&#x7740;&#x9886;&#x5BFC;&#x5E72;&#x7684;&#xFF0C;&#x8FD9;&#x7B97;&#x662F;&#x88AB;&#x52A8;&#x7684;&#x53C2;&#x52A0;&#x4E86;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x5176;&#x5B9E;&#x8FD8;&#x6CA1;&#x6709;&#x4E3B;&#x52A8;&#x505A;&#x526F;&#x4E1A;&#x7684;&#x5FC3;&#x601D;&#xFF0C;&#x60F3;&#x7740;&#x8FB9;&#x505A;&#x8FB9;&#x6253;&#x78E8;&#x6280;&#x672F;&#x3002;</p>
<p><strong>&#x7B2C;&#x4E8C;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x4E5F;&#x7B97;&#x662F;&#x610F;&#x5916;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x5728;&#x73A9;&#x624B;&#x6E38;&#xFF0C;&#x624B;&#x673A;&#x7AEF;&#x5929;&#x9F99;&#x516B;&#x90E8;3D&#x7684;&#x6E38;&#x620F;&#xFF0C;&#x6211;&#x73A9;&#x7684;&#x5185;&#x6D4B;&#xFF0C;&#x9009;&#x7684;&#x662F;&#x548C;&#x5C1A;&#xFF0C;&#x73A9;&#x7684;&#x592A;&#x5389;&#x5BB3;&#x628A;&#x5185;&#x90E8;&#x4EBA;&#x5458;&#x90FD;&#x7ED9;&#x5E72;&#x8DB4;&#x4E0B;&#x4E86;&#xFF0C;&#x83B7;&#x5F97;&#x7B2C;&#x4E00;&#x6B21;&#x6BD4;&#x6B66;&#x5927;&#x4F1A;&#x7684;&#x51A0;&#x519B;&#xFF0C;&#x5BF9;&#x65B9;&#x89C9;&#x5F97;&#x6211;&#x80FD;&#x529B;&#x4E0D;&#x9519;&#xFF0C;&#x5C31;&#x52A0;&#x6211;qq&#x8BF4;&#x8BA9;&#x6211;&#x5F53;&#x4E2A;&#x8BBA;&#x575B;&#x6591;&#x7AF9;&#xFF0C;&#x5199;&#x4E00;&#x4E9B;&#x653B;&#x7565;&#x6559;&#x7A0B;&#x4E4B;&#x7C7B;&#xFF0C;&#x6BCF;&#x7BC7;&#x7EA6;&#x7A3F;200-300&#xFF0C;&#x7528;&#x4EAC;&#x4E1C;E&#x5361;&#x6765;&#x652F;&#x4ED8;&#xFF0C;&#x6211;&#x4E00;&#x542C;&#xFF0C;&#x5B8C;&#x5168;&#x6CA1;&#x95EE;&#x9898;&#x554A;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x5F00;&#x5F00;&#x5FC3;&#x5FC3;&#x4E86;&#x5F00;&#x59CB;&#x4E86;&#x8FD9;&#x4EFD;&#x610F;&#x5916;&#x7684;&#x526F;&#x4E1A;&#x4E4B;&#x65C5;&#x3002;&#x4E00;&#x5171;&#x5199;&#x4E86;&#x4E5F;&#x6709;&#x51E0;&#x5341;&#x7BC7;&#xFF0C;&#x5199;&#x4F5C;&#x80FD;&#x529B;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x5F00;&#x59CB;&#x5F97;&#x5230;&#x953B;&#x70BC;&#x4E86;&#xFF0C;&#x7B97;&#x662F;&#x610F;&#x5916;&#x7684;&#x6536;&#x83B7;&#x5427;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/94680e7e663debb358b49021104333f534525463b8c176fbbe4c25826e78a48d" alt="image.png"></p>
<p>&#x4E0A;&#x9762;&#x8FD9;&#x4E9B;&#x90FD;&#x4E0D;&#x7B97;&#x4E3B;&#x52A8;&#x6709;&#x526F;&#x4E1A;&#x610F;&#x8BC6;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x6765;&#x5BB6;&#x91CC;&#x5DE8;&#x53D8;&#xFF0C;&#x628A;&#x623F;&#x5B50;&#x62FF;&#x53BB;&#x62B5;&#x62BC;&#x8D37;&#x6B3E;&#x7684;&#x94B1;&#x62FF;&#x53BB;&#x5F00;&#x7F51;&#x5427;&#xFF0C;&#x540E;&#x6765;&#x4E8F;&#x672C;&#x4E86;&#xFF0C;&#x6BCF;&#x4E2A;&#x6708;&#x9700;&#x8981;&#x8FD8;&#x6B3E;9000&#x591A;&#xFF0C;&#x7236;&#x6BCD;&#x8D5A;&#x7684;&#x94B1;&#x4E0D;&#x591F;&#x8FD8;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x6211;&#x8FD9;&#x91CC;&#x5E2E;&#x5FD9;&#x652F;&#x6491;&#xFF0C;&#x4ED6;&#x4EEC;&#x517B;&#x80B2;&#x4E86;&#x8FD9;&#x4E48;&#x4E45;&#xFF0C;&#x6211;&#x80AF;&#x5B9A;&#x9700;&#x8981;&#x5E2E;&#x5FD9;&#x627F;&#x62C5;&#x8FD9;&#x4E2A;&#x8D23;&#x4EFB;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x4E09;&#x5E74;&#x65F6;&#x95F4;&#xFF0C;&#x6211;&#x6BCF;&#x4E2A;&#x6708;&#x90FD;&#x662F;&#x628A;&#x5DE5;&#x8D44;&#x5168;&#x90E8;&#x7ED9;&#x4ED6;&#x4EEC;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x5DE5;&#x8D44;&#x5F88;&#x4F4E;&#x7684;&#xFF0C;&#x5230;&#x624B;&#x4E5F;&#x5C31;5000&#x521D;&#x5934;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x8FD8;&#x4E0D;&#x591F;&#xFF0C;&#x5C31;&#x5F00;&#x59CB;&#x5B66;&#x4F1A;&#x4F7F;&#x7528;&#x4FE1;&#x7528;&#x5361;&#x5237;&#x51FA;&#x6765;&#x8FD8;&#xFF0C;2&#x5F20;&#x5361;&#x4E92;&#x76F8;&#x5237;&#xFF0C;&#x6BCF;&#x4E2A;&#x6708;&#x591A;&#x5237;1000-2000&#xFF0C;&#x7136;&#x540E;&#x5E74;&#x5E95;&#x7B49;&#x53D1;&#x5E74;&#x7EC8;&#x5956;&#x6216;&#x8005;&#x79C1;&#x6D3B;&#x9879;&#x76EE;&#x53D1;&#x94B1;&#x4E86;&#x518D;&#x628A;&#x4FE1;&#x7528;&#x5361;&#x8FD8;&#x6E05;&#x6B20;&#x6B3E;&#x3002;</p>
<p>&#x8FD9;&#x65F6;&#x5019;&#x6211;&#x5F00;&#x59CB;&#x6709;&#x60F3;&#x6CD5;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E09;&#x5E74;&#x7684;&#x75DB;&#x82E6;&#x7ECF;&#x9A8C;&#xFF0C;&#x8BA9;&#x6211;&#x5BF9;&#x91D1;&#x94B1;&#x7684;&#x6E34;&#x671B;&#x653E;&#x5927;&#x4E86;&#x5F88;&#x591A;&#x500D;&#xFF0C;&#x60F3;&#x7740;&#x5FC5;&#x987B;&#x63D0;&#x9AD8;&#x81EA;&#x5DF1;&#xFF0C;&#x60F3;&#x529E;&#x6CD5;&#x8DF3;&#x69FD;&#x6DA8;&#x4E2A;&#x9AD8;&#x5DE5;&#x8D44;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x5F00;&#x59CB;&#x82B1;&#x66F4;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x5B66;&#x4E60;&#xFF0C;&#x5E76;&#x5F00;&#x59CB;&#x5C1D;&#x8BD5;&#x5199;&#x535A;&#x5BA2;&#x3001;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x535A;&#x5BA2;&#xFF0C;&#x6211;&#x8BB0;&#x5F97;&#x6211;&#x6700;&#x65E9;&#x5728;&#x81EA;&#x5DF1;&#x535A;&#x5BA2;&#x5206;&#x4EAB;&#x7684;&#x8FD8;&#x662F;hexo&#x642D;&#x5EFA;&#x4E2A;&#x4EBA;&#x535A;&#x5BA2;&#x7684;&#x6587;&#x7AE0;&#x3002;&#x540E;&#x9762;&#x770B;&#x7684;&#x77E5;&#x8BC6;&#x591A;&#x4E86;&#xFF0C;&#x5C31;&#x5F00;&#x59CB;&#x5199;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x5C31;&#x8FD9;&#x6837;&#x5F00;&#x59CB;&#x4E86;&#x81EA;&#x5A92;&#x4F53;&#x5C1D;&#x8BD5;&#x8FD9;&#x6761;&#x8DEF;&#x3002;&#x5F53;&#x65F6;&#x4E5F;&#x6CA1;&#x641E;&#x6E05;&#x8FD9;&#x6837;&#x80FD;&#x600E;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x4E3A;&#x4E86;&#x60F3;&#x63D0;&#x9AD8;&#x81EA;&#x5DF1;&#x800C;&#x505A;&#x7684;&#x4E00;&#x4E9B;&#x5C1D;&#x8BD5;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c5eaae1b2ebd5e4fd00672337f64c1aadbb44ae6cc37ddf40f97a8f5aaa002a6" alt="&#x56FE;&#x7247;"></p>
<p>&#x540E;&#x6765;&#x6211;&#x79BB;&#x804C;&#x4E86;&#xFF0C;&#x6362;&#x4E86;&#x4E00;&#x5BB6;&#x516C;&#x53F8;&#xFF0C;&#x4E4B;&#x6240;&#x4EE5;&#x79BB;&#x804C;&#xFF0C;&#x539F;&#x56E0;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x51C6;&#x5907;&#x597D;&#x4E86;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x6280;&#x672F;&#x5DF2;&#x7ECF;&#x5F88;&#x5389;&#x5BB3;&#x4E86;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x65B9;&#x9762;&#x662F;&#x6B20;&#x4EB2;&#x621A;&#x7684;3.5&#x4E07;&#x5757;&#x94B1;&#xFF0C;&#x4EB2;&#x621A;&#x4E0A;&#x95E8;&#x8BA8;&#x503A;&#x4E86;&#xFF0C;&#x5BB6;&#x91CC;&#x4E3A;&#x4E86;&#x8FD8;&#x94F6;&#x884C;&#x8D37;&#x6B3E;&#xFF0C;&#x5DF2;&#x7ECF;&#x62FF;&#x4E0D;&#x51FA;&#x66F4;&#x591A;&#x7684;&#x94B1;&#xFF0C;&#x770B;&#x7740;&#x7236;&#x6BCD;&#x4E00;&#x8138;&#x96BE;&#x529E;&#x7684;&#x6837;&#x5B50;&#xFF0C;&#x6211;&#x5FC3;&#x91CC;&#x96BE;&#x53D7;&#xFF0C;&#x60F3;&#x5230;&#x81EA;&#x5DF1;&#x516C;&#x79EF;&#x91D1;&#x91CC;&#x9762;&#x8FD9;4&#x5E74;&#x4E5F;&#x5B58;&#x4E86;4&#x4E07;&#x5DE6;&#x53F3;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x548C;&#x4EB2;&#x621A;&#x8BF4;&#x8FD9;&#x7B14;&#x94B1;&#x6211;&#x6765;&#x8FD8;&#xFF0C;&#x8BA9;&#x5BF9;&#x65B9;&#x7B49;&#x6211;&#x79BB;&#x804C;&#x4E86;&#x5C31;&#x53BB;&#x628A;&#x516C;&#x79EF;&#x91D1;&#x91CC;&#x9762;&#x7684;&#x94B1;&#x62FF;&#x51FA;&#x6765;&#xFF0C;&#x4F46;&#x662F;&#x4EB2;&#x621A;&#x4E0D;&#x7B54;&#x5E94;&#x7B49;&#x592A;&#x4E45;&#xFF0C;&#x8981;&#x6211;3&#x5929;&#x5185;&#x8FD8;&#x94B1;&#xFF0C;&#x6CA1;&#x529E;&#x6CD5;&#xFF0C;&#x4EBA;&#x751F;&#x7B2C;&#x4E00;&#x6B21;&#x627E;&#x540C;&#x4E8B;&#x501F;&#x94B1;&#xFF0C;&#x9886;&#x5BFC;&#x501F;&#x4E86;2&#x4E07;&#xFF0C;&#x540C;&#x4E8B;&#x501F;&#x4E86;1.5&#x4E07;&#xFF0C;&#x5148;&#x628A;&#x8FD9;&#x7B14;&#x94B1;&#x8FD8;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x540E;&#x9762;&#x79BB;&#x804C;&#x540E;&#x628A;&#x516C;&#x79EF;&#x91D1;&#x53D6;&#x51FA;&#x6765;&#x8FD8;&#x7ED9;&#x540C;&#x4E8B;&#x3002;</p>
<p>&#x5230;&#x4E86;&#x65B0;&#x516C;&#x53F8;&#xFF0C;&#x5DE5;&#x8D44;&#x7FFB;&#x500D;&#x4E86;&#xFF0C;&#x4E00;&#x4E0B;&#x5B50;&#x611F;&#x89C9;&#x751F;&#x6D3B;&#x538B;&#x529B;&#x5C0F;&#x4E86;&#x4E00;&#x4E9B;&#xFF0C;&#x4F46;&#x662F;&#x524D;&#x9762;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;&#x4E00;&#x76F4;&#x8BA9;&#x6211;&#x803F;&#x803F;&#x4E8E;&#x6000;&#xFF0C;&#x662F;&#x65F6;&#x5019;&#x505A;&#x51FA;&#x6539;&#x53D8;&#x4E86;&#xFF0C;&#x5F53;&#x65F6;&#x609F;&#x51FA;&#x7684;&#x4E00;&#x4E2A;&#x9053;&#x7406;&#xFF0C;<strong>&#x4F60;&#x4E0D;&#x80AF;&#x6539;&#x53D8;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x4F60;&#x8FD8;&#x4E0D;&#x591F;&#x75DB;&#x3002;</strong> &#x53EA;&#x6709;&#x7ECF;&#x5386;&#x8FC7;&#x771F;&#x6B63;&#x7684;&#x75DB;&#x82E6;&#xFF0C;&#x624D;&#x4F1A;&#x6293;&#x4F4F;&#x90A3;&#x4E00;&#x4E1D;&#x4E1D;&#x7684;&#x673A;&#x4F1A;&#xFF0C;&#x611F;&#x89C9;&#x90A3;&#x65F6;&#x5019;&#x5C31;&#x662F;&#x8FD9;&#x4EFD;&#x75DB;&#x82E6;&#x624D;&#x80FD;&#x8BA9;&#x6211;&#x575A;&#x6301;&#x6BCF;&#x5929;5&#x70B9;&#x8D77;&#x5E8A;&#x5B66;&#x4E60;&#x5199;&#x535A;&#x5BA2;&#xFF0C;&#x5E76;&#x6301;&#x7EED;&#x5F88;&#x957F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x3002;&#x4EBA;&#x5929;&#x751F;&#x559C;&#x6B22;&#x8212;&#x9002;&#x5708;&#xFF0C;&#x60F3;&#x8981;&#x79BB;&#x5F00;&#x8212;&#x9002;&#x5708;&#x662F;&#x53CD;&#x4EBA;&#x6027;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x8981;&#x575A;&#x97E7;&#x7684;&#x610F;&#x5FD7;&#x529B;&#x624D;&#x884C;&#x3002;</p>
<p>&#x8FD9;&#x65F6;&#x5019;&#x6211;&#x5F00;&#x59CB;&#x4E3B;&#x52A8;&#x505A;&#x526F;&#x4E1A;&#x7684;&#x79CD;&#x5B50;&#x5DF2;&#x7ECF;&#x57CB;&#x4E0B;&#x4E86;&#xFF0C;&#x8FD9;&#x671F;&#x95F4;&#xFF0C;2016-2018&#xFF0C;&#x968F;&#x7740;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x8FD0;&#x8425;&#x8D8A;&#x6765;&#x8D8A;&#x4E45;&#xFF0C;<strong>&#x7B2C;&#x4E09;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x6536;&#x5165;&#x5F00;&#x59CB;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x6D41;&#x91CF;&#x4E3B;&#x548C;&#x63A5;&#x5E7F;&#x544A;&#x6536;&#x76CA;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x7B97;&#x662F;&#x516C;&#x4F17;&#x53F7;&#x53D1;&#x5C55;&#x4E0D;&#x9519;&#x7684;&#x9636;&#x6BB5;&#xFF0C;&#x4E00;&#x6B21;&#x5546;&#x5355;&#x4E5F;&#x6709;1000&#xFF0C;&#x4E00;&#x5E74;&#x4E5F;&#x80FD;&#x63A5;&#x4E2A;&#x51E0;&#x6B21;&#xFF0C;&#x5F53;&#x7136;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#x8FD0;&#x8425;&#x7684;&#x4E0D;&#x5927;&#x597D;&#xFF0C;&#x4E0D;&#x7136;&#x8FD8;&#x80FD;&#x6709;&#x66F4;&#x591A;&#x7684;&#x6536;&#x5165;&#x3002;</p>
<p><strong>&#x7B2C;&#x56DB;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x662F;&#x5F00;&#x59CB;&#x5C1D;&#x8BD5;&#x5728;&#x6211;&#x7684;&#x535A;&#x5BA2;&#x4E0A;&#x9762;&#x6DFB;&#x52A0;&#x4EAC;&#x4E1C;&#x8054;&#x76DF;&#x7684;&#x5546;&#x54C1;&#x94FE;&#x63A5;&#xFF0C;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x5E7F;&#x544A;&#x70B9;&#x51FB;&#x8FDB;&#x53BB;&#xFF0C;&#x5C31;&#x4F1A;&#x5E26;&#x4E0A;&#x6211;&#x7684;&#x4EAC;&#x4E1C;&#x7684;&#x5206;&#x4F63;&#x94FE;&#x63A5;&#xFF0C;&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x4E70;&#x7684;&#x4E1C;&#x897F;&#x6211;&#x4F1A;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x4F63;&#x91D1;&#xFF0C;&#x867D;&#x7136;&#x8D5A;&#x7684;&#x4E0D;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x8BA9;&#x6211;&#x77E5;&#x9053;&#x4E86;CPS&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#x3002;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;2018&#x5230;2019&#x5E74;&#x4E86;&#xFF0C;&#x8FD9;2&#x5E74;&#x7B97;&#x662F;&#x6211;&#x7684;&#x4E00;&#x4E2A;&#x5C0F;&#x5DC5;&#x5CF0;&#x671F;&#xFF0C;&#x5F88;&#x591A;&#x526F;&#x4E1A;&#x90FD;&#x662F;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x5185;&#x5C1D;&#x8BD5;&#x51FA;&#x6765;&#x7684;&#x3002;&#x56E0;&#x4E3A;&#x90A3;&#x65F6;&#x5019;&#x6211;&#x7EC8;&#x4E8E;&#x8FD8;&#x6E05;&#x4E86;&#x5BB6;&#x91CC;&#x7684;&#x503A;&#x52A1;&#xFF0C;&#x96F6;&#x96F6;&#x788E;&#x788E;&#x52A0;&#x8D77;&#x6765;&#x4E00;&#x5171;&#x5E2E;&#x5BB6;&#x91CC;&#x8FD8;&#x6389;&#x4E86;20&#x591A;&#x4E07;&#x7684;&#x503A;&#x52A1;&#x3002;&#x6211;&#x4E5F;&#x642C;&#x51FA;&#x6765;&#x4F4F;&#x4E86;&#xFF0C;&#x79BB;&#x516C;&#x53F8;&#x66F4;&#x8FD1;&#x70B9;&#xFF0C;&#x8FD9;&#x6837;&#x4E5F;&#x6709;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x4E2A;&#x4EBA;&#x65F6;&#x95F4;&#xFF0C;&#x65B9;&#x4FBF;&#x601D;&#x8003;&#x548C;&#x505A;&#x9879;&#x76EE;&#x3002;</p>
<p><strong>&#x7B2C;&#x4E94;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x4E5F;&#x5728;&#x8FD9;&#x671F;&#x95F4;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x5206;&#x4EAB;&#x7535;&#x5B50;&#x4E66;&#xFF0C;&#x6211;&#x53D6;&#x540D;&#x53EB;&#x300A;&#x7535;&#x5B50;&#x4E66;&#x4E92;&#x60E0;&#x8BA1;&#x5212;&#x300B;&#xFF0C;&#x901A;&#x8FC7;&#x6536;&#x96C6;&#x6574;&#x7406;&#x5E02;&#x9762;&#x4E0A;&#x7684;&#x7F16;&#x7A0B;&#x7535;&#x5B50;&#x4E66;&#xFF0C;&#x7136;&#x540E;&#x6574;&#x7406;&#x5206;&#x7C7B;&#xFF0C;&#x901A;&#x8FC7;&#x81EA;&#x5A92;&#x4F53;&#x6E20;&#x9053;&#x5F15;&#x6D41;&#x5230;&#x79C1;&#x57DF;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x552E;&#x5356;&#xFF0C;&#x4E00;&#x4EFD;&#x5356;9.9-29.9&#x4E0D;&#x7B49;&#xFF0C;&#x6211;&#x8BB0;&#x5F97;&#x4E00;&#x5171;&#x5927;&#x6982;&#x5F15;&#x6D41;&#x4E86;900&#x591A;&#x4EBA;&#x5230;&#x5FAE;&#x4FE1;&#x6210;&#x4EA4;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d39fddafdde2dc679d4f02eee151761ad2e9ed9d5ba62f6abd51c0ad6ef62a07" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/170c2a4cf91d6884bf0ba1df2e1fe43fd398a68c60a389a0a4faacd7a88ffe3a" alt="&#x56FE;&#x7247;"></p>
<p>&#x8FD9;&#x79CD;&#x73A9;&#x6CD5;&#x5230;&#x73B0;&#x5728;&#x4E5F;&#x4E0D;&#x8FC7;&#x65F6;&#xFF0C;&#x5404;&#x79CD;&#x5F15;&#x6D41;&#x5230;&#x79C1;&#x57DF;&#x5356;&#x8D44;&#x6599;&#x7684;&#x4E00;&#x5927;&#x5806;&#xFF0C;&#x672C;&#x8D28;&#x4E00;&#x6837;&#xFF0C;&#x53EA;&#x662F;&#x5E73;&#x53F0;&#x6362;&#x4E00;&#x4E0B;&#x800C;&#x5DF2;&#x3002;</p>
<p>&#x8D44;&#x6599;&#x6574;&#x7406;&#x6C38;&#x8FDC;&#x90FD;&#x4E0D;&#x8FC7;&#x65F6;&#x7684;&#xFF0C;<strong>&#x5546;&#x4E1A;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4EF7;&#x503C;&#x4EA4;&#x6362;&#xFF0C;&#x53EA;&#x8981;&#x4F60;&#x80FD;&#x63D0;&#x4F9B;&#x4EF7;&#x503C;&#xFF0C;&#x6EE1;&#x8DB3;&#x7528;&#x6237;&#x9700;&#x6C42;&#x6216;&#x8005;&#x75DB;&#x70B9;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x7684;&#x5185;&#x5BB9;&#x8D85;&#x51FA;&#x4E86;&#x5B9A;&#x4EF7;&#xFF0C;&#x5C31;&#x4F1A;&#x6709;&#x7528;&#x6237;&#x613F;&#x610F;&#x4E70;&#x5355;&#x3002;</strong></p>
<p><strong>&#x7B2C;&#x516D;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x8FD8;&#x662F;2018&#x5E74;&#xFF0C;&#x548C;&#x4E0A;&#x9762;&#x5FAE;&#x4FE1;&#x5356;&#x7535;&#x5B50;&#x4E66;&#x96C6;&#x5408;&#x5DEE;&#x4E0D;&#x591A;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x514D;&#x8D39;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF0C;&#x4F46;&#x662F;&#x7528;&#x7684;&#x662F;&#x901A;&#x57CE;&#x7F51;&#x76D8;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x6211;&#x8D44;&#x6E90;&#x90FD;&#x653E;&#x5728;&#x4E0A;&#x9762;&#xFF0C;&#x7136;&#x540E;&#x63D0;&#x4F9B;&#x4E0B;&#x8F7D;&#xFF0C;&#x7528;&#x6237;&#x70B9;&#x51FB;&#x540E;&#x4F1A;&#x5F39;&#x51FA;&#x5E7F;&#x544A;&#x9875;&#x9762;&#xFF0C;&#x6BCF;&#x4E2A;&#x70B9;&#x51FB;1&#x6BDB;&#x94B1;&#x5427;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B;&#x6536;&#x76CA;&#x622A;&#x56FE;&#xFF0C;&#x8FD9;&#x4E2A;&#x8D5A;&#x7684;&#x4E0D;&#x591A;&#xFF0C;&#x6CA1;&#x6709;&#x6295;&#x5165;&#x592A;&#x591A;&#x7684;&#x65F6;&#x95F4;&#x53BB;&#x63A8;&#x5E7F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/34b65dbe91b330925aaedd419be9d3cdd6f667db0d815a1ca53277f400d95688" alt="&#x56FE;&#x7247;"></p>
<p><strong>&#x6211;&#x7684;&#x7B2C;&#x4E03;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x662F;&#x505A;&#x8D44;&#x6E90;&#x7F51;&#x7AD9;&#xFF0C;&#x76D7;&#x7248;&#x7684;&#xFF0C;&#x6211;&#x8BB0;&#x5F97;&#x4E5F;&#x662F;2018&#x5E74;2&#x6708;&#x4EFD;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x672C;&#x6765;&#x4E0D;&#x6253;&#x7B97;&#x8BF4;&#x7684;&#xFF0C;&#x505A;&#x4E86;&#x51E0;&#x4E2A;&#x6708;&#x5C31;&#x505C;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x98CE;&#x9669;&#x592A;&#x5927;&#x4E86;&#xFF0C;&#x5BB9;&#x6613;&#x88AB;&#x641E;&#x4FB5;&#x6743;&#x3002;&#x6155;&#x8BFE;&#x7F51;&#x4E00;&#x53D1;&#x90AE;&#x4EF6;&#x8FC7;&#x6765;&#xFF0C;&#x6211;&#x5C31;&#x8981;&#x4E0B;&#x6389;&#x5BF9;&#x5E94;&#x7684;&#x89C6;&#x9891;&#x6559;&#x7A0B;&#x3002;&#x642D;&#x5EFA;&#x8FD9;&#x4E2A;&#x4E0D;&#x96BE;&#xFF0C;&#x7528;discuz&#x642D;&#x5EFA;&#x7684;&#xFF0C;&#x6E90;&#x7801;&#x662F;php&#xFF0C;&#x6539;&#x4E86;&#x51E0;&#x4E2A;&#x5927;&#x6A21;&#x5757;&#xFF0C;&#x9875;&#x9762;&#x6548;&#x679C;&#x505A;&#x5F97;&#x5F88;&#x597D;&#x3002;&#x7136;&#x540E;&#x63A5;&#x5165;&#x4E0B;&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#x5C31;&#x5F00;&#x641E;&#x4E86;&#xFF0C;&#x8D44;&#x6E90;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x53BB;&#x5176;&#x4ED6;&#x540C;&#x884C;&#x4E70;&#x4E2A;&#x6C38;&#x4E45;&#x4F1A;&#x5458;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x5DF1;&#x767E;&#x5EA6;&#x7F51;&#x76D8;&#x518D;&#x5F00;&#x4E2A;&#x4F1A;&#x5458;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x53E6;&#x5916;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x5668;&#x548C;&#x57DF;&#x540D;&#x6210;&#x672C;&#x3002;&#x8D5A;&#x4E86;&#x51E0;&#x5343;&#x5C31;&#x505C;&#x6389;&#x4E86;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x8BA9;&#x6211;&#x5B66;&#x4F1A;&#x4E86;&#x642D;&#x5EFA;&#x7F51;&#x7AD9;&#x3001;&#x63A5;&#x5165;&#x652F;&#x4ED8;&#x7B49;&#x6280;&#x5DE7;&#x3002;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;5-7&#x8FD9;&#x4E09;&#x4E2A;&#x526F;&#x4E1A;&#x6709;&#x5173;&#x8054;&#x6027;&#xFF0C;&#x90FD;&#x662F;&#x6211;&#x8FB9;&#x505A;&#x8FB9;&#x601D;&#x8003;&#x7684;&#x6210;&#x679C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c7c8b349f92b0b60f9fa5d008914ee6a8f75a57b32e484af62283d9cbbf15ce3" alt="&#x56FE;&#x7247;"></p>
<p><strong>&#x7B2C;&#x516B;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x4E5F;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x671F;&#x95F4;&#x5F04;&#x5F97;&#xFF0C;&#x5FD8;&#x8BB0;&#x662F;18&#x5E74;&#x8FD8;&#x662F;19&#x5E74;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x505A;&#x6DD8;&#x5B9D;&#x5BA2;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x5FAE;&#x4FE1;&#x673A;&#x5668;&#x4EBA;&#x975E;&#x5E38;&#x7684;&#x706B;&#xFF0C;&#x6211;&#x4E5F;&#x662F;&#x7F51;&#x4E0A;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#xFF0C;&#x53D1;&#x73B0;&#x597D;&#x50CF;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x641E;&#x4E00;&#x641E;&#xFF0C;&#x56E0;&#x4E3A;&#x7B2C;&#x56DB;&#x4EFD;&#x63D0;&#x5230;&#x8FC7;&#x505A;&#x4EAC;&#x4E1C;&#x8054;&#x76DF;&#x5E7F;&#x544A;&#x7684;&#xFF0C;&#x77E5;&#x9053;CPS&#x8FD9;&#x4E2A;&#x73A9;&#x610F;&#xFF0C;&#x6240;&#x4EE5;&#x4E00;&#x770B;&#x5230;&#x5FAE;&#x4FE1;&#x673A;&#x5668;&#x4EBA;&#x6DD8;&#x5B9D;&#x5BA2;&#x8FD9;&#x4E2A;&#x4E1C;&#x897F;&#xFF0C;&#x6211;&#x76F4;&#x63A5;&#x5C31;&#x61C2;&#x4E86;&#x8D5A;&#x94B1;&#x7684;&#x672C;&#x8D28;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x82B1;&#x4E86;2&#x5929;&#x65F6;&#x95F4;&#x5C31;&#x641E;&#x5B9A;&#x4E86;&#x6700;&#x57FA;&#x7840;&#x7684;&#x642D;&#x5EFA;&#xFF0C;&#x76F4;&#x63A5;&#x4E0A;&#x7F51;&#x641C;&#x8D44;&#x6599;&#xFF0C;&#x6DD8;&#x5B9D;&#x641C;&#x8FD9;&#x65B9;&#x9762;&#x7684;&#x8F6F;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x6392;&#x9664;&#x6CD5;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x4E86;&#x60A0;&#x54C9;&#x8FD9;&#x5BB6;&#xFF0C;&#x5F53;&#x65F6;&#x8F6F;&#x4EF6;&#x662F;800&#x5143;&#x6C38;&#x4E45;&#x4F7F;&#x7528;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x662F;&#x914D;&#x7F6E;&#x53C2;&#x6570;&#xFF0C;&#x81EA;&#x52A8;&#x56DE;&#x590D;&#x7684;&#x4E00;&#x4E9B;&#x914D;&#x7F6E;&#x5C31;&#x641E;&#x5B9A;&#x4E86;&#xFF0C;&#x5F53;&#x65F6;&#x771F;&#x662F;&#x4F69;&#x670D;&#x6211;&#x81EA;&#x5DF1;&#xFF0C;&#x7B97;&#x662F;&#x6267;&#x884C;&#x529B;&#x7684;&#x5DC5;&#x5CF0;&#x4E86;&#xFF0C;&#x5B8C;&#x5168;&#x9677;&#x5165;&#x4E86;&#x4E00;&#x79CD;&#x5FC3;&#x6D41;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x975E;&#x5E38;&#x8FC5;&#x901F;&#x7684;&#x89E3;&#x51B3;&#x9047;&#x5230;&#x7684;&#x5404;&#x79CD;&#x96BE;&#x9898;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x7684;&#x6536;&#x76CA;&#x5F88;&#x591A;&#xFF0C;&#x81F3;&#x5C11;&#x6709;10&#x4E07;+&#x5427;&#xFF0C;&#x6700;&#x5DC5;&#x5CF0;&#x7684;&#x65F6;&#x5019;&#x662F;&#x6708;&#x5165;8000+&#xFF0C;&#x5FAE;&#x4FE1;&#x597D;&#x53CB;&#x52A0;&#x5230;4000&#x591A;&#x4EBA;&#xFF0C;&#x4F46;&#x662F;&#x540E;&#x6765;&#x53D1;&#x751F;&#x4E86;&#x5DE8;&#x53D8;&#xFF0C;&#x5FAE;&#x4FE1;&#x5927;&#x5C01;&#x53F7;&#xFF0C;&#x8FD8;&#x662F;&#x6C38;&#x4E45;&#x7684;&#xFF0C;&#x90A3;&#x4E00;&#x5929;&#x7B97;&#x662F;&#x6DD8;&#x5B9D;&#x5BA2;&#x7684;&#x5BD2;&#x51AC;&#x4E86;&#xFF0C;2020&#x5E74;4&#x6708;11&#x53F7;&#x6211;&#x8BB0;&#x5F97;&#xFF0C;&#x6211;&#x4E5F;&#x6BD4;&#x8F83;&#x60E8;&#x6CA1;&#x8EB2;&#x8FC7;&#x53BB;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x5FAE;&#x4FE1;&#x6635;&#x79F0;&#x5E26;&#x4E86;<strong>&#x8FD4;&#x5229;&#x673A;&#x5668;&#x4EBA;</strong>&#x8FD9;&#x51E0;&#x4E2A;&#x5B57;&#xFF0C;&#x76F4;&#x63A5;&#x88AB;&#x547D;&#x4E2D;&#xFF0C;&#x8D26;&#x53F7;GG&#x4E86;&#xFF0C;&#x6700;&#x540E;&#x522B;&#x4EBA;&#x6559;&#x6211;&#x7528;&#x53D1;&#x540D;&#x7247;&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x62EF;&#x6551;&#x4E86;&#x5927;&#x6982;200&#x591A;&#x4E2A;&#x6D88;&#x8D39;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x5F04;&#x4E86;&#x4E2A;&#x65B0;&#x5FAE;&#x4FE1;&#x6765;&#x505A;&#xFF0C;&#x73B0;&#x5728;&#x4F5B;&#x7CFB;&#x505A;&#x8FD9;&#x4E48;&#x4E45;&#x4EBA;&#x6570;&#x4E5F;&#x6709;600&#x591A;&#x4E86;&#xFF0C;&#x4EE5;&#x524D;&#x561F;&#x561F;&#x5728;&#x516C;&#x4F17;&#x53F7;&#x4E5F;&#x63A8;&#x5E7F;&#x8FC7;&#x597D;&#x51E0;&#x6B21;&#xFF0C;&#x5F88;&#x591A;&#x8001;&#x7C89;&#x5E94;&#x8BE5;&#x5173;&#x6CE8;&#x8FC7;&#x3002;&#x6570;&#x636E;&#x90FD;&#x5728;&#xFF0C;&#x4E00;&#x4E9B;&#x8001;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x4E0B;&#xFF0C;&#x6CA1;&#x51C6;&#x8FD8;&#x6709;&#x6CA1;&#x63D0;&#x73B0;&#x7684;&#x91D1;&#x989D;&#x5462;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/44fdc574ae593cb36ec4ce1b12dbaec60b0ae38f5d010e76bcb85f4f8127d359" alt="&#x56FE;&#x7247;"></p>
<p><strong>&#x7B2C;&#x4E5D;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x662F;&#x5173;&#x4E8E;&#x6296;&#x97F3;&#x7684;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;2018&#x5E74;&#x5C1D;&#x8BD5;&#x505A;&#x7684;&#xFF0C;&#x5C0F;&#x8BF4;CPS&#xFF0C;&#x8FD8;&#x662F;&#x6211;&#x540C;&#x5B66;&#x548C;&#x6211;&#x8BF4;&#x7684;&#xFF0C;&#x57FA;&#x4E8E;&#x5FAE;&#x4FE1;&#x670D;&#x52A1;&#x53F7;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x5C0F;&#x8BF4;&#x7CFB;&#x7EDF;&#xFF0C;&#x6709;&#x7528;&#x6237;&#x5145;&#x503C;&#x7684;&#x8BDD;&#xFF0C;1&#xFF1A;9&#x5206;&#x6210;&#xFF0C;&#x6211;&#x4EEC;&#x5206;9&#x5C42;&#xFF0C;&#x7CFB;&#x7EDF;&#x62BD;1&#x5C42;&#xFF0C;&#x8FD8;&#x662F;&#x5F88;&#x5212;&#x7B97;&#x7684;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x662F;&#x53BB;&#x6296;&#x97F3;&#x4E0A;&#x9762;&#x53D1;&#x77ED;&#x89C6;&#x9891;&#xFF0C;&#x6211;&#x662F;&#x505A;&#x8A00;&#x60C5;&#x5C0F;&#x8BF4;&#x63A8;&#x8350;&#x7684;&#xFF0C;&#x5F53;&#x65F6;&#x4E3A;&#x4E86;&#x505A;&#x597D;&#x8FD9;&#x4E2A;&#xFF0C;&#x4E5F;&#x5B66;&#x4E86;&#x4E00;&#x4E9B;&#x526A;&#x8F91;&#x4EE5;&#x53CA;AE&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x9879;&#x76EE;&#x96F6;&#x96F6;&#x788E;&#x788E;&#x7ED9;&#x6211;&#x8D5A;&#x4E86;2&#x4E07;&#x591A;&#xFF0C;&#x5370;&#x8C61;&#x6700;&#x6DF1;&#x523B;&#x7684;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x89C6;&#x9891;&#x7206;&#x6B3E;&#x4E86;&#xFF0C;&#x6765;&#x79C1;&#x4FE1;&#x7684;&#x4EBA;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x6211;&#x5728;&#x516C;&#x53F8;&#x4E00;&#x4E2A;&#x4E0B;&#x5348;&#x90FD;&#x5728;&#x5F15;&#x6D41;&#x5230;&#x5FAE;&#x4FE1;&#x3002;&#x90A3;&#x5929;&#x6210;&#x4EA4;&#x4E86;&#x6709;6000&#x591A;&#x5757;&#x94B1;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x4E92;&#x8054;&#x7F51;&#x81EA;&#x5A92;&#x4F53;&#x7684;&#x9B45;&#x529B;&#x554A;&#xFF0C;&#x4E0D;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x5929;&#x82B1;&#x677F;&#x9AD8;&#x3002;&#x6211;&#x540C;&#x5B66;&#x6BD4;&#x6211;&#x505A;&#x5F97;&#x66F4;&#x597D;&#xFF0C;&#x8D5A;&#x4E86;10&#x51E0;&#x4E07;&#x3002;&#x6211;&#x540E;&#x6765;&#x6CA1;&#x505A;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x7535;&#x8111;&#x5D29;&#x6E83;&#x4E86;&#xFF0C;&#x91CD;&#x88C5;&#x7CFB;&#x7EDF;&#xFF0C;&#x5BFC;&#x81F4;&#x5927;&#x534A;&#x5E74;&#x7684;&#x8D44;&#x6599;&#x90FD;&#x6CA1;&#x4E86;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x53EF;&#x4EE5;&#x770B;&#x6211;&#x4EE5;&#x524D;&#x5199;&#x7684;&#x3002;&#x8D44;&#x6599;&#x90FD;&#x6CA1;&#x4E86;&#xFF0C;&#x6211;&#x5C31;&#x4E0D;&#x505A;&#x8FD9;&#x5757;&#x4E86;&#xFF0C;&#x540E;&#x6765;&#x6296;&#x97F3;&#x4E25;&#x6253;&#x8FD9;&#x5757;&#xFF0C;&#x542C;&#x6211;&#x540C;&#x5B66;&#x8BF4;&#x8FD9;&#x5757;&#x6536;&#x76CA;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/76b1c3681bfeb890a77af72791589e995ce9e8d5a3c89e4ecf190a3893e67b28" alt="&#x56FE;&#x7247;"></p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x526F;&#x4E1A;&#xFF0C;&#x6211;&#x5C1D;&#x5230;&#x4E86;&#x81EA;&#x5A92;&#x4F53;&#x7684;&#x751C;&#x5934;&#xFF0C;&#x77E5;&#x9053;&#x4E86;&#x5F15;&#x6D41;&#x5356;&#x8D44;&#x6599;&#x7684;&#x73A9;&#x6CD5;&#xFF0C;&#x540E;&#x6765;&#x56E0;&#x4E3A;&#x81EA;&#x5DF1;&#x50BB;&#x903C;&#xFF0C;&#x6296;&#x97F3;&#x53D1;&#x4E86;&#x56FD;&#x5E86;&#x505A;&#x5934;&#x50CF;&#x5F15;&#x6D41;&#x516C;&#x4F17;&#x53F7;&#x7684;&#x89C6;&#x9891;&#xFF0C;&#x88AB;&#x6C38;&#x4E45;&#x5C01;&#x53F7;&#x4E86;&#xFF0C;&#x6296;&#x97F3;&#x7684;&#x5C1D;&#x8BD5;&#x5C31;&#x505C;&#x6B62;&#x4E86;&#x54C8;&#x54C8;&#x3002;</p>
<p>2019&#x5E74;&#x6211;&#x53C8;&#x8DF3;&#x69FD;&#x4E86;&#xFF0C;&#x8DDF;&#x7740;&#x4E00;&#x4E2A;&#x9886;&#x5BFC;&#x51FA;&#x6765;&#x521B;&#x4E1A;&#xFF0C;&#x653E;&#x5F03;&#x4E86;&#x521A;&#x521A;&#x664B;&#x5347;&#x9879;&#x76EE;&#x7EC4;&#x957F;&#x7684;&#x5C97;&#x4F4D;&#xFF08;&#x4E0A;&#x9762;&#x4E00;&#x7EA7;&#x9886;&#x5BFC;&#x8D70;&#x4E86;&#xFF0C;&#x6211;&#x5C31;&#x9876;&#x4E0A;&#x6765;&#x5E26;4&#x4E2A;&#x65B0;&#x4EBA;&#xFF09;&#x3002;&#x7531;&#x4E8E;&#x65B0;&#x5DE5;&#x4F5C;&#x6BD4;&#x8F83;&#x5FD9;&#xFF0C;&#x6211;&#x5C31;&#x6682;&#x505C;&#x4E86;&#x5F88;&#x591A;&#x526F;&#x4E1A;&#x7684;&#x5C1D;&#x8BD5;&#xFF0C;2019&#x5E74;&#x7684;&#x8BDD;&#x5C31;&#x4E00;&#x4E2A;&#x526F;&#x4E1A;&#x9879;&#x76EE;&#x518D;&#x5C1D;&#x8BD5;&#xFF0C;&#x8FD8;&#x662F;&#x6DD8;&#x5B9D;&#x5BA2;&#x7C7B;&#x578B;&#xFF0C;&#x4E0D;&#x8FC7;&#x662F;APP&#x7684;&#x63A8;&#x5E7F;&#xFF0C;&#x597D;&#x7701;APP&#xFF0C;&#x8FD9;&#x4E2A;&#x7B97;<strong>&#x7B2C;&#x5341;&#x4EFD;&#x526F;&#x4E1A;&#xFF0C;</strong> &#x5F53;&#x65F6;&#x5E94;&#x8BE5;&#x5728;&#x516C;&#x4F17;&#x53F7;&#x4E5F;&#x5206;&#x4EAB;&#x8FC7;&#x5F88;&#x591A;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x81EA;&#x7528;&#x7701;&#x94B1;&#xFF0C;&#x5206;&#x4EAB;&#x8D5A;&#x94B1;&#x7684;&#x903B;&#x8F91;&#x3002;&#x6211;&#x770B;&#x6211;&#x535A;&#x5BA2;2019&#x5E74;11&#x6708;&#x8FD8;&#x53D1;&#x4E86;&#x8FD9;&#x7BC7;&#x3002;140&#x5929;&#xFF0C;&#x5927;&#x6982;&#x505A;&#x4E86;5&#x4E2A;&#x6708;&#x5427;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/45100e20c4590096228e6c444337d9dbbc5bae59fc6368b01e2b711aeed75f4e" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/bc71b6eae62f7ef6c12fba4d9314d5cdef16954f639e1614cc6f39bb4f116108" alt="&#x56FE;&#x7247;"></p>
<p>&#x5F53;&#x65F6;&#x5E94;&#x8BE5;&#x662F;&#x505A;&#x5230;&#x4E86;&#x56E2;&#x957F;&#xFF0C;&#x4E0B;&#x7EA7;&#x5927;&#x6982;2550&#x4EBA;&#xFF0C;&#x867D;&#x7136;2020&#x5E74;&#x5C31;&#x4E0D;&#x505A;&#x8FD9;&#x4E2A;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x73B0;&#x5728;&#x6BCF;&#x4E2A;&#x6708;&#x8FD8;&#x80FD;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x51E0;&#x5341;&#x7684;&#x6536;&#x5165;&#xFF0C;&#x4F60;&#x80FD;&#x4FE1;&#x5417;&#x54C8;&#x54C8;&#x54C8;&#x3002;&#x6211;&#x627E;&#x4E0B;&#x4ECA;&#x5929;&#x7684;&#x622A;&#x56FE;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/4409c87f12566ecb9b39258becd082841b6e54b72b2ae349957d0be39a00910e" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/efa9c183943c098950e8006f30ec7d983c0227df4e987e42d7e87ae6dd58bbec" alt="image.png"></p>
<p>&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x8EBA;&#x8D5A;&#x7684;&#xFF0C;&#x5927;&#x6982;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x5C31;&#x5F00;&#x59CB;&#x7231;&#x4E0A;&#x4E86;&#x8FD9;&#x79CD;&#x7761;&#x540E;&#x6536;&#x5165;&#xFF0C;&#x7761;&#x540E;&#x6536;&#x5165;&#x4E5F;&#x5C31;&#x6210;&#x4E86;&#x6211;&#x9009;&#x578B;&#x526F;&#x4E1A;&#x7684;&#x4E00;&#x4E2A;&#x5F88;&#x5927;&#x53C2;&#x8003;&#x65B9;&#x5411;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E2A;&#x4EAC;&#x4E1C;&#x7684;app&#xFF0C;&#x53EB;&#x5565;&#x5FD8;&#x4E86;&#x548C;&#x8FD9;&#x4E2A;&#x7C7B;&#x4F3C;&#x7684;&#xFF0C;&#x4E5F;&#x53EA;&#x8D5A;&#x4E86;&#x5C0F;&#x51E0;&#x5343;&#x5C31;&#x4E0D;&#x5C55;&#x5F00;&#x8BF4;&#x4E86;&#x3002;</p>
<p>&#x5230;&#x6B64;&#xFF0C;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#x5427;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/3ab8d1c9a276b4a099fae7f6b02a042a5c41d9a23d68af6bd16065cdac76728d" alt="&#x56FE;&#x7247;"></p>
<p>2020&#x5E74;&#x56E0;&#x4E3A;&#x4E1A;&#x52A1;&#x9700;&#x8981;&#xFF0C;&#x6211;&#x88AB;&#x8FEB;&#x653E;&#x5F03;java&#x4E1A;&#x52A1;&#xFF0C;&#x8BA9;&#x6211;&#x53BB;&#x7814;&#x7A76;&#x524D;&#x7AEF;3D&#x6280;&#x672F;&#xFF0C;&#x6211;&#x5F53;&#x65F6;&#x4E5F;&#x6BD4;&#x8F83;&#x559C;&#x6B22;&#x65B0;&#x6311;&#x6218;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x7B54;&#x5E94;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x90A3;&#x65F6;&#x5019;&#x5F00;&#x59CB;&#xFF0C;&#x4E00;&#x76F4;&#x5728;&#x7814;&#x7A76;3D Threejs&#x8FD9;&#x5757;&#x6280;&#x672F;&#xFF0C;java&#x5C31;&#x5148;&#x653E;&#x4E00;&#x8FB9;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x516C;&#x4F17;&#x53F7;&#x505C;&#x6B62;&#x66F4;&#x65B0;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x3002;&#x90A3;&#x65F6;&#x5019;&#x4E5F;&#x521A;&#x597D;&#x7206;&#x53D1;&#x75AB;&#x60C5;&#xFF0C;&#x5BF9;&#x4E86;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x53C8;&#x5F00;&#x59CB;&#x73A9;&#x624B;&#x6E38;&#xFF0C;&#x53EB;&#x4EC0;&#x4E48;&#x5251;&#x4FA0;&#x60C5;&#x7F18;&#x4E09;&#x597D;&#x50CF;&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x95E8;&#x6D3E;&#x7684;&#x5E2E;&#x4E3B;&#x3002;</p>
<p>&#x5C31;&#x8FD9;&#x6837;&#xFF0C;&#x6D88;&#x5931;&#x4E86;&#x4E00;&#x5E74;&#xFF0C;21&#x5E74;&#x7684;&#x65F6;&#x5019;&#x770B;&#x5230;&#x522B;&#x4EBA;&#x5206;&#x4EAB;&#x7684;&#x4E00;&#x4E2A;&#x53EB;&#x5916;&#x5356;cps&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x4E00;&#x770B;&#x5C31;&#x53D1;&#x73B0;&#x8FD9;&#x4E2A;&#x597D;&#x719F;&#x6089;&#x554A;&#xFF0C;&#x53C8;&#x662F;&#x6211;&#x559C;&#x6B22;&#x7684;cps&#x9879;&#x76EE;&#xFF0C;&#x5C31;&#x51B2;&#x8FDB;&#x53BB;&#x4E86;&#xFF0C;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x7FA4;&#xFF0C;&#x91CC;&#x9762;&#x5927;&#x5BB6;&#x90FD;&#x662F;&#x60F3;&#x505A;&#x8FD9;&#x5757;&#x7684;&#xFF0C;<strong>&#x7136;&#x540E;&#x6211;&#x7684;&#x5669;&#x68A6;&#x5C31;&#x5F00;&#x59CB;&#x4E86;</strong>&#x3002;&#x5F53;&#x65F6;&#x592A;&#x81EA;&#x5927;&#x4E86;&#xFF0C;&#x52A0;&#x4E0A;&#x7FA4;&#x91CC;&#x9762;&#x5927;&#x5BB6;&#x4E92;&#x76F8;&#x5439;&#x6367;&#x5F88;&#x4E0A;&#x5934;&#xFF0C;&#x4E00;&#x4E2A;&#x7FA4;&#x4E00;&#x5171;&#x6295;&#x5165;&#x4E86;500&#x591A;&#x4E07;&#x505A;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#xFF0C;&#x88AB;&#x8FD4;&#x5229;&#x7F51;&#x90A3;&#x4E2A;&#x72D7;&#x516C;&#x53F8;&#x8D5A;&#x9EBB;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x53BB;&#x4E70;&#x4E86;&#x5BF9;&#x65B9;&#x7684;&#x7C89;&#xFF0C;&#x5730;&#x94C1;&#x7C89;1&#x4E2A;6.5&#x5143;&#xFF0C;&#x5546;&#x4E1A;&#x7C89;&#x4E00;&#x4E2A;8&#x5143;&#xFF0C;&#x6211;&#x4E00;&#x5171;&#x6295;&#x5165;&#x4E86;&#x5FEB;50&#x4E07;&#xFF0C;&#x88AB;&#x4ED6;&#x4EEC;&#x5439;&#x7684;6&#x4E2A;&#x6708;&#x56DE;&#x672C;&#x4E24;&#x773C;&#x5192;&#x5149;&#xFF0C;&#x5FD8;&#x4E86;&#x98CE;&#x9669;&#x8FD9;&#x5757;&#xFF0C;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x8840;&#x4E8F;20&#x591A;&#x4E07;&#xFF0C;&#x597D;&#x5728;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x76EE;&#x524D;&#x8FD8;&#x5728;&#x7A33;&#x5B9A;&#x56DE;&#x672C;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x6708;3000-4000&#x6536;&#x76CA;&#xFF0C;&#x8FD9;&#x7B97;&#x662F;&#x6211;&#x7B2C;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x7684;&#x526F;&#x4E1A;&#xFF0C;<strong>&#x7B2C;&#x5341;&#x4E00;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x3002;&#x6211;&#x6709;&#x5199;&#x8FC7;&#x4E00;&#x4E2A;&#x590D;&#x76D8;&#xFF0C;&#x653E;&#x5230;&#x526F;&#x7BC7;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86;&#x4ED8;&#x8D39;&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x6765;&#x770B;&#x770B;&#x6211;&#x8FD9;&#x51E0;&#x5341;&#x4E07;&#x4E8F;&#x635F;&#x7684;&#x590D;&#x76D8;&#x5427;&#xFF0C;&#x5230;2023&#x5E74;&#x5E94;&#x8BE5;&#x8FD8;&#x4E8F;10&#x51E0;&#x4E07;&#x3002;&#x4E5F;&#x4E0D;&#x77E5;&#x9053;&#x540E;&#x9762;&#x6536;&#x76CA;&#x4F1A;&#x4E0D;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#xFF0C;&#x80FD;&#x56DE;&#x4E00;&#x70B9;&#x662F;&#x4E00;&#x70B9;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/12b62f084032e1f3adcf47a6ebaf0f57376f2ccf051728fd1b0f44995aa0234c" alt="&#x56FE;&#x7247;"></p>
<p>&#x8FD9;&#x4E2A;&#x4E8B;&#x60C5;&#x5BF9;&#x6211;&#x6253;&#x51FB;&#x592A;&#x5927;&#x4E86;&#xFF0C;&#x771F;&#x7684;&#x662F;&#xFF0C;&#x8D8A;&#x52AA;&#x529B;&#x8D8A;&#x4E8F;&#x94B1;&#xFF0C;&#x8FD9;&#x7B97;&#x662F;&#x6211;&#x7B2C;&#x4E00;&#x4EFD;&#x5927;&#x6295;&#x8D44;&#xFF0C;&#x4F30;&#x8BA1;&#x4E5F;&#x662F;&#x6211;&#x8FD9;&#x8F88;&#x5B50;&#x552F;&#x4E00;&#x7684;&#x4E00;&#x6B21;&#x4E86;&#xFF0C;&#x5F53;&#x65F6;&#x786E;&#x5B9E;&#x662F;&#x98D8;&#x4E86;&#x3002;&#x6240;&#x4EE5;&#x90A3;&#x4EFD;&#x60E8;&#x75DB;&#x7684;&#x590D;&#x76D8;&#x503C;&#x5F97;&#x4E00;&#x770B;&#x3002;</p>
<p><strong>&#x7B2C;&#x5341;&#x4E8C;&#x4EFD;&#x526F;&#x4E1A;</strong>&#xFF0C;&#x662F;&#x505A;<strong>&#x77E5;&#x4E4E;&#x597D;&#x7269;&#x63A8;&#x8350;</strong>&#xFF0C;2021&#x5E74;&#x5728;&#x751F;&#x8D22;&#x4E0A;&#x9762;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x82B1;&#x94B1;&#x62A5;&#x540D;&#x4E86;&#x4E2A;&#x8BAD;&#x7EC3;&#x8425;&#xFF0C;&#x5728;&#x77E5;&#x4E4E;&#x4E0A;&#x9762;&#x63A8;&#x8350;&#x5546;&#x54C1;&#xFF0C;&#x7136;&#x540E;&#x8D5A;&#x4F63;&#x91D1;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x662F;CPS&#xFF0C;&#x8D5A;&#x7684;&#x662F;&#x4EAC;&#x4E1C;&#x7684;&#x4F63;&#x91D1;&#x3002;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x6211;&#x5927;&#x6982;&#x5C1D;&#x8BD5;&#x4E86;&#x51E0;&#x4E2A;&#x6708;&#x5427;&#xFF0C;&#x4E5F;&#x6709;&#x51E0;&#x5343;&#x7684;&#x6536;&#x5165;&#xFF0C;&#x540E;&#x6765;&#x6CA1;&#x505A;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x8DD1;&#x53BB;&#x5F04;&#x522B;&#x7684;&#x4E1C;&#x897F;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x521D;&#x575A;&#x6301;&#x505A;&#xFF0C;&#x53EF;&#x80FD;&#x4E5F;&#x80FD;&#x6709;&#x51E0;&#x4E07;&#x6536;&#x5165;&#x3002;&#x5230;&#x73B0;&#x5728;&#x8FDB;&#x53BB;&#x4E5F;&#x662F;&#x6BCF;&#x4E2A;&#x6708;&#x90FD;&#x6709;&#x4E00;&#x70B9;&#x94B1;&#xFF0C;&#x6211;&#x7814;&#x7A76;&#x4E0B;&#x8FD9;&#x4E1C;&#x897F;&#x662F;&#x4E0D;&#x662F;&#x8FD8;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x505A;&#x540E;&#x9762;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/757b3f87ae2535793c633a5bc912daf4790fb491913104385d684b4892ec004b" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/e551fc31c1867508f298f4b809adce219b3635d5a51f84b8496b390bf9cdcbb6" alt="&#x56FE;&#x7247;"></p>
<p><strong>&#x7B2C;&#x5341;&#x4E09;&#x4EFD;&#x526F;&#x4E1A;</strong>&#xFF0C;&#x4E5F;&#x4E0D;&#x7B97;&#x662F;&#x526F;&#x4E1A;&#x5427;&#xFF0C;&#x56E0;&#x4E3A;&#x4E8F;&#x94B1;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x533A;&#x5757;&#x94FE;&#xFF0C;&#x5F53;&#x65F6;&#x7FA4;&#x91CC;&#x6709;&#x4EBA;&#x518D;&#x5206;&#x4EAB;&#x73A9;&#x70BC;&#x6E38;&#xFF0C;&#x6BCF;&#x5929;&#x90FD;&#x80FD;&#x8D5A;&#x94B1;&#xFF0C;&#x4E5F;&#x6709;&#x4EBA;&#x66B4;&#x5BCC;&#xFF0C;&#x6211;&#x5C31;&#x8DDF;&#x53BB;&#x73A9;&#x4E86;&#xFF0C;&#x73A9;&#x4E86;&#x5927;&#x534A;&#x5E74;&#xFF0C;&#x73A9;&#x4E86;&#x98DE;&#x8239;&#x3001;Baby&#x3001;Bsw&#x5404;&#x79CD;&#x6E38;&#x620F;&#xFF0C;&#x7ED3;&#x679C;&#x8FD8;&#x4E8F;&#x4E86;&#x5C0F;&#x51E0;&#x4E07;&#xFF0C;&#x5927;&#x8D77;&#x5927;&#x843D;&#x592A;&#x4E25;&#x91CD;&#x4E86;&#xFF0C;&#x4E0D;&#x9002;&#x5408;&#x6211;&#xFF0C;&#x4ECE;&#x6B64;&#x6211;&#x4E5F;&#x8BA4;&#x6E05;&#x4E86;&#x73B0;&#x5B9E;&#xFF0C;&#x66B4;&#x5BCC;&#x7684;&#x673A;&#x4F1A;&#x4ECE;&#x6765;&#x4E0D;&#x5C5E;&#x4E8E;&#x6211;&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x7EE7;&#x7EED;&#x8001;&#x8001;&#x5B9E;&#x5B9E;&#x7684;&#x505A;&#x526F;&#x4E1A;&#x5427;&#x3002;&#x4E0D;&#x8FC7;&#x901A;&#x8FC7;&#x8FD9;&#x6B21;&#xFF0C;&#x6211;&#x4E5F;&#x5B66;&#x4E86;&#x4E00;&#x4E9B;&#x533A;&#x5757;&#x94FE;&#x7684;&#x6280;&#x672F;&#x4EE5;&#x53CA;&#x94FE;&#x4E0A;&#x62A2;&#x8D2D;&#x7684;&#x73A9;&#x6CD5;&#xFF0C;&#x5F53;&#x65F6;&#x5199;&#x4EE3;&#x7801;&#x53BB;&#x62A2;&#x4E1C;&#x897F;&#xFF0C;&#x8FD8;&#x88AB;&#x6211;&#x62A2;&#x5230;&#x4E86;&#xFF0C;&#x8FD8;&#x662F;&#x86EE;&#x5389;&#x5BB3;&#x7684;&#x3002;</p>
<p><strong>&#x7B2C;&#x5341;&#x56DB;</strong>&#x4EFD;<strong>&#x526F;&#x4E1A;&#xFF0C;</strong> &#x662F;&#x505A;&#x6DD8;&#x5B9D;&#x865A;&#x62DF;&#x7269;&#x54C1;&#xFF0C;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x5356;&#x4E00;&#x4E9B;&#x865A;&#x62DF;&#x7269;&#x54C1;&#xFF0C;&#x518D;&#x914D;&#x5408;&#x4E00;&#x4E9B;&#x81EA;&#x52A8;&#x53D1;&#x8D27;&#x63D2;&#x4EF6;&#xFF0C;&#x76F4;&#x63A5;&#x5C31;&#x89E3;&#x653E;&#x4E86;&#x6211;&#x53CC;&#x624B;&#xFF0C;&#x6BCF;&#x5929;&#x9700;&#x8981;&#x56DE;&#x7B54;&#x5BA2;&#x6237;&#x7684;&#x95EE;&#x9898;&#x5F88;&#x5C11;&#x3002;&#x8FD9;&#x4E5F;&#x7B97;&#x662F;&#x6211;&#x6EE1;&#x610F;&#x7684;&#x4E00;&#x79CD;&#x7761;&#x540E;&#x6536;&#x5165;&#x4E86;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x65F6;&#x5019;&#x6708;&#x6536;&#x5165;&#x6709;3000+&#xFF0C;&#x5E73;&#x65F6;500-1000&#x5427;&#x3002;</p>
<p><strong>&#x7B2C;&#x5341;&#x4E94;&#x4EFD;&#x526F;&#x4E1A;</strong>&#xFF0C;&#x6536;&#x5165;&#x4E0D;&#x5230;1000&#xFF0C;&#x662F;&#x8DDF;&#x7740;&#x522B;&#x4EBA;&#x73A9;&#x8FD9;&#x4E2A;&#x4E03;&#x5915;&#x9752;&#x86D9;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x6709;&#x6536;&#x94B1;&#x5E2E;&#x4EBA;&#x53BB;&#x7ED9;&#x5BF9;&#x65B9;&#x7684;&#x670B;&#x53CB;&#x9001;&#x795D;&#x798F;&#xFF0C;&#x5632;&#x8BBD;&#x5BF9;&#x65B9;&#x5355;&#x8EAB;&#xFF0C;&#x5B64;&#x5BE1;&#x5B64;&#x5BE1;&#x5B64;&#x5BE1;&#x5B64;&#x5BE1;&#x3002;&#x6211;&#x7EAF;&#x7CB9;&#x662F;&#x56E0;&#x4E3A;&#x597D;&#x73A9;&#x624D;&#x53BB;&#x5C1D;&#x8BD5;&#x7684;&#xFF0C;&#x7ED3;&#x679C;&#x6548;&#x679C;&#x8FD8;&#x7279;&#x522B;&#x597D;&#xFF0C;&#x4E00;&#x4E2A;&#x4EBA;&#x88AB;&#x5632;&#x7B11;&#x4E86;&#xFF0C;&#x4E5F;&#x4ED8;&#x94B1;&#x8BA9;&#x6211;&#x5632;&#x7B11;&#x56DE;&#x53BB;&#xFF0C;&#x4E50;&#x6B7B;&#x6211;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/45ca429df3826645f045a635576226e3878cdce3a589e7c1217644adf8ab16b6" alt="&#x56FE;&#x7247;"></p>
<p>&#x771F;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#x90FD;&#x53EF;&#x4EE5;&#x662F;&#x751F;&#x610F;&#xFF0C;&#x8FD8;&#x6709;&#x6708;&#x8001;&#x7EA2;&#x7EBF;&#x5565;&#x7684;&#x3002;</p>
<p>&#x6211;&#x521A;&#x624D;&#x7FFB;&#x4E86;&#x4E0B;&#xFF0C;2022&#x5E74;&#x6211;&#x6CA1;&#x6709;&#x505A;&#x65B0;&#x9879;&#x76EE;&#xFF0C;&#x5927;&#x6982;2021&#x5E74;10&#x6708;&#x5E95;-2022&#x5E74;8&#x6708;&#x90FD;&#x5728;&#x5F04;&#x533A;&#x5757;&#x94FE;&#x8FD9;&#x5757;&#x7684;&#xFF0C;&#x5F04;&#x5F97;&#x6211;&#x7CBE;&#x75B2;&#x529B;&#x7AED;&#x3002;&#x540E;&#x6765;&#x6700;&#x540E;&#x53D7;&#x4E0D;&#x4E86;&#xFF0C;&#x5C31;&#x8BA4;&#x6E05;&#x73B0;&#x5B9E;&#x653E;&#x5F03;&#x533A;&#x5757;&#x94FE;&#x8FD9;&#x5757;&#x7684;&#x5C1D;&#x8BD5;&#x3002;</p>
<p>&#x552F;&#x4E00;&#x8BA9;&#x6211;&#x4E8F;&#x94B1;&#x7684;&#x9879;&#x76EE;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x7684;&#x5916;&#x5356;CPS&#x548C;&#x533A;&#x5757;&#x94FE;&#x9879;&#x76EE;&#x4E86;&#x3002;</p>
<p>&#x7136;&#x540E;&#x5C31;&#x5230;&#x4E86;2023&#x5E74;&#x4E86;&#xFF0C;&#x90A3;&#x65F6;&#x5019;&#x516C;&#x53F8;&#x4E1A;&#x52A1;&#x5F00;&#x59CB;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x51FA;&#x73B0;&#x4E86;&#x62D6;&#x6B20;&#x5DE5;&#x8D44;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x597D;&#x5728;&#x6211;&#x6709;&#x526F;&#x4E1A;&#x53EF;&#x4EE5;&#x505A;&#xFF0C;&#x751F;&#x6D3B;&#x6682;&#x65F6;&#x4E0D;&#x53D7;&#x5F71;&#x54CD;&#x3002;</p>
<p>&#x5230;&#x4E86;3&#x6708;&#x4EFD;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x53C2;&#x52A0;&#x4E86;&#x751F;&#x8D22;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x822A;&#x6D77;&#xFF0C;&#x6211;&#x9009;&#x62E9;&#x4E86;AI&#x7ED8;&#x753B;&#xFF0C;&#x8FD9;&#x6B21;&#x7684;&#x822A;&#x6D77;&#x610F;&#x5916;&#x7684;&#x8BA9;&#x6211;&#x5F00;&#x542F;&#x4E86;<strong>&#x7B2C;&#x5341;&#x516D;&#x4EFD;&#x526F;&#x4E1A;&#xFF0C;</strong> &#x53C2;&#x52A0;&#x5B8C;&#x8FD9;&#x6B21;&#x822A;&#x6D77;&#x540E;&#xFF0C;&#x7ECF;&#x8FC7;&#x4E00;&#x4E2A;&#x6708;&#x7684;&#x6280;&#x672F;&#x6C89;&#x6DC0;&#xFF0C;&#x6211;&#x5C31;&#x5F00;&#x59CB;&#x5C1D;&#x8BD5;AI&#x53D8;&#x73B0;&#x4E86;&#xFF0C;&#x4E00;&#x5F00;&#x59CB;&#x662F;&#x505A;AI&#x7ED8;&#x753B;&#x7684;&#x966A;&#x8DD1;&#x7FA4;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E2A;&#x5C31;&#x5185;&#x6D4B;&#x4E86;10&#x51E0;&#x4E2A;&#x7528;&#x6237;&#xFF0C;&#x6536;&#x8D39;99&#x5143;&#xFF0C;&#x5206;&#x4EAB;&#x6211;&#x5199;&#x7684;&#x6210;&#x4F53;&#x7CFB;&#x7684; midjourney &#x7684;&#x7ED8;&#x753B;&#x6559;&#x7A0B;&#xFF0C;&#x7136;&#x540E;&#x987A;&#x4FBF;&#x5356;gpt&#x548C; midjourney &#x7684;&#x8D26;&#x53F7;&#xFF0C;&#x540E;&#x9762;&#x8FD8;&#x6709;&#x5E2E;&#x4F01;&#x4E1A;&#x6536;gpt4 api&#x8D26;&#x53F7;&#xFF0C;&#x6700;&#x540E;&#x662F;gpt4&#x7684;&#x4F1A;&#x5458;&#x8D26;&#x53F7;&#x4F53;&#x7CFB;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x5411;&#xFF0C;&#x77ED;&#x77ED;3&#x4E2A;&#x6708;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x4E86;4&#x4E07;&#x591A;&#x7684;&#x6536;&#x76CA;&#xFF0C;&#x73B0;&#x5728;&#x867D;&#x7136;&#x5C31;&#x5269;&#x4E0B;gpt&#x8D26;&#x53F7;&#x548C;&#x4F1A;&#x5458;&#x5145;&#x503C;&#x4E1A;&#x52A1;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A;&#x6708;&#x4E5F;&#x90FD;&#x80FD;&#x7ED9;&#x6211;&#x5E26;&#x6765;&#x7A33;&#x5B9A;&#x7684;&#x6536;&#x76CA;&#x3002;</p>
<p><strong>&#x7B2C;&#x5341;&#x4E03;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x662F;&#x5C1D;&#x8BD5;&#x505A;AI&#x516C;&#x4F17;&#x53F7;&#x548C;&#x767E;&#x5BB6;&#x53F7;&#xFF0C;&#x4E0D;&#x8FC7;&#x6536;&#x76CA;&#x4E0D;&#x884C;&#xFF0C;&#x5C31;&#x51E0;&#x767E;&#x5757;&#xFF0C;&#x505A;&#x7684;&#x6709;&#x70B9;&#x665A;&#xFF0C;&#x98CE;&#x53E3;&#x8FC7;&#x53BB;&#x4E86;&#x3002;</p>
<p><strong>&#x7B2C;&#x5341;&#x516B;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x5C1D;&#x8BD5;&#x662F;&#x5199;&#x5C0F;&#x62A5;&#x7AE5;&#x624B;&#x518C;&#x548C;&#x5206;&#x9500;&#x77E5;&#x8BC6;&#x661F;&#x7403;&#xFF0C;&#x52A0;&#x8D77;&#x6765;&#x4E5F;&#x6709;2000+&#x591A;&#x5427;&#x3002;</p>
<p><strong>&#x7B2C;&#x5341;&#x4E5D;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x5C1D;&#x8BD5;&#x5C31;&#x662F;&#x77ED;&#x89C6;&#x9891;&#x4E86;&#xFF0C;&#x89C6;&#x9891;&#x53F7;&#x3001;&#x6296;&#x97F3;&#x3001;&#x5C0F;&#x7EA2;&#x4E66;&#x4E09;&#x4E2A;&#x5E73;&#x53F0;&#x90FD;&#x6709;&#x5C1D;&#x8BD5;&#xFF0C;&#x6536;&#x76CA;&#x4E0D;&#x591A;&#xFF0C;&#x5149;&#x6DA8;&#x7C89;&#x4E86;&#xFF0C;&#x4E0D;&#x8FC7;&#x77ED;&#x89C6;&#x9891;&#x81EA;&#x5A92;&#x4F53;&#x8FD9;&#x5757;&#x6211;&#x76EE;&#x524D;&#x8FD8;&#x5728;&#x7EE7;&#x7EED;&#x575A;&#x6301;&#x505A;&#xFF0C;&#x6211;&#x76F8;&#x4FE1;&#x672A;&#x6765;&#x53EF;&#x4EE5;&#x505A;&#x6210;&#x3002;</p>
<p><strong>&#x7B2C;&#x4E8C;&#x5341;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x5C1D;&#x8BD5;&#x5FAE;&#x4FE1;&#x7EA2;&#x5305;&#x5C01;&#x9762;&#x9879;&#x76EE;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8DDF;&#x7740;&#x6559;&#x7A0B;&#x628A;&#x5E97;&#x94FA;&#x5F00;&#x8D77;&#x6765;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x5F15;&#x6D41;&#xFF0C;&#x8FD9;&#x4E2A;&#x9879;&#x76EE;&#x4E0A;&#x9650;&#x6BD4;&#x8F83;&#x4F4E;&#xFF0C;&#x6210;&#x672C;&#x4E5F;&#x4F4E;&#xFF0C;&#x7B97;&#x662F;&#x9002;&#x5408;&#x65B0;&#x4EBA;&#x5C1D;&#x8BD5;&#x7684;&#x4E00;&#x4E2A;&#x526F;&#x4E1A;&#x3002;&#x6211;&#x8FD9;&#x6CE2;&#x8FD9;&#x5757;&#x5356;&#x7EA2;&#x5305;&#x4E5F;&#x5C31;&#x8D5A;&#x4E86;&#x5C0F;&#x51E0;&#x767E;&#x5757;&#x3002;</p>
<p><strong>&#x7B2C;&#x4E8C;&#x5341;&#x4E00;&#x4EFD;&#x526F;&#x4E1A;</strong>&#x5C31;&#x662F;&#x95F2;&#x9C7C;&#x5F00;&#x5E97;&#x5356;&#x8D27;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x662F;12&#x6708;&#x521A;&#x5F00;&#x59CB;&#x6CA1;&#x591A;&#x4E45;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5B66;&#x4E60;&#x4E86;&#x95F2;&#x9C7C;&#x4E0A;&#x5F00;&#x5E97;&#x3001;&#x5546;&#x54C1;&#x4E0A;&#x67B6;&#x3001;&#x6587;&#x6848;&#x4E3B;&#x56FE;&#x5236;&#x4F5C;&#x3001;&#x8865;&#x5355;&#x64CD;&#x4F5C;&#x3002;&#x7B97;&#x662F;&#x7B80;&#x5355;&#x5B8C;&#x6210;&#x4E86;&#x4E0B;&#x521D;&#x6B65;&#x7684;&#x4E86;&#x89E3;&#xFF0C;&#x76EE;&#x524D;&#x4E5F;&#x53EA;&#x662F;&#x51FA;&#x4E86;&#x4E00;&#x5355;&#x3002;&#x540E;&#x9762;&#x8FD8;&#x8981;&#x7EE7;&#x7EED;&#x52AA;&#x529B;&#x624D;&#x884C;&#x3002;</p>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x6211;&#x8FD9;10&#x5E74;&#x5C1D;&#x8BD5;&#x8FC7;&#x7684;&#x5404;&#x79CD;&#x526F;&#x4E1A;&#x9879;&#x76EE;&#xFF0C;&#x4E0D;&#x6570;&#x4E0D;&#x77E5;&#x9053;&#xFF0C;&#x90FD;&#x8D85;&#x8FC7;20&#x4E2A;&#x4E86;&#x3002;</p>
<p>&#x5176;&#x5B9E;2018&#x5E74;&#x4E4B;&#x524D;&#x8FD8;&#x5C5E;&#x4E8E;&#x88AB;&#x52A8;&#x7684;&#x505A;&#x526F;&#x4E1A;&#xFF0C;18&#x5E74;&#x4E4B;&#x540E;&#x624D;&#x7B97;&#x4E3B;&#x52A8;&#x771F;&#x6B63;&#x7684;&#x82B1;&#x5FC3;&#x601D;&#x53BB;&#x5C1D;&#x8BD5;&#x505A;&#x526F;&#x4E1A;&#xFF0C;&#x6BCF;&#x505A;&#x6210;&#x4E00;&#x4E2A;&#x526F;&#x4E1A;&#x7684;0-1&#xFF0C;&#x90A3;&#x79CD;&#x6210;&#x5C31;&#x611F;&#x662F;&#x5F88;&#x723D;&#x7684;&#xFF0C;&#x4E5F;&#x5BB9;&#x6613;&#x6FC0;&#x52B1;&#x81EA;&#x5DF1;&#x53BB;&#x7EE7;&#x7EED;&#x505A;&#x4E0B;&#x53BB;&#x3002;</p>
<p>&#x6211;&#x770B;&#x770B;&#x8FD9;21&#x4E2A;&#x9879;&#x76EE;&#x91CC;&#x9762;&#xFF0C;&#x73B0;&#x5728;&#x8FD8;&#x5728;&#x505A;&#x7684;&#x6709;&#x5982;&#x4E0B;&#x8FD9;&#x4E9B;&#xFF1A;</p>
<blockquote>
<p>&#x5FAE;&#x4FE1;&#x673A;&#x5668;&#x4EBA;&#x6DD8;&#x5B9D;&#x5BA2;</p>
<p>&#x6DD8;&#x5B9D;&#x865A;&#x62DF;&#x5E97;</p>
<p>gpt&#x8D26;&#x53F7;&#x4F1A;&#x5458;&#x4F53;&#x7CFB;</p>
<p>&#x5C0F;&#x62A5;&#x7AE5;&#x624B;&#x518C;</p>
<p>AI&#x516C;&#x4F17;&#x53F7;&#x4F53;&#x7CFB;</p>
<p>&#x77ED;&#x89C6;&#x9891;&#x5C1D;&#x8BD5;</p>
<p>&#x5FAE;&#x4FE1;&#x7EA2;&#x5305;&#x5C01;&#x9762;&#x9879;&#x76EE;</p>
<p>&#x95F2;&#x9C7C;&#x5F00;&#x5E97;</p>
</blockquote>
<p>&#x6BCF;&#x4E2A;&#x6708;&#x51E0;&#x5341;&#x4E0A;&#x767E;&#x6536;&#x5165;&#x7684;&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x8001;&#x5B9E;&#x8BF4;&#x6211;&#x5F88;&#x559C;&#x6B22;CPS&#x4F53;&#x7CFB;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x56E0;&#x4E3A;&#x8DB3;&#x591F;&#x7B80;&#x5355;&#xFF0C;&#x505A;&#x5230;&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x662F;&#x7761;&#x540E;&#x6536;&#x5165;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x8001;&#x54E5;&#x7684;&#x8BA1;&#x5212;&#x5C31;&#x662F;&#x505A;10&#x4E2A;&#x7761;&#x540E;&#x6536;&#x5165;&#x9879;&#x76EE;&#xFF0C;&#x8FD9;&#x6837;&#x81EA;&#x5DF1;&#x5C31;&#x81EA;&#x7531;&#x4E86;&#x3002;</p>
<p>&#x6BCF;&#x4E2A;&#x6708;&#x51E0;&#x5341;&#x4E0A;&#x767E;&#x6536;&#x5165;&#x7684;&#x5C31;&#x4E0D;&#x8BF4;&#x4E86;&#xFF0C;&#x8001;&#x5B9E;&#x8BF4;&#x6211;&#x5F88;&#x559C;&#x6B22;CPS&#x4F53;&#x7CFB;&#x7684;&#x9879;&#x76EE;&#xFF0C;&#x56E0;&#x4E3A;&#x8DB3;&#x591F;&#x7B80;&#x5355;&#xFF0C;&#x505A;&#x5230;&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x662F;&#x7761;&#x540E;&#x6536;&#x5165;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x8001;&#x54E5;&#x7684;&#x8BA1;&#x5212;&#x5C31;&#x662F;&#x505A;10&#x4E2A;&#x7761;&#x540E;&#x6536;&#x5165;&#x9879;&#x76EE;&#xFF0C;&#x8FD9;&#x6837;&#x81EA;&#x5DF1;&#x5C31;&#x81EA;&#x7531;&#x4E86;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x8BF4;&#x4E00;&#x4E0B;&#x6211;&#x5B66;&#x5230;&#x7684;&#x8BA4;&#x77E5;&#xFF1A;</p>
<p>1&#xFF1A;&#x522B;&#x4EBA;&#x8BF4;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x4F60;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x53EA;&#x6709;&#x81EA;&#x5DF1;&#x7ECF;&#x5386;&#x8FC7;&#xFF0C;&#x624D;&#x4F1A;&#x6709;&#x6DF1;&#x523B;&#x7684;&#x5370;&#x8C61;&#x548C;&#x5171;&#x9E23;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x8BF4;&#x7684;&#x8FD9;&#x4E9B;&#x4F60;&#x5C31;&#x5F53;&#x4F5C;&#x53C2;&#x8003;&#x3002;</p>
<p>2&#xFF1A;&#x4E00;&#x5207;&#x751F;&#x610F;&#x7684;&#x672C;&#x8D28;&#x662F;&#x6D41;&#x91CF;&#xFF1B;&#x4E00;&#x5207;&#x4EA4;&#x6613;&#x7684;&#x672C;&#x8D28;&#x662F;&#x4FE1;&#x4EFB;&#x3002;&#x60F3;&#x505A;&#x526F;&#x4E1A;&#xFF0C;&#x60F3;&#x6E05;&#x695A;&#x4EBA;&#x8D27;&#x573A;&#x8FD9;&#x4E2A;&#x5546;&#x4E1A;&#x6838;&#x5FC3;&#x7406;&#x8BBA;&#x3002;</p>
<p>3&#xFF1A;&#x7EB8;&#x4E0A;&#x8C08;&#x5175;&#x7EC8;&#x89C9;&#x6D45;&#xFF0C;&#x552F;&#x6709;&#x4E0B;&#x573A;&#x5B9E;&#x6218;&#x628A;&#x624B;&#x5F04;&#x810F;&#xFF0C;&#x4F60;&#x624D;&#x80FD;&#x6536;&#x83B7;&#x7B2C;&#x4E00;&#x624B;&#x7ECF;&#x9A8C;&#xFF0C;&#x51FA;&#x6765;&#x6DF7;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F;&#x51FA;&#x6765;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x624D;&#x5F88;&#x63A8;&#x5D07;&#x751F;&#x8D22;&#x7684;&#x5927;&#x822A;&#x6D77;&#xFF0C;&#x8FD9;&#x662F;&#x975E;&#x5E38;&#x9002;&#x5408;&#x65B0;&#x4EBA;&#x7EC3;&#x624B;&#x7684;&#x673A;&#x4F1A;&#xFF0C;&#x4E00;&#x5957;&#x5B8C;&#x6574;&#x7684;&#x822A;&#x6D77;&#x624B;&#x518C;&#xFF0C;12&#x5929;&#x7684;&#x6253;&#x5361;&#x6B21;&#x6570;&#x8981;&#x6C42;&#xFF0C;&#x903C;&#x7740;&#x4F60;&#x53BB;&#x5B66;&#x53BB;&#x5B9E;&#x64CD;&#xFF0C;&#x8FD8;&#x6709;&#x51E0;&#x767E;&#x4E2A;&#x4EBA;&#x966A;&#x7740;&#x4F60;&#x4E00;&#x8D77;&#xFF0C;&#x9047;&#x5230;&#x95EE;&#x9898;&#x76F8;&#x4E92;&#x8C08;&#x8BBA;&#x3002;&#x8FD9;&#x6837;&#x4F1A;&#x6BD4;&#x81EA;&#x5DF1;&#x4E00;&#x4E2A;&#x4EBA;&#x53BB;&#x73A9;&#x5BB9;&#x6613;&#x7684;&#x591A;&#x3002;</p>
<p>4&#xFF1A;&#x521A;&#x5F00;&#x59CB;&#x505A;&#x9879;&#x76EE;&#xFF0C;&#x6CA1;&#x8D5A;&#x5230;&#x94B1;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x5FC3;&#x6001;&#x653E;&#x5E73;&#xFF0C;&#x5B66;&#x5230;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#x624D;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x4F60;&#x5B66;&#x4F1A;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x6280;&#x80FD;&#x5361;&#x7247;&#xFF0C;&#x90FD;&#x4F1A;&#x4E3A;&#x4F60;&#x4E0B;&#x4E00;&#x6B21;&#x7684;&#x9879;&#x76EE;&#x5C1D;&#x8BD5;&#x63D0;&#x4F9B;&#x5E2E;&#x52A9;&#x3002;</p>
<p>5&#xFF1A;&#x65E9;&#x70B9;&#x642D;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x8D5A;&#x94B1;&#x5175;&#x5668;&#x5E93;&#xFF0C;&#x628A;&#x4F60;&#x5B66;&#x5230;&#x7684;&#x4EFB;&#x4F55;&#x80FD;&#x63D0;&#x9AD8;&#x4F60;&#x8D5A;&#x94B1;&#x80FD;&#x529B;&#x7684;&#x90FD;&#x585E;&#x8FDB;&#x53BB;&#xFF0C;&#x5F15;&#x6D41;&#x80FD;&#x529B;&#xFF0C;&#x53D8;&#x73B0;&#x80FD;&#x529B;&#xFF0C;&#x5546;&#x4E1A;&#x8BA4;&#x77E5;&#x7B49;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/2bbccb5c2f56a28fe060eb9d045235459f130a8452e1d654f21b3ee821e57f2c" alt="&#x56FE;&#x7247;"></p>
<p>6&#xFF1A;&#x6D41;&#x6C34;&#x4E0D;&#x4E89;&#x5148;&#xFF0C;&#x4E89;&#x7684;&#x662F;&#x6ED4;&#x6ED4;&#x4E0D;&#x7EDD;&#x3002;&#x4E00;&#x5F00;&#x59CB;&#x505A;&#x4E0D;&#x51FA;&#x6210;&#x7EE9;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x76F8;&#x4FE1;&#x81EA;&#x5DF1;&#xFF0C;&#x575A;&#x6301;&#x4E0B;&#x53BB;&#x3002;&#x76F8;&#x4FE1;&#x575A;&#x6301;&#x7684;&#x529B;&#x91CF;&#xFF0C;&#x76F8;&#x4FE1;1&#x4E07;&#x5C0F;&#x65F6;&#x5B9A;&#x5F8B;&#x3002;</p>
<p>&#x4ECA;&#x665A;&#x542C;&#x522B;&#x4EBA;&#x76F4;&#x64AD;&#x542C;&#x5230;&#x51CC;&#x6668;1&#x70B9;&#x534A;&#xFF0C;&#x6587;&#x7AE0;&#x5199;&#x5230;&#x73B0;&#x5728;&#x5FEB;&#x51CC;&#x6668;3&#x70B9;&#x4E86;&#xFF0C;&#x771F;&#x662F;&#x65E0;&#x8BED;&#x54C8;&#x54C8;&#xFF0C;&#x51C6;&#x5907;&#x6536;&#x5C3E;&#x4E86;&#xFF0C;&#x8BF4;&#x4E00;&#x4E0B;2024&#x5E74;&#x7684;&#x8BA1;&#x5212;&#xFF0C;&#x4E5F;&#x7B97;&#x7ACB;&#x4E00;&#x4E2A;Flag&#xFF0C;&#x5E0C;&#x671B;&#x81EA;&#x5DF1;&#x52AA;&#x529B;&#x52A0;&#x6CB9;&#xFF0C;&#x597D;&#x8FD0;&#x7737;&#x987E;&#x3002;</p>
<p>1&#xFF1A;&#x8BA4;&#x771F;&#x7528;&#x98DE;&#x4E66;&#x5236;&#x5B9A;&#x9879;&#x76EE;&#x8BA1;&#x5212;&#xFF0C;&#x6309;&#x8BA1;&#x5212;&#x63A8;&#x52A8;&#x6BCF;&#x4E00;&#x4E2A;&#x9879;&#x76EE;&#x3002;</p>
<p>2&#xFF1A;&#x6301;&#x7EED;&#x5728;AI&#x9886;&#x57DF;&#x6DF1;&#x8015;&#xFF0C;&#x505A;&#x4E00;&#x4E2A;&#x81EA;&#x5A92;&#x4F53;&#xFF0C;&#x627E;&#x5230;&#x53D8;&#x73B0;&#x65B9;&#x5F0F;&#x3002;</p>
<p>3&#xFF1A;&#x63D0;&#x9AD8;&#x4E2A;&#x4EBA;&#x8BA4;&#x77E5;&#xFF0C;&#x5B66;&#x4E60;&#x5E76;&#x638C;&#x63E1;100&#x4E2A;&#x5E95;&#x5C42;&#x601D;&#x7EF4;&#x6A21;&#x578B;&#x3002;</p>
<p>4&#xFF1A;&#x5F00;&#x59CB;&#x5B9A;&#x5236;&#x8DD1;&#x6B65;&#x8BA1;&#x5212;&#xFF0C;&#x6BCF;&#x5468;&#x4E0D;&#x5C11;&#x4E8E;&#x4E09;&#x6B21;&#x3002;</p>
<p>5&#xFF1A;&#x4ED8;&#x8D39;&#x94FE;&#x63A5;&#x66F4;&#x9AD8;&#x4E00;&#x7EA7;&#x7684;&#x5708;&#x5B50;&#xFF0C;&#x627E;&#x98CE;&#x53E3;&#xFF0C;&#x5403;&#x7EA2;&#x5229;&#xFF0C;&#x62B1;&#x5927;&#x817F;&#x3002;</p>
<p>6&#xFF1A;&#x505A;&#x4E00;&#x4E2A;&#x5229;&#x4ED6;&#x7684;&#x4EBA;&#xFF0C;&#x613F;&#x4E16;&#x754C;&#x5BF9;&#x6211;&#x6E29;&#x67D4;&#x4EE5;&#x5F85;&#x3002;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x9876;&#x4E0D;&#x4F4F;&#x4E86;&#xFF0C;&#x51C6;&#x5907;&#x7761;&#x89C9;&#x3002;</p>
<p>&#x5728;&#x8FD9;&#x91CC;&#x561F;&#x561F;&#x5411;&#x5927;&#x5BB6;&#x732E;&#x4E0A;&#x6700;&#x8877;&#x5FC3;&#x7684;&#x795D;&#x798F;&#xFF1A;</p>
<p>&#x613F;&#x5927;&#x5BB6;&#x5584;&#x5F85;&#x8FD9;&#x4E00;&#x5E74;&#x52AA;&#x529B;&#x62FC;&#x640F;&#x5584;&#x826F;&#x7684;&#x81EA;&#x5DF1;&#xFF0C;&#x5E0C;&#x671B;&#x65B0;&#x7684;&#x4E00;&#x5E74;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x5954;&#x8D74;&#x90FD;&#x6709;&#x610F;&#x4E49;&#xFF01;</p>
<p>&#x6211;&#x662F;&#x561F;&#x561F;&#xFF0C;&#x5341;&#x5E74;&#x7A0B;&#x5E8F;&#x5458;&#xFF0C;35&#x5C81;&#x88AB;&#x8FEB;&#x79BB;&#x804C;&#x5F00;&#x542F;&#x81EA;&#x7531;&#x804C;&#x4E1A;&#x4E4B;&#x8DEF;&#x3002;</p>
<p>&#x6211;&#x6700;&#x8FD1;&#x5728;&#x65E5;&#x66F4;&#x516C;&#x4F17;&#x53F7;&#xFF0C;&#x5DF2;&#x7ECF;&#x65E5;&#x66F4;90&#x5929;+&#x4E86;&#xFF0C;&#x6BCF;&#x5929;&#x628A;&#x6211;&#x6240;&#x601D;&#x6240;&#x60F3;&#x6240;&#x505A;&#x90FD;&#x4F1A;&#x5199;&#x6210;&#x65E5;&#x8BB0;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x4EEC;&#x6709;&#x53C2;&#x8003;&#x501F;&#x9274;&#x4F5C;&#x7528;&#x3002;<br>&#x8FD9;&#x662F;&#x6211;&#x4E00;&#x4E2A;35&#x5C81;&#x79BB;&#x804C;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x81EA;&#x6211;&#x63A2;&#x7D22;&#x4E4B;&#x8DEF;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/9ef5aa68cd61a79e3e5bbe248155aaa7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7326355171902292003.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7326355171902292003.html" itemprop="url">三个背烂了的八股文，变成两个场景题之后，打得我一脸懵逼。</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-22T12:42:57+08:00">
                2024-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4F60;&#x597D;&#x5440;&#xFF0C;&#x6211;&#x662F;&#x6B6A;&#x6B6A;&#x3002;</p>
<p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6765;&#x76D8;&#x4E00;&#x4E0B;&#x6211;&#x6700;&#x8FD1;&#x9047;&#x5230;&#x7684;&#x4E24;&#x4E2A;&#x6709;&#x610F;&#x601D;&#x7684;&#x4EE3;&#x7801;&#x6848;&#x4F8B;&#xFF0C;&#x6709;&#x610F;&#x601D;&#x7684;&#x70B9;&#x5728;&#x4E8E;&#xFF0C;&#x62FF;&#x5230;&#x4EE3;&#x7801;&#x540E;&#xFF0C;&#x4F60;&#x4E00;&#x773C;&#x671B;&#x53BB;&#xFF0C;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x6BDB;&#x75C5;&#x3002;&#x7136;&#x540E;&#x4E00;&#x987F;&#x5206;&#x6790;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x7834;&#x7EFD;&#x85CF;&#x7684;&#x8FD8;&#x6BD4;&#x8F83;&#x7684;&#x6DF1;&#x3002;</p>
<p>&#x51E0;&#x4E2A;&#x57FA;&#x7840;&#x62DB;&#x5F0F;&#x7684;&#x4E00;&#x5957;&#x7EC4;&#x5408;&#x62F3;&#x4E0B;&#x6765;&#xFF0C;&#x76F4;&#x63A5;&#x628A;&#x6211;&#x6253;&#x61F5;&#x903C;&#x4E86;&#x3002;</p>
<p>&#x4F60;&#x4E5F;&#x6765;&#x770B;&#x770B;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x4F60;&#x8DFA;&#x4F60;&#x4E5F;&#x9EBB;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/76a465d9de8d7b3f2777022b0fb1b1f0be8488cf6ad094a81625a8c7daca8b4d" alt></p>
<h2 id="&#x7B2C;&#x4E00;&#x4E2A;&#x573A;&#x666F;"><a href="#&#x7B2C;&#x4E00;&#x4E2A;&#x573A;&#x666F;" class="headerlink" title="&#x7B2C;&#x4E00;&#x4E2A;&#x573A;&#x666F;"></a>&#x7B2C;&#x4E00;&#x4E2A;&#x573A;&#x666F;</h2><p>&#x9996;&#x5148;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/7faa148a710e73e5a0b9cafb0885c28c46b3ece0da414365d02437fb0f1b0374" alt></p>
<p>&#x4E00;&#x4E2A;&#x8BFB;&#x8005;&#x7ED9;&#x6211;&#x53D1;&#x6765;&#x7684;&#x4E00;&#x4E2A;&#x5173;&#x4E8E;&#x7EBF;&#x7A0B;&#x6C60;&#x4F7F;&#x7528;&#x7684;&#x7591;&#x95EE;&#xFF0C;&#x540C;&#x65F6;&#x9644;&#x4E0A;&#x4E86;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x590D;&#x73B0;&#x95EE;&#x9898;&#x7684; Demo&#x3002;</p>
<p>&#x6211;&#x6253;&#x5F00; Demo &#x4E00;&#x770B;&#xFF0C;&#x4E00;&#x5171;&#x5C31;&#x8FD9;&#x51E0;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x7ED3;&#x5408;&#x95EE;&#x9898;&#x63CF;&#x8FF0;&#x6765;&#x770B;&#x60F3;&#x7740;&#x5E94;&#x8BE5;&#x4E0D;&#x662F;&#x5565;&#x590D;&#x6742;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/90662a624f9cf0d67ad2c6b86f2ee1d22332c24c2677ed409f66ea67978a210b" alt></p>
<p>&#x6211;&#x62FF;&#x8FC7;&#x6765; Demo&#xFF0C;&#x6839;&#x672C;&#x5C31;&#x6CA1;&#x770B;&#x4EE3;&#x7801;&#xFF0C;&#x76F4;&#x63A5;&#x6254;&#x5230; IDEA &#x91CC;&#x9762;&#x8DD1;&#x4E86;&#x4E24;&#x6B21;&#xFF0C;&#x60F3;&#x7740;&#x662F;&#x5148;&#x770B;&#x770B;&#x5177;&#x4F53;&#x62A5;&#x9519;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53BB;&#x5206;&#x6790;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x4E24;&#x6B21;&#x7A0B;&#x5E8F;&#x90FD;&#x6B63;&#x5E38;&#x7ED3;&#x675F;&#x4E86;&#x3002;</p>
<p>&#x597D;&#x5427;&#xFF0C;&#x65E2;&#x7136;&#x6CA1;&#x6709;&#x5F02;&#x5E38;&#xFF0C;&#x6211;&#x4E5F;&#x5927;&#x6982;&#x7684;&#x7785;&#x4E86;&#x4E00;&#x773C; Demo&#xFF0C;&#x91CD;&#x70B9;&#x5173;&#x6CE8;&#x5728;&#x4E86; CountDownLatch &#x7684;&#x7528;&#x6CD5;&#x4E0A;&#x3002;</p>
<p>&#x6211;&#x662F;&#x6A2A;&#x770B;&#x7AD6;&#x770B;&#x4E5F;&#x6CA1;&#x770B;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4E00;&#x76F4;&#x90FD;&#x662F;&#x8FD9;&#x6837;&#x7528;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6B63;&#x786E;&#x7684;&#x7528;&#x6CD5;&#x554A;&#x3002;</p>
<p>&#x4E8E;&#x662F;&#x4ECE;&#x62FF;&#x5230; Demo &#x5230;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#xFF0C;&#x4E0D;&#x5230;&#x4E24;&#x5206;&#x949F;&#xFF0C;&#x6211;&#x76F4;&#x63A5;&#x5F97;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x5927;&#x80C6;&#x7684;&#x7ED3;&#x8BBA;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#xFF1A;&#x5E38;&#x89C4;&#x7528;&#x6CD5;&#xFF0C;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/18c744191d5e907306d7fce53ae0aa86351eb0e5fc54383cae9e3753b42b0512" alt></p>
<p>&#x7136;&#x540E;&#x6211;&#x4EEC;&#x5C31;&#x7ED3;&#x675F;&#x4E86;&#x8FD9;&#x6B21;&#x5BF9;&#x8BDD;&#x3002;</p>
<p>&#x8FC7;&#x4E86;&#x4E00;&#x4F1A;&#xFF0C;&#x6211;&#x51C6;&#x5907;&#x5173;&#x95ED; IDEA &#x4E86;&#x3002;&#x9B3C;&#x4F7F;&#x795E;&#x5DEE;&#x7684;&#xFF0C;&#x6211;&#x53C8;&#x70B9;&#x4E86;&#x4E00;&#x6B21;&#x8FD0;&#x884C;&#x3002;</p>
<p>&#x4F60;&#x731C;&#x600E;&#x4E48;&#x7740;&#xFF1F;</p>
<p>&#x5C45;&#x7136;&#x771F;&#x7684;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x629B;&#x51FA;&#x4E86; rejectedExecution &#x5F02;&#x5E38;&#xFF0C;&#x610F;&#x601D;&#x662F;&#x7EBF;&#x7A0B;&#x6C60;&#x6EE1;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f8113bd71658b01df701f4493a088c5b41d5f64dc6327ad15f897f602f5aca88" alt></p>
<p>&#x54E6;&#x54DF;&#xFF0C;&#x8FD9;&#x5C31;&#x6709;&#x70B9;&#x610F;&#x601D;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/ec77505a789333c1f4931ef1577a82e2c831e057435997893370cb0b058b2f19" alt></p>
<p>&#x5E26;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x76D8;&#x4E00;&#x76D8;&#x3002;</p>
<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x8FD8;&#x662F;&#x8FC7;&#x4E00;&#x4E0B;&#x4EE3;&#x7801;&#xFF0C;&#x4E3A;&#x4E86;&#x51CF;&#x5C11;&#x5E72;&#x6270;&#x9879;&#xFF0C;&#x4FBF;&#x4E8E;&#x7406;&#x89E3;&#xFF0C;&#x6211;&#x628A;&#x4ED6;&#x7ED9;&#x6211;&#x7684; Demo &#x7A0D;&#x5FAE;&#x7B80;&#x5316;&#x4E86;&#x4E00;&#x70B9;&#xFF0C;&#x4F46;&#x662F;&#x6574;&#x4F53;&#x903B;&#x8F91;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x4EFB;&#x4F55;&#x53D8;&#x5316;&#x3002;</p>
<p>&#x7B80;&#x5316;&#x540E;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x4F60;&#x76F4;&#x63A5;&#x7C98;&#x8FC7;&#x53BB;&#xFF0C;&#x5F15;&#x5165;&#x4E00;&#x4E2A; guava &#x7684;&#x5305;&#x5C31;&#x80FD;&#x8DD1;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;import&#xA0;com.google.common.collect.Lists;</span><br><span class="line"></span><br><span class="line">import&#xA0;java.util.ArrayList;</span><br><span class="line">import&#xA0;java.util.List;</span><br><span class="line">import&#xA0;java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line">public&#xA0;class&#xA0;Test&#xA0;{</span><br><span class="line"></span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;private&#xA0;static&#xA0;final&#xA0;ThreadPoolExecutor&#xA0;threadPoolExecutor&#xA0;=&#xA0;new&#xA0;ThreadPoolExecutor(64,&#xA0;64,&#xA0;0,&#xA0;TimeUnit.MINUTES,&#xA0;new&#xA0;ArrayBlockingQueue&lt;&gt;(32));</span><br><span class="line"></span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;public&#xA0;static&#xA0;void&#xA0;main(String[]&#xA0;args)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;List&lt;Integer&gt;&#xA0;list&#xA0;=&#xA0;new&#xA0;ArrayList&lt;&gt;();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for&#xA0;(int&#xA0;i&#xA0;=&#xA0;0;&#xA0;i&#xA0;&lt;&#xA0;400;&#xA0;i++)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;list.add(i);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for&#xA0;(int&#xA0;i&#xA0;=&#xA0;0;&#xA0;i&#xA0;&lt;&#xA0;100;&#xA0;i++)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;List&lt;List&lt;Integer&gt;&gt;&#xA0;sublist&#xA0;=&#xA0;Lists.partition(list,&#xA0;400&#xA0;/&#xA0;32);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;int&#xA0;n&#xA0;=&#xA0;sublist.size();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;CountDownLatch&#xA0;countDownLatch&#xA0;=&#xA0;new&#xA0;CountDownLatch(n);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;for&#xA0;(int&#xA0;j&#xA0;=&#xA0;0;&#xA0;j&#xA0;&lt;&#xA0;n;&#xA0;j++)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;threadPoolExecutor.execute(()&#xA0;-&gt;&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;try&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Thread.sleep(1000);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;catch&#xA0;(Exception&#xA0;e)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;e.printStackTrace();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;finally&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;countDownLatch.countDown();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;});</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;try&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;countDownLatch.await();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;catch&#xA0;(InterruptedException&#xA0;e)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;e.printStackTrace();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;System.out.println(&quot;===============&gt;&#xA0;&#xA0;&#x8BE6;&#x60C5;&#x4EFB;&#x52A1;&#xA0;-&#xA0;&#x4EFB;&#x52A1;&#x5904;&#x7406;&#x5B8C;&#x6210;&quot;);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;System.out.println(&quot;&#x90FD;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&quot;);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">}</span><br><span class="line">/**</span><br><span class="line">&#xA0;*&#xA0;&lt;dependency&gt;</span><br><span class="line">&#xA0;*&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;groupId&gt;com.google.guava&lt;/groupId&gt;</span><br><span class="line">&#xA0;*&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;artifactId&gt;guava&lt;/artifactId&gt;</span><br><span class="line">&#xA0;*&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&lt;version&gt;31.1-jre&lt;/version&gt;</span><br><span class="line">&#xA0;*&#xA0;&lt;/dependency&gt;</span><br><span class="line">&#xA0;*/</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x8D77;&#x5206;&#x6790;&#x4E00;&#x6CE2;&#x4EE3;&#x7801;&#x554A;&#x3002;</p>
<p>&#x9996;&#x5148;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;</p>
<blockquote>
<p>private static final ThreadPoolExecutor threadPoolExecutor = new ThreadPoolExecutor(64, 64, 0, TimeUnit.MINUTES, new ArrayBlockingQueue&lt;&gt;(32));</p>
</blockquote>
<p>&#x8BE5;&#x7EBF;&#x7A0B;&#x6C60;&#x6838;&#x5FC3;&#x5927;&#x5C0F;&#x6570;&#x548C;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#x90FD;&#x662F; 64&#xFF0C;&#x961F;&#x5217;&#x957F;&#x5EA6;&#x4E3A; 32&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x6C60;&#x540C;&#x65F6;&#x80FD;&#x5BB9;&#x7EB3;&#x7684;&#x4EFB;&#x52A1;&#x6570;&#x662F; 64+32=96&#x3002;</p>
<p>main &#x65B9;&#x6CD5;&#x91CC;&#x9762;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/cdd10d429e8a370e11c93b3b5cf44334881928dac4343486e2632c295d132bca" alt></p>
<p>&#x5728;&#x5B9E;&#x9645;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x80AF;&#x5B9A;&#x662F;&#x6709;&#x5177;&#x4F53;&#x7684;&#x4E1A;&#x52A1;&#x542B;&#x4E49;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x8131;&#x654F;&#xFF0C;&#x5C31;&#x7528; List &#x6765;&#x8868;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x8FD9;&#x4E2A;&#x70B9;&#x4F60;&#x77E5;&#x9053;&#x5C31;&#x884C;&#x3002;</p>
<p>&#x7F16;&#x53F7;&#x4E3A; &#x2460; &#x7684;&#x5730;&#x65B9;&#xFF0C;&#x662F;&#x5728;&#x7ED9;&#x5F80; list &#x91CC;&#x9762;&#x653E; 400 &#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F; 400 &#x4E2A;&#x4EFB;&#x52A1;&#x3002;</p>
<p>&#x7F16;&#x53F7;&#x4E3A; &#x2461; &#x7684;&#x5730;&#x65B9;&#xFF0C;&#x8FD9;&#x4E2A; List &#x662F; guava &#x7684; List&#xFF0C;&#x542B;&#x4E49;&#x662F;&#x628A; 400 &#x4E2A;&#x4EFB;&#x52A1;&#x62C6;&#x5206;&#x5F00;&#xFF0C;&#x6BCF;&#x4E00;&#x7EC4;&#x6709; 400/32=12.5 &#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x5411;&#x4E0B;&#x53D6;&#x6574;&#xFF0C;&#x5C31;&#x662F; 12 &#x4E2A;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x662F;&#x4EC0;&#x4E48;&#x4E2A;&#x610F;&#x601D;&#x5462;&#xFF0C;&#x6211;&#x7ED9;&#x4F60;&#x770B;&#x4E00;&#x4E0B; debug &#x7684;&#x622A;&#x56FE;&#x4F60;&#x5C31;&#x77E5;&#x9053;&#x4E86;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/05c170395dfb752ce469dfe1b4949015dab94f56145b641db2d0052406eaa630" alt></p>
<p>400 &#x4E2A;&#x4EFB;&#x52A1;&#x5206;&#x7EC4;&#xFF0C;&#x6BCF;&#x4E00;&#x7EC4; 12 &#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x90A3;&#x5C31;&#x53EF;&#x4EE5;&#x62C6;&#x51FA;&#x6765; 34 &#x7EC4;&#xFF0C;&#x6700;&#x540E;&#x4E00;&#x7EC4;&#x53EA;&#x6709; 4 &#x4E2A;&#x4EFB;&#x52A1;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/be3e926370c21deadddec0a2a25da62d48e812346506dd2f545e703f1322cf34" alt></p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x90FD;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x4E00;&#x70B9;&#x90FD;&#x4E0D;&#x91CD;&#x8981;&#x597D;&#x5427;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x540E;&#x7EED;&#x4ED6;&#x6839;&#x672C;&#x5C31;&#x6CA1;&#x6709;&#x7528;&#x8FD9;&#x4E2A; list &#xFF0C;&#x53EA;&#x662F;&#x7528;&#x5230;&#x4E86; size &#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5373; 34 &#x3002;</p>
<p>&#x6240;&#x4EE5;&#x4F60;&#x751A;&#x81F3;&#x8FD8;&#x80FD;&#x62FF;&#x5230;&#x4E00;&#x4E2A;&#x66F4;&#x52A0;&#x7B80;&#x6D01;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1a4933bfc17eff377e0ec63cfc03085c791c691bb25f36a4b8fa7fcb1272149d" alt></p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x6700;&#x5F00;&#x59CB;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x76F4;&#x63A5;&#x7ED9;&#x4F60;&#x8FD9;&#x4E2A;&#x6700;&#x7B80;&#x5316;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x751A;&#x81F3;&#x8FD8;&#x8BA9;&#x4F60;&#x591A;&#x5F15;&#x5165;&#x4E00;&#x4E2A;&#x5305;&#x5462;&#xFF1F;</p>
<p>&#x56E0;&#x4E3A;&#x6B6A;&#x5E08;&#x5085;&#x5C31;&#x662F;&#x60F3;&#x4F53;&#x73B0;&#x8FD9;&#x4E2A;&#x7B80;&#x5316;&#x4EE3;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x6309;&#x7167;&#x6211;&#x5199;&#x6587;&#x7AE0;&#x7684;&#x7ECF;&#x9A8C;&#xFF0C;&#x5728;&#x5B9A;&#x4F4D;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x5C3D;&#x91CF;&#x591A;&#x7684;&#x51CF;&#x5C11;&#x5E72;&#x6270;&#x9879;&#x3002;&#x6392;&#x9664;&#x5E72;&#x6270;&#x9879;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E5F;&#x662F;&#x68B3;&#x7406;&#x95EE;&#x9898;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5F88;&#x591A;&#x95EE;&#x9898;&#x5728;&#x6392;&#x9664;&#x5E72;&#x6270;&#x9879;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x9010;&#x6E10;&#x7684;&#x80FD;&#x6478;&#x6E05;&#x695A;&#x5927;&#x6982;&#x662F;&#x600E;&#x4E48;&#x56DE;&#x4E8B;&#x513F;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x9047;&#x5230;&#x4E00;&#x4E2A;&#x8BA9;&#x4F60;&#x6478;&#x4E0D;&#x7740;&#x5934;&#x8111;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x90A3;&#x5C31;&#x5148;&#x4ECE;&#x6392;&#x9664;&#x5E72;&#x6270;&#x9879;&#x505A;&#x8D77;&#x3002;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x8BF4;&#x56DE;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x5C31;&#x53EA;&#x6709;&#x8FD9;&#x51E0;&#x884C;&#x4E86;&#xFF0C;&#x6838;&#x5FC3;&#x903B;&#x8F91;&#x5C31;&#x662F;&#x6211;&#x5708;&#x8D77;&#x6765;&#x7684;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/e91967cbdf9106f07f2ebc5ff67ff4f7dfcd73b6d2476eadd8ba579c9e2d2779" alt></p>
<p>&#x800C;&#x5708;&#x8D77;&#x6765;&#x8FD9;&#x4E2A;&#x90E8;&#x5206;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x7EBF;&#x7A0B;&#x6C60;&#x7ED3;&#x5408; CountDownLatch &#x7684;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5BF9;&#x4E8E; CountDownLatch &#x6211;&#x4E00;&#x822C;&#x53EA;&#x5173;&#x6CE8;&#x4E24;&#x4E2A;&#x5730;&#x65B9;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x4E2A;&#x662F; new &#x7684;&#x65F6;&#x5019;&#x4F20;&#x5165;&#x7684;&#x201C;&#x4EE4;&#x724C;&#x6570;&#x201D;&#x548C;&#x8C03;&#x7528; countDown &#x65B9;&#x6CD5;&#x7684;&#x6B21;&#x6570;&#x80FD;&#x4E0D;&#x80FD;&#x5339;&#x914D;&#x4E0A;&#x3002;&#x53EA;&#x6709;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF0C;&#x7A0B;&#x5E8F;&#x624D;&#x80FD;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x5730;&#x65B9;&#x5C31;&#x662F; countDown &#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x662F;&#x4E0D;&#x662F;&#x5728; finally &#x65B9;&#x6CD5;&#x91CC;&#x9762;&#x3002;</p>
<p>&#x8FD9;&#x4E24;&#x4E2A;&#x70B9;&#xFF0C;&#x5728; Demo &#x4E2D;&#x90FD;&#x662F;&#x6B63;&#x786E;&#x7684;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x73B0;&#x5728;&#x4ECE;&#x7A0B;&#x5E8F;&#x5206;&#x6790;&#x4E0D;&#x51FA;&#x6765;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x600E;&#x4E48;&#x529E;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/fe98b1c511b1c69aff0adfce88a8d6cf194de05c5efd0421509a30f681bd5dbc" alt></p>
<p>&#x90A3;&#x5C31;&#x4ECE;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x5F80;&#x56DE;&#x63A8;&#x7B97;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x7684;&#x5F02;&#x5E38;&#x4FE1;&#x606F;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</p>
<p>&#x89E6;&#x53D1;&#x4E86;&#x7EBF;&#x7A0B;&#x6C60;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/9462436910509e996ccf53239592d54227557b72d605df61dfa880c55b203847" alt></p>
<p>&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x4F1A;&#x51FA;&#x73B0;&#x7EBF;&#x7A0B;&#x6C60;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x5462;&#xFF1F;</p>
<p>&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x7528;&#x5B8C;&#x4E86;&#xFF0C;&#x961F;&#x5217;&#x6EE1;&#x4E86;&#xFF0C;&#x6700;&#x5927;&#x7EBF;&#x7A0B;&#x6570;&#x4E5F;&#x7528;&#x5B8C;&#x4E86;&#x7684;&#x65F6;&#x5019;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x6309;&#x7406;&#x6765;&#x8BF4;&#xFF0C;&#x7531;&#x4E8E;&#x6709; countDownLatch.await() &#x7684;&#x5B58;&#x5728;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x5B8C; for &#x5FAA;&#x73AF;&#x4E2D;&#x7684; 34 &#x6B21; countDownLatch.countDown() &#x65B9;&#x6CD5;&#x4E4B;&#x524D;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E00;&#x5B9A;&#x662F;&#x963B;&#x585E;&#x7B49;&#x5F85;&#x7684;&#x3002;</p>
<p>&#x800C; countDownLatch.countDown() &#x65B9;&#x6CD5;&#x5728; finally &#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4E3B;&#x7EBF;&#x7A0B;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;&#xFF0C;&#x6267;&#x884C;&#x5916;&#x5C42;&#x7684; for &#x5FAA;&#x73AF;&#xFF0C;&#x653E;&#x65B0;&#x7684;&#x4EFB;&#x52A1;&#x8FDB;&#x6765;&#xFF0C;&#x90A3;&#x8BF4;&#x660E;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x4EFB;&#x52A1;&#x4E5F;&#x4E00;&#x5B9A;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x5C31;&#x4E00;&#x5B9A;&#x4F1A;&#x91CA;&#x653E;&#x51FA;&#x6765;&#x7B49;&#x7740;&#x63A5;&#x53D7;&#x4E0B;&#x4E00;&#x6CE2;&#x5FAA;&#x73AF;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x634B;&#x4E0B;&#x6765;&#xFF0C;&#x611F;&#x89C9;&#x8FD8;&#x662F;&#x6CA1;&#x6BDB;&#x75C5;&#x554A;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/30d285d602363274bc7c7686e714930124dff40e0fb61f7bf33effdef4af59e4" alt></p>
<p>&#x9664;&#x975E;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x5C31;&#x4E00;&#x5B9A;&#x4F1A;&#x91CA;&#x653E;&#x51FA;&#x6765;&#x7B49;&#x7740;&#x63A5;&#x53D7;&#x4E0B;&#x4E00;&#x6CE2;&#x5FAA;&#x73AF;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;<strong>&#x4F46;&#x662F;&#x4E0D;&#x4F1A;&#x7ACB;&#x9A6C;&#x91CA;&#x653E;&#x51FA;&#x6765;&#x3002;</strong></p>
<p>&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x5462;&#xFF1F;</p>
<p>&#x5C31;&#x662F;&#x5F53;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4EFB;&#x52A1;&#x4E4B;&#x540E;&#xFF0C;&#x5230;&#x5B83;&#x8FDB;&#x5165;&#x4E0B;&#x4E00;&#x6B21;&#x53EF;&#x4EE5;&#x5F00;&#x59CB;&#x5904;&#x7406;&#x4EFB;&#x52A1;&#x7684;&#x72B6;&#x6001;&#x4E4B;&#x95F4;&#xFF0C;&#x6709;&#x65F6;&#x95F4;&#x5DEE;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f2298363bb4540bb5deacb1d33766deba3c5a719f4daecf8f6e4155266d000d5" alt></p>
<p>&#x800C;&#x7531;&#x4E8E;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x5DEE;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x5BFC;&#x81F4;&#x7B2C;&#x4E00;&#x6CE2;&#x7684;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x867D;&#x7136;&#x5168;&#x90E8;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86; countDownLatch.countDown()&#xFF0C;&#x8BA9;&#x4E3B;&#x7EBF;&#x7A0B;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;&#x4E0B;&#x53BB;&#x3002; &#x4F46;&#x662F;&#xFF0C;&#x5728;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x8FD8;&#x6709;&#x5C11;&#x91CF;&#x7EBF;&#x7A0B;&#x672A;&#x518D;&#x6B21;&#x8FDB;&#x5165;&#x201C;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x4EFB;&#x52A1;&#x201D;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x8FD8;&#x5728;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x6536;&#x5C3E;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x4ECE;&#x800C;&#x5BFC;&#x81F4;&#xFF0C;&#x7B2C;&#x4E8C;&#x6CE2;&#x4EFB;&#x52A1;&#x8FDB;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x5F00;&#x542F;&#x65B0;&#x7684;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x6765;&#x6267;&#x884C;&#x3002;</p>
<p>&#x653E;&#x8FDB;&#x6765;&#x7684;&#x4EFB;&#x52A1;&#x901F;&#x5EA6;&#xFF0C;&#x5FEB;&#x4E8E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x7684;&#x201C;&#x6536;&#x5C3E;&#x5DE5;&#x4F5C;&#x201D;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x7EBF;&#x7A0B;&#x6C60;&#x6EE1;&#x4E86;&#xFF0C;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x3002;</p>
<p>&#x9700;&#x8981;&#x8BF4;&#x660E;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x6211;&#x4E2A;&#x4EBA;&#x7684;&#x731C;&#x60F3;&#x548C;&#x63A8;&#x6D4B;&#x3002;&#x8FD9;&#x4E2A;&#x7ED3;&#x8BBA;&#x4E0D;&#x4E00;&#x5B9A;&#x771F;&#x7684;&#x6B63;&#x786E;&#xFF0C;&#x4F46;&#x662F;&#x4F1F;&#x4EBA;&#x66FE;&#x7ECF;&#x8BF4;&#x8FC7;&#xFF1A;&#x5927;&#x80C6;&#x5047;&#x8BBE;&#xFF0C;&#x5C0F;&#x5FC3;&#x6C42;&#x8BC1;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4E3A;&#x4E86;&#x8BC1;&#x660E;&#x8FD9;&#x4E2A;&#x731C;&#x60F3;&#xFF0C;&#x6211;&#x9700;&#x8981;&#x627E;&#x5230;&#x5B9E;&#x9524;&#x8BC1;&#x636E;&#x3002;</p>
<p>&#x4ECE;&#x54EA;&#x91CC;&#x627E;&#x5B9E;&#x9524;&#x5462;&#xFF1F;</p>
<p>&#x6E90;&#x7801;&#x4E4B;&#x4E0B;&#xFF0C;&#x65E0;&#x79D8;&#x5BC6;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;&#x731C;&#x60F3;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x7ACB;&#x9A6C;&#x5C31;&#x60F3;&#x5230;&#x4E86;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<blockquote>
<p>java.util.concurrent.ThreadPoolExecutor#runWorker</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/68de9702bc710913911a797110ada7d75c10af84fab48d87feb5a1a9b95b6703" alt></p>
<p>&#x6807;&#x53F7;&#x4E3A; &#x2460; &#x7684;&#x5730;&#x65B9;&#x662F;&#x6267;&#x884C;&#x7EBF;&#x7A0B; run &#x65B9;&#x6CD5;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x5C31;&#x7B97;&#x662F;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#x3002;&#x5BF9;&#x5E94;&#x5230;&#x6211;&#x4EEC;&#x7684; Demo &#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x90E8;&#x5206;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/94da26db28bcc5a8840c983c62f63be5d6092ee6cc508f1e70467f2de9f460e8" alt></p>
<p>&#x8FD9;&#x90E8;&#x5206;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;countDownLatch.countDown() &#x65B9;&#x6CD5;&#x4E5F;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x8FD8;&#x6CA1;&#x8DD1;&#x5B8C;&#x5462;&#xFF0C;&#x5B83;&#x8FD8;&#x8981;&#x7EE7;&#x7EED;&#x5F80;&#x4E0B;&#x8D70;&#xFF0C;&#x6267;&#x884C;&#x6807;&#x53F7;&#x4E3A; &#x2461; &#x548C; &#x2462; &#x5904;&#x7684;&#x6536;&#x5C3E;&#x5DE5;&#x4F5C;&#x3002;</p>
<p>&#x5728;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x201C;&#x6536;&#x5C3E;&#x5DE5;&#x4F5C;&#x201D;&#x65F6;&#xFF0C;&#x4E3B;&#x7EBF;&#x7A0B;&#x53C8;&#x5494;&#x5494;&#x5C31;&#x8DD1;&#x8D77;&#x6765;&#x4E86;&#xFF0C;&#x4E0B;&#x4E00;&#x6CE2;&#x4EFB;&#x52A1;&#x5C31;&#x6254;&#x8FDB;&#x6765;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x4E0D;&#x5C31;&#x662F;&#x65F6;&#x95F4;&#x5DEE;&#x5417;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/6be129dc26c491bfce3cc4cf5a8ed40fb8185ff5f8ac33de5f5e99d3ef80ccab" alt></p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x518D;&#x95EE;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5904;&#x4E8E;&#x201C;&#x6765;&#x5427;&#xFF0C;&#x54E5;&#x4EEC;&#xFF0C;&#x6211;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x4EFB;&#x52A1;&#x4E86;&#x201D;&#x7684;&#x72B6;&#x6001;&#x7684;&#xFF1F;</p>
<p>&#x662F;&#x4E0D;&#x662F;&#x8981;&#x6267;&#x884C;&#x5230;&#x7EA2;&#x6846;&#x6846;&#x7740;&#x7684;&#x8FD9;&#x4E2A;&#x5730;&#x65B9; WAITING &#x7740;&#xFF1A;</p>
<blockquote>
<p>java.util.concurrent.ThreadPoolExecutor#getTask</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/193540e1197897d62862968dde3c61f3764261640e4a3cc6dcfb4261abc45c20" alt></p>
<p>&#x90A3;&#x5728;&#x6267;&#x884C;&#x5230;&#x8FD9;&#x4E2A;&#x7EA2;&#x6846;&#x6846;&#x4E4B;&#x524D;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x5927;&#x5768;&#x4EE3;&#x7801;&#x5462;&#xFF0C;&#x5B83;&#x4EEC;&#x4E0D;&#x662F;&#x6536;&#x5C3E;&#x5DE5;&#x4F5C;&#xFF0C;&#x5C5E;&#x4E8E;&#x201C;&#x5C31;&#x7EEA;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#x201D;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/7a78bfc832aba5c4f44f0bf03f3221b448eaed78d3ee61490ed38c681da91ff5" alt></p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x518D;&#x634B;&#x4E00;&#x634B;&#x554A;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4EFB;&#x52A1;&#x4E4B;&#x540E;&#xFF0C;&#x5230;&#x4E0B;&#x4E00;&#x6B21;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x7684;&#x72B6;&#x6001;&#x4E4B;&#x95F4;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x201C;&#x6536;&#x5C3E;&#x5DE5;&#x4F5C;&#x201D;&#x548C;&#x201C;&#x5C31;&#x7EEA;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#x201D;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x5FEB;&#x5C31;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x7684;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x201C;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x201D;&#x548C;&#x201C;&#x4E3B;&#x7EBF;&#x7A0B;&#x7EE7;&#x7EED;&#x5F80;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x6254;&#x4EFB;&#x52A1;&#x7684;&#x52A8;&#x4F5C;&#x201D;&#x4E4B;&#x95F4;&#xFF0C;&#x6CA1;&#x6709;&#x5148;&#x540E;&#x903B;&#x8F91;&#x63A7;&#x5236;&#x3002;</p>
<p>&#x4ECE;&#x7A0B;&#x5E8F;&#x4E0A;&#x8BB2;&#xFF0C;&#x8FD9;&#x662F;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x7EBF;&#x7A0B;&#x903B;&#x8F91;&#xFF0C;&#x8C01;&#x5148;&#x8C01;&#x540E;&#xFF0C;&#x90FD;&#x6709;&#x53EF;&#x80FD;&#x3002;</p>
<p>&#x5982;&#x679C;&#x201C;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x201D;&#x5148;&#x5B8C;&#x6210;&#xFF0C;&#x90A3;&#x4E48;&#x540E;&#x9762;&#x6254;&#x8FDB;&#x6765;&#x7684;&#x4EFB;&#x52A1;&#x4E00;&#x5B9A;&#x662F;&#x53EF;&#x4EE5;&#x590D;&#x7528;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x65B0;&#x5F00;&#x7EBF;&#x7A0B;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x5C31;&#x4E0D;&#x4F1A;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x3002;</p>
<p>&#x5982;&#x679C;&#x201C;&#x4E3B;&#x7EBF;&#x7A0B;&#x7EE7;&#x7EED;&#x5F80;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x6254;&#x4EFB;&#x52A1;&#x7684;&#x52A8;&#x4F5C;&#x201D;&#x5148;&#x5B8C;&#x6210;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x5148;&#x5F00;&#x542F;&#x65B0;&#x7EBF;&#x7A0B;&#xFF0C;&#x4ECE;&#x800C;&#x6709;&#x53EF;&#x80FD;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x53EF;&#x80FD;&#x662F;&#x4E0D;&#x62A5;&#x9519;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</p>
<p>&#x540C;&#x65F6;&#x4E5F;&#x56DE;&#x7B54;&#x4E86;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x63D0;&#x9AD8;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x961F;&#x5217;&#x957F;&#x5EA6;&#xFF0C;&#x5C31;&#x4E0D;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x4E86;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/9f47adb4f889891aa0c0cac7da4e89d42d8bbdf172c87ae10572c4c2410198e8" alt></p>
<p>&#x56E0;&#x4E3A;&#x961F;&#x5217;&#x957F;&#x5EA6;&#x8D8A;&#x957F;&#xFF0C;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x4E0D;&#x591F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4EFB;&#x52A1;&#x5927;&#x4E0D;&#x4E86;&#x5728;&#x961F;&#x5217;&#x91CC;&#x9762;&#x5806;&#x7740;&#x3002;&#x800C;&#x4E14;&#x53EA;&#x4F1A;&#x5806;&#x4E00;&#x5C0F;&#x4F1A;&#x513F;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E00;&#x5C0F;&#x4F1A;&#xFF0C;&#x7ED9;&#x4E86;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x8DB3;&#x591F;&#x7684;&#x65F6;&#x95F4;&#x53BB;&#x5B8C;&#x6210;&#x201C;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x201D;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x80FD;&#x5F00;&#x59CB;&#x6D88;&#x8017;&#x961F;&#x5217;&#x91CC;&#x9762;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x63D0;&#x51FA;&#x95EE;&#x9898;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x8BF4;&#x6362;&#x6210; tomcat &#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x5C31;&#x4E0D;&#x4F1A;&#x88AB;&#x62D2;&#x7EDD;&#x4E86;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d2594b7ef6c820b9aa169a6d8f789249eb57641f9a7ab61004c10f692d84f773" alt></p>
<p>&#x4E5F;&#x662F;&#x540C;&#x7406;&#xFF0C;&#x56E0;&#x4E3A; tomcat &#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x91CD;&#x5199;&#x4E86;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#xFF0C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x88AB;&#x62D2;&#x7EDD;&#x4E4B;&#x540E;&#x4F1A;&#x8FDB;&#x884C;&#x91CD;&#x8BD5;&#xFF0C;&#x5C1D;&#x8BD5;&#x628A;&#x4EFB;&#x52A1;&#x4ECD;&#x56DE;&#x5230;&#x961F;&#x5217;&#x4E2D;&#x53BB;&#xFF0C;&#x91CD;&#x8BD5;&#x662F;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x6210;&#x529F;&#x7684;&#x3002;</p>
<p>&#x5BF9;&#x5E94;&#x7684;&#x6E90;&#x7801;&#x662F;&#x8FD9;&#x4E2A;&#x90E8;&#x5206;&#xFF1A;</p>
<blockquote>
<p>org.apache.tomcat.util.threads.ThreadPoolExecutor#execute(java.lang.Runnable, long, java.util.concurrent.TimeUnit)</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/914396050e147e805d4c18fccb9a3e5d360aa69ba7485beca42355d7bf86976b" alt></p>
<p>&#x8FD9;&#x5C31;&#x662F;&#x6211;&#x4ECE;&#x6E90;&#x7801;&#x4E2D;&#x627E;&#x5230;&#x7684;&#x5B9E;&#x9524;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x6211;&#x89C9;&#x5F97;&#x9524;&#x7684;&#x8FD8;&#x4E0D;&#x591F;&#x6B7B;&#xFF0C;&#x6211;&#x5F97;&#x60F3;&#x529E;&#x6CD5;&#x8BA9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5FC5;&#x73B0;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x600E;&#x4E48;&#x5F04;&#x5462;&#xFF1F;</p>
<p>&#x5982;&#x679C;&#x8981;&#x8BA9;&#x95EE;&#x9898;&#x5FC5;&#x73B0;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x662F;&#x5EF6;&#x957F;&#x201C;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x201D;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8BA9;&#x4E3B;&#x7EBF;&#x7A0B;&#x6254;&#x4EFB;&#x52A1;&#x7684;&#x52A8;&#x4F5C;&#x201D;&#x7684;&#x52A8;&#x4F5C;&#x5148;&#x4E8E;&#x5B83;&#x5B8C;&#x6210;&#x3002;</p>
<p>&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x770B;&#x8FD9;&#x91CC;&#xFF0C;afterExecute &#x65B9;&#x6CD5;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f02479f198d59715913d74576bc1cdab7fddbce07a1bbb7237f8dde7975876ec" alt></p>
<p>&#x7EBF;&#x7A0B;&#x6C60;&#x7ED9;&#x4F60;&#x7559;&#x4E86;&#x4E00;&#x4E2A;&#x7EDF;&#x8BA1;&#x6570;&#x636E;&#x7684;&#x53E3;&#x5B50;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x57FA;&#x4E8E;&#x8FD9;&#x4E2A;&#x53E3;&#x5B50;&#x641E;&#x4E8B;&#x60C5;&#x561B;&#xFF0C;&#x6BD4;&#x5982;&#x7761;&#x4E00;&#x4E0B;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;private&#xA0;static&#xA0;final&#xA0;ThreadPoolExecutor&#xA0;threadPoolExecutor&#xA0;=</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;new&#xA0;ThreadPoolExecutor(64,&#xA0;64,&#xA0;0,&#xA0;TimeUnit.MINUTES,</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;new&#xA0;ArrayBlockingQueue&lt;&gt;(32))&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;@Override</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;protected&#xA0;void&#xA0;afterExecute(Runnable&#xA0;r,&#xA0;Throwable&#xA0;t)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;try&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Thread.sleep(5000);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;catch&#xA0;(InterruptedException&#xA0;e)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;throw&#xA0;new&#xA0;RuntimeException(e);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;};</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x6536;&#x5C3E;&#x4EFB;&#x52A1;&#x7684;&#x65F6;&#x95F4;&#x8FC7;&#x957F;&#xFF0C;&#x8FD9;&#x6837;&#x201C;&#x4E3B;&#x7EBF;&#x7A0B;&#x6254;&#x4EFB;&#x52A1;&#x7684;&#x52A8;&#x4F5C;&#x201D;&#x6709;&#x6781;&#x5927;&#x6982;&#x7387;&#x7684;&#x662F;&#x5148;&#x6267;&#x884C;&#x7684;&#xFF0C;&#x5BFC;&#x81F4;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/74c20c3857bfcfd48204a48e31cdc5fc3a4aa8673e28b9d430131b3bf62500c5" alt></p>
<p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5176;&#x5B9E;&#x5C31;&#x7B97;&#x662F;&#x5206;&#x6790;&#x5B8C;&#x6210;&#x4E86;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x6211;&#x8FD8;&#x60F3;&#x5206;&#x4EAB;&#x4E00;&#x4E2A;&#x6211;&#x5728;&#x9A8C;&#x8BC1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x9A8C;&#x8BC1;&#x601D;&#x8DEF;&#xFF0C;&#x867D;&#x7136;&#x8FD9;&#x4E2A;&#x601D;&#x8DEF;&#x6700;&#x7EC8;&#x5E76;&#x6CA1;&#x6709;&#x5F97;&#x5230;&#x6211;&#x60F3;&#x8981;&#x7684;&#x7ED3;&#x8BBA;&#xFF0C;&#x4F46;&#x662F;&#x6280;&#x591A;&#x4E0D;&#x538B;&#x8EAB;&#xFF0C;&#x4F60;&#x62BD;&#x7A7A;&#x5B66;&#x5B66;&#xFF0C;&#x4EE5;&#x540E;&#x4E07;&#x4E00;&#x7528;&#x5F97;&#x4E0A;&#x5462;&#x3002;</p>
<p>&#x524D;&#x9762;&#x8BF4;&#x4E86;&#xFF0C;&#x5728;&#x6211;&#x91CD;&#x5199;&#x4E86; afterExecute &#x65B9;&#x6CD5;&#x4E4B;&#x540E;&#xFF0C;&#x4E00;&#x5B9A;&#x4F1A;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x6211;&#x5728;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x7684;&#x65F6;&#x5019;&#xFF0C;dump &#x4E00;&#x628A;&#x7EBF;&#x7A0B;&#xFF0C;&#x901A;&#x8FC7; dump &#x6587;&#x4EF6;&#x89C2;&#x5BDF;&#x7EBF;&#x7A0B;&#x72B6;&#x6001;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x5728; RUNNING &#x72B6;&#x6001;&#xFF0C;&#x4F46;&#x662F;&#x662F;&#x5728;&#x6267;&#x884C;&#x201C;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x201D;&#x5462;&#xFF1F;</p>
<p>&#x4E8E;&#x662F;&#x5C31;&#x6709;&#x4E86;&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/3e80a7accd848b192676e81c596e4d0bde5c1d128a45141e07a5c7af294cf2ed" alt></p>
<p>&#x6211;&#x81EA;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#xFF0C;&#x5728;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x7684;&#x65F6;&#x5019;&#xFF0C;dump &#x4E00;&#x628A;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/873458b8b7d4981727510fb08c6c71782d1960ba3cee4a4ddc835972d76ec474" alt></p>
<p>&#x4F46;&#x662F;&#x5F88;&#x4E0D;&#x5E78;&#xFF0C;&#x6700;&#x7EC8; dump &#x51FA;&#x6765;&#x7684;&#x7ED3;&#x679C;&#x5E76;&#x4E0D;&#x662F;&#x6211;&#x671F;&#x671B;&#x7684;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E0D;&#x662F;&#x5728; TIMED_WAITING &#x72B6;&#x6001;&#x5C31;&#x662F;&#x5728; WAITING &#x72B6;&#x6001;&#xFF0C;&#x6CA1;&#x6709;&#x4E00;&#x4E2A;&#x662F; RUNNING &#x7684;&#x3002;</p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#xFF1F;</p>
<p>&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x4E4B;&#x540E;&#xFF0C;dump &#x5B8C;&#x6210;&#x4E4B;&#x524D;&#xFF0C;&#x8FD9;&#x4E4B;&#x95F4;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x5B8C;&#x5168;&#x591F;&#x7EBF;&#x7A0B;&#x6C60;&#x91CC;&#x9762;&#x7684;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x201C;&#x4E24;&#x4E2A;&#x5DE5;&#x4F5C;&#x201D;&#x3002;</p>
<p>&#x867D;&#x7136;&#x4F60; dump &#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x665A;&#x4E86;&#x4E00;&#x70B9;&#x3002;</p>
<p>&#x8FD9;&#x4E00;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728; dump &#x524D;&#x9762;&#x8F93;&#x51FA;&#x4E00;&#x70B9;&#x65E5;&#x5FD7;&#x8FDB;&#x884C;&#x89C2;&#x5BDF;&#x9A8C;&#x8BC1;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/21371ddefb6cddc64b3bb141627e73d15cb660a4f89c485a473e0f85d5d80630" alt></p>
<p>&#x867D;&#x7136;&#x6211;&#x6CA1;&#x6709;&#x901A;&#x8FC7; dump &#x6587;&#x4EF6;&#x9A8C;&#x8BC1;&#x5230;&#x6211;&#x7684;&#x89C2;&#x70B9;&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x624B;&#x6BB5;&#x3002;</p>
<p>&#x5728;&#x6B63;&#x5E38;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x4E2D;&#x89E6;&#x53D1;&#x62D2;&#x7EDD;&#x7B56;&#x7565;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5; dump &#x4E00;&#x628A;&#xFF0C;&#x65B9;&#x4FBF;&#x4F60;&#x5206;&#x6790;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x5C31;&#x6765;&#x4E86;&#xFF1F;</p>
<p>&#x600E;&#x4E48;&#x53BB; dump &#x5462;&#xFF1F;</p>
<p>&#x5173;&#x952E;&#x4EE3;&#x7801;&#x5C31;&#x8FD9;&#x4E00;&#x884C;&#xFF1A;</p>
<blockquote>
<p>JVMUtil.jstack(jStackStream);</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f649a70f781247d1e4218ea195a48c9d3655c2a42f777bdf4939beec10b61b9a" alt></p>
<p>&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5176;&#x5B9E;&#x662F; Dubbo &#x91CC;&#x9762;&#x7684;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#xFF0C;&#x6211;&#x53EA;&#x662F;&#x5F15;&#x7528;&#x4E86;&#x4E00;&#x4E0B; Dubbo &#x7684;&#x5305;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/fdd567007a967efdecbd34a426d28b70b9450dd61ced6061429ff1c6c6d48a8b" alt></p>
<p>&#x4F46;&#x662F;&#x4F60;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E2A;&#x5DE5;&#x5177;&#x7C7B;&#x7C98;&#x51FA;&#x53BB;&#xFF0C;&#x7C98;&#x5230;&#x4F60;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x53BB;&#x3002;</p>
<p>&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x5F88;&#x597D;&#xFF0C;&#x73B0;&#x5728;&#x5B83;&#x662F;&#x6211;&#x7684;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/3495b3e4e02e1f9aa3b27da693c7622c341b116370093650ce759a4f123c3133" alt></p>
<p>&#x6700;&#x540E;&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x5FC5;&#x987B;&#x8981;&#x518D;&#x8865;&#x5145;&#x4E00;&#x53E5;&#xFF1A;</p>
<blockquote>
<p>&#x4EE5;&#x4E0A;&#x4ECE;&#x95EE;&#x9898;&#x7684;&#x5B9A;&#x4F4D;&#x5230;&#x95EE;&#x9898;&#x7684;&#x590D;&#x73B0;&#xFF0C;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x6211;&#x4E2A;&#x4EBA;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x4ECE;&#x731C;&#x6D4B;&#x51FA;&#x53D1;&#xFF0C;&#x6700;&#x7EC8;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x7684;&#x3002;&#x6709;&#x53EF;&#x80FD;&#x6211;&#x731C;&#x9519;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x6574;&#x4E2A;&#x8BBA;&#x8BC1;&#x8FC7;&#x7A0B;&#x53EF;&#x80FD;&#x90FD;&#x662F;&#x9519;&#x7684;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x628A; Demo &#x7C98;&#x8FC7;&#x53BB;&#x8DD1;&#x4E00;&#x8DD1;&#xFF0C;&#x5E26;&#x7740;&#x6000;&#x7591;&#x4E00;&#x5207;&#x7684;&#x773C;&#x5149;&#x53BB;&#x5BA1;&#x89C6;&#x5B83;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x770B;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x544A;&#x8BC9;&#x6211;&#xFF0C;&#x6211;&#x5B66;&#x4E60;&#x4E00;&#x4E0B;&#x3002;</p>
</blockquote>
<p>&#x6700;&#x540E;&#xFF0C;&#x4F60;&#x60F3;&#x60F3;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x62C6;&#x5F00;&#x4E86;&#x770B;&#xFF0C;&#x65E0;&#x975E;&#x662F;&#x7EBF;&#x7A0B;&#x6C60;&#x548C; CountDownLatch &#x7684;&#x516B;&#x80A1;&#x6587;&#x7684;&#x8003;&#x5BDF;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x73A9;&#x610F;&#x90FD;&#x662F;&#x9762;&#x8BD5;&#x70ED;&#x70B9;&#x8003;&#x5BDF;&#x90E8;&#x5206;&#xFF0C;&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x90FD;&#x80CC;&#x7684;&#x6EDA;&#x74DC;&#x70C2;&#x719F;&#x3002;</p>
<p>&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x4E1C;&#x897F;&#x78B0;&#x649E;&#x5728;&#x4E00;&#x8D77;&#x4E5F;&#x662F;&#x7ECF;&#x5E38;&#x6709;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x60F3;&#x5230;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x5957;&#x4E0A;&#x4E00;&#x5C42;&#x7B80;&#x5355;&#x7684; for &#x5FAA;&#x73AF;&#x4E4B;&#x540E;&#xFF0C;&#x5B8C;&#x5168;&#x5C31;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x7684;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x73A9;&#x610F;&#x7740;&#x5B9E;&#x662F;&#x628A;&#x6211;&#x6253;&#x61F5;&#x903C;&#x4E86;&#x3002;&#x4EE5;&#x540E;&#x628A; CountDownLatch &#x653E;&#x5728; for &#x5FAA;&#x73AF;&#x91CC;&#x9762;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x591A;&#x591A;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#x4E86;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/e1710e1908555bf55f5c677d94888868811af39af04adf23a307ed7de8ac525a" alt></p>
<h2 id="&#x7B2C;&#x4E8C;&#x4E2A;&#x573A;&#x666F;"><a href="#&#x7B2C;&#x4E8C;&#x4E2A;&#x573A;&#x666F;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x4E2A;&#x573A;&#x666F;"></a>&#x7B2C;&#x4E8C;&#x4E2A;&#x573A;&#x666F;</h2><p>&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x5C31;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x4E86;&#x3002;</p>
<p>&#x5F53;&#x65F6;&#x6709;&#x4E2A;&#x5C0F;&#x4F19;&#x4F34;&#x5728;&#x7FA4;&#x91CC;&#x6254;&#x4E86;&#x4E00;&#x4E2A;&#x622A;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/8a13866deeee1d41eb7e5f17fbfae9bb8016c5433ef353ed14fca91efeb4d009" alt></p>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C; if(!lock) &#x4ED6;&#x622A;&#x56FE;&#x7684;&#x65F6;&#x5019;&#x662F;&#x7ED9;&#x9519;&#x4E86;&#xFF0C;&#x771F;&#x5B9E;&#x7684;&#x5199;&#x6CD5;&#x662F; if(lock)&#xFF0C;lock &#x4E3A; true &#x7684;&#x65F6;&#x5019;&#x5C31;&#x662F;&#x52A0;&#x9501;&#x6210;&#x529F;&#xFF0C;&#x8FDB;&#x5165; if&#x3002;</p>
<p>&#x540C;&#x65F6;&#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x8FD9;&#x4E00;&#x884C;&#x662F;&#x6709;&#x4E8B;&#x52A1;&#x7684;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/0f542d4f19847d5728ccc7878b6b9244537faf66776a39d6a83dea698e21e262" alt></p>
<p>&#x5199;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#x7684;&#x4F2A;&#x4EE3;&#x7801;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;if(&#x52A0;&#x9501;&#x6210;&#x529F;){</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;try{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//save&#x6709;&#x4E8B;&#x52A1;&#x6CE8;&#x89E3;&#xFF0C;&#x5E76;&#x4E14;&#x786E;&#x8BA4;&#x8C03;&#x7528;&#x7684;service&#x5BF9;&#x8C61;&#x662F;&#x88AB;&#x4EE3;&#x7406;&#x7684;&#x5BF9;&#x8C61;,&#x5373;&#x4E8B;&#x52A1;&#x7684;&#x5199;&#x6CD5;&#x4E00;&#x5B9A;&#x662F;&#x6B63;&#x786E;&#x7684;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;service.save();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;catch(Exception&#xA0;e){</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#x5F02;&#x5E38;&#x6253;&#x5370;&#xA0;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;finally&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#x91CA;&#x653E;&#x9501;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;unlock(lockKey);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5C31;&#x4E0A;&#x9762;&#x8FD9;&#x4E2A;&#x5199;&#x6CD5;&#xFF0C;&#x5148;&#x52A0;&#x9501;&#xFF0C;&#x518D;&#x5F00;&#x542F;&#x4E8B;&#x52A1;&#xFF0C;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x7740;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;&#xFF0C;&#x6700;&#x540E;&#x89E3;&#x9501;&#xFF0C;&#x53CD;&#x6B63;&#x6B6A;&#x5E08;&#x5085;&#x6A2A;&#x770B;&#x7AD6;&#x770B;&#x662F;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x6709;&#x4EFB;&#x4F55;&#x6BDB;&#x75C5;&#x7684;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x63D0;&#x4F9B;&#x622A;&#x56FE;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x662F;&#x8FD9;&#x6837;&#x63CF;&#x8FF0;&#x7684;&#x3002;</p>
<p>&#x5F53;&#x4ED6;&#x662F;&#x8FD9;&#x6837;&#x5199;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4ECE;&#x7ED3;&#x679C;&#x6765;&#x770B;&#xFF0C;&#x7A0B;&#x5E8F;&#x662F;&#x5148;&#x52A0;&#x9501;&#xFF0C;&#x518D;&#x5F00;&#x542F;&#x4E8B;&#x52A1;&#xFF0C;&#x6267;&#x884C;&#x4E8B;&#x52A1;&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x89E3;&#x9501;&#xFF0C;&#x6700;&#x540E;&#x624D;&#x63D0;&#x4EA4;&#x4E8B;&#x52A1;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/5c13a4198b812ed683e3caae9499fdffdb066374a2ba0fa3304e1b9a692865ea" alt></p>
<p>&#x5F53;&#x65F6;&#x6211;&#x5C31;&#x89C9;&#x5F97;&#xFF1A;&#x8FD9;&#x73B0;&#x8C61;&#x5B8C;&#x5168;&#x8D85;&#x51FA;&#x4E86;&#x6211;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x7EDD;&#x4E0D;&#x53EF;&#x80FD;&#x3002;</p>
<p>&#x7D27;&#x63A5;&#x7740;&#x4ED6;&#x63D0;&#x4F9B;&#x4E86;&#x7B2C;&#x4E8C;&#x5F20;&#x622A;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/de8adcd2a795230e24176c64b7ab2f8258bd9ef244293091008c4fde1b0c186f" alt></p>
<p>&#x4ED6;&#x8BF4;&#x8FD9;&#x6837;&#x62C6;&#x5F00;&#x5199;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E8B;&#x52A1;&#x5C31;&#x80FD;&#x6B63;&#x5E38;&#x751F;&#x6548;&#x4E86;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d27df2160f0ac2c1d3ce244a6a67a4949194f000f037c01a3d593e494fa04124" alt></p>
<p>&#x8FD9;&#x4E24;&#x4E2A;&#x5199;&#x6CD5;&#x7684;&#x552F;&#x4E00;&#x533A;&#x522B;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x662F;&#x76F4;&#x63A5; return&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x5148;&#x8FD4;&#x56DE;&#x4E86;&#x4E00;&#x4E2A; resultModel &#x7136;&#x540E;&#x5728; return&#x3002;</p>
<p>&#x5728;&#x5B9E;&#x9645;&#x6548;&#x679C;&#x4E0A;&#xFF0C;&#x6211;&#x8BA4;&#x4E3A;&#x662F;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5DEE;&#x5F02;&#x7684;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x4ED6;&#x8BF4;&#x8FD9;&#x6837;&#x5199;&#x4F1A;&#x5BFC;&#x81F4;&#x9501;&#x91CA;&#x653E;&#x7684;&#x65F6;&#x673A;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
<p>&#x6211;&#x8FD8;&#x662F;&#x89C9;&#x5F97;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c6c1a0aa6e3bb350cd520ad416997f27f57ee635dbfc81406e43e40c233f32fc" alt></p>
<p>&#x7136;&#x800C;&#x7A81;&#x7136;&#x6709;&#x4EBA;&#x5192;&#x51FA;&#x6765;&#x8BF4;&#x4E86;&#x4E00;&#x53E5;&#xFF1A; try &#x5E26;&#x7740; finally &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x6267;&#x884C; return &#x8BED;&#x53E5;&#x4E4B;&#x524D;&#x4F1A;&#x5148;&#x6267;&#x884C; finally &#x91CC;&#x9762;&#x7684;&#x903B;&#x8F91;&#x3002;&#x4F1A;&#x4E0D;&#x4F1A;&#x662F;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x5BFC;&#x81F4;&#x7684;&#x5462;&#xFF1F;</p>
<p>&#x6309;&#x7167;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x63A8;&#xFF0C;&#x5148;&#x6267;&#x884C;&#x4E86; finally &#x91CC;&#x9762;&#x7684;&#x91CA;&#x653E;&#x9501;&#x903B;&#x8F91;&#xFF0C;&#x518D;&#x6267;&#x884C;&#x4E86; return &#x8BED;&#x53E5;&#x5BF9;&#x5E94;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E8B;&#x52A1;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x90A3;&#x4E48;&#x786E;&#x5B9E;&#x662F;&#x4F1A;&#x5BFC;&#x81F4;&#x9501;&#x91CA;&#x653E;&#x5728;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x3002;</p>
<p>&#x5C31;&#x662F;&#x8FD9;&#x53E5;&#x8BDD;&#x76F4;&#x63A5;&#x7ED9;&#x6211;&#x5E72;&#x61F5;&#x903C;&#x4E86;&#xFF0C;CPU &#x90FD;&#x5FEB;&#x70E7;&#x4E86;&#xFF0C;&#x611F;&#x89C9;&#x54EA;&#x91CC;&#x4E0D;&#x5BF9;&#xFF0C;&#x53C8;&#x8BF4;&#x4E0D;&#x4E0A;&#x6765;&#x4E3A;&#x4EC0;&#x4E48;&#x3002;</p>
<p>&#x867D;&#x7136;&#x5F88;&#x53CD;&#x76F4;&#x89C9;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4E5F;&#x8BB0;&#x5F97;&#x516B;&#x80A1;&#x6587;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x5199;&#x7684;&#x554A;&#xFF0C;&#x4E8E;&#x662F;&#x6211;&#x5F00;&#x59CB;&#x89C9;&#x5F97;&#x6709;&#x70B9;&#x610F;&#x601D;&#x4E86;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6211;&#x641E;&#x4E86;&#x4E00;&#x4E2A; Demo&#xFF0C;&#x51C6;&#x5907;&#x672C;&#x5730;&#x590D;&#x73B0;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x5F53;&#x65F6;&#x60F3;&#x7740;&#xFF0C;&#x5982;&#x679C;&#x80FD;&#x590D;&#x73B0;&#xFF0C;&#x8FD9;&#x53EF;&#x662F;&#x4E00;&#x4E2A;&#x8FDD;&#x80CC;&#x76F4;&#x89C9;&#x7684;&#x5DE8;&#x5751;&#x554A;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x5199;&#x4F5C;&#x7D20;&#x6750;&#x3002;</p>
<p>&#x53EF;&#x60DC;&#xFF0C;&#x6CA1;&#x6709;&#x590D;&#x73B0;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/7d8e5643525e906af905d00e5a0eaa310dba4cff0a6bb3bec1fe74651cb35066" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/4dde47fbb2706f372cd4e7bf4377f1c8cb44879821598fae0ca31efc37cfa41c" alt></p>
<p>&#x6700;&#x540E;&#x8FD9;&#x4E2A;&#x54E5;&#x4EEC;&#x4E5F;&#x91CD;&#x65B0;&#x53BB;&#x5B9A;&#x4F4D;&#x4E86;&#x539F;&#x56E0;&#xFF0C;&#x53D1;&#x73B0;&#x662F;&#x5176;&#x4ED6;&#x7684; BUG &#x5BFC;&#x81F4;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f4d9b564f4c9610638d665a8c9bd79670c0d8d19ace859aaf52e0c243c3cf88e" alt></p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5173;&#x4E8E;&#x524D;&#x9762;&#x201C;try &#x5E26;&#x7740; finally&#x201D;&#x7684;&#x8BF4;&#x6CD5;&#x5176;&#x5B9E;&#x8BF4;&#x7684;&#x5E76;&#x4E0D;&#x4E25;&#x8C28;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x5F53; try &#x4E2D;&#x5E26;&#x6709; return &#x65F6;&#xFF0C;&#x4F1A;&#x5148;&#x6267;&#x884C; return &#x524D;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x9700;&#x8981; return &#x7684;&#x4FE1;&#x606F;&#x6682;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x63A5;&#x7740;&#x518D;&#x6267;&#x884C; finally &#x4E2D;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x901A;&#x8FC7; return &#x8FD4;&#x56DE;&#x4E4B;&#x524D;&#x4FDD;&#x5B58;&#x7684;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x8FD9;&#x624D;&#x662F;&#x5199;&#x5728;&#x516B;&#x80A1;&#x6587;&#x91CC;&#x9762;&#x7684;&#x6B63;&#x786E;&#x7B54;&#x6848;&#x3002;</p>
<p>&#x8981;&#x6C38;&#x8FDC;&#x7262;&#x8BB0;&#x53E6;&#x4E00;&#x4F4D;&#x4F1F;&#x4EBA;&#x8BF4;&#x8FC7;&#xFF1A;&#x5B9E;&#x8DF5;&#x662F;&#x68C0;&#x9A8C;&#x771F;&#x7406;&#x7684;&#x552F;&#x4E00;&#x6807;&#x51C6;&#x3002;</p>
<p>&#x9047;&#x4E8B;&#x4E0D;&#x51B3;&#xFF0C;&#x5C31;&#x641E;&#x4E2A; Demo &#x8DD1;&#x8DD1;&#x3002;</p>
<p>&#x5173;&#x4E8E;&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x62C6;&#x5F00;&#x6765;&#x770B;&#x5C31;&#x662F;&#x5173;&#x4E8E;&#x4E8B;&#x52A1;&#x548C;&#x9501;&#x78B0;&#x649E;&#x5728;&#x4E00;&#x8D77;&#x65F6;&#x7684;&#x6CE8;&#x610F;&#x4E8B;&#x9879;&#x4EE5;&#x53CA; try-return-finally &#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x8FD9;&#x4E24;&#x4E2A;&#x57FA;&#x7840;&#x516B;&#x80A1;&#x800C;&#x5DF2;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5F53;&#x7740;&#x4E24;&#x4E2A;&#x7CC5;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x786E;&#x5B9E;&#x6709;&#x90A3;&#x4E48;&#x51E0;&#x4E2A;&#x77AC;&#x95F4;&#x8BA9;&#x6211;&#x773C;&#x524D;&#x4E00;&#x9ED1;&#xFF0C;&#x53C8;&#x6253;&#x5F97;&#x6211;&#x4E00;&#x8138;&#x61F5;&#x903C;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x4E8B;&#x52A1;&#x548C;&#x9501;&#x78B0;&#x649E;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E0A;&#x4E2A;&#x4F2A;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;@Service</span><br><span class="line">public&#xA0;class&#xA0;ServiceOne{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;&#x8BBE;&#x7F6E;&#x4E00;&#x628A;&#x53EF;&#x91CD;&#x5165;&#x7684;&#x516C;&#x5E73;&#x9501;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;private&#xA0;Lock&#xA0;lock&#xA0;=&#xA0;new&#xA0;ReentrantLock(true);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;@Transactional(rollbackFor&#xA0;=&#xA0;Exception.class)</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;public&#xA0;Result&#xA0;&#xA0;func(long&#xA0;seckillId,&#xA0;long&#xA0;userId)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;lock.lock();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;&#x6267;&#x884C;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x2014;&#x2014;&#x67E5;&#x8BE2;&#x5546;&#x54C1;&#x5E93;&#x5B58;&#x6570;&#x91CF;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;//&#xA0;&#x5982;&#x679C;&#xA0;&#x5E93;&#x5B58;&#x6570;&#x91CF;&#xA0;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#xA0;&#x6267;&#x884C;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x2014;&#x2014;&#x51CF;&#x5C11;&#x5E93;&#x5B58;&#x6570;&#x91CF;&#x2014;&#x2014;&#x6A21;&#x62DF;&#x5356;&#x51FA;&#x8D27;&#x7269;&#x64CD;&#x4F5C;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;lock.unlock();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x4F60;&#x4E94;&#x79D2;&#x949F;&#x6CA1;&#x770B;&#x51FA;&#x8FD9;&#x4E2A;&#x4EE3;&#x7801;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x79D2;&#x6740;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x6B6A;&#x5E08;&#x5085;&#x63A8;&#x8350;&#x4F60;&#x4E2A;&#x5047;&#x7C89;&#x4E1D;&#x770B;&#x770B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF1A;&#xFF1A;<a href="/external_links/5b7d6b34c5703cd48b01614f9b330aa7.html" target="blank" rel="noopener">&#x300A;&#x51E0;&#x884C;&#x70C2;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x8D54;&#x4E86;16&#x4E07;&#x3002;&#x300B;</a></p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x5C31;&#x9171;&#xFF0C;&#x6253;&#x5B8C;&#x6536;&#x5DE5;~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ceda0fcb4e7101da13e2ecd283aa7ba4.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7326093660705718284.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7326093660705718284.html" itemprop="url">小程序主包体积的优化方案与技术实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-22T08:00:01+08:00">
                2024-01-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/25297627cd82482d276ab084fcfeca5d3c6645bee92dec8448980a8490c263d7" alt="F70AE44A-D2CE-4B99-B2A8-372DFF5F1567.png"></p>
<h2 id="&#x5F15;&#x8A00;"><a href="#&#x5F15;&#x8A00;" class="headerlink" title="&#x5F15;&#x8A00;"></a>&#x5F15;&#x8A00;</h2><p>&#x5728;&#x4F7F;&#x7528;Taro&#x5F00;&#x53D1;&#x504F;&#x5927;&#x578B;&#x5C0F;&#x7A0B;&#x5E8F;&#x5E94;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x4E48;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x5C0F;&#x7A0B;&#x5E8F;&#x7684;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x8D85;&#x8FC7;&#x4E86;2M&#xFF0C;&#x6CA1;&#x529E;&#x6CD5;&#x53D1;&#x5E03;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x672C;&#x6587;&#x8BB2;&#x4E00;&#x8BB2;&#x6211;&#x5728;&#x4E1A;&#x52A1;&#x4E2D;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x5230;&#x7684;4&#x79CD;&#x4F18;&#x5316;&#x624B;&#x6BB5;&#x3002;</p>
<h2 id="&#x4F18;&#x5316;&#x65B9;&#x5F0F;"><a href="#&#x4F18;&#x5316;&#x65B9;&#x5F0F;" class="headerlink" title="&#x4F18;&#x5316;&#x65B9;&#x5F0F;"></a>&#x4F18;&#x5316;&#x65B9;&#x5F0F;</h2><h3 id="&#x9875;&#x9762;&#x5206;&#x5305;"><a href="#&#x9875;&#x9762;&#x5206;&#x5305;" class="headerlink" title="&#x9875;&#x9762;&#x5206;&#x5305;"></a>&#x9875;&#x9762;&#x5206;&#x5305;</h3><p>&#x5FAE;&#x4FE1;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x9650;&#x5236;<code>2MB</code>&#x4E3B;&#x5305;&#x7A7A;&#x95F4;&#x5BF8;&#x571F;&#x5BF8;&#x91D1;&#xFF0C;&#x4EC5;&#x653E;&#x7F6E;&#x9ED8;&#x8BA4;&#x542F;&#x52A8;&#x9875;&#x9762;/TabBar &#x9875;&#x9762;&#xFF0C;&#x5176;&#x4ED6;&#x9875;&#x9762;&#x5747;&#x8FC1;&#x79FB;&#x81F3;&#x5206;&#x5305;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x6700;&#x57FA;&#x672C;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x5F0F;&#x3002;</p>
<h3 id="&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;"><a href="#&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;" class="headerlink" title="&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;"></a>&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/50258bd74e175b2c7add4eb0eb0d76c3c7e1be2fbb949ca0f7c64b90745d76ac" alt="image.png"><br>&#x6539;&#x9020;&#x540E;&#x5206;&#x5305;&#x52A0;&#x8F7D;&#x7684;&#x9875;&#x9762;&#x4F53;&#x79EF;&#x4E0D;&#x8BA1;&#x5165;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x5185;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x4E0B;&#x88AB;&#x591A;&#x4E2A;&#x9875;&#x9762;&#x6240;&#x5F15;&#x7528;&#x7684;&#x6A21;&#x5757;&#x4F1A;&#x88AB;&#x6253;&#x5305;&#x8FDB;&#x4E3B;&#x5305;&#x3002;&#x8FD9;&#x91CC;&#x622A;&#x53D6;&#x4E86;&#x672A;&#x505A;&#x4F18;&#x5316;&#x9875;&#x9762;&#x5206;&#x5305;&#x540E;&#x76F4;&#x63A5;&#x6253;&#x5305;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x4F9D;&#x8D56;&#x5206;&#x6790;&#x56FE;&#x3002;&#x5176;&#x4E2D;&#xFF1A;</p>
<ul>
<li><code>common.js</code>&#x5305;&#x542B;&#x4E86;&#x4E1A;&#x52A1;&#x4E2D;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x3001;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x3001;<code>hooks</code>&#x7B49;&#x903B;&#x8F91;</li>
<li><code>common.wxss</code>&#x5305;&#x542B;&#x4E86;&#x4E1A;&#x52A1;&#x4E2D;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x7684;&#x6837;&#x5F0F;&#x3001;&#x5168;&#x5C40;&#x6837;&#x5F0F;</li>
<li><code>vendors.js</code>&#x5305;&#x542B;&#x4E86;&#x4E09;&#x65B9;&#x4F9D;&#x8D56;&#x903B;&#x8F91;</li>
</ul>
<h4 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h4><p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x80FD;&#x4E0D;&#x80FD;&#x8BC6;&#x522B;&#x54EA;&#x4E9B;&#x9875;&#x9762;&#x4F7F;&#x7528;&#x4E86;&#x8FD9;&#x4E9B;&#x516C;&#x5171;&#x6A21;&#x5757;&#xFF0C;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x516C;&#x5171;&#x6A21;&#x5757;&#x867D;&#x7136;&#x88AB;&#x591A;&#x4E2A;&#x5206;&#x5305;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x5206;&#x5305;&#x5747;&#x4E0D;&#x5728;&#x4E3B;&#x5305;&#x4E2D;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x662F;&#x4E0D;&#x662F;&#x5E94;&#x8BE5;&#x88AB;&#x6253;&#x5305;&#x8FDB;&#x5BF9;&#x5E94;&#x7684;&#x5206;&#x5305;&#x5185;&#x51CF;&#x5C11;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x5360;&#x7528;&#x3002;</p>
<h4 id="&#x6280;&#x672F;&#x5B9E;&#x73B0;"><a href="#&#x6280;&#x672F;&#x5B9E;&#x73B0;" class="headerlink" title="&#x6280;&#x672F;&#x5B9E;&#x73B0;"></a>&#x6280;&#x672F;&#x5B9E;&#x73B0;</h4><blockquote>
<p>&#x6587;&#x6863;&#x94FE;&#x63A5;&#xFF1A;<a href="/external_links/69f312d6b1c3259b6d429f69d8f7758c.html" target="blank" rel="noopener">docs.taro.zone/docs/config&#x2026;</a></p>
</blockquote>
<p><code>Taro</code>&#x914D;&#x7F6E;<code>mini.optimizeMainPackage</code>&#x5C31;&#x80FD;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x529F;&#x80FD;<code>Taro</code>&#x5B98;&#x65B9;&#x5BF9;&#x8FD9;&#x4E00;&#x914D;&#x7F6E;&#x7684;&#x63CF;&#x8FF0;&#x662F;&#xFF1A;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4E3B;&#x5305;&#x6CA1;&#x6709;&#x5F15;&#x5165;&#x7684;<code>module</code>&#x4E0D;&#x88AB;&#x63D0;&#x53D6;&#x5230;<code>commonChunks</code>&#x4E2D;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x4F1A;&#x5728;&#x6253;&#x5305;&#x65F6;&#x5206;&#x6790;<code>module</code>&#x548C;<code>chunk</code>&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x7B5B;&#x9009;&#x51FA;&#x4E3B;&#x5305;&#x6CA1;&#x6709;&#x5F15;&#x7528;&#x5230;&#x7684;<code>module</code>&#x628A;&#x5B83;&#x63D0;&#x53D6;&#x5230;&#x5206;&#x5305;&#x5185;&#x3002;<br>&#x5F00;&#x542F;<code>mini.optimizeMainPackage</code>&#x540E;&#x7684;&#x4EE3;&#x7801;&#x4F9D;&#x8D56;&#x5206;&#x6790;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/488c7104e881ab354a546685bee2eb6e8b75bb51f0b7f6732bfa7723eb067d98" alt="image.png"></p>
<h4 id="&#x6E90;&#x7801;&#x89E3;&#x6790;"><a href="#&#x6E90;&#x7801;&#x89E3;&#x6790;" class="headerlink" title="&#x6E90;&#x7801;&#x89E3;&#x6790;"></a>&#x6E90;&#x7801;&#x89E3;&#x6790;</h4><p>&#x90A3;&#x4E48;<code>Taro</code>&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8FD9;&#x4E00;&#x529F;&#x80FD;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x6E90;&#x7801;&#xFF1A;</p>
<ol>
<li>&#x6536;&#x96C6;&#x5206;&#x5305;&#x5165;&#x53E3;&#x6570;&#x636E;&#x7528;&#x4E8E;&#x540E;&#x7EED;&#x5224;&#x65AD;<code>chunk</code>&#x662F;&#x5426;&#x5C5E;&#x4E8E;&#x5206;&#x5305;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;const PLUGIN_NAME = &apos;MiniSplitChunkPlugin&apos;</span><br><span class="line"></span><br><span class="line">export default class MiniSplitChunksPlugin extends SplitChunksPlugin {</span><br><span class="line"></span><br><span class="line">   // &#x5206;&#x5305;&#x914D;&#x7F6E;</span><br><span class="line">  subPackages: SubPackage[]</span><br><span class="line"></span><br><span class="line">  // &#x5206;&#x5305;&#x6839;&#x8DEF;&#x5F84;</span><br><span class="line">  subRoots: string[]</span><br><span class="line"></span><br><span class="line">  // &#x5206;&#x5305;&#x6839;&#x8DEF;&#x5F84;&#x6B63;&#x5219;</span><br><span class="line">  subRootRegExps: RegExp[]</span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ... </span><br><span class="line"></span><br><span class="line">  apply (compiler: any) {</span><br><span class="line">    this.context = compiler.context</span><br><span class="line"></span><br><span class="line">    // &#x83B7;&#x53D6;&#x5206;&#x5305;&#x914D;&#x7F6E;</span><br><span class="line">    this.subPackages = this.getSubpackageConfig(compiler).map((subPackage: SubPackage) =&gt; ({</span><br><span class="line">      ...subPackage,</span><br><span class="line">      root: this.formatSubRoot(subPackage.root) // &#x683C;&#x5F0F;&#x5316;&#x6839;&#x8DEF;&#x5F84;&#xFF0C;&#x53BB;&#x6389;&#x5C3E;&#x90E8;&#x7684;/</span><br><span class="line">    }))</span><br><span class="line"></span><br><span class="line">    // &#x83B7;&#x53D6;&#x5206;&#x5305;&#x6839;&#x8DEF;&#x5F84;</span><br><span class="line">    this.subRoots = this.subPackages.map((subPackage: SubPackage) =&gt; subPackage.root)</span><br><span class="line"></span><br><span class="line">    // &#x751F;&#x6210;&#x5206;&#x5305;&#x6839;&#x8DEF;&#x5F84;&#x6B63;&#x5219;</span><br><span class="line">    this.subRootRegExps = this.subRoots.map((subRoot: string) =&gt; new RegExp(`^${subRoot}\\/`))</span><br><span class="line"></span><br><span class="line">    // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ... </span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x627E;&#x5230;&#x5206;&#x5305;&#x5165;&#x53E3;<code>chunk</code>&#x3002;&#x5FAA;&#x73AF;&#x6784;&#x6210;<code>chunk</code>&#x7684;<code>module</code>&#x3002;&#x5176;&#x4E2D;&#x6CA1;&#x6709;&#x88AB;&#x4E3B;&#x5305;&#x5F15;&#x7528;&#xFF0C;&#x4E14;&#x88AB;&#x591A;&#x4E2A;&#x5206;&#x5305;&#x5F15;&#x7528;&#x7684;&#x8BB0;&#x5F55;&#x5728;<code>subCommonDeps</code>&#x4E2D;&#x3002;&#x5E76;&#x57FA;&#x4E8E;<code>subCommonDeps</code>&#x751F;&#x6210;&#x65B0;&#x7684;<code>cacheGroups</code>&#x914D;&#x7F6E;&#x7528;&#x4E8E;<code>SplitChunksPlugin</code>&#x4F5C;&#x4E3A;&#x914D;&#x7F6E;&#x62C6;&#x5206;<code>chunks</code>&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;const PLUGIN_NAME = &apos;MiniSplitChunkPlugin&apos;</span><br><span class="line"></span><br><span class="line">export default class MiniSplitChunksPlugin extends SplitChunksPlugin {</span><br><span class="line"></span><br><span class="line">  // &#x6240;&#x6709;&#x5206;&#x5305;&#x516C;&#x5171;&#x4F9D;&#x8D56;</span><br><span class="line">  subCommonDeps: Map&lt;string, DepInfo&gt;</span><br><span class="line"></span><br><span class="line">  // &#x5404;&#x4E2A;&#x5206;&#x5305;&#x7684;&#x516C;&#x5171;&#x4F9D;&#x8D56;Map</span><br><span class="line">  chunkSubCommons: Map&lt;string, Set&lt;string&gt;&gt;</span><br><span class="line"></span><br><span class="line">  // &#x5206;&#x5305;&#x4E09;&#x65B9;&#x4F9D;&#x8D56;</span><br><span class="line">  subPackagesVendors: Map&lt;string, webpack.compilation.Chunk&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">  apply (compiler: any) {</span><br><span class="line"></span><br><span class="line">    // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation: any) =&gt; {</span><br><span class="line">      compilation.hooks.optimizeChunks.tap(PLUGIN_NAME, (chunks: webpack.compilation.Chunk[]) =&gt; {</span><br><span class="line">        const splitChunksOriginConfig = {</span><br><span class="line">          ...compiler?.options?.optimization?.splitChunks</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        this.subCommonDeps = new Map()</span><br><span class="line">        this.chunkSubCommons = new Map()</span><br><span class="line">        this.subPackagesVendors = new Map()</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * &#x627E;&#x51FA;&#x5206;&#x5305;&#x5165;&#x53E3;chunks</span><br><span class="line">         */</span><br><span class="line">        const subChunks = chunks.filter(chunk =&gt; this.isSubChunk(chunk))</span><br><span class="line"></span><br><span class="line">        // &#x4E0D;&#x5B58;&#x5728;&#x5206;&#x5305;</span><br><span class="line">        if (subChunks.length === 0) {</span><br><span class="line">          this.options = SplitChunksPlugin.normalizeOptions(splitChunksOriginConfig)</span><br><span class="line">          return</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        subChunks.forEach((subChunk: webpack.compilation.Chunk) =&gt; {</span><br><span class="line">          subChunk.modulesIterable.forEach((module: any) =&gt; {</span><br><span class="line">            // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">            const chunks: webpack.compilation.Chunk[] = Array.from(module.chunksIterable)</span><br><span class="line">            const chunkNames: string[] = chunks.map(chunk =&gt; chunk.name)</span><br><span class="line">            /**</span><br><span class="line">             * &#x627E;&#x51FA;&#x6CA1;&#x6709;&#x88AB;&#x4E3B;&#x5305;&#x5F15;&#x7528;&#xFF0C;&#x4E14;&#x88AB;&#x591A;&#x4E2A;&#x5206;&#x5305;&#x5F15;&#x7528;&#x7684;module&#xFF0C;&#x5E76;&#x8BB0;&#x5F55;&#x5728;subCommonDeps&#x4E2D;</span><br><span class="line">             */</span><br><span class="line">            if (!this.hasMainChunk(chunkNames) &amp;&amp; this.isSubsDep(chunkNames)) {</span><br><span class="line"></span><br><span class="line">              // &#x6B64;&#x5904;&#x751F;&#x6210; subCommonDeps&#x3001;subCommonDepChunks &#x7528;&#x4E8E;&#x751F;&#x6210;&#x65B0;&#x7684;cacheGroups&#x914D;&#x7F6E;</span><br><span class="line">              // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">            }</span><br><span class="line">          })</span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">        /**</span><br><span class="line">         * &#x7528;&#x65B0;&#x7684;option&#x914D;&#x7F6E;&#x751F;&#x6210;&#x65B0;&#x7684;cacheGroups&#x914D;&#x7F6E;</span><br><span class="line">         */</span><br><span class="line">        this.options = SplitChunksPlugin.normalizeOptions({</span><br><span class="line">          ...splitChunksOriginConfig,</span><br><span class="line">          cacheGroups: {</span><br><span class="line">            ...splitChunksOriginConfig?.cacheGroups,</span><br><span class="line">            ...this.getSubPackageVendorsCacheGroup(), </span><br><span class="line">            ...this.getSubCommonCacheGroup() // &#x8BE5;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x503C;&#x57FA;&#x4E8E; this.subCommonDeps &#x751F;&#x6210;</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x5728;<code>SplitChunksPlugin</code>&#x5B8C;&#x6210;<code>chunks</code>&#x62C6;&#x5206;&#x540E;&#x6536;&#x96C6;&#x5206;&#x5305;&#x4E0B;&#x7684;<code>sub-vendors</code>&#x548C;<code>sub-common</code>&#x4E0B;&#x7684;&#x516C;&#x5171;&#x6A21;&#x5757;&#x4FE1;&#x606F;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;export default class MiniSplitChunksPlugin extends SplitChunksPlugin {</span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">  apply (compiler: any) {</span><br><span class="line"></span><br><span class="line">    // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation: any) =&gt; {</span><br><span class="line"></span><br><span class="line">      // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">      compilation.hooks.afterOptimizeChunks.tap(PLUGIN_NAME, (chunks: webpack.compilation.Chunk[]) =&gt; {</span><br><span class="line">        const existSubCommonDeps = new Map()</span><br><span class="line"></span><br><span class="line">        chunks.forEach(chunk =&gt; {</span><br><span class="line">          const chunkName = chunk.name</span><br><span class="line"></span><br><span class="line">          if (this.matchSubVendors(chunk)) {</span><br><span class="line">            const subRoot = this.subRoots.find(subRoot =&gt; new RegExp(`^${subRoot}\\/`).test(chunkName)) as string</span><br><span class="line"></span><br><span class="line">            this.subPackagesVendors.set(subRoot, chunk)</span><br><span class="line">          }</span><br><span class="line"></span><br><span class="line">          if (this.matchSubCommon(chunk)) {</span><br><span class="line">            const depName = chunkName.replace(new RegExp(`^${this.subCommonDir}\\/(.*)`), &apos;$1&apos;)</span><br><span class="line"></span><br><span class="line">            if (this.subCommonDeps.has(depName)) {</span><br><span class="line">              existSubCommonDeps.set(depName, this.subCommonDeps.get(depName))</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line"></span><br><span class="line">        this.setChunkSubCommons(existSubCommonDeps)</span><br><span class="line">        // &#x8FD9;&#x91CC;&#x6536;&#x96C6;&#x4E86;SplitChunksPlugin &#x5B8C;&#x6210; chunks &#x62C6;&#x5206;&#x540E;&#x5206;&#x5305;&#x5185;&#x7684; subCommonDep&#xFF08;ps: &#x8FD9;&#x91CC;&#x7684;&#x8D4B;&#x503C;&#x6709;&#x70B9;&#x5947;&#x602A;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x7EED;&#x7684;&#x6D41;&#x7A0B;&#x5E76;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#xFF09;</span><br><span class="line">        this.subCommonDeps = existSubCommonDeps</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">                                   }</span><br><span class="line">  </span><br><span class="line">  setChunkSubCommons (subCommonDeps: Map&lt;string, DepInfo&gt;) {</span><br><span class="line">    const chunkSubCommons: Map&lt;string, Set&lt;string&gt;&gt; = new Map()</span><br><span class="line"></span><br><span class="line">    subCommonDeps.forEach((depInfo: DepInfo, depName: string) =&gt; {</span><br><span class="line">      const chunks: string[] = [...depInfo.chunks]</span><br><span class="line"></span><br><span class="line">      chunks.forEach(chunk =&gt; {</span><br><span class="line">        if (chunkSubCommons.has(chunk)) {</span><br><span class="line">          const chunkSubCommon = chunkSubCommons.get(chunk) as Set&lt;string&gt;</span><br><span class="line"></span><br><span class="line">          chunkSubCommon.add(depName)</span><br><span class="line">          chunkSubCommons.set(chunk, chunkSubCommon)</span><br><span class="line">        } else {</span><br><span class="line">          chunkSubCommons.set(chunk, new Set([depName]))</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    })</span><br><span class="line">    this.chunkSubCommons = chunkSubCommons</span><br><span class="line">  }</span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>&#x57FA;&#x4E8E;&#x6536;&#x96C6;&#x7684;&#x5206;&#x5305;&#x4E0B;&#x7684;<code>sub-vendors</code>&#x548C;<code>sub-common</code>&#x4E0B;&#x7684;&#x516C;&#x5171;&#x6A21;&#x5757;&#x4FE1;&#x606F;&#x3002;&#x4E3A;&#x5206;&#x5305;<code>require</code>&#x5BF9;&#x5E94;&#x516C;&#x5171;&#x6A21;&#x5757;&#x3002;<code>SplitChunksPlugin</code>&#x5BFC;&#x51FA;&#x8DEF;&#x5F84;&#x4E3A;&#x7F16;&#x8BD1;&#x4EA7;&#x7269;&#x6839;&#x76EE;&#x5F55;&#x5373;&#x4E3B;&#x5305;&#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x4E0D;&#x5360;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5C06;<code>sub-common</code>&#x8FC1;&#x79FB;&#x81F3;&#x5BF9;&#x5E94;&#x5206;&#x5305;&#xFF0C;&#x6545;&#x6B64;&#x5904;<code>require</code>&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x5206;&#x5305;&#x6839;&#x76EE;&#x5F55;&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;export default class MiniSplitChunksPlugin extends SplitChunksPlugin {</span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  apply (compiler: any) {</span><br><span class="line"></span><br><span class="line">    // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">    compiler.hooks.compilation.tap(PLUGIN_NAME, (compilation: any) =&gt; {</span><br><span class="line">      compilation.chunkTemplate.hooks.renderWithEntry.tap(PLUGIN_NAME, (modules, chunk) =&gt; {</span><br><span class="line">        if (this.isSubChunk(chunk)) {</span><br><span class="line">          const chunkName = chunk.name</span><br><span class="line">          const chunkSubRoot = this.subRoots.find(subRoot =&gt; new RegExp(`^${subRoot}\\/`).test(chunkName)) as string</span><br><span class="line">          const chunkAbsulutePath = path.resolve(this.distPath, chunkName)</span><br><span class="line">          const source = new ConcatSource()</span><br><span class="line">          const hasSubVendors = this.subPackagesVendors.has(chunkSubRoot)</span><br><span class="line">          const subVendors = this.subPackagesVendors.get(chunkSubRoot) as webpack.compilation.Chunk</span><br><span class="line">          const subCommon = [...(this.chunkSubCommons.get(chunkName) || [])]</span><br><span class="line"></span><br><span class="line">          /**</span><br><span class="line">           * require&#x8BE5;&#x5206;&#x5305;&#x4E0B;&#x7684;sub-vendors</span><br><span class="line">           */</span><br><span class="line">          if (hasSubVendors) {</span><br><span class="line">   // ... &#x6B64;&#x5904;&#x7701;&#x7565;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x751F;&#x6210;&#x903B;&#x8F91; ...</span><br><span class="line">            source.add(`require(${JSON.stringify(relativePath)});\n`)</span><br><span class="line">          }</span><br><span class="line"></span><br><span class="line">          // require sub-common&#x4E0B;&#x7684;&#x6A21;&#x5757;</span><br><span class="line">          if (subCommon.length &gt; 0) {</span><br><span class="line">            if (this.needAllInOne()) {</span><br><span class="line">        // ... &#x6B64;&#x5904;&#x7701;&#x7565;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x751F;&#x6210;&#x903B;&#x8F91; ...</span><br><span class="line">              source.add(`require(${JSON.stringify(relativePath)});\n`)</span><br><span class="line">            } else {</span><br><span class="line">              subCommon.forEach(moduleName =&gt; {</span><br><span class="line">     // ... &#x6B64;&#x5904;&#x7701;&#x7565;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x751F;&#x6210;&#x903B;&#x8F91; ...</span><br><span class="line"></span><br><span class="line">                source.add(`require(${JSON.stringify(relativePath)});\n`)</span><br><span class="line">              })</span><br><span class="line">            }</span><br><span class="line">          }</span><br><span class="line"></span><br><span class="line">          source.add(modules)</span><br><span class="line">          source.add(&apos;;&apos;)</span><br><span class="line">          return source</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">                                   }</span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><code>require</code>&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x57FA;&#x4E8E;&#x5206;&#x5305;&#x6839;&#x76EE;&#x5F55;&#x3002;&#x6240;&#x4EE5;&#x5BF9;&#x5E94;&#x7684;&#x6587;&#x4EF6;&#x4E5F;&#x9700;&#x8981;&#x505A;&#x8FC1;&#x79FB;&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;export default class MiniSplitChunksPlugin extends SplitChunksPlugin {</span><br><span class="line"></span><br><span class="line">  // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  apply (compiler: any) {</span><br><span class="line"></span><br><span class="line">    // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">    compiler.hooks.emit.tapAsync(PLUGIN_NAME, this.tryAsync((compilation) =&gt; {</span><br><span class="line">      const assets = compilation.assets</span><br><span class="line">      const subChunks = compilation.entries.filter(entry =&gt; this.isSubChunk(entry))</span><br><span class="line">      const needAllInOne = this.needAllInOne()</span><br><span class="line"></span><br><span class="line">      subChunks.forEach(subChunk =&gt; {</span><br><span class="line">        const subChunkName = subChunk.name</span><br><span class="line">        const subRoot = this.subRoots.find(subRoot =&gt; new RegExp(`^${subRoot}\\/`).test(subChunkName)) as string</span><br><span class="line">        const chunkWxssName = `${subChunkName}${FileExtsMap.STYLE}`</span><br><span class="line">        const subCommon = [...(this.chunkSubCommons.get(subChunkName) || [])]</span><br><span class="line">        const wxssAbsulutePath = path.resolve(this.distPath, chunkWxssName)</span><br><span class="line">        const subVendorsWxssPath = path.join(subRoot, `${this.subVendorsName}${FileExtsMap.STYLE}`)</span><br><span class="line">        const source = new ConcatSource()</span><br><span class="line"></span><br><span class="line">        if (subCommon.length &gt; 0) {</span><br><span class="line">          let hasSubCssCommon = false</span><br><span class="line">          subCommon.forEach(moduleName =&gt; {</span><br><span class="line"></span><br><span class="line">            // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line"></span><br><span class="line">            // &#x590D;&#x5236;sub-common&#x4E0B;&#x7684;&#x8D44;&#x6E90;&#x5230;&#x5206;&#x5305;&#x4E0B;</span><br><span class="line">            for (const key in FileExtsMap) {</span><br><span class="line">              const ext = FileExtsMap[key]</span><br><span class="line">              const assetName = path.join(this.subCommonDir, `${moduleName}${ext}`)</span><br><span class="line">              const subAssetName = path.join(subRoot, assetName)</span><br><span class="line">              const assetSource = assets[normalizePath(assetName)]</span><br><span class="line"></span><br><span class="line">              if (assetSource) {</span><br><span class="line">                assets[normalizePath(subAssetName)] = {</span><br><span class="line">                  size: () =&gt; assetSource.source().length,</span><br><span class="line">                  source: () =&gt; assetSource.source()</span><br><span class="line">                }</span><br><span class="line">              }</span><br><span class="line">            }</span><br><span class="line">          })</span><br><span class="line"></span><br><span class="line">          // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        if (assets[normalizePath(subVendorsWxssPath)]) {</span><br><span class="line">          const subVendorsAbsolutePath = path.resolve(this.distPath, subVendorsWxssPath)</span><br><span class="line">          const relativePath = this.getRealRelativePath(wxssAbsulutePath, subVendorsAbsolutePath)</span><br><span class="line">          source.add(`@import ${JSON.stringify(relativePath)};\n`)</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        if (assets[chunkWxssName]) {</span><br><span class="line">          const originSource = assets[chunkWxssName].source()</span><br><span class="line">          source.add(originSource)</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        assets[chunkWxssName] = {</span><br><span class="line">          size: () =&gt; source.source().length,</span><br><span class="line">          source: () =&gt; source.source()</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      // &#x5220;&#x9664;&#x6839;&#x76EE;&#x5F55;&#x4E0B;&#x7684;sub-common&#x8D44;&#x6E90;&#x6587;&#x4EF6;</span><br><span class="line">      for (const assetPath in assets) {</span><br><span class="line">        if (new RegExp(`^${this.subCommonDir}\\/.*`).test(assetPath)) {</span><br><span class="line">          delete assets[assetPath]</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      // ... &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801; ...</span><br><span class="line">    }))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F; <code>MiniSplitChunksPlugin</code>&#x5B9E;&#x73B0;&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;&#x7684;&#x6838;&#x5FC3;&#x6D41;&#x7A0B;</p>
<h3 id="&#x5F15;&#x7528;&#x65B9;&#x5F0F;"><a href="#&#x5F15;&#x7528;&#x65B9;&#x5F0F;" class="headerlink" title="&#x5F15;&#x7528;&#x65B9;&#x5F0F;"></a>&#x5F15;&#x7528;&#x65B9;&#x5F0F;</h3><p>&#x5728;&#x5B8C;&#x6210;&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;&#x540E;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x7684;&#x786E;&#x6709;&#x6240;&#x51CF;&#x5C11;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x540E;&#x7EED;&#x7684;&#x8FED;&#x4EE3;&#x4E2D;&#x53D1;&#x73B0;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x5E76;&#x6CA1;&#x6709;&#x5168;&#x90E8;&#x90FD;&#x6309;&#x9875;&#x9762;&#x5206;&#x5305;&#x6253;&#x5305;&#x3002;&#x4EE5;<code>@/components</code>&#x4E3E;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;&#x6392;&#x67E5;&#x53D1;&#x73B0;<code>@/components</code>&#x662F;&#x901A;&#x8FC7;<code>index.ts</code>&#x7EDF;&#x4E00;&#x5BFC;&#x51FA;&#x5185;&#x90E8;&#x7684;&#x5B50;&#x6A21;&#x5757;&#x9875;&#x9762;&#x901A;&#x8FC7;<code>import { ComponentName } from &apos;@/components&apos;</code>&#x65B9;&#x5F0F;&#x5F15;&#x5165;&#x3002;<br>&#x800C;&#x8FD9;&#x79CD;&#x5BFC;&#x51FA;&#x65B9;&#x5F0F;&#x4F1A;&#x4F7F;<code>webpack</code>&#x5C06;&#x8FD9;&#x4E2A;<code>@/components</code>&#x8BC6;&#x522B;&#x4E3A;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x6A21;&#x5757;&#xFF0C;&#x7531;&#x4E8E;&#x4E3B;&#x5305;&#x5185;&#x5B58;&#x5728;&#x9875;&#x9762;&#x5F15;&#x7528;<code>@/component</code>&#x4E0B;&#x7684;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;<code>@/components</code>&#x4F1A;&#x88AB;&#x5B8C;&#x6574;&#x7684;&#x6253;&#x5305;&#x8FDB;&#x4E3B;&#x5305;&#x5185;&#x3002;</p>
<h4 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;-1"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;-1" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h4><p>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#x5C31;&#x662F;&#x5C06;<code>@/components</code>&#x4FEE;&#x6539;&#x4E3A;<code>@/components/component-path</code>&#xFF0C;&#x8DF3;&#x8FC7;<code>index.ts</code>&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x5185;&#x90E8;&#x7EC4;&#x4EF6;&#x6587;&#x4EF6;&#x3002;<br>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x5C06;&#x73B0;&#x5B58;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x7EC4;&#x4EF6;&#x5F15;&#x7528;&#x8DEF;&#x5F84;&#x90FD;&#x66FF;&#x6362;&#x6389;&#x5462;&#xFF1F;</p>
<ul>
<li>&#x274E; &#x4EBA;&#x5DE5;&#x9010;&#x4E2A;&#x66FF;&#x6362;<ul>
<li>&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4F7F;&#x7528;&#x5230;&#x516C;&#x5171;&#x7EC4;&#x4EF6;&#x7684;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x5DE5;&#x4F5C;&#x91CF;&#x5927;&#x4E14;&#x6613;&#x51FA;&#x9519;</li>
<li>&#x4E14;&#x540E;&#x7EED;&#x5168;&#x5C40;&#x7EC4;&#x4EF6;&#x4F7F;&#x7528;&#x4E5F;&#x8F83;&#x7E41;&#x7410;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;<code>@/components/component-path</code>&#x3002;</li>
</ul>
</li>
<li>&#x2705; &#x4F7F;&#x7528;<code>babel</code>&#x63D2;&#x4EF6;&#x6279;&#x91CF;&#x66FF;&#x6362;<ul>
<li>&#x4EC5;&#x9700;&#x5F15;&#x5165;&#x63D2;&#x4EF6;<code>babel-plugin-import</code>&#x505A;&#x5BF9;&#x5E94;&#x914D;&#x7F6E;&#xFF0C;&#x65E0;&#x9700;&#x4FEE;&#x6539;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x3002;</li>
<li>&#x5F00;&#x53D1;&#x65E0;&#x611F;&#xFF0C;<code>@/components</code>&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x4E0D;&#x53D8;</li>
</ul>
</li>
</ul>
<h4 id="&#x6280;&#x672F;&#x5B9E;&#x73B0;-1"><a href="#&#x6280;&#x672F;&#x5B9E;&#x73B0;-1" class="headerlink" title="&#x6280;&#x672F;&#x5B9E;&#x73B0;"></a>&#x6280;&#x672F;&#x5B9E;&#x73B0;</h4><ol>
<li>&#x5F15;&#x5165;&#x63D2;&#x4EF6;<code>babel-plugin-import</code>&#xFF0C;&#x5E76;&#x914D;&#x7F6E;&#x7EC4;&#x4EF6;&#x8DEF;&#x5F84;&#x4E0E;&#x7EC4;&#x4EF6;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4E4B;&#x95F4;&#x7684;&#x8F6C;&#x6362;&#x5173;&#x7CFB;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;module.exports = {</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      &apos;import&apos;,</span><br><span class="line">      {</span><br><span class="line">        libraryName: &apos;@/components&apos;,</span><br><span class="line">        libraryDirectory: &apos;&apos;,</span><br><span class="line">        transformToDefaultImport: false,</span><br><span class="line">      },</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x6309;&#x7167;&#x914D;&#x7F6E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x4E0E;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x4E4B;&#x95F4;&#x7684;&#x8F6C;&#x6362;&#x5173;&#x7CFB;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// component file -&gt; @/components/component-a</span><br><span class="line">export const ComponentA = ()=&gt; &lt;View/&gt;</span><br><span class="line"></span><br><span class="line">// business code </span><br><span class="line">import {ComponentA} from &apos;@/components&apos;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5982;&#x679C;&#x7EC4;&#x4EF6;&#x8DEF;&#x5F84;&#x4E0E;&#x7EC4;&#x4EF6;&#x540D;&#x4E0D;&#x7B26;&#x5408;&#x6240;&#x914D;&#x7F6E;&#x7684;&#x89C4;&#x8303;&#xFF0C;&#x7F16;&#x8BD1;&#x65F6;&#x4F1A;&#x627E;&#x4E0D;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x7EC4;&#x4EF6;&#x3002;</p>
<h3 id="&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4F18;&#x5316;"><a href="#&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4F18;&#x5316;" class="headerlink" title="&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4F18;&#x5316;"></a>&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4F18;&#x5316;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/41349443c073f711526fea0ed74a1d0e4f4dc3fb59a43f9df30229ed9afe9165" alt="image.png"><br>&#x8FD9;&#x91CC;&#x622A;&#x53D6;&#x4E86;&#x300C;&#x53E4;&#x8317;&#x70B9;&#x5355;&#x5C0F;&#x7A0B;&#x5E8F;&#x300D;&#x5728;&#x4E0D;&#x91C7;&#x7528;&#x5176;&#x4ED6;&#x4F18;&#x5316;&#x624B;&#x6BB5;&#x76F4;&#x63A5;&#x5C06;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x6253;&#x5305;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x4F9D;&#x8D56;&#x5206;&#x6790;&#x56FE;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5176;&#x4E2D;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x7684;&#x5C3A;&#x5BF8;&#x8DB3;&#x8DB3;&#x6709;<code>22.07MB</code>&#xFF0C;&#x8FD9;&#x4E0E;&#x5FAE;&#x4FE1;&#x9650;&#x5236;&#x7684;&#x4E3B;&#x5305;&#x5927;&#x5C0F;<code>2MB</code>&#x6574;&#x6574;&#x76F8;&#x5DEE;&#x4E86;<code>20MB</code>&#x3002;</p>
<h4 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;-2"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;-2" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h4><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;<code>22.07MB</code>&#x7684;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4E0A;&#x4F20;&#x81F3;&#x4E91;&#x7AEF;&#x3002;&#x5728;&#x5C0F;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x65F6;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x8DEF;&#x5F84;&#x3002;&#x90A3;&#x4E48;&#x6253;&#x5305;&#x65F6;&#x8FD9;&#x90E8;&#x5206;&#x8D44;&#x6E90;&#x5C3A;&#x5BF8;&#x5C31;&#x4E0D;&#x4F1A;&#x8BA1;&#x7B97;&#x5728;&#x4E3B;&#x5305;&#x5C3A;&#x5BF8;&#x4E2D;&#x3002;<br>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5982;&#x4F55;&#x5C06;&#x73B0;&#x5B58;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x8DEF;&#x5F84;&#x66FF;&#x6362;&#x6210;&#x7F51;&#x7EDC;&#x8DEF;&#x5F84;&#xFF1F;</p>
<ul>
<li>&#x274E; &#x4EBA;&#x5DE5;&#x9010;&#x4E2A;&#x66FF;&#x6362;<ul>
<li>&#x9700;&#x8981;&#x4FEE;&#x6539;&#x4F7F;&#x7528;&#x5230;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x7684;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x5DE5;&#x4F5C;&#x91CF;&#x5927;&#x4E14;&#x6613;&#x51FA;&#x9519;</li>
<li>&#x4E14;&#x540E;&#x7EED;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x4E5F;&#x5F88;&#x7E41;&#x7410;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x4E0A;&#x4F20;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x540E;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x5730;&#x5740;&#x7F16;&#x7801;&#x3002;</li>
</ul>
</li>
<li>&#x2705; &#x4F7F;&#x7528;<code>babel</code>&#x63D2;&#x4EF6;&#x6279;&#x91CF;&#x66FF;&#x6362;<ul>
<li>&#x4EC5;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x5BF9;&#x5E94;&#x7684;<code>babel</code>&#x63D2;&#x4EF6;&#x903B;&#x8F91;&#x5E76;&#x5F15;&#x5165;&#xFF0C;&#x65E0;&#x9700;&#x4FEE;&#x6539;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;</li>
<li>&#x5F00;&#x53D1;&#x65E0;&#x611F;&#xFF0C;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x4E0D;&#x53D8;</li>
</ul>
</li>
</ul>
<h4 id="&#x6280;&#x672F;&#x5B9E;&#x73B0;-2"><a href="#&#x6280;&#x672F;&#x5B9E;&#x73B0;-2" class="headerlink" title="&#x6280;&#x672F;&#x5B9E;&#x73B0;"></a>&#x6280;&#x672F;&#x5B9E;&#x73B0;</h4><ol>
<li>Taro &#x7F16;&#x8BD1;&#x5F00;&#x59CB;&#x65F6;&#x4F7F;&#x7528;<code>taro</code>&#x63D2;&#x4EF6;&#x4E0A;&#x4F20;&#x672C;&#x5730;&#x56FE;&#x7247;&#x8D44;&#x6E90;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import type {IPluginContext} from &apos;@tarojs/service&apos;</span><br><span class="line">import {PromisePool} from &apos;@supercharge/promise-pool&apos;</span><br><span class="line">import path from &apos;path&apos;;</span><br><span class="line">import fs from &apos;fs&apos;;</span><br><span class="line">import md5 from &apos;md5&apos;</span><br><span class="line"></span><br><span class="line">const cacheFileName = &quot;imgCache.json&quot;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x9012;&#x5F52;&#x67E5;&#x627E;&#x6587;&#x4EF6;</span><br><span class="line"> */</span><br><span class="line">const travelFiles = (dir: string): string[] =&gt; {</span><br><span class="line">    const files = fs.readdirSync(dir);</span><br><span class="line">    return files.reduce&lt;string[]&gt;((result, file) =&gt; {</span><br><span class="line">        const filePath = path.join(dir, file);</span><br><span class="line">        if (!fs.statSync(filePath).isDirectory()) return [...result, filePath];</span><br><span class="line">        return [...result, ...travelFiles(filePath)];</span><br><span class="line">    }, [])</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x683C;&#x5F0F;&#x5316;</span><br><span class="line"> */</span><br><span class="line">const filePathFormat = (ctx: IPluginContext, filePath: string) =&gt; {</span><br><span class="line">    return filePath.replace(ctx.paths.sourcePath, &quot;@&quot;).replace(/\\/g, &quot;/&quot;);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x751F;&#x6210;&#x6587;&#x4EF6; key</span><br><span class="line"> */</span><br><span class="line">const generateFileUniqueKey = (filePath: string) =&gt; {</span><br><span class="line">    const {dir, base, ext} = path.parse(filePath);</span><br><span class="line">    const buffer = fs.readFileSync(`${dir}${path.sep}${base}`);</span><br><span class="line">    return md5(buffer)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">const cacheFile = path.join(__dirname, cacheFileName);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">interface PluginOpts {</span><br><span class="line">    fileDir: string,</span><br><span class="line">    upload: (filePath: string, fileKey: string) =&gt; Promise&lt;string&gt;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">module.exports = (ctx: IPluginContext, pluginOpts: PluginOpts) =&gt; {</span><br><span class="line">    ctx.onBuildStart(async () =&gt; {</span><br><span class="line">        const {fileDir, upload} = pluginOpts</span><br><span class="line">        const fileDirPath = `${ctx.paths.sourcePath}/${fileDir}`;</span><br><span class="line">        const filePathList = travelFiles(fileDirPath);</span><br><span class="line"></span><br><span class="line">        // &#x4E0A;&#x4F20;&#x6587;&#x4EF6;</span><br><span class="line">        const {results: fileUrlList} = await PromisePool.withConcurrency(2)</span><br><span class="line">            .for(filePathList)</span><br><span class="line">            .process(async (filePath) =&gt; {</span><br><span class="line">                const fileUrl = await upload(filePath, generateFileUniqueKey(filePath))</span><br><span class="line">                return {filePath, fileUrl}</span><br><span class="line">            })</span><br><span class="line"></span><br><span class="line">        // &#x751F;&#x6210;&#x6587;&#x4EF6;&#x7F13;&#x5B58;&#x6570;&#x636E;</span><br><span class="line">        const fileUrlMap = fileUrlList.reduce((result, item) =&gt; {</span><br><span class="line">            const tempKey = filePathFormat(ctx, item.filePath)</span><br><span class="line">            return {...result, [tempKey]: item.fileUrl}</span><br><span class="line">        }, {})</span><br><span class="line"></span><br><span class="line">        fs.writeFileSync(cacheFile, JSON.stringify(fileUrlMap));</span><br><span class="line">    })</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x4F7F;&#x7528;<code>babel</code>&#x63D2;&#x4EF6;&#x66FF;&#x6362;<code>ts</code>&#x6216;<code>js</code>&#x4E2D;&#x5BFC;&#x5165;&#x7684;&#x56FE;&#x7247;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import type {NodePath, PluginItem, PluginPass} from &apos;@babel/core&apos;</span><br><span class="line">import type {ImportDeclaration, Statement} from &quot;@babel/types&quot;;</span><br><span class="line">import template from &apos;@babel/template&apos;</span><br><span class="line">import path from &quot;path&quot;;</span><br><span class="line">import fs from &quot;fs&quot;;</span><br><span class="line"></span><br><span class="line">const cacheFileName = &quot;imgCache.json&quot;</span><br><span class="line"></span><br><span class="line">const getCacheData = (filePath: string): Record&lt;string, string&gt; =&gt; {</span><br><span class="line">    try {</span><br><span class="line">        fs.accessSync(filePath);</span><br><span class="line">        return JSON.parse(fs.readFileSync(filePath).toString());</span><br><span class="line">    } catch (error) {</span><br><span class="line">        return {}</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = (): PluginItem =&gt; {</span><br><span class="line"></span><br><span class="line">    const cacheMap = getCacheData(path.join(__dirname, cacheFileName));</span><br><span class="line"></span><br><span class="line">    return {</span><br><span class="line">        visitor: {</span><br><span class="line">            ImportDeclaration(importDeclarationAstPath: NodePath&lt;ImportDeclaration&gt;, state: PluginPass) {</span><br><span class="line"></span><br><span class="line">                if (state.file.opts.filename?.includes(&quot;node_modules&quot;)) return;</span><br><span class="line"></span><br><span class="line">                const {node} = importDeclarationAstPath;</span><br><span class="line"></span><br><span class="line">                const {value} = node.source;</span><br><span class="line"></span><br><span class="line">                const fileUrl = cacheMap[value]</span><br><span class="line"></span><br><span class="line">                if (!fileUrl) return;</span><br><span class="line"></span><br><span class="line">                const [specifier] = node.specifiers</span><br><span class="line"></span><br><span class="line">                const assignExpression = template.ast(`const ${specifier.local.name} = &apos;${fileUrl}&apos;;`);</span><br><span class="line"></span><br><span class="line">                importDeclarationAstPath.replaceWith(assignExpression as Statement);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x4F7F;&#x7528;<code>postcss</code>&#x63D2;&#x4EF6;&#x66FF;&#x6362;&#x6837;&#x5F0F;&#x6587;&#x4EF6;&#x4E2D;&#x5BFC;&#x5165;&#x7684;&#x56FE;&#x7247;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import {AcceptedPlugin} from &quot;postcss&quot;;</span><br><span class="line">import path from &quot;path&quot;;</span><br><span class="line">import fs from &quot;fs&quot;;</span><br><span class="line"></span><br><span class="line">const cacheFileName = &quot;imgCache.json&quot;</span><br><span class="line"></span><br><span class="line">const getCacheData = (filePath: string): Record&lt;string, string&gt; =&gt; {</span><br><span class="line">    try {</span><br><span class="line">        fs.accessSync(filePath);</span><br><span class="line">        return JSON.parse(fs.readFileSync(filePath).toString());</span><br><span class="line">    } catch (error) {</span><br><span class="line">        return {}</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const urlRegexp = /url\([&apos;&quot;]([^&apos;&quot;]*)[&apos;&quot;]\)/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const filePathFormat = (filePath: string) =&gt; filePath.replace(&apos;~@&apos;, &apos;@&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.exports = (): AcceptedPlugin =&gt; {</span><br><span class="line"></span><br><span class="line">    const cacheMap = getCacheData(path.join(__dirname, cacheFileName));</span><br><span class="line"></span><br><span class="line">    return {</span><br><span class="line">        postcssPlugin: &apos;auto-replace-assets-url&apos;,</span><br><span class="line"></span><br><span class="line">        Declaration(decl) {</span><br><span class="line"></span><br><span class="line">            if (!urlRegexp.test(decl.value)) return</span><br><span class="line"></span><br><span class="line">            let [_, filePath] = decl.value.match(urlRegexp)!;</span><br><span class="line"></span><br><span class="line">            filePath = filePathFormat(filePath)</span><br><span class="line"></span><br><span class="line">            if (!cacheMap[filePath]) return;</span><br><span class="line"></span><br><span class="line">            decl.value = `url(${cacheMap[filePath]})`</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x8FD9;&#x91CC;&#x4ECB;&#x7ECD;&#x4E86;&#x9875;&#x9762;&#x5206;&#x5305;&#x3001;&#x516C;&#x5171;&#x6A21;&#x5757;&#x5206;&#x5305;&#x548C;&#x56FE;&#x7247;&#x8D44;&#x6E90;&#x4F18;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x4F18;&#x5316;&#x5C0F;&#x7A0B;&#x5E8F;&#x5305;&#x4F53;&#x79EF;&#x3002;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x5171;&#x540C;&#x63A2;&#x8BA8;&#x5176;&#x4ED6;&#x4F18;&#x5316;&#x7B56;&#x7565;&#x5982;&#xFF1A;TS&#x679A;&#x4E3E;&#x7F16;&#x8BD1;&#x4F18;&#x5316;&#x3001;&#x5C0F;&#x7A0B;&#x5E8F;&#x5206;&#x5305;&#x5F02;&#x6B65;&#x5316;&#x3001;&#x63D0;&#x53D6;&#x516C;&#x5171;&#x6837;&#x5F0F;&#x3001;&#x539F;&#x5B50;&#x5316;&#x6837;&#x5F0F;&#x7EC4;&#x4EF6;&#x7B49;&#x3002;</p>
<h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p>&#x1F4DA; &#x5C0F;&#x8317;&#x6587;&#x7AE0;&#x63A8;&#x8350;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7326093660705718284">&#x5C0F;&#x7A0B;&#x5E8F;&#x4E3B;&#x5305;&#x4F53;&#x79EF;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x6848;&#x4E0E;&#x6280;&#x672F;&#x5B9E;&#x73B0;</a></li>
<li><a href="https://dev.newban.cn/7323436080312893476">JSPDF + html2canvas A4&#x5206;&#x9875;&#x622A;&#x65AD;</a></li>
<li><a href="https://dev.newban.cn/7321779224338448411">Formily JSON Schema &#x6E32;&#x67D3;&#x6D41;&#x7A0B;&#x53CA;&#x6848;&#x4F8B;&#x6D45;&#x6790;</a></li>
</ul>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x300C;<a href="/external_links/f40b7034b31e24ca9725d4bcf11e27fb.html" target="blank" rel="noopener">Goodme&#x524D;&#x7AEF;&#x56E2;&#x961F;</a>&#x300D;&#xFF0C;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x5E72;&#x8D27;&#x5B9E;&#x8DF5;&#xFF0C;&#x6B22;&#x8FCE;&#x4EA4;&#x6D41;&#x5206;&#x4EAB;~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c36550c71011afcc8d5648cd9c30a418.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7326268967352631305.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7326268967352631305.html" itemprop="url">Flutter - 混编项目集成Shorebird热更新🐦（</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-21T14:57:52+08:00">
                2024-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#xFF1A;<a href="/external_links/d31e77effa2c9a5c6fc7141cdeb0b161.html" target="blank" rel="noopener">FSA&#x5168;&#x6808;&#x884C;&#x52A8;</a> &#x1F44B;</p>
</blockquote>
<h2 id="&#x4E00;&#x3001;&#x6982;&#x8FF0;"><a href="#&#x4E00;&#x3001;&#x6982;&#x8FF0;" class="headerlink" title="&#x4E00;&#x3001;&#x6982;&#x8FF0;"></a>&#x4E00;&#x3001;&#x6982;&#x8FF0;</h2><p>&#x5173;&#x4E8E; <code>Shorebird</code> &#x7684;&#x521D;&#x59CB;&#x5316;&#x5185;&#x5BB9;&#x53EF;&#x4EE5;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x300A;<a href="https://dev.newban.cn/7321049411852664882">Flutter - &#x6DF7;&#x7F16;&#x9879;&#x76EE;&#x96C6;&#x6210;Shorebird&#x70ED;&#x66F4;&#x65B0;&#x1F426;&#xFF08;&#x5B89;&#x5353;&#x7BC7;&#xFF09;</a>&#x300B;&#x4E2D;&#x67E5;&#x770B;&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#x4E86;&#x3002;</p>
<p><code>Shorebird</code> &#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E0A;&#x5BF9;&#x4E8E; <code>iOS</code> &#x6DF7;&#x7F16;&#x65B9;&#x6848;&#x96C6;&#x6210;&#x70ED;&#x66F4;&#x65B0;&#x7684;&#x4ECB;&#x7ECD;&#x4E0D;&#x7B97;&#x8BE6;&#x7EC6;&#xFF0C;&#x53EA;&#x80FD;&#x8BF4;&#x70B9;&#x660E;&#x4E86;&#x8981;&#x70B9;&#xFF0C;&#x6307;&#x660E;&#x4E86;&#x65B9;&#x5411;&#x3002;</p>
<p>&#x672C;&#x6587;&#x5C06;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x7684;&#x9879;&#x76EE;&#x5E94;&#x7528;&#x60C5;&#x51B5;&#x505A;&#x51FA;&#x96C6;&#x6210;&#x8C03;&#x6574;&#xFF0C;&#x5E76;&#x8865;&#x5145;&#x8BF4;&#x660E;&#x6B63;&#x786E;&#x7684;&#x8865;&#x4E01;&#x9A8C;&#x8BC1;&#x65B9;&#x6848;&#x3002;</p>
<h2 id="&#x4E8C;&#x3001;&#x8E29;&#x5751;"><a href="#&#x4E8C;&#x3001;&#x8E29;&#x5751;" class="headerlink" title="&#x4E8C;&#x3001;&#x8E29;&#x5751;"></a>&#x4E8C;&#x3001;&#x8E29;&#x5751;</h2><p><code>Shorebird</code> &#x6587;&#x6863;&#x91CC;&#x6307;&#x51FA;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C; <code>Flutter</code> &#x5B98;&#x65B9;&#x6587;&#x6863;&#x91CC; <code>Option B - Embed frameworks in Xcode</code> &#x7684;&#x65B9;&#x5F0F;&#x53BB;&#x96C6;&#x6210; <code>Flutter</code> &#x6A21;&#x5757;&#x3002;</p>
<blockquote>
<p>&#x5173;&#x4E8E; <code>Flutter</code> &#x5B98;&#x65B9;&#x6587;&#x6863;&#x6307;&#x51FA;&#x7684;&#x5404;&#x79CD;&#x96C6;&#x6210;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x67E5;&#x770B;: <a href="/external_links/22ef9182b94ce078faaa210736dac7b2.html" target="blank" rel="noopener">docs.flutter.dev/add-to-app/&#x2026;</a></p>
</blockquote>
<p>&#x5177;&#x4F53;&#x7684;&#x6B65;&#x9AA4;&#x5C31;&#x662F;&#xFF1A;</p>
<ol>
<li>&#x5148;&#x6CE8;&#x91CA;&#x6389;&#x539F;&#x6765;&#x7684; <code>Option A</code> &#x96C6;&#x6210;&#x65B9;&#x5F0F;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#x4EE3;&#x7801;</li>
<li>&#x6267;&#x884C; <code>Shorebird Release</code> &#x53BB;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684;&#x6240;&#x6709; <code>xcframework</code> &#x6587;&#x4EF6;&#x3002;&#xFF08;<code>xcframework</code> &#x6587;&#x4EF6;&#x5305;&#x62EC;&#x4E86; <code>Flutter.xcframework</code> &#x548C; <code>App.xcframework</code>&#xFF0C;&#x4EE5;&#x53CA;&#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x7684;&#x539F;&#x751F;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x5BF9;&#x5E94;&#x7684; <code>xcframework</code>&#xFF09;</li>
<li>&#x5C06;&#x6240;&#x6709;&#x6784;&#x5EFA;&#x5B8C;&#x6210;&#x7684; <code>xcframework</code> &#x62D6;&#x5230; <code>Build Phases</code> &#x4E2D;&#x7684; <code>Embed Frameworks</code> &#x5185;&#x3002;</li>
<li>&#x5C06; <code>xcframework</code> &#x7684;&#x6240;&#x5728;&#x76EE;&#x5F55;&#x8DEF;&#x5F84;&#x914D;&#x7F6E;&#x5230; <code>Framework Search Paths</code>&#x3002;</li>
<li>&#x914D;&#x7F6E; <code>xcframework</code> &#x7684; <code>Embed</code> &#x6A21;&#x5F0F;&#xFF0C;&#x9759;&#x6001;&#x5E93;&#x5FC5;&#x987B;&#x9009; <code>Do Not Embed</code>&#xFF0C;&#x52A8;&#x6001;&#x5E93;&#x5FC5;&#x987B;&#x9009; <code>Embed &amp; Sign</code>&#x3002;</li>
</ol>
<p>&#x56E0;&#x4E3A; <code>Option A - Embed with CocoaPods and the Flutter SDK</code> &#x7684;&#x65B9;&#x5F0F;&#x53EA;&#x9700;&#x8981;&#x7B80;&#x5355;&#x7684;&#x914D;&#x7F6E; <code>Podfile</code> &#x5C31;&#x53EF;&#x4EE5;&#x96C6;&#x6210; <code>Flutter</code> &#x6A21;&#x5757;&#xFF0C;&#x6240;&#x4EE5;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x5728;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x662F;&#x4F1A;&#x9009;&#x62E9; <code>Option A</code> &#x7684;&#x65B9;&#x5F0F;&#x3002;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x8981;&#x6539;&#x6210; <code>Option B</code> &#x9700;&#x8981;&#x6211;&#x4EEC;&#x5927;&#x6539;&#x7279;&#x6539;&#x3002;</p>
<p>&#x6539;&#x6210; <code>Option B</code> &#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x70B9;&#x95EE;&#x9898;&#xFF1A;</p>
<h3 id="1&#x3001;vendored-frameworks-&#x7F3A;&#x5931;"><a href="#1&#x3001;vendored-frameworks-&#x7F3A;&#x5931;" class="headerlink" title="1&#x3001;vendored_frameworks &#x7F3A;&#x5931;"></a>1&#x3001;<code>vendored_frameworks</code> &#x7F3A;&#x5931;</h3><p>&#x5982;&#x679C;&#x4F60;&#x4F9D;&#x8D56;&#x7684; <code>Flutter</code> &#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x4E86;&#x539F;&#x751F;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#xFF0C;&#x5982; <code>realm</code>&#xFF0C;&#x5728;&#x5B83;&#x7684; <code>podspec</code> &#x6587;&#x4EF6;&#x662F;&#x8FD9;&#x6837;&#x58F0;&#x660E;&#x7684; <code>s.vendored_frameworks = &apos;realm_dart.xcframework&apos;</code>&#xFF0C;&#x90A3;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x5728;&#x6700;&#x7EC8;&#x6784;&#x5EFA;&#x5B8C;&#x6210;&#x7684; <code>xcframework</code> &#x7684;&#x76EE;&#x5F55;&#x91CC;&#x4F1A;&#x7F3A;&#x5C11;&#x8FD9;&#x4E9B; <code>vendored_frameworks</code>&#x3002;</p>
<p>&#x76F8;&#x5173;&#x7684; <code>issue</code>: <a href="/external_links/6d254b78a96847ba48905fa1c26beef9.html" target="blank" rel="noopener">github.com/flutter/flu&#x2026;</a>&#x3002;</p>
<p>&#x56E0;&#x4E3A; <code>Option B</code> &#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x4F9D;&#x8D56;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x5E76;&#x4E0D;&#x4F1A;&#x62A5;&#x4EFB;&#x4F55;&#x9519;&#x8BEF;&#xFF0C;&#x7B49;&#x4F60; <code>App</code> &#x8FD0;&#x884C;&#x8D77;&#x6765;&#x8FDB;&#x5165;&#x4E00;&#x4E9B;&#x76F8;&#x5173;&#x573A;&#x666F;&#xFF0C;&#x4F7F;&#x7528;&#x5230;&#x4E86;&#x5BF9;&#x5E94;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x529F;&#x80FD;&#x65F6;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x6765;&#x4E2A;&#x627E;&#x4E0D;&#x5230;&#x7B26;&#x53F7;&#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;Failed to lookup symbol &apos;native_method_signature&apos;: dlsym(0xa47e7c10, native_method_signature): symbol not found</span><br></pre></td></tr></table></figure>

<p>&#x63A5;&#x7740;&#x5C31;&#x662F;&#x95EA;&#x9000;&#xFF0C;&#x53EF;&#x60F3;&#x800C;&#x77E5;&#x8FD9;&#x5F97;&#x591A;&#x5413;&#x4EBA;&#xFF01;</p>
<h3 id="2&#x3001;&#x91CD;&#x590D;&#x7F16;&#x8BD1;"><a href="#2&#x3001;&#x91CD;&#x590D;&#x7F16;&#x8BD1;" class="headerlink" title="2&#x3001;&#x91CD;&#x590D;&#x7F16;&#x8BD1;"></a>2&#x3001;&#x91CD;&#x590D;&#x7F16;&#x8BD1;</h3><p><code>vendored_frameworks</code> &#x7F3A;&#x5931;&#x7684;&#x95EE;&#x9898;&#x6211;&#x901A;&#x8FC7;&#x811A;&#x672C;&#x89E3;&#x51B3;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x6709;&#x53E6;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x4E9B; <code>xcframework</code> &#x4E2D;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x6DB5;&#x76D6;&#x4F60;&#x539F;&#x6765;&#x7684;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x91CC;&#x4F9D;&#x8D56;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5305;&#xFF0C;&#x6BD4;&#x5982;&#xFF0C;<code>Flutter</code> &#x7684;&#x63D2;&#x4EF6;&#x7528;&#x5230;&#x4E86; <code>FMDB</code>&#xFF0C;&#x751F;&#x6210;&#x7684; <code>xcframework</code> &#x4E2D;&#x5C31;&#x4F1A;&#x5305;&#x542B; <code>FMDB.xcframework</code>&#xFF0C;&#x800C;&#x4F60;&#x7684;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x672C;&#x6765;&#x5C31;&#x6709;&#x4F9D;&#x8D56; <code>FMDB</code>&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x7F16;&#x8BD1;&#xFF0C;<code>Xcode</code> &#x5C31;&#x4F1A;&#x544A;&#x8BC9;&#x4F60;&#x91CD;&#x590D;&#x4E86;&#xFF0C;&#x7F16;&#x8BD1;&#x4E0D;&#x901A;&#x8FC7;&#xFF0C;&#x62A5;&#x9519;&#x5185;&#x5BB9;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;Showing Recent Messages</span><br><span class="line">Multiple commands produce &apos;/Users/lxf/Library/Developer/Xcode/DerivedData/xxx.app/Frameworks/FMDB.framework&apos;</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x662F;&#x4F60;&#xFF0C;&#x4F60;&#x9009;&#x62E9;&#x7559;&#x4E0B;&#x54EA;&#x4E2A;&#x5462;&#xFF1F;</p>
<ul>
<li>&#x5982;&#x679C;&#x4F60;&#x9009;&#x62E9;&#x4E86; <code>Flutter</code> &#x5E2E;&#x4F60;&#x751F;&#x6210;&#x7684; <code>FMDB.xcframework</code>&#xFF0C;&#x4F60;&#x5C31;&#x5F97;&#x53BB;&#x5904;&#x7406;&#x5176;&#x5B83;&#x539F;&#x751F;&#x7B2C;&#x4E09;&#x65B9;&#x4F9D;&#x8D56;&#x7684; <code>pod &apos;FMDB&apos;</code>&#xFF0C;&#x5047;&#x5982;&#x6B64;&#x65F6;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x91CC;&#x7684;&#x4E00;&#x4E9B;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x6216;&#x79C1;&#x6709;&#x5E93;&#x4E5F;&#x4F9D;&#x8D56; <code>FMDB</code>&#xFF0C;&#x90A3;&#x4F60;&#x8981;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5E93;&#x53EF;&#x5C31;&#x592A;&#x9EBB;&#x70E6;&#x4E86;&#x3002;</li>
<li>&#x5982;&#x679C;&#x4F60;&#x9009;&#x62E9;&#x4F7F;&#x7528; <code>pod &apos;FMDB&apos;</code> &#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x90A3;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x53BB;&#x5224;&#x65AD;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x91CC;&#x662F;&#x5426;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x6709;&#x7684;&#x8BDD;&#x5C31;&#x4E0D;&#x518D;&#x58F0;&#x660E;&#x4F9D;&#x8D56;&#xFF0C;&#x8FD9;&#x79CD;&#x8FD8;&#x597D;&#x3002;</li>
</ul>
<h3 id="3&#x3001;&#x9759;&#x6001;&#x5E93;&#x4E0E;&#x52A8;&#x6001;&#x5E93;"><a href="#3&#x3001;&#x9759;&#x6001;&#x5E93;&#x4E0E;&#x52A8;&#x6001;&#x5E93;" class="headerlink" title="3&#x3001;&#x9759;&#x6001;&#x5E93;&#x4E0E;&#x52A8;&#x6001;&#x5E93;"></a>3&#x3001;&#x9759;&#x6001;&#x5E93;&#x4E0E;&#x52A8;&#x6001;&#x5E93;</h3><p>&#x751F;&#x6210;&#x7684; <code>xcframework</code> &#x4E2D;&#xFF0C;&#x6709;&#x4E9B;&#x662F;&#x9759;&#x6001;&#x5E93;&#xFF0C;&#x6709;&#x4E9B;&#x662F;&#x52A8;&#x6001;&#x5E93;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/e6ae3981a051c48c2f7f264213cfb59d1888c4d0811ff23eb8e9dda1723c54b2" alt></p>
<p>&#x5982;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x9759;&#x6001;&#x5E93;&#x5FC5;&#x987B;&#x9009; <code>Do Not Embed</code>&#xFF0C;&#x52A8;&#x6001;&#x5E93;&#x5FC5;&#x987B;&#x9009; <code>Embed &amp; Sign</code>&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x5168;&#x9009;&#x4E86; <code>Embed &amp; Sign</code>&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x65E0;&#x6CD5;&#x542F;&#x52A8; <code>App</code> &#x4E86;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/009d53fa605e011161fd3128a0813741832884dd39812b1e3273e72169345b5b" alt></p>
<p>&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x76F8;&#x5173; <code>issue</code>: <a href="/external_links/071666188c5a9958e88c41ed10c271c4.html" target="blank" rel="noopener">github.com/flutter/flu&#x2026;</a></p>
<p>&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x5FC5;&#x987B;&#x5F97;&#x9009;&#x5BF9; <code>Embed</code> &#x9009;&#x9879;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>file</code> &#x547D;&#x4EE4;&#x53BB;&#x5224;&#x65AD; <code>xcframework</code> &#x662F;&#x9759;&#x6001;&#x5E93;&#x8FD8;&#x662F;&#x52A8;&#x6001;&#x5E93;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;file FlutterPluginRegistrant.xcframework/ios-arm64/FlutterPluginRegistrant.framework/FlutterPluginRegistrant</span><br><span class="line">FlutterPluginRegistrant.xcframework/ios-arm64/FlutterPluginRegistrant.framework/FlutterPluginRegistrant: </span><br><span class="line">current ar archive random library // &#x9759;&#x6001;&#x5E93;</span><br><span class="line"></span><br><span class="line">file url_launcher_ios.xcframework/ios-arm64/url_launcher_ios.framework/url_launcher_ios</span><br><span class="line">url_launcher_ios.xcframework/ios-arm64/url_launcher_ios.framework/url_launcher_ios: </span><br><span class="line">Mach-O 64-bit dynamically linked shared library arm64 // &#x52A8;&#x6001;&#x5E93;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x90E8;&#x5206;&#x5224;&#x65AD;&#x903B;&#x8F91;&#x53EA;&#x80FD;&#x4EA4;&#x7ED9;&#x811A;&#x672C;&#x5904;&#x7406;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5F53;&#x6570;&#x91CF;&#x8D77;&#x6765;&#x540E;&#x4F60;&#x5C31;&#x4F1A;&#x4F53;&#x9A8C;&#x5230;&#x4EC0;&#x4E48;&#x53EB;&#x5D29;&#x6E83;&#xFF0C;&#x522B;&#x95EE;&#x6211;&#x662F;&#x600E;&#x4E48;&#x77E5;&#x9053;&#x7684; &#x1F62D;</p>
<h3 id="4&#x3001;&#x76F4;&#x63A5;&#x5D29;&#x6E83;"><a href="#4&#x3001;&#x76F4;&#x63A5;&#x5D29;&#x6E83;" class="headerlink" title="4&#x3001;&#x76F4;&#x63A5;&#x5D29;&#x6E83;"></a>4&#x3001;&#x76F4;&#x63A5;&#x5D29;&#x6E83;</h3><p>&#x540E;&#x9762;&#x6211;&#x76F4;&#x63A5;&#x7528;&#x811A;&#x672C;&#x5224;&#x65AD; <code>Flutter</code> &#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x4E86;&#x54EA;&#x4E9B;&#x539F;&#x751F;&#x7B2C;&#x4E09;&#x65B9;&#xFF0C;&#x5C06;&#x5B83;&#x4EEC;&#x7EDF;&#x4E00;&#x5728;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x5185;&#x58F0;&#x660E;&#x4F9D;&#x8D56;&#xFF0C;&#x5728;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x8FD9;&#x4E5F;&#x662F;&#x5F88;&#x5371;&#x9669;&#x7684;&#xFF0C;&#x5982; <code>connectivity_plus</code> &#x8FD9;&#x4E2A; <code>Flutter</code> &#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x4E86; <code>ReachabilitySwift</code>&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x5F97;&#x4F7F;&#x7528; <code>Reachability.xcframework</code> &#x4E8C;&#x8FDB;&#x5236;&#x5D4C;&#x5165;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5426;&#x5219;&#x8FD0;&#x884C;&#x5C31;&#x5D29;~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;dyld[31764]: Symbol not found: _$s12ReachabilityAAC10ConnectionO4wifiyA2DmFWC</span><br><span class="line">  Referenced from: &lt;8142F86E-4C9C-3513-AD29-D3522FC6677F&gt; /Users/lxf/Library/Developer/Xcode/DerivedData/xxx/connectivity_plus.framework/connectivity_plus</span><br><span class="line">  Expected in:     &lt;DA318000-9A97-35AD-87EA-7C5B635DE010&gt; /Users/lxf/Library/Developer/xxx.app/Frameworks/Reachability.framework/Reachability</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E09;&#x3001;&#x5206;&#x6790;"><a href="#&#x4E09;&#x3001;&#x5206;&#x6790;" class="headerlink" title="&#x4E09;&#x3001;&#x5206;&#x6790;"></a>&#x4E09;&#x3001;&#x5206;&#x6790;</h2><p>&#x540E;&#x6765;&#x4ED4;&#x7EC6;&#x60F3;&#x60F3;&#xFF0C;<code>Shorebird</code> &#x7684;&#x70ED;&#x66F4;&#x65B0;&#x662F;&#x9488;&#x5BF9; <code>Dart</code> &#x4EE3;&#x7801;&#xFF0C;&#x8DDF;&#x539F;&#x751F;&#x65E0;&#x5173;&#xFF0C;&#x80FD;&#x4E0D;&#x80FD;&#x6309;&#x539F;&#x6765;&#x7684; <code>Cocoapods</code> &#x65B9;&#x5F0F;&#x53BB;&#x96C6;&#x6210; <code>Flutter.xcframework</code>&#xFF0C;<code>App.xcframework</code> &#x4EE5;&#x53CA;&#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x7684;&#x539F;&#x751F;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x5462;&#xFF1F;</p>
<p>&#x7B54;&#x6848;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x6765;&#x770B;&#x770B; <code>install_all_flutter_pods</code> &#x65B9;&#x6CD5;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;def install_all_flutter_pods(flutter_application_path = nil)</span><br><span class="line">  ...</span><br><span class="line">  flutter_application_path ||= File.join(&apos;..&apos;, &apos;..&apos;)</span><br><span class="line">  # &#x751F;&#x6210; .ios/Flutter/Flutter.podspec</span><br><span class="line">  install_flutter_engine_pod(flutter_application_path)</span><br><span class="line">  # &#x96C6;&#x6210; &#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x7684;&#x539F;&#x751F;&#x5E93; Pods</span><br><span class="line">  install_flutter_plugin_pods(flutter_application_path)</span><br><span class="line">  # &#x7F16;&#x8BD1;&#x5E76;&#x96C6;&#x6210; Flutter.xcframework &#x548C; App.xcframework</span><br><span class="line">  install_flutter_application_pod(flutter_application_path)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<h3 id="1&#x3001;install-flutter-engine-pod"><a href="#1&#x3001;install-flutter-engine-pod" class="headerlink" title="1&#x3001;install_flutter_engine_pod"></a>1&#x3001;install_flutter_engine_pod</h3><p><code>install_flutter_engine_pod</code> &#x751F;&#x6210;&#x7684; <code>Flutter.podspec</code> &#x662F;&#x5047;&#x7684;<code>podspec</code>&#xFF0C;&#x91CC;&#x9762;&#x6CA1;&#x5565;&#x5B9E;&#x8D28;&#x5185;&#x5BB9;&#xFF0C;&#x4EC5;&#x4EE3;&#x8868; <code>Flutter.xcframework</code>&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B; <code>Flutter</code> &#x63D2;&#x4EF6;&#x58F0;&#x660E;&#x9700;&#x8981;&#x4F9D;&#x8D56; <code>Flutter</code>&#xFF0C;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;Pod::Spec.new do |s|</span><br><span class="line">  s.name             = &apos;sqflite&apos;</span><br><span class="line">  ...</span><br><span class="line">  s.dependency &apos;Flutter&apos;</span><br><span class="line">  s.dependency &apos;FMDB&apos;, &apos;&gt;= 2.7.5&apos;</span><br><span class="line">  ...</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A; <code>Flutter.podspec</code>&#xFF0C;&#x90A3;&#x4E48;&#x6267;&#x884C; <code>pod install</code> &#x5C31;&#x4F1A;&#x4ECE; <code>CocoaPods trunk</code> &#x4E0B;&#x8F7D; <code>Flutter</code> &#x4E86;&#x3002;</p>
<h3 id="2&#x3001;install-flutter-application-pod"><a href="#2&#x3001;install-flutter-application-pod" class="headerlink" title="2&#x3001;install_flutter_application_pod"></a>2&#x3001;install_flutter_application_pod</h3><p><code>install_flutter_application_pod</code> &#x4F1A;&#x53BB;&#x7F16;&#x8BD1; <code>Flutter.xcframework</code> &#x548C; <code>App.xcframework</code>&#xFF0C;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x5E76;&#x96C6;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x5185;&#x3002;&#x4E0D;&#x8FC7;&#x8FD9;&#x4E24;&#x73A9;&#x610F;&#x6211;&#x4EEC;&#x7528; <code>Shorebird Release</code> &#x53BB;&#x751F;&#x6210;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x6211;&#x4EEC;&#x7528;&#x4E0D;&#x4E0A;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;&#x4E0A;&#x8FF0;&#x7684; <code>Flutter.podspec</code> &#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x4FEE;&#x6539;&#x5B83;&#x5185;&#x90E8;&#x7684;&#x4F9D;&#x8D56;&#x58F0;&#x660E;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x901A;&#x8FC7; <code>Cocoapods</code> &#x7684;&#x65B9;&#x5F0F;&#x6765;&#x96C6;&#x6210; <code>Flutter.xcframework</code> &#x548C; <code>App.xcframework</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">diff&#x590D;&#x5236;&#x4EE3;&#x7801;Pod::Spec.new do |s|</span><br><span class="line">s.name             = &apos;Flutter&apos;</span><br><span class="line">s.version          = &apos;1.0.0&apos;</span><br><span class="line">s.summary          = &apos;A UI toolkit for beautiful and fast apps.&apos;</span><br><span class="line">s.homepage         = &apos;https://flutter.dev&apos;</span><br><span class="line">s.license          = { :type =&gt; &apos;BSD&apos; }</span><br><span class="line">s.author           = { &apos;Flutter Dev Team&apos; =&gt; &apos;flutter-dev@googlegroups.com&apos; }</span><br><span class="line">s.source           = { :git =&gt; &apos;https://github.com/flutter/engine&apos;, :tag =&gt; s.version.to_s }</span><br><span class="line">s.ios.deployment_target = &apos;11.0&apos;</span><br><span class="line"># Framework linking is handled by Flutter tooling, not CocoaPods.</span><br><span class="line"># Add a placeholder to satisfy `s.dependency &apos;Flutter&apos;` plugin podspecs.</span><br><span class="line">#</span><br><span class="line"># &#x4EE5;&#x4E0A;&#x5230;&#x8FD9;&#x53E5;&#x90FD;&#x662F;&#x539F;&#x6765;&#x7684;&#xFF0C;&#x5C06;&#x8FD9;&#x53E5;&#x6CE8;&#x91CA;&#x6389;</span><br><span class="line">+ # s.vendored_frameworks = &apos;path/to/nothing&apos;</span><br><span class="line"># &#x65B0;&#x589E;&#x4E0B;&#x9762;&#x8FD9;&#x53E5;&#xFF0C;&#x58F0;&#x660E;&#x4F9D;&#x8D56;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x4E0B;&#x7684; Flutter.xcframework &#x548C; App.xcframework</span><br><span class="line">+ s.vendored_frameworks = &apos;Flutter.xcframework&apos;, &apos;App.xcframework&apos;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>&#x751F;&#x6210;&#x7684;&#x6240;&#x6709; <code>xcframework</code> &#x6240;&#x5728;&#x8DEF;&#x5F84;&#x4E3A;: <code>xxx/flutter_module/build/ios/framework/Release</code>&#xFF0C; &#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684; <code>Flutter.podspec</code> &#x4E2D;&#x7684;&#x4F9D;&#x8D56;&#x662F;&#x76F8;&#x5BF9;&#x8DEF;&#x5F84;&#xFF0C;&#x6240;&#x4EE5;&#x8BE5; <code>podspec</code> &#x4E5F;&#x662F;&#x8DDF; <code>xcframework</code> &#x653E;&#x5230;&#x4E00;&#x8D77;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x4E60;&#x60EF;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#x3002;</p>
<h3 id="3&#x3001;install-flutter-plugin-pods"><a href="#3&#x3001;install-flutter-plugin-pods" class="headerlink" title="3&#x3001;install_flutter_plugin_pods"></a>3&#x3001;install_flutter_plugin_pods</h3><p><code>install_flutter_plugin_pods</code> &#x4F1A;&#x5C06; <code>Flutter</code> &#x63D2;&#x4EF6;&#x4F9D;&#x8D56;&#x7684;&#x539F;&#x751F;&#x5E93;&#x96C6;&#x6210;&#x5230;&#x6211;&#x4EEC;&#x7684;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#xFF0C;&#x8FD9;&#x6B63;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x7684;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x5982;&#x679C;&#x4F60;&#x76F4;&#x63A5;&#x5C06; <code>Podfile</code> &#x4E2D;&#x7684; <code>install_flutter_application_pod</code> &#x7ED9;&#x66FF;&#x6362;&#x6210; <code>install_flutter_plugin_pods</code> &#xFF0C;&#x6267;&#x884C; <code>pod install</code> &#x65F6;&#x662F;&#x4F1A;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;pod install</span><br><span class="line"></span><br><span class="line">[!] Invalid `Podfile` file: undefined method `flutter_relative_path_from_podfile&apos; for #&lt;Pod::Podfile:0x000000010e74c520 @defined_in_file=#&lt;Pathname:/Users/lxf/xxx/Podfile&gt;, @internal_hash={}, @root_target_definitions=[#&lt;Pod::Podfile::TargetDefinition label=Pods&gt;], @current_target_definition=#&lt;Pod::Podfile::TargetDefinition label=Pods&gt;&gt;</span><br><span class="line"></span><br><span class="line">  relative = flutter_relative_path_from_podfile(export_script_directory)</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x5C31;&#x662F;&#x627E;&#x4E0D;&#x5230; <code>flutter_relative_path_from_podfile</code> &#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x8BE5;&#x65B9;&#x6CD5;&#x5728;&#x5E76;&#x4E0D;&#x5728;&#x4F60;&#x7684; <code>Flutter</code> &#x6A21;&#x5757;&#x7684; <code>podhelper.rb</code> &#x4E2D;&#xFF0C;&#x800C;&#x662F;&#x5728; <code>packages/flutter_tools/bin/podhelper.rb</code>&#x3002;</p>
<p>&#x81F3;&#x4E8E;&#x4E3A;&#x4EC0;&#x4E48;&#x539F;&#x6765;&#x7684; <code>install_all_flutter_pods</code> &#x65B9;&#x6CD5;&#x4E0D;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x5728;&#x8BE5;&#x65B9;&#x6CD5;&#x5185;&#x5148;&#x5F15;&#x7528;&#x4E86; <code>flutter_tools/bin/podhelper.rb</code>&#x3002;</p>
<p>&#x5173;&#x952E;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;def install_all_flutter_pods(flutter_application_path = nil)</span><br><span class="line">  ...</span><br><span class="line">  # &#x5C31;&#x662F;&#x8FD9;&#x53E5;</span><br><span class="line">  require File.expand_path(File.join(&apos;packages&apos;, &apos;flutter_tools&apos;, &apos;bin&apos;, &apos;podhelper&apos;), flutter_root)</span><br><span class="line"></span><br><span class="line">  flutter_application_path ||= File.join(&apos;..&apos;, &apos;..&apos;)</span><br><span class="line">  install_flutter_engine_pod(flutter_application_path)</span><br><span class="line">  install_flutter_plugin_pods(flutter_application_path)</span><br><span class="line">  install_flutter_application_pod(flutter_application_path)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5982;&#x6CD5;&#x70AE;&#x5236;&#xFF0C;&#x5728; <code>install_flutter_plugin_pods</code> &#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x5165; <code>require</code> &#x8FD9;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x9519;&#x8BEF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">diff&#x590D;&#x5236;&#x4EE3;&#x7801;def install_flutter_plugin_pods(flutter_application_path)</span><br><span class="line">+  require File.expand_path(File.join(&apos;packages&apos;, &apos;flutter_tools&apos;, &apos;bin&apos;, &apos;podhelper&apos;), flutter_root)</span><br><span class="line">  flutter_application_path ||= File.join(&apos;..&apos;, &apos;..&apos;)</span><br><span class="line">  ...</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>&#x8001;&#x662F;&#x8FD9;&#x4E48;&#x6539;&#x4E5F;&#x4E0D;&#x662F;&#x4E2A;&#x529E;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x63D0;&#x4E86;&#x4E2A; <code>PR</code>: <a href="/external_links/6521a706e7dfb9cea75777d314203acb.html" target="blank" rel="noopener">github.com/flutter/flu&#x2026;</a></p>
<blockquote>
<p>&#x8BE5; <code>PR</code> &#x73B0;&#x5DF2;&#x5408;&#x5E76;&#xFF0C;&#x5E94;&#x8BE5;&#x4F1A;&#x5728; <code>3.16.9</code> &#x53CA;&#x4E4B;&#x540E;&#x7684;&#x7248;&#x672C;&#x4E2D;&#x751F;&#x6548;&#x3002;</p>
</blockquote>
<p>&#x7ECF;&#x8FC7;&#x9A8C;&#x8BC1;&#xFF0C;&#x8BE5;&#x65B9;&#x6848;&#x662F;&#x53EF;&#x884C;&#x7684;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x5982;&#x4F55;&#x8C03;&#x6574;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x548C; <code>Shorebird</code> &#x5728; <code>iOS</code> &#x6DF7;&#x7F16;&#x4E0B;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5427;&#x3002;</p>
<h2 id="&#x56DB;&#x3001;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8C03;&#x6574;"><a href="#&#x56DB;&#x3001;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8C03;&#x6574;" class="headerlink" title="&#x56DB;&#x3001;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8C03;&#x6574;"></a>&#x56DB;&#x3001;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8C03;&#x6574;</h2><p>&#x5728; <code>Podfile</code> &#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5C06; <code>Flutter</code> &#x58F3;&#x5DE5;&#x7A0B;&#x7684;&#x6E90;&#x7801;&#x4F9D;&#x8D56;&#x65B9;&#x5F0F;&#x8C03;&#x6574;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x4F9D;&#x8D56;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">diff&#x590D;&#x5236;&#x4EE3;&#x7801;- install_all_flutter_pods(flutter_application_path)</span><br><span class="line">+ # &#x6E90;&#x7801;&#x96C6;&#x6210;</span><br><span class="line">+ # install_all_flutter_pods(flutter_application_path)</span><br><span class="line"></span><br><span class="line">+ # &#x4E8C;&#x8FDB;&#x5236;&#x96C6;&#x6210;</span><br><span class="line">+ pod &apos;Flutter&apos;, path: &apos;xxx/flutter_modules/build/ios/framework/Release&apos;</span><br><span class="line">+ install_flutter_plugin_pods(flutter_application_path)</span><br></pre></td></tr></table></figure>

<ol>
<li>&#x58F0;&#x660E; <code>Flutter</code> &#x4F9D;&#x8D56;&#xFF0C;&#x7528;&#x4E8E;&#x96C6;&#x6210; <code>Flutter.xcframework</code> &#x548C; <code>App.xcframework</code>&#x3002;</li>
<li><code>Option A</code> &#x65B9;&#x5F0F;&#x6240;&#x9700;&#x8981;&#x7684;&#x4EE3;&#x7801;&#x7EDF;&#x7EDF;&#x4FDD;&#x7559;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5C06; <code>install_all_flutter_pods</code> &#x66FF;&#x6362;&#x4E3A; <code>install_flutter_plugin_pods</code>&#xFF0C;&#x7528;&#x4E8E;&#x96C6;&#x6210; <code>Flutter</code> &#x63D2;&#x4EF6;&#x6240;&#x4F9D;&#x8D56;&#x7684;&#x539F;&#x751F;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;</li>
</ol>
<h2 id="&#x4E94;&#x3001;&#x521B;&#x5EFA;-Shorebird-Release"><a href="#&#x4E94;&#x3001;&#x521B;&#x5EFA;-Shorebird-Release" class="headerlink" title="&#x4E94;&#x3001;&#x521B;&#x5EFA; Shorebird Release"></a>&#x4E94;&#x3001;&#x521B;&#x5EFA; Shorebird Release</h2><p>&#x6253;&#x53D1;&#x5E03;&#x5305;&#x7684;&#x65F6;&#x5019;&#x64CD;&#x4F5C;&#xFF0C;&#x5728; <code>Flutter</code> &#x5DE5;&#x7A0B;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;cd xx/xx/flutter_modules</span><br><span class="line"></span><br><span class="line"># 7.0.0+2: &#x7248;&#x672C;&#x53F7;+build&#x7248;&#x672C;&#x53F7;</span><br><span class="line">shorebird release ios-framework-alpha --release-version 7.0.0+2</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x8BE5;&#x547D;&#x4EE4;&#x5185;&#x90E8;&#x4F1A;&#x53BB;&#x6267;&#x884C; <code>flutter build ios-framework --no-debug --no-profile ...</code>&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x7684;&#x662F; <code>Shorebird</code> &#x9B54;&#x6539;&#x7684; <code>Flutter</code> &#x5F15;&#x64CE;&#xFF01;</p>
</blockquote>
<p>&#x7248;&#x672C;&#x53F7;&#x53EF;&#x4EE5;&#x5728;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#x8FDB;&#x884C;&#x67E5;&#x770B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/68e6962a1bd370948cdfbb1cb94f554cc7bdc17f3efacc8b4051ca58ef8a8000" alt></p>
<p><code>ShoreBird</code> &#x7684;&#x5185;&#x90E8;&#x903B;&#x8F91;&#x4F1A;&#x53BB;&#x4EE5;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x53F7;&#x7EC4;&#x5408;&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5B58;&#x5728;&#x76F8;&#x5E94;&#x7248;&#x672C;&#x7684;&#x76F8;&#x5173;&#x8865;&#x4E01;&#xFF01;</p>
<p>&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5728; <code>Shorebird</code> &#x63A7;&#x5236;&#x53F0;&#x4E0A;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x9879;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a53937a76d675b05b6e7b1c2aa69de894abe7f257f55df75e854e3b5e07bfd90" alt></p>
<p>&#x5728;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x524D;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x4E0D;&#x5B58;&#x5728; <code>7.0.0+2</code> &#x7684; <code>Release</code>&#xFF0C;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#xFF0C;&#x8BF7;&#x5148;&#x5220;&#x9664;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/840333ac0f12bc788ee4cd33a321c6c89e969253c98ff2ecf8982766ae7940f8" alt></p>
<h2 id="&#x516D;&#x3001;&#x521B;&#x5EFA;-Shorebird-Patch"><a href="#&#x516D;&#x3001;&#x521B;&#x5EFA;-Shorebird-Patch" class="headerlink" title="&#x516D;&#x3001;&#x521B;&#x5EFA; Shorebird Patch"></a>&#x516D;&#x3001;&#x521B;&#x5EFA; Shorebird Patch</h2><p>&#x7D27;&#x6025;&#x4FEE;&#x590D;&#x7EBF;&#x4E0A;&#x5305;&#x7684;bug&#x65F6;&#x64CD;&#x4F5C;&#xFF0C;&#x5728; <code>Flutter</code> &#x5DE5;&#x7A0B;&#x76EE;&#x5F55;&#x4E0B;&#x6267;&#x884C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;shorebird patch ios-framework-alpha --release-version 7.0.0+2</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#xFF1A;&#x7248;&#x672C;&#x53F7;&#x4E0E;&#x4E0A;&#x8FF0;&#x7684; <code>release</code> &#x547D;&#x4EE4;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x8981;&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#xFF01;</p>
<p>&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x5728; <code>Shorebird</code> &#x63A7;&#x5236;&#x53F0;&#x4E0A;&#x70B9;&#x51FB;&#x5BF9;&#x5E94;&#x7684; <code>Release</code> &#x9879;&#xFF0C;&#x8FDB;&#x53BB;&#x540E;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x8865;&#x4E01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ae216d7852e0a02f00285b639e8240c7aae5747b8a76aa5b88134148bbddd0b1" alt></p>
<p>&#x770B;&#x770B;&#x8FD9;&#x4E2A;&#x8865;&#x4E01;&#x5927;&#x5C0F;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x770B;&#x5B89;&#x5353;&#x7684;&#x8865;&#x4E01;&#x5927;&#x5C0F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/74c0e8766a0d50d6542040f119b15585970585e13470f283a992b3c5fac1b6af" alt></p>
<blockquote>
<p>&#x4E00;&#x6837;&#x7684;&#x4FEE;&#x6539;&#xFF0C;&#x5B89;&#x5353;&#x7684;&#x8865;&#x4E01;&#x5927;&#x5C0F;&#x4E0D;&#x5230; <code>2 MB</code>&#xFF0C;<code>iOS</code> &#x7684;&#x8865;&#x4E01;&#x5927;&#x5C0F;&#x9AD8;&#x8FBE; <code>54.83 MB</code> &#x1F602;</p>
</blockquote>
<h2 id="&#x4E03;&#x3001;&#x70ED;&#x66F4;&#x65B0;&#x9A8C;&#x8BC1;"><a href="#&#x4E03;&#x3001;&#x70ED;&#x66F4;&#x65B0;&#x9A8C;&#x8BC1;" class="headerlink" title="&#x4E03;&#x3001;&#x70ED;&#x66F4;&#x65B0;&#x9A8C;&#x8BC1;"></a>&#x4E03;&#x3001;&#x70ED;&#x66F4;&#x65B0;&#x9A8C;&#x8BC1;</h2><blockquote>
<p>&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E0A;&#x5C31;&#x53EA;&#x662F;&#x8BF4;&#x91CD;&#x542F; <code>App</code> &#x67E5;&#x770B;&#x8865;&#x4E01;&#x662F;&#x5426;&#x751F;&#x6548;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x8BF4;&#x660E;&#x5931;&#x8D25;&#x4E86;&#x8BE5;&#x5982;&#x679C;&#x6392;&#x67E5;&#x95EE;&#x9898;~</p>
</blockquote>
<p>1&#x3001;&#x5728;&#x6267;&#x884C;&#x5B8C; <code>shorebird release</code> &#x547D;&#x4EE4;&#x5E76;&#x5B8C;&#x6210;&#x4E0A;&#x8FF0;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x7684;&#x8C03;&#x6574;&#x540E;&#xFF0C;&#x5C06;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x7684;&#x7F16;&#x8BD1;&#x6A21;&#x5F0F;&#x8C03;&#x6574;&#x4E3A; <code>Release</code> &#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#x3002;</p>
<p>&#x6B64;&#x65F6;&#x4F1A;&#x4F9D;&#x8D56;&#x7684; <code>flutter_modules/build/ios/framework/Release</code> &#x4E0B;&#x7684; <code>xcframework</code>&#xFF0C;&#x5907;&#x4EFD;&#x4E3A; <code>Release_release</code></p>
<p>2&#x3001;&#x5173;&#x95ED; <code>App</code>&#xFF0C;&#x6253; <code>patch</code>&#xFF0C;&#x6CE8;&#x610F;&#xFF0C;&#x6B64;&#x65F6; <code>flutter_modules/build/ios/framework/Release</code> &#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x88AB;&#x6E05;&#x7A7A;&#x5E76;&#x91CD;&#x65B0;&#x521B;&#x5EFA;&#x3002;</p>
<p>3&#x3001;&#x6253; <code>patch</code> &#x540E;&#xFF0C;&#x5C06; <code>Release_release</code> &#x6539;&#x56DE; <code>Release</code> &#x7528; <code>Xcode</code> &#x91CD;&#x65B0;&#x8FD0;&#x884C; <code>App</code>&#xFF0C;&#x4E00;&#x5207;&#x6B63;&#x5E38;&#x7684;&#x8BDD;&#x5373;&#x53EF;&#x770B;&#x5230;&#x53D8;&#x5316;&#x3002;</p>
<p>&#x65E0;&#x8BBA;&#x6210;&#x529F;&#x8FD8;&#x662F;&#x5931;&#x8D25;&#xFF0C;<code>Xcode</code> &#x7684;&#x63A7;&#x5236;&#x53F0;&#x90FD;&#x4F1A;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x8F93;&#x51FA;</p>
<p>&#x6210;&#x529F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;2024-01-03 18:37:55.838328+0800 xxx[623:70498] [VERBOSE0:shorebird.cc(151)] Shorebird updater: no active patch.</span><br><span class="line">2024-01-03 18:37:55.838424+0800 xxx[623:70498] [VERBOSE0:shorebird.cc(155)] Starting Shorebird update</span><br><span class="line">[00:00:00.002] (1701cb000) INFO   Sending patch check request: PatchCheckRequest { app_id: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;, channel: &quot;stable&quot;, release_version: &quot;7.0.0+2&quot;, patch_number: None, platform: &quot;ios&quot;, arch: &quot;aarch64&quot; }</span><br><span class="line"></span><br><span class="line">[00:00:30.871] (1701cb000) INFO  Patch 1 successfully installed.</span><br><span class="line">[00:00:30.871] (1701cb000) INFO   Update result: Update installed</span><br></pre></td></tr></table></figure>

<p>&#x5931;&#x8D25;</p>
<blockquote>
<p>&#x53EF;&#x4EE5;&#x641C;&#x7D22;&#x5173;&#x952E;&#x5B57; <code>PatchCheckRequest</code> &#x5B9A;&#x4F4D;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;2024-01-03 18:37:55.838328+0800 xxx[623:70498] [VERBOSE0:shorebird.cc(151)] Shorebird updater: no active patch.</span><br><span class="line">2024-01-03 18:37:55.838424+0800 xxx[623:70498] [VERBOSE0:shorebird.cc(155)] Starting Shorebird update</span><br><span class="line">[00:00:00.002] (1701cb000) INFO   Sending patch check request: PatchCheckRequest { app_id: &quot;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&quot;, channel: &quot;stable&quot;, release_version: &quot;7.0.0+2&quot;, patch_number: None, platform: &quot;ios&quot;, arch: &quot;aarch64&quot; }</span><br><span class="line"></span><br><span class="line">[00:00:30.871] (1701cb000) ERROR  Update failed: error decoding response body: operation timed out</span><br><span class="line">Caused by:</span><br><span class="line">    operation timed out</span><br><span class="line"></span><br><span class="line">[00:00:30.871] (1701cb000) INFO   Update thread finished with status: Update had error</span><br></pre></td></tr></table></figure>

<p>&#x8BE5;&#x5931;&#x8D25;&#x662F;&#x56E0;&#x4E3A;&#x56FD;&#x884C;&#x673A;&#x7279;&#x6709;&#x7684;&#x7F51;&#x7EDC;&#x6743;&#x9650;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x5F00;&#x542F; <code>Shorebird</code> &#x7684;&#x81EA;&#x52A8;&#x68C0;&#x67E5;&#x66F4;&#x65B0;&#x7684;&#x8BDD;&#xFF0C;&#x4F1A;&#x5728;&#x7F51;&#x7EDC;&#x6743;&#x9650;&#x88AB;&#x8D4B;&#x4E88;&#x524D;&#x53BB;&#x8BF7;&#x6C42;&#xFF0C;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x5931;&#x8D25;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5173;&#x95ED;&#x81EA;&#x52A8;&#x68C0;&#x67E5;&#x66F4;&#x65B0;&#xFF0C;&#x4F7F;&#x7528; <a href="/external_links/4269d3d075a7179984097a187a338655.html" target="blank" rel="noopener">shorebird_code_push</a> &#x53BB;&#x5EF6;&#x8FDF;&#x68C0;&#x67E5;&#x3002;</p>
<h2 id="&#x516B;&#x3001;&#x811A;&#x672C;"><a href="#&#x516B;&#x3001;&#x811A;&#x672C;" class="headerlink" title="&#x516B;&#x3001;&#x811A;&#x672C;"></a>&#x516B;&#x3001;&#x811A;&#x672C;</h2><p>&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x7814;&#x53D1;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x6E90;&#x7801;&#x4F9D;&#x8D56;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x53EA;&#x4F1A;&#x5728;&#x6253;&#x6700;&#x7EC8;&#x6D4B;&#x8BD5;&#x5305;&#x65F6;&#x624D;&#x9700;&#x8981;&#x53BB;&#x505A;&#x4E0A;&#x8FF0;&#x7684;&#x8C03;&#x6574;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x7528;&#x6211;&#x6BD4;&#x8F83;&#x719F;&#x6089;&#x7684; <code>Python</code> &#x53BB;&#x5236;&#x4F5C;&#x4E86;&#x7B80;&#x6613;&#x7684;&#x811A;&#x672C;&#xFF0C;&#x5E76;&#x7ED3;&#x5408; <code>Jenkins</code> &#x6765;&#x8F85;&#x52A9;&#x5B8C;&#x6210;&#x8FD9;&#x79CD;&#x4E07;&#x5E74;&#x4E0D;&#x53D8;&#x7684;&#x65E0;&#x804A;&#x6B65;&#x9AA4;</p>
<p>&#x811A;&#x672C;&#x5DF2;&#x4E0A;&#x4F20;&#x81F3; <code>Github</code>: <a href="/external_links/b9c491642d42b45cd09e8d0ae195db15.html" target="blank" rel="noopener">github.com/LinXunFeng/&#x2026;</a></p>
<p>&#x770B;&#x5B98;&#x53EF;&#x81EA;&#x53D6;&#x4FEE;&#x6539;~</p>
<h3 id="switch-flutter-integrate-py"><a href="#switch-flutter-integrate-py" class="headerlink" title="switch_flutter_integrate.py"></a>switch_flutter_integrate.py</h3><blockquote>
<p>&#x5207;&#x6362; <code>Flutter</code> &#x9879;&#x76EE;&#x7684;&#x96C6;&#x6210;&#x65B9;&#x5F0F;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x4E8C;&#x8FDB;&#x5236;&#x4F9D;&#x8D56;</span><br><span class="line">python switch_flutter_integrate.py -p &apos;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8DEF;&#x5F84;&apos; -m &apos;binary&apos; -f &apos;ios&apos;</span><br><span class="line"></span><br><span class="line"># &#x6E90;&#x7801;&#x4F9D;&#x8D56;</span><br><span class="line">python switch_flutter_integrate.py -p &apos;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8DEF;&#x5F84;&apos; -m &apos;source&apos; -f &apos;ios&apos;</span><br></pre></td></tr></table></figure>

<h3 id="shorebird-py"><a href="#shorebird-py" class="headerlink" title="shorebird.py"></a>shorebird.py</h3><blockquote>
<p>&#x81EA;&#x52A8;&#x83B7;&#x53D6;&#x7248;&#x672C;&#x53F7;&#xFF0C;&#x5E76;&#x6267;&#x884C; <code>Shorebird</code> &#x76F8;&#x5173;&#x547D;&#x4EE4;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;# release</span><br><span class="line">python shorebird.py -p &apos;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8DEF;&#x5F84;&apos; -s &apos;Flutter&#x5DE5;&#x7A0B;&#x8DEF;&#x5F84;&apos; -m release -f ios</span><br><span class="line"></span><br><span class="line"># patch</span><br><span class="line">python shorebird.py -p &apos;&#x539F;&#x751F;&#x5DE5;&#x7A0B;&#x8DEF;&#x5F84;&apos; -s &apos;Flutter&#x5DE5;&#x7A0B;&#x8DEF;&#x5F84;&apos; -m patch -f ios</span><br></pre></td></tr></table></figure>

<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;<code>xcodeproj</code> &#x548C; <code>target</code> &#x7684;&#x540D;&#x5B57;&#x88AB;&#x6211;&#x56FA;&#x5B9A;&#x5199;&#x6210; <code>OCProject</code>&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x4E2D;&#x9AD8;&#x4EAE;&#x7684;&#x90A3;&#x4E24;&#x884C;&#xFF0C;&#x5927;&#x5BB6;&#x8BF7;&#x5148;&#x5C06;&#x5176;&#x4FEE;&#x6539;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x5DE5;&#x7A0B;&#x540D;&#x518D;&#x4F7F;&#x7528; <code>shorebird.py</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">diff&#x590D;&#x5236;&#x4EE3;&#x7801;def handle_ios():</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    &#x5904;&#x7406;iOS&#x9879;&#x76EE;</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # 1. &#x8BFB;&#x53D6;&#x4E3B;&#x7248;&#x672C;&#x53F7;</span><br><span class="line">    # &#x8BF7;&#x5C06; OCProject &#x4FEE;&#x6539;&#x4E3A;&#x4F60;&#x4EEC;&#x81EA;&#x5DF1;&#x7684;&#x5DE5;&#x7A0B;&#x540D;</span><br><span class="line">+    xcodeproj_path = os.path.join(project_path, &apos;OCProject.xcodeproj&apos;)</span><br><span class="line">    version = ReleaseVersionTool.fetch_project_version(</span><br><span class="line">        xcodeproj_path=xcodeproj_path,</span><br><span class="line">+        target_name=&apos;OCProject&apos;,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x6211;&#x6BD4;&#x8F83;&#x61D2;&#xFF0C;&#x5C31;&#x4E0D;&#x6539;&#x6210;&#x901A;&#x7528;&#x7684;&#x4E86; &#x1F60F;</p>
<h2 id="&#x4E5D;&#x3001;&#x6700;&#x540E;"><a href="#&#x4E5D;&#x3001;&#x6700;&#x540E;" class="headerlink" title="&#x4E5D;&#x3001;&#x6700;&#x540E;"></a>&#x4E5D;&#x3001;&#x6700;&#x540E;</h2><p>&#x867D;&#x7136; <code>iOS</code> &#x7684;&#x70ED;&#x66F4;&#x65B0;&#x80FD;&#x7528;&#xFF0C;&#x4F46;&#x4E5F;&#x4EC5;&#x4EC5;&#x53EA;&#x662F;&#x80FD;&#x7528;&#xFF0C;&#x5E94;&#x7528;&#x4E8E;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x8FD0;&#x884C;&#x8D77;&#x6765;&#x6CA1;&#x6709;&#x592A;&#x660E;&#x663E;&#x7684;&#x5361;&#x987F;&#x611F;&#x77E5;&#xFF0C;&#x4F46;&#x662F;&#x7A0D;&#x5FAE;&#x5927;&#x70B9;&#x5C31;&#x53EF;&#x4EE5;&#x611F;&#x77E5;&#x5230;&#x4E86;&#xFF0C;&#x5361;&#x5230;&#x6000;&#x7591;&#x4EBA;&#x751F;&#x90A3;&#x79CD;&#xFF0C;&#x76F8;&#x6BD4;&#x5B89;&#x5353;&#x7AEF;&#x7684;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x6027;&#x80FD;&#x635F;&#x8017;&#xFF0C;iOS&#x7AEF;&#x7684;&#x8FD8;&#x9700;&#x8981;&#x518D;&#x7B49;&#x7B49;&#xFF0C;&#x6BD5;&#x7ADF;&#x73B0;&#x5728; <code>iOS</code> &#x8FD8;&#x662F; <code>Alpha</code> &#x7248;&#x672C;&#xFF0C;&#x76F8;&#x4FE1;&#x4E0D;&#x4E45;&#x5C06;&#x6765; <code>Shorebird</code> &#x56E2;&#x961F;&#x4F1A;&#x89E3;&#x51B3;&#x8BE5;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x5173;&#x4E8E;&#x5B89;&#x5353;&#x548C; <code>iOS</code> &#x4E24;&#x7AEF;&#x4E4B;&#x95F4;&#x7684;&#x5B9E;&#x73B0;&#x533A;&#x522B;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A; <code>issue</code> &#x4E2D;&#x67E5;&#x770B; <a href="/external_links/bb05132cad7cb5750c80986b4a353c66.html" target="blank" rel="noopener">github.com/shorebirdte&#x2026;</a></p>
<p>&#x672C;&#x7BC7;&#x5230;&#x6B64;&#x7ED3;&#x675F;&#xFF0C;&#x611F;&#x8C22;&#x5927;&#x5BB6;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x6211;&#x4EEC;&#x4E0B;&#x6B21;&#x518D;&#x89C1;&#xFF01; &#x1F44B;</p>
<blockquote>
<p>&#x5982;&#x679C;&#x6587;&#x7AE0;&#x5BF9;&#x60A8;&#x6709;&#x6240;&#x5E2E;&#x52A9;, &#x8BF7;&#x4E0D;&#x541D;&#x70B9;&#x51FB;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#x6211;&#x7684;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;&#xFF1A;<a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">FSA&#x5168;&#x6808;&#x884C;&#x52A8;</a>, &#x8FD9;&#x5C06;&#x662F;&#x5BF9;&#x6211;&#x6700;&#x5927;&#x7684;&#x6FC0;&#x52B1;. &#x516C;&#x4F17;&#x53F7;&#x4E0D;&#x4EC5;&#x6709; <code>iOS</code> &#x6280;&#x672F;&#xFF0C;&#x8FD8;&#x6709; <code>Android</code>&#xFF0C;<code>Flutter</code>&#xFF0C;<code>Python</code> &#x7B49;&#x6587;&#x7AE0;, &#x53EF;&#x80FD;&#x6709;&#x4F60;&#x60F3;&#x8981;&#x4E86;&#x89E3;&#x7684;&#x6280;&#x80FD;&#x77E5;&#x8BC6;&#x70B9;&#x54E6;~</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/6f3665f7996e92815a1ce5a5aa822920.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7326268967352582153.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7326268967352582153.html" itemprop="url">Jetpack Compose -> 分包 & 自定义Com</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-21T14:21:55+08:00">
                2024-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p> &#x4E0A;&#x4E00;&#x7AE0;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x4E86; <a href="https://dev.newban.cn/7321410924106104858#heading-24">Compose &#x57FA;&#x7840;UI &#x548C; Modifier &#x5173;&#x952E;&#x5B57;</a>&#xFF0C;&#x672C;&#x7AE0;&#x4E3B;&#x8981;&#x8BB2;&#x89E3; Compose &#x5206;&#x5305;&#x4EE5;&#x53CA;&#x81EA;&#x5B9A;&#x4E49; Composable&#xFF1B;</p>
<h2 id="Compose-&#x5982;&#x4F55;&#x5206;&#x5305;"><a href="#Compose-&#x5982;&#x4F55;&#x5206;&#x5305;" class="headerlink" title="Compose &#x5982;&#x4F55;&#x5206;&#x5305;"></a>Compose &#x5982;&#x4F55;&#x5206;&#x5305;</h2><p>&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528; Button &#x63A7;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53D1;&#x73B0;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x7ED9;&#x6309;&#x94AE;&#x8BBE;&#x7F6E;&#x6587;&#x672C;&#x7684;&#x65F6;&#x5019;&#xFF0C;Button &#x51FD;&#x6570;&#x5E76;&#x6CA1;&#x6709;&#x76F4;&#x63A5;&#x63D0;&#x4F9B;&#x8BBE;&#x7F6E; text &#x7684;&#x53C2;&#x6570;&#xFF0C;&#x8981;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x53BB;&#x8C03;&#x7528; Text &#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Column {    </span><br><span class="line">    Button(onClick = {}) {        </span><br><span class="line">        Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;)    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x80FD;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5927;&#x5BB6;&#x5C31;&#x4F1A;&#x56F0;&#x60D1;&#x4E86;&#xFF0C;Compose &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x4E48;&#x641E;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53BB;&#x6E90;&#x7801;&#x4E2D;&#x4E00;&#x63A2;&#x7A76;&#x7ADF;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230; Button &#x51FD;&#x6570;&#x662F;&#x5728; androidx.compose.material3 &#x8FD9;&#x4E2A;&#x5305;&#x4E0B;&#x9762;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/729f018e6ada2bb9c8499ac62f3dffcac99d44a080c8c08b2fe5bdd4259bd4cc" alt></p>
<p>Button &#x6765;&#x81EA; compose.material3 &#x8FD9;&#x4E2A;&#x7EC4;&#x4E0B;&#x9762;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; Maven &#x5305;&#x7684; groupId &#x662F; androidx.compose.material3&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x5C31;&#x662F; build.gradle &#x4E2D;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/5f2584b592a7f6f692cc5624158992acd1cba95389f559c8781de455957e9537" alt></p>
<p>&#x5176;&#x5B9E;Compose &#x7531; <code>androidx</code> &#x4E2D;&#x7684; 7 &#x4E2A; Maven &#x7EC4; ID &#x6784;&#x6210;&#x3002;&#x6BCF;&#x4E2A;&#x7EC4;&#x90FD;&#x5305;&#x542B;&#x4E00;&#x5957;&#x7279;&#x5B9A;&#x7528;&#x9014;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x5404;&#x6709;&#x4E13;&#x5C5E;&#x7684;&#x7248;&#x672C;&#x8BF4;&#x660E;&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/f23353a9b7485595b5adc2a9595826a7f1ea56b6984df6b5eca51d37cf38ec82" alt></p>
<p>Compose &#x5176;&#x5B9E;&#x4E00;&#x5171;&#x662F;&#x5206;&#x4E86;6&#x5C42;&#xFF0C;material &#x548C; material3 &#x662F;&#x4E00;&#x4E2A;&#xFF0C;&#x53EA;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x652F;&#xFF1B;&#x6BCF;&#x4E2A;&#x7EC4;&#x4E0B;&#x9762;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5206;&#x5305;&#xFF0C;&#x6211;&#x4EEC;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x770B;&#x5230; ui &#x4E0B;&#x9762;&#x5C31;&#x6709;&#x4E0D;&#x540C;&#x7684;ui&#x3001;ui-tooling-preview&#x3001;ui-graphics &#x7B49;&#x7B49;&#xFF0C;Android &#x56E2;&#x961F;&#x8FD9;&#x4E48;&#x5206;&#x5305;&#xFF0C;&#x5176;&#x5B9E;&#x662F;&#x9488;&#x5BF9; View &#x7CFB;&#x7EDF;&#x7684;&#x4E00;&#x4E2A;&#x4F18;&#x5316;&#xFF1B;</p>
<p>View &#x7CFB;&#x7EDF;&#x662F;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x5206;&#x5C42;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x5BFC;&#x81F4;&#x540E;&#x671F;&#x8D8A;&#x6765;&#x8D8A;&#x4E25;&#x91CD;&#x7684;&#x6269;&#x5C55;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x4F8B;&#x5982; View &#x7CFB;&#x7EDF;&#x4E2D;&#x7684; ListView&#xFF0C;ListView &#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x5BF9; View &#x7684;&#x56DE;&#x6536;&#x590D;&#x7528;&#x673A;&#x5236;&#xFF0C;&#x8FD9;&#x4E2A;&#x673A;&#x5236; RecyclerView &#x662F;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x590D;&#x7528;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5B83;&#x4EEC;&#x4E24;&#x4E2A;&#x5404;&#x81EA;&#x7EF4;&#x62A4;&#x7740;&#x4E00;&#x5957;&#x590D;&#x7528;&#x673A;&#x5236;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5206;&#x5C42;&#x4E0D;&#x660E;&#x786E;&#x5BFC;&#x81F4;&#x7684;&#xFF1B;</p>
<p>&#x6240;&#x4EE5; Compose &#x5728;&#x8BBE;&#x8BA1;&#x4E4B;&#x521D;&#x5C31;&#x660E;&#x786E;&#x4E86;&#x5206;&#x5C42;&#x6982;&#x5FF5;&#xFF0C;&#x5206;&#x5C42;&#x4E4B;&#x540E;&#x7684;&#x5404;&#x81EA;&#x6269;&#x5C55;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x53D7;&#x5230;&#x9650;&#x5236;&#xFF1B;</p>
<p>compose.compiler &#x4E25;&#x683C;&#x6765;&#x8BF4;&#xFF0C;&#x5B83;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x5C5E;&#x4E8E;&#x8FD9;7&#x5C42;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x7684;&#x5E76;&#x4E0D;&#x662F;&#x5E93;&#x4F9D;&#x8D56;&#xFF0C;&#x5B83;&#x4EE3;&#x8868;&#x7684;&#x662F; kotlin &#x7F16;&#x8BD1;&#x63D2;&#x4EF6;&#xFF0C;&#x8F6C;&#x5316; @Composable functions &#x5E76;&#x542F;&#x7528;&#x4F18;&#x5316;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x662F;&#x8D1F;&#x8D23;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x4F9D;&#x8D56;&#x91CC;&#x9762;&#x4E5F;&#x5B8C;&#x5168;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x914D;&#x7F6E;&#x5B83;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728; Compose &#x7684;&#x4E13;&#x7528;&#x914D;&#x7F6E;&#x5730;&#x65B9;&#x53BB;&#x5199;&#x4E0A;&#x4F60;&#x8981;&#x7684;&#x7F16;&#x8BD1;&#x63D2;&#x4EF6;&#x7248;&#x672C;&#x5C31;&#x884C;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x91CC;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/cc9327f91d7453e0ddd6a0a340c6f8226536e5c36311068e08fea2aed6116b99" alt></p>
<p>Compose &#x5269;&#x4E0B;&#x7684; Group &#x90FD;&#x662F;&#x6211;&#x4EEC;&#x5F00;&#x53D1; Compose &#x7684;&#x65F6;&#x5019;&#x4F1A;&#x7528;&#x5230;&#x7684;&#xFF0C;&#x4E0D;&#x8FC7;&#x5B83;&#x4EEC;&#x6709;&#x4F9D;&#x6B21;&#x9012;&#x8FDB;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF1B;</p>
<p>&#x6700;&#x4E0B;&#x5C42;&#x662F; compose.runtime &#x5B83;&#x5305;&#x542B;&#x4E86; Compose &#x7F16;&#x7A0B;&#x6A21;&#x578B;&#x548C;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#x7684;&#x57FA;&#x672C;&#x6784;&#x4EF6;&#x5757;&#xFF0C;&#x4EE5;&#x53CA; Compose &#x7F16;&#x8BD1;&#x5668;&#x63D2;&#x4EF6;&#x7684;&#x76EE;&#x6807;&#x6838;&#x5FC3;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x662F;&#x6700;&#x5E95;&#x5C42;&#x7684;&#x6982;&#x5FF5;&#x6A21;&#x578B;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6765;&#x4FDD;&#x5B58;&#x72B6;&#x6001;&#x7684; State &#x5C31;&#x5728; compose.runtime&#xFF0C;&#x8FD8;&#x6709; mutableStateOf&#x3001;remember</p>
<p>&#x5F80;&#x4E0A;&#x4E00;&#x5C42;&#x662F; compose.ui &#x5B83;&#x662F;&#x7528;&#x6765;&#x63D0;&#x4F9B; ui &#x6700;&#x57FA;&#x7840;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#x7ED8;&#x5236;&#x3001;&#x6D4B;&#x91CF;&#x3001;&#x5E03;&#x5C40;&#x3001;&#x89E6;&#x6478;&#x53CD;&#x9988;&#x7B49;&#x6700;&#x5E95;&#x5C42;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7684;&#x6240;&#x6709;&#x63A7;&#x4EF6;&#x51FD;&#x6570;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x8C03;&#x7528;&#x5230;&#x4E00;&#x4E2A;&#x53EB; Layout &#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x5C31;&#x5728; ui &#x8FD9;&#x5C42;&#xFF1B;</p>
<p>&#x518D;&#x5F80;&#x4E0A;&#x4E00;&#x5C42;&#x662F; compose.animation&#xFF0C;&#x5B83;&#x662F;&#x7528;&#x6765;&#x6784;&#x5EFA;&#x52A8;&#x753B;&#x7684;&#xFF1B;</p>
<p>&#x5728;&#x5F80;&#x4E0A;&#x4E00;&#x5C42;&#x662F; compose.foundation&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x7684;&#x662F;&#x4E00;&#x5957;&#x76F8;&#x5BF9;&#x5B8C;&#x6574;&#x53EF;&#x9760;&#x7684; UI &#x4F53;&#x7CFB;&#xFF0C;&#x4F8B;&#x5982; Colum&#x3001;Row&#x3001;Image &#x7B49;&#x90FD;&#x5728;&#x8FD9;&#x4E00;&#x5C42;&#xFF1B;</p>
<p>&#x518D;&#x5F80;&#x4E0A;&#x4E00;&#x5C42;&#x5C31;&#x662F; comose.material/material3 &#x4E86;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5C01;&#x88C5;&#x4E86; &#x4E00;&#x5806; material design &#x98CE;&#x683C;&#x63A7;&#x4EF6;&#x7684;&#x5305;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x4F7F;&#x7528; MD &#x98CE;&#x683C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; foundation &#x5C42;&#x81EA;&#x5DF1;&#x7EC4;&#x88C5;&#x4E00;&#x5957;&#x98CE;&#x683C;&#x51FA;&#x6765;&#xFF1B;</p>
<p>&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x7EC4;&#x4E0B;&#x9762;&#x7684;&#x591A;&#x4E2A;&#x5305;&#x5E94;&#x8BE5;&#x5982;&#x4F55;&#x5F15;&#x7528;&#xFF1F;&#x4F8B;&#x5982; compose.ui &#x4E0B;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;implementation(&quot;androidx.compose.ui:ui&quot;)</span><br><span class="line">implementation(&quot;androidx.compose.ui:ui-graphics&quot;)</span><br><span class="line">implementation(&quot;androidx.compose.ui:ui-tooling-preview&quot;)</span><br><span class="line">debugImplementation(&quot;androidx.compose.ui:ui-tooling&quot;)</span><br><span class="line">debugImplementation(&quot;androidx.compose.ui:ui-test-manifest&quot;)</span><br><span class="line">androidTestImplementation(&quot;androidx.compose.ui:ui-test-junit4&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x5F15;&#x5165;&#x548C;&#x7EC4;&#x540D;&#x76F8;&#x540C;&#x7684;&#x5305;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x822C;&#x8FD9;&#x4E2A;&#x5305;&#x5C31;&#x5305;&#x542B;&#x4E86;&#x8FD9;&#x4E2A;&#x7EC4;&#x4E0B;&#x5176;&#x4ED6;&#x5305;&#x7684;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#xFF0C;&#x9664;&#x4E86;&#x6D4B;&#x8BD5;&#x7EC4;&#x7684;&#x8FD9;&#x79CD;&#xFF0C;&#x4F8B;&#x5982; compose.ui:ui &#x4E0B;&#x4E0D;&#x4F1A;&#x5305;&#x542B; compose.ui:ui-test-xxx &#x548C; compose.ui:ui-tooling &#x56E0;&#x4E3A; test  &#x548C; &#x5DE5;&#x5177;&#x7C7B;&#x7684;&#x4E00;&#x822C;&#x90FD;&#x4E0D;&#x4F1A;&#x7F16;&#x8BD1;&#x8FDB;&#x6211;&#x4EEC;&#x7684; apk &#x4E2D;&#xFF1B;</p>
<p>&#x4F8B;&#x5982; @Preview &#x5C31;&#x5C5E;&#x4E8E; ui-tooling &#x4E0B;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;@Preview</span><br><span class="line">@Composable</span><br><span class="line">fun preview() {    </span><br><span class="line">    Column {        </span><br><span class="line">        Button(onClick = {}) {            </span><br><span class="line">            Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;)        </span><br><span class="line">        }        </span><br><span class="line">        OutlinedButton(onClick = { /*TODO*/ }) {            </span><br><span class="line">            Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;)        </span><br><span class="line">        }        </span><br><span class="line">        TextButton(onClick = { /*TODO*/ }) {            </span><br><span class="line">            Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;)        </span><br><span class="line">        }    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD8;&#x6709; material3 &#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E9B;&#x77E2;&#x91CF;&#x56FE;&#x7EC4;&#x4EF6;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;implementation(&quot;androidx.compose.material3:material3-icon-extends&quot;)</span><br><span class="line">implementation(&quot;androidx.compose.material3:material3-icon-core&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x662F;&#x9700;&#x8981;&#x5355;&#x72EC;&#x4F9D;&#x8D56;&#x7684;&#xFF1B;</p>
<p>compose.ui:ui &#x4E00;&#x822C;&#x5305;&#x542B;&#x4E86; ui &#x4E0B;&#x7684;&#x6240;&#x6709;&#xFF0C; compose.material3:material3 &#x4E00;&#x822C;&#x5305;&#x542B;&#x4E86; material &#x4E0B;&#x7684;&#x6240;&#x6709;&#xFF1B;</p>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;Composable"><a href="#&#x81EA;&#x5B9A;&#x4E49;Composable" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;Composable"></a>&#x81EA;&#x5B9A;&#x4E49;Composable</h2><p>&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5199; Composable&#xFF0C;&#x800C; Composable &#x662F;&#x4E00;&#x79CD;&#x7B80;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5B83;&#x6307;&#x7684;&#x662F;&#x5E26;&#x6709;&#x8FD9;&#x4E2A; Composable &#x6CE8;&#x89E3;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x6CE8;&#x89E3;&#x5230;&#x5E95;&#x662F;&#x505A;&#x4EC0;&#x4E48;&#x7684;&#x5462;&#xFF1F;&#x6211;&#x4EEC;&#x6765;&#x4E00;&#x63A2;&#x7A76;&#x7ADF;</p>
<p>&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528;&#x7684; Text &#x51FD;&#x6570;&#x3001;Image &#x51FD;&#x6570;&#x7B49;&#x5176;&#x5B9E;&#x90FD;&#x5E26;&#x6709; Composable &#x6CE8;&#x89E3;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x5E76;&#x4E0D;&#x662F;&#x539F;&#x5C01;&#x4E0D;&#x52A8;&#x7684;&#x88AB;&#x8C03;&#x7528;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x5728;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x52A8;&#x4E86;&#x624B;&#x811A;&#xFF0C;&#x7ED9;&#x5B83;&#x4EEC;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E9B;&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8C03;&#x7528;&#x7684;&#x5176;&#x5B9E;&#x662F;&#x90A3;&#x4E9B;&#x88AB;&#x6539;&#x8FC7;&#x7684;&#x53C2;&#x6570;&#x66F4;&#x591A;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x6BD4;&#x5982;&#x8BF4;&#x5B83;&#x4EEC;&#x88AB;&#x52A0;&#x5165;&#x7684;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F; Composer &#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x603B;&#x4E4B;&#x8FD9;&#x4E9B; Composable &#x51FD;&#x6570;&#x5728;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x88AB; Compose &#x7684;&#x7F16;&#x8BD1;&#x5668;&#x63D2;&#x4EF6;(Compiler Plugin)&#x4FEE;&#x6539;&#xFF0C;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x662F;&#x8C03;&#x7528;&#x7684;&#x8FD9;&#x4E9B;&#x88AB;&#x4FEE;&#x6539;&#x8FC7;&#x7684;&#x51FD;&#x6570;&#xFF1B;</p>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4FEE;&#x6539;&#x5B83;&#x4EEC;&#x5462;&#xFF1F;</p>
<p>&#x6700;&#x91CD;&#x8981;&#x7684;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#xFF1A;&#x8981;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x5199;&#x51FA;&#x6765;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#x6765;&#x8BF4;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#x80FD;&#x7528;&#x5230;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x7F16;&#x8BD1;&#x7684;&#x65F6;&#x5019;&#x6DFB;&#x52A0;&#xFF0C;&#x5373;&#x65B9;&#x4FBF;&#x4E86;&#x5F00;&#x53D1;&#x8005;&#xFF0C;&#x53C8;&#x4E0D;&#x5F71;&#x54CD;&#x7A0B;&#x5E8F;&#x7684;&#x8FD0;&#x884C;&#xFF1B;</p>
<p>&#x8FD9;&#x5176;&#x5B9E;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x9762;&#x5411;&#x5207;&#x9762;(AOP)&#x7F16;&#x7A0B;&#x7684;&#x601D;&#x60F3;&#xFF1B;</p>
<p>&#x90A3;&#x4E48;&#x7F16;&#x8BD1;&#x5668;&#x63D2;&#x4EF6;&#x53C8;&#x662F;&#x600E;&#x4E48;&#x8BA4;&#x51FA;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x7684;&#x5462;&#xFF1F;&#x5B83;&#x600E;&#x4E48;&#x76F4;&#x5230;&#x54EA;&#x4E9B;&#x5E94;&#x8BE5;&#x88AB;&#x4FEE;&#x6539;&#x5462;&#xFF1F;</p>
<p>&#x9760;&#x7684;&#x5C31;&#x662F; @Composable &#x6CE8;&#x89E3;&#xFF1B;&#x53EA;&#x6709;&#x88AB;&#x52A0;&#x4E86;&#x8FD9;&#x4E2A;&#x6CE8;&#x89E3;&#x7684;&#x624D;&#x4F1A;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF0C;&#x8D77;&#x5230;&#x4E86;&#x8BC6;&#x522B;&#x7B26;&#x7684;&#x4F5C;&#x7528;&#xFF1B;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5C0F;&#x4F8B;&#x5B50;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/226db0af6d97cf27640f20ed0117425f3ba05356501aaee6941c88132999f041" alt></p>
<p>&#x5982;&#x679C; ui &#x51FD;&#x6570;&#x6CA1;&#x6709;&#x6DFB;&#x52A0; @Composable &#x6CE8;&#x89E3;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x76F4;&#x63A5;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x8C03;&#x7528;&#x4E86;&#x88AB; @Composable &#x6CE8;&#x89E3;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#xFF1A;&#x6240;&#x6709;&#x8C03;&#x7528;&#x4E86;&#x88AB; @Composable &#x6CE8;&#x89E3;&#x7684;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x5FC5;&#x987B;&#x6DFB;&#x52A0;&#x4E0A; @Composable &#x6CE8;&#x89E3;&#xFF1B;&#x8BF4;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4EBA;&#x6709;&#x7591;&#x95EE;&#x4E86;&#xFF0C;setContent &#x51FD;&#x6570;&#x6DFB;&#x52A0;&#x4E86; @Composable &#x6CE8;&#x89E3;&#x4E86;&#x5417;&#xFF1F;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6DFB;&#x52A0;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5185;&#x90E8;&#x600E;&#x4E48;&#x53EF;&#x4EE5;&#x8C03;&#x7528; Compose &#x51FD;&#x6570;&#xFF1F;&#x5982;&#x679C;&#x6DFB;&#x52A0;&#x4E86;&#xFF0C;&#x90A3;&#x4E48; MainActivity &#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x7528;&#x6DFB;&#x52A0; @Composable &#x6CE8;&#x89E3;&#xFF1F;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B; setContent &#x7684;&#x5B9E;&#x73B0;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;public fun ComponentActivity.setContent(    </span><br><span class="line">    parent: CompositionContext? = null,    </span><br><span class="line">    content: @Composable () -&gt; Unit) {</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;setContent &#x51FD;&#x6570;&#x5E76;&#x6CA1;&#x6709;&#x88AB; @Composable &#x6CE8;&#x89E3;&#x6807;&#x8BB0;&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x628A;&#x4E00;&#x4E2A; @Composable &#x6CE8;&#x89E3;&#x7684;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x4E86;&#x53C2;&#x6570;&#xFF0C;&#x6240;&#x4EE5; setContent &#x4E0D;&#x9700;&#x8981;&#x88AB;&#x5176;&#x6CE8;&#x89E3;&#xFF1B;&#x4F46;&#x662F;&#x7EC8;&#x5F52;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x88AB; @Composeable &#x6CE8;&#x89E3;&#x7684;&#x51FD;&#x6570;&#x6765;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x662F;&#x54EA;&#x4E2A;&#x51FD;&#x6570;&#x5462;&#xFF1F;&#x5B83;&#x5C31;&#x662F; invokeComposable &#x51FD;&#x6570;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/79807a56368072fe992330575de974358ea19379750f4a9f8bfa567763c82c26" alt></p>
<p>&#x9ED8;&#x8BA4;&#x770B;&#x4E0D;&#x4E86;&#xFF0C;&#x6211;&#x4EEC; Decompile to Java &#x770B;&#x4E0B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/3d3974e8473118999b59c533e663b8185be8f824037a981a821aac15339302f2" alt></p>
<p>&#x5C31;&#x662F;&#x5C06; composable &#x5F3A;&#x8F6C;&#x6210;&#x4E86;&#x4E00;&#x4E2A; Function2 &#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#xFF1B;</p>
<p>&#x6240;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49; Composable &#x5C31;&#x662F;&#x58F0;&#x660E;&#x7684;&#x51FD;&#x6570;&#x88AB; Composable &#x6CE8;&#x89E3;&#x6807;&#x8BB0;&#xFF0C;&#x672C;&#x8D28;&#x4E0A;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x5728;&#x5F00;&#x53D1;&#x4E2D;&#x53EF;&#x4EE5;&#x5C06;&#x6211;&#x4EEC;&#x7684;&#x754C;&#x9762;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x62C6;&#x5206;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF1B;&#x901A;&#x5E38;&#x6211;&#x4EEC;&#x5728;&#x81EA;&#x5B9A;&#x4E49; Composable &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x7684;&#x53EA;&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x4E2A; Composable &#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x5BF9;&#x4E8E;&#x5E03;&#x5C40;&#x7684;&#x63A7;&#x5236;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun ui() {</span><br><span class="line">    Column {</span><br><span class="line">        Text(&quot;&#x8001;A&quot;)</span><br><span class="line">        Text(&quot;Mars&quot;)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x800C;&#x4E0D;&#x662F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun ui1() {</span><br><span class="line">    Text(&quot;&#x8001;A&quot;)</span><br><span class="line">    Text(&quot;Mars&quot;)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;&#x5916;&#x90E8;&#x5728;&#x8C03;&#x7528; ui1 &#x51FD;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x5E03;&#x5C40;&#x5C31;&#x4E0D;&#x53D7;&#x63A7;&#x5236;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x5916;&#x90E8;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019; &#x653E;&#x5230;&#x4E86; Column &#x4E2D;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x7AD6;&#x5411;&#x6392;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x653E;&#x5230;&#x4E86; Row &#x4E2D;&#xFF0C;&#x5C31;&#x4F1A;&#x6A2A;&#x5411;&#x6392;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x653E;&#x5230;&#x4E86; Box &#x4E2D;&#x5C31;&#x4F1A;&#x53E0;&#x52A0;&#x6392;&#x5217;&#xFF1B;</p>
<p>&#x800C; ui &#x51FD;&#x6570;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x63A7;&#x5236;&#x5E03;&#x5C40;&#x7684;&#x6392;&#x5217;&#xFF0C;&#x901A;&#x8FC7; Column&#x3001;Row &#x7B49;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x53D7;&#x5916;&#x754C;&#x8C03;&#x7528;&#x63A7;&#x5236;&#xFF1B;</p>
<h3 id="&#x81EA;&#x5B9A;&#x4E49;-Composable-&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#&#x81EA;&#x5B9A;&#x4E49;-Composable-&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49; Composable &#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;"></a>&#x81EA;&#x5B9A;&#x4E49; Composable &#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;</h3><p>&#x518D;&#x8BF4;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5148;&#x60F3;&#x9886;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49; Composable &#x5728;&#x4F20;&#x7EDF; View &#x4E2D;&#x7684;&#x7B49;&#x4EF7;&#x7269;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x81EA;&#x5B9A;&#x4E49;View&#xFF1F;&#x8FD8;&#x662F; xml &#x6587;&#x4EF6;&#xFF1F;&#x8FD8;&#x662F; &#x81EA;&#x5B9A;&#x4E49;View + xml &#x6587;&#x4EF6;&#xFF1F;</p>
<p><strong>&#x81EA;&#x5B9A;&#x4E49;View&#xFF1F;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable    </span><br><span class="line">fun ui() {</span><br><span class="line">    Column {            </span><br><span class="line">        Text(text = &quot;&#x8001;A&quot;)            </span><br><span class="line">        Text(text = &quot;Mars&quot;)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x5199;&#x6CD5;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x66F4;&#x50CF;&#x4F20;&#x7EDF;&#x7684; &#x81EA;&#x5B9A;&#x4E49; LinearLayout</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;class CustomLinearLayout(context: Context?, attrs: AttributeSet?) : LinearLayout(context, attrs) {        </span><br><span class="line">    val name: TextView by lazy { TextView(context) }        </span><br><span class="line">    val alias: TextView by lazy { TextView(context) }        </span><br><span class="line">    init {        </span><br><span class="line">        orientation = VERTICAL        </span><br><span class="line">        //</span><br><span class="line">        name.text = &quot;&#x8001;A&quot;</span><br><span class="line">        alias.text = &quot;Mars&quot; </span><br><span class="line">        ...        </span><br><span class="line">        // &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;              </span><br><span class="line">        addView(name)        </span><br><span class="line">        addView(alias)    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x770B;&#x8D77;&#x6765;&#x66F4;&#x50CF;&#x662F; &#x81EA;&#x5B9A;&#x4E49; View &#x7684;&#x7B49;&#x4EF7;&#x7269;&#xFF1B;</p>
<p><strong>xml&#x6587;&#x4EF6;&#xFF1F;</strong></p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x79CD;&#x7B80;&#x6613;&#x5E03;&#x5C40;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4E5F;&#x4E0D;&#x4F1A;&#x8FD9;&#x6837;&#x53BB;&#x4F7F;&#x7528;&#xFF0C;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x76F4;&#x63A5;&#x5728; xml &#x4E2D;&#x8FDB;&#x884C;&#x4E86;&#x58F0;&#x660E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    </span><br><span class="line">    android:orientation=&quot;vertical&quot;    </span><br><span class="line">    android:layout_width=&quot;match_parent&quot;    </span><br><span class="line">    android:layout_height=&quot;match_parent&quot;&gt;     </span><br><span class="line">    &lt;TextView         </span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;         </span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;/&gt;        </span><br><span class="line">    </span><br><span class="line">    &lt;TextView        </span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;        </span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;/&gt;    </span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x66F4;&#x76F4;&#x89C2;&#xFF0C;&#x4FBF;&#x6377;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x4E5F;&#x66F4;&#x50CF; compose &#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x4E00;&#x4E2A;&#x7236;&#x63A7;&#x4EF6;&#xFF0C;&#x4E24;&#x4E2A;&#x5B50;&#x63A7;&#x4EF6;&#xFF1B;</p>
<p><strong>&#x81EA;&#x5B9A;&#x4E49;View + xml&#xFF1F;</strong></p>
<p>&#x4F46;&#x662F;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5BF9; Composable &#x51FD;&#x6570;&#x505A;&#x5982;&#x4E0B;&#x6539;&#x52A8;&#x4F7F;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun ui(name: String) {    </span><br><span class="line">    Column {        </span><br><span class="line">        Text(text = name)        </span><br><span class="line">        Text(text = &quot;Mars&quot;)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A; name &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x6765;&#x4F20;&#x5165;&#x8FDB;&#x6765;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#x4F20;&#x5165;&#x4E0D;&#x540C;&#x7684;&#x503C;&#xFF0C;&#x6765;&#x8868;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E14;&#xFF0C;&#x8FD9;&#x4E2A; Composable &#x51FD;&#x6570;&#x8FD8;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x6539;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun ui(name: String) {    </span><br><span class="line">    Column {        </span><br><span class="line">        val realName = remember {            </span><br><span class="line">            if (name.length &gt; 8) {                </span><br><span class="line">                &quot;&#x6211;&#x662F;laoA&quot;            </span><br><span class="line">            } else {                </span><br><span class="line">                &quot;&#x6211;&#x662F;&#x9A6C;&#x5C14;&#x65AF;&quot;            </span><br><span class="line">            }        </span><br><span class="line">        }        </span><br><span class="line">        Text(text = realName)        </span><br><span class="line">        Text(text = &quot;Mars&quot;)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5BF9;&#x4E8E; Compose &#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x5199;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x4F20;&#x7EDF;&#x7684; xml &#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#xFF0C;&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x5BF9;&#x754C;&#x9762;&#x6709;&#x4E86;&#x5B9A;&#x5236;&#x7684;&#x9700;&#x6C42;&#x540E;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x81EA;&#x5B9A;&#x4E49; View &#x6765;&#x5B9E;&#x73B0;&#x4E86;&#xFF1B;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x81EA;&#x5B9A;&#x4E49; Composable &#x66F4;&#x50CF;&#x4F20;&#x7EDF; View &#x7684;&#x81EA;&#x5B9A;&#x4E49; View + xml &#x6587;&#x4EF6;&#xFF01;</p>
<p>&#x6240;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49; Composable &#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E5F;&#x5C31;&#x80FD;&#x77E5;&#x9053;&#x4E86;&#xFF1B;</p>
<p>&#x754C;&#x9762;&#x58F0;&#x660E;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x662F;&#x4E00;&#x4E2A; Activity &#x5BF9;&#x5E94;&#x4E00;&#x4E2A; xml &#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528; Compose &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x4E2A; MainActivity &#x5BF9;&#x5E94;&#x4E00;&#x4E2A; MainLayout &#x7684; Composable &#x7684;&#x51FD;&#x6570;&#xFF1B;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x65E2;&#x9700;&#x8981; xml &#x7684;&#x7B80;&#x6D01;&#x6709;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;view&#x7684;&#x903B;&#x8F91;&#x5904;&#x7406;&#x80FD;&#x529B;&#xFF0C;&#x90A3;&#x4E48;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49; Composable &#x7684;&#xFF1B;&#x9047;&#x5230;&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x5BF9;&#x754C;&#x9762;&#x6709;&#x5B9A;&#x5236;&#x9700;&#x6C42;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x4F7F;&#x7528; Composable &#x51FD;&#x6570;&#x5904;&#x7406;&#xFF1B;</p>
<p>&#x4F20;&#x7EDF;&#x81EA;&#x5B9A;&#x4E49; View &#x8FD8;&#x80FD;&#x5BF9;&#x5E03;&#x5C40;&#x3001;&#x7ED8;&#x5236;&#x3001;&#x89E6;&#x6478;&#x53CD;&#x9988;&#x8FDB;&#x884C;&#x5B9A;&#x5236;&#xFF0C;&#x8FD9;&#x4E00;&#x7C7B;&#x7684;&#x9AD8;&#x7EA7;&#x81EA;&#x5B9A;&#x4E49; View &#x5728; Compose &#x4E2D;&#x662F;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x7684;&#x5462;&#xFF1F;</p>
<p>&#x5176;&#x5B9E;&#x8FD8;&#x662F;&#x7528;&#x7684;&#x81EA;&#x5B9A;&#x4E49; Composable&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x81EA;&#x5B9A;&#x4E49; Composable&#xFF0C;&#x76F4;&#x63A5;&#x786C;&#x5199;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5C31;&#x5931;&#x53BB;&#x4E86;&#x6269;&#x5C55;&#x3001;&#x590D;&#x7528;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5177;&#x4F53;&#x5199;&#x6CD5;&#x4E0A;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7528;&#x7684;&#x662F; Modifier&#xFF0C;&#x540E;&#x9762;&#x7AE0;&#x8282;&#x4F1A;&#x8BE6;&#x89E3;&#x81EA;&#x5B9A;&#x4E49; Compose &#x4E2D;&#x7684;&#x9AD8;&#x7EA7;&#x81EA;&#x5B9A;&#x4E49; View&#xFF1B;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49; Composable &#x5C31;&#x8BB2;&#x5230;&#x8FD9;&#x91CC;&#x5427;~~</p>
<h2 id="&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;"><a href="#&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;" class="headerlink" title="&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;"></a>&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;</h2><p>MutableState &#x548C; mutableStateOf &#x8BE6;&#x89E3;&#xFF1B;</p>
<h2 id="&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;"><a href="#&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;" class="headerlink" title="&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;"></a>&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;</h2><p>&#x6765;&#x90FD;&#x6765;&#x4E86;&#xFF0C;&#x70B9;&#x4E2A;&#x5173;&#x6CE8;&#xFF0C;&#x70B9;&#x4E2A;&#x8D5E;&#x5427;&#xFF0C;&#x4F60;&#x7684;&#x652F;&#x6301;&#x662F;&#x6211;&#x6700;&#x5927;&#x7684;&#x52A8;&#x529B;~~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ac3c435af17e7ba30abe89f848965dc4.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7325717778597904420.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7325717778597904420.html" itemprop="url">StreamtoList不能滥用以及与Collectors</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-21T03:21:31+08:00">
                2024-01-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>Stream <code>toList()</code>&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x53EA;&#x8BFB;List&#x539F;&#x5219;&#x4E0A;&#x4E0D;&#x53EF;&#x4FEE;&#x6539;&#xFF0C;<code>collect(Collectors.toList())</code>&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;&#x7684;&#x662F;ArrayList,&#x53EF;&#x4EE5;&#x589E;&#x5220;&#x6539;&#x67E5;</strong></p>
<ol>
<li>&#x80CC;&#x666F;</li>
</ol>
<hr>
<p>&#x5728;&#x516C;&#x53F8;&#x770B;&#x5230;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x7A81;&#x7136;&#x53D1;&#x73B0;&#x4E86;<code>UnsupportedOperationException</code> &#x62A5;&#x9519;&#xFF0C;&#x60F3;&#x5230;&#x4E86;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;throw&#x7684;&#x5E94;&#x8BE5;&#x5C31;&#x662F;&#x64CD;&#x4F5C;collection&#x4E0D;&#x5F53;&#x3002;  </p>
<p>&#x53D1;&#x73B0;&#x7684;&#x786E;&#x662F;&#x540C;&#x4E8B;&#x4F7F;&#x7528;&#x4E86;&#x7C7B;&#x4F3C;<code>stringList.stream().filter(number -&gt; Long.parseLong(number) &gt; 1).toList()</code> &#x4EE5;stream.toList()&#x4F5C;&#x4E3A;&#x8FD4;&#x56DE;&#xFF0C; &#x540E;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x4E86;&#x8FD4;&#x56DE;&#x503C;&#x505A;add&#x64CD;&#x4F5C;&#xFF0C;&#x5BFC;&#x81F4;&#x62A5;&#x9519;</p>
<ol start="2">
<li>Stream <code>toList()</code>&#x548C; <code>collect(Collectors.toList())</code>&#x7684;&#x533A;&#x522B;</li>
</ol>
<hr>
<blockquote>
<p>JDK version: 21</p>
<p>IDE: IDEA</p>
</blockquote>
<p><strong>&#x4ECE;Java16&#x5F00;&#x59CB;&#xFF0C;Stream&#x6709;&#x4E86;&#x76F4;&#x63A5;<code>toList</code>&#x65B9;&#x6CD5;</strong>&#xFF0C; java8&#x65F6;&#x5019;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x662F; <code>stringList.stream().filter(number -&gt; Long.parseLong(number) &gt; 1).collect(Collectors.toList())</code>&#x3002;</p>
<h3 id="Stream-toList"><a href="#Stream-toList" class="headerlink" title="Stream toList()"></a>Stream toList()</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;    /**</span><br><span class="line">     * Accumulates the elements of this stream into a {@code List}. The elements in</span><br><span class="line">     * the list will be in this stream&apos;s encounter order, if one exists. The returned List</span><br><span class="line">     * is unmodifiable; calls to any mutator method will always cause</span><br><span class="line">     * {@code UnsupportedOperationException} to be thrown. There are no</span><br><span class="line">     * guarantees on the implementation type or serializability of the returned List.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;The returned instance may be &lt;a href=&quot;{@docRoot}/java.base/java/lang/doc-files/ValueBased.html&quot;&gt;value-based&lt;/a&gt;.</span><br><span class="line">     * Callers should make no assumptions about the identity of the returned instances.</span><br><span class="line">     * Identity-sensitive operations on these instances (reference equality ({@code ==}),</span><br><span class="line">     * identity hash code, and synchronization) are unreliable and should be avoided.</span><br><span class="line">     *</span><br><span class="line">     * &lt;p&gt;This is a &lt;a href=&quot;package-summary.html#StreamOps&quot;&gt;terminal operation&lt;/a&gt;.</span><br><span class="line">     *</span><br><span class="line">     * @apiNote If more control over the returned object is required, use</span><br><span class="line">     * {@link Collectors#toCollection(Supplier)}.</span><br><span class="line">     *</span><br><span class="line">     * @implSpec The implementation in this interface returns a List produced as if by the following:</span><br><span class="line">     * &lt;pre&gt;{@code</span><br><span class="line">     * Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(this.toArray())))</span><br><span class="line">     * }&lt;/pre&gt;</span><br><span class="line">     *</span><br><span class="line">     * @implNote Most instances of Stream will override this method and provide an implementation</span><br><span class="line">     * that is highly optimized compared to the implementation in this interface.</span><br><span class="line">     *</span><br><span class="line">     * @return a List containing the stream elements</span><br><span class="line">     *</span><br><span class="line">     * @since 16</span><br><span class="line">     */</span><br><span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">    default List&lt;T&gt; toList() {</span><br><span class="line">        return (List&lt;T&gt;) Collections.unmodifiableList(new ArrayList&lt;&gt;(Arrays.asList(this.toArray())));</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x67E5;&#x770B;&#x6E90;&#x7801; Stream toList&#x8C03;&#x7528;&#x7684;&#x662F;<code>Collections.unmodifiableList</code> &#x800C;&#x5728;<code>unmodifiableList(List&lt;? extends T&gt; list)</code>&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;<strong>&#x90FD;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E0D;&#x53EF;&#x4FEE;&#x6539;&#x7684;List</strong>&#xFF0C;&#x6240;&#x4EE5;<strong>&#x4E0D;&#x80FD;&#x4F7F;&#x7528;set/add/remove&#x7B49;&#x6539;&#x53D8;list&#x6570;&#x7EC4;&#x7684;&#x65B9;&#x6CD5;</strong>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; return (list instanceof RandomAccess ?</span><br><span class="line">                new UnmodifiableRandomAccessList&lt;&gt;(list) :</span><br><span class="line">                new UnmodifiableList&lt;&gt;(list));</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/fef83c6a88e5acaffde0efcd97629f2f350c326369fdb13fedd946b60451b31e" alt></p>
<hr>
<p><strong>&#x4F46;&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;List&#x7684;&#x5143;&#x7D20;&#x7684;&#x67D0;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;&#x4F8B;&#x5982;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;        List&lt;String&gt; stringList = List.of(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;);</span><br><span class="line">        List&lt;String&gt; largeNumberList = stringList.stream().filter(number -&gt; Long.parseLong(number) &gt; 1).toList();</span><br><span class="line">        List&lt;String&gt; largeNumberList2 = stringList.stream().filter(number -&gt; Long.parseLong(number) &gt; 1).collect(Collectors.toList());</span><br><span class="line">//        largeNumberList.add(&quot;4&quot;); //  java.lang.UnsupportedOperationException</span><br><span class="line">        largeNumberList2.add(&quot;4&quot;); //success</span><br><span class="line"></span><br><span class="line">        // modify custom object attribute</span><br><span class="line">        User userZhang = new User(&quot;ZhangSan&quot;);</span><br><span class="line">        User userLi = new User(&quot;LiSi&quot;);</span><br><span class="line">        List&lt;User&gt; userList = List.of(userZhang, userLi);</span><br><span class="line">        List&lt;User&gt; filterList = userList.stream().filter(user -&gt; &quot;LiSi&quot;.equals(user.name)).toList();</span><br><span class="line"></span><br><span class="line">        User first = filterList.getFirst();//java 21</span><br><span class="line">        first.name = &quot;WangWu&quot;;</span><br><span class="line">        filterList.forEach(u -&gt; System.out.println(u.name));</span><br><span class="line">        //List.of&#x8FD4;&#x56DE;&#x7684;&#x4E5F;&#x662F;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x7684;List</span><br><span class="line">        userList.forEach(u -&gt; System.out.print(u.name));</span><br></pre></td></tr></table></figure>

<p>&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x662F;&#xFF1A;</p>
<blockquote>
<p>WangWu</p>
<p>ZhangSanWangWu</p>
</blockquote>
<h3 id="Stream-collect-Collectors-toList"><a href="#Stream-collect-Collectors-toList" class="headerlink" title="Stream collect(Collectors.toList())"></a>Stream collect(Collectors.toList())</h3><p>&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>ArrayList</code> &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5728;<code>toList()</code>&#x65B9;&#x6CD5;&#x5165;&#x53C2;&#x4E2D;&#x4F20;&#x5165;&#x6307;&#x5B9A;Supplier&#x7684;&#x8BDD;&#xFF0C; &#x53EF;&#x4EE5;&#x505A;ArrayList&#x7684;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;    /**</span><br><span class="line">     * Returns a {@code Collector} that accumulates the input elements into a</span><br><span class="line">     * new {@code List}. There are no guarantees on the type, mutability,</span><br><span class="line">     * serializability, or thread-safety of the {@code List} returned; if more</span><br><span class="line">     * control over the returned {@code List} is required, use {@link #toCollection(Supplier)}.</span><br><span class="line">     *</span><br><span class="line">     * @param &lt;T&gt; the type of the input elements</span><br><span class="line">     * @return a {@code Collector} which collects all the input elements into a</span><br><span class="line">     * {@code List}, in encounter order</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt;</span><br><span class="line">    Collector&lt;T, ?, List&lt;T&gt;&gt; toList() {</span><br><span class="line">        return new CollectorImpl&lt;&gt;(ArrayList::new, List::add,</span><br><span class="line">                                   (left, right) -&gt; { left.addAll(right); return left; },</span><br><span class="line">                                   CH_ID);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p><strong>tips: <code>List.of()</code>&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x4E5F;&#x662F;&#x4E0D;&#x53EF;&#x4FEE;&#x6539;&#x7684;list&#xFF0C; an unmodifiable list. &#x5173;&#x4E8E; Unmodifiable Lists &#x8BF4;&#x660E;</strong></p>
<p>The <code>List.of</code> and <code>List.copyOf</code> static factory methods provide a convenient way to create unmodifiable lists. The List instances created by these methods have the following characteristics:  </p>
<p>They are <code>unmodifiable</code>. Elements cannot be added, removed, or replaced. Calling any mutator method on the List will always cause UnsupportedOperationException to be thrown. However, if the contained elements are themselves mutable, this may cause the List&#x2019;s contents to appear to change.  </p>
<p>They disallow null elements. Attempts to create them with null elements result in NullPointerException.  </p>
<p>They are serializable if all elements are serializable.  </p>
<p>The order of elements in the list is the same as the order of the provided arguments, or of the elements in the provided array.<br>The lists and their <code>subList</code> views implement the <code>RandomAccess</code> interface.  </p>
<p>They are <code>value-based</code>. Programmers should treat instances that are equal as interchangeable and should not use them for synchronization, or unpredictable behavior may occur. For example, in a future release, synchronization may fail. Callers should make no assumptions about the identity of the returned instances. Factories are free to create new instances or reuse existing ones.  </p>
<p>They are serialized as specified on the Serialized Form page.  </p>
<p>This interface is a member of the Java Collections Framework.</p>
<h2 id="3-&#x5982;&#x4F55;&#x4F7F;&#x7528;-&#x4E0D;&#x8003;&#x8651;&#x6027;&#x80FD;"><a href="#3-&#x5982;&#x4F55;&#x4F7F;&#x7528;-&#x4E0D;&#x8003;&#x8651;&#x6027;&#x80FD;" class="headerlink" title="3.&#x5982;&#x4F55;&#x4F7F;&#x7528;(&#x4E0D;&#x8003;&#x8651;&#x6027;&#x80FD;)"></a>3.&#x5982;&#x4F55;&#x4F7F;&#x7528;(&#x4E0D;&#x8003;&#x8651;&#x6027;&#x80FD;)</h2><p>&#x786E;&#x5B9A;&#x5176;&#x662F;&#x4E00;&#x4E2A;&#x4E0D;&#x518D;&#x88AB;set/add/remove&#x7684;list &#x53EF;&#x4F7F;&#x7528; Stream toList;  </p>
<p>&#x5982;&#x679C;&#x4F7F;&#x7528;<code>collect(Collectors.toList())</code> ,sonar&#x6216;idea&#x81EA;&#x5E26;&#x4EE5;&#x53CA;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x4E00;&#x4E9B;code checker&#x4F1A;&#x7206;warning, &#x4EE5;&#x672C;&#x4EBA;&#x7ECF;&#x9A8C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>collect(Collectors.toCollection(ArrayList::new))</code>&#x6765;&#x4EE3;&#x66FF;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8cf54d9950e3f7bf8c9fb46ecfd3174d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7325728181248606245.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7325728181248606245.html" itemprop="url">糟糕，订单超时关闭成功，用户也支付成功了，我该怎么办？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-20T15:11:28+08:00">
                2024-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;&#x7535;&#x5546;&#x53CA;&#x91D1;&#x878D;&#x7C7B;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x7528;&#x6237;&#x5728;&#x4E0B;&#x5B8C;&#x5355;&#x4E4B;&#x540E;&#x6CA1;&#x6709;&#x7ACB;&#x5373;&#x4ED8;&#x6B3E;&#xFF0C;&#x8BA2;&#x5355;&#x5904;&#x4E8E;&#x672A;&#x652F;&#x4ED8;&#x72B6;&#x6001;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x8BA2;&#x5355;&#x4F1A;&#x6709;30&#x5206;&#x949F;&#x6216;&#x8005;1&#x5C0F;&#x65F6;&#x5DE6;&#x53F3;(&#x5177;&#x4F53;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;)&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x3002;&#x5728;&#x6B64;&#x671F;&#x95F4;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x7ACB;&#x5373;&#x4ED8;&#x6B3E;&#xFF0C;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x540E;&#x8BA2;&#x5355;&#x8FDB;&#x5165;&#x5F85;&#x53D1;&#x8D27;&#x72B6;&#x6001;&#xFF0C;&#x7B49;&#x5F85;&#x5546;&#x5BB6;&#x53D1;&#x8D27;&#x3002;&#x82E5;&#x8D85;&#x8FC7;&#x89C4;&#x5B9A;&#x7684;&#x4ED8;&#x6B3E;&#x65F6;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;&#x8BA2;&#x5355;&#x4F1A;&#x88AB;&#x5173;&#x95ED;&#xFF0C;&#x5E93;&#x5B58;&#x53CA;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x4F18;&#x60E0;(&#x5305;&#x542B;&#x4F18;&#x60E0;&#x5238;&#x3001;&#x79EF;&#x5206;)&#x90FD;&#x5C06;&#x4F1A;&#x88AB;&#x8FD4;&#x8FD8;&#x3002;&#x90A3;&#x4E48;&#x5982;&#x679C;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x5230;&#x671F;&#x9700;&#x8981;&#x5173;&#x95ED;&#x8BA2;&#x5355;&#xFF0C;&#x5E76;&#x4E14;&#x6B64;&#x65F6;&#x6B63;&#x597D;&#x7528;&#x6237;&#x4E5F;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x5BF9;&#x4E8E;&#x8BA2;&#x5355;&#x670D;&#x52A1;&#x6765;&#x8BF4;&#x8BE5;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5462;&#xFF1F;</p>
<h3 id="&#x660E;&#x786E;&#x8BA2;&#x5355;&#x7EC8;&#x6001;"><a href="#&#x660E;&#x786E;&#x8BA2;&#x5355;&#x7EC8;&#x6001;" class="headerlink" title="&#x660E;&#x786E;&#x8BA2;&#x5355;&#x7EC8;&#x6001;"></a>&#x660E;&#x786E;&#x8BA2;&#x5355;&#x7EC8;&#x6001;</h3><p>&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x652F;&#x4ED8;&#x4E1A;&#x52A1;&#x53EA;&#x6709;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x548C;&#x652F;&#x4ED8;&#x5931;&#x8D25;(&#x7528;&#x6237;&#x53D6;&#x6D88;)&#x4E24;&#x79CD;&#x72B6;&#x6001;&#xFF0C;&#x4E24;&#x8005;&#x4E2D;&#x5FC5;&#x6709;&#x4E00;&#x4E2A;&#x80FD;&#x8FDB;&#x5165;&#x5230;&#x7EC8;&#x6001;&#x3002;&#x5FC5;&#x987B;&#x660E;&#x786E;&#x4E00;&#x70B9;&#x7684;&#x662F;&#xFF0C;&#x65E0;&#x8BBA;&#x54EA;&#x4E00;&#x4E2A;&#x90FD;&#x4EE3;&#x8868;&#x7740;&#x4E1A;&#x52A1;&#x7684;&#x6700;&#x7EC8;&#x6001;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;&#x6539;&#x53D8;&#x3002;&#x5982;&#x679C;&#x7EC8;&#x6001;&#x968F;&#x4FBF;&#x8F6C;&#x6362;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x8BBE;&#x8BA1;&#x4E0A;&#x4E00;&#x5B9A;&#x662F;&#x4E0D;&#x5408;&#x7406;&#x7684;&#x3002; <img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c61dbdb8027c93413c1d6bfc77fb81e9f509d11c5f2c8c17b0d1b497034783c2" alt></p>
<h3 id="&#x4E1A;&#x52A1;&#x5904;&#x7406;"><a href="#&#x4E1A;&#x52A1;&#x5904;&#x7406;" class="headerlink" title="&#x4E1A;&#x52A1;&#x5904;&#x7406;"></a>&#x4E1A;&#x52A1;&#x5904;&#x7406;</h3><p>&#x6709;&#x4E24;&#x79CD;&#x60C5;&#x51B5;:</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x79CD;: &#x7528;&#x6237;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x5904;&#x7406;&#x6210;&#x529F;&#xFF0C;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x5904;&#x7406;&#x5931;&#x8D25;;</li>
<li>&#x7B2C;&#x4E8C;&#x79CD;&#xFF1A;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x5904;&#x7406;&#x6210;&#x529F;&#xFF0C;&#x7528;&#x6237;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x5904;&#x7406;&#x5931;&#x8D25;&#x3002;</li>
</ul>
<p>&#x9488;&#x5BF9;&#x4E0A;&#x9762;&#x7684;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x5DF2;&#x7ECF;&#x652F;&#x4ED8;&#x6210;&#x529F;&#xFF0C;&#x9762;&#x5BF9;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x7684;&#x8BF7;&#x6C42;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x62D2;&#x7EDD;&#xFF0C;&#x4E5F;&#x7B26;&#x5408;&#x6B63;&#x5E38;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x8981;&#x662F;&#x51FA;&#x73B0;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x6210;&#x529F;&#xFF0C;&#x4F46;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x5904;&#x7406;&#x5931;&#x8D25;&#x4E86;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#x8BE5;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5462;&#xFF1F;&#x7528;&#x6237;&#x7684;&#x94B1;&#x600E;&#x4E48;&#x5904;&#x7406;&#xFF1F;&#x539F;&#x8DEF;&#x8FD4;&#x56DE;&#x5417;&#xFF1F;</p>
<p>&#x6CA1;&#x9519;&#xFF0C;&#x5C31;&#x662F;&#x539F;&#x8DEF;&#x8FD4;&#x56DE;&#x3002;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x4E86;&#xFF0C;&#x7528;&#x6237;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x4F1A;&#x89E6;&#x53D1;&#x652F;&#x4ED8;&#x56DE;&#x8C03;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x53EF;&#x4EE5;&#x5728;&#x56DE;&#x8C03;&#x5904;&#x7406;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x8BA2;&#x5355;&#x5DF2;&#x7ECF;&#x88AB;&#x5173;&#x95ED;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5F97;&#x89E6;&#x53D1;&#x9000;&#x6B3E;&#x6D41;&#x7A0B;&#xFF0C;&#x628A;&#x94B1;&#x9000;&#x7ED9;&#x7528;&#x6237;&#x3002; &#x8FD9;&#x6837;&#xFF0C;&#x5373;&#x4F7F;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x7528;&#x6237;&#x4ED8;&#x8FC7;&#x7684;&#x94B1;&#x5DF2;&#x7ECF;&#x9000;&#x56DE;&#x4E86;&#xFF0C;&#x5BF9;&#x7528;&#x6237;&#x6765;&#x8BF4;&#x4E5F;&#x5E76;&#x4E0D;&#x5B58;&#x5728;&#x635F;&#x5931;&#x3002;</p>
<blockquote>
<p>&#x275D;</p>
<p>&#x6CE8;&#xFF1A;&#x9000;&#x6B3E;&#x6D41;&#x7A0B;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x5931;&#x8D25;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x9700;&#x8981;&#x505A;&#x597D;&#x5E42;&#x7B49;&#x4EE5;&#x53CA;&#x515C;&#x5E95;&#x65B9;&#x6848;&#x3002;</p>
<p>&#x275E;</p>
</blockquote>
<h3 id="&#x5BF9;&#x8D26;&#x673A;&#x5236;"><a href="#&#x5BF9;&#x8D26;&#x673A;&#x5236;" class="headerlink" title="&#x5BF9;&#x8D26;&#x673A;&#x5236;"></a>&#x5BF9;&#x8D26;&#x673A;&#x5236;</h3><p>&#x7C7B;&#x4F3C;&#x8FD9;&#x4E9B;&#x4E0E;&#x652F;&#x4ED8;&#x6709;&#x5173;&#x7684;&#x4E1A;&#x52A1;&#xFF0C;&#x5F15;&#x5165;&#x5BF9;&#x8D26;&#x673A;&#x5236;&#x662F;&#x5FC5;&#x8981;&#x7684;&#x3002;&#x6839;&#x636E;&#x652F;&#x4ED8;&#x6D41;&#x6C34;&#x4EE5;&#x53CA;&#x652F;&#x4ED8;&#x5355;&#x7684;&#x72B6;&#x6001;&#x4EE5;&#x53CA;&#x7528;&#x6237;&#x7684;&#x652F;&#x4ED8;&#x3001;&#x9000;&#x6B3E;&#x60C5;&#x51B5;&#xFF0C;&#x9010;&#x4E00;&#x6BD4;&#x5BF9;(&#x652F;&#x4ED8;&#x91D1;&#x989D;=&#x51B2;&#x9000;&#x91D1;&#x989D;)&#x3002;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8981;&#x6839;&#x636E;&#x7528;&#x6237;&#x7684;&#x5B9E;&#x4ED8;&#x91D1;&#x989D;&#x8FDB;&#x884C;&#x9000;&#x6B3E;&#x91CD;&#x8BD5;&#xFF0C;&#x76F4;&#x5230;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x3002;</p>
<h3 id="&#x52A0;&#x9501;"><a href="#&#x52A0;&#x9501;" class="headerlink" title="&#x52A0;&#x9501;"></a>&#x52A0;&#x9501;</h3><p>&#x5177;&#x4F53;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x51FA;&#x73B0;&#x4E86;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x7528;&#x6237;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x56DE;&#x8C03;&#x8FD8;&#x662F;&#x8BA2;&#x5355;&#x5373;&#x5C06;&#x8D85;&#x65F6;&#x5173;&#x95ED;&#x8BA2;&#x5355;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x4E4B;&#x524D;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x52A0;&#x9501;&#x63A7;&#x5236;&#xFF0C;&#x5E76;&#x4E14;&#x4E00;&#x5B9A;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;&#x8C01;&#x62A2;&#x5230;&#x4E86;&#x8FD9;&#x7B14;&#x5355;&#x5B50;&#x7684;&#x9501;&#xFF0C;&#x8C01;&#x5148;&#x5904;&#x7406;&#xFF0C;&#x6CA1;&#x62A2;&#x5230;&#x7684;&#x53EA;&#x80FD;&#x7B49;&#x5F85;&#x4E0B;&#x6B21;&#x91CD;&#x8BD5;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x4E0D;&#x4EC5;&#x80FD;&#x591F;&#x89E3;&#x51B3;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x4E14;&#x4E5F;&#x80FD;&#x591F;&#x907F;&#x514D;&#x5F02;&#x5E38;&#x60C5;&#x51B5;&#x7684;&#x51FA;&#x73B0;&#x3002;</p>
<h3 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h3><p>&#x4E0A;&#x9762;&#x7684;&#x65B9;&#x6848;&#x6574;&#x4F53;&#x770B;&#x4E0B;&#x6765;&#xFF0C;&#x80FD;&#x591F;&#x5F88;&#x597D;&#x7684;&#x89E3;&#x51B3;&#x8BA2;&#x5355;&#x8D85;&#x65F6;&#x5230;&#x671F;&#x5173;&#x95ED;&#xFF0C;&#x540C;&#x65F6;&#x7528;&#x6237;&#x4E5F;&#x652F;&#x4ED8;&#x6210;&#x529F;&#x51FA;&#x73B0;&#x7684;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#xFF0C;&#x4E0D;&#x8FC7;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4ECD;&#x9700;&#x505A;&#x597D;&#x5E42;&#x7B49;&#x4EE5;&#x53CA;&#x515C;&#x5E95;&#x65B9;&#x6848;&#xFF0C;&#x786E;&#x4FDD;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x3002;OK&#xFF0C;&#x4ECA;&#x5929;&#x5C31;&#x5148;&#x5206;&#x4EAB;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x4EE5;&#x5E2E;&#x5FD9;&#x70B9;&#x70B9;&#x5173;&#x6CE8;&#x3001;&#x70B9;&#x70B9;&#x8D5E;&#xFF0C;&#x975E;&#x5E38;&#x611F;&#x8C22;&#xFF01;&#x4E0B;&#x7BC7;&#x6587;&#x7AE0;&#x518D;&#x4F1A;~~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/42665167f6d7c0fd6dc95b99de7f70c9.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7325642452819542028.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7325642452819542028.html" itemprop="url">SpringBoot中使用LocalDateTime踩坑记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-19T23:26:22+08:00">
                2024-01-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>@[toc]</p>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x8FD1;&#x65E5;&#x5FC3;&#x8840;&#x6765;&#x6F6E;&#x60F3;&#x505A;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x76EE;&#x6807;&#x662F;&#x505A;&#x4E00;&#x6B3E;&#x53EF;&#x4EE5;&#x9002;&#x914D;&#x591A;&#x7AEF;&#x3001;&#x529F;&#x80FD;&#x5B8C;&#x5907;&#x7684;&#x6A21;&#x677F;&#x5DE5;&#x7A0B;&#xFF0C;&#x5305;&#x542B;&#x540E;&#x53F0;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x548C;&#x524D;&#x53F0;&#x7CFB;&#x7EDF;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x57FA;&#x4E8E;&#x6B64;&#x9879;&#x76EE;&#x8FDB;&#x884C;&#x88C1;&#x526A;&#x548C;&#x6269;&#x5C55;&#x6765;&#x5B8C;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x529F;&#x80FD;&#x5F00;&#x53D1;&#x3002;</p>
<p>&#x672C;&#x9879;&#x76EE;&#x57FA;&#x4E8E;Java21&#x548C;SpringBoot3&#x5F00;&#x53D1;&#xFF0C;&#x5E8F;&#x5217;&#x5316;&#x5DE5;&#x5177;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x9ED8;&#x8BA4;&#x7684;Jackson&#xFF0C;&#x4F7F;&#x7528;Spring Data Redis&#x64CD;&#x4F5C;Redis&#x7F13;&#x5B58;&#x3002;</p>
<p>&#x5728;&#x5B9A;&#x4E49;&#x5B9E;&#x4F53;&#x7C7B;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x6211;&#x4F7F;&#x7528;&#x4E86;<code>java.time</code>&#x5305;&#x4E0B;&#x7684;<code>LocalDate</code>&#x548C;<code>LocalDateTime</code>&#x7C7B;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;<code>java.util</code>&#x5305;&#x4E0B;&#x7684;<code>Date</code>&#x7C7B;&#x3002;</p>
<p>&#x4F46;&#x5728;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230;&#x4E86;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4E8E;&#x662F;&#x5728;&#x6B64;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#x4E0E;&#x8BF8;&#x4F4D;&#x5206;&#x4EAB;&#x3002;</p>
<h2 id="&#x4E00;&#x3001;&#x4E3A;&#x4EC0;&#x4E48;&#x63A8;&#x8350;&#x4F7F;&#x7528;java-time&#x5305;&#x7684;LocalDateTime&#x800C;&#x4E0D;&#x662F;java-util&#x7684;Date&#xFF1F;"><a href="#&#x4E00;&#x3001;&#x4E3A;&#x4EC0;&#x4E48;&#x63A8;&#x8350;&#x4F7F;&#x7528;java-time&#x5305;&#x7684;LocalDateTime&#x800C;&#x4E0D;&#x662F;java-util&#x7684;Date&#xFF1F;" class="headerlink" title="&#x4E00;&#x3001;&#x4E3A;&#x4EC0;&#x4E48;&#x63A8;&#x8350;&#x4F7F;&#x7528;java.time&#x5305;&#x7684;LocalDateTime&#x800C;&#x4E0D;&#x662F;java.util&#x7684;Date&#xFF1F;"></a>&#x4E00;&#x3001;&#x4E3A;&#x4EC0;&#x4E48;&#x63A8;&#x8350;&#x4F7F;&#x7528;java.time&#x5305;&#x7684;LocalDateTime&#x800C;&#x4E0D;&#x662F;java.util&#x7684;Date&#xFF1F;</h2><p>LocalDateTime&#x548C;Date&#x662F;Java&#x4E2D;&#x8868;&#x793A;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x7684;&#x4E24;&#x79CD;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#xFF0C;&#x5B83;&#x4EEC;&#x6709;&#x4E00;&#x4E9B;&#x533A;&#x522B;&#x548C;&#x7279;&#x70B9;&#x3002;</p>
<ul>
<li>&#x7C7B;&#x578B;&#xFF1A;LocalDateTime&#x662F;Java 8&#x5F15;&#x5165;&#x7684;&#x65B0;&#x7C7B;&#x578B;&#xFF0C;&#x5C5E;&#x4E8E;Java 8&#x65E5;&#x671F;&#x65F6;&#x95F4;API&#xFF08;java.time&#x5305;&#xFF09;&#x3002;&#x800C;Date&#x662F;&#x65E7;&#x7248;Java&#x65E5;&#x671F;&#x65F6;&#x95F4;API&#xFF08;java.util&#x5305;&#xFF09;&#x4E2D;&#x7684;&#x7C7B;&#x3002;</li>
<li>&#x4E0D;&#x53EF;&#x53D8;&#x6027;&#xFF1A;LocalDateTime&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x65E6;&#x521B;&#x5EFA;&#x540E;&#xFF0C;&#x5176;&#x503C;&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x7684;&#xFF0C;&#x5BF9;&#x8BE5;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x52A0;&#x51CF;&#x7B49;&#x8BA1;&#x7B97;&#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#x539F;&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;LocalDateTime&#x5BF9;&#x8C61;&#x3002;&#x800C;Date&#x662F;&#x53EF;&#x53D8;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x65B9;&#x6CD5;&#x4FEE;&#x6539;&#x5176;&#x503C;&#x3002;</li>
<li>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;&#xFF1A;LocalDateTime&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x548C;&#x64CD;&#x4F5C;&#x4E0D;&#x540C;&#x7684;LocalDateTime&#x5B9E;&#x4F8B;&#x3002;&#x800C;Date&#x662F;&#x975E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x548C;&#x4FEE;&#x6539;&#x540C;&#x4E00;&#x4E2A;Date&#x5B9E;&#x4F8B;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E0D;&#x53EF;&#x9884;&#x671F;&#x7684;&#x7ED3;&#x679C;&#x3002;</li>
<li>&#x65F6;&#x95F4;&#x7CBE;&#x5EA6;&#xFF1A;LocalDateTime&#x63D0;&#x4F9B;&#x4E86;&#x7EB3;&#x79D2;&#x7EA7;&#x522B;&#x7684;&#x65F6;&#x95F4;&#x7CBE;&#x5EA6;&#xFF0C;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x66F4;&#x52A0;&#x7CBE;&#x786E;&#x7684;&#x65F6;&#x95F4;&#x3002;&#x800C;Date&#x53EA;&#x80FD;&#x8868;&#x793A;&#x6BEB;&#x79D2;&#x7EA7;&#x522B;&#x7684;&#x65F6;&#x95F4;&#x7CBE;&#x5EA6;&#x3002;</li>
<li>&#x65F6;&#x533A;&#x5904;&#x7406;&#xFF1A;LocalDateTime&#x9ED8;&#x8BA4;&#x4E0D;&#x5305;&#x542B;&#x65F6;&#x533A;&#x4FE1;&#x606F;&#xFF0C;&#x8868;&#x793A;&#x7684;&#x662F;&#x672C;&#x5730;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x3002;&#x800C;Date&#x5219;&#x5305;&#x542B;&#x65F6;&#x533A;&#x4FE1;&#x606F;&#xFF0C;&#x5B83;&#x7684;&#x5B9E;&#x9645;&#x503C;&#x4F1A;&#x53D7;&#x5230;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x65F6;&#x533A;&#x7684;&#x5F71;&#x54CD;&#x3002;</li>
</ul>
<p>&#x7531;&#x4E8E;LocalDateTime&#x662F;Java 8&#x53CA;&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#x7684;&#x65B0;&#x7C7B;&#x578B;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x548C;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x63A8;&#x8350;&#x5728;&#x65B0;&#x7684;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;LocalDateTime&#x6765;&#x5904;&#x7406;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x65E7;&#x7248;Java&#x9879;&#x76EE;&#xFF0C;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x4F7F;&#x7528;Date&#x7C7B;&#xFF0C;&#x4F46;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E0B;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x5176;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x6027;&#x3002;</p>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x5728;LocalDateTime&#x548C;Date&#x4E4B;&#x95F4;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#xFF0C;&#x4F8B;&#x5982;&#x901A;&#x8FC7;LocalDateTime&#x7684;atZone()&#x65B9;&#x6CD5;&#x548C;Date&#x7684;toInstant()&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x8F6C;&#x6362;&#x3002;</p>
<h2 id="&#x4E8C;&#x3001;&#x4F7F;&#x7528;LocalDateTime&#x548C;LocalDate&#x65F6;&#x9047;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x5751;&#xFF1F;"><a href="#&#x4E8C;&#x3001;&#x4F7F;&#x7528;LocalDateTime&#x548C;LocalDate&#x65F6;&#x9047;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x5751;&#xFF1F;" class="headerlink" title="&#x4E8C;&#x3001;&#x4F7F;&#x7528;LocalDateTime&#x548C;LocalDate&#x65F6;&#x9047;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x5751;&#xFF1F;"></a>&#x4E8C;&#x3001;&#x4F7F;&#x7528;LocalDateTime&#x548C;LocalDate&#x65F6;&#x9047;&#x5230;&#x4E86;&#x54EA;&#x4E9B;&#x5751;&#xFF1F;</h2><h3 id="2-1-Redis&#x5E8F;&#x5217;&#x5316;&#x62A5;&#x9519;"><a href="#2-1-Redis&#x5E8F;&#x5217;&#x5316;&#x62A5;&#x9519;" class="headerlink" title="2.1 Redis&#x5E8F;&#x5217;&#x5316;&#x62A5;&#x9519;"></a>2.1 Redis&#x5E8F;&#x5217;&#x5316;&#x62A5;&#x9519;</h3><h4 id="2-1-1-&#x95EE;&#x9898;&#x73B0;&#x8C61;"><a href="#2-1-1-&#x95EE;&#x9898;&#x73B0;&#x8C61;" class="headerlink" title="2.1.1 &#x95EE;&#x9898;&#x73B0;&#x8C61;"></a>2.1.1 &#x95EE;&#x9898;&#x73B0;&#x8C61;</h4><p>&#x5728;&#x4F7F;&#x7528;RedisTemplate&#x5411;Redis&#x4E2D;&#x63D2;&#x5165;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x9047;&#x5230;&#x4E86;&#x5982;&#x4E0B;&#x62A5;&#x9519;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;2024-01-11T21:33:25.233+08:00 ERROR 13212 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception</span><br><span class="line"></span><br><span class="line">org.springframework.data.redis.serializer.SerializationException: Could not write JSON: Java 8 date/time type `java.time.LocalDateTime` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: java.util.ArrayList[0]-&gt;com.fast.alden.data.model.SysApiResource[&quot;createdTime&quot;])</span><br><span class="line">	at org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer.serialize(Jackson2JsonRedisSerializer.java:157) ~[spring-data-redis-3.2.0.jar:3.2.0]</span><br><span class="line">	at org.springframework.data.redis.core.AbstractOperations.rawValue(AbstractOperations.java:128) ~[spring-data-redis-3.2.0.jar:3.2.0]</span><br><span class="line">	at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:236) ~[spring-data-redis-3.2.0.jar:3.2.0]</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d4a08a468349a1c29394ebe0344f589997d404ecd013ec4b48892cbe527c0c77" alt="image.png"></p>
<h4 id="2-1-2-&#x95EE;&#x9898;&#x5206;&#x6790;"><a href="#2-1-2-&#x95EE;&#x9898;&#x5206;&#x6790;" class="headerlink" title="2.1.2 &#x95EE;&#x9898;&#x5206;&#x6790;"></a>2.1.2 &#x95EE;&#x9898;&#x5206;&#x6790;</h4><p>&#x5728;&#x4F7F;&#x7528;Redis&#x7F13;&#x5B58;&#x542B;&#x6709;LocalDateTime&#x7C7B;&#x578B;&#x53D8;&#x91CF;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;&#x65F6;&#x4F1A;&#x4EA7;&#x751F;&#x5E8F;&#x5217;&#x5316;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;Jackson&#x5E93;&#x5728;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E0D;&#x652F;&#x6301;Java8&#x7684;LocalDateTime&#x7C7B;&#x578B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x3002;</p>
<p>&#x9519;&#x8BEF;&#x5806;&#x6808;&#x4E2D;&#x4E5F;&#x7ED9;&#x51FA;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6DFB;&#x52A0; <code>com.fasterxml.jackson.datatype:jackson-datatype-jsr310</code>&#x4F9D;&#x8D56;&#xFF0C;&#x4F46;&#x5149;&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#x662F;&#x4E0D;&#x591F;&#x7684;&#xFF0C;&#x8FD8;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x884C;&#x4E3A;&#x3002;</p>
<h4 id="2-1-3-&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#2-1-3-&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="2.1.3 &#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>2.1.3 &#x89E3;&#x51B3;&#x65B9;&#x6848;</h4><ol>
<li>&#x6DFB;&#x52A0;maven&#x4F9D;&#x8D56;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">  &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;</span><br><span class="line">  &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;</span><br><span class="line">  &lt;version&gt;2.13.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x4FEE;&#x6539;RedisSerializer Bean&#x914D;&#x7F6E;</li>
</ol>
<p>&#x5728;&#x5B9A;&#x4E49;RedisSerializer Bean&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x81EA;&#x5B9A;&#x4E49;ObjectMapper&#x5BF9;&#x8C61;&#x5904;&#x7406;&#x65F6;&#x95F4;&#x5C5E;&#x6027;&#x65F6;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x884C;&#x4E3A;&#xFF0C;<code>LocalDate</code>&#x3001;<code>LocalDateTime</code>&#x3001;<code>LocalTime</code>&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x90FD;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#xFF0C;&#x8FD8;&#x8981;&#x7981;&#x7528;&#x5C06;&#x65E5;&#x671F;&#x5E8F;&#x5217;&#x5316;&#x4E3A;&#x65F6;&#x95F4;&#x6233;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">public class RedisConfig {</span><br><span class="line">    @Bean</span><br><span class="line">    public RedisSerializer&lt;Object&gt; redisSerializer() {</span><br><span class="line">        ObjectMapper objectMapper = new ObjectMapper();</span><br><span class="line">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        // &#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x5C06;JSON&#x8F6C;&#x5316;&#x4E3A;&#x5BF9;&#x8C61;&#xFF0C;&#x4F1A;&#x8F6C;&#x5316;&#x6210;Map&#x7C7B;&#x578B;</span><br><span class="line">        objectMapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line"></span><br><span class="line">        // &#x81EA;&#x5B9A;&#x4E49;ObjectMapper&#x7684;&#x65F6;&#x95F4;&#x5904;&#x7406;&#x6A21;&#x5757;</span><br><span class="line">        JavaTimeModule javaTimeModule = new JavaTimeModule();</span><br><span class="line"></span><br><span class="line">        javaTimeModule.addSerializer(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)));</span><br><span class="line">        javaTimeModule.addDeserializer(LocalDateTime.class, new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)));</span><br><span class="line"></span><br><span class="line">        javaTimeModule.addSerializer(LocalDate.class, new LocalDateSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));</span><br><span class="line">        javaTimeModule.addDeserializer(LocalDate.class, new LocalDateDeserializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)));</span><br><span class="line"></span><br><span class="line">        javaTimeModule.addSerializer(LocalTime.class, new LocalTimeSerializer(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;)));</span><br><span class="line">        javaTimeModule.addDeserializer(LocalTime.class, new LocalTimeDeserializer(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;)));</span><br><span class="line"></span><br><span class="line">        objectMapper.registerModule(javaTimeModule);</span><br><span class="line">        </span><br><span class="line">        // &#x7981;&#x7528;&#x5C06;&#x65E5;&#x671F;&#x5E8F;&#x5217;&#x5316;&#x4E3A;&#x65F6;&#x95F4;&#x6233;&#x7684;&#x884C;&#x4E3A;</span><br><span class="line">        objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class="line">        </span><br><span class="line">        //&#x521B;&#x5EFA;JSON&#x5E8F;&#x5217;&#x5316;&#x5668;</span><br><span class="line">        return new Jackson2JsonRedisSerializer&lt;&gt;(objectMapper, Object.class);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="2-2-LocalDateTime&#x548C;LocalDate&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#x7684;&#x503C;&#x683C;&#x5F0F;&#x4E0D;&#x6B63;&#x786E;"><a href="#2-2-LocalDateTime&#x548C;LocalDate&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#x7684;&#x503C;&#x683C;&#x5F0F;&#x4E0D;&#x6B63;&#x786E;" class="headerlink" title="2.2 LocalDateTime&#x548C;LocalDate&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#x7684;&#x503C;&#x683C;&#x5F0F;&#x4E0D;&#x6B63;&#x786E;"></a>2.2 LocalDateTime&#x548C;LocalDate&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#x7684;&#x503C;&#x683C;&#x5F0F;&#x4E0D;&#x6B63;&#x786E;</h3><h4 id="2-2-1-&#x95EE;&#x9898;&#x73B0;&#x8C61;"><a href="#2-2-1-&#x95EE;&#x9898;&#x73B0;&#x8C61;" class="headerlink" title="2.2.1 &#x95EE;&#x9898;&#x73B0;&#x8C61;"></a>2.2.1 &#x95EE;&#x9898;&#x73B0;&#x8C61;</h4><p>&#x5728;application.yml&#x4E2D;&#x8BBE;&#x7F6E;&#x4E86;&#x5168;&#x5C40;&#x7684;&#x65E5;&#x671F;&#x7C7B;&#x578B;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x683C;&#x5F0F;&#xFF0C;&#x5728;&#x5BF9;&#x5E94;&#x5B57;&#x6BB5;&#x4E0A;&#x4E5F;&#x5E76;&#x6CA1;&#x6709;&#x4F7F;&#x7528;@JsonFormat&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F46;&#x662F;LocalDateTime&#x7C7B;&#x578B;&#x7684;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#x65F6;&#x5E76;&#x6CA1;&#x6709;&#x751F;&#x6548;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;&#x4ECD;&#x662F;LocalDateTime&#x9ED8;&#x8BA4;&#x7684;ISO&#x6807;&#x51C6;&#x65F6;&#x95F4;&#x683C;&#x5F0F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;spring:</span><br><span class="line">  jackson:</span><br><span class="line">    date-format: yyyy-MM-dd HH:mm:ss</span><br><span class="line">    time-zone: GMT+8</span><br><span class="line">    default-property-inclusion: always</span><br><span class="line">  mvc:</span><br><span class="line">    format:</span><br><span class="line">      date-time: yyyy-MM-dd HH:mm:ss</span><br><span class="line">      date: dd/MM/yyyy</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/8424ff3fcb176f3f74a2e74e903286a875271de700d51d00a36b784cb5bf0bb2" alt="image.png"></p>
<h4 id="2-2-2-&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#2-2-2-&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="2.2.2 &#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>2.2.2 &#x89E3;&#x51B3;&#x65B9;&#x6848;</h4><p>&#x81EA;&#x5B9A;&#x4E49;Jackson&#x914D;&#x7F6E;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Configuration</span><br><span class="line">public class JacksonConfig {</span><br><span class="line">    @Bean</span><br><span class="line">    public Jackson2ObjectMapperBuilderCustomizer customizer() {</span><br><span class="line">        return builder -&gt;</span><br><span class="line">                builder.simpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;)</span><br><span class="line">                        // long&#x7C7B;&#x578B;&#x8F6C;string&#xFF0C; &#x524D;&#x7AEF;&#x5904;&#x7406;Long&#x7C7B;&#x578B;&#xFF0C;&#x6570;&#x503C;&#x8FC7;&#x5927;&#x4F1A;&#x4E22;&#x5931;&#x7CBE;&#x5EA6;</span><br><span class="line">                        .serializerByType(Long.class, ToStringSerializer.instance)</span><br><span class="line">                        .serializerByType(Long.TYPE, ToStringSerializer.instance)</span><br><span class="line">                        .serializationInclusion(JsonInclude.Include.NON_NULL)</span><br><span class="line">                        //&#x6307;&#x5B9A;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x7C7B;&#x578B;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)&#x66FF;&#x4EE3;&#x3002;&#x4E3B;&#x8981;&#x662F;mvc&#x63A5;&#x6536;&#x65E5;&#x671F;&#x65F6;&#x4F7F;&#x7528;</span><br><span class="line">                        .deserializerByType(LocalTime.class, new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;)))</span><br><span class="line">                        .deserializerByType(LocalDate.class, new LocalDateDeserializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)))</span><br><span class="line">                        .deserializerByType(LocalDateTime.class, new LocalDateTimeDeserializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)))</span><br><span class="line">                        // &#x65E5;&#x671F;&#x5E8F;&#x5217;&#x5316;&#xFF0C;&#x4E3B;&#x8981;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x65F6;&#x4F7F;&#x7528;</span><br><span class="line">                        .serializerByType(LocalTime.class, new LocalTimeSerializer(DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;)))</span><br><span class="line">                        .serializerByType(LocalDate.class, new LocalDateSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;)))</span><br><span class="line">                        .serializerByType(LocalDateTime.class, new LocalDateTimeSerializer(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E09;&#x3001;&#x603B;&#x7ED3;"><a href="#&#x4E09;&#x3001;&#x603B;&#x7ED3;" class="headerlink" title="&#x4E09;&#x3001;&#x603B;&#x7ED3;"></a>&#x4E09;&#x3001;&#x603B;&#x7ED3;</h2><p>&#x5728;&#x4F7F;&#x7528;java.time API&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x9664;&#x4E86;&#x4F1A;&#x9047;&#x5230;&#x524D;&#x6587;&#x6240;&#x8BF4;&#x7684;&#x5E8F;&#x5217;&#x5316;&#x95EE;&#x9898;&#x4E4B;&#x5916;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x4F1A;&#x9047;&#x5230;&#x4EE5;&#x4E0B;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>&#x65F6;&#x533A;&#x95EE;&#x9898;&#xFF1A;LocalDateTime&#x4E0D;&#x5305;&#x542B;&#x65F6;&#x533A;&#x4FE1;&#x606F;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x5728;&#x4E0D;&#x540C;&#x65F6;&#x533A;&#x7684;&#x7528;&#x6237;&#x4E4B;&#x95F4;&#x51FA;&#x73B0;&#x4E0D;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x60A8;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x4F7F;&#x7528;ZonedDateTime&#x6216;OffsetDateTime&#xFF0C;&#x5E76;&#x786E;&#x4FDD;&#x5728;&#x5904;&#x7406;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x65F6;&#x8003;&#x8651;&#x65F6;&#x533A;&#x3002;</li>
<li>&#x6570;&#x636E;&#x5E93;&#x4EA4;&#x4E92;&#xFF1A;&#x5F53;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4EA4;&#x4E92;&#x65F6;&#xFF0C;&#x8981;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x5E93;&#x5217;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4E0E;&#x6B63;&#x5728;&#x4F7F;&#x7528;&#x7684;Java&#x65E5;&#x671F;&#x7C7B;&#x578B;&#x76F8;&#x5339;&#x914D;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x662F;PostgreSQL&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4F7F;&#x7528;timestamp without time zone&#x5217;&#x7C7B;&#x578B;&#x6765;&#x5B58;&#x50A8;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x503C;&#x548C;&#x9A8C;&#x8BC1;&#xFF1A;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x4E3A;&#x65E5;&#x671F;&#x6216;&#x65F6;&#x95F4;&#x5B57;&#x6BB5;&#x8BBE;&#x7F6E;&#x9ED8;&#x8BA4;&#x503C;&#x6216;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;&#x4F7F;&#x7528;Spring&#x7684;&#x9A8C;&#x8BC1;&#x6CE8;&#x89E3;&#xFF08;&#x5982;@NotNull&#x6216;@Size&#xFF09;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x786E;&#x4FDD;&#x8F93;&#x5165;&#x7684;&#x6709;&#x6548;&#x6027;&#x3002;</li>
<li>&#x8DE8;&#x65F6;&#x533A;&#x5904;&#x7406;&#xFF1A;&#x7531;&#x4E8E;LocalDateTime&#x4E0D;&#x5305;&#x542B;&#x65F6;&#x533A;&#x4FE1;&#x606F;&#xFF0C;&#x5F53;&#x4E0E;&#x5168;&#x7403;&#x7528;&#x6237;&#x4E92;&#x52A8;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x7279;&#x522B;&#x6CE8;&#x610F;&#x65F6;&#x533A;&#x8F6C;&#x6362;&#x3002;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x50CF;Joda-Time&#x8FD9;&#x6837;&#x7684;&#x5E93;&#x6765;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5904;&#x7406;&#x590D;&#x6742;&#x7684;&#x65F6;&#x533A;&#x8F6C;&#x6362;&#x3002;</li>
<li>&#x5904;&#x7406;&#x8FC7;&#x53BB;&#x548C;&#x672A;&#x6765;&#x7684;&#x65E5;&#x671F;&#xFF1A;&#x5728;&#x5904;&#x7406;&#x5386;&#x53F2;&#x4E8B;&#x4EF6;&#x6216;&#x8BA1;&#x5212;&#x672A;&#x6765;&#x7684;&#x6D3B;&#x52A8;&#x65F6;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x6211;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x80FD;&#x591F;&#x6B63;&#x786E;&#x5730;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x65E5;&#x671F;&#x3002;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x50CF;Period&#x6216;Duration&#x8FD9;&#x6837;&#x7684;&#x7C7B;&#x6765;&#x8BA1;&#x7B97;&#x65E5;&#x671F;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x5F02;&#x3002;</li>
</ul>
<p>&#x6211;&#x4E5F;&#x4F1A;&#x53CA;&#x65F6;&#x7684;&#x66F4;&#x65B0;&#x540E;&#x7EED;&#x5B9E;&#x8DF5;&#x4E2D;&#x6240;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5E0C;&#x671B;&#x4E0E;&#x8BF8;&#x4F4D;&#x770B;&#x5B98;&#x4E00;&#x8D77;&#x8FDB;&#x6B65;&#x3002;</p>
<p>&#x5982;&#x6709;&#x9519;&#x8BEF;&#xFF0C;&#x8FD8;&#x671B;&#x6279;&#x8BC4;&#x6307;&#x6B63;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/fba44a6049af6c6830f15dea548fe9f1.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7325629654328967220.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7325629654328967220.html" itemprop="url">Android 同频共帧动画效果 同频共帧 现状 & 痛点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-19T22:28:12+08:00">
                2024-01-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x540C;&#x9891;&#x5171;&#x5E27;"><a href="#&#x540C;&#x9891;&#x5171;&#x5E27;" class="headerlink" title="&#x540C;&#x9891;&#x5171;&#x5E27;"></a>&#x540C;&#x9891;&#x5171;&#x5E27;</h1><p>&#x6211;&#x4EEC;&#x542C;&#x8FC7;&#x201C;&#x540C;&#x9891;&#x5171;&#x632F;&#x201D;&#xFF0C;&#x5176;&#x539F;&#x7406;&#x662F;&#x591A;&#x4E2A;&#x7269;&#x4F53;&#x7269;&#x4F53;&#x4EE5;&#x540C;&#x6837;&#x7684;&#x9891;&#x7387;&#x632F;&#x52A8;&#x3002;&#x672C;&#x7BC7;&#x5B9E;&#x73B0;&#x7684;&#x6548;&#x679C;&#x662F;&#x201C;&#x540C;&#x9891;&#x5171;&#x5E27;&#x201D;&#xFF0C;&#x4E24;&#x8005;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x8054;&#x7CFB;&#xFF0C;&#x4F46;&#x5C5E;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x6982;&#x5FF5;&#x3002;  </p>
<p>&#x201C;&#x540C;&#x9891;&#x5171;&#x5E27;&#x201D;&#x7684;&#x542B;&#x4E49;&#x662F;&#xFF1A;&#x4E00;&#x79CD;&#x52A8;&#x753B;&#x6548;&#x679C;&#xFF0C;&#x4EE5;&#x540C;&#x6837;&#x7684;&#x9891;&#x7387;&#x3001;&#x540C;&#x6837;&#x7684;&#x753B;&#x9762;&#x5C55;&#x793A;&#x5728;&#x591A;&#x4E2A;&#x4E0D;&#x540C;View&#x4E0A;&#x3002;</p>
<p>&#x7279;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x52A8;&#x753B;&#x6548;&#x679C;</li>
<li>&#x540C;&#x6837;&#x7684;&#x9891;&#x7387;</li>
<li>&#x540C;&#x4E00;&#x5E27; &#xFF08;&#x4E25;&#x683C;&#x610F;&#x4E49;&#x4E0A;&#x662F;&#x5C0F;&#x4E8E;1&#x4E2A;vsync&#x4FE1;&#x53F7;&#x7684;&#x5E27;&#xFF09;</li>
<li>&#x591A;&#x4E2A;&#x4E0D;&#x540C;View&#x540C;&#x65F6;&#x5C55;&#x793A;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x4F7F;&#x7528;6&#x4E2A;ImageView&#x6765;&#x540C;&#x6B65;&#x64AD;&#x653E;&#x540C;&#x4E00;&#x4E2A;&#x52A8;&#x753B;&#x3002;</p>
<p>&#x6548;&#x679C;1:</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/3d5a13d10b77c90d862b1e6d5f045305f1c872d3f52477d7652543aac95f8147" alt="fire_95.gif"></p>
<p>&#x6548;&#x679C;2:</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6b346bada24d3784d34a90133d4141ee5af7b537eeccd380f6d5ee19ccedd029" alt="fire_96.gif"></p>
<blockquote>
<p>&#x770B;&#x4F3C;&#x8FD9;&#x4E24;&#x79CD;&#x52A8;&#x753B;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x60F3;&#xFF0C;&#x76F4;&#x63A5;&#x521B;&#x5EFA;6&#x4E2A;AnimationDrawable&#x4E0D;&#x5C31;&#x884C;&#x4E86;&#xFF1F;&#x663E;&#x7136;&#x8FD9;&#x79CD;&#x505A;&#x6CD5;&#x4EC5;&#x4EC5;&#x9002;&#x5408;&#x56FE;&#x7247;&#x6570;&#x91CF;&#x6709;&#x9650;&#x6216;&#x8005;&#x5185;&#x5B58;&#x8F83;&#x5927;&#x7684;&#x8BBE;&#x5907;&#xFF0C;&#x53E6;&#x5916;AnimationDrawable&#x8D8A;&#x591A;&#xFF0C;&#x4F4E;&#x6027;&#x80FD;&#x8BBE;&#x5907;&#x7531;&#x4E8E;CPU&#x6027;&#x80FD;&#x5DEE;&#xFF0C;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5E27;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x539F;&#x5219;&#x4E0A;&#x8BF4;&#xFF0C;&#x672C;&#x7BC7;&#x662F;&#x5C5E;&#x4E8E;&#x52A8;&#x753B;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x7684;&#x6587;&#x7AE0;&#x3002;</p>
</blockquote>
<p>&#x573A;&#x666F;&#xFF1A;<br>&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E9B;&#x7EFC;&#x827A;&#x8282;&#x76EE;&#xFF0C;&#x7535;&#x89C6;&#x4E24;&#x4FA7;&#x90FD;&#x4F1A;&#x51FA;&#x73B0;&#x5404;&#x79CD;&#x706B;&#x7130;&#x3001;&#x793C;&#x82B1;&#x7B49;&#x6548;&#x679C;&#xFF0C;&#x800C;&#x4E14;&#x5DE6;&#x53F3;&#x662F;&#x5BF9;&#x79F0;&#x7684;&#xFF0C;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x5982;&#x679C;&#x4F60;&#x7ED9;&#x4E00;&#x4E2A;&#x8D85;&#x5927;&#x56FE;&#x7247;&#x53BB;&#x5B9E;&#x73B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5360;&#x7528;&#x5185;&#x5B58;&#x80AF;&#x5B9A;&#x4F1A;&#x5F88;&#x5927;&#xFF0C;&#x56E0;&#x6B64;&#x662F;&#x6700;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x8BA9;&#x52A8;&#x753B;&#x7ED8;&#x5236;&#x533A;&#x57DF;&#x66F4;&#x5C0F;&#x3002;</p>
<blockquote>
<p>&#x8FD9;&#x79CD;&#x52A8;&#x6548;&#x5176;&#x5B9E;&#x5728;&#x624B;&#x673A;&#x7248;QQ&#x4E0A;&#x5C31;&#x6709;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7ED9;&#x81EA;&#x5DF1;&#x7684;&#x5934;&#x50CF;&#x8BBE;&#x7F6E;&#x4E3A;&#x4E00;&#x4E2A;&#x52A8;&#x6001;&#x56FE;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x804A;&#x5929;&#x7FA4;&#x8FDE;&#x53D1;&#x591A;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x4E0A;&#x4F60;&#x7684;&#x5934;&#x50CF;&#x52A8;&#x753B;&#x662F;&#x540C;&#x6B65;&#x540C;&#x5E27;&#x7387;&#x5C55;&#x793A;&#x7684;&#x3002;</p>
</blockquote>
<h1 id="&#x73B0;&#x72B6;-amp-&#x75DB;&#x70B9;"><a href="#&#x73B0;&#x72B6;-amp-&#x75DB;&#x70B9;" class="headerlink" title="&#x73B0;&#x72B6; &amp; &#x75DB;&#x70B9;"></a>&#x73B0;&#x72B6; &amp; &#x75DB;&#x70B9;</h1><h2 id="&#x73B0;&#x72B6;"><a href="#&#x73B0;&#x72B6;" class="headerlink" title="&#x73B0;&#x72B6;"></a>&#x73B0;&#x72B6;</h2><p>&#x6211;&#x4EEC;&#x4EE5;&#x5E27;&#x52A8;&#x753B;&#x95EE;&#x9898;&#x5C55;&#x5F00;&#xFF0C;&#x8981;&#x77E5;&#x9053;&#x5E27;&#x52A8;&#x753B;&#x6709;&#x96BE;&#x4EE5;&#x5BB9;&#x5FCD;&#x7684;&#x5185;&#x5B58;&#x5360;&#x7528;&#x95EE;&#x9898;&#x3001;&#x4EE5;&#x53CA;&#x4E3B;&#x7EBF;&#x7A0B;&#x89E3;&#x7801;&#x95EE;&#x9898;&#xFF0C;&#x540C;&#x65F6;&#x5305;&#x4F53;&#x79EF;&#x95EE;&#x9898;&#x4E5F;&#x76F8;&#x5F53;&#x4E25;&#x91CD;&#xFF0C;&#x4E3A;&#x6B64;&#x5E02;&#x9762;&#x4E0A;&#x51FA;&#x73B0;&#x4E86;&#x5F88;&#x591A;&#x65B9;&#x6848;&#x3002;libpag&#x3001;lottie&#x3001;VapPlayer&#x3001;AlphaPlayer&#x3001;APNG&#x3001;GIF&#x3001;SVGA&#x3001;AnimationDrawable&#x7B49;&#x3002;&#x4F46;&#x4F60;&#x5728;&#x5F00;&#x53D1;&#x65F6;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x6BCF;&#x4E00;&#x79CD;&#x5F15;&#x64CE;&#x90FD;&#x6709;&#x81EA;&#x5DF1;&#x72EC;&#x7279;&#x7684;&#x4F18;&#x52BF;&#xFF0C;&#x4E5F;&#x6709;&#x81EA;&#x5DF1;&#x72EC;&#x7279;&#x7684;&#x52A3;&#x52BF;&#xFF0C;&#x4F60;&#x5F80;&#x5F80;&#x60F3;&#x7740;&#x7528;&#x4E00;&#x79CD;&#x5F15;&#x64CE;&#x7EDF;&#x4E00;&#x6240;&#x6709;&#x52A8;&#x6548;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x5F80;&#x5F80;&#x73B0;&#x5B9E;&#x4E0D;&#x5141;&#x8BB8;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x8BF4;&#x51E0;&#x5927;&#x5F15;&#x64CE;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF1A;</p>
<p>libPag&#xFF1A; &#x76EE;&#x524D;&#x652F;&#x6301;&#x529F;&#x80FD;&#x6700;&#x591A;&#x7684;&#x52A8;&#x6548;&#x5F15;&#x64CE;&#xFF0C;&#x666E;&#x901A;&#x52A8;&#x753B;&#x6027;&#x80FD;&#x4E5F;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#xFF0C;&#x76F8;&#x6BD4;&#x5176;&#x4ED6;&#x5F15;&#x64CE;&#x5FEB;&#x5F88;&#x591A;&#x3002;&#x8BE5;&#x5F15;&#x64CE;&#x4F7F;&#x7528;&#x81EA;&#x7814;&#x6E32;&#x67D3;&#x5F15;&#x64CE;&#x548C;&#x89E3;&#x7801;&#x5668;&#x5B9E;&#x73B0;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x9884;&#x5408;&#x6210;&#x52A8;&#x6548;&#xFF08;&#x8D85;&#x957F;&#x52A8;&#x6548;&#x548C;&#x590D;&#x6742;&#x52A8;&#x6548;&#x53EF;&#x80FD;&#x4F1A;&#x7528;&#x5230;&#xFF09;&#xFF0C;&#x7531;&#x4E8E;&#x5176;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x8F6F;&#x89E3;&#xFF0C;&#x5728;&#x4F4E;&#x914D;&#x8BBE;&#x5907;&#x4E0A;&#x6BD4;VapPlayer&#x548C;AlphaPlayer&#x5361;&#x7684;&#x591A;&#xFF0C;&#x53E6;&#x5916;lib so&#x76F8;&#x6BD4;&#x5176;&#x4ED6;&#x5F15;&#x64CE;&#x4E5F;&#x662F;&#x5927;&#x5F88;&#x591A;&#x3002;</p>
<p>VapPlayer/AlphaPlayer : &#x8FD9;&#x4E24;&#x79CD;&#x5176;&#x90FD;&#x662F;&#x901A;&#x8FC7;alpha &#x906E;&#x7F69;&#x5B9E;&#x73B0;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x8BBE;&#x5907;&#x786C;&#x89E3;&#x7801;&#x5668;&#xFF0C;&#x4E0D;&#x8FC7;&#xFF0C;VapPlayer&#x7F3A;&#x4E4F;&#x786C;&#x89E3;&#x7801;&#x5668;&#x7B5B;&#x9009;&#x673A;&#x5236;&#xFF0C;&#x5076;&#x5C14;&#x6709;&#x65F6;&#x4F1A;&#x62FF;&#x5230;&#x8F6F;&#x89E3;&#x7801;&#x5668;&#xFF0C;&#x53E6;&#x5916;&#x5176;&#x672C;&#x8EAB;&#x5B58;&#x5728;&#x97F3;&#x753B;&#x540C;&#x6B65;&#x95EE;&#x9898;&#xFF0C;&#x81F3;&#x4E8E;AlphaPlayer&#x628A;&#x64AD;&#x653E;&#x4EA4;&#x7ED9;&#x7CFB;&#x7EDF;&#x548C;&#x4E09;&#x65B9;&#x64AD;&#x653E;&#x5668;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x6B64;&#x7C7B;&#x95EE;&#x9898;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x97F3;&#x89C6;&#x9891;&#x7C7B;app&#xFF0C;&#x4ED6;&#x4EEC;&#x90FD;&#x6709;&#x5171;&#x540C;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7EC8;&#x7AEF;&#x8BBE;&#x5907;&#x4E0A;&#x786C;&#x89E3;&#x7801;&#x5668;&#x7684;&#x5B9E;&#x4F8B;&#x6570;&#x91CF;&#x662F;&#x53D7;&#x9650;&#x5236;&#x7684;&#xFF0C;&#x751A;&#x81F3;&#x6709;&#x7684;&#x8BBE;&#x5907;&#x89E3;&#x7801;&#x5668;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x8FD9;&#x79CD;&#x89E3;&#x7801;&#x5668;&#x5C31;&#x4F1A;&#x9020;&#x6210;&#x4E1A;&#x52A1;&#x64AD;&#x653E;&#x5668;&#x7EFF;&#x5C4F;&#x3001;&#x8D77;&#x64AD;&#x5931;&#x8D25;&#x3001;&#x89E3;&#x7801;&#x5668;&#x5361;&#x4F4F;&#x7B49;&#x95EE;&#x9898;&#x3002;&#x4E0D;&#x8FC7;&#x89E3;&#x51B3;&#x529E;&#x6CD5;&#x662F;&#x5C06;&#x7279;&#x6548;&#x548C;&#x4E1A;&#x52A1;&#x64AD;&#x653E;&#x5668;&#x8D44;&#x6E90;&#x7C7B;&#x578B;&#x9694;&#x79BB;&#xFF0C;&#x5982;&#x679C;&#x4E1A;&#x52A1;&#x64AD;&#x653E;&#x5668;&#x662F;&#x4F7F;&#x7528;h264&#x8D44;&#x6E90;&#xFF0C;&#x90A3;&#x4E48;&#x52A8;&#x6548;&#x64AD;&#x653E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;h265&#x3001;mpeg2&#x3001;av1&#x7B49;&#x5176;&#x4ED6;&#x7F16;&#x7801;&#x7C7B;&#x578B;&#x8D44;&#x6E90;&#xFF0C;&#x4EE5;&#x6B64;&#x89C4;&#x907F;&#x89E3;&#x7801;&#x5668;&#x7ADE;&#x4E89;&#x3002;</p>
<p>lottie&#xFF1A; lottie&#x76EE;&#x524D;&#x662F;&#x6BD4;&#x8F83;&#x5E7F;&#x4E3A;&#x4EBA;&#x77E5;&#x7684;&#x52A8;&#x6548;&#x5F15;&#x64CE;&#xFF0C;&#x4F7F;&#x7528;&#x4E5F;&#x76F8;&#x5F53;&#x5E7F;&#x6CDB;&#xFF0C;&#x4E0A;&#x624B;&#x96BE;&#x5EA6;&#x4E5F;&#x6BD4;&#x8F83;&#x4F4E;&#xFF0C;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x5927;&#x90E8;&#x5206;&#x52A8;&#x6548;&#x64AD;&#x653E;&#x95EE;&#x9898;&#x3002;&#x4F46;lottie&#x52A8;&#x6548;&#x4E5F;&#x5B58;&#x5728;&#x4E00;&#x4E9B;&#x8DE8;&#x5E73;&#x53F0;&#x517C;&#x5BB9;&#x6027;&#xFF0C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x9002;&#x914D;&#xFF0C;&#x5176;&#x6B21;&#x7F3A;&#x5C11;&#x5F88;&#x591A;&#x7279;&#x6548;&#x652F;&#x6301;&#xFF0C;&#x6027;&#x80FD;&#x65B9;&#x9762;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x5176;&#x6027;&#x80FD;&#x662F;&#x4E0D;&#x5982;libpag&#x7684;&#x3002;&#x4E0D;&#x8FC7;&#x603B;&#x4F53;&#x80FD;&#x8986;&#x76D6;&#x5230;&#x5927;&#x90E8;&#x5206;&#x573A;&#x666F;&#xFF0C;&#x81F3;&#x4E8E;&#x517C;&#x5BB9;&#x6027;&#x95EE;&#x9898;&#x6BCF;&#x4E2A;&#x5E73;&#x53F0;&#x5355;&#x72EC;&#x63D0;&#x4F9B;&#x4E0D;&#x540C;&#x7684;lottie&#x89C4;&#x5219;&#x5373;&#x53EF;&#x3002;  </p>
<p>&#x5176;&#x5B9E;&#xFF0C;lottie&#x5F00;&#x53D1;&#x4E5F;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x96BE;&#x5EA6;&#x3002;&#x5F00;&#x53D1;&#x4E2D;&#x5E38;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;&#x662F;&#xFF0C;UI&#x8BBE;&#x8BA1;&#x4EBA;&#x5458;&#x5BF9;&#x4E8E;lottie&#x7684;compose layer&#x7406;&#x89E3;&#x5B58;&#x5728;&#x95EE;&#x9898;&#xFF0C;&#x5F80;&#x5F80;&#x4F1A;&#x51FA;&#x73B0;&#x5C06;lottie&#x52A8;&#x753B;&#x505A;&#x6210;&#x548C;&#x5E27;&#x52A8;&#x753B;&#x4E00;&#x6837;&#x7684;&#x52A8;&#x753B;&#xFF0C;&#x663E;&#x7136;&#xFF0C;compose layer&#x7684;&#x601D;&#x60F3;&#x662F;&#x591A;&#x5F20;&#x56FE;&#x7247;&#x5408;&#x6210;&#xFF0C;&#x90A3;&#x5C31;&#x610F;&#x5473;&#x7740;&#x56FE;&#x7247;&#x672C;&#x8EAB;&#x5E94;&#x8BE5;&#x6709;&#x5927;&#x6709;&#x5C0F;&#xFF0C;&#x6309;&#x4E00;&#x5B9A;&#x8F68;&#x8FF9;&#x8FD0;&#x52A8;&#x548C;&#x6E10;&#x53D8;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7C7B;&#x4F3C;&#x5E27;&#x52A8;&#x753B;&#x4E00;&#x6837;&#x4E00;&#x5E27;&#x4E00;&#x5E27;&#x7B80;&#x5355;&#x64AD;&#x653E;&#x3002;</p>
<p>APNG&#x3001;GIF&#x3001; WebP&#xFF1A; &#x8FD9;&#x7C7B;&#x52A8;&#x753B;&#x5C5E;&#x4E8E;&#x8D44;&#x6E90;&#x578B;&#x52A8;&#x753B;&#xFF0C;&#x5176;&#x672C;&#x8EAB;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x7F3A;&#x70B9;&#xFF0C;&#x6BD4;&#x5982;&#x5360;&#x5185;&#x5B58;&#x548C;&#x8017;cpu&#xFF0C;&#x53E6;&#x5916;APNG&#x548C;WebP&#x517C;&#x5BB9;&#x6027;&#x4E0D;&#x8DB3;&#xFF0C;&#x4E0D;&#x8FC7;&#x7B80;&#x77ED;&#x7684;&#x52A8;&#x6548;&#x7684;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x7279;&#x522B;&#x662F;WebP&#x5728;Android&#x3001;Web&#x3001;&#x90E8;&#x5206;iOS&#x8BBE;&#x5907;&#x4E0A;&#x4F18;&#x52BF;&#x4E5F;&#x6BD4;&#x8F83;&#x5927;&#x3002;</p>
<p>SVGA&#xFF1A;&#x5F88;&#x591A;&#x5E73;&#x53F0;&#x5BF9;&#x8FD9;&#x79CD;&#x52A8;&#x753B;&#x62B1;&#x6709;&#x671F;&#x5F85;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5176;&#x77E2;&#x91CF;&#x6027;&#x8D28;&#x548C;&#x4F4E;&#x5185;&#x5B58;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x7136;&#x800C;&#xFF0C;&#x5176;&#x672C;&#x8EAB;&#x9762;&#x4E34;&#x6807;&#x51C6;&#x4E0D;&#x7EDF;&#x4E00;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9020;&#x6210;&#x8DE8;&#x5E73;&#x53F0;&#x7684;&#x80FD;&#x529B;&#x4E0D;&#x8DB3;&#xFF0C;&#x5176;&#x6B21;&#x662F;&#x56E0;&#x4E3A;SVGA&#x9700;&#x8981;&#x8F6C;&#x4E3A;Path&#x7ED8;&#x5236;&#xFF0C;&#x4F46;Path&#x7684;&#x7ED8;&#x5236;&#x975E;&#x5E38;&#x6D88;&#x8017;&#x6027;&#x80FD;&#x3002;</p>
<p>LazyAnimationDrawable&#xFF1A;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x52A8;&#x753B;&#x5BF9;&#x4F4E;&#x914D;&#x8BBE;&#x5907;&#x90FD;&#x4E0D;&#x53CB;&#x597D;&#xFF0C;&#x5E27;&#x52A8;&#x753B;&#x6BD4;&#x4E0A;&#x4E0D;&#x8DB3;&#x6BD4;&#x4E0B;&#x6709;&#x4F59;&#xFF0C;&#x4F4E;&#x914D;&#x8BBE;&#x5907;&#x4E0A;&#xFF0C;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;libpag&#x3001;VapPlayer&#x3001;lottie&#x5BF9;&#x4F4E;&#x914D;&#x8BBE;&#x5907;&#x4E0A;&#x97F3;&#x89C6;&#x9891;&#x7C7B;app&#x4E0D;&#x53CB;&#x597D;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F7F;&#x7528;AnimationDrawble&#x663E;&#x7136;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5F80;&#x5F80;&#x4F1A;&#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x5DF1;&#x7684;AnimationDrawable&#xFF0C;&#x4F7F;&#x5176;&#x5177;&#x5907;&#x515C;&#x5E95;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x4E3B;&#x8981;&#x539F;&#x7406;&#xFF1A; &#x72EC;&#x7ACB;&#x7EBF;&#x7A0B;&#x89E3;&#x7801; + &#x5C55;&#x793A;&#x4E00;&#x5E27;&#x9884; + &#x52A0;&#x8F7D;&#x4E0B;&#x4E00;&#x5E27; + &#x5E27;&#x7F13;&#x5B58;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x5C31;&#x662F;LazyAnimationDrawable&#x3002;</p>
<h2 id="&#x75DB;&#x70B9;"><a href="#&#x75DB;&#x70B9;" class="headerlink" title="&#x75DB;&#x70B9;"></a>&#x75DB;&#x70B9;</h2><p>&#x4EE5;&#x4E0A;&#x6211;&#x4EEC;&#x7F57;&#x5217;&#x4E86;&#x5F88;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x770B;&#x4F3C;&#x548C;&#x6211;&#x4EEC;&#x7684;&#x4E3B;&#x8981;&#x76EE;&#x7684;&#x6BEB;&#x65E0;&#x5173;&#x7CFB;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x60F3;&#x60F3;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x4E0A;&#x8FF0;&#x5F15;&#x64CE;&#xFF0C;&#x54EA;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x517C;&#x5BB9;&#x6027;&#x66F4;&#x597D;&#x7684;&#x201C;&#x540C;&#x9891;&#x5171;&#x5E27;&#x201D;&#x52A8;&#x6548;&#x5462; &#xFF1F;</p>
<p>&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x51E0;&#x4E4E;&#x6CA1;&#x6709;&#x5F15;&#x64CE;&#x80FD;&#x627F;&#x62C5;&#x6B64;&#x4EFB;&#x52A1;&#xFF0C;&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x529E;&#x6CD5;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;</p>
<h1 id="&#x539F;&#x7406;"><a href="#&#x539F;&#x7406;" class="headerlink" title="&#x539F;&#x7406;"></a>&#x539F;&#x7406;</h1><p>&#x6211;&#x4EEC;&#x5F88;&#x96BE;&#x8BA9;&#x6BCF;&#x4E2A;View&#x540C;&#x65F6;&#x6267;&#x884C;&#x548C;&#x7ED8;&#x5236;&#x540C;&#x6837;&#x7684;&#x753B;&#x9762;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x8BA1;&#x591A;&#x4E2A;View&#x7ED8;&#x5236;Bitmap&#xFF0C;&#x90A3;&#x4E48;&#x8FD8;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x8D44;&#x6E90;&#x52A0;&#x8F7D;&#x7684;&#x5185;&#x5B58;OOM&#x7684;&#x95EE;&#x9898;&#x3002;&#x53E6;&#x5916;&#x4E00;&#x65B9;&#x9762;&#x5982;&#x679C;&#x4F7F;&#x7528;LazyAnimationDrawable&#x3001;VapX&#x3001;AlphaPlayer&#x7B49;&#xFF0C;&#x540C;&#x65F6;&#x6267;&#x884C;&#x76F8;&#x540C;&#x7684;&#x52A8;&#x6548;&#xFF0C;&#x90A3;&#x4E48;&#x89E3;&#x7801;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x591A;&#x4E2A;&#xFF0C;&#x663E;&#x7136;&#x6027;&#x80FD;&#x3001;&#x5185;&#x5B58;&#x95EE;&#x9898;&#x4E5F;&#x662F;&#x91CD;&#x4E2D;&#x4E4B;&#x91CD;&#x3002;</p>
<p>&#x6709;&#x6CA1;&#x6709;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x65B9;&#x6CD5;&#x5462; &#xFF1F;</p>
<p>&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x6709;&#x7684;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x6295;&#x5F71;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x65E0;&#x8BBA;&#x4F7F;&#x7528;CompositeDrawable&#x3001;LazyAnimationDrawable&#x3001;AnimationDrawable&#x8FD8;&#x662F;VectorDrawable&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5728;&#x4F7F;&#x7528;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x753B;&#x9762;&#x7ED8;&#x5236;&#x5230;&#x4E0D;&#x540C;View&#x4E0A;&#x5373;&#x53EF;&#x3002;</p>
<p><strong>&#x4E0D;&#x8FC7;&#xFF1A;&#x672C;&#x7BC7;&#x4EE5;AnimationDrawable &#x4E3A;&#x4F8B;&#x5B50;&#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x5B9E;&#x5176;&#x4ED6;Drawable&#x52A8;&#x753B;&#x7C7B;&#x4F3C;&#x3002;</strong></p>
<h1 id="&#x5B9E;&#x73B0;"><a href="#&#x5B9E;&#x73B0;" class="headerlink" title="&#x5B9E;&#x73B0;"></a>&#x5B9E;&#x73B0;</h1><p>&#x8FD9;&#x79CD;&#x96BE;&#x5EA6;&#x4E5F;&#x662F;&#x5F88;&#x9AD8;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;View &#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x64AD;&#x653E;&#x5668;&#xFF0C;&#x663E;&#x7136;&#x8FD8;&#x8981;&#x5904;&#x7406;View&#x5404;&#x79CD;&#x72B6;&#x6001;&#xFF0C;&#x663E;&#x7136;&#x907F;&#x514D;&#x4E0D;&#x4E86;&#x8026;&#x5408;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x56DE;&#x5230;&#x5F00;&#x5934;&#x8BF4;&#x8FC7;&#x7684;drawable&#x65B9;&#x6848;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x4E00;&#x4E2A;drawable&#x663E;&#x7136;&#x65E0;&#x6CD5;&#x8BBE;&#x7F6E;&#x7ED9;&#x591A;&#x4E2A;View&#xFF0C;&#x8FD9;&#x70B9;&#x663E;&#x7136;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5904;&#x7406;&#x7684;&#x96BE;&#x70B9;&#xFF0C;&#x6B64;&#x5916;&#xFF0C;&#x6BCF;&#x4E2A;View&#x7684;&#x5927;&#x5C0F;&#x4E5F;&#x4E0D;&#x4E00;&#x81F4;&#xFF0C;&#x5982;&#x4F55;&#x5904;&#x7406;&#x8FD9;&#x79CD;&#x95EE;&#x9898;&#x5462;&#x3002;</p>
<p>&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x5F88;&#x591A;&#x52A8;&#x6548;&#xFF0C;&#x4F46;&#x51E0;&#x4E4E;&#x90FD;&#x662F;&#x57FA;&#x4E8E;View&#x672C;&#x8EAB;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x5728;Android&#x4E2D;&#xFF0C;Drawable&#x6700;&#x5BB9;&#x6613;&#x6269;&#x5C55;&#x548C;&#x79FB;&#x690D;&#x7684;&#x6E32;&#x67D3;&#x7EC4;&#x4EF6;&#x3002;&#x901A;&#x8FC7;Drawable&#x63D0;&#x4F9B;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x63A5;&#x5165;libpag&#x3001;lottie&#x3001;SVG&#x3001;APNG&#x3001;gif&#xFF0C;LazyAnimationDrawable&#x3001;AnimationDrawable&#x7B49;&#x52A8;&#x6548;&#xFF0C;&#x66F4;&#x52A0;&#x65B9;&#x4FBF;&#x79FB;&#x690D;&#xFF0C;&#x540C;&#x65F6;Drawable&#x652F;&#x6301;setHotspot&#x548C;setState&#x63A5;&#x53E3;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x590D;&#x6742;&#x5EA6;&#x8F83;&#x4F4E;&#x7684;&#x4EA4;&#x4E92;&#x6548;&#x679C;&#x3002;</p>
<h3 id="Drawable-Wrapper"><a href="#Drawable-Wrapper" class="headerlink" title="Drawable Wrapper"></a>Drawable Wrapper</h3><p>&#x4E00;&#x4E2A;Drawable&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x7ED9;&#x4E0D;&#x540C;&#x7684;View&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x591A;&#x4E2A;Drawable&#x4ECE;&#x76EE;&#x6807;Drawable&#x4E0A;&#x201C;&#x6295;&#x5F71;&#x201D;&#x753B;&#x9762;&#x5230;&#x81EA;&#x8EAB;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53C2;&#x8003;Glide&#x4E2D;com.bumptech.glide.request.target.FixedSizeDrawable &#x5B9E;&#x73B0;&#xFF0C;&#x5176;&#x539F;&#x7406;&#x662F;&#x901A;&#x8FC7;FixedSizeDrawable&#x4EE3;&#x7406;&#x771F;&#x5B9E;&#x7684;drawble&#x7ED8;&#x5236;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x6295;&#x5F71;&#x6548;&#x679C;&#x3002;&#x5728;drawable&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x5229;&#x7528;Matrix&#x5B9E;&#x73B0;Canvas&#x7F29;&#x653E;&#xFF0C;&#x5373;&#x53EF;&#x9002;&#x914D;&#x4E0D;&#x540C;&#x5927;&#x5C0F;&#x7684;View&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;FixedSizeDrawable(State state, Drawable wrapped) {</span><br><span class="line">  this.state = Preconditions.checkNotNull(state);</span><br><span class="line">  this.wrapped = Preconditions.checkNotNull(wrapped);</span><br><span class="line"></span><br><span class="line">  // We will do our own scaling.</span><br><span class="line">  wrapped.setBounds(0, 0, wrapped.getIntrinsicWidth(), wrapped.getIntrinsicHeight());</span><br><span class="line"></span><br><span class="line">  matrix = new Matrix();</span><br><span class="line">  wrappedRect = new RectF(0, 0, wrapped.getIntrinsicWidth(), wrapped.getIntrinsicHeight());</span><br><span class="line">  bounds = new RectF();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Matrix &#x7684;&#x4F5C;&#x7528;&#xFF1A;</p>
<p>&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x5C06;&#x539F;&#x6709;&#x7684;&#x753B;&#x9762;&#x7F29;&#x653E;&#x81F3;&#x76EE;&#x6807;View</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;matrix.setRectToRect(wrappedRect, drawableBounds, Matrix.ScaleToFit.CENTER);</span><br><span class="line">canvas.concat(matrix);  //Canvas Matrix &#x8F6C;&#x6362;</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#xFF0C;&#x5FC5;&#x8981;&#x65F6;&#x652F;&#x6301;&#x4E0B;alpha&#x548C;colorFilter&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x5B9E;&#x73B0;&#x53D8;&#x8272;&#x6548;&#x679C;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x5B8C;&#x6574;&#x5B9E;&#x73B0;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public static class AnimationDrawableWrapper extends Drawable {</span><br><span class="line"></span><br><span class="line">    private final Drawable animationDrawable; //&#x52A8;&#x753B;drawable</span><br><span class="line">    private final Matrix matrix = new Matrix();</span><br><span class="line">    private final RectF wrappedRect;</span><br><span class="line">    private final RectF drawableBounds;</span><br><span class="line">    private final Matrix.ScaleToFit scaleToFit;</span><br><span class="line">    private int alpha = 255;</span><br><span class="line">    private ColorFilter colorFilter;</span><br><span class="line"></span><br><span class="line">    public AnimationDrawableWrapper(Drawable drawable, Matrix.ScaleToFit scaleToFit) {</span><br><span class="line">        this.animationDrawable = drawable;</span><br><span class="line">        this.wrappedRect = new RectF(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());</span><br><span class="line">        this.drawableBounds = new RectF();</span><br><span class="line">        this.scaleToFit = scaleToFit;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void draw(Canvas canvas) {</span><br><span class="line">        Drawable current = animationDrawable.getCurrent();</span><br><span class="line">        if (current == null) {</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line">        current.setAlpha(this.alpha);</span><br><span class="line">        current.setColorFilter(this.colorFilter);</span><br><span class="line">        Rect drawableRect = current.getBounds();</span><br><span class="line">        wrappedRect.set(drawableRect);</span><br><span class="line">        drawableBounds.set(getBounds());</span><br><span class="line"></span><br><span class="line">        // &#x53D8;&#x5316;&#x5750;&#x6807;</span><br><span class="line">        matrix.setRectToRect(wrappedRect, drawableBounds, scaleToFit);</span><br><span class="line"></span><br><span class="line">        int save = canvas.save();</span><br><span class="line"></span><br><span class="line">        canvas.concat(matrix);</span><br><span class="line">        current.draw(canvas);</span><br><span class="line"></span><br><span class="line">        canvas.restoreToCount(save);</span><br><span class="line"></span><br><span class="line">        current.setAlpha(255);//&#x8FD8;&#x539F;</span><br><span class="line">        current.setColorFilter(null); //&#x8FD8;&#x539F;</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setAlpha(int alpha) {</span><br><span class="line">        this.alpha = alpha;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setColorFilter(ColorFilter colorFilter) {</span><br><span class="line">        this.colorFilter = colorFilter;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int getOpacity() {</span><br><span class="line">        return PixelFormat.TRANSLUCENT;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="View&#x66F4;&#x65B0;"><a href="#View&#x66F4;&#x65B0;" class="headerlink" title="View&#x66F4;&#x65B0;"></a>View&#x66F4;&#x65B0;</h3><p>&#x6211;&#x4EEC;&#x77E5;&#x9053;AnimationDrawable&#x6BCF;&#x4E00;&#x5E27;&#x90FD;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x90A3;&#x600E;&#x4E48;&#x5C06;&#x6BCF;&#x4E00;&#x5E27;&#x90FD;&#x80FD;&#x7ED8;&#x5236;&#x5728;View&#x4E0A;&#x5462;&#xFF0C;&#x4E86;&#x89E3;&#x8FC7;Drawable&#x66F4;&#x65B0;&#x673A;&#x5236;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;View&#x90FD;&#x5B9E;&#x73B0;&#x4E86;Drawable.Callback&#xFF0C;&#x5F53;&#x7ED9;View&#x8BBE;&#x7F6E;drawable&#x65F6;&#xFF0C;Drawable.Callback&#x4E5F;&#x4F1A;&#x8BBE;&#x7F6E;&#x7ED9;drawable&#x3002;</p>
<p>Drawable&#x5237;&#x65B0;View&#x65F6;&#x9700;&#x8981;&#x8C03;&#x7528;invalidate&#xFF0C;&#x663E;&#x7136;&#x662F;&#x901A;&#x8FC7;Drawable.Callback&#x5B9E;&#x73B0;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;Drawable&#x81EA;&#x8EAB;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x66F4;&#x65B0;&#x65B9;&#x6CD5;Drawable#invalidateSelf&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x8C03;&#x7528;&#x6539;&#x65B9;&#x6CD5;&#x5237;&#x65B0;View&#x5373;&#x53EF;&#x89E6;&#x53D1;View#onDraw&#xFF0C;&#x4ECE;&#x800C;&#x89E6;&#x53D1;drawable#draw&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public void invalidateSelf() {</span><br><span class="line">    final Callback callback = getCallback();</span><br><span class="line">    if (callback != null) {</span><br><span class="line">        callback.invalidateDrawable(this);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x66F4;&#x65B0;AnimationDrawable"><a href="#&#x66F4;&#x65B0;AnimationDrawable" class="headerlink" title="&#x66F4;&#x65B0;AnimationDrawable"></a>&#x66F4;&#x65B0;AnimationDrawable</h3><p>&#x663E;&#x7136;&#xFF0C;&#x4EFB;&#x4F55;&#x52A8;&#x753B;&#x90FD;&#x5177;&#x5907;&#x65F6;&#x95F4;&#x5C5E;&#x6027;&#xFF0C;&#x56E0;&#x6B64;&#x66F4;&#x65B0;Drawable&#x662F;&#x5FC5;&#x8981;&#x7684;&#xFF0C;View&#x672C;&#x8EAB;&#x662F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Drawable.Callback&#x673A;&#x5236;&#x66F4;&#x65B0;Drawable&#x7684;&#x3002;&#x901A;&#x8FC7;scheduleDrawable&#x548C;unscheduleDrawable &#x5B9A;&#x65F6;&#x5904;&#x7406;Runnable&#x548C;&#x53D6;&#x6D88;Runnable&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public interface Callback {</span><br><span class="line"></span><br><span class="line">    void invalidateDrawable(@NonNull Drawable who);</span><br><span class="line">  </span><br><span class="line">    void scheduleDrawable(@NonNull Drawable who, @NonNull Runnable what, long when);</span><br><span class="line"></span><br><span class="line">    void unscheduleDrawable(@NonNull Drawable who, @NonNull Runnable what);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x800C;AnimationDrawable&#x5B9E;&#x73B0;&#x4E86;Runnable&#x63A5;&#x53E3;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Override</span><br><span class="line">public void run() {</span><br><span class="line">    nextFrame(false);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x800C;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;RecyclerView&#xFF0C;&#x90A3;&#x4E48;&#x8FD8;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;View &#x4ECE;&#x9875;&#x9762;&#x79FB;&#x9664;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x6B64;&#x4F9D;&#x9760;View&#x663E;&#x7136;&#x662F;&#x4E0D;&#x884C;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5F15;&#x5165;Handler&#x6216;&#x8005;Choreograper&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;this.choreographer = Choreographer.getInstance();</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x5462;&#xFF1F;&#x663E;&#x7136;&#x8FD8;&#x5F97;&#x5229;&#x7528;Drawable.Callback&#x673A;&#x5236;</p>
<p>&#x7ED9;animationDrawable&#x8BBE;&#x7F6E;Drawable.Callback</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;this.drawable.setCallback(callback);</span><br></pre></td></tr></table></figure>

<p>&#x66F4;&#x65B0;&#x903B;&#x8F91;&#x5B9E;&#x73B0;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Override</span><br><span class="line">public void invalidateDrawable(@NonNull Drawable who) {</span><br><span class="line">//&#x66F4;&#x65B0;&#x6240;&#x6709;wrapper</span><br><span class="line">    for (int i = 0; i &lt; drawableList.size(); i++) {</span><br><span class="line">        WeakReference&lt;AnimationDrawableWrapper&gt; reference = drawableList.get(i);</span><br><span class="line">        AnimationDrawableWrapper wrapper = reference.get();</span><br><span class="line">        if (wrapper == null) {</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line">        wrapper.invalidateSelf();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void scheduleDrawable(@NonNull Drawable who, @NonNull Runnable what, long when) {</span><br><span class="line">    this.scheduleTask = what;</span><br><span class="line">    this.choreographer.postFrameCallbackDelayed(this, when - SystemClock.uptimeMillis());</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void unscheduleDrawable(@NonNull Drawable who, @NonNull Runnable what) {</span><br><span class="line">    this.scheduleTask = null;</span><br><span class="line">    this.choreographer.removeFrameCallback(this);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x65E2;&#x7136;&#x4F7F;&#x7528;Choreographer&#xFF0C;&#x90A3;doFrame&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Override</span><br><span class="line">public void doFrame(long frameTimeNanos) {</span><br><span class="line">    if(this.scheduleTask != null) {</span><br><span class="line">        this.scheduleTask.run();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x597D;&#x4E86;&#xFF0C;&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x6838;&#x5FC3;&#x903B;&#x8F91;&#xFF0C;&#x5230;&#x6B64;&#x6211;&#x4EEC;&#x5C31;&#x5B9E;&#x73B0;&#x4E86;&#x6838;&#x5FC3;&#x903B;&#x8F91;</p>
<h3 id="&#x5B8C;&#x6574;&#x4EE3;&#x7801;"><a href="#&#x5B8C;&#x6574;&#x4EE3;&#x7801;" class="headerlink" title="&#x5B8C;&#x6574;&#x4EE3;&#x7801;"></a>&#x5B8C;&#x6574;&#x4EE3;&#x7801;</h3><p>&#x4E0B;&#x9762;&#x662F;&#x955C;&#x50CF;&#x52A8;&#x753B;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x6BD4;&#x8F83;&#x6210;&#x719F;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x63A5;&#x5165;&#x4E86;LazyAnimationDrawable&#x3002;</p>
<blockquote>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x6CA1;&#x6709;LazyAnimationDrawable&#x7684;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#xFF0C;&#x5220;&#x6389;LazyAnimationDrawable&#x7684;&#x5F15;&#xFF0C;&#x4EC5;&#x4EC5;&#x901A;&#x8FC7;AnimationDrawable&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x7684;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4F60;&#x8FD8;&#x53EF;&#x6DFB;&#x52A0;&#x5176;&#x4ED6;&#x52A8;&#x753B;&#x5B9E;&#x73B0;&#xFF0C;&#x6BD4;&#x5982;VerctorDrawable&#x7B49;&#x3002;</p>
</blockquote>
<p>&#x6211;&#x4EEC;&#x901A;&#x8FC7;MirrorFrameAnimation&#xFF0C;&#x5B9E;&#x73B0;&#x540C;&#x9891;&#x5171;&#x5E27;&#x52A8;&#x753B;&#x6548;&#x679C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class MirrorFrameAnimation implements Drawable.Callback, Choreographer.FrameCallback {</span><br><span class="line">    private final Drawable drawable;</span><br><span class="line">    private final int drawableWidth;</span><br><span class="line">    private final int drawableHeight;</span><br><span class="line">    private List&lt;WeakReference&lt;AnimationDrawableWrapper&gt;&gt; drawableList = new ArrayList&lt;&gt;();</span><br><span class="line">    private Choreographer choreographer;</span><br><span class="line">    private Runnable scheduleTask;</span><br><span class="line"></span><br><span class="line">    public MirrorFrameAnimation(Resources resources, int resId, boolean isLazyDrawableAnimation, int drawableWidth, int drawableHeight) {</span><br><span class="line"></span><br><span class="line">        //&#x8BBE;&#x7F6E;&#x5BBD;&#x9AD8;&#xFF0C;&#x9632;&#x6B62;AnimationDrawable&#x5927;&#x5C0F;&#x4E0D;&#x7A33;&#x5B9A;&#x95EE;&#x9898;</span><br><span class="line">        this.drawableWidth = drawableWidth;</span><br><span class="line">        this.drawableHeight = drawableHeight;</span><br><span class="line">        this.drawable = isLazyDrawableAnimation ? LazyAnimationDrawableInflater.getDrawable(resources, resId, null) : resources.getDrawable(resId);</span><br><span class="line">        this.drawable.setBounds(0, 0, drawableHeight, drawableHeight);</span><br><span class="line">        this.drawable.setCallback(this);</span><br><span class="line">        this.choreographer = Choreographer.getInstance();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public MirrorFrameAnimation(LazyAnimationDrawable lazyAnimationDrawable, int drawableWidth, int drawableHeight) {</span><br><span class="line"></span><br><span class="line">        //&#x8BBE;&#x7F6E;&#x5BBD;&#x9AD8;&#xFF0C;&#x9632;&#x6B62;AnimationDrawable&#x5927;&#x5C0F;&#x4E0D;&#x7A33;&#x5B9A;&#x95EE;&#x9898;</span><br><span class="line">        this.drawableWidth = drawableWidth;</span><br><span class="line">        this.drawableHeight = drawableHeight;</span><br><span class="line">        this.drawable = lazyAnimationDrawable;</span><br><span class="line">        this.drawable.setBounds(0, 0, drawableHeight, drawableHeight);</span><br><span class="line">        this.drawable.setCallback(this);</span><br><span class="line">        this.choreographer = Choreographer.getInstance();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public MirrorFrameAnimation(AnimationDrawable animationDrawable, int drawableWidth, int drawableHeight) {</span><br><span class="line"></span><br><span class="line">        //&#x8BBE;&#x7F6E;&#x5BBD;&#x9AD8;&#xFF0C;&#x9632;&#x6B62;AnimationDrawable&#x5927;&#x5C0F;&#x4E0D;&#x7A33;&#x5B9A;&#x95EE;&#x9898;</span><br><span class="line">        this.drawableWidth = drawableWidth;</span><br><span class="line">        this.drawableHeight = drawableHeight;</span><br><span class="line">        this.drawable = animationDrawable;</span><br><span class="line">        this.drawable.setBounds(0, 0, drawableHeight, drawableHeight);</span><br><span class="line">        this.drawable.setCallback(this);</span><br><span class="line">        this.choreographer = Choreographer.getInstance();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void start() {</span><br><span class="line">        choreographer.removeFrameCallback(this);</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            ((AnimationDrawable) drawable).start();</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            ((LazyAnimationDrawable) drawable).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void stop() {</span><br><span class="line">        choreographer.removeFrameCallback(this);</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            ((AnimationDrawable) drawable).stop();</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            ((LazyAnimationDrawable) drawable).stop();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The number of frames in the animation</span><br><span class="line">     */</span><br><span class="line">    public int getNumberOfFrames() {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            return ((AnimationDrawable) drawable).getNumberOfFrames();</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            return ((LazyAnimationDrawable) drawable).getNumberOfFrames();</span><br><span class="line">        }</span><br><span class="line">        return 0;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The Drawable at the specified frame index</span><br><span class="line">     */</span><br><span class="line">    public Drawable getFrame(int index) {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            return ((AnimationDrawable) drawable).getFrame(index);</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            return ((LazyAnimationDrawable) drawable).getDrawableOfFrame(index);</span><br><span class="line">        }</span><br><span class="line">        return drawable;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return The duration in milliseconds of the frame at the</span><br><span class="line">     * specified index</span><br><span class="line">     */</span><br><span class="line">    public int getDuration(int index) {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            return ((AnimationDrawable) drawable).getDuration(index);</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            return ((LazyAnimationDrawable) drawable).getDuration(index);</span><br><span class="line">        }</span><br><span class="line">        return 0;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * @return True of the animation will play once, false otherwise</span><br><span class="line">     */</span><br><span class="line">    public boolean isOneShot() {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            return ((AnimationDrawable) drawable).isOneShot();</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            return ((LazyAnimationDrawable) drawable).isOneShot();</span><br><span class="line">        }</span><br><span class="line">        return true;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public boolean isRunning() {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            return ((AnimationDrawable) drawable).isRunning();</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            return ((LazyAnimationDrawable) drawable).isRunning();</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public long getDuration(){</span><br><span class="line">        long duration = 0;</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            AnimationDrawable animationDrawable = (AnimationDrawable) drawable;</span><br><span class="line">            int numberOfFrames = animationDrawable.getNumberOfFrames();</span><br><span class="line">            for (int i = 0; i &lt; numberOfFrames; i++) {</span><br><span class="line">                duration += animationDrawable.getDuration(i);</span><br><span class="line">            }</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            LazyAnimationDrawable animationDrawable = (LazyAnimationDrawable) drawable;</span><br><span class="line">            int numberOfFrames = animationDrawable.getNumberOfFrames();</span><br><span class="line">            for (int i = 0; i &lt; numberOfFrames; i++) {</span><br><span class="line">                duration += animationDrawable.getDuration(i);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return duration;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public boolean isEndFrame() {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            AnimationDrawable animationDrawable = (AnimationDrawable) drawable;</span><br><span class="line">            int frameIndex = animationDrawable.getNumberOfFrames() - 1;</span><br><span class="line">            return animationDrawable.isOneShot() &amp;&amp; animationDrawable.getFrame(frameIndex) == animationDrawable.getCurrent();</span><br><span class="line">        }</span><br><span class="line">        if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            LazyAnimationDrawable animationDrawable = (LazyAnimationDrawable) drawable;</span><br><span class="line">            int frameIndex = animationDrawable.getNumberOfFrames() - 1;</span><br><span class="line">            if (animationDrawable.isOneShot() &amp;&amp; animationDrawable.getFrame(frameIndex) == animationDrawable.getCurrentFrame()) {</span><br><span class="line">                return true;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public boolean isEndAnimation() {</span><br><span class="line">        if (isEndFrame()) {</span><br><span class="line">            return true;</span><br><span class="line">        }</span><br><span class="line">        if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            LazyAnimationDrawable animationDrawable = (LazyAnimationDrawable) drawable;</span><br><span class="line">            if (animationDrawable.isLoopFinish()) {</span><br><span class="line">                return true;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Sets whether the animation should play once or repeat.</span><br><span class="line">     *</span><br><span class="line">     * @param oneShot Pass true if the animation should only play once</span><br><span class="line">     */</span><br><span class="line">    public void setOneShot(boolean oneShot) {</span><br><span class="line">        if (drawable instanceof AnimationDrawable) {</span><br><span class="line">            ((AnimationDrawable) drawable).setOneShot(oneShot);</span><br><span class="line">        } else if (drawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            ((LazyAnimationDrawable) drawable).setOneShot(oneShot);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void syncDrawable(View view, Matrix.ScaleToFit scaleToFit) {</span><br><span class="line">        if (!(drawable instanceof AnimationDrawable) &amp;&amp; !(drawable instanceof LazyAnimationDrawable)) {</span><br><span class="line">            if (view instanceof ImageView) {</span><br><span class="line">                ((ImageView) view).setImageDrawable(drawable);</span><br><span class="line">            } else {</span><br><span class="line">                view.setBackground(drawable);</span><br><span class="line">            }</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        AnimationDrawableWrapper wrapper = new AnimationDrawableWrapper(drawable,scaleToFit);</span><br><span class="line">        drawableList.add(new WeakReference&lt;&gt;(wrapper));</span><br><span class="line"></span><br><span class="line">        if (view instanceof ImageView) {</span><br><span class="line">            ((ImageView) view).setImageDrawable(wrapper);</span><br><span class="line">        } else {</span><br><span class="line">            view.setBackground(wrapper);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void invalidateDrawable(Drawable who) {</span><br><span class="line">        for (int i = 0; i &lt; drawableList.size(); i++) {</span><br><span class="line">            WeakReference&lt;AnimationDrawableWrapper&gt; reference = drawableList.get(i);</span><br><span class="line">            AnimationDrawableWrapper wrapper = reference.get();</span><br><span class="line">            if (wrapper == null) {</span><br><span class="line">                return;</span><br><span class="line">            }</span><br><span class="line">            wrapper.invalidateSelf();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void scheduleDrawable(Drawable who, Runnable what, long when) {</span><br><span class="line">        this.scheduleTask = what;</span><br><span class="line">        this.choreographer.postFrameCallbackDelayed(this, when - SystemClock.uptimeMillis());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void unscheduleDrawable(Drawable who, Runnable what) {</span><br><span class="line">        this.scheduleTask = null;</span><br><span class="line">        this.choreographer.removeFrameCallback(this);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doFrame(long frameTimeNanos) {</span><br><span class="line">        if (this.scheduleTask != null) {</span><br><span class="line">            this.scheduleTask.run();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Nullable</span><br><span class="line">    public MirrorFrameAnimation cloneDrawable(int drawableWidth,int drawableHeight) {</span><br><span class="line">        Drawable newDrawable = drawable.getConstantState().newDrawable();</span><br><span class="line">        if(newDrawable instanceof LazyAnimationDrawable) {</span><br><span class="line">            return new MirrorFrameAnimation((LazyAnimationDrawable) newDrawable, drawableWidth, drawableHeight);</span><br><span class="line">        }else  if(newDrawable instanceof AnimationDrawable) {</span><br><span class="line">            return new MirrorFrameAnimation((AnimationDrawable) newDrawable, drawableWidth, drawableHeight);</span><br><span class="line">        }</span><br><span class="line">        return null;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static class AnimationDrawableWrapper extends Drawable {</span><br><span class="line"></span><br><span class="line">        private final Drawable animationDrawable; //&#x52A8;&#x753B;drawable</span><br><span class="line">        private final Matrix matrix = new Matrix();</span><br><span class="line">        private final RectF wrappedRect;</span><br><span class="line">        private final RectF drawableBounds;</span><br><span class="line">        private final Matrix.ScaleToFit scaleToFit;</span><br><span class="line">        private int alpha = 255;</span><br><span class="line">        private ColorFilter colorFilter;</span><br><span class="line"></span><br><span class="line">        public AnimationDrawableWrapper(Drawable drawable, Matrix.ScaleToFit scaleToFit) {</span><br><span class="line">            this.animationDrawable = drawable;</span><br><span class="line">            this.wrappedRect = new RectF(0, 0, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());</span><br><span class="line">            this.drawableBounds = new RectF();</span><br><span class="line">            this.scaleToFit = scaleToFit;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void draw(Canvas canvas) {</span><br><span class="line">            Drawable current = animationDrawable.getCurrent();</span><br><span class="line">            if (current == null) {</span><br><span class="line">                return;</span><br><span class="line">            }</span><br><span class="line">            current.setAlpha(this.alpha);</span><br><span class="line">            current.setColorFilter(this.colorFilter);</span><br><span class="line">            Rect drawableRect = current.getBounds();</span><br><span class="line">            wrappedRect.set(drawableRect);</span><br><span class="line">            drawableBounds.set(getBounds());</span><br><span class="line"></span><br><span class="line">            // &#x53D8;&#x5316;&#x5750;&#x6807;</span><br><span class="line">            matrix.setRectToRect(wrappedRect, drawableBounds, scaleToFit);</span><br><span class="line"></span><br><span class="line">            int save = canvas.save();</span><br><span class="line"></span><br><span class="line">            canvas.concat(matrix);</span><br><span class="line">            current.draw(canvas);</span><br><span class="line"></span><br><span class="line">            canvas.restoreToCount(save);</span><br><span class="line"></span><br><span class="line">            current.setAlpha(255);//&#x8FD8;&#x539F;</span><br><span class="line">            current.setColorFilter(null); //&#x8FD8;&#x539F;</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void setAlpha(int alpha) {</span><br><span class="line">            this.alpha = alpha;</span><br><span class="line">        }</span><br><span class="line">        @Override</span><br><span class="line">        public void setColorFilter(ColorFilter colorFilter) {</span><br><span class="line">            this.colorFilter = colorFilter;</span><br><span class="line">        }</span><br><span class="line">        @Override</span><br><span class="line">        public int getOpacity() {</span><br><span class="line">            return PixelFormat.TRANSLUCENT;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"><a href="#&#x4F7F;&#x7528;&#x65B9;&#x6CD5;" class="headerlink" title="&#x4F7F;&#x7528;&#x65B9;&#x6CD5;"></a>&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;int dp2px = (int) dp2px(100);</span><br><span class="line">MirrorFrameAnimation mirrorFrameAnimation = new MirrorFrameAnimation(getResources(),R.drawable.loading_animation,dp2px,dp2px);</span><br><span class="line"></span><br><span class="line">mirrorFrameAnimation.syncDrawable(imageView1,Matrix.ScaleToFit.CENTER);</span><br><span class="line">mirrorFrameAnimation.syncDrawable(imageView2,Matrix.ScaleToFit.CENTER);</span><br><span class="line">mirrorFrameAnimation.syncDrawable(imageView3,Matrix.ScaleToFit.FILL);</span><br><span class="line">mirrorFrameAnimation.syncDrawable(imageView4,Matrix.ScaleToFit.FILL);</span><br><span class="line">mirrorFrameAnimation.syncDrawable(imageView5,Matrix.ScaleToFit.CENTER);</span><br><span class="line">mirrorFrameAnimation.syncDrawable(imageView6,Matrix.ScaleToFit.CENTER);</span><br><span class="line"></span><br><span class="line">mStart.setOnClickListener(new View.OnClickListener() {</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) {</span><br><span class="line">        mirrorFrameAnimation.start();</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line">mStop.setOnClickListener(new View.OnClickListener() {</span><br><span class="line">    @Override</span><br><span class="line">    public void onClick(View v) {</span><br><span class="line">        mirrorFrameAnimation.stop();</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<h3 id="&#x9002;&#x7528;&#x8303;&#x56F4;"><a href="#&#x9002;&#x7528;&#x8303;&#x56F4;" class="headerlink" title="&#x9002;&#x7528;&#x8303;&#x56F4;"></a>&#x9002;&#x7528;&#x8303;&#x56F4;</h3><p>&#x56FE;&#x50CF;&#x540C;&#x6B65;&#x6267;&#x884C;&#x9700;&#x6C42;</p>
<p>&#x6211;&#x4EEC;&#x5E38;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x5C4F;&#x5E55;&#x8FB9;&#x7F18;&#x65B9;&#x5411;&#x540C;&#x65F6;&#x5C55;&#x793A;&#x76F8;&#x540C;&#x52A8;&#x753B;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x52A8;&#x753B;&#x542F;&#x52A8;&#x5B58;&#x5728;&#x4E00;&#x5B9A;&#x7684;&#x5EF6;&#x65F6;&#xFF0C;&#x4EE5;&#x53CA;&#x63A7;&#x5236;&#x903B;&#x8F91;&#x4E0D;&#x7A33;&#x5B9A;&#xFF0C;&#x5F80;&#x5F80;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x8FB9;&#x52A8;&#x753B;&#x64AD;&#x653E;&#x7ED3;&#x675F;&#xFF0C;&#x53E6;&#x4E00;&#x8FB9;&#x52A8;&#x753B;&#x8FD8;&#x5728;&#x5C55;&#x793A;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x672C;&#x7BC7;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x201C;&#x540C;&#x9891;&#x5171;&#x5E27;&#x52A8;&#x6548;&#x201D;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x5BF9;&#x79F0;&#x52A8;&#x753B;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x6CD5;&#x3002;</p>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x52A8;&#x6548;&#x4E00;&#x76F4;&#x662F;Android&#x8BBE;&#x5907;&#x7684;&#x4E0A;&#x9700;&#x8981;&#x82B1;&#x5927;&#x529B;&#x6C14;&#x4F18;&#x5316;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x56FE;&#x50CF;&#x540C;&#x6B65;&#x6267;&#x884C;&#x3001;&#x5BF9;&#x79F0;&#x52A8;&#x6548;&#xFF0C;&#x672C;&#x7BC7;&#x65B9;&#x6848;&#x663E;&#x7136;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x51CF;&#x5C11;&#x7EBF;&#x7A0B;&#x548C;&#x5185;&#x5B58;&#x7684;&#x6D88;&#x8017;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c3e50a955db24913427d3909059a36e9.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7325132133168971813.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7325132133168971813.html" itemprop="url">工作中用Redis最多的10种场景</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-18T10:10:07+08:00">
                2024-01-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>Redis&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x4F18;&#x79C0;&#x7684;&#x57FA;&#x4E8E;key/value&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x6709;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x7684;&#x6027;&#x80FD;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x8FD8;&#x662F;&#x9762;&#x8BD5;&#x4E2D;&#xFF0C;&#x90FD;&#x7ECF;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x3002;</p>
<p>&#x4ECA;&#x5929;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5C31;&#x8DDF;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x804A;&#x804A;&#xFF0C;&#x6211;&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#x4F7F;&#x7528;Redis&#x7684;10&#x79CD;&#x573A;&#x666F;&#xFF0C;&#x5E0C;&#x671B;&#x5BF9;&#x4F60;&#x4F1A;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/6827f89d00bfa1e842e6b43374f516f3a7d373c8cf5afcbf680cbd8beaec9a87" alt="&#x56FE;&#x7247;"></p>
<blockquote>
<p>&#x6B64;&#x5916;&#xFF0C;&#x672C;&#x6587;<strong>Gitee</strong>&#xFF1A;<a href="/external_links/94cf4902dabc576e2ae21ceeb119735a.html" target="blank" rel="noopener">gitee.com/dvsusan/sus&#x2026;</a> &#x5DF2;&#x7ECF;&#x6536;&#x5F55;&#xFF0C;&#x4E0A;&#x9762;&#x6709;&#x5927;&#x5382;&#x9762;&#x8BD5;&#x5B8C;&#x6574;&#x8003;&#x70B9;&#xFF0C;&#x5DE5;&#x4F5C;&#x7ECF;&#x9A8C;&#x5206;&#x4EAB;&#xFF0C;&#x6B22;&#x8FCE;Star&#x3002;</p>
</blockquote>
<ol>
<li>&#x7EDF;&#x8BA1;&#x8BBF;&#x95EE;&#x6B21;&#x6570;</li>
</ol>
<hr>
<p>&#x5BF9;&#x4E8E;&#x5F88;&#x591A;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#x7684;&#x9996;&#x9875;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x7EDF;&#x8BA1;&#x9996;&#x9875;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x7684;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5982;&#x679C;&#x4FDD;&#x5B58;&#x5230;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#xFF0C;&#x518D;&#x6700;&#x540E;&#x505A;&#x6C47;&#x603B;&#x663E;&#x7136;&#x6709;&#x4E9B;&#x9EBB;&#x70E6;&#x3002;</p>
<p>&#x8BE5;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Redis&#xFF0C;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;key&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;OFFICIAL_INDEX_VISIT_COUNT&#x3002;</p>
<p>&#x5728;Redis&#x4E2D;&#x6709;incr&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7ED9;value&#x503C;&#x52A0;1&#x64CD;&#x4F5C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;incr&#xA0;OFFICIAL_INDEX_VISIT_COUNT</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#x5982;&#x679C;&#x4F60;&#x60F3;&#x4E00;&#x6B21;&#x52A0;&#x7684;&#x503C;&#x5927;&#x4E8E;1&#xFF0C;&#x53EF;&#x4EE5;&#x7528;incrby&#x547D;&#x4EE4;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;incrby&#xA0;OFFICIAL_INDEX_VISIT_COUNT&#xA0;5</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x6027;&#x52A0;5&#x3002;</p>
<ol start="2">
<li>&#x83B7;&#x53D6;&#x5206;&#x7C7B;&#x6811;</li>
</ol>
<hr>
<p>&#x5728;&#x5F88;&#x591A;&#x7F51;&#x7AD9;&#x90FD;&#x6709;&#x5206;&#x7C7B;&#x6811;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x751F;&#x6210;&#x9759;&#x6001;&#x7684;html&#x9875;&#x9762;&#xFF0C;&#x60F3;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x7684;&#x65B9;&#x5F0F;&#x83B7;&#x53D6;&#x5206;&#x7C7B;&#x6811;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4E3A;&#x4E86;&#x6027;&#x80FD;&#x8003;&#x8651;&#xFF0C;&#x4F1A;&#x5C06;&#x5206;&#x7C7B;&#x6811;&#x7684;json&#x6570;&#x636E;&#x7F13;&#x5B58;&#x5230;Redis&#x5F53;&#x4E2D;&#xFF0C;&#x4E3A;&#x4E86;&#x540E;&#x9762;&#x5728;&#x7F51;&#x7AD9;&#x5F53;&#x4E2D;&#x80FD;&#x591F;&#x5FEB;&#x901F;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E0D;&#x7136;&#x5728;&#x63A5;&#x53E3;&#x4E2D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x9012;&#x5F52;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x62FC;&#x63A5;&#x6210;&#x5206;&#x7C7B;&#x6811;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x975E;&#x5E38;&#x9EBB;&#x70E6;&#xFF0C;&#x800C;&#x4E14;&#x9700;&#x8981;&#x591A;&#x6B21;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6027;&#x80FD;&#x5F88;&#x5DEE;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x7528;&#x4E00;&#x4E2A;&#x5B9A;&#x65F6;&#x4EFB;&#x52A1;&#xFF0C;&#x5F02;&#x6B65;&#x5C06;&#x5206;&#x7C7B;&#x6811;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x76F4;&#x63A5;&#x7F13;&#x5B58;&#x5230;Redis&#x5F53;&#x4E2D;&#xFF0C;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;key&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;MALL_CATEGORY_TREE&#x3002;</p>
<p>&#x7136;&#x540E;&#x63A5;&#x53E3;&#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528;MALL_CATEGORY_TREE&#x8FD9;&#x4E2A;key&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;key/value&#x5B57;&#x7B26;&#x4E32;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x5206;&#x7C7B;&#x6811;&#x7684;&#x6570;&#x636E;&#x975E;&#x5E38;&#x591A;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x5927;key&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4F18;&#x5316;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x6211;&#x7684;&#x53E6;&#x5916;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x300A;<a href="/external_links/024046c853fbbcba369e73a4f5a29007.html" target="blank" rel="noopener">&#x5206;&#x7C7B;&#x6811;&#xFF0C;&#x6211;&#x4ECE;2s&#x4F18;&#x5316;&#x5230;0.1s</a>&#x300B;&#x3002;</p>
<ol start="3">
<li>&#x505A;&#x5206;&#x5E03;&#x5F0F;&#x9501;</li>
</ol>
<hr>
<p>&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x53EF;&#x80FD;&#x662F;&#x4F7F;&#x7528;Redis&#x6700;&#x5E38;&#x89C1;&#x7684;&#x573A;&#x666F;&#x4E4B;&#x4E00;&#xFF0C;&#x76F8;&#x5BF9;&#x4E8E;&#x5176;&#x4ED6;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x6570;&#x636E;&#x5E93;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x6216;&#x8005;Zookeeper&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF0C;&#x57FA;&#x4E8E;Redis&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF0C;&#x6709;&#x66F4;&#x597D;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x88AB;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x4E8E;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x52A0;&#x9501;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;try{</span><br><span class="line">&#xA0;&#xA0;String&#xA0;result&#xA0;=&#xA0;jedis.set(lockKey,&#xA0;requestId,&#xA0;&quot;NX&quot;,&#xA0;&quot;PX&quot;,&#xA0;expireTime);</span><br><span class="line">&#xA0;&#xA0;if&#xA0;(&quot;OK&quot;.equals(result))&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;true;</span><br><span class="line">&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;return&#xA0;false;</span><br><span class="line">}&#xA0;finally&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;unlock(lockKey);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x4E0A;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5728;&#x6709;&#x4E9B;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x91CA;&#x653E;&#x9501;&#x53EF;&#x80FD;&#x4F1A;&#x91CA;&#x653E;&#x4E86;&#x522B;&#x4EBA;&#x7684;&#x9501;&#x3002;</p>
<p>&#x8BF4;&#x5B9E;&#x8BDD;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x867D;&#x8BF4;&#x5F88;&#x5E38;&#x7528;&#xFF0C;&#x4F46;&#x5751;&#x4E5F;&#x633A;&#x591A;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x4E0D;&#x597D;&#x7684;&#x8BDD;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x8E29;&#x5751;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5927;&#x5BB6;&#x5BF9;Redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x4E00;&#x4E9B;&#x5751;&#x6BD4;&#x8F83;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6211;&#x7684;&#x53E6;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x300A;<a href="/external_links/bd54ba0a851e28acaa200136ac2f37ef.html" target="blank" rel="noopener">&#x804A;&#x804A;redis&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;8&#x5927;&#x5751;</a>&#x300B;&#xFF0C;&#x6587;&#x7AE0;&#x4E2D;&#x6709;&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x3002;</p>
<ol start="4">
<li>&#x505A;&#x6392;&#x884C;&#x699C;</li>
</ol>
<hr>
<p>&#x5F88;&#x591A;&#x7F51;&#x7AD9;&#x6709;&#x6392;&#x884C;&#x699C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x5546;&#x57CE;&#x4E2D;&#x6709;&#x5546;&#x54C1;&#x9500;&#x91CF;&#x7684;&#x6392;&#x884C;&#x699C;&#xFF0C;&#x6E38;&#x620F;&#x7F51;&#x7AD9;&#x6709;&#x73A9;&#x5BB6;&#x83B7;&#x5F97;&#x79EF;&#x5206;&#x7684;&#x6392;&#x884C;&#x699C;&#x3002;</p>
<p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>Sorted Set</code>&#x4FDD;&#x5B58;&#x6392;&#x884C;&#x699C;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4F7F;&#x7528;<code>ZADD</code>&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x6392;&#x884C;&#x699C;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;<code>ZRANGE</code>&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x6392;&#x884C;&#x699C;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;ZADD&#xA0;rank:score&#xA0;100&#xA0;&quot;&#x5468;&#x661F;&#x9A70;&quot;</span><br><span class="line">ZADD&#xA0;rank:score&#xA0;90&#xA0;&quot;&#x5468;&#x6770;&#x4F26;&quot;</span><br><span class="line">ZADD&#xA0;rank:score&#xA0;80&#xA0;&quot;&#x5468;&#x6DA6;&#x53D1;&quot;</span><br><span class="line">ZRANGE&#xA0;rank:score&#xA0;0&#xA0;-1&#xA0;WITHSCORES</span><br></pre></td></tr></table></figure>

<p>&#x8FD4;&#x56DE;&#x6570;&#x636E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;1)&#xA0;&quot;&#x5468;&#x661F;&#x9A70;&quot;</span><br><span class="line">2)&#xA0;&quot;100&quot;</span><br><span class="line">3)&#xA0;&quot;&#x5468;&#x6770;&#x4F26;&quot;</span><br><span class="line">4)&#xA0;&quot;90&quot;</span><br><span class="line">5)&#xA0;&quot;&#x5468;&#x6DA6;&#x53D1;&quot;</span><br><span class="line">6)&#xA0;&quot;80&quot;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>&#x8BB0;&#x5F55;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;</li>
</ol>
<hr>
<p>&#x901A;&#x5E38;&#x4E0B;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x6210;&#x529F;&#x4E4B;&#x540E;&#xFF0C;&#x7528;&#x6237;&#x767B;&#x5F55;&#x4E4B;&#x540E;&#x7684;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x4F1A;&#x4FDD;&#x5B58;&#x5230;Redis&#x4E2D;&#x3002;</p>
<p>&#x8FD9;&#x6837;&#x540E;&#x9762;&#x8BE5;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x5176;&#x4ED6;&#x63A5;&#x53E3;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x76F4;&#x63A5;&#x4ECE;Redis&#x4E2D;&#x67E5;&#x8BE2;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x67E5;&#x5230;&#x6570;&#x636E;&#xFF0C;&#x8BF4;&#x660E;&#x7528;&#x6237;&#x5DF2;&#x767B;&#x5F55;&#xFF0C;&#x5219;&#x5141;&#x8BB8;&#x505A;&#x540E;&#x7EED;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4ECE;Redis&#x4E2D;&#x6CA1;&#x6709;&#x67E5;&#x5230;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x8BF4;&#x660E;&#x8BE5;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x767B;&#x5F55;&#xFF0C;&#x6216;&#x8005;&#x767B;&#x5F55;&#x72B6;&#x6001;&#x5931;&#x6548;&#x4E86;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x8DF3;&#x8F6C;&#x5230;&#x7528;&#x6237;&#x767B;&#x5F55;&#x9875;&#x9762;&#x3002;</p>
<p>&#x4F7F;&#x7528;Redis&#x4FDD;&#x5B58;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#xFF0C;&#x6709;&#x4E2A;&#x597D;&#x5904;&#x662F;&#x5B83;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x8BE5;&#x65F6;&#x95F4;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x6210;30&#x5206;&#x949F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c&#x590D;&#x5236;&#x4EE3;&#x7801;jedis.set(userId,&#xA0;userInfo,&#xA0;1800);</span><br></pre></td></tr></table></figure>

<p>&#x5728;Redis&#x5185;&#x90E8;&#x6709;&#x4E13;&#x95E8;&#x7684;job&#xFF0C;&#x4F1A;&#x5C06;&#x8FC7;&#x671F;&#x7684;&#x6570;&#x636E;&#x5220;&#x9664;&#xFF0C;&#x4E5F;&#x6709;&#x83B7;&#x53D6;&#x6570;&#x636E;&#x65F6;&#x5B9E;&#x65F6;&#x5220;&#x9664;&#x7684;&#x903B;&#x8F91;&#x3002;</p>
<ol start="6">
<li>&#x9650;&#x6D41;</li>
</ol>
<hr>
<p>&#x4F7F;&#x7528;Redis&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5E38;&#x7528;&#x7684;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x662F;<code>&#x505A;&#x9650;&#x6D41;</code>&#x3002;</p>
<p>&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x9650;&#x6D41;&#x65B9;&#x5F0F;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x4F7F;&#x7528;nginx&#xFF0C;&#x4F46;&#x4F7F;&#x7528;Redis&#x63A7;&#x5236;&#x53EF;&#x4EE5;&#x66F4;&#x7CBE;&#x7EC6;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF1A;&#x9650;&#x5236;&#x540C;&#x4E00;&#x4E2A;ip&#xFF0C;1&#x5206;&#x949F;&#x4E4B;&#x5185;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;10&#x6B21;&#x63A5;&#x53E3;&#xFF0C;10&#x5206;&#x949F;&#x4E4B;&#x5185;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;50&#x6B21;&#x63A5;&#x53E3;&#xFF0C;1&#x5929;&#x4E4B;&#x5185;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;100&#x6B21;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x6B21;&#x6570;&#xFF0C;&#x5219;&#x63A5;&#x53E3;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF1A;&#x8BF7;&#x6C42;&#x592A;&#x9891;&#x7E41;&#x4E86;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#x91CD;&#x8BD5;&#x3002;</p>
<p>&#x8DDF;&#x4E0A;&#x9762;&#x4FDD;&#x5B58;&#x7528;&#x6237;&#x767B;&#x5F55;&#x72B6;&#x6001;&#x7C7B;&#x4F3C;&#xFF0C;&#x9700;&#x8981;&#x5728;Redis&#x4E2D;&#x4FDD;&#x5B58;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x8BB0;&#x5F55;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF1A;key&#x662F;&#x7528;&#x6237;ip&#xFF0C;value&#x662F;&#x8BBF;&#x95EE;&#x7684;&#x6B21;&#x6570;&#x4ECE;1&#x5F00;&#x59CB;&#xFF0C;&#x540E;&#x9762;&#x6BCF;&#x8BBF;&#x95EE;&#x4E00;&#x6B21;&#x5219;&#x52A0;1&#x3002;</p>
<p>&#x5982;&#x679C;value&#x8D85;&#x8FC7;&#x4E00;&#x5B9A;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x62E6;&#x622A;&#x8FD9;&#x79CD;&#x5F02;&#x5E38;&#x7684;ip&#x3002;</p>
<p>&#x5F53;&#x7136;&#x4E5F;&#x9700;&#x8981;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x5F02;&#x5E38;ip&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;1&#x5929;&#xFF0C;&#x5219;&#x6062;&#x590D;&#x6B63;&#x5E38;&#x4E86;&#xFF0C;&#x8BE5;ip&#x53EF;&#x4EE5;&#x518D;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x4E86;&#x3002;</p>
<p>&#x6216;&#x8005;&#x9650;&#x5236;&#x540C;&#x4E00;&#x4E2A;&#x7528;&#x6237;id&#x3002;</p>
<ol start="7">
<li>&#x4F4D;&#x7EDF;&#x8BA1;</li>
</ol>
<hr>
<p>&#x6BD4;&#x5982;&#x73B0;&#x5728;&#x6709;&#x4E2A;&#x9700;&#x6C42;&#xFF1A;&#x6709;&#x4E2A;&#x7F51;&#x7AD9;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x4E00;&#x5468;&#x5185;&#x8FDE;&#x7EED;&#x767B;&#x9646;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x6708;&#x5185;&#x767B;&#x9646;&#x8FC7;&#x7684;&#x7528;&#x6237;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x9700;&#x6C42;&#x4F7F;&#x7528;&#x4F20;&#x7EDF;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x4F7F;&#x7528;Redis&#x7684;<code>bitmap</code>&#x8BA9;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x65F6;&#x7684;&#x8FDB;&#x884C;&#x7C7B;&#x4F3C;&#x7684;&#x7EDF;&#x8BA1;&#x3002;</p>
<p>bitmap &#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x7684;byte&#x6570;&#x7EC4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x6210;&#x662F;&#x4E00;&#x4E2A;&#x666E;&#x901A;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5B83;&#x5C06;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;byte&#x6570;&#x7EC4;&#x4E2D;&#x4EE5;&#x8FBE;&#x5230;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<p>&#x4FDD;&#x5B58;&#x6570;&#x636E;&#x547D;&#x4EE4;&#x4F7F;&#x7528;setbit&#xFF0C;&#x8BED;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;setbit&#xA0;key&#xA0;offset&#xA0;value</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x793A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;setbit&#xA0;user:view:2024-01-17&#xA0;123456&#xA0;1</span><br></pre></td></tr></table></figure>

<p>&#x5F80;bitmap&#x6570;&#x7EC4;&#x4E2D;&#x8BBE;&#x7F6E;&#x4E86;&#x7528;&#x6237;id=123456&#x7684;&#x767B;&#x5F55;&#x72B6;&#x6001;&#x4E3A;1&#xFF0C;&#x6807;&#x8BB0;2024-01-17&#x5DF2;&#x767B;&#x5F55;&#x3002;</p>
<p>&#x7136;&#x540E;&#x901A;&#x8FC7;&#x547D;&#x4EE4;getbit&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x8BED;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;getbit&#xA0;key&#xA0;offset</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x793A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;getbit&#xA0;user:view:2024-01-17&#xA0;123456</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x83B7;&#x53D6;&#x7684;&#x503C;&#x662F;1&#xFF0C;&#x8BF4;&#x660E;&#x8FD9;&#x4E00;&#x5929;&#x767B;&#x5F55;&#x4E86;&#x3002;</p>
<p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x7EDF;&#x8BA1;&#x4E00;&#x5468;&#x5185;&#x8FDE;&#x7EED;&#x767B;&#x5F55;&#x7684;&#x7528;&#x6237;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x904D;&#x5386;&#x7528;&#x6237;id&#xFF0C;&#x6839;&#x636E;&#x65E5;&#x671F;&#x4E2D;&#x6570;&#x7EC4;&#x4E2D;&#x53BB;&#x67E5;&#x8BE2;&#x72B6;&#x6001;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x6700;&#x8FD1;&#x5C31;&#x4E1A;&#x5F62;&#x5F0F;&#x6BD4;&#x8F83;&#x56F0;&#x96BE;&#xFF0C;&#x4E3A;&#x4E86;&#x611F;&#x8C22;&#x5404;&#x4F4D;&#x5C0F;&#x4F19;&#x4F34;&#x5BF9;&#x82CF;&#x4E09;&#x4E00;&#x76F4;&#x4EE5;&#x6765;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x6211;&#x7279;&#x5730;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E9B;&#x5DE5;&#x4F5C;&#x5185;&#x63A8;&#x7FA4;&#xFF0C; &#x770B;&#x770B;&#x80FD;&#x4E0D;&#x80FD;&#x5E2E;&#x52A9;&#x5230;&#x5927;&#x5BB6;&#x3002;</p>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x7FA4;&#x91CC;&#x53D1;&#x5E03;&#x62DB;&#x8058;&#x4FE1;&#x606F;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5185;&#x63A8;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x7FA4;&#x91CC;&#x6295;&#x9012;&#x7B80;&#x5386;&#x627E;&#x5DE5;&#x4F5C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x7FA4;&#x91CC;&#x4EA4;&#x6D41;&#x9762;&#x8BD5;&#x6216;&#x8005;&#x5DE5;&#x4F5C;&#x7684;&#x8BDD;&#x9898;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/422e6c417facc6e051e8a58bf05a3158420fc30bf2b3f90f434f6d4957d16dae" alt="&#x56FE;&#x7247;"></p>
<p><strong>&#x8FDB;&#x7FA4;&#x65B9;&#x5F0F;</strong></p>
<p>&#x6DFB;&#x52A0;&#xFF0C;&#x82CF;&#x4E09;&#x7684;<strong>&#x79C1;&#x4EBA;&#x5FAE;&#x4FE1;</strong>&#xFF1A;su_san_java&#xFF0C;&#x5907;&#x6CE8;&#xFF1A;<strong>&#x5185;&#x63A8;+&#x6240;&#x5728;&#x57CE;&#x5E02;</strong>&#xFF0C;&#x5373;&#x53EF;&#x52A0;&#x5165;&#x3002;</p>
<ol start="8">
<li>&#x7F13;&#x5B58;&#x52A0;&#x901F;</li>
</ol>
<hr>
<p>&#x6211;&#x4EEC;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x4F7F;&#x7528;Redis&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x52A0;&#x901F;&#xFF0C;&#x8FD9;&#x79CD;&#x7528;&#x6CD5;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x5E38;&#x89C1;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x67E5;&#x8BE2;&#x8BA2;&#x5355;&#x6570;&#x636E;&#xFF0C;&#x5148;&#x4ECE;Redis&#x7F13;&#x5B58;&#x4E2D;&#x67E5;&#x8BE2;&#xFF0C;&#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x5C06;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;&#x3002;</p>
<p>&#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E2D;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x518D;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;&#x6570;&#x636E;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x5C06;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x7F13;&#x5B58;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FD4;&#x56DE;&#x7ED9;&#x7528;&#x6237;&#x3002;</p>
<p>&#x5982;&#x679C;&#x7F13;&#x5B58;&#x548C;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x7ED9;&#x7528;&#x6237;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x4E0D;&#x5B58;&#x5728;&#x3002;</p>
<p>&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/24e364207133be721a568ad49751826bf61c2f71368e63af227156a997f62a42" alt="&#x56FE;&#x7247;">)&#x4F46;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x52A0;&#x901F;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x4E00;&#x4E0B;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#xFF1A;&#x7F13;&#x5B58;&#x51FB;&#x7A7F;&#x3001;&#x7A7F;&#x900F;&#x548C;&#x96EA;&#x5D29;&#x7B49;&#x95EE;&#x9898;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6211;&#x7684;&#x53E6;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x300A;<a href="/external_links/1fa14c4586f2cd7dd62c018978d6f35d.html" target="blank" rel="noopener">&#x70C2;&#x5927;&#x8857;&#x7684;&#x7F13;&#x5B58;&#x7A7F;&#x900F;&#x3001;&#x7F13;&#x5B58;&#x51FB;&#x7A7F;&#x548C;&#x7F13;&#x5B58;&#x96EA;&#x5D29;&#xFF0C;&#x4F60;&#x771F;&#x7684;&#x61C2;&#x4E86;&#xFF1F;</a>&#x300B;&#xFF0C;&#x91CC;&#x9762;&#x6709;&#x975E;&#x5E38;&#x8BE6;&#x7EC6;&#x7684;&#x4ECB;&#x7ECD;&#x3002;</p>
<ol start="9">
<li>&#x505A;&#x6D88;&#x606F;&#x961F;&#x5217;</li>
</ol>
<hr>
<p>&#x6211;&#x4EEC;&#x8BF4;&#x8D77;&#x961F;&#x5217;&#x7ECF;&#x5E38;&#x60F3;&#x5230;&#x662F;&#xFF1A;kafka&#x3001;rabbitMQ&#x3001;RocketMQ&#x7B49;&#x8FD9;&#x4E9B;&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x961F;&#x5217;&#x3002;</p>
<p>&#x5176;&#x5B9E;Redis&#x4E5F;&#x6709;&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x6709;&#x4E2A;&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#xFF0C;&#x5C31;&#x662F;&#x7528;&#x7684;Redis&#x961F;&#x5217;&#x529F;&#x80FD;&#x3002;</p>
<p>PubSub(&#x53D1;&#x5E03;&#x8BA2;&#x9605;)&#x662F;Redis2.0&#x7248;&#x672C;&#x5F15;&#x5165;&#x7684;&#x6D88;&#x606F;&#x4F20;&#x9012;&#x6A21;&#x578B;&#x3002;</p>
<p>&#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x53EF;&#x4EE5;&#x8BA2;&#x9605;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;channel&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x5411;&#x5BF9;&#x5E94;channel&#x53D1;&#x9001;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x8BA2;&#x9605;&#x8005;&#x90FD;&#x80FD;&#x6536;&#x5230;&#x76F8;&#x5173;&#x6D88;&#x606F;&#x3002;&#x5BF9;&#x5E94;channel&#x53D1;&#x9001;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x8BA2;&#x9605;&#x8005;&#x90FD;&#x80FD;&#x6536;&#x5230;&#x76F8;&#x5173;&#x6D88;&#x606F;&#x3002;</p>
<p>&#x5728;java&#x4EE3;&#x7801;&#x4E2D;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;MessageListener&#x63A5;&#x53E3;&#xFF0C;&#x6765;&#x6D88;&#x8D39;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;@Slf4j</span><br><span class="line">@Component</span><br><span class="line">public&#xA0;class&#xA0;RedisMessageListenerListener&#xA0;implements&#xA0;MessageListener&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;@Autowired</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;private&#xA0;RedisTemplate&lt;String,&#xA0;Object&gt;&#xA0;redisTemplate;</span><br><span class="line"></span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;@Override</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;public&#xA0;void&#xA0;onMessage(Message&#xA0;message,&#xA0;byte[]&#xA0;pattern)&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;String&#xA0;channel&#xA0;=&#xA0;new&#xA0;String(pattern);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;RedisSerializer&lt;?&gt;&#xA0;valueSerializer&#xA0;=&#xA0;redisTemplate.getValueSerializer();</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Object&#xA0;deserialize&#xA0;=&#xA0;valueSerializer.deserialize(message.getBody());</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(deserialize&#xA0;==&#xA0;null)&#xA0;return;</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;String&#xA0;md5DigestAsHex&#xA0;=&#xA0;DigestUtils.md5DigestAsHex(deserialize.toString().getBytes(StandardCharsets.UTF_8));</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;Boolean&#xA0;result&#xA0;=&#xA0;redisTemplate.opsForValue().setIfAbsent(md5DigestAsHex,&#xA0;&quot;1&quot;,&#xA0;20,&#xA0;TimeUnit.SECONDS);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(Boolean.TRUE.equals(result))&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;log.info(&quot;&#x63A5;&#x6536;&#x7684;&#x7ED3;&#x679C;&#xFF1A;{}&quot;,&#xA0;deserialize.toString());</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}&#xA0;else&#xA0;{</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;log.info(&quot;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x5904;&#x7406;&#x4E2D;&quot;);</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">&#xA0;&#xA0;&#xA0;&#xA0;}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>&#x751F;&#x6210;&#x5168;&#x5C40;ID</li>
</ol>
<hr>
<p>&#x5728;&#x6709;&#x4E9B;&#x9700;&#x8981;&#x751F;&#x6210;&#x5168;&#x5C40;ID&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#xFF0C;&#x5176;&#x5B9E;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Redis&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;incrby&#x547D;&#x4EE4;&#xFF0C;&#x5229;&#x7528;&#x539F;&#x5B50;&#x6027;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x547D;&#x4EE4;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;incrby&#xA0;userid&#xA0;10000</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x5206;&#x5E93;&#x5206;&#x8868;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5BF9;&#x4E8E;&#x6709;&#x4E9B;&#x6279;&#x91CF;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;Redis&#x4E2D;&#xFF0C;&#x4E00;&#x6B21;&#x6027;&#x62FF;&#x4E00;&#x6279;id&#x51FA;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x7ED9;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x4F7F;&#x7528;&#x3002;</p>
<h3 id="&#x6700;&#x540E;&#x8BF4;&#x4E00;&#x53E5;-&#x6C42;&#x5173;&#x6CE8;&#xFF0C;&#x522B;&#x767D;&#x5AD6;&#x6211;"><a href="#&#x6700;&#x540E;&#x8BF4;&#x4E00;&#x53E5;-&#x6C42;&#x5173;&#x6CE8;&#xFF0C;&#x522B;&#x767D;&#x5AD6;&#x6211;" class="headerlink" title="&#x6700;&#x540E;&#x8BF4;&#x4E00;&#x53E5;(&#x6C42;&#x5173;&#x6CE8;&#xFF0C;&#x522B;&#x767D;&#x5AD6;&#x6211;)"></a>&#x6700;&#x540E;&#x8BF4;&#x4E00;&#x53E5;(&#x6C42;&#x5173;&#x6CE8;&#xFF0C;&#x522B;&#x767D;&#x5AD6;&#x6211;)</h3><p>&#x5982;&#x679C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5BF9;&#x60A8;&#x6709;&#x6240;&#x5E2E;&#x52A9;&#xFF0C;&#x6216;&#x8005;&#x6709;&#x6240;&#x542F;&#x53D1;&#x7684;&#x8BDD;&#xFF0C;&#x5E2E;&#x5FD9;&#x626B;&#x63CF;&#x4E0B;&#x53D1;&#x4E8C;&#x7EF4;&#x7801;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#xFF0C;&#x60A8;&#x7684;&#x652F;&#x6301;&#x662F;&#x6211;&#x575A;&#x6301;&#x5199;&#x4F5C;&#x6700;&#x5927;&#x7684;&#x52A8;&#x529B;&#x3002;</p>
<p>&#x6C42;&#x4E00;&#x952E;&#x4E09;&#x8FDE;&#xFF1A;&#x70B9;&#x8D5E;&#x3001;&#x8F6C;&#x53D1;&#x3001;&#x5728;&#x770B;&#x3002;</p>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;&#x3010;&#x82CF;&#x4E09;&#x8BF4;&#x6280;&#x672F;&#x3011;&#xFF0C;&#x5728;&#x516C;&#x4F17;&#x53F7;&#x4E2D;&#x56DE;&#x590D;&#xFF1A;&#x9762;&#x8BD5;&#x3001;&#x4EE3;&#x7801;&#x795E;&#x5668;&#x3001;&#x5F00;&#x53D1;&#x624B;&#x518C;&#x3001;&#x65F6;&#x95F4;&#x7BA1;&#x7406;&#x6709;&#x8D85;&#x8D5E;&#x7684;&#x7C89;&#x4E1D;&#x798F;&#x5229;&#xFF0C;&#x53E6;&#x5916;&#x56DE;&#x590D;&#xFF1A;&#x52A0;&#x7FA4;&#xFF0C;&#x53EF;&#x4EE5;&#x8DDF;&#x5F88;&#x591A;BAT&#x5927;&#x5382;&#x7684;&#x524D;&#x8F88;&#x4EA4;&#x6D41;&#x548C;&#x5B66;&#x4E60;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/37c8d2d7394fd86a1eadb9ffb943648e.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../82/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../82/">82</a><span class="page-number current">83</span><a class="page-number" href="../84/">84</a><span class="space">&hellip;</span><a class="page-number" href="../298/">298</a><a class="extend next" rel="next" href="../84/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">2975</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1162</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
