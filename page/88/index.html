<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/88/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/88/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322800377358581769.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322800377358581769.html" itemprop="url">一个看似很简单的redis需求，我问了农行和腾讯大佬也没想出</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-12T12:23:31+08:00">
                2024-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#xFF0C;&#x5FAE;&#x4FE1;&#x516C;&#x4F17;&#x53F7;/&#x77E5;&#x4E4E;/&#x7A00;&#x571F;&#x6398;&#x91D1;/&#x5C0F;&#x7EA2;&#x4E66;&#x90FD;&#x53EB; &#x2014;&#x2014;&#x3010;&#x6D63;&#x718A;say&#x3011;</p>
<p>&#x4E13;&#x6CE8;&#x8F93;&#x51FA;&#x56FD;&#x592E;&#x4F01;&#x62DB;&#x8058;&#x3001;Java&#x5F00;&#x53D1;&#x3001;&#x7269;&#x8054;&#x7F51;&#x548C;&#x6570;&#x5B57;&#x5B6A;&#x751F;&#x76F8;&#x5173;&#x4F18;&#x8D28;&#x5185;&#x5BB9;&#xFF0C;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x6709;&#x5C0F;&#x798F;&#x5229;&#x54E6;&#xFF5E;</p>
<h1 id="&#x4E00;&#x4E2A;&#x770B;&#x4F3C;&#x5F88;&#x7B80;&#x5355;&#x7684;redis&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x95EE;&#x4E86;&#x519C;&#x884C;&#x548C;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x4E5F;&#x6CA1;&#x60F3;&#x51FA;&#x66F4;&#x4F18;&#x79C0;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF01;"><a href="#&#x4E00;&#x4E2A;&#x770B;&#x4F3C;&#x5F88;&#x7B80;&#x5355;&#x7684;redis&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x95EE;&#x4E86;&#x519C;&#x884C;&#x548C;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x4E5F;&#x6CA1;&#x60F3;&#x51FA;&#x66F4;&#x4F18;&#x79C0;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF01;" class="headerlink" title="&#x4E00;&#x4E2A;&#x770B;&#x4F3C;&#x5F88;&#x7B80;&#x5355;&#x7684;redis&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x95EE;&#x4E86;&#x519C;&#x884C;&#x548C;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x4E5F;&#x6CA1;&#x60F3;&#x51FA;&#x66F4;&#x4F18;&#x79C0;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF01;"></a>&#x4E00;&#x4E2A;&#x770B;&#x4F3C;&#x5F88;&#x7B80;&#x5355;&#x7684;redis&#x9700;&#x6C42;&#xFF0C;&#x6211;&#x95EE;&#x4E86;&#x519C;&#x884C;&#x548C;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x4E5F;&#x6CA1;&#x60F3;&#x51FA;&#x66F4;&#x4F18;&#x79C0;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF01;</h1><h2 id="&#x6765;&#x81EA;&#x9886;&#x5BFC;&#x7684;&#x9700;&#x6C42;&#xFF1F;"><a href="#&#x6765;&#x81EA;&#x9886;&#x5BFC;&#x7684;&#x9700;&#x6C42;&#xFF1F;" class="headerlink" title="&#x6765;&#x81EA;&#x9886;&#x5BFC;&#x7684;&#x9700;&#x6C42;&#xFF1F;"></a>&#x6765;&#x81EA;&#x9886;&#x5BFC;&#x7684;&#x9700;&#x6C42;&#xFF1F;</h2><p>&#x6700;&#x8FD1;&#x5C0F;&#x6D63;&#x718A;&#x9886;&#x5BFC;&#x53C8;&#x4F5C;&#x5996;&#x4E86;&#xFF0C;&#x7ED9;&#x4E86;&#x6211;&#x4E00;&#x4E2A;&#x4E4D;&#x4E00;&#x542C;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x60F3;&#x4E86;&#x534A;&#x4E2A;&#x5C0F;&#x65F6;&#x4E5F;&#x6CA1;&#x60F3;&#x51FA;&#x66F4;&#x597D;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x7684;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x80CC;&#x666F;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;MQTT&#x96C6;&#x7FA4;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;topic&#x662F;&#x67D0;&#x7C7B;IOT&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x67D0;&#x4E2A;&#x8BBE;&#x5907;&#x7684;&#x201C;&#x80CE;&#x538B;&#x201D;&#xFF0C;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x9700;&#x8981;&#x5B9E;&#x65F6;&#x901A;&#x8FC7;websock&#x63A8;&#x9001;&#x5230;&#x524D;&#x7AEF;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x4E2A;&#x53C2;&#x6570;&#x9700;&#x8981;&#x8BA1;&#x7B97;&#x4E24;&#x6B21;&#x4F20;&#x9012;&#x503C;&#x7684;&#x5DEE;&#x503C;&#x3002;</p>
<p>&#x672C;&#x6765;&#x8FD9;&#x5757;&#x513F;&#x5F53;&#x65F6;&#x662F;&#x8BA9;&#x5916;&#x5305;&#x5144;&#x5F1F;&#x505A;&#x7684;&#xFF0C;&#x9886;&#x5BFC;&#x4E5F;&#x6CA1;&#x628A;&#x9700;&#x6C42;&#x5B9A;&#x4E49;&#x6E05;&#x695A;&#xFF0C;&#x5916;&#x5305;&#x5144;&#x5F1F;&#x5F88;&#x76F4;&#x63A5;&#xFF0C;&#x76F4;&#x63A5;&#x7ED9;&#x6211;&#x5F04;&#x4E86;&#x4E0A;&#x4E00;&#x79D2;&#x7684;&#x201C;&#x80CE;&#x538B;&#x201D;&#x548C;&#x8FD9;&#x4E00;&#x79D2;&#x7684;&#x201C;&#x80CE;&#x538B;&#x201D;&#x5B58;&#x5728;redis&#x91CC;&#x9762;&#xFF0C;&#x7B97;&#x8FD9;&#x4E2A;&#x5DEE;&#x503C;&#x7684;&#x65F6;&#x5019;&#x76F4;&#x63A5;&#x53D6;&#x4E0A;&#x4E00;&#x79D2;&#x7684;&#x201C;&#x80CE;&#x538B;&#x201D;&#x548C;&#x672C;&#x6B21;&#x7684;&#x201C;&#x80CE;&#x538B;&#x201D;&#x4E00;&#x7B97;&#x5C31;&#x5B8C;&#x4E8B;&#x513F;&#x4E86;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;    private void redisCacheTirePressure(String data) {</span><br><span class="line"></span><br><span class="line">        try {</span><br><span class="line">            // generate cache key</span><br><span class="line">            String redisKey = RopewayUtils.GetRopewayCaheKey(MongoConstants.TIRE_PRESSURE_LIST_CACHEKEY);</span><br><span class="line">            // put new value</span><br><span class="line">            redisTemplate.opsForList().rightPush(redisKey, data);</span><br><span class="line"></span><br><span class="line">            // get new total size</span><br><span class="line">            Long size = redisTemplate.opsForList().size(redisKey);</span><br><span class="line"></span><br><span class="line">            if (size.intValue() &gt; 2) {</span><br><span class="line">                // remove other record(s), just keep two records</span><br><span class="line">                redisTemplate.opsForList().trim(redisKey, size - 2, size - 1);</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        } catch (Exception e) {</span><br><span class="line">//            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x597D;&#x5BB6;&#x4F19;&#xFF0C;&#x6211;&#x771F;&#x60F3;&#x53CD;&#x624B;&#x7ED9;&#x5916;&#x5305;&#x5144;&#x5F1F;&#x4E00;&#x4E2A;&#x8D5E;&#x1F44D;&#xFF0C;&#x4EE3;&#x7801;&#x6CE8;&#x91CA;&#x8FD8;&#x662F;&#x82F1;&#x6587;&#xFF0C;&#x5F88;&#x6709;&#x6C34;&#x5E73;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x9886;&#x5BFC;&#x6700;&#x8FD1;&#x770B;&#x4E86;&#x770B;&#xFF0C;&#x53D1;&#x73B0;&#x4E0D;&#x5BF9;&#x554A;&#xFF0C;&#x4E3A;&#x5565;&#x8FD9;&#x4E2A;&#x201C;&#x80CE;&#x538B;&#x201D;&#x7684;&#x5DEE;&#x503C;&#x4E00;&#x76F4;&#x6CA1;&#x53D8;&#x5316; &#x554A;&#xFF0C;&#x534A;&#x4E2A;&#x6708;&#x8FC7;&#x53BB;&#x4E86;&#x6C14;&#x90FD;&#x6F0F;&#x5B8C;&#x4E86;&#xFF0C;&#x80CE;&#x538B;&#x5DEE;&#x503C;&#x8FD8;&#x662F;0&#xFF0C;&#x80AF;&#x5B9A;&#x662F;&#x5C0F;&#x6D63;&#x718A;&#x53C8;&#x5199;bug&#x4E86;&#x3002;</p>
<p>&#x6211;&#x7279;&#x4E48;&#x662F;&#x8BDA;&#x60F6;&#x8BDA;&#x6050;&#xFF0C;&#x7ACB;&#x9A6C;&#x505C;&#x6B62;&#x6478;&#x9C7C;&#xFF0C;&#x5F00;&#x59CB;&#x60F3;&#x8D77;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<h2 id="&#x519C;&#x884C;&#x3001;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;&#xFF1F;"><a href="#&#x519C;&#x884C;&#x3001;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;&#xFF1F;" class="headerlink" title="&#x519C;&#x884C;&#x3001;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;&#xFF1F;"></a>&#x519C;&#x884C;&#x3001;&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;&#xFF1F;</h2><p>&#x60F3;&#x4E86;&#x534A;&#x5929;&#xFF0C;&#x5C0F;&#x6D63;&#x718A;&#x60F3;&#x4E86;&#x4E2A;&#x6548;&#x7387;&#x4E0D;&#x600E;&#x4E48;&#x9AD8;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x5C31;&#x662F;&#x628A;&#x534A;&#x4E2A;&#x5C0F;&#x65F6;&#x7684;&#x5386;&#x53F2;&#x6570;&#x636E;&#x5168;&#x90E8;&#x7F13;&#x5B58;&#x5728;redis&#x91CC;&#x9762;&#xFF0C;&#x7136;&#x540E;&#x5F53;&#x8FD9;&#x4E00;&#x79D2;&#x7684;&#x6570;&#x636E;&#x5230;&#x4E86;&#xFF0C;&#x6211;&#x5C31;&#x53BB;redis&#x91CC;&#x9762;&#x62FF;&#x534A;&#x5C0F;&#x65F6;&#x524D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x8BA1;&#x7B97;&#x8FD9;&#x4E2A;&#x5DEE;&#x503C;&#xFF0C;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BBE;&#x8BA1;&#x6BD5;&#x7ADF;&#x5F88;&#x66B4;&#x529B;&#xFF0C;&#x4E5F;&#x5F88;&#x4E0D;&#x4F18;&#x96C5;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7684;IOT&#x6570;&#x636E;&#x662F;1s&#x4E00;&#x6B21;&#x7684;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;IOT&#x573A;&#x666F;&#x6765;&#x8BF4;redis&#x9700;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x5C31;&#x662F;30x60=1800&#x6761;&#x6570;&#x636E;&#x3002;&#x867D;&#x7136;&#x770B;&#x8D77;&#x6765;&#x8FD8;&#x597D;&#xFF0C;&#x4F46;&#x662F;&#x672A;&#x6765;IOT&#x573A;&#x666F;&#x589E;&#x5927;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x6027;&#x80FD;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x4E14;&#x5982;&#x679C;&#x9700;&#x6C42;&#x6539;&#x4E86;&#xFF0C;&#x8BA1;&#x7B97;1&#x4E2A;&#x5C0F;&#x65F6;&#x6216;&#x8005;24&#x4E2A;&#x5C0F;&#x65F6;&#x751A;&#x81F3;&#x4E00;&#x4E2A;&#x6708;&#x7684;&#x5DEE;&#x503C;&#xFF0C;&#x90A3;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x53C8;&#x5F53;&#x5982;&#x4F55;&#x5E94;&#x5BF9;&#xFF1F;&#x6240;&#x4EE5;&#x5C0F;&#x6D63;&#x718A;&#x5F97;&#x60F3;&#x529E;&#x6CD5;&#x4F18;&#x5316;&#xFF0C;&#x5C31;&#x662F;&#x6709;&#x6CA1;&#x6709;&#x90A3;&#x79CD;&#x53EA;&#x5B58;2&#x6761;&#x6570;&#x636E;&#x7684;&#x529E;&#x6CD5;&#xFF1F;</p>
<p>&#x4E8E;&#x662F;&#x81EA;&#x5DF1;&#x60F3;&#x4E0D;&#x51FA;&#x65B9;&#x6848;&#x5C31;&#x627E;&#x5916;&#x63F4;&#x5427;&#xFF0C;&#x8FD9;&#x662F;&#x5C31;&#x60F3;&#x8D77;&#x4E86;&#x81EA;&#x5DF1;&#x8FD8;&#x5728;&#x817E;&#x8BAF;&#x5446;&#x7740;&#x7684;&#x7814;&#x7A76;&#x751F;&#x5BA4;&#x53CB;&#xFF0C;&#x5148;&#x95EE;&#x95EE;&#x4ED6;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x505A;&#x4E0D;&#xFF1F;&#x9996;&#x5148;&#x54B1;&#x4EEC;&#x628A;&#x9700;&#x6C42;&#x7ED9;&#x4ED6;&#x63CF;&#x8FF0;&#x6E05;&#x695A;&#x54AF;&#xFF0C;&#x5165;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/09dda7e92b33ccb702a4f7502a598c70267800b28125650030e3f91869789aee" alt="image.png"></p>
<h3 id="&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;"><a href="#&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;" class="headerlink" title="&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;"></a>&#x817E;&#x8BAF;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f87b5d5c1931d0713ea3a526577108af0948a0e4686c92efe4ed6d7c4c6d1dd4" alt="image.png"><br>&#x6211;&#x548C;&#x6211;&#x7684;&#x5BA4;&#x53CB;&#x5408;&#x8BA1;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x597D;&#x50CF;&#x4E5F;&#x6CA1;&#x60F3;&#x51FA;&#x5565;&#x597D;&#x7684;&#x65B9;&#x6848;&#xFF5E; &#x90FD;&#x5728;&#x611F;&#x53F9;&#x81EA;&#x5DF1;&#x662F;&#x83DC;&#x9E21;&#xFF0C;&#x5F53;&#x7136;&#x6211;&#x66F4;&#x83DC;&#x4E00;&#x70B9;&#x513F;&#x3002;</p>
<h3 id="&#x519C;&#x884C;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;"><a href="#&#x519C;&#x884C;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;" class="headerlink" title="&#x519C;&#x884C;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;"></a>&#x519C;&#x884C;&#x5927;&#x4F6C;&#x600E;&#x4E48;&#x8BF4;</h3><p><img src alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1b3a82aac918465b95010bd39e5140a577623c0183622a1e7ed43761aa457bcb" alt="image.png"><br>&#x519C;&#x884C;&#x5927;&#x4F6C;&#x7684;&#x89D2;&#x5EA6;&#x6BD4;&#x8F83;&#x6E05;&#x5947;&#xFF0C;&#x4E0D;&#x7136;&#x4E0D;&#x80FD;&#x6539;&#x53D8;&#x65B9;&#x6848;&#xFF0C;&#x90A3;&#x5C31;&#x6539;&#x53D8;&#x9886;&#x5BFC;&#xFF0C;&#x4E0D;&#x5F97;&#x4E0D;&#x8BF4;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x597D;&#x7684;&#x601D;&#x8DEF;&#xFF5E;</p>
<h2 id="&#x5C0F;&#x6D63;&#x718A;&#x7684;&#x83DC;&#x9E21;&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#&#x5C0F;&#x6D63;&#x718A;&#x7684;&#x83DC;&#x9E21;&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="&#x5C0F;&#x6D63;&#x718A;&#x7684;&#x83DC;&#x9E21;&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x5C0F;&#x6D63;&#x718A;&#x7684;&#x83DC;&#x9E21;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><p>&#x6CA1;&#x529E;&#x6CD5;&#xFF0C;&#x53EA;&#x6709;&#x86EE;&#x5E72;&#x4E86;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x53EA;&#x6709;&#x5728;redis&#x5F53;&#x4E2D;&#x628A;&#x524D;&#x534A;&#x4E2A;&#x5C0F;&#x65F6;&#x7684;&#x5386;&#x53F2;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x4E0B;&#x6765;&#xFF0C;&#x5B9E;&#x65F6;&#x5220;&#x9664;&#x591A;&#x4F59;&#x7684;&#x90E8;&#x5206;&#x6570;&#x636E;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;    private void redisCacheTirePressure(String data,int cacheTimeMinutes) {</span><br><span class="line">        try {</span><br><span class="line">        </span><br><span class="line">            String redisKey = RopewayUtils.GetRopewayCaheKey(MongoConstants.TIRE_PRESSURE_ZSET_CACHEKEY);</span><br><span class="line">            </span><br><span class="line">            long currentTime = System.currentTimeMillis();</span><br><span class="line">            </span><br><span class="line">            //&#x5B58;&#x50A8;&#x5F53;&#x524D;&#x7684;&#x6570;&#x636E;&#x5230;redis&#x7684;zset&#x5F53;&#x4E2D;&#xFF0C;score&#x4E3A;&#x5F53;&#x524D;&#x65F6;&#x95F4;,zset&#x9ED8;&#x8BA4;&#x6392;&#x5E8F;&#x662F;&#x6309;&#x7167;&#x5347;&#x5E8F;&#x6392;&#x5217;&#x7684;</span><br><span class="line">            redisTemplate.opsForZSet().add(redisKey,data,currentTime);</span><br><span class="line">            </span><br><span class="line">            //&#x4ECE;&#x524D;&#x5230;&#x540E;&#x904D;&#x5386;zset&#xFF0C;&#x627E;&#x5230;&#x548C;currentTime&#x5DEE;&#x503C;&#x4E3A;cacheTimeMinutes&#x7684;&#x8282;&#x70B9;</span><br><span class="line">            Set&lt;Object&gt; expiredMembers = redisTemplate.opsForZSet().rangeByScore(redisKey, Double.NEGATIVE_INFINITY, currentTime - cacheTimeMinutes * 60 * 1000);</span><br><span class="line">            </span><br><span class="line">            //&#x5220;&#x9664;&#x8D85;&#x8FC7;cacheTimeMinutes&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x4FDD;&#x8BC1;&#x5728;zset&#x7684;&#x9996;&#x5C3E;&#x8282;&#x70B9;&#x65F6;&#x5DEE;&#x4E3A;30&#x5206;&#x949F;</span><br><span class="line">            for (Object expiredMember : expiredMembers) {</span><br><span class="line">            </span><br><span class="line">                redisTemplate.opsForZSet().remove(redisKey, expiredMember);</span><br><span class="line">                </span><br><span class="line">            }</span><br><span class="line">            </span><br><span class="line">        } catch (Exception e) {</span><br><span class="line">        </span><br><span class="line">            logger.error(e.getMessage());</span><br><span class="line">            </span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x8BA1;&#x7B97;&#x5B9E;&#x65F6;&#x5DEE;&#x503C;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x53D6;redis&#x4E2D;zset&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x548C;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8BA1;&#x7B97;&#x5C31;&#x53EF;&#x4EE5;&#x54AF;&#xFF0C;&#x9700;&#x6C42;&#x5C31;&#x8FD9;&#x6837;&#x5B8C;&#x6210;&#x4E86;&#xFF01;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;        </span><br><span class="line">        String redisKey = RopewayUtils.GetRopewayCaheKey(MongoConstants.TIRE_PRESSURE_ZSET_CACHEKEY);</span><br><span class="line">        </span><br><span class="line">        Set&lt;String&gt; records = redisTemplate.opsForZSet().range(redisKey,0,-1);</span><br><span class="line">        </span><br><span class="line">        List&lt;String&gt; recordsList = new ArrayList&lt;&gt;(records);</span><br><span class="line">        </span><br><span class="line">        if (recordsList != null &amp;&amp; records.size() &gt; 1) {</span><br><span class="line">            String prev = recordsList.get(0);</span><br><span class="line">            String next = recordsList.get(recordsList.size() - 1);</span><br><span class="line">            //&#x5176;&#x5B83;&#x7684;&#x64CD;&#x4F5C;</span><br><span class="line">        }</span><br></pre></td></tr></table></figure>

<h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p>&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x6F0F;&#x6D1E;&#x767E;&#x51FA;&#xFF0C;&#x9996;&#x5148;&#x5F53;&#x9879;&#x76EE;&#x89C4;&#x6A21;&#x6269;&#x5927;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x7B97;&#x4E00;&#x4E2A;IOT&#x8BBE;&#x5907;&#x90A3;&#x4E48;&#x6570;&#x636E;&#x4E5F;&#x6709;30x60=1800&#x6761;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x5907;&#x6570;&#x636E;&#x4E0D;&#x65AD;&#x6269;&#x5F20;&#xFF0C;&#x6781;&#x6709;&#x53EF;&#x80FD;&#x5E72;&#x7206;redis&#x3002;&#x5E76;&#x4E14;&#xFF0C;&#x5047;&#x8BBE;&#x5F53;&#x9886;&#x5BFC;&#x6539;&#x6210;&#x8BA1;&#x7B97;&#x4E00;&#x4E2A;&#x6708;&#x7684;&#x5DEE;&#x503C;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x6570;&#x636E;&#x91CF;&#x5C06;&#x4F1A;&#x8FBE;&#x5230;60x60x24x30 = 259&#x4E07;&#x6761;&#x7684;zset&#x6570;&#x636E;&#xFF0C;redis&#x7206;&#x4E4B;&#x65E0;&#x7591;&#x3002;</p>
<p>&#x4E0D;&#x77E5;&#x9053;&#x6398;&#x91D1;&#x7684;&#x5404;&#x4F4D;&#x5927;&#x4F6C;&#x6709;&#x6CA1;&#x6709;&#x5176;&#x5B83;&#x7684;&#x597D;&#x65B9;&#x6848;&#xFF0C;&#x5E2E;&#x5E2E;&#x6211;&#x8FD9;&#x4E2A;&#x83DC;&#x9E21;&#x60F3;&#x51FA;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x9002;&#x5E94;&#x5F53;&#x9879;&#x76EE;&#x89C4;&#x6A21;&#x6269;&#x5927;&#x7684;&#x65F6;&#x5019;&#x6216;&#x8005;&#x9886;&#x5BFC;&#x6539;&#x9700;&#x6C42;&#x65F6;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x611F;&#x6FC0;&#x4E0D;&#x5C3D;&#xFF5E;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/78f5607847264bcd150a88f8efd0cdea.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322733301669216271.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322733301669216271.html" itemprop="url">在Java中一种更快的反射调用方式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-12T10:58:20+08:00">
                2024-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><p>&#x5728;&#x4F7F;&#x7528;<code>Java</code>&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x4F7F;&#x7528;&#x5230;&#x5927;&#x91CF;&#x7684;&#x53CD;&#x5C04;&#x64CD;&#x4F5C;&#xFF0C;&#x6BD4;&#x5982;<code>Spring Boot</code>&#x4F1A;&#x5728;&#x63A5;&#x6536;&#x5230;<code>HTTP</code>&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x5229;&#x7528;&#x53CD;&#x5C04;<code>Controller</code>&#x8C03;&#x7528;&#x63A5;&#x53E3;&#x4E2D;&#x7684;&#x5BF9;&#x5E94;&#x65B9;&#x6CD5;&#xFF0C;&#x6216;&#x662F;<code>Jackson</code>&#x6846;&#x67B6;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x6765;&#x89E3;&#x6790;<code>json</code>&#x4E2D;&#x7684;&#x6570;&#x636E;&#x7ED9;&#x5BF9;&#x5E94;&#x5B57;&#x6BB5;&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code>JMH</code>&#x6D4B;&#x8BD5;&#x6765;&#x8BC4;&#x4F30;&#x4E00;&#x4E0B;&#x901A;&#x8FC7;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x4E0E;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x8DDD;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">@BenchmarkMode(value = Mode.AverageTime)  </span><br><span class="line">@Warmup(iterations = 3, time = 500, timeUnit = TimeUnit.MILLISECONDS)  </span><br><span class="line">@Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)  </span><br><span class="line">@State(Scope.Thread)  </span><br><span class="line">@OutputTimeUnit(TimeUnit.NANOSECONDS)  </span><br><span class="line">public abstract class JmhTest {  </span><br><span class="line">    public static void runTest(Class&lt;?&gt; launchClass) throws RunnerException {  </span><br><span class="line">        Options options = new OptionsBuilder().include(launchClass.getSimpleName()).build();  </span><br><span class="line">        new Runner(options).run();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">package cn.zorcc.common.jmh;  </span><br><span class="line">  </span><br><span class="line">import org.openjdk.jmh.annotations.Benchmark;  </span><br><span class="line">import org.openjdk.jmh.annotations.Param;  </span><br><span class="line">import org.openjdk.jmh.infra.Blackhole;  </span><br><span class="line">import org.openjdk.jmh.runner.RunnerException;  </span><br><span class="line">  </span><br><span class="line">import java.lang.invoke.MethodHandle;  </span><br><span class="line">import java.lang.invoke.MethodHandles;  </span><br><span class="line">import java.lang.invoke.MethodType;  </span><br><span class="line">import java.lang.reflect.Constructor;  </span><br><span class="line">import java.lang.reflect.Method;  </span><br><span class="line">  </span><br><span class="line">public class ReflectionTest extends JmhTest {  </span><br><span class="line">    @Param({&quot;10&quot;, &quot;100&quot;, &quot;1000&quot;, &quot;10000&quot;})  </span><br><span class="line">    private int size;  </span><br><span class="line">  </span><br><span class="line">    static class Test {  </span><br><span class="line">        private int integer;  </span><br><span class="line">  </span><br><span class="line">        public int getInteger() {  </span><br><span class="line">            return integer;  </span><br><span class="line">        }  </span><br><span class="line">  </span><br><span class="line">        public void setInteger(int integer) {  </span><br><span class="line">            this.integer = integer;  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">  </span><br><span class="line">    @Benchmark  </span><br><span class="line">    public void testDirectCall(Blackhole bh) {  </span><br><span class="line">        for(int i = 0; i &lt; size; i++) {  </span><br><span class="line">            Test test = new Test();  </span><br><span class="line">            bh.consume(test);  </span><br><span class="line">            test.setInteger(i);  </span><br><span class="line">            bh.consume(test.getInteger());  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">  </span><br><span class="line">    @Benchmark  </span><br><span class="line">    public void testNormalReflection(Blackhole bh) {  </span><br><span class="line">        try{  </span><br><span class="line">            Constructor&lt;Test&gt; constructor = Test.class.getDeclaredConstructor();  </span><br><span class="line">            Method setter = Test.class.getDeclaredMethod(&quot;setInteger&quot;, int.class);  </span><br><span class="line">            Method getter = Test.class.getDeclaredMethod(&quot;getInteger&quot;);  </span><br><span class="line">            for(int i = 0; i &lt; size; i++) {  </span><br><span class="line">                Test test = constructor.newInstance();  </span><br><span class="line">                bh.consume(test);  </span><br><span class="line">                setter.invoke(test, i);  </span><br><span class="line">                int integer = (int) getter.invoke(test);  </span><br><span class="line">                bh.consume(integer);  </span><br><span class="line">            }  </span><br><span class="line">        }catch (Throwable e) {  </span><br><span class="line">            throw new UnknownError();  </span><br><span class="line">        }  </span><br><span class="line">    }  </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    public static void main(String[] args) throws RunnerException {  </span><br><span class="line">        runTest(ReflectionTest.class);  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;<code>Test</code>&#x7C7B;&#x4E2D;&#xFF0C;&#x5177;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;<code>int</code>&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x6D4B;&#x8BD5;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x6784;&#x9020;&#x65B9;&#x6CD5;&#xFF0C;&#x8D4B;&#x503C;&#x7136;&#x540E;&#x53D6;&#x503C;&#xFF0C;&#x4EE5;&#x53CA;&#x4F7F;&#x7528;<code>Constructor</code>&#x548C;<code>Method</code>&#x8FDB;&#x884C;&#x666E;&#x901A;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x4E4B;&#x95F4;&#x7684;&#x6027;&#x80FD;&#x5BF9;&#x6BD4;&#xFF0C;&#x6CE8;&#x610F;&#x4E00;&#x5B9A;&#x8981;&#x5C06;&#x6784;&#x9020;&#x51FA;&#x6765;&#x7684;&#x5BF9;&#x8C61;&#x4F7F;&#x7528;<code>Blackhole.consume()</code>&#x65B9;&#x6CD5;&#x7ED9;&#x5403;&#x6389;&#xFF0C;&#x8FD9;&#x6837;<code>JVM</code>&#x624D;&#x4E0D;&#x4F1A;&#x628A;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x53D8;&#x91CF;&#x7ED9;&#x76F4;&#x63A5;&#x7684;&#x4F18;&#x5316;&#x6389;&#xFF0C;&#x5F97;&#x51FA;&#x9519;&#x8BEF;&#x7684;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#xFF0C;&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x5728;&#x7B14;&#x8005;&#x7684;&#x673A;&#x5668;&#x4E0A;&#x8FD0;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">plaintext&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">Benchmark                                  (size)  Mode  Cnt       Score       Error  Units</span><br><span class="line">ReflectionTest.testDirectCall                  10  avgt   50      10.584 &#xB1;     0.141  ns/op</span><br><span class="line">ReflectionTest.testDirectCall                 100  avgt   50     108.301 &#xB1;     1.129  ns/op</span><br><span class="line">ReflectionTest.testDirectCall                1000  avgt   50    1068.026 &#xB1;    12.312  ns/op</span><br><span class="line">ReflectionTest.testDirectCall               10000  avgt   50   10660.596 &#xB1;   148.673  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection            10  avgt   50     145.483 &#xB1;     1.300  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection           100  avgt   50    1131.994 &#xB1;    19.586  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection          1000  avgt   50   13461.067 &#xB1;   130.624  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection         10000  avgt   50  148811.318 &#xB1;  5766.679  ns/op</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x7684;&#x6027;&#x80FD;&#x6BD4;&#x8D77;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x6765;&#x8BB2;&#x6709;&#x975E;&#x5E38;&#x5927;&#x7684;&#x5DEE;&#x8DDD;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x8FD9;&#x79CD;&#x6781;&#x5176;&#x7B80;&#x5355;&#x7684;&#x5BF9;&#x8C61;&#x521B;&#x5EFA;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;&#x53CD;&#x5C04;&#x662F;&#x5F88;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x4E0D;&#x5F97;&#x4E0D;&#x91C7;&#x7528;&#x7684;&#x4E00;&#x4E2A;&#x505A;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x6709;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x529E;&#x6CD5;&#x6765;&#x5C3D;&#x53EF;&#x80FD;&#x4F18;&#x5316;&#x4E00;&#x4E0B;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x7684;&#x6027;&#x80FD;&#x5462;&#xFF1F;</p>
<p>&#x5148;&#x8BA9;&#x6211;&#x4EEC;&#x8BD5;&#x4E00;&#x4E0B;<code>MethodHandle</code>&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x6A21;&#x578B;&#xFF0C;<code>MethodHandle</code>&#x662F;&#x81EA;<code>JDK7</code>&#x7248;&#x672C;&#x540E;&#x5F00;&#x59CB;&#x63A8;&#x51FA;&#x7684;&#xFF0C;&#x7528;&#x4E8E;&#x66FF;&#x6362;&#x65E7;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x7684;&#x65B0;&#x65B9;&#x5F0F;&#xFF0C;&#x76F8;&#x6BD4;&#x8D77;&#x539F;&#x6709;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x4EA4;&#x4E92;&#x65B9;&#x5F0F;&#xFF0C;&#x5E76;&#x4E14;&#x5177;&#x5907;&#x5BF9;<code>Java</code>&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x548C;<code>Native</code>&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x4E00;&#x81F4;&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7684;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x4F8B;&#x8FDB;&#x884C;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">@Benchmark  </span><br><span class="line">public void testMethodHandleReflection(Blackhole bh) {  </span><br><span class="line">    try{  </span><br><span class="line">        MethodHandles.Lookup lookup = MethodHandles.lookup();  </span><br><span class="line">        MethodType constructorType = MethodType.methodType(void.class);  </span><br><span class="line">        MethodHandle constructorHandle = lookup.findConstructor(Test.class, constructorType);  </span><br><span class="line">        MethodHandle iSetter = lookup.findSetter(Test.class, &quot;integer&quot;, int.class);  </span><br><span class="line">        MethodHandle iGetter = lookup.findGetter(Test.class, &quot;integer&quot;, int.class);  </span><br><span class="line">        for(int i = 0; i &lt; size; i++) {  </span><br><span class="line">            Test test = (Test) constructorHandle.invokeExact();  </span><br><span class="line">            bh.consume(test);  </span><br><span class="line">            iSetter.invokeExact(test, i);  </span><br><span class="line">            int integer = (int) iGetter.invokeExact(test);  </span><br><span class="line">            bh.consume(integer);  </span><br><span class="line">        }  </span><br><span class="line">    }catch (Throwable e) {  </span><br><span class="line">        throw new UnknownError();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5B9E;&#x6D4B;&#x7684;&#x7ED3;&#x679C;&#x5219;&#x66F4;&#x52A0;&#x7684;&#x4E0D;&#x5C3D;&#x4EBA;&#x610F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plaintext&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">ReflectionTest.testMethodHandleReflection      10  avgt   50    1346.515 &#xB1;    17.347  ns/op</span><br><span class="line">ReflectionTest.testMethodHandleReflection     100  avgt   50    2355.083 &#xB1;    37.358  ns/op</span><br><span class="line">ReflectionTest.testMethodHandleReflection    1000  avgt   50  456694.572 &#xB1; 31415.118  ns/op</span><br><span class="line">ReflectionTest.testMethodHandleReflection   10000  avgt   50  982008.110 &#xB1; 46807.572  ns/op</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4F7F;&#x7528;<code>MethodHandle</code>&#x4E0E;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x53CD;&#x5C04;&#x4E4B;&#x95F4;&#x7684;&#x6027;&#x80FD;&#x5DEE;&#x8DDD;&#xFF0C;&#x5C31;&#x548C;&#x666E;&#x901A;&#x53CD;&#x5C04;&#x4E0E;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x4E4B;&#x95F4;&#x7684;&#x5DEE;&#x8DDD;&#x4E00;&#x6837;&#x5927;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E0A;&#x5728;<code>JDK18</code>&#x4EE5;&#x540E;&#xFF0C;&#x6839;&#x636E;<a href="/external_links/aae6624f5967d14366d1971ec5778191.html" target="blank" rel="noopener"># JEP 416: Reimplement Core Reflection with Method Handles</a> &#x4F7F;&#x7528;<code>java.lang.reflect</code>&#x548C;<code>java.lang.invoke</code>&#x7684;&#x76F8;&#x5173;<code>API</code>&#x5DF2;&#x7ECF;&#x8FDB;&#x884C;&#x4E86;&#x76F8;&#x5E94;&#x7684;&#x5E95;&#x5C42;&#x91CD;&#x6784;&#xFF0C;&#x8F6C;&#x800C;&#x4F7F;&#x7528;<code>MethodHandle</code>&#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#xFF0C;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>java.lang.reflect</code>&#x548C;<code>java.lang.invoke</code>&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#xFF0C;&#x4E0E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>MethodHandle</code>&#x76F8;&#x6BD4;&#xFF0C;&#x5177;&#x5907;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x4F18;&#x5316;&#x5DE5;&#x4F5C;&#xFF0C;&#x6839;&#x636E;&#x5B98;&#x65B9;&#x7684;&#x8BF4;&#x6CD5;&#xFF0C;&#x5728;&#x4F7F;&#x7528;<code>MethodHandle</code>&#x65F6;&#x56E0;&#x5C06;&#x5B57;&#x6BB5;&#x5C3D;&#x53EF;&#x80FD;&#x5B9A;&#x4E49;&#x4E3A;<code>static final</code>&#xFF0C;&#x8FD9;&#x6837;<code>JVM</code>&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x8FDB;&#x884C;&#x5E38;&#x91CF;&#x6298;&#x53E0;&#xFF0C;&#x4ECE;&#x800C;&#x5B9E;&#x73B0;&#x5DE8;&#x5927;&#x7684;&#x6027;&#x80FD;&#x63D0;&#x5347;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4FEE;&#x6539;&#x4E00;&#x4E0B;&#x4EE5;&#x4E0A;&#x7684;&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">private static final MethodHandle constructorHandle;  </span><br><span class="line">private static final MethodHandle iSetter;  </span><br><span class="line">private static final MethodHandle iGetter;  </span><br><span class="line">static {  </span><br><span class="line">    try{  </span><br><span class="line">        MethodHandles.Lookup lookup = MethodHandles.lookup();  </span><br><span class="line">        MethodType constructorType = MethodType.methodType(void.class);  </span><br><span class="line">        constructorHandle = lookup.findConstructor(Test.class, constructorType);  </span><br><span class="line">        iSetter = lookup.findSetter(Test.class, &quot;integer&quot;, int.class);  </span><br><span class="line">        iGetter = lookup.findGetter(Test.class, &quot;integer&quot;, int.class);  </span><br><span class="line">    }catch (Throwable e) {  </span><br><span class="line">        throw new UnknownError();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Benchmark  </span><br><span class="line">public void testMethodHandleReflection(Blackhole bh) {  </span><br><span class="line">    try{  </span><br><span class="line">        for(int i = 0; i &lt; size; i++) {  </span><br><span class="line">            Test test = (Test) constructorHandle.invokeExact();  </span><br><span class="line">            bh.consume(test);  </span><br><span class="line">            iSetter.invokeExact(test, i);  </span><br><span class="line">            int integer = (int) iGetter.invokeExact(test);  </span><br><span class="line">            bh.consume(integer);  </span><br><span class="line">        }  </span><br><span class="line">    }catch (Throwable e) {  </span><br><span class="line">        throw new UnknownError();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5F97;&#x5230;&#x4E86;&#x5982;&#x4E0B;&#x7684;&#x6570;&#x636E;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plaintext&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">ReflectionTest.testMethodHandleReflection      10  avgt   50       9.825 &#xB1;    0.084  ns/op</span><br><span class="line">ReflectionTest.testMethodHandleReflection     100  avgt   50      99.174 &#xB1;    1.128  ns/op</span><br><span class="line">ReflectionTest.testMethodHandleReflection    1000  avgt   50     997.094 &#xB1;   11.961  ns/op</span><br><span class="line">ReflectionTest.testMethodHandleReflection   10000  avgt   50   10212.014 &#xB1;  215.662  ns/op</span><br></pre></td></tr></table></figure>

<p>&#x7A81;&#x7136;&#x4E4B;&#x95F4;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x548C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x7684;&#x6027;&#x80FD;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x662F;&#x4E0D;&#x662F;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x529F;&#x80FD;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x5B9E;&#x73B0;&#x4E86;&#x5462;&#xFF1F;&#x4E8B;&#x5B9E;&#x4E0A;&#x5E76;&#x672A;&#x5982;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x5728;<code>static final</code>&#x4E2D;&#x6307;&#x5B9A;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x53CD;&#x5C04;&#x5B57;&#x6BB5;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x635F;&#x5931;&#x4E86;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x7684;&#x7075;&#x6D3B;&#x6027;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x4E2D;&#x53EF;&#x884C;&#x6027;&#x5E76;&#x4E0D;&#x9AD8;&#x3002;</p>
<p>&#x540C;&#x6837;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BD5;&#x4E00;&#x8BD5;&#xFF0C;&#x5C06;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>java.lang.reflect</code>&#x548C;<code>java.lang.invoke</code>&#x7684;&#x51FD;&#x6570;&#x6240;&#x9700;&#x7684;&#x5BF9;&#x8C61;&#x5148;&#x6784;&#x5EFA;&#x5E76;&#x7F13;&#x5B58;&#x5728;&#x672C;&#x5730;&#xFF0C;&#x518D;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x6027;&#x80FD;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">private Constructor&lt;Test&gt; c;  </span><br><span class="line">private Method setter;  </span><br><span class="line">private Method getter;</span><br><span class="line"></span><br><span class="line">@Setup   </span><br><span class="line">public void setup() {</span><br><span class="line">	try{  </span><br><span class="line">	    this.c = Test.class.getDeclaredConstructor();  </span><br><span class="line">		this.setter = Test.class.getDeclaredMethod(&quot;setInteger&quot;, int.class);  </span><br><span class="line">		this.getter = Test.class.getDeclaredMethod(&quot;getInteger&quot;);</span><br><span class="line">	}catch (Throwable e) {  </span><br><span class="line">	    throw new UnknownError();  </span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Benchmark  </span><br><span class="line">public void testNormalReflection(Blackhole bh) {  </span><br><span class="line">    try{  </span><br><span class="line">        for(int i = 0; i &lt; size; i++) {  </span><br><span class="line">            Test test = c.newInstance();  </span><br><span class="line">            bh.consume(test);  </span><br><span class="line">            setter.invoke(test, i);  </span><br><span class="line">            int integer = (int) getter.invoke(test);  </span><br><span class="line">            bh.consume(integer);  </span><br><span class="line">        }  </span><br><span class="line">    }catch (Throwable e) {  </span><br><span class="line">        throw new UnknownError();  </span><br><span class="line">    }  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E0E;&#x5728;&#x6D4B;&#x8BD5;<code>MethodHandle</code>&#x65F6;&#x6211;&#x4EEC;&#x5C06;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x7684;&#x53D8;&#x91CF;&#x5B9A;&#x4E49;&#x4E3A;<code>static final</code>&#x4E0D;&#x540C;&#xFF0C;&#x6B64;&#x5904;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5C06;&#x5176;&#x5B9A;&#x4E49;&#x4E3A;<code>private</code>&#x53D8;&#x91CF;&#xFF0C;&#x5728;<code>JMH</code>&#x6846;&#x67B6;&#x4E2D;&#x63D0;&#x4F9B;&#x7684;<code>@Setup</code>&#x51FD;&#x6570;&#x4E2D;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x66F4;&#x8D34;&#x5408;&#x7684;&#x6A21;&#x62DF;&#x6211;&#x4EEC;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6D4B;&#x8BD5;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plaintext&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">ReflectionTest.testNormalReflection      10  avgt   50     152.242 &#xB1;    5.625  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection     100  avgt   50    1495.302 &#xB1;   21.467  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection    1000  avgt   50   16917.774 &#xB1;  420.810  ns/op</span><br><span class="line">ReflectionTest.testNormalReflection   10000  avgt   50  143252.377 &#xB1; 2150.908  ns/op</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x53CD;&#x5C04;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x6BCF;&#x6B21;&#x90FD;&#x83B7;&#x53D6;&#x65B0;&#x7684;<code>Constructor</code>&#x6216;<code>Method</code>&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x521B;&#x5EFA;&#xFF0C;&#x8FD8;&#x662F;&#x901A;&#x8FC7;&#x63D0;&#x524D;&#x7F13;&#x5B58;&#x7684;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#xFF0C;&#x6027;&#x80FD;&#x8868;&#x73B0;&#x662F;&#x76F8;&#x4F3C;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x4F7F;&#x5F97;&#x901A;&#x7528;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x5728;&#x5404;&#x7C7B;&#x901A;&#x7528;&#x573A;&#x666F;&#x4E0B;&#x90FD;&#x80FD;&#x591F;&#x5177;&#x5907;&#x6BD4;&#x8F83;&#x4E0D;&#x9519;&#x7684;&#x8868;&#x73B0;&#x3002;</p>
<p>&#x9274;&#x4E8E;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x7684;&#x8FD9;&#x4E9B;&#x6D4B;&#x8BD5;&#x7ED3;&#x679C;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x63D0;&#x5347;&#x53CD;&#x5C04;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x53EA;&#x80FD;&#x8003;&#x8651;&#x4F7F;&#x7528;&#x7C7B;&#x751F;&#x6210;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x671F;&#x521B;&#x5EFA;&#x51FA;<code>MethodHandle</code>&#x7684;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF0C;&#x8BA9;<code>JVM</code>&#x5E2E;&#x6211;&#x4EEC;&#x53BB;&#x81EA;&#x52A8;&#x5185;&#x8054;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x7C7B;&#x751F;&#x6210;&#x7684;&#x65B9;&#x5F0F;&#x4E00;&#x5B9A;&#x53EF;&#x4EE5;&#x62E5;&#x6709;&#x975E;&#x5E38;&#x4E0D;&#x9519;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;<code>ByteBuddy</code>&#x6216;<code>Asm</code>&#x6846;&#x67B6;&#x8FDB;&#x884C;&#x7C7B;&#x751F;&#x6210;&#x7684;&#x4EE3;&#x7801;&#x76F8;&#x5BF9;&#x800C;&#x8A00;&#x8FC7;&#x4E8E;&#x7E41;&#x7410;&#xFF0C;&#x76EE;&#x524D;[# JEP 457: Class-File API (Preview)].(<a href="/external_links/3e5947623c9601127f09dc359ea343f6.html" target="blank" rel="noopener">openjdk.org/jeps/457</a>) &#x7279;&#x6027;&#x6B63;&#x5904;&#x4E8E;<code>preview</code>&#x9636;&#x6BB5;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x52A0;&#x7B80;&#x5316;&#x7684;&#x5728;<code>JVM</code>&#x4E2D;&#x8FDB;&#x884C;&#x7C7B;&#x751F;&#x6210;&#xFF0C;&#x4F46;&#x662F;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x8FD8;&#x65E0;&#x6CD5;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x3002;</p>
<h2 id="&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><p><code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x8D2F;&#x7A7F;&#x4E86;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x7684;&#x5F00;&#x53D1;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x89D2;&#x843D;&#xFF0C;&#x4E14;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x672C;&#x8EAB;&#x7684;&#x6027;&#x80FD;&#x4E0D;&#x4F1A;&#x5DEE;&#xFF0C;&#x5426;&#x5219;<code>JDK</code>&#x5185;&#x90E8;&#x7EDD;&#x5BF9;&#x4E0D;&#x4F1A;&#x5982;&#x6B64;&#x5927;&#x91CF;&#x7684;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x751F;&#x6210;&#x65B9;&#x5F0F;&#x4E5F;&#x5E76;&#x4E0D;&#x590D;&#x6742;&#xFF0C;&#x5176;&#x80CC;&#x540E;&#x7684;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;&#x662F;&#x901A;&#x8FC7;<code>LambdaMetafactory.metafactory()</code>&#x65B9;&#x6CD5;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x662F;&#x5B9E;&#x73B0;&#x4EE5;&#x4E0B;&#x7684;&#x4EE3;&#x7801;&#x6765;&#x5B8C;&#x6210;&#x5BF9;&#x5E94;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF0C;<code>getter</code>&#x65B9;&#x6CD5;&#x548C;<code>setter</code>&#x65B9;&#x6CD5;&#x5411;<code>Lambda</code>&#x51FD;&#x6570;&#x7684;&#x8F6C;&#x6362;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">private Supplier&lt;Test&gt; constructor;  </span><br><span class="line">private BiConsumer&lt;Object, Object&gt; setConsumer;  </span><br><span class="line">private Function&lt;Test, Integer&gt; getFunction;</span><br><span class="line"></span><br><span class="line">@Setup  </span><br><span class="line">public void setup() throws Throwable {</span><br><span class="line">	MethodHandles.Lookup lookup = MethodHandles.privateLookupIn(ReflectionTest.class, MethodHandles.lookup());  </span><br><span class="line">	this.constructor = lambdaGenerateConstructor(lookup);  </span><br><span class="line">	this.setConsumer = lambdaGenerateSetter(lookup);  </span><br><span class="line">	this.getFunction = lambdaGenerateGetter(lookup);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@SuppressWarnings(&quot;unchecked&quot;)  </span><br><span class="line">private Supplier&lt;Test&gt; lambdaGenerateConstructor(MethodHandles.Lookup lookup) throws Throwable {  </span><br><span class="line">    MethodHandle cmh = lookup.findConstructor(Test.class, MethodType.methodType(void.class));  </span><br><span class="line">    CallSite c1 = LambdaMetafactory.metafactory(lookup,  </span><br><span class="line">            &quot;get&quot;,  </span><br><span class="line">            MethodType.methodType(Supplier.class),  </span><br><span class="line">            MethodType.methodType(Object.class), cmh, MethodType.methodType(Test.class));  </span><br><span class="line">    return (Supplier&lt;Test&gt;) c1.getTarget().invokeExact();  </span><br><span class="line">}  </span><br><span class="line">  </span><br><span class="line">@SuppressWarnings(&quot;unchecked&quot;)  </span><br><span class="line">private BiConsumer&lt;Object, Object&gt; lambdaGenerateSetter(MethodHandles.Lookup lookup) throws Throwable {  </span><br><span class="line">    MethodHandle setHandle = lookup.findVirtual(Test.class, &quot;setInteger&quot;, MethodType.methodType(void.class, int.class));  </span><br><span class="line">    CallSite callSite = LambdaMetafactory.metafactory(lookup,  </span><br><span class="line">            &quot;accept&quot;,  </span><br><span class="line">            MethodType.methodType(BiConsumer.class),  </span><br><span class="line">            MethodType.methodType(void.class, Object.class, Object.class),  </span><br><span class="line">            setHandle,  </span><br><span class="line">            MethodType.methodType(void.class, Test.class, Integer.class));  </span><br><span class="line">    return (BiConsumer&lt;Object, Object&gt;) callSite.getTarget().invokeExact();  </span><br><span class="line">}  </span><br><span class="line">  </span><br><span class="line">@SuppressWarnings(&quot;unchecked&quot;)  </span><br><span class="line">private Function&lt;Test, Integer&gt; lambdaGenerateGetter(MethodHandles.Lookup lookup) throws Throwable {  </span><br><span class="line">    MethodHandle getHandle = lookup.findVirtual(Test.class, &quot;getInteger&quot;, MethodType.methodType(int.class));  </span><br><span class="line">    CallSite getSite = LambdaMetafactory.metafactory(  </span><br><span class="line">            lookup,  </span><br><span class="line">            &quot;apply&quot;,  </span><br><span class="line">            MethodType.methodType(Function.class),  </span><br><span class="line">            MethodType.methodType(Object.class, Object.class),  </span><br><span class="line">            getHandle,  </span><br><span class="line">            MethodType.methodType(Integer.class, Test.class)  </span><br><span class="line">    );  </span><br><span class="line">    return (Function&lt;Test, Integer&gt;) getSite.getTarget().invokeExact();  </span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Benchmark  </span><br><span class="line">public void testLambda(Blackhole bh) {  </span><br><span class="line">    for(int i = 0; i &lt; size; i++) {  </span><br><span class="line">        Test test = constructor.get();  </span><br><span class="line">        bh.consume(test);  </span><br><span class="line">        setConsumer.accept(test, i);  </span><br><span class="line">        int integer = getFunction.apply(test);  </span><br><span class="line">        bh.consume(integer);  </span><br><span class="line">    }  </span><br><span class="line">}  </span><br><span class="line">  </span><br><span class="line">@Benchmark  </span><br><span class="line">public void testLambdaGeneration(Blackhole bh) throws Throwable {  </span><br><span class="line">    MethodHandles.Lookup lookup = MethodHandles.privateLookupIn(ReflectionTest.class, MethodHandles.lookup());  </span><br><span class="line">    bh.consume(lambdaGenerateConstructor(lookup));  </span><br><span class="line">    bh.consume(lambdaGenerateSetter(lookup));  </span><br><span class="line">    bh.consume(lambdaGenerateGetter(lookup));  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6D4B;&#x8BD5;&#x5206;&#x4E3A;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6D4B;&#x8BD5;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x751F;&#x6210;&#x6027;&#x80FD;&#xFF0C;&#x4E00;&#x4E2A;&#x662F;&#x6D4B;&#x8BD5;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x8FD0;&#x884C;&#x6027;&#x80FD;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x6307;&#x6807;&#x5BF9;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x90FD;&#x975E;&#x5E38;&#x7684;&#x91CD;&#x8981;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plaintext&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">ReflectionTest.testLambdaGeneration   10000  avgt   50   92486.909 &#xB1;  62638.147  ns/op</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plaintext&#x590D;&#x5236;&#x4EE3;&#x7801;Benchmark                  (size)  Mode  Cnt      Score     Error  Units</span><br><span class="line">ReflectionTest.testLambda      10  avgt   50     10.720 &#xB1;   0.087  ns/op</span><br><span class="line">ReflectionTest.testLambda     100  avgt   50    105.001 &#xB1;   1.312  ns/op</span><br><span class="line">ReflectionTest.testLambda    1000  avgt   50   1020.406 &#xB1;   9.990  ns/op</span><br><span class="line">ReflectionTest.testLambda   10000  avgt   50  10198.842 &#xB1; 143.259  ns/op</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x901A;&#x8FC7;&#x6A21;&#x62DF;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x751F;&#x6210;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x8C03;&#x7528;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4EE5;&#x53CA;<code>get</code>&#x548C;<code>set</code>&#x65B9;&#x6CD5;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x4E0E;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x662F;&#x51E0;&#x4E4E;&#x5B8C;&#x5168;&#x4E00;&#x81F4;&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x8FBE;&#x6210;&#x4E86;&#x6211;&#x4EEC;&#x60F3;&#x8981;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x4F46;&#x662F;<code>Lambda</code>&#x751F;&#x6210;&#x7684;&#x6027;&#x80FD;&#x975E;&#x5E38;&#x4E0D;&#x5BB9;&#x4E50;&#x89C2;&#xFF0C;&#x4E0E;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7BAD;&#x5934;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x751F;&#x6210;&#x7684;&#x6027;&#x80FD;&#x6709;&#x7740;&#x5929;&#x58E4;&#x4E4B;&#x522B;&#xFF0C;&#x597D;&#x5728;&#x5982;&#x679C;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x6CA1;&#x6709;&#x6355;&#x83B7;&#x4EFB;&#x4F55;&#x7684;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x793A;&#x4F8B;&#x4E2D;&#x8C03;&#x7528;&#x7684;<code>get</code>&#x548C;<code>set</code>&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x751F;&#x6210;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x7F13;&#x5B58;&#x8D77;&#x6765;&#x91CD;&#x590D;&#x4F7F;&#x7528;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x7684;&#x57FA;&#x6570;&#x672C;&#x8EAB;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x5728;&#x591A;&#x6B21;&#x8C03;&#x7528;&#x7684;&#x5F00;&#x9500;&#x6743;&#x8861;&#x4E2D;&#xFF0C;&#x521D;&#x59CB;&#x5316;&#x7684;&#x5F00;&#x9500;&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x5FFD;&#x7565;&#x4E0D;&#x8BA1;&#x3002;</p>
<h2 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h2><p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x4E00;&#x79CD;&#x5728;<code>Java</code>&#x4E2D;&#x7684;&#x65B0;&#x7684;&#x53CD;&#x5C04;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#xFF0C;&#x5373;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C;&#x4E8E;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x751F;&#x6210;&#x7684;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x53CD;&#x5C04;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x4E00;&#x4E9B;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F8B;&#x5982;<code>get</code>&#x548C;<code>set</code>&#x65B9;&#x6CD5;&#xFF0C;&#x76F4;&#x63A5;&#x8F6C;&#x5316;&#x4E3A;&#x76F8;&#x5E94;&#x7684;<code>Lambda</code>&#x8868;&#x8FBE;&#x5F0F;&#x6765;&#x8C03;&#x7528;&#xFF0C;&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x548C;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x4E00;&#x81F4;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x4F46;&#x662F;&#x8BE5;&#x65B9;&#x6CD5;&#x7684;&#x751F;&#x6210;&#x5F00;&#x9500;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x9891;&#x7E41;&#x8C03;&#x7528;&#x7684;&#x573A;&#x666F;&#x4E2D;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#xFF0C;&#x624D;&#x80FD;&#x8D77;&#x5230;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/564191f3d01bbbc782f53fbdf3d59cb9.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322733301668495375.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322733301668495375.html" itemprop="url">Nacos 高级详解：提升你的开发和部署效率 Nacos 高</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-12T09:13:11+08:00">
                2024-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Nacos-&#x9AD8;&#x7EA7;"><a href="#Nacos-&#x9AD8;&#x7EA7;" class="headerlink" title="Nacos &#x9AD8;&#x7EA7;"></a>Nacos &#x9AD8;&#x7EA7;</h1><h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x6B22;&#x8FCE;&#x6765;&#x5230;&#x672C;&#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x4ECA;&#x5929;&#x6211;&#x4EEC;&#x5C06;&#x63A2;&#x7D22; Nacos &#x9AD8;&#x7EA7;&#x7248;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x65E8;&#x5728;&#x63D0;&#x5347;&#x5F00;&#x53D1;&#x548C;&#x90E8;&#x7F72;&#x6548;&#x7387;&#x7684;&#x5F3A;&#x5927;&#x5DE5;&#x5177;&#x3002;&#x4F5C;&#x4E3A; Nacos &#x7684;&#x9AD8;&#x7EA7;&#x7248;&#x672C;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x591A;&#x529F;&#x80FD;&#x548C;&#x7279;&#x6027;&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x548C;&#x8FD0;&#x7EF4;&#x56E2;&#x961F;&#x66F4;&#x597D;&#x5730;&#x7BA1;&#x7406;&#x548C;&#x90E8;&#x7F72;&#x4ED6;&#x4EEC;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x548C;&#x670D;&#x52A1;&#x3002;&#x65E0;&#x8BBA;&#x4F60;&#x662F;&#x4E00;&#x540D;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x3001;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x8FD8;&#x662F; DevOps &#x5DE5;&#x7A0B;&#x5E08;&#xFF0C;Nacos &#x9AD8;&#x7EA7;&#x7248;&#x90FD;&#x5C06;&#x6210;&#x4E3A;&#x4F60;&#x7684;&#x5F97;&#x529B;&#x52A9;&#x624B;&#x3002;&#x8BA9;&#x6211;&#x4EEC;&#x6DF1;&#x5165;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x5B83;&#x7684;&#x4F18;&#x52BF;&#x548C;&#x7279;&#x70B9;&#x5427;&#x3002;</p>
<h1 id="&#x6B63;&#x6587;"><a href="#&#x6B63;&#x6587;" class="headerlink" title="&#x6B63;&#x6587;"></a>&#x6B63;&#x6587;</h1><h2 id="&#x4E00;-&#x3001;&#x670D;&#x52A1;&#x96C6;&#x7FA4;"><a href="#&#x4E00;-&#x3001;&#x670D;&#x52A1;&#x96C6;&#x7FA4;" class="headerlink" title="&#x4E00; &#x3001;&#x670D;&#x52A1;&#x96C6;&#x7FA4;"></a>&#x4E00; &#x3001;&#x670D;&#x52A1;&#x96C6;&#x7FA4;</h2><h3 id="1-&#x9700;&#x6C42;"><a href="#1-&#x9700;&#x6C42;" class="headerlink" title="1 &#x9700;&#x6C42;"></a>1 &#x9700;&#x6C42;</h3><ul>
<li>&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x642D;&#x5EFA;&#x96C6;&#x7FA4;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ac96e5f58c05e0858411354cb68de973e9f48c3d634dc2636b3c9fa79d2322dd" alt="1655452364194.png"></p>
<ul>
<li>&#x670D;&#x52A1;&#x8C03;&#x7528;&#x8005;&#xFF0C;&#x4F9D;&#x6B21;&#x663E;&#x793A;&#x96C6;&#x7FA4;&#x4E2D;&#x5404;&#x670D;&#x52A1;&#x7684;&#x4FE1;&#x606F;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/75e5220ab2119168ac5da6f73a9d04d8f9dc2b79de110ffd84c8c508212db47f" alt="image-20210415083941141.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/b512b919c2bda18dfc7e634ad7c5716ad26b165515017ba22d40118f643d6651" alt="image-20210415083949074.png"></p>
<h3 id="2-&#x642D;&#x5EFA;"><a href="#2-&#x642D;&#x5EFA;" class="headerlink" title="2 &#x642D;&#x5EFA;"></a>2 &#x642D;&#x5EFA;</h3><ul>
<li>1&#xFF09;&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x65B9;&#x7684;controller&#xFF0C;&#x6253;&#x5370;&#x670D;&#x52A1;&#x7AEF;&#x7AEF;&#x53E3;&#x53F7;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/8ad7e8a9d2f8b81e281b40e02f452cf8e4975824ca6b5610fe5293d752deea3e" alt="1655221836544.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;package com.czxy.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author &#x6850;&#x53D4;</span><br><span class="line"> * @email liangtong@itcast.cn</span><br><span class="line"> */</span><br><span class="line">@RestController</span><br><span class="line">public class EchoController {</span><br><span class="line"></span><br><span class="line">    @Resource</span><br><span class="line">    private HttpServletRequest request;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(value = &quot;/echo/{string}&quot;, method = RequestMethod.GET)</span><br><span class="line">    public String echo(@PathVariable String string) {</span><br><span class="line">        int serverPort = request.getServerPort();</span><br><span class="line">        return &quot;Hello Nacos Discovery &quot; + string + &quot;:&quot; + serverPort;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>2&#xFF09;&#x7F16;&#x5199;yml&#x914D;&#x7F6E;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6ed29df2be01f8213f21996e1e225322790355c6bac63f341c05e0d611bcc092" alt="1655221950052.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yml&#x590D;&#x5236;&#x4EE3;&#x7801;#&#x7AEF;&#x53E3;&#x53F7;</span><br><span class="line">server:</span><br><span class="line">  port: 8170</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: service-provider          #&#x670D;&#x52A1;&#x540D;</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: 127.0.0.1:8848   #nacos&#x670D;&#x52A1;&#x5730;&#x5740;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yml&#x590D;&#x5236;&#x4EE3;&#x7801;#&#x7AEF;&#x53E3;&#x53F7;</span><br><span class="line">server:</span><br><span class="line">  port: 8270</span><br><span class="line"></span><br><span class="line">spring:</span><br><span class="line">  application:</span><br><span class="line">    name: service-provider          #&#x670D;&#x52A1;&#x540D;</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: 127.0.0.1:8848   #nacos&#x670D;&#x52A1;&#x5730;&#x5740;</span><br></pre></td></tr></table></figure>

<ul>
<li>3&#xFF09;&#x914D;&#x7F6E;idea&#x542F;&#x52A8;&#x9879;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;-Dspring.profiles.active=8170</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9b51ab86577c66acbcc8bd3269272e224ef2003690fe351001db7830afd1e59e" alt="image-20210415084820667.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a608c0e801677ca46e10b70c54c46986b24fa03a26c836c3463ddaf30387b17c" alt="image-20210415084839900.png"></p>
<h3 id="3-&#x6D4B;&#x8BD5;"><a href="#3-&#x6D4B;&#x8BD5;" class="headerlink" title="3 &#x6D4B;&#x8BD5;"></a>3 &#x6D4B;&#x8BD5;</h3><ul>
<li>&#x542F;&#x52A8;3&#x4E2A;&#x670D;&#x52A1;&#xFF08;2&#x4E2A;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#xFF0C;1&#x4E2A;&#x670D;&#x52A1;&#x6D88;&#x8D39;&#xFF09;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/2a4dcdad1c23594a74e3b47df9504fc2c8bc58ead98597abf35f08e05e612b79" alt="image-20210415085003936.png"></p>
<ul>
<li>&#x67E5;&#x770B;nacos&#x63A7;&#x5236;&#x53F0;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/a2c04d986570da040bb4095629e7d9acd815b48f71639f5ea3c584d6dd14b20a" alt="1655222274072.png"></p>
<h2 id="&#x4E8C;&#x3001;-&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x987A;&#x5E8F;2"><a href="#&#x4E8C;&#x3001;-&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x987A;&#x5E8F;2" class="headerlink" title="&#x4E8C;&#x3001; &#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x987A;&#x5E8F;2"></a>&#x4E8C;&#x3001; &#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x987A;&#x5E8F;2</h2><ul>
<li>&#x5BF9; <code>3.4.5&#x7AE0;&#x8282;/&#x7B2C;4&#x6B65;</code>&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x8BE6;&#x89E3;</li>
<li>&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x987A;&#x5E8F;&#xFF08;&#x7B2C;4&#x6B65;&#x8BE6;&#x89E3;&#xFF09;</li>
</ul>
<h3 id="1-nacos-&#x914D;&#x7F6E;-DataId-&#x4ECB;&#x7ECD;"><a href="#1-nacos-&#x914D;&#x7F6E;-DataId-&#x4ECB;&#x7ECD;" class="headerlink" title="1 nacos &#x914D;&#x7F6E; DataId &#x4ECB;&#x7ECD;"></a>1 nacos &#x914D;&#x7F6E; DataId &#x4ECB;&#x7ECD;</h3><ul>
<li>nacos &#x63D0;&#x4F9B;&#x4E86;3&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x914D;&#x7F6E;dataId&#x7684;&#x52A0;&#x8F7D;&#x987A;&#x5E8F;</li>
</ul>
<blockquote>
<p>A: &#x5171;&#x4EAB;&#x914D;&#x7F6E;&#xFF1A;&#xFF08;&#x8FC7;&#x65F6;&#xFF09;&#xFF0C;&#x4F7F;&#x7528; shared-configs &#x66FF;&#x4EE3;</p>
<p> <code>spring.cloud.nacos.config.shared-dataids</code></p>
<p> <code>spring.cloud.nacos.config.refreshable-dataids</code></p>
<p>B: &#x52A0;&#x8F7D;&#x591A;&#x914D;&#x7F6E;&#xFF1A;&#xFF08;&#x8FC7;&#x65F6;&#xFF09;&#xFF0C;&#x4F7F;&#x7528; extension-configs &#x66FF;&#x4EE3;</p>
<p> <code>spring.cloud.nacos.config.ext-config[n]</code><br>C: &#x5185;&#x90E8;&#x89C4;&#x5219;&#x62FC;&#x63A5;&#xFF1A;</p>
<p> <code>spring.cloud.nacos.config.prefix</code></p>
<p> <code>spring.cloud.nacos.config.file-extension</code></p>
<p> <code>spring.cloud.nacos.config.group</code></p>
</blockquote>
<h3 id="2-&#x914D;&#x7F6E;-yml-&#x6587;&#x4EF6;&#x4E2D;&#x7684;-DataId"><a href="#2-&#x914D;&#x7F6E;-yml-&#x6587;&#x4EF6;&#x4E2D;&#x7684;-DataId" class="headerlink" title="2 &#x914D;&#x7F6E; yml &#x6587;&#x4EF6;&#x4E2D;&#x7684; DataId"></a>2 &#x914D;&#x7F6E; yml &#x6587;&#x4EF6;&#x4E2D;&#x7684; DataId</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">yml&#x590D;&#x5236;&#x4EE3;&#x7801;spring:</span><br><span class="line">  application:</span><br><span class="line">    name: config-service              # &#x670D;&#x52A1;&#x540D;</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      config:</span><br><span class="line">        server-addr: 127.0.0.1:8848   		# nacos &#x670D;&#x52A1;&#x5730;&#x5740;</span><br><span class="line">#        shared-dataids: test1.yml           # 4.1 &#x5171;&#x4EAB;&#x914D;&#x7F6E; &#xFF08;&#x5DF2;&#x8FC7;&#x65F6;&#xFF09;</span><br><span class="line">#        refreshable-dataids: test1.yml</span><br><span class="line">        shared-configs:                      # 4.1 &#x5171;&#x4EAB;&#x914D;&#x7F6E;&#x3010;&#x6700;&#x65B0;&#x3011;</span><br><span class="line">          - data-id: test1-1.yml</span><br><span class="line">            group: DEFAULT_GROUP</span><br><span class="line">            refresh: true</span><br><span class="line">          - data-id: test1-2.yml</span><br><span class="line">            group: DEFAULT_GROUP</span><br><span class="line">            refresh: true</span><br><span class="line">#        ext-config:                         # 4.2 &#x914D;&#x7F6E;&#x591A;&#x4E2A; &#xFF08;&#x5DF2;&#x8FC7;&#x65F6;&#xFF09;</span><br><span class="line">#          - data-id: test2-1.yml</span><br><span class="line">#            group: DEFAULT_GROUP</span><br><span class="line">#            refresh: true</span><br><span class="line">#          - data-id: test2-2.yml</span><br><span class="line">#            group: DEFAULT_GROUP</span><br><span class="line">#            refresh: true</span><br><span class="line">        extension-configs:                  # 4.2 &#x914D;&#x7F6E;&#x591A;&#x4E2A; &#x3010;&#x6700;&#x65B0;&#x3011;</span><br><span class="line">          - data-id: test2-1.yml</span><br><span class="line">            group: DEFAULT_GROUP</span><br><span class="line">            refresh: true</span><br><span class="line">          - data-id: test2-2.yml</span><br><span class="line">            group: DEFAULT_GROUP</span><br><span class="line">            refresh: true</span><br><span class="line">        prefix: ${spring.application.name}	# 4.3 data ID&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x9ED8;&#x8BA4;&#x670D;&#x52A1;&#x540D;</span><br><span class="line">        file-extension: yaml          		# data ID&#x7684;&#x540E;&#x7F00;&#xFF1A;config-service.yaml</span><br><span class="line">        group: DEFAULT_GROUP         		# &#x7EC4;&#x540D;</span><br><span class="line">      discovery:</span><br><span class="line">        server-addr: 127.0.0.1:8848   #nacos&#x670D;&#x52A1;&#x5730;&#x5740;</span><br></pre></td></tr></table></figure>

<h3 id="3-&#x914D;&#x7F6E;-console&#x4E2D;&#x7684;DataId"><a href="#3-&#x914D;&#x7F6E;-console&#x4E2D;&#x7684;DataId" class="headerlink" title="3 &#x914D;&#x7F6E; console&#x4E2D;&#x7684;DataId"></a>3 &#x914D;&#x7F6E; console&#x4E2D;&#x7684;DataId</h3><ul>
<li>nacos&#x63A7;&#x5236;&#x53F0;&#x914D;&#x7F6E;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/4a6b2cc2973b3f6c4a766e662be044b04da7c75b6e9c9903f45af4c60c0e1364" alt="image-20210415104915218.png"></p>
<h3 id="4-&#x6D4B;&#x8BD5;"><a href="#4-&#x6D4B;&#x8BD5;" class="headerlink" title="4 &#x6D4B;&#x8BD5;"></a>4 &#x6D4B;&#x8BD5;</h3><ul>
<li>&#x540E;&#x9762;&#x52A0;&#x8F7D;&#x7684;dataId&#x5C06;&#x8986;&#x76D6;&#x524D;&#x9762;&#x52A0;&#x8F7D;&#x7684;dataId&#x8BBE;&#x7F6E;&#x7684;&#x5185;&#x5BB9;</li>
<li>&#x67E5;&#x770B;&#x65E5;&#x5FD7;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/63c0bcf861479d59ac1c7ac43b804fa66707d7f92dba4b2a879fc38e7b9b64ed" alt="image-20210415105052039.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;Located property source: [</span><br><span class="line">BootstrapPropertySource {name=&apos;bootstrapProperties-test3-demo.yaml&apos;}, BootstrapPropertySource {name=&apos;bootstrapProperties-test3.yaml&apos;}, BootstrapPropertySource {name=&apos;bootstrapProperties-test2-2.yml&apos;}, BootstrapPropertySource {name=&apos;bootstrapProperties-test2-1.yml&apos;}, BootstrapPropertySource {name=&apos;bootstrapProperties-test1.yml&apos;}]</span><br></pre></td></tr></table></figure>

<h2 id="&#x4E09;&#x3001;-&#x591A;&#x73AF;&#x5883;&#x914D;&#x7F6E;"><a href="#&#x4E09;&#x3001;-&#x591A;&#x73AF;&#x5883;&#x914D;&#x7F6E;" class="headerlink" title="&#x4E09;&#x3001; &#x591A;&#x73AF;&#x5883;&#x914D;&#x7F6E;"></a>&#x4E09;&#x3001; &#x591A;&#x73AF;&#x5883;&#x914D;&#x7F6E;</h2><h3 id="1-&#x4ECB;&#x7ECD;"><a href="#1-&#x4ECB;&#x7ECD;" class="headerlink" title="1 &#x4ECB;&#x7ECD;"></a>1 &#x4ECB;&#x7ECD;</h3><ul>
<li>&#x5728;Nacos&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x73AF;&#x5883;&#xFF08;&#x5F00;&#x53D1;&#x3001;&#x6D4B;&#x8BD5;&#x3001;&#x751F;&#x4EA7;&#x7B49;&#xFF09;&#x4E2D;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x7BA1;&#x7406;&#x7EA7;&#x522B;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5305;&#x62EC;&#xFF1A;<code>Data ID</code>&#x3001;<code>Group</code>&#x3001;<code>Namespace</code>&#x3002;</li>
</ul>
<table>
<thead>
<tr>
<th>&#x6982;&#x5FF5;</th>
<th>&#x63CF;&#x8FF0;</th>
</tr>
</thead>
<tbody><tr>
<td>Data ID</td>
<td>&#x6570;&#x636E;&#x552F;&#x4E00;&#x6807;&#x8BC6;&#xFF0C;&#x53EF;&#x7406;&#x89E3;&#x4E3A;Spring Cloud&#x5E94;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;</td>
</tr>
<tr>
<td>Group</td>
<td>&#x7528;&#x6765;&#x5BF9;<code>Data ID</code>&#x505A;&#x96C6;&#x5408;&#x7BA1;&#x7406;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5C0F;&#x5206;&#x7C7B;</td>
</tr>
<tr>
<td>Namespace</td>
<td>&#x7528;&#x4E8E;&#x8FDB;&#x884C;&#x79DF;&#x6237;&#x7C92;&#x5EA6;&#x7684;&#x914D;&#x7F6E;&#x9694;&#x79BB;&#x3002;&#x76F8;&#x5F53;&#x4E8E;&#x5927;&#x5206;&#x7C7B;</td>
</tr>
</tbody></table>
<h3 id="2-&#x914D;&#x7F6E;&#x4ECB;&#x7ECD;"><a href="#2-&#x914D;&#x7F6E;&#x4ECB;&#x7ECD;" class="headerlink" title="2 &#x914D;&#x7F6E;&#x4ECB;&#x7ECD;"></a>2 &#x914D;&#x7F6E;&#x4ECB;&#x7ECD;</h3><ul>
<li>&#x7EC4;group&#x914D;&#x7F6E;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yml&#x590D;&#x5236;&#x4EE3;&#x7801;spring.cloud.nacos.config.group=				#&#x7EC4;&#x540D;&#x79F0;</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x547D;&#x540D;&#x7A7A;&#x95F4; namespace&#x914D;&#x7F6E; ==&#x6CE8;&#x610F;&#xFF1A;namespace&#x7684;ID==</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yml&#x590D;&#x5236;&#x4EE3;&#x7801;spring.cloud.nacos.config.namespace=			#namespace&#x7684;ID</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/c736a50a644effe1efce4651cdf253e14c9d78cc82e2b3f6f7be89966c84b15d" alt="1655435343460.png"></p>
<h3 id="3-&#x914D;&#x7F6E;&#x5185;&#x5BB9;"><a href="#3-&#x914D;&#x7F6E;&#x5185;&#x5BB9;" class="headerlink" title="3 &#x914D;&#x7F6E;&#x5185;&#x5BB9;"></a>3 &#x914D;&#x7F6E;&#x5185;&#x5BB9;</h3><ul>
<li>&#x5728;nacos &#x63A7;&#x5236;&#x53F0;&#x914D;&#x7F6E;namespace</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/d9a019fb0d40adb376d07636358df33910b235899d076588861cdeefe48dd99a" alt="1655435426654.png"></p>
<ul>
<li>&#x5728;nacos&#x63A7;&#x5236;&#x53F0;&#x663E;&#x793A;namespace</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/c8cc510fe169d7c5851f2aef542b9f8325ce20390902aa6690d4c7af3dff9a69" alt="1655435409120.png"></p>
<h2 id="&#x56DB;&#x3001;-&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;"><a href="#&#x56DB;&#x3001;-&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;" class="headerlink" title="&#x56DB;&#x3001; &#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;"></a>&#x56DB;&#x3001; &#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;</h2><ul>
<li>&#x5728;&#x5355;&#x673A;&#x6A21;&#x5F0F;&#x65F6;nacos&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;<code>&#x5D4C;&#x5165;&#x5F0F;&#x6570;&#x636E;&#x5E93;</code>&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF0C;0.7&#x7248;&#x672C;&#x540E;&#x589E;&#x52A0;&#x4E86;mysql&#x5B58;&#x50A8;&#x6570;&#x636E;&#x3002;</li>
</ul>
<h3 id="1-&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;"><a href="#1-&#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="1 &#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;"></a>1 &#x521D;&#x59CB;&#x5316;&#x6570;&#x636E;&#x5E93;</h3><ul>
<li>&#x5728;conf&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;<code>nacos-mysql.sql</code> SQL&#x8BED;&#x53E5;&#xFF0C;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x521D;&#x59CB;&#x5316;</li>
</ul>
<pre><code>+ &#x8981;&#x6C42;&#xFF1A;5.6+ mysql
+ &#x6CE8;&#x610F;&#xFF1A;&#x5982;&#x679C;&#x4F7F;&#x7528;mysql 5.5&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;sql&#x8BED;&#x53E5;


![1655436482630.png](https://gitee.com/songjianzaina/juejin_p2/raw/master/img/324cef9fae964bad617696c80a664ce48b5a47b2226ead8f05d4997cfcd29517)</code></pre><ul>
<li>&#x63D0;&#x4F9B;&#x7684;SQL&#x8BED;&#x53E5;&#x6CA1;&#x6709;&#x521B;&#x5EFA;database&#xFF0C;&#x624B;&#x52A8;&#x521B;&#x5EFA;<code>nacos_config</code></li>
</ul>
<p><img src alt="image-20210415162504004"></p>
<h3 id="2-&#x5F00;&#x542F;mysql&#x5B58;&#x50A8;"><a href="#2-&#x5F00;&#x542F;mysql&#x5B58;&#x50A8;" class="headerlink" title="2 &#x5F00;&#x542F;mysql&#x5B58;&#x50A8;"></a>2 &#x5F00;&#x542F;mysql&#x5B58;&#x50A8;</h3><ul>
<li>conf&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;<code>application.properties</code>&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6ed6046fea9e2b12201234e9e6fc1b41fc15e290acdf43951c1339c6a50e3779" alt="image-20210415162504004.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">properties&#x590D;&#x5236;&#x4EE3;&#x7801;### If use MySQL as datasource:</span><br><span class="line">spring.datasource.platform=mysql</span><br><span class="line"></span><br><span class="line">### Count of DB:</span><br><span class="line">db.num=1</span><br><span class="line"></span><br><span class="line">### Connect URL of DB:</span><br><span class="line">db.url.0=jdbc:mysql://127.0.0.1:3306/nacos_config_2_1?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span><br><span class="line">db.user.0=root</span><br><span class="line">db.password.0=1234</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x914D;&#x5408;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x91CD;&#x542F;nacos</li>
</ul>
<h3 id="3-&#x6D4B;&#x8BD5;-1"><a href="#3-&#x6D4B;&#x8BD5;-1" class="headerlink" title="3 &#x6D4B;&#x8BD5;"></a>3 &#x6D4B;&#x8BD5;</h3><ul>
<li>&#x6DFB;&#x52A0;&#x914D;&#x7F6E;&#x4FE1;&#x606F;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/5b394f81f226c94ec6f9ae48077980bdc0d8aeccffaec1ab1b1fd3509a7f9947" alt="image-20210415164446314.png"></p>
<ul>
<li>&#x68C0;&#x67E5;&#x6570;&#x636E;&#x5E93;&#x5B58;&#x50A8;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ab463ec9544ce60cbc6ae237f8415971061beb3ba88bdde4b6bb42df8a781315" alt="image-20210415164511747.png"></p>
<h2 id="&#x4E94;&#x3001;-Nacos&#x96C6;&#x7FA4;&#x642D;&#x5EFA;"><a href="#&#x4E94;&#x3001;-Nacos&#x96C6;&#x7FA4;&#x642D;&#x5EFA;" class="headerlink" title="&#x4E94;&#x3001; Nacos&#x96C6;&#x7FA4;&#x642D;&#x5EFA;"></a>&#x4E94;&#x3001; Nacos&#x96C6;&#x7FA4;&#x642D;&#x5EFA;</h2><h3 id="1-&#x6982;&#x8FF0;"><a href="#1-&#x6982;&#x8FF0;" class="headerlink" title="1 &#x6982;&#x8FF0;"></a>1 &#x6982;&#x8FF0;</h3><ul>
<li>3&#x4E2A;&#x6216;3&#x4E2A;&#x4EE5;&#x4E0A;Nacos&#x8282;&#x70B9;&#x624D;&#x80FD;&#x6784;&#x6210;&#x96C6;&#x7FA4;</li>
<li>&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;</li>
</ul>
<pre><code>+ &#x4F7F;&#x7528;&#x5185;&#x7F6E;&#x6570;&#x636E;&#x6E90;



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cmd&#x590D;&#x5236;&#x4EE3;&#x7801;startup.cmd -p embedded</span><br></pre></td></tr></table></figure>

+ &#x4F7F;&#x7528;&#x5916;&#x7F6E;&#x6570;&#x636E;&#x6E90;&#xFF08;MySQL&#xFF0C;&#x53C2;&#x8003;4.4.2&#xFF09;</code></pre><ul>
<li>&#x5728;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#x914D;&#x7F6E;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x7AEF;&#x53E3;&#x53F7;==&#x4E0D;&#x80FD;&#x8FDE;&#x7EED;==&#x3002;</li>
</ul>
<pre><code>+ &#x4F8B;&#x5982;&#xFF1A;8841/8842/8843 &#x4E0D;&#x53EF;&#x7528;
+ &#x4F8B;&#x5982;&#xFF1A;8841/8843/8845 &#x53EF;&#x7528;</code></pre><h3 id="2-&#x914D;&#x7F6E;&#x6B65;&#x9AA4;"><a href="#2-&#x914D;&#x7F6E;&#x6B65;&#x9AA4;" class="headerlink" title="2 &#x914D;&#x7F6E;&#x6B65;&#x9AA4;"></a>2 &#x914D;&#x7F6E;&#x6B65;&#x9AA4;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/f406e1c3841ac14a7b3e868ca5fff0b5c60683fe33905f9d35661679d6da2024" alt="1655309574502.png"></p>
<ul>
<li>&#x8282;&#x70B9;1&#xFF1A;&#x914D;&#x7F6E;Nacos8841<ol>
<li>&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;</li>
<li>&#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#x53F7;&#xFF1A;8841</li>
<li>&#x914D;&#x7F6E;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>
<li>&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;startup.cmd</li>
</ol>
</li>
<li>&#x8282;&#x70B9;2&#xFF1A;&#x590D;&#x5236;Nacos8843<ul>
<li>&#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#x53F7;&#xFF1A;8843</li>
<li>&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;startup.cmd</li>
</ul>
</li>
<li>&#x8282;&#x70B9;3&#xFF1A;&#x590D;&#x5236;Nacos8845<ul>
<li>&#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#x53F7;&#xFF1A;8845</li>
<li>&#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;startup.cmd</li>
</ul>
</li>
</ul>
<h3 id="3-&#x914D;&#x7F6E;&#x8BE6;&#x60C5;"><a href="#3-&#x914D;&#x7F6E;&#x8BE6;&#x60C5;" class="headerlink" title="3 &#x914D;&#x7F6E;&#x8BE6;&#x60C5;"></a>3 &#x914D;&#x7F6E;&#x8BE6;&#x60C5;</h3><h4 id="1&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;1"><a href="#1&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;1" class="headerlink" title="1&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;1"></a>1&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;1</h4><ol>
<li>&#x62F7;&#x8D1D;nacos&#xFF0C;&#x5E76;&#x91CD;&#x547D;&#x540D; <code>nacos-2.1.0-8841</code></li>
<li>&#x914D;&#x7F6E;&#x6570;&#x636E;&#x6E90;</li>
</ol>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/14a53a9acfdf3ac803b77c21ea76c1cd2563443cc24449a2af5100cba58bd5d9" alt="1655309637618.png"><br>3. &#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#x53F7;&#xFF1A;8841</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/08d9f004f7fc8cd1702583f952da77076eef39a36c21475ada973bc546e50eba" alt="1655309662031.png"><br>4. &#x914D;&#x7F6E;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#xFF1A;&#x62F7;&#x8D1D;<code>conf/cluster.conf.example</code>&#xFF0C;&#x91CD;&#x540D;&#x4E3A;<code>cluster.conf</code></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/f6f9f9019f6a482d4a6fd20156fc0424d9a65a0f4736a96878708d22f55386fd" alt="1655309699463.png"><br>5. &#x542F;&#x52A8;&#x670D;&#x52A1;&#xFF1A;startup.cmd</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/27cb16627f5e1bcc1d9c51f62394263743a8881d7a980a5cf31148432c4e9695" alt="1655309748459.png"><br>6. &#x6210;&#x529F;&#x542F;&#x52A8;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/cf22709e735d849988ae9db77f652b9a174ac23fd31e5f01fd916e3e0c0f6327" alt="1655309809762.png"></p>
<h4 id="2&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;2"><a href="#2&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;2" class="headerlink" title="2&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;2"></a>2&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;2</h4><ul>
<li>&#x590D;&#x5236;&#x8282;&#x70B9;nacos-2.1.0-8841&#xFF0C;&#x5E76;&#x91CD;&#x547D;&#x540D;nacos-2.1.0-8843</li>
<li>&#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#x53F7;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/aa6ab8f294575163799abf4d0a03e9470a9f5b1b37b8be0ea06a27df1a454296" alt="1655309928803.png"></p>
<ul>
<li>&#x542F;&#x52A8;&#x670D;&#x52A1;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/715dbb5010b68fa42059bcffbfc87ad462a4e7a66ed1f0ac2fd189c47d48c270" alt="1655309958005.png"></p>
<h4 id="3&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;3"><a href="#3&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;3" class="headerlink" title="3&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;3"></a>3&#xFF09;&#x914D;&#x7F6E;&#x8282;&#x70B9;3</h4><ul>
<li>&#x590D;&#x5236;&#x8282;&#x70B9;nacos-2.1.0-8841&#xFF0C;&#x5E76;&#x91CD;&#x547D;&#x540D;nacos-2.1.0-8845</li>
<li>&#x4FEE;&#x6539;&#x7AEF;&#x53E3;&#x53F7;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/779b0f228c5dc28facced3ec2b0f55dd5be2e805cf1d66b7c5f7e83f9b0d38fb" alt="1655310040083.png"></p>
<ul>
<li>&#x542F;&#x52A8;&#x670D;&#x52A1;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/273fb3364481e630497dacc5be952b6ceb4c9413e61b5d78ffe0db1b92a141f2" alt="1655310010135.png"></p>
<h4 id="4&#xFF09;&#x914D;&#x7F6E;&#x6210;&#x529F;"><a href="#4&#xFF09;&#x914D;&#x7F6E;&#x6210;&#x529F;" class="headerlink" title="4&#xFF09;&#x914D;&#x7F6E;&#x6210;&#x529F;"></a>4&#xFF09;&#x914D;&#x7F6E;&#x6210;&#x529F;</h4><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ad3c6fca4ea7c1994152c50d921e6a66671b7448e29e89bdb18c3926e5ec7171" alt="1655310082877.png"></p>
<h3 id="4-&#x5E38;&#x89C1;&#x9519;&#x8BEF;"><a href="#4-&#x5E38;&#x89C1;&#x9519;&#x8BEF;" class="headerlink" title="4 &#x5E38;&#x89C1;&#x9519;&#x8BEF;"></a>4 &#x5E38;&#x89C1;&#x9519;&#x8BEF;</h3><h4 id="1&#xFF09;db-num-is-null"><a href="#1&#xFF09;db-num-is-null" class="headerlink" title="1&#xFF09;db.num is null"></a>1&#xFF09;db.num is null</h4><ul>
<li>&#x9519;&#x8BEF;&#x63D0;&#x793A;&#xFF1A;<code>db.num is null</code></li>
<li>&#x539F;&#x56E0;&#xFF1A;&#x6CA1;&#x6709;&#x914D;&#x7F6E;&#x6570;&#x636E;&#x5E93;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/aa5702b746beb65ed15e0b47706927b49d1b4efa6f54669e09cb0f9d74ce5ec2" alt="1655224799207.png"></p>
<h4 id="2&#xFF09;-unable-to-start-embedded-tomcat"><a href="#2&#xFF09;-unable-to-start-embedded-tomcat" class="headerlink" title="2&#xFF09; unable to start embedded tomcat"></a>2&#xFF09; unable to start embedded tomcat</h4><ul>
<li>&#x9519;&#x8BEF;&#x63D0;&#x793A;&#xFF1A;<code>unable to start embedded tomcat</code></li>
<li>&#x539F;&#x56E0;1&#xFF1A;&#x6CA1;&#x6709;&#x7F16;&#x5199;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/9cd920844f6061e32e294667dc9fd726057d8efcda315f430ea00a2ab9c700bc" alt="1655224825852.png"></p>
<ul>
<li>&#x539F;&#x56E0;2&#xFF1A;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x6709;&#x4E2D;&#x6587;</li>
</ul>
<h4 id="3&#xFF09;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;"><a href="#3&#xFF09;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;" class="headerlink" title="3&#xFF09;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;"></a>3&#xFF09;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;</h4><ul>
<li>&#x63D0;&#x793A;&#x4FE1;&#x606F;&#xFF1A;</li>
<li>&#x539F;&#x56E0;&#xFF1A;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#xFF0C;&#x4FEE;&#x6539;&#x5206;&#x914D;&#x5185;&#x5B58;&#x5927;&#x5C0F;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/139c8b0a0eda42247aca0397399f0ccae38b19d5a0646037ea5b4f6e63c84664" alt="1655224914532.png"></p>
<h4 id="4&#xFF09;-Cannot-determine-JNI-library-name-for-ARCH-&#x2019;x86&#x2019;-OS-&#x2019;windows-10&#x2019;-name-&#x2019;rocksdb&#x2019;"><a href="#4&#xFF09;-Cannot-determine-JNI-library-name-for-ARCH-&#x2019;x86&#x2019;-OS-&#x2019;windows-10&#x2019;-name-&#x2019;rocksdb&#x2019;" class="headerlink" title="4&#xFF09; Cannot determine JNI library name for ARCH=&#x2019;x86&#x2019; OS=&#x2019;windows 10&#x2019; name=&#x2019;rocksdb&#x2019;"></a>4&#xFF09; Cannot determine JNI library name for ARCH=&#x2019;x86&#x2019; OS=&#x2019;windows 10&#x2019; name=&#x2019;rocksdb&#x2019;</h4><ul>
<li>&#x63D0;&#x793A;&#x4FE1;&#x606F;&#xFF1A;Cannot determine JNI library name for ARCH=&#x2019;x86&#x2019; OS=&#x2019;windows 10&#x2019; name=&#x2019;rocksdb&#x2019;</li>
<li>&#x539F;&#x56E0;&#xFF1A;nacos&#x4E0E;jdk &#x7CFB;&#x7EDF;&#x4F4D;&#x6570;&#xFF08;64&#x4F4D;&#x548C;32&#x4F4D;&#xFF0C;&#xFF09;&#x4E0D;&#x4E00;&#x81F4;</li>
</ul>
<h4 id="5&#xFF09;-JNI&#x76F8;&#x5173;&#x9519;&#x8BEF;"><a href="#5&#xFF09;-JNI&#x76F8;&#x5173;&#x9519;&#x8BEF;" class="headerlink" title="5&#xFF09; JNI&#x76F8;&#x5173;&#x9519;&#x8BEF;"></a>5&#xFF09; JNI&#x76F8;&#x5173;&#x9519;&#x8BEF;</h4><ul>
<li>&#x63D0;&#x793A;&#x4FE1;&#x606F;&#xFF1A; <code>C:\Users\Administrator\AppData\Local\Temp\/librocksdbjni1411968517689619912.dll: Can&apos;t find dependent libraries</code></li>
</ul>
<h1 id="&#x7ED3;&#x8BED;"><a href="#&#x7ED3;&#x8BED;" class="headerlink" title="&#x7ED3;&#x8BED;"></a>&#x7ED3;&#x8BED;</h1><p>&#x539F;&#x56E0;&#xFF1A;JAVA_HOME&#x914D;&#x7F6E;&#x7684;jdk&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x4E0D;&#x662F;jre&#x5B89;&#x88C5;&#x76EE;&#x5F55;<br>&#x5728;&#x672C;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6DF1;&#x5165;&#x63A2;&#x8BA8;&#x4E86; Nacos &#x9AD8;&#x7EA7;&#x7248;&#x7684;&#x529F;&#x80FD;&#x548C;&#x7279;&#x6027;&#xFF0C;&#x5C55;&#x793A;&#x4E86;&#x5B83;&#x5982;&#x4F55;&#x63D0;&#x5347;&#x5F00;&#x53D1;&#x548C;&#x90E8;&#x7F72;&#x6548;&#x7387;&#xFF0C;&#x4E3A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x548C;&#x8FD0;&#x7EF4;&#x56E2;&#x961F;&#x5E26;&#x6765;&#x66F4;&#x597D;&#x7684;&#x4F53;&#x9A8C;&#x3002;&#x65E0;&#x8BBA;&#x662F;&#x5728;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x4F7F;&#x7528;&#x3001;&#x8FDB;&#x884C;&#x591A;&#x73AF;&#x5883;&#x90E8;&#x7F72;&#x8FD8;&#x662F;&#x8FDB;&#x884C;&#x7070;&#x5EA6;&#x53D1;&#x5E03;&#xFF0C;Nacos &#x9AD8;&#x7EA7;&#x7248;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x800C;&#x53EF;&#x9760;&#x7684;&#x9009;&#x62E9;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x63D0;&#x5347;&#x4F60;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x548C;&#x670D;&#x52A1;&#x7684;&#x7BA1;&#x7406;&#x6C34;&#x5E73;&#xFF0C;&#x4E0D;&#x59A8;&#x8003;&#x8651;&#x5C1D;&#x8BD5; Nacos &#x9AD8;&#x7EA7;&#x7248;&#x5427;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/99750e863b19337f4134691b302a4f05.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322518781593927706.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322518781593927706.html" itemprop="url">开发同学如何学习Kubernetes？ 想清楚为什么要学 用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-11T09:50:10+08:00">
                2024-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>&#x5B66;&#x4E60;&#x524D;&#x9996;&#x5148;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x7684;&#x73AF;&#x5883;</strong></p>
<p>&#x81EA;&#x5DF1;&#x642D;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x786E;&#x5B9E;&#x4F1A;&#x7ECF;&#x5E38;&#x9047;&#x5230;&#x8D44;&#x6E90;&#x4E0D;&#x8DB3;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x51E0;&#x5E74;&#x524D;&#x6700;&#x5F00;&#x59CB;&#x5B66;&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x662F;&#x88AB;&#x642D;&#x73AF;&#x5883;&#x7684;&#x7B2C;&#x4E00;&#x6B65;&#x3002;&#x4E0D;&#x8FC7;&#x540E;&#x6765;&#x51FA;&#x4E86;<a href="/external_links/e48b27d03f536972a87358c5a56f4232.html" target="blank" rel="noopener">minikube</a> &#xFF0C;&#x6211;&#x81EA;&#x5DF1;&#x7684;&#x673A;&#x5668;&#x662F; 16g&#x7684;2016&#x7248;&#x672C;&#x7684;mbp&#xFF0C;&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x8DD1;&#x8D77;&#x6765;&#xFF0C;&#x4F46;&#x662F;&#x76F8;&#x5F53;&#x7684;&#x8D39;&#x52B2;&#xFF0C;&#x540E;&#x6765;&#x5728;&#x516C;&#x53F8;&#x767D;&#x5AD6;&#x4E86;&#x6D4B;&#x8BD5;&#x673A;&#x5668;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x662F;&#x5728;&#x804C;&#x5F00;&#x53D1;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x6709;&#x6CA1;&#x6709;&#x53EF;&#x4EE5;&#x767D;&#x5AD6;&#x7684;&#x7269;&#x7406;&#x673A;&#xFF0C;&#x72E0;&#x72E0;&#x7684;&#x5F53;&#x4E00;&#x628A;&#x5DE5;&#x8D3C;&#x3002;</p>
<p>&#x6211;&#x4E0D;&#x592A;&#x5EFA;&#x8BAE;&#x76F4;&#x63A5;&#x4E70;&#x4E91;&#x4EA7;&#x5546;&#x7684;<a href="/external_links/8bf320a3b5d1eab72a738e1274fd4579.html" target="blank" rel="noopener">k8s</a>&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5C11;&#x4E86;&#x81EA;&#x5DF1;&#x642D;&#x5EFA; k8s&#x96C6;&#x7FA4;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x5DF2;&#x7ECF;&#x642D;&#x5EFA;&#x4E86;&#x6211;&#x4E5F;&#x89C9;&#x5F97;&#x53EF;&#x4EE5;&#x5728;&#x81EA;&#x5DF1;&#x642D;&#x5EFA;&#x6700;&#x7684;k8s&#x53BB;&#x73A9;&#xFF0C;&#x8FD9;&#x6837;&#x80FD;&#x63A5;&#x89E6;&#x5230;&#x66F4;&#x591A;&#x539F;&#x751F;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x800C;&#x4E91;&#x5382;&#x5546;&#x4F1A;&#x5BF9;&#x4E00;&#x4E9B;&#x6982;&#x5FF5;&#x8FDB;&#x884C;&#x5C01;&#x88C5;&#xFF0C;&#x8FD9;&#x6837;&#x5176;&#x5B9E;&#x4E0D;&#x592A;&#x5229;&#x4E8E;&#x4F60;&#x7684;&#x5B66;&#x4E60;&#x3002;</p>
<p>&#x5B66;&#x4E60;&#x76F8;&#x5173;&#x7684;&#x8D44;&#x6599;&#x548C;&#x5B9E;&#x64CD;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x603B;&#x7ED3;&#x51FA;&#x6765;&#x7684;&#x4E00;&#x4E9B;&#x7ECF;&#x9A8C;&#xFF1A;</p>
<h1 id="&#x60F3;&#x6E05;&#x695A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5B66;"><a href="#&#x60F3;&#x6E05;&#x695A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5B66;" class="headerlink" title="&#x60F3;&#x6E05;&#x695A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5B66;"></a>&#x60F3;&#x6E05;&#x695A;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x5B66;</h1><p><strong>&#x9996;&#x5148;<a href="/external_links/cb0b804f4b281100315807d335c157ac.html" target="blank" rel="noopener">kubernetes&#x6280;&#x672F;</a>&#x89E3;&#x51B3;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x522B;&#x7684;&#x540C;&#x7C7B;&#x6280;&#x672F;&#x505A;&#x4E0D;&#x5230;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x662F;&#x8FD9;&#x6837;&#x89E3;&#x51B3;&#x7684;&#xFF1F;</strong> &#x6709;&#x6CA1;&#x6709;&#x66F4;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#xFF1F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; &#x4E86;&#x89E3;k8s &#x662F;&#x4EC0;&#x4E48;&#xFF1A;<a href="/external_links/2dc905bc6afce52dccb2d86a042b85b2.html" target="blank" rel="noopener">kubernetes.io/zh-cn/docs/&#x2026;</a></p>
<p>&#x6280;&#x672F;&#x4ED8;&#x8D39;&#x70B9;&#x57FA;&#x672C;&#x4F53;&#x73B0;&#x5728;&#x4E24;&#x4E2A;&#x5730;&#x65B9;&#xFF0C;<strong>&#x4E00;&#x4E2A;&#x662F;&#xFF0C;&#x80FD;&#x5E2E;&#x522B;&#x4EBA;&#x201C;&#x6323;&#x94B1;&#x201D;&#x7684;&#x5730;&#x65B9;&#xFF1B;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#xFF0C;&#x80FD;&#x5E2E;&#x522B;&#x4EBA;&#x201C;&#x7701;&#x94B1;&#x201D;&#x7684;&#x5730;&#x65B9;&#x3002;</strong></p>
<p>&#x5728;&#x5B66;k8s&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x80AF;&#x5B9A;&#x662F;&#x8981;&#x4E86;&#x89E3;&#x4ED6;&#x4E3A;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x4E86;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x662F;&#x5728;&#x5F00;&#x59CB;&#x524D;&#x5FC5;&#x987B;&#x8981;&#x9605;&#x8BFB;&#x7684;&#x3002;</p>
<p>&#x6700;&#x4E3B;&#x8981;&#x7684;&#x89E3;&#x51B3;&#x4E86;&#x670D;&#x52A1;&#x81EA;&#x52A8;&#x90E8;&#x7F72;&#x56DE;&#x6EDA;&#x3001;&#x81EA;&#x6211;&#x4FEE;&#x590D;&#x3001;&#x6C34;&#x5E73;&#x6269;&#x5C55;&#x3001;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x548C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x662F;&#x6311;&#x51FA;&#x6765;&#x4E86;&#x6211;&#x4EEC;&#x5E73;&#x65F6;&#x7814;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x6700;&#x9891;&#x7E41;&#x4F7F;&#x7528;&#x7684;&#x51E0;&#x4E2A;&#x529F;&#x80FD;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/028580c87426bf6b4246d11196c8ba9dd8777c15cb009429cfb6da9a64c2f972" alt="&#x90E8;&#x7F72;&#x6F14;&#x8FDB;&#x8FC7;&#x7A0B;.png"></p>
<p>&#x539F;&#x5148;&#x5982;&#x679C;&#x6CA1;&#x6709; k8s &#x5E2E;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x811A;&#x672C;&#x53BB;&#x91CD;&#x542F;&#x670D;&#x52A1;&#x5E76;&#x4E14;kill&#x6389;&#x539F;&#x6709;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6D41;&#x91CF;&#x8F6C;&#x53D1;&#x4E0A;&#x4E5F;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x901A;&#x8FC7;Nginx&#x6216;&#x8005;&#x5176;&#x4ED6;&#x7F51;&#x5173;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x8FDB;&#x884C;&#x6C34;&#x5E73;&#x6269;&#x5C55;&#x7684;&#x8BDD;&#x4E5F;&#x9700;&#x8981;&#x811A;&#x672C;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x5728;&#x7EBF;&#x4E0A;&#x64CD;&#x4F5C;&#x8FD9;&#x4E9B;&#x5185;&#x5BB9;&#x5BF9;&#x4E8E;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x548C;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x7684;&#x8981;&#x6C42;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x76F8;&#x5E94;&#x7684;&#x6211;&#x4EEC;&#x4E5F;&#x9700;&#x8981;&#x8865;&#x5145;&#x5F00;&#x53D1;&#x8BB8;&#x591A;&#x811A;&#x672C;&#x6765;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x90E8;&#x7F72;&#x56DE;&#x6EDA;&#x3001;&#x81EA;&#x6211;&#x4FEE;&#x590D;&#x3001;&#x6C34;&#x5E73;&#x6269;&#x5C55;&#x7B49;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x6240;&#x4EE5; <strong>k8s &#x5728;&#x5F88;&#x5927;&#x7A0B;&#x5EA6;&#x662F;&#x4E0A;&#x4E3A;&#x6211;&#x4EEC;&#x53BB;&#x7701;&#x94B1;</strong>&#xFF0C;&#x7701;&#x4E0B;&#x4E86;&#x5F00;&#x53D1;&#x548C;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x6709;&#x66F4;&#x591A;&#x7CBE;&#x529B;&#x53BB;&#x5EFA;&#x8BBE;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x529F;&#x80FD;&#x548C;&#x53EF;&#x7528;&#x6027;&#xFF1B;&#x5E76;&#x4E14;&#x7531;&#x4E8E;&#x8D44;&#x6E90;&#x7684;&#x865A;&#x62DF;&#x5316;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x76F8;&#x540C;&#x7684;&#x7269;&#x7406;&#x673A;&#x4E0A;&#x90E8;&#x7F72;&#x66F4;&#x591A;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x4ECE;&#x800C;&#x8282;&#x7701;&#x4E86;&#x5F88;&#x5927;&#x4E00;&#x7B14;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8D44;&#x91D1;&#x3002;</p>
<p>&#x81F3;&#x4E8E;k8s &#x662F;&#x5426;&#x80FD;&#x5E2E;&#x6211;&#x4EEC;&#x6323;&#x94B1;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x5F15;&#x5165;&#x4E86;k8s &#x7684;&#x81EA;&#x52A8;&#x90E8;&#x7F72;&#x56DE;&#x6EDA;&#xFF0C;&#x589E;&#x52A0;&#x4E86;&#x7CFB;&#x7EDF;&#x7A33;&#x5B9A;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x6709;80%&#x7684;&#x95EE;&#x9898;&#x662F;&#x7531;&#x4E8E;&#x53D8;&#x66F4;&#x51FA;&#x73B0;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x51FA;&#x73B0;&#x53D1;&#x5E03;&#x65F6;&#x51FA;&#x95EE;&#x9898;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6D41;&#x91CF;&#x4E0D;&#x4F1A;&#x88AB;&#x8F6C;&#x53D1;&#x5230;&#x4E0D;&#x5065;&#x5EB7;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x5E76;&#x4E14;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;k8s&#x5B9E;&#x73B0;&#x4E86;&#x5FEB;&#x901F;&#x56DE;&#x6EDA;&#xFF0C;&#x4E5F;&#x8BA9;&#x7528;&#x6237;&#x66F4;&#x52A0;&#x613F;&#x610F;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x4ECE;&#x800C;&#x63D0;&#x5347;&#x4E86;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x6536;&#x5165;&#xFF0C;&#x4E5F;&#x662F;&#x95F4;&#x63A5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x8D5A;&#x4E86;&#x94B1;&#x3002;</p>
<p>&#x540C;&#x7C7B;&#x6280;&#x672F;&#x80FD;&#x5426;&#x505A;&#x7684;&#x5230;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x7B54;&#x6848;&#x540C;&#x7C7B;&#x66FF;&#x4EE3;&#x54C1;&#x76EE;&#x524D;&#x6CA1;&#x6709;k8s&#x5B8C;&#x5584;&#xFF0C;&#x800C;&#x4E14;&#x9700;&#x8981;&#x7EC4;&#x5408;&#x5176;&#x4ED6;&#x591A;&#x79CD;&#x5DE5;&#x5177;&#x624D;&#x80FD;&#x5B9E;&#x73B0;&#x76F8;&#x540C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x81EA;&#x5DF1;&#x4E5F;&#x9700;&#x8981;&#x7F16;&#x5199;&#x8F83;&#x591A;&#x7684;&#x811A;&#x672C;&#x6765;&#x8F85;&#x52A9;&#x5B9E;&#x73B0;&#xFF0C;&#x6240;&#x4EE5;&#x5E76;&#x6CA1;&#x6709;k8s&#x89E3;&#x51B3;&#x7684;&#x66F4;&#x76F4;&#x63A5;&#x3002;</p>
<h1 id="&#x7528;&#x597D;&#x5B98;&#x65B9;&#x6587;&#x6863;"><a href="#&#x7528;&#x597D;&#x5B98;&#x65B9;&#x6587;&#x6863;" class="headerlink" title="&#x7528;&#x597D;&#x5B98;&#x65B9;&#x6587;&#x6863;"></a>&#x7528;&#x597D;&#x5B98;&#x65B9;&#x6587;&#x6863;</h1><p>&#x901A;&#x8FC7;&#x5B98;&#x65B9;&#x4E2D;&#x82F1;&#x6587;&#x6863;&#x5B66;&#x4E60;&#x662F;&#x5B66;&#x4E60;&#x65B0;&#x6280;&#x672F;&#x96BE;&#x4EE5;&#x7ED5;&#x5F00;&#x7684;&#x4E00;&#x73AF;&#xFF0C;&#x4E2D;&#x6587;&#x641C;&#x7D22;&#x548C;gpt &#x90FD;&#x6709;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x7EB0;&#x6F0F;&#xFF0C;&#x6240;&#x4EE5;&#x5EFA;&#x8BAE;&#x4EE5;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x7684;&#x5185;&#x5BB9;&#x4E3A;&#x51C6;&#x53BB;&#x8FDB;&#x884C;&#x5B66;&#x4E60;&#x548C;&#x5B9E;&#x8DF5;&#xFF0C;&#x8FD9;&#x91CC;&#x56E0;&#x4E3A;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x5185;&#x5BB9;&#x8F83;&#x591A;&#xFF0C;&#x6211;&#x6311;&#x51FA;&#x6765;<strong>&#x6211;&#x5B66;&#x4E60;&#x8FC7;&#x7A0B;&#x4E2D;&#x770B;&#x7684;&#x5173;&#x952E;&#x7684;&#x51E0;&#x4E2A;&#x6587;&#x6863;</strong>&#xFF0C;&#x7136;&#x540E;&#x518D;&#x9047;&#x5230;&#x8D39;&#x89E3;&#x7684;&#x5730;&#x65B9;&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x548C;GPT &#x8F85;&#x52A9;&#x53BB;&#x7406;&#x89E3;&#x3002;&#x8FD9;&#x6837;&#x4E5F;&#x80FD;&#x5728;&#x81EA;&#x5DF1;&#x6709;&#x4E00;&#x5B9A;&#x8BC6;&#x522B;&#x80FD;&#x529B;&#x7684;&#x65F6;&#x5019;&#x53BB;&#x501F;&#x52A9;&#x4E09;&#x65B9;&#x5DE5;&#x5177;&#x7406;&#x89E3;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x88AB;&#x8BEF;&#x5BFC;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>k8s&#x7684;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x6709;&#x591A;&#x79CD;&#x8BED;&#x8A00;&#x7684;&#x7FFB;&#x8BD1;&#xFF0C;&#x5982;&#x679C;&#x89C9;&#x5F97;&#x4E2D;&#x6587;&#x6587;&#x6863;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x6BD4;&#x8F83;&#x8D39;&#x52B2;&#xFF0C;&#x53EF;&#x4EE5;&#x5207;&#x6362;&#x5230;&#x82F1;&#x6587;&#x7684;&#x6587;&#x6863;&#xFF0C;&#x8FD9;&#x6837;&#x4E13;&#x4E1A;&#x540D;&#x8BCD;&#x770B;&#x8D77;&#x6765;&#x4E5F;&#x4F1A;&#x8854;&#x63A5;&#x7684;&#x66F4;&#x52A0;&#x597D;</p>
<h1 id="&#x521D;&#x8BC6;-K8s"><a href="#&#x521D;&#x8BC6;-K8s" class="headerlink" title="&#x521D;&#x8BC6; K8s"></a>&#x521D;&#x8BC6; K8s</h1><p>&#x7406;&#x89E3;k8s&#x80FD;&#x5E2E;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4EC0;&#x4E48;&#x5BF9;&#x8C61;&#x6765;&#x8FDB;&#x884C;&#x90E8;&#x7F72;&#xFF1A;<a href="/external_links/2dc905bc6afce52dccb2d86a042b85b2.html" target="blank" rel="noopener">kubernetes.io/zh-cn/docs/&#x2026;</a></p>
<p>&#x8FD9;&#x91CC;&#x53EA;&#x9700;&#x8981;&#x5BF9;yaml&#x6709;&#x4E2A;&#x5927;&#x6982;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x660E;&#x767D;&#x6211;&#x4EEC;&#x7684;<strong>&#x5BF9;&#x8C61;&#x90FD;&#x662F;&#x901A;&#x8FC7;yaml&#x6765;&#x63CF;&#x8FF0;&#xFF0C;&#x7136;&#x540E;k8s&#x6839;&#x636E;&#x6211;&#x4EEC;&#x7684;yaml&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x8D44;&#x6E90;&#x521B;&#x5EFA;</strong>&#xFF0C;&#x5E76;&#x4E14;&#x521B;&#x5EFA;&#x51FA;&#x6765;&#x7684;&#x8D44;&#x6E90;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deployment</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: nginx</span><br><span class="line">  replicas: 2 # &#x544A;&#x77E5; Deployment &#x8FD0;&#x884C; 2 &#x4E2A;&#x4E0E;&#x8BE5;&#x6A21;&#x677F;&#x5339;&#x914D;&#x7684; Pod</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: nginx:1.14.2</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x4E0D;&#x9700;&#x8981;&#x8FC7;&#x5EA6;&#x6DF1;&#x5165;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x5185;&#x5BB9;&#x548C;&#x542B;&#x4E49;&#xFF0C;&#x5148;&#x5EFA;&#x7ACB;&#x8D77;&#x4E00;&#x4E2A;&#x5927;&#x6982;&#x7684;&#x8BA4;&#x77E5;&#xFF0C;&#x540E;&#x7EED;&#x5728;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x4E2D;&#x521B;&#x5EFA;&#x5177;&#x4F53;&#x7684;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x901A;&#x8FC7;<a href="/external_links/1e73f41adf187a2eabb19088859eb8a6.html" target="blank" rel="noopener">&#x53C2;&#x8003;&#x624B;&#x518C;</a>&#x53BB;&#x67E5;&#x8BE2;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;yaml&#x63CF;&#x8FF0;&#x4E86;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; <code>Deployment</code> &#x6765;&#x7EF4;&#x62A4;&#x526F;&#x672C;&#x4E3A;2&#x7684; Nginx&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x4E14;&#x5BB9;&#x5668;&#x66B4;&#x9732;&#x7684;&#x7AEF;&#x53E3;&#x4E3A;80&#x3002;</p>
<p>&#x5F00;&#x59CB;&#x52A8;&#x624B;&#x642D;&#x5EFA;k8s&#x7684;&#x73AF;&#x5883;&#xFF0C;&#x8FD9;&#x6837;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x5C55;&#x5F00;&#x5B9E;&#x64CD;&#xFF1A;<a href="/external_links/2dc905bc6afce52dccb2d86a042b85b2.html" target="blank" rel="noopener">kubernetes.io/zh-cn/docs/&#x2026;</a></p>
<p>&#x642D;&#x5EFA;&#x597D;k8s&#x73AF;&#x5883;&#x540E; &#xFF0C;&#x53C2;&#x8003;&#x8FD9;&#x4E2A;&#x6587;&#x6863; <a href="/external_links/2dc905bc6afce52dccb2d86a042b85b2.html" target="blank" rel="noopener">github.com/bmuschko/ck&#x2026;</a></p>
<p>&#x8FD9;&#x91CC;&#x9762;&#x7684;&#x7EC3;&#x4E60;&#x4F1A;&#x9996;&#x5148;&#x63D0;&#x51FA;&#x95EE;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x7ED9;&#x51FA;&#x5BF9;&#x5E94;&#x7684;&#x7B54;&#x6848;&#xFF0C;&#x4ECE;&#x800C;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x7684;&#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x64CD;&#x4F5C; kubernetes &#x96C6;&#x7FA4;&#x548C;&#x5982;&#x4F55;&#x6392;&#x67E5;&#x95EE;&#x9898;&#x7B49;&#xFF0C;&#x91CC;&#x9762;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x7684;&#x5185;&#x5BB9;&#x4E5F;&#x4F1A;&#x7ED9;&#x51FA;&#x76F8;&#x5E94;&#x7684; yaml&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5BF9;&#x5B57;&#x6BB5;&#x4E0D;&#x6E05;&#x695A;&#x662F;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x53BB;&#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x67E5;&#x8BE2;&#xFF0C;&#x907F;&#x514D;&#x4E0A;&#x6765;&#x5C31;&#x5BF9;&#x7740;&#x4E00;&#x5927;&#x5806;&#x5B57;&#x6BB5;&#x548C;&#x6982;&#x5FF5;&#x61F5;&#x903C;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x7B2C;&#x4E00;&#x4E2A;&#x5B9E;&#x64CD;&#x8BAD;&#x7EC3;&#xFF0C;&#x80FD;&#x5BF9;&#x6838;&#x5FC3;&#x7684;&#x8D44;&#x6E90;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x90E8;&#x7F72;&#x8D77;&#x6765;&#x4E00;&#x4E2A;nginx &#x670D;&#x52A1;&#xFF0C;&#x66B4;&#x9732;&#x51FA;&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x5BF9;k8s&#x7684;&#x64CD;&#x4F5C;&#x6709;&#x4E86;&#x521D;&#x6B65;&#x7684;&#x8BA4;&#x8BC6;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x5B9E;&#x9645;&#x751F;&#x4EA7;&#x60C5;&#x51B5;&#x4E2D;&#x6211;&#x4EEC;&#x662F;&#x76F4;&#x63A5;&#x5199;&#x4E86;yaml&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x8D44;&#x6E90;&#x63CF;&#x8FF0;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;yaml&#x548C;&#x90E8;&#x7F72;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;yaml&#x6211;&#x4EEC;&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E2A;Nginx&#x8D44;&#x6E90;&#x5E76;&#x4E14;&#x66B4;&#x9732;&#x51FA; Service&#x53EF;&#x4EE5;&#x8BA9;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx-deployment</span><br><span class="line">spec:</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: nginx</span><br><span class="line">  replicas: 1</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: nginx</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: nginx</span><br><span class="line">        image: nginx:1.14.2</span><br><span class="line">        ports:</span><br><span class="line">        - containerPort: 80</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: nginx</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort</span><br><span class="line">  selector:</span><br><span class="line">    app: nginx</span><br><span class="line">  ports:</span><br><span class="line">    - name: http</span><br><span class="line">      port: 8080</span><br><span class="line">			nodePort: 48080 # &#x5BF9;&#x5916;&#x66B4;&#x9732;&#x7684;pod</span><br><span class="line">      targetPort: 80</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x7684;&#x547D;&#x4EE4;&#x6765;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x521B;&#x5EFA;&#x6211;&#x4EEC;&#x7684;&#x8D44;&#x6E90;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ kubectl create namespace ckad-prep # &#x521B;&#x5EFA;namespace</span><br><span class="line"></span><br><span class="line">$ kubectl apply -f nginx-test.yaml -n ckad-prep # &#x521B;&#x5EFA;&#x8D44;&#x6E90;</span><br><span class="line">...</span><br><span class="line">deployment.apps/nginx-deployment created</span><br><span class="line">service/nginx created</span><br><span class="line"></span><br><span class="line">$ curl localhost:48080</span><br><span class="line">...</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body {</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    }</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;If you see this page, the nginx web server is successfully installed and</span><br><span class="line">working. Further configuration is required.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;For online documentation and support please refer to</span><br><span class="line">&lt;a href=&quot;&lt;http://nginx.org/&gt;&quot;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;</span><br><span class="line">Commercial support is available at</span><br><span class="line">&lt;a href=&quot;&lt;http://nginx.com/&gt;&quot;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5B8C;&#x6210;&#x5B9E;&#x9A8C;&#x540E;&#x6E05;&#x7406;&#x8D44;&#x6E90;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shell&#x590D;&#x5236;&#x4EE3;&#x7801;$ kubectl delete -f nginx-test.yaml -n ckad-prep</span><br><span class="line">deployment.apps &quot;nginx-deployment&quot; deleted</span><br><span class="line">service &quot;nginx&quot; deleted</span><br><span class="line"></span><br><span class="line">$ kubectl delete namespace ckad-prep</span><br><span class="line">namespace &quot;ckad-prep&quot; deleted</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x5BF9; k8s &#x6709;&#x4E86;&#x521D;&#x6B65;&#x7684;&#x8BA4;&#x8BC6;&#x548C;&#x4E86;&#x89E3;&#xFF0C;&#x4E5F;&#x80FD;&#x5BF9; k8s &#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5C31;&#x8981;&#x5F00;&#x59CB;&#x653B;&#x514B;&#x5404;&#x79CD;&#x8D44;&#x6E90;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x80FD;&#x66F4;&#x52A0;&#x7406;&#x89E3; k8s &#x3002;</p>
<h1 id="&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x5B66;&#x4E60;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;"><a href="#&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x5B66;&#x4E60;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;" class="headerlink" title="&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x5B66;&#x4E60;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;"></a>&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x5B66;&#x4E60;&#x5404;&#x4E2A;&#x7EC4;&#x4EF6;</h1><p>&#x6211;&#x4EEC;&#x6700;&#x5F00;&#x59CB;&#x63A5;&#x89E6;&#x5230;&#x7684;&#x5BB9;&#x5668;&#x662F;Docker run &#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x955C;&#x50CF;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7; <a href="/external_links/6c6ea8a61303b96809a8c0f5d734fc51.html" target="blank" rel="noopener">docker swarm</a> &#x4E5F;&#x53EF;&#x4EE5;&#x5355;&#x5BB9;&#x5668;&#x6709;&#x8C03;&#x5EA6;&#x3001;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B49;&#x80FD;&#x529B;&#xFF0C;&#x4F46;&#x662F;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x81F4;&#x547D;&#x7684;&#x95EE;&#x9898;&#x662F;&#x5355;&#x5BB9;&#x5668;&#x7684;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x96BE;&#x4EE5;&#x63CF;&#x8FF0;&#x771F;&#x5B9E;&#x4E16;&#x754C;&#x4E2D;&#x590D;&#x6742;&#x7684;&#x5E94;&#x7528;&#x67B6;&#x6784;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x4E00;&#x4E2A;&#x540E;&#x7AEF;&#x5E94;&#x7528;&#x9700;&#x8981;&#x5BF9;&#x65E5;&#x5FD7;&#x8FDB;&#x884C;&#x6536;&#x96C6;&#xFF0C;&#x628A;&#x65E5;&#x5FD7;&#x8F6C;&#x5B58;&#x5230;elasticSearch &#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7528;Docker &#x8FDB;&#x884C;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;<strong>&#x901A;&#x8FC7;Docker-Compose &#x542F;&#x52A8;&#x4E09;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x3001;<a href="/external_links/1e73f41adf187a2eabb19088859eb8a6.html" target="blank" rel="noopener">&#x65E5;&#x5FD7;&#x8F6C;&#x53D1;&#x6536;&#x96C6;&#x670D;&#x52A1;</a>&#x548C;&#x65E5;&#x5FD7;&#x5B58;&#x50A8;&#x670D;&#x52A1;&#xFF08;elasticSearch&#xFF09;</strong> &#xFF0C;&#x8FD9;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x4F1A;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x548C;&#x65E5;&#x5FD7;&#x8F6C;&#x53D1;&#x670D;&#x52A1;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x8C03;&#x5EA6;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x96C6;&#x7FA4;&#x4E0A;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x6765;&#x6536;&#x96C6;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#xFF0C;&#x6211;&#x4EEC;&#x66F4;&#x52A0;&#x76F4;&#x89C2;&#x7684;&#x7406;&#x89E3;&#x662F;&#x867D;&#x7136;&#x5C06;&#x8FD9;&#x4E24;&#x4E2A;&#x670D;&#x52A1;&#x6253;&#x5305;&#x6210;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#xFF0C;<strong>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x662F;kubernetes &#x4E2D;&#x62BD;&#x8C61;&#x51FA;&#x6765;&#x7684;Pod&#x3002;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/2c5b8a846427b6aa25ced9629055a2f4297c035b5c59d500cb68334dec83bd52" alt="image.png"><br>&#x901A;&#x8FC7;yaml&#x6211;&#x4EEC;&#x63CF;&#x8FF0;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yaml&#x590D;&#x5236;&#x4EE3;&#x7801;apiVersion: apps/v1</span><br><span class="line">kind: Deployment</span><br><span class="line">metadata:</span><br><span class="line">  name: myapp</span><br><span class="line">spec:</span><br><span class="line">  replicas: 3  # &#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x8C03;&#x6574;</span><br><span class="line">  selector:</span><br><span class="line">    matchLabels:</span><br><span class="line">      app: myapp</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        app: myapp</span><br><span class="line">    spec:</span><br><span class="line">      containers:</span><br><span class="line">      - name: backend</span><br><span class="line">        image: your-backend-image</span><br><span class="line">        # &#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x5E94;&#x7528;&#x914D;&#x7F6E;...</span><br><span class="line">      - name: log-collection</span><br><span class="line">        image: log-collection-image</span><br><span class="line">        # &#x5176;&#x4ED6; &#x914D;&#x7F6E;...</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x5C31;&#x5C06;&#x540E;&#x7AEF;&#x670D;&#x52A1;&#x548C;&#x65E5;&#x5FD7;&#x6536;&#x96C6;&#x6253;&#x5305;&#x5728;&#x4E86;&#x4E00;&#x4E2A;Pod&#x4E2D;&#xFF0C;&#x901A;&#x8FC7; Deployment &#x6765;&#x7BA1;&#x7406;&#x6211;&#x4EEC;&#x7684;Pod&#xFF0C;&#x7136;&#x540E;&#x5904;&#x7406;&#x5B8C;&#x540E;&#x5B58;&#x50A8;&#x4E0B;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x6A21;&#x5F0F;&#x5C31;&#x662F;&#x5BB9;&#x5668;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x91CC;&#x9762;&#x6700;&#x5E38;&#x7528;&#x7684;Sidecar&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/b66ce0d97850bde5745e41342e04e8949df31835948d4be91c1426af754fb81f" alt="image.png"></p>
<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x63A5;&#x89E6;&#x4E86;&#x6700;&#x6838;&#x5FC3;&#x7684;Pod&#x7684;&#x6982;&#x5FF5;</p>
<p>&#x6709;&#x4E86;Pod&#x540E;&#xFF0C;Pod&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x7BA1;&#x7406;&#x53CA;&#x8C03;&#x5EA6;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x9700;&#x8981;&#x6709;&#x53E6;&#x5916;&#x7684;&#x62BD;&#x8C61;&#x6765;&#x8D1F;&#x8D23;&#xFF0C;&#x8FD9;&#x4E2A;&#x62BD;&#x8C61;&#x5C31;&#x662F;Deployment &#xFF0C;&#x5B83;&#x7528;&#x6765;&#x7BA1;&#x7406;Pod&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6BD4;&#x5982;&#x6269;&#x7F29;&#x5BB9;&#xFF0C;&#x7EF4;&#x6301;pod&#x6570;&#x91CF;&#x7B49;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/96d96fba1fccfa29956abafca398133b19d6fb456f1489bed8ff76bdffe97a5a" alt="image.png"></p>
<p>&#x5982;&#x679C;&#x8282;&#x70B9;&#x4E0D;&#x6B63;&#x5E38; Deployment&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5C06;Pod&#x8C03;&#x5EA6;&#x5230;&#x5176;&#x4ED6;&#x7684;&#x8282;&#x70B9;&#x4E0A;&#xFF0C;&#x5E76;&#x4E14;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;Deployment&#x5FEB;&#x901F;&#x7684;&#x6269;&#x5C55;Pod&#x7684;&#x6570;&#x91CF;&#x6765;&#x63D0;&#x5347;&#x7CFB;&#x7EDF;&#x7684;&#x54CD;&#x5E94;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x5728;&#x4E0A;&#x9762;Yaml&#x6587;&#x4EF6;&#x4E2D;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x51FA;&#x6765;&#x7684;&#x4E3A;Deployment&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x521B;&#x5EFA;Pod&#xFF0C;&#x4E5F;&#x662F;&#x8FD9;&#x4E2A;&#x539F;&#x56E0;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/912586b14a632426b31a51fdaef658cd03e2504ba803ac62afadbe50fd3acebc" alt="image.png"></p>
<p>&#x5B66;&#x4E60;&#x5B8C;&#x4E0A;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x540E;&#x4F5C;&#x4E3A;&#x7814;&#x53D1;&#x7ECF;&#x5E38;&#x78B0;&#x5230;&#x7684;&#x5185;&#x5BB9;&#x5DF2;&#x7ECF;&#x89E3;&#x51B3;&#x4E86;&#x5F88;&#x5927;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x5269;&#x4E0B;&#x7684;&#x5185;&#x5BB9;&#x5176;&#x5B9E;&#x5C31;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x548C;&#x5DE5;&#x4F5C;&#x5B9E;&#x9645;&#x7528;&#x5230;&#x7684;&#x53BB;&#x63A2;&#x7D22;&#x3002;</p>
<p>&#x6211;&#x81EA;&#x5DF1;&#x7684;&#x8BDD;&#x56E0;&#x4E3A;&#x5BF9;&#x7F51;&#x7EDC;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x6DF1;&#x5165;&#x7684;&#x53BB;&#x5B66;&#x4E60; Service &#x76F8;&#x5173;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6BD4;&#x5982;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x7EF4;&#x62A4;&#x53D8;&#x66F4;&#x7684;&#xFF0C;&#x5982;&#x4F55;&#x901A;&#x8FC7; Iptables&#x548C; Ipvs&#x53BB;&#x5B8C;&#x6210;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x5728;&#x901A;&#x8FC7;&#x6E90;&#x7801;&#x770B;kubeproxy&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x89C4;&#x5219;&#x7EF4;&#x62A4;&#x3001;&#x957F;&#x8FDE;&#x63A5;&#x5728;k8s&#x4E2D;&#x662F;&#x600E;&#x4E48;&#x6837;&#x7684;&#x5F62;&#x6001;&#x51FA;&#x73B0;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x70B9;&#x53BB;&#x5E26;&#x51FA;&#x9762;&#xFF0C;&#x4E0D;&#x8981;&#x76F2;&#x76EE;&#x7684;&#x4E1C;&#x770B;&#x4E00;&#x5757;&#x897F;&#x770B;&#x4E00;&#x5757;&#x3002;</p>
<p>&#x6211;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x4E5F;&#x4ECE;k8s&#x7684;&#x5E94;&#x7528;&#x5C42;&#x5B66;&#x4E60;&#x5230;&#x4E86;&#x4F20;&#x8F93;&#x5C42;&#x548C;&#x7F51;&#x7EDC;&#x5C42;&#x7684;&#x534F;&#x8BAE;&#x4EE5;&#x53CA;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x529F;&#x80FD;&#x662F;&#x5982;&#x4F55;&#x88AB;k8s&#x4F7F;&#x7528;&#xFF0C;&#x8FD9;&#x6837;&#x5F53;K8s&#x5E95;&#x5C42;&#x8981;&#x66F4;&#x6362;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x53EA;&#x8981;&#x53BB;&#x5B66;&#x4E60;&#x76F8;&#x5E94;&#x7684;&#x5185;&#x6838;&#x529F;&#x80FD;&#x5C31;&#x53EF;&#x4EE5;&#xFF0C;&#x8FD9;&#x6837;&#x4E5F;&#x4E0D;&#x4EC5;&#x4EC5;&#x5C40;&#x9650;&#x5728;k8s&#x7684;&#x5B66;&#x4E60;&#xFF0C;&#x66F4;&#x80FD;&#x4E32;&#x8054;&#x8BA1;&#x7B97;&#x673A;&#x7684;&#x6240;&#x6709;&#x76F8;&#x5173;&#x77E5;&#x8BC6;&#x3002;</p>
<p>&#x8BA1;&#x7B97;&#x673A;&#x662F;&#x4EBA;&#x9020;&#x79D1;&#x5B66;&#xFF0C;&#x5728;&#x5B66;&#x7684;&#x65F6;&#x5019;&#x4E00;&#x5B9A;&#x6709;&#x9075;&#x5FAA;&#x4E00;&#x5B9A;&#x4EBA;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x800C;&#x4E14;&#x5927;&#x795E;&#x4EEC;&#x7684;&#x903B;&#x8F91;&#x601D;&#x8DEF;&#x4E5F;&#x76F8;&#x5BF9;&#x6E05;&#x6670;&#xFF0C;&#x601D;&#x8003;&#x5927;&#x795E;&#x4EEC;&#x662F;&#x5982;&#x4F55;&#x601D;&#x8003;&#x7684;&#x4E5F;&#x80FD;&#x5F97;&#x5230;&#x5F88;&#x591A;&#x542F;&#x53D1;&#x3002;</p>
<h1 id="&#x5199;&#x5728;&#x6700;&#x540E;"><a href="#&#x5199;&#x5728;&#x6700;&#x540E;" class="headerlink" title="&#x5199;&#x5728;&#x6700;&#x540E;"></a>&#x5199;&#x5728;&#x6700;&#x540E;</h1><p>&#x611F;&#x8C22;&#x4F60;&#x8BFB;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x770B;&#x66F4;&#x591A; Kubernetes &#x7684;&#x6587;&#x7AE0;&#x53EF;&#x4EE5;&#x8BA2;&#x9605;&#x6211;&#x7684;&#x4E13;&#x680F;&#xFF1A; <a href="/external_links/111883ac7ce802f39f74b5aaa39df849.html" target="blank" rel="noopener">juejin.cn/column/7321&#x2026;</a> &#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/10f5ddb29954672d774b156d957b7977.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322356470254370835.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322356470254370835.html" itemprop="url">你真的理解分布式理论吗？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-11T08:20:55+08:00">
                2024-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;"></a>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;</h2><p>&#x968F;&#x7740;&#x65F6;&#x4EE3;&#x7684;&#x53D1;&#x5C55;&#xFF0C;&#x4F20;&#x7EDF;&#x7684;&#x5355;&#x53F0;&#x673A;&#x5668;&#x53EF;&#x80FD;&#x65E0;&#x6CD5;&#x5B8C;&#x6210;&#x6211;&#x4EEC;&#x671F;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x6240;&#x4EE5;&#x53D1;&#x5C55;&#x51FA;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x6982;&#x5FF5;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x7684;&#x6027;&#x80FD;&#x3001;&#x53EF;&#x4F38;&#x7F29;&#x6027;&#x3001;&#x53EF;&#x7528;&#x6027;&#x3001;&#x5BB9;&#x9519;&#x6027;&#x3002;&#x5176;&#x672C;&#x8D28;&#x5C31;&#x662F;<strong>&#x5806;&#x673A;&#x5B50;</strong>&#xFF0C;&#x901A;&#x8FC7;&#x589E;&#x52A0;&#x673A;&#x5668;&#x6570;&#x91CF;&#xFF0C;&#x5B8C;&#x6210;&#x4E4B;&#x524D;&#x5355;&#x53F0;&#x673A;&#x5668;&#x96BE;&#x4EE5;&#x5B8C;&#x6210;&#x7684;&#x4EFB;&#x52A1;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/e271b784cd27295ab4b8b32e6adde41af1b20e74b0c00d886d9cca17af2a47f7" alt></p>
<p><strong>&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF1A;&#x591A;&#x53F0;&#x72EC;&#x7ACB;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x7EC4;&#x6210;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x6BCF;&#x4E00;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x89C6;&#x4E3A;&#x4E00;&#x4E2A;&#x7ED3;&#x70B9;&#xFF0C;&#x8FD9;&#x4E9B;&#x8282;&#x70B9;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x4E92;&#x76F8;&#x901A;&#x4FE1;&#x548C;&#x534F;&#x4F5C;&#x3002;</strong></p>
<p><strong>&#x4F46;&#x662F;&#x5F15;&#x5165;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E4B;&#x540E;&#xFF0C;&#x968F;&#x4E4B;&#x800C;&#x6765;&#x7684;&#x662F;&#x5355;&#x4F53;&#x67B6;&#x6784;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#x3002;</strong></p>
<p>&#x6BD4;&#x5982;</p>
<ul>
<li>&#x901A;&#x4FE1;&#x548C;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#xFF1A;&#x5728;&#x5355;&#x4F53;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x65E0;&#x9700;&#x548C;&#x5176;&#x4ED6;&#x673A;&#x5668;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;&#x800C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#xFF0C;&#x8FD9;&#x5C31;&#x5BFC;&#x81F4;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;&#x6D88;&#x606F;&#x5EF6;&#x8FDF;&#x3001;&#x4E22;&#x5305;&#x3001;&#x7F51;&#x7EDC;&#x4E0D;&#x7A33;&#x5B9A;&#x7B49;&#x95EE;&#x9898;&#x9020;&#x6210;&#x7684;&#x7CFB;&#x7EDF;&#x7A33;&#x5B9A;&#x6027;&#x4E0B;&#x964D;</li>
<li>&#x4E00;&#x81F4;&#x6027;&#x548C;&#x53EF;&#x7528;&#x6027;&#x7684;&#x6743;&#x8861;&#xFF1A;&#x5728;&#x5355;&#x4F53;&#x67B6;&#x6784;&#x4E2D;&#xFF0C;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x63A5;&#x53D7;&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5904;&#x7406;&#x5B8C;&#x6210;&#x5373;&#x53EF;&#x54CD;&#x5E94;&#x3002;&#x4F46;&#x662F;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x5728;&#x51FA;&#x73B0;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x65F6;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4E00;&#x81F4;&#x6027;&#xFF08;&#x5148;&#x540C;&#x6B65;&#x6570;&#x636E;&#x3001;&#x518D;&#x8FDB;&#x884C;&#x54CD;&#x5E94;&#xFF09;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x53EF;&#x7528;&#x6027;&#xFF08;&#x5148;&#x8FDB;&#x884C;&#x54CD;&#x5E94;&#x3001;&#x518D;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x540C;&#x6B65;&#xFF09;&#x3002;</li>
<li>&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF1A;&#x591A;&#x8282;&#x70B9;&#x73AF;&#x5883;&#x4E0B;&#xFF0C;&#x786E;&#x4FDD;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x53D8;&#x5F97;&#x66F4;&#x4E3A;&#x590D;&#x6742;&#xFF0C;&#x800C;&#x4E14;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x65F6;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x53EA;&#x80FD;&#x4FDD;&#x8BC1;&#x7CFB;&#x7EDF;&#x5728;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x7684;&#x7A33;&#x5B9A;&#x8FD0;&#x884C;&#x4E4B;&#x540E;&#xFF0C;&#x5404;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x8D8B;&#x4E8E;&#x4E00;&#x81F4;&#x3002;</li>
</ul>
<p>&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x4E1A;&#x754C;&#x63D0;&#x51FA;&#x4E86;&#x4E00;&#x4E9B;&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x77F3;&#x7EA7;&#x522B;&#x7684;&#x7406;&#x8BBA;&#x4EE5;&#x53CA;&#x843D;&#x5730;&#x65B9;&#x6848;&#x3002;</p>
<p>&#x672C;&#x6587;&#x4F1A;&#x5411;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x7406;&#x8BBA;&#xFF0C;&#x4EE5;&#x53CA;&#x6D41;&#x884C;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;&#x3002;</p>
<h2 id="&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;&#x7406;&#x8BBA;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;&#x7406;&#x8BBA;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;&#x7406;&#x8BBA;"></a>&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;&#x7406;&#x8BBA;</h2><h3 id="CAP&#x7406;&#x8BBA;"><a href="#CAP&#x7406;&#x8BBA;" class="headerlink" title="CAP&#x7406;&#x8BBA;"></a>CAP&#x7406;&#x8BBA;</h3><p>CAP&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x65B9;&#x5411;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x7406;&#x8BBA;&#xFF0C;&#x53EF;&#x4EE5;&#x7C97;&#x7565;&#x7684;&#x5C06;&#x5B83;&#x770B;&#x6210;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x8D77;&#x70B9;&#xFF0C;CAP&#x5206;&#x522B;&#x4EE3;&#x8868;&#x7684;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x4E09;&#x79CD;&#x6027;&#x8D28;&#xFF0C;&#x5206;&#x522B;&#x662F;<strong>Consistency&#xFF08;&#x53EF;&#x7528;&#x6027;&#xFF09;&#x3001;Availability&#xFF08;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#x3001;Partition tolerance&#xFF08;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#xFF09;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x5206;&#x522B;&#x662F;C A P&#xFF0C;&#x4E8E;&#x662F;&#x8FD9;&#x4E2A;&#x7406;&#x8BBA;&#x88AB;&#x79F0;&#x4E3A;CAP&#x7406;&#x8BBA;&#x3002;</strong></p>
<ul>
<li>&#x4E00;&#x81F4;&#x6027;&#xFF08;Consistency&#xFF09;&#xFF1A;&#x6240;&#x6709;&#x8282;&#x70B9;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x770B;&#x5230;&#x7684;&#x6570;&#x636E;&#x662F;&#x4E00;&#x81F4;&#x7684;&#x3002;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x6240;&#x6709;&#x8282;&#x70B9;&#x5BF9;&#x4E8E;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x6267;&#x884C;&#x90FD;&#x5177;&#x6709;&#x76F8;&#x540C;&#x7684;&#x89C6;&#x56FE;&#x3002;</li>
<li>&#x53EF;&#x7528;&#x6027;&#xFF08;Availability&#xFF09;&#xFF1A;&#x7CFB;&#x7EDF;&#x5728;&#x6709;&#x9650;&#x65F6;&#x95F4;&#x5185;&#x80FD;&#x591F;&#x4E3A;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#xFF0C;&#x5373;&#x7CFB;&#x7EDF;&#x5BF9;&#x4E8E;&#x8BF7;&#x6C42;&#x7684;&#x54CD;&#x5E94;&#x4E0D;&#x80FD;&#x65E0;&#x671F;&#x9650;&#x7684;&#x5EF6;&#x8FDF;&#x6216;&#x5931;&#x8D25;&#x3002;</li>
<li>&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#xFF08;Partition Tolerance&#xFF09;&#xFF1A;&#x6210;&#x719F;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x7684;&#x6027;&#x8D28;&#xFF0C;&#x7CFB;&#x7EDF;&#x80FD;&#x591F;&#x5728;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x53D1;&#x751F;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x7684;&#x8BF7;&#x6B3E;&#x4FEE;&#x6539;&#x7EE7;&#x7EED;&#x5DE5;&#x4F5C;&#x3002;</li>
</ul>
<p>&#x7406;&#x8BBA;&#x4E0A;&#x6765;&#x8BF4;&#xFF0C;CAP&#x4E09;&#x8005;&#x540C;&#x65F6;&#x6700;&#x591A;&#x6EE1;&#x8DB3;&#x4E24;&#x8005;&#xFF0C;&#x4F46;&#x662F;&#x5E76;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x4E24;&#x4E2A;&#xFF0C;&#x8BB8;&#x591A;&#x7CFB;&#x7EDF;&#x6700;&#x591A;&#x53EA;&#x80FD;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;0&#x3001;1&#x4E2A;</p>
<p><strong>&#x4E3A;&#x4EC0;&#x4E48;CAP&#x6700;&#x591A;&#x53EA;&#x80FD;&#x6EE1;&#x8DB3;&#x4E24;&#x4E2A;&#x5462;?</strong></p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4EE5;&#x7535;&#x5546;&#x7CFB;&#x7EDF;&#x6765;&#x5F53;&#x505A;&#x4F8B;&#x5B50;&#xFF0C;&#x8FD9;&#x4E2A;&#x7535;&#x5546;&#x7CFB;&#x7EDF;&#x6709;&#x4E24;&#x53F0;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5F7C;&#x6B64;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x7F51;&#x7EDC;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>
<p>&#x7F51;&#x7EDC;&#x6B63;&#x5E38;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x6B65;&#x6570;&#x636E;&#x5230;&#x53E6;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x8FD4;&#x56DE;&#xFF0C;&#x6216;&#x8005;&#x8FD4;&#x56DE;&#x4E4B;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x540C;&#x6B65;&#x3002;&#x4F46;&#x662F;&#x4E00;&#x65E6;&#x51FA;&#x73B0;&#x4E86;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x6709;&#x4E24;&#x4E2A;&#x9009;&#x62E9;&#xFF0C;&#x5373;<strong>&#x5148;&#x540C;&#x6B65;&#x6570;&#x636E;</strong>&#x8FD8;&#x662F;<strong>&#x5148;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;</strong>&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f52eb5177dd0c363479c538d4ff9fdb915535cbc364daae89cb7461d3bc06bdf" alt></p>
<p>&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;&#x5047;&#x8BBE;&#x5F53;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6253;&#x5230;&#x4E86;Server2&#x8FD9;&#x91CC;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/a8eb0387eaecc4ee0ec65475ae6232bad012ab7d6425ed545e3617d4639e3f4f" alt></p>
<p>C: &#x8FFD;&#x6C42;&#x7684;&#x662F;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027; &#x5F53;&#x6709;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6765;&#x4E86;&#x4E4B;&#x540E; &#x5B83;&#x4F1A;&#x7B49;&#x5F85;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#x7684;&#x60C5;&#x51B5;&#x7ED3;&#x675F;&#x4E4B;&#x540E; &#x5411;&#x53E6;&#x4E00;&#x4E2A;&#x673A;&#x5668;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x540C;&#x6B65;</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x4ED6;&#x4F1A;&#x5728;&#x672C;&#x5730;&#x5904;&#x7406;&#x597D;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x5E38;&#x5E38;&#x4F1A;&#x4F34;&#x968F;&#x7740;&#x67D0;&#x4E9B;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x6BD4;&#x5982;&#x7F13;&#x5B58;&#x5185;&#x5BB9;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x7A0B;&#x5E8F;&#x5185;&#x90E8;&#x67D0;&#x4E9B;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#x7684;&#x53D8;&#x5316;&#x7B49;&#x7B49;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/3d85cb7ffe4caa60ebc120ddfa5f5c93862997e9f315d05054721d247f059dd9" alt></p>
<p>&#x4E4B;&#x540E;&#xFF0C;&#x5B83;&#x4F1A;&#x7B49;&#x5F85;&#x7F51;&#x7EDC;&#x6062;&#x590D;&#xFF0C;&#x5373;&#x80FD;&#x591F;&#x548C;Server1&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/d372d53d1e7735c0f1cceff67def144c1dc47afd10eed22c6eca75ddcaa5fdc9" alt></p>
<p>&#x7F51;&#x7EDC;&#x6062;&#x590D;&#x540E;&#xFF0C;Server1&#x548C;Server2&#x5904;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x5F7C;&#x6B64;&#x53EF;&#x4EE5;&#x901A;&#x4FE1;&#xFF0C;&#x8FD9;&#x65F6;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x7684;&#x540C;&#x6B65;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/b5b5cf9a694a483b1b26ea85b76fbb1d7cec082dc7e32774d9d2f2532d680442" alt></p>
<p>&#x5B8C;&#x6210;&#x6570;&#x636E;&#x540C;&#x6B65;&#x4E4B;&#x540E;&#xFF0C;&#x8FD4;&#x56DE;&#x54CD;&#x5E94;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/c0f8eaeeeed6adb11f7b2febd255df604c7a989d09c806080cd8199564a4cde8" alt></p>
<p>A: &#x8FFD;&#x6C42;&#x7684;&#x662F;&#x53EF;&#x7528;&#x6027; &#x4E5F;&#x5C31;&#x662F;&#x5C3D;&#x53EF;&#x80FD;&#x63D0;&#x4F9B;&#x6709;&#x6548;&#x670D;&#x52A1; &#x5F53;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x6765;&#x4E86;&#x4E4B;&#x540E; &#x5B83;&#x4F1A;&#x7ACB;&#x5373;&#x8FD4;&#x56DE; &#x54EA;&#x6015;&#x6570;&#x636E;&#x662F;&#x9648;&#x65E7;&#x7684; &#x4E5F;&#x5F97;&#x4F18;&#x5148;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x5176;&#x4ED6;&#x5206;&#x533A;&#x7684;&#x8282;&#x70B9;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#xFF08;&#x6570;&#x636E;&#xFF09;&#x53EF;&#x80FD;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x56FE;&#x4E5F;&#x662F;&#x53CD;&#x8FC7;&#x6765;&#x7684;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x7684;AC&#x4E0D;&#x53EF;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;&#x6307;&#x7684;&#x662F;<strong>&#x5F53;&#x6574;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x51FA;&#x73B0;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x65E2;&#x60F3;&#x7740;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x5B9E;&#x65F6;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x53C8;&#x53BB;&#x8FFD;&#x6C42;&#x670D;&#x52A1;&#x7684;&#x53EF;&#x7528;&#x6027;</strong>&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5F53;&#x6CA1;&#x6709;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x4E24;&#x4E2A;&#x6027;&#x8D28;&#x662F;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x300E;&#x540C;&#x6B65;&#x6570;&#x636E;&#x300F;&#x548C;&#x300E;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#x300F;&#x8FD9;&#x4E24;&#x4E2A;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x5148;&#x540E;&#x5173;&#x7CFB;&#xFF0C;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#x5BFC;&#x81F4;&#x53E6;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x7684;&#x300E;&#x6B7B;&#x7B49;&#x300F;&#x3002;</p>
<p>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;<strong>P&#x662F;&#x4F1A;&#x5FC5;&#x7136;&#x53D1;&#x751F;&#x7684;</strong>&#xFF0C;&#x9020;&#x6210;P&#x7684;&#x539F;&#x56E0;&#x53EF;&#x80FD;&#x662F;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x8282;&#x70B9;&#x5B95;&#x673A;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x6BCF;&#x4E00;&#x65F6;&#x523B;&#x90FD;&#x4E0D;&#x51FA;&#x73B0;&#x7F51;&#x7EDC;&#x9694;&#x79BB;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6EE1;&#x8DB3;P&#x7684;&#x7279;&#x6027;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x751F;&#x5206;&#x533A;&#x9519;&#x8BEF;&#xFF0C;&#x90A3;&#x4E48;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5C31;&#x65E0;&#x6CD5;&#x5DE5;&#x4F5C;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x8FDD;&#x80CC;&#x4E86;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x7406;&#x5FF5;&#xFF0C;&#x8FDE;&#x6700;&#x57FA;&#x672C;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x6761;&#x4EF6;&#x90FD;&#x6CA1;&#x6709;&#x6EE1;&#x8DB3;</p>
<p><strong>&#x5178;&#x578B;&#x7684;CP&#x548C;AP&#x7684;&#x4EA7;&#x54C1;</strong></p>
<p>CP&#xFF1A;Zookeeper &#x5F53;&#x7CFB;&#x7EDF;&#x5728;&#x53D1;&#x751F;&#x5206;&#x533A;&#x6545;&#x969C;&#x4E4B;&#x540E; &#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x88AB;&#x5361;&#x6B7B;&#x6216;&#x8005;&#x8D85;&#x65F6; &#x4F46;&#x662F;&#x7CFB;&#x7EDF;&#x603B;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x81F4;&#x7684;&#x6570;&#x636E;</p>
<p>AP&#xFF1A;Eureka &#x5206;&#x533A;&#x53D1;&#x751F;&#x6545;&#x969C;&#x4E4B;&#x540E; &#x5BA2;&#x6237;&#x7AEF;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7CFB;&#x7EDF; &#x4F46;&#x662F;&#x83B7;&#x53D6;&#x7684;&#x6570;&#x636E;&#x6709;&#x7684;&#x662F;&#x65B0;&#x6570;&#x636E; &#x6709;&#x7684;&#x662F;&#x8001;&#x6570;&#x636E;</p>
<p>&#x5F53;&#x7136; &#xFF0C;CAP&#x8FD9;&#x51E0;&#x4E2A;&#x7279;&#x6027;&#x4E0D;&#x662F;BOOL&#x7C7B;&#x578B;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x7C7B;&#x578B;&#xFF0C;&#x5B8C;&#x5168;&#x662F;&#x770B;&#x7CFB;&#x7EDF;&#x5177;&#x4F53;&#x9700;&#x8981;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x8981;&#x6C42;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#x5206;&#x533A;&#x5BB9;&#x9519;&#xFF0C;&#x6709;&#x7684;&#x7CFB;&#x7EDF;&#x4E00;&#x53F0;&#x673A;&#x5668;&#x51FA;&#x9519;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x8BA4;&#x4E3A;&#x4E0D;&#x5F71;&#x54CD;&#x4E1A;&#x52A1;&#x7684;&#x8BDD;&#xFF0C;&#x8BA4;&#x4E3A;&#x5206;&#x533A;&#x4E0D;&#x5B58;&#x5728;&#x3002;&#x53EA;&#x6709;&#x591A;&#x53F0;&#x673A;&#x5668;&#x90FD;&#x51FA;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x7CFB;&#x7EDF;&#x53D7;&#x5230;&#x4E25;&#x91CD;&#x5F71;&#x54CD;&#x624D;&#x8BA4;&#x4E3A;&#x51FA;&#x73B0;&#x5206;&#x533A;</p>
<h3 id="PACELC&#x7406;&#x8BBA;"><a href="#PACELC&#x7406;&#x8BBA;" class="headerlink" title="PACELC&#x7406;&#x8BBA;"></a>PACELC&#x7406;&#x8BBA;</h3><p>PACELC&#x7406;&#x8BBA;&#x662F;&#x5BF9;CAP&#x7406;&#x8BBA;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x5728;&#x7EF4;&#x57FA;&#x767E;&#x79D1;&#x4E0A;&#x7684;&#x5B9A;&#x4E49;&#x662F;</p>
<p><code>It states that in case of network partitioning (P) in a distributed computer system, one has to choose between availability (A) and consistency (C) (as per the CAP theorem), but else (E), even when the system is running normally in the absence of partitions, one has to choose between latency (L) and consistency (C).</code></p>
<p>&#x7FFB;&#x8BD1;&#xFF1A;&#x5982;&#x679C;&#x6709;&#x5206;&#x533A;&#xFF08;P&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x7CFB;&#x7EDF;&#x5C31;&#x5FC5;&#x987B;&#x5728;&#x53EF;&#x7528;&#x6027;&#xFF08;A&#xFF09;&#x548C;&#x4E00;&#x81F4;&#x6027;&#xFF08;C&#xFF09;&#x4E4B;&#x95F4;&#x53D6;&#x5F97;&#x5E73;&#x8861;&#xFF0C;&#x5426;&#x5219;&#xFF08;E&#xFF09;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x8FD0;&#x884C;&#x5728;&#x65E0;&#x5206;&#x533A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x5728;&#x5EF6;&#x8FDF;&#xFF08;L&#xFF09;&#x548C;&#x4E00;&#x81F4;&#x6027;&#xFF08;C&#xFF09;&#x4E4B;&#x95F4;&#x53D6;&#x5F97;&#x5E73;&#x8861;&#x3002;</p>
<p>&#x5B83;&#x76F8;&#x6BD4;&#x4E8E;CAP&#xFF0C;&#x591A;&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x4E2A;&#x5EF6;&#x8FDF;Latency&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5728;&#x51FA;&#x73B0;&#x5206;&#x533A;&#x9519;&#x8BEF;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53D6;&#x524D;&#x534A;&#x90E8;&#x5206;PAC&#xFF0C;&#x7406;&#x8BBA;&#x548C;CAP&#x7684;&#x5185;&#x5BB9;&#x4E00;&#x81F4;&#x3002;&#x6CA1;&#x6709;&#x51FA;&#x73B0;&#x5206;&#x533A;&#x9519;&#x8BEF;&#x7684;&#x65F6;&#x5019;&#x53D6;LC&#xFF0C;&#x4E5F;&#x5C31;&#x662F;Latency&#x4E0E;Consistency&#x3002;</p>
<p>&#x5F53;&#x524D;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x6307;&#x5BFC;&#x7406;&#x8BBA;&#x66F4;&#x66FF;&#x4EE3;CAP&#x7406;&#x8BBA;&#xFF0C;&#x7406;&#x7531;&#x5982;&#x4E0B;</p>
<ul>
<li>PACELC&#x66F4;&#x80FD;&#x6EE1;&#x8DB3;&#x5B9E;&#x9645;&#x64CD;&#x4F5C;&#x4E2D;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x5DE5;&#x4F5C;&#x573A;&#x666F;&#xFF0C;&#x662F;&#x66F4;&#x597D;&#x7684;&#x5DE5;&#x7A0B;&#x5B9E;&#x73B0;&#x7B56;&#x7565;</li>
<li>&#x5F53;P&#x5B58;&#x5728;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x9700;&#x8981;&#x5728;A C&#x4E4B;&#x95F4;&#x505A;&#x53D6;&#x820D;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5927;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x91CC;P&#x662F;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x5728;L&#x548C;C&#x4E4B;&#x95F4;&#x505A;&#x53D6;&#x820D;&#x662F;&#x4E00;&#x4E2A;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;</li>
<li>PACELC&#x53EF;&#x4EE5;&#x5728;latency&#x4E0E;consistency&#x4E4B;&#x95F4;&#x83B7;&#x5F97;&#x5E73;&#x8861;</li>
</ul>
<p>&#x8981;&#x4FDD;&#x8BC1;&#x7CFB;&#x7EDF;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x5F97;&#x91C7;&#x7528;&#x5197;&#x4F59;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x6211;&#x7684;&#x5176;&#x4ED6;&#x535A;&#x6587;&#x6709;&#x63D0;&#x5230;4&#x4E2A;9&#x7684;&#x5F02;&#x5730;&#x591A;&#x6D3B;&#x7B56;&#x7565;&#xFF0C;&#x4E5F;&#x662F;&#x91C7;&#x7528;&#x7684;&#x6570;&#x636E;&#x5197;&#x4F59;&#x601D;&#x60F3;&#xFF0C;&#x800C;&#x4E00;&#x65E6;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x590D;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x4E2D;&#x5C31;&#x4E00;&#x5B9A;&#x4F1A;&#x5728;Consistency&#x548C;Latency&#x4E4B;&#x95F4;&#x505A;&#x4E00;&#x4E2A;&#x53D6;&#x820D;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/4617af8e3093be65f1e1a74db56cf85bf8b9f9946bc5031ea2b3a9524bfcd65e" alt>  </p>
<p><strong>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;</strong></p>
<p>&#x5728;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x9700;&#x8981;&#x4E09;&#x4E2A;&#x4ECE;&#x8282;&#x70B9;&#x90FD;&#x843D;&#x76D8;&#x6570;&#x636E;&#xFF0C;&#x624D;&#x80FD;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x8FD4;&#x56DE;OK&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5F53;master&#x5411;slave&#x540C;&#x6B65;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8D85;&#x8FC7;20ms&#x89E6;&#x53D1;&#x8D85;&#x65F6;&#x4E86;&#xFF0C;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x8FD8;&#x662F;&#x4F1A;&#x4E0D;&#x65AD;&#x7684;&#x91CD;&#x8BD5;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x8FD9;&#x663E;&#x7136;&#x9020;&#x6210;&#x4E86;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x7528;&#x6027;&#x6BD4;&#x8F83;&#x4F4E;  </p>
<p>&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x90FD;&#x4F1A;&#x5728;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x8BF7;&#x6C42;&#x65F6;&#x5EF6;&#x4E4B;&#x95F4;&#x505A;&#x4E00;&#x4E2A;balance</p>
<p>&#x4F8B;&#x5982;&#xFF1A;&#x5F53;&#x540C;&#x6B65;&#x8D85;&#x8FC7;&#x4E94;&#x6B21;&#x4E4B;&#x540E;&#xFF0C;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x6545;&#x969C;&#xFF0C;&#x9009;&#x62E9;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x53EF;&#x4EE5;&#x6D88;&#x9664;&#x5199;&#x65F6;&#x7684;&#x957F;&#x5C3E;&#x6296;&#x52A8;&#xFF0C;&#x540C;&#x65F6;&#x7ED9;&#x8282;&#x70B9;&#x6253;&#x4E0A;&#x6545;&#x969C;&#x6807;&#x7B7E;&#xFF0C;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x5904;&#x7406;</p>
<h3 id="BASE&#x6A21;&#x578B;"><a href="#BASE&#x6A21;&#x578B;" class="headerlink" title="BASE&#x6A21;&#x578B;"></a>BASE&#x6A21;&#x578B;</h3><p>base&#x6A21;&#x578B;&#x662F;Basically Avaliable(&#x57FA;&#x672C;&#x53EF;&#x7528;)&#x3001;Soft State&#xFF08;&#x8F6F;&#x72B6;&#x6001;&#xFF09;&#x3001;Eventually Consistent&#xFF08;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF09;&#x4E09;&#x4E2A;&#x77ED;&#x8BED;&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x5982;&#x4E0B;</p>
<p>&#x5373;&#x4F7F;&#x65E0;&#x6CD5;&#x505A;&#x5230;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A;&#x5E94;&#x7528;&#x90FD;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x81EA;&#x8EAB;&#x7684;&#x4E1A;&#x52A1;&#x7279;&#x70B9;&#xFF0C;&#x91C7;&#x7528;&#x9002;&#x5F53;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x4F7F;&#x7CFB;&#x7EDF;&#x8FBE;&#x5230;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x5BF9;&#x5E94;&#x5230;CAP&#x4E2D;&#x7684;&#x6982;&#x5FF5;&#xFF0C;<strong>&#x5C31;&#x662F;&#x727A;&#x7272;C&#xFF0C;&#x6765;&#x4FDD;&#x8BC1;AP&#x7684;&#x6EE1;&#x8DB3;</strong>&#xFF0C;&#x8FD9;&#x662F;&#x5BF9;&#x4F20;&#x7EDF;ACID&#x6A21;&#x578B;&#x7684;&#x53D6;&#x820D;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x4E0E;&#x5B58;&#x50A8;&#x76F8;&#x5173;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#x5206;&#x5E03;&#x5F0F;&#x7F13;&#x5B58;&#x3001;&#x5206;&#x5E03;&#x5F0F;&#x5B58;&#x50A8;&#x7B49;&#x7B49;&#x3002;</p>
<p>BA&#xFF1A;&#x57FA;&#x672C;&#x53EF;&#x7528;&#x6307;&#x7684;&#x662F;&#x5F53;&#x7CFB;&#x7EDF;&#x51FA;&#x73B0;&#x4E86;&#x4E0D;&#x53EF;&#x9884;&#x77E5;&#x7684;&#x6545;&#x969C;&#xFF0C;&#x7CFB;&#x7EDF;&#x4F9D;&#x65E7;&#x53EF;&#x7528;&#xFF0C;&#x4E0D;&#x8FC7;&#x53EF;&#x7528;&#x5EA6;&#x4E5F;&#x8BB8;&#x4F1A;&#x964D;&#x4F4E;&#xFF0C;&#x6BD4;&#x5982;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x4E0A;&#x51FA;&#x73B0;&#x635F;&#x5931;&#xFF0C;&#x529F;&#x80FD;&#x4E0A;&#x53EA;&#x80FD;&#x6EE1;&#x8DB3;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x7B49;&#x7B49;</p>
<p>S&#xFF1A;&#x57FA;&#x4E8E;&#x539F;&#x5B50;&#x6027;&#x800C;&#x8A00;&#x7684;&#x8BDD;&#xFF0C;&#x5F53;&#x8981;&#x6C42;&#x591A;&#x4E2A;&#x8282;&#x70B9;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x8BA4;&#x4E3A;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x300E;&#x786C;&#x300F;&#x72B6;&#x6001;&#xFF0C;&#x800C;&#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5B58;&#x5728;&#x4E2D;&#x95F4;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x8BA4;&#x4E3A;&#x5176;&#x4E0D;&#x5F71;&#x54CD;&#x7CFB;&#x7EDF;&#x7684;&#x6574;&#x4F53;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5373;&#x5141;&#x8BB8;&#x7CFB;&#x7EDF;&#x5728;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#x7684;&#x6570;&#x636E;&#x526F;&#x672C;&#x5B58;&#x5728;&#x6570;&#x636E;&#x65F6;&#x5EF6;</p>
<p>E&#xFF1A;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x7CFB;&#x7EDF;&#x4E0D;&#x53EF;&#x80FD;&#x4E00;&#x76F4;&#x90FD;&#x5904;&#x4E8E;&#x4E00;&#x4E2A;&#x8F6F;&#x72B6;&#x6001;&#x4E2D;&#xFF0C;&#x5FC5;&#x987B;&#x6709;&#x4E2A;&#x65F6;&#x95F4;&#x671F;&#x9650;&#x3002;&#x5728;&#x671F;&#x9650;&#x8FC7;&#x540E;&#xFF0C;&#x5E94;&#x8BE5;&#x4FDD;&#x8BC1;&#x6240;&#x6709;&#x526F;&#x672C;&#x4FDD;&#x6301;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x6570;&#x636E;&#x7684;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x671F;&#x9650;&#x53D6;&#x51B3;&#x4E8E;&#x65F6;&#x5EF6;&#x3001;&#x8D1F;&#x8F7D;&#x3001;&#x65B9;&#x6848;&#x7B49;&#x7B49;</p>
<p>&#x5728;&#x5DE5;&#x7A0B;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x6709;&#x8FD9;&#x4E48;&#x51E0;&#x79CD;&#x6700;&#x7EC8;&#x4E00;&#x81F4;&#x6027;&#x7684;&#x5B9E;&#x73B0;&#x7B56;&#x7565;&#xFF0C;&#x901A;&#x5E38;&#x90FD;&#x662F;&#x591A;&#x79CD;&#x7B56;&#x7565;&#x6DF7;&#x5408;&#x5B9E;&#x73B0;</p>
<ul>
<li>&#x56E0;&#x679C;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x5982;&#x679C;&#x8282;&#x70B9;A&#x5728;&#x66F4;&#x65B0;&#x5B8C;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x540E;&#x901A;&#x77E5;&#x4E86;&#x8282;&#x70B9;B&#xFF0C;&#x90A3;&#x4E48;&#x8282;&#x70B9;B&#x4E4B;&#x540E;&#x5BF9;&#x8BE5;&#x6570;&#x636E;&#x7684;&#x8BBF;&#x95EE;&#x548C;&#x4FEE;&#x6539;&#x90FD;&#x662F;&#x57FA;&#x4E8E;A&#x66F4;&#x65B0;&#x540E;&#x7684;&#x503C;&#x3002;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x4E0E;&#x8282;&#x70B9;A&#x65E0;&#x56E0;&#x679C;&#x5173;&#x7CFB;&#x7684;&#x8282;&#x70B9;C&#x7684;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x6CA1;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x9650;&#x5236;</li>
<li>&#x8BFB;&#x5DF2;&#x77E5;&#x6240;&#x5199;&#xFF1A;&#x8282;&#x70B9;A&#x66F4;&#x65B0;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x4E4B;&#x540E;&#xFF0C;&#x81EA;&#x8EAB;&#x603B;&#x662F;&#x80FD;&#x8BBF;&#x95EE;&#x5230;&#x66F4;&#x65B0;&#x8FC7;&#x7684;&#x6700;&#x65B0;&#x503C;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x8BBF;&#x95EE;&#x65E7;&#x503C;</li>
<li>&#x4F1A;&#x8BDD;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x5C06;&#x5BF9;&#x7CFB;&#x7EDF;&#x6570;&#x636E;&#x7684;&#x8BBF;&#x95EE;&#x8FC7;&#x7A0B;&#x6846;&#x5B9A;&#x5728;&#x4E86;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;&#x5F53;&#x4E2D;&#xFF0C;&#x7CFB;&#x7EDF;&#x80FD;&#x4FDD;&#x8BC1;&#x540C;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x4F1A;&#x8BDD;&#x4E2D;&#x5B9E;&#x73B0;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;&#x4E2D;&#x8BFB;&#x53D6;&#x5230;&#x8BE5;&#x6570;&#x636E;&#x9879;&#x6C38;&#x8FDC;&#x662F;&#x6700;&#x65B0;&#x503C;</li>
<li>&#x5355;&#x8C03;&#x8BFB;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x4ECE;&#x7CFB;&#x7EDF;&#x4E2D;&#x8BFB;&#x53D6;&#x51FA;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x9879;&#x7684;&#x67D0;&#x4E2A;&#x503C;&#x4E4B;&#x540E;&#xFF0C;&#x90A3;&#x4E48;&#x7CFB;&#x7EDF;&#x5BF9;&#x4E8E;&#x8BE5;&#x8282;&#x70B9;&#x540E;&#x7EED;&#x7684;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x90FD;&#x4E0D;&#x8BE5;&#x8FD4;&#x56DE;&#x66F4;&#x65E7;&#x7684;&#x503C;</li>
<li>&#x5355;&#x8C03;&#x5199;&#x4E00;&#x81F4;&#x6027;&#xFF1A;&#x4E00;&#x4E2A;&#x7CFB;&#x7EDF;&#x8981;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x6765;&#x81EA;&#x540C;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x88AB;&#x987A;&#x5E8F;&#x7684;&#x6267;&#x884C;&#x3002;</li>
</ul>
<h3 id="NWR&#x591A;&#x6570;&#x6D3E;&#x7406;&#x8BBA;"><a href="#NWR&#x591A;&#x6570;&#x6D3E;&#x7406;&#x8BBA;" class="headerlink" title="NWR&#x591A;&#x6570;&#x6D3E;&#x7406;&#x8BBA;"></a>NWR&#x591A;&#x6570;&#x6D3E;&#x7406;&#x8BBA;</h3><p>NWR&#x591A;&#x6570;&#x6D3E;&#x7406;&#x8BBA;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x5171;&#x8BC6;&#x548C;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x7684;&#x57FA;&#x7840;&#xFF0C;&#x53EA;&#x6709;&#x7406;&#x89E3;&#x4E86;NWR&#x624D;&#x80FD;&#x7406;&#x89E3;<code>Raft</code>&#x3001;<code>Paxos</code>&#x3001;<code>Gossip</code>&#x8FD9;&#x4E9B;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x3002;&#x8FD9;&#x4E2A;&#x7406;&#x8BBA;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E00;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#xFF0C;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#x4E8E;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x53EF;&#x9760;&#x6027;&#xFF0C;&#x4EE5;&#x53CA;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x7528;&#x6027;&#x3002;</p>
<p>&#x5B83;&#x6307;&#x7684;&#x662F;&#xFF1A;<strong>&#x5728;&#x591A;&#x6570;&#x526F;&#x672C;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x4E2D;&#xFF0C;&#x53EA;&#x6709;&#x5927;&#x591A;&#x6570;&#x526F;&#x672C;&#x786E;&#x8BA4;&#x4E86;&#x67D0;&#x4E2A;&#x64CD;&#x4F5C;&#xFF0C;&#x624D;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;</strong>&#x3002;</p>
<p>NWR&#x4E2D;N&#x4EE3;&#x8868;&#x7684;&#x662F;&#x526F;&#x672C;&#x6570;&#x91CF;&#xFF0C;W&#x4EE3;&#x8868;&#x5199;&#x5165;&#x7684;&#x526F;&#x672C;&#x6570;&#x91CF;&#xFF0C;R&#x5219;&#x4E3A;&#x8BFB;&#x53D6;&#x7684;&#x526F;&#x672C;&#x6570;&#x91CF;&#x3002;&#x5728;&#x591A;&#x6570;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x6A21;&#x578B;&#x4E2D;&#xFF0C;&#x4E00;&#x822C;&#x8981;&#x6C42;W+R&gt;N&#xFF0C;&#x4EE5;&#x4FDD;&#x8BC1;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;&#x540C;&#x6837;&#x7684;&#xFF0C;NWR&#x4E5F;&#x6709;&#x7740;&#x4E09;&#x4E2A;&#x9636;&#x6BB5;&#x3002;</p>
<ul>
<li>Negotiation&#xFF08;&#x534F;&#x5546;&#xFF09;&#xFF1A;&#x6240;&#x6709;&#x8282;&#x70B9;&#x901A;&#x8FC7;&#x76F8;&#x4E92;&#x901A;&#x4FE1;&#x6765;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#x6027;&#x51B3;&#x7B56;&#xFF0C;&#x5728;&#x534F;&#x5546;&#x9636;&#x6BB5;&#xFF0C;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x9700;&#x8981;&#x540C;&#x6B65;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#x3002;</li>
<li>Write&#xFF08;&#x5199;&#x5165;&#xFF09;&#xFF1A;&#x51B3;&#x7B56;&#x88AB;&#x8F6C;&#x5316;&#x4E3A;&#x5B9E;&#x9645;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x3002;</li>
<li>Read&#xFF08;&#x8BFB;&#x53D6;&#xFF09;&#xFF1A;&#x8282;&#x70B9;&#x8BFB;&#x53D6;&#x5176;&#x4ED6;&#x8282;&#x70B9;&#x7684;&#x503C;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x534F;&#x5546;&#x9636;&#x6BB5;&#x7684;&#x51B3;&#x7B56;&#x548C;&#x5199;&#x5165;&#x9636;&#x6BB5;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x8BFB;&#x4E00;&#x5B9A;&#x662F;&#x8BFB;&#x7684;&#x6700;&#x65B0;&#x503C;&#x3002;</li>
</ul>
<p>&#x5728;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x6709;W&#x4E2A;&#x526F;&#x672C;&#x88AB;&#x6210;&#x529F;&#x5199;&#x5165;&#x624D;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x5728;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x53EA;&#x6709;R&#x4E2A;&#x526F;&#x672C;&#x6210;&#x529F;&#x8FD4;&#x56DE;&#x76F8;&#x540C;&#x7684;&#x6570;&#x636E;&#x624D;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x53EA;&#x8981;&#x5927;&#x591A;&#x6570;&#x526F;&#x672C;&#x6210;&#x529F;&#x786E;&#x8BA4;&#x4E86;&#x64CD;&#x4F5C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x3002;</p>
<p>NWR&#x5728;&#x73B0;&#x6709;&#x7EC4;&#x4EF6;&#x7684;&#x5E94;&#x7528;&#x8FD8;&#x662F;&#x5F88;&#x5E7F;&#x6CDB;&#x7684;&#xFF0C;&#x6BD4;&#x5982;Raft&#x9009;&#x4E3B;&#x5224;&#x65AD;&#x903B;&#x8F91;&#x4E3A;&#x6295;&#x7968;&#x6570;&#x91CF;&gt;=n/2&#x5219;&#x6210;&#x529F;&#x9009;&#x4E3B;&#xFF0C;&#x6BD4;&#x5982;Redis&#x7684;&#x54E8;&#x5175;&#x673A;&#x5236;&#xFF0C;&#x6709;&#x54E8;&#x5175;&#x6807;&#x8BB0;&#x4E0B;&#x7EBF;&#x5219;&#x4E3A;&#x4E3B;&#x89C2;&#x4E0B;&#x7EBF;&#xFF0C;&gt;=n/2&#x6807;&#x8BB0;&#x4E0B;&#x7EBF;&#x5219;&#x4E3A;&#x5BA2;&#x89C2;&#x4E0B;&#x7EBF;&#x3002;</p>
<h3 id="&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;"><a href="#&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;" class="headerlink" title="&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;"></a>&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;</h3><p>&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x7528;&#x4E8E;&#x786E;&#x4FDD;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x4E0D;&#x540C;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#x51B3;&#x7B56;&#x7684;&#x7B97;&#x6CD5;&#x3002;&#x8FD9;&#x4E9B;&#x7B97;&#x6CD5;&#x81F4;&#x529B;&#x4E8E;&#x89E3;&#x51B3;&#x7531;&#x4E8E;&#x8282;&#x70B9;&#x6545;&#x969C;&#x3001;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x6216;&#x5E76;&#x53D1;&#x64CD;&#x4F5C;&#x7B49;&#x539F;&#x56E0;&#x5BFC;&#x81F4;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5E38;&#x89C1;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x6709;Raft&#x3001;Paxos&#x3001;Gossip&#x7B49;&#x7B49;&#xFF0C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x6BCF;&#x53F0;&#x8BA1;&#x7B97;&#x673A;&#x90FD;&#x89C6;&#x4E3A;<strong>&#x7B49;&#x540C;&#x7684;&#x8282;&#x70B9;</strong>&#xFF0C;&#x8FD9;&#x548C;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x5B8C;&#x5168;&#x76F8;&#x53CD;&#x3002;</p>
<p>&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x548C;&#x5206;&#x5E03;&#x5F0F;&#x4E00;&#x81F4;&#x6027;&#x7B97;&#x6CD5;&#x7684;&#x76EE;&#x7684;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x672C;&#x8D28;&#x90FD;&#x662F;&#x5C06;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x653E;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#x5904;&#x7406;&#x548C;&#x89E3;&#x51B3;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x73B0;&#x5219;&#x4E0D;&#x4E00;&#x6837;&#x3002;</p>
<ul>
<li>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x4E8B;&#x52A1;&#x4E2D;&#xFF0C;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#x4F1A;&#x88AB;&#x62C6;&#x89E3;&#x6210;&#x591A;&#x4E2A;&#x6B65;&#x9AA4;&#xFF0C;&#x5206;&#x522B;&#x4EA4;&#x7ED9;&#x4E0D;&#x540C;&#x7684;&#x89D2;&#x8272;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5168;&#x90E8;&#x6210;&#x529F;&#x5219;&#x63D0;&#x4EA4;&#xFF0C;&#x4E00;&#x65E6;&#x6709;&#x5931;&#x8D25;&#x5219;&#x56DE;&#x6EDA;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5404;&#x53F8;&#x5176;&#x804C;&#x3002;</li>
<li>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x6BCF;&#x53F0;&#x673A;&#x5668;&#x7684;&#x4F5C;&#x7528;&#x90FD;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x80FD;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x8FDB;&#x884C;&#x5404;&#x4E2A;&#x8282;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#xFF0C;&#x5E76;&#x89E3;&#x51B3;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x7ADE;&#x6001;&#x95EE;&#x9898;&#xFF08;data racing&#xFF09;&#x7B49;&#x7B49;&#x3002;</li>
</ul>
<p>&#x5177;&#x4F53;&#x7B97;&#x6CD5;&#x7684;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#x6211;&#x4EEC;&#x53E6;&#x5F00;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x6765;&#x9610;&#x8FF0;&#x3002;</p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x672C;&#x6587;&#x5411;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x4E86;&#x5E38;&#x89C1;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x57FA;&#x7840;&#x7406;&#x8BBA;&#xFF0C;&#x540E;&#x9762;&#x8FD8;&#x4F1A;&#x5411;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;Raft&#x3001;Paxos&#x3001;Gossip&#x7B49;&#x5206;&#x5E03;&#x5F0F;&#x7B97;&#x6CD5;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/90d61d4ea726c7251690c3a5f470b5d7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322313142922559498.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322313142922559498.html" itemprop="url">面试官：01+02等于多少？我不假思索03,结果直接回</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-10T23:54:57+08:00">
                2024-01-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#x4E0D;&#x5047;&#x601D;&#x7D22;0-3-&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#x4E0D;&#x5047;&#x601D;&#x7D22;0-3-&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#x4E0D;&#x5047;&#x601D;&#x7D22;0.3,&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#x4E0D;&#x5047;&#x601D;&#x7D22;0.3,&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;</h2><p>&#x5173;&#x4E8E;0.1+0.2&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7ECF;&#x5178;&#x7684;&#x95EE;&#x9898;  </p>
<p>&#x4F17;&#x6240;&#x5468;&#x77E5;&#x6570;&#x5B66;&#x4E0A;&#x662F;0.1+0.2&#x662F;&#x7B49;&#x4E8E;0.3&#x7684;&#xFF0C;&#x7136;&#x800C;&#x5728;&#x5927;&#x90E8;&#x5206;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x4E2D;&#x5374;&#x4E0D;&#x7B49;&#x4E8E;0.3  </p>
<p>&#x6211;&#x7B2C;&#x4E00;&#x6B21;&#x77E5;&#x9053;&#x4E5F;&#x662F;&#x96BE;&#x4EE5;&#x7F6E;&#x4FE1;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x5199;&#x4E86;&#x4E0B;&#x56FE;&#x7684;java&#x7A0B;&#x5E8F;&#x6765;&#x9A8C;&#x8BC1;<br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/726a317714851351f7e38bbcffac0ac0ceb566e483b5bf162daad8797ce445cd" alt="0.1+0.2&#xFF01;=0.3"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/bacf360d721a7a9ee704c86de938a26d8f554fb92b7f428176255e56a7c1f6de" alt><br>&#x76F8;&#x4FE1;&#x5927;&#x90E8;&#x5206;&#x5C0F;&#x4F19;&#x4F34;&#x7B2C;&#x4E00;&#x6B21;&#x77E5;&#x9053;&#x8FD9;&#x4E2A;&#x4E8B;&#x5B9E;&#x540E;&#x90FD;&#x4F1A;&#x6000;&#x7591;&#x4EBA;&#x751F;  </p>
<p>&#x96BE;&#x9053;&#x8FD9;&#x4E2A;&#x4E16;&#x754C;&#x662F;&#x5047;&#x7684;&#xFF1F;&#x6211;&#x4EEC;&#x8EAB;&#x5904;&#x5728;&#x695A;&#x95E8;&#x7684;&#x4E16;&#x754C;&#x4E2D;&#xFF1F;&#x663E;&#x7136;&#x4E0D;&#x662F;&#x8FD9;&#x6837;&#x1F602;  </p>
<p>&#x8FD9;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#xFF0C;&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#x5462;&#xFF1F;&#xFF08;<strong>&#x672C;&#x6587;&#x4EE5;JAVA&#x9762;&#x8BD5;&#x4E3A;&#x4F8B;</strong>&#xFF09;  </p>
<p>PS&#xFF1A;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x6709;&#x540D;&#x7684;&#x524D;&#x7AEF;&#x9762;&#x8BD5;&#x9898;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x6B62;&#x662F;JavaScript&#x4E2D;&#xFF0C;  </p>
<p>&#x540E;&#x7AEF;&#x7684;JAVA&#x4EE5;&#x53CA;&#x5927;&#x90E8;&#x5206;&#x522B;&#x7684;&#x8BED;&#x8A00;&#x90FD;&#x6709;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;  </p>
<p>&#xFF08;&#x9898;&#x5916;&#x8BDD;&#xFF1A;  </p>
<p>&#x6211;&#x5BF9;&#x8C61;&#x4E5F;&#x5B66;&#x8BA1;&#x7B97;&#x673A;&#xFF0C;&#x5927;&#x4E8C;&#x7684;&#x65F6;&#x5019;&#x6211;&#x548C;&#x5979;&#x6253;&#x8D4C;java&#x91CC;&#x9762;0.1+0.2&#x4E0D;&#x7B49;&#x4E8E;0.3&#xFF0C;&#x5979;&#x4E0D;&#x4FE1;&#x7ED3;&#x679C;&#x8D4C;&#x8F93;&#x4E86;&#x4EB2;&#x4E86;&#x6211;&#x4E00;&#x4E0B;&#x1F601;&#x1F601;&#x1F601;&#xFF09;</p>
<h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0-3000000000000004"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0-3000000000000004" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0.3000000000000004"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0.3000000000000004</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0-3&#xFF1F;&#x6211;&#xFF1A;&#x4E0D;&#x77E5;&#x9053;&#x2026;&#x2026;-&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0-3&#xFF1F;&#x6211;&#xFF1A;&#x4E0D;&#x77E5;&#x9053;&#x2026;&#x2026;-&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0.3&#xFF1F;&#x6211;&#xFF1A;&#x4E0D;&#x77E5;&#x9053;&#x2026;&#x2026; &#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0.3&#xFF1F;&#x6211;&#xFF1A;&#x4E0D;&#x77E5;&#x9053;&#x2026;&#x2026; &#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;</h2><p>&#x8BB8;&#x591A;&#x5F00;&#x53D1;&#x8005;&#x77E5;&#x9053;0.1+0.2==0.3000000000000004  </p>
<p>&#x5374;&#x662F;&#x77E5;&#x5176;&#x7136;&#x4E0D;&#x77E5;&#x5176;&#x6240;&#x4EE5;&#x7136;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x7B80;&#x5355;&#x8BF4;&#x8BF4;&#x4E3A;&#x4EC0;&#x4E48;0.1+0.2&#x4E0D;&#x7B49;&#x4E8E;0.3  </p>
<p>&#x4F17;&#x6240;&#x5468;&#x77E5;&#x8BA1;&#x7B97;&#x673A;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x4E8C;&#x8FDB;&#x5236;  </p>
<p>&#x5341;&#x8FDB;&#x5236;&#x5C0F;&#x6570;&#x8F6C;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x4E00;&#x822C;&#x91C7;&#x7528;&#x201D;&#x4E58;2&#x53D6;&#x6574;&#xFF0C;&#x987A;&#x5E8F;&#x6392;&#x5217;&#x201D;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;0.625&#x8F6C;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#x7684;&#x8868;&#x793A;&#x4E3A;0.101&#x3002;<br>&#x4F46;&#x662F;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x6240;&#x6709;&#x5C0F;&#x6570;&#x90FD;&#x80FD;&#x8F6C;&#x6210;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x5982;0.1&#x5C31;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x8868;&#x793A;&#xFF0C;&#x4ED6;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x662F;0.000110011001100&#x2026; &#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x5C0F;&#x6570;&#x3002;<strong>&#x6240;&#x4EE5;&#xFF0C;&#x8BA1;&#x7B97;&#x673A;&#x662F;&#x6CA1;&#x529E;&#x6CD5;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x7CBE;&#x786E;&#x7684;&#x8868;&#x793A;0.1&#x7684;</strong>  </p>
<p><strong>&#x4EBA;&#x4EEC;&#x60F3;&#x51FA;&#x4E86;&#x4E00;&#x79CD;&#x91C7;&#x7528;&#x4E00;&#x5B9A;&#x7684;&#x7CBE;&#x5EA6;&#xFF0C;&#x4F7F;&#x7528;&#x8FD1;&#x4F3C;&#x503C;&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5C0F;&#x6570;&#x7684;&#x529E;&#x6CD5;&#x3002;&#x8FD9;&#x5C31;&#x662F;IEEE 754</strong>  </p>
<p>IEEE754&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x6D6E;&#x70B9;&#x6570;&#x7531;&#x7B26;&#x53F7;&#x4F4D;&#x3001;&#x5C3E;&#x6570;&#x548C;&#x9636;&#x7801;&#x7EC4;&#x6210;&#x3002;&#x7B26;&#x53F7;&#x4F4D;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x6B63;&#x6570;&#x6216;&#x8D1F;&#x6570;&#xFF0C;&#x5C3E;&#x6570;&#x662F;&#x6709;&#x6548;&#x6570;&#x5B57;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x800C;&#x9636;&#x7801;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x6307;&#x6570;<br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/29cc70ab8d625d5f783b9c019d1875f4cd5bb727de74e1086a9cbfe1b72a8bed" alt="image.png"><br>&#x5341;&#x8FDB;&#x5236;&#x6570;&#x7ECF;IEEE754&#x5B9E;&#x9645;&#x8F6C;&#x6362;&#x5F97;&#x5230;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x8FD1;&#x4F3C;&#x503C;  </p>
<p><strong>&#x800C;Double&#x7C7B;&#x578B;&#x53EA;&#x5B58;&#x50A8;8&#x5B57;&#x8282;&#xFF0C;&#x5373;64&#x4F4D;</strong>&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;  </p>
<p><strong>0.1&#x8F6C;&#x6362;&#x4E3A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;0 01111111011 1001100110011001100110011001100110011001100110011010</span><br></pre></td></tr></table></figure>

<p><strong>0.2&#x8F6C;&#x6362;&#x4E3A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;0 01111111100 1001100110011001100110011001100110011001100110011010</span><br></pre></td></tr></table></figure>

<p>&#x76F8;&#x52A0;&#x5F97;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;0 01111111101 0011001100110011001100110011001100110011001100111010</span><br></pre></td></tr></table></figure>

<p>&#x6545;&#x8F6C;&#x6362;&#x6210;&#x5341;&#x8FDB;&#x5236;&#x5C31;&#x5F97;0.3000000000000004</p>
<h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0-3000000000000004-1"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0-3000000000000004-1" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0.3000000000000004"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0.3000000000000004</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0-3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x5B8C;&#x5168;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0-3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x5B8C;&#x5168;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0.3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x5B8C;&#x5168;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0.3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x5B8C;&#x5168;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5B9E;&#x73B0;0-1-0-2-0-3&#x5417;-&#x6211;&#xFF1A;&#x6211;&#x4E0D;&#x4F1A;&#x6B38;-&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5B9E;&#x73B0;0-1-0-2-0-3&#x5417;-&#x6211;&#xFF1A;&#x6211;&#x4E0D;&#x4F1A;&#x6B38;-&#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5B9E;&#x73B0;0.1+0.2==0.3&#x5417; &#x6211;&#xFF1A;&#x6211;&#x4E0D;&#x4F1A;&#x6B38;.. &#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5B9E;&#x73B0;0.1+0.2==0.3&#x5417; &#x6211;&#xFF1A;&#x6211;&#x4E0D;&#x4F1A;&#x6B38;.. &#x7ED3;&#x679C;&#x76F4;&#x63A5;&#x56DE;&#x5BB6;&#x7B49;&#x901A;&#x77E5;</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0-3000000000000004-2"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0-1-0-2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0-3000000000000004-2" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0.3000000000000004"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;0.1+0.2&#x7B49;&#x4E8E;&#x591A;&#x5C11;&#xFF1F;&#x6211;&#xFF1A;0.3000000000000004</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0-3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0-3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0.3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x662F;0.3&#xFF1F;&#x6211;&#xFF1A;&#x56E0;&#x4E3A;&#x91C7;&#x7528;&#x4E86;IEEE754&#x7801;&#x5236;&#xFF0C;&#x5341;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;&#x65E0;&#x6CD5;&#x7CBE;&#x786E;&#x8F6C;&#x6362;&#x4E3A;&#x4E8C;&#x8FDB;&#x5236;&#x6D6E;&#x70B9;&#x6570;</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5426;&#x5B9E;&#x73B0;0-1-0-2-0-3"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5426;&#x5B9E;&#x73B0;0-1-0-2-0-3" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5426;&#x5B9E;&#x73B0;0.1+0.2==0.3"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x90A3;&#x4F60;&#x80FD;&#x5426;&#x5B9E;&#x73B0;0.1+0.2==0.3</h2><h2 id="&#x6211;&#xFF1A;-0-1-10-0-2-10-10-0-3"><a href="#&#x6211;&#xFF1A;-0-1-10-0-2-10-10-0-3" class="headerlink" title="&#x6211;&#xFF1A;(0.1* 10 + 0.2 *10)/10==0.3"></a>&#x6211;&#xFF1A;(0.1* 10 + 0.2 *10)/10==0.3</h2><p>&#x5176;&#x5B9E;&#x60F3;&#x8981;&#x4F7F;0.1+0.2&#x7B49;&#x4E8E;0.3&#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7684;<br>&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x662F;  </p>
<p><code>(0.1* 10 + 0.2 *10)/10==0.3</code>  </p>
<p>&#x76F4;&#x63A5;&#x4E58;10&#x518D;&#x9664;&#x4EE5;10 &#x5C31;&#x597D;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x4E58;&#x4EE5;10&#x4EE5;&#x540E;&#x5C31;&#x662F;&#x6574;&#x6570;&#x8FD0;&#x7B97;&#x4E86;&#xFF0C;&#x5C31;&#x662F;&#x7CBE;&#x786E;&#x503C;&#x4E86;  </p>
<p>&#x4F46;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x4E2D;&#x5374;&#x5E76;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x529E;&#x6CD5;</p>
<h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4F60;&#x8FD8;&#x4F1A;&#x522B;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x5417;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4F60;&#x8FD8;&#x4F1A;&#x522B;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x5417;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4F60;&#x8FD8;&#x4F1A;&#x522B;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x5417;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4F60;&#x8FD8;&#x4F1A;&#x522B;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x5417;</h2><h2 id="&#x6211;&#xFF1A;&#x4F7F;&#x7528;BigDecimal&#x7C7B;&#x5B58;&#x50A8;0-1&#x548C;0-2&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7528;add&#x65B9;&#x6CD5;&#x76F8;&#x52A0;&#xFF01;"><a href="#&#x6211;&#xFF1A;&#x4F7F;&#x7528;BigDecimal&#x7C7B;&#x5B58;&#x50A8;0-1&#x548C;0-2&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7528;add&#x65B9;&#x6CD5;&#x76F8;&#x52A0;&#xFF01;" class="headerlink" title="&#x6211;&#xFF1A;&#x4F7F;&#x7528;BigDecimal&#x7C7B;&#x5B58;&#x50A8;0.1&#x548C;0.2&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7528;add&#x65B9;&#x6CD5;&#x76F8;&#x52A0;&#xFF01;"></a>&#x6211;&#xFF1A;&#x4F7F;&#x7528;BigDecimal&#x7C7B;&#x5B58;&#x50A8;0.1&#x548C;0.2&#xFF0C;&#x7136;&#x540E;&#x518D;&#x7528;add&#x65B9;&#x6CD5;&#x76F8;&#x52A0;&#xFF01;</h2><h2 id="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E0B;&#x5468;&#x6765;&#x5165;&#x804C;&#x1F91D;&#x1F91D;&#x1F91D;&#xFF01;"><a href="#&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E0B;&#x5468;&#x6765;&#x5165;&#x804C;&#x1F91D;&#x1F91D;&#x1F91D;&#xFF01;" class="headerlink" title="&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E0B;&#x5468;&#x6765;&#x5165;&#x804C;&#x1F91D;&#x1F91D;&#x1F91D;&#xFF01;"></a>&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x4E0B;&#x5468;&#x6765;&#x5165;&#x804C;&#x1F91D;&#x1F91D;&#x1F91D;&#xFF01;</h2><p>&#x9488;&#x5BF9;0.1+0.2&#x95EE;&#x9898;&#xFF0C;java&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;BigDecimal  </p>
<p>BigDecimal &#x662F;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x6D6E;&#x70B9;&#x6570;&#x7684;&#x8FD0;&#x7B97;&#x7684;&#x7C7B;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x4F1A;&#x9020;&#x6210;&#x7CBE;&#x5EA6;&#x4E22;&#x5931;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; import java.math.BigDecimal;</span><br><span class="line"> public class Main{    </span><br><span class="line">     public static void main(String[] args) { </span><br><span class="line">         BigDecimal a = new BigDecimal(&quot;0.1&quot;); </span><br><span class="line">         BigDecimal b = BigDecimal.valueOf(0.2); </span><br><span class="line">         BigDecimal c = a.add(b); </span><br><span class="line">                 System.out.println(c); </span><br><span class="line">     } </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#xFF08;&#x7EC8;&#x4E8E;&#x7B49;&#x4E8E;0.3&#x4E86;&#xFF0C;&#x547C;~&#xFF09;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/195ee8746ca57576f9d6fc3233e28c3a1e063bd204a20d82e536eead18bc5b21" alt><br><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/567db674bd535a73f298598d6e454c8209fa1bb14b3e52101de21684f9595f48" alt><br>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;BigDecimal&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x4EE5;&#x4E0A;&#x6587;&#x5B57;&#x5F15;&#x7528;&#x81EA;&#x300A;&#x963F;&#x91CC;&#x5DF4;&#x5DF4;&#x5F00;&#x53D1;&#x624B;&#x518C;&#x300B;</p>
<p>&#x6709;&#x7684;&#x4EBA;&#x770B;&#x5B8C;&#x4E86;&#x53EF;&#x80FD;&#x4F1A;&#x8BF4;&#xFF0C;&#x5DEE;&#x8FD9;&#x4E48;&#x4E00;&#x70B9;&#x70B9;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#x5462;  </p>
<p>&#x5B9E;&#x9645;&#x4E0A;&#x5982;&#x679C;&#x6D89;&#x53CA;&#x5230;&#x9AD8;&#x9891;&#x91D1;&#x94B1;&#x4EA4;&#x6613;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x70B9;&#x7684;&#x5DEE;&#x8DDD;&#x4E5F;&#x53EF;&#x4EE5;&#x9020;&#x6210;&#x81F4;&#x547D;&#x7684;&#x635F;&#x5931;  </p>
<p>&#x6BD4;&#x5982;&#x67D0;&#x91D1;&#x878D;&#x7CFB;&#x7EDF;&#x53EF;&#x80FD;1&#x5929;&#x4EA4;&#x6613;100&#x4E07;&#x6B21;&#xFF0C;1&#x6B21;&#x635F;&#x5931;1&#x5206;&#x94B1;&#xFF0C;&#x4E00;&#x4E2A;&#x6708;&#x4E0B;&#x6765;&#x635F;&#x5931;&#x5C31;&#x6709;30&#x4E07;&#x4E86;&#xFF01;  </p>
<p>&#x5E0C;&#x671B;&#x5144;&#x5F1F;&#x4EEC;&#x9047;&#x5230;&#x7C7B;&#x4F3C;&#x7684;&#x573A;&#x666F;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;BigDecimal&#x7684;&#x7528;&#x6CD5;,&#x8BB0;&#x5F97;&#x4E0D;&#x8981;&#x76F4;&#x63A5;&#x4F20;&#x53C2;&#x6570;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/72e57e4118015cb9872ac60e265c25f7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7322156759443095561.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7322156759443095561.html" itemprop="url">就是高效，EasyExcel这样写合并单元格 一、引入 二、</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-10T13:51:15+08:00">
                2024-01-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x4E00;&#x3001;&#x5F15;&#x5165;"><a href="#&#x4E00;&#x3001;&#x5F15;&#x5165;" class="headerlink" title="&#x4E00;&#x3001;&#x5F15;&#x5165;"></a>&#x4E00;&#x3001;&#x5F15;&#x5165;</h1><p>&#x901A;&#x8FC7;&#x9605;&#x8BFB;&#x672C;&#x6587;&#xFF0C;&#x4F60;&#x5C06;&#x4E86;&#x89E3;&#x5230;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528;EasyExcel&#x5199;&#x51FA;Excel&#x65F6;&#xFF0C;&#x5982;&#x4F55;&#x4E00;&#x6B65;&#x6B65;&#x63D0;&#x5347;&#x6027;&#x80FD;&#xFF1B;</li>
<li>&#x5199;&#x51FA;&#x6709;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x7684;&#x9875;&#x7B7E;&#x65F6;&#xFF0C;&#x5982;&#x4F55;&#x5728;&#x66F4;&#x77ED;&#x7684;&#x65F6;&#x95F4;&#x5185;&#x5199;&#x51FA;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;</li>
</ul>
<p>&#x5982;&#x679C;&#x4F60;&#x7B2C;&#x4E00;&#x6B21;&#x63A5;&#x89E6;EasyExcel&#xFF0C;&#x53EF;&#x4EE5;&#x5148;&#x8BBF;&#x95EE;&#x5B98;&#x7F51;&#xFF0C;&#x6309;&#x7167;&#x6307;&#x5F15;&#x638C;&#x63E1;EasyExcel&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x9605;&#x8BFB;&#x672C;&#x6587;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x5DF2;&#x7ECF;&#x638C;&#x63E1;&#x4E86;&#x4F7F;&#x7528;EasyExcel&#x8BFB;&#x5199;Excel&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x5199;&#x51FA;&#x6709;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x7684;&#x5927;&#x9875;&#x7B7E;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;</p>
<blockquote>
<p>github&#x5730;&#x5740;&#xFF1A;<a href="/external_links/bb8d2e927c6781b13a3956e55dbf9084.html" target="blank" rel="noopener">github.com/alibaba/eas&#x2026;</a></p>
<p>&#x5B98;&#x65B9;&#x7F51;&#x7AD9;: <a href="/external_links/6fdd660e8ac3b7275d648e49e997f8f2.html" target="blank" rel="noopener">easyexcel.opensource.alibaba.com/</a></p>
<p>&#x8BED;&#x96C0;&#x6587;&#x6863;&#xFF1A;<a href="/external_links/23f75a15799d7beba07bbe68eeb71b93.html" target="blank" rel="noopener">www.yuque.com/easyexcel/d&#x2026;</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x672C;&#x6587;&#x5F15;&#x7528;&#x7684;&#x7248;&#x672C; --&gt;</span><br><span class="line">&lt;dependency&gt;  </span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;  </span><br><span class="line">    &lt;artifactId&gt;easyexcel&lt;/artifactId&gt;  </span><br><span class="line">    &lt;version&gt;3.1.1&lt;/version&gt;  </span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="&#x5047;&#x8BBE;&#x6709;&#x4E2A;&#x9700;&#x6C42;"><a href="#&#x5047;&#x8BBE;&#x6709;&#x4E2A;&#x9700;&#x6C42;" class="headerlink" title="&#x5047;&#x8BBE;&#x6709;&#x4E2A;&#x9700;&#x6C42;"></a>&#x5047;&#x8BBE;&#x6709;&#x4E2A;&#x9700;&#x6C42;</h2><p>&#x5047;&#x8BBE;&#x4F60;&#x6240;&#x5728;&#x7684;&#x516C;&#x53F8;&#x9700;&#x8981;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF1A;&#x5C06;&#x6570;&#x636E;&#x5E93;&#x4E2D;<strong>&#x7968;&#x636E;&#x8868;</strong>&#x5199;&#x51FA;&#x5230;Excel&#x4E2D;&#xFF0C;&#x800C;&#x4E14;&#x60F3;&#x5728;&#x5C3D;&#x53EF;&#x80FD;&#x77ED;&#x7684;&#x65F6;&#x95F4;&#x5185;&#xFF08;&#x5982;30&#x79D2;&#xFF09;&#x5199;&#x51FA;&#x51E0;&#x4E2A;&#x6708;&#x751A;&#x81F3;&#x4E00;&#x5E74;&#x5185;&#x7684;&#x6570;&#x636E;&#xFF08;&#x53EF;&#x80FD;&#x6709;&#x51E0;&#x5341;&#x4E07;&#x3001;&#x4E0A;&#x767E;&#x4E07;&#x6761;&#x8BB0;&#x5F55;&#xFF09;&#xFF0C;&#x4F60;&#x4F1A;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#xFF1F;  </p>
<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x770B;&#x7968;&#x636E;&#x7684;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x6A21;&#x578B;&#xFF1A;&#x7531;&#x4E00;&#x4E2A;&#x5934;&#x4FE1;&#x606F;&#x533A;&#x3001;&#x591A;&#x6761;&#x660E;&#x7EC6;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;&#x5199;&#x51FA;&#x5230;Excel&#x65F6;&#x6837;&#x5F0F;&#x5982;&#x4E0B;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bdbb0fb576f1a3697079ac2c90cefff7948f5b31898d17d6a70baf34b4dff893" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a31943418dedd6bb75c89270f8dbdd256f96cf2240fa63f38335ca62931ec7da" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;import com.alibaba.excel.annotation.ExcelProperty;</span><br><span class="line">import lombok.AllArgsConstructor;</span><br><span class="line">import lombok.Getter;</span><br><span class="line">import lombok.NoArgsConstructor;</span><br><span class="line">import lombok.Setter;</span><br><span class="line"></span><br><span class="line">import java.math.BigDecimal;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x4E00;&#x5F20;&#x7968;&#x636E;&#x4E0B;&#x6709;&#x591A;&#x9879;&#x8D39;&#x7528;&#x79D1;&#x76EE;</span><br><span class="line"> */</span><br><span class="line">@Getter</span><br><span class="line">@Setter</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">public class BillExpenseDetail {</span><br><span class="line">    @ExcelProperty(&quot;&#x7968;&#x636E;&#x7F16;&#x53F7;&quot;)</span><br><span class="line">    private String number;</span><br><span class="line">    @ExcelProperty(&quot;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&quot;)</span><br><span class="line">    private Date createDate;</span><br><span class="line">    @ExcelProperty(&quot;&#x6536;&#x652F;&#x65B9;&#x5411;&quot;)</span><br><span class="line">    private String direction ;</span><br><span class="line">    @ExcelProperty(&quot;&#x603B;&#x91D1;&#x989D;&quot;)</span><br><span class="line">    private BigDecimal totalAmount;</span><br><span class="line"></span><br><span class="line">    @ExcelProperty(&quot;&#x540D;&#x79F0;&#x89C4;&#x683C;&quot;)</span><br><span class="line">    private String subject;</span><br><span class="line">    @ExcelProperty(&quot;&#x5355;&#x4EF7;&quot;)</span><br><span class="line">    private String price;</span><br><span class="line">    @ExcelProperty(&quot;&#x6570;&#x91CF;&quot;)</span><br><span class="line">    private String quantity;</span><br><span class="line">    @ExcelProperty(&quot;&#x5355;&#x4F4D;&quot;)</span><br><span class="line">    private String unit;</span><br><span class="line">    @ExcelProperty(&quot;&#x91D1;&#x989D;&quot;)</span><br><span class="line">    private BigDecimal amount;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h1 id="&#x4E8C;&#x3001;&#x65E0;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x65F6;"><a href="#&#x4E8C;&#x3001;&#x65E0;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x65F6;" class="headerlink" title="&#x4E8C;&#x3001;&#x65E0;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x65F6;"></a>&#x4E8C;&#x3001;&#x65E0;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x65F6;</h1><h2 id="2-1-&#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x5199;&#x51FA;"><a href="#2-1-&#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x5199;&#x51FA;" class="headerlink" title="2.1 &#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x5199;&#x51FA;"></a>2.1 &#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x5199;&#x51FA;</h2><p>&#x4E0D;&#x8003;&#x8651;&#x5355;&#x5143;&#x683C;&#x5408;&#x5E76;&#x65F6;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x4F1A;&#x8FD9;&#x6837;&#x5B9E;&#x73B0;&#xFF1A;&#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x4E00;&#x6B21;&#x6027;&#x5199;&#x51FA;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;  // &#x67E5;&#x8BE2;&#x6240;&#x6709;&#x6570;&#x636E;</span><br><span class="line">  private static List&lt;BillExpenseDetail&gt; queryAll() {</span><br><span class="line">    return new ArrayList&lt;&gt;();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public static void simpleWrite() {</span><br><span class="line">    String fileName = &quot;/bill/simpleWrite.xlsx&quot;;</span><br><span class="line">    try (ExcelWriter excelWriter = EasyExcel.write(fileName, BillExpenseDetail.class).build()) {</span><br><span class="line">      WriteSheet writeSheet = EasyExcel.writerSheet(&quot;&#x7968;&#x636E;&quot;).build();</span><br><span class="line">      excelWriter.write(queryAll(), writeSheet);</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5B9E;&#x73B0;&#x6709;&#x95EE;&#x9898;&#x5417;&#xFF1F;<strong>&#x6570;&#x636E;&#x91CF;&#x8F83;&#x5C11;&#x65F6;&#x6CA1;&#x95EE;&#x9898;</strong>&#x3002;</p>
<p>&#x53EF;&#x662F;&#xFF0C;&#x5F53;&#x4E00;&#x6B21;&#x9700;&#x8981;&#x5199;&#x51FA;&#x7684;&#x6570;&#x636E;&#x6709;&#x6570;&#x4E07;&#x6761;&#x751A;&#x81F3;&#x66F4;&#x591A;&#x65F6;&#xFF0C;<strong>&#x5C06;&#x6240;&#x6709;&#x6570;&#x636E;&#x4E00;&#x6B21;&#x6027;&#x67E5;&#x8BE2;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5F53;&#x6240;&#x6709;&#x6570;&#x636E;&#x5199;&#x51FA;&#x540E;&#xFF0C;&#x624D;&#x80FD;&#x91CA;&#x653E;&#x5185;&#x5B58;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x5F88;&#x5927;&#x7684;&#x5185;&#x5B58;&#x538B;&#x529B;&#xFF0C;&#x751A;&#x81F3;&#x670D;&#x52A1;OOM</strong>&#x3002;  </p>
<p>&#x6709;&#x4EC0;&#x4E48;&#x66F4;&#x597D;&#x7684;&#x529E;&#x6CD5;&#x5417;&#xFF1F;&#x6709;&#x3002;</p>
<h2 id="2-2-&#x5206;&#x9875;&#x67E5;&#x8BE2;&#x5199;&#x51FA;"><a href="#2-2-&#x5206;&#x9875;&#x67E5;&#x8BE2;&#x5199;&#x51FA;" class="headerlink" title="2.2 &#x5206;&#x9875;&#x67E5;&#x8BE2;&#x5199;&#x51FA;"></a>2.2 &#x5206;&#x9875;&#x67E5;&#x8BE2;&#x5199;&#x51FA;</h2><p>EasyExcel&#x652F;&#x6301;&#x91CD;&#x590D;&#x591A;&#x6B21;&#x5199;&#x5355;&#x4E2A;&#x6216;&#x8005;&#x591A;&#x4E2A;Sheet&#x9875;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x591A;&#x6B21;&#x5206;&#x9875;&#x67E5;&#x5E93;&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x5FAA;&#x73AF;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;Excel&#x9875;&#x7B7E;&#x4E2D;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;  // &#x67E5;&#x8BE2;&#x6570;&#x636E;&#x603B;&#x91CF;</span><br><span class="line">  private int count() {</span><br><span class="line">    // &#x5047;&#x8BBE;&#x4E3A;100&#x4E07;</span><br><span class="line">    return 1000000;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // &#x5206;&#x9875;&#x67E5;&#x8BE2;</span><br><span class="line">  private List&lt;BillExpenseDetail&gt; pageQuery(int startIndex, int limit) {</span><br><span class="line">    return new ArrayList&lt;&gt;();</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public void repeatedWrite() {</span><br><span class="line">    int count = count();</span><br><span class="line">    int pageSize = 1000;</span><br><span class="line">    int pageCount = count / pageSize;</span><br><span class="line">    pageCount = pageCount * pageSize &lt; count ? pageCount + 1 : pageCount;</span><br><span class="line">    </span><br><span class="line">    String fileName = &quot;/bill/repeatedWrite.xlsx&quot;;</span><br><span class="line">    try (ExcelWriter excelWriter = EasyExcel.write(fileName, BillExpenseDetail.class).build()) {</span><br><span class="line">      // &#x5199;&#x51FA;&#x5230;&#x4E00;&#x4E2A;sheet&#x9875;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#x5728;for&#x5916;&#x9762;&#x521B;&#x5EFA;WriteSheet</span><br><span class="line">      WriteSheet writeSheet = EasyExcel.writerSheet(&quot;&#x7968;&#x636E;&quot;).build();</span><br><span class="line">      // &#x9010;&#x9875;&#x67E5;&#x8BE2;&#xFF0C;&#x8FFD;&#x52A0;&#x5199;&#x51FA;</span><br><span class="line">      for (int i = 0; i &lt; pageCount; i++) {</span><br><span class="line">        List&lt;BillExpenseDetail&gt; detailList = pageQuery(i * pageSize, pageSize);</span><br><span class="line">        excelWriter.write(detailList, writeSheet);</span><br><span class="line">        // help gc</span><br><span class="line">        detailList.clear();</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x73B0;&#x5728;&#xFF0C;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x65F6;&#x5185;&#x5B58;&#x538B;&#x529B;&#x51CF;&#x5C0F;&#x4E86;&#x3002;&#x53EF;&#x662F;&#x7B49;&#x4E0A;&#x7EBF;&#x540E;&#xFF0C;<strong>&#x53D1;&#x73B0;&#x5BFC;&#x51FA;&#x4E00;&#x4E2A;&#x6708;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x9700;&#x8981;10&#x79D2;&#xFF0C;&#x5BFC;&#x51FA;&#x534A;&#x5E74;&#x5185;&#x6570;&#x636E;&#x65F6;&#x53EF;&#x80FD;&#x9700;&#x8981;50&#x79D2;&#x6216;&#x66F4;&#x957F;&#x65F6;&#x95F4;</strong>&#x3002;&#x5982;&#x679C;&#x662F;&#x79BB;&#x7EBF;&#x5BFC;&#x51FA;&#xFF0C;&#x8017;&#x65F6;&#x4E45;&#x70B9;&#x4E5F;&#x80FD;&#x63A5;&#x53D7;&#xFF1B;<strong>&#x5982;&#x679C;&#x662F;&#x5728;&#x7EBF;&#x5BFC;&#x51FA;&#xFF0C;&#x53EF;&#x80FD;&#x63A5;&#x53E3;&#x54CD;&#x5E94;&#x8D85;&#x65F6;</strong>&#x3002;  </p>
<p>&#x6709;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x529E;&#x6CD5;&#x5417;&#xFF1F;</p>
<h2 id="2-3-&#x5E76;&#x53D1;&#x67E5;&#x8BE2;&#x4F9D;&#x6B21;&#x5199;&#x51FA;"><a href="#2-3-&#x5E76;&#x53D1;&#x67E5;&#x8BE2;&#x4F9D;&#x6B21;&#x5199;&#x51FA;" class="headerlink" title="2.3 &#x5E76;&#x53D1;&#x67E5;&#x8BE2;&#x4F9D;&#x6B21;&#x5199;&#x51FA;"></a>2.3 &#x5E76;&#x53D1;&#x67E5;&#x8BE2;&#x4F9D;&#x6B21;&#x5199;&#x51FA;</h2><p><strong>&#x67E5;&#x8BE2;&#x4E00;&#x9875;&#x6570;&#x636E;&#x5199;&#x51FA;&#x540E;&#xFF0C;&#x518D;&#x67E5;&#x8BE2;&#x4E0B;&#x4E00;&#x9875;&#xFF0C;&#x8BFB;&#x4E0E;&#x5199;&#x662F;&#x4E32;&#x884C;&#x7684;</strong>&#x3002;&#x800C;&#x4E14;&#x5206;&#x9875;&#x67E5;&#x8BE2;&#x65F6;&#x9875;&#x7801;&#x8D8A;&#x5927;&#xFF0C;&#x4E00;&#x6B21;&#x67E5;&#x8BE2;&#x8017;&#x65F6;&#x8D8A;&#x4E45;&#x3002;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x80FD;&#x5426;&#x5E76;&#x53D1;&#x67E5;&#x8BE2;&#x540C;&#x65F6;&#x5199;&#x51FA;&#x5462;&#xFF1F;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;  public static final ExecutorService EXECUTOR_SERVICE = Executors.newFixedThreadPool(4);</span><br><span class="line"></span><br><span class="line">  public void repeatedWrite() {</span><br><span class="line">    // &#x5E76;&#x53D1;&#x5206;&#x9875;&#x67E5;&#x8BE2;&#x6570;&#x636E;</span><br><span class="line">    int count = count();</span><br><span class="line">    int pageSize = 1000;</span><br><span class="line">    int pageCount = count / pageSize;</span><br><span class="line">    pageCount = pageCount * pageSize &lt; count ? pageCount + 1 : pageCount;</span><br><span class="line">    List&lt;Future&lt;List&lt;BillExpenseDetail&gt;&gt;&gt; futureList = new ArrayList&lt;&gt;(pageCount);</span><br><span class="line">    for (int i = 0; i &lt; pageCount; i++) {</span><br><span class="line">      int index = i;</span><br><span class="line">      Future&lt;List&lt;BillExpenseDetail&gt;&gt; submit = EXECUTOR_SERVICE.submit(</span><br><span class="line">        () -&gt; pageQuery(index * pageSize, pageSize));</span><br><span class="line">      futureList.add(submit);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    String fileName = &quot;/bill/repeatedWrite.xlsx&quot;;</span><br><span class="line">    try (ExcelWriter excelWriter = EasyExcel.write(fileName, BillExpenseDetail.class).build()) {</span><br><span class="line">      // &#x5199;&#x51FA;&#x5230;&#x4E00;&#x4E2A;sheet&#x9875;&#x4E2D;</span><br><span class="line">      WriteSheet writeSheet = EasyExcel.writerSheet(&quot;&#x7968;&#x636E;&quot;).build();</span><br><span class="line">      // &#x8FFD;&#x52A0;&#x5199;</span><br><span class="line">      for (Future&lt;List&lt;BillExpenseDetail&gt;&gt; future : futureList) {</span><br><span class="line">        try {</span><br><span class="line">          List&lt;BillExpenseDetail&gt; detailList = future.get();</span><br><span class="line">          excelWriter.write(detailList, writeSheet);</span><br><span class="line">          // help gc</span><br><span class="line">          detailList.clear();</span><br><span class="line">        } catch (InterruptedException | ExecutionException e) {</span><br><span class="line">          throw new RuntimeException(e);</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<h1 id="&#x4E09;&#x3001;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x5199;&#x51FA;Excel"><a href="#&#x4E09;&#x3001;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x5199;&#x51FA;Excel" class="headerlink" title="&#x4E09;&#x3001;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x5199;&#x51FA;Excel"></a>&#x4E09;&#x3001;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x5199;&#x51FA;Excel</h1><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x8003;&#x8651;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x3002;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;&#x7968;&#x636E;&#x6709;&#x591A;&#x4E2A;&#x660E;&#x7EC6;&#x884C;&#xFF08;&#x6570;&#x91CF;&#x4E0D;&#x786E;&#x5B9A;&#xFF09;&#xFF0C;&#x5BFC;&#x51FA;Excel&#x65F6;&#x8981;&#x5C06;&#x201C;&#x7968;&#x636E;&#x7F16;&#x53F7;&#x201D;&#x3001;&#x201C;&#x521B;&#x5EFA;&#x65F6;&#x95F4;&#x201D;&#x7B49;&#x5217;&#x8DE8;&#x884C;&#x5408;&#x5E76;&#x3002;&#x8BE5;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;</p>
<h2 id="3-1-EasyExcel&#x4E2D;&#x5B9E;&#x73B0;"><a href="#3-1-EasyExcel&#x4E2D;&#x5B9E;&#x73B0;" class="headerlink" title="3.1 EasyExcel&#x4E2D;&#x5B9E;&#x73B0;"></a>3.1 EasyExcel&#x4E2D;&#x5B9E;&#x73B0;</h2><p>EasyExcel&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x521B;&#x5EFA;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x7684;&#x6CE8;&#x89E3;&#xFF0C;&#x4EE5;&#x53CA;&#x4E0E;&#x6CE8;&#x89E3;&#x7B49;&#x6548;&#x7684;WriteHandler&#x63A5;&#x53E3;&#x5B9E;&#x73B0;&#x3002;&#x5B9A;&#x4E49;&#x4E0B;&#x9762;&#x7684;&#x6570;&#x636E;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BD5;&#x7528;&#x4E00;&#x4E0B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Getter</span><br><span class="line">@Setter</span><br><span class="line">public class DemoMergeData {</span><br><span class="line">    @ExcelProperty(&quot;&#x5B57;&#x7B26;&#x4E32;&quot;)</span><br><span class="line">    private String string;</span><br><span class="line">    @ExcelProperty(&quot;&#x65E5;&#x671F;&quot;)</span><br><span class="line">    private Date date;</span><br><span class="line">    @ExcelProperty(&quot;&#x6570;&#x5B57;&quot;)</span><br><span class="line">    private Double doubleData;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="3-1-1-ContentLoopMerge"><a href="#3-1-1-ContentLoopMerge" class="headerlink" title="3.1.1 @ContentLoopMerge"></a>3.1.1 @ContentLoopMerge</h3><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/b566a9295570eeaf409d62228e49a89c88226da646b472901ef9fa2c849551fc" alt="image.png"></p>
<p>&#x5148;&#x4E0D;&#x4F7F;&#x7528;@ContentLoopMerge&#xFF0C;&#x751F;&#x6210;&#x7684;Excel&#x5982;&#x4E0B;&#xFF1A;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e1c5faac64dd7b42bacd9d209ab9ba1301da7bfd6d87d7ed849b0160022ad26e" alt="image.png"></p>
<p>&#x5BF9;&#x7B2C;&#x4E00;&#x5217;&#x4F7F;&#x7528;@ContentLoopMerge&#x540E;&#xFF0C;&#x751F;&#x6210;&#x7684;Excel&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;    // &#x6BCF;&#x4E24;&#x884C;&#x5408;&#x5E76;&#x4E00;&#x6B21;&#xFF0C;&#x8DE8;&#x4E24;&#x5217;</span><br><span class="line">    @ContentLoopMerge(eachRow = 2, columnExtend = 2)</span><br><span class="line">    @ExcelProperty(&quot;&#x5B57;&#x7B26;&#x4E32;&quot;)</span><br><span class="line">    private String string;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d91610af710c8bf8955a6731f1ac4542a7bfaf16aeba89dd72339366a580df20" alt="image.png">  </p>
<h3 id="3-1-2-OnceAbsoluteMerge"><a href="#3-1-2-OnceAbsoluteMerge" class="headerlink" title="3.1.2 @OnceAbsoluteMerge"></a>3.1.2 @OnceAbsoluteMerge</h3><p>&#x8BE5;&#x6CE8;&#x89E3;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x5408;&#x5E76;&#x533A;&#x57DF;&#x884C;&#x5217;&#x7D22;&#x5F15;&#xFF0C;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5408;&#x5E76;&#x533A;&#x57DF;&#xFF08;&#x4E0D;&#x662F;&#x5FAA;&#x73AF;&#x521B;&#x5EFA;&#xFF09;&#xFF1B;&#x5355;&#x5143;&#x683C;&#x503C;&#x53D6;&#x5DE6;&#x4E0A;&#x89D2;&#x5355;&#x5143;&#x683C;&#x7684;&#x3002;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/7c2e959c78675cf45f0b2623589b02b75cb0196aaf0eea658c25cd2a29525e01" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Getter</span><br><span class="line">@Setter</span><br><span class="line">// &#x5C06;&#x7B2C;2-6&#x884C;&#x7684;2-3&#x5217;&#x5408;&#x5E76;</span><br><span class="line">@OnceAbsoluteMerge(firstRowIndex =1, lastRowIndex = 5, firstColumnIndex = 1, lastColumnIndex = 2)</span><br><span class="line">public class DemoMergeData {</span><br><span class="line">    @ExcelProperty(&quot;&#x5B57;&#x7B26;&#x4E32;&quot;)</span><br><span class="line">    private String string;</span><br><span class="line">    @ExcelProperty(&quot;&#x65E5;&#x671F;&quot;)</span><br><span class="line">    private Date date;</span><br><span class="line">    @ExcelProperty(&quot;&#x6570;&#x5B57;&quot;)</span><br><span class="line">    private Double doubleData;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;  </p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/455588130c644e28835b66e70102bc6a616cde788cd118a5a7a3264b94661746" alt="image.png"></p>
<h3 id="3-1-3-WriteHandler&#x5B9E;&#x73B0;"><a href="#3-1-3-WriteHandler&#x5B9E;&#x73B0;" class="headerlink" title="3.1.3 WriteHandler&#x5B9E;&#x73B0;"></a>3.1.3 WriteHandler&#x5B9E;&#x73B0;</h3><p>EasyExcel&#x63D0;&#x4F9B;&#x4E86;&#x4E0E;&#x4E0A;&#x9762;&#x4E24;&#x4E2A;&#x6CE8;&#x89E3;&#x7B49;&#x6548;&#x7684;WriteHandler&#x5B9E;&#x73B0;&#xFF0C;&#x5206;&#x522B;&#x662F;<code>OnceAbsoluteMergeStrategy</code>&#x548C;<code>LoopMergeStrategy</code>&#x3002;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public static void mergeWrite() {</span><br><span class="line">  String fileName = &quot;/excel/mergeWrite.xlsx&quot;;</span><br><span class="line">  // &#x5BF9;&#x7B2C;&#x4E00;&#x5217;&#x6BCF;&#x9694;2&#x884C;&#x5408;&#x5E76;&#x4E00;&#x6B21;&#xFF0C;&#x4E0D;&#x8DE8;&#x5217;&#xFF08;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF09;</span><br><span class="line">  LoopMergeStrategy loopMergeStrategy = new LoopMergeStrategy(2, 1, 0);</span><br><span class="line">  // &#x521B;&#x5EFA;&#x5408;&#x5E76;&#x533A;&#xFF1A;&#x5C06;&#x7B2C;2-6&#x884C;&#x7684;2-3&#x5217;&#x5408;&#x5E76;</span><br><span class="line">  OnceAbsoluteMergeStrategy absoluteMergeStrategy = new OnceAbsoluteMergeStrategy(1, 5, 1, 2);</span><br><span class="line">  EasyExcel.write(fileName, DemoMergeData.class)</span><br><span class="line">      .registerWriteHandler(loopMergeStrategy)</span><br><span class="line">      .registerWriteHandler(absoluteMergeStrategy)</span><br><span class="line">      .sheet(&quot;&#x6A21;&#x677F;&quot;)</span><br><span class="line">      .doWrite(data());</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="3-2-&#x81EA;&#x5B9A;&#x4E49;&#x5408;&#x5E76;&#x7B56;&#x7565;"><a href="#3-2-&#x81EA;&#x5B9A;&#x4E49;&#x5408;&#x5E76;&#x7B56;&#x7565;" class="headerlink" title="3.2 &#x81EA;&#x5B9A;&#x4E49;&#x5408;&#x5E76;&#x7B56;&#x7565;"></a>3.2 &#x81EA;&#x5B9A;&#x4E49;&#x5408;&#x5E76;&#x7B56;&#x7565;</h2><h3 id="3-2-1-&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x5E38;&#x89C4;&#x5B9E;&#x73B0;"><a href="#3-2-1-&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x5E38;&#x89C4;&#x5B9E;&#x73B0;" class="headerlink" title="3.2.1 &#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x5E38;&#x89C4;&#x5B9E;&#x73B0;"></a>3.2.1 &#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x5E38;&#x89C4;&#x5B9E;&#x73B0;</h3><p>&#x7968;&#x636E;&#x5BFC;&#x51FA;&#x65F6;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x7968;&#x636E;&#x7684;&#x660E;&#x7EC6;&#x884C;&#x6570;&#x91CF;&#x4E0D;&#x5B9A;&#xFF0C;@ContentLoopMerge&#x5C31;&#x4E0D;&#x9002;&#x7528;&#x4E86;&#x3002;&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x81EA;&#x7136;&#x60F3;&#x5230;&#x53BB;&#x7F51;&#x4E0A;&#x627E;&#x627E;&#x65B9;&#x6848;&#x3002;<br>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x627E;&#x5230;&#x4E86;&#x8FD9;&#x7BC7;&#x535A;&#x5BA2;&#x300A;EasyExcel&#x5BFC;&#x51FA;&#x81EA;&#x5B9A;&#x4E49;&#x5408;&#x5E76;&#x5355;&#x5143;&#x683C;&#x7B56;&#x7565;&#x300B;<code>https://cloud.tencent.com/developer/article/1671316</code>&#x3002;<br>&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF0C;&#x6838;&#x5FC3;&#x903B;&#x8F91;&#x4E3A;&#xFF1A;<br><code>&#x5B9E;&#x73B0;CellWriteHandler&#x63A5;&#x53E3;&#xFF0C;&#x5728;Cell&#x5C42;&#x9762;&#xFF0C;&#x6BCF;&#x5199;&#x4E00;&#x884C;&#x6570;&#x636E;&#xFF0C;&#x5C06;&#x5408;&#x5E76;&#x5217;&#x7684;&#x5355;&#x5143;&#x683C;&#x6570;&#x636E;&#xFF0C;&#x4E0E;&#x4E0A;&#x4E00;&#x884C;&#x7684;&#x5355;&#x5143;&#x683C;&#x6570;&#x636E;&#x6BD4;&#x8F83;&#x3002;&#x5982;&#x679C;&#x6570;&#x636E;&#x76F8;&#x540C;&#xFF0C;&#x5C31;&#x5C06;&#x5F53;&#x524D;&#x884C;&#x4E0E;&#x4E0A;&#x4E00;&#x884C;&#x5408;&#x5E76;&#xFF1B;&#x5982;&#x679C;&#x4E0A;&#x4E00;&#x884C;&#x5DF2;&#x88AB;&#x5408;&#x5E76;&#xFF0C;&#x5219;&#x5C06;&#x5F53;&#x524D;&#x884C;&#x52A0;&#x5165;&#x5230;&#x5408;&#x5E76;&#x533A;&#x3002;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;import com.alibaba.excel.metadata.Head;</span><br><span class="line">import com.alibaba.excel.metadata.data.WriteCellData;</span><br><span class="line">import com.alibaba.excel.write.handler.CellWriteHandler;</span><br><span class="line">import com.alibaba.excel.write.metadata.holder.WriteSheetHolder;</span><br><span class="line">import com.alibaba.excel.write.metadata.holder.WriteTableHolder;</span><br><span class="line">import java.util.List;</span><br><span class="line">import org.apache.poi.ss.usermodel.Cell;</span><br><span class="line">import org.apache.poi.ss.usermodel.CellType;</span><br><span class="line">import org.apache.poi.ss.usermodel.Row;</span><br><span class="line">import org.apache.poi.ss.usermodel.Sheet;</span><br><span class="line">import org.apache.poi.ss.util.CellRangeAddress;</span><br><span class="line"></span><br><span class="line">public class ExcelFillCellMergeStrategy implements CellWriteHandler {</span><br><span class="line"></span><br><span class="line">  // &#x9700;&#x8981;&#x521B;&#x5EFA;&#x5408;&#x5E76;&#x533A;&#x7684;&#x5217;</span><br><span class="line">  private int[] mergeColumnIndex;</span><br><span class="line">  // &#x4ECE;&#x7B2C;&#x51E0;&#x884C;&#x540E;&#x5F00;&#x59CB;&#x5408;&#x5E76;&#xFF0C;&#x53D6;&#x5217;&#x5934;&#x884C;</span><br><span class="line">  private int mergeRowIndex;</span><br><span class="line"></span><br><span class="line">  public ExcelFillCellMergeStrategy() {</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public ExcelFillCellMergeStrategy(int mergeRowIndex, int[] mergeColumnIndex) {</span><br><span class="line">    this.mergeRowIndex = mergeRowIndex;</span><br><span class="line">    this.mergeColumnIndex = mergeColumnIndex;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void beforeCellCreate(WriteSheetHolder writeSheetHolder, WriteTableHolder writeTableHolder, Row row, Head head, Integer columnIndex,</span><br><span class="line">      Integer relativeRowIndex, Boolean isHead) {</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void afterCellCreate(WriteSheetHolder writeSheetHolder, WriteTableHolder writeTableHolder, Cell cell, Head head, Integer relativeRowIndex,</span><br><span class="line">      Boolean isHead) {</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  @Override</span><br><span class="line">  public void afterCellDispose(WriteSheetHolder writeSheetHolder, WriteTableHolder writeTableHolder, List&lt;WriteCellData&lt;?&gt;&gt; list, Cell cell,</span><br><span class="line">      Head head,</span><br><span class="line">      Integer integer, Boolean aBoolean) {</span><br><span class="line">    int curRowIndex = cell.getRowIndex();</span><br><span class="line">    int curColIndex = cell.getColumnIndex();</span><br><span class="line">    if (curRowIndex &gt; mergeRowIndex) {</span><br><span class="line">      for (int i = 0; i &lt; mergeColumnIndex.length; i++) {</span><br><span class="line">        // &#x9700;&#x5408;&#x5E76;&#x7684;&#x5217;</span><br><span class="line">        if (curColIndex == mergeColumnIndex[i]) {</span><br><span class="line">          mergeWithPrevRow(writeSheetHolder, cell, curRowIndex, curColIndex);</span><br><span class="line">          break;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * &#x5F53;&#x524D;&#x5355;&#x5143;&#x683C;&#x5411;&#x4E0A;&#x5408;&#x5E76;</span><br><span class="line">   *</span><br><span class="line">   * @param writeSheetHolder</span><br><span class="line">   * @param cell             &#x5F53;&#x524D;&#x5355;&#x5143;&#x683C;</span><br><span class="line">   * @param curRowIndex      &#x5F53;&#x524D;&#x884C;</span><br><span class="line">   * @param curColIndex      &#x5F53;&#x524D;&#x5217;</span><br><span class="line">   */</span><br><span class="line">  private void mergeWithPrevRow(WriteSheetHolder writeSheetHolder, Cell cell, int curRowIndex, int curColIndex) {</span><br><span class="line">    Object curData = cell.getCellTypeEnum() == CellType.STRING ? cell.getStringCellValue() : cell.getNumericCellValue();</span><br><span class="line">    Cell preCell = cell.getSheet().getRow(curRowIndex - 1).getCell(curColIndex);</span><br><span class="line">    Object preData = preCell.getCellTypeEnum() == CellType.STRING ? preCell.getStringCellValue() : preCell.getNumericCellValue();</span><br><span class="line">    // &#x5C06;&#x5F53;&#x524D;&#x5355;&#x5143;&#x683C;&#x6570;&#x636E;&#x4E0E;&#x4E0A;&#x4E00;&#x4E2A;&#x5355;&#x5143;&#x683C;&#x6570;&#x636E;&#x6BD4;&#x8F83;</span><br><span class="line">    Boolean dataBool = preData.equals(curData);</span><br><span class="line">    //&#x6B64;&#x5904;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF1A;&#x56E0;&#x4E3A;&#x6211;&#x662F;&#x6309;&#x7167;&#x5E8F;&#x53F7;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x9700;&#x8981;&#x5408;&#x5E76;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x83B7;&#x53D6;&#x6BCF;&#x4E00;&#x884C;&#x7B2C;&#x4E00;&#x5217;&#x6570;&#x636E;&#x548C;&#x4E0A;&#x4E00;&#x884C;&#x7B2C;&#x4E00;&#x5217;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x76F8;&#x7B49;&#x5408;&#x5E76;</span><br><span class="line">    Boolean bool = cell.getRow().getCell(0).getNumericCellValue() == cell.getSheet().getRow(curRowIndex - 1).getCell(0).getNumericCellValue();</span><br><span class="line">    if (dataBool &amp;&amp; bool) {</span><br><span class="line">      Sheet sheet = writeSheetHolder.getSheet();</span><br><span class="line">      List&lt;CellRangeAddress&gt; mergeRegions = sheet.getMergedRegions();</span><br><span class="line">      boolean isMerged = false;</span><br><span class="line">      for (int i = 0; i &lt; mergeRegions.size() &amp;&amp; !isMerged; i++) {</span><br><span class="line">        CellRangeAddress cellRangeAddr = mergeRegions.get(i);</span><br><span class="line">        // &#x82E5;&#x4E0A;&#x4E00;&#x4E2A;&#x5355;&#x5143;&#x683C;&#x5DF2;&#x7ECF;&#x88AB;&#x5408;&#x5E76;&#xFF0C;&#x5219;&#x5148;&#x79FB;&#x51FA;&#x539F;&#x6709;&#x7684;&#x5408;&#x5E76;&#x5355;&#x5143;&#xFF0C;&#x518D;&#x91CD;&#x65B0;&#x6DFB;&#x52A0;&#x5408;&#x5E76;&#x5355;&#x5143;</span><br><span class="line">        if (cellRangeAddr.isInRange(curRowIndex - 1, curColIndex)) {</span><br><span class="line">          sheet.removeMergedRegion(i);</span><br><span class="line">          cellRangeAddr.setLastRow(curRowIndex);</span><br><span class="line">          sheet.addMergedRegion(cellRangeAddr);</span><br><span class="line">          isMerged = true;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      // &#x82E5;&#x4E0A;&#x4E00;&#x4E2A;&#x5355;&#x5143;&#x683C;&#x672A;&#x88AB;&#x5408;&#x5E76;&#xFF0C;&#x5219;&#x65B0;&#x589E;&#x5408;&#x5E76;&#x5355;&#x5143;</span><br><span class="line">      if (!isMerged) {</span><br><span class="line">        CellRangeAddress cellRangeAddress = new CellRangeAddress(curRowIndex - 1, curRowIndex, curColIndex, curColIndex);</span><br><span class="line">        sheet.addMergedRegion(cellRangeAddress);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x80FD;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x5BFC;&#x51FA;&#x7968;&#x636E;&#x7684;&#x9700;&#x6C42;&#x5417;&#xFF1F;&#x80FD;&#x3002;&#x4F46;&#x662F;&#x8BD5;&#x7528;&#x540E;&#x5C06;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;<strong>&#x8FD9;&#x4E2A;&#x5B9E;&#x73B0;&#x6027;&#x80FD;&#x4E0D;&#x4F73;</strong>&#xFF1A;</p>
<ul>
<li>&#x6BCF;&#x5199;&#x5165;&#x4E00;&#x4E2A;&#x5355;&#x5143;&#x683C;&#xFF0C;&#x90FD;&#x9700;&#x8981;&#x8BFB;&#x53D6;&#x4E0A;&#x4E00;&#x884C;&#xFF0C;&#x4E00;&#x8FB9;&#x5199;&#x5165;&#x4E00;&#x8FB9;&#x8BFB;&#x53D6;&#xFF1B;</li>
<li>&#x5F53;&#x4E0A;&#x4E00;&#x884C;&#x5DF2;&#x7ECF;&#x5408;&#x5E76;&#x8FC7;&#x4E86;&#xFF0C;&#x672C;&#x6B21;&#x5199;&#x5165;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5408;&#x5E76;&#x533A;&#x57DF;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x53CD;&#x590D;&#x4FEE;&#x6539;&#xFF1B;</li>
<li>&#x6BD4;&#x5982;&#xFF0C;&#x5199;&#x51FA;&#x4E0B;&#x56FE;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x7968;&#x636E;&#xFF0C;&#x5199;&#x51FA;3&#x884C;&#xFF0C;&#x5C06;&#x8BFB;&#x53D6;3&#x6B21;&#xFF0C;&#x4FEE;&#x6539;&#x5408;&#x5E76;&#x533A;&#x57DF;&#x4E24;&#x6B21;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a31943418dedd6bb75c89270f8dbdd256f96cf2240fa63f38335ca62931ec7da" alt="image.png"><br>&#x6B64;&#x5916;&#xFF0C;&#x7F51;&#x4E0A;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;<strong>&#x57FA;&#x4E8E;RowWriteHandler&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x4E5F;&#x5B58;&#x5728;&#x4E0A;&#x9762;&#x6307;&#x51FA;&#x7684;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x3002;</strong></li>
</ul>
<h3 id="3-2-2-&#x6211;&#x7684;&#x5B9E;&#x73B0;"><a href="#3-2-2-&#x6211;&#x7684;&#x5B9E;&#x73B0;" class="headerlink" title="3.2.2 &#x6211;&#x7684;&#x5B9E;&#x73B0;"></a>3.2.2 &#x6211;&#x7684;&#x5B9E;&#x73B0;</h3><p>&#x5F53;&#x6211;&#x4EEC;&#x5206;&#x9875;&#x67E5;&#x8BE2;&#x7968;&#x636E;&#x8BB0;&#x5F55;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x5408;&#x5E76;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x6BCF;&#x7EC4;&#x6570;&#x91CF;&#x5C31;&#x662F;&#x5408;&#x5E76;&#x533A;&#x57DF;&#x5927;&#x5C0F;&#xFF0C;&#x5408;&#x5E76;&#x533A;&#x57DF;&#x4F4D;&#x7F6E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x884C;&#x6570;&#x7D2F;&#x52A0;&#x6765;&#x5B9A;&#x4F4D;&#x3002;&#x56E0;&#x6B64;&#x3002;&#x5199;&#x51FA;Excel&#x524D;&#x5C31;&#x53EF;&#x4EE5;&#x9884;&#x77E5;&#x90A3;&#x4E9B;&#x5408;&#x5E76;&#x533A;&#x57DF;&#x3002;&#x5982;&#x679C;&#x5728;&#x521B;&#x5EFA;sheet&#x9875;&#x65F6;&#x5C31;&#x5C06;&#x8FD9;&#x4E9B;&#x533A;&#x57DF;&#x4E00;&#x5E76;&#x521B;&#x5EFA;&#xFF0C;&#x5199;&#x51FA;&#x65F6;&#x5C31;&#x4E0D;&#x7528;&#x5173;&#x6CE8;&#x5355;&#x5143;&#x683C;&#x5408;&#x5E76;&#x4E86;&#x3002;&#x5C82;&#x4E0D;&#x7F8E;&#x54C9;&#xFF01;  </p>
<p><strong>&#x9884;&#x521B;&#x5EFA;&#x5408;&#x5E76;&#x533A;</strong>&#xFF1A;&#x5B9E;&#x73B0;SheetWriteHandler&#x63A5;&#x53E3;&#xFF0C;&#x91CD;&#x5199;afterSheetCreate()&#xFF0C;&#x5C06;&#x5408;&#x5E76;&#x533A;&#x57DF;&#x52A0;&#x5165;&#x5230;sheet&#x4E2D;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/ea256d5427b530248030aeb06280e7cd3f0a8e9c0898af83eec98da51f32d8bf" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;import com.alibaba.excel.write.handler.SheetWriteHandler;</span><br><span class="line">import com.alibaba.excel.write.metadata.holder.WriteSheetHolder;</span><br><span class="line">import com.alibaba.excel.write.metadata.holder.WriteWorkbookHolder;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.List;</span><br><span class="line">import org.apache.poi.ss.usermodel.Sheet;</span><br><span class="line">import org.apache.poi.ss.util.CellRangeAddress;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x6DFB;&#x52A0;&#x5408;&#x5E76;&#x533A;Handler</span><br><span class="line"> */</span><br><span class="line">public class AddCellRangeWriteHandler implements SheetWriteHandler {</span><br><span class="line"></span><br><span class="line">  private final List&lt;CellRangeAddress&gt; rangeCellList;</span><br><span class="line"></span><br><span class="line">  public AddCellRangeWriteHandler(List&lt;CellRangeAddress&gt; rangeCellList) {</span><br><span class="line">    this.rangeCellList = (rangeCellList == null) ? Collections.emptyList() : rangeCellList;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  public void afterSheetCreate(WriteWorkbookHolder writeWorkbookHolder, WriteSheetHolder writeSheetHolder) {</span><br><span class="line">    Sheet sheet = writeSheetHolder.getSheet();</span><br><span class="line">    for (CellRangeAddress cellRangeAddress : this.rangeCellList) {</span><br><span class="line">      sheet.addMergedRegionUnsafe(cellRangeAddress);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;  public static final ExecutorService EXECUTOR_SERVICE = Executors.newFixedThreadPool(4);</span><br><span class="line"></span><br><span class="line">  public void repeatedWrite() {</span><br><span class="line">    // &#x5E76;&#x53D1;&#x5206;&#x9875;&#x67E5;&#x8BE2;&#x6570;&#x636E;</span><br><span class="line">    int count = count();</span><br><span class="line">    int pageSize = 1000;</span><br><span class="line">    int pageCount = count / pageSize;</span><br><span class="line">    pageCount = pageCount * pageSize &lt; count ? pageCount + 1 : pageCount;</span><br><span class="line">    List&lt;Future&lt;List&lt;BillExpenseDetail&gt;&gt;&gt; futureList = new ArrayList&lt;&gt;(pageCount);</span><br><span class="line">    for (int i = 0; i &lt; pageCount; i++) {</span><br><span class="line">      int index = i;</span><br><span class="line">      Future&lt;List&lt;BillExpenseDetail&gt;&gt; submit = EXECUTOR_SERVICE.submit(</span><br><span class="line">        () -&gt; pageQuery(index * pageSize, pageSize));</span><br><span class="line">      futureList.add(submit);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x8FFD;&#x52A0;&#x5199;</span><br><span class="line">    String fileName = &quot;/bill/repeatedWrite.xlsx&quot;;</span><br><span class="line">    try (ExcelWriter excelWriter = EasyExcel.write(fileName, BillExpenseDetail.class).build()) {</span><br><span class="line">      // &#x884C;&#x8BA1;&#x6570;&#xFF0C;&#x521D;&#x59CB;&#x503C;&#x53D6;&#x5217;&#x5934;&#x884C;&#x6570;</span><br><span class="line">      int lineCount = 1;</span><br><span class="line">      // sheet&#x4E2D;&#x9700;&#x8981;&#x5408;&#x5E76;&#x7684;&#x5217;&#x7684;&#x7D22;&#x5F15;</span><br><span class="line">      final int[] mergeColumnIndex = {0, 1, 2, 3};</span><br><span class="line">      WriteSheet writeSheet;</span><br><span class="line">      for (Future&lt;List&lt;BillExpenseDetail&gt;&gt; future : futureList) {</span><br><span class="line">        try {</span><br><span class="line">          List&lt;BillExpenseDetail&gt; detailList = future.get();</span><br><span class="line">          List&lt;CellRangeAddress&gt; rangeCellList = createCellRange(detailList, mergeColumnIndex, lineCount);</span><br><span class="line">          lineCount += detailList.size();</span><br><span class="line">          // &#x5199;&#x51FA;&#x5230;&#x4E00;&#x4E2A;sheet&#x9875;&#x4E2D;&#xFF0C;sheetName&#x56FA;&#x5B9A;</span><br><span class="line">          writeSheet = EasyExcel.writerSheet(&quot;&#x7968;&#x636E;&quot;).registerWriteHandler(new AddCellRangeWriteHandler(rangeCellList)).build();</span><br><span class="line">          excelWriter.write(detailList, writeSheet);</span><br><span class="line">          // &#x53CA;&#x65F6;&#x91CA;&#x653E;&#x5185;&#x5B58;</span><br><span class="line">          detailList.clear();</span><br><span class="line">        } catch (InterruptedException | ExecutionException e) {</span><br><span class="line">          throw new RuntimeException(e);</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * &#x751F;&#x6210;&#x5408;&#x5E76;&#x533A;</span><br><span class="line">   *</span><br><span class="line">   * @param detailList       &#x7968;&#x636E;</span><br><span class="line">   * @param mergeColumnIndex sheet &#x4E2D;&#x9700;&#x8981;&#x5408;&#x5E76;&#x7684;&#x5217;&#x7684;&#x7D22;&#x5F15;</span><br><span class="line">   * @param lineCount        &#x884C;&#x8BA1;&#x6570;&#xFF08;&#x5305;&#x62EC;&#x5217;&#x5934;&#x884C;&#xFF09;</span><br><span class="line">   * @return &#x5408;&#x5E76;&#x533A;</span><br><span class="line">   */</span><br><span class="line">  private List&lt;CellRangeAddress&gt; createCellRange(List&lt;BillExpenseDetail&gt; detailList, int[] mergeColumnIndex, int lineCount) {</span><br><span class="line">    if (detailList.isEmpty()) {</span><br><span class="line">      return Collections.emptyList();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    List&lt;CellRangeAddress&gt; rangeCellList = new ArrayList&lt;&gt;();</span><br><span class="line">    Map&lt;String, Long&gt; groupMap = detailList.stream().collect(Collectors.groupingBy(BillExpenseDetail::getNumber, Collectors.counting()));</span><br><span class="line">    for (Map.Entry&lt;String, Long&gt; entry : groupMap.entrySet()) {</span><br><span class="line">      int count = entry.getValue().intValue();</span><br><span class="line">      int startRowIndex = lineCount;</span><br><span class="line">      // &#x5982;&#x5408;&#x5E76;&#x7B2C;2&#x5230;4&#x884C;&#xFF0C;&#x5171;3&#x884C;&#xFF0C;&#x884C;&#x7D22;&#x5F15;&#x4ECE;1&#x5230;3</span><br><span class="line">      int endRowIndex = lineCount + count - 1;</span><br><span class="line">      for (int columnIndex : mergeColumnIndex) {</span><br><span class="line">        rangeCellList.add(new CellRangeAddress(startRowIndex, endRowIndex, columnIndex, columnIndex));</span><br><span class="line">      }</span><br><span class="line">      lineCount += count;</span><br><span class="line">    }</span><br><span class="line">    return rangeCellList;</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x8BE5;&#x65B9;&#x5F0F;&#x6211;&#x5DF2;&#x5728;&#x5DE5;&#x4F5C;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x6027;&#x80FD;&#x786E;&#x5B9E;&#x6709;&#x8F83;&#x5927;&#x63D0;&#x5347;&#x3002;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#xFF0C;&#x4E5F;&#x4E0D;&#x59A8;&#x4E00;&#x8BD5;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/0a7524fab9073a6ff819aca38f9b9dcf.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7321779186297929779.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7321779186297929779.html" itemprop="url">面试官：分布式锁最终解决方案是RedLock吗？为什么？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-09T09:49:07+08:00">
                2024-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>RedLock &#x662F; Redis &#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x4E00;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#xFF0C;&#x7531; Redis &#x7684;&#x4F5C;&#x8005; Salvatore Sanfilippo &#x63D0;&#x51FA;&#x3002;</p>
<p>RedLock &#x7B97;&#x6CD5;&#x65E8;&#x5728;&#x89E3;&#x51B3;&#x5355;&#x4E2A; Redis &#x5B9E;&#x4F8B;&#x4F5C;&#x4E3A;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x65F6;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x5355;&#x70B9;&#x6545;&#x969C;&#x95EE;&#x9898;&#xFF0C;&#x901A;&#x8FC7;&#x5728;&#x591A;&#x4E2A;&#x72EC;&#x7ACB;&#x8FD0;&#x884C;&#x7684; Redis &#x5B9E;&#x4F8B;&#x4E0A;&#x540C;&#x65F6;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x63D0;&#x9AD8;&#x9501;&#x670D;&#x52A1;&#x7684;&#x53EF;&#x7528;&#x6027;&#x548C;&#x5B89;&#x5168;&#x6027;&#x3002;</p>
<h2 id="1-&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"><a href="#1-&#x5B9E;&#x73B0;&#x601D;&#x8DEF;" class="headerlink" title="1.&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"></a>1.&#x5B9E;&#x73B0;&#x601D;&#x8DEF;</h2><p>RedLock &#x662F;&#x5BF9;&#x96C6;&#x7FA4;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x591A;&#x6570;&#x8282;&#x70B9;&#xFF08;N/2+1&#xFF09;&#x52A0;&#x9501;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x624D;&#x4F1A;&#x8BA4;&#x4E3A;&#x52A0;&#x9501;&#x6210;&#x529F;&#x3002;<br>&#x8FD9;&#x6837;&#x5373;&#x4F7F;&#x96C6;&#x7FA4;&#x4E2D;&#x6709;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x6302;&#x6389;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5927;&#x90E8;&#x5206;&#x96C6;&#x7FA4;&#x8282;&#x70B9;&#x90FD;&#x52A0;&#x9501;&#x6210;&#x529F;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x8FD8;&#x662F;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x4F7F;&#x7528;&#x7684;&#x3002;</p>
<h2 id="2-&#x5B9E;&#x73B0;&#x4EE3;&#x7801;"><a href="#2-&#x5B9E;&#x73B0;&#x4EE3;&#x7801;" class="headerlink" title="2.&#x5B9E;&#x73B0;&#x4EE3;&#x7801;"></a>2.&#x5B9E;&#x73B0;&#x4EE3;&#x7801;</h2><p>&#x5728; Java &#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Redisson &#x6846;&#x67B6;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x5B9E;&#x73B0; RedLock&#xFF0C;&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;import org.redisson.Redisson;</span><br><span class="line">import org.redisson.api.RedisClient;</span><br><span class="line">import org.redisson.api.RedissonClient;</span><br><span class="line">import org.redisson.config.Config;</span><br><span class="line">import org.redisson.redisson.RedissonRedLock;</span><br><span class="line"></span><br><span class="line">public class RedLockDemo {</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        // &#x521B;&#x5EFA; Redisson &#x5BA2;&#x6237;&#x7AEF;&#x914D;&#x7F6E;</span><br><span class="line">        Config config = new Config();</span><br><span class="line">        config.useClusterServers()</span><br><span class="line">        .addNodeAddress(&quot;redis://127.0.0.1:6379&quot;,</span><br><span class="line">                        &quot;redis://127.0.0.1:6380&quot;,</span><br><span class="line">                        &quot;redis://127.0.0.1:6381&quot;); // &#x5047;&#x8BBE;&#x6709;&#x4E09;&#x4E2A; Redis &#x8282;&#x70B9;</span><br><span class="line">        // &#x521B;&#x5EFA; Redisson &#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x4F8B;</span><br><span class="line">        RedissonClient redissonClient = Redisson.create(config);</span><br><span class="line">        // &#x521B;&#x5EFA; RedLock &#x5BF9;&#x8C61;</span><br><span class="line">        RedissonRedLock redLock = redissonClient.getRedLock(&quot;resource&quot;);</span><br><span class="line">        try {</span><br><span class="line">            // &#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#xFF0C;&#x6700;&#x591A;&#x5C1D;&#x8BD5; 5 &#x79D2;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x5E76;&#x4E14;&#x9501;&#x7684;&#x6709;&#x6548;&#x671F;&#x4E3A; 5000 &#x6BEB;&#x79D2;</span><br><span class="line">            boolean lockAcquired = redLock.tryLock(5, 5000, TimeUnit.MILLISECONDS); </span><br><span class="line">            if (lockAcquired) {</span><br><span class="line">                // &#x52A0;&#x9501;&#x6210;&#x529F;&#xFF0C;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x4EE3;&#x7801;...</span><br><span class="line">            } else {</span><br><span class="line">                System.out.println(&quot;Failed to acquire the lock!&quot;);</span><br><span class="line">            }</span><br><span class="line">        } catch (InterruptedException e) {</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">            System.err.println(&quot;Interrupted while acquiring the lock&quot;);</span><br><span class="line">        } finally {</span><br><span class="line">            // &#x65E0;&#x8BBA;&#x662F;&#x5426;&#x6210;&#x529F;&#x83B7;&#x53D6;&#x5230;&#x9501;&#xFF0C;&#x5728;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7ED3;&#x675F;&#x540E;&#x90FD;&#x8981;&#x91CA;&#x653E;&#x9501;</span><br><span class="line">            if (redLock.isLocked()) {</span><br><span class="line">                redLock.unlock();</span><br><span class="line">            }</span><br><span class="line">            // &#x5173;&#x95ED; Redisson &#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;</span><br><span class="line">            redissonClient.shutdown();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="3-&#x5B9E;&#x73B0;&#x539F;&#x7406;"><a href="#3-&#x5B9E;&#x73B0;&#x539F;&#x7406;" class="headerlink" title="3.&#x5B9E;&#x73B0;&#x539F;&#x7406;"></a>3.&#x5B9E;&#x73B0;&#x539F;&#x7406;</h2><p>Redisson &#x4E2D;&#x7684; RedLock &#x662F;&#x57FA;&#x4E8E; RedissonMultiLock&#xFF08;&#x8054;&#x9501;&#xFF09;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p>RedissonMultiLock &#x662F; Redisson &#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x79CD;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x64CD;&#x4F5C;&#x591A;&#x4E2A;&#x9501;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x5BF9;&#x591A;&#x4E2A;&#x9501;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x7BA1;&#x7406;&#x7684;&#x76EE;&#x7684;&#x3002;&#x8054;&#x9501;&#x7684;&#x64CD;&#x4F5C;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#xFF0C;&#x5373;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x9501;&#x4F4F;&#xFF0C;&#x8981;&#x4E48;&#x5168;&#x90E8;&#x89E3;&#x9501;&#x3002;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x591A;&#x4E2A;&#x9501;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;</p>
<p>RedissonMultiLock &#x4F7F;&#x7528;&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;import org.redisson.Redisson;</span><br><span class="line">import org.redisson.api.RLock;</span><br><span class="line">import org.redisson.api.RedissonClient;</span><br><span class="line">import org.redisson.config.Config;</span><br><span class="line">import org.redisson.multi.MultiLock;</span><br><span class="line"></span><br><span class="line">public class RedissonMultiLockDemo {</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws InterruptedException {</span><br><span class="line">        // &#x521B;&#x5EFA; Redisson &#x5BA2;&#x6237;&#x7AEF;</span><br><span class="line">        Config config = new Config();</span><br><span class="line">        config.useSingleServer().setAddress(&quot;redis://127.0.0.1:6379&quot;);</span><br><span class="line">        RedissonClient redisson = Redisson.create(config);</span><br><span class="line"></span><br><span class="line">        // &#x521B;&#x5EFA;&#x591A;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5B9E;&#x4F8B;</span><br><span class="line">        RLock lock1 = redisson.getLock(&quot;lock1&quot;);</span><br><span class="line">        RLock lock2 = redisson.getLock(&quot;lock2&quot;);</span><br><span class="line">        RLock lock3 = redisson.getLock(&quot;lock3&quot;);</span><br><span class="line"></span><br><span class="line">        // &#x521B;&#x5EFA; RedissonMultiLock &#x5BF9;&#x8C61;</span><br><span class="line">        MultiLock multiLock = new MultiLock(lock1, lock2, lock3);</span><br><span class="line"></span><br><span class="line">        // &#x52A0;&#x9501;</span><br><span class="line">        multiLock.lock();</span><br><span class="line">        try {</span><br><span class="line">            // &#x6267;&#x884C;&#x4EFB;&#x52A1;</span><br><span class="line">            System.out.println(&quot;Lock acquired. Task started.&quot;);</span><br><span class="line">            Thread.sleep(3000);</span><br><span class="line">            System.out.println(&quot;Task finished. Releasing the lock.&quot;);</span><br><span class="line">        } finally {</span><br><span class="line">            // &#x91CA;&#x653E;&#x9501;</span><br><span class="line">            multiLock.unlock();</span><br><span class="line">        }</span><br><span class="line">        // &#x5173;&#x95ED;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;</span><br><span class="line">        redisson.shutdown();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A; Redisson &#x5BA2;&#x6237;&#x7AEF;&#x5E76;&#x8FDE;&#x63A5;&#x5230; Redis &#x670D;&#x52A1;&#x5668;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; redisson.getLock &#x65B9;&#x6CD5;&#x521B;&#x5EFA;&#x4E86;&#x591A;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5B9E;&#x4F8B;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4F20;&#x5165;&#x8FD9;&#x4E9B;&#x9501;&#x5B9E;&#x4F8B;&#x6765;&#x521B;&#x5EFA;&#x4E86; RedissonMultiLock &#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x8BF4;&#x56DE;&#x6B63;&#x9898;&#xFF0C;RedissonRedLock &#x662F;&#x57FA;&#x4E8E; RedissonMultiLock &#x5B9E;&#x73B0;&#x7684;&#x8FD9;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x770B;&#x51FA;&#x3002;</p>
<p>RedissonRedLock &#x7EE7;&#x627F;&#x81EA; RedissonMultiLock&#xFF0C;&#x6838;&#x5FC3;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class RedissonRedLock extends RedissonMultiLock {</span><br><span class="line">    public RedissonRedLock(RLock... locks) {</span><br><span class="line">        super(locks);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x9501;&#x53EF;&#x4EE5;&#x5931;&#x8D25;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x9501;&#x7684;&#x6570;&#x91CF;-&#x9501;&#x6210;&#x529F;&#x5BA2;&#x6237;&#x7AEF;&#x6700;&#x5C0F;&#x7684;&#x6570;&#x91CF;</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    protected int failedLocksLimit() {</span><br><span class="line">        return locks.size() - minLocksAmount(locks);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x9501;&#x7684;&#x6570;&#x91CF; / 2 + 1&#xFF0C;&#x4F8B;&#x5982;&#x6709;3&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x5C11;&#x9700;&#x8981;2&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x9501;&#x6210;&#x529F;</span><br><span class="line">     */</span><br><span class="line">    protected int minLocksAmount(final List&lt;RLock&gt; locks) {</span><br><span class="line">        return locks.size()/2 + 1;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /** </span><br><span class="line">     * &#x8BA1;&#x7B97;&#x591A;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x4E00;&#x8D77;&#x52A0;&#x9501;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x95F4;</span><br><span class="line">     */</span><br><span class="line">    @Override</span><br><span class="line">    protected long calcLockWaitTime(long remainTime) {</span><br><span class="line">        return Math.max(remainTime / locks.size(), 1);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void unlock() {</span><br><span class="line">        unlockInner(locks);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x4E0A;&#x8FF0;&#x6E90;&#x7801;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;Redisson &#x4E2D;&#x7684; RedLock &#x662F;&#x57FA;&#x4E8E; RedissonMultiLock&#xFF08;&#x8054;&#x9501;&#xFF09;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5F53; RedLock &#x662F;&#x5BF9;&#x96C6;&#x7FA4;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x591A;&#x6570;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; N/2+1 &#x4E2A;&#x8282;&#x70B9;&#x52A0;&#x9501;&#x6210;&#x529F;&#xFF0C;&#x5219;&#x8BA4;&#x4E3A; RedLock &#x52A0;&#x9501;&#x6210;&#x529F;&#x3002;</p>
<h2 id="4-&#x5B58;&#x5728;&#x95EE;&#x9898;"><a href="#4-&#x5B58;&#x5728;&#x95EE;&#x9898;" class="headerlink" title="4.&#x5B58;&#x5728;&#x95EE;&#x9898;"></a>4.&#x5B58;&#x5728;&#x95EE;&#x9898;</h2><p>RedLock &#x4E3B;&#x8981;&#x5B58;&#x5728;&#x4EE5;&#x4E0B;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<ol>
<li><strong>&#x6027;&#x80FD;&#x95EE;&#x9898;</strong>&#xFF1A;RedLock &#x8981;&#x7B49;&#x5F85;&#x5927;&#x591A;&#x6570;&#x8282;&#x70B9;&#x8FD4;&#x56DE;&#x4E4B;&#x540E;&#xFF0C;&#x624D;&#x80FD;&#x52A0;&#x9501;&#x6210;&#x529F;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x56E0;&#x4E3A;&#x7F51;&#x7EDC;&#x95EE;&#x9898;&#xFF0C;&#x6216;&#x8282;&#x70B9;&#x8D85;&#x65F6;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5F71;&#x54CD;&#x52A0;&#x9501;&#x7684;&#x6027;&#x80FD;&#x3002;</li>
<li><strong>&#x5E76;&#x53D1;&#x5B89;&#x5168;&#x6027;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5F53;&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x9501;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x9047;&#x5230; GC &#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x52A0;&#x9501;&#x5931;&#x6548;&#xFF0C;&#x4F46; GC &#x540E;&#x8BEF;&#x8BA4;&#x4E3A;&#x52A0;&#x9501;&#x6210;&#x529F;&#x7684;&#x5B89;&#x5168;&#x4E8B;&#x6545;&#xFF0C;&#x4F8B;&#x5982;&#x4EE5;&#x4E0B;&#x6D41;&#x7A0B;&#xFF1A;<ol>
<li>&#x5BA2;&#x6237;&#x7AEF; A &#x8BF7;&#x6C42; 3 &#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x884C;&#x52A0;&#x9501;&#x3002;</li>
<li>&#x5728;&#x8282;&#x70B9;&#x56DE;&#x590D;&#x5904;&#x7406;&#x4E4B;&#x524D;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF; A &#x8FDB;&#x5165; GC &#x9636;&#x6BB5;&#xFF08;&#x5B58;&#x5728; STW&#xFF0C;&#x5168;&#x5C40;&#x505C;&#x987F;&#xFF09;&#x3002;</li>
<li>&#x4E4B;&#x540E;&#x56E0;&#x4E3A;&#x52A0;&#x9501;&#x65F6;&#x95F4;&#x7684;&#x539F;&#x56E0;&#xFF0C;&#x9501;&#x5DF2;&#x7ECF;&#x5931;&#x6548;&#x4E86;&#x3002;</li>
<li>&#x5BA2;&#x6237;&#x7AEF; B &#x8BF7;&#x6C42;&#x52A0;&#x9501;&#xFF08;&#x548C;&#x5BA2;&#x6237;&#x7AEF; A &#x662F;&#x540C;&#x4E00;&#x628A;&#x9501;&#xFF09;&#xFF0C;&#x52A0;&#x9501;&#x6210;&#x529F;&#x3002;</li>
<li>&#x5BA2;&#x6237;&#x7AEF; A GC &#x5B8C;&#x6210;&#xFF0C;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#x524D;&#x9762;&#x8282;&#x70B9;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x8BEF;&#x4EE5;&#x4E3A;&#x52A0;&#x9501;&#x6210;&#x529F;&#x3002;</li>
<li>&#x6B64;&#x65F6;&#x5BA2;&#x6237;&#x7AEF; B &#x548C;&#x5BA2;&#x6237;&#x7AEF; A &#x540C;&#x65F6;&#x52A0;&#x9501;&#x6210;&#x529F;&#xFF0C;&#x51FA;&#x73B0;&#x5E76;&#x53D1;&#x5B89;&#x5168;&#x6027;&#x95EE;&#x9898;&#x3002;</li>
</ol>
</li>
</ol>
<h2 id="5-&#x5DF2;&#x5E9F;&#x5F03;-RedLock"><a href="#5-&#x5DF2;&#x5E9F;&#x5F03;-RedLock" class="headerlink" title="5.&#x5DF2;&#x5E9F;&#x5F03; RedLock"></a>5.&#x5DF2;&#x5E9F;&#x5F03; RedLock</h2><p>&#x56E0;&#x4E3A; RedLock &#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#x4E89;&#x8BAE;&#x8F83;&#x5927;&#xFF0C;&#x4E14;&#x6CA1;&#x6709;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6240;&#x4EE5; Redisson &#x4E2D;&#x5DF2;&#x7ECF;&#x5E9F;&#x5F03;&#x4E86; RedLock&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5728; Redisson &#x5B98;&#x65B9;&#x6587;&#x6863;&#x4E2D;&#x80FD;&#x627E;&#x5230;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/97f11f6296748d62051ff3500db164f3ce7caa45cdf92ecbb7eaf92bc4784467" alt><br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/65dfcfc716985fab49c3a50e9f713dc9dad54d4c687a778ce1861d02d30fc752" alt></p>
<h2 id="6-&#x5E9F;&#x5F03;-RedLock-&#x540E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;"><a href="#6-&#x5E9F;&#x5F03;-RedLock-&#x540E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;" class="headerlink" title="6.&#x5E9F;&#x5F03; RedLock &#x540E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;"></a>6.&#x5E9F;&#x5F03; RedLock &#x540E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;</h2><p>&#x867D;&#x7136; Redisson &#x4E2D;&#x5DF2;&#x7ECF;&#x5E9F;&#x5F03;&#x4E86; RedLock&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; Redisson &#x4E2D;&#x7684;&#x666E;&#x901A;&#x7684;&#x52A0;&#x9501;&#x5373;&#x53EF;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7684;&#x666E;&#x901A;&#x9501;&#x4F1A;&#x57FA;&#x4E8E; wait &#x673A;&#x5236;&#xFF0C;&#x7B49;&#x5F85;&#x9501;&#x5C06;&#x4FE1;&#x606F;&#x540C;&#x6B65;&#x5230;&#x4ECE;&#x8282;&#x70B9;&#xFF0C;&#x4ECE;&#x800C;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x7684;&#xFF0C;&#x867D;&#x7136;&#x4E0D;&#x80FD;&#x5B8C;&#x5168;&#x907F;&#x514D;&#x6570;&#x636E;&#x4E00;&#x81F4;&#x6027;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x4E5F;&#x80FD;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x7684;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#x3002;</p>
<h2 id="&#x8BFE;&#x540E;&#x601D;&#x8003;"><a href="#&#x8BFE;&#x540E;&#x601D;&#x8003;" class="headerlink" title="&#x8BFE;&#x540E;&#x601D;&#x8003;"></a>&#x8BFE;&#x540E;&#x601D;&#x8003;</h2><p>&#x65E2;&#x7136;&#x666E;&#x901A;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x5B58;&#x5728;&#x5355;&#x70B9;&#x95EE;&#x9898;&#xFF1F;&#x800C; RedLock &#x53C8;&#x4E0D;&#x662F;&#x6700;&#x5B8C;&#x7F8E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x9886;&#x57DF;&#xFF0C;&#x8C01;&#x624D;&#x662F;&#x6700;&#x7EC8;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x5462;&#xFF1F;&#x8BF7;&#x5728;&#x8BC4;&#x8BBA;&#x533A;&#x7559;&#x4E0B;&#x60A8;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684;&#x539F;&#x56E0;&#xFF1F;</p>
<blockquote>
<p>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230;&#x6211;&#x7684;&#x9762;&#x8BD5;&#x5C0F;&#x7AD9; <a href="/external_links/ccb86aae47fe3727d8d3523e55161063.html" target="blank" rel="noopener">www.javacn.site</a>&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x5185;&#x5BB9;&#x6709;&#xFF1A;Redis&#x3001;JVM&#x3001;&#x5E76;&#x53D1;&#x3001;&#x5E76;&#x53D1;&#x3001;MySQL&#x3001;Spring&#x3001;Spring MVC&#x3001;Spring Boot&#x3001;Spring Cloud&#x3001;MyBatis&#x3001;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x3001;&#x6D88;&#x606F;&#x961F;&#x5217;&#x7B49;&#x6A21;&#x5757;&#x3002;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a2ea1be2e56cf0f2b4116a50fd06d7bc.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7321779224338448411.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7321779224338448411.html" itemprop="url">Formily JSON Schema 渲染流程及案例浅析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-09T08:00:01+08:00">
                2024-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/3d2b23df56646378c0e22edcd674816caea03310676c62c648791cd35bb1a9b2" alt></p>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>Formily &#x662F;&#x57FA;&#x4E8E; JSON Schema &#x7684;&#x5F3A;&#x5927;&#x8868;&#x5355;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x7075;&#x6D3B;&#x7684;&#x8868;&#x5355;&#x6E32;&#x67D3;&#x548C;&#x6570;&#x636E;&#x7ED1;&#x5B9A;&#x80FD;&#x529B;&#x3002;&#x672C;&#x6587;&#x5C06;&#x63A2;&#x8BA8; Formily JSON Schema &#x6E32;&#x67D3;&#x673A;&#x5236;&#x548C;&#x5B9E;&#x73B0;&#x7EC6;&#x8282;&#xFF0C;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x548C;&#x5E94;&#x7528;&#x8BE5;&#x6280;&#x672F;&#x3002;</p>
<h2 id="&#x4ECB;&#x7ECD;"><a href="#&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4ECB;&#x7ECD;"></a>&#x4ECB;&#x7ECD;</h2><p>Formily &#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E; React &#x7684;&#x9AD8;&#x6027;&#x80FD;&#x8868;&#x5355;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86; JSON Schema&#x3001;JSX Schema&#x3001;&#x7EAF; JSX &#x4E09;&#x79CD;&#x5F00;&#x53D1;&#x6A21;&#x5F0F;&#xFF0C;&#x6765;&#x63CF;&#x8FF0;&#x8868;&#x5355;&#x7ED3;&#x6784;&#x548C;&#x9A8C;&#x8BC1;&#x89C4;&#x5219;&#x3002;</p>
<p>JSON Schema &#x662F;&#x4E00;&#x4E2A;&#x793E;&#x533A;&#x63A8;&#x52A8;&#x7684; JSON &#x6587;&#x4EF6;&#x534F;&#x8BAE;&#xFF0C;&#x7528;&#x4E8E;&#x89C4;&#x8303; JSON &#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x5C5E;&#x6027;&#x548C;&#x7EA6;&#x675F;&#xFF0C;&#x53EF;&#x4EE5;&#x5B8C;&#x6574;&#x5730;&#x63CF;&#x8FF0;&#x4E00;&#x4E2A;&#x8868;&#x5355;&#x7684;&#x5404;&#x4E2A;&#x5B57;&#x6BB5;&#x548C;&#x76F8;&#x5173;&#x89C4;&#x5219;&#x3002;&#x5B83;&#x4E0E;&#x5E73;&#x53F0;&#x65E0;&#x5173;&#xFF0C;&#x53EF;&#x4EE5;&#x63CF;&#x8FF0;&#x4EFB;&#x610F;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x76F8;&#x6BD4; JSX&#xFF0C;JSON Schema &#x7684;&#x63CF;&#x8FF0;&#x683C;&#x5F0F;&#x66F4;&#x52A0;&#x7D27;&#x51D1;&#xFF0C;&#x53EF;&#x8BFB;&#x6027;&#x66F4;&#x597D;&#x3002;JSON Schema &#x5728; JSON &#x7684;&#x683C;&#x5F0F;&#x4E0A;&#xFF0C;&#x52A0;&#x5165;&#x4E86;&#x4E00;&#x4E9B;&#x6807;&#x51C6;&#x5316;&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x4E8E;&#x63CF;&#x8FF0;&#x7ED3;&#x6784;&#x5316;&#x6570;&#x636E;&#x3002;</p>
<h2 id="&#x57FA;&#x672C;&#x6982;&#x5FF5;"><a href="#&#x57FA;&#x672C;&#x6982;&#x5FF5;" class="headerlink" title="&#x57FA;&#x672C;&#x6982;&#x5FF5;"></a>&#x57FA;&#x672C;&#x6982;&#x5FF5;</h2><ul>
<li>&#x89E3;&#x6790; JSON Schema&#xFF1A;Formily &#x89E3;&#x6790;&#x4F20;&#x5165;&#x7684; JSON Schema &#x5BF9;&#x8C61;&#xFF0C;&#x8BC6;&#x522B;&#x5176;&#x4E2D;&#x7684;&#x5B57;&#x6BB5;&#x7C7B;&#x578B;&#x3001;&#x5C5E;&#x6027;&#x3001;&#x6821;&#x9A8C;&#x89C4;&#x5219;&#x7B49;&#x4FE1;&#x606F;&#x3002;&#x5B83;&#x4F1A;&#x6839;&#x636E;&#x5B57;&#x6BB5;&#x7C7B;&#x578B;&#x9009;&#x62E9;&#x76F8;&#x5E94;&#x7684;&#x8868;&#x5355;&#x5B57;&#x6BB5;&#x7EC4;&#x4EF6;&#xFF0C;&#x5E76;&#x5C06;&#x5C5E;&#x6027;&#x548C;&#x6821;&#x9A8C;&#x89C4;&#x5219;&#x5E94;&#x7528;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x7EC4;&#x4EF6;&#x4E0A;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;const rule = (value) =&gt; {</span><br><span class="line">  if (!value?.length) {</span><br><span class="line">    return &apos;&#x8BF7;&#x81F3;&#x5C11;&#x65B0;&#x589E;&#x4E00;&#x4E2A;&apos;;</span><br><span class="line">  }</span><br><span class="line">  return true;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line">const formSchema = {</span><br><span class="line">  type: &apos;array&apos;,</span><br><span class="line">  title: &apos;&#x660E;&#x7EC6;&#x4FE1;&#x606F;&apos;,</span><br><span class="line">  &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">  &apos;x-component&apos;: &apos;ArrayTable&apos;,</span><br><span class="line">  &apos;x-validator&apos;: rule,</span><br><span class="line">  // ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x6784;&#x5EFA;&#x8868;&#x5355;&#x6811;&#xFF1A;Formily &#x6839;&#x636E;&#x89E3;&#x6790;&#x540E;&#x7684; JSON Schema &#x6570;&#x636E;&#x6784;&#x5EFA;&#x8868;&#x5355;&#x6811;&#xFF0C;&#x8868;&#x5355;&#x6811;&#x662F;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#x6811;&#x7ED3;&#x6784;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x8868;&#x5355;&#x5B57;&#x6BB5;&#x6216;&#x8868;&#x5355;&#x7EC4;&#x4EF6;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;import { createForm } from &apos;@formily/core&apos;</span><br><span class="line">import { createSchemaField } from &apos;@formily/react-schema-renderer&apos;</span><br><span class="line"></span><br><span class="line">const form = createForm()</span><br><span class="line">const SchemaField = createSchemaField({</span><br><span class="line">  components: {</span><br><span class="line">    // &#x5B9A;&#x4E49;&#x5404;&#x4E2A;&#x8868;&#x5355;&#x7EC4;&#x4EF6;&#x7684;&#x6E32;&#x67D3;&#x65B9;&#x5F0F;</span><br><span class="line">    FormItem,</span><br><span class="line">    Input,</span><br><span class="line">    Password,</span><br><span class="line">    VerifyCode,</span><br><span class="line">    // ...</span><br><span class="line">  },</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">const formTree = (</span><br><span class="line">  &lt;Form form={form}&gt;</span><br><span class="line">      &lt;SchemaField schema={formSchema} /&gt;</span><br><span class="line">  &lt;/Form&gt;;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8868;&#x5355;&#x6570;&#x636E;&#x7ED1;&#x5B9A;&#xFF1A;Formily &#x901A;&#x8FC7;&#x53CC;&#x5411;&#x7ED1;&#x5B9A;&#x673A;&#x5236;&#x5C06;&#x8868;&#x5355;&#x6570;&#x636E;&#x4E0E;&#x8868;&#x5355;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x5173;&#x8054;&#x3002;&#x5F53;&#x8868;&#x5355;&#x7EC4;&#x4EF6;&#x7684;&#x503C;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x8868;&#x5355;&#x6570;&#x636E;&#x4F1A;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#xFF1B;&#x53CD;&#x4E4B;&#xFF0C;&#x5F53;&#x8868;&#x5355;&#x6570;&#x636E;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x8868;&#x5355;&#x7EC4;&#x4EF6;&#x7684;&#x503C;&#x4E5F;&#x4F1A;&#x66F4;&#x65B0;&#x3002;&#x8FD9;&#x79CD;&#x53CC;&#x5411;&#x7ED1;&#x5B9A;&#x673A;&#x5236;&#x4F7F;&#x5F97;&#x8868;&#x5355;&#x6570;&#x636E;&#x4E0E;&#x754C;&#x9762;&#x4FDD;&#x6301;&#x540C;&#x6B65;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x4FBF;&#x6377;&#x7684;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x80FD;&#x529B;&#x3002;</li>
<li>&#x8868;&#x5355;&#x6821;&#x9A8C;&#x548C;&#x9A8C;&#x8BC1;&#xFF1A;Formily &#x6839;&#x636E; JSON Schema &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x9A8C;&#x8BC1;&#x89C4;&#x5219;&#x5BF9;&#x8868;&#x5355;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6821;&#x9A8C;&#x548C;&#x9A8C;&#x8BC1;&#x3002;&#x5B83;&#x81EA;&#x52A8;&#x6839;&#x636E;&#x5B57;&#x6BB5;&#x7C7B;&#x578B;&#x548C;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x5B9E;&#x65F6;&#x7684;&#x9A8C;&#x8BC1;&#x53CD;&#x9988;&#x3002;</li>
<li>&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x548C;&#x6570;&#x636E;&#x5904;&#x7406;&#xFF1A;&#x4E00;&#x65E6;&#x7528;&#x6237;&#x5B8C;&#x6210;&#x8868;&#x5355;&#x586B;&#x5199;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Formily &#x63D0;&#x4F9B;&#x7684; API &#x83B7;&#x53D6;&#x8868;&#x5355;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x5904;&#x7406;&#xFF0C;&#x4F8B;&#x5982;&#x63D0;&#x4EA4;&#x5230;&#x670D;&#x52A1;&#x5668;&#x6216;&#x8FDB;&#x884C;&#x5176;&#x4ED6;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x64CD;&#x4F5C;&#x3002;Formily &#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#x548C;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x652F;&#x6301;&#x81EA;&#x5B9A;&#x4E49;&#x8868;&#x5355;&#x884C;&#x4E3A;&#x548C;&#x6570;&#x636E;&#x5904;&#x7406;&#x903B;&#x8F91;&#x3002;</li>
</ul>
<h2 id="&#x6E32;&#x67D3;&#x6D41;&#x7A0B;"><a href="#&#x6E32;&#x67D3;&#x6D41;&#x7A0B;" class="headerlink" title="&#x6E32;&#x67D3;&#x6D41;&#x7A0B;"></a>&#x6E32;&#x67D3;&#x6D41;&#x7A0B;</h2><p>&#x5728;&#x6BCF;&#x6B21;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x4F1A;&#x4F7F;&#x7528; <code>createSchemaField</code> &#x6765;&#x58F0;&#x660E;&#x4E00;&#x4E2A; <code>SchemaField</code> &#x6765;&#x88C5;&#x8F7D;&#x6211;&#x4EEC;&#x5199;&#x597D;&#x7684; <code>Schema</code> &#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#x5462;&#xFF1F;<br>&#x90E8;&#x5206;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;export function createSchemaField(options) {</span><br><span class="line">    if (options === void 0) { options = {}; }</span><br><span class="line">    function SchemaField(props) {</span><br><span class="line">        var schema = Schema.isSchemaInstance(props.schema)</span><br><span class="line">            ? props.schema</span><br><span class="line">            : new Schema(__assign({ type: &apos;object&apos; }, props.schema));</span><br><span class="line">        var renderMarkup = function () {</span><br><span class="line">            env.nonameId = 0;</span><br><span class="line">            if (props.schema)</span><br><span class="line">                return null;</span><br><span class="line">            return render(React.createElement(SchemaMarkupContext.Provider, { value: schema }, props.children));</span><br><span class="line">        };</span><br><span class="line">        var renderChildren = function () {</span><br><span class="line">            return React.createElement(RecursionField, __assign({}, props, { schema: schema }));</span><br><span class="line">        };</span><br><span class="line">        return (React.createElement(SchemaOptionsContext.Provider, { value: options },</span><br><span class="line">            React.createElement(SchemaComponentsContext.Provider, { value: lazyMerge(options.components, props.components) },</span><br><span class="line">                React.createElement(ExpressionScope, { value: lazyMerge(options.scope, props.scope) },</span><br><span class="line">                    renderMarkup(),</span><br><span class="line">                    renderChildren()))));</span><br><span class="line">    }</span><br><span class="line">    SchemaField.displayName = &apos;SchemaField&apos;;</span><br><span class="line">    /// ...</span><br><span class="line">    return SchemaField;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4EE3;&#x7801;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5957;&#x4E86;&#x51E0;&#x5C42;&#x201C;&#x58F3;&#x5B50;&#x201D;&#x4E4B;&#x540E;&#xFF0C;&#x4EE3;&#x7801;&#x6700;&#x7EC8;&#x8D70;&#x5411;&#x4E86; <code>renderChildren</code> &#x65B9;&#x6CD5;&#x4E2D;&#x7684; <code>RecursionField</code> &#x3002;</p>
<p>&#x90A3;&#x4E48; <code>RecursionField</code> &#x7A76;&#x7ADF;&#x662F;&#x4E2A;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x5F80;&#x4E0B;&#x770B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;export var RecursionField = function (props) {</span><br><span class="line">    var basePath = useBasePath(props);</span><br><span class="line">    var fieldSchema = useMemo(function () { return new Schema(props.schema); }, [props.schema]);</span><br><span class="line">    var fieldProps = useFieldProps(fieldSchema);</span><br><span class="line">    var renderProperties = function (field) {</span><br><span class="line">        if (props.onlyRenderSelf)</span><br><span class="line">            return;</span><br><span class="line">        var properties = Schema.getOrderProperties(fieldSchema);</span><br><span class="line">        if (!properties.length)</span><br><span class="line">            return;</span><br><span class="line">        return (React.createElement(Fragment, null, properties.map(function (_a, index) {</span><br><span class="line">            var item = _a.schema, name = _a.key;</span><br><span class="line">            var base = (field === null || field === void 0 ? void 0 : field.address) || basePath;</span><br><span class="line">            var schema = item;</span><br><span class="line">            if (isFn(props.mapProperties)) {</span><br><span class="line">                var mapped = props.mapProperties(item, name);</span><br><span class="line">                if (mapped) {</span><br><span class="line">                    schema = mapped;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            if (isFn(props.filterProperties)) {</span><br><span class="line">                if (props.filterProperties(schema, name) === false) {</span><br><span class="line">                    return null;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            return (React.createElement(RecursionField, { schema: schema, key: &quot;&quot;.concat(index, &quot;-&quot;).concat(name), name: name, basePath: base }));</span><br><span class="line">        })));</span><br><span class="line">    };</span><br><span class="line">    var render = function () {</span><br><span class="line">        if (!isValid(props.name))</span><br><span class="line">            return renderProperties();</span><br><span class="line">        if (fieldSchema.type === &apos;object&apos;) {</span><br><span class="line">            if (props.onlyRenderProperties)</span><br><span class="line">                return renderProperties();</span><br><span class="line">            return (React.createElement(ObjectField, __assign({}, fieldProps, { name: props.name, basePath: basePath }), renderProperties));</span><br><span class="line">        }</span><br><span class="line">        else if (fieldSchema.type === &apos;array&apos;) {</span><br><span class="line">            return (React.createElement(ArrayField, __assign({}, fieldProps, { name: props.name, basePath: basePath })));</span><br><span class="line">        }</span><br><span class="line">        else if (fieldSchema.type === &apos;void&apos;) {</span><br><span class="line">            if (props.onlyRenderProperties)</span><br><span class="line">                return renderProperties();</span><br><span class="line">            return (React.createElement(VoidField, __assign({}, fieldProps, { name: props.name, basePath: basePath }), renderProperties));</span><br><span class="line">        }</span><br><span class="line">        return React.createElement(Field, __assign({}, fieldProps, { name: props.name, basePath: basePath }));</span><br><span class="line">    };</span><br><span class="line">    if (!fieldSchema)</span><br><span class="line">        return React.createElement(Fragment, null);</span><br><span class="line">    return (React.createElement(SchemaContext.Provider, { value: fieldSchema }, render()));</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x770B;&#x4F3C;&#x590D;&#x6742;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x5173;&#x6CE8;&#x4E24;&#x70B9;&#xFF1A;</p>
<ol>
<li>&#x5728;&#x7B2C;26&#x884C;&#xFF0C;<code>RecursionField</code> &#x5BF9;&#x81EA;&#x8EAB;&#x8FDB;&#x884C;&#x4E86;&#x9012;&#x5F52;&#x8C03;&#x7528;&#x3002;&#x5176;&#x5B9E;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x5C31;&#x8BF4;&#x660E;&#x4E86; <code>Formily</code> &#x662F;&#x5982;&#x4F55;&#x83B7;&#x53D6; <code>properties</code>&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E; <code>properties</code> &#x7684;&#x5C5E;&#x6027;&#x6765;&#x8FDB;&#x884C;&#x9012;&#x5F52;&#x6E32;&#x67D3;&#x7684;&#x4E86;</li>
<li><code>render</code> &#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684; <code>type</code> &#x4F7F;&#x7528;&#x4E86;&#x4E0D;&#x540C;&#x7684; <code>Field</code> &#x6765;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#x3002;</li>
</ol>
<p>&#x770B;&#x4F3C;&#x8FD9;&#x4E48;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x7684; <code>Field</code>&#xFF0C;&#x5176;&#x5B9E;&#x4ED6;&#x4EEC;&#x90FD;&#x6709;&#x4E2A;&#x76F8;&#x540C;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x91CC;&#x9762;&#x90FD;&#x6E32;&#x67D3;&#x4E86;&#x4E00;&#x5C42; <code>ReactiveField</code>&#x3002;&#x5C31;&#x6BD4;&#x5982; <code>ObjectField</code>&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;export var ObjectField = function (props) {</span><br><span class="line">    var form = useForm();</span><br><span class="line">    var parent = useField();</span><br><span class="line">    var field = useAttach(form.createObjectField(__assign({ basePath: parent === null || parent === void 0 ? void 0 : parent.address }, props)));</span><br><span class="line">    return (React.createElement(FieldContext.Provider, { value: field },</span><br><span class="line">        React.createElement(ReactiveField, { field: field }, props.children)));</span><br><span class="line">};</span><br><span class="line">ObjectField.displayName = &apos;ObjectField&apos;;</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7740;&#x91CD;&#x63D0;&#x5230; <code>ReactiveField</code>&#xFF0C;&#x5B83;&#x6709;&#x4EC0;&#x4E48;&#x9B54;&#x529B;&#x5462;&#xFF1F;</p>
<p>&#x5176;&#x5B9E;<code>ReactiveField</code> &#x624D;&#x662F;&#x6574;&#x4E2A;&#x6E32;&#x67D3;&#x6D41;&#x7A0B;&#x91CC;&#x6700;&#x6700;&#x91CD;&#x8981;&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x7167;&#x60EF;&#x4F8B;&#xFF0C;&#x5148;&#x4E0A;&#x6E90;&#x7801;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;var ReactiveInternal = function (props) {</span><br><span class="line">    var _a;</span><br><span class="line">    var components = useContext(SchemaComponentsContext);</span><br><span class="line">    if (!props.field) {</span><br><span class="line">        return React.createElement(Fragment, null, renderChildren(props.children));</span><br><span class="line">    }</span><br><span class="line">    var field = props.field;</span><br><span class="line">    var content = mergeChildren(renderChildren(props.children, field, field.form), (_a = field.content) !== null &amp;&amp; _a !== void 0 ? _a : field.componentProps.children);</span><br><span class="line">    if (field.display !== &apos;visible&apos;)</span><br><span class="line">        return null;</span><br><span class="line">    var getComponent = function (target) {</span><br><span class="line">        var _a;</span><br><span class="line">        return isValidComponent(target)</span><br><span class="line">            ? target</span><br><span class="line">            : (_a = FormPath.getIn(components, target)) !== null &amp;&amp; _a !== void 0 ? _a : target;</span><br><span class="line">    };</span><br><span class="line">    var renderDecorator = function (children) {</span><br><span class="line">        if (!field.decoratorType) {</span><br><span class="line">            return React.createElement(Fragment, null, children);</span><br><span class="line">        }</span><br><span class="line">        return React.createElement(getComponent(field.decoratorType), toJS(field.decoratorProps), children);</span><br><span class="line">    };</span><br><span class="line">    var renderComponent = function () {</span><br><span class="line">        var _a, _b, _c;</span><br><span class="line">        if (!field.componentType)</span><br><span class="line">            return content;</span><br><span class="line">        // props &#x5185;&#x5BB9;</span><br><span class="line">        var value = !isVoidField(field) ? field.value : undefined;</span><br><span class="line">        var onChange = !isVoidField(field)</span><br><span class="line">            ? function () {</span><br><span class="line">                var _a, _b;</span><br><span class="line">                var args = [];</span><br><span class="line">                for (var _i = 0; _i &lt; arguments.length; _i++) {</span><br><span class="line">                    args[_i] = arguments[_i];</span><br><span class="line">                }</span><br><span class="line">                field.onInput.apply(field, __spreadArray([], __read(args), false));</span><br><span class="line">                (_b = (_a = field.componentProps) === null || _a === void 0 ? void 0 : _a.onChange) === null || _b === void 0 ? void 0 : _b.call.apply(_b, __spreadArray([_a], __read(args), false));</span><br><span class="line">            }</span><br><span class="line">            : (_a = field.componentProps) === null || _a === void 0 ? void 0 : _a.onChange;</span><br><span class="line">        var onFocus = !isVoidField(field)</span><br><span class="line">            ? function () {</span><br><span class="line">                var _a, _b;</span><br><span class="line">                var args = [];</span><br><span class="line">                for (var _i = 0; _i &lt; arguments.length; _i++) {</span><br><span class="line">                    args[_i] = arguments[_i];</span><br><span class="line">                }</span><br><span class="line">                field.onFocus.apply(field, __spreadArray([], __read(args), false));</span><br><span class="line">                (_b = (_a = field.componentProps) === null || _a === void 0 ? void 0 : _a.onFocus) === null || _b === void 0 ? void 0 : _b.call.apply(_b, __spreadArray([_a], __read(args), false));</span><br><span class="line">            }</span><br><span class="line">            : (_b = field.componentProps) === null || _b === void 0 ? void 0 : _b.onFocus;</span><br><span class="line">        var onBlur = !isVoidField(field)</span><br><span class="line">            ? function () {</span><br><span class="line">                var _a, _b;</span><br><span class="line">                var args = [];</span><br><span class="line">                for (var _i = 0; _i &lt; arguments.length; _i++) {</span><br><span class="line">                    args[_i] = arguments[_i];</span><br><span class="line">                }</span><br><span class="line">                field.onBlur.apply(field, __spreadArray([], __read(args), false));</span><br><span class="line">                (_b = (_a = field.componentProps) === null || _a === void 0 ? void 0 : _a.onBlur) === null || _b === void 0 ? void 0 : _b.call.apply(_b, __spreadArray([_a], __read(args), false));</span><br><span class="line">            }</span><br><span class="line">            : (_c = field.componentProps) === null || _c === void 0 ? void 0 : _c.onBlur;</span><br><span class="line">        var disabled = !isVoidField(field)</span><br><span class="line">            ? field.pattern === &apos;disabled&apos; || field.pattern === &apos;readPretty&apos;</span><br><span class="line">            : undefined;</span><br><span class="line">        var readOnly = !isVoidField(field)</span><br><span class="line">            ? field.pattern === &apos;readOnly&apos;</span><br><span class="line">            : undefined;</span><br><span class="line">        return React.createElement(getComponent(field.componentType), __assign(__assign({ disabled: disabled, readOnly: readOnly }, toJS(field.componentProps)), { value: value, onChange: onChange, onFocus: onFocus, onBlur: onBlur }), content);</span><br><span class="line">    };</span><br><span class="line">    return renderDecorator(renderComponent());</span><br><span class="line">};</span><br><span class="line">ReactiveInternal.displayName = &apos;ReactiveField&apos;;</span><br><span class="line">export var ReactiveField = observer(ReactiveInternal, {</span><br><span class="line">    forwardRef: true,</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x7EC4;&#x4EF6;&#x7684;17&#x884C;&#x548C;23&#x884C;&#x7684;&#x65B9;&#x6CD5;&#x91CC;&#xFF0C;&#x5206;&#x522B;&#x53BB;&#x83B7;&#x53D6;&#x4E86;<code>x-decorator</code> &#x548C;<code>x-component</code> &#x6240;&#x5BF9;&#x5E94;&#x7684;&#x7EC4;&#x4EF6;&#x6765;&#x8FDB;&#x884C;&#x6E32;&#x67D3;&#xFF0C;&#x4E24;&#x8005;&#x7A0D;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;<code>x-component</code> &#x7684; <code>props</code> &#x66F4;&#x4E3A;&#x4E30;&#x5BCC;&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x7EC6;&#x8282;&#x70B9;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x7684;&#x7B2C;&#x516B;&#x884C;&#xFF0C;&#x83B7;&#x53D6;&#x5230;&#x4E86;&#x6240;&#x6709;&#x5B50;&#x9879;&#xFF0C;&#x5728;25&#x884C;&#x7684;&#x5224;&#x65AD;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7684;&#x7EC4;&#x4EF6;&#x7C7B;&#x578B;&#x4E3A;&#x6307;&#x5B9A;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x8BA4;&#x4E3A;&#x4ED6;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;UI&#x8282;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x5B83;&#x7684;&#x5B50;&#x9879;&#x8FDB;&#x884C;&#x540E;&#x7EED;&#x7684;&#x89E3;&#x6790;&#x5E76;&#x6E32;&#x67D3;&#x3002;&#x6700;&#x540E;&#xFF0C;&#x5728;&#x4EE3;&#x7801;&#x7684;&#x7B2C;70&#x884C;&#xFF0C;&#x5C06; <code>Component</code> &#x653E;&#x5165;&#x4E86; <code>Decorator</code> &#x4E2D;&#xFF0C;&#x5E76;&#x5C06; <code>reactive-react</code> &#x63D0;&#x4F9B;&#x7684; <code>observer</code> &#x5C06;&#x8BE5;&#x7EC4;&#x4EF6;&#x53D8;&#x6210;&#x4E86;&#x54CD;&#x5E94;&#x5F0F;&#x7EC4;&#x4EF6;&#xFF0C;&#x8FD9;&#x4E5F;&#x5C31;&#x662F;&#x89E3;&#x91CA;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48; <code>formily</code> &#x80FD;&#x505A;&#x5230;&#x7EC4;&#x4EF6;&#x7EA7;&#x522B;&#x7684;&#x7CBE;&#x51C6;&#x5237;&#x65B0;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x7684;&#x54CD;&#x5E94;&#x5F0F;&#x76D1;&#x542C;&#x662F;&#x6700;&#x5C0F;&#x7C92;&#x5EA6;&#x7684;&#x3002;</p>
<h2 id="&#x5B9E;&#x8DF5;"><a href="#&#x5B9E;&#x8DF5;" class="headerlink" title="&#x5B9E;&#x8DF5;"></a>&#x5B9E;&#x8DF5;</h2><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x7B80;&#x5355;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x8868;&#x5355;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">	name: {</span><br><span class="line">		title: &apos;&#x59D3;&#x540D;&apos;,</span><br><span class="line">		type: &apos;string&apos;,</span><br><span class="line">		&apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">		&apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">		&apos;x-component-props&apos;: {</span><br><span class="line">			placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x59D3;&#x540D;&apos;,</span><br><span class="line">		},</span><br><span class="line">	},</span><br><span class="line">	age: {</span><br><span class="line">		title: &apos;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">		type: &apos;number&apos;,</span><br><span class="line">		&apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">		&apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">		&apos;x-component-props&apos;: {</span><br><span class="line">			placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">		},</span><br><span class="line">	},</span><br><span class="line">	gender: {</span><br><span class="line">		title: &apos;&#x6027;&#x522B;&apos;,</span><br><span class="line">		type: &apos;number&apos;,</span><br><span class="line">		&apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">		&apos;x-component&apos;: &apos;Radio.Group&apos;,</span><br><span class="line">		enum: [{</span><br><span class="line">				label: &apos;&#x7537;&apos;,</span><br><span class="line">				value: 1,</span><br><span class="line">			},</span><br><span class="line">			{</span><br><span class="line">				label: &apos;&#x5973;&apos;,</span><br><span class="line">				value: 0,</span><br><span class="line">			},</span><br><span class="line">		],</span><br><span class="line">	},</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6110c182f0168feb972917ccde17f69b459cf1e8821df190eff6fcaaa688eee0" alt="image.png"><br>&#x4EA7;&#x54C1;&#x770B;&#x4E86;&#x4E00;&#x773C;&#xFF1A;&#x201C;&#x592A;&#x4E11;&#x4E86;&#xFF01;&#x4E0D;&#x8981;&#x6BCF;&#x4E2A;&#x90FD;&#x5360;&#x6EE1;&#x4E00;&#x884C;&#x3002;&#x201D;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x53C8;&#x6709;&#x4E86;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    layout: {</span><br><span class="line">        type: &apos;void&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Layout.Inline&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormGrid&apos;,</span><br><span class="line">        properties: {</span><br><span class="line">            name: {</span><br><span class="line">                title: &apos;&#x59D3;&#x540D;&apos;,</span><br><span class="line">                type: &apos;string&apos;,</span><br><span class="line">                &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">                &apos;x-component-props&apos;: {</span><br><span class="line">                    placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x59D3;&#x540D;&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">            age: {</span><br><span class="line">                title: &apos;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">                type: &apos;number&apos;,</span><br><span class="line">                &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">                &apos;x-component-props&apos;: {</span><br><span class="line">                    placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">            gender: {</span><br><span class="line">                title: &apos;&#x6027;&#x522B;&apos;,</span><br><span class="line">                type: &apos;number&apos;,</span><br><span class="line">                &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                &apos;x-component&apos;: &apos;Radio.Group&apos;,</span><br><span class="line">                enum: [{</span><br><span class="line">                            label: &apos;&#x7537;&apos;,</span><br><span class="line">                            value: 1,</span><br><span class="line">                        },</span><br><span class="line">                        {</span><br><span class="line">                            label: &apos;&#x5973;&apos;,</span><br><span class="line">                            value: 0,</span><br><span class="line">                        },</span><br><span class="line">                ],</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E4B;&#x524D;&#x4EE3;&#x7801;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x5916;&#x5C42;&#x5957;&#x4E86;&#x4E00;&#x4E2A; x-component &#x4E3A; Layout.Inline &#x7684;&#x8282;&#x70B9;&#xFF0C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6c590ec8e4e7abbe7e2b6c1b07b4c363e5794e14fce02b684c61ae2a858f702e" alt="image.png"><br>&#x8FD9;&#x6837;&#x786E;&#x5B9E;&#x66F4;&#x987A;&#x773C;&#x4E00;&#x70B9;&#x4E86;&#x3002;</p>
<p>&#x53EF;&#x662F;&#xFF0C;&#x8FC7;&#x4E86;&#x4E00;&#x4F1A;&#x513F;&#xFF0C;&#x540E;&#x7AEF;&#x53C8;&#x6765;&#x4E86;&#xFF1A;&#x6211;&#x60F3;&#x8981;&#x628A;&#x6570;&#x636E;&#x7684;&#x7ED3;&#x6784;&#x4ECE;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    name: &apos;&#x5F20;&#x4E09;&apos;,</span><br><span class="line">    age: 18,</span><br><span class="line">    gender: 0</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6539;&#x6210;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    {</span><br><span class="line">        nickname: &apos;&#x5F20;&#x4E09;&apos;,</span><br><span class="line">        age: 18</span><br><span class="line">    },</span><br><span class="line">    gender: 0</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x884C;&#x5427;&#x2026;&#xFF0C;&#x54B1;&#x4E5F;&#x4E0D;&#x6562;&#x95EE;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x6837;&#x6539;&#x3002;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    layout: {</span><br><span class="line">        type: &apos;void&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Layout.Inline&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormGrid&apos;,</span><br><span class="line">        properties: {</span><br><span class="line">        obj: {</span><br><span class="line">            type: &apos;object&apos;,</span><br><span class="line">            properties: {</span><br><span class="line">                name: {</span><br><span class="line">                    title: &apos;&#x59D3;&#x540D;&apos;,</span><br><span class="line">                    type: &apos;string&apos;,</span><br><span class="line">                    &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                    &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">                    &apos;x-component-props&apos;: {</span><br><span class="line">                        placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x59D3;&#x540D;&apos;,</span><br><span class="line">                    },</span><br><span class="line">                },</span><br><span class="line">                age: {</span><br><span class="line">                    title: &apos;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">                    type: &apos;number&apos;,</span><br><span class="line">                    &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                    &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">                    &apos;x-component-props&apos;: {</span><br><span class="line">                        placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">                    },</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">        gender: {</span><br><span class="line">            title: &apos;&#x6027;&#x522B;&apos;,</span><br><span class="line">            type: &apos;number&apos;,</span><br><span class="line">            &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">            &apos;x-component&apos;: &apos;Radio.Group&apos;,</span><br><span class="line">            enum: [{</span><br><span class="line">                    label: &apos;&#x7537;&apos;,</span><br><span class="line">                    value: 1,</span><br><span class="line">                },</span><br><span class="line">                {</span><br><span class="line">                    label: &apos;&#x5973;&apos;,</span><br><span class="line">                    value: 0,</span><br><span class="line">                },</span><br><span class="line">            ],</span><br><span class="line">        },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x5728; name &#x548C; age &#x7684;&#x5916;&#x5C42;&#x5957;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; obj &#x7684;&#x8282;&#x70B9;&#xFF0C;&#x5E76;&#x5C06; type &#x8BBE;&#x7F6E;&#x4E3A; object&#xFF0C;&#x5E76;&#x5C06; name &#x8282;&#x70B9;&#x7684;&#x540D;&#x79F0;&#x6539;&#x6210;&#x4E86; nickname&#x3002;&#x9A8C;&#x8BC1;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;&#x8868;&#x5355;&#x7684;&#x6570;&#x636E;&#x7684;&#x7ED3;&#x6784;&#x7EC8;&#x4E8E;&#x7B26;&#x5408;&#x9884;&#x671F;&#x4E86;&#x3002;</p>
<p>&#x6CA1;&#x591A;&#x4E45;&#xFF0C;&#x4EA7;&#x54C1;&#x53C8;&#x53CC;&#x53D2;&#x53D5;&#x8DD1;&#x8FC7;&#x6765;&#x4E86;&#xFF1A;&#x201C;&#x6211;&#x5E0C;&#x671B;&#x6027;&#x522B;&#x9009;&#x62E9;&#x4E3A;&#x5973;&#x6027;&#x65F6;&#xFF0C;&#x4E0D;&#x7528;&#x8F93;&#x5165;&#x5E74;&#x9F84;&#xFF0C;&#x6BD5;&#x7ADF;&#x5973;&#x5B69;&#x7684;&#x5E74;&#x9F84;&#x9700;&#x8981;&#x4FDD;&#x5BC6;&#x3002;&#x201D;</p>
<p>&#x6211;&#xFF1A;&#x201C;&#xFF1F;&#xFF1F;&#xFF1F;&#x201D;</p>
<p>&#x4E8E;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x4F5C;&#x4EE5;&#x4E0B;&#x6539;&#x52A8;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    layout: {</span><br><span class="line">        type: &apos;void&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Layout.Inline&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormGrid&apos;,</span><br><span class="line">        properties: {</span><br><span class="line">            obj: {</span><br><span class="line">                type: &apos;object&apos;,</span><br><span class="line">                properties: {</span><br><span class="line">                    name: {</span><br><span class="line">                        title: &apos;&#x59D3;&#x540D;&apos;,</span><br><span class="line">                        type: &apos;string&apos;,</span><br><span class="line">                        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                        &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">                        &apos;x-component-props&apos;: {</span><br><span class="line">                            placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x59D3;&#x540D;&apos;,</span><br><span class="line">                        },</span><br><span class="line">                    },</span><br><span class="line">                    age: {</span><br><span class="line">                        title: &apos;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">                        type: &apos;number&apos;,</span><br><span class="line">                        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                        &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">                        &apos;x-component-props&apos;: {</span><br><span class="line">                            placeholder: &apos;&#x8BF7;&#x8F93;&#x5165;&#x5E74;&#x9F84;&apos;,</span><br><span class="line">                        },</span><br><span class="line">                        &apos;x-reactions&apos;: {</span><br><span class="line">                            dependencies: [&apos;gender&apos;],</span><br><span class="line">                            fulfill: {</span><br><span class="line">                                schema: {</span><br><span class="line">                                    &apos;x-disabled&apos;: &apos;{{  $deps[0] === 0 }}&apos;,</span><br><span class="line">                                },</span><br><span class="line">                            },</span><br><span class="line">                        },</span><br><span class="line">                    },</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">            gender: {</span><br><span class="line">                title: &apos;&#x6027;&#x522B;&apos;,</span><br><span class="line">                type: &apos;number&apos;,</span><br><span class="line">                &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">                &apos;x-component&apos;: &apos;Radio.Group&apos;,</span><br><span class="line">                enum: [{</span><br><span class="line">                        label: &apos;&#x7537;&apos;,</span><br><span class="line">                        value: 1,</span><br><span class="line">                    },</span><br><span class="line">                    {</span><br><span class="line">                        label: &apos;&#x5973;&apos;,</span><br><span class="line">                        value: 0,</span><br><span class="line">                    },</span><br><span class="line">                ],</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x76F8;&#x8F83;&#x4E8E;&#x4EE5;&#x524D;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x5728; age &#x8282;&#x70B9;&#x4E0B;&#x52A0;&#x5165;&#x4E86; x-reactions &#x5C5E;&#x6027;&#xFF0C;&#x4F7F;&#x5176;&#x80FD;&#x591F;&#x88AB; gender &#x7684;&#x503C;&#x5F71;&#x54CD;&#xFF0C;&#x6765;&#x52A8;&#x6001;&#x53D8;&#x6362; disable &#x7684;&#x503C;&#x3002;</p>
<p>&#x7EC8;&#x4E8E;&#xFF0C;&#x5728;&#x78D5;&#x78D5;&#x7ECA;&#x7ECA;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5B8C;&#x6210;&#x4E86;&#x6B64;&#x6B21;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x5176;&#x5B9E;&#xFF0C;&#x4EE5;&#x4E0A;&#x4F8B;&#x5B50;&#x867D;&#x7136;&#x7B80;&#x5355;&#xFF0C;&#x4F46;&#x4E5F;&#x4ECE;&#x4FA7;&#x9762;&#x53CD;&#x5E94;&#x51FA;&#xFF0C;Formily &#x57FA;&#x4E8E; JSON Schema &#x7684;&#x5F3A;&#x5927;&#x8868;&#x5355;&#x89E3;&#x51B3;&#x80FD;&#x529B;&#x3002;&#x65E0;&#x8BBA;&#x662F;&#x5E94;&#x5BF9;&#x8868;&#x5355;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x8C03;&#x6574;&#xFF0C;&#x6570;&#x636E;&#x5B57;&#x6BB5;&#x540D;&#x7684;&#x66F4;&#x6539;&#xFF0C;&#x8FD8;&#x662F;&#x7EC4;&#x4EF6;&#x6837;&#x5F0F;&#x66F4;&#x6539;&#x548C;&#x7EC4;&#x4EF6;&#x8054;&#x52A8;&#xFF0C;&#x90FD;&#x80FD;&#x8F7B;&#x800C;&#x6613;&#x4E3E;&#x5730;&#x901A;&#x8FC7;&#x7B80;&#x5355;&#x914D;&#x7F6E;&#x6765;&#x5316;&#x89E3;&#x3002;</p>
<p>&#x4E0D;&#x8FC7;&#x5728;&#x65E5;&#x5E38;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6240;&#x9700;&#x8981;&#x7ECF;&#x5386;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5927;&#x591A;&#x90FD;&#x590D;&#x6742;&#x5F97;&#x591A;&#x3002;</p>
<h2 id="&#x590D;&#x6742;&#x573A;&#x666F;"><a href="#&#x590D;&#x6742;&#x573A;&#x666F;" class="headerlink" title="&#x590D;&#x6742;&#x573A;&#x666F;"></a>&#x590D;&#x6742;&#x573A;&#x666F;</h2><h3 id="&#x9700;&#x6C42;&#x6982;&#x8FF0;"><a href="#&#x9700;&#x6C42;&#x6982;&#x8FF0;" class="headerlink" title="&#x9700;&#x6C42;&#x6982;&#x8FF0;"></a>&#x9700;&#x6C42;&#x6982;&#x8FF0;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/edd1abfff8b669051d01c03debba25f1ef9a1cfda742dbc64badcf8beae45740" alt="image.png"><br>&#x5982;&#x4E0A;&#x56FE;&#xFF0C;<code>&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;</code>&#x662F;&#x4E00;&#x4E2A;&#x4E0B;&#x62C9;&#x6846; <code>Select</code> &#xFF0C;&#x5B83;&#x7684;&#x503C;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#xFF0C;&#x5C06;&#x63A5;&#x53E3;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5E94;&#x7528;&#x5230;&#x5176;&#x4ED6;&#x4E09;&#x4E2A;&#x8868;&#x5355;&#x6570;&#x636E;&#x4E2D;&#x3002;</p>
<p><code>&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x540D;&#x79F0;</code>&#x540C;&#x7406;&#xFF0C;&#x5728;&#x5B83;&#x7684;&#x503C;&#x6539;&#x53D8;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x8C03;&#x7528;&#x63A5;&#x53E3;&#xFF0C;&#x4E0E;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&#x884C;&#x4E3A;&#x4E00;&#x81F4;&#xFF0C;&#x5B83;&#x4F1A;&#x53CD;&#x8FC7;&#x6765;&#x5F71;&#x54CD;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&#x7684;&#x503C;&#x3002;</p>
<h3 id="&#x9700;&#x6C42;&#x5206;&#x6790;"><a href="#&#x9700;&#x6C42;&#x5206;&#x6790;" class="headerlink" title="&#x9700;&#x6C42;&#x5206;&#x6790;"></a>&#x9700;&#x6C42;&#x5206;&#x6790;</h3><p>&#x65E2;&#x7136;&#x662F;&#x8868;&#x5355;&#x8054;&#x52A8;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x4F1A;&#x60F3;&#x5230; x-reactions &#x5C5E;&#x6027;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528;&#x5B83;&#x6765;&#x8FBE;&#x5230;&#x7EC4;&#x4EF6;&#x8054;&#x52A8;&#x7684;&#x76EE;&#x7684;&#x3002;&#x4E8E;&#x662F;&#x6211;&#x4EEC;&#x5FC3;&#x91CC;&#x6709;&#x4E86;&#x4EE5;&#x4E0B;&#x7684;&#x5927;&#x81F4;&#x7ED3;&#x6784;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    businessObjectCode: {</span><br><span class="line">        type: &apos;string&apos;,</span><br><span class="line">        title: &apos;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Select&apos;,</span><br><span class="line">        &apos;x-component-props&apos;: {</span><br><span class="line">            placeholder: &apos;&#x8BF7;&#x9009;&#x62E9;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&apos;,</span><br><span class="line">        },</span><br><span class="line">        required: true,</span><br><span class="line">        &apos;x-reactions&apos;: {</span><br><span class="line">            dependencies: [&apos;xxx&apos;],</span><br><span class="line">            fulfill: {</span><br><span class="line">                schema: {</span><br><span class="line">                    &apos;xxx&apos;: &apos;{{ $deps[0] }}&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">    businessObjectName: {</span><br><span class="line">        type: &apos;string&apos;,</span><br><span class="line">        title: &apos;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x540D;&#x79F0;&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Select&apos;,</span><br><span class="line">        &apos;x-component-props&apos;: {</span><br><span class="line">                placeholder: &apos;&#x8BF7;&#x9009;&#x62E9;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x540D;&#x79F0;&apos;,</span><br><span class="line">        },</span><br><span class="line">        required: true,</span><br><span class="line">        &apos;x-reactions&apos;: {</span><br><span class="line">            dependencies: [&apos;xxx&apos;],</span><br><span class="line">            fulfill: {</span><br><span class="line">                schema: {</span><br><span class="line">                    &apos;xxx&apos;: &apos;{{ $deps[0] }}&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">    ownerName: {</span><br><span class="line">        type: &apos;string&apos;,</span><br><span class="line">        title: &apos;&#x8D27;&#x4E3B;&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">        required: true,</span><br><span class="line">        &apos;x-disabled&apos;: true,</span><br><span class="line">        &apos;x-reactions&apos;: {</span><br><span class="line">            dependencies: [&apos;xxx&apos;],</span><br><span class="line">            fulfill: {</span><br><span class="line">                schema: {</span><br><span class="line">                    &apos;xxx&apos;: &apos;{{ $deps[0] }}&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">    businessObjectType: {</span><br><span class="line">        type: &apos;string&apos;,</span><br><span class="line">        title: &apos;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Input&apos;,</span><br><span class="line">        required: true,</span><br><span class="line">        &apos;x-disabled&apos;: true,</span><br><span class="line">        &apos;x-reactions&apos;: {</span><br><span class="line">            dependencies: [&apos;xxx&apos;],</span><br><span class="line">            fulfill: {</span><br><span class="line">                schema: {</span><br><span class="line">                    &apos;xxx&apos;: &apos;{{ $deps[0] }}&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x4E3A;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x90FD;&#x6DFB;&#x52A0;&#x4E86; x-reactions &#x5C5E;&#x6027;&#xFF0C;&#x4F7F;&#x5176;&#x80FD;&#x591F;&#x88AB;&#x5F71;&#x54CD;&#x3002;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x9700;&#x6C42;&#x5E76;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x901A;&#x8FC7;&#x7EC4;&#x4EF6;&#x7684;&#x503C;&#x53BB;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#xFF0C;&#x800C;&#x662F;&#x7EC4;&#x4EF6;&#x7684;&#x503C;&#x8BF7;&#x6C42;&#x63A5;&#x53E3;&#x540E;&#x518D;&#x53BB;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x7EC4;&#x4EF6;&#x3002;&#x5982;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p>&#x4EE5;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&#x4E3A;&#x4F8B;</p>
<p>Start&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&#x4E0B;&#x62C9;&#x9009;&#x62E9;&#x901A;&#x8FC7;&#x9009;&#x62E9;&#x5230;&#x7684;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&#x8BF7;&#x6C42;&#x63A5;&#x53E3;&#x5185;&#x5BB9;&#x5C06;&#x8FD4;&#x56DE;&#x7684;&#x63A5;&#x53E3;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x5C06;&#x89E3;&#x6790;&#x51FA;&#x7684;&#x6570;&#x636E;&#x653E;&#x5982;&#x8868;&#x5355;&#x4E2D;Stop<br>&#x90A3;&#x4E48;&#xFF0C;&#x7531;&#x6B64;&#x4E0D;&#x96BE;&#x60F3;&#x5230;&#xFF0C;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5730;&#x65B9;&#x653E;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x968F;&#x7740;&#x4E0B;&#x62C9;&#x6846;&#x7684;&#x6570;&#x636E;&#x6539;&#x53D8;&#x800C;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x8BF7;&#x6C42;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x7B80;&#x5355;&#x7684; Select &#x5DF2;&#x7ECF;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x7684;&#x573A;&#x666F;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6;&#xFF0C;&#x628A;&#x8FD9;&#x4E9B;&#x903B;&#x8F91;&#x90FD;&#x5C01;&#x88C5;&#x5230;&#x5176;&#x4E2D;&#x3002;&#x4F2A;&#x4EE3;&#x7801;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;const BusinessObjectSelect: React.FunctionComponent&lt;IBusinessObjectSelectProps&gt; = ({</span><br><span class="line">  params,</span><br><span class="line">  onChange,</span><br><span class="line">}) =&gt; {</span><br><span class="line">  const handleChange = () =&gt; {</span><br><span class="line">    // &#x5904;&#x7406;&#x63A5;&#x53E3;&#x5165;&#x53C2;</span><br><span class="line">    const requestParams = transformParams(params);</span><br><span class="line">    </span><br><span class="line">    const { response } = service.fetchBusinessObjectData(requestParams);</span><br><span class="line">    </span><br><span class="line">    // &#x5904;&#x7406;&#x63A5;&#x53E3;&#x6570;&#x636E;</span><br><span class="line">    const data = transformResponse(response);</span><br><span class="line">    // &#x5C06;&#x5904;&#x7406;&#x5B8C;&#x7684;&#x6570;&#x636E;&#x653E;&#x5165;onChange</span><br><span class="line">    onChange(data);</span><br><span class="line">  };</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;Select</span><br><span class="line">      {...props}</span><br><span class="line">      labelInValue</span><br><span class="line">      value={value}</span><br><span class="line">      onSearch={handleSearch}</span><br><span class="line">      onChange={handleChange}</span><br><span class="line">      options={data}</span><br><span class="line">      defaultActiveFirstOption={false}</span><br><span class="line">      showArrow={false}</span><br><span class="line">      filterOption={false}</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<p>&#x5C06;&#x7EC4;&#x4EF6;&#x6CE8;&#x518C;&#x5B8C;&#x4E4B;&#x540E;&#xFF08;<a href="/external_links/758215f4d43f905b50e488b3255c7ca4.html" target="blank" rel="noopener">&#x4E0D;&#x61C2;&#x5982;&#x4F55;&#x6CE8;&#x518C;&#x8BE6;&#x8BE2;&#x5B98;&#x65B9;&#x6587;&#x6863;</a>&#xFF09;&#xFF0C;&#x518D;&#x5C06; Schema &#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x7EC4;&#x4EF6;&#x8FDB;&#x884C;&#x66FF;&#x6362;&#xFF0C;&#x5E76;&#x5206;&#x522B;&#x5BF9;&#x5176;&#x4F9D;&#x8D56;&#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;businessObjectCode: {</span><br><span class="line">    type: &apos;string&apos;,</span><br><span class="line">    title: &apos;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&apos;,</span><br><span class="line">    &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">    &apos;x-component&apos;: &apos;Select&apos;,</span><br><span class="line">    &apos;x-component-props&apos;: {</span><br><span class="line">        placeholder: &apos;&#x8BF7;&#x9009;&#x62E9;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x7F16;&#x7801;&apos;,</span><br><span class="line">    },</span><br><span class="line">    required: true,</span><br><span class="line">        &apos;x-reactions&apos;: {</span><br><span class="line">            dependencies: [&apos;businessObjectName&apos;],</span><br><span class="line">            fulfill: {</span><br><span class="line">                schema: {</span><br><span class="line">                    &apos;x-component-props.params&apos;: &apos;{{ $deps[0] }}&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br><span class="line">    businessObjectName: {</span><br><span class="line">        type: &apos;string&apos;,</span><br><span class="line">        title: &apos;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x540D;&#x79F0;&apos;,</span><br><span class="line">        &apos;x-decorator&apos;: &apos;FormItem&apos;,</span><br><span class="line">        &apos;x-component&apos;: &apos;Select&apos;,</span><br><span class="line">        &apos;x-component-props&apos;: {</span><br><span class="line">            placeholder: &apos;&#x8BF7;&#x9009;&#x62E9;&#x4E1A;&#x52A1;&#x5BF9;&#x8C61;&#x540D;&#x79F0;&apos;,</span><br><span class="line">        },</span><br><span class="line">        required: true,</span><br><span class="line">        &apos;x-reactions&apos;: {</span><br><span class="line">            dependencies: [&apos;businessObjectCode&apos;],</span><br><span class="line">            fulfill: {</span><br><span class="line">                schema: {</span><br><span class="line">                    &apos;x-component-props.params&apos;: &apos;{{ $deps[0] }}&apos;,</span><br><span class="line">                },</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">    },</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x800C;&#xFF0C;&#x51FA;&#x73B0;&#x4E86;&#x65B0;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<ol>
<li>&#x5728;&#x5904;&#x7406;&#x53E6;&#x5916;&#x4E24;&#x4E2A;&#x8868;&#x5355;&#x6570;&#x636E;&#xFF08;ownerName&#xFF0C;businessObjectType&#xFF09;&#x7684;&#x65F6;&#x5019;&#xFF0C;x-reactions &#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x8C01;&#x3002;&#x56E0;&#x4E3A;&#x65E0;&#x8BBA;&#x4F9D;&#x8D56;&#x4E86;&#x5176;&#x4E2D;&#x54EA;&#x4E00;&#x4E2A;&#xFF0C;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x4E0B;&#x62C9;&#x6846;&#x6570;&#x636E;&#x6539;&#x53D8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90FD;&#x65E0;&#x6CD5;&#x89E6;&#x53D1;&#x8054;&#x52A8;&#x4E86;&#x3002;</li>
<li>&#x5728;&#x63D0;&#x4EA4;&#x8868;&#x5355;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8868;&#x5355;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x88AB;&#x6C61;&#x67D3;&#x4E86;&#x3002;&#x672C;&#x5E94;&#x8BE5;&#x662F;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    businessObjectCode:&quot;&quot;,</span><br><span class="line">    businessObjectName: &quot;&quot;,</span><br><span class="line">    ownerName: &quot;&quot;,</span><br><span class="line">    businessObjectType: &quot;&quot;,</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x73B0;&#x5728;&#x5374;&#x53D8;&#x6210;&#x4E86;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">    businessObjectCode:{</span><br><span class="line">        // &#x5305;&#x542B;&#x4E86;&#x6574;&#x4E2A;&#x8868;&#x5355;&#x6570;&#x636E;&#x5728;&#x5185;&#x7684;&#x4E00;&#x5927;&#x5768;&#x6570;&#x636E;</span><br><span class="line">    },</span><br><span class="line">    businessObjectName: {</span><br><span class="line">        // &#x5305;&#x542B;&#x4E86;&#x6574;&#x4E2A;&#x8868;&#x5355;&#x6570;&#x636E;&#x5728;&#x5185;&#x7684;&#x4E00;&#x5927;&#x5768;&#x6570;&#x636E;</span><br><span class="line">    },</span><br><span class="line">    ownerName: &quot;&quot;,</span><br><span class="line">    businessObjectType: &quot;&quot;,</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x73B0;&#x5728;&#x7684;&#x8868;&#x5355;&#x6570;&#x636E;&#x56E0;&#x4E3A;&#x8054;&#x52A8;&#x7684;&#x9700;&#x8981;&#xFF0C;x-reactions &#x4E2D;&#x7684; dependencies &#x91CC;&#x7684;&#x6570;&#x636E;&#xFF08;businessObjectCode&#xFF0C;businessObjectName&#xFF09;&#x4E5F;&#x5FC5;&#x987B;&#x4E3A;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x521D;&#x59CB;&#x5316;&#x8868;&#x5355;&#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4E5F;&#x5F97;&#x5C06; businessObjectCode &#x548C; businessObjectName &#x5904;&#x7406;&#x6210;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x53CD;&#x76F4;&#x89C9;&#x3002;&#x5728;&#x4EBA;&#x7684;&#x76F4;&#x89C9;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5F80;&#x5F80;&#x5E0C;&#x671B;&#x6240;&#x89C1;&#x5373;&#x6240;&#x5F97;&#xFF0C;&#x800C;&#x73B0;&#x5728;&#x7684;&#x65B9;&#x6848;&#x5305;&#x542B;&#x4E86;&#x592A;&#x591A;&#x9690;&#x5F0F;&#x7684;&#x5185;&#x5BB9;&#x3002;</li>
<li>&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x3002;&#x5982;&#x679C;&#x540E;&#x7EED;&#x6709;&#x9700;&#x6C42;&#x53D8;&#x66F4;&#xFF0C;&#x6BD4;&#x5982;&#x5B57;&#x6BB5;&#x8C03;&#x6574;&#xFF0C;&#x8868;&#x5355;&#x7ED3;&#x6784;&#x8C03;&#x6574;&#xFF0C;&#x5BF9;&#x4E8E;&#x7EF4;&#x62A4;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x4EBA;&#x6765;&#x8BF4;&#xFF0C;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x96BE;&#x53D7;&#x7684;&#x3002;&#xFF08;&#x800C;&#x6211;&#x4EEC;&#x539F;&#x672C;&#x4EE5;&#x4E3A;&#x6539;&#x51E0;&#x4E2A;&#x5B57;&#x6BCD;&#x5C31;&#x597D;&#x4E86;&#x7684;&#x5440;&#x2026;&#xFF09;</li>
</ol>
<p>&#x5F53;&#x7136;&#x4EE5;&#x4E0A;&#x95EE;&#x9898;&#xFF0C;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x95EE;&#x9898;1&#xFF0C;&#x5728;value&#x503C;&#x6539;&#x53D8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x89E6;&#x53D1;&#x4E00;&#x4E0B;&#x7EC4;&#x4EF6;&#x7684;onChange&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x4E00;&#x4E9B;&#x8FB9;&#x754C; case &#x9700;&#x8981;&#x8003;&#x8651;&#x3002;&#x6BD4;&#x5982;&#x95EE;&#x9898;2&#x548C;3&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E2D;&#x95F4;&#x505A;&#x4E00;&#x5C42;&#x6570;&#x636E;&#x8F6C;&#x6362;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x82B1;&#x4E86;&#x592A;&#x591A;&#x7684;&#x6210;&#x672C;&#xFF0C;&#x751A;&#x81F3;&#x4EE5;&#x4E0A;&#x90FD;&#x662F;&#x7B14;&#x8005;&#x7B80;&#x5316;&#x8FC7;&#x7684;&#x903B;&#x8F91;&#x548C;&#x4EE3;&#x7801;&#x3002;&#x8BD5;&#x95EE;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; Formily &#x7684;&#x521D;&#x8877;&#xFF0C;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6211;&#x4EEC;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x51CF;&#x8F7B;&#x6211;&#x4EEC;&#x7684;&#x5FC3;&#x667A;&#x8D1F;&#x62C5;&#x5417;&#xFF1F;&#x800C;&#x73B0;&#x5728;&#x4F3C;&#x4E4E;&#x80CC;&#x9053;&#x800C;&#x9A70;&#x3002;</p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5BF9;&#x4E8E;&#x719F;&#x6089; Formily &#x7684;&#x540C;&#x5B66;&#xFF0C;&#x53EF;&#x80FD;&#x4E5F;&#x4F1A;&#x60F3;&#x5230;&#x4F7F;&#x7528; createForm &#x4E2D; effects &#x63D0;&#x4F9B;&#x7684;&#x94A9;&#x5B50;&#xFF0C;&#x53BB;&#x76D1;&#x542C;&#x7EC4;&#x4EF6;&#x7684;&#x503C;&#x6539;&#x53D8;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53BB;&#x6539;&#x53D8;&#x6574;&#x4E2A; form &#x7684;&#x6570;&#x636E;&#x3002;&#x53EF;&#x662F;&#x4E00;&#x65E6;&#x8868;&#x5355;&#x590D;&#x6742;&#x5230;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#xFF0C;&#x94A9;&#x5B50;&#x91CC;&#x7684;&#x903B;&#x8F91;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x9AD8;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#xFF0C;&#x5982;&#x679C;&#x50CF;&#x7B14;&#x8005;&#x4E00;&#x6837;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x573A;&#x666F;&#x90FD;&#x4F7F;&#x7528;&#x4E86; Formily &#x672C;&#x8EAB;&#x7684;&#x8054;&#x52A8;&#x80FD;&#x529B;&#x53BB;&#x89E3;&#x51B3;&#xFF0C;&#x4EC5;&#x9488;&#x5BF9;&#x8FD9;&#x79CD;&#x7279;&#x6B8A;&#x573A;&#x666F;&#xFF0C;&#x7528;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x53BB;&#x5904;&#x7406;&#x7684;&#x8BDD;&#xFF0C;&#x663E;&#x5F97;&#x4E0D;&#x4F26;&#x4E0D;&#x7C7B;&#x3002;&#x4F46;&#x8BDD;&#x8BF4;&#x56DE;&#x6765;&#xFF0C;&#x8FD9;&#x4E5F;&#x786E;&#x5B9E;&#x80FD;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x4E14;&#x6BD4;&#x8F83;&#x7B26;&#x5408;&#x76F4;&#x89C9;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x6700;&#x7EC8;&#xFF0C;&#x7B14;&#x8005;&#x91C7;&#x7528;&#x4E86;&#x4E0E;&#x6B64;&#x7C7B;&#x4F3C;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5728;&#x6BCF;&#x4E2A; Select &#x7EC4;&#x4EF6;&#x7684; onChange &#x4E2D;&#x8FDB;&#x884C;&#x63A5;&#x53E3;&#x8BF7;&#x6C42;&#x4E4B;&#x540E;&#xFF0C;&#x518D;&#x4F7F;&#x7528; form.setValues &#x6765;&#x6539;&#x53D8;&#x6574;&#x4E2A;&#x8868;&#x5355;&#x7684;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x6837;&#xFF0C;&#x903B;&#x8F91;&#x4F3C;&#x4E4E;&#x66F4;&#x7B80;&#x6D01;&#x4E86;&#xFF0C;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x5904;&#x7406;&#x81EA;&#x5B9A;&#x4E49;&#x7EC4;&#x4EF6;&#x91CC;&#x7684;&#x5F02;&#x5E38; case&#xFF0C;&#x4EC5;&#x4EC5;&#x53EA;&#x9700;&#x8981;&#x5173;&#x6CE8; onChange &#x4EE5;&#x53CA;&#x8868;&#x5355;&#x7684;&#x6570;&#x636E;&#x5E94;&#x8BE5;&#x600E;&#x4E48;&#x8D4B;&#x503C;&#x3002;&#x8868;&#x5355;&#x6570;&#x636E;&#x4E5F;&#x5E72;&#x51C0;&#x4E86;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x989D;&#x5916;&#x7684;&#x8F6C;&#x6362;&#x6210;&#x672C;&#x3002;&#x5BF9;&#x4E8E;&#x6B64;&#x6848;&#x4F8B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4F60;&#xFF0C;&#x4F60;&#x4F1A;&#x600E;&#x4E48;&#x5904;&#x7406;&#x5462;&#xFF1F;</p>
<h2 id="&#x7ED3;&#x8BBA;"><a href="#&#x7ED3;&#x8BBA;" class="headerlink" title="&#x7ED3;&#x8BBA;"></a>&#x7ED3;&#x8BBA;</h2><p>&#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;&#x5982;&#x679C;&#x4EC5;&#x4F9D;&#x9760; Formily &#x672C;&#x8EAB;&#x7684;&#x8054;&#x52A8;&#x80FD;&#x529B;&#xFF0C;&#x5728;&#x5E94;&#x5BF9;&#x67D0;&#x4E9B;&#x590D;&#x6742;&#x573A;&#x666F;&#x65F6;&#xFF0C;&#x662F;&#x5B58;&#x5728;&#x4E00;&#x5B9A;&#x7684;&#x5C40;&#x9650;&#x6027;&#x7684;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5728;&#x8868;&#x5355;&#x4EA4;&#x4E92;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;JSON Schema &#x7684;&#x53CD;&#x590D;&#x89E3;&#x6790;&#x53EF;&#x80FD;&#x6210;&#x4E3A;&#x6027;&#x80FD;&#x74F6;&#x9888;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5F53; schema &#x5185;&#x5BB9;&#x5E9E;&#x5927;&#x4E14;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x590D;&#x6742;&#x7684;&#x8054;&#x52A8;&#x548C;&#x6279;&#x91CF;&#x66F4;&#x65B0;&#x65F6;&#xFF0C;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x4F1A;&#x66F4;&#x52A0;&#x660E;&#x663E;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A; Formily &#x5728;&#x5185;&#x90E8;&#x5BF9;&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x6DF1;&#x62F7;&#x8D1D;&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x6DF1;&#x5EA6;&#x904D;&#x5386;&#x7684;&#x810F;&#x68C0;&#x6D4B;&#x3002;&#x867D;&#x7136;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x63D0;&#x5347;&#x4E86;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#xFF0C;&#x4F46;&#x5728;&#x5904;&#x7406;&#x5927;&#x91CF;&#x6570;&#x636E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x4F1A;&#x663E;&#x73B0;&#x51FA;&#x6765;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8003;&#x8651;&#x5C4F;&#x853D; Formily &#x7684;&#x5C40;&#x90E8;&#x91CD;&#x590D;&#x6E32;&#x67D3;&#xFF0C;&#x56DE;&#x9000;&#x5230; React &#x7684;&#x6574;&#x6811;&#x6E32;&#x67D3;&#x53EF;&#x80FD;&#x662F;&#x4E00;&#x4E2A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<p>&#x7136;&#x800C;&#xFF0C;&#x4EFB;&#x4F55;&#x65B9;&#x6848;&#x90FD;&#x53EA;&#x80FD;&#x89E3;&#x51B3;&#x90E8;&#x5206;&#x95EE;&#x9898;&#x3002;&#x4E00;&#x4E2A;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;80%&#x7684;&#x573A;&#x666F;&#xFF0C;&#x5269;&#x4E0B;&#x7684;20%&#x53EF;&#x80FD;&#x9700;&#x8981;&#x91C7;&#x7528;&#x5176;&#x4ED6;&#x65B9;&#x6848;&#x6765;&#x5904;&#x7406;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x9762;&#x5BF9;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6839;&#x636E;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x65B9;&#x6848;&#x6765;&#x89E3;&#x51B3;&#x3002;</p>
<h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p>&#x1F4DA; &#x5C0F;&#x8317;&#x6587;&#x7AE0;&#x63A8;&#x8350;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7319181157501026331">&#x53E4;&#x8317;&#x662F;&#x5982;&#x4F55;&#x505A;&#x524D;&#x7AEF;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684;</a></li>
<li><a href="https://dev.newban.cn/7315586629309562932">&#x4F60;&#x4E00;&#x5B9A;&#x8981;&#x77E5;&#x9053;&#x7684;&#x300C;React&#x7EC4;&#x4EF6;&#x300D;&#x4E24;&#x79CD;&#x8C03;&#x7528;&#x65B9;&#x5F0F;</a></li>
<li><a href="https://dev.newban.cn/7313242096282304522">&#x4E2D;&#x540E;&#x53F0;&#x4E1A;&#x52A1;&#x5F00;&#x53D1;&#xFF08;&#x4E00;&#xFF09;&#x300C;&#x8868;&#x5355;&#x539F;&#x7406;&#x300D;</a></li>
</ul>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x300C;<a href="/external_links/f40b7034b31e24ca9725d4bcf11e27fb.html" target="blank" rel="noopener">Goodme&#x524D;&#x7AEF;&#x56E2;&#x961F;</a>&#x300D;&#xFF0C;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x5E72;&#x8D27;&#x5B9E;&#x8DF5;&#xFF0C;&#x6B22;&#x8FCE;&#x4EA4;&#x6D41;&#x5206;&#x4EAB;~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/bddb1a8e94430b2c6e5712e89c1a422b.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7321410924106104858.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7321410924106104858.html" itemprop="url">Jetpack Compose -> 声明式UI & Mod</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-01-08T14:01:24+08:00">
                2024-01-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x672C;&#x7AE0;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x4E0B; Compose &#x7684;&#x58F0;&#x660E;&#x5F0F; UI &#x4EE5;&#x53CA;&#x521D;&#x7EA7;&#x5199;&#x6CD5;&#xFF1B;</p>
<h2 id="&#x4EC0;&#x4E48;&#x662F;&#x58F0;&#x660E;&#x5F0F;UI"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x58F0;&#x660E;&#x5F0F;UI" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x58F0;&#x660E;&#x5F0F;UI"></a>&#x4EC0;&#x4E48;&#x662F;&#x58F0;&#x660E;&#x5F0F;UI</h2><h3 id="&#x4F20;&#x7EDF;UI"><a href="#&#x4F20;&#x7EDF;UI" class="headerlink" title="&#x4F20;&#x7EDF;UI"></a>&#x4F20;&#x7EDF;UI</h3><p>&#x4F20;&#x7EDF; UI &#x65B9;&#x5F0F;&#x6765;&#x58F0;&#x660E;UI</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;androidx.appcompat.widget.LinearLayoutCompat    </span><br><span class="line">    android:layout_width=&quot;match_parent&quot;    </span><br><span class="line">    android:layout_height=&quot;match_parent&quot;    </span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;    </span><br><span class="line">    &lt;androidx.appcompat.widget.AppCompatImageView        </span><br><span class="line">        android:layout_width=&quot;match_parent&quot;        </span><br><span class="line">        android:scaleType=&quot;centerCrop&quot;        </span><br><span class="line">        android:layout_height=&quot;300dp&quot; /&gt;</span><br><span class="line">&lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;</span><br></pre></td></tr></table></figure>

<p>&#x662F;&#x901A;&#x8FC7; xml &#x6765;&#x8FDB;&#x884C;&#x663E;&#x793A;&#x7684;&#xFF0C;&#x663E;&#x793A;&#x6587;&#x5B57;&#x7684;&#x65B9;&#x5F0F;&#x662F;&#x4F7F;&#x7528; TextView&#xFF0C;&#x5B83;&#x5185;&#x90E8;&#x663E;&#x793A;&#x6587;&#x5B57;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x79CD;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x5728; xml &#x4E2D;&#x76F4;&#x63A5;&#x8BBE;&#x7F6E;&#xFF0C;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;android:text=&quot;@string/app_name&quot;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x662F;&#x901A;&#x8FC7;&#x521D;&#x59CB;&#x503C;&#x5728; xml &#x4E2D;&#x8FDB;&#x884C;&#x9884;&#x8BBE;&#x7F6E;&#x7684;&#xFF1B;</p>
<p>&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x662F;&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x76F4;&#x63A5;&#x8C03;&#x7528; setText &#x8FDB;&#x884C;&#x8BBE;&#x7F6E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;TextView textView = findViewById(R.id.text);</span><br><span class="line">textView.setText(&quot;xxxx&quot;);</span><br></pre></td></tr></table></figure>

<p>&#x4EE3;&#x7801;&#x4E2D;&#x662F;&#x901A;&#x8FC7; setText &#x540E;&#x7EED;&#x5BF9;&#x503C;&#x8FDB;&#x884C;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#x7684;&#xFF1B;</p>
<p>&#x8FD9;&#x79CD;&#x9700;&#x8981;&#x624B;&#x52A8;&#x5BF9;&#x754C;&#x9762;&#x66F4;&#x65B0;&#x7684;&#x65B9;&#x5F0F; &#x5C31;&#x4E0D;&#x662F;&#x58F0;&#x660E;&#x5F0F;&#xFF0C;&#x5C5E;&#x4E8E;&#x4F20;&#x7EDF;&#x5F0F;</p>
<h3 id="&#x58F0;&#x660E;&#x5F0F;UI"><a href="#&#x58F0;&#x660E;&#x5F0F;UI" class="headerlink" title="&#x58F0;&#x660E;&#x5F0F;UI"></a>&#x58F0;&#x660E;&#x5F0F;UI</h3><p>&#x6307;&#x7684;&#x662F;&#xFF1A;&#x5728;&#x5199;&#x754C;&#x9762;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x754C;&#x9762;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6027;&#x7684;&#x58F0;&#x660E;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x5728;&#x5404;&#x79CD;&#x6761;&#x4EF6;&#x5BF9;&#x754C;&#x9762;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x8DDF;&#x6761;&#x4EF6;&#x6709;&#x5173;&#x7684;&#x66F4;&#x65B0;&#xFF1B;</p>
<p>&#x58F0;&#x660E;&#x5F0F; UI &#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x754C;&#x9762;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#xFF0C;&#x800C;&#x4F20;&#x7EDF;&#x5F0F;&#x9700;&#x8981;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#x754C;&#x9762;&#xFF1B;</p>
<p>&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x5199;&#x4E00;&#x4E2A; Compose &#x7684; Text</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Text(    </span><br><span class="line">    text = &quot;Hello $name!&quot;,    </span><br><span class="line">    modifier = modifier</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x628A; name &#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x7ED9;&#x8FD9;&#x4E2A; Text &#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x5B57;&#x63A7;&#x4EF6;&#x5C31;&#x4F1A;&#x663E;&#x793A; name &#x7684;&#x503C;&#xFF1B;&#x800C;&#x58F0;&#x660E;&#x5F0F; UI &#x5B83;&#x4E0D;&#x4EC5;&#x4F1A;&#x7528; name &#x6765;&#x521D;&#x59CB;&#x5316;&#x663E;&#x793A; name &#x7684;&#x503C;&#xFF0C;&#x5F53; name &#x7684;&#x503C;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;Text &#x6240;&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;&#x4E5F;&#x4F1A;&#x8DDF;&#x7740;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x6BD4;&#x5982; name &#x7684;&#x521D;&#x59CB;&#x503C;&#x662F; Mars&#xFF0C;&#x754C;&#x9762;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x663E;&#x793A;&#x7684;&#x5C31;&#x662F; Mars&#xFF0C;&#x8FC7;&#x4E86;&#x4E00;&#x4F1A;&#x8FD9;&#x4E2A; name &#x7684;&#x503C;&#x53D8;&#x6210;&#x4E86; &#x8001;A &#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x754C;&#x9762;&#x5C31;&#x4F1A;&#x8DDF;&#x7740;&#x53D8;&#x6210; &#x8001;A&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x6B21;&#x8C03;&#x7528; setText &#x8FDB;&#x884C;&#x66F4;&#x65B0;&#xFF1B;&#x8FD9;&#x5C31;&#x662F;&#x58F0;&#x660E;&#x5F0F; UI&#xFF1B;&#x5E76;&#x4E0D;&#x662F;&#x8BF4;&#x754C;&#x9762;&#x662F;&#x7528;&#x58F0;&#x660E;&#x5F0F;&#x5199;&#x51FA;&#x6765;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x8BF4;&#x53EA;&#x9700;&#x8981;&#x58F0;&#x660E;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x4EFB;&#x4F55;&#x7684;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#xFF1B;</p>
<p>&#x4F20;&#x7EDF;&#x5F0F;&#x518D;&#x6B21;&#x8C03;&#x7528; setText &#x624D;&#x80FD;&#x66F4;&#x65B0;&#xFF0C;&#x8FD9;&#x4E2A;&#x8C03;&#x7528;&#x4E0D;&#x80FD;&#x7701;&#x7565;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x66F4;&#x65B0;&#xFF1B;</p>
<h2 id="Compose-&#x600E;&#x4E48;&#x5199;&#xFF1F;"><a href="#Compose-&#x600E;&#x4E48;&#x5199;&#xFF1F;" class="headerlink" title="Compose &#x600E;&#x4E48;&#x5199;&#xFF1F;"></a>Compose &#x600E;&#x4E48;&#x5199;&#xFF1F;</h2><p>&#x4E00;&#x79CD;&#x662F;&#x76F4;&#x63A5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; Compose &#x9879;&#x76EE;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x9879;&#x76EE;&#x4E2D;&#x589E;&#x52A0;&#x914D;&#x7F6E;&#xFF0C;&#x8BA9;&#x5B83;&#x652F;&#x6301; Compose&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/6e6dd14cc81efaf78430539c8054ad576ff52e349eb07315d4eed4f13aba3129" alt></p>
<p>&#x6211;&#x7684; Android Stuido &#x7248;&#x672C;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x521B;&#x5EFA; Compose &#x9879;&#x76EE;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7684; AS &#x5DF2;&#x7ECF;&#x9ED8;&#x8BA4;&#x521B;&#x5EFA;&#x7684;&#x5C31;&#x662F; Compose &#x9879;&#x76EE;&#x4E86;&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/01099fa905c85d3d6e4629048c3eed363146ce04bf941f354e33ef6107e5045c" alt></p>
<p>&#x70B9;&#x51FB; Next &#x521B;&#x5EFA;&#x5B8C;&#x6210;&#xFF1B;</p>
<p>&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728; MainActivity &#x4E2D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x4E2A;&#x5927;&#x6982;&#x7684;&#x6784;&#x5EFA;&#x903B;&#x8F91;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e2a8fa6d356baebe90be5d212f991f079f1941804873f45a9655e6315d42eb5b" alt></p>
<p>&#x533A;&#x522B;&#x4E0E;&#x4F20;&#x7EDF;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4E00;&#x4E2A; setContent &#x51FD;&#x6570;&#x5F00;&#x542F;&#x4E86;&#x6211;&#x4EEC;&#x7684; Compose &#x4E4B;&#x65C5;&#xFF1B;</p>
<h3 id="&#x6587;&#x5B57;-Text-&#x7684;&#x58F0;&#x660E;"><a href="#&#x6587;&#x5B57;-Text-&#x7684;&#x58F0;&#x660E;" class="headerlink" title="&#x6587;&#x5B57; Text &#x7684;&#x58F0;&#x660E;"></a>&#x6587;&#x5B57; Text &#x7684;&#x58F0;&#x660E;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;setContent {    </span><br><span class="line">    Text(&quot;&#x8001;A&quot;)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6211;&#x4EEC;&#x7684;&#x7A0B;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x754C;&#x9762;&#x4E0A;&#x770B;&#x5230; &#x8001;A</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/02589d8a13e47dfc84c21baeaf54a5ef9683383841a79e21b54ab1d01ab4a044" alt></p>
<p>Text &#x51FD;&#x6570;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x5927;&#x5BB6;&#x6839;&#x636E; API &#x76F4;&#x63A5;&#x53BB;&#x63A2;&#x7D22;&#x4F7F;&#x7528;&#x5373;&#x53EF;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e51d81c4fbbc18a7db542cddf0ba38e9e32b3d8b1b3982fa6c920b793860b9da" alt></p>
<h3 id="&#x56FE;&#x7247;-Image-&#x7684;&#x58F0;&#x660E;"><a href="#&#x56FE;&#x7247;-Image-&#x7684;&#x58F0;&#x660E;" class="headerlink" title="&#x56FE;&#x7247; Image &#x7684;&#x58F0;&#x660E;"></a>&#x56FE;&#x7247; Image &#x7684;&#x58F0;&#x660E;</h3><p>&#x4F20;&#x7EDF; ImageView &#x663E;&#x793A;&#x56FE;&#x7247;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x79CD;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x4F4D;&#x56FE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; Bitmap&#xFF1B;&#x4E00;&#x79CD;&#x662F;&#x77E2;&#x91CF;&#x56FE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; VectorDrawable&#xFF1B;</p>
<p>&#x4F46;&#x662F;&#x5728; Compose &#x4E2D;&#x4F4D;&#x56FE;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684; API&#xFF0C;ImageBitmap&#xFF1B;&#x77E2;&#x91CF;&#x56FE;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x65B0;&#x7684; API&#xFF0C;ImageVector&#xFF1B;</p>
<p>&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x80FD;&#x5F88;&#x591A;&#x4EBA;&#x5C31;&#x4F1A;&#x6709;&#x7591;&#x95EE;&#x4E86;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x533A;&#x522B;&#x5F00;&#x6765;&#xFF1F;</p>
<p>&#x56E0;&#x4E3A; Compose &#x7684;&#x521D;&#x8877;&#x662F;&#x72EC;&#x7ACB;&#x4E8E; Android &#x5E73;&#x53F0;&#xFF0C;&#x8FD9;&#x4E2A; [&#x72EC;&#x7ACB;&#x4E8E;&#x5E73;&#x53F0;] &#x8BF4;&#x7684;&#x5C31;&#x662F;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x6700;&#x65B0;&#x7684; Android &#x7CFB;&#x7EDF;&#x624D;&#x80FD;&#x4F7F;&#x7528;&#xFF1B;</p>
<p>&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684; RecyclerView&#xFF0C;ViewPager2&#xFF0C;AppCompat&#xFF0C;&#x534F;&#x8C03;&#x8005;&#x5E03;&#x5C40;&#xFF0C;ViewModel &#x7B49;&#x7B49;&#x4E00;&#x7CFB;&#x5217; Jetpack &#x7EC4;&#x4EF6;&#xFF0C;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5E93;&#x51FA;&#x4E86;&#x65B0;&#x7248;&#x672C;&#x5C31;&#x80FD;&#x76F4;&#x63A5;&#x53D1;&#x5E03;&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7B49;&#x5347;&#x7EA7;&#x5230;&#x6700;&#x65B0;&#x7684; Android &#x7CFB;&#x7EDF;&#x7248;&#x672C;&#x4E4B;&#x540E;&#x624D;&#x80FD;&#x4F7F;&#x7528;&#xFF1B;</p>
<p>Compose &#x4E0D;&#x4EC5;&#x72EC;&#x7ACB;&#x4E0E;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684; Android &#xFF0C;&#x8FD8;&#x72EC;&#x7ACB;&#x4E8E; Android &#x5E73;&#x53F0;&#xFF1B;Compose &#x63D0;&#x4F9B;&#x7684;&#x6240;&#x6709; API &#x5168;&#x90FD;&#x4E0D;&#x5E26;&#x6709; Android &#x7684;&#x75D5;&#x8FF9;&#xFF1B;</p>
<p>&#x867D;&#x7136; Compose &#x4E0D;&#x5E26;&#x6709; Android &#x75D5;&#x8FF9;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x5E95;&#x5C42;&#x8FD8;&#x662F;&#x4F7F;&#x7528;&#x7684; Android &#x7684; <a href="/external_links/c4e3b662bc811f72b1c57fc96e27418c.html" target="blank" rel="noopener">drawText()&#x3001;drawTextRun()</a>(&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x8FD9;&#x4E2A;&#x94FE;&#x63A5;&#xFF0C;&#x9488;&#x5BF9;&#x8FD9;&#x4E24;&#x4E2A; api &#x7684;&#x4ECB;&#x7ECD;)&#x3001;Canvas &#x6765;&#x8FDB;&#x884C;&#x7684;&#x7ED8;&#x5236;&#xFF1B;</p>
<p>&#x66F4;&#x7CBE;&#x786E;&#x7684;&#x8BF4;&#xFF1A;&#x662F;&#x4E0A;&#x5C42;&#x66B4;&#x9732;&#x7ED9;&#x5F00;&#x53D1;&#x8005;&#x7684; API &#x662F;&#x72EC;&#x7ACB;&#x4E8E; Android &#x5E73;&#x53F0;&#x7684;&#xFF1B;</p>
<p>&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x56FE;&#x7247; &#x4F7F;&#x7528; Image&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x4F7F;&#x7528; drawable &#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x4F7F;&#x7528; painterResource &#x6765;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x8D44;&#x6E90; id&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Image(</span><br><span class="line">    painterResource(    </span><br><span class="line">        id = R.drawable.ic_launcher_foreground),    </span><br><span class="line">        contentDescription = resources.getString(R.string.app_name)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>painterResource &#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A; ImageBitmap &#x6216;&#x8005; ImageVector &#x5BF9;&#x8C61;&#xFF0C;&#x53D6;&#x51B3;&#x4E8E;&#x4F20;&#x9012;&#x8FDB;&#x53BB;&#x7684;&#x65F6;&#x5019;&#x4F4D;&#x56FE;&#x8FD8;&#x662F;&#x77E2;&#x91CF;&#x56FE;&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x5C31;&#x8DDF;&#x5916;&#x90E8;&#x8C03;&#x7528;&#x7684;&#x6CA1;&#x6709;&#x5173;&#x7CFB;&#x4E86;&#xFF1B;painter &#x8DDF; Android &#x4E2D;&#x7684; drawable &#x6BD4;&#x8F83;&#x7C7B;&#x4F3C;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528; painterResource &#x76F4;&#x63A5;&#x4F20;&#x9012;&#x4E00;&#x4E2A; ImageBitmap&#x3001;ImageVector &#x4E5F;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/5bc44bc9734bc80828968e5dfc5601ac354114717a5e6367824448435d451e44" alt></p>
<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0A;&#xFF1B;</p>
<p>&#x7F51;&#x7EDC;&#x56FE;&#x7247;&#x7684;&#x52A0;&#x8F7D;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x56FE;&#x7247;&#x5E93; <a href="/external_links/471f476bfd50ff4a05b4b613b0530325.html" target="blank" rel="noopener">Coil</a> &#xFF08;Android &#x5B98;&#x65B9;&#x63A8;&#x8350; Coroutine Image Loader&#xFF09;&#x8FD9;&#x4E2A;&#x5E93;&#x662F;&#x9762;&#x5411; kotlin &#x548C;&#x534F;&#x7A0B;&#x7684;&#xFF0C;&#x540C;&#x65F6;&#x5B83;&#x8FD8;&#x4E0D;&#x662F;&#x9762;&#x5411; View &#x7CFB;&#x7EDF;&#x7684;&#xFF0C;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/8f83aa866f56af80499588f6a147149f310bcd296a5a2e947d560d8c2d813926" alt></p>
<p>&#x4F7F;&#x7528;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x5F15;&#x5165;&#x4F9D;&#x8D56;&#x5373;&#x53EF;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;implementation(&quot;io.coil-kt:coil-compose:2.5.0&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x8FD8;&#x662F;&#x4F7F;&#x7528; Image &#x51FD;&#x6570;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;Image(    </span><br><span class="line">    rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),    </span><br><span class="line">    contentDescription = resources.getString(R.string.app_name),    </span><br><span class="line">    modifier = Modifier.size(150.dp)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>&#x53EA;&#x4E0D;&#x8FC7; painterResource &#x66FF;&#x6362;&#x6210;&#x4E86; rememberAsyncImagePainter&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x7F51;&#x7EDC;&#x56FE;&#x7247;url&#xFF0C;&#x5E76;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#xFF1B;</p>
<p>&#x8BBE;&#x7F6E;&#x56FE;&#x7247;&#x5C3A;&#x5BF8;&#xFF0C;&#x4F7F;&#x7528; Modifier &#x5173;&#x952E;&#x5B57;&#xFF1B;</p>
<p>&#x522B;&#x5FD8;&#x4E86;&#x6DFB;&#x52A0;&#x7F51;&#x7EDC;&#x6743;&#x9650;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bdddf80471bfda9c7f76f767f009ecbd32b712d7deea097cfcac7460868567c3" alt></p>
<p>&#x65E9;&#x671F;&#x7684; Coil &#x5E76;&#x6CA1;&#x6709;&#x652F;&#x6301; Jetpack Compose&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F7F;&#x7528;&#x7684; Coil &#x7248;&#x672C;&#x6BD4;&#x8F83;&#x4F4E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x5E93; <a href="/external_links/1b1ec67b543beae66e65d55cba64904e.html" target="blank" rel="noopener">Accompanist</a> </p>
<p>Image &#x7684;&#x5E95;&#x5C42;&#x4E5F;&#x662F;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x7684; Android &#x7684;&#x539F;&#x751F; API drawBitmap&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7EAF;&#x8272;&#xFF0C;&#x5C31;&#x662F; Canvas &#x7684; drawColor &#x7B49; API&#xFF1B;</p>
<h3 id="&#x56FE;&#x6807;-Icon-&#x7684;&#x58F0;&#x660E;"><a href="#&#x56FE;&#x6807;-Icon-&#x7684;&#x58F0;&#x660E;" class="headerlink" title="&#x56FE;&#x6807; Icon &#x7684;&#x58F0;&#x660E;"></a>&#x56FE;&#x6807; Icon &#x7684;&#x58F0;&#x660E;</h3><p>&#x5728; Compose &#x4E2D;&#xFF0C;&#x56FE;&#x6807;&#x7684;&#x58F0;&#x660E;&#x4F7F;&#x7528; Icon &#x51FD;&#x6570;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Column {</span><br><span class="line">    Icon(    </span><br><span class="line">        imageVector = Icons.Filled.Favorite, contentDescription = &quot;&quot;</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d1ac85ecfc63a2759aff00a5ed8ed9d096d4106a9d5dd70f652a893ac14e67ff" alt></p>
<p>Icon &#x7684;&#x7528;&#x6CD5;&#x57FA;&#x672C;&#x4E0A;&#x548C; Image &#x4E0A;&#x4E00;&#x6837;&#xFF1B;</p>
<h3 id="&#x6309;&#x94AE;-Button-&#x7684;&#x58F0;&#x660E;"><a href="#&#x6309;&#x94AE;-Button-&#x7684;&#x58F0;&#x660E;" class="headerlink" title="&#x6309;&#x94AE; Button &#x7684;&#x58F0;&#x660E;"></a>&#x6309;&#x94AE; Button &#x7684;&#x58F0;&#x660E;</h3><p>&#x5728;Compose&#x5F53;&#x4E2D;&#xFF0C;Button &#x548C; Text &#x4E4B;&#x95F4;&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x5173;&#x7CFB;&#x3002;&#x5B83;&#x4EEC;&#x662F;&#x4E24;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x63A7;&#x4EF6;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x5E38;&#x5B83;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x914D;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x624D;&#x884C;&#xFF1B;</p>
<p>&#x5148;&#x6765;&#x770B;&#x4E0B;&#x4E0D;&#x914D;&#x5408; Text &#x7684;&#x6548;&#x679C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Button(onClick = {}) {    }</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/cf4c113dd3d084f93b32c677900a4822696bcb3001ac6365a76d323f5292ad61" alt></p>
<p>&#x6309;&#x94AE;&#x662F;&#x6CA1;&#x6709;&#x6587;&#x6848;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x7ED9; Button &#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6587;&#x6848;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Button(onClick = {}) { </span><br><span class="line">    Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/702bde0a384eae90ed5c8ad678a4afaa869e6ecdd57957aec1156007931fed1f" alt></p>
<p>&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x5728; onClick = { } &#x4E2D;&#x5904;&#x7406;&#x5373;&#x53EF;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Button(onClick = {    </span><br><span class="line">    Toast.makeText(LocalContext.current as Context, &quot;&quot;, Toast.LENGTH_LONG).show()</span><br><span class="line">}) {    </span><br><span class="line">    Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x8F93;&#x5165;&#x6846;-TextFiled-&#x7684;&#x58F0;&#x660E;"><a href="#&#x8F93;&#x5165;&#x6846;-TextFiled-&#x7684;&#x58F0;&#x660E;" class="headerlink" title="&#x8F93;&#x5165;&#x6846; TextFiled &#x7684;&#x58F0;&#x660E;"></a>&#x8F93;&#x5165;&#x6846; TextFiled &#x7684;&#x58F0;&#x660E;</h3><p>&#x5728; Compose &#x4E2D;&#xFF0C;&#x4F7F;&#x7528; TextFiled &#x4EE3;&#x66FF;&#x4E86; EditText</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;var text by remember { mutableStateOf(&quot;&quot;) }</span><br><span class="line">TextField(</span><br><span class="line">    value = text, </span><br><span class="line">    onValueChange = {       </span><br><span class="line">        text = it                                </span><br><span class="line">    }, </span><br><span class="line">    label = {Text(text = &quot;&#x7528;&#x6237;&#x540D;&quot;)})</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1a97274ce94a33c9c8ade2d4191d24bd4556c54864efd02abb22b27ca4ac0a93" alt></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86; EditeText &#x7684;&#x6548;&#x679C;&#xFF0C;&#x8FD8;&#x662F; Material &#x98CE;&#x683C;&#x7684;&#xFF1B;</p>
<p>TextField &#x51FD;&#x6570;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x5176;&#x4ED6;&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x5927;&#x5BB6;&#x6839;&#x636E; API &#x76F4;&#x63A5;&#x53BB;&#x63A2;&#x7D22;&#x4F7F;&#x7528;&#x5373;&#x53EF;&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/8d2f546a1fb8522225ef69dc5e3140ed8b3775a04588a63632f56e48b2f5064e" alt></p>
<h3 id="&#x4F7F;&#x7528;-Layout-&#x7684;-Compose-&#x5E73;&#x66FF;"><a href="#&#x4F7F;&#x7528;-Layout-&#x7684;-Compose-&#x5E73;&#x66FF;" class="headerlink" title="&#x4F7F;&#x7528; Layout &#x7684; Compose &#x5E73;&#x66FF;"></a>&#x4F7F;&#x7528; Layout &#x7684; Compose &#x5E73;&#x66FF;</h3><p>Android &#x4E2D;&#x5E38;&#x7528;&#x7684;&#x5E03;&#x5C40;&#x6709; FrameLayout&#x3001; LinearLayout&#x3001;RelativeLayout&#x3001;ConstraintLayout&#x3001;ScrollView&#x3001;RecyclerView&#x3001;ViewPager &#x7B49;&#x7B49;</p>
<p>Compose &#x4E2D;&#x7684;&#x5E73;&#x66FF;&#x63A7;&#x4EF6;</p>
<p><strong>FrameLayout -&gt;  Box()</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Box {</span><br><span class="line">    Text(</span><br><span class="line">       text = &quot;&#x8001;A&quot;</span><br><span class="line">       color = Color(0XFF886600) </span><br><span class="line">    )</span><br><span class="line">    Image(</span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        contentDescription = resources.getString(R.string.app_name),        modifier = Modifier.size(150.dp)</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/de5ed3100aa772fe102084c56537c95d03596ea49277518c8b96100814b646ed" alt></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x548C;&#x4E0A;&#x9762;&#x622A;&#x56FE;&#x6392;&#x5217;&#x4E00;&#x6837;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4E0D;&#x4F7F;&#x7528;&#x5E03;&#x5C40;&#x63A7;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x5C31;&#x662F; FrameLayout&#x6392;&#x5217;&#xFF1B;</p>
<p><strong>LinearLayout -&gt; Column()&#x3001;Row()</strong> &#x8868;&#x793A;&#x7EB5;&#x5411;&#x548C;&#x6A2A;&#x5411;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Column {</span><br><span class="line">    Text(</span><br><span class="line">       text = &quot;&#x8001;A&quot;</span><br><span class="line">       color = Color(0XFF886600) </span><br><span class="line">    )</span><br><span class="line">    Image(</span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        contentDescription = resources.getString(R.string.app_name),        modifier = Modifier.size(150.dp)</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/4d956b6cf06e953e5b46dfb442f339f895b45038c05689426fa72a4e4c022386" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;Row {</span><br><span class="line">    Text(</span><br><span class="line">       text = &quot;&#x8001;A&quot;</span><br><span class="line">       color = Color.Blue</span><br><span class="line">    )</span><br><span class="line">    Image(</span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        contentDescription = resources.getString(R.string.app_name),        modifier = Modifier.size(150.dp)</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a966c191dd51f070c9439a42f57b2ea3226199eb4d059d130898ced9c638919e" alt></p>
<p><strong>RelativeLayout -&gt; Box()</strong></p>
<p>RelativeLayout &#x4E5F;&#x662F;&#x4F7F;&#x7528; Box &#x5E73;&#x66FF;&#xFF0C;&#x4F46;&#x662F;&#x901A;&#x8FC7; Modifier &#x6765;&#x4FEE;&#x6539;&#x76F8;&#x5BF9;&#x4F4D;&#x7F6E;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;Box(modifier = Modifier.border(2.dp, Color.Black).size(200.dp)){    </span><br><span class="line">    Text(        </span><br><span class="line">        text= &quot;&#x8001;A&quot;,        </span><br><span class="line">        color = Color.Blue    </span><br><span class="line">    )    </span><br><span class="line">    Image(        </span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">        contentDescription = resources.getString(R.string.app_name),        </span><br><span class="line">        modifier = Modifier.size(150.dp).align(Alignment.CenterEnd)    </span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c4f68ce2149583f9842acc439c2e900b3ca7a8b6050c8df99ea19ef2197ded74" alt></p>
<p><strong>ConstraintLayout -&gt;  ConstraintLayout for Compose</strong></p>
<p>&#x56E0;&#x4E3A;&#x7EA6;&#x675F;&#x5E03;&#x5C40;&#x975E;&#x5E38;&#x597D;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x5B98;&#x65B9;&#x4E3A;&#x6211;&#x4EEC;&#x8FC1;&#x79FB;&#x5230;&#x4E86; Compose &#x5E73;&#x53F0;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x63A7;&#x4EF6;&#xFF1B;&#x8FD9;&#x91CC;&#x5E76;&#x4E0D;&#x662F;&#x5957;&#x58F3;&#x652F;&#x6301;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x5B83;&#x4EEC;&#x7684;&#x903B;&#x8F91;&#x79FB;&#x690D;&#x5230;&#x4E86; Compose &#x91CC;&#x9762;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;implementation(&quot;androidx.constraintlayout:constraintlayout-compose:+&quot;)</span><br><span class="line"></span><br><span class="line">ConstraintLayout(modifier = Modifier    </span><br><span class="line">    .border(2.dp, Color.Black)    </span><br><span class="line">    .size(400.dp)    </span><br><span class="line">    .padding(10.dp)) {    </span><br><span class="line">    val (portraitImageRef, usernameTextRef, desTextRef) =  remember { createRefs() }    </span><br><span class="line">    Image(        </span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">        contentDescription = &quot;&quot;,        </span><br><span class="line">        modifier = Modifier.size(150.dp).constrainAs(portraitImageRef){            </span><br><span class="line">            top.linkTo(parent.top)            </span><br><span class="line">            bottom.linkTo(parent.bottom)            </span><br><span class="line">            start.linkTo(parent.start)        </span><br><span class="line">        })    </span><br><span class="line">    Text(        </span><br><span class="line">        text = &quot;&#x6211;&#x662F;&#x8001;A&quot;,        </span><br><span class="line">        fontSize = 16.sp,        </span><br><span class="line">        maxLines = 1,        </span><br><span class="line">        textAlign = TextAlign.Left,        </span><br><span class="line">        modifier = Modifier.constrainAs(usernameTextRef) {            </span><br><span class="line">            top.linkTo(portraitImageRef.top)            </span><br><span class="line">            start.linkTo(portraitImageRef.end, 10.dp)        </span><br><span class="line">        })    </span><br><span class="line">    Text(        </span><br><span class="line">        text = &quot;&#x8FD9;&#x662F;&#x6211;&#x7684;&#x4E2A;&#x4EBA;&#x63CF;&#x8FF0;&quot;,        </span><br><span class="line">        fontSize = 12.sp,        </span><br><span class="line">        maxLines = 1,        </span><br><span class="line">        color = Color.Red,        </span><br><span class="line">        fontWeight = FontWeight.Light,        </span><br><span class="line">        modifier = Modifier.constrainAs(desTextRef) {                </span><br><span class="line">            top.linkTo(usernameTextRef.bottom, 5.dp)            </span><br><span class="line">            start.linkTo(portraitImageRef.end, 10.dp)        </span><br><span class="line">        })</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a2bd3f51fbf32bca1c3027a48d6a84b8537b42f8e5d059fc246bfeeedd696b92" alt></p>
<h3 id="&#x4F7F;&#x7528;-RecyclerView&#xFF08;&#x7AD6;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-LazyColumn"><a href="#&#x4F7F;&#x7528;-RecyclerView&#xFF08;&#x7AD6;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-LazyColumn" class="headerlink" title="&#x4F7F;&#x7528; RecyclerView&#xFF08;&#x7AD6;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; LazyColumn"></a>&#x4F7F;&#x7528; RecyclerView&#xFF08;&#x7AD6;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; LazyColumn</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;val names = listOf(&quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;)</span><br><span class="line">LazyColumn { // &#x6CA1;&#x6709; adapter&#xFF0C;&#x6CA1;&#x6709; ViewHolder    </span><br><span class="line">    items(names.size) {        </span><br><span class="line">        Text(text = names[it])    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/86ce9b0e683532ea6eb613a3c03e08a8c4e7c2cc0b97210566d7e37a1b780f20" alt></p>
<p>items &#x662F;&#x904D;&#x5386;&#xFF0C;item &#x662F;&#x8BBE;&#x7F6E;&#x5355;&#x4E2A;&#x5217;&#x8868;&#x9879;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; item &#x6765;&#x6DFB;&#x52A0;header&#x3001;footer&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684; itemType&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x540C;&#x7684; ViewHolder&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;val names = listOf(&quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;)</span><br><span class="line">LazyColumn {    </span><br><span class="line">    item {        </span><br><span class="line">        Text(text = &quot;header&quot;)    </span><br><span class="line">    }    </span><br><span class="line">    items(names.size) {        </span><br><span class="line">        Text(text = names[it])    </span><br><span class="line">    }    </span><br><span class="line">    item {        </span><br><span class="line">        Text(text = &quot;footer&quot;)  </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d51aa5b9c8bc12dc0b9a1980f98f380c679efeb466253ccb734f14d61dc9b0cd" alt></p>
<p>&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684; itemType&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbnet&#x590D;&#x5236;&#x4EE3;&#x7801;val names = listOf(&quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;, &quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;, &quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;)</span><br><span class="line">LazyColumn {    </span><br><span class="line">    item {        </span><br><span class="line">        Text(text = &quot;header&quot;)    </span><br><span class="line">    }    </span><br><span class="line">    items(names.size) {        </span><br><span class="line">        Text(text = names[it])    </span><br><span class="line">    }    </span><br><span class="line">    item {        </span><br><span class="line">        Image(            </span><br><span class="line">            rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),            </span><br><span class="line">            contentDescription = resources.getString(R.string.app_name),            </span><br><span class="line">            modifier = Modifier.size(150.dp)        </span><br><span class="line">        )    </span><br><span class="line">    }    </span><br><span class="line">    items(names.size) {        </span><br><span class="line">        Text(text = names[it])    </span><br><span class="line">    }    </span><br><span class="line">    item {        </span><br><span class="line">        Image(            </span><br><span class="line">            rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),            </span><br><span class="line">            contentDescription = resources.getString(R.string.app_name),            </span><br><span class="line">            modifier = Modifier.size(150.dp)        </span><br><span class="line">        )    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/094df2e932762dc90383ea80bb57452c688630fdfdc796c43c7f12c672742f49" alt></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x76F4;&#x63A5;&#x5C31;&#x53EF;&#x4EE5;&#x6ED1;&#x52A8;&#x4E86;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x4E86; Rechyclerview &#x7684;&#x6548;&#x679C;&#xFF1B;</p>
<h3 id="&#x4F7F;&#x7528;-RecyclerView&#xFF08;&#x6A2A;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-LazyRow"><a href="#&#x4F7F;&#x7528;-RecyclerView&#xFF08;&#x6A2A;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-LazyRow" class="headerlink" title="&#x4F7F;&#x7528; RecyclerView&#xFF08;&#x6A2A;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; LazyRow"></a>&#x4F7F;&#x7528; RecyclerView&#xFF08;&#x6A2A;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; LazyRow</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">vbnet&#x590D;&#x5236;&#x4EE3;&#x7801;val names = listOf(&quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;, &quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;, &quot;Jordan&quot;, &quot;Kobe&quot;, &quot;James&quot;, &quot;Wade&quot;, &quot;Paul&quot;)</span><br><span class="line">LazyRow {    </span><br><span class="line">    item {        </span><br><span class="line">        Text(text = &quot;header&quot;)    </span><br><span class="line">    }    </span><br><span class="line">    items(names.size) {        </span><br><span class="line">        Text(text = names[it])    </span><br><span class="line">    }    </span><br><span class="line">    item {        </span><br><span class="line">        Image(            </span><br><span class="line">            rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),            </span><br><span class="line">            contentDescription = resources.getString(R.string.app_name),            </span><br><span class="line">            modifier = Modifier.size(150.dp)        </span><br><span class="line">        )    </span><br><span class="line">    }    </span><br><span class="line">    items(names.size) {        </span><br><span class="line">        Text(text = names[it])    </span><br><span class="line">    }    </span><br><span class="line">    item {        </span><br><span class="line">        Image(            </span><br><span class="line">            rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),            </span><br><span class="line">            contentDescription = resources.getString(R.string.app_name),            </span><br><span class="line">            modifier = Modifier.size(150.dp)        </span><br><span class="line">        )    </span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF0C;&#x6A2A;&#x5411;&#x6ED1;&#x52A8;&#x7684;&#x5217;&#x8868;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/628202f83e09de79f454597062ba20f4db4813ed1d9136b08e7e62d9857f9bba" alt></p>
<h3 id="&#x4F7F;&#x7528;-ScrollView&#xFF08;&#x7AD6;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-Modifier-verticalScroll"><a href="#&#x4F7F;&#x7528;-ScrollView&#xFF08;&#x7AD6;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-Modifier-verticalScroll" class="headerlink" title="&#x4F7F;&#x7528; ScrollView&#xFF08;&#x7AD6;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; Modifier.verticalScroll"></a>&#x4F7F;&#x7528; ScrollView&#xFF08;&#x7AD6;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; Modifier.verticalScroll</h3><p>Android &#x4E2D;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x6ED1;&#x52A8;&#x7EC4;&#x4EF6;&#xFF1A;ScrollView&#xFF0C;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x4E0D;&#x662F;&#x52A8;&#x6001;&#x7684;&#xFF0C;&#x5B83;&#x5185;&#x90E8;&#x7684;&#x5185;&#x5BB9;&#x90FD;&#x662F;&#x9884;&#x5148;&#x7F16;&#x6392;&#x597D;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x8BA9;&#x5B83;&#x81EA;&#x5DF1;&#x7B97;&#x7684;&#xFF0C;&#x5B83;&#x5185;&#x90E8;&#x7684;&#x5E03;&#x5C40;&#x4E5F;&#x662F;&#x5728;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x5C31;&#x52A0;&#x8F7D;&#x597D;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6ED1;&#x52A8;&#x5230;&#x4EC0;&#x4E48;&#x5730;&#x65B9;&#x624D;&#x52A0;&#x8F7D;&#xFF0C;&#x5982;&#x679C; ScrollView &#x52A0;&#x8F7D;&#x4E00;&#x4E2A;&#x5F88;&#x957F;&#x5F88;&#x957F;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x5185;&#x5B58;&#x6EA2;&#x51FA;&#x7684;&#xFF1B;</p>
<p>&#x800C;&#x5728; Compose &#x4E2D;&#x7684;&#x5E73;&#x66FF;&#x662F;&#x6CA1;&#x6709; ScrollView &#x7684;&#x6982;&#x5FF5;&#x7684;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x8981;&#x7ED9;&#x4F60;&#x9700;&#x8981;&#x6ED1;&#x52A8;&#x7684;&#x7EC4;&#x4EF6;&#x52A0;&#x4E0A; Modifier.verticalScroll() &#x51FD;&#x6570;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7AD6;&#x5411;&#x6ED1;&#x52A8;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;Column(Modifier.requiredSize(200.dp)    </span><br><span class="line">        .background(Color.Blue)    </span><br><span class="line">        .verticalScroll(rememberScrollState())) {    </span><br><span class="line">        repeat(20) {        </span><br><span class="line">            Text(            </span><br><span class="line">                text= &quot;&#x8001;A&quot;,            </span><br><span class="line">                color = Color.Red        </span><br><span class="line">            )    </span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d4ee58cc8420394baf273c9904f93b031d719ce31f4d2bf5fde3a851441a9cd5" alt></p>
<h3 id="&#x4F7F;&#x7528;-ScrollView&#xFF08;&#x6A2A;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-Modifier-horizontalScroll"><a href="#&#x4F7F;&#x7528;-ScrollView&#xFF08;&#x6A2A;&#x5411;&#xFF09;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-Modifier-horizontalScroll" class="headerlink" title="&#x4F7F;&#x7528; ScrollView&#xFF08;&#x6A2A;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; Modifier.horizontalScroll"></a>&#x4F7F;&#x7528; ScrollView&#xFF08;&#x6A2A;&#x5411;&#xFF09; &#x7684; Compose &#x5E73;&#x66FF; -&gt; Modifier.horizontalScroll</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;Row(Modifier.requiredSize(200.dp)    </span><br><span class="line">        .background(Color.Blue)    </span><br><span class="line">        .horizontalScroll(rememberScrollState())) {            repeat(20) {        </span><br><span class="line">            Text(            </span><br><span class="line">                text= &quot;&#x8001;A&quot;,            </span><br><span class="line">                color = Color.Red        </span><br><span class="line">            )    </span><br><span class="line">        }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/642661017dfe3daec7f3bc09f72f7b6f565684698e4694d9a7508c14026dbf82" alt></p>
<h3 id="&#x4F7F;&#x7528;-ViewPager-&#x7AD6;&#x5411;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-VerticalPager"><a href="#&#x4F7F;&#x7528;-ViewPager-&#x7AD6;&#x5411;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-VerticalPager" class="headerlink" title="&#x4F7F;&#x7528; ViewPager(&#x7AD6;&#x5411;) &#x7684; Compose &#x5E73;&#x66FF; -&gt; VerticalPager"></a>&#x4F7F;&#x7528; ViewPager(&#x7AD6;&#x5411;) &#x7684; Compose &#x5E73;&#x66FF; -&gt; VerticalPager</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;VerticalPager(10) { page -&gt;     </span><br><span class="line">    Text(        </span><br><span class="line">        text = &quot;Page: $page&quot;,        </span><br><span class="line">        modifier = Modifier.fillMaxWidth()    </span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c8af4b2ff2b0c0b2b8305c8e8327bb6e25a99dab74ed4ed51bcd4ed24b24a925" alt></p>
<h3 id="&#x4F7F;&#x7528;-ViewPager-&#x6A2A;&#x5411;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-HorizontalPager"><a href="#&#x4F7F;&#x7528;-ViewPager-&#x6A2A;&#x5411;-&#x7684;-Compose-&#x5E73;&#x66FF;-gt-HorizontalPager" class="headerlink" title="&#x4F7F;&#x7528; ViewPager(&#x6A2A;&#x5411;) &#x7684; Compose &#x5E73;&#x66FF; -&gt; HorizontalPager"></a>&#x4F7F;&#x7528; ViewPager(&#x6A2A;&#x5411;) &#x7684; Compose &#x5E73;&#x66FF; -&gt; HorizontalPager</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;HorizontalPager(10) { page -&gt;     </span><br><span class="line">    Text(        </span><br><span class="line">        text = &quot;Page: $page&quot;,        </span><br><span class="line">        modifier = Modifier.fillMaxWidth()    </span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x8FD0;&#x884C;&#x663E;&#x793A;&#x4E86;&#xFF0C;&#x5927;&#x5BB6;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x8FD0;&#x884C;&#x770B;&#x4E0B;&#x6548;&#x679C;</p>
<h2 id="Modifier"><a href="#Modifier" class="headerlink" title="Modifier"></a>Modifier</h2><h3 id="padding-amp-margin"><a href="#padding-amp-margin" class="headerlink" title="padding &amp; margin"></a>padding &amp; margin</h3><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x53BB;&#x5199;&#x5E03;&#x5C40;&#x4E86;&#xFF0C;&#x5176;&#x4E2D;&#x7EBF;&#x6027;&#x5E03;&#x5C40;&#x662F;&#x6211;&#x4EEC;&#x5F00;&#x6CD5;&#x4E2D;&#x7528;&#x7684;&#x6700;&#x591A;&#x7684;&#x5E03;&#x5C40;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x5E76;&#x4E0D;&#x53EA;&#x662F;&#x5728;&#x90A3;&#x653E;&#x4E00;&#x4E2A;&#x7EBF;&#x6027;&#x5E03;&#x5C40;&#x5C31;OK&#x4E86;&#xFF0C;&#x800C;&#x662F;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x5F88;&#x591A;&#x5F88;&#x591A;&#x7684;&#x7EC6;&#x8282;&#x8BBE;&#x7F6E;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x53BB;&#x8BBE;&#x7F6E;&#x4E00;&#x4E9B;&#x8FB9;&#x8DDD;&#xFF0C;margin&#x3001;padding &#x7B49;&#x7B49;&#xFF0C;&#x800C;&#x5728; Compose &#x4E2D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x65B9;&#x5F0F;&#x6765;&#x8BBE;&#x7F6E;&#x8FB9;&#x8DDD;&#xFF0C;&#x5B83;&#x5C31;&#x662F; Modifier&#xFF1B;</p>
<p>Modifier &#x662F; Compose &#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x89D2;&#x8272;&#xFF0C;UI &#x7684;&#x5F88;&#x591A;&#x8BBE;&#x7F6E;&#x90FD;&#x662F;&#x901A;&#x8FC7; Modifier &#x6765;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x901A;&#x8FC7;&#x5B98;&#x65B9;&#x6587;&#x6863;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#xFF0C;Modifier &#x6709;&#x5982;&#x4E0B;&#x56DB;&#x4E2A;&#x4F5C;&#x7528;&#xFF1A;</p>
<p>&#x501F;&#x52A9;&#x4FEE;&#x9970;&#x7B26;&#xFF08;Modifier&#xFF09;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4FEE;&#x9970;&#x6216;&#x6269;&#x5145;&#x53EF;&#x7EC4;&#x5408;&#x9879;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4FEE;&#x9970;&#x7B26;&#xFF08;Modifier&#xFF09;&#x6765;&#x6267;&#x884C;&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#xFF1A;</p>
<ul>
<li>&#x66F4;&#x6539;&#x53EF;&#x7EC4;&#x5408;&#x9879;&#x7684;&#x5927;&#x5C0F;&#x3001;&#x5E03;&#x5C40;&#x3001;&#x884C;&#x4E3A;&#x548C;&#x5916;&#x89C2;&#xFF1B;</li>
<li>&#x6DFB;&#x52A0;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x65E0;&#x969C;&#x788D;&#x6807;&#x7B7E;&#xFF1B;</li>
<li>&#x5904;&#x7406;&#x7528;&#x6237;&#x8F93;&#x5165;&#xFF1B;</li>
<li>&#x6DFB;&#x52A0;&#x9AD8;&#x7EA7;&#x4E92;&#x52A8;&#xFF0C;&#x5982;&#x4F7F;&#x5143;&#x7D20;&#x53EF;&#x70B9;&#x51FB;&#x3001;&#x53EF;&#x6EDA;&#x52A8;&#x3001;&#x53EF;&#x62D6;&#x52A8;&#x6216;&#x53EF;&#x7F29;&#x653E;&#xFF1B;</li>
</ul>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x60F3;&#x7ED9;&#x4E00;&#x4E2A; Row &#x8BBE;&#x7F6E;&#x4E00;&#x4E2A; 10dp &#x7684; padding&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x5B9E;&#x73B0;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;Row(Modifier.padding(8.dp)) {</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F; Compose &#x4E2D;&#x7684; Modifier &#x662F;&#x6CA1;&#x6709; margin &#x7684;&#x6982;&#x5FF5;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x5728; Andriod &#x4E2D;&#x4F7F;&#x7528; padding &#x548C; margin &#x6765;&#x8BBE;&#x7F6E;&#x5185;&#x8FB9;&#x8DDD;&#x548C;&#x5916;&#x8FB9;&#x8DDD;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x56E0;&#x4E3A;&#x80CC;&#x666F;&#x8272;&#x7684;&#x539F;&#x56E0;&#xFF0C;margin &#x662F;&#x5916;&#x8FB9;&#x8DDD;&#xFF0C;&#x5B83;&#x662F;&#x4E0D;&#x5305;&#x542B;&#x5728;&#x80CC;&#x666F;&#x4E4B;&#x5185;&#x7684;&#xFF0C;&#x800C; padding &#x5B83;&#x662F;&#x5185;&#x8FB9;&#x8DDD;&#xFF1B;</p>
<p>&#x6211;&#x4EEC;&#x5728; Compose &#x4E2D;&#x8BBE;&#x7F6E;&#x80CC;&#x666F;&#x8272;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E5F;&#x662F;&#x901A;&#x8FC7; Modifier &#x6765;&#x6267;&#x884C;&#x7684;&#xFF0C;Modifier.background()&#xFF0C;&#x4F46;&#x662F; Modifier &#x5BF9;&#x8C03;&#x7528;&#x987A;&#x5E8F;&#x662F;&#x6709;&#x5148;&#x540E;&#x8981;&#x6C42;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x4E0B;&#x9762;&#x7684;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4EE5;&#x53CA;&#x6211;&#x4EEC;&#x5982;&#x679C;&#x548C;&#x901A;&#x8FC7; padding &#x6765;&#x5B9E;&#x73B0; margin &#x7684;&#x6548;&#x679C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;Row(    </span><br><span class="line">    Modifier        </span><br><span class="line">        .background(Color.Red)        </span><br><span class="line">        .padding(10.dp)) {    </span><br><span class="line">    Image(        </span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">        contentDescription = resources.getString(R.string.app_name),        </span><br><span class="line">        modifier = Modifier.size(150.dp)    </span><br><span class="line">    )        </span><br><span class="line">    </span><br><span class="line">    Text(</span><br><span class="line">        text = &quot;&#x6211;&#x662F;&#x8001;A&quot;, </span><br><span class="line">        Modifier.background(Color.Green).padding(10.dp)</span><br><span class="line">    )    </span><br><span class="line"></span><br><span class="line">    Text(</span><br><span class="line">        text = &quot;&#x8001;A&#x662F;&#x6211;&quot;, </span><br><span class="line">        Modifier.padding(10.dp).background(Color.Green)</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/ed1eb06b542e01b9c2c7477fdc6510bb633bfe06c55e149b009641e2047ae325" alt></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230; &#x6211;&#x662F;&#x8001;A &#x662F;&#x628A;&#x80CC;&#x666F;&#x8272;&#x5305;&#x542B;&#x8FDB;&#x6765;&#x4E86;&#xFF0C;&#x800C; &#x8001;A&#x662F;&#x6211; &#x662F;&#x4E0D;&#x5305;&#x542B;&#x7684;&#xFF0C;&#x4E5F;&#x662F; Modifier  &#x7684;&#x4E00;&#x4E2A;&#x7279;&#x70B9;&#xFF0C;<strong>&#x8BBE;&#x7F6E;&#x6709;&#x5148;&#x540E;</strong>&#xFF1B;</p>
<p>&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EA;&#x9700;&#x8981; padding &#x8FD9;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF1B;</p>
<h3 id="background"><a href="#background" class="headerlink" title="background"></a>background</h3><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/db1539092b1ace5f329294ae215d645a80c598c8ce78d0ec2b330c6fe41069d6" alt></p>
<p>&#x6211;&#x4EEC;&#x770B;&#x5230;&#xFF0C;background &#x5176;&#x5B9E;&#x662F;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x80CC;&#x666F;&#x8272;&#xFF0C;&#x4E00;&#x4E2A;&#x662F; Shape&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5F62;&#x72B6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED9; background &#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5F62;&#x72B6;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x6548;&#x679C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;Row(    </span><br><span class="line">    Modifier        </span><br><span class="line">        .background(Color.Red, RoundedCornerShape(10.dp)) // &#x7ED9;&#x80CC;&#x666F;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5706;&#x89D2;        </span><br><span class="line">        .padding(10.dp)) {    </span><br><span class="line">    Image(        </span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">        contentDescription = resources.getString(R.string.app_name),        </span><br><span class="line">        modifier = Modifier.size(150.dp)    </span><br><span class="line">    )        </span><br><span class="line">    </span><br><span class="line">    Text(</span><br><span class="line">        text = &quot;&#x6211;&#x662F;&#x8001;A&quot;, </span><br><span class="line">        Modifier.background(Color.Green).padding(10.dp)</span><br><span class="line">    )    </span><br><span class="line"></span><br><span class="line">    Text(</span><br><span class="line">        text = &quot;&#x8001;A&#x662F;&#x6211;&quot;, </span><br><span class="line">        Modifier.padding(10.dp).background(Color.Green)</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a35eaa47fc0da5724275467b28d85630875287eb8a53bf96fa1bd7043f2da248" alt></p>
<p>&#x6211;&#x4EEC;&#x7684; CardView&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; Modifier &#x6765;&#x5B9E;&#x73B0;&#xFF1B;</p>
<h3 id="clip-shape-Shape"><a href="#clip-shape-Shape" class="headerlink" title="clip(shape: Shape)"></a>clip(shape: Shape)</h3><p>Modifier &#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5207;&#x5272;&#x51FD;&#x6570; clip&#xFF0C;&#x53EF;&#x4EE5;&#x5207;&#x5404;&#x79CD;&#x4E1C;&#x897F;&#xFF0C;&#x4F8B;&#x5982;&#x53EF;&#x4EE5;&#x5207;&#x56FE;&#x7247;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;Row(    </span><br><span class="line">    Modifier        </span><br><span class="line">        .background(Color.Red, RoundedCornerShape(10.dp)) // &#x7ED9;&#x80CC;&#x666F;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x5706;&#x89D2;        </span><br><span class="line">        .padding(10.dp)) {    </span><br><span class="line">    Image(        </span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">        contentDescription = resources.getString(R.string.app_name), </span><br><span class="line">        // &#x5C06;&#x56FE;&#x7247;&#x5207;&#x6210;&#x5706;&#x7684;       </span><br><span class="line">        modifier = Modifier.clip(CircleShape).size(150.dp)    </span><br><span class="line">    )        </span><br><span class="line">    </span><br><span class="line">    Text(</span><br><span class="line">        text = &quot;&#x6211;&#x662F;&#x8001;A&quot;, </span><br><span class="line">        Modifier.background(Color.Green).padding(10.dp)</span><br><span class="line">    )    </span><br><span class="line"></span><br><span class="line">    Text(</span><br><span class="line">        text = &quot;&#x8001;A&#x662F;&#x6211;&quot;, </span><br><span class="line">        Modifier.padding(10.dp).background(Color.Green)</span><br><span class="line">    )</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/5702e6dd0fec3cb6d74a9c9dee56d9ff65dacda716ffc625604c9716c3edd0b9" alt></p>
<p>&#x56E0;&#x4E3A;&#x56FE;&#x7247;&#x7684;&#x5DE6;&#x53F3;&#x662F;&#x900F;&#x660E;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x770B;&#x4E0D;&#x51FA;&#x6765;&#x6548;&#x679C;&#xFF1B;&#x5DF2;&#x7ECF;&#x628A;&#x56FE;&#x7247;&#x5207;&#x5272;&#x6210;&#x5706;&#x7684;&#x4E86;&#xFF1B;</p>
<h3 id="layout-width-amp-layout-height-&#x7684;-Compose-&#x5E73;&#x66FF;-size"><a href="#layout-width-amp-layout-height-&#x7684;-Compose-&#x5E73;&#x66FF;-size" class="headerlink" title="layout_width &amp; layout_height &#x7684; Compose &#x5E73;&#x66FF; size"></a>layout_width &amp; layout_height &#x7684; Compose &#x5E73;&#x66FF; size</h3><p>layout_width &#x53EF;&#x4EE5;&#x7528; width &#x6765;&#x66FF;&#x6362;&#xFF0C;layout_height &#x53EF;&#x4EE5;&#x7528; height &#x6765;&#x66FF;&#x6362;&#xFF0C;&#x5982;&#x679C;&#x5BBD;&#x9AD8;&#x4E00;&#x6837;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; size</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;Row(    </span><br><span class="line">    Modifier        </span><br><span class="line">        .background(Color.Red, RoundedCornerShape(10.dp))        </span><br><span class="line">        .width(400.dp) // &#x8BBE;&#x7F6E;&#x5BBD;&#x5EA6;       </span><br><span class="line">        .height(800.dp) // &#x8BBE;&#x7F6E;&#x9AD8;&#x5EA6;       </span><br><span class="line">        .padding(10.dp)) {    </span><br><span class="line">    Image(        </span><br><span class="line">        rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">        contentDescription = resources.getString(R.string.app_name),        </span><br><span class="line">        modifier = Modifier.clip(CircleShape).size(150.dp)    </span><br><span class="line">    )        </span><br><span class="line">    Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;, Modifier.background(Color.Green).padding(10.dp))    </span><br><span class="line">    Text(text = &quot;&#x8001;A&#x662F;&#x6211;&quot;, Modifier.padding(10.dp).background(Color.Green))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728; Android &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5F3A;&#x5236;&#x7ED9;&#x6BCF;&#x4E2A;&#x63A7;&#x4EF6;&#x58F0;&#x660E; width &#x548C; height&#xFF0C;&#x4F46;&#x662F;&#x5728; Compose &#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E76;&#x4E0D;&#x662F;&#x5F3A;&#x5236;&#x7684;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x7EC4;&#x4EF6;&#x90FD;&#x6709;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#xFF0C;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#x5C31;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x5199;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x662F;&#x4F20;&#x7EDF; View &#x7684; wrap_content &#x7684;&#x4E86;&#xFF1B;</p>
<p>&#x5982;&#x679C;&#x60F3;&#x4F7F;&#x7528;&#x7C7B;&#x4F3C; match_parent &#x7684;&#xFF0C;&#x5219;&#x4F7F;&#x7528; Modifier.fillMaxWidth/ fillMaxHeight/ fillMaxSize &#x51FD;&#x6570;&#xFF1B;</p>
<h3 id="&#x7ED9;-Text-&#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x548C;&#x5927;&#x5C0F;"><a href="#&#x7ED9;-Text-&#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x548C;&#x5927;&#x5C0F;" class="headerlink" title="&#x7ED9; Text &#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x548C;&#x5927;&#x5C0F;"></a>&#x7ED9; Text &#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x548C;&#x5927;&#x5C0F;</h3><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x7ED9; Text &#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x548C;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x80FD;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x6211;&#x4EEC;&#x5C31;&#x60F3;&#x5230;&#x4E86;&#x4F7F;&#x7528; Modifier&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x53EF;&#x80FD;&#x6CA1;&#x6709;&#x4F60;&#x60F3;&#x7684;&#x90A3;&#x4E48;&#x7B80;&#x5355;&#xFF0C;Modifier &#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x76F8;&#x5173;API&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F80;&#x4E0A;&#x770B; Text &#x7684;&#x57FA;&#x7840;&#x4F7F;&#x7528;&#xFF0C;&#x53D1;&#x73B0;&#x5176;&#x5B9E; Text &#x7684; API &#x63D0;&#x4F9B;&#x4E86;&#x76F8;&#x5173;&#x8BBE;&#x7F6E;&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/bbc56bfa1e26bfb70b3283fec9080863c745437dc4eaf077a164b9b65ecf191c" alt></p>
<p>&#x6211;&#x4EEC;&#x5728;&#x58F0;&#x660E; Text &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x4F7F;&#x7528; color &#x548C; fontSize &#x6765;&#x8BBE;&#x7F6E;&#x989C;&#x8272;&#x548C;&#x5927;&#x5C0F;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x901A;&#x8FC7; Modifier&#xFF0C;&#x5230;&#x8FD9;&#x91CC;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x80FD;&#x5927;&#x5BB6;&#x5C31;&#x6BD4;&#x8F83;&#x8FF7;&#x7CCA;&#x4E86;&#xFF0C;&#x4E3A;&#x5565;&#x8FD8;&#x4E0D;&#x7EDF;&#x4E00;&#x5462;&#xFF0C;&#x662F;&#x4E0D;&#x662F; Jetpack Compose &#x7684;&#x4F5C;&#x8005;&#x8111;&#x5B50;&#x6CA1;&#x60F3;&#x597D;&#x5462;&#xFF1F;&#x7136;&#x800C;&#x5E76;&#x4E0D;&#x662F;&#xFF0C;&#x56E0;&#x4E3A; Compose &#x5BF9;&#x4E8E; Android &#x56E2;&#x961F;&#x6765;&#x8BF4;&#xFF0C;&#x662F;&#x4E00;&#x6B21;&#x91CD;&#x8981;&#x7684;&#x9769;&#x547D;&#xFF0C;Android &#x56E2;&#x961F;&#x5176;&#x5B9E;&#x5728; Compose &#x4E0A;&#x4E0B;&#x4E86;&#x5F88;&#x5927;&#x7684;&#x529F;&#x592B;&#x7684;&#xFF1B;&#x5224;&#x65AD;&#x662F; Modifier &#x8FD8;&#x662F;&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x5B9E;&#x5F88;&#x7B80;&#x5355;&#xFF1A;</p>
<p>**&#x901A;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x4F7F;&#x7528; Modifier&#xFF1B;**<strong>&#x4E13;&#x9879;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x4F7F;&#x7528;&#x51FD;&#x6570;&#x53C2;&#x6570;</strong>&#xFF1B;</p>
<h3 id="&#x7ED9;&#x63A7;&#x4EF6;&#x8BBE;&#x7F6E;&#x70B9;&#x51FB;&#x76D1;&#x542C;"><a href="#&#x7ED9;&#x63A7;&#x4EF6;&#x8BBE;&#x7F6E;&#x70B9;&#x51FB;&#x76D1;&#x542C;" class="headerlink" title="&#x7ED9;&#x63A7;&#x4EF6;&#x8BBE;&#x7F6E;&#x70B9;&#x51FB;&#x76D1;&#x542C;"></a>&#x7ED9;&#x63A7;&#x4EF6;&#x8BBE;&#x7F6E;&#x70B9;&#x51FB;&#x76D1;&#x542C;</h3><p>Android &#x4E2D;&#x5176;&#x5B9E;&#x4EFB;&#x4F55;&#x63A7;&#x4EF6;&#x90FD;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x7684;&#xFF0C;&#x8FD9;&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x901A;&#x7528;&#x7684;&#x8BBE;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; Modifier &#x6765;&#x7ED9;&#x4EFB;&#x610F;&#x7684;&#x63A7;&#x4EF6;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x76D1;&#x542C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;Row(    </span><br><span class="line">    Modifier        </span><br><span class="line">        .background(Color.Red, RoundedCornerShape(10.dp))        </span><br><span class="line">        .width(400.dp)        </span><br><span class="line">        .height(800.dp)        </span><br><span class="line">        .padding(10.dp) </span><br><span class="line">        // &#x7ED9; Row &#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x76D1;&#x542C;       </span><br><span class="line">        .clickable {            </span><br><span class="line">            Toast.makeText(context, &quot;&#x6211;&#x662F; Row&#xFF0C;&#x6211;&#x88AB;&#x70B9;&#x51FB;&#x4E86;&quot;, Toast.LENGTH_LONG).show()        </span><br><span class="line">        }) {    </span><br><span class="line">            Image(        </span><br><span class="line">                rememberAsyncImagePainter(&quot;https://img2.baidu.com/it/u=1866466367,1635278877&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=734&quot;),        </span><br><span class="line">                contentDescription = resources.getString(R.string.app_name),        </span><br><span class="line">                modifier = Modifier.clip(CircleShape).size(150.dp)    </span><br><span class="line">            )        </span><br><span class="line">            Text(text = &quot;&#x6211;&#x662F;&#x8001;A&quot;, Modifier.background(Color.Green).padding(10.dp))    </span><br><span class="line">            Text(text = &quot;&#x8001;A&#x662F;&#x6211;&quot;, Modifier.padding(10.dp).background(Color.Green))</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD0;&#x884C;&#x6548;&#x679C;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/9fdc001218298e0ea7fa48339268cf1b6ef6ad8ef257132ef1b8b33ed60b5195" alt></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x88AB;&#x6267;&#x884C;&#x4E86;&#xFF1B;</p>
<p>&#x597D;&#x4E86;&#xFF0C;Compose &#x7684;&#x521D;&#x63A2;&#xFF0C;&#x5C31;&#x5148;&#x5230;&#x8FD9;&#x91CC;&#x5427;~~</p>
<h2 id="&#x4E0B;&#x4E00;&#x8282;&#x9884;&#x544A;"><a href="#&#x4E0B;&#x4E00;&#x8282;&#x9884;&#x544A;" class="headerlink" title="&#x4E0B;&#x4E00;&#x8282;&#x9884;&#x544A;"></a>&#x4E0B;&#x4E00;&#x8282;&#x9884;&#x544A;</h2><p>&#x72B6;&#x6001;&#x8BA2;&#x9605;&#x548C;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#xFF1B;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/6cbb2267c0e528635cd487298c7fda93.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../87/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../87/">87</a><span class="page-number current">88</span><a class="page-number" href="../89/">89</a><span class="space">&hellip;</span><a class="page-number" href="../178/">178</a><a class="extend next" rel="next" href="../89/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">1775</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">725</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
