<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/291/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/291/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935619017575137317.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935619017575137317.html" itemprop="url">Spring Boot 2x基础教程：使用MongoDB</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T10:24:50+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x524D;&#x6BB5;&#x65F6;&#x95F4;&#x56E0;&#x4E3A;&#x56E2;&#x961F;&#x8C03;&#x6574;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x65F6;&#x95F4;&#x653E;&#x5728;&#x4E86;&#x56E2;&#x961F;&#x4E0A;&#xFF0C;&#x8FD9;&#x7CFB;&#x5217;&#x7684;&#x66F4;&#x65B0;&#x53C8;&#x803D;&#x8BEF;&#x4E86;&#x4E00;&#x4E0B;&#x3002;&#x4F46;&#x65E2;&#x7136;&#x627F;&#x8BFA;&#x6301;&#x4E45;&#x66F4;&#x65B0;&#xFF0C;&#x90A3;&#x5C31;&#x4E0D;&#x4F1A;&#x843D;&#x4E0B;&#xFF0C;&#x4ECA;&#x5929;&#x5F00;&#x59CB;&#x7EE7;&#x7EED;&#x66F4;&#x65B0;&#x8FD9;&#x90E8;&#x5206;&#x7684;&#x5185;&#x5BB9;&#xFF01;</p>
<p>&#x8FC7;&#x4E86;&#x5E74;&#xFF0C;&#x91CD;&#x7533;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x7CFB;&#x5217;&#x7684;&#x76EE;&#x6807;&#xFF1A;&#x76EE;&#x524D;&#x4E3B;&#x8981;&#x4EFB;&#x52A1;&#x5C31;&#x662F;&#x628A;Spring Boot 1.x&#x90E8;&#x5206;&#x6CA1;&#x6709;&#x5347;&#x7EA7;&#x7684;&#x5185;&#x5BB9;&#x505A;&#x5B8C;&#x5347;&#x7EA7;&#x3002;&#x6211;&#x4F1A;&#x5C06;&#x56E0;&#x4E3A;&#x7248;&#x672C;&#x5347;&#x7EA7;&#x800C;&#x4EA7;&#x751F;&#x7684;&#x53D8;&#x5316;&#x505A;&#x4E00;&#x4E9B;&#x8BF4;&#x660E;&#xFF0C;&#x8FD9;&#x6837;&#x4E0D;&#x8BBA;&#x4F4E;&#x7248;&#x672C;&#x7684;&#x8BFB;&#x8005;&#x8FD8;&#x662F;&#x9AD8;&#x7248;&#x672C;&#x7684;&#x8BFB;&#x8005;&#x90FD;&#x80FD;&#x627E;&#x5230;&#x81EA;&#x5DF1;&#x60F3;&#x8981;&#x7684;&#x90E8;&#x5206;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x8FD9;&#x6B21;&#x505A;2.x&#x7248;&#x672C;&#x5347;&#x7EA7;&#x7684;&#x91CD;&#x8981;&#x539F;&#x56E0;&#xFF0C;&#x5C3D;&#x91CF;&#x907F;&#x514D;&#x6216;&#x51CF;&#x5C11;&#x6709;&#x8BFB;&#x8005;&#x7528;&#x7740;&#x9AD8;&#x7248;&#x672C;&#x53C2;&#x8003;&#x6211;&#x8FD9;&#x8FB9;&#x4F4E;&#x7248;&#x672C;&#x7684;&#x5B9E;&#x73B0;&#x800C;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x5F00;&#x59CB;&#x95EE;&#x5019;&#x6211;&#x5BB6;&#x4EBA;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x5728;&#x5B8C;&#x6210;&#x4E0A;&#x8FF0;&#x6240;&#x6709;&#x7684;&#x66F4;&#x65B0;&#x4E4B;&#x540E;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x66F4;&#x65B0;&#x5185;&#x5BB9;&#x5C06;&#x4F1A;&#x96C6;&#x4E2D;&#x5728;&#x5173;&#x4E8E;Spring Boot&#x7684;&#x4E00;&#x4E9B;&#x8FDB;&#x9636;&#x5185;&#x5BB9;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;&#x8981;&#x505A;&#x4EC0;&#x4E48;&#x6269;&#x5C55;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8BE5;&#x4ECE;&#x54EA;&#x91CC;&#x7740;&#x624B;&#x7B49;&#x3002;</p>
<p>&#x5982;&#x679C;&#x662F;&#x60A8;&#x662F;Spring Boot&#x7684;&#x4F7F;&#x7528;&#x8005;&#xFF0C;&#x90A3;&#x4E48;&#x4E00;&#x5B9A;&#x8981;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#xFF01;&#x540E;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x7CBE;&#x5F69;&#xFF01;</p>
<p>&#x4E0B;&#x9762;&#x56DE;&#x5F52;&#x4ECA;&#x5929;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x5982;&#x4F55;&#x5728;Spring Boot&#x4E2D;&#x4F7F;&#x7528;MongoDB&#xFF01;</p>
<h2 id="MongoDB&#x7B80;&#x4ECB;"><a href="#MongoDB&#x7B80;&#x4ECB;" class="headerlink" title="MongoDB&#x7B80;&#x4ECB;"></a>MongoDB&#x7B80;&#x4ECB;</h2><p>MongoDB&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x4ECB;&#x4E8E;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x548C;&#x975E;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x4E4B;&#x95F4;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x76EE;&#x6807;&#x662F;&#x5728;&#x952E;/&#x503C;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF08;&#x63D0;&#x4F9B;&#x4E86;&#x9AD8;&#x6027;&#x80FD;&#x548C;&#x9AD8;&#x5EA6;&#x4F38;&#x7F29;&#x6027;&#xFF09;&#x548C;&#x4F20;&#x7EDF;&#x7684;RDBMS&#x7CFB;&#x7EDF;&#xFF08;&#x5177;&#x6709;&#x4E30;&#x5BCC;&#x7684;&#x529F;&#x80FD;&#xFF09;&#x4E4B;&#x95F4;&#x67B6;&#x8D77;&#x4E00;&#x5EA7;&#x6865;&#x6881;&#xFF0C;&#x5B83;&#x96C6;&#x4E24;&#x8005;&#x7684;&#x4F18;&#x52BF;&#x4E8E;&#x4E00;&#x8EAB;&#x3002;</p>
<p>MongoDB&#x652F;&#x6301;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x975E;&#x5E38;&#x677E;&#x6563;&#xFF0C;&#x662F;&#x7C7B;&#x4F3C;json&#x7684;bson&#x683C;&#x5F0F;&#xFF0C;&#x56E0;&#x6B64;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4E5F;&#x56E0;&#x4E3A;&#x4ED6;&#x7684;&#x5B58;&#x50A8;&#x683C;&#x5F0F;&#x4E5F;&#x4F7F;&#x5F97;&#x5B83;&#x6240;&#x5B58;&#x50A8;&#x7684;&#x6570;&#x636E;&#x5728;Nodejs&#x7A0B;&#x5E8F;&#x5E94;&#x7528;&#x4E2D;&#x4F7F;&#x7528;&#x975E;&#x5E38;&#x6D41;&#x7545;&#x3002;</p>
<p>&#x65E2;&#x7136;&#x79F0;&#x4E3A;NoSQL&#x6570;&#x636E;&#x5E93;&#xFF0C;Mongo&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#xFF0C;&#x5176;&#x8BED;&#x6CD5;&#x6709;&#x70B9;&#x7C7B;&#x4F3C;&#x4E8E;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#xFF0C;&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x7C7B;&#x4F3C;&#x5173;&#x7CFB;&#x6570;&#x636E;&#x5E93;&#x5355;&#x8868;&#x67E5;&#x8BE2;&#x7684;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x652F;&#x6301;&#x5BF9;&#x6570;&#x636E;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;MongoDB&#x4E5F;&#x4E0D;&#x662F;&#x4E07;&#x80FD;&#x7684;&#xFF0C;&#x540C;MySQL&#x7B49;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x76F8;&#x6BD4;&#xFF0C;&#x5B83;&#x4EEC;&#x5728;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x548C;&#x4E8B;&#x52A1;&#x8981;&#x6C42;&#x4E0A;&#x90FD;&#x5B58;&#x5728;&#x81EA;&#x5DF1;&#x72EC;&#x7279;&#x7684;&#x4F18;&#x52BF;&#x3002;&#x5728;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7684;&#x9009;&#x62E9;&#x4E2D;&#xFF0C;&#x575A;&#x6301;&#x591A;&#x6837;&#x5316;&#x539F;&#x5219;&#xFF0C;&#x9009;&#x62E9;&#x66F4;&#x597D;&#x66F4;&#x7ECF;&#x6D4E;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x7684;&#x7EDF;&#x4E00;&#x5316;&#x3002;</p>
<p>&#x8F83;&#x5E38;&#x89C1;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;MongoDB&#x6765;&#x5B58;&#x50A8;&#x952E;&#x503C;&#x5BF9;&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#xFF1A;&#x9A8C;&#x8BC1;&#x7801;&#x3001;Session&#x7B49;&#xFF1B;&#x7531;&#x4E8E;MongoDB&#x7684;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x80FD;&#x529B;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x89C4;&#x6A21;&#x4F1A;&#x5728;&#x672A;&#x6765;&#x53D8;&#x7684;&#x975E;&#x5E38;&#x5DE8;&#x5927;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#xFF1A;&#x65E5;&#x5FD7;&#x3001;&#x8BC4;&#x8BBA;&#x7B49;&#xFF1B;&#x7531;&#x4E8E;MongoDB&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x5F31;&#x7C7B;&#x578B;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5B58;&#x50A8;&#x4E00;&#x4E9B;&#x591A;&#x53D8;json&#x6570;&#x636E;&#xFF0C;&#x5982;&#xFF1A;&#x4E0E;&#x5916;&#x7CFB;&#x7EDF;&#x4EA4;&#x4E92;&#x65F6;&#x7ECF;&#x5E38;&#x53D8;&#x5316;&#x7684;JSON&#x62A5;&#x6587;&#x3002;&#x800C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x5BF9;&#x6570;&#x636E;&#x6709;&#x590D;&#x6742;&#x7684;&#x9AD8;&#x4E8B;&#x52A1;&#x6027;&#x8981;&#x6C42;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#xFF1A;&#x8D26;&#x6237;&#x4EA4;&#x6613;&#x7B49;&#x5C31;&#x4E0D;&#x9002;&#x5408;&#x4F7F;&#x7528;MongoDB&#x6765;&#x5B58;&#x50A8;&#x3002;</p>
<p>MongoDB&#x5B98;&#x7F51;&#xFF1A;<a href="/external_links/39c6da4aa3833594f22fc66af0932794.html" target="blank" rel="noopener">www.mongodb.org/</a></p>
<h2 id="&#x52A8;&#x624B;&#x8BD5;&#x8BD5;"><a href="#&#x52A8;&#x624B;&#x8BD5;&#x8BD5;" class="headerlink" title="&#x52A8;&#x624B;&#x8BD5;&#x8BD5;"></a>&#x52A8;&#x624B;&#x8BD5;&#x8BD5;</h2><p><strong>&#x7B2C;&#x4E00;&#x6B65;</strong>&#xFF1A;&#x5F15;&#x5165;&#x4F9D;&#x8D56;</p>
<p>Spring Boot&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5728;pom.xml&#x4E2D;&#x52A0;&#x5165;spring-boot-starter-data-mongodb&#x5F15;&#x5165;&#x5BF9;mongodb&#x7684;&#x8BBF;&#x95EE;&#x652F;&#x6301;&#x4F9D;&#x8D56;&#x3002;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x4F9D;&#x8D56;spring-data-mongodb&#x3002;&#x662F;&#x7684;&#xFF0C;&#x60A8;&#x6CA1;&#x6709;&#x770B;&#x9519;&#xFF0C;&#x53C8;&#x662F;spring-data&#x7684;&#x5B50;&#x9879;&#x76EE;&#xFF0C;&#x4E4B;&#x524D;&#x4ECB;&#x7ECD;&#x8FC7;spring-data-jpa&#x3001;spring-data-redis&#xFF0C;&#x5BF9;&#x4E8E;mongodb&#x7684;&#x8BBF;&#x95EE;&#xFF0C;spring-data&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x5F3A;&#x5927;&#x7684;&#x652F;&#x6301;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x5F00;&#x59CB;&#x52A8;&#x624B;&#x8BD5;&#x8BD5;&#x5427;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><strong>&#x7B2C;&#x4E8C;&#x6B65;</strong>&#xFF1A;&#x521B;&#x5EFA;&#x7528;&#x6237;&#x5B9E;&#x4F53;<code>User</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Data</span><br><span class="line">public class User {</span><br><span class="line"></span><br><span class="line">    @Id</span><br><span class="line">    private Long id;</span><br><span class="line"></span><br><span class="line">    private String username;</span><br><span class="line">    private Integer age;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>&#x7B2C;&#x4E09;&#x6B65;</strong>&#xFF1A;&#x5B9E;&#x73B0;&#x7528;&#x6237;&#x5B9E;&#x4F53;<code>User</code>&#x7684;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;<code>UserRepository</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public interface UserRepository extends MongoRepository&lt;User, Long&gt; {</span><br><span class="line"></span><br><span class="line">    User findByUsername(String username);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;Spring Data&#x7684;&#x62BD;&#x8C61;&#x4E0B;&#xFF0C;&#x662F;&#x4E0D;&#x662F;&#x540C;&#x5176;&#x4ED6;Spring Data&#x5B50;&#x9879;&#x76EE;&#x4E00;&#x6837;&#x7684;&#x7B80;&#x6D01;&#x3001;&#x597D;&#x7528;&#x3001;&#x6613;&#x5B66;&#xFF01;</p>
<p><strong>&#x7B2C;&#x56DB;&#x6B65;</strong>&#xFF1A;&#x7F16;&#x5199;&#x5355;&#x5143;&#x6D4B;&#x8BD5;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@SpringBootTest(classes = Chapter61Application.class)</span><br><span class="line">public class ApplicationTests {</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test() throws Exception {</span><br><span class="line">        userRepository.deleteAll();</span><br><span class="line"></span><br><span class="line">        // &#x521B;&#x5EFA;&#x4E09;&#x4E2A;User&#xFF0C;&#x5E76;&#x9A8C;&#x8BC1;User&#x603B;&#x6570;</span><br><span class="line">        userRepository.save(new User(1L, &quot;didi&quot;, 30));</span><br><span class="line">        userRepository.save(new User(2L, &quot;mama&quot;, 40));</span><br><span class="line">        userRepository.save(new User(3L, &quot;kaka&quot;, 50));</span><br><span class="line">        Assertions.assertEquals(3, userRepository.findAll().size());</span><br><span class="line"></span><br><span class="line">        // &#x5220;&#x9664;&#x4E00;&#x4E2A;User&#xFF0C;&#x518D;&#x9A8C;&#x8BC1;User&#x603B;&#x6570;</span><br><span class="line">        User u = userRepository.findById(1L).get();</span><br><span class="line">        userRepository.delete(u);</span><br><span class="line">        Assertions.assertEquals(2, userRepository.findAll().size());</span><br><span class="line"></span><br><span class="line">        // &#x5220;&#x9664;&#x4E00;&#x4E2A;User&#xFF0C;&#x518D;&#x9A8C;&#x8BC1;User&#x603B;&#x6570;</span><br><span class="line">        u = userRepository.findByUsername(&quot;mama&quot;);</span><br><span class="line">        userRepository.delete(u);</span><br><span class="line">        Assertions.assertEquals(1, userRepository.findAll().size());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x8FD9;&#x91CC;&#x6CE8;&#x610F;&#x6240;&#x4F7F;&#x7528;&#x7684;<code>Assertions</code>&#x662F;Spring Boot 2.4&#x4E4B;&#x540E;&#x6574;&#x5408;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x8FD8;&#x662F;&#x4F7F;&#x7528;<code>Assert</code></p>
</blockquote>
<p><strong>&#x7B2C;&#x4E94;&#x6B65;</strong>&#xFF1A;&#x53C2;&#x6570;&#x914D;&#x7F6E;</p>
<p>&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8F7B;&#x800C;&#x6613;&#x4E3E;&#x7684;&#x5BF9;MongoDB&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x6218;&#x4E2D;&#xFF0C;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x4E0E;MongoDB&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x90E8;&#x7F72;&#x4E8E;&#x540C;&#x4E00;&#x53F0;&#x8BBE;&#x5907;&#x4E4B;&#x4E0A;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x81EA;&#x52A8;&#x5316;&#x7684;&#x672C;&#x5730;&#x914D;&#x7F6E;&#x6765;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x7684;&#x914D;&#x7F6E;&#x6765;&#x5B8C;&#x6210;&#x652F;&#x6301;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;<code>application.properties</code>&#x4E2D;&#x52A0;&#x5165;mongodb&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF0C;&#x5177;&#x4F53;&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;spring.data.mongodb.uri=mongodb://name:pass@localhost:27017/test</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x5C1D;&#x8BD5;&#x6B64;&#x914D;&#x7F6E;&#x65F6;&#xFF0C;&#x8BB0;&#x5F97;&#x5728;mongo&#x4E2D;&#x5BF9;test&#x5E93;&#x521B;&#x5EFA;&#x5177;&#x5907;&#x8BFB;&#x5199;&#x6743;&#x9650;&#x7684;&#x7528;&#x6237;&#xFF08;&#x7528;&#x6237;&#x540D;&#x4E3A;name&#xFF0C;&#x5BC6;&#x7801;&#x4E3A;pass&#xFF09;&#xFF0C;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;&#x7528;&#x6237;&#x521B;&#x5EFA;&#x8BED;&#x53E5;&#x4E0D;&#x540C;&#xFF0C;&#x6CE8;&#x610F;&#x67E5;&#x770B;&#x6587;&#x6863;&#x505A;&#x597D;&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</p>
<p>&#x82E5;&#x4F7F;&#x7528;mongodb 2.x&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5982;&#x4E0B;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF0C;&#x8BE5;&#x65B9;&#x5F0F;&#x4E0D;&#x652F;&#x6301;mongodb 3.x&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;spring.data.mongodb.host=localhost spring.data.mongodb.port=27017</span><br></pre></td></tr></table></figure>

<h2 id="&#x9898;&#x5916;&#x8BDD;"><a href="#&#x9898;&#x5916;&#x8BDD;" class="headerlink" title="&#x9898;&#x5916;&#x8BDD;"></a>&#x9898;&#x5916;&#x8BDD;</h2><p>MongoDB&#x867D;&#x7136;&#x5728;&#x8FC7;&#x53BB;&#x7684;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x6536;&#x5230;&#x4E0D;&#x5C11;&#x7684;&#x5173;&#x6CE8;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x5176;&#x5728;&#x5404;&#x65B9;&#x9762;&#x90FD;&#x8868;&#x73B0;&#x4E2D;&#x5EB8;&#xFF0C;&#x6700;&#x8FD1;&#x4F3C;&#x4E4E;&#x8D8A;&#x6765;&#x8D8A;&#x5C11;&#x542C;&#x5230;&#x6216;&#x8005;&#x770B;&#x5230;&#x5173;&#x4E8E;MongoDB&#x7684;&#x5927;&#x89C4;&#x6A21;&#x5E94;&#x7528;&#x573A;&#x666F;&#x3002;&#x5C31;&#x7B14;&#x8005;&#x6240;&#x63A5;&#x89E6;&#x7684;&#x5F88;&#x591A;&#x4EE5;&#x5F80;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E5F;&#x90FD;&#x5F00;&#x59CB;&#x5728;&#x4F7F;&#x7528;ES&#x6765;&#x53D6;&#x4EE3;&#xFF0C;&#x4EE5;&#x83B7;&#x5F97;&#x66F4;&#x597D;&#x7684;&#x6027;&#x80FD;&#x8868;&#x73B0;&#x3002;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x4E0B;&#x6B21;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x8BB2;&#x8BB2;Spring Boot&#x4E2D;&#x5982;&#x4F55;&#x4F7F;&#x7528;ES&#x5427;&#xFF01;&#x5173;&#x6CE8;&#x6211;&#xFF0C;&#x6301;&#x7EED;&#x83B7;&#x5F97;&#x66F4;&#x591A;Spring Boot&#x7684;&#x6280;&#x672F;&#x5E72;&#x8D27;&#xFF01;</p>
<p><strong>&#x66F4;&#x591A;&#x672C;&#x7CFB;&#x5217;&#x514D;&#x8D39;&#x6559;&#x7A0B;&#x8FDE;&#x8F7D;<a href="/external_links/c263f3fb1a44843cedf35d9f8d8b5bec.html" target="blank" rel="noopener">&#x300C;&#x70B9;&#x51FB;&#x8FDB;&#x5165;&#x6C47;&#x603B;&#x76EE;&#x5F55;&#x300D;</a></strong></p>
<h2 id="&#x4EE3;&#x7801;&#x793A;&#x4F8B;"><a href="#&#x4EE3;&#x7801;&#x793A;&#x4F8B;" class="headerlink" title="&#x4EE3;&#x7801;&#x793A;&#x4F8B;"></a>&#x4EE3;&#x7801;&#x793A;&#x4F8B;</h2><p>&#x672C;&#x6587;&#x7684;&#x76F8;&#x5173;&#x4F8B;&#x5B50;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x4E0B;&#x9762;&#x4ED3;&#x5E93;&#x4E2D;&#x7684;<code>chapter6-1</code>&#x76EE;&#x5F55;&#xFF1A;</p>
<ul>
<li>Github&#xFF1A;<a href="/external_links/40dc7d3606a722d0068f2d6d0ba6506b.html" target="blank" rel="noopener">github.com/dyc87112/Sp&#x2026;</a></li>
<li>Gitee&#xFF1A;<a href="/external_links/29493c86dabc7d6afc1c781532f5773d.html" target="blank" rel="noopener">gitee.com/didispace/S&#x2026;</a></li>
</ul>
<p><strong>&#x5982;&#x679C;&#x60A8;&#x89C9;&#x5F97;&#x672C;&#x6587;&#x4E0D;&#x9519;&#xFF0C;&#x6B22;&#x8FCE;<code>Star</code>&#x652F;&#x6301;&#xFF0C;&#x60A8;&#x7684;&#x5173;&#x6CE8;&#x662F;&#x6211;&#x575A;&#x6301;&#x7684;&#x52A8;&#x529B;&#xFF01;</strong></p>
<blockquote>
<p>&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7;&#xFF1A;&#x7A0B;&#x5E8F;&#x733F;DD&#xFF0C;&#x83B7;&#x5F97;&#x72EC;&#x5BB6;&#x6574;&#x7406;&#x7684;&#x5B66;&#x4E60;&#x8D44;&#x6E90;&#x3001;&#x65E5;&#x5E38;&#x5E72;&#x8D27;&#x53CA;&#x798F;&#x5229;&#x8D60;&#x9001;&#x3002;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ec055dca5903b4e2c0bfb04219a6fdd3.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935557200760799245.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935557200760799245.html" itemprop="url">Mybatis系列全解（八）：Mybatis的9大动态SQL</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-04T07:10:20+08:00">
                2021-03-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x5C01;&#x9762;&#xFF1A;&#x6D1B;&#x5C0F;&#x6C50;</p>
<p>&#x4F5C;&#x8005;&#xFF1A;&#x6F58;&#x6F58;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/9bc73f48e7bab5bb98287c0074b2b2a4c6ec1f295fdc83b45a87eb1a8efafb0b" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d77cf418bd789b1f1c08aee8686c4f151566efff320bf36fb071939884efcac0" alt></p>
<p>2021&#x5E74;&#xFF0C;&#x4EF0;&#x671B;&#x5929;&#x7A7A;&#xFF0C;&#x811A;&#x8E0F;&#x5B9E;&#x5730;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/9d17923b1ba56b1cfa32bf60f826521b7723e85db18892664ebc96699ceebc94" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8e83de62e87e800c870a83495ba5a5afc0d7c47f94177becd9480d1f481bed75" alt></p>
<blockquote>
<p>&#x8FD9;&#x7B97;&#x662F;&#x6625;&#x8282;&#x540E;&#x9996;&#x7BC7; Mybatis &#x6587;&#x4E86;~</p>
<p>&#x8DE8;&#x4E86;&#x4E2A;&#x5E74;&#x611F;&#x89C9;&#x5199;&#x4E86;&#x6709;&#x534A;&#x4E2A;&#x4E16;&#x7EAA; &#x2026;</p>
<p>&#x501F;&#x7740;&#x5973;&#x795E;&#x8282; &#x30FE;(&#x25CD;&#xB0;&#x2207;&#xB0;&#x25CD;)&#xFF89;&#xFF9E;</p>
<p>&#x63D0;&#x524D;&#x795D;&#x7537;&#x795E;&#x5973;&#x795E;&#x4EEC;&#x8D8A;&#x9753;&#x8D8A;&#x5BCC;&#x8D8A;&#x55E8;&#x68EE;&#xFF01;</p>
<p>&#x4E0A;&#x56FE;&#x4FDD;&#x5B58;&#x53EF;&#x505A;&#x670B;&#x53CB;&#x5708;&#x5C01;&#x9762;&#x56FE; ~</p>
</blockquote>
<h3 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h3><p>&#x672C;&#x8282;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD; Mybatis &#x7684;&#x5F3A;&#x5927;&#x7279;&#x6027;&#x4E4B;&#x4E00;&#xFF1A;<strong>&#x52A8;&#x6001; SQL</strong> &#xFF0C;&#x4ECE;&#x52A8;&#x6001; SQL &#x7684;&#x8BDE;&#x751F;&#x80CC;&#x666F;&#x4E0E;&#x57FA;&#x7840;&#x6982;&#x5FF5;&#xFF0C;&#x5230;&#x52A8;&#x6001; SQL &#x7684;&#x6807;&#x7B7E;&#x6210;&#x5458;&#x53CA;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x5F90;&#x5F90;&#x9053;&#x6765;&#xFF0C;&#x518D;&#x7ED3;&#x5408;&#x6846;&#x67B6;&#x6E90;&#x7801;&#xFF0C;&#x5256;&#x6790;&#x52A8;&#x6001; SQL &#xFF08;&#x6807;&#x7B7E;&#xFF09;&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;&#xFF0C;&#x6700;&#x7EC8;&#x5728;&#x6587;&#x672B;&#x5410;&#x69FD;&#x4E00;&#x4E0B;&#xFF1A;&#x5728;&#x65E0;&#x52A8;&#x6001; SQL &#x7279;&#x6027;&#xFF08;&#x6807;&#x7B7E;&#xFF09;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5E38;&#x5E38;&#x6389;&#x8FDB;&#x54EA;&#x4E9B;&#x53EF;&#x6076;&#x7684;&#x5751;&#x5427;~</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/9350fcd494a0f48d98bbc7fc45f6aa39f2bb7f3a42ce965c5a3afab13611d42c" alt></p>
<p><strong>&#x5EFA;&#x8BAE;&#x5173;&#x6CE8;&#x6211;&#x4EEC;&#xFF01; Mybatis &#x5168;&#x89E3;&#x7CFB;&#x5217;&#x4E00;&#x76F4;&#x5728;&#x66F4;&#x65B0;&#x54E6;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/52fc5855b1c57b04aad73d738720ce12823e30992dc40a9b2606270e712203ed" alt></p>
<h3 id="Mybaits&#x7CFB;&#x5217;&#x5168;&#x89E3;"><a href="#Mybaits&#x7CFB;&#x5217;&#x5168;&#x89E3;" class="headerlink" title="Mybaits&#x7CFB;&#x5217;&#x5168;&#x89E3;"></a>Mybaits&#x7CFB;&#x5217;&#x5168;&#x89E3;</h3><ul>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E00;&#xFF09;&#xFF1A;&#x624B;&#x5199;&#x4E00;&#x5957;&#x6301;&#x4E45;&#x5C42;&#x6846;&#x67B6;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E8C;&#xFF09;&#xFF1A;Mybatis&#x7B80;&#x4ECB;&#x4E0E;&#x73AF;&#x5883;&#x642D;&#x5EFA;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E09;&#xFF09;&#xFF1A;Mybatis&#x7B80;&#x5355;CRUD&#x4F7F;&#x7528;&#x4ECB;&#x7ECD;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x56DB;&#xFF09;&#xFF1A;&#x5168;&#x7F51;&#x6700;&#x5168;&#xFF01;Mybatis&#x914D;&#x7F6E;&#x6587;&#x4EF6;XML&#x5168;&#x8C8C;&#x8BE6;&#x89E3;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E94;&#xFF09;&#xFF1A;&#x5168;&#x7F51;&#x6700;&#x5168;&#xFF01;&#x8BE6;&#x89E3;Mybatis&#x7684;Mapper&#x6620;&#x5C04;&#x6587;&#x4EF6;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x516D;&#xFF09;&#xFF1A;Mybatis&#x6700;&#x786C;&#x6838;&#x7684;API&#x4F60;&#x77E5;&#x9053;&#x51E0;&#x4E2A;&#xFF1F;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E03;&#xFF09;&#xFF1A;Dao&#x5C42;&#x7684;&#x4E24;&#x79CD;&#x5B9E;&#x73B0;&#x4E4B;&#x4F20;&#x7EDF;&#x4E0E;&#x4EE3;&#x7406;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x516B;&#xFF09;&#xFF1A;Mybatis&#x7684;&#x52A8;&#x6001;SQL</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E5D;&#xFF09;&#xFF1A;Mybatis&#x7684;&#x590D;&#x6742;&#x6620;&#x5C04;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#xFF09;&#xFF1A;Mybatis&#x6CE8;&#x89E3;&#x5F00;&#x53D1;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#x4E00;&#xFF09;&#xFF1A;Mybatis&#x7F13;&#x5B58;&#x5168;&#x89E3;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#x4E8C;&#xFF09;&#xFF1A;Mybatis&#x63D2;&#x4EF6;&#x5F00;&#x53D1;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#x4E09;&#xFF09;&#xFF1A;Mybatis&#x4EE3;&#x7801;&#x751F;&#x6210;&#x5668;</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#x56DB;&#xFF09;&#xFF1A;Spring&#x96C6;&#x6210;Mybatis</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#x4E94;&#xFF09;&#xFF1A;SpringBoot&#x96C6;&#x6210;Mybatis</li>
<li>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x5341;&#x516D;&#xFF09;&#xFF1A;Mybatis&#x6E90;&#x7801;&#x5256;&#x6790;</li>
</ul>
<h3 id="&#x672C;&#x6587;&#x76EE;&#x5F55;"><a href="#&#x672C;&#x6587;&#x76EE;&#x5F55;" class="headerlink" title="&#x672C;&#x6587;&#x76EE;&#x5F55;"></a>&#x672C;&#x6587;&#x76EE;&#x5F55;</h3><p><strong>1&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;SQL</strong></p>
<p><strong>2&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x8BDE;&#x751F;&#x8BB0;</strong></p>
<p><strong>3&#x3001;&#x52A8;&#x6001;SQL&#x6807;&#x7B7E;&#x7684;9&#x5927;&#x6807;&#x7B7E;</strong></p>
<p><strong>4&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/ffc31138ad3fa09b040ea37d0ab57a6dbb2f235af37bf2693a1c9cf05ad0f754" alt></p>
<h4 id="1&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;SQL-&#xFF1F;"><a href="#1&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;SQL-&#xFF1F;" class="headerlink" title="1&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;SQL &#xFF1F;"></a>1&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x52A8;&#x6001;SQL &#xFF1F;</h4><p>&#x5173;&#x4E8E;&#x52A8;&#x6001; SQL &#xFF0C;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x7406;&#x89E3;&#x4E3A; &#x201C; <strong>&#x52A8;&#x6001;&#x7684; SQL</strong> &#x201D;&#xFF0C;&#x5176;&#x4E2D; &#x201C; &#x52A8;&#x6001;&#x7684; &#x201D; &#x662F;&#x5F62;&#x5BB9;&#x8BCD;&#xFF0C;&#x201C; SQL &#x201D; &#x662F;&#x540D;&#x8BCD;&#xFF0C;&#x90A3;&#x663E;&#x7136;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5148;&#x7406;&#x89E3;&#x540D;&#x8BCD;&#xFF0C;&#x6BD5;&#x7ADF;&#x5F62;&#x5BB9;&#x8BCD;&#x4EC5;&#x4EC5;&#x4EE3;&#x8868;&#x5B83;&#x7684;&#x67D0;&#x79CD;&#x5F62;&#x6001;&#x6216;&#x8005;&#x67D0;&#x79CD;&#x72B6;&#x6001;&#x3002;</p>
<p>SQL &#x7684;&#x5168;&#x79F0;&#x662F;&#xFF1A;</p>
<blockquote>
<p>Structured Query Language&#xFF0C;&#x7ED3;&#x6784;&#x5316;&#x67E5;&#x8BE2;&#x8BED;&#x8A00;&#x3002;</p>
</blockquote>
<p>SQL &#x672C;&#x8EAB;&#x597D;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x5C0F;&#x5B66;&#x65F6;&#x5019;&#x90FD;&#x5B66;&#x4E60;&#x8FC7;&#x4E86;&#xFF0C;&#x65E0;&#x975E;&#x5C31;&#x662F; CRUD &#x561B;&#xFF0C;&#x800C;&#x4E14;&#x6211;&#x4EEC;&#x8FD8;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x4E00;&#x79CD; <strong>&#x8BED;&#x8A00;</strong>&#xFF0C;&#x8BED;&#x8A00;&#x662F;&#x4E00;&#x79CD;&#x5B58;&#x5728;&#x4E8E;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7528;&#x4E8E;&#x4EA4;&#x6D41;&#x8868;&#x8FBE;&#x7684; <strong>&#x80FD;&#x529B;</strong>&#xFF0C;&#x4F8B;&#x5982;&#x8DDF;&#x4E2D;&#x56FD;&#x4EBA;&#x4EA4;&#x6D41;&#x7528;&#x6C49;&#x8BED;&#x3001;&#x8DDF;&#x82F1;&#x56FD;&#x4EBA;&#x4EA4;&#x6D41;&#x7528;&#x82F1;&#x8BED;&#x3001;&#x8DDF;&#x706B;&#x661F;&#x4EBA;&#x4EA4;&#x6D41;&#x7528;&#x706B;&#x661F;&#x8BED;&#x3001;&#x8DDF;&#x5C0F;&#x732B;&#x4EA4;&#x6D41;&#x7528;&#x55B5;&#x55B5;&#x8BED;&#x3001;&#x8DDF;&#x8BA1;&#x7B97;&#x673A;&#x4EA4;&#x6D41;&#x6211;&#x4EEC;&#x7528;&#x673A;&#x5668;&#x8BED;&#x8A00;&#x3001;&#x8DDF;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF08;DBMS&#xFF09;&#x4EA4;&#x6D41;&#x6211;&#x4EEC;&#x7528; SQL&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/58be50b054009a8fa9fc4caac21c28fc5136bd6f03bc64676459d722e005df99" alt></p>
<p>&#x60F3;&#x5FC5;&#x5927;&#x5BB6;&#x7ACB;&#x9A6C;&#x5C31;&#x80FD;&#x660E;&#x767D;&#xFF0C;&#x60F3;&#x8981;&#x4E0E;&#x67D0;&#x4E2A;&#x5BF9;&#x8C61;&#x4EA4;&#x6D41;&#xFF0C;&#x5FC5;&#x987B;&#x62E5;&#x6709;&#x4E0E;&#x6B64;&#x5BF9;&#x8C61;&#x4EA4;&#x6D41;&#x7684;&#x8BED;&#x8A00;&#x80FD;&#x529B;&#x624D;&#x884C;&#xFF01;&#x6240;&#x4EE5;&#x65E0;&#x8BBA;&#x662F;&#x6280;&#x672F;&#x4EBA;&#x5458;&#x3001;&#x8FD8;&#x662F;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7CFB;&#x7EDF;&#x3001;&#x6216;&#x662F;&#x67D0;&#x4E2A;&#x9AD8;&#x7EA7;&#x8BED;&#x8A00;&#x73AF;&#x5883;&#xFF0C;&#x60F3;&#x8981;&#x8BBF;&#x95EE;/&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x5177;&#x5907; SQL &#x8FD9;&#x9879;&#x80FD;&#x529B;&#xFF1B;&#x56E0;&#x6B64;&#x4F60;&#x80FD;&#x770B;&#x5230;&#x50CF; Java &#xFF0C;&#x50CF; Python &#xFF0C;&#x50CF; Go &#x7B49;&#x7B49;&#x8FD9;&#x4E9B;&#x9AD8;&#x7EA7;&#x8BED;&#x8A00;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x90FD;&#x4F1A;&#x5D4C;&#x5165;&#xFF08;&#x652F;&#x6301;&#xFF09; SQL &#x80FD;&#x529B;&#xFF0C;&#x8FBE;&#x5230;&#x4E0E;&#x6570;&#x636E;&#x5E93;&#x4EA4;&#x4E92;&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c1be7f98f0060d0dd7367669142dbe90861e9aabec2b9efd31431f1f6d2d6221" alt></p>
<p>&#x5F88;&#x663E;&#x7136;&#xFF0C;&#x80FD;&#x591F;&#x5B66;&#x4E60; Mybatis &#x8FD9;&#x4E48;&#x4E00;&#x95E8;&#x9AD8;&#x7CBE;&#x5C16;&#xFF08;ru-men&#xFF09;&#x6301;&#x4E45;&#x5C42;&#x6846;&#x67B6;&#x7684;&#x7F16;&#x7A0B;&#x4EBA;&#x7FA4;&#xFF0C;&#x5BF9;&#x4E8E; SQL &#x7684;&#x7F16;&#x5199;&#x80FD;&#x529B;&#x80AF;&#x5B9A;&#x5DF2;&#x7ECF;&#x638C;&#x63E1;&#x5F97; ss &#x7684;&#xFF0C;&#x5E73;&#x65F6;&#x5404;&#x79CD; SQL &#x7F16;&#x5199;&#x90A3;&#x90FD;&#x662F;&#x4FE1;&#x624B;&#x62C8;&#x6765;&#x7684;&#x4E8B;&#xFF0C; &#x53EA;&#x4E0D;&#x8FC7;&#x5BF9;&#x4E8E; <strong>&#x52A8;&#x6001;SQL</strong> &#x5230;&#x5E95;&#x662F;&#x4E2A;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF0C;&#x4F3C;&#x4E4E;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x670B;&#x53CB;&#x4F3C;&#x61C2;&#x975E;&#x61C2;&#xFF01;&#x4F46;&#x662F;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x6211;&#x4EEC;&#x767E;&#x5EA6;&#x4E00;&#x4E0B;&#x3002;</p>
<blockquote>
<p>&#x52A8;&#x6001; SQL&#xFF1A;&#x4E00;&#x822C;&#x6307;&#x6839;&#x636E;&#x7528;&#x6237;&#x8F93;&#x5165;&#x6216;&#x5916;&#x90E8;&#x6761;&#x4EF6; <strong>&#x52A8;&#x6001;&#x7EC4;&#x5408;</strong> &#x7684; SQL &#x8BED;&#x53E5;&#x5757;&#x3002;</p>
</blockquote>
<p>&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;&#x968F;&#x5916;&#x90E8;&#x6761;&#x4EF6;&#x52A8;&#x6001;&#x7EC4;&#x5408;&#x7684; SQL &#x8BED;&#x53E5;&#x5757;&#xFF01;&#x6211;&#x4EEC;&#x5148;&#x9488;&#x5BF9;&#x52A8;&#x6001; SQL &#x8FD9;&#x4E2A;&#x8BCD;&#x6765;&#x5256;&#x6790;&#xFF0C;&#x4E16;&#x95F4;&#x4E07;&#x7269;&#xFF0C;&#x6709;&#x52A8;&#x6001;&#x90A3;&#x5C31;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x6709;&#x9759;&#x6001;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x4EEC;&#x7684;&#x8FB9;&#x754C;&#x5728;&#x54EA;&#x91CC;&#x5462;&#xFF1F;&#x53C8;&#x8BE5;&#x600E;&#x4E48;&#x533A;&#x5206;&#x5462;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6aa58d25fcf312b25483de9410b2fb0f0fc8987b01bb5a3f725bc730ebc874eb" alt></p>
<p>&#x5176;&#x5B9E;&#xFF0C;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4ECB;&#x7ECD;&#x8FC7;&#xFF0C;&#x5728;&#x4F8B;&#x5982; Java &#x9AD8;&#x7EA7;&#x8BED;&#x8A00;&#x4E2D;&#xFF0C;&#x90FD;&#x4F1A;&#x5D4C;&#x5165;&#xFF08;&#x652F;&#x6301;&#xFF09;SQL &#x80FD;&#x529B;&#xFF0C;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;&#x4EE3;&#x7801;&#x6216;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x7F16;&#x5199; SQL &#x8BED;&#x53E5;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;&#x5728; &#x201C;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x201D; &#x5C31;&#x5DF2;&#x7ECF;&#x80FD;&#x786E;&#x5B9A; <strong>&#x4E3B;&#x4F53;&#x7ED3;&#x6784;</strong>&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;&#x9759;&#x6001; SQL&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x65E0;&#x6CD5;&#x786E;&#x5B9A;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#xFF0C;&#x9700;&#x8981;&#x7B49;&#x5230;&#x7A0B;&#x5E8F;&#x771F;&#x6B63; &#x201C;&#x8FD0;&#x884C;&#x65F6;&#x201D; &#x624D;&#x80FD;&#x6700;&#x7EC8;&#x786E;&#x5B9A;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;&#x52A8;&#x6001; SQL&#xFF0C;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- 1&#x3001;&#x5B9A;&#x4E49;SQL --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;dao&quot;&gt;</span><br><span class="line">	&lt;select id=&quot;selectAll&quot; resultType=&quot;user&quot;&gt;</span><br><span class="line">    	select * from t_user</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// 2&#x3001;&#x6267;&#x884C;SQL</span><br><span class="line">sqlSession.select(&quot;dao.selectAll&quot;);</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E2A; SQL &#xFF0C;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x6211;&#x4EEC;&#x90FD;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x5B83;&#x7684;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#xFF0C;&#x5373;&#x67E5;&#x8BE2; t_user &#x8868;&#x7684;&#x6240;&#x6709;&#x8BB0;&#x5F55;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x7B49;&#x5230;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#x624D;&#x786E;&#x5B9A;&#x8FD9;&#x4E2A;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#xFF0C;&#x56E0;&#x6B64;&#x4EE5;&#x4E0A;&#x5C5E;&#x4E8E; <strong>&#x9759;&#x6001; SQL</strong>&#x3002;&#x90A3;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x8BED;&#x53E5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- 1&#x3001;&#x5B9A;&#x4E49;SQL --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;dao&quot;&gt;</span><br><span class="line">	&lt;select id=&quot;selectAll&quot; parameterType=&quot;user&quot;&gt;</span><br><span class="line">    	select * from t_user </span><br><span class="line">        &lt;if test=&quot;id != null&quot;&gt;</span><br><span class="line">            where id = #{id}</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// 2&#x3001;&#x6267;&#x884C;SQL</span><br><span class="line">User user1 = new User();</span><br><span class="line">user1.setId(1);</span><br><span class="line">sqlSession.select(&quot;dao.selectAll&quot;,user1);  // &#x6709; id</span><br><span class="line"></span><br><span class="line">User user2 = new User(); </span><br><span class="line">sqlSession.select(&quot;dao.selectAll&quot;,user2);  // &#x65E0; id</span><br></pre></td></tr></table></figure>

<p>&#x8BA4;&#x771F;&#x89C2;&#x5BDF;&#xFF0C;&#x4EE5;&#x4E0A;&#x8FD9;&#x4E2A; SQL &#x8BED;&#x53E5;&#xFF0C;&#x989D;&#x5916;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x5757; <strong>if &#x6807;&#x7B7E;</strong> &#x4F5C;&#x4E3A;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x662F;&#x65E0;&#x6CD5;&#x786E;&#x5B9A; SQL &#x8BED;&#x53E5;&#x6700;&#x7EC8;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#x7684;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x6839;&#x636E;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x662F;&#x5426;&#x4F20;&#x5165; id &#x8FD9;&#x4E2A;&#x6761;&#x4EF6;&#xFF0C;&#x6765;&#x52A8;&#x6001;&#x7684;&#x62FC;&#x63A5;&#x6700;&#x7EC8;&#x6267;&#x884C;&#x7684; SQL &#x8BED;&#x53E5;&#xFF0C;&#x56E0;&#x6B64;&#x5C5E;&#x4E8E;&#x52A8;&#x6001; SQL &#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/23651bb65faa01c4da5541d95d830f9718c708f9eb050df1bf7cf7085fa5b87a" alt></p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5927;&#x5BB6;&#x770B;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A; SQL &#x8BED;&#x53E5;&#x7B97;&#x662F;&#x52A8;&#x6001; SQL &#x8BED;&#x53E5;&#x5417;&#xFF1F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- 1&#x3001;&#x5B9A;&#x4E49;SQL --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;dao&quot;&gt;</span><br><span class="line">	&lt;select id=&quot;selectAll&quot; parameterType=&quot;user&quot;&gt;</span><br><span class="line">    	select * from t_user where id = #{id} </span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// 2&#x3001;&#x6267;&#x884C;SQL</span><br><span class="line">User user1 = new User();</span><br><span class="line">user1.setId(1);</span><br><span class="line">sqlSession.select(&quot;dao.selectAll&quot;,user1);  // &#x6709; id</span><br></pre></td></tr></table></figure>

<p>&#x6839;&#x636E;&#x52A8;&#x6001; SQL &#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5927;&#x5BB6;&#x662F;&#x5426;&#x80FD;&#x5224;&#x65AD;&#x4EE5;&#x4E0A;&#x7684;&#x8BED;&#x53E5;&#x5757;&#x662F;&#x5426;&#x5C5E;&#x4E8E;&#x52A8;&#x6001; SQL&#xFF1F;</p>
<p><strong>&#x7B54;&#x6848;&#xFF1A;&#x4E0D;&#x5C5E;&#x4E8E;&#x52A8;&#x6001; SQL &#xFF01;</strong></p>
<p>&#x539F;&#x56E0;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x8FD9;&#x4E2A; SQL &#x5728;&#x7F16;&#x8BD1;&#x9636;&#x6BB5;&#x5C31;&#x5DF2;&#x7ECF;&#x660E;&#x786E;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#x4E86;&#xFF0C;&#x867D;&#x7136;&#x5916;&#x90E8;&#x52A8;&#x6001;&#x7684;&#x4F20;&#x5165;&#x4E00;&#x4E2A; id &#xFF0C;&#x53EF;&#x80FD;&#x662F;1&#xFF0C;&#x53EF;&#x80FD;&#x662F;2&#xFF0C;&#x53EF;&#x80FD;&#x662F;100&#xFF0C;&#x4F46;&#x662F;&#x56E0;&#x4E3A;&#x5B83;&#x7684;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#x5DF2;&#x7ECF;&#x786E;&#x5B9A;&#xFF0C;&#x8FD9;&#x4E2A;&#x8BED;&#x53E5;&#x5C31;&#x662F;&#x67E5;&#x8BE2;&#x4E00;&#x4E2A;&#x6307;&#x5B9A; id &#x7684;&#x7528;&#x6237;&#x8BB0;&#x5F55;&#xFF0C;&#x5B83;&#x6700;&#x7EC8;&#x6267;&#x884C;&#x7684; SQL &#x8BED;&#x53E5;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55;&#x52A8;&#x6001;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x9876;&#x591A;&#x7B97;&#x662F;&#x4E00;&#x4E2A;&#x652F;&#x6301;&#x52A8;&#x6001;&#x4F20;&#x53C2;&#x7684;&#x9759;&#x6001; SQL &#x3002;</p>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x4E8E;&#x52A8;&#x6001; SQL &#x548C;&#x9759;&#x6001; SQL &#x7684;&#x533A;&#x522B;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x8BA4;&#x77E5;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E9B;&#x597D;&#x5947;&#x7684;&#x670B;&#x53CB;&#x53C8;&#x4F1A;&#x601D;&#x8003;&#x53E6;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x52A8;&#x6001; SQL &#x662F; Mybatis &#x72EC;&#x6709;&#x7684;&#x5417;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/42d5fa688a0f0481d041680c7e0f3b72c158baf29540e2d62d926828b7568cb5" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a7e3f00883749f154456e5870c03caa0135834417f41d319650b9a6c2d28334c" alt></p>
<h4 id="2&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x8BDE;&#x751F;&#x8BB0;"><a href="#2&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x8BDE;&#x751F;&#x8BB0;" class="headerlink" title="2&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x8BDE;&#x751F;&#x8BB0;"></a>2&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x8BDE;&#x751F;&#x8BB0;</h4><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;SQL &#x662F;&#x4E00;&#x79CD;&#x4F1F;&#x5927;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8BED;&#x8A00; <strong>&#x6807;&#x51C6;</strong>&#xFF0C;&#x5728;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7EB7;&#x4E89;&#x7684;&#x65F6;&#x4EE3;&#xFF0C;&#x5B83;&#x7684;&#x51FA;&#x73B0;&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x8BED;&#x8A00;&#xFF0C;&#x800C;&#x6B64;&#x65F6;&#xFF0C;&#x5E02;&#x9762;&#x4E0A;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x8F6F;&#x4EF6;&#x767E;&#x82B1;&#x9F50;&#x653E;&#xFF0C;&#x6211;&#x6700;&#x65E9;&#x4F7F;&#x7528;&#x7684; SQL Server &#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5F53;&#x65F6;&#x7528;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x662F; SQL Server Management Studio&#xFF0C;&#x540E;&#x6765;&#x63A5;&#x89E6; Oracle &#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7528;&#x4E86; PL/SQL Developer&#xFF0C;&#x518D;&#x540E;&#x6765;&#x76F4;&#x81F3;&#x4ECA;&#x65E5;&#x5C31;&#x51E0;&#x4E4E;&#x90FD;&#x5728;&#x7528; MySQL &#x6570;&#x636E;&#x5E93;&#xFF08;&#x8FD9;&#x4E2A;&#x8DDF;&#x5404;&#x79CD;&#x4E91;&#x5382;&#x5546;&#x5D1B;&#x8D77;&#x6709;&#x5173;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x4F7F;&#x7528; Navicat &#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x5F53;&#x7136;&#x5982;&#x4ECA;&#x5E02;&#x9762;&#x4E0A;&#x8FD8;&#x6709;&#x8BB8;&#x591A;&#x8BB8;&#x591A;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x561B;&#xFF0C;&#x53EA;&#x8981;&#x80FD;&#x4FBF;&#x6377;&#x9AD8;&#x6548;&#x7684;&#x7BA1;&#x7406;&#x6211;&#x4EEC;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x597D;&#x5DE5;&#x5177;&#xFF0C;duck &#x4E0D;&#x5FC5;&#x7EA0;&#x7ED3;&#x9009;&#x62E9;&#x54EA;&#x4E00;&#x6B3E;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2ca7bf47e619ede02adf3ec34172ae8206c05d5ddb8596cd820b8dc5d0a835c1" alt></p>
<p>&#x90A3;&#x8FD9;&#x4E48;&#x591A;&#x597D;&#x5DE5;&#x5177;&#xFF0C;&#x90FD;&#x63D0;&#x4F9B;&#x4EC0;&#x4E48;&#x529F;&#x80FD;&#x5462;&#xFF1F;&#x76F8;&#x4FE1;&#x6211;&#x4EEC;&#x5E73;&#x65F6;&#x63A5;&#x89E6;&#x6700;&#x591A;&#x7684;&#x5C31;&#x662F;&#x63A5;&#x6536;&#x6267;&#x884C; SQL &#x8BED;&#x53E5;&#x7684;&#x8F93;&#x5165;&#x754C;&#x9762;&#xFF08;&#x4E5F;&#x79F0;&#x4E3A;&#x67E5;&#x8BE2;&#x7F16;&#x8F91;&#x5668;&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x8F93;&#x5165;&#x754C;&#x9762;&#x51E0;&#x4E4E;&#x652F;&#x6301;&#x6240;&#x6709; SQL &#x8BED;&#x6CD5;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x7F16;&#x5199;&#x4E00;&#x6761;&#x8BED;&#x53E5;&#x67E5;&#x8BE2; id &#x7B49;&#x4E8E;15 &#x7684;&#x7528;&#x6237;&#x6570;&#x636E;&#x8BB0;&#x5F55;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from user where id = 15 ;</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/bbad2cea2b7c1e8da3fc611679f32c4ae2bc0a7a957287b3ea9e7263b6ea7e8e" alt></p>
<p>&#x5F88;&#x663E;&#x7136;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x8F93;&#x5165;&#x754C;&#x9762;&#x5185;&#x8F93;&#x5165;&#x7684;&#x4EFB;&#x4F55; SQL &#x8BED;&#x53E5;&#xFF0C;&#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x6765;&#x8BF4;&#xFF0C;&#x90FD;&#x662F; <strong>&#x52A8;&#x6001; SQL</strong>&#xFF01;&#x56E0;&#x4E3A;&#x5DE5;&#x5177;&#x672C;&#x8EAB;&#x5E76;&#x4E0D;&#x53EF;&#x80FD;&#x63D0;&#x524D;&#x77E5;&#x9053;&#x7528;&#x6237;&#x4F1A;&#x8F93;&#x5165;&#x4EC0;&#x4E48; SQL &#x8BED;&#x53E5;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x7528;&#x6237;&#x6267;&#x884C;&#x4E4B;&#x540E;&#xFF0C;&#x5DE5;&#x5177;&#x624D;&#x63A5;&#x6536;&#x5230;&#x7528;&#x6237;&#x5B9E;&#x9645;&#x8F93;&#x5165;&#x7684; SQL &#x8BED;&#x53E5;&#xFF0C;&#x624D;&#x80FD;&#x6700;&#x7EC8;&#x786E;&#x5B9A; SQL &#x8BED;&#x53E5;&#x7684;&#x4E3B;&#x4F53;&#x7ED3;&#x6784;&#xFF0C;&#x5F53;&#x7136;&#xFF01;&#x5373;&#x4F7F;&#x6211;&#x4EEC;&#x4E0D;&#x901A;&#x8FC7;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x6570;&#x636E;&#x5E93;&#x672C;&#x8EAB;&#x81EA;&#x5E26;&#x652F;&#x6301;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x6765;&#x6267;&#x884C; SQL &#x8BED;&#x53E5;&#x3002;&#x4F46;&#x65E0;&#x8BBA;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x54EA;&#x7C7B;&#x5DE5;&#x5177;&#xFF0C;&#x8F93;&#x5165;&#x7684;&#x8BED;&#x53E5;&#x90FD;&#x4F1A;&#x88AB;&#x5DE5;&#x5177;&#x8BA4;&#x4E3A;&#x662F; <strong>&#x52A8;&#x6001; SQL</strong>&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/1c1b47c50407b8d29afeb070e48d12fd1a5d76959df1926cf6de7df0e3c1c280" alt></p>
<p>&#x8FD9;&#x4E48;&#x4E00;&#x8BF4;&#xFF0C;&#x52A8;&#x6001; SQL &#x539F;&#x6765;&#x4E0D;&#x662F; Mybatis &#x72EC;&#x6709;&#x7684;&#x7279;&#x6027;&#xFF01;&#x5176;&#x5B9E;&#x9664;&#x4E86;&#x4EE5;&#x4E0A;&#x4ECB;&#x7ECD;&#x7684;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5DE5;&#x5177;&#x4EE5;&#x5916;&#xFF0C;&#x5728;&#x7EAF; JDBC &#x65F6;&#x4EE3;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x7ECF;&#x5E38;&#x901A;&#x8FC7;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x52A8;&#x6001;&#x7684;&#x62FC;&#x63A5; SQL &#x8BED;&#x53E5;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x5728;&#x9AD8;&#x7EA7;&#x8BED;&#x8A00;&#x73AF;&#x5883;&#xFF08;&#x4F8B;&#x5982; Java &#x8BED;&#x8A00;&#x7F16;&#x7A0B;&#x73AF;&#x5883;&#xFF09;&#x4E2D;&#x65E9;&#x671F;&#x5E38;&#x7528;&#x7684;&#x52A8;&#x6001; SQL &#x6784;&#x5EFA;&#x65B9;&#x5F0F;&#xFF01;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5916;&#x90E8;&#x6761;&#x4EF6;id</span><br><span class="line">Integer id = Integer.valueOf(15);</span><br><span class="line"></span><br><span class="line">// &#x52A8;&#x6001;&#x62FC;&#x63A5;SQL</span><br><span class="line">StringBuilder sql = new StringBuilder();</span><br><span class="line">sql.append(&quot; select  *   &quot;);</span><br><span class="line">sql.append(&quot;   from user &quot;);</span><br><span class="line"></span><br><span class="line">// &#x6839;&#x636E;&#x5916;&#x90E8;&#x6761;&#x4EF6;id&#x52A8;&#x6001;&#x62FC;&#x63A5;SQL</span><br><span class="line">if ( null != id ){</span><br><span class="line">    sql.append(&quot; where id = &quot; + id);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x6267;&#x884C;&#x8BED;&#x53E5;</span><br><span class="line">connection.prepareStatement(sql);</span><br></pre></td></tr></table></figure>

<p>&#x53EA;&#x4E0D;&#x8FC7;&#xFF0C;&#x8FD9;&#x79CD;&#x6784;&#x5EFA;&#x52A8;&#x6001; SQL &#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5B58;&#x5728;&#x5F88;&#x5927;&#x7684;&#x5B89;&#x5168;&#x95EE;&#x9898;&#x548C;&#x5F02;&#x5E38;&#x98CE;&#x9669;&#xFF08;&#x6211;&#x4EEC;&#x7B2C;5&#x70B9;&#x4F1A;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#xFF0C;&#x540E;&#x6765; Mybatis &#x5165;&#x4E16;&#x4E4B;&#x540E;&#xFF0C;&#x5728;&#x5BF9;&#x5F85;&#x52A8;&#x6001; SQL &#x8FD9;&#x4EF6;&#x4E8B;&#x4E0A;&#xFF0C;&#x5C31;&#x683C;&#x5916;&#x4E0A;&#x5FC3;&#xFF0C;&#x5B83;&#x9ED8;&#x9ED8;&#x53D1;&#x8A93;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x4E3A;&#x4F7F;&#x7528; Mybatis &#x6846;&#x67B6;&#x7684;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x4E00;&#x5957;&#x68D2;&#x68D2;&#x7684;&#x65B9;&#x6848;&#xFF08;&#x6807;&#x7B7E;&#xFF09;&#x6765;&#x7075;&#x6D3B;&#x6784;&#x5EFA;&#x52A8;&#x6001; SQL&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7ecb7107a073e32f0c469c9bd0c67034fa7d679d9ad1241013c0cfc41eabc027" alt></p>
<p>&#x4E8E;&#x662F;&#x4E4E;&#xFF0C;Mybatis &#x501F;&#x52A9; OGNL &#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x4F1F;&#x5927;&#x8BBE;&#x8BA1;&#xFF0C;&#x53EF;&#x7B97;&#x5728;&#x52A8;&#x6001; SQL &#x6784;&#x5EFA;&#x65B9;&#x9762;&#x63D0;&#x4F9B;&#x4E86;&#x5404;&#x7C7B;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x7684;&#x8F85;&#x52A9;&#x6807;&#x7B7E;&#xFF0C;&#x6211;&#x4EEC;&#x7B80;&#x5355;&#x5217;&#x4E3E;&#x4E00;&#x4E0B;&#x6709;&#xFF1A;if&#x3001;choose&#x3001;when&#x3001;otherwise&#x3001;trim&#x3001;where&#x3001;set&#x3001;foreach&#x3001;bind&#x7B49;&#xFF0C;&#x6211;&#x968F;&#x624B;&#x7FFB;&#x4E86;&#x7FFB;&#x6211;&#x7535;&#x8111;&#x91CC;&#x5934;&#x66FE;&#x7ECF;&#x4FDD;&#x5B58;&#x7684;&#x5B66;&#x4E60;&#x7B14;&#x8BB0;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x5728;&#x7B2C;3&#x8282;&#x4E2D;&#x6E29;&#x6545;&#x77E5;&#x65B0;&#xFF0C;&#x8BE6;&#x7EC6;&#x7684;&#x8BB2;&#x4E00;&#x8BB2;&#x5427;~</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b695689ed4c813e90c0dc5e85b594c3f026e5a20ec3399493fe8386bc18b5296" alt></p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x9700;&#x8981;&#x7EA0;&#x6B63;&#x4E00;&#x70B9;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5E73;&#x65E5;&#x91CC;&#x5728; Mybatis &#x6846;&#x67B6;&#x4E2D;&#x5E38;&#x8BF4;&#x7684;&#x52A8;&#x6001; SQL &#xFF0C;&#x5176;&#x5B9E;&#x7279;&#x6307;&#x7684;&#x4E5F;&#x5C31;&#x662F; Mybatis &#x6846;&#x67B6;&#x4E2D;&#x7684;&#x8FD9;&#x4E00;&#x5957;&#x52A8;&#x6001; SQL <strong>&#x6807;&#x7B7E;</strong>&#xFF0C;&#x6216;&#x8005;&#x8BF4;&#x662F;&#x8FD9;&#x4E00; <strong>&#x7279;&#x6027;</strong>&#xFF0C;&#x800C;&#x5E76;&#x4E0D;&#x662F;&#x5728;&#x8BF4;&#x52A8;&#x6001; SQL &#x672C;&#x8EAB;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/059995e83fc6394fef4645ec3b41794526996256100c579b9774328eac9380af" alt></p>
<h4 id="3&#x3001;&#x52A8;&#x6001;SQL&#x6807;&#x7B7E;&#x7684;9&#x5927;&#x6807;&#x7B7E;"><a href="#3&#x3001;&#x52A8;&#x6001;SQL&#x6807;&#x7B7E;&#x7684;9&#x5927;&#x6807;&#x7B7E;" class="headerlink" title="3&#x3001;&#x52A8;&#x6001;SQL&#x6807;&#x7B7E;&#x7684;9&#x5927;&#x6807;&#x7B7E;"></a>3&#x3001;&#x52A8;&#x6001;SQL&#x6807;&#x7B7E;&#x7684;9&#x5927;&#x6807;&#x7B7E;</h4><p>&#x5F88;&#x597D;&#xFF0C;&#x53EF;&#x7B97;&#x8FDB;&#x5165;&#x6211;&#x4EEC;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x7684;&#x4E3B;&#x9898;&#xFF0C;&#x6839;&#x636E;&#x524D;&#x9762;&#x7684;&#x94FA;&#x57AB;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x90FD;&#x80FD;&#x53D1;&#x73B0;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#x9759;&#x6001; SQL &#x8BED;&#x53E5;&#x5E76;&#x4E0D;&#x80FD;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x590D;&#x6742;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x9700;&#x6C42;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6709;&#x9002;&#x5F53;&#x7075;&#x6D3B;&#x7684;&#x4E00;&#x5957;&#x65B9;&#x5F0F;&#x6216;&#x8005;&#x80FD;&#x529B;&#xFF0C;&#x6765;&#x4FBF;&#x6377;&#x9AD8;&#x6548;&#x7684;&#x6784;&#x5EFA;&#x52A8;&#x6001; SQL &#x8BED;&#x53E5;&#xFF0C;&#x53BB;&#x5339;&#x914D;&#x6211;&#x4EEC;&#x52A8;&#x6001;&#x53D8;&#x5316;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x3002;&#x4E3E;&#x4E2A;&#x6817;&#x5B50;&#xFF0C;&#x5728;&#x4E0B;&#x9762;&#x6B64;&#x7C7B;&#x591A;&#x6761;&#x4EF6;&#x7684;&#x573A;&#x666F;&#x9700;&#x6C42;&#x4E4B;&#x4E0B;&#xFF0C;&#x52A8;&#x6001; SQL &#x8BED;&#x53E5;&#x5C31;&#x663E;&#x5F97;&#x5C24;&#x4E3A;&#x91CD;&#x8981;&#xFF08;&#x5148;&#x767B;&#x573A; if &#x6807;&#x7B7E;&#xFF09;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/8fd9c4874fe5e99acbaf6613d678d4f1278931e65a9590ee6dbc640679994e58" alt></p>
<p>&#x5F53;&#x7136;&#xFF0C;&#x5F88;&#x591A;&#x670B;&#x53CB;&#x4F1A;&#x8BF4;&#x8FD9;&#x7C7B;&#x9700;&#x6C42;&#xFF0C;&#x4E0D;&#x80FD;&#x7528; SQL &#x6765;&#x67E5;&#xFF0C;&#x5F97;&#x7528;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#xFF0C;&#x786E;&#x5B9E;&#x5982;&#x6B64;&#x3002;&#x4F46;&#x662F;&#x5462;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x5F53;&#x4E2D;&#xFF0C;&#x8FD8;&#x662F;&#x5B58;&#x5728;&#x5F88;&#x591A;&#x6CA1;&#x6709;&#x5F15;&#x5165;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7CFB;&#x7EDF;&#xFF0C;&#x6216;&#x8005;&#x6709;&#x4E9B;&#x6839;&#x672C;&#x65E0;&#x9700;&#x5F15;&#x5165;&#x641C;&#x7D22;&#x5F15;&#x64CE;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6216;&#x529F;&#x80FD;&#xFF0C;&#x5B83;&#x4EEC;&#x4E5F;&#x4F1A;&#x6D89;&#x53CA;&#x5230;&#x591A;&#x9009;&#x9879;&#x591A;&#x6761;&#x4EF6;&#x6216;&#x8005;&#x591A;&#x7ED3;&#x679C;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#xFF0C;&#x90A3;&#x6B64;&#x65F6;&#x4E5F;&#x5C31;&#x786E;&#x5B9E;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x6765;&#x7075;&#x6D3B;&#x6784;&#x5EFA;&#x6267;&#x884C;&#x8BED;&#x53E5;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#xFF0C; Mybatis &#x76EE;&#x524D;&#x90FD;&#x63D0;&#x4F9B;&#x4E86;&#x54EA;&#x4E9B;&#x68D2;&#x68D2;&#x7684;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x5462; &#xFF1F;&#x6211;&#x4EEC;&#x5148;&#x5F15;&#x51FA;&#x4E00;&#x4E2A;&#x7C7B;&#x53EB;&#x505A; XMLScriptBuilder &#xFF0C;&#x5927;&#x5BB6;&#x5148;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x5B83;&#x662F;&#x8D1F;&#x8D23;&#x89E3;&#x6790;&#x6211;&#x4EEC;&#x7684;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x7684;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x6784;&#x5EFA;&#x5668;&#xFF0C;&#x5728;&#x7B2C;4&#x70B9;&#x5E95;&#x5C42;&#x539F;&#x7406;&#x4E2D;&#x6211;&#x4EEC;&#x518D;&#x8BE6;&#x7EC6;&#x4ECB;&#x7ECD;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// XML&#x811A;&#x672C;&#x6807;&#x7B7E;&#x6784;&#x5EFA;&#x5668;</span><br><span class="line">public class XMLScriptBuilder{</span><br><span class="line">    </span><br><span class="line">    // &#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5904;&#x7406;&#x5668;&#x6C60;</span><br><span class="line">    private final Map&lt;String, NodeHandler&gt; nodeHandlerMap = new HashMap&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    // &#x6784;&#x9020;&#x5668;</span><br><span class="line">    public XMLScriptBuilder() { </span><br><span class="line">        initNodeHandlerMap();</span><br><span class="line">        //... &#x5176;&#x5B83;&#x521D;&#x59CB;&#x5316;&#x4E0D;&#x8D58;&#x8FF0;&#x4E5F;&#x4E0D;&#x91CD;&#x8981;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x521D;&#x59CB;&#x5316;</span><br><span class="line">    private void initNodeHandlerMap() {</span><br><span class="line">        nodeHandlerMap.put(&quot;trim&quot;, new TrimHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;where&quot;, new WhereHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;set&quot;, new SetHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;foreach&quot;, new ForEachHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;if&quot;, new IfHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;choose&quot;, new ChooseHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;when&quot;, new IfHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;otherwise&quot;, new OtherwiseHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;bind&quot;, new BindHandler());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x5B9E;&#x6E90;&#x7801;&#x4E2D;&#x5F88;&#x6E05;&#x6670;&#x5F97;&#x4F53;&#x73B0;&#xFF0C;&#x4E00;&#x5171;&#x6709; 9 &#x5927;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#xFF01;Mybatis &#x5728;&#x521D;&#x59CB;&#x5316;&#x89E3;&#x6790;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5B9E;&#x4F8B;&#x5316;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x7684;&#x6784;&#x9020;&#x5668;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x672C;&#x8EAB;&#x5C31;&#x4F1A;&#x63D0;&#x524D;&#x628A;&#x6240;&#x6709; Mybatis &#x652F;&#x6301;&#x7684;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x5BF9;&#x8C61;&#x5BF9;&#x5E94;&#x7684;&#x5904;&#x7406;&#x5668;&#x7ED9;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x653E;&#x5230;&#x4E00;&#x4E2A; Map &#x6C60;&#x5B50;&#x91CC;&#x5934;&#xFF0C;&#x800C;&#x8FD9;&#x4E9B;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x90FD;&#x662F;&#x8BE5;&#x7C7B; XMLScriptBuilder &#x7684;&#x4E00;&#x4E2A;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#xFF0C;&#x800C;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#x7684;&#x529F;&#x80FD;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x89E3;&#x6790;&#x5904;&#x7406;&#x5BF9;&#x5E94;&#x7C7B;&#x578B;&#x7684;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#xFF0C;&#x5728;&#x540E;&#x7EED;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x7684;&#x65F6;&#x5019;&#xFF0C;Mybatis &#x968F;&#x65F6;&#x5230; Map &#x6C60;&#x5B50;&#x4E2D;&#x5339;&#x914D;&#x5BF9;&#x5E94;&#x7684;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5904;&#x7406;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x89E3;&#x6790;&#x5373;&#x53EF;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x5BF9;&#x8FD9; 9 &#x5927;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x8FDB;&#x884C;&#x4ECB;&#x7ECD;&#xFF0C;&#x6392;&#xFF08;gen&#xFF09;&#x540D;&#xFF08;ju&#xFF09;&#x4E0D;&#xFF08;wo&#xFF09;&#x5206;&#xFF08;de&#xFF09;&#x5148;&#xFF08;xi&#xFF09;&#x540E;&#xFF08;hao&#xFF09;&#xFF1A;</p>
<hr>
<h5 id="Top1&#x3001;if-&#x6807;&#x7B7E;"><a href="#Top1&#x3001;if-&#x6807;&#x7B7E;" class="headerlink" title="Top1&#x3001;if &#x6807;&#x7B7E;"></a>Top1&#x3001;if &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;</p>
<p>if &#x6807;&#x7B7E;&#xFF0C;&#x7EDD;&#x5BF9;&#x7B97;&#x5F97;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x4F1F;&#x5927;&#x7684;&#x6807;&#x7B7E;&#xFF0C;&#x4EFB;&#x4F55;&#x4E0D;&#x652F;&#x6301;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#xFF08;&#x6216;&#x8BED;&#x53E5;&#x63A7;&#x5236;&#xFF09;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x90FD;&#x662F;&#x800D;&#x6D41;&#x6C13;&#xFF0C;&#x51E0;&#x4E4E;&#x90FD;&#x4E0D;&#x5177;&#x5907;&#x73B0;&#x5B9E;&#x610F;&#x4E49;&#xFF0C;&#x5B9E;&#x9645;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x548C;&#x6D41;&#x7A0B;&#x5FC5;&#x7136;&#x5B58;&#x5728;&#x6761;&#x4EF6;&#x7684;&#x63A7;&#x5236;&#x4E0E;&#x6D41;&#x8F6C;&#xFF0C;&#x800C; if &#x6807;&#x7B7E;&#x5728; <strong>&#x5355;&#x6761;&#x4EF6;&#x5206;&#x652F;&#x5224;&#x65AD;</strong> &#x5E94;&#x7528;&#x573A;&#x666F;&#x4E2D;&#x5C31;&#x8D77;&#x5230;&#x4E86;&#x820D;&#x6211;&#x5176;&#x8C01;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x8BED;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5982;&#x679C;&#x6EE1;&#x8DB3;&#xFF0C;&#x5219;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x6EE1;&#x8DB3;&#xFF0C;&#x5219;&#x5FFD;&#x7565;/&#x8DF3;&#x8FC7;&#x3002;</p>
<ul>
<li>if &#x6807;&#x7B7E; &#xFF1A; &#x5185;&#x5D4C;&#x4E8E; select / delete / update / insert &#x6807;&#x7B7E;&#xFF0C;&#x5982;&#x679C;&#x6EE1;&#x8DB3; test &#x5C5E;&#x6027;&#x7684;&#x6761;&#x4EF6;&#xFF0C;&#x5219;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x5757;</li>
<li>test &#x5C5E;&#x6027; &#xFF1A;&#x4F5C;&#x4E3A; if &#x6807;&#x7B7E;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x4E8E;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#xFF0C;&#x4F7F;&#x7528; OGNL &#x8868;&#x8FBE;&#x5F0F;&#x3002;</li>
</ul>
<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findUser&quot;&gt;</span><br><span class="line">    select * from User where 1=1</span><br><span class="line">    &lt;if test=&quot; age != null &quot;&gt;</span><br><span class="line">        and age &gt; #{age}</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot; name != null &quot;&gt;</span><br><span class="line">        and name like concat(#{name},&apos;%&apos;)</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x660E;&#x663E;&#xFF0C;if &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x5E38;&#x7528;&#x4E8E;&#x5305;&#x542B; where &#x5B50;&#x53E5;&#x7684;&#x6761;&#x4EF6;&#x62FC;&#x63A5;&#xFF0C;&#x5B83;&#x76F8;&#x5F53;&#x4E8E; Java &#x4E2D;&#x7684; if &#x8BED;&#x53E5;&#xFF0C;&#x548C; test &#x5C5E;&#x6027;&#x642D;&#x914D;&#x4F7F;&#x7528;&#xFF0C;&#x901A;&#x8FC7;&#x5224;&#x65AD;&#x53C2;&#x6570;&#x503C;&#x6765;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x4F7F;&#x7528;&#x67D0;&#x4E2A;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#xFF0C;&#x4E5F;&#x53EF;&#x7528;&#x4E8E; Update &#x8BED;&#x53E5;&#x4E2D;&#x5224;&#x65AD;&#x662F;&#x5426;&#x66F4;&#x65B0;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x6216;&#x7528;&#x4E8E; Insert &#x8BED;&#x53E5;&#x4E2D;&#x5224;&#x65AD;&#x662F;&#x5426;&#x63D2;&#x5165;&#x67D0;&#x4E2A;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x3002;</p>
<p>&#x6BCF;&#x4E00;&#x4E2A; if &#x6807;&#x7B7E;&#x5728;&#x8FDB;&#x884C;&#x5355;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x628A;&#x5224;&#x65AD;&#x6761;&#x4EF6;&#x8BBE;&#x7F6E;&#x5728; test &#x5C5E;&#x6027;&#x4E2D;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x6211;&#x4EEC;&#x5E38;&#x7528;&#x7684;&#x7528;&#x6237;&#x67E5;&#x8BE2;&#x7CFB;&#x7EDF;&#x529F;&#x80FD;&#x4E2D;&#xFF0C;&#x5728;&#x524D;&#x7AEF;&#x4E00;&#x822C;&#x63D0;&#x4F9B;&#x5F88;&#x591A;&#x53EF;&#x9009;&#x7684;&#x67E5;&#x8BE2;&#x9879;&#xFF0C;&#x652F;&#x6301;&#x6027;&#x522B;&#x7B5B;&#x9009;&#x3001;&#x5E74;&#x9F84;&#x533A;&#x95F4;&#x7B5B;&#x67E5;&#x3001;&#x59D3;&#x540D;&#x6A21;&#x7CCA;&#x5339;&#x914D;&#x7B49;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x7A0B;&#x5E8F;&#x4E2D;&#x63A5;&#x6536;&#x7528;&#x6237;&#x8F93;&#x5165;&#x4E4B;&#x540E;&#xFF0C;Mybatis &#x7684;&#x52A8;&#x6001; SQL &#x8282;&#x7701;&#x6211;&#x4EEC;&#x5F88;&#x591A;&#x5DE5;&#x4F5C;&#xFF0C;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x5728;&#x4EE3;&#x7801;&#x5C42;&#x9762;&#x4E0D;&#x8FDB;&#x884C;&#x53C2;&#x6570;&#x903B;&#x8F91;&#x5904;&#x7406;&#x548C; SQL &#x62FC;&#x63A5;&#xFF0C;&#x800C;&#x662F;&#x628A;&#x53C2;&#x6570;&#x4F20;&#x5165;&#x5230; SQL &#x4E2D;&#x8FDB;&#x884C;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#x52A8;&#x6001;&#x5904;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x628A;&#x7CBE;&#x529B;&#x96C6;&#x4E2D;&#x5728; XML &#x7684;&#x7EF4;&#x62A4;&#x4E0A;&#xFF0C;&#x65E2;&#x7075;&#x6D3B;&#x4E5F;&#x65B9;&#x4FBF;&#x7EF4;&#x62A4;&#xFF0C;&#x53EF;&#x8BFB;&#x6027;&#x8FD8;&#x5F3A;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2db04ce9f327a80d830a239ac331ce009f41a3f1c07d43b1464227377491b52b" alt></p>
<p>&#x6709;&#x4E9B;&#x5FC3;&#x7EC6;&#x7684;&#x670B;&#x53CB;&#x53EF;&#x80FD;&#x5C31;&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48; where &#x8BED;&#x53E5;&#x4F1A;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; 1=1 &#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x62FC;&#x63A5;&#x540E;&#x9762;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x7684; if &#x6807;&#x7B7E;&#x8BED;&#x53E5;&#x5757;&#xFF0C;&#x5426;&#x5219;&#x6CA1;&#x6709; 1=1 &#x7684;&#x8BDD;&#x6211;&#x4EEC;&#x62FC;&#x63A5;&#x7684; SQL &#x5C31;&#x4F1A;&#x53D8;&#x6210; select * from user where and age &gt; 0 , &#x663E;&#x7136;&#x8FD9;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x671F;&#x671B;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x4E0D;&#x7B26;&#x5408; SQL &#x7684;&#x8BED;&#x6CD5;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x4E5F;&#x4E0D;&#x53EF;&#x80FD;&#x6267;&#x884C;&#x6210;&#x529F;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x6295;&#x673A;&#x53D6;&#x5DE7;&#x6DFB;&#x52A0;&#x4E86; 1=1 &#x8FD9;&#x4E2A;&#x8BED;&#x53E5;&#xFF0C;&#x4F46;&#x662F;&#x59CB;&#x7EC8;&#x89C9;&#x5F97;&#x591A;&#x4F59;&#x4E14;&#x6CA1;&#x5FC5;&#x8981;&#xFF0C;Mybatis &#x4E5F;&#x8003;&#x8651;&#x5230;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x7B49;&#x4F1A;&#x6211;&#x4EEC;&#x8BB2; where &#x6807;&#x7B7E;&#xFF0C;&#x5B83;&#x662F;&#x5982;&#x4F55;&#x5B8C;&#x7F8E;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;if &#x6807;&#x7B7E;&#x4F5C;&#x4E3A;&#x5355;&#x6761;&#x4EF6;&#x5206;&#x652F;&#x5224;&#x65AD;&#xFF0C;&#x53EA;&#x80FD;&#x63A7;&#x5236;&#x4E0E;&#x975E;&#x6B64;&#x5373;&#x5F7C;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x4F8B;&#x5982;&#x4EE5;&#x4E0A;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5982;&#x679C;&#x5E74;&#x9F84; age &#x548C;&#x59D3;&#x540D; name &#x90FD;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x90A3;&#x4E48;&#x7CFB;&#x7EDF;&#x4F1A;&#x628A;&#x6240;&#x6709;&#x7ED3;&#x679C;&#x90FD;&#x67E5;&#x8BE2;&#x51FA;&#x6765;&#xFF0C;&#x4F46;&#x6709;&#x4E9B;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x7CFB;&#x7EDF;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#xFF0C;&#x80FD;&#x6709;&#x66F4;&#x591A;&#x7684;&#x6D41;&#x7A0B;&#x5206;&#x652F;&#xFF0C;&#x4F8B;&#x5982;&#x50CF;&#x6211;&#x4EEC; Java &#x5F53;&#x4E2D;&#x7684; if else &#x6216; switch case default&#xFF0C;&#x4E0D;&#x4EC5;&#x4EC5;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x5206;&#x652F;&#xFF0C;&#x6240;&#x4EE5;&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD; choose &#x6807;&#x7B7E;&#xFF0C;&#x5B83;&#x5C31;&#x80FD;&#x6EE1;&#x8DB3;&#x591A;&#x5206;&#x652F;&#x5224;&#x65AD;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x3002;</p>
</blockquote>
<hr>
<h5 id="Top2&#x3001;choose-&#x6807;&#x7B7E;&#x3001;when-&#x6807;&#x7B7E;&#x3001;otherwise-&#x6807;&#x7B7E;"><a href="#Top2&#x3001;choose-&#x6807;&#x7B7E;&#x3001;when-&#x6807;&#x7B7E;&#x3001;otherwise-&#x6807;&#x7B7E;" class="headerlink" title="Top2&#x3001;choose &#x6807;&#x7B7E;&#x3001;when &#x6807;&#x7B7E;&#x3001;otherwise &#x6807;&#x7B7E;"></a>Top2&#x3001;choose &#x6807;&#x7B7E;&#x3001;when &#x6807;&#x7B7E;&#x3001;otherwise &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;</p>
<p>&#x6709;&#x4E9B;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x5E0C;&#x671B;&#x6761;&#x4EF6;&#x63A7;&#x5236;&#x662F;&#x975E;&#x6B64;&#x5373;&#x5F7C;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x5E0C;&#x671B;&#x80FD;&#x63D0;&#x4F9B;&#x591A;&#x4E2A;&#x6761;&#x4EF6;&#x5E76;&#x4ECE;&#x4E2D;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#xFF0C;&#x6240;&#x4EE5;&#x8D34;&#x5FC3;&#x7684; Mybatis &#x63D0;&#x4F9B;&#x4E86; choose &#x6807;&#x7B7E;&#x5143;&#x7D20;&#xFF0C;&#x7C7B;&#x4F3C;&#x6211;&#x4EEC; Java &#x5F53;&#x4E2D;&#x7684; if else &#x6216; switch case default&#xFF0C;choose &#x6807;&#x7B7E;&#x5FC5;&#x987B;&#x642D;&#x914D; when &#x6807;&#x7B7E;&#x548C; otherwise &#x6807;&#x7B7E;&#x4F7F;&#x7528;&#xFF0C;&#x9A8C;&#x8BC1;&#x6761;&#x4EF6;&#x4F9D;&#x7136;&#x662F;&#x4F7F;&#x7528; test &#x5C5E;&#x6027;&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#x3002;</p>
<ul>
<li>choose &#x6807;&#x7B7E;&#xFF1A;&#x9876;&#x5C42;&#x7684;&#x591A;&#x5206;&#x652F;&#x6807;&#x7B7E;&#xFF0C;&#x5355;&#x72EC;&#x4F7F;&#x7528;&#x65E0;&#x610F;&#x4E49;</li>
<li>when &#x6807;&#x7B7E;&#xFF1A;&#x5185;&#x5D4C;&#x4E8E; choose &#x6807;&#x7B7E;&#x4E4B;&#x4E2D;&#xFF0C;&#x5F53;&#x6EE1;&#x8DB3;&#x67D0;&#x4E2A; when &#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x7684;&#x4EE3;&#x7801;&#x5757;&#xFF0C;&#x5E76;&#x7EC8;&#x6B62;&#x8DF3;&#x51FA; choose &#x6807;&#x7B7E;&#xFF0C;choose &#x4E2D;&#x5FC5;&#x987B;&#x81F3;&#x5C11;&#x5B58;&#x5728;&#x4E00;&#x4E2A; when &#x6807;&#x7B7E;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x610F;&#x4E49;</li>
<li>otherwise &#x6807;&#x7B7E;&#xFF1A;&#x5185;&#x5D4C;&#x4E8E; choose &#x6807;&#x7B7E;&#x4E4B;&#x4E2D;&#xFF0C;&#x5F53;&#x4E0D;&#x6EE1;&#x8DB3;&#x6240;&#x6709; when &#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x5219;&#x6267;&#x884C; otherwise &#x4EE3;&#x7801;&#x5757;&#xFF0C;choose &#x4E2D; <strong>&#x81F3;&#x591A;</strong> &#x5B58;&#x5728;&#x4E00;&#x4E2A; otherwise &#x6807;&#x7B7E;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x5B58;&#x5728;&#x8BE5;&#x6807;&#x7B7E;</li>
<li>test &#x5C5E;&#x6027; &#xFF1A;&#x4F5C;&#x4E3A; when &#x4E0E; otherwise &#x6807;&#x7B7E;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x4F5C;&#x4E3A;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#xFF0C;&#x4F7F;&#x7528; OGNL &#x8868;&#x8FBE;&#x5F0F;</li>
</ul>
<p>&#x4F9D;&#x636E;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5F53;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8F93;&#x5165;&#x5E74;&#x9F84; age &#x6216;&#x8005;&#x59D3;&#x540D; name &#x65F6;&#xFF0C;&#x4F1A;&#x6267;&#x884C;&#x5BF9;&#x5E94;&#x7684; when &#x6807;&#x7B7E;&#x5185;&#x7684;&#x4EE3;&#x7801;&#x5757;&#xFF0C;&#x5982;&#x679C; when &#x6807;&#x7B7E;&#x7684;&#x5E74;&#x9F84; age &#x548C;&#x59D3;&#x540D; name &#x90FD;&#x4E0D;&#x6EE1;&#x8DB3;&#xFF0C;&#x5219;&#x4F1A;&#x62FC;&#x63A5; otherwise &#x6807;&#x7B7E;&#x5185;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findUser&quot;&gt;</span><br><span class="line">    select * from User where 1=1 </span><br><span class="line">    &lt;choose&gt;</span><br><span class="line">        &lt;when test=&quot; age != null &quot;&gt;</span><br><span class="line">        	and age &gt; #{age}</span><br><span class="line">        &lt;/when&gt;</span><br><span class="line">        &lt;when test=&quot; name != null &quot;&gt;</span><br><span class="line">        	and name like concat(#{name},&apos;%&apos;)</span><br><span class="line">        &lt;/when&gt;</span><br><span class="line">        &lt;otherwise&gt;</span><br><span class="line">            and sex = &apos;&#x7537;&apos;</span><br><span class="line">        &lt;/otherwise&gt;</span><br><span class="line">    &lt;/choose&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f5c4974ef193acee78ba72828fd8addc8ef4650cf9dc7ca3434a8e490c514065" alt></p>
<p>&#x5F88;&#x660E;&#x663E;&#xFF0C;choose &#x6807;&#x7B7E;&#x4F5C;&#x4E3A;&#x591A;&#x5206;&#x652F;&#x6761;&#x4EF6;&#x5224;&#x65AD;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x591A;&#x7075;&#x6D3B;&#x7684;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#xFF0C;&#x540C;&#x65F6; otherwise &#x7684;&#x51FA;&#x73B0;&#x4E5F;&#x4E3A;&#x7A0B;&#x5E8F;&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#x515C;&#x5E95;&#xFF0C;&#x6709;&#x65F6;&#x80FD;&#x591F;&#x907F;&#x514D;&#x90E8;&#x5206;&#x7CFB;&#x7EDF;&#x98CE;&#x9669;&#x3001;&#x8FC7;&#x6EE4;&#x90E8;&#x5206;&#x6761;&#x4EF6;&#x3001;&#x907F;&#x514D;&#x5F53;&#x7A0B;&#x5E8F;&#x6CA1;&#x6709;&#x5339;&#x914D;&#x5230;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x628A;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x8D44;&#x6E90;&#x5168;&#x90E8;&#x67E5;&#x8BE2;&#x6216;&#x66F4;&#x65B0;&#x3002;</p>
<blockquote>
<p>&#x81F3;&#x4E8E;&#x4E3A;&#x4F55; choose &#x6807;&#x7B7E;&#x8FD9;&#x4E48;&#x68D2;&#x68D2;&#xFF0C;&#x800C;&#x5E38;&#x7528;&#x5EA6;&#x8FD8;&#x662F;&#x6BD4; if &#x6807;&#x7B7E;&#x5C11;&#x4E86;&#x4E00;&#x9897;&#x661F;&#x5462;&#xFF1F;&#x539F;&#x56E0;&#x4E5F;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A; choose &#x6807;&#x7B7E;&#x7684;&#x5F88;&#x591A;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528; if &#x6807;&#x7B7E;&#x4EE3;&#x66FF;&#x3002;&#x53E6;&#x5916;&#x636E;&#x6211;&#x7EDF;&#x8BA1;&#xFF0C;if &#x6807;&#x7B7E;&#x5728;&#x5B9E;&#x9645;&#x4E1A;&#x52A1;&#x5E94;&#x7528;&#x5F53;&#x4E2D;&#xFF0C;&#x4E5F;&#x8981;&#x591A;&#x4E8E; choose &#x6807;&#x7B7E;&#xFF0C;&#x5927;&#x5BB6;&#x4E5F;&#x53EF;&#x4EE5;&#x5177;&#x4F53;&#x6838;&#x67E5;&#x81EA;&#x5DF1;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x7684;&#x5360;&#x6BD4;&#x60C5;&#x51B5;&#xFF0C;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x3002;</p>
</blockquote>
<hr>
<h5 id="Top3&#x3001;foreach-&#x6807;&#x7B7E;"><a href="#Top3&#x3001;foreach-&#x6807;&#x7B7E;" class="headerlink" title="Top3&#x3001;foreach &#x6807;&#x7B7E;"></a>Top3&#x3001;foreach &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;</p>
<p>&#x6709;&#x4E9B;&#x573A;&#x666F;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x67E5;&#x8BE2; id &#x5728; 1 ~ 100 &#x7684;&#x7528;&#x6237;&#x8BB0;&#x5F55;</p>
<p>&#x6709;&#x4E9B;&#x573A;&#x666F;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x6279;&#x91CF;&#x63D2;&#x5165; 100 &#x6761;&#x7528;&#x6237;&#x8BB0;&#x5F55;</p>
<p>&#x6709;&#x4E9B;&#x573A;&#x666F;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x66F4;&#x65B0; 500 &#x4E2A;&#x7528;&#x6237;&#x7684;&#x59D3;&#x540D;</p>
<p>&#x6709;&#x4E9B;&#x573A;&#x666F;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4F60;&#x5220;&#x9664; 10 &#x6761;&#x7528;&#x6237;&#x8BB0;&#x5F55;</p>
<p><strong>&#x8BF7;&#x95EE;&#x5927;&#x5BB6;</strong>&#xFF1A;</p>
<p>&#x5F88;&#x591A;&#x589E;&#x5220;&#x6539;&#x67E5;&#x573A;&#x666F;&#xFF0C;&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x90FD;&#x662F;&#x96C6;&#x5408;/&#x5217;&#x8868;</p>
<p>&#x5982;&#x679C;&#x662F;&#x4F60;&#x6765;&#x8BBE;&#x8BA1;&#x652F;&#x6301; Mybatis &#x7684;&#x8FD9;&#x4E00;&#x7C7B;&#x96C6;&#x5408;/&#x5217;&#x8868;&#x904D;&#x5386;&#x573A;&#x666F;&#xFF0C;&#x4F60;&#x4F1A;&#x63D0;&#x4F9B;&#x4EC0;&#x4E48;&#x80FD;&#x529B;&#x7684;&#x6807;&#x7B7E;&#x6765;&#x8F85;&#x52A9;&#x6784;&#x5EFA;&#x4F60;&#x7684; SQL &#x8BED;&#x53E5;&#x4ECE;&#x800C;&#x53BB;&#x6EE1;&#x8DB3;&#x6B64;&#x7C7B;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x5462;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/785d8222d0b2f81a927c378489e09cc11dcd403b83074a0dd146c25cb7dccb7e" alt></p>
<p>&#x989D;(&#x2299;o&#x2299;)&#x2026;</p>
<p>&#x90A3;&#x5982;&#x679C;&#x4E00;&#x5B9A;&#x8981;&#x7528; Mybatis &#x6846;&#x67B6;&#x5462;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f10af9667c83bfcbc948a44ba3fabe7be9deaf8d1f0d87dfa17a4189abe9ffe9" alt></p>
<p>&#x6CA1;&#x9519;&#xFF0C;&#x786E;&#x5B9E; Mybatis &#x63D0;&#x4F9B;&#x4E86; foreach &#x6807;&#x7B7E;&#x6765;&#x5904;&#x7406;&#x8FD9;&#x51E0;&#x7C7B;&#x9700;&#x8981;&#x904D;&#x5386;&#x96C6;&#x5408;&#x7684;&#x573A;&#x666F;&#xFF0C;foreach &#x6807;&#x7B7E;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5FAA;&#x73AF;&#x8BED;&#x53E5;&#xFF0C;&#x4ED6;&#x80FD;&#x591F;&#x5F88;&#x597D;&#x7684;&#x652F;&#x6301;&#x6570;&#x7EC4;&#x3001;Map&#x3001;&#x6216;&#x5B9E;&#x73B0;&#x4E86; Iterable &#x63A5;&#x53E3;&#xFF08;List&#x3001;Set&#xFF09;&#x7B49;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x6784;&#x5EFA; in &#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x5E38;&#x89C4;&#x7684;&#x7528;&#x6CD5;&#x90FD;&#x662F; id in (1,2,3,4,5 &#x2026; 100) &#xFF0C;&#x7406;&#x8BBA;&#x4E0A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4E2D;&#x62FC;&#x63A5;&#x5B57;&#x7B26;&#x4E32;&#x7136;&#x540E;&#x901A;&#x8FC7; ${ ids } &#x65B9;&#x5F0F;&#x6765;&#x4F20;&#x503C;&#x83B7;&#x53D6;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E0D;&#x80FD;&#x9632;&#x6B62; SQL &#x6CE8;&#x5165;&#x98CE;&#x9669;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x7279;&#x522B;&#x5BB9;&#x6613;&#x62FC;&#x63A5;&#x9519;&#x8BEF;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x6B64;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528; #{} + foreach &#x6807;&#x7B7E;&#x6765;&#x914D;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x9700;&#x6C42;&#x3002;&#x8B6C;&#x5982;&#x6211;&#x4EEC;&#x4F20;&#x5165;&#x4E00;&#x4E2A; List &#x5217;&#x8868;&#x67E5;&#x8BE2; id &#x5728; 1 ~ 100 &#x7684;&#x7528;&#x6237;&#x8BB0;&#x5F55;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findAll&quot;&gt;</span><br><span class="line">    select  * from user where ids in </span><br><span class="line">    &lt;foreach collection=&quot;list&quot;</span><br><span class="line">        item=&quot;item&quot; index=&quot;index&quot; </span><br><span class="line">        open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">            #{item}</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x7EC8;&#x62FC;&#x63A5;&#x5B8C;&#x6574;&#x7684;&#x8BED;&#x53E5;&#x5C31;&#x53D8;&#x6210;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">select  * from user where ids in (1,2,3,...,100);</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x7F16;&#x5199;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findAll&quot;&gt;</span><br><span class="line">    select  * from user where </span><br><span class="line">    &lt;foreach collection=&quot;list&quot;</span><br><span class="line">        item=&quot;item&quot; index=&quot;index&quot; </span><br><span class="line">        open=&quot; &quot; separator=&quot; or &quot; close=&quot; &quot;&gt;</span><br><span class="line">            id = #{item}</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x7EC8;&#x62FC;&#x63A5;&#x5B8C;&#x6574;&#x7684;&#x8BED;&#x53E5;&#x5C31;&#x53D8;&#x6210;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">select  * from user where id =1 or id =2 or id =3  ... or id = 100;</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6570;&#x636E;&#x91CF;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8FD9;&#x4E2A;&#x6027;&#x80FD;&#x4F1A;&#x6BD4;&#x8F83;&#x5C34;&#x5C2C;&#xFF0C;&#x8FD9;&#x91CC;&#x4EC5;&#x4EC5;&#x505A;&#x4E00;&#x4E2A;&#x7528;&#x6CD5;&#x7684;&#x4E3E;&#x4F8B;&#x3002;&#x6240;&#x4EE5;&#x7ECF;&#x8FC7;&#x4E0A;&#x9762;&#x7684;&#x4E3E;&#x6817;&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x4E5F;&#x57FA;&#x672C;&#x80FD;&#x731C;&#x51FA; foreach &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x7684;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#xFF1A;</p>
<ul>
<li>foreach &#x6807;&#x7B7E;&#xFF1A;&#x9876;&#x5C42;&#x7684;&#x904D;&#x5386;&#x6807;&#x7B7E;&#xFF0C;&#x5355;&#x72EC;&#x4F7F;&#x7528;&#x65E0;&#x610F;&#x4E49;</li>
<li>collection &#x5C5E;&#x6027;&#xFF1A;&#x5FC5;&#x586B;&#xFF0C;Map &#x6216;&#x8005;&#x6570;&#x7EC4;&#x6216;&#x8005;&#x5217;&#x8868;&#x7684;&#x5C5E;&#x6027;&#x540D;&#xFF08;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x503C;&#x83B7;&#x53D6;&#x4E0B;&#x9762;&#x4F1A;&#x8BB2;&#x89E3;&#xFF09;</li>
<li>item &#x5C5E;&#x6027;&#xFF1A;&#x53D8;&#x91CF;&#x540D;&#xFF0C;&#x503C;&#x4E3A;&#x904D;&#x5386;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x503C;&#xFF08;&#x53EF;&#x4EE5;&#x662F;&#x5BF9;&#x8C61;&#x6216;&#x57FA;&#x7840;&#x7C7B;&#x578B;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5BF9;&#x8C61;&#x90A3;&#x4E48;&#x4F9D;&#x65E7;&#x662F; OGNL &#x8868;&#x8FBE;&#x5F0F;&#x53D6;&#x503C;&#x5373;&#x53EF;&#xFF0C;&#x4F8B;&#x5982; #{item.id} &#x3001;#{ user.name } &#x7B49;</li>
<li>index &#x5C5E;&#x6027;&#xFF1A;&#x7D22;&#x5F15;&#x7684;&#x5C5E;&#x6027;&#x540D;&#xFF0C;&#x5728;&#x904D;&#x5386;&#x5217;&#x8868;&#x6216;&#x6570;&#x7EC4;&#x65F6;&#x4E3A;&#x5F53;&#x524D;&#x7D22;&#x5F15;&#x503C;&#xFF0C;&#x5F53;&#x8FED;&#x4EE3;&#x7684;&#x5BF9;&#x8C61;&#x65F6; Map &#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x8BE5;&#x503C;&#x4E3A; Map &#x7684;&#x952E;&#x503C;&#xFF08;key&#xFF09;</li>
<li>open &#x5C5E;&#x6027;&#xFF1A;&#x5FAA;&#x73AF;&#x5185;&#x5BB9;&#x5F00;&#x5934;&#x62FC;&#x63A5;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</li>
<li>close &#x5C5E;&#x6027;&#xFF1A;&#x5FAA;&#x73AF;&#x5185;&#x5BB9;&#x7ED3;&#x5C3E;&#x62FC;&#x63A5;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EF;&#x4EE5;&#x662F;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</li>
<li>separator &#x5C5E;&#x6027;&#xFF1A;&#x6BCF;&#x6B21;&#x5FAA;&#x73AF;&#x7684;&#x5206;&#x9694;&#x7B26;</li>
</ul>
<p><strong>&#x7B2C;&#x4E00;&#xFF0C;&#x5F53;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x4E3A; List &#x5BF9;&#x8C61;&#x65F6;</strong>&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; key &#x4E3A; &#x2018;list&#x2019; &#x7684;&#x503C;&#xFF0C;&#x628A;&#x5217;&#x8868;&#x5185;&#x5BB9;&#x653E;&#x5230;&#x8FD9;&#x4E2A; key &#x4E3A; list &#x7684;&#x96C6;&#x5408;&#x5F53;&#x4E2D;&#xFF0C;&#x5728; foreach &#x6807;&#x7B7E;&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7; collection=&#x201D;list&#x201D; &#x83B7;&#x53D6;&#x5230; List &#x5BF9;&#x8C61;&#xFF0C;&#x65E0;&#x8BBA;&#x4F60;&#x4F20;&#x5165;&#x65F6;&#x4F7F;&#x7528; kkk &#x6216;&#x8005; aaa ,&#x90FD;&#x65E0;&#x6240;&#x8C13;&#xFF0C;&#x7CFB;&#x7EDF;&#x90FD;&#x4F1A;&#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; key &#x4E3A; list &#x7684;&#x503C;&#xFF0C;&#x5E76;&#x4E14; item &#x6307;&#x5B9A;&#x904D;&#x5386;&#x7684;&#x5BF9;&#x8C61;&#x503C;&#xFF0C;index &#x6307;&#x5B9A;&#x904D;&#x5386;&#x7D22;&#x5F15;&#x503C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// java &#x4EE3;&#x7801;</span><br><span class="line">List kkk = new ArrayList();</span><br><span class="line">kkk.add(1);</span><br><span class="line">kkk.add(2);</span><br><span class="line">...</span><br><span class="line">kkk.add(100);</span><br><span class="line">sqlSession.selectList(&quot;findAll&quot;,kkk);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- xml &#x914D;&#x7F6E; --&gt;</span><br><span class="line">&lt;select id=&quot;findAll&quot;&gt;</span><br><span class="line">    select  * from user where ids in </span><br><span class="line">    &lt;foreach collection=&quot;list&quot;</span><br><span class="line">        item=&quot;item&quot; index=&quot;index&quot; </span><br><span class="line">        open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">            #{item}</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p><strong>&#x7B2C;&#x4E8C;&#xFF0C;&#x5F53;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x4E3A;&#x6570;&#x7EC4;&#x65F6;</strong>&#xFF0C;&#x7CFB;&#x7EDF;&#x4F1A;&#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; key &#x4E3A; &#x2018;array&#x2019; &#x7684;&#x503C;&#xFF0C;&#x628A;&#x5217;&#x8868;&#x5185;&#x5BB9;&#x653E;&#x5230;&#x8FD9;&#x4E2A; key &#x4E3A; array &#x7684;&#x96C6;&#x5408;&#x5F53;&#x4E2D;&#xFF0C;&#x5728; foreach &#x6807;&#x7B7E;&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7; collection=&#x201D;array&#x201D; &#x83B7;&#x53D6;&#x5230;&#x6570;&#x7EC4;&#x5BF9;&#x8C61;&#xFF0C;&#x65E0;&#x8BBA;&#x4F60;&#x4F20;&#x5165;&#x65F6;&#x4F7F;&#x7528; ids &#x6216;&#x8005; aaa ,&#x90FD;&#x65E0;&#x6240;&#x8C13;&#xFF0C;&#x7CFB;&#x7EDF;&#x90FD;&#x4F1A;&#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; key &#x4E3A; array &#x7684;&#x503C;&#xFF0C;&#x5E76;&#x4E14; item &#x6307;&#x5B9A;&#x904D;&#x5386;&#x7684;&#x5BF9;&#x8C61;&#x503C;&#xFF0C;index &#x6307;&#x5B9A;&#x904D;&#x5386;&#x7D22;&#x5F15;&#x503C;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// java &#x4EE3;&#x7801;</span><br><span class="line">String [] ids = new String[3];</span><br><span class="line">ids[0] = &quot;1&quot;;</span><br><span class="line">ids[1] = &quot;2&quot;;</span><br><span class="line">ids[2] = &quot;3&quot;;</span><br><span class="line">sqlSession.selectList(&quot;findAll&quot;,ids);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- xml &#x914D;&#x7F6E; --&gt;</span><br><span class="line">&lt;select id=&quot;findAll&quot;&gt;</span><br><span class="line">    select  * from user where ids in </span><br><span class="line">    &lt;foreach collection=&quot;array&quot;</span><br><span class="line">        item=&quot;item&quot; index=&quot;index&quot; </span><br><span class="line">        open=&quot;(&quot; separator=&quot;,&quot; close=&quot;)&quot;&gt;</span><br><span class="line">            #{item}</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p><strong>&#x7B2C;&#x4E09;&#xFF0C;&#x5F53;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x4E3A; Map &#x5BF9;&#x8C61;&#x65F6;</strong>&#xFF0C;&#x7CFB;&#x7EDF;&#x5E76; <strong>&#x4E0D;&#x4F1A;</strong> &#x9ED8;&#x8BA4;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A; key &#x503C;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x5DE5;&#x4F20;&#x5165;&#xFF0C;&#x4F8B;&#x5982;&#x4F20;&#x5165; key &#x503C;&#x4E3A; map2 &#x7684;&#x96C6;&#x5408;&#x5BF9;&#x8C61;&#xFF0C;&#x5728; foreach &#x6807;&#x7B7E;&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7; collection=&#x201D;map2&#x201D; &#x83B7;&#x53D6;&#x5230; Map &#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x4E14; item &#x4EE3;&#x8868;&#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x7684;&#x7684; value &#x503C;&#xFF0C;index &#x4EE3;&#x8868;&#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x7684; key &#x503C;&#x3002;&#x5176;&#x4E2D; item &#x548C; index &#x7684;&#x503C;&#x540D;&#x8BCD;&#x53EF;&#x4EE5;&#x968F;&#x610F;&#x5B9A;&#x4E49;&#xFF0C;&#x4F8B;&#x5982; item = &#x201C;value111&#x201D;&#xFF0C;index =&#x201D;key111&#x201D;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// java &#x4EE3;&#x7801;</span><br><span class="line">Map map2 = new HashMap&lt;&gt;();</span><br><span class="line">map2.put(&quot;k1&quot;,1);</span><br><span class="line">map2.put(&quot;k2&quot;,2);</span><br><span class="line">map2.put(&quot;k3&quot;,3);</span><br><span class="line"></span><br><span class="line">Map map1 = new HashMap&lt;&gt;();</span><br><span class="line">map1.put(&quot;map2&quot;,map2);</span><br><span class="line">sqlSession.selectList(&quot;findAll&quot;,map1);</span><br></pre></td></tr></table></figure>

<p>&#x633A;&#x95F9;&#x5FC3;&#xFF0C;map1 &#x5957;&#x7740; map2&#xFF0C;&#x624D;&#x80FD;&#x5728; foreach &#x7684; collection &#x5C5E;&#x6027;&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- xml &#x914D;&#x7F6E; --&gt;</span><br><span class="line">&lt;select id=&quot;findAll&quot;&gt;</span><br><span class="line">    select  * from user where</span><br><span class="line">    &lt;foreach collection=&quot;map2&quot;</span><br><span class="line">        item=&quot;value111&quot; index=&quot;key111&quot; </span><br><span class="line">        open=&quot; &quot; separator=&quot; or &quot; close=&quot; &quot;&gt;</span><br><span class="line">        id = #{value111}</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/317e6da4b4f20b580b36f8cc5641157f052b42eb5761fe011fa681ed792b76d4" alt></p>
<p>&#x53EF;&#x80FD;&#x4F60;&#x4F1A;&#x89C9;&#x5F97; Map &#x53D7;&#x5230;&#x4E0D;&#x516C;&#x5E73;&#x5BF9;&#x5F85;&#xFF0C;&#x4E3A;&#x4F55; map &#x4E0D;&#x80FD;&#x50CF; List &#x6216;&#x8005; Array &#x4E00;&#x6837;&#xFF0C;&#x5728;&#x6846;&#x67B6;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A; &#x2018;map&#x2019; &#x7684; key &#x503C;&#x5462;&#xFF1F;&#x4F46;&#x5176;&#x5B9E;&#x4E0D;&#x662F;&#x4E0D;&#x516C;&#x5E73;&#xFF0C;&#x800C;&#x662F;&#x6211;&#x4EEC;&#x5728; Mybatis &#x6846;&#x67B6;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x4F20;&#x5165;&#x7684;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#x90FD;&#x4F1A;&#x4F9B;&#x4E0A;&#x4E0B;&#x6587;&#x4F7F;&#x7528;&#xFF0C;&#x4E8E;&#x662F;&#x53C2;&#x6570;&#x4F1A;&#x88AB;&#x7EDF;&#x4E00;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x5185;&#x7F6E;&#x53C2;&#x6570;&#x6C60;&#x5B50;&#x91CC;&#x9762;&#xFF0C;&#x8FD9;&#x4E2A;&#x5185;&#x7F6E;&#x53C2;&#x6570;&#x6C60;&#x5B50;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x4E00;&#x4E2A; map &#x96C6;&#x5408;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A; map &#x96C6;&#x5408;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4F7F;&#x7528; &#x201C;_parameter&#x201D; &#x6765;&#x83B7;&#x53D6;&#xFF0C;&#x6240;&#x6709; key &#x90FD;&#x4F1A;&#x5B58;&#x50A8;&#x5728; _parameter &#x96C6;&#x5408;&#x4E2D;&#xFF0C;&#x56E0;&#x6B64;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x4F60;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A; list &#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6C60;&#x5B50;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A; key &#x503C;&#xFF0C;&#x4EE5;&#x4F9B;&#x4E0A;&#x4E0B;&#x6587;&#x83B7;&#x53D6;&#x8FD9;&#x4E2A; list &#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A; &#x2018;list&#x2019; &#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A; key &#x503C;&#xFF0C;&#x83B7;&#x53D6;&#x65F6;&#x901A;&#x8FC7;&#x4F7F;&#x7528; _parameter.list &#x6765;&#x83B7;&#x53D6;&#xFF0C;&#x4E00;&#x822C;&#x4F7F;&#x7528; list &#x5373;&#x53EF;&#x3002;</li>
<li>&#x540C;&#x6837;&#x7684;&#xFF0C;&#x5F53;&#x4F60;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A; array &#x6570;&#x7EC4;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6C60;&#x5B50;&#x4E5F;&#x4F1A;&#x9ED8;&#x8BA4;&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A; &#x2018;array&#x2019; &#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A; key &#x503C;&#xFF0C;&#x4EE5;&#x4F9B;&#x4E0A;&#x4E0B;&#x6587;&#x83B7;&#x53D6;&#x8FD9;&#x4E2A; array &#x6570;&#x7EC4;&#x7684;&#x5BF9;&#x8C61;&#x503C;&#xFF0C;&#x83B7;&#x53D6;&#x65F6;&#x901A;&#x8FC7;&#x4F7F;&#x7528; _parameter.array &#x6765;&#x83B7;&#x53D6;&#xFF0C;&#x4E00;&#x822C;&#x4F7F;&#x7528; array &#x5373;&#x53EF;&#x3002;</li>
<li>&#x4F46;&#x662F;&#xFF01;&#x5F53;&#x4F60;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A; map &#x96C6;&#x5408;&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x6C60;&#x5C31;&#x6CA1;&#x5FC5;&#x8981;&#x4E3A;&#x4F60;&#x6DFB;&#x52A0;&#x9ED8;&#x8BA4; key &#x503C;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A; map &#x96C6;&#x5408;&#x7C7B;&#x578B;&#x672C;&#x8EAB;&#x5C31;&#x4F1A;&#x6709;&#x5F88;&#x591A; key &#x503C;&#xFF0C;&#x4F8B;&#x5982;&#x4F60;&#x60F3;&#x83B7;&#x53D6; map &#x53C2;&#x6570;&#x7684;&#x67D0;&#x4E2A; key &#x503C;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; _parameter.name &#x6216;&#x8005; _parameter.age &#x5373;&#x53EF;&#xFF0C;&#x5C31;&#x6CA1;&#x5FC5;&#x8981;&#x8FD8;&#x7528; _parameter.map.name &#x6216;&#x8005; _parameter.map.age &#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x5C31;&#x662F; map &#x53C2;&#x6570;&#x7C7B;&#x578B;&#x65E0;&#x9700;&#x518D;&#x6784;&#x5EFA;&#x4E00;&#x4E2A; &#x2018;map&#x2019; &#x5B57;&#x7B26;&#x4E32;&#x4F5C;&#x4E3A; key &#x7684;&#x539F;&#x56E0;&#xFF0C;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x4F8B;&#x5982;&#x4F60;&#x4F20;&#x5165;&#x4E00;&#x4E2A; User &#x5BF9;&#x8C61;&#x3002;</li>
</ul>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x662F; Map &#x96C6;&#x5408;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x4F7F;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// java &#x4EE3;&#x7801;</span><br><span class="line">Map map2 = new HashMap&lt;&gt;();</span><br><span class="line">map2.put(&quot;k1&quot;,1);</span><br><span class="line">map2.put(&quot;k2&quot;,2);</span><br><span class="line">map2.put(&quot;k3&quot;,3); </span><br><span class="line">sqlSession.selectList(&quot;findAll&quot;,map2);</span><br></pre></td></tr></table></figure>

<p>&#x76F4;&#x63A5;&#x4F7F;&#x7528; collection=&#x201D;_parameter&#x201D;&#xFF0C;&#x4F60;&#x4F1A;&#x53D1;&#x73B0;&#x795E;&#x5947;&#x7684; key &#x548C; value &#x90FD;&#x80FD;&#x901A;&#x8FC7; _parameter &#x904D;&#x5386;&#x5728; index &#x4E0E; item &#x4E4B;&#x4E2D;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- xml &#x914D;&#x7F6E; --&gt;</span><br><span class="line">&lt;select id=&quot;findAll&quot;&gt;</span><br><span class="line">    select  * from user where</span><br><span class="line">    &lt;foreach collection=&quot;_parameter&quot;</span><br><span class="line">         item=&quot;value111&quot; index=&quot;key111&quot;</span><br><span class="line">         open=&quot; &quot; separator=&quot; or &quot; close=&quot; &quot;&gt;</span><br><span class="line">        id = #{value111}</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/e859c11e9509df5dadff8d6ef6b8a1e36179de5b5f7a6add64f55423d14e85eb" alt></p>
<blockquote>
<p><strong>&#x5EF6;&#x4F38;</strong>&#xFF1A;&#x5F53;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x4E3A;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x4F8B;&#x5982;&#x4F20;&#x5165; User &#x548C; Room &#x7B49;&#xFF0C;&#x90A3;&#x4E48;&#x901A;&#x8FC7;&#x5185;&#x7F6E;&#x53C2;&#x6570;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; _parameter.get(0).username&#xFF0C;&#x6216;&#x8005; _parameter.get(1).roomname &#x3002;&#x5047;&#x5982;&#x4F60;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4F8B;&#x5982;&#x4F20;&#x5165; int =1 &#x6216;&#x8005; String = &#x2018;&#x4F60;&#x597D;&#x2019;&#xFF0C;&#x90A3;&#x4E48;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; _parameter &#x4EE3;&#x66FF;&#x83B7;&#x53D6;&#x503C;&#x5373;&#x53EF;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5F88;&#x591A;&#x4EBA;&#x4F1A;&#x5728;&#x52A8;&#x6001; SQL &#x4E2D;&#x76F4;&#x63A5;&#x4F7F;&#x7528; # { _parameter } &#x6765;&#x83B7;&#x53D6;&#x7B80;&#x5355;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x7684;&#x503C;&#x3002;</p>
</blockquote>
<p>&#x90A3;&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x57FA;&#x672C;&#x628A; foreach &#x57FA;&#x672C;&#x7528;&#x6CD5;&#x4ECB;&#x7ECD;&#x5B8C;&#x6210;&#xFF0C;&#x4E0D;&#x8FC7;&#x4EE5;&#x4E0A;&#x53EA;&#x662F;&#x9488;&#x5BF9;&#x67E5;&#x8BE2;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5BF9;&#x4E8E;&#x5220;&#x9664;&#x3001;&#x66F4;&#x65B0;&#x3001;&#x63D2;&#x5165;&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x4E5F;&#x662F;&#x5927;&#x540C;&#x5C0F;&#x5F02;&#xFF0C;&#x6211;&#x4EEC;&#x7B80;&#x5355;&#x8BF4;&#x4E00;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x6279;&#x91CF;&#x63D2;&#x5165; 100 &#x6761;&#x7528;&#x6237;&#x8BB0;&#x5F55;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;insert id=&quot;insertUser&quot; parameterType=&quot;java.util.List&quot;&gt;</span><br><span class="line">    insert into user(id,username) values</span><br><span class="line">    &lt;foreach collection=&quot;list&quot; </span><br><span class="line">         item=&quot;user&quot; index=&quot;index&quot;</span><br><span class="line">         separator=&quot;,&quot; close=&quot;;&quot; &gt;</span><br><span class="line">        (#{user.id},#{user.username})</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x66F4;&#x65B0; 500 &#x4E2A;&#x7528;&#x6237;&#x7684;&#x59D3;&#x540D;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;update id=&quot;updateUser&quot; parameterType=&quot;java.util.List&quot;&gt;</span><br><span class="line">    update user </span><br><span class="line">       set username = &apos;&#x6F58;&#x6F58;&apos; </span><br><span class="line">     where id in </span><br><span class="line">    &lt;foreach collection=&quot;list&quot;</span><br><span class="line">        item=&quot;user&quot; index=&quot;index&quot; </span><br><span class="line">        separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot; &gt;</span><br><span class="line">        #{user.id}    </span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x4F60;&#x5E0C;&#x671B;&#x4F60;&#x5220;&#x9664; 10 &#x6761;&#x7528;&#x6237;&#x8BB0;&#x5F55;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;delete id=&quot;deleteUser&quot; parameterType=&quot;java.util.List&quot;&gt;</span><br><span class="line">    delete from user  </span><br><span class="line">          where id in </span><br><span class="line">    &lt;foreach collection=&quot;list&quot;</span><br><span class="line">         item=&quot;user&quot; index=&quot;index&quot; </span><br><span class="line">         separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot; &gt;</span><br><span class="line">        #{user.id}    </span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure>

<p>&#x66F4;&#x591A;&#x73A9;&#x6CD5;&#xFF0C;&#x671F;&#x5F85;&#x4F60;&#x81EA;&#x5DF1;&#x53BB;&#x6316;&#x6398;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2e87c2bdc685e346a28f415a8a5aa8e53d096880797ab09f30133f829c2ef968" alt></p>
<blockquote>
<p><strong>&#x6CE8;&#x610F;</strong>&#xFF1A;&#x4F7F;&#x7528; foreach &#x6807;&#x7B7E;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x4F20;&#x5165;&#x7684; collection &#x53C2;&#x6570;&#xFF08;List/Map/Set&#x7B49;&#xFF09;&#x8FDB;&#x884C;&#x4E3A;&#x7A7A;&#x6027;&#x5224;&#x65AD;&#xFF0C;&#x5426;&#x5219;&#x52A8;&#x6001; SQL &#x4F1A;&#x51FA;&#x73B0;&#x8BED;&#x6CD5;&#x5F02;&#x5E38;&#xFF0C;&#x4F8B;&#x5982;&#x4F60;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x53EF;&#x80FD;&#x662F; select * from user where ids in () &#xFF0C;&#x5BFC;&#x81F4;&#x4EE5;&#x4E0A;&#x8BED;&#x6CD5;&#x5F02;&#x5E38;&#x5C31;&#x662F;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x4E3A;&#x7A7A;&#xFF0C;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x53EF;&#x4EE5;&#x7528; if &#x6807;&#x7B7E;&#x6216; choose &#x6807;&#x7B7E;&#x8FDB;&#x884C;&#x4E3A;&#x7A7A;&#x6027;&#x5224;&#x65AD;&#x5904;&#x7406;&#xFF0C;&#x6216;&#x8005;&#x76F4;&#x63A5;&#x5728; Java &#x4EE3;&#x7801;&#x4E2D;&#x8FDB;&#x884C;&#x903B;&#x8F91;&#x5904;&#x7406;&#x5373;&#x53EF;&#xFF0C;&#x4F8B;&#x5982;&#x5224;&#x65AD;&#x4E3A;&#x7A7A;&#x5219;&#x4E0D;&#x6267;&#x884C; SQL &#x3002;</p>
</blockquote>
<hr>
<h5 id="Top4&#x3001;where-&#x6807;&#x7B7E;&#x3001;set-&#x6807;&#x7B7E;"><a href="#Top4&#x3001;where-&#x6807;&#x7B7E;&#x3001;set-&#x6807;&#x7B7E;" class="headerlink" title="Top4&#x3001;where &#x6807;&#x7B7E;&#x3001;set &#x6807;&#x7B7E;"></a>Top4&#x3001;where &#x6807;&#x7B7E;&#x3001;set &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2605;&#x2605;&#x2606;&#x2606;&#x2606;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;</p>
<p>&#x6211;&#x4EEC;&#x628A; where &#x6807;&#x7B7E;&#x548C; set &#x6807;&#x7B7E;&#x653E;&#x7F6E;&#x4E00;&#x8D77;&#x8BB2;&#x89E3;&#xFF0C;&#x4E00;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x6807;&#x7B7E;&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x5F00;&#x53D1;&#x4E2D;&#x5E38;&#x7528;&#x5EA6;&#x786E;&#x5B9E;&#x4E0D;&#x5206;&#x4F2F;&#x4EF2;&#xFF0C;&#x4E8C;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x6807;&#x7B7E;&#x51FA;&#x81EA;&#x4E00;&#x5BB6;&#xFF0C;&#x90FD;&#x7EE7;&#x627F;&#x4E86; trim &#x6807;&#x7B7E;&#xFF0C;&#x653E;&#x7F6E;&#x4E00;&#x8D77;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x6BD4;&#x5BF9;&#x8FFD;&#x6839;&#x3002;&#xFF08;&#x5176;&#x4E2D;&#x5E95;&#x5C42;&#x539F;&#x7406;&#x4F1A;&#x5728;&#x7B2C;4&#x90E8;&#x5206;&#x8BE6;&#x7EC6;&#x8BB2;&#x89E3;&#xFF09;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/952118e26c9bfccea47188fa4f56ff8aa2e49aed605e070ef34ddc49e0d06368" alt></p>
<p>&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD; if &#x6807;&#x7B7E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x90FD;&#x5DF2;&#x7ECF;&#x770B;&#x5230;&#xFF0C;&#x6211;&#x4EEC;&#x5728; where &#x5B50;&#x53E5;&#x540E;&#x9762;&#x62FC;&#x63A5;&#x4E86; 1=1 &#x7684;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x5757;&#xFF0C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x540E;&#x7EED;&#x6761;&#x4EF6;&#x80FD;&#x591F;&#x6B63;&#x786E;&#x62FC;&#x63A5;&#xFF0C;&#x4EE5;&#x524D;&#x5728;&#x7A0B;&#x5E8F;&#x4EE3;&#x7801;&#x4E2D;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5; SQL &#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x5E38;&#x5E38;&#x5982;&#x6B64;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x786E;&#x5B9E;&#x6B64;&#x79CD;&#x65B9;&#x5F0F;&#x4E0D;&#x591F;&#x4F53;&#x9762;&#xFF0C;&#x4E5F;&#x663E;&#x5F97;&#x6211;&#x4EEC;&#x4E0D;&#x9AD8;&#x7EA7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findUser&quot;&gt;</span><br><span class="line">    select * from User where 1=1</span><br><span class="line">    &lt;if test=&quot; age != null &quot;&gt;</span><br><span class="line">        and age &gt; #{age}</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">    &lt;if test=&quot; name != null &quot;&gt;</span><br><span class="line">        and name like concat(#{name},&apos;%&apos;)</span><br><span class="line">    &lt;/if&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x662F;&#x6211;&#x4EEC;&#x4F7F;&#x7528; 1=1 &#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x90A3; where &#x6807;&#x7B7E;&#x8BDE;&#x751F;&#x4E4B;&#x540E;&#xFF0C;&#x662F;&#x600E;&#x4E48;&#x5DE7;&#x5999;&#x5904;&#x7406;&#x540E;&#x7EED;&#x7684;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x7684;&#x5462;&#xFF1F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findUser&quot;&gt;</span><br><span class="line">    select * from User </span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;if test=&quot; age != null &quot;&gt;</span><br><span class="line">            and age &gt; #{age}</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot; name != null &quot;&gt;</span><br><span class="line">            and name like concat(#{name},&apos;%&apos;)</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x628A; where &#x5173;&#x952E;&#x8BCD;&#x4EE5;&#x53CA; 1=1 &#x6539;&#x4E3A; &lt; where &gt; &#x6807;&#x7B7E;&#x5373;&#x53EF;&#xFF0C;&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x5904;&#x7406;&#x80FD;&#x529B;&#xFF0C;&#x5C31;&#x662F; where &#x6807;&#x7B7E;&#x80FD;&#x591F;&#x667A;&#x80FD;&#x7684;&#x53BB;&#x9664;&#xFF08;&#x5FFD;&#x7565;&#xFF09;&#x9996;&#x4E2A;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x4F8B;&#x5982;&#x4EE5;&#x4E0A;&#x6761;&#x4EF6;&#x5982;&#x679C; age &#x548C; name &#x90FD;&#x6EE1;&#x8DB3;&#xFF0C;&#x90A3;&#x4E48; age &#x524D;&#x7F00; and &#x4F1A;&#x88AB;&#x667A;&#x80FD;&#x53BB;&#x9664;&#x6389;&#xFF0C;&#x65E0;&#x8BBA;&#x4F60;&#x662F;&#x4F7F;&#x7528; and &#x8FD0;&#x7B97;&#x7B26;&#x6216;&#x662F; or &#x8FD0;&#x7B97;&#x7B26;&#xFF0C;Mybatis &#x6846;&#x67B6;&#x90FD;&#x4F1A;&#x5E2E;&#x4F60;&#x667A;&#x80FD;&#x5904;&#x7406;&#x3002;</p>
<p><strong>&#x7528;&#x6CD5;&#x7279;&#x522B;&#x7B80;&#x5355;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x5B98;&#x672F;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;</strong>&#xFF1A;</p>
<ul>
<li>where &#x6807;&#x7B7E;&#xFF1A;&#x9876;&#x5C42;&#x7684;&#x904D;&#x5386;&#x6807;&#x7B7E;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x5408; if &#x6807;&#x7B7E;&#x4F7F;&#x7528;&#xFF0C;&#x5355;&#x72EC;&#x4F7F;&#x7528;&#x65E0;&#x610F;&#x4E49;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4F1A;&#x5728;&#x5B50;&#x5143;&#x7D20;&#xFF08;&#x5982; if &#x6807;&#x7B7E;&#xFF09;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x624D;&#x63D2;&#x5165; WHERE &#x5B50;&#x53E5;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x82E5;&#x5B50;&#x53E5;&#x7684;&#x5F00;&#x5934;&#x4E3A; &#x201C;AND&#x201D; &#x6216; &#x201C;OR&#x201D;&#xFF0C;where &#x6807;&#x7B7E;&#x4E5F;&#x4F1A;&#x5C06;&#x5B83;&#x66FF;&#x6362;&#x53BB;&#x9664;&#x3002;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/9fa5759b120f32bb2a2e4895ecb1cb5da8216e51e2a9320eb4bd53f07b3d4aac" alt></p>
<p>&#x4E86;&#x89E3;&#x4E86;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x770B;&#x521A;&#x521A;&#x6211;&#x4EEC;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findUser&quot;&gt;</span><br><span class="line">    select * from User </span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;if test=&quot; age != null &quot;&gt;</span><br><span class="line">            and age &gt; #{age}</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot; name != null &quot;&gt;</span><br><span class="line">            and name like concat(#{name},&apos;%&apos;)</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C; age &#x4F20;&#x5165;&#x6709;&#x6548;&#x503C; 10 &#xFF0C;&#x6EE1;&#x8DB3; age != null &#x7684;&#x6761;&#x4EF6;&#x4E4B;&#x540E;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x8FD4;&#x56DE; where &#x6807;&#x7B7E;&#x5E76;&#x53BB;&#x9664;&#x9996;&#x4E2A;&#x5B50;&#x53E5;&#x8FD0;&#x7B97;&#x7B26; and&#xFF0C;&#x6700;&#x7EC8;&#x7684; SQL &#x8BED;&#x53E5;&#x4F1A;&#x53D8;&#x6210;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from User where age &gt; 10; </span><br><span class="line">-- and &#x5DE7;&#x5999;&#x7684;&#x4E0D;&#x89C1;&#x4E86;</span><br></pre></td></tr></table></figure>

<p>&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;where &#x6807;&#x7B7E; <strong>&#x53EA;&#x4F1A;</strong> &#x667A;&#x80FD;&#x7684;&#x53BB;&#x9664;&#xFF08;&#x5FFD;&#x7565;&#xFF09;&#x9996;&#x4E2A;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x6240;&#x4EE5;&#x5C31;&#x5EFA;&#x8BAE;&#x6211;&#x4EEC;&#x5728;&#x4F7F;&#x7528; where &#x6807;&#x7B7E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6BCF;&#x4E2A;&#x8BED;&#x53E5;&#x90FD;&#x6700;&#x597D;&#x5199;&#x4E0A; and &#x524D;&#x7F00;&#x6216;&#x8005; or &#x524D;&#x7F00;&#xFF0C;&#x5426;&#x5219;&#x50CF;&#x4EE5;&#x4E0B;&#x5199;&#x6CD5;&#x5C31;&#x5F88;&#x6709;&#x53EF;&#x80FD;&#x51FA;&#x5927;&#x4E8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findUser&quot;&gt;</span><br><span class="line">    select * from User </span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;if test=&quot; age != null &quot;&gt;</span><br><span class="line">             age &gt; #{age} </span><br><span class="line">             &lt;!-- age &#x524D;&#x7F00;&#x6CA1;&#x6709;&#x8FD0;&#x7B97;&#x7B26;--&gt;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">        &lt;if test=&quot; name != null &quot;&gt;</span><br><span class="line">             name like concat(#{name},&apos;%&apos;)</span><br><span class="line">             &lt;!-- name &#x524D;&#x7F00;&#x4E5F;&#x6CA1;&#x6709;&#x8FD0;&#x7B97;&#x7B26;--&gt;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F53; age &#x4F20;&#x5165; 10&#xFF0C;name &#x4F20;&#x5165; &#x2018;&#x6F58;&#x6F58;&#x2019; &#x65F6;&#xFF0C;&#x6700;&#x7EC8;&#x7684; SQL &#x8BED;&#x53E5;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from User </span><br><span class="line">where </span><br><span class="line">age &gt; 10 </span><br><span class="line">name like concat(&apos;&#x6F58;%&apos;)</span><br><span class="line">-- &#x6240;&#x6709;&#x6761;&#x4EF6;&#x90FD;&#x6CA1;&#x6709;and&#x6216;or&#x8FD0;&#x7B97;&#x7B26;</span><br><span class="line">-- &#x8FD9;&#x8BA9;age&#x548C;name&#x663E;&#x5F97;&#x5F88;&#x5C34;&#x5C2C;~</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E; name &#x524D;&#x7F00;&#x6CA1;&#x6709;&#x5199; and &#x6216; or &#x8FDE;&#x63A5;&#x7B26;&#xFF0C;&#x800C; where &#x6807;&#x7B7E;&#x53C8;&#x4E0D;&#x4F1A;&#x667A;&#x80FD;&#x7684;&#x53BB;&#x9664;&#xFF08;&#x5FFD;&#x7565;&#xFF09;<strong>&#x975E;&#x9996;&#x4E2A;</strong> &#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x7684;&#x524D;&#x7F00;&#xFF0C;&#x6240;&#x4EE5;&#x5F53; age &#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x4E0E; name &#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x540C;&#x65F6;&#x6210;&#x7ACB;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#xFF0C;&#x8FD9;&#x4E2A;&#x9700;&#x8981;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#xFF0C;&#x683C;&#x5916;&#x6CE8;&#x610F;&#xFF01;&#x539F;&#x5219;&#x4E0A;&#x6BCF;&#x4E2A;&#x6761;&#x4EF6;&#x5B50;&#x53E5;&#x90FD;&#x5EFA;&#x8BAE;&#x5728;&#x53E5;&#x9996;&#x6DFB;&#x52A0;&#x8FD0;&#x7B97;&#x7B26; and &#x6216; or ,&#x9996;&#x4E2A;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x53EF;&#x6DFB;&#x52A0;&#x53EF;&#x4E0D;&#x52A0;&#x3002;</p>
<blockquote>
<p>&#x53E6;&#x5916;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; XML &#x65B9;&#x5F0F;&#x914D;&#x7F6E; SQL &#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5728; where &#x6807;&#x7B7E;&#x4E4B;&#x540E;&#x6DFB;&#x52A0;&#x4E86;&#x6CE8;&#x91CA;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x6709;&#x5B50;&#x5143;&#x7D20;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x9664;&#x4E86; &lt; !&#x2013; &#x2013;&gt; &#x6CE8;&#x91CA;&#x4F1A;&#x88AB; where &#x5FFD;&#x7565;&#x89E3;&#x6790;&#x4EE5;&#x5916;&#xFF0C;&#x5176;&#x5B83;&#x6CE8;&#x91CA;&#x4F8B;&#x5982; // &#x6216; /**/ &#x6216; &#x2013; &#x7B49;&#x90FD;&#x4F1A;&#x88AB; where &#x5F53;&#x6210;&#x9996;&#x4E2A;&#x5B50;&#x53E5;&#x5143;&#x7D20;&#x5904;&#x7406;&#xFF0C;&#x5BFC;&#x81F4;&#x540E;&#x7EED;&#x771F;&#x6B63;&#x7684;&#x9996;&#x4E2A; AND &#x5B50;&#x53E5;&#x5143;&#x7D20;&#x6216; OR &#x5B50;&#x53E5;&#x5143;&#x7D20;&#x6CA1;&#x80FD;&#x88AB;&#x6210;&#x529F;&#x66FF;&#x6362;&#x6389;&#x524D;&#x7F00;&#xFF0C;&#x4ECE;&#x800C;&#x5F15;&#x8D77;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#xFF01;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/41810396d3d400a5ef2b6be7008d6443593d06fc5cf213c124a5f1ce1a1f8c93" alt></p>
<p>&#x57FA;&#x4E8E; where &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x7684;&#x8BB2;&#x89E3;&#xFF0C;&#x6709;&#x52A9;&#x4E8E;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x7406;&#x89E3; set &#x6807;&#x7B7E;&#x5143;&#x7D20;&#xFF0C;&#x6BD5;&#x7ADF;&#x5B83;&#x4FE9;&#x662F;&#x5982;&#x6B64;&#x76F8;&#x50CF;&#x3002;&#x6211;&#x4EEC;&#x56DE;&#x5FC6;&#x4E00;&#x4E0B;&#x4EE5;&#x5F80;&#x6211;&#x4EEC;&#x7684;&#x66F4;&#x65B0; SQL &#x8BED;&#x53E5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;update id=&quot;updateUser&quot;&gt;</span><br><span class="line">    update user </span><br><span class="line">       set age = #{age},</span><br><span class="line">           username = #{username},</span><br><span class="line">           password = #{password} </span><br><span class="line">     where id =#{id}</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x8BED;&#x53E5;&#x662F;&#x6211;&#x4EEC;&#x65E5;&#x5E38;&#x7528;&#x4E8E;&#x66F4;&#x65B0;&#x6307;&#x5B9A; id &#x5BF9;&#x8C61;&#x7684; age &#x5B57;&#x6BB5;&#x3001; username &#x5B57;&#x6BB5;&#x4EE5;&#x53CA; password &#x5B57;&#x6BB5;&#xFF0C;&#x4F46;&#x662F;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x53EA;&#x5E0C;&#x671B;&#x66F4;&#x65B0;&#x5BF9;&#x8C61;&#x7684;&#x67D0;&#x4E9B;&#x5B57;&#x6BB5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6BCF;&#x6B21;&#x90FD;&#x66F4;&#x65B0;&#x5BF9;&#x8C61;&#x7684;&#x6240;&#x6709;&#x5B57;&#x6BB5;&#xFF0C;&#x8FD9;&#x5C31;&#x4F7F;&#x5F97;&#x6211;&#x4EEC;&#x5728;&#x8BED;&#x53E5;&#x7ED3;&#x6784;&#x7684;&#x6784;&#x5EFA;&#x4E0A;&#x663E;&#x5F97;&#x60E8;&#x767D;&#x65E0;&#x529B;&#x3002;&#x4E8E;&#x662F;&#x6709;&#x4E86; set &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x3002;</p>
<p><strong>&#x7528;&#x6CD5;&#x4E0E; where &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x76F8;&#x4F3C;</strong>&#xFF1A;</p>
<ul>
<li>set &#x6807;&#x7B7E;&#xFF1A;&#x9876;&#x5C42;&#x7684;&#x904D;&#x5386;&#x6807;&#x7B7E;&#xFF0C;&#x9700;&#x8981;&#x914D;&#x5408; if &#x6807;&#x7B7E;&#x4F7F;&#x7528;&#xFF0C;&#x5355;&#x72EC;&#x4F7F;&#x7528;&#x65E0;&#x610F;&#x4E49;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4F1A;&#x5728;&#x5B50;&#x5143;&#x7D20;&#xFF08;&#x5982; if &#x6807;&#x7B7E;&#xFF09;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x624D;&#x63D2;&#x5165; set &#x5B50;&#x53E5;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x82E5;&#x5B50;&#x53E5;&#x7684; <strong>&#x5F00;&#x5934;&#x6216;&#x7ED3;&#x5C3E;</strong> &#x90FD;&#x5B58;&#x5728;&#x9017;&#x53F7; &#x201C;,&#x201D; &#x5219; set &#x6807;&#x7B7E;&#x90FD;&#x4F1A;&#x5C06;&#x5B83;&#x66FF;&#x6362;&#x53BB;&#x9664;&#x3002;</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/06a513db54287350648ee30a4fc9b46c91779e3cf9d5dec08d370fbc3556e11e" alt></p>
<p>&#x6839;&#x636E;&#x6B64;&#x7528;&#x6CD5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x4EE5;&#x4E0A;&#x7684;&#x4F8B;&#x5B50;&#x6539;&#x4E3A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;update id=&quot;updateUser&quot;&gt;</span><br><span class="line">    update user </span><br><span class="line">        &lt;set&gt;</span><br><span class="line">           &lt;if test=&quot;age !=null&quot;&gt;</span><br><span class="line">               age = #{age},</span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">           &lt;if test=&quot;username !=null&quot;&gt;</span><br><span class="line">           	   username = #{username},</span><br><span class="line">           &lt;/if&gt; </span><br><span class="line">           &lt;if test=&quot;password !=null&quot;&gt;</span><br><span class="line">           	   password = #{password},</span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">        &lt;/set&gt;    </span><br><span class="line">     where id =#{id}</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x7B80;&#x5355;&#x6613;&#x61C2;&#xFF0C;set &#x6807;&#x7B7E;&#x4F1A;&#x667A;&#x80FD;&#x62FC;&#x63A5;&#x66F4;&#x65B0;&#x5B57;&#x6BB5;&#xFF0C;&#x4EE5;&#x4E0A;&#x4F8B;&#x5B50;&#x5982;&#x679C;&#x4F20;&#x5165; age =10 &#x548C; username = &#x2018;&#x6F58;&#x6F58;&#x2019; &#xFF0C;&#x5219;&#x6709;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5;&#x6EE1;&#x8DB3;&#x66F4;&#x65B0;&#x6761;&#x4EF6;&#xFF0C;&#x4E8E;&#x662F; set &#x6807;&#x7B7E;&#x4F1A;&#x667A;&#x80FD;&#x62FC;&#x63A5; &#x201C; age = 10 ,&#x201D; &#x548C; &#x201C;username = &#x2018;&#x6F58;&#x6F58;&#x2019; ,&#x201D; &#x3002;&#x5176;&#x4E2D;&#x7531;&#x4E8E;&#x540E;&#x4E00;&#x4E2A; username &#x5C5E;&#x4E8E;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5B50;&#x53E5;&#xFF0C;&#x6240;&#x4EE5;&#x672B;&#x5C3E;&#x9017;&#x53F7;&#x4F1A;&#x88AB;&#x667A;&#x80FD;&#x53BB;&#x9664;&#xFF0C;&#x6700;&#x7EC8;&#x7684; SQL &#x8BED;&#x53E5;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;update user set age = 10,username =  &apos;&#x6F58;&#x6F58;&apos;</span><br></pre></td></tr></table></figure>

<p>&#x53E6;&#x5916;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;set &#x6807;&#x7B7E;&#x4E0B;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x81F3;&#x5C11;&#x6709;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x6EE1;&#x8DB3;&#xFF0C;&#x5426;&#x5219;&#x4F9D;&#x7136;&#x4F1A;&#x4EA7;&#x751F;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x65E0;&#x5B50;&#x53E5;&#x6761;&#x4EF6;&#x6EE1;&#x8DB3;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x6700;&#x7EC8;&#x7684; SQL &#x8BED;&#x53E5;&#x4F1A;&#x662F;&#x8FD9;&#x6837;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;update user ;  ( oh~ no!)</span><br></pre></td></tr></table></figure>

<p>&#x65E2;&#x4E0D;&#x4F1A;&#x6DFB;&#x52A0; set &#x6807;&#x7B7E;&#xFF0C;&#x4E5F;&#x6CA1;&#x6709;&#x5B50;&#x53E5;&#x66F4;&#x65B0;&#x5B57;&#x6BB5;&#xFF0C;&#x4E8E;&#x662F;&#x8BED;&#x6CD5;&#x51FA;&#x73B0;&#x4E86;&#x9519;&#x8BEF;&#xFF0C;&#x6240;&#x4EE5;&#x7C7B;&#x4F3C;&#x8FD9;&#x7C7B;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x822C;&#x9700;&#x8981;&#x5728;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x8FDB;&#x884C;&#x903B;&#x8F91;&#x5904;&#x7406;&#xFF0C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5B58;&#x5728;&#x81F3;&#x5C11;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5426;&#x5219;&#x4E0D;&#x6267;&#x884C;&#x66F4;&#x65B0; SQL &#x3002;&#x6240;&#x4EE5;&#x539F;&#x5219;&#x4E0A;&#x8981;&#x6C42; set &#x6807;&#x7B7E;&#x4E0B;&#x81F3;&#x5C11;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x6EE1;&#x8DB3;&#xFF0C;&#x540C;&#x65F6;&#x6BCF;&#x4E2A;&#x6761;&#x4EF6;&#x5B50;&#x53E5;&#x90FD;&#x5EFA;&#x8BAE;&#x5728;&#x53E5;&#x672B;&#x6DFB;&#x52A0;&#x9017;&#x53F7; ,&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x53EF;&#x52A0;&#x53EF;&#x4E0D;&#x52A0;&#x3002;<strong>&#x6216;&#x8005;</strong> &#x6BCF;&#x4E2A;&#x6761;&#x4EF6;&#x5B50;&#x53E5;&#x90FD;&#x5728;&#x53E5;&#x9996;&#x6DFB;&#x52A0;&#x9017;&#x53F7; ,&#x7B2C;&#x4E00;&#x4E2A;&#x6761;&#x4EF6;&#x8BED;&#x53E5;&#x53EF;&#x52A0;&#x53EF;&#x4E0D;&#x52A0;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;update id=&quot;updateUser&quot;&gt;</span><br><span class="line">    update user </span><br><span class="line">        &lt;set&gt;</span><br><span class="line">           &lt;if test=&quot;age !=null&quot;&gt;</span><br><span class="line">               ,age = #{age}</span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">           &lt;if test=&quot;username !=null&quot;&gt;</span><br><span class="line">           	   ,username = #{username}</span><br><span class="line">           &lt;/if&gt; </span><br><span class="line">           &lt;if test=&quot;password !=null&quot;&gt;</span><br><span class="line">           	   ,password = #{password}</span><br><span class="line">           &lt;/if&gt;</span><br><span class="line">        &lt;/set&gt;    </span><br><span class="line">     where id =#{id}</span><br><span class="line">&lt;/update&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x4E0E; where &#x6807;&#x7B7E;&#x76F8;&#x540C;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528; XML &#x65B9;&#x5F0F;&#x914D;&#x7F6E; SQL &#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5728; set &#x6807;&#x7B7E;&#x5B50;&#x53E5;&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x4E86;&#x6CE8;&#x91CA;&#xFF0C;&#x90A3;&#x4E48;&#x5F53;&#x6709;&#x5B50;&#x5143;&#x7D20;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x9664;&#x4E86; &lt; !&#x2013; &#x2013;&gt; &#x6CE8;&#x91CA;&#x4F1A;&#x88AB; set &#x5FFD;&#x7565;&#x89E3;&#x6790;&#x4EE5;&#x5916;&#xFF0C;&#x5176;&#x5B83;&#x6CE8;&#x91CA;&#x4F8B;&#x5982; // &#x6216; /**/ &#x6216; &#x2013; &#x7B49;&#x90FD;&#x4F1A;&#x88AB; set &#x6807;&#x7B7E;&#x5F53;&#x6210;&#x672B;&#x5C3E;&#x5B50;&#x53E5;&#x5143;&#x7D20;&#x5904;&#x7406;&#xFF0C;&#x5BFC;&#x81F4;&#x540E;&#x7EED;&#x771F;&#x6B63;&#x7684;&#x672B;&#x5C3E;&#x5B50;&#x53E5;&#x5143;&#x7D20;&#x7684;&#x9017;&#x53F7;&#x6CA1;&#x80FD;&#x88AB;&#x6210;&#x529F;&#x66FF;&#x6362;&#x6389;&#x540E;&#x7F00;&#xFF0C;&#x4ECE;&#x800C;&#x5F15;&#x8D77;&#x8BED;&#x6CD5;&#x9519;&#x8BEF;&#xFF01;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/845d711b09ae8b7918cd06be41b91f5a0bf770215dd8e2f73b335d2fd14dcf20" alt></p>
<p>&#x5230;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x7684; where &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x4E0E; set &#x6807;&#x7B7E;&#x5C31;&#x57FA;&#x672C;&#x4ECB;&#x7ECD;&#x5B8C;&#x6210;&#xFF0C;&#x5B83;&#x4FE9;&#x786E;&#x5B9E;&#x6781;&#x4E3A;&#x76F8;&#x4F3C;&#xFF0C;&#x533A;&#x522B;&#x4EC5;&#x5728;&#x4E8E;&#xFF1A;</p>
<ul>
<li>where &#x6807;&#x7B7E;&#x63D2;&#x5165;&#x524D;&#x7F00; where</li>
<li>set &#x6807;&#x7B7E;&#x63D2;&#x5165;&#x524D;&#x7F00; set</li>
<li>where &#x6807;&#x7B7E;&#x4EC5;&#x667A;&#x80FD;&#x66FF;&#x6362;&#x524D;&#x7F00; AND &#x6216; OR</li>
<li>set &#x6807;&#x7B7E;&#x53EF;&#x4EE5;&#x53EA;&#x80FD;&#x66FF;&#x6362;&#x524D;&#x7F00;&#x9017;&#x53F7;&#xFF0C;&#x6216;&#x540E;&#x7F00;&#x9017;&#x53F7;&#xFF0C;</li>
</ul>
<p>&#x800C;&#x8FD9;&#x4E24;&#x8005;&#x7684;&#x524D;&#x540E;&#x7F00;&#x53BB;&#x9664;&#x7B56;&#x7565;&#xFF0C;&#x90FD;&#x6E90;&#x81EA;&#x4E8E; trim &#x6807;&#x7B7E;&#x7684;&#x8BBE;&#x8BA1;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x770B;&#x770B;&#x5230;&#x5E95; trim &#x6807;&#x7B7E;&#x662F;&#x6709;&#x591A;&#x7075;&#x6D3B;&#xFF01;</p>
<hr>
<h5 id="Top5&#x3001;trim-&#x6807;&#x7B7E;"><a href="#Top5&#x3001;trim-&#x6807;&#x7B7E;" class="headerlink" title="Top5&#x3001;trim &#x6807;&#x7B7E;"></a>Top5&#x3001;trim &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2605;&#x2606;&#x2606;&#x2606;&#x2606;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2606;&#x2606;&#x2606;&#x2606;</p>
<p>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x4E86; where &#x6807;&#x7B7E;&#x4E0E; set &#x6807;&#x7B7E;&#xFF0C;&#x5B83;&#x4FE9;&#x7684;&#x5171;&#x540C;&#x70B9;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x524D;&#x7F6E;&#x5173;&#x952E;&#x8BCD; where &#x6216; set &#x7684;&#x63D2;&#x5165;&#xFF0C;&#x4EE5;&#x53CA;&#x524D;&#x540E;&#x7F00;&#x7B26;&#x53F7;&#xFF08;&#x4F8B;&#x5982; AND | OR | &#xFF0C;&#xFF09;&#x7684;&#x667A;&#x80FD;&#x53BB;&#x9664;&#x3002;&#x57FA;&#x4E8E; where &#x6807;&#x7B7E;&#x548C; set &#x6807;&#x7B7E;&#x672C;&#x8EAB;&#x90FD;&#x7EE7;&#x627F;&#x4E86; trim &#x6807;&#x7B7E;&#xFF0C;&#x6240;&#x4EE5; trim &#x6807;&#x7B7E;&#x7684;&#x5927;&#x81F4;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x4E5F;&#x80FD;&#x731C;&#x51FA;&#x4E2A;&#x4E00;&#x4E8C;&#x4E09;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/45c948a61d28091edb76f8b583815241c71fc8df6d2bc21218b6db4ce0021122" alt></p>
<p>&#x5176;&#x5B9E; where &#x6807;&#x7B7E;&#x548C; set &#x6807;&#x7B7E;&#x90FD;&#x53EA;&#x662F; trim &#x6807;&#x7B7E;&#x7684;&#x67D0;&#x79CD;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#xFF0C;trim &#x6807;&#x7B7E;&#x5E95;&#x5C42;&#x662F;&#x901A;&#x8FC7; TrimSqlNode &#x7C7B;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5B83;&#x6709;&#x51E0;&#x4E2A;&#x5173;&#x952E;&#x5C5E;&#x6027;&#xFF1A;</p>
<ul>
<li><strong>prefix</strong> &#xFF1A;&#x524D;&#x7F00;&#xFF0C;&#x5F53; trim &#x5143;&#x7D20;&#x5185;&#x5B58;&#x5728;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x4F1A;&#x7ED9;&#x5185;&#x5BB9;&#x63D2;&#x5165;&#x6307;&#x5B9A;&#x524D;&#x7F00;</li>
<li><strong>suffix</strong> &#xFF1A;&#x540E;&#x7F00;&#xFF0C;&#x5F53; trim &#x5143;&#x7D20;&#x5185;&#x5B58;&#x5728;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x4F1A;&#x7ED9;&#x5185;&#x5BB9;&#x63D2;&#x5165;&#x6307;&#x5B9A;&#x540E;&#x7F00;</li>
<li><strong>prefixesToOverride</strong> &#xFF1A;&#x524D;&#x7F00;&#x53BB;&#x9664;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x4E2A;&#xFF0C;&#x5F53; trim &#x5143;&#x7D20;&#x5185;&#x5B58;&#x5728;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x4F1A;&#x628A;&#x5185;&#x5BB9;&#x4E2D;&#x5339;&#x914D;&#x7684;&#x524D;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#x53BB;&#x9664;&#x3002;</li>
<li><strong>suffixesToOverride</strong> &#xFF1A;&#x540E;&#x7F00;&#x53BB;&#x9664;&#xFF0C;&#x652F;&#x6301;&#x591A;&#x4E2A;&#xFF0C;&#x5F53; trim &#x5143;&#x7D20;&#x5185;&#x5B58;&#x5728;&#x5185;&#x5BB9;&#x65F6;&#xFF0C;&#x4F1A;&#x628A;&#x5185;&#x5BB9;&#x4E2D;&#x5339;&#x914D;&#x7684;&#x540E;&#x7F00;&#x5B57;&#x7B26;&#x4E32;&#x53BB;&#x9664;&#x3002;</li>
</ul>
<p>&#x6240;&#x4EE5; where &#x6807;&#x7B7E;&#x5982;&#x679C;&#x901A;&#x8FC7; trim &#x6807;&#x7B7E;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x7F16;&#x5199;&#xFF1A;&#xFF08;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!--</span><br><span class="line">  &#x6CE8;&#x610F;&#x5728;&#x4F7F;&#x7528; trim &#x6807;&#x7B7E;&#x5B9E;&#x73B0; where &#x6807;&#x7B7E;&#x80FD;&#x529B;&#x65F6;</span><br><span class="line">  &#x5FC5;&#x987B;&#x5728; AND &#x548C; OR &#x4E4B;&#x540E;&#x6DFB;&#x52A0;&#x7A7A;&#x683C;</span><br><span class="line">  &#x907F;&#x514D;&#x5339;&#x914D;&#x5230; android&#x3001;order &#x7B49;&#x5355;&#x8BCD; </span><br><span class="line">--&gt;</span><br><span class="line">&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;AND | OR&quot; &gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/trim&gt;</span><br></pre></td></tr></table></figure>

<p>&#x800C; set &#x6807;&#x7B7E;&#x5982;&#x679C;&#x901A;&#x8FC7; trim &#x6807;&#x7B7E;&#x5B9E;&#x73B0;&#x7684;&#x8BDD;&#x53EF;&#x4EE5;&#x8FD9;&#x4E48;&#x7F16;&#x5199;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;trim prefix=&quot;SET&quot; prefixOverrides=&quot;,&quot; &gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/trim&gt;</span><br><span class="line"></span><br><span class="line">&#x6216;&#x8005;</span><br><span class="line"></span><br><span class="line">&lt;trim prefix=&quot;SET&quot; suffixesToOverride=&quot;,&quot; &gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/trim&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6240;&#x4EE5;&#x53EF;&#x89C1; trim &#x662F;&#x8DB3;&#x591F;&#x7075;&#x6D3B;&#x7684;&#xFF0C;&#x4E0D;&#x8FC7;&#x7531;&#x4E8E; where &#x6807;&#x7B7E;&#x548C; set &#x6807;&#x7B7E;&#x8FD9;&#x4E24;&#x79CD; trim &#x6807;&#x7B7E;&#x53D8;&#x79CD;&#x65B9;&#x6848;&#x5DF2;&#x7ECF;&#x8DB3;&#x4EE5;&#x6EE1;&#x8DB3;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x9700;&#x6C42;&#xFF0C;&#x6240;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528; trim &#x6807;&#x7B7E;&#x7684;&#x573A;&#x666F;&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x592A;&#x5F88;&#x591A;&#xFF08;&#x5176;&#x5B9E;&#x662F;&#x6211;&#x81EA;&#x5DF1;&#x4F7F;&#x7528;&#x7684;&#x4E0D;&#x591A;&#xFF0C;&#x57FA;&#x672C;&#x6CA1;&#x7528;&#x8FC7;&#xFF09;&#x3002;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF0C;set &#x6807;&#x7B7E;&#x4E4B;&#x6240;&#x4EE5;&#x80FD;&#x591F;&#x652F;&#x6301;&#x53BB;&#x9664;&#x524D;&#x7F00;&#x9017;&#x53F7;&#x6216;&#x8005;&#x540E;&#x7F00;&#x9017;&#x53F7;&#xFF0C;&#x662F;&#x7531;&#x4E8E;&#x5176;&#x5728;&#x6784;&#x9020; trim &#x6807;&#x7B7E;&#x7684;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#x4E86;&#x524D;&#x7F00;&#x540E;&#x7F00;&#x7684;&#x53BB;&#x9664;&#x8BBE;&#x7F6E;&#xFF0C;&#x800C; where &#x6807;&#x7B7E;&#x5728;&#x6784;&#x9020; trim &#x6807;&#x7B7E;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4EC5;&#x4EC5;&#x8BBE;&#x7F6E;&#x4E86;&#x524D;&#x7F00;&#x53BB;&#x9664;&#x3002;</p>
</blockquote>
<p>set &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x4E4B;&#x6784;&#x9020;&#x65F6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// Set &#x6807;&#x7B7E;</span><br><span class="line">public class SetSqlNode extends TrimSqlNode {</span><br><span class="line"></span><br><span class="line">  private static final List&lt;String&gt; COMMA = Collections.singletonList(&quot;,&quot;);</span><br><span class="line"></span><br><span class="line">  // &#x660E;&#x663E;&#x4F7F;&#x7528;&#x4E86;&#x524D;&#x7F00;&#x540E;&#x7F00;&#x53BB;&#x9664;&#xFF0C;&#x6CE8;&#x610F;&#x524D;&#x540E;&#x7F00;&#x53C2;&#x6570;&#x90FD;&#x4F20;&#x5165;&#x4E86; COMMA </span><br><span class="line">  public SetSqlNode(Configuration configuration,SqlNode contents) {</span><br><span class="line">    super(configuration, contents, &quot;SET&quot;, COMMA, null, COMMA);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>where &#x6807;&#x7B7E;&#x5143;&#x7D20;&#x4E4B;&#x6784;&#x9020;&#x65F6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// Where &#x6807;&#x7B7E;</span><br><span class="line">public class WhereSqlNode extends TrimSqlNode {</span><br><span class="line"></span><br><span class="line">  // &#x5176;&#x5B9E;&#x5305;&#x542B;&#x4E86;&#x5F88;&#x591A;&#x79CD;&#x573A;&#x666F;</span><br><span class="line">  private static List&lt;String&gt; prefixList = Arrays.asList(&quot;AND &quot;,&quot;OR &quot;,&quot;AND\n&quot;, &quot;OR\n&quot;, &quot;AND\r&quot;, &quot;OR\r&quot;, &quot;AND\t&quot;, &quot;OR\t&quot;);</span><br><span class="line"></span><br><span class="line">  // &#x660E;&#x663E;&#x53EA;&#x4F7F;&#x7528;&#x4E86;&#x524D;&#x7F00;&#x53BB;&#x9664;&#xFF0C;&#x6CE8;&#x610F;&#x524D;&#x7F00;&#x4F20;&#x5165; prefixList&#xFF0C;&#x540E;&#x7F00;&#x4F20;&#x5165; null </span><br><span class="line">  public WhereSqlNode(Configuration configuration, SqlNode contents) {</span><br><span class="line">    super(configuration, contents, &quot;WHERE&quot;, prefixList, null, null);</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<hr>
<h5 id="Top6&#x3001;bind-&#x6807;&#x7B7E;"><a href="#Top6&#x3001;bind-&#x6807;&#x7B7E;" class="headerlink" title="Top6&#x3001;bind &#x6807;&#x7B7E;"></a>Top6&#x3001;bind &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2606;&#x2606;&#x2606;&#x2606;&#x2606;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2606;&#x2606;&#x2606;&#x2606;</p>
<p>&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x4E2A;&#x6807;&#x7B7E;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x7ED1;&#x5B9A;&#x5230;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5373;&#x4F9B;&#x4E0A;&#x4E0B;&#x6587;&#x4F7F;&#x7528;&#xFF0C;&#x5C31;&#x662F;&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x628A;&#x5B98;&#x7F51;&#x7684;&#x4F8B;&#x5B50;&#x76F4;&#x63A5;&#x62F7;&#x8D1D;&#x8FC7;&#x6765;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;selecUser&quot;&gt;</span><br><span class="line">  &lt;bind name=&quot;myName&quot; value=&quot;&apos;%&apos; + _parameter.getName() + &apos;%&apos;&quot; /&gt;</span><br><span class="line">  SELECT * FROM user</span><br><span class="line">  WHERE name LIKE #{myName}</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x5927;&#x81F4;&#x80FD;&#x77E5;&#x9053;&#x4EE5;&#x4E0A;&#x4F8B;&#x5B50;&#x7684;&#x529F;&#x6548;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x8F85;&#x52A9;&#x6784;&#x5EFA;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2;&#x7684;&#x8BED;&#x53E5;&#x62FC;&#x63A5;&#xFF0C;&#x90A3;&#x6709;&#x4EBA;&#x5C31;&#x597D;&#x5947;&#x4E86;&#xFF0C;&#x4E3A;&#x5565;&#x4E0D;&#x76F4;&#x63A5;&#x62FC;&#x63A5;&#x8BED;&#x53E5;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8FD8;&#x8981;&#x641E;&#x51FA;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x7ED5;&#x4E00;&#x5708;&#x5462;&#xFF1F;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6e96ffb928b7c553cd996fad1a8911ab64897de40797f654a9afd4c4c0dd0c3d" alt></p>
<p><strong>&#x6211;&#x5148;&#x95EE;&#x4E00;&#x4E2A;&#x95EE;&#x9898;</strong>&#xFF1A;&#x5E73;&#x65F6;&#x4F60;&#x4F7F;&#x7528; mysql &#x90FD;&#x662F;&#x5982;&#x4F55;&#x62FC;&#x63A5;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2; like &#x8BED;&#x53E5;&#x7684;&#xFF1F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from user where name like concat(&apos;%&apos;,#{name},&apos;%&apos;)</span><br></pre></td></tr></table></figure>

<p>&#x786E;&#x5B9E;&#x5982;&#x6B64;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x6709;&#x4E00;&#x5929;&#x9886;&#x5BFC;&#x8DDF;&#x4F60;&#x8BF4;&#x6570;&#x636E;&#x5E93;&#x6362;&#x6210; oracle &#x4E86;&#xFF0C;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x4E0A;&#x9762;&#x7684;&#x8BED;&#x53E5;&#x8FD8;&#x80FD;&#x7528;&#x5417;&#xFF1F;&#x660E;&#x663E;&#x7528;&#x4E0D;&#x4E86;&#xFF0C;&#x4E0D;&#x80FD;&#x8FD9;&#x4E48;&#x5199;&#xFF0C;&#x56E0;&#x4E3A; oracle &#x867D;&#x7136;&#x4E5F;&#x6709; concat &#x51FD;&#x6570;&#xFF0C;&#x4F46;&#x662F;&#x53EA;&#x652F;&#x6301;&#x8FDE;&#x63A5;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4F8B;&#x5982;&#x4F60;&#x6700;&#x591A;&#x8FD9;&#x4E48;&#x5199;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from user where name like concat(&apos;%&apos;,#{name})</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;&#x5C11;&#x4E86;&#x53F3;&#x8FB9;&#x7684;&#x4E95;&#x53F7;&#x7B26;&#x53F7;&#xFF0C;&#x6240;&#x4EE5;&#x8FBE;&#x4E0D;&#x5230;&#x4F60;&#x9884;&#x671F;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x4E8E;&#x662F;&#x4F60;&#x6539;&#x6210;&#x8FD9;&#x6837;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from user where name like &apos;%&apos;||#{name}||&apos;%&apos;</span><br></pre></td></tr></table></figure>

<p>&#x786E;&#x5B9E;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FC7;&#x51E0;&#x5929;&#x9886;&#x5BFC;&#x53C8;&#x8DDF;&#x4F60;&#x8BF4;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x6362;&#x56DE; mysql &#x4E86;&#xFF1F;&#x989D;&#x2026; &#x90A3;&#x4E0D;&#x597D;&#x610F;&#x601D;&#xFF0C;&#x4F60;&#x53C8;&#x5F97;&#x628A;&#x76F8;&#x5173;&#x4F7F;&#x7528;&#x5230;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2;&#x7684;&#x5730;&#x65B9;&#x6539;&#x56DE;&#x6765;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;select * from user where name like concat(&apos;%&apos;,#{name},&apos;%&apos;)</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x663E;&#x7136;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x53EA;&#x8981;&#x53D1;&#x751F;&#x53D8;&#x66F4;&#x4F60;&#x7684; sql &#x8BED;&#x53E5;&#x5C31;&#x5F97;&#x8DDF;&#x7740;&#x6539;&#xFF0C;&#x7279;&#x522B;&#x9EBB;&#x70E6;&#xFF0C;&#x6240;&#x4EE5;&#x624D;&#x6709;&#x4E86;&#x4E00;&#x5F00;&#x59CB;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD; bind &#x6807;&#x7B7E;&#x5B98;&#x7F51;&#x7684;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x65E0;&#x8BBA;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FD9;&#x4E2A;&#x6A21;&#x7CCA;&#x67E5;&#x8BE2;&#x7684; Like &#x8BED;&#x6CD5;&#x90FD;&#x662F;&#x652F;&#x6301;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;selecUser&quot;&gt;</span><br><span class="line">  &lt;bind name=&quot;myName&quot; value=&quot;&apos;%&apos; + _parameter.getName() + &apos;%&apos;&quot; /&gt;</span><br><span class="line">  SELECT * FROM user</span><br><span class="line">  WHERE name LIKE #{myName}</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A; bind &#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x5B9E;&#x6253;&#x5B9E;&#x89E3;&#x51B3;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x91CD;&#x65B0;&#x9009;&#x578B;&#x540E;&#x5BFC;&#x81F4;&#x7684;&#x4E00;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x5F53;&#x7136;&#x5728;&#x5B9E;&#x9645;&#x5DE5;&#x4F5C;&#x4E2D;&#x53D1;&#x751F;&#x7684;&#x6982;&#x7387;&#x4E0D;&#x4F1A;&#x592A;&#x5927;&#xFF0C;&#x6240;&#x4EE5; bind &#x7684;&#x4F7F;&#x7528;&#x6211;&#x4E2A;&#x4EBA;&#x786E;&#x5B9E;&#x4E5F;&#x4F7F;&#x7528;&#x7684;&#x4E0D;&#x591A;&#xFF0C;&#x53EF;&#x80FD;&#x8FD8;&#x6709;&#x5176;&#x5B83;&#x4E00;&#x4E9B;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5E0C;&#x671B;&#x6709;&#x4EBA;&#x80FD;&#x53D1;&#x73B0;&#x4E4B;&#x540E;&#x6765;&#x8DDF;&#x6211;&#x4EEC;&#x5206;&#x4EAB;&#x4E00;&#x4E0B;&#xFF0C;&#x603B;&#x4E4B;&#x6211;&#x52C9;&#x5F3A;&#x7ED9;&#x4E86;&#x4E00;&#x9897;&#x661F;&#xFF08;&#x867D;&#x7136;&#x6CA1;&#x592A;&#x591A;&#x5B9E;&#x9645;&#x7528;&#x5904;&#xFF0C;&#x4F46;&#x6BD5;&#x7ADF;&#x8981;&#x7ED9;&#x70B9;&#x9762;&#x5B50;&#xFF09;&#x3002;</p>
<hr>
<h5 id="&#x62D3;&#x5C55;&#xFF1A;sql&#x6807;&#x7B7E;-include-&#x6807;&#x7B7E;"><a href="#&#x62D3;&#x5C55;&#xFF1A;sql&#x6807;&#x7B7E;-include-&#x6807;&#x7B7E;" class="headerlink" title="&#x62D3;&#x5C55;&#xFF1A;sql&#x6807;&#x7B7E; + include &#x6807;&#x7B7E;"></a>&#x62D3;&#x5C55;&#xFF1A;sql&#x6807;&#x7B7E; + include &#x6807;&#x7B7E;</h5><p>&#x5E38;&#x7528;&#x5EA6;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;</p>
<p>&#x5B9E;&#x7528;&#x6027;&#xFF1A;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;</p>
<p>sql &#x6807;&#x7B7E;&#x4E0E; include &#x6807;&#x7B7E;&#x7EC4;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x7528;&#x4E8E; SQL &#x8BED;&#x53E5;&#x7684;&#x590D;&#x7528;&#xFF0C;&#x65E5;&#x5E38;&#x9AD8;&#x9891;&#x6216;&#x516C;&#x7528;&#x4F7F;&#x7528;&#x7684;&#x8BED;&#x53E5;&#x5757;&#x53EF;&#x4EE5;&#x62BD;&#x53D6;&#x51FA;&#x6765;&#x8FDB;&#x884C;&#x590D;&#x7528;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x4E0D;&#x964C;&#x751F;&#xFF0C;&#x65E9;&#x671F;&#x6211;&#x4EEC;&#x5B66;&#x4E60; JSP &#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x6709;&#x4E00;&#x4E2A; include &#x6807;&#x8BB0;&#x53EF;&#x4EE5;&#x5F15;&#x5165;&#x4E00;&#x4E9B;&#x516C;&#x7528;&#x53EF;&#x590D;&#x7528;&#x7684;&#x9875;&#x9762;&#x6587;&#x4EF6;&#xFF0C;&#x4F8B;&#x5982;&#x9875;&#x9762;&#x5934;&#x90E8;&#x6216;&#x5C3E;&#x90E8;&#x9875;&#x9762;&#x4EE3;&#x7801;&#x5143;&#x7D20;&#xFF0C;&#x8FD9;&#x79CD;&#x590D;&#x7528;&#x7684;&#x8BBE;&#x8BA1;&#x5F88;&#x5E38;&#x89C1;&#x3002;</p>
<p><strong>&#x4E25;&#x683C;&#x610F;&#x4E49;&#x4E0A; sql &#x3001;include &#x4E0D;&#x7B97;&#x5728;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x6210;&#x5458;&#x4E4B;&#x5185;</strong>&#xFF0C;&#x53EA;&#x56E0;&#x5B83;&#x786E;&#x5B9E;&#x662F;&#x5B9D;&#x85CF;&#x822C;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x8981;&#x7B80;&#x5355;&#x8BF4;&#x8BF4;&#xFF0C;sql &#x6807;&#x7B7E;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x4E00;&#x6BB5;&#x53EF;&#x91CD;&#x7528;&#x7684; SQL &#x8BED;&#x53E5;&#x7247;&#x6BB5;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x5176;&#x5B83;&#x8BED;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x800C; include &#x6807;&#x7B7E;&#x5219;&#x901A;&#x8FC7;&#x5C5E;&#x6027; refid &#x6765;&#x5F15;&#x7528;&#x5BF9;&#x5E94; id &#x5339;&#x914D;&#x7684; sql &#x6807;&#x7B7E;&#x8BED;&#x53E5;&#x7247;&#x6BB5;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/aacb356c11d811771ef159a9d11a15148536dcff54aca17092d12dfd41b6201a" alt></p>
<p>&#x7B80;&#x5355;&#x7684;&#x590D;&#x7528;&#x4EE3;&#x7801;&#x5757;&#x53EF;&#x4EE5;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x53EF;&#x590D;&#x7528;&#x7684;&#x5B57;&#x6BB5;&#x8BED;&#x53E5;&#x5757; --&gt;</span><br><span class="line">&lt;sql id=&quot;userColumns&quot;&gt;</span><br><span class="line">    id,username,password </span><br><span class="line">&lt;/sql&gt;</span><br></pre></td></tr></table></figure>

<p>&#x67E5;&#x8BE2;&#x6216;&#x63D2;&#x5165;&#x65F6;&#x7B80;&#x5355;&#x590D;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x67E5;&#x8BE2;&#x65F6;&#x7B80;&#x5355;&#x590D;&#x7528; --&gt;</span><br><span class="line">&lt;select id=&quot;selectUsers&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">  select</span><br><span class="line">    &lt;include refid=&quot;userColumns&quot;&gt;&lt;/include&gt; </span><br><span class="line">  from user </span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- &#x63D2;&#x5165;&#x65F6;&#x7B80;&#x5355;&#x590D;&#x7528; --&gt;</span><br><span class="line">&lt;insert id=&quot;insertUser&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">  insert into user(</span><br><span class="line">    &lt;include refid=&quot;userColumns&quot;&gt;&lt;/include&gt; </span><br><span class="line">  )values(</span><br><span class="line">    #{id},#{username},#{password} </span><br><span class="line">  )  </span><br><span class="line">&lt;/insert&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x7136;&#xFF0C;&#x590D;&#x7528;&#x8BED;&#x53E5;&#x8FD8;&#x652F;&#x6301;&#x5C5E;&#x6027;&#x4F20;&#x9012;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x53EF;&#x590D;&#x7528;&#x7684;&#x5B57;&#x6BB5;&#x8BED;&#x53E5;&#x5757; --&gt;</span><br><span class="line">&lt;sql id=&quot;userColumns&quot;&gt;</span><br><span class="line">    ${pojo}.id,${pojo}.username </span><br><span class="line">&lt;/sql&gt;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A; SQL &#x7247;&#x6BB5;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x5B83;&#x8BED;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x67E5;&#x8BE2;&#x65F6;&#x590D;&#x7528; --&gt;</span><br><span class="line">&lt;select id=&quot;selectUsers&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">  select</span><br><span class="line">    &lt;include refid=&quot;userColumns&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;pojo&quot; value=&quot;u1&quot;/&gt;</span><br><span class="line">    &lt;/include&gt;,</span><br><span class="line">    &lt;include refid=&quot;userColumns&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;pojo&quot; value=&quot;u2&quot;/&gt;</span><br><span class="line">    &lt;/include&gt;</span><br><span class="line">  from user u1 cross join user u2</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5728; include &#x5143;&#x7D20;&#x7684; refid &#x5C5E;&#x6027;&#x6216;&#x591A;&#x5C42;&#x5185;&#x90E8;&#x8BED;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x7A7F;&#x900F;&#x4F20;&#x9012;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/19c206a2ddbcde3c5f93befd07fff52183641c93a1f2a02c95add20b4966347a" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;!-- &#x7B80;&#x5355;&#x8BED;&#x53E5;&#x5757; --&gt;</span><br><span class="line">&lt;sql id=&quot;sql1&quot;&gt;</span><br><span class="line">  ${prefix}_user</span><br><span class="line">&lt;/sql&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- &#x5D4C;&#x5957;&#x8BED;&#x53E5;&#x5757; --&gt;</span><br><span class="line">&lt;sql id=&quot;sql2&quot;&gt;</span><br><span class="line">  from</span><br><span class="line">    &lt;include refid=&quot;${include_target}&quot;/&gt;</span><br><span class="line">&lt;/sql&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- &#x67E5;&#x8BE2;&#x65F6;&#x5F15;&#x7528;&#x5D4C;&#x5957;&#x8BED;&#x53E5;&#x5757; --&gt;</span><br><span class="line">&lt;select id=&quot;select&quot; resultType=&quot;map&quot;&gt;</span><br><span class="line">  select</span><br><span class="line">    id, username</span><br><span class="line">  &lt;include refid=&quot;sql2&quot;&gt;</span><br><span class="line">    &lt;property name=&quot;prefix&quot; value=&quot;t&quot;/&gt;</span><br><span class="line">    &lt;property name=&quot;include_target&quot; value=&quot;sql1&quot;/&gt;</span><br><span class="line">  &lt;/include&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x81F3;&#x6B64;&#xFF0C;&#x5173;&#x4E8E; 9 &#x5927;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x7684;&#x57FA;&#x672C;&#x7528;&#x6CD5;&#x6211;&#x4EEC;&#x5DF2;&#x4ECB;&#x7ECD;&#x5B8C;&#x6BD5;&#xFF0C;&#x53E6;&#x5916;&#x6211;&#x4EEC;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x7591;&#x95EE;&#xFF1A;Mybatis &#x5E95;&#x5C42;&#x662F;&#x5982;&#x4F55;&#x89E3;&#x6790;&#x8FD9;&#x4E9B;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x7684;&#x5462;&#xFF1F;&#x6700;&#x7EC8;&#x53C8;&#x662F;&#x600E;&#x4E48;&#x6784;&#x5EFA;&#x5B8C;&#x6574;&#x53EF;&#x6267;&#x884C;&#x7684; SQL &#x8BED;&#x53E5;&#x7684;&#x5462;&#xFF1F;&#x5E26;&#x7740;&#x8FD9;&#x4E9B;&#x7591;&#x95EE;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x7B2C;4&#x8282;&#x4E2D;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/504ae559200abaf79929cae2067624637955679de3a461a7cfe04162e19a7a54" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/578f89ac6acb812c6c12ae8382480c4b63ed837c8460620adfc8be6dc2011e7e" alt></p>
<h4 id="4&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;"><a href="#4&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;" class="headerlink" title="4&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;"></a>4&#x3001;&#x52A8;&#x6001;SQL&#x7684;&#x5E95;&#x5C42;&#x539F;&#x7406;</h4><p>&#x60F3;&#x4E86;&#x89E3; Mybatis &#x7A76;&#x7ADF;&#x662F;&#x5982;&#x4F55;&#x89E3;&#x6790;&#x4E0E;&#x6784;&#x5EFA;&#x52A8;&#x6001; SQL &#xFF1F;&#x9996;&#x5148;&#x63A8;&#x8350;&#x7684;&#x5F53;&#x7136;&#x662F;&#x8BFB;&#x6E90;&#x7801;&#xFF0C;&#x800C;&#x8BFB;&#x6E90;&#x7801;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x6280;&#x672F;&#x94BB;&#x7814;&#x95EE;&#x9898;&#xFF0C;&#x4E3A;&#x4E86;&#x501F;&#x9274;&#x5B66;&#x4E60;&#xFF0C;&#x4E3A;&#x4E86;&#x5DE5;&#x4F5C;&#x50A8;&#x5907;&#xFF0C;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF0C;&#x4E3A;&#x4E86;&#x8BA9;&#x81EA;&#x5DF1;&#x5728;&#x7F16;&#x7A0B;&#x7684;&#x9053;&#x8DEF;&#x4E0A;&#x8DD1;&#x5F97;&#x660E;&#x767D;&#x4E00;&#x4E9B;&#x2026; &#x800C;&#x5E0C;&#x671B;&#x901A;&#x8FC7;&#x8BFB;&#x6E90;&#x7801;&#xFF0C;&#x53BB;&#x4E86;&#x89E3;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#xFF0C;&#x5207;&#x8BB0;&#x4E0D;&#x80FD;&#x8131;&#x79BB;&#x4E86;&#x6574;&#x4F53;&#x53BB;&#x8BFB;&#x5C40;&#x90E8;&#xFF0C;&#x5426;&#x5219;&#x4F60;&#x4E86;&#x89E3;&#x5230;&#x7684;&#x5FC5;&#x7136;&#x5C40;&#x9650;&#x4E14;&#x7247;&#x9762;&#xFF0C;&#x4ECE;&#x800C;&#x8F7B;&#x5FFD;&#x4E86;&#x771F;&#x6838;&#x4E0A;&#x7684;&#x8BBE;&#x8BA1;&#x3002;&#x5982;&#x540C;&#x6211;&#x4EEC;&#x8BFB;&#x53F2;&#x6216;&#x8005;&#x89C2;&#x5B87;&#x5B99;&#x4E00;&#x6837;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x529E;&#x6CD5;&#x90FD;&#x662F;&#x4ECE;&#x6574;&#x4F53;&#x5230;&#x5C40;&#x90E8;&#xFF0C;&#x4E0D;&#x65AD;&#x653E;&#x5927;&#xFF0C;&#x524D;&#x540E;&#x5EF6;&#x5C55;&#xFF0C;&#x4F1A;&#x5F88;&#x8212;&#x670D;&#x901A;&#x900F;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x51C6;&#x5907;&#x4ECE; Mybatis &#x6846;&#x67B6;&#x7684;&#x6838;&#x5FC3;&#x4E3B;&#x7EBF;&#x4E0A;&#x53BB;&#x9010;&#x6B65;&#x653E;&#x5927;&#x5256;&#x6790;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/71fb1bfe4d0a35dd049eaa42d929f6fd8fd42df33cb2ae235bdd4e6829f78664" alt></p>
<p>&#x901A;&#x8FC7;&#x524D;&#x9762;&#x51E0;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x4ECB;&#x7ECD;&#xFF08;&#x5EFA;&#x8BAE;&#x9605;&#x8BFB; Mybatis &#x7CFB;&#x5217;&#x5168;&#x89E3;&#x4E4B;&#x516D;:&#x300A;<strong>Mybatis &#x6700;&#x786C;&#x6838;&#x7684; API &#x4F60;&#x77E5;&#x9053;&#x51E0;&#x4E2A;&#xFF1F;</strong>&#x300B;&#xFF09;&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E86; Mybatis &#x6846;&#x67B6;&#x7684;&#x6838;&#x5FC3;&#x90E8;&#x5206;&#x5728;&#x4E8E;&#x6784;&#x4EF6;&#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#xFF0C;&#x4ECE;&#x800C;&#x652F;&#x6491;&#x4E86;&#x5916;&#x90E8;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x4ECE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7AEF;&#x521B;&#x5EFA;&#x914D;&#x7F6E;&#x5E76;&#x8C03;&#x7528; API &#x5F00;&#x59CB;&#xFF0C;&#x5230;&#x6846;&#x67B6;&#x7AEF;&#x52A0;&#x8F7D;&#x914D;&#x7F6E;&#x5E76;&#x521D;&#x59CB;&#x5316;&#x6784;&#x4EF6;&#xFF0C;&#x518D;&#x521B;&#x5EFA;&#x4F1A;&#x8BDD;&#x5E76;&#x63A5;&#x6536;&#x8BF7;&#x6C42;&#xFF0C;&#x7136;&#x540E;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x6700;&#x7EC8;&#x8FD4;&#x56DE;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x7B49;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/833df85f246d57d8ad45a4b66d8a67923949b0c9aff6bdbb5f2e35ed9e10b354" alt></p>
<p>&#x6211;&#x4EEC;&#x7684;&#x52A8;&#x6001; SQL &#x89E3;&#x6790;&#x90E8;&#x5206;&#x5C31;&#x53D1;&#x751F;&#x5728; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61; MappedStatement &#x6784;&#x5EFA;&#x65F6;&#xFF08;<strong>&#x4E0A;&#x5DE6;&#x9AD8;&#x4EAE;&#x6A58;&#x8272;</strong>&#x90E8;&#x5206;&#xFF0C;&#x6CE8;&#x610F;&#x89C2;&#x5BDF;&#x5176;&#x4E2D; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x4E0E; SqlSource &#x3001; BoundSql &#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x5728;&#x52A8;&#x6001; SQL &#x89E3;&#x6790;&#x6D41;&#x7A0B;&#x7279;&#x522B;&#x5173;&#x952E;&#xFF09;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x62C9;&#x8FD1;&#x4E00;&#x70B9;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x65E0;&#x8BBA;&#x662F;&#x4F7F;&#x7528; XML &#x914D;&#x7F6E; SQL &#x8BED;&#x53E5;&#x6216;&#x662F;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x914D;&#x7F6E; SQL &#x8BED;&#x53E5;&#xFF0C;&#x6846;&#x67B6;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x628A;&#x89E3;&#x6790;&#x5B8C;&#x6210;&#x7684; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x5B58;&#x653E;&#x5230; MappedStatement &#x8BED;&#x53E5;&#x96C6;&#x5408;&#x6C60;&#x5B50;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/89f2558ea52e8f9da89ed9d20fcfca93905b045e1376dfa00dd4dc9747d05088" alt></p>
<p>&#x800C;&#x4EE5;&#x4E0A;<strong>&#x865A;&#x7EBF;&#x9AD8;&#x4EAE;</strong>&#x90E8;&#x5206;&#xFF0C;&#x5373;&#x662F; XML &#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x4E0E;&#x6CE8;&#x89E3;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x89E3;&#x6790;&#x7684;&#x6D41;&#x7A0B;&#xFF0C;&#x6211;&#x4EEC;&#x5206;&#x522B;&#x8BB2;&#x89E3;&#xFF1A;</p>
<ul>
<li><strong>&#x7B2C;&#x4E00;&#xFF0C;XML &#x65B9;&#x5F0F;&#x914D;&#x7F6E; SQL &#x8BED;&#x53E5;&#xFF0C;&#x6846;&#x67B6;&#x5982;&#x4F55;&#x89E3;&#x6790;&#xFF1F;</strong></li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7ae721726efbdf3cc547fcac343fbe314854728a5c0876fd3b2f9ff4c1a6ccd9" alt></p>
<p>&#x4EE5;&#x4E0A;&#x4E3A; XML &#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x7684; SQL &#x8BED;&#x53E5;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#xFF0C;&#x65E0;&#x8BBA;&#x662F;&#x5355;&#x72EC;&#x4F7F;&#x7528; Mybatis &#x6846;&#x67B6;&#x8FD8;&#x662F;&#x96C6;&#x6210; Spring &#x4E0E; Mybatis &#x6846;&#x67B6;&#xFF0C;&#x7A0B;&#x5E8F;&#x542F;&#x52A8;&#x5165;&#x53E3;&#x90FD;&#x4F1A;&#x9996;&#x5148;&#x4ECE; SqlSessionFactoryBuilder.build() &#x5F00;&#x59CB;&#x6784;&#x5EFA;&#xFF0C;&#x4F9D;&#x6B21;&#x901A;&#x8FC7; XMLConfigBuilder &#x6784;&#x5EFA;&#x5168;&#x5C40;&#x914D;&#x7F6E; Configuration &#x5BF9;&#x8C61;&#x3001;&#x901A;&#x8FC7; XMLMapperBuilder &#x6784;&#x5EFA;&#x6BCF;&#x4E00;&#x4E2A; Mapper &#x6620;&#x5C04;&#x5668;&#x3001;&#x901A;&#x8FC7; XMLStatementBuilder &#x6784;&#x5EFA;&#x6620;&#x5C04;&#x5668;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#xFF08;select/insert/update/delete&#xFF09;&#x3002;&#x800C;&#x5C31;&#x5728;&#x89E3;&#x6790;&#x6784;&#x5EFA;&#x6BCF;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x7684;&#x65B9;&#x6CD5; parseStatementNode&#xFF08;&#xFF09;&#xFF0C;&#x5373;&#x4E0A;&#x56FE;<strong>&#x6A58;&#x7EA2;&#x8272;&#x9AD8;&#x4EAE;</strong>&#x90E8;&#x5206;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x52A8;&#x6001; SQL &#x7684;&#x6838;&#x5FC3;&#x8282;&#x70B9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// XML&#x914D;&#x7F6E;&#x8BED;&#x53E5;&#x6784;&#x5EFA;&#x5668;</span><br><span class="line">public class XMLStatementBuilder {</span><br><span class="line">    </span><br><span class="line">    // &#x5B9E;&#x9645;&#x89E3;&#x6790;&#x6BCF;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;</span><br><span class="line">    // &#x4F8B;&#x5982; select|insert|update|delete</span><br><span class="line">	public void parseStatementNode() {</span><br><span class="line">        </span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x53C2;&#x6570;&#x6784;&#x5EFA;...</span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x7F13;&#x5B58;&#x6784;&#x5EFA;..</span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x7ED3;&#x679C;&#x96C6;&#x6784;&#x5EFA;&#x7B49;&#x7B49;.. </span><br><span class="line">        </span><br><span class="line">        // &#x3010;&#x91CD;&#x70B9;&#x3011;&#x6B64;&#x5904;&#x5373;&#x662F;&#x5904;&#x7406;&#x52A8;&#x6001; SQL &#x7684;&#x6838;&#x5FC3;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line">        String lang = context.getStringAttribute(&quot;lang&quot;);</span><br><span class="line">    	LanguageDriver langDriver = getLanguageDriver(lang);</span><br><span class="line">        SqlSource sqlSource = langDriver.createSqlSource(..);</span><br><span class="line">        </span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x6700;&#x540E;&#x628A;&#x89E3;&#x6790;&#x5B8C;&#x6210;&#x7684;&#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x8FDB;&#x8BED;&#x53E5;&#x96C6;&#x5408;&#x6C60;</span><br><span class="line">        builderAssistant.addMappedStatement(&#x8BED;&#x53E5;&#x5BF9;&#x8C61;)</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5927;&#x5BB6;&#x5148;&#x91CD;&#x70B9;&#x5173;&#x6CE8;&#x4E00;&#x4E0B;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x4E2D;&#x3010;&#x91CD;&#x70B9;&#x3011;&#x90E8;&#x5206;&#x7684; LanguageDriver &#x4E0E; SqlSource &#x4F1A;&#x662F;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x8BB2;&#x89E3;&#x52A8;&#x6001; SQL &#x8BED;&#x53E5;&#x89E3;&#x6790;&#x7684;&#x6838;&#x5FC3;&#x7C7B;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x7740;&#x6025;&#x5256;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x628A;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x6D41;&#x7A0B;&#x4E5F;&#x68B3;&#x7406;&#x5BF9;&#x6BD4;&#x4E00;&#x4E0B;&#x3002;</p>
<ul>
<li><strong>&#x7B2C;&#x4E8C;&#xFF0C;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x914D;&#x7F6E; SQL &#x8BED;&#x53E5;&#xFF0C;&#x6846;&#x67B6;&#x5982;&#x4F55;&#x89E3;&#x6790;&#xFF1F;</strong></li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/c70acdcb63103b2c166a352a7b8adb0162456aaa6a2944206c5188fd49d16f63" alt></p>
<p>&#x5927;&#x5BB6;&#x4F1A;&#x53D1;&#x73B0;&#x6CE8;&#x89E3;&#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x7684; SQL &#x8BED;&#x53E5;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#xFF0C;&#x4E0E; XML &#x65B9;&#x5F0F;&#x6781;&#x4E3A;&#x76F8;&#x50CF;&#xFF0C;&#x552F;&#x4E00;&#x4E0D;&#x540C;&#x70B9;&#x5C31;&#x5728;&#x4E8E;&#x89E3;&#x6790;&#x6CE8;&#x89E3; SQL &#x8BED;&#x53E5;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x4E86; MapperAnnotationBuilder &#x6784;&#x5EFA;&#x5668;&#xFF0C;&#x5176;&#x4E2D;&#x5173;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#x5BF9;&#x8C61; (@Select,@Insert,@Update,@Delete&#x7B49;) &#x7684;&#x89E3;&#x6790;&#xFF0C;&#x53C8;&#x90FD;&#x4F1A;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x89E3;&#x6790;&#x65B9;&#x6CD5; parseStatement&#xFF08;&#xFF09;&#xFF0C;&#x5373;&#x4E0A;&#x56FE;<strong>&#x6A58;&#x7EA2;&#x8272;&#x9AD8;&#x4EAE;</strong>&#x90E8;&#x5206;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x540C;&#x6837;&#x7684;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x52A8;&#x6001; SQL &#x7684;&#x6838;&#x5FC3;&#x8282;&#x70B9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6CE8;&#x89E3;&#x914D;&#x7F6E;&#x8BED;&#x53E5;&#x6784;&#x5EFA;&#x5668;</span><br><span class="line">public class MapperAnnotationBuilder {</span><br><span class="line">    </span><br><span class="line">    // &#x5B9E;&#x9645;&#x89E3;&#x6790;&#x6BCF;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;</span><br><span class="line">    // &#x4F8B;&#x5982; @Select,@Insert,@Update,@Delete</span><br><span class="line">    void parseStatement(Method method) {  </span><br><span class="line">        </span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x53C2;&#x6570;&#x6784;&#x5EFA;...</span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x7F13;&#x5B58;&#x6784;&#x5EFA;..</span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x7ED3;&#x679C;&#x96C6;&#x6784;&#x5EFA;&#x7B49;&#x7B49;.. </span><br><span class="line">        </span><br><span class="line">        // &#x3010;&#x91CD;&#x70B9;&#x3011;&#x6B64;&#x5904;&#x5373;&#x662F;&#x5904;&#x7406;&#x52A8;&#x6001; SQL &#x7684;&#x6838;&#x5FC3;&#xFF01;&#xFF01;&#xFF01;</span><br><span class="line">    	final LanguageDriver languageDriver = getLanguageDriver(method);  </span><br><span class="line">    	final SqlSource sqlSource = buildSqlSource( languageDriver,... );</span><br><span class="line">        </span><br><span class="line">        // [&#x5FFD;&#x7565;]&#x6700;&#x540E;&#x628A;&#x89E3;&#x6790;&#x5B8C;&#x6210;&#x7684;&#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x8FDB;&#x8BED;&#x53E5;&#x96C6;&#x5408;&#x6C60;</span><br><span class="line">        builderAssistant.addMappedStatement(&#x8BED;&#x53E5;&#x5BF9;&#x8C61;)</span><br><span class="line"></span><br><span class="line">    }    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x6B64;&#x53EF;&#x89C1;&#xFF0C;&#x4E0D;&#x7BA1;&#x662F;&#x901A;&#x8FC7; XML &#x914D;&#x7F6E;&#x8BED;&#x53E5;&#x8FD8;&#x662F;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x8BED;&#x53E5;&#xFF0C;&#x6784;&#x5EFA;&#x6D41;&#x7A0B;&#x90FD;&#x662F; <strong>&#x5927;&#x81F4;&#x76F8;&#x540C;</strong>&#xFF0C;&#x5E76;&#x4E14;&#x4F9D;&#x7136;&#x51FA;&#x73B0;&#x4E86;&#x6211;&#x4EEC;&#x5728; XML &#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x7684;&#x8BED;&#x8A00;&#x9A71;&#x52A8; LanguageDriver &#x4E0E;&#x8BED;&#x53E5;&#x6E90; SqlSource &#xFF0C;&#x90A3;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;/&#x63A5;&#x53E3;&#x5230;&#x5E95;&#x4E3A;&#x4F55;&#x7269;&#xFF0C;&#x4E3A;&#x4F55;&#x80FD;&#x8BA9; SQL &#x8BED;&#x53E5;&#x89E3;&#x6790;&#x8005;&#x90FD;&#x5982;&#x6B64;&#x7ED5;&#x4E0D;&#x5F00; &#xFF1F;</p>
<p>&#x8FD9;&#x4E00;&#x5207;&#xFF0C;&#x5F97;&#x4ECE;&#x4F60;&#x7F16;&#x5199;&#x7684; SQL &#x5F00;&#x59CB;&#x8BB2;&#x8D77; &#x2026;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/ee9d007abcc6dbcb906f0bb59eb1351c5a52f77ba0dcfd936d2c969ac2863721" alt></p>
<p>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#xFF0C;&#x65E0;&#x8BBA; XML &#x8FD8;&#x662F;&#x6CE8;&#x89E3;&#xFF0C;&#x6700;&#x7EC8;&#x4F60;&#x7684;&#x6240;&#x6709; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x90FD;&#x4F1A;&#x88AB;&#x9F50;&#x9F50;&#x6574;&#x6574;&#x7684;&#x89E3;&#x6790;&#x5B8C;&#x653E;&#x7F6E;&#x5728; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x96C6;&#x5408;&#x6C60;&#x4E2D;&#xFF0C;&#x4EE5;&#x4F9B;&#x6267;&#x884C;&#x5668; Executor &#x5177;&#x4F53;&#x6267;&#x884C;&#x589E;&#x5220;&#x6539;&#x67E5; ( CRUD ) &#x65F6;&#x4F7F;&#x7528;&#x3002;&#x800C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6BCF;&#x4E00;&#x4E2A; SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x7279;&#x522B;&#x590D;&#x6742;&#x7E41;&#x591A;&#xFF0C;&#x4F8B;&#x5982;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;&#x3001;&#x7F13;&#x5B58;&#x3001;&#x8BED;&#x53E5;&#x7C7B;&#x578B;&#x3001;&#x7ED3;&#x679C;&#x96C6;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#x7B49;&#x7B49;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// SQL &#x8BED;&#x53E5;&#x5BF9;&#x8C61;</span><br><span class="line">public final class MappedStatement {</span><br><span class="line"></span><br><span class="line">  private String resource;</span><br><span class="line">  private Configuration configuration;</span><br><span class="line">  private String id;</span><br><span class="line">  private Integer fetchSize;</span><br><span class="line">  private Integer timeout;</span><br><span class="line">  private StatementType statementType;</span><br><span class="line">  private ResultSetType resultSetType;</span><br><span class="line">    </span><br><span class="line">  // SQL &#x6E90;</span><br><span class="line">  private SqlSource sqlSource;</span><br><span class="line">  private Cache cache;</span><br><span class="line">  private ParameterMap parameterMap;</span><br><span class="line">  private List&lt;ResultMap&gt; resultMaps;</span><br><span class="line">  private boolean flushCacheRequired;</span><br><span class="line">  private boolean useCache;</span><br><span class="line">  private boolean resultOrdered;</span><br><span class="line">  private SqlCommandType sqlCommandType;</span><br><span class="line">  private KeyGenerator keyGenerator;</span><br><span class="line">  private String[] keyProperties;</span><br><span class="line">  private String[] keyColumns;</span><br><span class="line">  private boolean hasNestedResultMaps;</span><br><span class="line">  private String databaseId;</span><br><span class="line">  private Log statementLog;</span><br><span class="line">  private LanguageDriver lang;</span><br><span class="line">  private String[] resultSets;</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x800C;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x522B;&#x7684;&#x5C5E;&#x6027;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x8BED;&#x53E5;&#x6E90; SqlSource &#xFF0C;&#x529F;&#x80FD;&#x7EAF;&#x7CB9;&#x4E5F;&#x6070;&#x5982;&#x5176;&#x540D; <strong>SQL &#x6E90;</strong>&#x3002;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x5B83;&#x4F1A;&#x7ED3;&#x5408;&#x7528;&#x6237;&#x4F20;&#x9012;&#x7684;&#x53C2;&#x6570;&#x5BF9;&#x8C61; parameterObject &#x4E0E;&#x52A8;&#x6001; SQL&#xFF0C;&#x751F;&#x6210; SQL &#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x6700;&#x7EC8;&#x5C01;&#x88C5;&#x6210; BoundSql &#x5BF9;&#x8C61;&#x3002;SqlSource &#x63A5;&#x53E3;&#x6709;5&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A;StaticSqlSource&#x3001;DynamicSqlSource&#x3001;RawSqlSource&#x3001;ProviderSqlSource&#x3001;<del>VelocitySqlSource</del> &#xFF08;&#x800C; velocitySqlSource &#x76EE;&#x524D;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF0C;&#x8FD8;&#x6CA1;&#x6709;&#x7528;&#x4F5C;&#x5B9E;&#x9645;&#x7684; Sql &#x6E90;&#x5B9E;&#x73B0;&#xFF09;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/ffd9bd2e8771639889b95fe8114a36853112edac198f6096a4c49f63ce865475" alt></p>
<ul>
<li><strong>StaticSqlSource</strong>&#xFF1A;&#x9759;&#x6001; SQL &#x6E90;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x6240;&#x6709;&#x7684; SQL &#x6E90;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x6784;&#x5EFA;&#x6210; StaticSqlSource &#x5B9E;&#x4F8B;&#xFF0C;&#x8BE5;&#x5B9E;&#x73B0;&#x7C7B;&#x4F1A;&#x751F;&#x6210;&#x6700;&#x7EC8;&#x53EF;&#x6267;&#x884C;&#x7684; SQL &#x8BED;&#x53E5;&#x4F9B; statement &#x6216; prepareStatement &#x4F7F;&#x7528;&#x3002;</li>
<li><strong>RawSqlSource</strong>&#xFF1A;&#x539F;&#x751F; SQL &#x6E90;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x89E3;&#x6790;&#x6784;&#x5EFA;&#x542B;&#x6709; &#x2018;#{}&#x2019; &#x5360;&#x4F4D;&#x7B26;&#x7684; SQL &#x8BED;&#x53E5;&#x6216;&#x539F;&#x751F; SQL &#x8BED;&#x53E5;&#xFF0C;&#x89E3;&#x6790;&#x5B8C;&#x6700;&#x7EC8;&#x4F1A;&#x6784;&#x5EFA; StaticSqlSource &#x5B9E;&#x4F8B;&#x3002;</li>
<li><strong>DynamicSqlSource</strong>&#xFF1A;&#x52A8;&#x6001; SQL &#x6E90;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x89E3;&#x6790;&#x6784;&#x5EFA;&#x542B;&#x6709; &#x2018;${}&#x2019; &#x66FF;&#x6362;&#x7B26;&#x7684; SQL &#x8BED;&#x53E5;&#x6216;&#x542B;&#x6709;&#x52A8;&#x6001; SQL &#x7684;&#x8BED;&#x53E5;&#xFF08;&#x4F8B;&#x5982; If/Where/Foreach&#x7B49;&#xFF09;&#xFF0C;&#x89E3;&#x6790;&#x5B8C;&#x6700;&#x7EC8;&#x4F1A;&#x6784;&#x5EFA; StaticSqlSource &#x5B9E;&#x4F8B;&#x3002;</li>
<li><strong>ProviderSqlSource</strong>&#xFF1A;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x7684; SQL &#x6E90;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x4F1A;&#x6839;&#x636E; SQL &#x8BED;&#x53E5;&#x7684;&#x5185;&#x5BB9;&#x5206;&#x53D1;&#x7ED9; RawSqlSource &#x6216; DynamicSqlSource &#xFF0C;&#x5F53;&#x7136;&#x6700;&#x7EC8;&#x4E5F;&#x4F1A;&#x6784;&#x5EFA; StaticSqlSource &#x5B9E;&#x4F8B;&#x3002;</li>
<li><strong>VelocitySqlSource</strong>&#xFF1A;&#x6A21;&#x677F; SQL &#x6E90;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x76EE;&#x524D;&#xFF08;V3.5.6&#xFF09;&#x5B98;&#x65B9;&#x7533;&#x660E;&#x8FD9;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#xFF0C;&#x8FD8;&#x6CA1;&#x6709;&#x7528;&#x4F5C;&#x771F;&#x6B63;&#x7684;&#x6A21;&#x677F; Sql &#x6E90;&#x5B9E;&#x73B0;&#x7C7B;&#x3002;</li>
</ul>
<p>SqlSource &#x5B9E;&#x4F8B;&#x5728;&#x914D;&#x7F6E;&#x7C7B; Configuration &#x89E3;&#x6790;&#x9636;&#x6BB5;&#x5C31;&#x88AB;&#x521B;&#x5EFA;&#xFF0C;Mybatis &#x6846;&#x67B6;&#x4F1A;&#x4F9D;&#x636E;3&#x4E2A;&#x7EF4;&#x5EA6;&#x7684;&#x4FE1;&#x606F;&#x6765;&#x9009;&#x62E9;&#x6784;&#x5EFA;&#x54EA;&#x79CD;&#x6570;&#x636E;&#x6E90;&#x5B9E;&#x4F8B;&#xFF1A;&#xFF08;&#x7EAF;&#x5C5E;&#x6211;&#x4E2A;&#x4EBA;&#x7406;&#x89E3;&#x7684;&#x5F52;&#x7C7B;&#x68B3;&#x7406;~&#xFF09;</p>
<ul>
<li><strong>&#x7B2C;&#x4E00;&#x4E2A;&#x7EF4;&#x5EA6;</strong>&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#x7684; SQL &#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF1A;XML &#x65B9;&#x5F0F;&#x6216;&#x8005;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x3002;</li>
<li><strong>&#x7B2C;&#x4E8C;&#x4E2A;&#x7EF4;&#x5EA6;</strong>&#xFF1A;SQL &#x8BED;&#x53E5;&#x4E2D;&#x662F;&#x5426;&#x4F7F;&#x7528;&#x52A8;&#x6001; SQL &#xFF08; if/where/foreach &#x7B49; &#xFF09;&#x3002;</li>
<li><strong>&#x7B2C;&#x4E09;&#x4E2A;&#x7EF4;&#x5EA6;</strong>&#xFF1A;SQL &#x8BED;&#x53E5;&#x4E2D;&#x662F;&#x5426;&#x542B;&#x6709;&#x66FF;&#x6362;&#x7B26; &#x2018;${}&#x2019; &#x6216;&#x5360;&#x4F4D;&#x7B26; &#x2018;#{}&#x2019; &#x3002;</li>
</ul>
<p>SqlSource &#x63A5;&#x53E3;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5; getBoundSql &#xFF0C;&#x5C31;&#x662F;&#x521B;&#x5EFA; BoundSql &#x5BF9;&#x8C61;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public interface SqlSource {</span><br><span class="line"></span><br><span class="line">  BoundSql getBoundSql(Object parameterObject);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x901A;&#x8FC7; SQL &#x6E90;&#x5C31;&#x80FD;&#x591F;&#x83B7;&#x53D6; BoundSql &#x5BF9;&#x8C61;&#xFF0C;&#x4ECE;&#x800C;&#x83B7;&#x53D6;&#x6700;&#x7EC8;&#x9001;&#x5F80;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x901A;&#x8FC7;JDBC&#xFF09;&#x4E2D;&#x6267;&#x884C;&#x7684; SQL &#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/d88be11d712abfd98606e7556b338f3eff28cfba7a3f1ab7fa43e1ccc5eb9d71" alt></p>
<p>JDBC &#x4E2D;&#x6267;&#x884C;&#x7684; SQL &#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x786E;&#x5B9E;&#x5C31;&#x5728; BoundSql &#x5BF9;&#x8C61;&#x4E2D;&#x3002;BoundSql &#x5BF9;&#x8C61;&#x5B58;&#x50A8;&#x4E86;&#x52A8;&#x6001;&#xFF08;&#x6216;&#x9759;&#x6001;&#xFF09;&#x751F;&#x6210;&#x7684; SQL &#x8BED;&#x53E5;&#x4EE5;&#x53CA;&#x76F8;&#x5E94;&#x7684;&#x53C2;&#x6570;&#x4FE1;&#x606F;&#xFF0C;&#x5B83;&#x662F;&#x5728;&#x6267;&#x884C;&#x5668;&#x5177;&#x4F53;&#x6267;&#x884C; CURD &#x65F6;&#x901A;&#x8FC7;&#x5B9E;&#x9645;&#x7684; SqlSource &#x5B9E;&#x4F8B;&#x6240;&#x6784;&#x5EFA;&#x7684;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class BoundSql { </span><br><span class="line"></span><br><span class="line">  //&#x8BE5;&#x5B57;&#x6BB5;&#x4E2D;&#x8BB0;&#x5F55;&#x4E86;SQL&#x8BED;&#x53E5;&#xFF0C;&#x8BE5;SQL&#x8BED;&#x53E5;&#x4E2D;&#x53EF;&#x80FD;&#x542B;&#x6709;&quot;?&quot;&#x5360;&#x4F4D;&#x7B26;</span><br><span class="line">  private final String sql;</span><br><span class="line">    </span><br><span class="line">  //SQL&#x4E2D;&#x7684;&#x53C2;&#x6570;&#x5C5E;&#x6027;&#x96C6;&#x5408;</span><br><span class="line">  private final List&lt;ParameterMapping&gt; parameterMappings;</span><br><span class="line">    </span><br><span class="line">  //&#x5BA2;&#x6237;&#x7AEF;&#x6267;&#x884C;SQL&#x65F6;&#x4F20;&#x5165;&#x7684;&#x5B9E;&#x9645;&#x53C2;&#x6570;&#x503C;</span><br><span class="line">  private final Object parameterObject;</span><br><span class="line">    </span><br><span class="line">  //&#x590D;&#x5236; DynamicContext.bindings &#x96C6;&#x5408;&#x4E2D;&#x7684;&#x5185;&#x5BB9;</span><br><span class="line">  private final Map&lt;String, Object&gt; additionalParameters;</span><br><span class="line">    </span><br><span class="line">  //&#x901A;&#x8FC7; additionalParameters &#x6784;&#x5EFA;&#x5143;&#x53C2;&#x6570;&#x5BF9;&#x8C61;</span><br><span class="line">  private final MetaObject metaParameters;</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x6267;&#x884C;&#x5668; Executor &#x5B9E;&#x4F8B;&#xFF08;&#x4F8B;&#x5982;BaseExecutor&#xFF09;&#x6267;&#x884C;&#x589E;&#x5220;&#x6539;&#x67E5;&#x65F6;&#xFF0C;&#x4F1A;&#x901A;&#x8FC7; SqlSource &#x6784;&#x5EFA; BoundSql &#x5B9E;&#x4F8B;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x901A;&#x8FC7; BoundSql &#x5B9E;&#x4F8B;&#x83B7;&#x53D6;&#x6700;&#x7EC8;&#x8F93;&#x9001;&#x81F3;&#x6570;&#x636E;&#x5E93;&#x6267;&#x884C;&#x7684; SQL &#x8BED;&#x53E5;&#xFF0C;&#x7CFB;&#x7EDF;&#x53EF;&#x6839;&#x636E; SQL &#x8BED;&#x53E5;&#x6784;&#x5EFA; Statement &#x6216;&#x8005; PrepareStatement &#xFF0C;&#x4ECE;&#x800C;&#x9001;&#x5F80;&#x6570;&#x636E;&#x5E93;&#x6267;&#x884C;&#xFF0C;&#x4F8B;&#x5982;&#x8BED;&#x53E5;&#x5904;&#x7406;&#x5668; StatementHandler &#x7684;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/15df3533bea6daba1a1364a63f931e8fa8ae3cf4663379fdd6923fd533ee56dd" alt></p>
<blockquote>
<p>&#x5899;&#x88C2;&#x63A8;&#x8350;&#x9605;&#x8BFB;&#x4E4B;&#x524D;&#x7B2C;&#x516D;&#x6587;&#x4E4B; Mybatis &#x6700;&#x786C;&#x6838;&#x7684; API &#x4F60;&#x77E5;&#x9053;&#x51E0;&#x4E2A;&#xFF1F;&#x8FD9;&#x4E9B;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x90FD;&#x6709;&#x7EC6;&#x8BB2;&#x3002;</p>
</blockquote>
<p>&#x5230;&#x6B64;&#x6211;&#x4EEC;&#x4ECB;&#x7ECD;&#x5B8C; SQL &#x6E90; SqlSource &#x4E0E; BoundSql &#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x6CE8;&#x610F; SqlSource &#x4E0E; BoundSql &#x4E0D;&#x662F;&#x540C;&#x4E2A;&#x9636;&#x6BB5;&#x4EA7;&#x751F;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x5206;&#x522B;&#x5728;&#x7A0B;&#x5E8F;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x4E0E;&#x8FD0;&#x884C;&#x65F6;&#x3002;</p>
<ul>
<li><strong>&#x7A0B;&#x5E8F;&#x542F;&#x52A8;&#x521D;&#x59CB;&#x6784;&#x5EFA;&#x65F6;</strong>&#xFF0C;&#x6846;&#x67B6;&#x4F1A;&#x6839;&#x636E; SQL &#x8BED;&#x53E5;&#x7C7B;&#x578B;&#x6784;&#x5EFA;&#x5BF9;&#x5E94;&#x7684; SqlSource &#x6E90;&#x5B9E;&#x4F8B;&#xFF08;&#x9759;&#x6001;/&#x52A8;&#x6001;&#xFF09;.</li>
<li><strong>&#x7A0B;&#x5E8F;&#x5B9E;&#x9645;&#x8FD0;&#x884C;&#x65F6;</strong>&#xFF0C;&#x6846;&#x67B6;&#x4F1A;&#x6839;&#x636E;&#x4F20;&#x5165;&#x53C2;&#x6570;&#x52A8;&#x6001;&#x7684;&#x6784;&#x5EFA; BoundSql &#x5BF9;&#x8C61;&#xFF0C;&#x8F93;&#x9001;&#x6700;&#x7EC8; SQL &#x5230;&#x6570;&#x636E;&#x5E93;&#x6267;&#x884C;&#x3002;</li>
</ul>
<p>&#x5728;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4E86; SQL &#x6E90;&#x662F;&#x8BED;&#x53E5;&#x5BF9;&#x8C61; BoundSql &#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x5750;&#x62E5;5&#x5927;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x90A3;&#x7A76;&#x7ADF;&#x662F;&#x8C01;&#x521B;&#x5EFA;&#x4E86; SQL &#x6E90;&#x5462;&#xFF1F;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x51C6;&#x5907;&#x4ECB;&#x7ECD;&#x7684;&#x8BED;&#x8A00;&#x9A71;&#x52A8; LanguageDriver &#xFF01;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public interface LanguageDriver {</span><br><span class="line">    SqlSource createSqlSource(...);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x63A5;&#x53E3; LanguageDriver &#x4E5F;&#x662F;&#x6781;&#x7B80;&#x6D01;&#xFF0C;&#x5185;&#x90E8;&#x5B9A;&#x4E49;&#x4E86;&#x6784;&#x5EFA; SQL &#x6E90;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;LanguageDriver &#x63A5;&#x53E3;&#x6709;2&#x4E2A;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A; XMLLanguageDriver &#x3001; RawLanguageDriver&#x3002;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/b431d059c03c0ad1686207a7d95be1bbce7e4ebb34284de1bfff2c2c445a3c3e" alt></p>
<ul>
<li><strong>XMLLanguageDriver</strong> &#xFF1A;&#x662F;&#x6846;&#x67B6;&#x9ED8;&#x8BA4;&#x7684;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#xFF0C;&#x80FD;&#x591F;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x7684; SQL &#x6E90;&#x7684;3&#x4E2A;&#x7EF4;&#x5EA6;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x5339;&#x914D;&#x7684; SQL &#x6E90;&#xFF08;DynamicSqlSource&#x3001;RawSqlSource&#x7B49;&#xFF09;&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x662F; Mybatis &#x5728;&#x88C5;&#x914D;&#x5168;&#x5C40;&#x914D;&#x7F6E;&#x65F6;&#x7684;&#x4E00;&#x4E9B;&#x8DDF;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x76F8;&#x5173;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x6211;&#x6458;&#x6284;&#x51FA;&#x6765;&#xFF0C;&#x5206;&#x522B;&#x6709;&#xFF1A;&#x5185;&#x7F6E;&#x4E86;&#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x5E76;&#x8BBE;&#x7F6E;&#x4E86;&#x522B;&#x540D;&#x65B9;&#x4FBF;&#x5F15;&#x7528;&#x3001;&#x6CE8;&#x518C;&#x4E86;&#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x81F3;&#x8BED;&#x8A00;&#x6CE8;&#x518C;&#x5DE5;&#x5382;&#x3001;&#x628A; XML &#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x8BBE;&#x7F6E;&#x4E3A;&#x9ED8;&#x8BA4;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5168;&#x5C40;&#x914D;&#x7F6E;&#x7684;&#x6784;&#x9020;&#x65B9;&#x6CD5;</span><br><span class="line">public Configuration() {</span><br><span class="line">    // &#x5185;&#x7F6E;/&#x6CE8;&#x518C;&#x4E86;&#x5F88;&#x591A;&#x6709;&#x610F;&#x601D;&#x7684;&#x3010;&#x522B;&#x540D;&#x3011;</span><br><span class="line">    // ...</span><br><span class="line">    </span><br><span class="line">    // &#x5176;&#x4E2D;&#x5C31;&#x5185;&#x7F6E;&#x4E86;&#x4E0A;&#x8FF0;&#x7684;&#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x3010;&#x522B;&#x540D;&#x3011;</span><br><span class="line">    typeAliasRegistry.registerAlias(&quot;XML&quot;, XMLLanguageDriver.class);</span><br><span class="line">    typeAliasRegistry.registerAlias(&quot;RAW&quot;, RawLanguageDriver.class);</span><br><span class="line">    </span><br><span class="line">    // &#x6CE8;&#x518C;&#x4E86;XML&#x3010;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x3011; --&gt; &#x5E76;&#x8BBE;&#x7F6E;&#x6210;&#x9ED8;&#x8BA4;&#xFF01;   </span><br><span class="line">    languageRegistry.setDefaultDriverClass(XMLLanguageDriver.class);</span><br><span class="line">    </span><br><span class="line">    // &#x6CE8;&#x518C;&#x4E86;&#x539F;&#x751F;&#x3010;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x3011;</span><br><span class="line">    languageRegistry.register(RawLanguageDriver.class);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>RawLanguageDriver</strong> &#xFF1A;&#x770B;&#x540D;&#x5B57;&#x5F97;&#x77E5;&#x662F;&#x539F;&#x751F;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#xFF0C;&#x4E8B;&#x5B9E;&#x4E5F;&#x5982;&#x6B64;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x521B;&#x5EFA;&#x539F;&#x751F; SQL &#x6E90;&#xFF08;RawSqlSource&#xFF09;&#xFF0C;&#x53E6;&#x5916;&#x5B83;&#x8FD8;&#x7EE7;&#x627F;&#x4E86; XMLLanguageDriver &#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * As of 3.2.4 the default XML language is able to identify static statements</span><br><span class="line"> * and create a {@link RawSqlSource}. So there is no need to use RAW unless you</span><br><span class="line"> * want to make sure that there is not any dynamic tag for any reason.</span><br><span class="line"> *</span><br><span class="line"> * @since 3.2.0</span><br><span class="line"> * @author Eduardo Macarron</span><br><span class="line"> */</span><br><span class="line">public class RawLanguageDriver extends XMLLanguageDriver {</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6CE8;&#x91CA;&#x7684;&#x5927;&#x81F4;&#x610F;&#x601D;&#xFF1A;&#x81EA; Mybatis 3.2.4 &#x4E4B;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF0C; XML &#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x5C31;&#x652F;&#x6301;&#x89E3;&#x6790;&#x9759;&#x6001;&#x8BED;&#x53E5;&#xFF08;&#x52A8;&#x6001;&#x8BED;&#x53E5;&#x5F53;&#x7136;&#x4E5F;&#x652F;&#x6301;&#xFF09;&#x5E76;&#x521B;&#x5EFA;&#x5BF9;&#x5E94;&#x7684; SQL &#x6E90;&#xFF08;&#x4F8B;&#x5982;&#x9759;&#x6001;&#x8BED;&#x53E5;&#x662F;&#x539F;&#x751F; SQL &#x6E90;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x9664;&#x975E;&#x4F60;&#x5341;&#x5206;&#x786E;&#x5B9A;&#x4F60;&#x7684; SQL &#x8BED;&#x53E5;&#x4E2D;&#x6CA1;&#x6709;&#x5305;&#x542B;&#x4EFB;&#x4F55;&#x4E00;&#x6B3E;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4E0D;&#x8981;&#x4F7F;&#x7528; RawLanguageDriver &#xFF01;&#x5426;&#x5219;&#x4F1A;&#x62A5;&#x9519;&#xFF01;&#xFF01;&#xFF01;&#x5148;&#x770B;&#x4E2A;&#x522B;&#x540D;&#x5F15;&#x7528;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;select id=&quot;findAll&quot;  resultType=&quot;map&quot; lang=&quot;RAW&quot; &gt;</span><br><span class="line">     select * from user</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- &#x522B;&#x540D;&#x6216;&#x5168;&#x9650;&#x5B9A;&#x7C7B;&#x540D;&#x90FD;&#x5141;&#x8BB8; --&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id=&quot;findAll&quot;  resultType=&quot;map&quot; lang=&quot;org.apache.ibatis.scripting.xmltags.XMLLanguageDriver&quot;&gt;</span><br><span class="line">     select * from user</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6846;&#x67B6;&#x5141;&#x8BB8;&#x6211;&#x4EEC;&#x901A;&#x8FC7; lang &#x5C5E;&#x6027;&#x624B;&#x5DE5;&#x6307;&#x5B9A;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#xFF0C;&#x4E0D;&#x6307;&#x5B9A;&#x5219;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x662F; lang = &#x201C;XML&#x201D;&#xFF0C;XML &#x4EE3;&#x8868; XMLLanguageDriver &#xFF0C;&#x5F53;&#x7136; lang &#x5C5E;&#x6027;&#x53EF;&#x4EE5;&#x662F;&#x6211;&#x4EEC;&#x5185;&#x7F6E;&#x7684;&#x522B;&#x540D;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x6211;&#x4EEC;&#x7684;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x5168;&#x9650;&#x5B9A;&#x540D;&#xFF0C;&#x4E0D;&#x8FC7;&#x503C;&#x5F97;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5F53;&#x8BED;&#x53E5;&#x4E2D;&#x542B;&#x6709;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x65F6;&#xFF0C;&#x5C31;&#x53EA;&#x80FD;&#x9009;&#x62E9;&#x4F7F;&#x7528; lang=&#x201D;XML&#x201D;&#xFF0C;&#x5426;&#x5219;&#x7A0B;&#x5E8F;&#x5728;&#x521D;&#x59CB;&#x5316;&#x6784;&#x4EF6;&#x65F6;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;## Cause: org.apache.ibatis.builder.BuilderException: </span><br><span class="line">## Dynamic content is not allowed when using RAW language</span><br><span class="line">## &#x52A8;&#x6001;&#x8BED;&#x53E5;&#x5185;&#x5BB9;&#x4E0D;&#x88AB;&#x539F;&#x751F;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x652F;&#x6301;&#xFF01;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6BB5;&#x9519;&#x8BEF;&#x63D0;&#x793A;&#x5176;&#x5B9E;&#x662F;&#x53D1;&#x751F;&#x5728; RawLanguageDriver &#x68C0;&#x67E5;&#x52A8;&#x6001; SQL &#x6E90;&#x65F6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class RawLanguageDriver extends XMLLanguageDriver { </span><br><span class="line"></span><br><span class="line">  // RAW &#x4E0D;&#x80FD;&#x5305;&#x542B;&#x52A8;&#x6001;&#x5185;&#x5BB9;</span><br><span class="line">  private void checkIsNotDynamic(SqlSource source) {</span><br><span class="line">    if (!RawSqlSource.class.equals(source.getClass())) {</span><br><span class="line">      throw new BuilderException(</span><br><span class="line">          &quot;Dynamic content is not allowed when using RAW language&quot;</span><br><span class="line">      );</span><br><span class="line">    }</span><br><span class="line">  } </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x81F3;&#x6B64;&#xFF0C;&#x57FA;&#x672C;&#x903B;&#x8F91;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x68B3;&#x7406;&#x6E05;&#x695A;&#xFF1A;&#x7A0B;&#x5E8F;&#x542F;&#x52A8;&#x521D;&#x59CB;&#x9636;&#x6BB5;&#xFF0C;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x521B;&#x5EFA; SQL &#x6E90;&#xFF0C;&#x800C;&#x8FD0;&#x884C;&#x65F6;&#xFF0C; SQL &#x6E90;&#x52A8;&#x6001;&#x89E3;&#x6790;&#x6784;&#x5EFA;&#x51FA; BoundSql &#x3002;</p>
<blockquote>
<p>&#x90A3;&#x4E48;&#x9664;&#x4E86;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x7684;&#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#xFF0C;&#x8FD8;&#x6709;&#x5176;&#x5B83;&#x5417;&#xFF1F;</p>
</blockquote>
<p>&#x7B54;&#x6848;&#x662F;&#xFF1A;&#x6709;&#xFF0C;&#x4F8B;&#x5982; Mybatis &#x6846;&#x67B6;&#x4E2D;&#x76EE;&#x524D;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; VelocityLanguageDriver &#x7684;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x3002;&#x76F8;&#x4FE1;&#x5927;&#x5BB6;&#x90FD;&#x5B66;&#x4E60;&#x8FC7; JSP &#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x4EBA;&#x5B66;&#x4E60;&#x8FC7;&#x5176;&#x5B83;&#x4E00;&#x4E9B;&#xFF08;&#x9875;&#x9762;&#xFF09;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x4F8B;&#x5982; freemark &#x548C; velocity &#xFF0C;&#x4E0D;&#x540C;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x5957;&#x6A21;&#x677F;&#x8BED;&#x8A00;&#x8BED;&#x6CD5;&#xFF0C;&#x800C;&#x5176;&#x4E2D; Mybatis &#x5C31;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528;&#x4E86; Velocity &#x6A21;&#x677F;&#x5F15;&#x64CE;&#x4F5C;&#x4E3A;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#xFF0C;&#x76EE;&#x524D;&#x867D;&#x7136; Mybatis &#x53EA;&#x662F;&#x5728;&#x6D4B;&#x8BD5;&#x7528;&#x4F8B;&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x544A;&#x8BC9;&#x4E86;&#x6211;&#x4EEC;&#xFF0C;&#x6846;&#x67B6;&#x5141;&#x8BB8;&#x81EA;&#x5B9A;&#x4E49;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x53EA;&#x662F; XML&#x3001;RAW &#x4E24;&#x79CD;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x4E2D;&#x4F7F;&#x7528;&#x7684; OGNL &#x8BED;&#x6CD5;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F; Velocity &#xFF08;&#x8BED;&#x6CD5;&#xFF09;&#xFF0C;&#x6216;&#x8005;&#x4F60;&#x81EA;&#x5DF1;&#x6240;&#x80FD;&#x5B9A;&#x4E49;&#x7684;&#x4E00;&#x5957;&#x6A21;&#x677F;&#x8BED;&#x8A00;&#xFF08;&#x540C;&#x65F6;&#x4F60;&#x5F97;&#x5B9A;&#x4E49;&#x4E00;&#x5957;&#x8BED;&#x6CD5;&#xFF09;&#x3002; &#x4F8B;&#x5982;&#x4EE5;&#x4E0B;&#x5C31;&#x662F; Mybatis &#x6846;&#x67B6;&#x4E2D;&#x4F7F;&#x7528;&#x5230;&#x7684; Velocity &#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x548C;&#x5BF9;&#x5E94;&#x7684; SQL &#x6E90;&#xFF0C;&#x5B83;&#x4EEC;&#x4F7F;&#x7528; Velocity &#x8BED;&#x6CD5;/&#x65B9;&#x5F0F;&#x89E3;&#x6790;&#x6784;&#x5EFA; BoundSql &#x5BF9;&#x8C61;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * Just a test case. Not a real Velocity implementation.</span><br><span class="line"> * &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6D4B;&#x8BD5;&#x793A;&#x4F8B;&#xFF0C;&#x8FD8;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x771F;&#x6B63;&#x7684; Velocity &#x65B9;&#x5F0F;&#x5B9E;&#x73B0;</span><br><span class="line"> */</span><br><span class="line">public class VelocityLanguageDriver implements LanguageDriver {</span><br><span class="line">     public SqlSource createSqlSource() {...}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class VelocitySqlSource implements SqlSource {</span><br><span class="line">     public BoundSql getBoundSql() {...}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x597D;&#xFF0C;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x7684;&#x57FA;&#x672C;&#x6982;&#x5FF5;&#x5927;&#x81F4;&#x5982;&#x6B64;&#x3002;&#x6211;&#x4EEC;&#x56DE;&#x8FC7;&#x5934;&#x518D;&#x8BE6;&#x7EC6;&#x770B;&#x770B;&#x52A8;&#x6001; SQL &#x6E90; SqlSource&#xFF0C;&#x4F5C;&#x4E3A;&#x8BED;&#x53E5;&#x5BF9;&#x8C61; MappedStatement &#x7684;&#x5C5E;&#x6027;&#xFF0C;&#x5728; <strong>&#x7A0B;&#x5E8F;&#x521D;&#x59CB;&#x6784;&#x5EFA;&#x9636;&#x6BB5;</strong>&#xFF0C;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x662F;&#x600E;&#x4E48;&#x521B;&#x5EFA;&#x5B83;&#x7684;&#x5462;&#xFF1F;&#x4E0D;&#x59A8;&#x6211;&#x4EEC;&#x5148;&#x770B;&#x770B;&#x5E38;&#x7528;&#x7684;&#x52A8;&#x6001; SQL &#x6E90;&#x5BF9;&#x8C61;&#x662F;&#x600E;&#x4E48;&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x5427;&#xFF01;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/ffc8a06a251c555e28efb1cc342bd7b20fa93f104e3eff6c0cc080e2ca6feef8" alt></p>
<p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x7A0B;&#x5E8F;&#x521D;&#x59CB;&#x6784;&#x5EFA;&#x9636;&#x6BB5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x6700;&#x7EC8;&#x8BED;&#x8A00;&#x9A71;&#x52A8;&#x901A;&#x8FC7;&#x8C03;&#x7528; XMLScriptBuilder &#x5BF9;&#x8C61;&#x6765;&#x521B;&#x5EFA; SQL &#x6E90;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// XML &#x8BED;&#x8A00;&#x9A71;&#x52A8;</span><br><span class="line">public class XMLLanguageDriver implements LanguageDriver {  </span><br><span class="line">  </span><br><span class="line">    // &#x901A;&#x8FC7;&#x8C03;&#x7528; XMLScriptBuilder &#x5BF9;&#x8C61;&#x6765;&#x521B;&#x5EFA; SQL &#x6E90;</span><br><span class="line">    @Override</span><br><span class="line">  	public SqlSource createSqlSource() {</span><br><span class="line">        // &#x5B9E;&#x4F8B;</span><br><span class="line">    	XMLScriptBuilder builder = new XMLScriptBuilder();</span><br><span class="line">    	// &#x89E3;&#x6790;</span><br><span class="line">        return builder.parseScriptNode();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x800C;&#x5728;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5C31;&#x5DF2;&#x7ECF;&#x4ECB;&#x7ECD;&#xFF0C; XMLScriptBuilder &#x5B9E;&#x4F8B;&#x521D;&#x59CB;&#x6784;&#x9020;&#x65F6;&#xFF0C;&#x4F1A;&#x521D;&#x59CB;&#x6784;&#x5EFA;&#x6240;&#x6709;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x5904;&#x7406;&#x5668;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// XML&#x811A;&#x672C;&#x6807;&#x7B7E;&#x6784;&#x5EFA;&#x5668;</span><br><span class="line">public class XMLScriptBuilder{</span><br><span class="line">    // &#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5904;&#x7406;&#x5668;&#x6C60;</span><br><span class="line">    private final Map&lt;String, NodeHandler&gt; nodeHandlerMap = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    // &#x6784;&#x9020;&#x5668;</span><br><span class="line">    public XMLScriptBuilder() { </span><br><span class="line">        initNodeHandlerMap();</span><br><span class="line">        //... &#x5176;&#x5B83;&#x521D;&#x59CB;&#x5316;&#x4E0D;&#x8D58;&#x8FF0;&#x4E5F;&#x4E0D;&#x91CD;&#x8981;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x52A8;&#x6001;&#x6807;&#x7B7E;&#x5904;&#x7406;&#x5668;</span><br><span class="line">    private void initNodeHandlerMap() {</span><br><span class="line">        nodeHandlerMap.put(&quot;trim&quot;, new TrimHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;where&quot;, new WhereHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;set&quot;, new SetHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;foreach&quot;, new ForEachHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;if&quot;, new IfHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;choose&quot;, new ChooseHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;when&quot;, new IfHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;otherwise&quot;, new OtherwiseHandler());</span><br><span class="line">        nodeHandlerMap.put(&quot;bind&quot;, new BindHandler());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7EE7; XMLScriptBuilder &#x521D;&#x59CB;&#x5316;&#x6D41;&#x7A0B;&#x4E4B;&#x540E;&#xFF0C;&#x89E3;&#x6790;&#x521B;&#x5EFA; SQL &#x6E90;&#x6D41;&#x7A0B;&#x518D;&#x5206;&#x4E3A;&#x4E24;&#x6B65;&#xFF1A;</p>
<p><strong>1&#x3001;&#x89E3;&#x6790;&#x52A8;&#x6001;&#x6807;&#x7B7E;</strong>&#xFF0C;&#x901A;&#x8FC7;&#x5224;&#x65AD;&#x6BCF;&#x4E00;&#x5757;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4F7F;&#x7528;&#x5BF9;&#x5E94;&#x7684;&#x6807;&#x7B7E;&#x5904;&#x7406;&#x5668;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x5C5E;&#x6027;&#x548C;&#x8BED;&#x53E5;&#x5904;&#x7406;&#xFF0C;&#x5E76;&#x6700;&#x7EC8;&#x653E;&#x7F6E;&#x5230;&#x6DF7;&#x5408; SQL &#x8282;&#x70B9;&#x6C60;&#x4E2D;&#xFF08;MixedSqlNode&#xFF09;&#xFF0C;&#x4EE5;&#x4F9B;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#x6784;&#x5EFA; BoundSql &#x65F6;&#x4F7F;&#x7528;&#x3002;</p>
<p><strong>2&#x3001;new SQL &#x6E90;</strong>&#xFF0C;&#x6839;&#x636E; SQL &#x662F;&#x5426;&#x6709;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x6216;&#x901A;&#x914D;&#x7B26;&#x5360;&#x4F4D;&#x7B26;&#x6765;&#x786E;&#x8BA4;&#x4EA7;&#x751F;&#x5BF9;&#x8C61;&#x7684;&#x9759;&#x6001;&#x6216;&#x52A8;&#x6001; SQL &#x6E90;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public SqlSource parseScriptNode() {</span><br><span class="line">    </span><br><span class="line">    // 1&#x3001;&#x89E3;&#x6790;&#x52A8;&#x6001;&#x6807;&#x7B7E; &#xFF0C;&#x5E76;&#x653E;&#x5230;&#x6DF7;&#x5408;SQL&#x8282;&#x70B9;&#x6C60;&#x4E2D;</span><br><span class="line">    MixedSqlNode rootSqlNode = parseDynamicTags(context);</span><br><span class="line">    </span><br><span class="line">    // 2&#x3001;&#x6839;&#x636E;&#x8BED;&#x53E5;&#x7C7B;&#x578B;&#xFF0C;new &#x51FA;&#x6765;&#x6700;&#x7EC8;&#x7684; SQL &#x6E90;</span><br><span class="line">    SqlSource sqlSource;</span><br><span class="line">    if (isDynamic) {</span><br><span class="line">      sqlSource = new DynamicSqlSource(configuration, rootSqlNode);</span><br><span class="line">    } else {</span><br><span class="line">      sqlSource = new RawSqlSource(configuration, rootSqlNode, parameterType);</span><br><span class="line">    }</span><br><span class="line">    return sqlSource;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x539F;&#x6765;&#x89E3;&#x6790;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x7684;&#x5DE5;&#x4F5C;&#x4EA4;&#x7ED9;&#x4E86; parseDynamicTags() &#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#x5BF9;&#x8C61;&#x7684;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x88AB;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x6DF7;&#x5408; SQL &#x8282;&#x70B9;&#x6C60;&#x4E2D;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6DF7;&#x5408; SQL &#x8282;&#x70B9;&#x6C60;</span><br><span class="line">public class MixedSqlNode implements SqlNode {</span><br><span class="line">    </span><br><span class="line">    // &#x6240;&#x6709;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#xFF1A;IF&#x3001;WHERE&#x3001;SET &#x7B49;</span><br><span class="line">    private final List&lt;SqlNode&gt; contents;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5148;&#x770B;&#x4E00;&#x4E0B; SqlNode &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x57FA;&#x672C;&#x6DB5;&#x76D6;&#x4E86;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x5904;&#x7406;&#x5668;&#x6240;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5230;&#x7684;&#x8282;&#x70B9;&#x5B9E;&#x4F8B;&#x3002;&#x800C;&#x5176;&#x4E2D;&#x6DF7;&#x5408; SQL &#x8282;&#x70B9; MixedSqlNode &#x4F5C;&#x7528;&#x4EC5;&#x662F;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x83B7;&#x53D6;&#x6BCF;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#x7684;&#x6240;&#x6709;&#x52A8;&#x6001;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#xFF0C;&#x4E8E;&#x662F;&#x5E94;&#x52BF;&#x800C;&#x751F;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7961dd26c994e81512ac8ac5809656c9d563edd611d45f879f7276a4092f0535" alt></p>
<p>&#x77E5;&#x9053;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5904;&#x7406;&#x5668;&#x53CA;&#x4EE5;&#x4E0A;&#x7684;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x540E;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x80FD;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#xFF0C;<strong>&#x5230;&#x8FBE;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;</strong>&#xFF0C;&#x6267;&#x884C;&#x5668;&#x4F1A;&#x8C03;&#x7528; SQL &#x6E90;&#x6765;&#x534F;&#x52A9;&#x6784;&#x5EFA; BoundSql &#x5BF9;&#x8C61;&#xFF0C;&#x800C; SQL &#x6E90;&#x7684;&#x6838;&#x5FC3;&#x5DE5;&#x4F5C;&#xFF0C;&#x5C31;&#x662F;&#x6839;&#x636E;&#x6BCF;&#x4E00;&#x5C0F;&#x6BB5;&#x6807;&#x7B7E;&#x7C7B;&#x578B;&#xFF0C;&#x5339;&#x914D;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;&#x4EE5;&#x89E3;&#x6790;&#x62FC;&#x63A5;&#x6BCF;&#x4E00;&#x5C0F;&#x6BB5; SQL &#x8BED;&#x53E5;&#x3002;</p>
<p><strong>&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x52A8;&#x6001; SQL &#x6E90;&#x83B7;&#x53D6; BoundSql &#x5BF9;&#x8C61; &#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x52A8;&#x6001; SQL &#x6E90;</span><br><span class="line">public class DynamicSqlSource implements SqlSource { </span><br><span class="line">   </span><br><span class="line">    // &#x8FD9;&#x91CC;&#x7684; rootSqlNode &#x5C5E;&#x6027;&#x5C31;&#x662F; MixedSqlNode </span><br><span class="line">    private final SqlNode rootSqlNode;</span><br><span class="line">  </span><br><span class="line">    @Override</span><br><span class="line">    public BoundSql getBoundSql(Object parameterObject) {</span><br><span class="line"> </span><br><span class="line">        // &#x52A8;&#x6001;SQL&#x6838;&#x5FC3;&#x89E3;&#x6790;&#x6D41;&#x7A0B;  </span><br><span class="line">        rootSqlNode.apply(...);  </span><br><span class="line">        </span><br><span class="line">        return boundSql;</span><br><span class="line"></span><br><span class="line">    } </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x7528; MixedSqlNode &#x7684; apply () &#x65B9;&#x6CD5;&#xFF0C;&#x5FAA;&#x73AF;&#x904D;&#x5386;&#x6BCF;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class MixedSqlNode implements SqlNode {</span><br><span class="line">    </span><br><span class="line">      // &#x6240;&#x6709;&#x52A8;&#x6001; SQL &#x6807;&#x7B7E;&#xFF1A;IF&#x3001;WHERE&#x3001;SET &#x7B49;</span><br><span class="line">      private final List&lt;SqlNode&gt; contents; </span><br><span class="line"></span><br><span class="line">      @Override</span><br><span class="line">      public boolean apply(...) {</span><br><span class="line"></span><br><span class="line">        // &#x5FAA;&#x73AF;&#x904D;&#x5386;&#xFF0C;&#x628A;&#x6BCF;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x89E3;&#x6790;&#x5206;&#x6D3E;&#x5230;&#x5177;&#x4F53;&#x7684;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x4E4B;&#x4E0A;</span><br><span class="line">        // &#x4F8B;&#x5982; &lt;if&gt; &#x8282;&#x70B9;&#x7684;&#x89E3;&#x6790;&#x4EA4;&#x7ED9; IfSqlNode</span><br><span class="line">        // &#x4F8B;&#x5982; &#x7EAF;&#x6587;&#x672C;&#x8282;&#x70B9;&#x7684;&#x89E3;&#x6790;&#x4EA4;&#x7ED9; StaticTextSqlNode</span><br><span class="line">        contents.forEach(node -&gt; node.apply(...));</span><br><span class="line">        return true;</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x9009;&#x62E9;&#x4E00;&#x4E24;&#x4E2A;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x7684;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x8FDB;&#x884C;&#x8BF4;&#x660E;&#xFF0C;&#x5176;&#x5B83;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x5904;&#x7406;&#x4E5F;&#x57FA;&#x672C;&#x96F7;&#x540C;&#x3002;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E0B; IF &#x6807;&#x7B7E;&#x8282;&#x70B9;&#x7684;&#x5904;&#x7406;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// IF &#x6807;&#x7B7E;&#x8282;&#x70B9;</span><br><span class="line">public class IfSqlNode implements SqlNode { </span><br><span class="line">    </span><br><span class="line">      private final ExpressionEvaluator evaluator;</span><br><span class="line">    </span><br><span class="line">      // &#x5B9E;&#x73B0;&#x903B;&#x8F91;</span><br><span class="line">      @Override</span><br><span class="line">      public boolean apply(DynamicContext context) {</span><br><span class="line">          </span><br><span class="line">        // evaluator &#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E; OGNL &#x8BED;&#x6CD5;&#x7684;&#x89E3;&#x6790;&#x6821;&#x9A8C;&#x7C7B;</span><br><span class="line">        if (evaluator.evaluateBoolean(test, context.getBindings())) {</span><br><span class="line">          contents.apply(context);</span><br><span class="line">          return true;</span><br><span class="line">        }</span><br><span class="line">        return false;</span><br><span class="line">      } </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>IF &#x6807;&#x7B7E;&#x8282;&#x70B9;&#x7684;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x901A;&#x8FC7;&#x89E3;&#x6790;&#x6821;&#x9A8C;&#x7C7B; ExpressionEvaluator &#x6765;&#x5BF9; IF &#x6807;&#x7B7E;&#x7684; test &#x5C5E;&#x6027;&#x5185;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x6821;&#x9A8C;&#xFF0C;&#x6EE1;&#x8DB3;&#x5219;&#x62FC;&#x63A5;&#xFF0C;&#x4E0D;&#x6EE1;&#x8DB3;&#x5219;&#x8DF3;&#x8FC7;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x770B; Trim &#x6807;&#x7B7E;&#x7684;&#x8282;&#x70B9;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#xFF0C;set &#x6807;&#x7B7E;&#x4E0E; where &#x6807;&#x7B7E;&#x7684;&#x5E95;&#x5C42;&#x5904;&#x7406;&#x90FD;&#x57FA;&#x4E8E;&#x6B64;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class TrimSqlNode implements SqlNode { </span><br><span class="line">    </span><br><span class="line">    // &#x6838;&#x5FC3;&#x5904;&#x7406;&#x65B9;&#x6CD5;</span><br><span class="line">    public void applyAll() {</span><br><span class="line">        </span><br><span class="line">        // &#x524D;&#x7F00;&#x667A;&#x80FD;&#x8865;&#x5145;&#x4E0E;&#x53BB;&#x9664;</span><br><span class="line">        applyPrefix(..); </span><br><span class="line">        </span><br><span class="line">        // &#x524D;&#x7F00;&#x667A;&#x80FD;&#x8865;&#x5145;&#x4E0E;&#x53BB;&#x9664;</span><br><span class="line">        applySuffix(..); </span><br><span class="line">    } </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x518D;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x7EAF;&#x6587;&#x672C;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x89E3;&#x6790;&#x5904;&#x7406;&#x6D41;&#x7A0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x7EAF;&#x6587;&#x672C;&#x6807;&#x7B7E;&#x8282;&#x70B9;&#x5B9E;&#x73B0;&#x7C7B;</span><br><span class="line">public class StaticTextSqlNode implements SqlNode {</span><br><span class="line">  </span><br><span class="line">    private final String text;</span><br><span class="line"></span><br><span class="line">    public StaticTextSqlNode(String text) {</span><br><span class="line">        this.text = text;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x8282;&#x70B9;&#x5904;&#x7406;&#xFF0C;&#x4EC5;&#x4EC5;&#x5C31;&#x662F;&#x7EAF;&#x7CB9;&#x7684;&#x8BED;&#x53E5;&#x62FC;&#x63A5;</span><br><span class="line">    @Override</span><br><span class="line">    public boolean apply(DynamicContext context) {</span><br><span class="line">        context.appendSql(text);</span><br><span class="line">        return true;</span><br><span class="line">  	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5230;&#x8FD9;&#x91CC;&#xFF0C;&#x52A8;&#x6001; SQL &#x7684;&#x5E95;&#x5C42;&#x89E3;&#x6790;&#x8FC7;&#x7A0B;&#x6211;&#x4EEC;&#x57FA;&#x672C;&#x8BB2;&#x89E3;&#x5B8C;&#xFF0C;&#x5197;&#x957F;&#x4E86;&#x4E9B;&#xFF0C;&#x4F46;&#x6D41;&#x7A0B;&#x4E0A;&#x5927;&#x81F4;&#x7B97;&#x5B8C;&#x6574;&#xFF0C;&#x6709;&#x9057;&#x6F0F;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x56DE;&#x5934;&#x518D;&#x8865;&#x5145;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2eafa9749e9da13d4d3475bbb23207ad7a4e8d057ccfc8dbd34a190bb661de87" alt></p>
<h3 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h3><p>&#x4E0D;&#x77E5;&#x4E0D;&#x89C9;&#x4E2D;&#xFF0C;&#x6211;&#x53C8;&#x662F;&#x8FD9;&#x4E48;&#x5DE8;&#x7BC7;&#x5E45;&#x7684;&#x8BB2;&#x89E3;&#x5256;&#x6790;&#xFF0C;&#x786E;&#x5B9E;&#x4E0D;&#x592A;&#x9002;&#x5408;&#x788E;&#x7247;&#x5316;&#x65F6;&#x95F4;&#x9605;&#x8BFB;&#xFF0C;&#x4E0D;&#x8FC7;&#x8BDD;&#x8BF4;&#x56DE;&#x6765;&#xFF0C;&#x6BD5;&#x7ADF;&#x6B64;&#x6587;&#x5C5E;&#x4E8E; Mybatis &#x5168;&#x89E3;&#x7CFB;&#x5217;&#xFF0C;&#x4F5C;&#x4E3A;&#x5B66;&#x7814;&#x8005;&#x8FD8;&#x662F;&#x5EFA;&#x8BAE;&#x6DF1;&#x8C19;&#x5176;&#x4E2D;&#xFF0C;&#x5BF9;&#x5F80;&#x540E;&#x4F17;&#x591A;&#x6846;&#x67B6;&#x6280;&#x672F;&#x7684;&#x5B66;&#x4E60;&#x5FC5;&#x6709;&#x5E2E;&#x52A9;&#x3002;&#x672C;&#x6587;&#x4E2D;&#x6211;&#x4EEC;&#x5F88;&#x591A;&#x52A8;&#x6001; SQL &#x7684;&#x4ECB;&#x7ECD;&#x57FA;&#x672C;&#x90FD;&#x4F7F;&#x7528; XML &#x914D;&#x7F6E;&#x65B9;&#x5F0F;&#xFF0C;&#x5F53;&#x7136;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x52A8;&#x6001; SQL &#x4E5F;&#x662F;&#x652F;&#x6301;&#x7684;&#xFF0C;&#x52A8;&#x6001; SQL &#x7684;&#x8BED;&#x6CD5;&#x4E66;&#x5199;&#x540C; XML &#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;&#x9700;&#x8981;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x524D;&#x540E;&#x6DFB;&#x52A0; script &#x6807;&#x7B7E;&#x7533;&#x660E;&#x8BE5;&#x8BED;&#x53E5;&#x4E3A;&#x52A8;&#x6001; SQL &#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class UserDao {</span><br><span class="line">   </span><br><span class="line">    /**</span><br><span class="line">     * &#x66F4;&#x65B0;&#x7528;&#x6237;</span><br><span class="line">     */</span><br><span class="line">    @Select(</span><br><span class="line">        &quot;&lt;script&gt;&quot;+</span><br><span class="line">        &quot;   UPDATE user   &quot;+</span><br><span class="line">        &quot;   &lt;trim prefix=\&quot;SET\&quot; prefixOverrides=\&quot;,\&quot;&gt; &quot;+</span><br><span class="line">        &quot;       &lt;if test=\&quot;username != null and username != &apos;&apos;\&quot;&gt; &quot;+</span><br><span class="line">        &quot;           , username = #{username} &quot;+</span><br><span class="line">        &quot;       &lt;/if&gt; &quot;+</span><br><span class="line">        &quot;   &lt;/trim&gt; &quot;+</span><br><span class="line">        &quot;   where id = ${id}&quot;</span><br><span class="line">        &quot;&lt;/script&gt;&quot;</span><br><span class="line">    )</span><br><span class="line">    void updateUser( User user);</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x79CD;&#x52A8;&#x6001; SQL &#x5199;&#x6CD5;&#x53EF;&#x8BFB;&#x6027;&#x8F83;&#x5DEE;&#xFF0C;&#x5E76;&#x4E14;&#x7EF4;&#x62A4;&#x8D77;&#x6765;&#x4E5F;&#x633A;&#x784C;&#x624B;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4E2A;&#x4EBA;&#x662F;&#x9752;&#x7750; xml &#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x8BED;&#x53E5;&#xFF0C;&#x4E00;&#x76F4;&#x8FFD;&#x6C42;&#x89E3;&#x8026;&#xFF0C;&#x5927;&#x9053;&#x4E5F;&#x81F3;&#x7B80;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x4E5F;&#x6709;&#x5F88;&#x591A;&#x56E2;&#x961F;&#x548C;&#x9879;&#x76EE;&#x90FD;&#x5728;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x65B9;&#x5F0F;&#x5F00;&#x53D1;&#xFF0C;&#x8FD9;&#x4E9B;&#x6CA1;&#x6709;&#x7EDD;&#x5BF9;&#xFF0C;&#x8FD8;&#x662F;&#x5F97;&#x7ED3;&#x5408;&#x81EA;&#x5DF1;&#x7684;&#x5B9E;&#x9645;&#x9879;&#x76EE;&#x60C5;&#x51B5;&#x4E0E;&#x56E2;&#x961F;&#x7B49;&#x53BB;&#x505A;&#x53D6;&#x820D;&#x3002;</p>
<blockquote>
<p>&#x672C;&#x7BC7;&#x5B8C;&#xFF0C;&#x672C;&#x7CFB;&#x5217;&#x4E0B;&#x4E00;&#x7BC7;&#x6211;&#x4EEC;&#x8BB2;&#x300A; <strong>Mybatis&#x7CFB;&#x5217;&#x5168;&#x89E3;&#xFF08;&#x4E5D;&#xFF09;&#xFF1A;Mybatis&#x7684;&#x590D;&#x6742;&#x6620;&#x5C04;</strong> &#x300B;&#x3002;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7f5f84a67f85d193fba7148dfade32ffb1e8f1cdc183a8d2aab008356d1e2978" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/4da2108b8c0b5a066415b8493438bc42c323ef640f053a0cfebdd2b9e35fbe05" alt></p>
<blockquote>
<p>&#x6587;&#x7AE0;&#x6301;&#x7EED;&#x66F4;&#x65B0;&#xFF0C;&#x5FAE;&#x4FE1;&#x641C;&#x7D22;&#x300C;<strong>&#x6F58;&#x6F58;&#x548C;&#x4ED6;&#x7684;&#x670B;&#x53CB;&#x4EEC;</strong>&#x300D;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x9605;&#x8BFB;&#xFF0C;&#x968F;&#x65F6;&#x6709;&#x60CA;&#x559C;&#x3002;&#x672C;&#x6587;&#x4F1A;&#x5728; <strong>GitHub</strong> <a href="/external_links/789c724ec93e2abd9cc24f5808f02305.html" target="blank" rel="noopener">github.com/JavaWorld</a> &#x6536;&#x5F55;&#xFF0C;&#x5173;&#x4E8E;&#x70ED;&#x817E;&#x817E;&#x7684;&#x6280;&#x672F;&#x3001;&#x6846;&#x67B6;&#x3001;&#x9762;&#x7ECF;&#x3001;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3001;&#x6478;&#x9C7C;&#x6280;&#x5DE7;&#x3001;&#x6559;&#x7A0B;&#x3001;&#x89C6;&#x9891;&#x3001;&#x6F2B;&#x753B;&#x7B49;&#x7B49;&#x7B49;&#x7B49;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x4F1A;&#x4EE5;&#x6700;&#x7F8E;&#x7684;&#x59FF;&#x52BF;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x9001;&#x8FBE;&#xFF0C;&#x6B22;&#x8FCE; Star ~ &#x6211;&#x4EEC;&#x672A;&#x6765; <strong>&#x4E0D;&#x6B62;&#x6587;&#x7AE0;</strong>&#xFF01;&#x60F3;&#x8FDB;&#x8BFB;&#x8005;&#x7FA4;&#x7684;&#x670B;&#x53CB;&#x6B22;&#x8FCE;&#x64A9;&#x6211;&#x4E2A;&#x4EBA;&#x53F7;&#xFF1A;panshenlian&#xFF0C;&#x5907;&#x6CE8;&#x300C;<strong>&#x52A0;&#x7FA4;</strong>&#x300D;&#x6211;&#x4EEC;&#x7FA4;&#x91CC;&#x7545;&#x804A;&#xFF0C; <strong>BIU ~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/96db3b89e8fdba3c39ca8b554333d0821ccd619b3882aca299efdf1251fbd5ce" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/f2512a8a2057870f7d0aa3672a71a9a5.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935340555174051853.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935340555174051853.html" itemprop="url">ArraysSort()中的那些排序算法 引入 排序稳定性</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T16:23:58+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x672C;&#x6587;&#x57FA;&#x4E8E;<strong>JDK 1.8.0_211</strong>&#x64B0;&#x5199;&#xFF0C;&#x57FA;&#x4E8E;java.util.Arrays.sort()&#x65B9;&#x6CD5;&#x6D45;&#x8C08;&#x76EE;&#x524D;Java&#x6240;&#x7528;&#x5230;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x4EC5;&#x4E2A;&#x4EBA;&#x89C1;&#x89E3;&#x548C;&#x7B14;&#x8BB0;&#xFF0C;&#x82E5;&#x6709;&#x95EE;&#x9898;&#x6B22;&#x8FCE;&#x6307;&#x8BC1;&#xFF0C;&#x7740;&#x91CD;&#x4ECB;&#x7ECD;&#x5176;&#x4E2D;&#x7684;TimSort&#x6392;&#x5E8F;&#xFF0C;&#x5176;&#x6E90;&#x4E8E;Python&#xFF0C;&#x5E76;&#x4E8E;JDK1.7&#x5F15;&#x5165;Java&#x4EE5;&#x66FF;&#x4EE3;&#x539F;&#x6709;&#x7684;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x3002;</p>
</blockquote>
<h1 id="&#x5F15;&#x5165;"><a href="#&#x5F15;&#x5165;" class="headerlink" title="&#x5F15;&#x5165;"></a>&#x5F15;&#x5165;</h1><p>Arrays.Sort&#x65B9;&#x6CD5;&#x6240;&#x7528;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x4E3B;&#x8981;&#x6D89;&#x53CA;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#xFF1A;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF08;DualPivotQuicksort&#xFF09;&#x3001;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#xFF08;MergeSort)&#x3001;TimSort&#xFF0C;&#x4E5F;&#x540C;&#x65F6;&#x5305;&#x542B;&#x4E86;&#x4E00;&#x4E9B;&#x975E;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF1A;&#x4F8B;&#x5982;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x3002;&#x5176;<strong>&#x5177;&#x4F53;&#x6700;&#x7EC8;&#x4F7F;&#x7528;&#x54EA;&#x4E00;&#x79CD;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x901A;&#x5E38;&#x6839;&#x636E;&#x7C7B;&#x578B;&#x4EE5;&#x53CA;&#x8F93;&#x5165;&#x957F;&#x5EA6;&#x6765;&#x52A8;&#x6001;&#x6289;&#x62E9;</strong>&#x3002;</p>
<ul>
<li>&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#x4E3A;&#x57FA;&#x7840;&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x8F85;&#x4EE5;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public static void sort(int[] a) {</span><br><span class="line">    DualPivotQuicksort.sort(a, 0, a.length - 1, null, 0, 0);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x7C7B;&#x578B;&#x4E3A;&#x5305;&#x88C5;&#x7C7B;&#x578B;&#x65F6;&#xFF0C;&#x91C7;&#x7528;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x6216;TimSort&#xFF08;&#x9664;&#x975E;&#x7ECF;&#x8FC7;&#x7279;&#x6B8A;&#x7684;&#x914D;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x9ED8;&#x8BA4;&#x91C7;&#x7528;TimSort&#xFF09;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public static void sort(Object[] a) {</span><br><span class="line">    if (LegacyMergeSort.userRequested)</span><br><span class="line">      legacyMergeSort(a);</span><br><span class="line">  else</span><br><span class="line">    ComparableTimSort.sort(a, 0, a.length, null, 0, 0);</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">public static &lt;T&gt; void sort(T[] a, Comparator&lt;? super T&gt; c) {</span><br><span class="line">    if (c == null) {</span><br><span class="line">        sort(a);</span><br><span class="line">  } else {</span><br><span class="line">        if (LegacyMergeSort.userRequested)</span><br><span class="line">            legacyMergeSort(a, c);</span><br><span class="line">    else</span><br><span class="line">       TimSort.sort(a, 0, a.length, c, null, 0, 0);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"> </span><br><span class="line">/** To be removed in a future release. */</span><br><span class="line"> private static &lt;T&gt; void legacyMergeSort(T[] a, Comparator&lt;? super T&gt; c) {</span><br><span class="line">  T[] aux = a.clone();</span><br><span class="line">  if (c==null)</span><br><span class="line">      mergeSort(aux, a, 0, a.length, 0);</span><br><span class="line">  else</span><br><span class="line">    mergeSort(aux, a, 0, a.length, 0, c);</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<h1 id="&#x6392;&#x5E8F;&#x7A33;&#x5B9A;&#x6027;"><a href="#&#x6392;&#x5E8F;&#x7A33;&#x5B9A;&#x6027;" class="headerlink" title="&#x6392;&#x5E8F;&#x7A33;&#x5B9A;&#x6027;"></a>&#x6392;&#x5E8F;&#x7A33;&#x5B9A;&#x6027;</h1><p>&#x5047;&#x5B9A;&#x5728;&#x5F85;&#x6392;&#x5E8F;&#x7684;&#x8BB0;&#x5F55;&#x5E8F;&#x5217;&#x4E2D;&#xFF0C;&#x5B58;&#x5728;&#x591A;&#x4E2A;&#x5177;&#x6709;<strong><em>&#x76F8;&#x540C;&#x7684;&#x5173;&#x952E;&#x5B57;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x82E5;&#x7ECF;&#x8FC7;&#x6392;&#x5E8F;&#xFF0C;&#x8FD9;&#x4E9B;&#x8BB0;&#x5F55;&#x7684;&#x76F8;&#x5BF9;&#x6B21;&#x5E8F;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;</em></strong>&#xFF0C;&#x5373;&#x5728;&#x539F;&#x5E8F;&#x5217;&#x4E2D;&#xFF0C;r[i] = r[j]&#xFF0C;&#x4E14; r[i] &#x5728; r[j] &#x4E4B;&#x524D;&#xFF0C;&#x800C;&#x5728;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x5E8F;&#x5217;&#x4E2D;&#xFF0C;r[i] &#x4ECD;&#x5728; r[j] &#x4E4B;&#x524D;&#xFF0C;&#x5219;&#x79F0;&#x8FD9;&#x79CD;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x662F;&#x7A33;&#x5B9A;&#x7684;&#xFF1B;&#x5426;&#x5219;&#x79F0;&#x4E3A;&#x4E0D;&#x7A33;&#x5B9A;&#x7684;&#x3002;</p>
<p><strong>&#x7A33;&#x5B9A;&#x6027;&#x7684;&#x542B;&#x4E49;&#xFF1A;</strong>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x4E8C;&#x6B21;&#x6392;&#x5E8F;&#x540E;&#x4FDD;&#x6301;&#x539F;&#x6709;&#x6392;&#x5E8F;&#x7684;&#x610F;&#x4E49;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5230;&#x7A33;&#x5B9A;&#x6027;&#x7684;&#x7B97;&#x6CD5;</p>
<p><strong>&#x4F8B;&#x5B50;&#xFF1A;</strong>&#x6211;&#x4EEC;&#x8981;&#x5BF9;&#x4E00;&#x7EC4;&#x5546;&#x54C1;&#x6392;&#x5E8F;&#xFF0C;&#x5546;&#x54C1;&#x5B58;&#x5728;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#xFF1A;&#x4EF7;&#x683C;&#x548C;&#x9500;&#x91CF;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x6309;&#x7167;&#x4EF7;&#x683C;&#x4ECE;&#x9AD8;&#x5230;&#x4F4E;&#x6392;&#x5E8F;&#x540E;&#xFF0C;&#x8981;&#x518D;&#x6309;&#x7167;&#x9500;&#x91CF;&#x5BF9;&#x5176;&#x6392;&#x5E8F;&#xFF0C;&#x8FD9;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x4FDD;&#x8BC1;&#x9500;&#x91CF;&#x76F8;&#x540C;&#x7684;&#x5546;&#x54C1;&#x4ECD;&#x4FDD;&#x6301;&#x4EF7;&#x683C;&#x4ECE;&#x9AD8;&#x5230;&#x4F4E;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x7A33;&#x5B9A;&#x6027;&#x7B97;&#x6CD5;&#x3002;</p>
<h1 id="&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x4E0E;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;"><a href="#&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x4E0E;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;" class="headerlink" title="&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x4E0E;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;"></a>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x4E0E;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</h1><h2 id="&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7B80;&#x4ECB;"><a href="#&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7B80;&#x4ECB;" class="headerlink" title="&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7B80;&#x4ECB;"></a>&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7B80;&#x4ECB;</h2><p><strong>&#x5355;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</strong> &#x5373;&#x4E3A;&#x6211;&#x4EEC;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x4E00;&#x79CD;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x65B9;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x9009;&#x53D6;&#x4E00;&#x4E2A;&#x57FA;&#x51C6;&#x503C;&#xFF08;pivot&#xFF09;&#xFF0C;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5212;&#x5206;&#x4E3A;&#x4E24;&#x90E8;&#x5206;&#xFF1A;&#x5927;&#x4E8E;pivot &#x548C; &#x5C0F;&#x4E8E;pivot&#xFF0C;&#x518D;&#x5BF9;&#x8FD9;&#x4E24;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x5355;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x2026; &#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5BF9;&#x4E8E;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x4E2D;&#x6709;&#x5F88;&#x591A;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x65F6;&#x6548;&#x7387;&#x4E0D;&#x592A;&#x7406;&#x60F3;&#x3002;</p>
<p><strong>&#x5355;&#x8F74;&#x4E09;&#x53D6;&#x6837;&#x5207;&#x5206;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</strong> &#x4F5C;&#x4E3A;&#x5355;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#x7684;&#x4F18;&#x5316;&#x7248;&#x672C;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x4F18;&#x5316;&#x76F8;&#x540C;&#x5143;&#x7D20;&#x8FC7;&#x591A;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x5FEB;&#x6392;&#x6548;&#x7387;&#xFF0C;&#x540C;&#x6837;&#x9009;&#x53D6;&#x4E00;&#x4E2A;&#x57FA;&#x51C6;&#x503C;&#xFF0C;&#x4F46;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5212;&#x5206;&#x4E09;&#x90E8;&#x5206;&#xFF1A; &#x5927;&#x4E8E;pivot&#x3001;&#x7B49;&#x4E8E;pivot&#x3001;&#x5927;&#x4E8E;pivot&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/219f050b5f4b97862e6f071530e46df3867951b3f5e806fcf8c3672bb3b04fda" alt></p>
<p><strong>&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;</strong>&#x9009;&#x53D6;&#x4E24;&#x4E2A; &#x57FA;&#x51C6;&#x503C;pivot1&#xFF0C;pivot2&#xFF0C;&#x4E14;&#x4FDD;&#x8BC1;pivot1&lt;=pivot2&#xFF0C;&#x5176;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x4E0E;&#x4E09;&#x53D6;&#x6837;&#x5207;&#x5206;&#x7C7B;&#x4F3C;&#xFF0C;&#x4E0D;&#x8FC7;&#x65F6;&#x5C06;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x5212;&#x5206;&#x4EE5;&#x4E0B;&#x4E09;&#x90E8;&#x5206;&#xFF1A;&#x5C0F;&#x4E8E;pivot&#xFF0C;&#x4ECB;&#x4E8E;pivot1&#x4E0E;pivot2&#x4E4B;&#x95F4;&#xFF0C;&#x5927;&#x4E8E;pivot2&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/9a32fec5acdac56a9f83bcaadb0a154508f6c9c88136fb4025122822400a40e5" alt></p>
<h2 id="DualPivotQuicksort&#x5B9E;&#x73B0;&#x4F18;&#x5316;"><a href="#DualPivotQuicksort&#x5B9E;&#x73B0;&#x4F18;&#x5316;" class="headerlink" title="DualPivotQuicksort&#x5B9E;&#x73B0;&#x4F18;&#x5316;"></a>DualPivotQuicksort&#x5B9E;&#x73B0;&#x4F18;&#x5316;</h2><p>Java&#x5728;&#x5B9E;&#x73B0;DualPivotQuickSort&#x65F6;&#xFF0C;&#x5E76;&#x672A;&#x76F2;&#x76EE;&#x4F7F;&#x7528;&#x53CC;&#x8F74;&#x5FEB;&#x901F;&#x6392;&#x5E8F;&#xFF0C;&#x800C;&#x662F;<strong>&#x57FA;&#x4E8E;&#x8F93;&#x5165;&#x957F;&#x5EA6;&#x9009;&#x53D6;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;</strong>&#x3002;</p>
<p>&#xFF08;1&#xFF09;&#x9488;&#x5BF9;<strong>int&#x3001;long&#x3001;float&#x3001;double&#x56DB;&#x79CD;&#x7C7B;&#x578B;</strong>&#xFF0C;&#x8DDF;&#x636E;&#x957F;&#x5EA6;&#x9009;&#x53D6;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5C0F;&#x4E8E;<strong>47</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x63D2;&#x5165;&#x6392;&#x5E8F;</strong></li>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5C0F;&#x4E8E;<strong>286</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x53CC;&#x8F74;&#x5FEB;&#x6392;</strong></li>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5927;&#x4E8E;<strong>286</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x5F52;&#x5E76;&#x6392;&#x5E8F;</strong></li>
</ul>
<p>&#x6211;&#x4EEC;&#x6682;&#x4E14;&#x5C06;&#x5176;&#x79F0;&#x4E4B;&#x4E3A;&#x4E00;&#x4E2A;<strong>&#x6807;&#x51C6;&#x7684;&#x53CC;&#x8F74;&#x5FEB;&#x6392;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;static void sort(int[] a, int left, int right,</span><br><span class="line">                     int[] work, int workBase, int workLen) {</span><br><span class="line">        // Use Quicksort on small arrays</span><br><span class="line">        if (right - left &lt; QUICKSORT_THRESHOLD) {</span><br><span class="line">            sort(a, left, right, true);</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line">        // Use MergingSort</span><br><span class="line">       doMerge();</span><br><span class="line"> }</span><br><span class="line"></span><br><span class="line">private static void sort(int[] a, int left, int right, boolean leftmost) {</span><br><span class="line">      // Use insertion sort on tiny arrays</span><br><span class="line">      if (length &lt; INSERTION_SORT_THRESHOLD) {</span><br><span class="line">            doInertionSort();</span><br><span class="line">      }</span><br><span class="line">      doDualPivotQuickSort();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>




<p>&#xFF08;2&#xFF09;&#x9488;&#x5BF9;<strong>short&#x3001;char&#x4E24;&#x79CD;&#x7C7B;&#x578B;</strong>&#xFF0C;&#x6839;&#x636E;&#x957F;&#x5EA6;&#x9009;&#x53D6;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5C0F;&#x4E8E;<strong>3200</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x6807;&#x51C6;**</strong>&#x53CC;&#x8F74;&#x5FEB;&#x6392;**&#xFF1B;</li>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5927;&#x4E8E;<strong>3200</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#xFF08;**</strong>CountingSort&#xFF09;**</li>
</ul>
<p>&#xFF08;3&#xFF09;&#x9488;&#x5BF9;<strong>byte&#x7C7B;&#x578B;</strong>&#xFF0C;&#x6839;&#x636E;&#x957F;&#x5EA6;&#x9009;&#x53D6;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5C0F;&#x4E8E;<strong>29</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x63D2;&#x5165;&#x6392;&#x5E8F;</strong>&#xFF1B;</li>
<li>&#x5F53;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x76EE;&#x5927;&#x4E8E;<strong>29</strong>&#xFF0C;&#x91C7;&#x7528;<strong>&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#xFF08;**</strong>CountingSort&#xFF09;**</li>
</ul>
<h1 id="&#x975E;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;-&#x8BA1;&#x6570;&#x6392;&#x5E8F;"><a href="#&#x975E;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;-&#x8BA1;&#x6570;&#x6392;&#x5E8F;" class="headerlink" title="&#x975E;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;-&#x8BA1;&#x6570;&#x6392;&#x5E8F;"></a>&#x975E;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;-&#x8BA1;&#x6570;&#x6392;&#x5E8F;</h1><p>&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x4E0E;&#x4F20;&#x7EDF;&#x7684;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x4E0D;&#x540C;&#xFF0C;&#x5176;&#x4E0D;&#x901A;&#x8FC7;&#x6BD4;&#x8F83;&#x6765;&#x6392;&#x5E8F;&#x3002;&#x6211;&#x4EEC;<strong>&#x5E38;&#x89C1;&#x7684;&#x975E;&#x57FA;&#x4E8E;&#x6BD4;&#x8F83;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x6709;&#x4E09;&#x79CD;&#xFF1A;&#x6876;&#x6392;&#x5E8F;&#x3001;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#xFF08;&#x7279;&#x6B8A;&#x6876;&#x6392;&#x5E8F;&#xFF09;&#x3001;&#x57FA;&#x6570;&#x6392;&#x5E8F;</strong>&#xFF0C;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x9010;&#x4E2A;&#x53BB;&#x4E86;&#x89E3;&#xFF0C;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x8BB2;&#x89E3;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x3002;</p>
<h2 id="&#x4F7F;&#x7528;&#x524D;&#x63D0;"><a href="#&#x4F7F;&#x7528;&#x524D;&#x63D0;" class="headerlink" title="&#x4F7F;&#x7528;&#x524D;&#x63D0;"></a>&#x4F7F;&#x7528;&#x524D;&#x63D0;</h2><p>&#x4F7F;&#x7528;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x5F85;&#x6392;&#x5E8F;&#x5185;&#x5BB9;&#x9700;&#x8981;&#x662F;&#x4E00;&#x4E2A;&#x6709;&#x754C;&#x7684;&#x5E8F;&#x5217;&#xFF0C;&#x4E14;&#x53EF;&#x7528;&#x6574;&#x6570;&#x8868;&#x793A;</p>
<h2 id="&#x5F15;&#x5165;-1"><a href="#&#x5F15;&#x5165;-1" class="headerlink" title="&#x5F15;&#x5165;"></a>&#x5F15;&#x5165;</h2><p>&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x987E;&#x540D;&#x601D;&#x4E49;&#x5373;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#xFF0C;&#x901A;&#x8FC7;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x5730;&#x5740;&#x8868;&#x793A;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x7684;&#x503C;&#xFF0C;&#x6570;&#x7EC4;&#x7684;&#x503C;&#x8868;&#x793A;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;&#x6700;&#x540E;&#x518D;&#x5C06;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#x53CD;&#x5411;&#x8F93;&#x51FA;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x6392;&#x5E8F;&#xFF0C;&#x89C1;&#x4E0B;&#x65B9;&#x793A;&#x4F8B;&#xFF1A;</p>
<p><strong>&#x5047;&#x8BBE;&#xFF1A;</strong>&#x4E00;&#x7EC4;&#x8303;&#x56F4;&#x5728; 0~10 &#x4E4B;&#x95F4;&#x7684;&#x6570;&#x5B57;&#xFF0C;9, 3, 5, 4, 9, 1, 2, 7, 8,1,3, 6, 5, 3, 4, 0, 10, 9, 7, 9</p>
<p><strong>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;</strong>&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x6765;&#x7EDF;&#x8BA1;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x51FA;&#x73B0;&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;0~10&#xFF0C;&#x5219;&#x5EFA;&#x7ACB;&#x5982;&#x4E0B;&#x6570;&#x7EC4; <strong>Count</strong>&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/de5ebc4595bc6c9f548fc091797dfc97205cf83134241067bbdce17e739de5d5" alt></p>
<p><strong>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;</strong>&#x904D;&#x5386;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#xFF0C;&#x5C06;&#x83B7;&#x53D6;&#x5230;&#x7684;&#x5185;&#x5BB9;&#x653E;&#x7F6E;&#x5230;Count &#x6570;&#x7EC4;&#x5BF9;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x4F7F;&#x5F53;&#x524D;&#x4F4D;&#x7F6E;+1&#xFF0C;&#x4F8B;&#x5982;&#x5F53;&#x524D;&#x4E3A;9&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/82be9f3eefdc1f49698da35c54b98d5f3fab8e587db8db50434b182b075f9c2e" alt></p>
<p>&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#xFF0C;&#x904D;&#x5386;&#x5B8C;&#x6574;&#x4E2A;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#xFF0C;&#x5219;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x72B6;&#x6001;&#x7684;Count&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/2d3ebffe846a94c73ea11e3e0f955e9dc05c9d6adde77767e398cb45232e955e" alt></p>
<p>&#x8FD9;&#x65F6;&#x5019;&#xFF0C;Count&#x4E2D;&#x8BB0;&#x5F55;&#x4E86;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x5C06;Count&#x6570;&#x7EC4;&#x6309;&#x6B21;&#x6570;&#x8F93;&#x51FA;&#x5373;&#x53EF;&#x5F97;&#x5230;&#x6700;&#x7EC8;&#x6392;&#x5E8F;&#x8F93;&#x51FA;&#xFF1A;</p>
<p>0, 1, 1, 2, 3, 3, 3, 4, 4, 5, 5, 6, 7, 7, 8, 9, 9, 9, 9, 10</p>
<h2 id="&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x4E0E;&#x6700;&#x7EC8;&#x5B9E;&#x73B0;"><a href="#&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x4E0E;&#x6700;&#x7EC8;&#x5B9E;&#x73B0;" class="headerlink" title="&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x4E0E;&#x6700;&#x7EC8;&#x5B9E;&#x73B0;"></a>&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x4E0E;&#x6700;&#x7EC8;&#x5B9E;&#x73B0;</h2><p>&#x6839;&#x636E;&#x4E0A;&#x9762;&#x7A33;&#x5B9A;&#x6027;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x5927;&#x5BB6;&#x4E0D;&#x96BE;&#x53D1;&#x73B0;&#x4E0A;&#x9762;&#x7684;&#x5B9E;&#x73B0;&#x8FC7;&#x7A0B;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x4E0A;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x7A33;&#x5B9A;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4E0A;&#x9762;&#x90A3;&#x4E2A;&#x4F8B;&#x5B50;&#x6765;&#x5F15;&#x51FA;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x6700;&#x7EC8;&#x5B9E;&#x73B0;&#x3002;</p>
<p><strong>&#x4F8B;&#x5B50;&#xFF1A;</strong>&#x8F93;&#x5165;&#x6570;&#x7EC4;  [ 0&#xFF0C;9&#xFF0C;5&#xFF0C;4&#xFF0C;5 ]&#xFF0C;&#x8303;&#x56F4;0 ~ 9</p>
<p><strong>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;</strong>&#x5C06;Count&#x6570;&#x7EC4;&#x4E2D;&#x6240;&#x8BB0;&#x5F55;&#x7684;&#x5185;&#x5BB9;&#x8FDB;&#x884C;&#x66F4;&#x6539;&#xFF0C;&#x7531;&#x8BB0;&#x5F55;<strong>&#x5F53;&#x524D;&#x5143;&#x7D20;&#x7684;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;</strong> &#x4FEE;&#x6B63;&#x4E3A;  <strong>&#x8BB0;&#x5F55;&#x5F53;&#x524D;&#x7D22;&#x5F15;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#x548C;&#x5F53;&#x524D;&#x7D22;&#x5F15;&#x4E4B;&#x524D;&#x6240;&#x6709;&#x5143;&#x7D20;&#x6B21;&#x6570;&#x7684;&#x548C;</strong>&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x7D22;&#x5F15;&#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x503C;&#x5C31;&#x662F;&#x5176;&#x771F;&#x5B9E;&#x7684;&#x6392;&#x5E8F;&#x540E;&#x6392;&#x4F4D;&#x6570;&#xFF0C;&#x4F8B;&#x5982;9&#x7684;&#x503C;&#x4E3A;5&#xFF0C;&#x5219;9&#x7684;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x4F4D;&#x7F6E;&#x5C31;&#x662F;&#x7B2C;5&#x4F4D;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/15ab0ac4e7aeb94376a1fe9f8e2510b709be75a8155352127b6c09bae6fa767b" alt></p>
<p><strong>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;</strong>&#x6211;&#x4EEC;&#x4ECE;&#x540E;&#x5411;&#x524D;&#x904D;&#x5386;&#x539F;&#x5E8F;&#x5217;&#xFF0C;&#x6B64;&#x65F6;&#x4E3A;5&#xFF0C;&#x5219;&#x5728;&#x6700;&#x7EC8;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#x7684;&#x4F4D;&#x7F6E;&#x4E3A;4&#xFF08;&#x7D22;&#x5F15;&#x4E3A;3&#xFF09;&#x7684;&#x5730;&#x65B9;&#x653E;&#x7F6E;5&#xFF0C;&#x5E76;&#x5C06;Count&#x5E8F;&#x5217;&#x7684;5&#x7D22;&#x5F15;&#x5904;&#x7684;&#x503C;-1&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/22a5e19ef6635c9877644ba3ef25b6f046a0d6c39ca2b37f07c3673f363f8a83" alt></p>
<p><strong>&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#xFF1A;</strong>&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;5&#x65F6;&#xFF0C;Count&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x503C;&#x4E3A;3&#xFF08;&#x7D22;&#x5F15;&#x4E3A;2&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4FDD;&#x8BC1;&#x4E86;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x3002;</p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/6f38f9b3da73ddfd063acdcac68fefa4536b14549d391ac7b296379d66a496d8" alt></p>
<h2 id="&#x6E90;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x6E90;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x6E90;&#x7801;&#x5B9E;&#x73B0;"></a>&#x6E90;&#x7801;&#x5B9E;&#x73B0;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/** The number of distinct byte values. */</span><br><span class="line">private static final int NUM_BYTE_VALUES = 1 &lt;&lt; 8;</span><br><span class="line"></span><br><span class="line">static void sort(byte[] a, int left, int right) {</span><br><span class="line">    int[] count = new int[NUM_BYTE_VALUES];</span><br><span class="line">    </span><br><span class="line">    // &#x5EFA;&#x7ACB;count&#x6570;&#x7EC4;</span><br><span class="line">    for (int i = left - 1; ++i &lt;= right;</span><br><span class="line">        count[a[i] - Byte.MIN_VALUE]++</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // &#x4ECE;&#x5C3E;&#x90E8;&#x5F00;&#x59CB;&#x904D;&#x5386;</span><br><span class="line">    for (int i = NUM_BYTE_VALUES, k = right + 1; k &gt; left; ) {</span><br><span class="line"></span><br><span class="line">        while (count[--i] == 0);</span><br><span class="line">        byte value = (byte) (i + Byte.MIN_VALUE);</span><br><span class="line">        </span><br><span class="line">        int s = count[i];</span><br><span class="line"></span><br><span class="line">        do {</span><br><span class="line">            a[--k] = value;</span><br><span class="line">         } while (--s &gt; 0);</span><br><span class="line">     }        </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h1 id="TimSort"><a href="#TimSort" class="headerlink" title="TimSort"></a>TimSort</h1><p>Timsort&#x662F;&#x5DE5;&#x4E1A;&#x7EA7;&#x7B97;&#x6CD5;&#xFF0C;&#x5176;&#x6DF7;&#x7528;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x4E0E;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x4E8C;&#x5206;&#x641C;&#x7D22;&#x7B49;&#x7B97;&#x6CD5;&#xFF0C;&#x4EAE;&#x70B9;&#x662F;&#x5145;&#x5206;&#x5229;&#x7528;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x90E8;&#x5206;&#x6709;&#x5E8F;&#x7684;&#x4E8B;&#x5B9E;&#xFF0C;&#x5E76;&#x4E14;&#x4F9D;&#x636E;&#x5F85;&#x6392;&#x5E8F;&#x6570;&#x636E;&#x5185;&#x5BB9;&#x52A8;&#x6001;&#x6539;&#x53D8;&#x6392;&#x5E8F;&#x7B56;&#x7565;&#x2014;&#x2014;&#x9009;&#x62E9;&#x6027;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#x4EE5;&#x53CA;galloping&#x3002;&#x53E6;&#x5916;<strong>TimSort&#x662F;&#x4E00;&#x4E2A;&#x7A33;&#x5B9A;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;</strong>&#x5176;&#x6700;&#x597D;&#x7684;&#x6267;&#x884C;&#x60C5;&#x51B5;&#x8981;&#x4F18;&#x4E8E;&#x666E;&#x901A;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#xFF0C;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0E;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x76F8;&#x4EFF;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/14e6c415ad92b1d993e28c99bf8d6c0c7b233ec6119813ae326ea128c2c319f4" alt></p>
<h2 id="&#x9488;&#x5BF9;&#x5C0F;&#x6570;&#x636E;&#x4F18;&#x5316;"><a href="#&#x9488;&#x5BF9;&#x5C0F;&#x6570;&#x636E;&#x4F18;&#x5316;" class="headerlink" title="&#x9488;&#x5BF9;&#x5C0F;&#x6570;&#x636E;&#x4F18;&#x5316;"></a>&#x9488;&#x5BF9;&#x5C0F;&#x6570;&#x636E;&#x4F18;&#x5316;</h2><p>&#x9488;&#x5BF9;&#x8F93;&#x5165;&#x957F;&#x5EA6;&#x8F83;&#x77ED;&#x7684;&#x6570;&#x7EC4;&#x6392;&#x5E8F;&#xFF0C;&#x5F88;&#x591A;&#x8F7B;&#x91CF;&#x7EA7;&#x6392;&#x5E8F;&#x5373;&#x53EF;&#x80DC;&#x4EFB;&#xFF0C;&#x6545;TimSort&#x5728;&#x57FA;&#x4E8E;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x7684;&#x6761;&#x4EF6;&#x4E0B;&#xFF0C;&#x505A;&#x51FA;&#x5982;&#x4E0B;&#x4F18;&#x5316;&#xFF1A;</p>
<p>&#x5F53;&#x8F93;&#x5165;&#x5E8F;&#x5217;&#x7684;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;&#x57FA;&#x51C6;&#x503C;&#x65F6;&#xFF0C;&#x5C06;&#x91C7;&#x7528;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x76F4;&#x63A5;&#x5BF9;&#x8F93;&#x5165;&#x5E8F;&#x5217;&#x6392;&#x5E8F;&#x3002;&#x57FA;&#x51C6;&#x503C;&#x7684;&#x9009;&#x53D6;&#xFF1A;<strong>&#xFF08;1&#xFF09;Python&#xFF1A;64&#xFF08;2&#xFF09;Java&#xFF1A;32</strong></p>
<p>&#x6B64;&#x5916;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF0C;Java&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#xFF0C;&#x5BF9;&#x8FD9;&#x90E8;&#x5206;&#x505A;&#x4E86;&#x4F18;&#x5316;&#xFF0C;&#x4E25;&#x683C;&#x6765;&#x8BF4;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;<strong>&#x4E8C;&#x5206;&#x63D2;&#x5165;&#x6392;&#x5E8F;</strong>&#x3002;&#x5C06;<strong>&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x4E0E;&#x4E8C;&#x5206;&#x67E5;&#x627E;</strong>&#x8FDB;&#x884C;&#x4E86;&#x7ED3;&#x5408;&#x3002;&#x56E0;&#x4E3A;<strong>&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x7684;&#x7D22;&#x5F15;&#x5DE6;&#x4FA7;&#x5747;&#x662F;&#x6709;&#x5E8F;&#x5E8F;&#x5217;</strong>&#xFF1A;</p>
<ul>
<li>&#x4F20;&#x7EDF;&#x610F;&#x4E49;&#x4E0A;&#x9700;&#x8981;&#x5355;&#x4E2A;&#x4F9D;&#x6B21;&#x5411;&#x524D;&#x6BD4;&#x8F83;&#xFF0C;&#x76F4;&#x5230;&#x627E;&#x5230;&#x65B0;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x653E;&#x7F6E;&#x7684;&#x4F4D;&#x7F6E;&#xFF1B;</li>
<li>&#x4E8C;&#x5206;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF0C;&#x5219;&#x5728;&#x6B64;&#x5904;&#x91C7;&#x7528;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x6765;&#x786E;&#x8BA4;&#x63D2;&#x5165;&#x5143;&#x7D20;&#x7684;&#x653E;&#x7F6E;&#x4F4D;&#x7F6E;&#x3002;</li>
</ul>
<h2 id="TimSort&#x7B80;&#x8981;&#x6D41;&#x7A0B;"><a href="#TimSort&#x7B80;&#x8981;&#x6D41;&#x7A0B;" class="headerlink" title="TimSort&#x7B80;&#x8981;&#x6D41;&#x7A0B;"></a>TimSort&#x7B80;&#x8981;&#x6D41;&#x7A0B;</h2><blockquote>
<p>TimSort is a hybrid sorting algorithm that uses insertion sort and merge sort.</p>
<p>The algorithm reorders the input array from left to right by finding consecutive (disjoint) sorted segments (called &#x201C;runs&#x201D; from hereon). If the run is too short, it is extended using insertion sort.  The lengths of the generated runs are added to an array named <strong>runLen</strong>. Whenever a new run is added to <strong>runLen</strong>, a method named mergeCollapse merges runs until the last 3 elements in <strong>runLen</strong> satisfy the following two conditions (the &#x201C;<strong>invariant</strong>&#x201D;):</p>
<ol>
<li><strong>runLen</strong>[n-2] &gt; <strong>runLen</strong>[n-1] + <strong>runLen</strong>[n]</li>
<li><strong>runLen</strong>[n-1] &gt; <strong>runLen</strong> [n]</li>
</ol>
<p>Here n is the index of the last run in runLen.  The intention is that checking this invariant on the top 3 runs in runLen in fact guarantees that <em>all</em> runs satisfy it. At the very end, all runs are merged, yielding a sorted version of the input array.</p>
</blockquote>
<p>TimSort&#x7B97;&#x6CD5;&#x901A;&#x8FC7;&#x627E;&#x5230;&#x8FDE;&#x7EED;&#x7684;&#xFF08;&#x4E0D;&#x76F8;&#x4EA4;&#xFF09;&#x6392;&#x5E8F;&#x7684;&#x6BB5;&#xFF08;&#x6B64;&#x540E;&#x79F0;&#x4E3A;&#x201C;Run&#x201D;&#xFF09;&#xFF0C;&#x5982;&#x679C;Run&#x8FC7;&#x77ED;&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x6269;&#x5145;&#x3002;&#x751F;&#x6210;&#x7684;Run&#x7684;&#x957F;&#x5EA6;&#x88AB;&#x79F0;&#x6DFB;&#x52A0;&#x5230;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;runLen&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x6BCF;&#x5F53;&#x5C06;&#x65B0;Run&#x6DFB;&#x52A0;&#x5230;runLen&#x65F6;&#xFF0C;&#x540D;&#x4E3A;mergeCollapse&#x7684;&#x65B9;&#x6CD5;&#x5C31;&#x4F1A;&#x5C1D;&#x8BD5;&#x5408;&#x5E76;Run&#xFF0C;&#x76F4;&#x5230;runLen&#x4E2D;&#x7684;&#x5143;&#x7D20;&#x5143;&#x7D20;&#x6EE1;&#x8DB3;&#x4E24;&#x4E2A;&#x6052;&#x5B9A;&#x7684;&#x4E0D;&#x7B49;&#x5F0F;&#x3002;&#x5230;&#x6700;&#x540E;&#xFF0C;&#x6240;&#x6709;Run&#x90FD;&#x5C06;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;Run&#xFF0C;&#x4ECE;&#x800C;&#x751F;&#x6210;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x7684;&#x6392;&#x5E8F;&#x7248;&#x672C;&#x3002;</p>
<h2 id="&#x57FA;&#x672C;&#x6982;&#x5FF5;-Run"><a href="#&#x57FA;&#x672C;&#x6982;&#x5FF5;-Run" class="headerlink" title="&#x57FA;&#x672C;&#x6982;&#x5FF5; - Run"></a>&#x57FA;&#x672C;&#x6982;&#x5FF5; - Run</h2><p>TimSort&#x7B97;&#x6CD5;&#x4E2D;&#xFF0C;&#x5C06;&#x6709;&#x5E8F;&#x5B50;&#x5E8F;&#x5217;&#xFF08;<strong>&#x5347;&#x5E8F;&#x5E8F;&#x5217;</strong>&#x548C;<strong>&#x4E25;&#x683C;&#x964D;&#x5E8F;&#x5E8F;&#x5217;</strong>&#xFF09;&#x79F0;&#x4E4B;&#x4E3A;Run&#xFF0C;&#x4F8B;&#x5982;&#x5982;&#x4E0B;&#x5C06;&#x6392;&#x5E8F;&#x5E8F;&#x5217;&#xFF1A;<strong>1,2,3,4,5,4,3,6,8,10</strong></p>
<p>&#x5219;&#x4E0A;&#x9762;&#x7684;&#x5E8F;&#x5217;&#x6240;&#x6709;&#x7684;Run&#x5982;&#x4E0B;&#xFF1A;<strong>1,2,3,4,5,5,3,2,2,6,8,10</strong></p>
<p>TimSort&#x4E2D;&#x4F1A;&#x533A;&#x5206;&#x5176;&#x5E8F;&#x5217;&#x4E3A;&#x5347;&#x5E8F;&#x8FD8;&#x662F;&#x964D;&#x5E8F;&#xFF0C;&#x5982;&#x679C;&#x662F;<strong>&#x964D;&#x5E8F;&#x4F1A;&#x5F3A;&#x884C;&#x53CD;&#x8F6C;**</strong>Run<strong>**&#xFF0C;&#x4F7F;&#x5176;&#x6210;&#x4E3A;&#x5347;&#x5E8F;</strong>&#xFF0C;&#x5219;&#x4E0A;&#x8FF0;&#x7684;&#x5E8F;&#x5217;&#x7ECF;&#x8FC7;&#x53CD;&#x8F6C;&#x540E;&#x5373;&#x4E3A;&#xFF1A;<strong>1,2,3,4,5,5,2,3,2,6,8,10</strong></p>
<p><strong>*&#x6CE8;&#x610F;&#xFF1A;</strong>Run&#x5FC5;&#x987B;&#x662F;&#x5347;&#x5E8F;&#xFF08;&#x53EF;&#x4EE5;&#x76F8;&#x7B49;&#xFF09;&#x548C;&#x4E25;&#x683C;&#x964D;&#x5E8F;&#xFF08;&#x4E0D;&#x80FD;&#x76F8;&#x7B49;&#xFF09;&#xFF0C;<strong>&#x4E25;&#x683C;&#x964D;&#x5E8F;&#x7684;&#x539F;&#x56E0;&#x662F;&#x4FDD;&#x8BC1;TimSort&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x56E0;&#x4E3A;&#x964D;&#x5E8F;&#x9700;&#x8981;&#x53CD;&#x8F6C;</strong>&#x3002;*</p>
<h2 id="&#x57FA;&#x672C;&#x6982;&#x5FF5;-MinRun"><a href="#&#x57FA;&#x672C;&#x6982;&#x5FF5;-MinRun" class="headerlink" title="&#x57FA;&#x672C;&#x6982;&#x5FF5; - MinRun"></a>&#x57FA;&#x672C;&#x6982;&#x5FF5; - MinRun</h2><p>&#x5F53;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x5F52;&#x5E76;&#x65F6;&#xFF0C;&#x5F53;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;Run&#x7684;&#x6570;&#x76EE;&#x7B49;&#x4E8E;&#x6216;&#x7565;&#x5C0F;&#x4E8E;2&#x7684;&#x4E58;&#x65B9;&#x65F6;&#xFF0C;&#x6548;&#x7387;&#x6700;&#x9AD8;<a href="/external_links/fb2cea24b86cbfae6fd4d9842d14688d.html" target="blank" rel="noopener">&#xFF08;&#x57FA;&#x672C;&#x6570;&#x5B66;&#x6982;&#x5FF5;&#x53C2;&#x8003;&#xFF1A;listsort.txt&#xFF09;</a>&#x3002;</p>
<p>&#x53CD;&#x8FC7;&#x6765;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5F97;&#x5230;&#x4E00;&#x4E2A;<strong>Run**</strong>&#x7684;&#x6700;&#x5C0F;&#x957F;&#x5EA6;<strong>&#xFF0C;</strong>&#x4F7F;&#x5F97;&#x5176;&#x5212;&#x5206;&#x7684;<strong><strong>Run</strong></strong>&#x7684;&#x6570;&#x76EE;&#x8FBE;&#x5230;&#x4E0A;&#x8FF0;&#x6807;&#x51C6;&#x51C6;<strong>&#xFF0C;&#x5373;&#xFF1A;</strong>&#x9009;&#x53D6;32-64&#xFF08;16-32&#xFF09;&#x8FD9;&#x4E2A;&#x8303;&#x56F4;&#x4F5C;&#x4E3A;MinRun&#x7684;&#x8303;&#x56F4;&#xFF0C;&#x4F7F;&#x5F97;&#x539F;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x53EF;&#x4EE5;&#x88AB;MinRun&#x5206;&#x5272;&#x6210;N&#x4EFD;&#xFF0C;&#x8FD9;&#x4E2A;N&#x7B49;&#x4E8E;&#x6216;&#x7565;&#x5C0F;&#x4E8E;2<strong>**&#x7684;&#x4E58;&#x65B9;</strong>&#x3002;</p>
<ul>
<li>&#x5982;&#x679C;&#x5F53;&#x524D;&#x7684;Run&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;MinRun&#xFF1A;&#x5C1D;&#x8BD5;&#x628A;&#x540E;&#x9762;&#x7684;&#x5143;&#x7D20;&#x901A;&#x8FC7;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x653E;&#x5165;Run&#x4E2D;&#xFF0C;&#x4EE5;&#x5C3D;&#x91CF;&#x8FBE;&#x5230;MinRun&#x7684;&#x957F;&#x5EA6;&#xFF08;&#x5269;&#x4F59;&#x957F;&#x5EA6;&#x6EE1;&#x8DB3;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF09;&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x5F53;&#x524D;&#x7684;Run&#x957F;&#x5EA6;&#x5927;&#x4E8E;MinRun&#xFF1A;&#x4E0D;&#x5904;&#x7406;&#x3002;</li>
</ul>
<p>&#x901A;&#x8FC7;&#x4E0A;&#x8FF0;&#x7684;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x5C31;&#x6536;&#x83B7;&#x4E86;&#x4E00;&#x7CFB;&#x5217;Run&#xFF0C;&#x5C06;&#x5176;&#x653E;&#x7F6E;&#x5230;&#x5806;&#x6808;runLen&#x4E2D;&#xFF0C;&#x5E76;&#x5C1D;&#x8BD5;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#xFF1A;</p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/d80c16977bb2e0f0ebffdb354d7aecf37d813834c4fafcfc8089c9ac9aa026c9" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">     * A stack of pending runs yet to be merged. Run i starts at</span><br><span class="line">     * address base[i] and extends for len[i] elements. It&apos;s always</span><br><span class="line">     * true (so long as the indices are in bounds) that:</span><br><span class="line">     *</span><br><span class="line">     * runBase[i] + runLen[i] == runBase[i + 1]</span><br><span class="line">     *</span><br><span class="line">     * so we could cut the storage for this, but it&apos;s a minor amount,</span><br><span class="line">     * and keeping all the info explicit simplifies the code.</span><br><span class="line">     */</span><br><span class="line">    private int stackSize = 0; // Number of pending runs on stack</span><br><span class="line">    private final int[] runBase;</span><br><span class="line">    private final int[] runLen;</span><br><span class="line"></span><br><span class="line">     /*</span><br><span class="line">      * &#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206;&#x622A;&#x53D6;</span><br><span class="line">      * &#x5206;&#x914D;runs-to-be-merged&#x5806;&#x6808;(&#x4E0D;&#x80FD;&#x6269;&#x5927;)</span><br><span class="line">      */</span><br><span class="line">    int stackLen = (len &lt; 120 ? 5 : len &lt; 1542 ? 10 : len &lt; 119151 ? 24 : 49);</span><br><span class="line">    runBase = new int[stackLen];</span><br><span class="line">    runLen = new int[stackLen];</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">      * Pushes the specified run onto the pending-run stack.</span><br><span class="line">      *</span><br><span class="line">      * @param runBase index of the first element in the run</span><br><span class="line">      * @param runLen  the number of elements in the run</span><br><span class="line">      */</span><br><span class="line">    private void pushRun(int runBase, int runLen) {</span><br><span class="line">        this.runBase[stackSize] = runBase;</span><br><span class="line">         this.runLen[stackSize] = runLen;</span><br><span class="line">         stackSize++;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h2 id="&#x5F52;&#x5E76;&#x539F;&#x5219;-&#x4E0D;&#x7B49;&#x5F0F;"><a href="#&#x5F52;&#x5E76;&#x539F;&#x5219;-&#x4E0D;&#x7B49;&#x5F0F;" class="headerlink" title="&#x5F52;&#x5E76;&#x539F;&#x5219; - &#x4E0D;&#x7B49;&#x5F0F;"></a>&#x5F52;&#x5E76;&#x539F;&#x5219; - &#x4E0D;&#x7B49;&#x5F0F;</h2><p>&#x57FA;&#x4E8E;&#x5982;&#x4E0B;&#x539F;&#x56E0;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x5806;&#x6808;runLen&#x5185;&#x5B58;&#x5360;&#x7528;&#x5C3D;&#x91CF;&#x51CF;&#x5C0F;&#xFF0C;&#x5219;&#x5176;&#x662F;&#x7EBF;&#x4E0A;&#x5177;&#x6709;&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#xFF0C;&#x4E0D;&#x8003;&#x8651;&#x6269;&#x5BB9;&#xFF08;&#x53C2;&#x8003;&#x4E0A;&#x8FF0;&#x6E90;&#x7801;&#x7684;&#x6CE8;&#x91CA;&#xFF09;&#xFF1B;</p>
<p>&#xFF08;2&#xFF09;&#x8BA9;&#x5F52;&#x5E76;&#x7684;&#x4E24;&#x4E2A;Run&#x7684;&#x6570;&#x76EE;&#x90FD;&#x5C3D;&#x91CF;&#x63A5;&#x8FD1;&#xFF0C;&#x66F4;&#x63A5;&#x8FD1;&#x666E;&#x901A;&#x5F52;&#x5E76;&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x63D0;&#x9AD8;&#x5F52;&#x5E76;&#x6548;&#x7387;&#x3002;</p>
<p>TimSort&#x5728;runLen&#x4E0A;&#x5236;&#x5B9A;&#x4E86;&#x4E24;&#x4E2A;&#x4E0D;&#x7B49;&#x5F0F;&#x4EE5;&#x4F7F;runLen&#x5C3D;&#x91CF;&#x8D34;&#x8FD1;&#x4E0A;&#x9762;&#x7684;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li><strong>Run[n-1] &gt; Run[n] + Run[n+1]</strong></li>
<li><strong>Run[n] &gt; Run[n+1]</strong></li>
</ul>
<p>&#x5F53;&#x76EE;&#x524D;runLen&#x6EE1;&#x8DB3;&#x8FD9;&#x4E24;&#x4E2A;&#x4E0D;&#x7B49;&#x5F0F;&#x65F6;&#xFF0C;&#x5219;&#x4E0D;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#xFF0C;&#x5426;&#x5219;&#x8FDB;&#x884C;&#x5F52;&#x5E76;&#xFF0C;&#x56E0;&#x4E3A;TimSort&#x65F6;&#x7A33;&#x5B9A;&#x7684;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#xFF0C;&#x5219;&#x4EC5;&#x5141;&#x8BB8;&#x5F52;&#x5E76;&#x76F8;&#x90BB;&#x7684;&#x4E24;&#x4E2A;Run&#xFF1A;</p>
<ul>
<li>&#x5982;&#x679C;&#x4E0D;&#x6EE1;&#x8DB3;&#x4E0D;&#x7B49;&#x5F0F;&#x4E00;&#xFF1A;&#x5F52;&#x5E76;Run[n]&#x4E0E;Run[n-1]&#x3001;Run[n+1]&#x4E2D;&#x957F;&#x5EA6;&#x8F83;&#x77ED;&#x7684;Run</li>
<li>&#x5982;&#x679C;&#x4E0D;&#x6EE1;&#x8DB3;&#x4E0D;&#x7B49;&#x5F0F;&#x4E8C;&#xFF1A;&#x5F52;&#x5E76;Run[n]&#x4E0E;Run[n+1]</li>
</ul>
<p>&#x4E0D;&#x53D8;&#x5F0F;&#x7684;&#x542B;&#x4E49;&#xFF1A;</p>
<p>&#x4E0D;&#x53D8;&#x5F0F;&#x4E00;&#xFF1A;&#x4ECE;&#x53F3;&#x81F3;&#x5DE6;&#x8BFB;&#x53D6;&#x957F;&#x5EA6;&#xFF0C;&#x5219;&#x5F85;&#x5904;&#x7406;&#x7684;runLen&#x7684;&#x589E;&#x957F;&#x81F3;&#x5C11;&#x4E0E;&#x6590;&#x6CE2;&#x90A3;&#x5951;&#x989D;&#x589E;&#x957F;&#x7684;&#x901F;&#x5EA6;&#x4E00;&#x6837;&#x5FEB;&#xFF0C;&#x5219;&#x66F4;&#x4F7F;&#x5F97;&#x4E24;&#x4E2A;&#x5F52;&#x5E76;&#x7684;Run&#x7684;&#x5927;&#x5C0F;&#x66F4;&#x4E3A;&#x63A5;&#x8FD1;&#xFF1B;</p>
<p>&#x4E0D;&#x53D8;&#x5F0F;&#x4E8C;&#xFF1A;&#x5F85;&#x5904;&#x7406;&#x7684;runLen&#x6309;&#x9012;&#x51CF;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x3002;</p>
<p><strong>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;&#x63A8;&#x8BBA;&#x53EF;&#x4EE5;&#x63A8;&#x6D4B;runLen&#x4E2D;&#x7684;Run&#x6570;&#x76EE;&#x6C38;&#x8FDC;&#x4F1A;&#x6536;&#x655B;&#x4E8E;&#x4E00;&#x4E2A;&#x786E;&#x5B9A;&#x7684;&#x6570;&#xFF0C;&#x4EE5;&#x6B64;&#x8BC1;&#x660E;&#x4E86;&#x53EA;&#x7528;&#x6781;&#x5C0F;&#x7684;runLen&#x5806;&#x6808;&#x5C31;&#x53EF;&#x4EE5;&#x6392;&#x5E8F;&#x5F88;&#x957F;&#x7684;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#xFF0C;&#x4E5F;&#x6B63;&#x662F;&#x56E0;&#x4E3A;&#x5982;&#x6B64;&#x5728;&#x5B9E;&#x73B0;&#x4E0A;&#x4E0D;&#x8003;&#x8651;&#x6269;&#x5BB9;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x8BE6;&#x7EC6;&#x6570;&#x5B66;&#x4F8B;&#x8BC1;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6587;&#x540E;Reference&#x3002;</strong></p>
<p><strong><em>&#x5B9E;&#x9645;&#x4EE3;&#x7801;&#x662F;&#x7EBF;&#x4E0A;&#xFF0C;Java&#x3001;Python&#x3001;Android&#x4FDD;&#x8BC1;&#x4E0D;&#x7B49;&#x5F0F;&#x7684;&#x624B;&#x6BB5;&#x662F;&#x68C0;&#x67E5;&#x6808;&#x9876;&#x4E09;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x5426;&#x6EE1;&#x8DB3;&#xFF0C;&#x5373;&#x4E0A;&#x8FF0;&#x4E0D;&#x7B49;&#x5F0F;&#x7684;n&#x53D6;&#x6808;&#x9876;&#x7B2C;&#x4E8C;&#x4E2A;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6EE1;&#x8DB3;&#x5219;&#x5F52;&#x5E76;&#xFF0C;&#x5F52;&#x5E76;&#x5B8C;&#x6210;&#x540E;&#x518D;&#x7EE7;&#x7EED;&#x68C0;&#x67E5;&#x6808;&#x9876;&#x4E09;&#x4E2A;&#x76F4;&#x5230;&#x6EE1;&#x8DB3;&#x4E3A;&#x6B62;</em>&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">     * Examines the stack of runs waiting to be merged and merges adjacent runs</span><br><span class="line">     * until the stack invariants are reestablished:</span><br><span class="line">     *</span><br><span class="line">     *     1. runLen[i - 3] &gt; runLen[i - 2] + runLen[i - 1]</span><br><span class="line">     *     2. runLen[i - 2] &gt; runLen[i - 1]</span><br><span class="line">     *</span><br><span class="line">     * This method is called each time a new run is pushed onto the stack,</span><br><span class="line">     * so the invariants are guaranteed to hold for i &lt; stackSize upon</span><br><span class="line">     * entry to the method.</span><br><span class="line">     */</span><br><span class="line">    private void mergeCollapse() {</span><br><span class="line">        while (stackSize &gt; 1) {</span><br><span class="line">            int n = stackSize - 2;</span><br><span class="line">            if (n &gt; 0 &amp;&amp; runLen[n-1] &lt;= runLen[n] + runLen[n+1]) {</span><br><span class="line">                if (runLen[n - 1] &lt; runLen[n + 1])</span><br><span class="line">                    n--;</span><br><span class="line">                mergeAt(n);</span><br><span class="line">            } else if (runLen[n] &lt;= runLen[n + 1]) {</span><br><span class="line">                mergeAt(n);</span><br><span class="line">            } else {</span><br><span class="line">                break; // Invariant is established</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h2 id="&#x5F52;&#x5E76;&#x6392;&#x5E8F;"><a href="#&#x5F52;&#x5E76;&#x6392;&#x5E8F;" class="headerlink" title="&#x5F52;&#x5E76;&#x6392;&#x5E8F;"></a>&#x5F52;&#x5E76;&#x6392;&#x5E8F;</h2><h3 id="&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E00;&#xFF1A;&#x5185;&#x5B58;&#x4F18;&#x5316;"><a href="#&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E00;&#xFF1A;&#x5185;&#x5B58;&#x4F18;&#x5316;" class="headerlink" title="&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E00;&#xFF1A;&#x5185;&#x5B58;&#x4F18;&#x5316;"></a>&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E00;&#xFF1A;&#x5185;&#x5B58;&#x4F18;&#x5316;</h3><p>&#x7531;&#x4E8E;&#x9700;&#x8981;&#x4FDD;&#x8BC1;TimSort&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x5219;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4E0D;&#x80FD;&#x91C7;&#x7528;&#x539F;&#x5730;&#x6392;&#x5E8F;&#xFF0C;TimSort<strong>&#x5F15;&#x5165;&#x4E86;&#x4E34;&#x65F6;&#x6570;&#x7EC4;&#x6765;&#x8FDB;&#x884C;&#x5F52;&#x5E76;</strong>&#xFF0C;&#x5E76;&#x5C06;&#x53C2;&#x4E0E;<strong>&#x5F52;&#x5E76;&#x7684;&#x4E24;&#x4E2A;Run&#x4E2D;&#x8F83;&#x5C0F;&#x7684;&#x90A3;&#x4E2A;&#x653E;&#x7F6E;&#x5230;&#x4E34;&#x65F6;&#x6570;&#x7EC4;</strong>&#x4E2D;&#xFF0C;&#x4EE5;&#x8282;&#x7701;&#x5185;&#x5B58;&#x5360;&#x7528;&#x3002;&#x540C;&#x65F6;&#x533A;&#x5206;&#x4ECE;&#x5C0F;&#x5F00;&#x59CB;&#x5F52;&#x5E76;&#x548C;&#x4ECE;&#x5927;&#x5F00;&#x59CB;&#x5F52;&#x5E76;&#x3002;</p>
<h3 id="&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E8C;&#xFF1A;&#x7F29;&#x77ED;&#x5F52;&#x5E76;Run&#x957F;&#x5EA6;"><a href="#&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E8C;&#xFF1A;&#x7F29;&#x77ED;&#x5F52;&#x5E76;Run&#x957F;&#x5EA6;" class="headerlink" title="&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E8C;&#xFF1A;&#x7F29;&#x77ED;&#x5F52;&#x5E76;Run&#x957F;&#x5EA6;"></a>&#x5F52;&#x5E76;&#x4F18;&#x5316;&#x4E8C;&#xFF1A;&#x7F29;&#x77ED;&#x5F52;&#x5E76;Run&#x957F;&#x5EA6;</h3><p>&#x4E24;&#x4E2A;&#x53C2;&#x4E0E;&#x5F52;&#x5E76;&#x7684;Run&#xFF0C;&#x7531;&#x5F88;&#x591A;&#x90E8;&#x5206;&#x5176;&#x5B9E;&#x65F6;&#x4E0D;&#x7528;&#x53C2;&#x4E0E;&#x5F52;&#x5E76;&#x7684;&#xFF08;&#x4ECE;Run&#x7684;&#x67D0;&#x4E2A;&#x4F4D;&#x7F6E;&#x5F00;&#x59CB;&#x7684;&#x524D;&#x9762;&#x6216;&#x540E;&#x9762;&#x7684;&#x5143;&#x7D20;&#x5747;&#x5C0F;&#x4E8E;&#x6216;&#x5927;&#x4E8E;&#x53E6;&#x4E00;&#x4E2A;Run&#x7684;&#x5168;&#x90E8;&#x5143;&#x7D20;&#xFF0C;&#x5219;&#x8FD9;&#x90E8;&#x5206;&#x5C31;&#x53EF;&#x4EE5;&#x4E0D;&#x53C2;&#x4E0E;&#x5F52;&#x5E76;&#xFF09;&#xFF0C;&#x52A0;&#x4E4B;&#x5F52;&#x5E76;&#x4E24;&#x4E2A;Run&#x662F;&#x5728;&#x539F;&#x8F93;&#x5165;&#x6570;&#x7EC4;&#x4E2D;&#x662F;&#x76F8;&#x90BB;&#xFF0C;&#x5219;&#x6211;&#x4EEC;&#x8003;&#x8651;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x5728;&#x53BB;&#x6389;&#x90E8;&#x5206;&#x5934;&#x5C3E;&#x5143;&#x7D20;&#xFF0C;&#x4EE5;&#x8FBE;&#x5230;&#x7F29;&#x77ED;&#x5F52;&#x5E76;&#x957F;&#x5EA6;&#x7684;&#x76EE;&#x7684;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x5728;RunA&#x67E5;&#x627E;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E; I &#x53EF;&#x4EE5;&#x6B63;&#x597D;&#x653E;&#x7F6E;RunB[0]&#xFF0C;&#x5219; I &#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#x90FD;&#x4E0D;&#x7528;&#x53C2;&#x4E0E;&#x5F52;&#x5E76;&#xFF0C;&#x5728;&#x539F;&#x5730;&#x4E0D;&#x9700;&#x8981;&#x53D8;&#x5316;&#xFF1B;</p>
<p>&#xFF08;2&#xFF09;&#x5728;RunB&#x67E5;&#x627E;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E; J &#x53EF;&#x4EE5;&#x6B63;&#x597D;&#x653E;&#x7F6E;RunA[Len-1]&#xFF0C;&#x5219; J &#x4E4B;&#x540E;&#x7684;&#x6570;&#x636E;&#x90FD;&#x4E0D;&#x7528;&#x53C2;&#x4E0E;&#x5F52;&#x5E76;&#xFF0C;&#x5728;&#x539F;&#x5730;&#x4E0D;&#x9700;&#x8981;&#x53D8;&#x5316;&#xFF1B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/88edc61cf89cb7ed347d6f03e4ec9acd160bc11def7ca090f7f5373640b550b5" alt></p>
<h3 id="&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4F18;&#x5316;&#x4E09;&#xFF1A;GallopingMode"><a href="#&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4F18;&#x5316;&#x4E09;&#xFF1A;GallopingMode" class="headerlink" title="&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4F18;&#x5316;&#x4E09;&#xFF1A;GallopingMode"></a>&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x4F18;&#x5316;&#x4E09;&#xFF1A;GallopingMode</h3><p>&#x5728;&#x5F52;&#x5E76;&#x65F6;&#x6709;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x4EE5;&#x4E0B;&#x7684;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#xFF1A;</p>
<p>RunA &#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#x90FD;&#x5C0F;&#x4E8E;RunB&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x60C5;&#x51B5;&#x4E0B;&#x91C7;&#x7528;&#x5E38;&#x89C4;&#x7684;&#x5F52;&#x5E76;&#x6548;&#x7387;&#x80AF;&#x5B9A;&#x4E0D;&#x7406;&#x60F3;</p>
<p>&#x4E8E;&#x662F;TimSort&#x5F15;&#x5165;&#x4E86;GallopingMode&#xFF0C;&#x7528;&#x6765;&#x89E3;&#x51B3;&#x4E0A;&#x8FF0;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5373;&#x5F53;&#x5F52;&#x5E76;&#x65F6;&#xFF0C;&#x4E00;&#x4E2A;Run&#x8FDE;&#x7EED;n&#x7684;&#x5143;&#x7D20;&#x90FD;&#x5C0F;&#x4E8E;&#x53E6;&#x4E00;&#x4E2A;Run&#xFF0C;&#x5219;&#x8003;&#x8651;&#x662F;&#x5426;&#x6709;&#x66F4;&#x591A;&#x7684;&#x5143;&#x7D20;&#x90FD;&#x5C0F;&#x4E8E;&#xFF0C;&#x5219;&#x8DF3;&#x51FA;&#x6B63;&#x5E38;&#x5F52;&#x5E76;&#xFF0C;&#x8FDB;&#x5165;GallopingMode&#xFF0C;&#x5F53;&#x4E0D;&#x6EE1;&#x8DB3;Galloping&#x6761;&#x4EF6;&#x65F6;&#xFF0C;&#x518D;&#x8DF3;&#x56DE;&#x5230;&#x6B63;&#x5E38;&#x5F52;&#x5E76;&#xFF08;&#x4E0D;&#x6EE1;&#x8DB3;Galloping&#x6761;&#x4EF6;&#x65F6;&#x5F3A;&#x5236;&#x4F7F;&#x7528;Galloping&#x6548;&#x7387;&#x4F4E;&#x4E0B;&#xFF09;&#x3002;&#x5982;&#x679C;RunA&#x7684;&#x8BB8;&#x591A;&#x5143;&#x7D20;&#x90FD;&#x5C0F;&#x4E8E;RunB&#xFF0C;&#x90A3;&#x4E48;&#x6709;&#x53EF;&#x80FD;RunA&#x4F1A;&#x7EE7;&#x7EED;&#x62E5;&#x6709;&#x5C0F;&#x4E8E;RunB&#x7684;&#x503C;&#xFF08;&#x53CD;&#x4E4B;&#x4EA6;&#x7136;&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;TimSort&#x4F1A;&#x8DF3;&#x51FA;&#x5E38;&#x89C4;&#x7684;&#x5F52;&#x5E76;&#x6392;&#x5E8F;&#x8FDB;&#x5165;Galloping Mode&#xFF0C;<strong>&#x8FD9;&#x91CC;&#x89C4;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;&#x9608;&#x503C;**</strong>MIN_GALLOP&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;7**&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/2984c1e8b69aefcac0b84f628f4664b76c0a9370085584ffe049705a00261fbd" alt></p>
<p>&#x4E0B;&#x9762;&#x6A21;&#x62DF;&#x4E00;&#x6B21;Galloping&#xFF0C;&#x4EE5;mergeHi&#x4E3A;&#x4F8B;&#xFF08;&#x4ECE;&#x5927;&#x5F00;&#x59CB;&#x5F52;&#x5E76;&#xFF09;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x4F8B;&#x5982;&#x6B64;&#x65F6;RunA&#x5DF2;&#x7ECF;&#x8FDE;&#x7EED;&#x8D62;&#x5F97;7&#x6B21;&#x5F52;&#x5E76;&#xFF0C;&#x800C;RunB&#x7684;&#x5143;&#x7D20;&#x8FD8;&#x6CA1;&#x6709;&#x4E00;&#x6B21;&#x88AB;&#x9009;&#x53D6;&#xFF0C;&#x5219;&#x5DF2;&#x7ECF;&#x8FBE;&#x5230;&#x9608;&#x503C;&#xFF0C;&#x8FDB;&#x5165;GallopingMode&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/c21e028ea7699311d82155c6b44319eb91174348c5b68095bb8cdd6dccf7c90b" alt></p>
<p>&#x8FDB;&#x5165;GallopingMode&#xFF0C;&#x8BF4;&#x660E;&#x6B64;&#x65F6;&#x5DF2;&#x7ECF;&#x6709;RunA&#x5DF2;&#x7ECF;&#x5C0F;&#x4E8E;RunB&#x672B;&#x5C3E;&#x7684;7&#x4E2A;&#x6570;&#x5B57;&#xFF0C;TimSort&#x731C;&#x6D4B;&#x4F1A;&#x6709;&#x66F4;&#x591A;&#x7684;RunA&#x7684;&#x6570;&#x5B57;&#x5C0F;&#x4E8E;RunB&#xFF0C;&#x5219;&#x8FDB;&#x884C;&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#xFF1A;</p>
<p> <img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b3fdb7f3003f9ae9ce4b74aba703a231863407f9291319dde7f317bb008056ce" alt></p>
<p>&#x4EE5;&#x4E0A;&#x5219;&#x5B8C;&#x6210;&#x4E86;&#x4E00;&#x6B21;Galloping&#xFF0C;&#x5728;&#x8FD9;&#x4E00;&#x6B21;Galloping&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E00;&#x6B21;&#x6027;&#x5C06;&#x6240;&#x6709;&#x5927;&#x4E8E;RunB[len-1]&#x7684;RunA&#x5143;&#x7D20;&#x4E00;&#x6B21;&#x6027;&#x79FB;&#x52A8;&#xFF08;&#x5305;&#x62EC;RunB[len-1]&#xFF0C;&#x653E;&#x7F6E;&#x5230;&#x8FD9;&#x6B21;&#x79FB;&#x52A8;&#x7684;RunA&#x5143;&#x7D20;&#x540E;&#xFF09;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x4F9D;&#x6B21;&#x5F52;&#x5E76;&#x3002;</p>
<p>&#x8FD9;&#x65F6;&#x6D89;&#x53CA;&#x5230;&#x4E00;&#x4E2A;&#x6982;&#x5FF5;&#x5373;&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x6267;&#x884C;Galloping&#xFF0C;&#x8FD8;&#x662F;&#x56DE;&#x5230;&#x6B63;&#x5E38;&#x7684;&#x5F52;&#x5E76;&#xFF1F;</p>
<p>&#x6211;&#x4EEC;&#x5224;&#x65AD;&#x8FD9;&#x4E00;&#x6B21;&#x79FB;&#x52A8;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x662F;&#x5426;&#x8FD8;&#x6EE1;&#x8DB3;&#x9608;&#x503C;&#xFF08;&#x9EC4;&#x8272;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x6EE1;&#x8DB3;&#x5219;&#x7EE7;&#x7EED;&#xFF0C;&#x5728;RunA&#x4E2D;&#x5BFB;&#x627E;RunB[len-2]&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#x56DE;&#x5230;&#x6B63;&#x5E38;&#x7684;&#x5F52;&#x5E76;&#x3002;</p>
<p>Java&#x7248;&#x672C;&#x5B9E;&#x73B0;&#x4E2D;&#x6BCF;&#x6B21;&#x8FDB;&#x5165;&#x548C;&#x9000;&#x51FA;Galloping&#x4F1A;&#x53D8;&#x66F4;&#x8FD9;&#x4E2A;&#x8FDB;&#x5165;GallopingMode&#x7684;&#x9608;&#x503C;&#xFF0C;&#x5E94;&#x8BE5;&#x662F;&#x67D0;&#x79CD;&#x5956;&#x60E9;&#x673A;&#x5236;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x505A;&#x8BF4;&#x660E;&#x3002;</p>
<h2 id="TimSort-&#x7684;&#x5B9E;&#x73B0;&#x7F3A;&#x9677;"><a href="#TimSort-&#x7684;&#x5B9E;&#x73B0;&#x7F3A;&#x9677;" class="headerlink" title="TimSort &#x7684;&#x5B9E;&#x73B0;&#x7F3A;&#x9677;"></a>TimSort &#x7684;&#x5B9E;&#x73B0;&#x7F3A;&#x9677;</h2><p>&#x5728;Java8&#x4E2D;TimSort&#x7684;&#x5B9E;&#x73B0;&#x662F;&#x6709;&#x7F3A;&#x9677;&#x7684;&#xFF0C;&#x5728;&#x6781;&#x7AEF;&#x590D;&#x6742;&#x60C5;&#x51B5;&#x4E0B;&#x53EF;&#x80FD;&#x4F1A;&#x89E6;&#x53D1;&#x5F02;&#x5E38;&#xFF0C;&#x5176;&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x662F;&#x5982;&#x679C;&#x53EA;&#x68C0;&#x67E5;&#x6808;&#x9876;&#x4E09;&#x4E2A;Run&#x7684;&#x4E0D;&#x7B49;&#x5F0F;&#x5173;&#x7CFB;&#xFF0C;&#x6CA1;&#x529E;&#x6CD5;&#x529E;&#x8BC1;&#x8FD9;&#x4E2A;&#x4E0D;&#x7B49;&#x5F0F;&#x5728;&#x6574;&#x4E2A;runLen&#x5806;&#x6808;&#x4E0A;&#x6210;&#x7ACB;&#xFF0C;&#x53C2;&#x8003;&#x4EE5;&#x4E0B;&#x793A;&#x4F8B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/86b87d28849eada26061daea7922c3ab5996c09fadaad339f2d5772b06554484" alt></p>
<p>&#x4E0D;&#x7B49;&#x5F0F;&#x88AB;&#x7834;&#x574F;&#x7684;&#x4EE3;&#x4EF7;&#xFF0C;&#x5373;&#x4E3A;Run&#x7684;&#x5F52;&#x5E76;&#x65F6;&#x673A;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x5BFC;&#x81F4;&#x5728;&#x67D0;&#x4E9B;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x5806;&#x6808;&#x4E2D;&#x7684;Run&#x8D85;&#x8FC7;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x4E0D;&#x7B49;&#x5F0F;&#x63A8;&#x51FA;&#x6765;&#x7684;&#x90A3;&#x4E2A;&#x6536;&#x655B;&#x503C;&#x5BFC;&#x81F4;&#x6EA2;&#x51FA;&#xFF1A;ArrayOutOfBoundsException&#xFF0C;&#x8FD9;&#x4E2A;Bug&#x5728;&#x540E;&#x7EED;&#x7248;&#x672C;&#x5DF2;&#x7ECF;&#x4FEE;&#x590D;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/1b16fc9656c67a0f2efdb3db6793864ec98ef6925eb315aa5ac44e3510fb25d8" alt></p>
<p>&#x63D0;&#x4F9B;&#x7684;&#x4FEE;&#x590D;&#x65B9;&#x6848;&#x5373;&#x4E3A;&#x68C0;&#x67E5;&#x6808;&#x9876;&#x56DB;&#x4E2A;Run&#x800C;&#x975E;&#x4E09;&#x4E2A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;private void newMergeCollapse() {</span><br><span class="line">     while (stackSize &gt; 1) {</span><br><span class="line">       int n = stackSize - 2;</span><br><span class="line">       if (   (n &gt;= 1 &amp;&amp; runLen[n-1] &lt;= runLen[n] + runLen[n+1])</span><br><span class="line">           || (n &gt;= 2 &amp;&amp; runLen[n-2] &lt;= runLen[n] + runLen[n-1])) {</span><br><span class="line">                if (runLen[n - 1] &lt; runLen[n + 1])</span><br><span class="line">                    n--;</span><br><span class="line">            } else if (runLen[n] &gt; runLen[n + 1]) {</span><br><span class="line">                break; // Invariant is established</span><br><span class="line">            }</span><br><span class="line">            mergeAt(n);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x6709;&#x5174;&#x8DA3;&#x624B;&#x52A8;Debug&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x7684;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x5982;&#x4E0B;Git&#x64CD;&#x4F5C;&#xFF1A;<a href="/external_links/50960d97a20ed8f9aa29f047b7771cab.html" target="blank" rel="noopener">github.com/Rekent/java&#x2026;</a></p>
<h2 id="&#x90E8;&#x5206;&#x6E90;&#x7801;&#x6CE8;&#x91CA;"><a href="#&#x90E8;&#x5206;&#x6E90;&#x7801;&#x6CE8;&#x91CA;" class="headerlink" title="&#x90E8;&#x5206;&#x6E90;&#x7801;&#x6CE8;&#x91CA;"></a>&#x90E8;&#x5206;&#x6E90;&#x7801;&#x6CE8;&#x91CA;</h2><p>&#x8D34;&#x51FA;&#x8FD9;&#x90E8;&#x5206;&#x53EA;&#x662F;&#x65B9;&#x4FBF;&#x8BFB;&#x8005;&#x5728;&#x770B;&#x5B8C;&#x6982;&#x5FF5;&#x540E;&#x5BF9;&#x6E90;&#x7801;&#x7684;&#x65F6;&#x5019;&#x6709;&#x4E00;&#x4E2A;&#x5BF9;&#x5E94;&#xFF0C;&#x65B9;&#x4FBF;&#x540E;&#x7EED;&#x518D;&#x770B;&#x7EC6;&#x8282;<br><strong>&#x5165;&#x53E3;&#x65B9;&#x6CD5;&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;static &lt;T&gt; void sort(T[] a, int lo, int hi, Comparator&lt;? super T&gt; c, T[] work, int workBase, int workLen) {</span><br><span class="line">        assert c != null &amp;&amp; a != null &amp;&amp; lo &gt;= 0 &amp;&amp; lo &lt;= hi &amp;&amp; hi &lt;= a.length;</span><br><span class="line"></span><br><span class="line">        int nRemaining = hi - lo;</span><br><span class="line">        if (nRemaining &lt; 2) {</span><br><span class="line">            return; // Arrays of size 0 and 1 are always sorted</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x5982;&#x679C;&#x5C0F;&#x4E8E;32&#x4F4D;&#xFF0C;&#x5219;&#x4E0D;&#x91C7;&#x7528;TimSort&#xFF0C;&#x800C;&#x662F;&#x91C7;&#x7528;&#x4E8C;&#x5206;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#x5BF9;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x76F4;&#x63A5;&#x6392;&#x5E8F;</span><br><span class="line">        if (nRemaining &lt; MIN_MERGE) {</span><br><span class="line">            // &#x83B7;&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;&#x5E8F;&#x5217;&#xFF08;Run&#xFF09;</span><br><span class="line">            int initRunLen = countRunAndMakeAscending(a, lo, hi, c);</span><br><span class="line">            // &#x4E8C;&#x5206;&#x63D2;&#x5165;&#x6392;&#x5E8F;&#xFF08;&#x4ECE;&#x7B2C;&#x4E00;&#x4E2A;Run&#x540E;&#x5F00;&#x59CB;&#x5411;&#x524D;&#x6392;&#x5E8F;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;Run&#x5DF2;&#x7ECF;&#x662F;&#x589E;&#x5E8F;&#x4E86;&#xFF0C;&#x4E0D;&#x7528;&#x518D;&#x6392;&#xFF09;</span><br><span class="line">            binarySort(a, lo, hi, lo + initRunLen, c);</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        MyTimSort&lt;T&gt; ts = new MyTimSort&lt;&gt;(a, c, work, workBase, workLen);</span><br><span class="line">        // &#x6839;&#x636E;&#x5F53;&#x524D;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#x751F;&#x6210;&#x6700;&#x5C0F;&#x7684;Run&#x957F;&#x5EA6;</span><br><span class="line">        int minRun = minRunLength(nRemaining);</span><br><span class="line">        do {</span><br><span class="line">            // &#x8BC6;&#x522B;&#x4E0B;&#x4E00;&#x4E2A;Run&#x5E8F;&#x5217;&#xFF0C;&#x8FD4;&#x56DE;&#x8FD9;&#x4E2A;Run&#x7684;&#x957F;&#x5EA6;</span><br><span class="line">            int runLen = countRunAndMakeAscending(a, lo, hi, c);</span><br><span class="line"></span><br><span class="line">            // &#x5982;&#x679C;&#x5F53;&#x524D;&#x7684;Run&#x5E8F;&#x5217;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;MinRun&#x957F;&#x5EA6;&#xFF0C;&#x5219;&#x5C1D;&#x8BD5;&#x6269;&#x5C55;&#x5230;MinRun&#x7684;&#x957F;&#x5EA6;&#xFF08;&#x4ECE;&#x540E;&#x9762;&#x9009;&#x53D6;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x4E8C;&#x5206;&#x62C6;&#x5165;&#x6392;&#x5E8F;&#xFF09;</span><br><span class="line">            if (runLen &lt; minRun) {</span><br><span class="line">                // &#x5982;&#x679C;&#x5269;&#x4F59;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;&#x5F53;&#x524D;&#x7684;MinRun&#xFF0C;&#x5219;&#x8865;&#x5168;&#x4E3A;&#x5269;&#x4F59;&#x7684;&#x957F;&#x5EA6;</span><br><span class="line">                int force = nRemaining &lt;= minRun ? nRemaining : minRun;</span><br><span class="line">                binarySort(a, lo, lo + force, lo + runLen, c);</span><br><span class="line">                runLen = force;</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">            // &#x8BB0;&#x5F55;&#x5F53;&#x524D;Run&#x7684;&#x8D77;&#x59CB;Index&#x4EE5;&#x53CA;Run&#x957F;&#x5EA6;</span><br><span class="line">            ts.pushRun(lo, runLen);</span><br><span class="line">            // &#x5C1D;&#x8BD5;&#x5408;&#x5E76;</span><br><span class="line">            ts.mergeCollapse();</span><br><span class="line"></span><br><span class="line">            // &#x5F00;&#x59CB;&#x4E0B;&#x4E00;&#x8F6E;&#x7684;Run&#x5BFB;&#x627E;</span><br><span class="line">            lo += runLen;</span><br><span class="line">            nRemaining -= runLen;</span><br><span class="line">        } while (nRemaining != 0);</span><br><span class="line"></span><br><span class="line">        // &#x6240;&#x6709;&#x7684;Run&#x90FD;&#x5DF2;&#x7ECF;&#x5BFB;&#x627E;&#x5B8C;&#x6BD5;&#xFF0C;&#x5FC5;&#x987B;&#x5408;&#x5E76;&#x6240;&#x6709;Run</span><br><span class="line">        assert lo == hi;</span><br><span class="line">        ts.mergeForceCollapse();</span><br><span class="line">        assert ts.stackSize == 1;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p><strong>&#x5F52;&#x5E76;&#x65B9;&#x6CD5;&#x4E00;&#xFF1A;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x662F;&#x7F29;&#x77ED;&#x5F52;&#x5E76;&#x957F;&#x5EA6;&#x5E76;&#x51B3;&#x5B9A;&#x4E34;&#x65F6;&#x6570;&#x7EC4;&#x4EE5;&#x5F00;&#x59CB;&#x6700;&#x7EC8;&#x5F52;&#x5E76;&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">     * &#x5408;&#x5E76;i&#x4EE5;&#x53CA;i+1&#x4E24;&#x4E2A;Run. Run i &#x4E00;&#x5B9A;&#x662F;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x6216;&#x8005;&#x5012;&#x6570;&#x7B2C;&#x4E09;&#x4E2A;Run</span><br><span class="line">     *</span><br><span class="line">     * @param i &#x5408;&#x5E76;&#x5806;&#x6808;&#x7684;&#x7D22;&#x5F15;</span><br><span class="line">     */</span><br><span class="line">    private void mergeAt(int i) {</span><br><span class="line">        // i &#x4E00;&#x5B9A;&#x662F;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x6216;&#x8005;&#x5012;&#x6570;&#x7B2C;&#x4E09;&#x4E2A;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;i&#x4E00;&#x5B9A;&#x662F;stackSize-2&#x6216;&#x8005;stackSize-3</span><br><span class="line">        assert stackSize &gt;= 2;</span><br><span class="line">        assert i &gt;= 0;</span><br><span class="line">        assert i == stackSize - 2 || i == stackSize - 3;</span><br><span class="line"></span><br><span class="line">        int base1 = runBase[i];</span><br><span class="line">        int len1 = runLen[i];</span><br><span class="line">        int base2 = runBase[i + 1];</span><br><span class="line">        int len2 = runLen[i + 1];</span><br><span class="line">        assert len1 &gt; 0 &amp;&amp; len2 &gt; 0;</span><br><span class="line">        assert base1 + len1 == base2;</span><br><span class="line"></span><br><span class="line">        // &#x5C06;i&#x7684;&#x957F;&#x5EA6;&#x66F4;&#x65B0;len1+len2&#xFF0C;&#x5373;&#x5408;&#x5E76;&#x540E;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5012;&#x6570;&#x7B2C;&#x4E09;&#x4E2A;Run&#xFF0C;&#x5219;&#x5C06;&#x5012;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x5408;&#x5E76;&#x5230;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;Run&#x4E2D;&#xFF08;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x548C;&#x5012;&#x6570;&#x7B2C;&#x4E09;&#x4E2A;Run&#x5408;&#x5E76;&#x4E86;&#xFF09;</span><br><span class="line">        // [RUN1,RUN2,RUN3] -&gt; [RUN1+RUN2,RUN3] ; [RUN1,RUN2] -&gt; [RUN1+RUN2]</span><br><span class="line">        runLen[i] = len1 + len2;</span><br><span class="line">        if (i == stackSize - 3) {</span><br><span class="line">            runBase[i + 1] = runBase[i + 2];</span><br><span class="line">            runLen[i + 1] = runLen[i + 2];</span><br><span class="line">        }</span><br><span class="line">        stackSize--;</span><br><span class="line"></span><br><span class="line">        // &#x7F29;&#x77ED;&#x5F52;&#x5E76;&#x957F;&#x5EA6;&#xFF1A;&#x5728;Run1&#x4E2D;&#x5BFB;&#x627E;Run2&#x7684;&#x8D77;&#x59CB;&#x8282;&#x70B9;&#x4F4D;&#x7F6E;&#xFF08;Run2&#x7684;&#x9996;&#x4E2A;&#x5143;&#x7D20;&#x5E94;&#x8BE5;&#x653E;&#x7F6E;Run1&#x4E2D;&#x7684;&#x4F4D;&#x7F6E;&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x5FFD;&#x7565;run1&#x4E2D;&#x5148;&#x524D;&#x7684;&#x5143;&#x7D20;&#xFF08;&#x56E0;&#x4E3A;&#x5176;&#x5DF2;&#x7ECF;&#x6709;&#x5E8F;&#xFF09;</span><br><span class="line">        int k = gallopRight(a[base2], a, base1, len1, 0, c);</span><br><span class="line">        assert k &gt;= 0;</span><br><span class="line">        // &#xFF01;&#xFF01;&#xFF01; Run1 &#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E4B;&#x524D;&#x7684;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x4E0D;&#x518D;&#x6392;&#x5E8F;&#xFF0C;&#x56E0;&#x4E3A;Run2&#x6240;&#x6709;&#x5143;&#x7D20;&#x90FD;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;</span><br><span class="line">        base1 += k;</span><br><span class="line">        len1 -= k;</span><br><span class="line">        // &#x5982;&#x679C;&#x5269;&#x4F59;&#x6392;&#x5E8F;&#x957F;&#x5EA6;&#x4E3A;0&#xFF0C;&#x5219;&#x5DF2;&#x7ECF;&#x6709;&#x5E8F;&#xFF0C;&#x4E0D;&#x7528;&#x518D;&#x6392;&#x5E8F;&#xFF08;Run1&#x5168;&#x4F53;&#x5927;&#x4E8E;Run2&#xFF09;</span><br><span class="line">        if (len1 == 0) {</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x7F29;&#x77ED;&#x5F52;&#x5E76;&#x957F;&#x5EA6;&#xFF1A;&#x5728;Run2&#x4E2D;&#x5BFB;&#x627E;Run1&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5E94;&#x8BE5;&#x653E;&#x7F6E;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#xFF01;&#xFF01;&#xFF01; Run2&#x7684;&#x8FD9;&#x4E2A;&#x4F4D;&#x7F6E;&#x540E;&#x9762;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x4E0D;&#x518D;&#x6392;&#x5E8F;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x6240;&#x6709;&#x5143;&#x7D20;&#x90FD;&#x5927;&#x4E8E;Run1</span><br><span class="line">        len2 = gallopLeft(a[base1 + len1 - 1], a, base2, len2, len2 - 1, c);</span><br><span class="line">        assert len2 &gt;= 0;</span><br><span class="line">        // &#x5982;&#x679C;&#x5269;&#x4F59;&#x6392;&#x5E8F;&#x957F;&#x5EA6;&#x4E3A;0&#xFF0C;&#x5219;&#x5DF2;&#x7ECF;&#x6709;&#x5E8F;&#xFF0C;&#x4E0D;&#x7528;&#x518D;&#x6392;&#x5E8F;&#xFF08;Run2&#x5168;&#x4F53;&#x5927;&#x4E8E;Run1&#xFF09;</span><br><span class="line">        if (len2 == 0) {</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // &#x5E76;&#x5F52;&#x4E24;&#x4FA7;&#xFF0C;&#x9009;&#x53D6;&#x8F83;&#x77ED;&#x7684;&#x4E00;&#x65B9;&#x4F5C;&#x4E3A;&#x4E34;&#x65F6;&#x6570;&#x7EC4;&#x957F;&#x5EA6;</span><br><span class="line">        // mergeLo&#xFF1A;&#x5C06;len1 &#x653E;&#x5165;&#x4E34;&#x65F6;&#x6570;&#x7EC4;&#xFF0C;mergeHi&#xFF1A;&#x5C06;len2 &#x653E;&#x5165;&#x4E34;&#x65F6;&#x6570;&#x7EC4;</span><br><span class="line">        if (len1 &lt;= len2) {</span><br><span class="line">            mergeLo(base1, len1, base2, len2);</span><br><span class="line">        } else {</span><br><span class="line">            mergeHi(base1, len1, base2, len2);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p><strong>&#x5E95;&#x5C42;&#x5F52;&#x5E76;&#x4EE5;&#x53CA;Galloping&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">     * &#x7C7B;&#x4F3C;&#x4E8E;mergeLo&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x5E94;&#x8BE5;&#x53EA;&#x5728;len1 &gt;= len2;&#x5982;&#x679C;len1 &lt;= len2&#xFF0C;&#x5219;&#x5E94;&#x8BE5;&#x8C03;&#x7528;mergeLo&#x3002;</span><br><span class="line">     * (&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x53EF;&#x4EE5;&#x5728;len1 == len2&#x65F6;&#x8C03;&#x7528;&#x3002;)</span><br><span class="line">     *</span><br><span class="line">     * @param base1 Run1&#x7684;&#x961F;&#x9996;&#x5143;&#x7D20;</span><br><span class="line">     * @param len1  Run1&#x7684;&#x957F;&#x5EA6;</span><br><span class="line">     * @param base2 Run2&#x7684;&#x961F;&#x9996;&#x5143;&#x7D20;(&#xFF1F;&#xFF1F;&#xFF1F;must be aBase + aLen)</span><br><span class="line">     * @param len2  Run2&#x7684;&#x957F;&#x5EA6;</span><br><span class="line">     */</span><br><span class="line">    private void mergeHi(int base1, int len1, int base2, int len2) {</span><br><span class="line">        assert len1 &gt; 0 &amp;&amp; len2 &gt; 0 &amp;&amp; base1 + len1 == base2;</span><br><span class="line"></span><br><span class="line">        T[] a = this.a; // For performance</span><br><span class="line">        T[] tmp = ensureCapacity(len2);</span><br><span class="line">        int tmpBase = this.tmpBase;</span><br><span class="line">        System.arraycopy(a, base2, tmp, tmpBase, len2);</span><br><span class="line"></span><br><span class="line">        int cursor1 = base1 + len1 - 1; </span><br><span class="line">        int cursor2 = tmpBase + len2 - 1; </span><br><span class="line">        int dest = base2 + len2 - 1; </span><br><span class="line"></span><br><span class="line">        // Move last element of first run and deal with degenerate cases</span><br><span class="line">        a[dest--] = a[cursor1--];</span><br><span class="line">        if (--len1 == 0) {</span><br><span class="line">            System.arraycopy(tmp, tmpBase, a, dest - (len2 - 1), len2);</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line">        // &#x7B80;&#x5316;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x679C;Run2&#x8981;&#x5408;&#x5E76;&#x7684;&#x5143;&#x7D20;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#xFF0C;&#x8FD9;&#x4E2A;&#x5143;&#x7D20;&#x4E0D;&#x6BD4;Run1&#x7684;&#x6700;&#x5927;&#x503C;&#x5927;&#xFF0C;&#x4E5F;&#x4E0D;&#x6BD4;&#x5F53;&#x524D;Run1&#x7D22;&#x5F15;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x5927;&#xFF08;base1&#x7684;&#x4F4D;&#x7F6E;&#x662F;&#x5927;&#x4E8E;Run2&#x961F;&#x9996;&#x5143;&#x7D20;&#x7684;&#x4F4D;&#x7F6E;&#xFF09;&#xFF0C;&#x6545;Run2&#x8FD9;&#x4E2A;&#x5143;&#x7D20;&#x5E94;&#x8BE5;&#x653E;&#x7F6E;&#x5230;Run1&#x7B2C;&#x4E00;&#x4E2A;</span><br><span class="line">        if (len2 == 1) {</span><br><span class="line">            dest -= len1; // dest = dest - len1 (&#x56E0;&#x524D;&#x5E8F;dest&#x5DF2;&#x7ECF;-1&#xFF0C;&#x6545;&#x662F;Run1&#x961F;&#x5C3E;&#x5750;&#x6807;)&#xFF0C;dest:Run1&#x5E94;&#x8BE5;&#x5F00;&#x59CB;&#x5408;&#x5E76;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;:[....{1},6,16,0,27]</span><br><span class="line">            cursor1 -= len1; // cursor1 = cursor1 - len1 (&#x56E0;&#x524D;&#x5E8F;cursor1&#x5DF2;&#x7ECF;-1,&#x6545;&#x662F;Run1&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x5750;&#x6807;)&#xFF0C;cursor1:dest&#x7684;&#x524D;&#x5E8F;&#x4F4D;&#x7F6E;:[...{X},1,6,16,0,27]</span><br><span class="line">            System.arraycopy(a, cursor1 + 1, a, dest + 1, len1); // [...{1,6,16},0,27] -&gt; [...1,{1,6,16},27]&#xFF0C;&#x5C06;Run&#x8981;&#x6392;&#x5E8F;&#x90E8;&#x5206;&#x540E;&#x79FB;&#x4E00;&#x4F4D;</span><br><span class="line">            a[dest] = tmp[cursor2]; // [....1,1,6,16,27] -&gt; [...0,1,6,16,27]&#xFF0C;&#x5C06;tmp&#x4E2D;&#x7684;&#x552F;&#x4E00;&#x5143;&#x7D20;&#x653E;&#x7F6E;&#x5230;&#x961F;&#x9996;</span><br><span class="line">            return;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        Comparator&lt;? super T&gt; c = this.c; // Use local variable for performance</span><br><span class="line">        int minGallop = this.minGallop; // &quot; &quot; &quot; &quot; &quot;</span><br><span class="line">        outer: while (true) {</span><br><span class="line">            // &#x5F00;&#x59CB;&#x6B63;&#x5E38;&#x5F52;&#x5E76;&#xFF0C;&#x5E76;&#x8BB0;&#x5F55;Run1&#x3001;Run2 &#x8D62;&#x5F97;&#x9009;&#x62E9;&#x7684;&#x6B21;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x4E8E;minGallop&#x5219;&#x8DF3;&#x51FA;&#x8FDB;&#x5165;GallopingMode</span><br><span class="line">            int count1 = 0; // Number of times in a row that first run won</span><br><span class="line">            int count2 = 0; // Number of times in a row that second run won</span><br><span class="line"></span><br><span class="line">            /*</span><br><span class="line">             * Do the straightforward thing until (if ever) one run</span><br><span class="line">             * appears to win consistently.</span><br><span class="line">             */</span><br><span class="line">            do {</span><br><span class="line">                assert len1 &gt; 0 &amp;&amp; len2 &gt; 1;</span><br><span class="line">                if (c.compare(tmp[cursor2], a[cursor1]) &lt; 0) {</span><br><span class="line">                    a[dest--] = a[cursor1--];</span><br><span class="line">                    count1++;</span><br><span class="line">                    count2 = 0;</span><br><span class="line">                    if (--len1 == 0) {</span><br><span class="line">                        break outer;</span><br><span class="line">                    }</span><br><span class="line">                } else {</span><br><span class="line">                    a[dest--] = tmp[cursor2--];</span><br><span class="line">                    count2++;</span><br><span class="line">                    count1 = 0;</span><br><span class="line">                    if (--len2 == 1) {</span><br><span class="line">                        break outer;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            } while ((count1 | count2) &lt; minGallop);</span><br><span class="line"></span><br><span class="line">            /*</span><br><span class="line">             * &#x4E00;&#x65B9;&#x5DF2;&#x7ECF;&#x8FDE;&#x7EED;&#x5408;&#x5E76;&#x8D85;&#x8FC7;minGallop&#x6B21;&#xFF0C;&#x5219;&#x8FDB;&#x5165;GallopingMode</span><br><span class="line">             */</span><br><span class="line">            do {</span><br><span class="line">                assert len1 &gt; 0 &amp;&amp; len2 &gt; 1;</span><br><span class="line">                count1 = len1 - gallopRight(tmp[cursor2], a, base1, len1, len1 - 1, c);</span><br><span class="line">                if (count1 != 0) {</span><br><span class="line">                    dest -= count1;</span><br><span class="line">                    cursor1 -= count1;</span><br><span class="line">                    len1 -= count1;</span><br><span class="line">                    System.arraycopy(a, cursor1 + 1, a, dest + 1, count1);</span><br><span class="line">                    if (len1 == 0) {</span><br><span class="line">                        break outer;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                a[dest--] = tmp[cursor2--];</span><br><span class="line">                if (--len2 == 1) {</span><br><span class="line">                    break outer;</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">                count2 = len2 - gallopLeft(a[cursor1], tmp, tmpBase, len2, len2 - 1, c);</span><br><span class="line">                if (count2 != 0) {</span><br><span class="line">                    dest -= count2;</span><br><span class="line">                    cursor2 -= count2;</span><br><span class="line">                    len2 -= count2;</span><br><span class="line">                    System.arraycopy(tmp, cursor2 + 1, a, dest + 1, count2);</span><br><span class="line">                    if (len2 &lt;= 1) {</span><br><span class="line">                        break outer;</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                a[dest--] = a[cursor1--];</span><br><span class="line">                if (--len1 == 0) {</span><br><span class="line">                    break outer;</span><br><span class="line">                }</span><br><span class="line">                // &#x5B8C;&#x6210;&#x4E00;&#x6B21;Galloping&#x540E;&#x5BF9;&#x9608;&#x503C;&#x505A;&#x4FEE;&#x6539;&#xFF0C;&#x5E76;&#x5224;&#x65AD;&#x662F;&#x5426;&#x9700;&#x8981;&#x7EE7;&#x7EED;Galloping</span><br><span class="line">                minGallop--;</span><br><span class="line">            } while (count1 &gt;= MIN_GALLOP | count2 &gt;= MIN_GALLOP);</span><br><span class="line">            if (minGallop &lt; 0) {</span><br><span class="line">                minGallop = 0;</span><br><span class="line">            }</span><br><span class="line">            minGallop += 2; // Penalize for leaving gallop mode</span><br><span class="line">        } // End of &quot;outer&quot; loop</span><br><span class="line">        this.minGallop = minGallop &lt; 1 ? 1 : minGallop; // Write back to field</span><br><span class="line"></span><br><span class="line">        if (len2 == 1) {</span><br><span class="line">            assert len1 &gt; 0;</span><br><span class="line">            dest -= len1;</span><br><span class="line">            cursor1 -= len1;</span><br><span class="line">            System.arraycopy(a, cursor1 + 1, a, dest + 1, len1);</span><br><span class="line">            a[dest] = tmp[cursor2]; // Move first elt of run2 to front of merge</span><br><span class="line">        } else if (len2 == 0) {</span><br><span class="line">            throw new IllegalArgumentException(&quot;Comparison method violates its general contract!&quot;);</span><br><span class="line">        } else {</span><br><span class="line">            assert len1 == 0;</span><br><span class="line">            assert len2 &gt; 0;</span><br><span class="line">            System.arraycopy(tmp, tmpBase, a, dest - (len2 - 1), len2);</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="/external_links/aa24eb2a5a0f68ad4d886ee35b92307d.html" target="blank" rel="noopener">www.envisage-project.eu/proving-and&#x2026;</a></p>
<p><a href="/external_links/fb2cea24b86cbfae6fd4d9842d14688d.html" target="blank" rel="noopener">svn.python.org/projects/py&#x2026;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/03b5b751b9dd56faad32f50c4f3777d5.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935228011834769415.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935228011834769415.html" itemprop="url">据说只有高端机器才配运行K8S，网友：1G内存的渣渣跑起来了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-03T09:09:29+08:00">
                2021-03-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>SpringBoot&#x5B9E;&#x6218;&#x7535;&#x5546;&#x9879;&#x76EE;mall&#xFF08;40k+star&#xFF09;&#x5730;&#x5740;&#xFF1A;<a href="/external_links/eddb838205e8c111c3253639b6702220.html" target="blank" rel="noopener">github.com/macrozheng/&#x2026;</a></p>
</blockquote>
<h2 id="&#x6458;&#x8981;"><a href="#&#x6458;&#x8981;" class="headerlink" title="&#x6458;&#x8981;"></a>&#x6458;&#x8981;</h2><p>&#x8BB0;&#x5F97;&#x4E4B;&#x524D;&#x4F7F;&#x7528;Minikube&#x5B89;&#x88C5;K8S&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7ED9;&#x5206;3G&#x5185;&#x5B58;&#x90FD;&#x5ACC;&#x5C0F;&#xFF01;&#x6700;&#x8FD1;&#x53D1;&#x73B0;&#x4E00;&#x4E2A;K8S&#x7684;&#x7ECF;&#x91CF;&#x7EA7;&#x5B9E;&#x73B0;K3S&#xFF0C;&#x6700;&#x4F4E;0.5G&#x5185;&#x5B58;&#x5C31;&#x80FD;&#x8FD0;&#x884C;&#x8D77;&#x6765;&#xFF0C;&#x5B89;&#x88C5;&#x65B9;&#x4FBF;&#xFF0C;&#x548C;K8S&#x7528;&#x8D77;&#x6765;&#x533A;&#x522B;&#x4E0D;&#x5927;&#x3002;&#x63A8;&#x8350;&#x7ED9;&#x5927;&#x5BB6;&#xFF0C;&#x5E0C;&#x671B;&#x66F4;&#x591A;&#x6CA1;&#x9AD8;&#x7AEF;&#x673A;&#x5668;&#x7684;&#x670B;&#x53CB;&#x4E5F;&#x80FD;&#x591F;&#x628A;K8S&#x73A9;&#x8D77;&#x6765;&#xFF01;</p>
<h2 id="K3S&#x7B80;&#x4ECB;"><a href="#K3S&#x7B80;&#x4ECB;" class="headerlink" title="K3S&#x7B80;&#x4ECB;"></a>K3S&#x7B80;&#x4ECB;</h2><p>K3S&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x5168;&#x7B26;&#x5408;Kubernetes&#x7684;&#x53D1;&#x884C;&#x7248;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5355;&#x4E00;&#x4E8C;&#x8FDB;&#x5236;&#x5305;&#x5B89;&#x88C5;&#xFF08;&#x4E0D;&#x5230; 100MB&#xFF09;&#xFF0C;&#x5B89;&#x88C5;&#x7B80;&#x5355;&#xFF0C;&#x5185;&#x5B58;&#x53EA;&#x6709;&#x4E00;&#x534A;&#xFF0C;&#x6700;&#x4F4E;0.5G&#x5185;&#x5B58;&#x5C31;&#x80FD;&#x8FD0;&#x884C;&#x3002;</p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x53EB;K3S&#xFF1F;&#x5F00;&#x53D1;&#x8005;&#x5E0C;&#x671B;K3S&#x5728;&#x5185;&#x5B58;&#x5360;&#x7528;&#x65B9;&#x9762;&#x53EA;&#x6709;K8S&#x7684;&#x4E00;&#x534A;&#xFF0C;Kubernetes&#x662F;&#x4E00;&#x4E2A;10&#x4E2A;&#x5B57;&#x6BCD;&#x7684;&#x5355;&#x8BCD;&#xFF0C;&#x7B80;&#x5199;&#x4E3A;K8S&#x3002;&#x90A3;&#x4E48;&#x4E00;&#x534A;&#x5927;&#x5C0F;&#x5C31;&#x662F;5&#x4E2A;&#x5B57;&#x6BCD;&#x7684;&#x5355;&#x8BCD;&#xFF0C;&#x7B80;&#x5199;&#x4E3A;K3S&#x3002;</p>
<h2 id="&#x5B89;&#x88C5;"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</h2><blockquote>
<p>&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x63D0;&#x4F9B;&#x7684;&#x811A;&#x672C;&#x5B89;&#x88C5;&#x5341;&#x5206;&#x65B9;&#x4FBF;&#xFF0C;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x5B89;&#x88C5;&#xFF01;</p>
</blockquote>
<ul>
<li>&#x4F7F;&#x7528;&#x811A;&#x672C;&#x5B89;&#x88C5;K3S&#xFF0C;&#x540C;&#x65F6;&#x4F1A;&#x5B89;&#x88C5;&#x5176;&#x4ED6;&#x5B9E;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5305;&#x62EC;<code>kubectl</code>&#x3001;<code>crictl</code>&#x3001;<code>ctr</code>&#x3001;<code>k3s-killall.sh</code>&#x548C;<code>k3s-uninstall.sh</code>&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;curl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#x63D0;&#x793A;&#x5982;&#x4E0B;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5C06;K3S&#x6CE8;&#x518C;&#x4E3A;Linux&#x4E2D;&#x7684;&#x670D;&#x52A1;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;Complete!</span><br><span class="line">[INFO]  Creating /usr/local/bin/kubectl symlink to k3s</span><br><span class="line">[INFO]  Creating /usr/local/bin/crictl symlink to k3s</span><br><span class="line">[INFO]  Skipping /usr/local/bin/ctr symlink to k3s, command exists in PATH at /usr/bin/ctr</span><br><span class="line">[INFO]  Creating killall script /usr/local/bin/k3s-killall.sh</span><br><span class="line">[INFO]  Creating uninstall script /usr/local/bin/k3s-uninstall.sh</span><br><span class="line">[INFO]  env: Creating environment file /etc/systemd/system/k3s.service.env</span><br><span class="line">[INFO]  systemd: Creating service file /etc/systemd/system/k3s.service</span><br><span class="line">[INFO]  systemd: Enabling k3s unit</span><br><span class="line">[INFO]  systemd: Starting k3s</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x4E0B;&#x670D;&#x52A1;&#x7684;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#xFF0C;&#x6B64;&#x65F6;&#x663E;&#x793A;&#x72B6;&#x6001;&#x4E3A;<code>active</code>&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;[root@linux-local k3s]# systemctl status k3s</span><br><span class="line">&#x25CF; k3s.service - Lightweight Kubernetes</span><br><span class="line">   Loaded: loaded (/etc/systemd/system/k3s.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Thu 2021-01-28 10:18:39 CST; 2min 0s ago</span><br><span class="line">     Docs: https://k3s.io</span><br><span class="line">  Process: 14983 ExecStartPre=/sbin/modprobe overlay (code=exited, status=0/SUCCESS)</span><br><span class="line">  Process: 14981 ExecStartPre=/sbin/modprobe br_netfilter (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 14986 (k3s-server)</span><br><span class="line">    Tasks: 71</span><br><span class="line">   Memory: 776.3M</span><br></pre></td></tr></table></figure>

<h2 id="&#x4F7F;&#x7528;"><a href="#&#x4F7F;&#x7528;" class="headerlink" title="&#x4F7F;&#x7528;"></a>&#x4F7F;&#x7528;</h2><blockquote>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;kubectl&#x547D;&#x4EE4;&#x64CD;&#x4F5C;K3S&#x4E0E;&#x4E4B;&#x524D;&#x64CD;&#x4F5C;Minikube&#x4E2D;&#x7684;K8S&#x5E76;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF0C;&#x8FD9;&#x6B21;&#x8FD8;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Nginx&#x7684;Deployment&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x521B;&#x5EFA;Service&#x5C06;&#x5176;&#x66B4;&#x9732;&#x5230;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x3002;</p>
</blockquote>
<h3 id="&#x521B;&#x5EFA;&#x96C6;&#x7FA4;"><a href="#&#x521B;&#x5EFA;&#x96C6;&#x7FA4;" class="headerlink" title="&#x521B;&#x5EFA;&#x96C6;&#x7FA4;"></a>&#x521B;&#x5EFA;&#x96C6;&#x7FA4;</h3><ul>
<li>&#x7531;&#x4E8E;K3S&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x4E86;kubectl&#x5DE5;&#x5177;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x5B83;&#xFF0C;&#x6BD4;&#x5982;&#x67E5;&#x770B;kubectl&#x7684;&#x7248;&#x672C;&#x53F7;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl version</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;Client Version: version.Info{Major:&quot;1&quot;, Minor:&quot;20&quot;, GitVersion:&quot;v1.20.2+k3s1&quot;, GitCommit:&quot;1d4adb0301b9a63ceec8cabb11b309e061f43d5f&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2021-01-14T23:52:37Z&quot;, GoVersion:&quot;go1.15.5&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}</span><br><span class="line">Server Version: version.Info{Major:&quot;1&quot;, Minor:&quot;20&quot;, GitVersion:&quot;v1.20.2+k3s1&quot;, GitCommit:&quot;1d4adb0301b9a63ceec8cabb11b309e061f43d5f&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2021-01-14T23:52:37Z&quot;, GoVersion:&quot;go1.15.5&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux/amd64&quot;}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8FD8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x96C6;&#x7FA4;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl cluster-info</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;Kubernetes control plane is running at https://127.0.0.1:6443</span><br><span class="line">CoreDNS is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br><span class="line">Metrics-server is running at https://127.0.0.1:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x67E5;&#x770B;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6240;&#x6709;Node&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;K3S&#x548C;&#x4E4B;&#x524D;&#x7684;Minikube&#x4E00;&#x6837;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x5355;&#x8282;&#x70B9;&#x7684;&#x7B80;&#x5355;&#x96C6;&#x7FA4;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl get nodes</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;NAME          STATUS   ROLES                  AGE   VERSION</span><br><span class="line">linux-local   Ready    control-plane,master   11m   v1.20.2+k3s1</span><br></pre></td></tr></table></figure>

<h3 id="&#x90E8;&#x7F72;&#x5E94;&#x7528;"><a href="#&#x90E8;&#x7F72;&#x5E94;&#x7528;" class="headerlink" title="&#x90E8;&#x7F72;&#x5E94;&#x7528;"></a>&#x90E8;&#x7F72;&#x5E94;&#x7528;</h3><ul>
<li>&#x6307;&#x5B9A;&#x597D;&#x5E94;&#x7528;&#x955C;&#x50CF;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Deployment&#xFF0C;&#x8FD9;&#x91CC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Nginx&#x5E94;&#x7528;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl create deployment nginx-deployment --image=nginx:1.10</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x67E5;&#x770B;&#x6240;&#x6709;Deployment&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl get deployments</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;NAME               READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx-deployment   1/1     1            1           6s</span><br></pre></td></tr></table></figure>

<h3 id="&#x67E5;&#x770B;&#x5E94;&#x7528;"><a href="#&#x67E5;&#x770B;&#x5E94;&#x7528;" class="headerlink" title="&#x67E5;&#x770B;&#x5E94;&#x7528;"></a>&#x67E5;&#x770B;&#x5E94;&#x7528;</h3><ul>
<li>&#x67E5;&#x770B;Pod&#x7684;&#x8BE6;&#x7EC6;&#x72B6;&#x6001;&#xFF0C;&#x5305;&#x62EC;IP&#x5730;&#x5740;&#x3001;&#x5360;&#x7528;&#x7AEF;&#x53E3;&#x3001;&#x4F7F;&#x7528;&#x955C;&#x50CF;&#x7B49;&#x4FE1;&#x606F;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl describe pods</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;Name:         nginx-deployment-597c48c9dd-j49bc</span><br><span class="line">Namespace:    default</span><br><span class="line">Priority:     0</span><br><span class="line">Node:         linux-local/192.168.5.15</span><br><span class="line">Start Time:   Thu, 28 Jan 2021 10:53:14 +0800</span><br><span class="line">Labels:       app=nginx-deployment</span><br><span class="line">              pod-template-hash=597c48c9dd</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Status:       Running</span><br><span class="line">IP:           10.42.0.7</span><br><span class="line">IPs:</span><br><span class="line">  IP:           10.42.0.7</span><br><span class="line">Controlled By:  ReplicaSet/nginx-deployment-597c48c9dd</span><br><span class="line">Containers:</span><br><span class="line">  nginx:</span><br><span class="line">    Container ID:   containerd://560bbeefc9c5714b92ae9d0a1305c2b8746082f4aa11791a2b6e1f4288254ef0</span><br><span class="line">    Image:          nginx:1.10</span><br><span class="line">    Image ID:       docker.io/library/nginx@sha256:6202beb06ea61f44179e02ca965e8e13b961d12640101fca213efbfd145d7575</span><br><span class="line">    Port:           &lt;none&gt;</span><br><span class="line">    Host Port:      &lt;none&gt;</span><br><span class="line">    State:          Running</span><br><span class="line">      Started:      Thu, 28 Jan 2021 10:53:16 +0800</span><br><span class="line">    Ready:          True</span><br><span class="line">    Restart Count:  0</span><br><span class="line">    Environment:    &lt;none&gt;</span><br><span class="line">    Mounts:</span><br><span class="line">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-fnrf7 (ro)</span><br><span class="line">Conditions:</span><br><span class="line">  Type              Status</span><br><span class="line">  Initialized       True </span><br><span class="line">  Ready             True </span><br><span class="line">  ContainersReady   True </span><br><span class="line">  PodScheduled      True </span><br><span class="line">Volumes:</span><br><span class="line">  default-token-fnrf7:</span><br><span class="line">    Type:        Secret (a volume populated by a Secret)</span><br><span class="line">    SecretName:  default-token-fnrf7</span><br><span class="line">    Optional:    false</span><br><span class="line">QoS Class:       BestEffort</span><br><span class="line">Node-Selectors:  &lt;none&gt;</span><br><span class="line">Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s</span><br><span class="line">                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason     Age   From               Message</span><br><span class="line">  ----    ------     ----  ----               -------</span><br><span class="line">  Normal  Scheduled  38s   default-scheduler  Successfully assigned default/nginx-deployment-597c48c9dd-j49bc to linux-local</span><br><span class="line">  Normal  Pulled     38s   kubelet            Container image &quot;nginx:1.10&quot; already present on machine</span><br><span class="line">  Normal  Created    38s   kubelet            Created container nginx</span><br><span class="line">  Normal  Started    37s   kubelet            Started container nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x8FDB;&#x5165;&#x5BB9;&#x5668;&#x5185;&#x90E8;&#x5E76;&#x6267;&#x884C;<code>bash</code>&#x547D;&#x4EE4;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x9000;&#x51FA;&#x5BB9;&#x5668;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>exit</code>&#x547D;&#x4EE4;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl exec -it nginx-deployment-597c48c9dd-j49bc -- bash</span><br></pre></td></tr></table></figure>

<h3 id="&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x5E94;&#x7528;"><a href="#&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x5E94;&#x7528;" class="headerlink" title="&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x5E94;&#x7528;"></a>&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x5E94;&#x7528;</h3><ul>
<li>&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Service&#x6765;&#x66B4;&#x9732;<code>nginx-deployment</code>&#x8FD9;&#x4E2A;Deployment&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl expose deployment/nginx-deployment --name=&quot;nginx-service&quot; --type=&quot;NodePort&quot; --port=80</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x67E5;&#x770B;&#x6240;&#x6709;Service&#x7684;&#x72B6;&#x6001;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;kubectl get services</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;NAME            TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">kubernetes      ClusterIP   10.43.0.1     &lt;none&gt;        443/TCP        77m</span><br><span class="line">nginx-service   NodePort    10.43.29.39   &lt;none&gt;        80:31494/TCP   10s</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x5728;Linux&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x901A;&#x8FC7;CURL&#x547D;&#x4EE4;&#x5373;&#x53EF;&#x8BBF;&#x95EE;Nginx&#x670D;&#x52A1;&#xFF0C;&#x6B64;&#x65F6;&#x5C06;&#x6253;&#x5370;Nginx&#x4E3B;&#x9875;&#x4FE1;&#x606F;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;curl localhost:31494</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x76F8;&#x6BD4;Minikube&#x5728;&#x865A;&#x62DF;&#x673A;&#x4E2D;&#x5B89;&#x88C5;&#x5BB9;&#x5668;&#x5316;&#x5E94;&#x7528;&#xFF0C;K3S&#x76F4;&#x63A5;&#x5728;&#x672C;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#xFF0C;&#x76F4;&#x63A5;&#x6253;&#x5F00;&#x9632;&#x706B;&#x5899;&#x7AEF;&#x53E3;&#x5373;&#x53EF;&#x5728;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#xFF1B;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;# &#x5F00;&#x542F;&#x7AEF;&#x53E3;</span><br><span class="line">firewall-cmd --zone=public --add-port=31494/tcp --permanent</span><br><span class="line"># &#x91CD;&#x542F;&#x9632;&#x706B;&#x5899;</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x5728;&#x5916;&#x90E8;&#x5373;&#x53EF;&#x8BBF;&#x95EE;Nginx&#x4E3B;&#x9875;&#xFF0C;&#x8BBF;&#x95EE;&#x5730;&#x5740;&#xFF1A;<a href="/external_links/259dfc6aafe455f8b4a5bc483982cdae.html" target="blank" rel="noopener">http://192.168.5.15:31494</a></li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/5642993b9f0fd408ffe79868da3421dd0b21cff550b05f6b517abdfc97adbf46" alt></p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>K3S&#x786E;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7528;&#x7684;K8S&#x53D1;&#x884C;&#x7248;&#x672C;&#xFF0C;&#x4E0D;&#x4EC5;&#x5B89;&#x88C5;&#x65B9;&#x4FBF;&#xFF0C;&#x800C;&#x4E14;&#x5185;&#x5B58;&#x5360;&#x7528;&#x4E5F;&#x964D;&#x4F4E;&#x4E86;&#x3002;&#x7531;&#x4E8E;&#x76F4;&#x63A5;&#x5728;&#x672C;&#x673A;&#x4E0A;&#x5B89;&#x88C5;&#x5BB9;&#x5668;&#x5316;&#x5E94;&#x7528;&#xFF0C;&#x5916;&#x90E8;&#x8BBF;&#x95EE;&#x4E5F;&#x65B9;&#x4FBF;&#x4E86;&#xFF01;</p>
<blockquote>
<p>&#x672C;&#x6587; GitHub <a href="/external_links/ca05ef581785d4531f4261c9f602019b.html" target="blank" rel="noopener">github.com/macrozheng/&#x2026;</a> &#x5DF2;&#x7ECF;&#x6536;&#x5F55;&#xFF0C;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;Star&#xFF01;</p>
</blockquote>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/8decc68b4814a70508190554f2ea299d.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6935027613542907941.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6935027613542907941.html" itemprop="url">Kotlin 编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-02T20:11:31+08:00">
                2021-03-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x2B50;&#xFE0F; <strong>&#x672C;&#x6587;&#x5DF2;&#x6536;&#x5F55;&#x5230; <a href="/external_links/68e80d8c13c5d48a700e8f33324a2257.html" target="blank" rel="noopener">AndroidFamily</a>&#xFF0C;&#x6280;&#x672F;&#x548C;&#x804C;&#x573A;&#x95EE;&#x9898;&#xFF0C;&#x8BF7;&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7; [&#x5F6D;&#x65ED;&#x9510;] &#x548C; [BaguTree Pro] &#x77E5;&#x8BC6;&#x661F;&#x7403;&#x63D0;&#x95EE;&#x3002;</strong></p>
<p>&#x5728; Android &#x751F;&#x6001;&#x4E2D;&#x4E3B;&#x8981;&#x6709; C++&#x3001;Java&#x3001;Kotlin &#x4E09;&#x79CD;&#x8BED;&#x8A00; &#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x5173;&#x7CFB;&#x4E0D;&#x662F;&#x66FF;&#x6362;&#x800C;&#x662F;&#x4E92;&#x8865;&#x3002;&#x5176;&#x4E2D;&#xFF0C;C++ &#x7684;&#x8BED;&#x5883;&#x662F;&#x7B97;&#x6CD5;&#x548C;&#x9AD8;&#x6027;&#x80FD;&#xFF0C;Java &#x7684;&#x8BED;&#x5883;&#x662F;&#x5E73;&#x53F0;&#x65E0;&#x5173;&#x548C;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#xFF0C;&#x800C; Kotlin &#x5219;&#x878D;&#x5408;&#x4E86;&#x591A;&#x79CD;&#x8BED;&#x8A00;&#x4E2D;&#x7684;&#x4F18;&#x79C0;&#x7279;&#x6027;&#xFF0C;&#x5E26;&#x6765;&#x4E86;&#x4E00;&#x79CD;&#x66F4;&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x7F16;&#x7A0B;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x672C;&#x6587;&#x662F; Kotlin &#x7F16;&#x7A0B;&#x4E0E;&#x8DE8;&#x5E73;&#x53F0;&#x7CFB;&#x5217;&#x7684;&#x7B2C; 3 &#x7BC7;&#x6587;&#x7AE0;&#xFF0C;&#x5B8C;&#x6574;&#x6587;&#x7AE0;&#x76EE;&#x5F55;&#x8BF7;&#x79FB;&#x6B65;&#x5230;&#x6587;&#x7AE0;&#x672B;&#x5C3E;~</p>
</blockquote>
<hr>
<h3 id="&#x5386;&#x53F2;&#x4E0A;&#x7684;&#x4ECA;&#x5929;"><a href="#&#x5386;&#x53F2;&#x4E0A;&#x7684;&#x4ECA;&#x5929;" class="headerlink" title="&#x5386;&#x53F2;&#x4E0A;&#x7684;&#x4ECA;&#x5929;"></a>&#x5386;&#x53F2;&#x4E0A;&#x7684;&#x4ECA;&#x5929;</h3><p>2000 &#x5E74; 2 &#x6708; 29 &#x65E5;&#xFF0C;R 1.0.0 &#x6B63;&#x5F0F;&#x53D1;&#x5E03;&#x3002;<br>R &#x8BED;&#x8A00;&#x6700;&#x521D;&#x662F;&#x7531;&#x65B0;&#x897F;&#x5170;&#x5965;&#x514B;&#x5170;&#x5927;&#x5B66;&#x7684;&#x7F57;&#x65AF;&#xB7;&#x4F0A;&#x54C8;&#x5361;&#x548C;&#x7F57;&#x4F2F;&#x7279;&#xB7;&#x6770;&#x7279;&#x66FC;&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x7531;&#x6765;&#x7531; &#x201C;R &#x5F00;&#x53D1;&#x6838;&#x5FC3;&#x56E2;&#x961F;&#x201D; &#x8D1F;&#x8D23;&#x3002;R &#x662F;&#x57FA;&#x4E8E; S &#x8BED;&#x8A00;&#x7684;&#x4E00;&#x4E2A; GNU &#x8BA1;&#x5212;&#x9879;&#x76EE;&#xFF0C;&#x8BED;&#x6CD5;&#x6765;&#x81EA; Schema&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x3001;&#x7ED8;&#x56FE;&#x548C;&#x6570;&#x636E;&#x6316;&#x6398;&#x3002;RStudio &#x662F;&#x9488;&#x5BF9; R &#x8BED;&#x8A00;&#x8BBE;&#x8BA1;&#x7684;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x7684;&#x96C6;&#x6210;&#x5F00;&#x53D1;&#x73AF;&#x5883;&#x3002;<br>&#x2014;&#x2014; &#x300A;&#x4E86;&#x4E0D;&#x8D77;&#x7684;&#x7A0B;&#x5E8F;&#x5458;&#x300B;</p>
<hr>
<h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x6269;&#x5C55;&#x662F; Kotlin &#x7684;&#x4E00;&#x79CD;&#x8BED;&#x8A00;&#x7279;&#x6027;&#xFF0C;&#x5373;&#xFF1A;<strong>&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x7C7B; / &#x4E0D;&#x7EE7;&#x627F;&#x7C7B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5411;&#x4E00;&#x4E2A;&#x7C7B;&#x6DFB;&#x52A0;&#x65B0;&#x51FD;&#x6570;&#x6216;&#x8005;&#x65B0;&#x5C5E;&#x6027;</strong>&#x3002;&#x6269;&#x5C55;&#x4F7F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5408;&#x7406;&#x5730;&#x9075;&#x5FAA;&#x5F00;&#x95ED;&#x539F;&#x5219;&#xFF0C;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x662F;&#x6BD4;&#x7EE7;&#x627F;&#x66F4;&#x597D;&#x7684;&#x9009;&#x62E9;&#x3002;</p>
<hr>
<h2 id="&#x76EE;&#x5F55;"><a href="#&#x76EE;&#x5F55;" class="headerlink" title="&#x76EE;&#x5F55;"></a>&#x76EE;&#x5F55;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c50fbbe5f406926f45a0557d4c59cbb34866c9d35c113475c9742dae6f602ebd" alt></p>
<hr>
<h2 id="&#x524D;&#x7F6E;&#x77E5;&#x8BC6;"><a href="#&#x524D;&#x7F6E;&#x77E5;&#x8BC6;" class="headerlink" title="&#x524D;&#x7F6E;&#x77E5;&#x8BC6;"></a>&#x524D;&#x7F6E;&#x77E5;&#x8BC6;</h2><p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x5185;&#x5BB9;&#x4F1A;&#x6D89;&#x53CA;&#x4EE5;&#x4E0B;&#x524D;&#x7F6E; / &#x76F8;&#x5173;&#x77E5;&#x8BC6;&#xFF0C;&#x8D34;&#x5FC3;&#x7684;&#x6211;&#x90FD;&#x5E2E;&#x4F60;&#x51C6;&#x5907;&#x597D;&#x4E86;&#xFF0C;&#x8BF7;&#x4EAB;&#x7528;~</p>
<ul>
<li><a href="/external_links/c7e73f30aef8c22a485afc04b2e77084.html" target="blank" rel="noopener">Java | &#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x672C;&#x8D28;&#xFF08;&#x542B;&#x91CD;&#x8F7D;&#x4E0E;&#x91CD;&#x5199;&#x533A;&#x522B;&#xFF09;</a></li>
</ul>
<hr>
<ol>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#xFF1F;</li>
</ol>
<hr>
<p>&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E60;&#x60EF;&#x4E8E;&#x628A;&#x901A;&#x7528;&#x4EE3;&#x7801;&#x5C01;&#x88C5;&#x5230;&#x5DE5;&#x5177;&#x7C7B;&#x4E2D;&#xFF0C;&#x8BF8;&#x5982; StringUtils&#x3001;ViewUtils &#x7B49;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<p><code>StringUtils.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;public static void firstChar(String str) {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x8C03;&#x7528;<code>StringUtils.firstChar(str)</code>&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8FD9;&#x79CD;&#x4F20;&#x7EDF;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E0D;&#x591F;&#x7B80;&#x5355;&#x76F4;&#x63A5;&#xFF0C;&#x8868;&#x610F;&#x6027;&#x4E5F;&#x4E0D;&#x591F;&#x5F3A;&#xFF0C;&#x4F1A;&#x8BA9;&#x8C03;&#x7528;&#x65B9;&#x5FFD;&#x7565; String &#x548C; firstChar() &#x95F4;&#x7684;&#x5F3A;&#x8054;&#x7CFB;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x4E5F;&#x5E0C;&#x671B;&#x7701;&#x7565; StringUtils &#x7C7B;&#x540D;&#xFF0C;&#x8BA9; firstChar() &#x770B;&#x8D77;&#x6765;&#x66F4;&#x50CF;&#x662F; String &#x5185;&#x90E8;&#x7684;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF0C;&#x50CF;&#x8FD9;&#x6837;&#xFF1A;<code>&quot;str&quot;.firstChar()</code>&#x3002;</p>
<p>&#x8981;&#x5B9E;&#x73B0;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;&#x5728; Java &#x4E2D;&#x5C31;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x6216;&#x7EE7;&#x627F; String &#x7C7B;&#xFF0C;&#x7136;&#x800C; String &#x662F; JDK &#x4E2D;&#x7684; final &#x7C7B;&#xFF0C;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;&#x6216;&#x7EE7;&#x627F;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; Kotlin &#x6269;&#x5C55;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A; firstChar &#x5B9A;&#x4E49;&#x4E3A; String &#x7684;&#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF1A;</p>
<p><code>StringUtils.kt</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;&#x5B9A;&#x4E49; String &#x7684;&#x6269;&#x5C55;&#x51FD;&#x6570;</span><br><span class="line"></span><br><span class="line">fun String.firstChar() {</span><br><span class="line">    ...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x65F6;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x65F6;&#x53EF;&#x4EE5;&#x91C7;&#x7528;<code>&quot;str&quot;.firstChar()</code>&#x7684;&#x65B9;&#x5F0F;&#x3002;&#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6269;&#x5C55;&#x4E86; String &#x7C7B;&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x4FEE;&#x6539;&#x6216;&#x7EE7;&#x627F; String&#x3002;</p>
<p>&#x603B;&#x7ED3;&#xFF1A;&#x6269;&#x5C55;&#x662F; Kotlin &#x4E2D;&#x7684;&#x4E00;&#x79CD;&#x7279;&#x6027;&#xFF0C;&#x53EF;&#x4EE5; <strong>&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x7C7B; / &#x4E0D;&#x7EE7;&#x627F;&#x7C7B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5411;&#x4E00;&#x4E2A;&#x7C7B;&#x6DFB;&#x52A0;&#x65B0;&#x51FD;&#x6570;&#x6216;&#x8005;&#x65B0;&#x5C5E;&#x6027;&#xFF0C;&#x66F4;&#x7B26;&#x5408;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;</strong></p>
<blockquote>
<p><strong>&#x5F00;&#x95ED;&#x539F;&#x5219;&#xFF08;OCP&#xFF0C;Open Closed Principle&#xFF09;</strong></p>
<p>&#x5F00;&#x95ED;&#x539F;&#x5219;&#x662F;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8F6F;&#x4EF6;&#x8BBE;&#x8BA1;&#x7684;&#x539F;&#x5219;&#x4E4B;&#x4E00;&#xFF0C;&#x5373;&#xFF1A;&#x5BF9;&#x6269;&#x5C55;&#x5F00;&#x653E;&#xFF0C;&#x800C;&#x5BF9;&#x4FEE;&#x6539;&#x662F;&#x5C01;&#x95ED;&#x7684;&#x3002;</p>
</blockquote>
<hr>
<ol start="2">
<li>&#x6269;&#x5C55;&#x51FD;&#x6570; &amp; &#x6269;&#x5C55;&#x5C5E;&#x6027;</li>
</ol>
<hr>
<h3 id="2-1-&#x58F0;&#x660E;&#x6269;&#x5C55;"><a href="#2-1-&#x58F0;&#x660E;&#x6269;&#x5C55;" class="headerlink" title="2.1 &#x58F0;&#x660E;&#x6269;&#x5C55;"></a>2.1 &#x58F0;&#x660E;&#x6269;&#x5C55;</h3><p>&#x58F0;&#x660E;&#x6269;&#x5C55;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5728;&#x58F0;&#x660E;&#x65F6;&#x589E;&#x52A0;&#x300C;&#x7C7B;&#x6216;&#x8005;&#x63A5;&#x53E3;&#x540D;&#x300D;&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x540D;&#x79F0;&#x79F0;&#x4E3A; <strong>&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#xFF08;receiver type&#xFF09;</strong>&#xFF0C;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x6269;&#x5C55;&#x7684;&#x5BF9;&#x8C61;&#x79F0;&#x4E3A; <strong>&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;</strong>&#x3002;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6269;&#x5C55;&#x4F1A;&#x58F0;&#x660E;&#x4E3A;&#x300C;&#x9876;&#x7EA7;&#x6210;&#x5458;&#x300D;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<p><code>Utils.kt</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;&#x58F0;&#x660E;&#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF1A;</span><br><span class="line">fun &lt;T : Any?&gt; MutableList&lt;T&gt;.exchange(fromIndex: Int, toIndex: Int) {</span><br><span class="line">    val temp = this[fromIndex]</span><br><span class="line">    this[fromIndex] = this[toIndex]</span><br><span class="line">    this[toIndex] = temp</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x58F0;&#x660E;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#xFF1A;</span><br><span class="line">val MutableList&lt;Int&gt;.sumIsEven</span><br><span class="line">    get() = this.sum() % 2 == 0</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4F7F;&#x7528;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x50CF;&#x4F7F;&#x7528;&#x666E;&#x901A;&#x6210;&#x5458;&#x51FD;&#x6570; / &#x5C5E;&#x6027;&#x4E00;&#x6837;&#xFF1A;</p>
<p><code>xxx.kt</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;val list = mutableListOf(1,2,3)</span><br><span class="line"></span><br><span class="line">&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF1A;</span><br><span class="line">list.exchange(1,2)</span><br><span class="line"></span><br><span class="line">&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#xFF1A;</span><br><span class="line">val isEven = list.sumIsEven</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>&#x63D0;&#x793A;&#xFF1A;</strong> MutableList &#x662F;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#xFF0C;list &#x662F;&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x50CF; <strong>&#x300C;&#x6210;&#x5458;&#x51FD;&#x6570;&#x300D;</strong> &#x90A3;&#x6837;&#x4F7F;&#x7528;<code>this</code>&#x6765;&#x5F15;&#x7528;&#x63A5;&#x53D7;&#x8005;&#x5BF9;&#x8C61;&#xFF0C;&#x5F53;&#x7136;&#x6709;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;&#x58F0;&#x660E;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#xFF1A;</span><br><span class="line">val MutableList&lt;Int&gt;.sumIsEven</span><br><span class="line">    get() = this.sum() % 2 == 0 // &#x7701;&#x7565;&#x4E86; this.sum() &#x4E2D;&#x7684; this</span><br></pre></td></tr></table></figure>

<h3 id="2-2-&#x53EF;&#x7A7A;&#x63A5;&#x6536;&#x8005;"><a href="#2-2-&#x53EF;&#x7A7A;&#x63A5;&#x6536;&#x8005;" class="headerlink" title="2.2 &#x53EF;&#x7A7A;&#x63A5;&#x6536;&#x8005;"></a>2.2 &#x53EF;&#x7A7A;&#x63A5;&#x6536;&#x8005;</h3><p>&#x5728; <strong>&#x7B2C; 2.1 &#x8282;</strong> &#x4E2D;&#x4F7F;&#x7528;&#x4E86;&#x300C;&#x975E;&#x7A7A;&#x7684;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#x300D;&#x6765;&#x5B9A;&#x4E49;&#x6269;&#x5C55;&#xFF08;MutableList &#x6CA1;&#x6709;&#x5173;&#x952E;&#x8BCD;<code>?</code>&#xFF09;&#xFF0C;&#x5F53;&#x4F7F;&#x7528;&#x300C;&#x53EF;&#x7A7A;&#x53D8;&#x91CF;&#x300D;&#x8C03;&#x7528;&#x6269;&#x5C55;&#x65F6;&#xFF0C;&#x4F1A;&#x62A5;&#x7F16;&#x8BD1;&#x65F6;&#x9519;&#x8BEF;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;val list:MutableList&lt;Int&gt;? = null</span><br><span class="line">list.sumIsEven // Only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type MutableList&lt;Int&gt;?</span><br></pre></td></tr></table></figure>

<p>&#x6839;&#x636E;&#x63D0;&#x793A;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x53EF;&#x4EE5; <strong>&#x4F7F;&#x7528;&#x300C;&#x53EF;&#x7A7A;&#x7684;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#x300D;&#x6765;&#x5B9A;&#x4E49;&#x6269;&#x5C55;&#xFF0C;&#x540C;&#x65F6;&#x8FD8;&#x8981;&#x5728;&#x5185;&#x90E8;&#x4F7F;&#x7528;<code>null == this</code>&#x6765;&#x5BF9;&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5224;&#x7A7A;</strong>&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;&#x53EF;&#x7A7A;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#x7684;&#x6269;&#x5C55;&#x51FD;&#x6570;</span><br><span class="line">fun &lt;T : Any?&gt; MutableList&lt;T&gt;?.exchange(fromIndex: Int, toIndex: Int) {</span><br><span class="line">    if (null == this) return</span><br><span class="line">    val temp = this[fromIndex]</span><br><span class="line">    this[fromIndex] = this[toIndex]</span><br><span class="line">    this[toIndex] = temp</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&#x53EF;&#x7A7A;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#x7684;&#x6269;&#x5C55;&#x5C5E;&#x6027;</span><br><span class="line">val MutableList&lt;Int&gt;?.sumIsEven: Boolean</span><br><span class="line">    get() = if (null == this)</span><br><span class="line">        false</span><br><span class="line">    else</span><br><span class="line">        this.sum() % 2 == 0</span><br></pre></td></tr></table></figure>

<h3 id="2-3-&#x5728;-Java-&#x4E2D;&#x8C03;&#x7528;"><a href="#2-3-&#x5728;-Java-&#x4E2D;&#x8C03;&#x7528;" class="headerlink" title="2.3 &#x5728; Java &#x4E2D;&#x8C03;&#x7528;"></a>2.3 &#x5728; Java &#x4E2D;&#x8C03;&#x7528;</h3><p>&#x6269;&#x5C55;&#x7684;&#x672C;&#x8D28;&#xFF1A;<strong>&#x6269;&#x5C55;&#x51FD;&#x6570;&#x662F;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x5916;&#x90E8;&#x7684;&#x9759;&#x6001;&#x51FD;&#x6570;&#xFF0C;&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;</strong>&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x8C03;&#x7528;&#x6269;&#x5C55;&#x65F6;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x9002;&#x914D;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x4EFB;&#x4F55;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x989D;&#x5916;&#x6D88;&#x8017;&#x3002;</p>
<p>&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x50CF;&#x8C03;&#x7528;&#x666E;&#x901A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x90A3;&#x6837;&#x8C03;&#x7528;&#x6269;&#x5C55;&#x5373;&#x53EF;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<p><code>xxx.java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;(3);</span><br><span class="line"></span><br><span class="line">&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF1A;</span><br><span class="line">UtilsKt.exchange(list, 1, 2);</span><br><span class="line"></span><br><span class="line">&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#xFF1A;</span><br><span class="line">boolean isEven = UtilsKt.getSumIsEven(list);</span><br></pre></td></tr></table></figure>

<h3 id="2-4-&#x6269;&#x5C55;&#x7684;&#x4F5C;&#x7528;&#x57DF;"><a href="#2-4-&#x6269;&#x5C55;&#x7684;&#x4F5C;&#x7528;&#x57DF;" class="headerlink" title="2.4 &#x6269;&#x5C55;&#x7684;&#x4F5C;&#x7528;&#x57DF;"></a>2.4 &#x6269;&#x5C55;&#x7684;&#x4F5C;&#x7528;&#x57DF;</h3><p>&#x5F53;&#x4F60;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x6269;&#x5C55;&#x4E4B;&#x540E;&#xFF0C;&#x5B83;&#x4E0D;&#x4F1A;&#x81EA;&#x52A8;&#x5728;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x5185;&#x751F;&#x6548;&#x3002;&#x5728;&#x5176;&#x5B83;&#x5305;&#x8DEF;&#x5F84;&#x4E0B;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;<code>improt</code>&#x5BFC;&#x5165;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;import Utils.exchange</span><br><span class="line">&#x6216;</span><br><span class="line">import Utils.*</span><br></pre></td></tr></table></figure>

<p>&#x5F53;&#x4F60;&#x5728;&#x4E0D;&#x540C;&#x5305;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86; <strong>&#x300C;&#x91CD;&#x540D;&#x6269;&#x5C55;&#x300D;</strong>&#xFF0C;&#x5E76;&#x4E14;&#x9700;&#x8981;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x53BB;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x9700;&#x8981;&#x4F7F;&#x7528;<code>as</code>&#x5173;&#x952E;&#x5B57;&#x91CD;&#x65B0;&#x547D;&#x540D;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;import Utils.exchange as swap</span><br><span class="line"></span><br><span class="line">&#x4F7F;&#x7528;&#x65F6;&#xFF1A;</span><br><span class="line">list.swap(0,1)</span><br></pre></td></tr></table></figure>

<h3 id="2-5-&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#2-5-&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="2.5 &#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>2.5 &#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><ul>
<li><strong>1&#x3001;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE; private &#x6216; protected &#x6210;&#x5458;</strong></li>
</ul>
<p>&#x6269;&#x5C55;&#x51FD;&#x6570;&#x6216;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x5916;&#x90E8;&#x7684;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x56E0;&#x6B64;&#x6269;&#x5C55;&#x4E0D;&#x53EF;&#x80FD;&#x6253;&#x7834;&#x7C7B;&#x7684;&#x5C01;&#x88C5;&#x6027;&#x800C;&#x53BB;&#x8C03;&#x7528; private &#x6216; protected &#x6210;&#x5458;&#xFF1B;</p>
<ul>
<li><strong>2&#x3001;&#x4E0D;&#x80FD;&#x91CD;&#x5199;&#x6269;&#x5C55;&#x51FD;&#x6570;</strong></li>
</ul>
<p>&#x6269;&#x5C55;&#x51FD;&#x6570;&#x5728; Java &#x4E2D;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x4E3A;&#x9759;&#x6001;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x4E0D;&#x662F;&#x7C7B;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x4E0D;&#x5177;&#x5907;&#x591A;&#x6001;&#x6027;&#x3002;&#x5C3D;&#x7BA1;&#x4F60;&#x53EF;&#x4EE5;&#x7ED9;&#x7236;&#x7C7B;&#x548C;&#x5B50;&#x7C7B;&#x90FD;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x540C;&#x540D;&#x7684;&#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x662F;&#x65B9;&#x6CD5;&#x91CD;&#x5199;&#xFF0C;&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x5173;&#x7CFB;&#x3002;&#x5F53;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x5177;&#x4F53;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x7248;&#x672C;&#x53D6;&#x51B3;&#x4E8E;&#x53D8;&#x91CF;&#x7684; <strong>&#x300C;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x300D;</strong>&#xFF0C;&#x800C;&#x4E0D;&#x662F; <strong>&#x300C;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x300D;</strong>&#x3002;</p>
<blockquote>
<p><strong>&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x8C03;&#x7528;</strong></p>
<p>&#x5173;&#x4E8E; Java &#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x672C;&#x8D28;&#xFF0C;&#x5728;&#x6211;&#x4E4B;&#x524D;&#x5199;&#x8FC7;&#x7684;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x91CC;&#x7CFB;&#x7EDF;&#x5206;&#x6790;&#x8FC7;&#xFF1A;<a href="/external_links/c7e73f30aef8c22a485afc04b2e77084.html" target="blank" rel="noopener">Java | &#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x7684;&#x672C;&#x8D28;&#xFF08;&#x542B;&#x91CD;&#x8F7D;&#x4E0E;&#x91CD;&#x5199;&#x533A;&#x522B;&#xFF09;</a>&#x3002;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x5728;&#x7F16;&#x8BD1;&#x540E;&#x751F;&#x6210;<code>invokestatic</code> &#x5B57;&#x8282;&#x7801;&#x6307;&#x4EE4;&#xFF0C;&#x5B83;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>1&#x3001;<strong>&#x7F16;&#x8BD1;&#x9636;&#x6BB5;</strong>&#xFF1A;&#x786E;&#x5B9A;&#x65B9;&#x6CD5;&#x7684;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#xFF0C;&#x5E76;&#x56FA;&#x5316;&#x5230;&#x5B57;&#x8282;&#x7801;&#x4E2D;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x6307;&#x4EE4;&#x7684;&#x53C2;&#x6570;&#x4E2D;&#xFF1B;</li>
<li>2&#x3001;<strong>&#x7C7B;&#x52A0;&#x8F7D;&#x89E3;&#x6790;&#x9636;&#x6BB5;</strong>&#xFF1A;&#x6839;&#x636E;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#x4E2D;&#x7C7B;&#x540D;&#xFF0C;&#x5728;&#x5BF9;&#x5E94;&#x7684;&#x7C7B;&#x4E2D;&#x627E;&#x5230;&#x7B80;&#x5355;&#x540D;&#x79F0;&#x4E0E;&#x63CF;&#x8FF0;&#x7B26;&#x76F8;&#x7B26;&#x5408;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;&#x679C;&#x627E;&#x5230;&#x5219;&#x5C06;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#x8F6C;&#x6362;&#x4E3A;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#xFF1B;&#x5426;&#x5219;&#xFF0C;&#x6309;&#x7167;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x4F9D;&#x6B21;&#x5728;&#x5404;&#x4E2A;&#x7236;&#x7C7B;&#x4E2D;&#x641C;&#x7D22;&#xFF1B;</li>
<li>3&#x3001;<strong>&#x8C03;&#x7528;&#x9636;&#x6BB5;</strong>&#xFF1A;&#x7B26;&#x53F7;&#x5F15;&#x7528;&#x5DF2;&#x7ECF;&#x8F6C;&#x6362;&#x4E3A;&#x76F4;&#x63A5;&#x5F15;&#x7528;&#xFF1B;&#x8C03;&#x7528;<code>invokestatic</code>&#x4E0D;&#x9700;&#x8981;&#x5C06;&#x5BF9;&#x8C61;&#x52A0;&#x8F7D;&#x5230;&#x64CD;&#x4F5C;&#x6570;&#x6808;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x5C06;&#x6240;&#x9700;&#x8981;&#x7684;&#x53C2;&#x6570;&#x5165;&#x6808;&#x5C31;&#x53EF;&#x4EE5;&#x6267;&#x884C;<code>invokestatic</code>&#x6307;&#x4EE4;&#x3002;</li>
</ul>
</blockquote>
<ul>
<li><strong>3&#x3001;&#x5982;&#x679C;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;&#x548C;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x62E5;&#x6709;&#x76F8;&#x540C;&#x7684;&#x7B7E;&#x540D;&#xFF0C;&#x6210;&#x5458;&#x51FD;&#x6570;&#x4F18;&#x5148;</strong></li>
<li><strong>4&#x3001;&#x6269;&#x5C55;&#x5C5E;&#x6027;&#x6CA1;&#x6709;&#x652F;&#x6301;&#x5B57;&#x6BB5;&#xFF0C;&#x4E0D;&#x4F1A;&#x4FDD;&#x5B58;&#x4EFB;&#x4F55;&#x72B6;&#x6001;</strong></li>
</ul>
<p>&#x6269;&#x5C55;&#x5C5E;&#x6027;&#x662F;&#x6CA1;&#x6709;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x5FC5;&#x987B;&#x5B9A;&#x4E49; getter &#x8BBF;&#x95EE;&#x5668;&#x3002;&#x56E0;&#x4E3A;&#x4E0D;&#x53EF;&#x80FD;&#x7ED9;&#x73B0;&#x6709;&#x7684; Java &#x7C7B;&#x6DFB;&#x52A0;&#x989D;&#x5916;&#x7684;&#x5B57;&#x6BB5;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;&#x5730;&#x65B9;&#x53EF;&#x4EE5;&#x5B58;&#x50A8;&#x652F;&#x6301;&#x5B57;&#x6BB5;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x662F;&#x7F16;&#x8BD1;&#x9519;&#x8BEF;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;val MutableList&lt;Int&gt;?.sumIsEven: Boolean = true // (X) Initializer is not allowed here because this property has no backing field</span><br><span class="line">    get() = if (null == this)</span><br><span class="line">        false</span><br><span class="line">    else</span><br><span class="line">        this.sum() % 2 == 0</span><br></pre></td></tr></table></figure>

<hr>
<ol start="3">
<li>&#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x7684;&#x51FD;&#x6570;</li>
</ol>
<hr>
<p>&#x5728; Kotlin &#x6807;&#x51C6;&#x5E93;&#x4E2D;&#xFF0C;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x901A;&#x7528;&#x7684;&#x5185;&#x8054;&#x51FD;&#x6570;&#xFF1A;<code>T.apply&#x3001;T.also&#x3001;T.let&#x3001;T.run&#x3001;with</code>&#x3002;<strong>&#x4F60;&#x662F;&#x5426;&#x6E05;&#x695A;&#x7406;&#x89E3;&#x5B83;&#x4EEC;&#x7684;&#x7528;&#x6CD5; &amp; &#x672C;&#x8D28;&#xFF0C;&#x5B83;&#x4EEC;&#x90FD;&#x662F;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x5417;&#xFF1F;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;val str1: String = &quot;&quot;.run {</span><br><span class="line">    println(this.length)</span><br><span class="line">    this</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">val str2: String = with(&quot;&quot;) {</span><br><span class="line">    println(this.length)</span><br><span class="line">    this</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">val str3: String = &quot;&quot;.apply {</span><br><span class="line">    println(this.length)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">val str4: String = &quot;&quot;.also {</span><br><span class="line">    println(it.length)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">val str5: String = &quot;&quot;.let {</span><br><span class="line">    println(it.length)</span><br><span class="line">    it</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x6709;&#x7684;&#x51FD;&#x6570;&#x4F5C;&#x7528;&#x57DF;&#x5185;&#x4F7F;&#x7528;&#x4E86;<code>this</code>&#xFF0C;&#x800C;&#x5176;&#x5B83;&#x53C8;&#x4F7F;&#x7528;&#x4E86;<code>it</code>&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x5230;&#x5E95;&#x5F15;&#x7528;&#x7684;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x6709;&#x5DEE;&#x522B;&#x5462;&#xFF1F;</p>
<p>&#x6211;&#x4EEC;&#x5148;&#x627E;&#x5230;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x7684;&#x58F0;&#x660E;&#xFF1A;</p>
<p><code>standard.kt</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;public inline fun &lt;R&gt; run(block: () -&gt; R): R { </span><br><span class="line">    return block()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public inline fun &lt;T, R&gt; T.run(block: T.() -&gt; R): R {</span><br><span class="line">    return block()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public inline fun &lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R {</span><br><span class="line">    return receiver.block()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T {</span><br><span class="line">    block()</span><br><span class="line">    return this</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public inline fun &lt;T&gt; T.also(block: (T) -&gt; Unit): T {</span><br><span class="line">    block(this)</span><br><span class="line">    return this</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">public inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R {</span><br><span class="line">    return block(this)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x8138;&#x61F5;&#x903C;&#xFF0C;&#x522B;&#x6025;&#xFF0C;&#x6211;&#x4EEC;&#x68B3;&#x7406;&#x4E00;&#x4E0B;&#xFF1A;</p>
<table>
<thead>
<tr>
<th>&#x51FD;&#x6570;</th>
<th>&#x53C2;&#x6570;1</th>
<th>&#x53C2;&#x6570;2</th>
<th>&#x8FD4;&#x56DE;&#x503C;</th>
</tr>
</thead>
<tbody><tr>
<td><code>run</code></td>
<td>/</td>
<td><code>()-&gt;R</code></td>
<td>R</td>
</tr>
<tr>
<td><code>T.run</code></td>
<td>/</td>
<td><code>T.()-&gt;R</code></td>
<td>R</td>
</tr>
<tr>
<td><code>with</code></td>
<td><code>T</code></td>
<td><code>T.()-&gt;R</code></td>
<td>R</td>
</tr>
<tr>
<td><code>T.apply</code></td>
<td>/</td>
<td><code>T.()-&gt;Unit</code></td>
<td>T</td>
</tr>
<tr>
<td><code>T.also</code></td>
<td>/</td>
<td><code>(T)-&gt;Unit</code></td>
<td>T</td>
</tr>
<tr>
<td><code>T.let</code></td>
<td>/</td>
<td><code>(T)-&gt;R</code></td>
<td>R</td>
</tr>
</tbody></table>
<p>&#x8FD8;&#x662F;&#x4E00;&#x8138;&#x61F5;&#x903C;&#xFF0C;&#x90A3;&#x6211;&#x63D0;&#x51E0;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li><strong><code>run</code>vs<code>T.run</code>&#xFF0C;&#x5DEE;&#x4E86;&#x4E00;&#x4E2A;<code>T</code>&#xFF0C;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</strong><br>&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF1A;<code>run</code>&#x662F;&#x666E;&#x901A;&#x51FD;&#x6570;&#xFF0C;<code>T.run</code>&#x662F;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x3002;<code>run</code>&#x4E2D;&#x7684;<code>this</code>&#x662F;&#x58F0;&#x660E;&#x7684;&#x7C7B;&#x5BF9;&#x8C61;&#xFF08;&#x9876;&#x7EA7;&#x51FD;&#x6570;&#x9664;&#x5916;&#xFF09;&#xFF0C;<code>T.run</code>&#x4E2D;&#x7684;<code>this</code>&#x662F;&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;&#xFF1B;</li>
<li><strong><code>T.()-&gt;Unit</code>vs<code>(T)-&gt;Unit</code>&#xFF0C;&#x6216;&#x8005;<code>T.()-&gt;R</code>vs<code>(T)-&gt;R</code>&#xFF0C;T &#x7684;&#x4F4D;&#x7F6E;&#x4E0D;&#x540C;&#xFF0C;&#x533A;&#x522B;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</strong><br>&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF1A;<code>T.()-&gt;Unit</code>&#x4E2D;&#x7684; T &#x662F;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#xFF0C;<code>(T)-&gt;Unit</code>&#x4E2D;&#x7684; T &#x662F;&#x51FD;&#x6570;&#x53C2;&#x6570;&#xFF1B;</li>
<li><strong>&#x4E3A;&#x4EC0;&#x4E48;<code>with</code>&#x7528;<code>this</code>&#xFF0C;<code>let</code>&#x7528;<code>it</code>&#xFF1F;</strong></li>
</ul>
<pre><code>+ run&#x3001;with&#x3001;apply &#x51FD;&#x6570;&#x4E2D;&#x7684;&#x53C2;&#x6570; block &#x662F; **&#x300C;T &#x7684;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x300D;**&#xFF0C;&#x6240;&#x4EE5;&#x91C7;&#x7528; this &#x662F;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x7684;&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;&#xFF08;receiver&#xFF09;&#x3002;&#x53E6;&#x5916;&#x56E0;&#x4E3A; block &#x6CA1;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5B58;&#x5728; it &#x7684;&#x5B9A;&#x4E49;&#x3002;
+ also &#x548C; let &#x53C2;&#x6570; block &#x662F; **&#x300C;&#x53C2;&#x6570;&#x4E3A; T &#x7684;&#x51FD;&#x6570;&#x300D;**&#xFF0C;&#x6240;&#x4EE5;&#x91C7;&#x7528; it &#x662F;&#x552F;&#x4E00;&#x53C2;&#x6570;&#xFF08;argument&#xFF09;&#x3002;&#x53E6;&#x5916;&#x56E0;&#x4E3A; block &#x4E0D;&#x662F;&#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x5B58;&#x5728; this &#x7684;&#x5B9A;&#x4E49;&#x3002;</code></pre><blockquote>
<p><strong>lambda &#x8868;&#x8FBE;&#x5F0F;</strong></p>
<p>lambda &#x8868;&#x8FBE;&#x5F0F;&#x672C;&#x8D28;&#x4E0A;&#x662F; <strong>&#x300C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x503C;&#x4F20;&#x9012;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x300D;</strong>&#x3002;&#x5728;&#x8001;&#x7248;&#x672C; Java &#x4E2D;&#xFF0C;&#x4F20;&#x9012;&#x4EE3;&#x7801;&#x5757;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x533F;&#x540D;&#x5185;&#x90E8;&#x7C7B;&#x5B9E;&#x73B0;&#xFF0C;&#x800C;&#x4F7F;&#x7528; lambda &#x8868;&#x8FBE;&#x5F0F;&#x751A;&#x81F3;&#x8FDE;&#x51FD;&#x6570;&#x58F0;&#x660E;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F20;&#x9012;&#x4EE3;&#x7801;&#x5757;&#x4F5C;&#x4E3A;&#x51FD;&#x6570;&#x503C;&#x3002;</p>
<p>&#x5F53; lambda &#x8868;&#x8FBE;&#x5F0F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;<code>it</code>&#x5173;&#x952E;&#x5B57;&#x6765;&#x5F15;&#x7528;&#x552F;&#x4E00;&#x7684;&#x5B9E;&#x53C2;&#x3002;</p>
</blockquote>
<hr>
<ol start="4">
<li>&#x6269;&#x5C55;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;</li>
</ol>
<hr>
<p>&#x5728;&#x8FD9;&#x4E00;&#x8282;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x4ECB;&#x7ECD;&#x4E00;&#x4E9B;&#x5728; Android &#x5F00;&#x53D1;&#x4E2D;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#x3002;</p>
<h3 id="4-1-&#x5C01;&#x88C5;&#x5DE5;&#x5177;-Utils"><a href="#4-1-&#x5C01;&#x88C5;&#x5DE5;&#x5177;-Utils" class="headerlink" title="4.1 &#x5C01;&#x88C5;&#x5DE5;&#x5177; Utils"></a>4.1 &#x5C01;&#x88C5;&#x5DE5;&#x5177; Utils</h3><p>&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E60;&#x60EF;&#x4E8E;&#x628A;&#x901A;&#x7528;&#x4EE3;&#x7801;&#x5C01;&#x88C5;&#x5230;&#x5DE5;&#x5177;&#x7C7B;&#x4E2D;&#x3002;&#x4F20;&#x7EDF; Java &#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x4E0D;&#x591F;&#x7B80;&#x5355;&#x76F4;&#x63A5;&#xFF0C;&#x8868;&#x610F;&#x6027;&#x4E5F;&#x4E0D;&#x591F;&#x5F3A;&#xFF0C;&#x4F1A;&#x8BA9;&#x8C03;&#x7528;&#x65B9;&#x5FFD;&#x7565; String &#x548C; firstChar() &#x95F4;&#x7684;&#x5F3A;&#x8054;&#x7CFB;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x4E5F;&#x5E0C;&#x671B;&#x7701;&#x7565; StringUtils &#x7C7B;&#x540D;&#xFF0C;&#x8BA9; firstChar() &#x770B;&#x8D77;&#x6765;&#x66F4;&#x50CF;&#x662F; String &#x5185;&#x90E8;&#x7684;&#x4E00;&#x4E2A;&#x5C5E;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4E9B;&#x9700;&#x6C42;&#x5BF9; Kotlin &#x6269;&#x5C55;&#x6765;&#x8BF4;&#x90FD;&#x4E0D;&#x662F;&#x95EE;&#x9898;&#x3002;</p>
<h3 id="4-2-&#x89E3;&#x51B3;&#x70E6;&#x4EBA;&#x7684;-findViewById"><a href="#4-2-&#x89E3;&#x51B3;&#x70E6;&#x4EBA;&#x7684;-findViewById" class="headerlink" title="4.2 &#x89E3;&#x51B3;&#x70E6;&#x4EBA;&#x7684; findViewById"></a>4.2 &#x89E3;&#x51B3;&#x70E6;&#x4EBA;&#x7684; findViewById</h3><p>&#x5728; Android &#x4E2D;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x8C03;&#x7528; findViewById() &#x6765;&#x627E;&#x5230;&#x89C6;&#x56FE;&#x6811;&#x4E2D;&#x7684;&#x67D0;&#x4E00;&#x4E2A; View &#x5B9E;&#x4F8B;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;&#x65E7;&#x7248; SDK&#xFF1A;loginButton = (Button) findViewById(R.id.btn_login);</span><br><span class="line">&#x65B0;&#x7248; SDK&#xFF1A;loginButton = findViewById(R.id.btn_login);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>&#x63D0;&#x793A;&#xFF1A;</strong> &#x65B0;&#x7248;&#x7684; SDK &#x4E2D;&#xFF0C;findViewById() &#x662F;&#x4E00;&#x4E2A;&#x6CDB;&#x578B;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x5C31;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5F3A;&#x5236;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; less&#x590D;&#x5236;&#x4EE3;&#x7801;public &lt;T extends View&gt; T findViewById(@IdRes int id) {</span><br><span class="line">&gt;    return getWindow().findViewById(id);</span><br><span class="line">&gt; }</span><br><span class="line">&gt; </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>&#x901A;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x53D8;&#x91CF;&#x6216;&#x8005;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x6765;&#x627F;&#x8F7D; findViewById() &#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E9B;&#x53D8;&#x91CF;&#x90FD;&#x53EA;&#x662F; &#x201C;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#x201D; &#xFF0C;&#x5728;&#x8FDB;&#x884C;&#x4E8B;&#x4EF6;&#x7ED1;&#x5B9A; / &#x8D4B;&#x503C;&#x4E4B;&#x540E;&#x5C31;&#x6CA1;&#x6709;&#x5F88;&#x5927;&#x7684;&#x7528;&#x5904;&#x4E86;&#x3002;&#x5982;&#x679C;&#x4F60;&#x9762;&#x5BF9;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x754C;&#x9762;&#xFF0C;&#x4F60;&#x751A;&#x81F3;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x51E0;&#x5341;&#x884C;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#xFF01;</p>
<p>&#x80FD;&#x4E0D;&#x80FD;&#x7701;&#x7565;&#x8FD9;&#x4E9B;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#xFF0C;&#x76F4;&#x63A5;&#x64CD;&#x4F5C;<code>R.id.*</code>&#x5462;&#xFF1F;&#x7B54;&#x6848;&#x662F;&#x53EF;&#x4EE5;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528; Kotlin <strong>&#x300C;&#x9AD8;&#x9636;&#x51FD;&#x6570; + &#x6269;&#x5C55;&#x51FD;&#x6570;&#x300D;</strong>&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;fun Int.onClick(click: () -&gt; Unit) {</span><br><span class="line">    findViewById&lt;View&gt;(this).apply {</span><br><span class="line">        setOnClickListener {</span><br><span class="line">            click()</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;<code>R.id.*</code>&#x6765;&#x7ED1;&#x5B9A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF08;R.id* &#x672C;&#x8D28;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x7C7B;&#x578B;&#xFF09;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">perl&#x590D;&#x5236;&#x4EE3;&#x7801;R.id.btn_login.onClick {</span><br><span class="line">    // do something</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5C31;&#x7B80;&#x6D01;&#x591A;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4E0D;&#x518D;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x5806;&#x4E34;&#x65F6;&#x53D8;&#x91CF;&#x4E86;&#x3002;&#x4E0D;&#x8FC7;&#xFF0C;&#x4F60;&#x6BCF;&#x6B21;&#x90FD;&#x9700;&#x8981;&#x5199;<code>R.id</code>&#x524D;&#x7F00;&#xFF0C;&#x8FD9;&#x4F3C;&#x4E4E;&#x4E5F;&#x5F88;&#x591A;&#x4F59;&#xFF0C;&#x80FD;&#x4E0D;&#x80FD;&#x518D;&#x7701;&#x7565;&#x5462;&#xFF1F;&#x786E;&#x5B9E;&#x53EF;&#x4EE5;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4F7F;&#x7528; Kotlin &#x4E3A; Android &#x91CF;&#x8EAB;&#x5B9A;&#x5236;&#x7684; Gradle &#x63D2;&#x4EF6;&#xFF1A;<code>kotlin-android-extensions</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;apply plugin : &apos;kotlin-android-extension&apos;</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x7EC4;&#x4EF6;&#x7684; id &#x6765;&#x64CD;&#x4F5C; View &#x5B9E;&#x4F8B;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;<br><code>MainActivity .java</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">perl&#x590D;&#x5236;&#x4EE3;&#x7801;btn_login.setOnClickListener{</span><br><span class="line">    // do something</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x8BD5;&#x8BD5;&#x53CD;&#x7F16;&#x8BD1;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;<code>kotlin-android-extensions</code>&#x63D2;&#x4EF6;&#x81EA;&#x52A8;&#x5728; Activity &#x7C7B;&#x4E2D;&#x63D2;&#x5165;&#x4E86;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<p><code>MainActivity.class</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;public class MainActivity extends AppCompatActivity {</span><br><span class="line"></span><br><span class="line">    private HashMap _$_findViewCache;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) {</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        ((Button) this._$_findViewCache(id.btn_login)).setOnClickListener((View.OnClickListener) null.INSTANCE);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public View _$_findCachedViewById(int var1) {</span><br><span class="line">        if (this._$_findViewCache == null) {</span><br><span class="line">            this._$_findViewCache = new HashMap();</span><br><span class="line">        }</span><br><span class="line">        View var2 = (View) this._$_findViewCache.get(Integer.valueOf(var1));</span><br><span class="line">        if (var2 == null) {</span><br><span class="line">            var2 = findViewById(var1);</span><br><span class="line">            this._$_findViewCache.put(Integer.valueOf(var1), var2);</span><br><span class="line">        }</span><br><span class="line">        return var2;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void _$_clearFindViewByIdCache() {</span><br><span class="line">        if (this._$_findViewCache != null) {</span><br><span class="line">            this._$_findViewCache.clear();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5728;&#x8BBF;&#x95EE;<code>R.id.*</code>&#x63A7;&#x4EF6;&#x65F6;&#xFF0C;&#x5148;&#x5728;&#x7F13;&#x5B58;&#x96C6;&#x5408;<code>_$_findViewCache</code>&#x4E2D;&#x67E5;&#x627E;&#xFF0C;&#x6709;&#x5C31;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x6CA1;&#x6709;&#x5C31;&#x901A;&#x8FC7; findViewById() &#x8FDB;&#x884C;&#x67E5;&#x627E;&#xFF0C;&#x5E76;&#x6DFB;&#x52A0;&#x5230;&#x7F13;&#x5B58;&#x96C6;&#x5408;&#x4E2D;&#x3002;</p>
<p>&#x53E6;&#x5916;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;_$_clearFindViewByIdCache()&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x4E8E;&#x5728;&#x5F7B;&#x5E95;&#x66FF;&#x6362;&#x754C;&#x9762;&#x89C6;&#x56FE;&#x65F6;&#x6E05;&#x9664;&#x5F7B;&#x5E95;&#x7F13;&#x5B58;&#x3002;&#x5728; Fragment#onDestroyView() &#x4E2D;&#xFF0C;&#x4F1A;&#x8C03;&#x7528;&#x8BE5;&#x65B9;&#x6CD5;&#x6E05;&#x9664;&#x7F13;&#x5B58;&#xFF0C;&#x800C; Activity &#x4E2D;&#x6CA1;&#x6709;&#x3002;</p>
<h3 id="4-3-&#x7B80;&#x6D01;&#x7684;-LeetCode-&#x9898;&#x89E3;"><a href="#4-3-&#x7B80;&#x6D01;&#x7684;-LeetCode-&#x9898;&#x89E3;" class="headerlink" title="4.3 &#x7B80;&#x6D01;&#x7684; LeetCode &#x9898;&#x89E3;"></a>4.3 &#x7B80;&#x6D01;&#x7684; LeetCode &#x9898;&#x89E3;</h3><p>&#x5728;&#x89E3;&#x7B97;&#x6CD5;&#x9898;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x8BA9;&#x4EE3;&#x7801;&#x66F4;&#x7B80;&#x6D01;&#xFF0C;&#x8868;&#x610F;&#x6027;&#x66F4;&#x5F3A;&#x3002;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4EA4;&#x6362;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4E24;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E0A;&#x7684;&#x5143;&#x7D20;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x4F20;&#x7EDF;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x7684;&#x5199;&#x6CD5;&#x610F;&#x601D;&#x66F4;&#x6E05;&#x695A;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;fun swap(arr: IntArray, from: Int, to: Int) {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">swap(arr,0,1)</span><br><span class="line"></span><br><span class="line">fun IntArray.swap(from: Int, toInt) {</span><br><span class="line">    ...</span><br><span class="line">}</span><br><span class="line">arr.swap(0,1)</span><br></pre></td></tr></table></figure>

<hr>
<ol start="5">
<li>&#x603B;&#x7ED3;</li>
</ol>
<hr>
<ul>
<li>&#x6269;&#x5C55;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x4FEE;&#x6539;&#x7C7B; / &#x4E0D;&#x7EE7;&#x627F;&#x7C7B;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5411;&#x4E00;&#x4E2A;&#x7C7B;&#x6DFB;&#x52A0;&#x65B0;&#x51FD;&#x6570;&#x6216;&#x8005;&#x65B0;&#x5C5E;&#x6027;&#xFF0C;&#x66F4;&#x7B26;&#x5408;&#x5F00;&#x95ED;&#x539F;&#x5219;&#x3002;&#x76F8;&#x5BF9;&#x4E8E;&#x4F20;&#x7EDF; Java &#x7684;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x66F4;&#x7B80;&#x5355;&#x76F4;&#x63A5;&#xFF0C;&#x8868;&#x610F;&#x6027;&#x66F4;&#x5F3A;&#xFF1B;</li>
<li>&#x6269;&#x5C55;&#x51FD;&#x6570;&#x662F;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x5916;&#x90E8;&#x7684;&#x9759;&#x6001;&#x51FD;&#x6570;&#xFF0C;&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x63A5;&#x6536;&#x8005;&#x7C7B;&#x578B;&#xFF0C;&#x8C03;&#x7528;&#x6269;&#x5C55;&#x65F6;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x9002;&#x914D;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x4EFB;&#x4F55;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x989D;&#x5916;&#x6D88;&#x8017;&#x3002;&#x5728; Java &#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x50CF;&#x8C03;&#x7528;&#x666E;&#x901A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x90A3;&#x6837;&#x8C03;&#x7528;&#x6269;&#x5C55;&#x5373;&#x53EF;&#xFF1B;</li>
<li>&#x6807;&#x51C6;&#x5E93;&#x63D0;&#x4F9B;&#x7684;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;run&#x3001;with&#x3001;apply &#x51FD;&#x6570;&#x4E2D;&#x7684;&#x53C2;&#x6570; block &#x662F;&#x300C;T &#x7684;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x300D;&#xFF0C;&#x6240;&#x4EE5;&#x91C7;&#x7528; this &#x662F;&#x6269;&#x5C55;&#x51FD;&#x6570;&#x7684;&#x63A5;&#x6536;&#x8005;&#x5BF9;&#x8C61;&#xFF08;receiver&#xFF09;&#xFF1B;also &#x548C; let &#x53C2;&#x6570; block &#x662F;&#x300C;&#x53C2;&#x6570;&#x4E3A; T &#x7684;&#x51FD;&#x6570;&#x300D;&#xFF0C;&#x6240;&#x4EE5;&#x91C7;&#x7528; it &#x662F;&#x552F;&#x4E00;&#x53C2;&#x6570;&#xFF08;argument&#xFF09;&#x3002;</li>
</ul>
<hr>
<h3 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h3><ul>
<li><a href="/external_links/e81b1462993cdab0e6f78a7a6eadbf02.html" target="blank" rel="noopener">&#x300A;Kotlin &#x6838;&#x5FC3;&#x7F16;&#x7A0B;&#x300B;</a> &#xFF08;&#x7B2C; 7 &#x7AE0;&#xFF09;&#x2014;&#x2014; &#x6C34;&#x6EF4;&#x6280;&#x672F;&#x56E2;&#x961F; &#x8457;</li>
<li><a href="/external_links/d5fb1c0909eacb4164d173a143ad7894.html" target="blank" rel="noopener">&#x300A;Extensions &#x7279;&#x6027;&#x300B;</a> &#x2014;&#x2014; Kotlin &#x5B98;&#x65B9;&#x6587;&#x6863;</li>
<li><a href="/external_links/11ffd42f9691c73d363d203bdf29b2f2.html" target="blank" rel="noopener">&#x300A;this &#x5173;&#x952E;&#x5B57;&#x300B;</a> &#x2014;&#x2014; Kotlin &#x5B98;&#x65B9;&#x6587;&#x6863;</li>
<li><a href="/external_links/108d00fdd2b6f62d522f22ee4d92e5f1.html" target="blank" rel="noopener">&#x300A;Android KTX&#x300B;</a> &#x2014;&#x2014; Android Developers &#x5B98;&#x65B9;&#x6587;&#x6863;</li>
<li>&#x300A;Kotlin &#x5B9E;&#x6218;&#x300B;&#xFF08;&#x7B2C; 3.3 &#x8282;&#xFF09;&#x2014;&#x2014; [&#x4FC4;] Dmityr Jemerov, Svetlana lsakova &#x8457;</li>
</ul>
<blockquote>
<h3 id="&#x63A8;&#x8350;&#x9605;&#x8BFB;"><a href="#&#x63A8;&#x8350;&#x9605;&#x8BFB;" class="headerlink" title="&#x63A8;&#x8350;&#x9605;&#x8BFB;"></a>&#x63A8;&#x8350;&#x9605;&#x8BFB;</h3><p>Kotlin &#x7F16;&#x7A0B;&#x4E0E;&#x8DE8;&#x5E73;&#x53F0;&#x7CFB;&#x5217;&#x5B8C;&#x6574;&#x76EE;&#x5F55;&#x5982;&#x4E0B;&#xFF08;2023/07/11 &#x66F4;&#x65B0;&#xFF09;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7076744947440812062">#1 &#x91D1;&#x4E09;&#x94F6;&#x56DB;&#x5FC5;&#x5907;&#xFF0C;&#x5168;&#x9762;&#x603B;&#x7ED3; Kotlin &#x9762;&#x8BD5;&#x77E5;&#x8BC6;&#x70B9;</a></li>
<li><a href="https://dev.newban.cn/6958346113552220173">#2 &#x59D4;&#x6258;&#x673A;&#x5236; &amp; &#x539F;&#x7406; &amp; &#x5E94;&#x7528;</a></li>
<li><a href="https://dev.newban.cn/6958346113552220173">#3 &#x6269;&#x5C55;&#x51FD;&#x6570;&#xFF08;&#x7EC8;&#x4E8E;&#x77E5;&#x9053;&#x4E3A;&#x4EC0;&#x4E48; with &#x7528; this&#xFF0C;let &#x7528; it&#xFF09;</a></li>
</ul>
</blockquote>
<blockquote>
<p><strong>&#x2B50;&#xFE0F; &#x6C38;&#x8FDC;&#x76F8;&#x4FE1;&#x7F8E;&#x597D;&#x7684;&#x4E8B;&#x60C5;&#x5373;&#x5C06;&#x53D1;&#x751F;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x5C0F;&#x5F6D;&#x7684; Android &#x4EA4;&#x6D41;&#x793E;&#x7FA4;~</strong></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/8e6e43ea455066a654617d488a6a76144015fd9b22de3309a5caf7805905550a" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c87190114d4ecce76c65639104273be7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6934698604955172877.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6934698604955172877.html" itemprop="url">3最长递增子序列(附带动态规划知识点讲解)｜刷题打卡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-03-01T22:54:42+08:00">
                2021-03-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x4E00;&#x3001;&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;"><a href="#&#x4E00;&#x3001;&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;" class="headerlink" title="&#x4E00;&#x3001;&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;"></a>&#x4E00;&#x3001;&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/0b78ae72b92f6ab5c008e9c1487615291a88fbf51aebdbcdc2fcbe8b3a7f6e74" alt><br><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/0c54a81c3b824112fc270485a58fd4042b4507abdf5f21de7e08e5e82b496714" alt></p>
<h2 id="&#x4E8C;&#x3001;&#x601D;&#x8DEF;&#x5206;&#x6790;&#xFF1A;"><a href="#&#x4E8C;&#x3001;&#x601D;&#x8DEF;&#x5206;&#x6790;&#xFF1A;" class="headerlink" title="&#x4E8C;&#x3001;&#x601D;&#x8DEF;&#x5206;&#x6790;&#xFF1A;"></a>&#x4E8C;&#x3001;&#x601D;&#x8DEF;&#x5206;&#x6790;&#xFF1A;</h2><blockquote>
<p>&#x8FD9;&#x662F;&#x4E00;&#x9053;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x52A8;&#x6001;&#x89C4;&#x5212;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x8BB2;&#x89E3;&#x4E0B;&#x52A8;&#x6001;&#x89C4;&#x5212;&#x7684;&#x4E00;&#x822C;&#x601D;&#x8DEF;<br>&#x52A8;&#x6001;&#x89C4;&#x5212;&#x7B97;&#x6CD5;&#x80FD;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x7279;&#x5F81;&#xFF1A;</p>
</blockquote>
<ol>
<li>&#x5177;&#x6709;&#x76F8;&#x540C;&#x5B50;&#x95EE;&#x9898;&#xFF1A;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x8981;&#x4FDD;&#x8BC1;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x80FD;&#x591F;&#x5206;&#x89E3;&#x51FA;&#x51E0;&#x4E2A;&#x5B50;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x901A;&#x8FC7;&#x8FD9;&#x4E9B;&#x5B50;&#x95EE;&#x9898;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;</li>
<li>&#x6EE1;&#x8DB3;&#x6700;&#x4F18;&#x5316;&#x539F;&#x7406;&#xFF08;&#x6700;&#x4F18;&#x5B50;&#x7ED3;&#x6784;&#xFF09;&#xFF1A;&#x95EE;&#x9898;&#x7684;&#x6700;&#x4F18;&#x89E3;&#x5305;&#x542B;&#x5B50;&#x95EE;&#x9898;&#x7684;&#x6700;&#x4F18;&#x89E3;&#x3002;&#x53CD;&#x8FC7;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5B50;&#x95EE;&#x9898;&#x7684;&#x6700;&#x4F18;&#x89E3;&#xFF0C;&#x63A8;&#x5BFC;&#x51FA;&#x95EE;&#x9898;&#x7684;&#x6700;&#x4F18;&#x89E3;&#x3002;</li>
<li>&#x5177;&#x6709;&#x65E0;&#x540E;&#x6548;&#x6027;&#xFF1A;&#x6BCF;&#x4E2A;&#x5B50;&#x95EE;&#x9898;&#x7684;&#x51B3;&#x7B56;&#xFF0C;&#x4E0D;&#x80FD;&#x591F;&#x5BF9;&#x89E3;&#x51B3;&#x5176;&#x4ED6;&#x672A;&#x6765;&#x7684;&#x95EE;&#x9898;&#x4EA7;&#x751F;&#x5F71;&#x54CD;<strong>&#x7A0D;&#x540E;&#x4F1A;&#x89E3;&#x91CA;&#x672C;&#x9898;&#x5982;&#x4F55;&#x6D88;&#x9664;&#x540E;&#x6548;&#x6027;</strong></li>
</ol>
<h3 id="&#x89E3;&#x9898;&#x6B65;&#x9AA4;"><a href="#&#x89E3;&#x9898;&#x6B65;&#x9AA4;" class="headerlink" title="&#x89E3;&#x9898;&#x6B65;&#x9AA4;"></a>&#x89E3;&#x9898;&#x6B65;&#x9AA4;</h3><p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x786E;&#x5B9A;&#x95EE;&#x9898;&#x7684;&#x5B50;&#x95EE;&#x9898; &#xFF0C;&#x8981;&#x70B9;&#xFF1A;&#x6CE8;&#x610F;&#x5206;&#x6790;&#x54EA;&#x4E9B;&#x91CF;&#x968F;&#x7740;&#x95EE;&#x9898;&#x89C4;&#x6A21;&#x7684;&#x53D8;&#x5C0F;&#x662F;&#x4F1A;&#x53D8;&#x5C0F;&#x7684;&#xFF0C;&#x54EA;&#x4E9B;&#x53D8;&#x91CF;&#x4E0E;&#x95EE;&#x9898;&#x65E0;&#x5173;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x786E;&#x5B9A;&#x72B6;&#x6001;&#xFF0C; &#x8981;&#x70B9;&#xFF1A;&#x7ED3;&#x5408;&#x5B50;&#x95EE;&#x9898;&#xFF0C;&#x6562;&#x60F3;&#x6562;&#x8BD5;&#xFF0C;&#x4E0D;&#x8981;&#x8F7B;&#x6613;&#x5426;&#x5B9A;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#xFF0C;&#x591A;&#x601D;&#x8003;&#xFF0C;&#x4E0D;&#x8981;&#x5E0C;&#x671B;&#x6BCF;&#x4E2A;&#x9898;&#x90FD;&#x80FD;&#x4E00;&#x8E74;&#x800C;&#x5C31;&#xFF01;</p>
<p>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;<strong>&#x63A8;&#x51FA;&#x72B6;&#x6001;&#x8F6C;&#x79FB;&#x65B9;&#x7A0B;</strong> &#x8981;&#x70B9;&#xFF1A;&#x6CE8;&#x610F;&#x9A8C;&#x8BC1;&#x9002;&#x7528;&#x6761;&#x4EF6;&#x662F;&#x5426;&#x6EE1;&#x8DB3;&#xFF0C;&#x6CE8;&#x610F;&#x4E0D;&#x8981;&#x6F0F;&#x6389;&#x6761;&#x4EF6;&#x3002;</p>
<p>&#x7B2C;&#x56DB;&#x6B65;&#xFF1A;&#x786E;&#x5B9A;&#x8FB9;&#x754C;&#x6761;&#x4EF6; &#x8981;&#x70B9;&#xFF1A;&#x5148;&#x6839;&#x636E;&#x72B6;&#x6001;&#x542B;&#x4E49;&#x786E;&#x5B9A;&#xFF0C;&#x786E;&#x5B9A;&#x540E;&#x9A8C;&#x8BC1;&#x7B2C;&#x4E00;&#x5C42;&#x662F;&#x5426;&#x6B63;&#x786E;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x6B63;&#x786E;&#x6216;<br>&#x8005;&#x65E0;&#x6CD5;&#x6309;&#x542B;&#x4E49;&#x786E;&#x5B9A;&#xFF0C;&#x5219;&#x4E5F;&#x53EF;&#x4EE5;&#x91C7;&#x7528;&#x7B2C;&#x4E00;&#x5C42;&#x7684;&#x503C;&#x53CD;&#x63A8;&#x7684;&#x65B9;&#x5F0F;&#x786E;&#x5B9A;&#x8FB9;&#x754C;&#x3002;</p>
<p>&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x786E;&#x5B9A;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F; &#x8981;&#x70B9;&#xFF1A;&#x6839;&#x636E;&#x62D3;&#x6251;&#x5E8F;&#x662F;&#x5426;&#x660E;&#x663E;&#x548C;&#x4E2A;&#x4EBA;&#x4E60;&#x60EF;&#x786E;&#x5B9A;&#xFF01;</p>
<p>&#x7B2C;&#x516D;&#x6B65;&#xFF1A;&#x5982;&#x679C;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x786E;&#x5B9A;&#x4F18;&#x5316;&#x65B9;&#x6CD5;&#xFF01; &#x8981;&#x70B9;&#xFF1A;&#x6CE8;&#x610F;&#x4F18;&#x5148;&#x8003;&#x8651;&#x80FD;&#x5426;&#x964D;&#x7EF4;&#xFF0C;&#x4E0D;&#x8981;&#x5C40;&#x9650;&#x4E8E;&#x5355;&#x8C03;&#x961F;&#x5217;&#xFF0C;&#x56DB;&#x8FB9;&#x5F62;&#x4E0D;&#x7B49;&#x5F0F;&#x8FD9;&#x4E9B;&#x6807;&#x51C6;&#x7684;&#x7528;&#x4E8E;&#x8B64;&#x8B70;&#x4F18;&#x5316;&#x7684;&#x4E1C;&#x897F;&#xFF0C;&#x6269;&#x5BBD;&#x601D;&#x7EF4;&#xFF0C;&#x907F;&#x514D;&#x5B9A;&#x5F0F;&#xFF01;</p>
<h3 id="&#x5B9E;&#x8DF5;&#x51FA;&#x771F;&#x77E5;"><a href="#&#x5B9E;&#x8DF5;&#x51FA;&#x771F;&#x77E5;" class="headerlink" title="&#x5B9E;&#x8DF5;&#x51FA;&#x771F;&#x77E5;"></a>&#x5B9E;&#x8DF5;&#x51FA;&#x771F;&#x77E5;</h3><p>&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x5728;&#x8FD9;&#x9053;&#x9898;&#x4E2D;&#xFF0C;&#x95EE;&#x9898;&#x89C4;&#x6A21;&#x65E0;&#x7591;&#x662F;&#x6570;&#x7EC4;&#x6700;&#x5927;&#x957F;&#x5EA6;&#xFF08;&#x4F60;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x53F3;&#x6307;&#x9488;&#xFF09;&#xFF0C;&#x800C;&#x968F;&#x7740;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x51CF;&#x5C0F;&#xFF0C;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x7684;&#x957F;&#x5EA6;&#x4E5F;&#x4F1A;&#x51CF;&#x5C0F;&#x3002;&#x4F46;&#x662F;&#xFF01;&#x957F;&#x5EA6;&#x4E5F;&#x53EF;&#x80FD;&#x4E0D;&#x53D8;&#xFF0C;&#x56E0;&#x4E3A;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x51CF;&#x5C0F;&#x65F6;&#x6392;&#x9664;&#x7684;&#x90A3;&#x4E2A;&#x6570;&#xFF0C;&#x672A;&#x5FC5;&#x5305;&#x542B;&#x5728;&#x5F53;&#x524D;&#x7684;&#x6700;&#x957F;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x4E2D;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x4E4B;&#x524D;&#x8BF4;&#x5230;<strong>&#x540E;&#x6548;&#x6027;&#x95EE;&#x9898;</strong>&#xFF0C;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x662F;&#x5426;&#x9009;&#x62E9;&#x4E86;&#x7B2C;<code>i</code>&#x4E2A;&#x70B9;&#xFF0C;&#x4F5C;&#x4E3A;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x8FD9;&#x5BF9;&#x540E;&#x9762;&#x7684;&#x7B54;&#x6848;&#x4E00;&#x5B9A;&#x662F;&#x6709;&#x5F71;&#x54CD;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x72B6;&#x6001;&#x4E3A;<code>dp[i][0]</code>&#x4E3A;&#x957F;&#x5EA6;&#x4E3A;i&#x65F6;&#xFF0C;&#x4E0D;&#x9009;&#x62E9;&#x7B2C;i&#x4E2A;&#x70B9;&#x52A0;&#x5165;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x7684;&#x957F;&#x5EA6;&#xFF0C;<code>dp[i][1]</code>&#x4E3A;&#x957F;&#x5EA6;&#x4E3A;i&#x65F6;&#xFF0C;&#x9009;&#x62E9;&#x7B2C;i&#x4E2A;&#x70B9;&#x52A0;&#x5165;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x7684;&#x957F;&#x5EA6;&#x3002;</p>
<p>&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;<strong>&#x63A8;&#x51FA;&#x72B6;&#x6001;&#x8F6C;&#x79FB;&#x65B9;&#x7A0B;</strong>&#xFF0C;&#x4E0D;&#x9009;&#x62E9;&#x7B2C;i&#x4E2A;&#x70B9;&#x52A0;&#x5165;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x65F6;&#xFF0C;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;dp[i - 1][*]&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x800C;&#x9009;&#x62E9;&#x7B2C;i&#x4E2A;&#x70B9;&#x52A0;&#x5165;&#x9012;&#x589E;&#x5B50;&#x5E8F;&#x5217;&#x65F6;&#xFF0C;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;dp[&#x8FC7;&#x53BB;&#x7684;&#x70B9;]+1&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x70B9;&#x7684;&#x503C;&#x5FC5;&#x987B;&#x4E25;&#x683C;&#x5C0F;&#x4E8E;&#x7B2C;i&#x4E2A;&#x70B9;&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x70B9;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#xFF0C;&#x5219;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;1&#x3002;&#x5177;&#x4F53;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C++&#x590D;&#x5236;&#x4EE3;&#x7801;dp[i][0] = max(dp[i - 1][0] , dp[i - 1][1]);</span><br><span class="line">dp[i][1] = 1;</span><br><span class="line">if(nums[j] &lt; nums[i])dp[i][1] = max(dp[j][1] + 1, dp[i][1]);</span><br></pre></td></tr></table></figure>

<p>&#x7B2C;&#x56DB;&#x6B65;: &#x8FB9;&#x754C;&#x6761;&#x4EF6;&#xFF0C;&#x65B9;&#x7A0B;&#x9700;&#x8981;&#x6839;&#x636E;&#x524D;&#x9762;&#x7684;&#x8282;&#x70B9;&#x800C;&#x5F97;&#x5230;&#x7B54;&#x6848;&#xFF0C;&#x56E0;&#x6B64;i == 0&#x65F6;&#xFF0C;&#x662F;&#x6B65;&#x5177;&#x5907;<strong>&#x524D;&#x9762;&#x7684;&#x8282;&#x70B9;</strong>&#x7684;&#xFF0C;&#x9700;&#x8981;&#x5355;&#x72EC;&#x6307;&#x5B9A;</p>
<p>&#x7B2C;&#x4E94;&#x6B65;&#xFF1A;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x7565;</p>
<p>&#x7B2C;&#x516D;&#x6B65;&#xFF1A;&#x4F18;&#x5316;&#x7565;</p>
<h2 id="&#x4E09;&#x3001;AC-&#x4EE3;&#x7801;&#xFF1A;"><a href="#&#x4E09;&#x3001;AC-&#x4EE3;&#x7801;&#xFF1A;" class="headerlink" title="&#x4E09;&#x3001;AC &#x4EE3;&#x7801;&#xFF1A;"></a>&#x4E09;&#x3001;AC &#x4EE3;&#x7801;&#xFF1A;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">C++&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLIS(vector&lt;int&gt;&amp; nums) {</span><br><span class="line">        int dp[nums.size()][2];</span><br><span class="line">        dp[0][0] = 0;</span><br><span class="line">        dp[0][1] = 1;</span><br><span class="line">        for(int i = 1 ; i &lt; nums.size(); i++){</span><br><span class="line">            </span><br><span class="line">            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1]);</span><br><span class="line">            int j = i - 1;</span><br><span class="line">            dp[i][1] = 1;</span><br><span class="line">            while(j &gt;= 0){</span><br><span class="line">                if(nums[j] &lt; nums[i])dp[i][1] = max(dp[j][1] + 1, dp[i][1]);</span><br><span class="line">                j--;</span><br><span class="line">            }</span><br><span class="line">            // printf(&quot;%d:%d &quot;, dp[i][0],dp[i][1]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        return max(dp[nums.size() - 1][0] , dp[nums.size() - 1][1]);</span><br><span class="line">    </span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<h2 id="&#x56DB;&#x3001;&#x603B;&#x7ED3;&#xFF1A;"><a href="#&#x56DB;&#x3001;&#x603B;&#x7ED3;&#xFF1A;" class="headerlink" title="&#x56DB;&#x3001;&#x603B;&#x7ED3;&#xFF1A;"></a>&#x56DB;&#x3001;&#x603B;&#x7ED3;&#xFF1A;</h2><p>&#x8FD9;&#x9053;&#x9898;&#x5728;&#x4E0D;&#x96BE;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x81EA;&#x5DF1;&#x53BB;&#x6D88;&#x9664;&#x65E0;&#x540E;&#x6548;&#x6027;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x6211;&#x89C9;&#x5F97;&#x6709;&#x4F5C;&#x4E3A;&#x4E00;&#x9053;&#x4F8B;&#x9898;&#x8BB2;&#x7684;&#x4EF7;&#x503C;&#x3002;<br>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x53BB;&#x518D;&#x770B;&#x770B;&#x52A8;&#x6001;&#x89C4;&#x5212;&#x7684;&#x77E5;&#x8BC6;&#xFF0C;&#x5B66;&#x6210;&#x4EE5;&#x540E;&#x7EE7;&#x7EED;&#x53D1;&#x8FD9;&#x4E2A;&#x7CFB;&#x5217;&#x3002;</p>
<p>&#x672C;&#x6587;&#x6B63;&#x5728;&#x53C2;&#x4E0E;&#x300C;&#x6398;&#x91D1; 2021 &#x6625;&#x62DB;&#x95EF;&#x5173;&#x6D3B;&#x52A8;&#x300D;, &#x70B9;&#x51FB;&#x67E5;&#x770B; <a href="https://dev.newban.cn/6933147477399109640">&#x6D3B;&#x52A8;&#x8BE6;&#x60C5;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/f68e8c2c119550e1d77027b0e80ac921.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6933929275007598599.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6933929275007598599.html" itemprop="url">Java 多线程   漫谈 Volatile</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-02-27T21:07:47+08:00">
                2021-02-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x603B;&#x6587;&#x6863; :<a href="https://dev.newban.cn/6941642435189538824">&#x6587;&#x7AE0;&#x76EE;&#x5F55;</a>  </p>
<p>Github : <a href="/external_links/f4c0695dd8cd8371c2f2fc9edde11029.html" target="blank" rel="noopener">github.com/black-ant</a></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/6290f3e2edd949e362ce64c493c092058e3f863765746e630faa4bea1e867e62" alt="volatile005.jpg"></p>
<h3 id="&#x4E00;-volatile-&#x57FA;&#x7840;"><a href="#&#x4E00;-volatile-&#x57FA;&#x7840;" class="headerlink" title="&#x4E00; . volatile &#x57FA;&#x7840;"></a>&#x4E00; . volatile &#x57FA;&#x7840;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&gt; volatile &#x4FDD;&#x8BC1;&#x5185;&#x5B58;&#x7684;&#x53EF;&#x89C1;&#x6027; &#x5E76;&#x4E14; &#x7981;&#x6B62;&#x6307;&#x4EE4;&#x91CD;&#x6392;</span><br><span class="line">&gt; volatile&#xA0;&#x63D0;&#x4F9B; happens-before &#x7684;&#x4FDD;&#x8BC1;&#xFF0C;&#x786E;&#x4FDD;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x4FEE;&#x6539;&#x80FD;&#x5BF9;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x662F;&#x53EF;&#x89C1;&#x7684;  </span><br><span class="line">&gt; &#x4FDD;&#x8BC1;&#x7EBF;&#x7A0B;&#x53EF;&#x89C1;&#x6027;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x5B9A;&#x7684;&#x6709;&#x5E8F;&#x6027;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">// Java &#x4E2D;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#xA0;volatile&#xA0;&#x7C7B;&#x578B;&#x6570;&#x7EC4;&#xFF0C;&#x4E0D;&#x8FC7;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x6307;&#x5411;&#x6570;&#x7EC4;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6574;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/582415ffd5c87ee69ffb542ddb85eb330760f9022f2f160c516ff4795405a6ca" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/ba788bfd70bc52400c402e12b3c42d35aa326c4da5398450729233ff50d5b754" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/8a8a9d6379636f83c1d897c979154c65f9439511a605b1e6b72956faf1060ffe" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/23a2596ea9c6826fa24f8374313f414d90bd729d3e338119cf12bf07b723b705" alt></p>
<h3 id="&#x4E8C;-volatile-&#x6DF1;&#x5165;&#x77E5;&#x8BC6;&#x70B9;"><a href="#&#x4E8C;-volatile-&#x6DF1;&#x5165;&#x77E5;&#x8BC6;&#x70B9;" class="headerlink" title="&#x4E8C; . volatile &#x6DF1;&#x5165;&#x77E5;&#x8BC6;&#x70B9;"></a>&#x4E8C; . volatile &#x6DF1;&#x5165;&#x77E5;&#x8BC6;&#x70B9;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&gt; &#x8BFB;&#x5199;&#x4E3B;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6CA1;&#x6709; CPU &#x4E2D;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x7684;&#x901F;&#x5EA6;&#x5FEB; , &#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6548;&#x7387; , &#x4F7F;&#x7528; CPU &#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x6765;&#x63D0;&#x9AD8;&#x6548;&#x7387;</span><br><span class="line"></span><br><span class="line">&gt; CPU &#x9AD8;&#x901F;&#x7F13;&#x5B58; : CPU&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x4E3A;&#x67D0;&#x4E2A;CPU&#x72EC;&#x6709;&#xFF0C;&#x53EA;&#x4E0E;&#x5728;&#x8BE5;CPU&#x8FD0;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x6709;&#x5173;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// &#x539F;&#x7406; @ https://www.cnblogs.com/xrq730/p/7048693.html</span><br><span class="line">Step 1 : &#x5148;&#x8BF4;&#x8BF4; CPU &#x7F13;&#x5B58; , CPU &#x6709;&#x591A;&#x7EA7;&#x7F13;&#x5B58; , &#x67E5;&#x8BE2;&#x6570;&#x636E;&#x4F1A;&#x7531;&#x4E00;&#x7EA7;&#x5230;&#x4E09;&#x7EA7;&#x4E2D;</span><br><span class="line">&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#xFF1A;&#x7B80;&#x79F0;L1 Cache&#xFF0C;&#x4F4D;&#x4E8E;CPU&#x5185;&#x6838;&#x7684;&#x65C1;&#x8FB9;&#xFF0C;&#x662F;&#x4E0E;CPU&#x7ED3;&#x5408;&#x6700;&#x4E3A;&#x7D27;&#x5BC6;&#x7684;CPU&#x7F13;&#x5B58;</span><br><span class="line">&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#xFF1A;&#x7B80;&#x79F0;L2 Cache&#xFF0C;&#x5206;&#x5185;&#x90E8;&#x548C;&#x5916;&#x90E8;&#x4E24;&#x79CD;&#x82AF;&#x7247;&#xFF0C;&#x5185;&#x90E8;&#x82AF;&#x7247;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x4E0E;&#x4E3B;&#x9891;&#x76F8;&#x540C;&#xFF0C;&#x5916;&#x90E8;&#x82AF;&#x7247;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x8FD0;&#x884C;&#x901F;&#x5EA6;&#x5219;&#x53EA;&#x6709;&#x4E3B;&#x9891;&#x7684;&#x4E00;&#x534A;</span><br><span class="line">&#x4E09;&#x7EA7;&#x7F13;&#x5B58;&#xFF1A;&#x7B80;&#x79F0;L3 Cache&#xFF0C;&#x90E8;&#x5206;&#x9AD8;&#x7AEF;CPU&#x624D;&#x6709;    </span><br><span class="line">    </span><br><span class="line">// &#x7F13;&#x5B58;&#x7684;&#x52A0;&#x8F7D;&#x6B21;&#x5E8F;</span><br><span class="line">1 &gt; &#x7A0B;&#x5E8F;&#x4EE5;&#x53CA;&#x6570;&#x636E;&#x88AB;&#x52A0;&#x8F7D;&#x5230;&#x4E3B;&#x5185;&#x5B58;</span><br><span class="line">2 &gt; &#x6307;&#x4EE4;&#x548C;&#x6570;&#x636E;&#x88AB;&#x52A0;&#x8F7D;&#x5230;CPU&#x7F13;&#x5B58;</span><br><span class="line">3 &gt; CPU&#x6267;&#x884C;&#x6307;&#x4EE4;&#xFF0C;&#x628A;&#x7ED3;&#x679C;&#x5199;&#x5230;&#x9AD8;&#x901F;&#x7F13;&#x5B58;</span><br><span class="line">4 &gt; &#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5199;&#x56DE;&#x4E3B;&#x5185;&#x5B58;</span><br><span class="line">    </span><br><span class="line">// Step End : &#x56E0;&#x4E3A;&#x4E0D;&#x540C;&#x7684;&#x7F13;&#x5B58; , &#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x6570;&#x636E;&#x4E0D;&#x4E00;&#x81F4; , &#x6240;&#x4EE5;&#x51FA;&#x73B0;&#x4E86;&#x89C4;&#x5219;</span><br><span class="line">&#x5F53;&#x4E00;&#x4E2A;CPU&#x4FEE;&#x6539;&#x7F13;&#x5B58;&#x4E2D;&#x7684;&#x5B57;&#x8282;&#x65F6;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x5176;&#x4ED6;CPU&#x4F1A;&#x88AB;&#x901A;&#x77E5;&#xFF0C;&#x5B83;&#x4EEC;&#x7684;&#x7F13;&#x5B58;&#x5C06;&#x89C6;&#x4E3A;&#x65E0;&#x6548;</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E09;-volatile-&#x548C;-synchronized-&#x7684;&#x533A;&#x522B;"><a href="#&#x4E09;-volatile-&#x548C;-synchronized-&#x7684;&#x533A;&#x522B;" class="headerlink" title="&#x4E09; . volatile &#x548C; synchronized &#x7684;&#x533A;&#x522B;"></a>&#x4E09; . volatile &#x548C; synchronized &#x7684;&#x533A;&#x522B;</h3><ol>
<li>volatile &#x672C;&#x8D28;&#x662F;&#x5728;&#x544A;&#x8BC9; JVM &#x5F53;&#x524D;&#x53D8;&#x91CF;&#x5728;&#x5BC4;&#x5B58;&#x5668;&#xFF08;&#x5DE5;&#x4F5C;&#x5185;&#x5B58;&#xFF09;&#x4E2D;&#x7684;&#x503C;&#x662F;&#x4E0D;&#x786E;&#x5B9A;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x4ECE;&#x4E3B;&#x5B58;&#x4E2D;&#x8BFB;&#x53D6;&#x3002;synchronized &#x5219;&#x662F;&#x9501;&#x5B9A;&#x5F53;&#x524D;&#x53D8;&#x91CF;&#xFF0C;&#x53EA;&#x6709;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x8BE5;&#x53D8;&#x91CF;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x88AB;&#x963B;&#x585E;&#x4F4F;&#x3002;</li>
<li>volatile &#x4EC5;&#x80FD;&#x4F7F;&#x7528;&#x5728;&#x53D8;&#x91CF;&#x7EA7;&#x522B;&#x3002;synchronized &#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;&#x53D8;&#x91CF;&#x3001;&#x65B9;&#x6CD5;&#x3001;&#x548C;&#x7C7B;&#x7EA7;&#x522B;&#x7684;&#x3002;</li>
<li>volatile &#x4EC5;&#x80FD;&#x5B9E;&#x73B0;&#x53D8;&#x91CF;&#x7684;&#x4FEE;&#x6539;&#x53EF;&#x89C1;&#x6027;&#xFF0C;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;&#x3002;&#x800C;synchronized &#x5219;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x53D8;&#x91CF;&#x7684;&#x4FEE;&#x6539;&#x53EF;&#x89C1;&#x6027;&#x548C;&#x539F;&#x5B50;&#x6027;&#x3002;</li>
<li>volatile &#x4E0D;&#x4F1A;&#x9020;&#x6210;&#x7EBF;&#x7A0B;&#x7684;&#x963B;&#x585E;&#x3002;synchronized &#x53EF;&#x80FD;&#x4F1A;&#x9020;&#x6210;&#x7EBF;&#x7A0B;&#x7684;&#x963B;&#x585E;&#x3002;</li>
<li>volatile &#x6807;&#x8BB0;&#x7684;&#x53D8;&#x91CF;&#x4E0D;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x4F18;&#x5316;&#x3002;synchronized&#x6807;&#x8BB0;&#x7684;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x4F18;&#x5316;&#x3002;</li>
</ol>
<blockquote>
<p>&#x6CE8;&#x610F; &#xFF1A;volatile &#x4E0D;&#x80FD;&#x53D6;&#x4EE3; synchronized</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0ed8d8c12f8ba393cb443dba50cb27ea83999adff13dd336a868fd6386ed66b5" alt></p>
<h3 id="&#x56DB;-volatile-&#x539F;&#x7406;"><a href="#&#x56DB;-volatile-&#x539F;&#x7406;" class="headerlink" title="&#x56DB; . volatile &#x539F;&#x7406;"></a>&#x56DB; . volatile &#x539F;&#x7406;</h3><blockquote>
<p>&#x89C2;&#x5BDF;&#x52A0;&#x5165; volatile &#x5173;&#x952E;&#x5B57;&#x548C;&#x6CA1;&#x6709;&#x52A0;&#x5165; volatile &#x5173;&#x952E;&#x5B57;&#x65F6;&#x6240;&#x751F;&#x6210;&#x7684;&#x6C47;&#x7F16;&#x4EE3;&#x7801;&#x53D1;&#x73B0;&#xFF0C;&#x52A0;&#x5165;volatile &#x5173;&#x952E;&#x5B57;&#x65F6;&#xFF0C;&#x4F1A;&#x591A;&#x51FA;&#x4E00;&#x4E2A; lock &#x524D;&#x7F00;&#x6307;&#x4EE4;&#x3002;lock &#x524D;&#x7F00;&#x6307;&#x4EE4;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x3002;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x662F;&#x4E00;&#x7EC4;&#x5904;&#x7406;&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x6765;&#x5B9E;&#x73B0;&#x5BF9;&#x5185;&#x5B58;&#x64CD;&#x4F5C;&#x7684;&#x987A;&#x5E8F;&#x9650;&#x5236;&#x3002;volatile &#x7684;&#x5E95;&#x5C42;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x6765;&#x5B9E;&#x73B0;&#x7684;</p>
</blockquote>
<ul>
<li>Step 1 : &#x5199;volatile&#x7684;&#x65F6;&#x5019;&#x751F;&#x6210;&#x6C47;&#x7F16;&#x7801;&#x662F; lock addl $0x0, (%rsp)</li>
<li>Step 2 : &#x5728;&#x5199;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x4F7F;&#x7528;&#x4E86;lock&#x524D;&#x7F00;&#xFF0C;&#x9501;&#x4F4F;&#x4E86;&#x603B;&#x7EBF;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x8FD9;&#x6837;&#x5176;&#x4ED6;&#x7684;&#x5199;&#x548C;&#x8BFB;&#x90FD;&#x8981;&#x7B49;&#x5F85;&#x9501;&#x7684;&#x91CA;&#x653E;&#x3002;</li>
<li>Step 3 : &#x5F53;&#x5199;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x628A;&#x7F13;&#x5B58;&#x5237;&#x65B0;&#x5230;&#x4E3B;&#x5185;&#x5B58;&#x3002;</li>
</ul>
<ol>
<li>&#x8BFB;volatile&#x5C31;&#x5F88;&#x597D;&#x7406;&#x89E3;&#x4E86;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x6C47;&#x7F16;&#x6307;&#x4EE4;&#xFF0C;CPU&#x53D1;&#x73B0;&#x5BF9;&#x5E94;&#x5730;&#x5740;&#x7684;&#x7F13;&#x5B58;&#x88AB;&#x9501;&#x4E86;&#xFF0C;&#x7B49;&#x5F85;&#x9501;&#x7684;&#x91CA;&#x653E;&#xFF0C;&#x7F13;&#x5B58;&#x4E00;&#x81F4;&#x6027;&#x534F;&#x8BAE;&#x4F1A;&#x4FDD;&#x8BC1;&#x5B83;&#x8BFB;&#x5230;&#x6700;&#x65B0;&#x7684;&#x503C;&#x3002;</li>
<li>&#x53EA;&#x9700;&#x8981;&#x5BF9;&#x5199;volatile&#x7684;&#x4F7F;&#x7528;&#x7528;lock&#x5BF9;&#x603B;&#x7EBF;&#x52A0;&#x9501;&#x5C31;&#x884C;&#x4E86;&#xFF0C;&#x8FD9;&#x6837;&#x5176;&#x4ED6;&#x7684;&#x8BFB;&#x3001;&#x5199;&#x64CD;&#x4F5C;&#x7B49;&#x5F85;&#x603B;&#x7EBF;&#x91CA;&#x653E;&#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x8BFB;&#x3002;Lock&#x4F1A;&#x8BA9;&#x5176;&#x4ED6;CPU&#x7684;&#x7F13;&#x5B58;invalide&#xFF0C;&#x4ECE;&#x5185;&#x5B58;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// volatile &#x7684;&#x5185;&#x5B58;&#x8BED;&#x4E49;</span><br><span class="line">- &#x5F53;&#x5199;&#x4E00;&#x4E2A;&#xA0;volatile&#xA0;&#x53D8;&#x91CF;&#x65F6;&#xFF0C;JMM &#x4F1A;&#x628A;&#x8BE5;&#x7EBF;&#x7A0B;&#x5BF9;&#x5E94;&#x7684;&#x672C;&#x5730;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x5171;&#x4EAB;&#x53D8;&#x91CF;&#x503C;&#xFF0C;&#x7ACB;&#x5373;&#x5237;&#x65B0;&#x5230;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x3002;</span><br><span class="line">- &#x5F53;&#x8BFB;&#x4E00;&#x4E2A;&#xA0;volatile&#xA0;&#x53D8;&#x91CF;&#x65F6;&#xFF0C;JMM &#x4F1A;&#x628A;&#x8BE5;&#x7EBF;&#x7A0B;&#x5BF9;&#x5E94;&#x7684;&#x672C;&#x5730;&#x5185;&#x5B58;&#x8BBE;&#x7F6E;&#x4E3A;&#x65E0;&#x6548;&#xFF0C;&#x76F4;&#x63A5;&#x4ECE;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x8BFB;&#x53D6;&#x5171;&#x4EAB;&#x53D8;&#x91CF;</span><br><span class="line">&gt; &#x6240;&#x4EE5;&#xA0;volatile&#xA0;&#x7684;&#x5199;&#x5185;&#x5B58;&#x8BED;&#x4E49;&#x662F;&#x76F4;&#x63A5;&#x5237;&#x65B0;&#x5230;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x8BFB;&#x7684;&#x5185;&#x5B58;&#x8BED;&#x4E49;&#x662F;&#x76F4;&#x63A5;&#x4ECE;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x8BFB;&#x53D6;&#x3002;</span><br><span class="line"></span><br><span class="line">// volatile &#x7684;&#x5185;&#x5B58;&#x8BED;&#x4E49;&#x5B9E;&#x73B0;&#x539F;&#x7406; : &#x4E3A;&#x4E86;&#x5B9E;&#x73B0;&#xA0;volatile&#xA0;&#x7684;&#x5185;&#x5B58;&#x8BED;&#x4E49;&#xFF0C;JMM &#x4F1A;&#x9650;&#x5236;&#x91CD;&#x6392;&#x5E8F;</span><br><span class="line">1. &#x5982;&#x679C;&#x7B2C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x4E3A;&#xA0;volatile&#xA0;&#x8BFB;&#xFF0C;&#x5219;&#x4E0D;&#x7BA1;&#x7B2C;&#x4E8C;&#x4E2A;&#x64CD;&#x4F5C;&#x662F;&#x5565;&#xFF0C;&#x90FD;&#x4E0D;&#x80FD;&#x91CD;&#x6392;&#x5E8F;&#x3002;</span><br><span class="line">    ?- &#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x786E;&#x4FDD;volatile&#xA0;&#x8BFB;&#x4E4B;&#x540E;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x91CD;&#x6392;&#x5E8F;&#x5230;&#xA0;volatile&#xA0;&#x8BFB;&#x4E4B;&#x524D;&#xFF1B;</span><br><span class="line">2. &#x5982;&#x679C;&#x7B2C;&#x4E8C;&#x4E2A;&#x64CD;&#x4F5C;&#x4E3A;&#xA0;volatile&#xA0;&#x5199;&#xFF0C;&#x5219;&#x4E0D;&#x7BA1;&#x7B2C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x662F;&#x5565;&#xFF0C;&#x90FD;&#x4E0D;&#x80FD;&#x91CD;&#x6392;&#x5E8F;&#x3002;</span><br><span class="line">    ?- &#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x786E;&#x4FDD;volatile&#xA0;&#x5199;&#x4E4B;&#x524D;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4E0D;&#x4F1A;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x91CD;&#x6392;&#x5E8F;&#x5230;&#xA0;volatile&#xA0;&#x5199;&#x4E4B;&#x540E;&#xFF1B;</span><br><span class="line">3. &#x5F53;&#x7B2C;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#xA0;volatile&#xA0;&#x5199;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x64CD;&#x4F5C;&#x4E3A;&#xA0;volatile&#xA0;&#x8BFB;&#x65F6;&#xFF0C;&#x4E0D;&#x80FD;&#x91CD;&#x6392;&#x5E8F;&#x3002;</span><br><span class="line">    </span><br><span class="line">// volatile&#xA0;&#x7684;&#x5E95;&#x5C42;&#x5B9E;&#x73B0; : &#x5185;&#x5B58;&#x5C4F;&#x969C; , &#x6709;&#x4E86;&#x5185;&#x5B58;&#x5C4F;&#x969C;,  &#x5C31;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x91CD;&#x6392;&#x5E8F;</span><br><span class="line">-&gt; &#x5BF9;&#x4E8E;&#x7F16;&#x8BD1;&#x5668;&#x6765;&#x8BF4;&#xFF0C;&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x6700;&#x4F18;&#x5E03;&#x7F6E;&#x6765;&#x6700;&#x5C0F;&#x5316;&#x63D2;&#x5165;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x7684;&#x603B;&#x6570;&#x51E0;&#x4E4E;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#xFF0C;JMM &#x91C7;&#x7528;&#x4E86;&#x4FDD;&#x5B88;&#x7B56;&#x7565;    </span><br><span class="line">&#x2022; &#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#xA0;volatile&#xA0;&#x5199;&#x64CD;&#x4F5C;&#x524D;&#x9762;&#xFF0C;&#x63D2;&#x5165;&#x4E00;&#x4E2A; StoreStore &#x5C4F;&#x969C;</span><br><span class="line">    - StoreStore &#x5C4F;&#x969C;&#xFF1A;&#x4FDD;&#x8BC1;&#x5728;&#xA0;volatile&#xA0;&#x5199;&#x4E4B;&#x524D;&#xFF0C;&#x5176;&#x524D;&#x9762;&#x7684;&#x6240;&#x6709;&#x666E;&#x901A;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x90FD;&#x5DF2;&#x7ECF;&#x5237;&#x65B0;&#x5230;&#x4E3B;&#x5185;&#x5B58;&#x4E2D;&#x3002;</span><br><span class="line">&#x2022; &#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#xA0;volatile&#xA0;&#x5199;&#x64CD;&#x4F5C;&#x540E;&#x9762;&#xFF0C;&#x63D2;&#x5165;&#x4E00;&#x4E2A; StoreLoad &#x5C4F;&#x969C;</span><br><span class="line">    - StoreLoad &#x5C4F;&#x969C;&#xFF1A;&#x907F;&#x514D;&#xA0;volatile&#xA0;&#x5199;&#xFF0C;&#x4E0E;&#x540E;&#x9762;&#x53EF;&#x80FD;&#x6709;&#x7684;&#xA0;volatile&#xA0;&#x8BFB; / &#x5199;&#x64CD;&#x4F5C;&#x91CD;&#x6392;&#x5E8F;&#x3002;</span><br><span class="line">&#x2022; &#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#xA0;volatile&#xA0;&#x8BFB;&#x64CD;&#x4F5C;&#x540E;&#x9762;&#xFF0C;&#x63D2;&#x5165;&#x4E00;&#x4E2A; LoadLoad &#x5C4F;&#x969C;</span><br><span class="line">    - LoadLoad &#x5C4F;&#x969C;&#xFF1A;&#x7981;&#x6B62;&#x5904;&#x7406;&#x5668;&#x628A;&#x4E0A;&#x9762;&#x7684;&#xA0;volatile&#x8BFB;&#xFF0C;&#x4E0E;&#x4E0B;&#x9762;&#x7684;&#x666E;&#x901A;&#x8BFB;&#x91CD;&#x6392;&#x5E8F;&#x3002;</span><br><span class="line">&#x2022; &#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#xA0;volatile&#xA0;&#x8BFB;&#x64CD;&#x4F5C;&#x540E;&#x9762;&#xFF0C;&#x63D2;&#x5165;&#x4E00;&#x4E2A; LoadStore &#x5C4F;&#x969C;</span><br><span class="line">    - LoadStore &#x5C4F;&#x969C;&#xFF1A;&#x7981;&#x6B62;&#x5904;&#x7406;&#x5668;&#x628A;&#x4E0A;&#x9762;&#x7684;&#xA0;volatile&#x8BFB;&#xFF0C;&#x4E0E;&#x4E0B;&#x9762;&#x7684;&#x666E;&#x901A;&#x5199;&#x91CD;&#x6392;&#x5E8F;&#x3002;</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E94;-volatile-&#x539F;&#x5B50;&#x6027;"><a href="#&#x4E94;-volatile-&#x539F;&#x5B50;&#x6027;" class="headerlink" title="&#x4E94;. volatile &#x539F;&#x5B50;&#x6027;"></a>&#x4E94;. volatile &#x539F;&#x5B50;&#x6027;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&gt; &#x6211;&#x4EEC;&#x9700;&#x8981;&#x533A;&#x522B; volatile &#x53D8;&#x91CF;&#x548C; atomic &#x53D8;&#x91CF;</span><br><span class="line">// volatile &#x5E76;&#x4E0D;&#x80FD;&#x5F88;&#x597D;&#x7684;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;</span><br><span class="line">volatile&#xA0;&#x53D8;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x786E;&#x4FDD;&#x5148;&#x884C;&#x5173;&#x7CFB;&#xFF0C;&#x5373;&#x5199;&#x64CD;&#x4F5C;&#x4F1A;&#x53D1;&#x751F;&#x5728;&#x540E;&#x7EED;&#x7684;&#x8BFB;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#xFF0C;&#x4F46;&#x5B83;&#x5E76;&#x4E0D;&#x80FD;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;&#x3002;&#x4F8B;&#x5982;&#x7528;&#xA0;volatile&#xA0;&#x4FEE;&#x9970;&#xA0;count&#xA0;&#x53D8;&#x91CF;&#xFF0C;&#x90A3;&#x4E48;&#xA0;count++&#xA0;&#x64CD;&#x4F5C;&#x5C31;&#x4E0D;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#x3002;</span><br><span class="line">AtomicInteger &#x7C7B;&#x63D0;&#x4F9B;&#x7684; atomic &#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#x5177;&#x6709;&#x539F;&#x5B50;&#x6027;&#x3002;&#x4F8B;&#x5982;&#xA0;#getAndIncrement()&#xA0;&#x65B9;&#x6CD5;&#xFF0C;&#x4F1A;&#x539F;&#x5B50;&#x6027;&#x7684;&#x8FDB;&#x884C;&#x589E;&#x91CF;&#x64CD;&#x4F5C;&#x628A;&#x5F53;&#x524D;&#x503C;&#x52A0;&#x4E00;&#xFF0C;&#x5176;&#x5B83;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x548C;&#x5F15;&#x7528;&#x53D8;&#x91CF;&#x4E5F;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x76F8;&#x4F3C;&#x64CD;&#x4F5C;&#x3002;</span><br></pre></td></tr></table></figure>

<h3 id="&#x516D;-volatile-&#x6E90;&#x7801;"><a href="#&#x516D;-volatile-&#x6E90;&#x7801;" class="headerlink" title="&#x516D; . volatile &#x6E90;&#x7801;"></a>&#x516D; . volatile &#x6E90;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;TODO : &#x6D89;&#x53CA;&#x5230;&#x6E90;&#x7801; ,&#x5148;&#x7559;&#x5751; , &#x5177;&#x4F53;&#x53EF;&#x4EE5;&#x5148;&#x770B; @ https://www.cnblogs.com/xrq730/p/7048693.html</span><br><span class="line"></span><br><span class="line">// &#x4E3B;&#x8981;&#x8282;&#x70B9; : </span><br><span class="line">0x0000000002931351: lock add dword ptr [rsp],0h  ;</span><br><span class="line">	*putstatic instance; </span><br><span class="line">	- org.xrq.test.design.singleton.LazySingleton::getInstance@13 (line 14)</span><br><span class="line">        </span><br><span class="line">&gt; &#x5C06;&#x53CC;&#x5B57;&#x8282;&#x7684;&#x6808;&#x6307;&#x9488;&#x5BC4;&#x5B58;&#x5668;+0 , &#x4FDD;&#x8BC1;volatile&#x5173;&#x952E;&#x5B57;&#x7684;&#x5185;&#x5B58;&#x53EF;&#x89C1;&#x6027;</span><br><span class="line">        </span><br><span class="line">// &#x57FA;&#x672C;&#x6982;&#x5FF5;&#x4E00; : LOCK# &#x7684;&#x4F5C;&#x7528;</span><br><span class="line"> - &#x9501;&#x603B;&#x7EBF;</span><br><span class="line">        - &#x5176;&#x5B83;CPU&#x5BF9;&#x5185;&#x5B58;&#x7684;&#x8BFB;&#x5199;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#xFF0C;&#x76F4;&#x5230;&#x9501;&#x91CA;&#x653E;</span><br><span class="line">        - &#x4E0D;&#x8FC7;&#x5B9E;&#x9645;&#x540E;&#x6765;&#x7684;&#x5904;&#x7406;&#x5668;&#x90FD;&#x91C7;&#x7528;&#x9501;&#x7F13;&#x5B58;&#x66FF;&#x4EE3;&#x9501;&#x603B;&#x7EBF;</span><br><span class="line">        - &#x56E0;&#x4E3A;&#x9501;&#x603B;&#x7EBF;&#x7684;&#x5F00;&#x9500;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x9501;&#x603B;&#x7EBF;&#x671F;&#x95F4;&#x5176;&#x4ED6;CPU&#x6CA1;&#x6CD5;&#x8BBF;&#x95EE;&#x5185;&#x5B58;</span><br><span class="line">        </span><br><span class="line">- lock&#x540E;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x4F1A;&#x56DE;&#x5199;&#x5DF2;&#x4FEE;&#x6539;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x540C;&#x65F6;&#x8BA9;&#x5176;&#x5B83;CPU&#x76F8;&#x5173;&#x7F13;&#x5B58;&#x884C;&#x5931;&#x6548;&#xFF0C;&#x4ECE;&#x800C;&#x91CD;&#x65B0;&#x4ECE;&#x4E3B;&#x5B58;&#x4E2D;&#x52A0;&#x8F7D;&#x6700;&#x65B0;&#x7684;&#x6570;&#x636E;</span><br><span class="line">- &#x4E0D;&#x662F;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x5374;&#x80FD;&#x5B8C;&#x6210;&#x7C7B;&#x4F3C;&#x5185;&#x5B58;&#x5C4F;&#x969C;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x963B;&#x6B62;&#x5C4F;&#x969C;&#x4E24;&#x904D;&#x7684;&#x6307;&#x4EE4;&#x91CD;&#x6392;&#x5E8F;</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">// &#x57FA;&#x672C;&#x6982;&#x5FF5;&#x4E8C; : &#x7F13;&#x5B58;&#x884C;</span><br><span class="line">- &#x7F13;&#x5B58;&#x662F;&#x5206;&#x6BB5;&#xFF08;line&#xFF09;&#x7684;&#xFF0C;&#x4E00;&#x4E2A;&#x6BB5;&#x5BF9;&#x5E94;&#x4E00;&#x5757;&#x5B58;&#x50A8;&#x7A7A;&#x95F4; , &#x5373;&#x7F13;&#x5B58;&#x884C;</span><br><span class="line">- CPU&#x770B;&#x5230;&#x4E00;&#x6761;&#x8BFB;&#x53D6;&#x5185;&#x5B58;&#x7684;&#x6307;&#x4EE4;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x628A;&#x5185;&#x5B58;&#x5730;&#x5740;&#x4F20;&#x9012;&#x7ED9;&#x4E00;&#x7EA7;&#x6570;&#x636E;&#x7F13;&#x5B58;</span><br><span class="line">- &#x4E00;&#x7EA7;&#x6570;&#x636E;&#x7F13;&#x5B58;&#x68C0;&#x6D4B;&#x662F;&#x5426;&#x7531;&#x7F13;&#x5B58;&#x6BB5; , &#x6CA1;&#x6709;&#x52A0;&#x8F7D;&#x8FD9;&#x7F13;&#x5B58;&#x6BB5;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">// &#x539F;&#x56E0; : volatile &#x57FA;&#x4E8E; &#x7F13;&#x5B58;&#x4E00;&#x81F4;&#x6027;&#x6765;&#x5B9E;&#x73B0;</span><br><span class="line">Step1 : &#x56E0;&#x4E3A;LOCK &#x6548;&#x7387;&#x95EE;&#x9898; ,&#x6240;&#x4EE5;&#x57FA;&#x4E8E;&#x7F13;&#x5B58;&#x4E00;&#x81F4;&#x6027;&#x6765;&#x5904;&#x7406;</span><br><span class="line">Step2 : &#x7F13;&#x5B58;&#x4E00;&#x81F4;&#x6027;&#x4F5C;&#x7528;&#x65F6; &#x4F7F;&#x7528;&#x591A;&#x7EC4;&#x7F13;&#x5B58;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x4EEC;&#x7684;&#x884C;&#x4E3A;&#x770B;&#x8D77;&#x6765;&#x53EA;&#x6709;&#x4E00;&#x7EC4;&#x7F13;&#x5B58;&#x90A3;&#x6837;</span><br><span class="line">Step3 : &#x5E38;&#x89C1;&#x7684;&#x534F;&#x8BAE;&#x662F; snooping &#x548C; MESI</span><br><span class="line">Step4 : snooping &#x7684;&#x4F5C;&#x7528;&#x662F; : &#x4EF2;&#x88C1;&#x6240;&#x6709;&#x7684;&#x5185;&#x5B58;&#x8BBF;&#x95EE;&#x64CD;&#x4F5C;</span><br></pre></td></tr></table></figure>

<h3 id="&#x4E03;-volatile-&#x5B9E;&#x6D4B;"><a href="#&#x4E03;-volatile-&#x5B9E;&#x6D4B;" class="headerlink" title="&#x4E03; . volatile &#x5B9E;&#x6D4B;"></a>&#x4E03; . volatile &#x5B9E;&#x6D4B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6D4B;&#x8BD5;&#x539F;&#x5B50;&#x6027; , &#x7ED3;&#x679C; ThreadC   : ------&gt; count :9823 &lt;-------</span><br><span class="line">// Thread &#x4E2D;&#x64CD;&#x4F5C;</span><br><span class="line">    public static void addCount() {</span><br><span class="line">        for (int i = 0; i &lt; 100; i++) {</span><br><span class="line">            count++;</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;------&gt; count :{} &lt;-------&quot;, count);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        ThreadC[] threadCS = new ThreadC[100];</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; 100; i++) {</span><br><span class="line">            threadCS[i] = new ThreadC();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; 100; i++) {</span><br><span class="line">            threadCS[i].start();</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// &#x6DFB;&#x52A0; synchronized  &#x540E; -- &gt; ThreadD count :10000 &lt;-------</span><br><span class="line"> synchronized  public static void addCount()</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/af1fe6be1b9ddeccffaae9be5297b209240784e1599cf54e27d2eda63e45dce4" alt="volatile006.jpg"></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/d823e813a5cad7069c6c168938d4e5b8.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6933927283665469453.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6933927283665469453.html" itemprop="url">Java多线程   细说 synchronized</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-02-27T21:05:32+08:00">
                2021-02-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>&#x9996;&#x5148;&#x5206;&#x4EAB;&#x4E4B;&#x524D;&#x7684;&#x6240;&#x6709;&#x6587;&#x7AE0; , &#x6B22;&#x8FCE;&#x70B9;&#x8D5E;&#x6536;&#x85CF;&#x8F6C;&#x53D1;&#x4E09;&#x8FDE;&#x4E0B;&#x6B21;&#x4E00;&#x5B9A; &gt;&gt;&gt;&gt;</strong> &#x1F61C;&#x1F61C;&#x1F61C;   </p>
<p><strong>&#x6587;&#x7AE0;&#x5408;&#x96C6; :</strong> &#x1F381; <a href="https://dev.newban.cn/6941642435189538824">juejin.cn/post/694164&#x2026;</a>   </p>
<p><strong>Github :</strong> &#x1F449; <a href="/external_links/f4c0695dd8cd8371c2f2fc9edde11029.html" target="blank" rel="noopener">github.com/black-ant</a>  </p>
<p><strong>CASE &#x5907;&#x4EFD; :</strong> &#x1F449; <a href="/external_links/907cd6419accaedf9bfa60f559823d4b.html" target="blank" rel="noopener">gitee.com/antblack/ca&#x2026;</a></p>
</blockquote>
<h3 id="1-1-synchronized-&#x7B80;&#x8FF0;"><a href="#1-1-synchronized-&#x7B80;&#x8FF0;" class="headerlink" title="1.1 synchronized &#x7B80;&#x8FF0;"></a>1.1 synchronized &#x7B80;&#x8FF0;</h3><p>synchronized &#x88AB;&#x79F0;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501; , &#x4F46;&#x662F; 1.6 &#x7248;&#x672C;&#x540E;&#x5F97;&#x5230;&#x4E86;&#x4F18;&#x5316; , &#x76F8;&#x5BF9;&#x8F7B;&#x91CF;&#x4E86;&#x5F88;&#x591A;, &#x5B83;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x65F6;&#x523B;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x67D0;&#x4E2A;&#x4EE3;&#x7801;&#x5757; .</p>
<ul>
<li>&#x4E3B;&#x8981;&#x64CD;&#x4F5C;&#x5BF9;&#x8C61;&#x662F;&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4EE3;&#x7801;&#x5757;&#x4E2D;&#x5B58;&#x5728;&#x7684;&#x5171;&#x4EAB;&#x6570;&#x636E;, &#x540C;&#x65F6;&#x53EF;&#x4FDD;&#x8BC1;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x5316;(&#x4E3B;&#x8981;&#x662F;&#x5171;&#x4EAB;&#x6570;&#x636E;&#x7684;&#x53D8;&#x5316;)&#x88AB;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6240;&#x770B;</li>
<li>synchronized &#x7684;&#x6838;&#x5FC3;&#x539F;&#x7406;&#x4E3A; Java &#x5BF9;&#x8C61;&#x5934; &#x4EE5;&#x53CA; Monitor<ul>
<li>JVM&#x57FA;&#x4E8E;<strong>&#x8FDB;&#x5165;&#x548C;&#x9000;&#x51FA;Monitor&#x5BF9;&#x8C61;</strong>&#x6765;&#x5B9E;&#x73B0;&#x65B9;&#x6CD5;&#x540C;&#x6B65;&#x548C;&#x4EE3;&#x7801;&#x5757;&#x540C;&#x6B65;</li>
</ul>
</li>
</ul>
<h3 id="1-2-Java-&#x5BF9;&#x8C61;&#x5934;-&#x548C;-Monitor"><a href="#1-2-Java-&#x5BF9;&#x8C61;&#x5934;-&#x548C;-Monitor" class="headerlink" title="1.2 Java &#x5BF9;&#x8C61;&#x5934; &#x548C; Monitor"></a>1.2 Java &#x5BF9;&#x8C61;&#x5934; &#x548C; Monitor</h3><blockquote>
<p>&#x5BF9;&#x8C61;&#x5934;&#x7ED3;&#x6784;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x539F;&#x7406; --&gt;  </span><br><span class="line">1 Java &#x5BF9;&#x8C61;&#x5934; &#x548C; Monitor</span><br><span class="line">|-&gt; &#x5BF9;&#x8C61;&#x5934; &#xFF1A;</span><br><span class="line">    |-&gt; Mark Word&#xFF08;&#x6807;&#x8BB0;&#x5B57;&#x6BB5;&#xFF09;&#x3001;Klass Pointer&#xFF08;&#x7C7B;&#x578B;&#x6307;&#x9488;&#xFF09;</span><br><span class="line">    |-&gt; Klass Pointer : &#x7C7B;&#x5143;&#x6570;&#x636E;&#x6307;&#x9488;&#xFF0C;&#x51B3;&#x5B9A;&#x662F;&#x4F55;&#x6570;&#x636E;</span><br><span class="line">    |-&gt; Mark Word : &#x81EA;&#x8EAB;&#x8FD0;&#x884C;&#x65F6;&#x6570;&#x636E; &#xFF08;hashcode,&#x9501;&#x72B6;&#x6001;&#xFF0C;&#x504F;&#x5411;&#xFF0C;&#x6807;&#x5FD7;&#x4F4D;&#x7B49;&#xFF09;</span><br><span class="line">|-&gt; Monitor : </span><br><span class="line">    |-&gt; &#x4E92;&#x65A5; &#xFF1A;&#x4E00;&#x4E2A; Monitor &#x9501;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x523B;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5360;&#x7528;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">// &#x5173;&#x7CFB; --&gt;  </span><br><span class="line">- Monitor &#x662F;&#x4E00;&#x79CD;&#x5BF9;&#x8C61;&#x7C7B;&#x578B; , &#x4EFB;&#x4F55;Java &#x5BF9;&#x8C61;&#x90FD;&#x53EF;&#x4EE5;&#x662F; Monitor &#x5BF9;&#x8C61;</span><br><span class="line">- &#x5F53;Java &#x5BF9;&#x8C61;&#x88AB; synchronized &#x4FEE;&#x9970;&#x65F6; , &#x5C31;&#x53EF;&#x4EE5;&#x5F53;&#x6210; Monitor &#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5904;&#x7406;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">// Mark Word &#x548C; Class Metadata Address &#x7EC4;&#x6210;&#x7ED3;&#x6784;</span><br><span class="line">--------------------------------------------------------------------------------------------------    </span><br><span class="line">&#x865A;&#x62DF;&#x673A;&#x4F4D;&#x6570;	&#x5934;&#x5BF9;&#x8C61;&#x7ED3;&#x6784;	            &#x8BF4;&#x660E;</span><br><span class="line">|---------|-----------------------|---------------------------------------------------------------|  </span><br><span class="line">32/64bit	Mark Word	            &#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x7684;hashCode&#x3001;&#x9501;&#x4FE1;&#x606F;&#x6216;&#x5206;&#x4EE3;&#x5E74;&#x9F84;&#x6216;GC&#x6807;&#x5FD7;&#x7B49;&#x4FE1;&#x606F;</span><br><span class="line">32/64bit	Class Metadata Address	&#x7C7B;&#x578B;&#x6307;&#x9488;&#x6307;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x7C7B;&#x5143;&#x6570;&#x636E;&#xFF0C;JVM&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6307;&#x9488;&#x786E;&#x5B9A;&#x8BE5;&#x5BF9;&#x8C61;&#x662F;&#x54EA;&#x4E2A;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</span><br><span class="line">--------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<p><strong>32 &#x4F4D;&#x865A;&#x62DF;&#x673A; Mark Word &gt;&gt;&gt;&gt;</strong><br><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/3eecabdafe0988f26d58bc412d8e5ba96f2e9beae54ebb31fd9f9798876fd3c9" alt></p>
<p><strong>64 &#x4F4D;&#x865A;&#x62DF;&#x673A; Mark Word &gt;&gt;&gt;&gt;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/2c561bdfcb542cb1b903d084dd25379cabdff159b396c5c0108d8fd035f9777d" alt="image.png"></p>
<blockquote>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// Monitor &#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F; @ https://blog.csdn.net/javazejian/article/details/70768369</span><br><span class="line">ObjectMonitor&#x4E2D;&#x6709;&#x4E24;&#x4E2A;&#x961F;&#x5217;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x533A;&#x57DF;</span><br><span class="line">     _WaitSet &#x548C; _EntryList&#xFF0C;&#x7528;&#x6765;&#x4FDD;&#x5B58;ObjectWaiter&#x5BF9;&#x8C61;&#x5217;&#x8868;( &#x6BCF;&#x4E2A;&#x7B49;&#x5F85;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x4F1A;&#x88AB;&#x5C01;&#x88C5;&#x6210;ObjectWaiter&#x5BF9;&#x8C61;) </span><br><span class="line">     _owner (&#x6307;&#x5411;&#x6301;&#x6709;ObjectMonitor&#x5BF9;&#x8C61;&#x7684;&#x7EBF;&#x7A0B;) &#x533A;&#x57DF;</span><br></pre></td></tr></table></figure>

<ul>
<li>1 &#x5F53;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;&#x8BBF;&#x95EE;&#x4E00;&#x6BB5;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;<strong>&#x9996;&#x5148;&#x4F1A;&#x8FDB;&#x5165; _EntryList &#x96C6;&#x5408;</strong>, &#x6B64;&#x65F6;&#x5F00;&#x59CB;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;monitor</li>
<li>2 &#x5F53;&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x5230;&#x5BF9;&#x8C61;&#x7684;monitor <strong>&#x540E;&#x8FDB;&#x5165; _Owner &#x533A;&#x57DF;</strong> ,&#x5E76;&#x628A; <strong>monitor&#x4E2D;&#x7684;owner&#x53D8;&#x91CF;</strong> &#x8BBE;&#x7F6E;&#x4E3A;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x540C;&#x65F6;monitor&#x4E2D;&#x7684;&#x8BA1;&#x6570;&#x5668;count&#x52A0;1</li>
<li>3 &#x82E5;&#x7EBF;&#x7A0B;&#x8C03;&#x7528; wait() &#x65B9;&#x6CD5;&#xFF0C;&#x5C06;<strong>&#x91CA;&#x653E;&#x5F53;&#x524D;&#x6301;&#x6709;&#x7684;monitor</strong>&#xFF0C;owner&#x53D8;&#x91CF;&#x6062;&#x590D;&#x4E3A;null&#xFF0C;count&#x81EA;&#x51CF;1&#xFF0C;&#x540C;&#x65F6;&#x8BE5;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165; WaitSet&#x96C6;&#x5408;&#x4E2D;&#x7B49;&#x5F85;&#x88AB;&#x5524;&#x9192;&#x3002;</li>
<li>4 &#x82E5;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5; &#x4E5F;&#x5C06; <strong>&#x91CA;&#x653E;monitor(&#x9501;)</strong> &#x5E76; &#x590D;&#x4F4D;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x4EE5;&#x4FBF; <strong>&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x8FDB;&#x5165;&#x83B7;&#x53D6;monitor(&#x9501;)</strong></li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/0e71e26ad5b5fb7f9816b7740f96c164fdaada0c2fcddc42fe3cb997850a37bb" alt></p>
<blockquote>
<p>Monitor &#x6307;&#x4EE4;</p>
</blockquote>
<p>monitorenter&#x6307;&#x4EE4;&#x662F;&#x5728;&#x7F16;&#x8BD1;&#x540E;&#x63D2;&#x5165;&#x5230;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;monitorexit&#x662F;&#x63D2;&#x5165;&#x5230;&#x65B9;&#x6CD5;&#x7ED3;&#x675F;&#x5904;&#x548C;&#x5F02;&#x5E38;&#x5904;&#xFF0C;JVM&#x8981;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;monitorenter&#x5FC5;&#x987B;&#x6709;&#x5BF9;&#x5E94;&#x7684;monitorexit&#x4E0E;&#x4E4B;&#x5339;&#x914D;</p>
<p><strong>&#x67E5;&#x770B;&#x6C47;&#x7F16;&#x60C5;&#x51B5; :</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// Step 1 : &#x51C6;&#x5907;&#x7B80;&#x5355;&#x7684;Demo</span><br><span class="line">public class SynchronizedService {</span><br><span class="line">    public void method() {</span><br><span class="line">        synchronized (this) {</span><br><span class="line">            System.out.println(&quot;synchronized &#x4EE3;&#x7801;&#x5757;&quot;);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// Step 2 : &#x67E5;&#x770B;&#x6C47;&#x7F16;&#x7801;</span><br><span class="line">javap -c -s -v -l SynchronizedService.class</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Step 3 : &#x6CE8;&#x610F;&#x5176;&#x4E2D; 3 &#x548C; 13 &#x4EE5;&#x53CA; 19 </span><br><span class="line">public void method();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=2, locals=3, args_size=1</span><br><span class="line">         0: aload_0</span><br><span class="line">         1: dup</span><br><span class="line">         2: astore_1</span><br><span class="line">         3: monitorenter</span><br><span class="line">         4: getstatic     #2                  // Field java/lang/System.out:Ljava/io/PrintStream;</span><br><span class="line">         7: ldc           #3                  // String synchronized &#x4EE3;&#x7801;&#x5757;</span><br><span class="line">         9: invokevirtual #4                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span><br><span class="line">        12: aload_1</span><br><span class="line">        13: monitorexit</span><br><span class="line">        14: goto          22</span><br><span class="line">        17: astore_2</span><br><span class="line">        18: aload_1</span><br><span class="line">        19: monitorexit</span><br><span class="line">        20: aload_2</span><br><span class="line">        21: athrow</span><br><span class="line">        22: return</span><br></pre></td></tr></table></figure>

<p><strong>&#x5904;&#x7406;&#x903B;&#x8F91;&#x8BE6;&#x60C5; :</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// synchronized &#x6E90;&#x7801;&#x5206;&#x6790; @ https://blog.csdn.net/javazejian/article/details/70768369  </span><br><span class="line">// &#x5177;&#x4F53;&#x7684;&#x6D41;&#x7A0B;&#x53EF;&#x4EE5;&#x53C2;&#x8003;&#x4E0A;&#x9762;&#x535A;&#x5BA2;&#x7684;&#x5177;&#x4F53;&#x5206;&#x6790;, &#x6B64;&#x5904;&#x4EC5;&#x603B;&#x7ED3; , &#x5927;&#x4F6C;&#x4EEC;&#x809D;&#x771F;&#x597D;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// synchronized &#x4EE3;&#x7801;&#x5757;&#x5E95;&#x5C42;&#x903B;&#x8F91; ( monitorenter &#x548C; monitorexit )</span><br><span class="line">&gt; synchronized &#x540C;&#x6B65;&#x8BED;&#x53E5;&#x5757;&#x7684;&#x5B9E;&#x73B0;&#x4F7F;&#x7528;&#x7684;&#x662F; monitorenter &#x548C; monitorexit &#x6307;&#x4EE4;&#xFF0C;</span><br><span class="line">&#x5176;&#x4E2D; monitorenter &#x6307;&#x4EE4;&#x6307;&#x5411;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#xFF0C;monitorexit &#x6307;&#x4EE4;&#x5219;&#x6307;&#x660E;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757;&#x7684;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;</span><br><span class="line"></span><br><span class="line">Start : &#x5F53;&#x6267;&#x884C;monitorenter&#x6307;&#x4EE4;&#x65F6;&#xFF0C;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5C06;&#x8BD5;&#x56FE;&#x83B7;&#x53D6; objectref(&#x5373;&#x5BF9;&#x8C61;&#x9501;) &#x6240;&#x5BF9;&#x5E94;&#x7684; monitor &#x7684;&#x6301;&#x6709;&#x6743;</span><br><span class="line">Thread-1  : objectref.monitor = 0 --&gt; &#x83B7;&#x53D6;monitor --&gt; &#x8BBE;&#x7F6E;&#x8BA1;&#x6570;&#x5668;&#x503C;&#x4E3A; 1 </span><br><span class="line">Thread-2  : &#x53D1;&#x73B0;objectref.monitor = 0 --&gt; &#x963B;&#x585E;&#x7B49;&#x5F85; --&gt; Thread-1 &#x6267;&#x884C; monitorexit ,</span><br><span class="line">            &#x8BA1;&#x6570;&#x5668;&#x5F52; 0 --&gt; Thread-2 &#x6B63;&#x5E38;&#x6D41;&#x7A0B;&#x83B7;&#x53D6;&#x83B7;&#x53D6;monitor</span><br><span class="line"></span><br><span class="line">&#x6CE8;&#x610F;&#x70B9; : </span><br><span class="line">&#x7F16;&#x8BD1;&#x5668;&#x5C06;&#x4F1A;&#x786E;&#x4FDD;&#x65E0;&#x8BBA;&#x65B9;&#x6CD5;&#x901A;&#x8FC7;&#x4F55;&#x79CD;&#x65B9;&#x5F0F;&#x5B8C;&#x6210;&#xFF0C;&#x65B9;&#x6CD5;&#x4E2D;&#x8C03;&#x7528;&#x8FC7;&#x7684;&#x6BCF;&#x6761; monitorenter &#x6307;&#x4EE4;&#x90FD;&#x6709;&#x6267;&#x884C;&#x5176;&#x5BF9;&#x5E94; monitorexit &#x6307;&#x4EE4; , </span><br><span class="line">&#x65B9;&#x6CD5;&#x5F02;&#x5E38;&#x65F6;&#x901A;&#x8FC7;&#x5F02;&#x5E38;&#x5904;&#x7406;&#x5668;&#x5904;&#x7406;&#x5F02;&#x5E38;&#x7ED3;&#x675F;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>synchronized &#x65B9;&#x6CD5;&#x5E95;&#x5C42;&#x903B;&#x8F91; (ACC_SYNCHRONIZED&#x6807;&#x8BC6;)</p>
</blockquote>
<ul>
<li>&#x65B9;&#x6CD5;&#x7EA7;&#x7684;&#x540C;&#x6B65;&#x662F;&#x9690;&#x5F0F;&#xFF0C;&#x5373;&#x65E0;&#x9700;&#x901A;&#x8FC7;&#x5B57;&#x8282;&#x7801;&#x6307;&#x4EE4;&#x6765;&#x63A7;&#x5236;&#x7684;&#xFF0C;&#x5B83;&#x5B9E;&#x73B0;&#x5728;&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x548C;&#x8FD4;&#x56DE;&#x64CD;&#x4F5C;&#x4E4B;&#x4E2D;&#x3002;</li>
<li>JVM&#x53EF;&#x4EE5;&#x4ECE;&#x65B9;&#x6CD5;&#x5E38;&#x91CF;&#x6C60;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x8868;&#x7ED3;&#x6784;(method_info Structure) &#x4E2D;&#x7684; <strong>ACC_SYNCHRONIZED</strong> &#x8BBF;&#x95EE;&#x6807;&#x5FD7;&#x533A;&#x5206;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x5426;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<ol>
<li>&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x8C03;&#x7528;&#x6307;&#x4EE4;&#x5C06;&#x4F1A; &#x68C0;&#x67E5;&#x65B9;&#x6CD5;&#x7684; ACC_SYNCHRONIZED &#x8BBF;&#x95EE;&#x6807;&#x5FD7;&#x662F;&#x5426;&#x88AB;&#x8BBE;&#x7F6E;<br>|- &#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E86;&#xFF0C;&#x6267;&#x884C;&#x7EBF;&#x7A0B;&#x5C06;&#x5148;&#x6301;&#x6709;monitor&#xFF08;&#x865A;&#x62DF;&#x673A;&#x89C4;&#x8303;&#x4E2D;&#x7528;&#x7684;&#x662F;&#x7BA1;&#x7A0B;&#x4E00;&#x8BCD;&#xFF09;&#xFF0C; &#x7136;&#x540E;&#x518D;&#x6267;&#x884C;&#x65B9;&#x6CD5;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x65B9;&#x6CD5;&#x5B8C;&#x6210;(&#x65E0;&#x8BBA;&#x662F;&#x6B63;&#x5E38;&#x5B8C;&#x6210;&#x8FD8;&#x662F;&#x975E;&#x6B63;&#x5E38;&#x5B8C;&#x6210;)&#x65F6;&#x91CA;&#x653E;monitor&#x3002;</li>
<li>&#x5728;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x671F;&#x95F4;&#xFF0C;&#x6267;&#x884C;&#x7EBF;&#x7A0B;&#x6301;&#x6709;&#x4E86;monitor&#xFF0C;&#x5176;&#x4ED6;&#x4EFB;&#x4F55;&#x7EBF;&#x7A0B;&#x90FD;&#x65E0;&#x6CD5;&#x518D;&#x83B7;&#x5F97;&#x540C;&#x4E00;&#x4E2A;monitor</li>
</ol>
<p><strong>&#x5F02;&#x5E38;&#x5904;&#x7406;</strong> : &#x5982;&#x679C;&#x4E00;&#x4E2A;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x671F;&#x95F4;&#x629B; &#x51FA;&#x4E86;&#x5F02;&#x5E38;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x65E0;&#x6CD5;&#x5904;&#x7406;&#x6B64;&#x5F02;&#x5E38;&#xFF0C;<strong>&#x90A3;&#x8FD9;&#x4E2A;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x6240;&#x6301;&#x6709;&#x7684;monitor&#x5C06;&#x5728;&#x5F02;&#x5E38;&#x629B;&#x5230;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x4E4B;&#x5916;&#x65F6;&#x81EA;&#x52A8;&#x91CA;&#x653E;</strong></p>
<blockquote>
<p>synchronized &#x5185;&#x5B58;&#x7EA7;&#x539F;&#x7406;</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6700;&#x540E;&#x751F;&#x6210;&#x7684;&#x6C47;&#x7F16;&#x8BED;&#x8A00; </span><br><span class="line">lock cmpxchg %r15, 0x16(%r10)  &#x548C; lock cmpxchg %r10, (%r11)</span><br></pre></td></tr></table></figure>

<ul>
<li>synchronized&#x7684;&#x5E95;&#x5C42;&#x64CD;&#x4F5C;&#x542B;&#x4E49;&#x662F;&#x5148;<strong>&#x5BF9;&#x5BF9;&#x8C61;&#x5934;&#x7684;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x7528;lock cmpxchg&#x7684;&#x65B9;&#x5F0F;&#x8BBE;&#x7F6E;&#x6210;&#x201D;&#x9501;&#x4F4F;&#x201D;&#x72B6;&#x6001;</strong></li>
<li>&#x91CA;&#x653E;&#x9501;&#x65F6;&#xFF0C;&#x5728;&#x7528;lock cmpxchg&#x7684;&#x65B9;&#x5F0F;<strong>&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x5934;&#x7684;&#x9501;&#x6807;&#x5FD7;&#x4F4D;&#x4E3A;&#x201D;&#x91CA;&#x653E;&#x201D;&#x72B6;&#x6001;</strong>&#xFF0C;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x7ACB;&#x523B;&#x5199;&#x56DE;&#x4E3B;&#x5185;&#x5B58;&#x3002;</li>
<li>JVM&#x4F1A;&#x8FDB;&#x4E00;&#x6B65;&#x5BF9;synchronized&#x65F6;CAS&#x5931;&#x8D25;&#x7684;&#x90A3;&#x4E9B;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x963B;&#x585E;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x90E8;&#x5206;&#x7684;&#x903B;&#x8F91;&#x6CA1;&#x6709;&#x4F53;&#x73B0;&#x5728;lock cmpxchg&#x6307;&#x4EE4;&#x4E0A;&#xFF0C;&#x6211;&#x731C;&#x60F3;&#x662F;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x4FE1;&#x53F7;&#x91CF;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#x3002;</li>
<li>lock cmpxchg &#x6307;&#x4EE4;&#x524D;&#x8005;&#x4FDD;&#x8BC1;&#x4E86;&#x53EF;&#x89C1;&#x6027;&#x548C;&#x9632;&#x6B62;&#x91CD;&#x6392;&#x5E8F;&#xFF0C;&#x540E;&#x8005;&#x4FDD;&#x8BC1;&#x4E86;&#x64CD;&#x4F5C;&#x7684;&#x539F;&#x5B50;&#x6027;&#x3002;</li>
</ul>
<h3 id="1-3-synchronized-&#x7528;&#x6CD5;"><a href="#1-3-synchronized-&#x7528;&#x6CD5;" class="headerlink" title="1.3 synchronized &#x7528;&#x6CD5;"></a>1.3 synchronized &#x7528;&#x6CD5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x52A0;&#x9501;&#x65B9;&#x5F0F; &#xFF0C;&#x5F53;&#x524D;&#x5B9E;&#x4F8B; &#xFF0C;&#x5F53;&#x524D;class , &#x81EA;&#x5B9A;&#x4E49;object</span><br><span class="line">&gt; synchronized(this)</span><br><span class="line">&gt; synchronized(object)</span><br><span class="line">&gt; synchronized(class) &#x6216;&#x8005;&#x9759;&#x6001;&#x4EE3;&#x7801;&#x5757;</span><br></pre></td></tr></table></figure>

<p><strong>synchronized&#x5173;&#x952E;&#x5B57;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x4E09;&#x79CD;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;</strong></p>
<ul>
<li><strong>&#x4FEE;&#x9970;&#x5B9E;&#x4F8B;&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x52A0;&#x9501;&#xFF0C;&#x8FDB;&#x5165;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x524D;&#x8981;&#x83B7;&#x5F97;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x7684;&#x9501;</li>
<li><strong>&#x4FEE;&#x9970;&#x9759;&#x6001;&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x4F5C;&#x7528;&#x4E8E;&#x5F53;&#x524D;&#x7C7B;&#x5BF9;&#x8C61;&#x52A0;&#x9501;&#xFF0C;&#x8FDB;&#x5165;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x524D;&#x8981;&#x83B7;&#x5F97;&#x5F53;&#x524D;&#x7C7B;&#x5BF9;&#x8C61;&#x7684;&#x9501; &#x3002;<ul>
<li>&#x4E5F;&#x5C31;&#x662F;&#x7ED9;&#x5F53;&#x524D;&#x7C7B;&#x52A0;&#x9501;&#xFF0C;&#x4F1A;&#x4F5C;&#x7528;&#x4E8E;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#xFF0C;&#x56E0;&#x4E3A;&#x9759;&#x6001;&#x6210;&#x5458;&#x4E0D;&#x5C5E;&#x4E8E;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#xFF0C;&#x662F;&#x7C7B;&#x6210;&#x5458;&#xFF08; static &#x8868;&#x660E;&#x8FD9;&#x662F;&#x8BE5;&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x8D44;&#x6E90;&#xFF0C;&#x4E0D;&#x7BA1;new&#x4E86;&#x591A;&#x5C11;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4EFD;&#xFF0C;&#x6240;&#x4EE5;&#x5BF9;&#x8BE5;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x5BF9;&#x8C61;&#x90FD;&#x52A0;&#x4E86;&#x9501;&#xFF09;&#x3002;</li>
<li>&#x6240;&#x4EE5;&#x5982;&#x679C;<strong>&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;A&#x8C03;&#x7528;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x7684;&#x975E;&#x9759;&#x6001; synchronized &#x65B9;&#x6CD5;</strong>&#xFF0C;&#x800C;<strong>&#x7EBF;&#x7A0B;B&#x9700;&#x8981;&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x6240;&#x5C5E;&#x7C7B;&#x7684;&#x9759;&#x6001; synchronized &#x65B9;&#x6CD5;&#xFF0C;&#x662F;&#x5141;&#x8BB8;&#x7684;</strong>&#xFF0C;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x4E92;&#x65A5;&#x73B0;&#x8C61;&#xFF0C;&#x56E0;&#x4E3A;&#x8BBF;&#x95EE;&#x9759;&#x6001; synchronized &#x65B9;&#x6CD5;&#x5360;&#x7528;&#x7684;&#x9501;&#x662F;&#x5F53;&#x524D;&#x7C7B;&#x7684;&#x9501;&#xFF0C;&#x800C;&#x8BBF;&#x95EE;&#x975E;&#x9759;&#x6001; synchronized &#x65B9;&#x6CD5;&#x5360;&#x7528;&#x7684;&#x9501;&#x662F;&#x5F53;&#x524D;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x9501;&#x3002;</li>
</ul>
</li>
<li><strong>&#x4FEE;&#x9970;&#x4EE3;&#x7801;&#x5757;</strong>&#xFF0C;&#x6307;&#x5B9A;&#x52A0;&#x9501;&#x5BF9;&#x8C61;&#xFF0C;&#x5BF9;&#x7ED9;&#x5B9A;&#x5BF9;&#x8C61;&#x52A0;&#x9501;&#xFF0C;&#x8FDB;&#x5165;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5E93;&#x524D;&#x8981;&#x83B7;&#x5F97;&#x7ED9;&#x5B9A;&#x5BF9;&#x8C61;&#x7684;&#x9501;&#x3002;<ul>
<li>&#x548C; synchronized &#x65B9;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;synchronized(this)&#x4EE3;&#x7801;&#x5757;&#x4E5F;&#x662F;&#x9501;&#x5B9A;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x7684;&#x3002;</li>
<li>synchronized &#x5173;&#x952E;&#x5B57;&#x52A0;&#x5230; static &#x9759;&#x6001;&#x65B9;&#x6CD5;&#x548C; synchronized(class)&#x4EE3;&#x7801;&#x5757;&#x4E0A;&#x90FD;&#x662F;&#x662F;&#x7ED9; Class &#x7C7B;&#x4E0A;&#x9501;&#x3002;</li>
</ul>
</li>
</ul>
<hr>
<p><strong>&#x8FD9;&#x91CC;&#x518D;&#x63D0;&#x4E00;&#x4E0B;&#xFF1A;synchronized&#x5173;&#x952E;&#x5B57;&#x52A0;&#x5230;&#x975E; static &#x9759;&#x6001;&#x65B9;&#x6CD5;&#x4E0A;&#x662F;&#x7ED9;&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x4E0A;&#x9501;&#x3002;</strong>  </p>
<p><strong>&#x53E6;&#x5916;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;</strong> &#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x4F7F;&#x7528; synchronized(String a), &#x90E8;&#x5206;&#x5B57;&#x7B26;&#x4E32;&#x5E38;&#x91CF;&#x4F1A;&#x7F13;&#x51B2;&#x5230;&#x5E38;&#x91CF;&#x6C60;&#x91CC;&#x9762;, &#x4E0D;&#x8FC7;&#x53EF;&#x4EE5;&#x8BD5;&#x8BD5; new String(&#x201C;a&#x201D;)</p>
<h3 id="1-4-synchronized-&#x5176;&#x4ED6;&#x77E5;&#x8BC6;&#x70B9;"><a href="#1-4-synchronized-&#x5176;&#x4ED6;&#x77E5;&#x8BC6;&#x70B9;" class="headerlink" title="1.4 synchronized &#x5176;&#x4ED6;&#x77E5;&#x8BC6;&#x70B9;"></a>1.4 synchronized &#x5176;&#x4ED6;&#x77E5;&#x8BC6;&#x70B9;</h3><p><strong>&#x89E3;&#x91CA; :</strong> synchronized &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x72EC;&#x5360;&#x5F0F;&#x7684;&#x52A0;&#x9501;&#x65B9;&#x5F0F; &#xFF0C;&#x5176;&#x6DFB;&#x52A0;&#x548C;&#x91CA;&#x653E;&#x9501;&#x7684;&#x65B9;&#x5F0F;&#x7531;JVM&#x5B9E;&#x73B0;<br><strong>&#x963B;&#x585E; :</strong> &#x5F53; synchronized &#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x83B7;&#x53D6;&#x4E0D;&#x5230;&#x9501;&#xFF0C;&#x5C06;&#x4F1A;&#x4E00;&#x76F4;&#x963B;&#x585E;</p>
<blockquote>
<p>&#x8C08;&#x8C08; synchronized&#x548C;ReenTrantLock &#x7684;&#x533A;&#x522B;</p>
</blockquote>
<ul>
<li>&#x4E24;&#x8005;&#x90FD;&#x662F;&#x53EF;&#x91CD;&#x5165;&#x9501;</li>
<li>synchronized &#x4F9D;&#x8D56;&#x4E8E; JVM &#x800C; ReenTrantLock &#x4F9D;&#x8D56;&#x4E8E; API</li>
<li>ReenTrantLock &#x6BD4; synchronized &#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E9B;&#x9AD8;&#x7EA7;&#x529F;&#x80FD;<ul>
<li>&#x7B49;&#x5F85;&#x53EF;&#x4E2D;&#x65AD;&#xFF1B;&#x53EF;&#x5B9E;&#x73B0;&#x516C;&#x5E73;&#x9501;&#xFF1B;&#x53EF;&#x5B9E;&#x73B0;&#x9009;&#x62E9;&#x6027;&#x901A;&#x77E5;&#xFF08;&#x9501;&#x53EF;&#x4EE5;&#x7ED1;&#x5B9A;&#x591A;&#x4E2A;&#x6761;&#x4EF6;&#xFF09;</li>
</ul>
</li>
</ul>
<blockquote>
<p>synchronized &#x4E0E;&#x7B49;&#x5F85;&#x5524;&#x9192;&#x673A;&#x5236; (notify/notifyAll&#x548C;wait)<br>&#x7B49;&#x5F85;&#x5524;&#x9192;&#x673A;&#x5236;&#x9700;&#x8981;&#x5904;&#x4E8E;synchronized&#x4EE3;&#x7801;&#x5757;&#x6216;&#x8005;synchronized&#x65B9;&#x6CD5;&#x4E2D; , &#x8C03;&#x7528;&#x8FD9;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#x524D;&#x5FC5;&#x987B;&#x62FF;&#x5230;&#x5F53;&#x524D;&#x5BF9;&#x8C61;&#x7684;&#x76D1;&#x89C6;&#x5668;monitor&#x5BF9;&#x8C61;</p>
</blockquote>
<blockquote>
<p>synchronized &#x4E0E; &#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;<br>&#x7EBF;&#x7A0B;&#x7684;&#x4E2D;&#x65AD;&#x64CD;&#x4F5C;&#x5BF9;&#x4E8E;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x83B7;&#x53D6;&#x7684;&#x9501;&#x5BF9;&#x8C61;&#x7684;synchronized&#x65B9;&#x6CD5;&#x6216;&#x8005;&#x4EE3;&#x7801;&#x5757;&#x5E76;&#x4E0D;&#x8D77;&#x4F5C;&#x7528;</p>
</blockquote>
<h3 id="1-5-&#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x9501;&#x6982;&#x5FF5;"><a href="#1-5-&#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x9501;&#x6982;&#x5FF5;" class="headerlink" title="1.5 &#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x9501;&#x6982;&#x5FF5;"></a>1.5 &#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x9501;&#x6982;&#x5FF5;</h3><h4 id="1-5-1-&#x9501;&#x6309;&#x7167;&#x7B49;&#x7EA7;&#x5206;&#x7C7B;"><a href="#1-5-1-&#x9501;&#x6309;&#x7167;&#x7B49;&#x7EA7;&#x5206;&#x7C7B;" class="headerlink" title="1.5.1 &#x9501;&#x6309;&#x7167;&#x7B49;&#x7EA7;&#x5206;&#x7C7B;"></a>1.5.1 &#x9501;&#x6309;&#x7167;&#x7B49;&#x7EA7;&#x5206;&#x7C7B;</h4><p>&#x9501;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x4EE5;&#x4E0B;&#x7B49;&#x7EA7;&#x8FDB;&#x884C;&#x5347;&#x7EA7; : <strong>&#x504F;&#x5411;&#x9501; -&gt; &#x8F7B;&#x91CF;&#x7EA7;&#x9501; -&gt; &#x91CD;&#x91CF;&#x7EA7;&#x9501; , &#x9501;&#x7684;&#x5347;&#x7EA7;&#x662F;&#x5355;&#x5411;&#x7684;</strong></p>
<ul>
<li>&#x504F;&#x5411;&#x9501;<ul>
<li><strong>&#x51CF;&#x5C11;&#x540C;&#x4E00;&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x4EE3;&#x4EF7;</strong> (&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5; &#x51B5;&#x4E0B;&#xFF0C;&#x9501;&#x4E0D;&#x4EC5;&#x4E0D;&#x5B58;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#xFF0C;&#x800C;&#x4E14;&#x603B;&#x662F;&#x7531;&#x540C;&#x4E00;&#x7EBF;&#x7A0B;&#x591A;&#x6B21;&#x83B7;&#x5F97;)</li>
<li><strong>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x83B7;&#x5F97;&#x4E86;&#x9501;&#xFF0C;&#x90A3;&#x4E48;&#x9501;&#x5C31;&#x8FDB;&#x5165;&#x504F;&#x5411;&#x6A21;&#x5F0F;</strong>&#xFF0C;&#x6B64;&#x65F6;Mark Word &#x7684;&#x7ED3;&#x6784;&#x4E5F;&#x53D8;&#x4E3A;&#x504F;&#x5411;&#x9501;&#x7ED3;&#x6784;&#xFF0C;&#x5F53;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x518D;&#x6B21;&#x8BF7;&#x6C42;&#x9501;&#x65F6;&#xFF0C;&#x65E0;&#x9700;&#x518D;&#x505A;&#x4EFB;&#x4F55;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#xFF0C;&#x5373;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x8FC7;&#x7A0B;</li>
<li><strong>&#x504F;&#x5411;&#x9501;&#x5931;&#x8D25;&#x540E;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x7ACB;&#x5373;&#x81A8;&#x80C0;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;&#xFF0C;&#x800C;&#x662F;&#x5148;&#x5347;&#x7EA7;&#x4E3A;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;</strong></li>
</ul>
</li>
<li>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;<ul>
<li>&#x5BF9;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x7684;&#x9501;&#xFF0C;&#x5728;&#x6574;&#x4E2A;&#x540C;&#x6B65;&#x5468;&#x671F;&#x5185;&#x90FD;&#x4E0D;&#x5B58;&#x5728;&#x7ADE;&#x4E89;</li>
<li>&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x6240;&#x9002;&#x5E94;&#x7684;&#x573A;&#x666F;&#x662F;<strong>&#x7EBF;&#x7A0B;&#x4EA4;&#x66FF;&#x6267;&#x884C;&#x540C;&#x6B65;&#x5757;&#x7684;&#x573A;&#x5408;</strong></li>
<li>&#x5982;&#x679C;&#x5B58;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8BBF;&#x95EE;&#x540C;&#x4E00;&#x9501;&#x7684;&#x573A;&#x5408;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x81A8;&#x80C0;&#x4E3A;&#x91CD;&#x91CF;&#x7EA7;&#x9501;</li>
</ul>
</li>
<li>&#x81EA;&#x65CB;&#x9501;<ul>
<li><strong>&#x5047;&#x8BBE;&#x7B49;&#x5F85;&#x540E;&#x5F53;&#x524D;&#x7684;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x9501;</strong>&#xFF0C;&#x56E0;&#x6B64;&#x865A;&#x62DF;&#x673A;&#x4F1A;&#x8BA9;&#x5F53;&#x524D;&#x60F3;&#x8981;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x7EBF;&#x7A0B;&#x505A;&#x51E0;&#x4E2A;&#x7A7A;&#x5FAA;&#x73AF;</li>
<li>&#x5728;&#x7ECF;&#x8FC7;&#x82E5;&#x5E72;&#x6B21;&#x5FAA;&#x73AF;&#x540E;&#xFF0C;<strong>&#x5982;&#x679C;&#x5F97;&#x5230;&#x9501;&#xFF0C;&#x5C31;&#x987A;&#x5229;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;</strong>&#x3002;&#x5982;&#x679C;&#x8FD8;&#x4E0D;&#x80FD;&#x83B7;&#x5F97;&#x9501;&#xFF0C;&#x90A3;&#x5C31;&#x4F1A;&#x5C06;&#x7EBF;&#x7A0B;&#x5728;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5C42;&#x9762;&#x6302;&#x8D77;</li>
<li>&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x4E86;&#x7EBF;&#x7A0B;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#xFF0C;&#x4F46;&#x662F;&#x589E;&#x52A0;&#x4E86;CPU&#x6D88;&#x8017;</li>
</ul>
</li>
<li>&#x91CD;&#x91CF;&#x7EA7;&#x9501;</li>
</ul>
<h4 id="1-5-2-&#x9501;&#x7684;&#x64CD;&#x4F5C;"><a href="#1-5-2-&#x9501;&#x7684;&#x64CD;&#x4F5C;" class="headerlink" title="1.5.2 &#x9501;&#x7684;&#x64CD;&#x4F5C;"></a>1.5.2 &#x9501;&#x7684;&#x64CD;&#x4F5C;</h4><blockquote>
<p>&#x9501;&#x6E05;&#x9664; :</p>
</blockquote>
<p>Java&#x865A;&#x62DF;&#x673A;&#x5728; <strong>JIT&#x7F16;&#x8BD1;</strong>&#x65F6; (&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x4E3A;&#x5F53;&#x67D0;&#x6BB5;&#x4EE3;&#x7801;&#x5373;&#x5C06;&#x7B2C;&#x4E00;&#x6B21;&#x88AB;&#x6267;&#x884C;&#x65F6;&#x8FDB;&#x884C;&#x7F16;&#x8BD1;&#xFF0C;&#x53C8;&#x79F0;&#x5373;&#x65F6;&#x7F16;&#x8BD1;)&#xFF0C;&#x901A;&#x8FC7;&#x5BF9;&#x8FD0;&#x884C;&#x4E0A;&#x4E0B;&#x6587;&#x7684;&#x626B;&#x63CF;&#xFF0C;<strong>&#x53BB;&#x9664;&#x4E0D;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x7ADE;&#x4E89;&#x7684;&#x9501;</strong>&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6D88;&#x9664;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x9501;&#xFF0C;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x6BEB;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x8BF7;&#x6C42;&#x9501;&#x65F6;&#x95F4;</p>
<blockquote>
<p>Java &#x5E38;&#x89C1;&#x7684;&#x9501;</p>
</blockquote>
<ul>
<li>synchronized &#x5173;&#x952E;&#x5B57; , &#x91CD;&#x91CF;&#x9501;</li>
<li>ReentrantLock &#x91CD;&#x5165;&#x9501;</li>
<li>ReadWriteLock &#x8BFB;&#x5199;&#x9501;</li>
</ul>
<h4 id="1-5-3-&#x5176;&#x4ED6;&#x9501;&#x6982;&#x5FF5;"><a href="#1-5-3-&#x5176;&#x4ED6;&#x9501;&#x6982;&#x5FF5;" class="headerlink" title="1.5.3 &#x5176;&#x4ED6;&#x9501;&#x6982;&#x5FF5;"></a>1.5.3 &#x5176;&#x4ED6;&#x9501;&#x6982;&#x5FF5;</h4><blockquote>
<p>&#x5185;&#x90E8;&#x9501; :</p>
</blockquote>
<ul>
<li>synchronized : &#x9501;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528; , &#x9501;&#x4FDD;&#x62A4;&#x7684;&#x4EE3;&#x7801;&#x5757;</li>
<li>&#x6BCF;&#x4E2A;Java &#x5BF9;&#x8C61;&#x90FD;&#x53EF;&#x4EE5;&#x9690;&#x5F0F;&#x5730;&#x626E;&#x6F14;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x540C;&#x6B65;&#x7684;&#x9501;&#x7684;&#x89D2;&#x8272; ,&#x8FD9;&#x4E9B;&#x5185;&#x7F6E;&#x7684;&#x9501;&#x88AB;&#x79F0;&#x4E3A; &#x5185;&#x90E8;&#x9501; &#x6216; &#x76D1;&#x89C6;&#x5668;&#x9501; .</li>
</ul>
<blockquote>
<p>&#x516C;&#x5E73;&#x9501;/&#x975E;&#x516C;&#x5E73;&#x9501;</p>
</blockquote>
<ul>
<li>&#x516C;&#x5E73;&#x9501;&#x662F;&#x6307;&#x591A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x975E;&#x516C;&#x5E73;&#x9501;&#x6307;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x987A;&#x5E8F;&#x4E0D;&#x662F;&#x6309;&#x7167;&#x7533;&#x8BF7;&#x9501;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#x6216;&#x8005;&#x9965;&#x997F;&#x73B0;&#x8C61;&#xFF0C;</li>
<li>&#x975E;&#x516C;&#x5E73;&#x9501;&#x7684;&#x4F18;&#x70B9;&#x5728;&#x4E8E;&#x541E;&#x5410;&#x91CF;&#x6BD4;&#x516C;&#x5E73;&#x9501;&#x5927;&#xFF0C;ReentrantLock&#x9ED8;&#x8BA4;&#x975E;&#x516C;&#x5E73;&#x9501;&#xFF0C;&#x53EF;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x9009;&#x62E9;&#x516C;&#x5E73;&#x9501;&#xFF0C;Synchronized&#x662F;&#x975E;&#x516C;&#x5E73;&#x9501;&#x3002;</li>
</ul>
<blockquote>
<p>&#x53EF;&#x91CD;&#x5165;&#x9501;<br>&#x53EF;&#x91CD;&#x5165;&#x9501;&#x6307;&#x5728;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x5916;&#x5C42;&#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x9501;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5728;&#x8FDB;&#x5165;&#x5185;&#x5C42;&#x65B9;&#x6CD5;&#x4F1A;&#x81EA;&#x52A8;&#x83B7;&#x53D6;&#x9501;&#xFF0C;ReentrantLock&#x4E0E;Synchronized&#x90FD;&#x662F;&#x53EF;&#x91CD;&#x5165;&#x7684;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;<br>&#x72EC;&#x4EAB;&#x9501;&#x662F;&#x6307;&#x4E00;&#x4E2A;&#x9501;&#x53EA;&#x80FD;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x72EC;&#x6709;&#xFF0C;&#x5171;&#x4EAB;&#x9501;&#x6307;&#x4E00;&#x4E2A;&#x9501;&#x53EF;&#x88AB;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#xFF0C;&#x5BF9;&#x4E8E;ReadWriteLock&#xFF0C;&#x8BFB;&#x9501;&#x662F;&#x5171;&#x4EAB;&#x9501;&#xFF0C;&#x5199;&#x9501;&#x662F;&#x72EC;&#x4EAB;&#x6240;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x4E92;&#x65A5;&#x9501;/&#x8BFB;&#x5199;&#x9501;<br>&#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;&#x662F;&#x4E00;&#x79CD;&#x5E7F;&#x4E49;&#x7684;&#x8BF4;&#x6CD5;&#xFF0C;&#x4E92;&#x65A5;&#x9501;/&#x8BFB;&#x5199;&#x9501;&#x662F;&#x5176;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x3002;</p>
</blockquote>
<blockquote>
<p>&#x4E50;&#x89C2;&#x9501;/&#x60B2;&#x89C2;&#x9501;</p>
</blockquote>
<ul>
<li>&#x4E50;&#x89C2;&#x9501;&#x4E0E;&#x60B2;&#x89C2;&#x9501;&#x662F;&#x770B;&#x5F85;&#x540C;&#x6B65;&#x7684;&#x89D2;&#x5EA6;&#x4E0D;&#x540C;&#xFF0C;&#x4E50;&#x89C2;&#x9501;&#x8BA4;&#x4E3A;&#x5BF9;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7684;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#xFF0C;&#x662F;&#x4E0D;&#x4F1A;&#x6709;&#x7ADE;&#x4E89;&#x7684;&#xFF0C;&#x4F1A;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;&#xFF0C;&#x5982;&#x679C;&#x5931;&#x8D25;&#xFF0C;&#x4E0D;&#x65AD;&#x91CD;&#x8BD5;&#x3002;</li>
<li>&#x60B2;&#x89C2;&#x9501;&#x4E0E;&#x6B64;&#x76F8;&#x53CD;&#xFF0C;&#x76F4;&#x63A5;&#x83B7;&#x53D6;&#x9501;&#xFF0C;&#x4E4B;&#x540E;&#x518D;&#x64CD;&#x4F5C;&#xFF0C;&#x6700;&#x540E;&#x91CA;&#x653E;&#x9501;&#x3002;</li>
</ul>
<blockquote>
<p>&#x5206;&#x6BB5;&#x9501;</p>
</blockquote>
<ul>
<li>&#x5206;&#x6BB5;&#x9501;&#x662F;&#x4E00;&#x79CD;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;&#xFF0C;&#x901A;&#x8FC7;&#x5C06;&#x4E00;&#x4E2A;&#x6574;&#x4F53;&#x5206;&#x5272;&#x6210;&#x5C0F;&#x5757;&#xFF0C;&#x5728;&#x6BCF;&#x4E2A;&#x5C0F;&#x5757;&#x4E0A;&#x52A0;&#x9501;&#xFF0C;&#x63D0;&#x9AD8;&#x5E76;&#x53D1;&#x3002;</li>
</ul>
<h3 id="1-6-&#x9501;&#x7684;&#x8F6C;&#x6362;&#x8FC7;&#x7A0B;"><a href="#1-6-&#x9501;&#x7684;&#x8F6C;&#x6362;&#x8FC7;&#x7A0B;" class="headerlink" title="1.6 &#x9501;&#x7684;&#x8F6C;&#x6362;&#x8FC7;&#x7A0B;"></a>1.6 &#x9501;&#x7684;&#x8F6C;&#x6362;&#x8FC7;&#x7A0B;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;&#x5BF9;&#x8C61;&#x5934;&#x7684;&#x53D8;&#x5316;&#x53EF;&#x4EE5;&#x770B;&#x4E0B;&#x56FE; , &#x8BF4;&#x7684;&#x5F88;&#x6E05;&#x695A;&#x4E86;  @ https://www.cnblogs.com/jhxxb/p/10983788.html</span><br><span class="line"></span><br><span class="line">// &#x4E4B;&#x524D;&#x77E5;&#x9053; , &#x9501;&#x7684;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x662F;&#x5355;&#x5411;&#x7684; , &#x7531; &#x504F;&#x5411;&#x9501; -&gt; &#x8F7B;&#x91CF;&#x7EA7;&#x9501; -&gt; &#x91CD;&#x91CF;&#x7EA7;&#x9501; ,&#x6211;&#x4EEC;&#x5206;&#x522B;&#x634B;&#x4E00;&#x4E0B;</span><br><span class="line"></span><br><span class="line">// &#x504F;&#x5411;&#x9501; -&gt; &#x504F;&#x5411;&#x9501;, &#x5373;&#x91CD;&#x504F;&#x5411;&#x64CD;&#x4F5C;</span><br><span class="line">1 &#x5BF9;&#x8C61;&#x5148;&#x504F;&#x5411;&#x4E8E;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C; &#x6267;&#x884C;&#x5B8C;&#x540C;&#x6B65;&#x4EE3;&#x7801;&#x540E; , &#x8FDB;&#x5165;&#x5B89;&#x5168;&#x70B9;&#x65F6;&#xFF0C;&#x82E5;&#x9700;&#x8981;&#x91CD;&#x504F;&#x5411;&#xFF0C;&#x4F1A;&#x628A;&#x7C7B;&#x5BF9;&#x8C61;&#x4E2D; epoch &#x503C;&#x589E;&#x52A0;</span><br><span class="line">2 &#x9000;&#x51FA;&#x5B89;&#x5168;&#x70B9;&#x540E; , &#x5F53;&#x6709;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x5C1D;&#x8BD5;&#x83B7;&#x53D6;&#x504F;&#x5411;&#x9501;&#x65F6;&#xFF0C; &#x76F4;&#x63A5;&#x68C0;&#x67E5;&#x7C7B;&#x5B9E;&#x4F8B;&#x5BF9;&#x8C61;&#x4E2D;&#x5B58;&#x50A8;&#x7684; epoch &#x503C;&#x4E0E;&#x7C7B;&#x5BF9;&#x8C61;&#x4E2D;&#x5B58;&#x50A8;&#x7684; epoch &#x503C;&#x662F;&#x5426;&#x76F8;&#x7B49;&#xFF0C; &#x5982;&#x679C;&#x4E0D;&#x76F8;&#x7B49;&#xFF0C; &#x5219;&#x8BF4;&#x660E;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x504F;&#x5411;&#x9501;&#x5DF2;&#x7ECF;&#x65E0;&#x6548;&#x4E86;&#xFF0C; &#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x5BF9;&#x6B64;&#x5BF9;&#x8C61;&#x91CD;&#x65B0;&#x8FDB;&#x884C;&#x504F;&#x5411;&#x64CD;&#x4F5C;&#x3002;</span><br><span class="line"></span><br><span class="line">// &#x504F;&#x5411;&#x9501; -&gt; &#x8F7B;&#x91CF;&#x7EA7;&#x9501; </span><br><span class="line">1 &#x5F53;&#x53D1;&#x73B0;&#x5BF9;&#x8C61;&#x5DF2;&#x88AB;&#x9501;&#x5B9A; ,&#x4E14; ThreadID &#x4E0D;&#x662F;&#x81EA;&#x5DF1; , &#x8F6C;&#x4E3A; &#x504F;&#x5411;&#x9501; , &#x5728;&#x8BE5;&#x7EBF;&#x7A0B;&#x7684;&#x6808;&#x5E27;&#x4E2D;&#x5EFA;&#x7ACB; Lock Record &#x7A7A;&#x95F4;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/eb83dad3ca4383eb8f7e26d55a3d3e09ba7cafea964f8c4104c2c3841b8c6da3" alt="lock_satus.jpg"></p>
<h3 id="1-7-&#x4E3A;&#x4EC0;&#x4E48;&#x9501;&#x4F1A;&#x8F6C;&#x6362;"><a href="#1-7-&#x4E3A;&#x4EC0;&#x4E48;&#x9501;&#x4F1A;&#x8F6C;&#x6362;" class="headerlink" title="1.7 &#x4E3A;&#x4EC0;&#x4E48;&#x9501;&#x4F1A;&#x8F6C;&#x6362;"></a>1.7 &#x4E3A;&#x4EC0;&#x4E48;&#x9501;&#x4F1A;&#x8F6C;&#x6362;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x8FD9;&#x8981;&#x4ECE;&#x673A;&#x5236;&#x8BF4;&#x8D77; , &#x6BCF;&#x4E00;&#x79CD;&#x9501;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x7279;&#x70B9;</span><br><span class="line"></span><br><span class="line">&gt; &#x504F;&#x5411;&#x9501;</span><br><span class="line">- &#x4F18;&#x70B9; : &#x65E0; CAS ,&#x6D88;&#x8017;&#x5C11; , &#x6027;&#x80FD;&#x9AD8; ,  &#x53EF;&#x91CD;&#x5165;</span><br><span class="line">- &#x7F3A;&#x70B9; : &#x9501;&#x7ADE;&#x4E89;&#x65F6;&#x64A4;&#x9500;&#x9501;&#x6D88;&#x8017;&#x9AD8;</span><br><span class="line">- &#x573A;&#x666F; : &#x540C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x540C;&#x6B65;&#x4EE3;&#x7801;</span><br><span class="line"></span><br><span class="line">&gt; &#x8F7B;&#x91CF;&#x7EA7;&#x9501;</span><br><span class="line">- &#x4F18;&#x70B9; : &#x7ADE;&#x4E89;&#x7684;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x963B;&#x585E;</span><br><span class="line">- &#x7F3A;&#x70B9; : &#x8F7B;&#x91CF;&#x7EA7;&#x9501;&#x672A;&#x83B7;&#x53D6;&#x9501;&#x65F6;&#x4F1A;&#x901A;&#x8FC7;&#x81EA;&#x65CB;&#x83B7;&#x53D6; , &#x6D88;&#x8017;&#x8D44;&#x6E90;</span><br><span class="line">- &#x573A;&#x666F; : &#x7EBF;&#x7A0B;&#x4EA4;&#x66FF;&#x6267;&#x884C;&#x540C;&#x6B65;&#x5757;&#x6216;&#x8005;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#xFF0C;&#x8FFD;&#x6C42;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#xFF0C;&#x9501;&#x5360;&#x7528;&#x65F6;&#x95F4;&#x5F88;&#x77ED;</span><br><span class="line"></span><br><span class="line">&gt; &#x91CD;&#x91CF;&#x7EA7;&#x9501;</span><br><span class="line">- &#x4F18;&#x70B9; : &#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#x4E0D;&#x4F7F;&#x7528;&#x81EA;&#x65CB; , &#x53EA;&#x4F1A;&#x5524;&#x9192;&#x548C;&#x7B49;&#x5F85;</span><br><span class="line">- &#x7F3A;&#x70B9; : &#x9020;&#x6210;&#x7EBF;&#x7A0B;&#x963B;&#x585E; , &#x9501;&#x7684;&#x6539;&#x53D8;&#x4E5F;&#x6D88;&#x8017;&#x8D44;&#x6E90;</span><br><span class="line">- &#x573A;&#x666F; : &#x8FFD;&#x6C42;&#x541E;&#x5410;&#x91CF;&#xFF0C;&#x9501;&#x5360;&#x7528;&#x65F6;&#x95F4;&#x8F83;&#x957F;</span><br><span class="line"></span><br><span class="line">// &#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x9700;&#x6C42; , &#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x9501; , &#x8FBE;&#x5230;&#x4E1A;&#x52A1;&#x76EE;&#x7684;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/935977914ff148eaa37b16cd9e773505e7679c15e8cc91c4d24a1e70c5b7e607" alt="&#x9501;&#x72B6;&#x6001;pg.jpg"></p>
<h3 id="1-8-Synchoized-&#x6E90;&#x7801;"><a href="#1-8-Synchoized-&#x6E90;&#x7801;" class="headerlink" title="1.8 Synchoized &#x6E90;&#x7801;"></a>1.8 Synchoized &#x6E90;&#x7801;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">synchronized &#x662F;&#x4E00;&#x4E2A;&#x4FEE;&#x9970;&#x7B26; , &#x6211;&#x4EEC;&#x9700;&#x8981;&#x4ECE; C &#x7684;&#x89D2;&#x5EA6;&#x53BB;&#x770B; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Step 1 : &#x4E0B;&#x8F7D; OpenJDK &#x4EE3;&#x7801; https://blog.csdn.net/leisure_life/article/details/108367675</span><br><span class="line">Step 2 : &#x6839;&#x636E;&#x4EE3;&#x7801;&#x7D22;&#x5F15; .c &#x6587;&#x4EF6;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// TODO</span><br></pre></td></tr></table></figure>

<h3 id="1-9-Synchoized-&#x7528;&#x6CD5;"><a href="#1-9-Synchoized-&#x7528;&#x6CD5;" class="headerlink" title="1.9 Synchoized &#x7528;&#x6CD5;"></a>1.9 Synchoized &#x7528;&#x6CD5;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public void operation(Integer check) {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6821;&#x9A8C;&#x65E0;&#x9501;&#x60C5;&#x51B5;</span><br><span class="line">     */</span><br><span class="line">    public void functionShow(Integer check) {</span><br><span class="line">        logger.info(&quot;------&gt; check is {} &lt;-------&quot;, check);</span><br><span class="line">        if (check == 0) {</span><br><span class="line">            showNum = 100;</span><br><span class="line">            try {</span><br><span class="line">                Thread.sleep(2000);</span><br><span class="line">            } catch (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        } else if (check == 1) {</span><br><span class="line">            showNum = 200;</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;------&gt; check is Over {} :{}&quot;, check, showNum);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x540C;&#x6B65;&#x65B9;&#x6CD5; , &#x6821;&#x9A8C; synchronized &#x65B9;&#x6CD5;</span><br><span class="line">     */</span><br><span class="line">    synchronized public void functionShowSynchronized(Integer check) {</span><br><span class="line">        logger.info(&quot;------&gt; check is {} &lt;-------&quot;, check);</span><br><span class="line">        if (check == 0) {</span><br><span class="line">            showNum = 100;</span><br><span class="line">            try {</span><br><span class="line">                Thread.sleep(5000);</span><br><span class="line">            } catch (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        } else if (check == 1) {</span><br><span class="line">            showNum = 200;</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;------&gt; check is Over synchronized {} :{}&quot;, check, showNum);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x6821;&#x9A8C; synchronized &#x4EE3;&#x7801;&#x5757;</span><br><span class="line">     */</span><br><span class="line">    public void statementShowSynchronized(Integer check) {</span><br><span class="line">        logger.info(&quot;------&gt; check is {} &lt;-------&quot;, check);</span><br><span class="line">        synchronized (this) {</span><br><span class="line">            if (check == 0) {</span><br><span class="line">                showNum = 100;</span><br><span class="line">                try {</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            } else if (check == 1) {</span><br><span class="line">                showNum = 200;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;------&gt; check is Over synchronized {} :{}&quot;, check, showNum);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x6821;&#x9A8C; &#x4EE3;&#x7801;&#x5757;&#x4EE5; Class &#x4E3A;&#x5BF9;&#x8C61;</span><br><span class="line">    public void classShowSynchronized(Integer check) {</span><br><span class="line">        logger.info(&quot;check is {} &lt;-------&quot;, check);</span><br><span class="line">        synchronized (CommonTO.class) {</span><br><span class="line">            if (check == 0) {</span><br><span class="line">                showNum = 100;</span><br><span class="line">                try {</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            } else if (check == 1) {</span><br><span class="line">                showNum = 200;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;check is Over synchronized {} :{}&quot;, check, showNum);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757; Object</span><br><span class="line">    public void objectShowSynchronized(Integer check) {</span><br><span class="line">        logger.info(&quot;check is {} &lt;-------&quot;, check);</span><br><span class="line">        synchronized (lock) {</span><br><span class="line">            if (check == 0) {</span><br><span class="line">                showNum = 100;</span><br><span class="line">                try {</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            } else if (check == 1) {</span><br><span class="line">                showNum = 200;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;check is Over synchronized {} :{}&quot;, check, showNum);</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // &#x540C;&#x6B65;&#x4EE3;&#x7801;&#x5757; Object</span><br><span class="line">    public void objectStringShowSynchronized(Integer check) {</span><br><span class="line">        logger.info(&quot;check is {} &lt;-------&quot;, check);</span><br><span class="line">        synchronized (lock2) {</span><br><span class="line">            if (check == 0) {</span><br><span class="line">                showNum = 100;</span><br><span class="line">                try {</span><br><span class="line">                    Thread.sleep(5000);</span><br><span class="line">                } catch (InterruptedException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            } else if (check == 1) {</span><br><span class="line">                showNum = 200;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        logger.info(&quot;check is Over synchronized {} :{}&quot;, check, showNum);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x9010;&#x6B65;&#x66F4;&#x65B0; , &#x9010;&#x6B65;&#x5B8C;&#x5584;</p>
<h2 id="&#x66F4;&#x65B0;&#x65E5;&#x8BB0;"><a href="#&#x66F4;&#x65B0;&#x65E5;&#x8BB0;" class="headerlink" title="&#x66F4;&#x65B0;&#x65E5;&#x8BB0;"></a>&#x66F4;&#x65B0;&#x65E5;&#x8BB0;</h2><ul>
<li>V20210727 : &#x8865;&#x5145;&#x7EC6;&#x8282;&#x70B9; , &#x4F18;&#x5316;&#x5185;&#x5BB9;</li>
<li>V20210813 : &#x8865;&#x5145;&#x6DF1;&#x5165;&#x7EC6;&#x8282; , Java &#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x827A;&#x672F;</li>
<li>V20210814 : &#x8865;&#x5145;&#x6C47;&#x7F16;&#x7EC6;&#x8282;</li>
</ul>
<h2 id="&#x53C2;&#x8003;&#x6587;&#x6863;"><a href="#&#x53C2;&#x8003;&#x6587;&#x6863;" class="headerlink" title="&#x53C2;&#x8003;&#x6587;&#x6863;"></a>&#x53C2;&#x8003;&#x6587;&#x6863;</h2><p>&#x300A;&#x6DF1;&#x5165;&#x6D45;&#x51FA; Java &#x591A;&#x7EBF;&#x7A0B;&#x300B;   </p>
<p>&#x300A;Java&#x5E76;&#x53D1;&#x7F16;&#x7A0B;&#x7684;&#x827A;&#x672F;&#x300B;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a8dfceed69c6d746dce895f8c6b446ed.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6933926972452143111.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6933926972452143111.html" itemprop="url">Java多线程(一)   快查手册</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-02-27T21:02:54+08:00">
                2021-02-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">!&#x590D;&#x5236;&#x4EE3;&#x7801;&#x5176;&#x5B9E;&#x591A;&#x7EBF;&#x7A0B;&#x4E4B;&#x524D;&#x53D1;&#x4E86;&#x4E00;&#x4E2A;&#x51E0;&#x4E07;&#x5B57;&#x7684;&#x96C6;&#x5408; , &#x4F46;&#x662F;&#x611F;&#x89C9;&#x6548;&#x679C;&#x5E76;&#x4E0D;&#x597D; , &#x6D89;&#x53CA;&#x7684;&#x77E5;&#x8BC6;&#x70B9;&#x8FC7;&#x591A; , &#x7EC6;&#x8282;&#x4E5F;&#x4E0D;&#x591F;&#x788E; .</span><br><span class="line">&#x6240;&#x4EE5;&#x540E;&#x9762;&#x4F1A;&#x4E00;&#x90E8;&#x5206;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x7406;&#x51FA;&#x6765; , &#x5C3D;&#x91CF;&#x505A;&#x5230;&#x6E05;&#x695A;&#x8BE6;&#x7EC6; . </span><br><span class="line"></span><br><span class="line">&#x6211;&#x5199;&#x7B14;&#x8BB0;&#x7684;&#x559C;&#x6B22;&#x4F1A;&#x5728;&#x5F00;&#x5934;&#x5199;&#x4E0A;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;&#x76EE;&#x5F55;&#x7684;&#x5FEB;&#x67E5;&#x624B;&#x518C; , &#x5B83;&#x6BD4;&#x76EE;&#x5F55;&#x4F1A;&#x66F4;&#x52A0;&#x8BE6;&#x7EC6; , &#x4E5F;&#x8DB3;&#x591F;&#x7CBE;&#x7B80; , &#x8FD9;&#x4E00;&#x7BC7;&#x5373;&#x662F;&#x8FD9;&#x4E2A;&#x76EE;&#x7684;</span><br><span class="line">&#x8FD9;&#x7BC7;&#x73B0;&#x5728;&#x522B;&#x770B;&#x5F88;&#x7B80;&#x5355; , &#x4EE5;&#x540E;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5927;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>&#x53CB;&#x60C5;&#x94FE;&#x63A5;</p>
</blockquote>
<ul>
<li><a href="https://dev.newban.cn/6930605141280325639">Java JVM &#x7BC7;</a></li>
</ul>
<blockquote>
<p>&#x591A;&#x7EBF;&#x7A0B;&#x7BC7;<br><a href="https://dev.newban.cn/6933927283665469453">Java&#x591A;&#x7EBF;&#x7A0B; : &#x7EC6;&#x8BF4; synchronized</a></p>
</blockquote>
<p><a href="https://dev.newban.cn/6933927283665469453">Java &#x591A;&#x7EBF;&#x7A0B;: &#x6F2B;&#x8C08; Volatile</a></p>
<p><a href="https://dev.newban.cn/6939052022977003551">Java &#x591A;&#x7EBF;&#x7A0B; : &#x6F2B;&#x8C08; CAS</a></p>
<p><a href="https://dev.newban.cn/6939408032312852511">Java &#x591A;&#x7EBF;&#x7A0B; : &#x963B;&#x585E;&#x961F;&#x5217; &#x6CA1;&#x5565;&#x597D;&#x8BF4;&#x7684;</a></p>
<h2 id="&#x5FEB;&#x67E5;&#x624B;&#x518C;"><a href="#&#x5FEB;&#x67E5;&#x624B;&#x518C;" class="headerlink" title="&#x5FEB;&#x67E5;&#x624B;&#x518C;"></a>&#x5FEB;&#x67E5;&#x624B;&#x518C;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x4E50;&#x89C2;&#x9501;/&#x60B2;&#x89C2;&#x9501;</span><br><span class="line">java&#x60B2;&#x89C2;&#x9501;&#xFF1A;synchronized&#x3001;lock&#x7684;&#x5B9E;&#x73B0;&#x7C7B;</span><br><span class="line">java&#x4E50;&#x89C2;&#x9501;&#xFF1A;&#x4E50;&#x89C2;&#x9501;&#x5728;Java&#x4E2D;&#x662F;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x65E0;&#x9501;&#x7F16;&#x7A0B;&#x6765;&#x5B9E;&#x73B0;&#xFF0C;&#x6700;&#x5E38;&#x91C7;&#x7528;&#x7684;&#x662F;CAS&#x7B97;&#x6CD5;&#xFF0C;Java&#x539F;&#x5B50;&#x7C7B;&#x4E2D;&#x7684;&#x9012;&#x589E;&#x64CD;&#x4F5C;&#x5C31;&#x901A;&#x8FC7;CAS&#x81EA;&#x65CB;&#x5B9E;&#x73B0;&#x7684;&#x3002;</span><br><span class="line"></span><br><span class="line">// &#x72EC;&#x4EAB;&#x9501;/&#x5171;&#x4EAB;&#x9501;</span><br><span class="line">synchronized&#x3001;ReentrantLock&#x662F;&#x72EC;&#x4EAB;&#x9501;&#x3002;</span><br><span class="line">ReadWriteLock&#x5176;&#x8BFB;&#x9501;&#x662F;&#x5171;&#x4EAB;&#x9501;&#xFF0C;&#x5176;&#x5199;&#x9501;&#x662F;&#x72EC;&#x4EAB;&#x9501;&#x3002;</span><br><span class="line">    </span><br><span class="line">// &#x53EF;&#x91CD;&#x5165;&#x9501;</span><br><span class="line">synchronized&#x3001;ReentrantLock</span><br><span class="line">    </span><br><span class="line">// &#x516C;&#x5E73;&#x9501;/&#x975E;&#x516C;&#x5E73;&#x9501;</span><br><span class="line">synchronized&#x662F;&#x975E;&#x516C;&#x5E73;&#x9501;</span><br><span class="line">ReetrantLock&#xFF08;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6307;&#x5B9A;&#x8BE5;&#x9501;&#x662F;&#x5426;&#x662F;&#x516C;&#x5E73;&#x9501;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x975E;&#x516C;&#x5E73;&#x9501;&#xFF09;</span><br></pre></td></tr></table></figure>

<h3 id="JVM-&#x53C2;&#x6570;&#x53D8;&#x91CF;"><a href="#JVM-&#x53C2;&#x6570;&#x53D8;&#x91CF;" class="headerlink" title="JVM &#x53C2;&#x6570;&#x53D8;&#x91CF;"></a>JVM &#x53C2;&#x6570;&#x53D8;&#x91CF;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sql&#x590D;&#x5236;&#x4EE3;&#x7801;&gt; User user = new User()</span><br><span class="line">- new User &#x4F1A;&#x521B;&#x5EFA;&#x5230; Heap &#x4E2D;</span><br><span class="line">- User user &#x4E3A;&#x5BF9;&#x8C61;&#x5F97;&#x5F15;&#x7528; ,&#x653E;&#x5728;&#x65B9;&#x6CD5;&#x6808;&#x4E2D;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/bc2bd5a14ca30888a18e1aa4da2135223836a2a7531e711249040c79e955a621" alt></p>
<h3 id="JVM-&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x540C;&#x6B65;"><a href="#JVM-&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x540C;&#x6B65;" class="headerlink" title="JVM &#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x540C;&#x6B65;"></a>JVM &#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x53D8;&#x91CF;&#x540C;&#x6B65;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/d88c4a547d4df77a7b867b118c2d7658387cb1973b69c68f8fbfb61c2326db69" alt></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/96f9e707d6d5d5d40cd601c148d04ab7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../6933867767464624142.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../6933867767464624142.html" itemprop="url">15个好用到哭的python库，太牛了！</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-02-27T17:13:18+08:00">
                2021-02-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4E3A;&#x4EC0;&#x4E48;&#x6211;&#x559C;&#x6B22;Python&#xFF1F;&#x5BF9;&#x4E8E;&#x521D;&#x5B66;&#x8005;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x6613;&#x5B66;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x539F;&#x56E0;&#xFF1A;&#x5927;&#x91CF;&#x5F00;&#x7BB1;&#x5373;&#x7528;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#xFF0C;&#x6B63;&#x662F;23&#x4E07;&#x4E2A;&#x7531;&#x7528;&#x6237;&#x63D0;&#x4F9B;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#x4F7F;&#x5F97;Python&#x771F;&#x6B63;&#x5F3A;&#x5927;&#x548C;&#x6D41;&#x884C;&#x3002;</p>
<p>&#x5728;&#x672C;&#x6587;&#x4E2D;&#xFF0C;&#x6211;&#x6311;&#x9009;&#x4E86;15&#x4E2A;&#x6700;&#x6709;&#x7528;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x4ECB;&#x7ECD;&#x5B83;&#x4EEC;&#x7684;&#x529F;&#x80FD;&#x548C;&#x7279;&#x70B9;&#x3002;</p>
<ol>
<li>Dash</li>
</ol>
<hr>
<p>Dash&#x662F;&#x6BD4;&#x8F83;&#x65B0;&#x7684;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x5B83;&#x662F;&#x7528;&#x7EAF;Python&#x6784;&#x5EFA;&#x6570;&#x636E;&#x53EF;&#x89C6;&#x5316;app&#x7684;&#x7406;&#x60F3;&#x9009;&#x62E9;&#xFF0C;&#x56E0;&#x6B64;&#x7279;&#x522B;&#x9002;&#x5408;&#x5904;&#x7406;&#x6570;&#x636E;&#x7684;&#x4EFB;&#x4F55;&#x4EBA;&#x3002;Dash&#x662F;Flask&#xFF0C;Plotly.js&#x548C;React.js&#x7684;&#x6DF7;&#x5408;&#x4F53;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/2eb182dbb3a09d080a29f564b9e4ed91628dcb3be59f6e68548a997ecb8bd7ab" alt></p>
<ol start="2">
<li>Pygame</li>
</ol>
<hr>
<p>Pygame&#x662F;SDL&#x591A;&#x5A92;&#x4F53;&#x5E93;&#x7684;Python&#x88C5;&#x9970;&#x5668;&#xFF0C;SDL(Simple DirectMedia Layer)&#x662F;&#x4E00;&#x4E2A;&#x8DE8;&#x5E73;&#x53F0;&#x5F00;&#x53D1;&#x5E93;&#xFF0C;&#x65E8;&#x5728;&#x63D0;&#x4F9B;&#x5BF9;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x7684;&#x4F4E;&#x7EA7;&#x63A5;&#x53E3;&#xFF1A;</p>
<ul>
<li>&#x97F3;&#x9891;</li>
<li>&#x952E;&#x76D8;</li>
<li>&#x9F20;&#x6807;</li>
<li>&#x6E38;&#x620F;&#x6746;</li>
<li>&#x57FA;&#x4E8E;OpenGL&#x548C;Direct3D&#x7684;&#x56FE;&#x5F62;&#x786C;&#x4EF6;</li>
</ul>
<p>Pygame&#x5177;&#x6709;&#x9AD8;&#x5EA6;&#x7684;&#x53EF;&#x79FB;&#x690D;&#x6027;&#xFF0C;&#x51E0;&#x4E4E;&#x53EF;&#x4EE5;&#x5728;&#x6240;&#x6709;&#x5E73;&#x53F0;&#x548C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E0A;&#x8FD0;&#x884C;&#x3002;&#x5C3D;&#x7BA1;&#x5B83;&#x5177;&#x6709;&#x5B8C;&#x5584;&#x7684;&#x6E38;&#x620F;&#x5F15;&#x64CE;&#xFF0C;&#x4F46;&#x60A8;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x5E93;&#x76F4;&#x63A5;&#x4ECE;Python&#x811A;&#x672C;&#x64AD;&#x653E;MP3&#x6587;&#x4EF6;&#x3002;</p>
<ol start="3">
<li>Pillow</li>
</ol>
<hr>
<p>Pillow&#x4E13;&#x95E8;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x56FE;&#x50CF;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8BE5;&#x5E93;&#x521B;&#x5EFA;&#x7F29;&#x7565;&#x56FE;&#xFF0C;&#x5728;&#x6587;&#x4EF6;&#x683C;&#x5F0F;&#x4E4B;&#x95F4;&#x8F6C;&#x6362;&#xFF0C;&#x65CB;&#x8F6C;&#xFF0C;&#x5E94;&#x7528;&#x6EE4;&#x955C;&#xFF0C;&#x663E;&#x793A;&#x56FE;&#x50CF;&#x7B49;&#x7B49;&#x3002;&#x5982;&#x679C;&#x60A8;&#x9700;&#x8981;&#x5BF9;&#x8BB8;&#x591A;&#x56FE;&#x50CF;&#x6267;&#x884C;&#x6279;&#x91CF;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x662F;&#x7406;&#x60F3;&#x7684;&#x9009;&#x62E9;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x5FEB;&#x901F;&#x4E86;&#x89E3;&#x5B83;&#xFF0C;&#x770B;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF08;&#x52A0;&#x8F7D;&#x5E76;&#x6E32;&#x67D3;&#x56FE;&#x7247;&#xFF09;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/7b43c56cae44c9cf2eb81e1f0bf7bc5b35b33fef24c620b1ac0cd7ee9971ab8e" alt></p>
<ol start="4">
<li>Colorama</li>
</ol>
<hr>
<p>Colorama&#x5141;&#x8BB8;&#x4F60;&#x5728;&#x7EC8;&#x7AEF;&#x4F7F;&#x7528;&#x989C;&#x8272;&#xFF0C;&#x975E;&#x5E38;&#x9002;&#x5408;Python&#x811A;&#x672C;&#xFF0C;&#x6587;&#x6863;&#x7B80;&#x77ED;&#x800C;&#x6709;&#x8DA3;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;Colorama PyPI&#x9875;&#x9762;&#x4E0A;&#x627E;&#x5230;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a2d87b89d57ecb6bcd78b4c760330fe0e35d0ee5282b6d3a4561ec4ed4a51e2f" alt></p>
<ol start="5">
<li>JmesPath</li>
</ol>
<hr>
<p>&#x5728;Python&#x4E2D;&#x4F7F;&#x7528;JSON&#x975E;&#x5E38;&#x5BB9;&#x6613;&#xFF0C;&#x56E0;&#x4E3A;JSON&#x5728;Python&#x5B57;&#x5178;&#x4E0A;&#x7684;&#x6620;&#x5C04;&#x975E;&#x5E38;&#x597D;&#x3002;&#x6B64;&#x5916;&#xFF0C;Python&#x5E26;&#x6709;&#x81EA;&#x5DF1;&#x51FA;&#x8272;&#x7684;json&#x5E93;&#xFF0C;&#x7528;&#x4E8E;&#x89E3;&#x6790;&#x548C;&#x521B;&#x5EFA;JSON&#x3002;&#x5BF9;&#x6211;&#x6765;&#x8BF4;&#xFF0C;&#x8FD9;&#x662F;&#x5B83;&#x6700;&#x597D;&#x7684;&#x529F;&#x80FD;&#x4E4B;&#x4E00;&#x3002;&#x5982;&#x679C;&#x6211;&#x9700;&#x8981;&#x4F7F;&#x7528;JSON&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;Python&#x3002;</p>
<p>JMESPath&#x4F7F;Python&#x5904;&#x7406;JSON&#x66F4;&#x52A0;&#x5BB9;&#x6613;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x60A8;&#x660E;&#x786E;&#x7684;&#x5730;&#x6307;&#x5B9A;&#x5982;&#x4F55;&#x4ECE;JSON&#x6587;&#x6863;&#x4E2D;&#x63D0;&#x53D6;&#x5143;&#x7D20;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x793A;&#x4F8B;&#xFF0C;&#x53EF;&#x8BA9;&#x60A8;&#x5BF9;&#x5B83;&#x7684;&#x529F;&#x80FD;&#x6709;&#x6240;&#x4E86;&#x89E3;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/36eb55b832799ed0e86bd15cbd3fc262f86eb2ff4b4387fd392918b62fed1242" alt></p>
<ol start="6">
<li>Requests</li>
</ol>
<hr>
<p>Requests&#x5EFA;&#x7ACB;&#x5728;&#x4E16;&#x754C;&#x4E0A;&#x4E0B;&#x8F7D;&#x91CF;&#x6700;&#x5927;&#x7684;Python&#x5E93;urllib3&#x4E0A;&#xFF0C;&#x5B83;&#x4EE4;Web&#x8BF7;&#x6C42;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x529F;&#x80FD;&#x5F3A;&#x5927;&#x4E14;&#x7528;&#x9014;&#x5E7F;&#x6CDB;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#x8BF4;&#x660E;requests&#x7684;&#x4F7F;&#x7528;&#x662F;&#x591A;&#x4E48;&#x7B80;&#x5355;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a82ab5084af43be127539d27b2553a054b8d3d43f410b8e12e982045071accd3" alt></p>
<p>Requests&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x60A8;&#x80FD;&#x60F3;&#x5230;&#x7684;&#x6240;&#x6709;&#x9AD8;&#x7EA7;&#x5DE5;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x8BA4;&#x8BC1;</li>
<li>&#x4F7F;&#x7528;cookie</li>
<li>&#x6267;&#x884C;POST&#xFF0C;PUT&#xFF0C;DELETE&#x7B49;</li>
<li>&#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x8BC1;&#x4E66;</li>
<li>&#x4F7F;&#x7528;&#x4F1A;&#x8BDD;Session</li>
<li>&#x4F7F;&#x7528;&#x4EE3;&#x7406;</li>
</ul>
<ol start="7">
<li>Simplejson</li>
</ol>
<hr>
<p>Python&#x4E2D;&#x7684;&#x672C;&#x5730;json&#x6A21;&#x5757;&#x6709;&#x4EC0;&#x4E48;&#x95EE;&#x9898;&#xFF1F;&#x6CA1;&#x6709;&#xFF01;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;Python&#x7684;json&#x662F;simplejson&#x3002;&#x610F;&#x601D;&#x662F;&#xFF0C;Python&#x91C7;&#x7528;&#x4E86;simplejson&#x7684;&#x4E00;&#x4E2A;&#x7248;&#x672C;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x5408;&#x5E76;&#x5230;&#x6BCF;&#x4E2A;&#x53D1;&#x884C;&#x7248;&#x4E2D;&#x3002;&#x4F46;&#x662F;&#x4F7F;&#x7528;simplejson&#x5177;&#x6709;&#x4E00;&#x4E9B;&#x4F18;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x5B83;&#x9002;&#x7528;&#x4E8E;&#x66F4;&#x591A;Python&#x7248;&#x672C;&#x3002;</li>
<li>&#x5B83;&#x6BD4;Python&#x968F;&#x9644;&#x7684;&#x7248;&#x672C;&#x66F4;&#x65B0;&#x9891;&#x7387;&#x66F4;&#x9AD8;&#x3002;</li>
<li>&#x5B83;&#x5177;&#x6709;&#x7528;C&#x7F16;&#x5199;&#x7684;&#xFF08;&#x53EF;&#x9009;&#xFF09;&#x90E8;&#x5206;&#xFF0C;&#x56E0;&#x6B64;&#x975E;&#x5E38;&#x5FEB;&#x901F;&#x3002;</li>
</ul>
<p>&#x7531;&#x4E8E;&#x8FD9;&#x4E9B;&#x4E8B;&#x5B9E;&#xFF0C;&#x60A8;&#x7ECF;&#x5E38;&#x4F1A;&#x5728;&#x4F7F;&#x7528;JSON&#x7684;&#x811A;&#x672C;&#x4E2D;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/aa3c3e89889c964b95672cf71ca525e31087d76f62ec5606e1b976516977bab3" alt></p>
<p>&#x6211;&#x5C06;&#x53EA;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;json&#xFF0C;&#x9664;&#x975E;&#x60A8;&#x7279;&#x522B;&#x9700;&#x8981;&#xFF1A;</p>
<ul>
<li>&#x901F;&#x5EA6;</li>
<li>&#x6807;&#x51C6;&#x5E93;&#x4E2D;&#x6CA1;&#x6709;&#x7684;&#x4E1C;&#x897F;</li>
</ul>
<p>Simplejson&#x6BD4;json&#x5FEB;&#x5F88;&#x591A;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x7528;C&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x5173;&#x952E;&#x90E8;&#x5206;&#x3002;&#x9664;&#x975E;&#x60A8;&#x6B63;&#x5728;&#x5904;&#x7406;&#x6570;&#x767E;&#x4E07;&#x4E2A;JSON&#x6587;&#x4EF6;&#xFF0C;&#x5426;&#x5219;&#x60A8;&#x4E0D;&#x4F1A;&#x5BF9;&#x8FD9;&#x79CD;&#x901F;&#x5EA6;&#x611F;&#x5174;&#x8DA3;&#x3002;</p>
<ol start="8">
<li>Emoji</li>
</ol>
<hr>
<p>Emoji&#x5E93;&#x975E;&#x5E38;&#x6709;&#x610F;&#x601D;&#xFF0C;&#x4F46;&#x5E76;&#x975E;&#x6BCF;&#x4E2A;&#x4EBA;&#x90FD;&#x559C;&#x6B22;&#x8868;&#x60C5;&#x5305;&#xFF0C;&#x5206;&#x6790;&#x89C6;&#x89D2;&#x5A92;&#x4F53;&#x6570;&#x636E;&#x65F6;&#xFF0C;Emoji&#x5305;&#x975E;&#x5E38;&#x6709;&#x7528;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/eb41b487f8045d378fda10a1612012fc72821f5c7457f341df93084ce849c28b" alt></p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;&#x793A;&#x4F8B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/6357eb1a5cafd6ddc22e4d8050d11e32ce28f41f7b01cb4bdc4845730f976a14" alt></p>
<ol start="9">
<li>Chardet</li>
</ol>
<hr>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;chardet&#x6A21;&#x5757;&#x6765;&#x68C0;&#x6D4B;&#x6587;&#x4EF6;&#x6216;&#x6570;&#x636E;&#x6D41;&#x7684;&#x5B57;&#x7B26;&#x96C6;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x8FD9;&#x5728;&#x5206;&#x6790;&#x5927;&#x91CF;&#x968F;&#x673A;&#x6587;&#x672C;&#x65F6;&#x5F88;&#x6709;&#x7528;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x60A8;&#x4E0D;&#x77E5;&#x9053;&#x5B57;&#x7B26;&#x96C6;&#x662F;&#x4EC0;&#x4E48;&#x65F6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x5904;&#x7406;&#x8FDC;&#x7A0B;&#x4E0B;&#x8F7D;&#x7684;&#x6570;&#x636E;&#x65F6;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>
<ol start="10">
<li>Python-dateutil</li>
</ol>
<hr>
<p>python-dateutil&#x6A21;&#x5757;&#x63D0;&#x4F9B;&#x4E86;&#x5BF9;&#x6807;&#x51C6;datetime&#x6A21;&#x5757;&#x7684;&#x5F3A;&#x5927;&#x6269;&#x5C55;&#x3002;&#x6211;&#x7684;&#x7ECF;&#x9A8C;&#x662F;&#xFF0C;&#x5E38;&#x89C4;&#x7684;Python&#x65E5;&#x671F;&#x65F6;&#x95F4;&#x529F;&#x80FD;&#x5728;&#x54EA;&#x91CC;&#x7ED3;&#x675F;&#xFF0C;&#x800C;python-dateutil&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B64;&#x5E93;&#x505A;&#x5F88;&#x591A;&#x5F88;&#x68D2;&#x7684;&#x4E8B;&#x60C5;&#x3002;&#x6211;&#x5C06;&#x8FD9;&#x4E9B;&#x793A;&#x4F8B;&#x9650;&#x5236;&#x4E3A;&#x6211;&#x53D1;&#x73B0;&#x7279;&#x522B;&#x6709;&#x7528;&#x7684;&#x793A;&#x4F8B;&#xFF1A;&#x6A21;&#x7CCA;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x65E5;&#x671F;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/0ef482d8346df3238da91d350c5c5d9162b1a3f508266ee02d0622c9589428e2" alt></p>
<p>&#x6709;&#x5173;&#x66F4;&#x591A;&#x529F;&#x80FD;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1;&#x5B8C;&#x6574;&#x6587;&#x6863;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x8BA1;&#x7B97;&#x76F8;&#x5BF9;&#x589E;&#x91CF;&#xFF08;&#x4E0B;&#x4E2A;&#x6708;&#xFF0C;&#x660E;&#x5E74;&#xFF0C;&#x4E0B;&#x5468;&#x4E00;&#xFF0C;&#x8BE5;&#x6708;&#x7684;&#x6700;&#x540E;&#x4E00;&#x5468;&#x7B49;&#xFF09;&#x548C;&#x4E24;&#x4E2A;&#x7ED9;&#x5B9A;&#x65E5;&#x671F;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x76F8;&#x5BF9;&#x589E;&#x91CF;&#x3002;</li>
<li>&#x4F7F;&#x7528;iCalendar&#x89C4;&#x8303;&#x7684;&#x8D85;&#x96C6;&#xFF0C;&#x6839;&#x636E;&#x91CD;&#x590D;&#x89C4;&#x5219;&#x8BA1;&#x7B97;&#x65E5;&#x671F;&#x3002;</li>
<li>tzfile&#x6587;&#x4EF6;&#xFF08;/ etc / localtime&#xFF0C;/ usr / share / zoneinfo&#x7B49;&#xFF09;&#x7684;&#x65F6;&#x533A;&#xFF08;tzinfo&#xFF09;&#x5B9E;&#x73B0;&#xFF0C;TZ&#x73AF;&#x5883;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x6240;&#x6709;&#x5DF2;&#x77E5;&#x683C;&#x5F0F;&#xFF09;&#xFF0C;iCalendar&#x683C;&#x5F0F;&#x6587;&#x4EF6;&#xFF0C;&#x7ED9;&#x5B9A;&#x8303;&#x56F4;&#xFF08;&#x5728;&#x76F8;&#x5BF9;&#x589E;&#x91CF;&#x7684;&#x5E2E;&#x52A9;&#x4E0B;&#xFF09;&#xFF0C;&#x672C;&#x5730;&#x8BA1;&#x7B97;&#x673A; &#x65F6;&#x533A;&#xFF0C;&#x56FA;&#x5B9A;&#x504F;&#x79FB;&#x65F6;&#x533A;&#xFF0C;UTC&#x65F6;&#x533A;&#x548C;&#x57FA;&#x4E8E;Windows&#x6CE8;&#x518C;&#x8868;&#x7684;&#x65F6;&#x533A;&#x3002;</li>
<li>&#x57FA;&#x4E8E;&#x5965;&#x5C14;&#x68EE;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5185;&#x90E8;&#x6700;&#x65B0;&#x4E16;&#x754C;&#x65F6;&#x533A;&#x4FE1;&#x606F;&#x3002;</li>
<li>&#x4F7F;&#x7528;Western&#xFF0C;Orthodox&#x6216;Julian&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x4EFB;&#x610F;&#x4E00;&#x5E74;&#x7684;&#x590D;&#x6D3B;&#x8282;&#x5468;&#x65E5;&#x65E5;&#x671F;&#x3002;</li>
</ul>
<ol start="11">
<li>&#x8FDB;&#x5EA6;&#x6761;&#xFF1A;progress&#x548C;tqdm</li>
</ol>
<hr>
<p>&#x8FD9;&#x91CC;&#x6709;&#x70B9;&#x4F5C;&#x5F0A;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x662F;&#x4E24;&#x4E2A;&#x5305;&#xFF0C;&#x4F46;&#x5FFD;&#x7565;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#x662F;&#x4E0D;&#x516C;&#x5E73;&#x7684;&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x8FDB;&#x5EA6;&#x6761;&#xFF0C;&#x8FD9;&#x4E5F;&#x8BB8;&#x5F88;&#x6709;&#x8DA3;&#xFF0C;&#x4F46;&#x662F;&#x4F7F;&#x7528;progress&#x6216;tqdm&#x7A0B;&#x5E8F;&#x5305;&#x66F4;&#x5FEB;&#xFF0C;&#x66F4;&#x4E0D;&#x5BB9;&#x6613;&#x51FA;&#x9519;&#x3002;</p>
<p>progress</p>
<p>&#x501F;&#x52A9;&#x8FD9;&#x4E2A;&#x8F6F;&#x4EF6;&#x5305;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x521B;&#x5EFA;&#x8FDB;&#x5EA6;&#x6761;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/9ba400c5a1d5cf7cbf69104f8c98c8e923e1a030d03d09b489c5bee55eceadd7" alt></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/13fc2164e1eb34890c5fbf8e1496075cccafb48c635019e57a9bccdf199f4b74" alt></p>
<p>tqdm</p>
<p>tqdm&#x7684;&#x529F;&#x80FD;&#x5927;&#x81F4;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x4F3C;&#x4E4E;&#x662F;&#x6700;&#x65B0;&#x7684;&#x3002;&#x9996;&#x5148;&#x4EE5;gif&#x52A8;&#x753B;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x6F14;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/64aa13489ab477b710fb5398c0cade21d6db2cbeec72ca479e5616c620317741" alt></p>
<ol start="12">
<li>IPython</li>
</ol>
<hr>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/14a42e7911fdda3136177f041a4a0fd11726b52600a0ac46058f32c16a2089e8" alt></p>
<p>&#x6211;&#x786E;&#x5B9A;&#x60A8;&#x77E5;&#x9053;Python&#x7684;&#x4EA4;&#x4E92;&#x5F0F;&#x5916;&#x58F3;&#xFF0C;&#x8FD9;&#x662F;&#x8FD0;&#x884C;Python&#x7684;&#x597D;&#x65B9;&#x6CD5;&#x3002;&#x4F46;&#x662F;&#x60A8;&#x4E5F;&#x77E5;&#x9053;IPython shell&#x5417;&#xFF1F;&#x5982;&#x679C;&#x60A8;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#x4EA4;&#x4E92;&#x5F0F;&#x5916;&#x58F3;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F46;&#x60A8;&#x4E0D;&#x4E86;&#x89E3;IPython&#xFF0C;&#x5219;&#x5E94;&#x8BE5;&#x68C0;&#x67E5;&#x4E00;&#x4E0B;&#xFF01;</p>
<p>&#x589E;&#x5F3A;&#x7684;IPython shell&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#x5305;&#x62EC;&#xFF1A;</p>
<ul>
<li>&#x5168;&#x9762;&#x7684;&#x5BF9;&#x8C61;&#x81EA;&#x7701;&#x3002;</li>
<li>&#x8F93;&#x5165;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#xFF0C;&#x8DE8;&#x4F1A;&#x8BDD;&#x6301;&#x7EED;&#x5B58;&#x5728;&#x3002;</li>
<li>&#x5728;&#x5177;&#x6709;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x5F15;&#x7528;&#x7684;&#x4F1A;&#x8BDD;&#x671F;&#x95F4;&#x7F13;&#x5B58;&#x8F93;&#x51FA;&#x7ED3;&#x679C;&#x3002;</li>
<li>&#x5236;&#x8868;&#x7B26;&#x8865;&#x5168;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x652F;&#x6301;python&#x53D8;&#x91CF;&#x548C;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x6587;&#x4EF6;&#x540D;&#x548C;&#x51FD;&#x6570;&#x5173;&#x952E;&#x5B57;&#x7684;&#x8865;&#x5168;&#x3002;</li>
<li>&#x201C;&#x9B54;&#x672F;&#x201D;&#x547D;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x63A7;&#x5236;&#x73AF;&#x5883;&#x5E76;&#x6267;&#x884C;&#x8BB8;&#x591A;&#x4E0E;IPython&#x6216;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x76F8;&#x5173;&#x7684;&#x4EFB;&#x52A1;&#x3002;</li>
<li>&#x4F1A;&#x8BDD;&#x8BB0;&#x5F55;&#x548C;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;&#x3002;</li>
<li>&#x5BF9;pdb&#x8C03;&#x8BD5;&#x5668;&#x548C;Python&#x5206;&#x6790;&#x5668;&#x7684;&#x96C6;&#x6210;&#x8BBF;&#x95EE;&#x3002;</li>
<li>IPython&#x7684;&#x4E00;&#x4E2A;&#x9C9C;&#x4E3A;&#x4EBA;&#x77E5;&#x7684;&#x529F;&#x80FD;&#xFF1A;&#x5B83;&#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x8FD8;&#x5141;&#x8BB8;&#x5E76;&#x884C;&#x548C;&#x5206;&#x5E03;&#x5F0F;&#x8BA1;&#x7B97;&#x3002;</li>
</ul>
<p>IPython&#x662F;Jupyter Notebook&#x7684;&#x6838;&#x5FC3;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x653E;&#x6E90;&#x4EE3;&#x7801;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x53EF;&#x8BA9;&#x60A8;&#x521B;&#x5EFA;&#x548C;&#x5171;&#x4EAB;&#x5305;&#x542B;&#x5B9E;&#x65F6;&#x4EE3;&#x7801;&#xFF0C;&#x65B9;&#x7A0B;&#x5F0F;&#xFF0C;&#x53EF;&#x89C6;&#x5316;&#x6548;&#x679C;&#x548C;&#x53D9;&#x8FF0;&#x6587;&#x672C;&#x7684;&#x6587;&#x6863;&#x3002;</p>
<ol start="13">
<li>Homeassistant</li>
</ol>
<hr>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/a0d0c2932305fe2bb9fd8d95d77bcd501e5a97acc76b4f7f34d5deda3c5aea34" alt></p>
<p>&#x6211;&#x559C;&#x6B22;&#x5BB6;&#x5EAD;&#x81EA;&#x52A8;&#x5316;&#x3002;&#x8FD9;&#x5BF9;&#x6211;&#x6765;&#x8BF4;&#x662F;&#x4E00;&#x79CD;&#x55DC;&#x597D;&#xFF0C;&#x4F46;&#x6211;&#x81F3;&#x4ECA;&#x4ECD;&#x5BF9;&#x6B64;&#x6DF1;&#x8868;&#x6B49;&#x610F;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x73B0;&#x5728;&#x63A7;&#x5236;&#x7740;&#x6211;&#x4EEC;&#x623F;&#x5C4B;&#x7684;&#x5927;&#x90E8;&#x5206;&#x3002;&#x6211;&#x4F7F;&#x7528;Home Assistant&#x5C06;&#x623F;&#x5B50;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x7CFB;&#x7EDF;&#x6346;&#x7ED1;&#x5728;&#x4E00;&#x8D77;&#x3002;&#x5C3D;&#x7BA1;&#x5B83;&#x786E;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x4F46;&#x662F;&#x60A8;&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x5B89;&#x88C5;&#x4E3A;Python PyPI&#x8F6F;&#x4EF6;&#x5305;&#x3002;</p>
<ul>
<li>&#x6211;&#x4EEC;&#x7684;&#x5927;&#x591A;&#x6570;&#x706F;&#x5177;&#x90FD;&#x662F;&#x81EA;&#x52A8;&#x5316;&#x7684;&#xFF0C;&#x767E;&#x53F6;&#x7A97;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#x3002;</li>
<li>&#x6211;&#x76D1;&#x89C6;&#x6211;&#x4EEC;&#x7684;&#x5929;&#x7136;&#x6C14;&#x7528;&#x91CF;&#xFF0C;&#x7535;&#x529B;&#x7528;&#x91CF;&#x548C;&#x4EA7;&#x91CF;&#xFF08;&#x592A;&#x9633;&#x80FD;&#x7535;&#x6C60;&#x677F;&#xFF09;&#x3002;</li>
<li>&#x6211;&#x53EF;&#x4EE5;&#x8DDF;&#x8E2A;&#x5927;&#x591A;&#x6570;&#x7535;&#x8BDD;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x5E76;&#x5728;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x65F6;&#x5F00;&#x59CB;&#x64CD;&#x4F5C;&#xFF0C;&#x4F8B;&#x5982;&#x5F53;&#x6211;&#x56DE;&#x5BB6;&#x65F6;&#x6253;&#x5F00;&#x8F66;&#x5E93;&#x706F;&#x3002;</li>
<li>&#x5B83;&#x8FD8;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x6211;&#x4EEC;&#x6240;&#x6709;&#x7684;&#x5A31;&#x4E50;&#x7CFB;&#x7EDF;&#xFF0C;&#x4F8B;&#x5982;&#x4E09;&#x661F;&#x7535;&#x89C6;&#x548C;Sonos&#x626C;&#x58F0;&#x5668;&#x3002;</li>
<li>&#x5B83;&#x80FD;&#x591F;&#x81EA;&#x52A8;&#x53D1;&#x73B0;&#x7F51;&#x7EDC;&#x4E0A;&#x7684;&#x5927;&#x591A;&#x6570;&#x8BBE;&#x5907;&#xFF0C;&#x56E0;&#x6B64;&#x4E0A;&#x624B;&#x8D77;&#x6765;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x3002;</li>
</ul>
<p>&#x6211;&#x5DF2;&#x7ECF;&#x6BCF;&#x5929;&#x4F7F;&#x7528;Home Assistant&#x5DF2;&#x6709;3&#x5E74;&#x4E86;&#xFF0C;&#x5B83;&#x4ECD;&#x5904;&#x4E8E;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#xFF0C;&#x4F46;&#x8FD9;&#x662F;&#x6211;&#x5C1D;&#x8BD5;&#x8FC7;&#x7684;&#x6240;&#x6709;&#x5E73;&#x53F0;&#x4E2D;&#x6700;&#x597D;&#x7684;&#x5E73;&#x53F0;&#x3002;&#x5B83;&#x80FD;&#x591F;&#x96C6;&#x6210;&#x548C;&#x63A7;&#x5236;&#x5404;&#x79CD;&#x8BBE;&#x5907;&#x548C;&#x534F;&#x8BAE;&#xFF0C;&#x5E76;&#x4E14;&#x90FD;&#x662F;&#x514D;&#x8D39;&#x548C;&#x5F00;&#x6E90;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x6709;&#x5174;&#x8DA3;&#x5C06;&#x623F;&#x5C4B;&#x81EA;&#x52A8;&#x5316;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x6709;&#x673A;&#x4F1A;&#xFF01;&#x5982;&#x679C;&#x60A8;&#x60F3;&#x4E86;&#x89E3;&#x66F4;&#x591A;&#xFF0C;&#x8BF7;&#x8BBF;&#x95EE;&#x4ED6;&#x4EEC;&#x7684;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;&#x3002;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#xFF0C;&#x8BF7;&#x5C06;&#x5176;&#x5B89;&#x88C5;&#x5728;Raspberry Pi&#x4E0A;&#x3002;&#x5230;&#x76EE;&#x524D;&#x4E3A;&#x6B62;&#xFF0C;&#x8FD9;&#x662F;&#x6700;&#x7B80;&#x5355;&#xFF0C;&#x6700;&#x5B89;&#x5168;&#x7684;&#x5165;&#x95E8;&#x65B9;&#x6CD5;&#x3002;&#x6211;&#x5C06;&#x5176;&#x5B89;&#x88C5;&#x5728;Docker&#x5BB9;&#x5668;&#x5185;&#x529F;&#x80FD;&#x66F4;&#x5F3A;&#x5927;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x3002;</p>
<ol start="14">
<li>Flask</li>
</ol>
<hr>
<p>Flask&#x662F;&#x6211;&#x7684;&#x5165;&#x95E8;&#x5E93;&#xFF0C;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5FEB;&#x901F;&#x7684;Web&#x670D;&#x52A1;&#x6216;&#x7B80;&#x5355;&#x7684;&#x7F51;&#x7AD9;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5FAE;&#x6846;&#x67B6;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;Flask&#x65E8;&#x5728;&#x4F7F;&#x6838;&#x5FC3;&#x4FDD;&#x6301;&#x7B80;&#x5355;&#x4F46;&#x53EF;&#x6269;&#x5C55;&#x3002;&#x6709;700&#x591A;&#x4E2A;&#x5B98;&#x65B9;&#x548C;&#x793E;&#x533A;&#x6269;&#x5C55;&#x3002;</p>
<p>&#x5982;&#x679C;&#x60A8;&#x77E5;&#x9053;&#x81EA;&#x5DF1;&#x5C06;&#x5F00;&#x53D1;&#x4E00;&#x4E2A;&#x5927;&#x578B;&#x7684;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5219;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x7814;&#x7A76;&#x4E00;&#x4E2A;&#x66F4;&#x5B8C;&#x6574;&#x7684;&#x6846;&#x67B6;&#x3002;&#x8BE5;&#x7C7B;&#x522B;&#x4E2D;&#x6700;&#x53D7;&#x6B22;&#x8FCE;&#x7684;&#x662F;Django&#x3002;</p>
<ol start="15">
<li>BeautifulSoup</li>
</ol>
<hr>
<p>&#x5982;&#x679C;&#x60A8;&#x4ECE;&#x7F51;&#x7AD9;&#x4E0A;&#x63D0;&#x53D6;&#x4E86;&#x4E00;&#x4E9B;HTML&#xFF0C;&#x5219;&#x9700;&#x8981;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x4EE5;&#x83B7;&#x53D6;&#x5B9E;&#x9645;&#x6240;&#x9700;&#x7684;&#x5185;&#x5BB9;&#x3002;Beautiful Soup&#x662F;&#x4E00;&#x4E2A;Python&#x5E93;&#xFF0C;&#x7528;&#x4E8E;&#x4ECE;HTML&#x548C;XML&#x6587;&#x4EF6;&#x4E2D;&#x63D0;&#x53D6;&#x6570;&#x636E;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x5BFC;&#x822A;&#xFF0C;&#x641C;&#x7D22;&#x548C;&#x4FEE;&#x6539;&#x89E3;&#x6790;&#x6811;&#x7684;&#x7B80;&#x5355;&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#xFF0C;&#x5373;&#x4F7F;&#x635F;&#x574F;&#x4E86;&#xFF0C;&#x4E5F;&#x80FD;&#x591F;&#x5904;&#x7406;&#x5404;&#x79CD;HTML&#x3002;&#x76F8;&#x4FE1;&#x6211;&#xFF0C;HTML&#x7ECF;&#x5E38;&#x88AB;&#x7834;&#x574F;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#xFF1A;</p>
<ul>
<li>Beautiful Soup&#x4F1A;&#x81EA;&#x52A8;&#x5C06;&#x4F20;&#x5165;&#x6587;&#x6863;&#x8F6C;&#x6362;&#x4E3A;Unicode&#xFF0C;&#x5C06;&#x4F20;&#x51FA;&#x6587;&#x6863;&#x8F6C;&#x6362;&#x4E3A;UTF-8&#x3002;&#x60A8;&#x65E0;&#x9700;&#x8003;&#x8651;&#x7F16;&#x7801;&#x3002;</li>
<li>Beautiful Soup&#x4F4D;&#x4E8E;&#x6D41;&#x884C;&#x7684;Python&#x89E3;&#x6790;&#x5668;&#xFF08;&#x5982;lxml&#x548C;html5lib&#xFF09;&#x7684;&#x9876;&#x90E8;&#xFF0C;&#x4F7F;&#x60A8;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x4E0D;&#x540C;&#x7684;&#x89E3;&#x6790;&#x7B56;&#x7565;&#x6216;&#x63D0;&#x9AD8;&#x7075;&#x6D3B;&#x6027;&#x3002;</li>
<li>BeautifulSoup&#x4F1A;&#x89E3;&#x6790;&#x60A8;&#x63D0;&#x4F9B;&#x7684;&#x4EFB;&#x4F55;&#x5185;&#x5BB9;&#xFF0C;&#x5E76;&#x4E3A;&#x60A8;&#x505A;&#x904D;&#x5386;&#x6811;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x544A;&#x8BC9;&#x201C;&#x67E5;&#x627E;&#x6240;&#x6709;&#x94FE;&#x63A5;&#x201D;&#xFF0C;&#x6216;&#x201C;&#x67E5;&#x627E;&#x5E26;&#x6709;&#x7C97;&#x4F53;&#x7684;&#x8868;&#x683C;&#x6807;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x7ED9;&#x6211;&#x8BE5;&#x6587;&#x5B57;&#x3002;&#x201D;</li>
<li><strong>&#x597D;&#x4E86;&#xFF0C;&#x4ECA;&#x5929;&#x7684;&#x5206;&#x4EAB;&#x5C31;&#x5230;&#x8FD9;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5BF9;Python&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x6B22;&#x8FCE;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x3010;<a href="/external_links/e6fd6a37e76e65870f20f83dc84fbd7b.html" target="blank" rel="noopener">python&#x5B66;&#x4E60;&#x4EA4;&#x6D41;</a>&#x88D9;&#x3011;&#xFF0C;&#x514D;&#x8D39;&#x9886;&#x53D6;&#x5B66;&#x4E60;&#x8D44;&#x6599;&#x548C;&#x6E90;&#x7801;&#x3002;</strong></li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/32bc28348d15d96e0dee9cb520934e93.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../290/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../290/">290</a><span class="page-number current">291</span><a class="page-number" href="../292/">292</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../292/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
