<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/54/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/54/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7345388391804813349.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7345388391804813349.html" itemprop="url">Jetpack Compose -> 无状态、状态提升，单向</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-13T09:51:12+08:00">
                2024-03-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><hr>
<p>&#x4E0A;&#x4E00;&#x7AE0;&#x8282;&#x6211;&#x4EEC;&#x8BB2;&#x89E3;&#x4E86;<a href="https://dev.newban.cn/7338250632938455049">&#x91CD;&#x7EC4;&#x4F5C;&#x7528;&#x57DF;&#x548C; remember</a>&#xFF0C;&#x672C;&#x7AE0;&#x6211;&#x4EEC;&#x6765;&#x8BB2;&#x89E3;&#x4E0B; Compose &#x7684; &#x300E;&#x65E0;&#x72B6;&#x6001;&#x300F;&#xFF0C;&#x72B6;&#x6001;&#x63D0;&#x5347;&#xFF0C;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#xFF1B;</p>
<h1 id="&#x65E0;&#x72B6;&#x6001;"><a href="#&#x65E0;&#x72B6;&#x6001;" class="headerlink" title="&#x65E0;&#x72B6;&#x6001;"></a>&#x65E0;&#x72B6;&#x6001;</h1><hr>
<p>&#x6240;&#x8C13;&#x7684;&#x65E0;&#x72B6;&#x6001;&#xFF08;Stateless&#xFF09;&#x7684;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x6307;&#x5F97;&#x662F;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x5C31;&#x662F;&#x63A7;&#x4EF6;&#x7684;&#x5404;&#x79CD;&#x5C5E;&#x6027;&#xFF0C;&#x6BD4;&#x5982; TextView &#x5B83;&#x5C31;&#x6709;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x5C5E;&#x6027;&#xFF0C;&#x5C31;&#x662F;&#x5B83;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; getText &#x548C; setText &#x6765;&#x5206;&#x522B;&#x83B7;&#x53D6;&#x8BBE;&#x7F6E;&#x5B83;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x4E2A;&#x5185;&#x5BB9;&#x5C31;&#x662F;&#x5B83;&#x7684;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x800C; Compose &#x662F;&#x65E0;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x662F;&#x6CA1;&#x6709;&#x8FD9;&#x79CD;&#x5C5E;&#x6027;&#x7684;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;Compose&#x4E2D;&#x7684; Text()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;var name = &quot;Mars&quot;</span><br><span class="line">Text(text = name)</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5728;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;name&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x65E0;&#x6CD5;&#x4ECE;&#x5176;&#x4ED6;&#x5730;&#x65B9;&#x62FF;&#x5230;&#x8FD9;&#x4E2A; name &#x7684;&#x6587;&#x5B57;&#x4FE1;&#x606F;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x5B57;&#x53C2;&#x6570;&#x53EA;&#x662F;&#x88AB; Text &#x62FF;&#x6765;&#x8BBE;&#x7F6E;&#x7528;&#x6765;&#x663E;&#x793A;&#x4E4B;&#x540E;&#x5C31;&#x6254;&#x4E86;&#xFF0C;&#x540E;&#x7EED;&#x60F3;&#x62FF;&#x5230;&#x662F;&#x62FF;&#x4E0D;&#x5230;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x6839;&#x672C;&#x5C31;&#x6CA1;&#x6709;&#x4FDD;&#x5B58;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684;&#x65E0;&#x72B6;&#x6001;&#xFF1B;</p>
<p>&#x8FD9;&#x4E2A;&#x65E0;&#x72B6;&#x6001;&#x53EA;&#x80FD;&#x8BF4;&#x662F; Compose &#x8FD9;&#x79CD;&#x58F0;&#x660E;&#x5F0F;&#x6846;&#x67B6;&#x7684;&#x4E00;&#x4E2A;&#x7279;&#x70B9;&#xFF0C;Compose &#x53EF;&#x4EE5;&#x7684;&#x65E0;&#x72B6;&#x6001;&#x5E76;&#x4E0D;&#x662F;&#x7EDD;&#x5BF9;&#x7684;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun say() {</span><br><span class="line">    var text = &quot;Hello&quot;</span><br><span class="line">    Text(text)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#x7684; Text() &#x662F;&#x65E0;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E2A; say() &#x51FD;&#x6570;&#x5374;&#x662F;&#x6709;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x5B83;&#x7684;&#x91CC;&#x9762;&#x6709;&#x4E00;&#x4E2A;&#x4EC5;&#x4EC5;&#x5B83;&#x81EA;&#x5DF1;&#x80FD;&#x770B;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32; &#x201C;Hello&#x201D;;</p>
<p>&#x6240;&#x4EE5; &#x8FD9;&#x91CC;&#x6240;&#x8BF4;&#x7684;&#x65E0;&#x72B6;&#x6001;&#x90FD;&#x662F;&#x6307;&#x7684;&#x5185;&#x90E8;&#x7684;&#x65E0;&#x72B6;&#x6001;&#xFF0C;&#x4F8B;&#x5982; say() &#x8FD9;&#x4E2A; Compose &#x7EC4;&#x4EF6;&#xFF0C;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x7684; Hello &#x662F;&#x6709;&#x72B6;&#x6001;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x8C03;&#x7528;&#x8FD9;&#x4E2A; say() &#x7684;&#x65F6;&#x5019;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;setContent {</span><br><span class="line">    say()</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5728; setContent &#x4E2D;&#x662F;&#x83B7;&#x53D6;&#x4E0D;&#x5230; say &#x7684;&#x4EFB;&#x4F55;&#x72B6;&#x6001;&#x7684;&#xFF1B;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x83B7;&#x53D6;&#x8FD9;&#x4E2A;&#x5185;&#x90E8;&#x72B6;&#x6001;&#x7684;&#x72B6;&#x6001;&#x503C;&#x5E94;&#x8BE5;&#x600E;&#x4E48;&#x5B9E;&#x73B0;&#x5462;&#xFF1F;</p>
<h1 id="&#x72B6;&#x6001;&#x63D0;&#x5347;"><a href="#&#x72B6;&#x6001;&#x63D0;&#x5347;" class="headerlink" title="&#x72B6;&#x6001;&#x63D0;&#x5347;"></a>&#x72B6;&#x6001;&#x63D0;&#x5347;</h1><hr>
<p>&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x60F3;&#x83B7;&#x53D6;&#x8FD9;&#x4E2A; text &#x7684;&#x72B6;&#x6001;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E2A; text &#x653E;&#x5230;say() &#x548C; Text(&#xFF09; &#x7684;&#x5916;&#x90E8;&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;setContent {</span><br><span class="line">    var text = &quot;Hello&quot;</span><br><span class="line">    say(text)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun say(value: String) {</span><br><span class="line">    Text(value)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x5728; say() &#x7684;&#x5916;&#x90E8;&#x83B7;&#x53D6;&#x5230;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x4E86;&#xFF1B;&#x8FD9;&#x79CD;&#x5728; Compose &#x4E2D;&#x5C31;&#x53EB;&#x4F5C;&#x72B6;&#x6001;&#x63D0;&#x5347;&#xFF08;State Hoisting&#xFF09;&#x8FD9;&#x4E2A; Hoisting &#x5C31;&#x662F;&#x63D0;&#x5347;&#xFF0C;&#x610F;&#x601D;&#x5C31;&#x662F;&#x5C06;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x5230;&#x5916;&#x90E8;&#x7EC4;&#x4EF6;&#x4E2D;&#xFF1B;</p>
<p>&#x540C;&#x7406;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x53EA;&#x80FD;&#x5728; setContent &#x4E2D;&#x62FF;&#x5230;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x5728; setContent &#x7684;&#x5916;&#x90E8;&#x83B7;&#x53D6;&#x5230;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E2A; text &#x63D0;&#x5347;&#x5230; setContent &#x7684;&#x5916;&#x90E8;&#xFF1B;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x8FD9;&#x79CD;&#x72B6;&#x6001;&#x63D0;&#x5347;&#xFF0C;&#x8981;&#x5C3D;&#x91CF;&#x5C11;&#x7684;&#x63D0;&#x5347;&#xFF0C;&#x6700;&#x9700;&#x8981;&#x7684;&#x5730;&#x65B9;&#x63D0;&#x5347;&#x5373;&#x53EF;&#xFF1B;</p>
<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x4F1A;&#x6709;&#x4EBA;&#x6709;&#x7591;&#x95EE;&#x4E86;&#xFF0C;&#x8FD9;&#x79CD;&#x72B6;&#x6001;&#x63D0;&#x5347;&#xFF0C;&#x4E0D;&#x5C31;&#x5BFC;&#x81F4;&#x8C03;&#x7528;&#x9EBB;&#x70E6;&#x4E86;&#x5417;&#xFF1F;&#x6211;&#x53EA;&#x60F3;&#x8C03;&#x7528; say() &#x51FD;&#x6570;&#xFF0C;&#x7ED3;&#x679C;&#x73B0;&#x5728;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x4F20;&#x9012;&#x8FDB;&#x53BB;&#xFF0C;&#x8FD9;&#x4E2A;&#x5176;&#x5B9E;&#x4E5F;&#x597D;&#x4FEE;&#x6539;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7ED9; value &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x503C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun say(value: String = &quot;Kobe&quot;) {</span><br><span class="line">    Text(value)</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528; say() &#x65B9;&#x6CD5;&#x4E86;&#xFF1B;</p>
<h2 id="&#x65E0;&#x72B6;&#x6001;&#x3001;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7528;&#x6CD5;"><a href="#&#x65E0;&#x72B6;&#x6001;&#x3001;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7528;&#x6CD5;" class="headerlink" title="&#x65E0;&#x72B6;&#x6001;&#x3001;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7528;&#x6CD5;"></a>&#x65E0;&#x72B6;&#x6001;&#x3001;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7528;&#x6CD5;</h2><p>&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x770B;&#x53E6;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x7279;&#x6B8A;&#x7684;&#x65E0;&#x72B6;&#x6001;&#x3001;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x53E6;&#x4E00;&#x4E2A;&#x7EC4;&#x4EF6; TextFiled &#x6587;&#x5B57;&#x8F93;&#x5165;&#x6846;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;TextField(value = , onValueChange = ) //&#x6587;&#x5B57;&#x8F93;&#x5165;&#x6846;</span><br></pre></td></tr></table></figure>

<p>&#x76F8;&#x5F53;&#x4E8E;&#x539F;&#x751F;&#x7684; EditText&#xFF0C;&#x5B83;&#x662F; material &#x5C42;&#x7684;&#xFF0C;&#x4E0D;&#x662F; foundation &#x5C42;&#xFF0C;&#x4E5F;&#x4E0D;&#x662F; ui &#x5C42;&#x7684;&#xFF0C;&#x8DDF; Button &#x7C7B;&#x4F3C;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x7B26;&#x5408; material &#x98CE;&#x683C;&#x7684;&#x8F93;&#x5165;&#x6846;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x60F3;&#x4F7F;&#x7528; material &#x98CE;&#x683C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; BasicTextField &#x81EA;&#x5DF1;&#x8BBE;&#x8BA1;&#x8F93;&#x5165;&#x6846;&#x98CE;&#x683C;&#xFF1B;</p>
<p>&#x5B83;&#x6709;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A; value &#x4E00;&#x4E2A; onValueChange&#xFF0C;&#x4E00;&#x4E2A;&#x6587;&#x5B57;&#x53C2;&#x6570;&#xFF0C;&#x4E00;&#x4E2A;&#x6587;&#x5B57;&#x6539;&#x53D8;&#x76D1;&#x542C;&#x6570;&#x636E;&#x53D8;&#x5316;&#xFF0C;&#x5176;&#x4E2D;&#x8FD9;&#x4E2A; value &#x5C31;&#x662F;&#x63D0;&#x51FA;&#x6765;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x6587;&#x5B57;&#x539F;&#x672C;&#x662F;&#x5185;&#x90E8;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x73B0;&#x5728;&#x63D0;&#x51FA;&#x6765;&#x4E86;&#xFF0C;&#x5C31;&#x6210;&#x4E86;&#x8F93;&#x5165;&#x7684;&#x4E86;&#xFF0C;&#x5916;&#x90E8;&#x8F93;&#x5165;&#xFF0C;&#x5C31;&#x6210;&#x4E86;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x4E86;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;var name</span><br><span class="line">TextField(name , onValueChange = ) //&#x6587;&#x5B57;&#x8F93;&#x5165;&#x6846;</span><br></pre></td></tr></table></figure>

<p>name &#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#x53D8;&#x91CF;&#x6765;&#x5145;&#x5F53;&#x8FD9;&#x4E2A;&#x65E0;&#x72B6;&#x6001;&#x6587;&#x672C;&#x8F93;&#x5165;&#x6846;&#x7684;&#x5916;&#x90E8;&#x72B6;&#x6001;&#xFF1B;</p>
<p>onValueChange &#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5199;&#x6210;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;var name</span><br><span class="line">TextField(name , {}) //&#x6587;&#x5B57;&#x8F93;&#x5165;&#x6846;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#x8981;&#x505A;&#x7684;&#x5C31;&#x662F;&#x5904;&#x7406;&#x6587;&#x5B57;&#x53D8;&#x5316;&#x7684;&#x4E8B;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x56DE;&#x8C03;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8FD0;&#x884C;&#x770B;&#x4E0B;&#x6548;&#x679C;&#xFF0C;&#x8FD9;&#x5C31;&#x662F; material &#x98CE;&#x683C;&#x7684;&#x8F93;&#x5165;&#x6846;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/59601472de054df3cd8c4f5f242d16ef3797af21f006d8457f69a0ad963047c2" alt="image.png"></p>
<p>&#x6211;&#x4EEC;&#x63A5;&#x4E0B;&#x6765;&#x8F93;&#x5165;&#x51E0;&#x4E2A;&#x6570;&#x636E;&#x770B;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/35af0649c8db626992fb0bba081caa2a8fc6e4d16ddcd53c1bf90e8ba6a5e5e9" alt="SVID_20240312_202210_1.gif"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8F93;&#x5165;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#x4E0D;&#x663E;&#x793A;&#xFF0C;&#x8FD9;&#x662F;&#x4E3A;&#x4EC0;&#x4E48;&#x5462;&#xFF1F;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x7528;&#x6237;&#x5728;&#x8F93;&#x5165;&#x65B0;&#x7684;&#x5185;&#x5BB9;&#x4E4B;&#x540E;&#x5E76;&#x6CA1;&#x6709;&#x66F4;&#x65B0;&#x5230; name &#x5B57;&#x6BB5;&#x5BFC;&#x81F4;&#x7684;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x505A;&#x5982;&#x4E0B;&#x66F4;&#x6539;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;var name = &quot;&quot;</span><br><span class="line">TextField(name , onValueChange ={</span><br><span class="line">    name = it</span><br><span class="line">})</span><br></pre></td></tr></table></figure>

<p>&#x5C31;&#x662F;&#x8BF4; &#x6211;&#x4EEC;&#x5E76;&#x6CA1;&#x6709;&#x628A;&#x7528;&#x6237;&#x7684;&#x8F93;&#x5165;&#x884C;&#x4E3A;&#x548C;&#x663E;&#x793A;&#x6765;&#x6E90;&#x505A;&#x5173;&#x8054;&#xFF0C;&#x8FD9;&#x5C31;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x5173;&#x8054;&#x624D;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x8FD8;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x6700;&#x7EC8;&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x662F;&#x5728; Compose &#x4E2D;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x4E9B;&#x4F1A;&#x53D8;&#x7684;&#x53D8;&#x91CF;&#x6211;&#x4EEC;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x5199;&#xFF0C;&#x9700;&#x8981;&#x7528; mutableStateOf &#x548C; remember &#x5C06;&#x5B83;&#x5305;&#x88F9;&#x8D77;&#x6765;&#x624D;&#x884C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;var name by remember {</span><br><span class="line">     mutableStateOf(&quot;&quot;)</span><br><span class="line">}</span><br><span class="line">TextField(name , onValueChange = { newValue-&gt;</span><br><span class="line">    name = newValue</span><br><span class="line">})</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x4FEE;&#x6539;&#x624D;&#x80FD;&#x751F;&#x6548;&#xFF0C;&#x6211;&#x4EEC;&#x8FD0;&#x884C;&#x770B;&#x4E0B;&#x6548;&#x679C;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/4146ff7c968f7455c114ef7cd5bb8f3917e54d3172f5bf35c477ef2e734df9ef" alt="SVID_20240312_204027_1.gif"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x8F93;&#x5165;&#x663E;&#x793A;&#x5230;&#x4E86;&#x8F93;&#x5165;&#x6846;&#x4E2D;&#xFF1B;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A; TextFiled Compose &#x5E76;&#x4E0D;&#x4F1A;&#x4E3B;&#x52A8;&#x5E2E;&#x6211;&#x4EEC;&#x66F4;&#x65B0;&#xFF0C;&#x800C;&#x662F;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x624B;&#x52A8;&#x66F4;&#x65B0;&#xFF0C;&#x90A3;&#x4E48; Compose &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#x5462;&#xFF1F;</p>
<h1 id="&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;"><a href="#&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;" class="headerlink" title="&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;"></a>&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;</h1><hr>
<p>&#x5E26;&#x7740;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4EEC;&#x5148;&#x6765;&#x804A;&#x804A;&#x6570;&#x636E;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x65E2;&#x6709;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x53C8;&#x6709;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x4EEC;&#x662F;&#x5982;&#x4F55;&#x5C06;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x548C;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x7ED3;&#x5408;&#x5462;&#xFF1F;&#x7B2C;&#x4E00;&#x6B21;&#x6253;&#x5F00;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x672C;&#x5730;&#x6570;&#x636E;&#x4E3A;&#x7A7A;&#xFF0C;&#x4ECE;&#x7F51;&#x7EDC;&#x52A0;&#x8F7D;&#x5230;&#x6570;&#x636E;&#x4E4B;&#x540E;&#x663E;&#x793A;&#x5E76;&#x5B58;&#x5230;&#x672C;&#x5730;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5F53;&#x52A0;&#x8F7D;&#x4E0B;&#x4E00;&#x9875;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53D6;&#x5230;&#x4E0B;&#x4E00;&#x9875;&#x6570;&#x636E;&#x5408;&#x5E76;&#x5230;&#x5185;&#x5B58;&#x540E;&#x663E;&#x793A;&#xFF0C;&#x540C;&#x65F6;&#x5B58;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x6740;&#x6B7B;app&#xFF0C;&#x91CD;&#x65B0;&#x6253;&#x5F00;&#xFF0C;&#x4F18;&#x5148;&#x53D6;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6570;&#x636E;&#x540C;&#x65F6;&#x4ECE;&#x7F51;&#x7EDC;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5408;&#x5E76;&#x5230;&#x5185;&#x5B58;&#xFF0C;&#x540C;&#x65F6;&#x66F4;&#x65B0;&#x6570;&#x636E;&#x5E93;&#xFF1B;</p>
<p>&#x90A3;&#x4E48;&#x95EE;&#x9898;&#x6765;&#x4E86;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x53CC;&#x901A;&#x9053;&#x53D6;&#x6570;&#x636E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x600E;&#x4E48;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x6709;&#x6548;&#x6027;&#x5462;&#xFF1F;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x540C;&#x6B65;&#x6027;&#x5462;&#xFF1F;</p>
<p>&#x89E3;&#x51B3;&#x7684;&#x672C;&#x8D28;&#x5C31;&#x662F;&#xFF1A;Single source of Truth&#xFF08;&#x5355;&#x4E00;&#x6570;&#x636E;&#x6E90;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x51B2;&#x7A81;&#x7684;&#x95EE;&#x9898;&#x4E86;&#xFF1B;&#x8BA9;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x672C;&#x5730;&#x6570;&#x636E;&#x7684;&#x4E0A;&#x6E38;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x6570;&#x636E;&#x4E0D;&#x540C;&#x6B65;&#x7684;&#x95EE;&#x9898;&#x4E86;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6848;&#x4E5F;&#x662F;&#x88AB; Compose &#x5B98;&#x65B9;&#x5EFA;&#x8BAE;&#x7684;&#x65B9;&#x6848;&#xFF1B;&#x8FD9;&#x79CD;&#x5355;&#x4E00;&#x6570;&#x636E;&#x6E90;&#x5728; Compose &#x4E4B;&#x524D;&#x5C31;&#x5DF2;&#x7ECF;&#x88AB; Android &#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x4F8B;&#x5982; Jetpack ViewModel &#x4E2D;&#x7684; Repository&#xFF0C;&#x5B83;&#x5185;&#x90E8;&#x5C31;&#x662F;&#x300E;&#x6570;&#x636E;&#x5E93; + &#x7F51;&#x7EDC;&#x300F;&#x7684;&#x5F62;&#x5F0F;&#xFF1B;</p>
<p>Compose &#x6240;&#x6709;&#x4F1A;&#x7528;&#x5230;&#x7684;&#x754C;&#x9762;&#x6570;&#x636E;&#x90FD;&#x662F;&#x5355;&#x4E00;&#x6570;&#x636E;&#x6E90;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x8BF4;&#x7684; TextFiled</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;var name by remember {</span><br><span class="line">     mutableStateOf(&quot;&quot;)</span><br><span class="line">}</span><br><span class="line">TextField(name , onValueChange = { newValue-&gt;</span><br><span class="line">    name = newValue</span><br><span class="line">})</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x6765;&#x770B;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x60F3;&#x7ED9;&#x8F93;&#x5165;&#x6846;&#x505A;&#x4E00;&#x4E9B;&#x9650;&#x5236;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x9650;&#x5236;&#x8F93;&#x5165;&#x6846;&#x4E0D;&#x80FD;&#x8F93;&#x5165;&#x4E00;&#x4E9B;&#x6807;&#x70B9;&#x7B26;&#x53F7;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x9700;&#x8981;&#x5728; onValueChange &#x7684;&#x56DE;&#x8C03;&#x4E2D;&#x5224;&#x65AD; newValue &#x7684;&#x503C;&#x662F;&#x5426;&#x7B26;&#x5408;&#x89C4;&#x8303;&#xFF0C;&#x5728;&#x4E0D;&#x7B26;&#x5408;&#x89C4;&#x8303;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x5C06;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;&#x5185;&#x5BB9;&#x6E05;&#x9664;&#x6389;&#xFF1B;</p>
<p>&#x90A3;&#x4E48;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C; Compose &#x5C31;&#x662F;&#x901A;&#x8FC7;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x5B9E;&#x73B0;&#x7528;&#x6237;&#x4ECE; &#x8F93;&#x5165;- &#x4FEE;&#x6539; - &#x663E;&#x793A; &#x7684;&#x8FC7;&#x7A0B;&#x7684;&#xFF1B;&#x6574;&#x4F53;&#x6570;&#x636E;&#x4ECE;&#x4E0A;&#x5F80;&#x4E0B;&#x4F20;&#x8F93;&#xFF0C;&#x4E8B;&#x4EF6;&#x4ECE;&#x4E0B;&#x5F80;&#x4E0A;&#x4F20;&#x8F93;&#xFF0C;&#x4E00;&#x5C42;&#x4E00;&#x5C42;&#x7684;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#x4F20;&#x9012;&#xFF1B;</p>
<p>&#x597D;&#x4E86;&#xFF0C;&#x4ECA;&#x5929;&#x7684;&#x8BB2;&#x89E3;&#x5C31;&#x5230;&#x8FD9;&#x91CC;&#x5427;</p>
<h1 id="&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;"><a href="#&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;" class="headerlink" title="&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;"></a>&#x4E0B;&#x4E00;&#x7AE0;&#x9884;&#x544A;</h1><hr>
<p>&#x72B6;&#x6001;&#x673A;&#x5236;&#x7684;&#x539F;&#x7406;</p>
<h1 id="&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;"><a href="#&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;" class="headerlink" title="&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;"></a>&#x6B22;&#x8FCE;&#x4E09;&#x8FDE;</h1><hr>
<p>&#x6765;&#x90FD;&#x6765;&#x4E86;&#xFF0C;&#x70B9;&#x4E2A;&#x5173;&#x6CE8;&#xFF0C;&#x70B9;&#x4E2A;&#x8D5E;&#x5427;&#xFF0C;&#x4F60;&#x7684;&#x652F;&#x6301;&#x662F;&#x6211;&#x6700;&#x5927;&#x7684;&#x52A8;&#x529B;~~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/0c927290000fed243d5706e026ab02e7.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7345129748006354978.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7345129748006354978.html" itemprop="url">为什么defineProps宏函数不需要从vue中impor</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-12T15:57:31+08:00">
                2024-03-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x672C;&#x6587;&#x662F; <a href="/external_links/c0d1ddea52f9ca897a53426f8b9f07b0.html" target="blank" rel="noopener">vue3&#x7F16;&#x8BD1;&#x539F;&#x7406;&#x63ED;&#x79D8;</a> &#x7684;&#x7B2C; 4 &#x7BC7;&#xFF0C;&#x548C;&#x8BE5;&#x7CFB;&#x5217;&#x7684;&#x5176;&#x4ED6;&#x6587;&#x7AE0;&#x4E00;&#x8D77;&#x670D;&#x7528;&#x6548;&#x679C;&#x66F4;&#x4F73;&#x3002;</p>
<ol>
<li><a href="https://dev.newban.cn/7335721246931189795">vue3&#x7684;&#x5B8F;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7339210740455440419">Vue 3 &#x7684; setup&#x8BED;&#x6CD5;&#x7CD6;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7343139078486982710">&#x770B;&#x4E0D;&#x61C2;&#x6765;&#x6253;&#x6211;&#xFF0C;vue3&#x7684;.vue&#x6587;&#x4EF6;(SFC)&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;</a></li>
<li><a href="https://dev.newban.cn/7345129748006354978">&#x4E3A;&#x4EC0;&#x4E48;defineProps&#x5B8F;&#x51FD;&#x6570;&#x4E0D;&#x9700;&#x8981;&#x4ECE;vue&#x4E2D;import&#x5BFC;&#x5165;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7347670979635314703">&#x5929;&#x5929;&#x7528;defineEmits&#x5B8F;&#x51FD;&#x6570;&#xFF0C;&#x7ADF;&#x7136;&#x4E0D;&#x77E5;&#x9053;&#x7F16;&#x8BD1;&#x540E;&#x662F;vue2&#x7684;&#x9009;&#x9879;&#x5F0F;API&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7349936384512131107">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x53EA;&#x77E5;&#x9053;v-model&#x662F;:modelValue&#x548C;@onUpdate&#x8BED;&#x6CD5;&#x7CD6;&#xFF0C;&#x90A3;&#x4F60;&#x53EF;&#x4EE5;&#x8D70;&#x4E86;</a></li>
<li><a href="https://dev.newban.cn/7354960709010260005">defineModel&#x662F;&#x5426;&#x7834;&#x574F;&#x4E86;vue3&#x7684;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#x5462;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7356154581208072226">&#x770B;&#x4E0D;&#x61C2;&#x6765;&#x6253;&#x6211;&#xFF0C;vue3&#x5982;&#x4F55;&#x5C06;template&#x7F16;&#x8BD1;&#x6210;render&#x51FD;&#x6570;</a></li>
<li><a href="https://dev.newban.cn/7358709354425090083">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x6765;&#x8BF4;&#x8BF4;vue3&#x662F;&#x600E;&#x4E48;&#x5904;&#x7406;&#x5185;&#x7F6E;&#x7684;v-for&#x3001;v-model&#x7B49;&#x6307;&#x4EE4;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7360663978647404559">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x5728;&#x539F;&#x751F;input&#x4E0A;&#x9762;&#x4F7F;&#x7528;v-model&#x548C;&#x7EC4;&#x4EF6;&#x4E0A;&#x9762;&#x4F7F;&#x7528;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</a></li>
</ol>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x6211;&#x4EEC;&#x6BCF;&#x5929;&#x5199;<code>vue</code>&#x4EE3;&#x7801;&#x65F6;&#x90FD;&#x5728;&#x7528;<code>defineProps</code>&#xFF0C;&#x4F46;&#x662F;&#x4F60;&#x6709;&#x6CA1;&#x6709;&#x601D;&#x8003;&#x8FC7;&#x4E0B;&#x9762;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;<code>defineProps</code>&#x4E0D;&#x9700;&#x8981;<code>import</code>&#x5BFC;&#x5165;&#xFF1F;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;&#x975E;<code>setup</code>&#x9876;&#x5C42;&#x4F7F;&#x7528;<code>defineProps</code>&#xFF1F;<code>defineProps</code>&#x662F;&#x5982;&#x4F55;&#x5C06;&#x58F0;&#x660E;&#x7684; <code>props</code> &#x81EA;&#x52A8;&#x66B4;&#x9732;&#x7ED9;&#x6A21;&#x677F;&#xFF1F;</p>
<h1 id="&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;"></a>&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;</h1><p>&#x6211;&#x4EEC;&#x6765;&#x770B;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x4E0A;&#x9762;&#x7684;&#x51E0;&#x4E2A;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x5148;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x6B63;&#x5E38;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;<code>common-child.vue</code>&#x6587;&#x4EF6;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div&gt;content is {{ content }}&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">defineProps({</span><br><span class="line">  content: String,</span><br><span class="line">});</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x770B;&#x5230;&#x5728;&#x8FD9;&#x4E2A;&#x6B63;&#x5E38;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#x6CA1;&#x6709;&#x4ECE;&#x4EFB;&#x4F55;&#x5730;&#x65B9;<code>import</code>&#x5BFC;&#x5165;<code>defineProps</code>&#xFF0C;&#x76F4;&#x63A5;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x5728;<code>template</code>&#x4E2D;&#x6E32;&#x67D3;&#x4E86;<code>props</code>&#x4E2D;&#x7684;<code>content</code>&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x5728;&#x975E;<code>setup</code>&#x9876;&#x5C42;&#x4F7F;&#x7528;<code>defineProps</code>&#x7684;&#x4F8B;&#x5B50;&#xFF0C;<code>if-child.vue</code>&#x6587;&#x4EF6;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div&gt;content is {{ content }}&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import { ref } from &quot;vue&quot;;</span><br><span class="line">const count = ref(10);</span><br><span class="line"></span><br><span class="line">if (count.value) {</span><br><span class="line">  defineProps({</span><br><span class="line">    content: String,</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x4EE3;&#x7801;&#x8DD1;&#x8D77;&#x6765;&#x76F4;&#x63A5;&#x5C31;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x63D0;&#x793A;<code>defineProps is not defined</code></p>
<p><a href="/external_links/0dd90e10a2d0a625248e2f5baf67e451.html" target="blank" rel="noopener">&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;&#x3010;&#x524D;&#x7AEF;&#x6B27;&#x9633;&#x3011;&#xFF0C;&#x89E3;&#x9501;&#x6211;&#x66F4;&#x591A;vue&#x539F;&#x7406;&#x6587;&#x7AE0;&#x3002;&#x8FD8;&#x53EF;&#x4EE5;&#x52A0;&#x6211;&#x5FAE;&#x4FE1;&#xFF0C;&#x8BA9;&#x4F60;&#x7684;&#x670B;&#x53CB;&#x5708;&#x591A;&#x4E00;&#x4F4D;&#x5BF9;vue&#x6709;&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x7684;&#x4EBA;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5FAE;&#x4FE1;&#x7ED9;&#x6211;&#x8BF4;&#x4F60;&#x60F3;&#x770B;&#x54EA;&#x4E9B;vue&#x539F;&#x7406;&#x6587;&#x7AE0;&#xFF0C;&#x6211;&#x4F1A;&#x6839;&#x636E;&#x5927;&#x5BB6;&#x7684;&#x53CD;&#x9988;&#x8FDB;&#x884C;&#x521B;&#x4F5C;&#x3002;</a></p>
<h1 id="&#x901A;&#x8FC7;debug&#x641E;&#x6E05;&#x695A;&#x4E0A;&#x9762;&#x51E0;&#x4E2A;&#x95EE;&#x9898;"><a href="#&#x901A;&#x8FC7;debug&#x641E;&#x6E05;&#x695A;&#x4E0A;&#x9762;&#x51E0;&#x4E2A;&#x95EE;&#x9898;" class="headerlink" title="&#x901A;&#x8FC7;debug&#x641E;&#x6E05;&#x695A;&#x4E0A;&#x9762;&#x51E0;&#x4E2A;&#x95EE;&#x9898;"></a>&#x901A;&#x8FC7;debug&#x641E;&#x6E05;&#x695A;&#x4E0A;&#x9762;&#x51E0;&#x4E2A;&#x95EE;&#x9898;</h1><p>&#x5728;&#x6211;&#x7684;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0; <a href="https://dev.newban.cn/7343139078486982710">vue&#x6587;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x7F16;&#x8BD1;&#x4E3A;js&#x6587;&#x4EF6;</a> &#x4E2D;&#x5DF2;&#x7ECF;&#x5E26;&#x4F60;&#x641E;&#x6E05;&#x695A;&#x4E86;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script&gt;</code>&#x6A21;&#x5757;&#x662F;&#x5982;&#x4F55;&#x7F16;&#x8BD1;&#x6210;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x5B9E;&#x5E95;&#x5C42;&#x5C31;&#x662F;&#x4F9D;&#x9760;<code>vue/compiler-sfc</code>&#x5305;&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#x3002;</p>
<p>&#x5F53;&#x7136;&#x5982;&#x679C;&#x4F60;&#x8FD8;&#x6CA1;&#x770B;&#x8FC7;&#x6211;&#x7684;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;&#x4E5F;&#x4E0D;&#x5F71;&#x54CD;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x9605;&#x8BFB;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4F1A;&#x7B80;&#x5355;&#x8BF4;&#x4E00;&#x4E0B;&#x3002;&#x5F53;&#x6211;&#x4EEC;<code>import</code>&#x4E00;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x65F6;&#x4F1A;&#x89E6;&#x53D1;<a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">@vitejs/plugin-vue</a>&#x5305;&#x7684;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;&#x4E00;&#x4E2A;<code>transformMain</code>&#x51FD;&#x6570;&#x3002;<code>transformMain</code>&#x51FD;&#x6570;&#x4E2D;&#x4F1A;&#x8C03;&#x7528;<code>genScriptCode</code>&#x3001;<code>genTemplateCode</code>&#x3001;<code>genStyleCode</code>&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x76F4;&#x63A5;&#x8FD0;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#x3001;&#x5C06;<code>&lt;template&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x4E3A;<code>render</code>&#x51FD;&#x6570;&#x3001;&#x5C06;<code>&lt;style&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x4E3A;&#x5BFC;&#x5165;<code>css</code>&#x6587;&#x4EF6;&#x7684;<code>import</code>&#x8BED;&#x53E5;&#x3002;<strong><code>genScriptCode</code>&#x51FD;&#x6570;&#x5E95;&#x5C42;&#x8C03;&#x7528;&#x7684;&#x5C31;&#x662F;<code>vue/compiler-sfc</code>&#x5305;&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#x3002;</strong></p>
<p>&#x4E00;&#x6837;&#x7684;&#x5957;&#x8DEF;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5728;vscode&#x7684;&#x6253;&#x5F00;&#x4E00;&#x4E2A;<code>debug</code>&#x7EC8;&#x7AEF;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/002e03339f02a6315711eaf7f100c546288941143fdbd4bc6c59feb6032b59a6" alt="debug-terminal"></p>
<p>&#x7136;&#x540E;&#x5728;<code>node_modules</code>&#x4E2D;&#x627E;&#x5230;<code>vue/compiler-sfc</code>&#x5305;&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#x6253;&#x4E0A;&#x65AD;&#x70B9;&#xFF0C;<code>compileScript</code>&#x51FD;&#x6570;&#x4F4D;&#x7F6E;&#x5728;<code>/node_modules/@vue/compiler-sfc/dist/compiler-sfc.cjs.js</code>&#x3002;&#x5728;<code>debug</code>&#x7EC8;&#x7AEF;&#x4E0A;&#x9762;&#x6267;&#x884C;<code>yarn dev</code>&#x540E;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x6253;&#x5F00;&#x5BF9;&#x5E94;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;<a href="/external_links/f993794d255bd1a46153e34df8e6817c.html" target="blank" rel="noopener">http://localhost:5173/</a> &#x3002;&#x6B64;&#x65F6;&#x65AD;&#x70B9;&#x5C31;&#x4F1A;&#x8D70;&#x5230;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5728;<code>debug</code>&#x4E2D;&#x5148;&#x6765;&#x770B;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5165;&#x53C2;<code>sfc</code>&#x3002;<code>sfc.filename</code>&#x7684;&#x503C;&#x4E3A;&#x5F53;&#x524D;&#x7F16;&#x8BD1;&#x7684;<code>vue</code>&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x3002;&#x7531;&#x4E8E;&#x6BCF;&#x7F16;&#x8BD1;&#x4E00;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x90FD;&#x8981;&#x8D70;&#x5230;&#x8FD9;&#x4E2A;debug&#x4E2D;&#xFF0C;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EA;&#x60F3;<code>debug</code>&#x770B;&#x770B;<code>common-child.vue</code>&#x6587;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x5728;<code>compileScript</code>&#x4E2D;&#x52A0;&#x4E86;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x53BB;&#x6389;&#x4E86;&#x5728;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x52A0;&#x7684;&#x65AD;&#x70B9;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EA;&#x6709;&#x7F16;&#x8BD1;<code>common-child.vue</code>&#x6587;&#x4EF6;&#x65F6;&#x4F1A;&#x8D70;&#x8FDB;&#x65AD;&#x70B9;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/8d347d90f955e11e5c90a1ee38c1fbf3117b22077e2679d6ca9a1b4822d8047f" alt="debug-common"></p>
<h2 id="compileScript&#x51FD;&#x6570;"><a href="#compileScript&#x51FD;&#x6570;" class="headerlink" title="compileScript&#x51FD;&#x6570;"></a><code>compileScript</code>&#x51FD;&#x6570;</h2><p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x56DE;&#x5FC6;&#x4E00;&#x4E0B;<code>common-child.vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>script</code>&#x6A21;&#x5757;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">defineProps({</span><br><span class="line">  content: String,</span><br><span class="line">});</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x6765;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x5165;&#x53C2;<code>sfc</code>&#xFF0C;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0; <a href="https://dev.newban.cn/7343139078486982710">vue&#x6587;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x7F16;&#x8BD1;&#x4E3A;js&#x6587;&#x4EF6;</a> &#x4E2D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x8BB2;&#x8FC7;&#x4E86;<code>sfc</code>&#x662F;&#x4E00;&#x4E2A;<code>descriptor</code>&#x5BF9;&#x8C61;&#xFF0C;<code>descriptor</code>&#x5BF9;&#x8C61;&#x662F;&#x7531;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6765;&#x7684;&#x3002;<code>descriptor</code>&#x5BF9;&#x8C61;&#x62E5;&#x6709;<code>template</code>&#x5C5E;&#x6027;&#x3001;<code>scriptSetup</code>&#x5C5E;&#x6027;&#x3001;<code>style</code>&#x5C5E;&#x6027;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;<code>vue</code>&#x6587;&#x4EF6;&#x7684;<code>&lt;template&gt;</code>&#x6A21;&#x5757;&#x3001;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x3001;<code>&lt;style&gt;</code>&#x6A21;&#x5757;&#x3002;&#x5728;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x53EA;&#x5173;&#x6CE8;<code>scriptSetup</code>&#x5C5E;&#x6027;&#xFF0C;<code>sfc.scriptSetup.content</code>&#x7684;&#x503C;&#x5C31;&#x662F;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x4E2D;<code>code</code>&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;<code>sfc.source</code>&#x7684;&#x503C;&#x5C31;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6E90;&#x4EE3;&#x7801;code&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x8BE6;&#x60C5;&#x67E5;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e2b1693073d1778396c092f72749e69029d484cc972f7304c7b08b12c523e5ad" alt="common-child"></p>
<p><code>compileScript</code>&#x51FD;&#x6570;&#x5185;&#x5305;&#x542B;&#x4E86;&#x7F16;&#x8BD1;<code>script</code>&#x6A21;&#x5757;&#x7684;&#x6240;&#x6709;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x4EE3;&#x7801;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x5149;&#x662F;&#x6E90;&#x4EE3;&#x7801;&#x5C31;&#x63A5;&#x8FD1;1000&#x884C;&#x3002;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x53BB;&#x901A;&#x8BFB;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x6240;&#x6709;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x4F1A;&#x8BB2;&#x5904;&#x7406;<code>defineProps</code>&#x76F8;&#x5173;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;&#x6211;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;function compileScript(sfc, options) {</span><br><span class="line">  const ctx = new ScriptCompileContext(sfc, options);</span><br><span class="line">  const startOffset = ctx.startOffset;</span><br><span class="line">  const endOffset = ctx.endOffset;</span><br><span class="line">  const scriptSetupAst = ctx.scriptSetupAst;</span><br><span class="line"></span><br><span class="line">  for (const node of scriptSetupAst.body) {</span><br><span class="line">    if (node.type === &quot;ExpressionStatement&quot;) {</span><br><span class="line">      const expr = node.expression;</span><br><span class="line">      if (processDefineProps(ctx, expr)) {</span><br><span class="line">        ctx.s.remove(node.start + startOffset, node.end + startOffset);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">    if (node.type === &quot;VariableDeclaration&quot; &amp;&amp; !node.declare || node.type.endsWith(&quot;Statement&quot;)) {</span><br><span class="line">      // ....</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  ctx.s.remove(0, startOffset);</span><br><span class="line">  ctx.s.remove(endOffset, source.length);</span><br><span class="line"></span><br><span class="line">  let runtimeOptions = ``;</span><br><span class="line">  const propsDecl = genRuntimeProps(ctx);</span><br><span class="line">  if (propsDecl) runtimeOptions += `\n  props: ${propsDecl},`;</span><br><span class="line"></span><br><span class="line">  const def =</span><br><span class="line">    (defaultExport ? `\n  ...${normalScriptDefaultVar},` : ``) +</span><br><span class="line">    (definedOptions ? `\n  ...${definedOptions},` : &quot;&quot;);</span><br><span class="line">  ctx.s.prependLeft(</span><br><span class="line">    startOffset,</span><br><span class="line">    `\n${genDefaultAs} /*#__PURE__*/${ctx.helper(</span><br><span class="line">      `defineComponent`</span><br><span class="line">    )}({${def}${runtimeOptions}\n  ${</span><br><span class="line">      hasAwait ? `async ` : ``</span><br><span class="line">    }setup(${args}) {\n${exposeCall}`</span><br><span class="line">  );</span><br><span class="line">  ctx.s.appendRight(endOffset, `})`);</span><br><span class="line"></span><br><span class="line">  return {</span><br><span class="line">    //....</span><br><span class="line">    content: ctx.s.toString(),</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x9996;&#x5148;&#x8C03;&#x7528;<code>ScriptCompileContext</code>&#x7C7B;&#x751F;&#x6210;&#x4E00;&#x4E2A;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x904D;&#x5386;<code>vue</code>&#x6587;&#x4EF6;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x751F;&#x6210;&#x7684;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x3002;&#x5982;&#x679C;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x4E3A;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x6267;&#x884C;<code>processDefineProps</code>&#x51FD;&#x6570;&#xFF0C;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#x662F;&#x5426;&#x662F;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x3002;&#x5982;&#x679C;&#x662F;&#x90A3;&#x4E48;&#x5C31;&#x5220;&#x9664;&#x6389;<code>defineProps</code>&#x8C03;&#x7528;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x5BF9;&#x5E94;&#x7684;<code>node</code>&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x5B58;&#x5230;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x3002;&#x7136;&#x540E;&#x4ECE;&#x53C2;&#x6570;<code>node</code>&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x4E2D;&#x62FF;&#x5230;&#x8C03;&#x7528;<code>defineProps</code>&#x5B8F;&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;<code>props</code>&#x53C2;&#x6570;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x3002;&#x518D;&#x4F7F;&#x7528;<code>slice</code>&#x65B9;&#x6CD5;&#x5E76;&#x4E14;&#x4F20;&#x5165;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x622A;&#x53D6;&#x5230;<code>props</code>&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x7136;&#x540E;&#x5C06;&#x622A;&#x53D6;&#x5230;&#x7684;<code>props</code>&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x5230;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#xFF0C;&#x6700;&#x540E;&#x518D;&#x5C06;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>setup</code>&#x51FD;&#x6570;&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x5230;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x3002;</p>
<h2 id="ScriptCompileContext&#x7C7B;"><a href="#ScriptCompileContext&#x7C7B;" class="headerlink" title="ScriptCompileContext&#x7C7B;"></a><code>ScriptCompileContext</code>&#x7C7B;</h2><p><code>ScriptCompileContext</code>&#x7C7B;&#x4E2D;&#x6211;&#x4EEC;&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x8FD9;&#x51E0;&#x4E2A;&#x5C5E;&#x6027;&#xFF1A;<code>startOffset</code>&#x3001;<code>endOffset</code>&#x3001;<code>scriptSetupAst</code>&#x3001;<code>s</code>&#x3002;&#x5148;&#x6765;&#x770B;&#x770B;&#x4ED6;&#x7684;<code>constructor</code>&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x6211;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;import MagicString from &apos;magic-string&apos;</span><br><span class="line"></span><br><span class="line">class ScriptCompileContext {</span><br><span class="line">  source = this.descriptor.source</span><br><span class="line">  s = new MagicString(this.source)</span><br><span class="line">  startOffset = this.descriptor.scriptSetup?.loc.start.offset</span><br><span class="line">  endOffset = this.descriptor.scriptSetup?.loc.end.offset</span><br><span class="line"></span><br><span class="line">  constructor(descriptor, options) {</span><br><span class="line">    this.s = new MagicString(this.source);</span><br><span class="line">    this.scriptSetupAst = descriptor.scriptSetup &amp;&amp; parse(descriptor.scriptSetup.content, this.startOffset);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x8BB2;&#x8FC7;&#x4E86;<code>descriptor.scriptSetup</code>&#x5BF9;&#x8C61;&#x5C31;&#x662F;&#x7531;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x800C;&#x6765;&#xFF0C;<code>startOffset</code>&#x548C;<code>endOffset</code>&#x5206;&#x522B;&#x5C31;&#x662F;<code>descriptor.scriptSetup?.loc.start.offset</code>&#x548C;<code>descriptor.scriptSetup?.loc.end.offset</code>&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x662F;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x5728;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x3002;</p>
<p><code>descriptor.source</code>&#x7684;&#x503C;&#x5C31;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6E90;&#x4EE3;&#x7801;code&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x91CC;&#x4EE5;<code>descriptor.source</code>&#x4E3A;&#x53C2;&#x6570;<code>new</code>&#x4E86;&#x4E00;&#x4E2A;<code>MagicString</code>&#x5BF9;&#x8C61;&#x3002;<code>magic-string</code>&#x662F;&#x7531;<a href="/external_links/f43dc28dacfdd0a33e2138b5a469757f.html" target="blank" rel="noopener">svelte</a>&#x7684;&#x4F5C;&#x8005;&#x5199;&#x7684;&#x4E00;&#x4E2A;&#x5E93;&#xFF0C;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5B57;&#x7B26;&#x4E32;&#x7684;<code>JavaScript</code>&#x5E93;&#x3002;&#x5B83;&#x53EF;&#x4EE5;&#x8BA9;&#x4F60;&#x5728;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x8FDB;&#x884C;&#x63D2;&#x5165;&#x3001;&#x5220;&#x9664;&#x3001;&#x66FF;&#x6362;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x751F;&#x6210;&#x51C6;&#x786E;&#x7684;<code>sourcemap</code>&#x3002;<code>MagicString</code>&#x5BF9;&#x8C61;&#x4E2D;&#x62E5;&#x6709;<code>toString</code>&#x3001;<code>remove</code>&#x3001;<code>prependLeft</code>&#x3001;<code>appendRight</code>&#x7B49;&#x65B9;&#x6CD5;&#x3002;<code>s.toString</code>&#x7528;&#x4E8E;&#x751F;&#x6210;&#x8FD4;&#x56DE;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x4E3E;&#x51E0;&#x4E2A;&#x4F8B;&#x5B50;&#x770B;&#x770B;&#x8FD9;&#x51E0;&#x4E2A;&#x65B9;&#x6CD5;&#x4F60;&#x5C31;&#x660E;&#x767D;&#x4E86;&#x3002;</p>
<p><code>s.remove( start, end )</code>&#x7528;&#x4E8E;&#x5220;&#x9664;&#x4ECE;&#x5F00;&#x59CB;&#x5230;&#x7ED3;&#x675F;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const s = new MagicString(&apos;hello word&apos;);</span><br><span class="line">s.remove(0, 6);</span><br><span class="line">s.toString(); // &apos;word&apos;</span><br></pre></td></tr></table></figure>

<p><code>s.prependLeft( index, content )</code>&#x7528;&#x4E8E;&#x5728;&#x6307;&#x5B9A;<code>index</code>&#x7684;&#x524D;&#x9762;&#x63D2;&#x5165;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const s = new MagicString(&apos;hello word&apos;);</span><br><span class="line">s.prependLeft(5, &apos;xx&apos;);</span><br><span class="line">s.toString(); // &apos;helloxx word&apos;</span><br></pre></td></tr></table></figure>

<p><code>s.appendRight( index, content )</code>&#x7528;&#x4E8E;&#x5728;&#x6307;&#x5B9A;<code>index</code>&#x7684;&#x540E;&#x9762;&#x63D2;&#x5165;&#x5B57;&#x7B26;&#x4E32;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const s = new MagicString(&apos;hello word&apos;);</span><br><span class="line">s.appendRight(5, &apos;xx&apos;);</span><br><span class="line">s.toString(); // &apos;helloxx word&apos;</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x770B;<code>constructor</code>&#x4E2D;&#x7684;<code>scriptSetupAst</code>&#x5C5E;&#x6027;&#x662F;&#x7531;&#x4E00;&#x4E2A;<code>parse</code>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x8D4B;&#x503C;&#xFF0C;<code>parse(descriptor.scriptSetup.content, this.startOffset)</code>&#xFF0C;<code>parse</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import { parse as babelParse } from &apos;@babel/parser&apos;</span><br><span class="line"></span><br><span class="line">function parse(input: string, offset: number): Program {</span><br><span class="line">  try {</span><br><span class="line">    return babelParse(input, {</span><br><span class="line">      plugins,</span><br><span class="line">      sourceType: &apos;module&apos;,</span><br><span class="line">    }).program</span><br><span class="line">  } catch (e: any) {</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5728;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BB2;&#x8FC7;&#x4E86;<code>descriptor.scriptSetup.content</code>&#x7684;&#x503C;&#x5C31;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;<code>parse</code>&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x4E86;<code>babel</code>&#x63D0;&#x4F9B;&#x7684;<code>parser</code>&#x51FD;&#x6570;&#xFF0C;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x8F6C;&#x6362;&#x6210;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c58f5c7956f2feaf7c5b088abe0af2dcc1fd07e0f98351c3e1289a8bb62912db" alt="parser"></p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x8FD9;&#x51E0;&#x884C;&#x4EE3;&#x7801;&#x4F60;&#x7406;&#x89E3;&#x8D77;&#x6765;&#x5C31;&#x6CA1;&#x4EC0;&#x4E48;&#x96BE;&#x5EA6;&#x4E86;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>scriptSetupAst</code>&#x53D8;&#x91CF;&#x5C31;&#x662F;&#x7531;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;&#x8F6C;&#x6362;&#x6210;&#x7684;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const ctx = new ScriptCompileContext(sfc, options);</span><br><span class="line">const startOffset = ctx.startOffset;</span><br><span class="line">const endOffset = ctx.endOffset;</span><br><span class="line">const scriptSetupAst = ctx.scriptSetupAst;</span><br></pre></td></tr></table></figure>

<p>&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1ddc8a6d8abb2ac471cd2da2c23dd2440ce226e341e34731fe4f5902c27a9440" alt="progress1.png"></p>
<h2 id="processDefineProps&#x51FD;&#x6570;"><a href="#processDefineProps&#x51FD;&#x6570;" class="headerlink" title="processDefineProps&#x51FD;&#x6570;"></a><code>processDefineProps</code>&#x51FD;&#x6570;</h2><p>&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>for</code>&#x5FAA;&#x73AF;&#x5F00;&#x59CB;&#x5904;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;for (const node of scriptSetupAst.body) {</span><br><span class="line">  if (node.type === &quot;ExpressionStatement&quot;) {</span><br><span class="line">    const expr = node.expression;</span><br><span class="line">    if (processDefineProps(ctx, expr)) {</span><br><span class="line">      ctx.s.remove(node.start + startOffset, node.end + startOffset);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x904D;&#x5386;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x4E3A;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x4E14;<code>processDefineProps</code>&#x51FD;&#x6570;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4E3A;<code>true</code>&#x5C31;&#x8C03;&#x7528;<code>ctx.s.remove</code>&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x4F1A;&#x513F;&#x65AD;&#x70B9;&#x8FD8;&#x5728;<code>for</code>&#x5FAA;&#x73AF;&#x5F00;&#x59CB;&#x5904;&#xFF0C;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x6267;&#x884C;<code>ctx.s.toString()</code>&#x770B;&#x770B;&#x5F53;&#x524D;&#x7684;<code>code</code>&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/44f4c3540a96e8314d6b92e18200bd502190dfbc663d20c214dc8e43ba5eb6a2" alt="for-toString"></p>
<p>&#x4ECE;&#x56FE;&#x4E0A;&#x53EF;&#x4EE5;&#x770B;&#x89C1;&#x6B64;&#x65F6;<code>toString</code>&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x8FD8;&#x662F;&#x548C;&#x4E4B;&#x524D;&#x7684;<code>common-child.vue</code>&#x6E90;&#x4EE3;&#x7801;&#x662F;&#x4E00;&#x6837;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5F88;&#x660E;&#x663E;&#x6211;&#x4EEC;&#x7684;<code>defineProps</code>&#x662F;&#x4E00;&#x4E2A;&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x6267;&#x884C;<code>processDefineProps</code>&#x51FD;&#x6570;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;&#x8C03;&#x7528;<code>processDefineProps</code>&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x770B;&#x5230;&#x7B80;&#x5316;&#x8FC7;&#x7684;<code>processDefineProps</code>&#x51FD;&#x6570;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const DEFINE_PROPS = &quot;defineProps&quot;;</span><br><span class="line">function processDefineProps(ctx, node, declId) {</span><br><span class="line">  if (!isCallOf(node, DEFINE_PROPS)) {</span><br><span class="line">    return processWithDefaults(ctx, node, declId);</span><br><span class="line">  }</span><br><span class="line">  ctx.propsRuntimeDecl = node.arguments[0];</span><br><span class="line">  return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;<code>processDefineProps</code>&#x51FD;&#x6570;&#x4E2D;&#x9996;&#x5148;&#x6267;&#x884C;&#x4E86;<code>isCallOf</code>&#x51FD;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x7684;&#x662F;&#x5F53;&#x524D;&#x7684;<code>AST&#x8BED;&#x6CD5;&#x6811;</code>&#x4E2D;&#x7684;<code>node</code>&#x8282;&#x70B9;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x4F20;&#x7684;&#x662F;<code>&quot;defineProps&quot;</code>&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x4ECE;<code>isCallOf</code>&#x7684;&#x540D;&#x5B57;&#x4E2D;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x731C;&#x51FA;&#x4ED6;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7684;<code>node</code>&#x8282;&#x70B9;&#x7684;&#x7C7B;&#x578B;&#x662F;&#x4E0D;&#x662F;&#x5728;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#xFF0C;<code>isCallOf</code>&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;export function isCallOf(node, test) {</span><br><span class="line">  return !!(</span><br><span class="line">    node &amp;&amp;</span><br><span class="line">    test &amp;&amp;</span><br><span class="line">    node.type === &quot;CallExpression&quot; &amp;&amp;</span><br><span class="line">    node.callee.type === &quot;Identifier&quot; &amp;&amp;</span><br><span class="line">    (typeof test === &quot;string&quot;</span><br><span class="line">      ? node.callee.name === test</span><br><span class="line">      : test(node.callee.name))</span><br><span class="line">  );</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>isCallOf</code>&#x51FD;&#x6570;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;<code>node</code>&#x662F;&#x5F53;&#x524D;&#x7684;<code>node</code>&#x8282;&#x70B9;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;<code>test</code>&#x662F;&#x8981;&#x5224;&#x65AD;&#x7684;&#x51FD;&#x6570;&#x540D;&#x79F0;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x662F;&#x5199;&#x6B7B;&#x7684;<code>&quot;defineProps&quot;</code>&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x6211;&#x4EEC;&#x5728;<code>debug console</code>&#x4E2D;&#x5C06;<code>node.type</code>&#x3001;<code>node.callee.type</code>&#x3001;<code>node.callee.name</code>&#x7684;&#x503C;&#x6253;&#x5370;&#x51FA;&#x6765;&#x770B;&#x770B;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c165dbb361c88f5c0dd78dfc5cecc702b871109f2d8894962ee042ee073d8e92" alt="isCallOf"></p>
<p>&#x4ECE;&#x56FE;&#x4E0A;&#x770B;&#x5230;<code>node.type</code>&#x3001;<code>node.callee.type</code>&#x3001;<code>node.callee.name</code>&#x7684;&#x503C;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x8BC1;&#x660E;&#x6211;&#x4EEC;&#x7684;&#x731C;&#x6D4B;&#x662F;&#x6B63;&#x786E;&#x7684;&#x8FD9;&#x91CC;<code>isCallOf</code>&#x7684;&#x4F5C;&#x7528;&#x662F;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7684;<code>node</code>&#x8282;&#x70B9;&#x7684;&#x7C7B;&#x578B;&#x662F;&#x4E0D;&#x662F;&#x5728;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x3002;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x7684;<code>node</code>&#x8282;&#x70B9;&#x786E;&#x5B9E;&#x662F;&#x5728;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;<code>isCallOf</code>&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4E3A;<code>true</code>&#xFF0C;&#x5728;<code>processDefineProps</code>&#x51FD;&#x6570;&#x4E2D;&#x662F;&#x5BF9;<code>isCallOf</code>&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x53D6;&#x53CD;&#x3002;&#x4E5F;&#x5C31;&#x662F;<code>!isCallOf(node, DEFINE_PROPS)</code>&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4E3A;<code>false</code>&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x8D70;&#x5230;<code>return processWithDefaults(ctx, node, declId);</code>&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x6765;&#x770B;<code>processDefineProps</code>&#x51FD;&#x6570;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;function processDefineProps(ctx, node, declId) {</span><br><span class="line">  if (!isCallOf(node, DEFINE_PROPS)) {</span><br><span class="line">    return processWithDefaults(ctx, node, declId);</span><br><span class="line">  }</span><br><span class="line">  ctx.propsRuntimeDecl = node.arguments[0];</span><br><span class="line">  return true;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x679C;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x786E;&#x5B9E;&#x662F;&#x5728;&#x6267;&#x884C;<code>defineProps</code>&#x51FD;&#x6570;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x6267;&#x884C;<code>ctx.propsRuntimeDecl = node.arguments[0];</code>&#x3002;&#x5C06;&#x5F53;&#x524D;<code>node</code>&#x8282;&#x70B9;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x8D4B;&#x503C;&#x7ED9;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x7684;<code>propsRuntimeDecl</code>&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x65F6;&#x7ED9;&#x4F20;&#x5165;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x3002;&#x4E3A;&#x4EC0;&#x4E48;&#x5199;&#x6B7B;&#x6210;&#x53D6;<code>arguments[0]</code>&#x5462;&#xFF1F;&#x662F;&#x56E0;&#x4E3A;<code>defineProps</code>&#x51FD;&#x6570;&#x53EA;&#x63A5;&#x6536;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x6570;&#x7EC4;&#x3002;&#x6BD4;&#x5982;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const props = defineProps({</span><br><span class="line">  foo: String</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">const props = defineProps([&apos;foo&apos;, &apos;bar&apos;])</span><br></pre></td></tr></table></figure>

<p><strong>&#x8BB0;&#x4F4F;&#x8FD9;&#x4E2A;&#x5728;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x4E0A;&#x9762;&#x585E;&#x7684;<code>propsRuntimeDecl</code>&#x5C5E;&#x6027;&#xFF0C;&#x540E;&#x9762;&#x751F;&#x6210;&#x8FD0;&#x884C;&#x65F6;&#x7684;<code>props</code>&#x5C31;&#x662F;&#x6839;&#x636E;<code>propsRuntimeDecl</code>&#x5C5E;&#x6027;&#x751F;&#x6210;&#x7684;&#x3002;</strong></p>
<p>&#x81F3;&#x6B64;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x4E86;&#x89E3;&#x5230;&#x4E86;<code>processDefineProps</code>&#x4E2D;&#x4E3B;&#x8981;&#x505A;&#x4E86;&#x4E24;&#x4EF6;&#x4E8B;&#xFF1A;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x6267;&#x884C;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#x662F;&#x5426;&#x662F;<code>defineProps</code>&#x51FD;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x90A3;&#x4E48;&#x5C06;&#x89E3;&#x6790;&#x51FA;&#x6765;&#x7684;<code>props</code>&#x5C5E;&#x6027;&#x7684;&#x4FE1;&#x606F;&#x585E;&#x7684;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x7684;<code>propsRuntimeDecl</code>&#x5C5E;&#x6027;&#x4E2D;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x8FD9;&#x4F1A;&#x513F;&#x6765;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;<code>processDefineProps</code>&#x4EE3;&#x7801;&#x4F60;&#x5C31;&#x80FD;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x4E86;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;for (const node of scriptSetupAst.body) {</span><br><span class="line">  if (node.type === &quot;ExpressionStatement&quot;) {</span><br><span class="line">    const expr = node.expression;</span><br><span class="line">    if (processDefineProps(ctx, expr)) {</span><br><span class="line">      ctx.s.remove(node.start + startOffset, node.end + startOffset);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x904D;&#x5386;<code>AST&#x8BED;&#x6CD5;&#x6811;</code>&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x662F;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#xFF0C;&#x518D;&#x6267;&#x884C;<code>processDefineProps</code>&#x5224;&#x65AD;&#x5F53;&#x524D;<code>node</code>&#x8282;&#x70B9;&#x662F;&#x5426;&#x662F;&#x6267;&#x884C;&#x7684;<code>defineProps</code>&#x51FD;&#x6570;&#x3002;&#x5982;&#x679C;&#x662F;<code>defineProps</code>&#x51FD;&#x6570;&#x5C31;&#x8C03;&#x7528;<code>ctx.s.remove</code>&#x65B9;&#x6CD5;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x4ECE;&#x6E90;&#x4EE3;&#x7801;&#x4E2D;&#x5220;&#x9664;&#x6389;&#x3002;&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x5728;<code>debug console</code>&#x4E2D;&#x6267;&#x884C;<code>ctx.s.toString()</code>,&#x770B;&#x5230;&#x6211;&#x4EEC;&#x7684;<code>code</code>&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x5DF2;&#x7ECF;&#x6CA1;&#x6709;&#x4E86;<code>defineProps</code>&#x4E86;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/04c700cb4a0dd74da5bd89590c1347a0127ea6c49ccbefea868ce7943dfea717" alt="remove-toString"></p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x56DE;&#x7B54;&#x7B2C;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#xFF1A;</p>
<p><strong>&#x4E3A;&#x4EC0;&#x4E48;<code>defineProps</code>&#x4E0D;&#x9700;&#x8981;<code>import</code>&#x5BFC;&#x5165;&#xFF1F;</strong></p>
<p>&#x56E0;&#x4E3A;&#x5728;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x5982;&#x679C;&#x5F53;&#x524D;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x7684;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x662F;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x4E14;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x662F;<code>defineProps</code>&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8C03;&#x7528;<code>remove</code>&#x65B9;&#x6CD5;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x7ED9;&#x79FB;&#x9664;&#x6389;&#x3002;&#x65E2;&#x7136;<code>defineProps</code>&#x8BED;&#x53E5;&#x5DF2;&#x7ECF;&#x88AB;&#x79FB;&#x9664;&#x4E86;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x5C31;&#x4E0D;&#x9700;&#x8981;<code>import</code>&#x5BFC;&#x5165;&#x4E86;<code>defineProps</code>&#x4E86;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/692ff731ff04e367fa57498adbdf3b52b2e379ae00bd11a822266ee15358e3f8" alt="progress2"></p>
<h2 id="genRuntimeProps&#x51FD;&#x6570;"><a href="#genRuntimeProps&#x51FD;&#x6570;" class="headerlink" title="genRuntimeProps&#x51FD;&#x6570;"></a><code>genRuntimeProps</code>&#x51FD;&#x6570;</h2><p>&#x63A5;&#x7740;&#x5728;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x6267;&#x884C;&#x4E86;&#x4E24;&#x6761;<code>remove</code>&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;ctx.s.remove(0, startOffset);</span><br><span class="line">ctx.s.remove(endOffset, source.length);</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x7684;<code>startOffset</code>&#x8868;&#x793A;<code>script</code>&#x6807;&#x7B7E;&#x4E2D;&#x7B2C;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x5F00;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C; &#x6240;&#x4EE5;<code>ctx.s.remove(0, startOffset);</code>&#x7684;&#x610F;&#x601D;&#x662F;&#x5220;&#x9664;&#x6389;&#x5305;&#x542B;<code>&lt;script setup&gt;</code>&#x5F00;&#x59CB;&#x6807;&#x7B7E;&#x524D;&#x9762;&#x7684;&#x6240;&#x6709;&#x5185;&#x5BB9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5220;&#x9664;&#x6389;<code>template</code>&#x6A21;&#x5757;&#x7684;&#x5185;&#x5BB9;&#x548C;<code>&lt;script setup&gt;</code>&#x5F00;&#x59CB;&#x6807;&#x7B7E;&#x3002;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x770B;<code>ctx.s.toString()</code>&#x7684;&#x503C;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/734f9284daef8f3691a6fdca37f49e00ab1eba47819fa921673a5da65764fd00" alt="remove1"></p>
<p>&#x63A5;&#x7740;&#x6267;&#x884C;<code>ctx.s.remove(endOffset, source.length);</code>&#xFF0C;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x7684;&#x610F;&#x601D;&#x662F;&#x5C06;<code>&lt;/script &gt;</code>&#x5305;&#x542B;&#x7ED3;&#x675F;&#x6807;&#x7B7E;&#x540E;&#x9762;&#x7684;&#x5185;&#x5BB9;&#x5168;&#x90E8;&#x5220;&#x6389;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5220;&#x9664;<code>&lt;/script &gt;</code>&#x7ED3;&#x675F;&#x6807;&#x7B7E;&#x548C;<code>&lt;style&gt;</code>&#x6A21;&#x5757;&#x3002;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5B8C;&#x540E;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x770B;<code>ctx.s.toString()</code>&#x7684;&#x503C;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/2613f381c00909141adf80e263024900a93ac34e27f838146b4e17149d05f511" alt="remove2"></p>
<p>&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x7684;<code>common-child.vue</code>&#x7684;<code>script</code>&#x6A21;&#x5757;&#x4E2D;&#x53EA;&#x6709;&#x4E00;&#x4E2A;<code>defineProps</code>&#x51FD;&#x6570;&#xFF0C;&#x6240;&#x4EE5;&#x5F53;&#x79FB;&#x9664;&#x6389;<code>template</code>&#x6A21;&#x5757;&#x3001;<code>style</code>&#x6A21;&#x5757;&#x3001;<code>script</code>&#x5F00;&#x59CB;&#x6807;&#x7B7E;&#x548C;&#x7ED3;&#x675F;&#x6807;&#x7B7E;&#x540E;&#x5C31;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7684;<code>script</code>&#x6A21;&#x5757;&#x4E2D;&#x8FD8;&#x6709;&#x5176;&#x4ED6;<code>js</code>&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#xFF0C;&#x5F53;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x5230;&#x8FD9;&#x91CC;&#x540E;&#x5C31;&#x4E0D;&#x4F1A;&#x662F;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x800C;&#x662F;&#x90A3;&#x4E9B;<code>js</code>&#x4E1A;&#x52A1;&#x4EE3;&#x7801;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x63A5;&#x7740;&#x5C06;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x65AD;&#x70B9;&#x8D70;&#x5230;&#x8C03;&#x7528;<code>genRuntimeProps</code>&#x51FD;&#x6570;&#x5904;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;let runtimeOptions = ``;</span><br><span class="line">const propsDecl = genRuntimeProps(ctx);</span><br><span class="line">if (propsDecl) runtimeOptions += `\n  props: ${propsDecl},`;</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;<code>genRuntimeProps</code>&#x540D;&#x5B57;&#x4F60;&#x5E94;&#x8BE5;&#x5DF2;&#x7ECF;&#x731C;&#x5230;&#x4E86;&#x4ED6;&#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x6839;&#x636E;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x751F;&#x6210;&#x8FD0;&#x884C;&#x65F6;&#x7684;<code>props</code>&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>genRuntimeProps</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x4E2D;<code>genRuntimeProps</code>&#x4E3B;&#x8981;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;function genRuntimeProps(ctx) {</span><br><span class="line">  let propsDecls;</span><br><span class="line">  if (ctx.propsRuntimeDecl) {</span><br><span class="line">    propsDecls = ctx.getString(ctx.propsRuntimeDecl).trim();</span><br><span class="line">  }</span><br><span class="line">  return propsDecls;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD8;&#x8BB0;&#x5F97;&#x8FD9;&#x4E2A;<code>ctx.propsRuntimeDecl</code>&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#x5417;&#xFF1F;&#x6211;&#x4EEC;&#x5728;&#x6267;&#x884C;<code>processDefineProps</code>&#x51FD;&#x6570;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x8282;&#x70B9;&#x662F;&#x5426;&#x4E3A;&#x6267;&#x884C;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;<code>node</code>&#x8282;&#x70B9;&#x8D4B;&#x503C;&#x7ED9;<code>ctx.propsRuntimeDecl</code>&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;<code>ctx.propsRuntimeDecl</code>&#x4E2D;&#x62E5;&#x6709;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x4F20;&#x5165;&#x7684;<code>props</code>&#x53C2;&#x6570;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x8FDB;<code>ctx.getString</code>&#x51FD;&#x6570;&#x770B;&#x770B;&#x662F;&#x5982;&#x4F55;&#x53D6;&#x51FA;<code>props</code>&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;getString(node, scriptSetup = true) {</span><br><span class="line">  const block = scriptSetup ? this.descriptor.scriptSetup : this.descriptor.script;</span><br><span class="line">  return block.content.slice(node.start, node.end);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x524D;&#x9762;&#x5DF2;&#x7ECF;&#x8BB2;&#x8FC7;&#x4E86;<code>descriptor</code>&#x5BF9;&#x8C61;&#x662F;&#x7531;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x800C;&#x6765;&#xFF0C;&#x5176;&#x4E2D;&#x7684;<code>scriptSetup</code>&#x5C5E;&#x6027;&#x5C31;&#x662F;&#x5BF9;&#x5E94;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x3002;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x4F20;&#x5165;<code>scriptSetup</code>&#xFF0C;&#x6240;&#x4EE5;<code>block</code>&#x7684;&#x503C;&#x4E3A;<code>this.descriptor.scriptSetup</code>&#x3002;&#x540C;&#x6837;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x4E5F;&#x8BB2;&#x8FC7;<code>scriptSetup.content</code>&#x7684;&#x503C;&#x662F;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;<code>code</code>&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x8BF7;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/3d3fb6bc700e5bfcc2bca0aa0789ea5ed649a1002be4107f04aec36a8bb6251a" alt="block-content"></p>
<p>&#x8FD9;&#x91CC;&#x4F20;&#x5165;&#x7684;<code>node</code>&#x8282;&#x70B9;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x524D;&#x9762;&#x5B58;&#x5728;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;<code>ctx.propsRuntimeDecl</code>&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5728;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;&#x8282;&#x70B9;&#xFF0C;<code>node.start</code>&#x5C31;&#x662F;&#x53C2;&#x6570;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;<code>node.end</code>&#x5C31;&#x662F;&#x53C2;&#x6570;&#x8282;&#x70B9;&#x7684;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x3002;&#x6240;&#x4EE5;&#x4F7F;&#x7528;<code>content.slice</code>&#x65B9;&#x6CD5;&#x5C31;&#x53EF;&#x4EE5;&#x622A;&#x53D6;&#x51FA;&#x6765;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;<code>props</code>&#x5B9A;&#x4E49;&#x3002;&#x8BF7;&#x770B;&#x4E0B;&#x56FE;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/0cadea6176263644d0d1cd982e8921f93f6d30801f00a2132e82010703f92125" alt="slice"></p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x518D;&#x56DE;&#x8FC7;&#x5934;&#x6765;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x8C03;&#x7528;<code>genRuntimeProps</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x4F60;&#x5C31;&#x80FD;&#x5F88;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x4E86;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;let runtimeOptions = ``;</span><br><span class="line">const propsDecl = genRuntimeProps(ctx);</span><br><span class="line">if (propsDecl) runtimeOptions += `\n  props: ${propsDecl},`;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x7684;<code>propsDecl</code>&#x5728;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x4E2D;&#x5C31;&#x662F;&#x4F7F;&#x7528;<code>slice</code>&#x622A;&#x53D6;&#x51FA;&#x6765;&#x7684;<code>props</code>&#x5B9A;&#x4E49;&#xFF0C;&#x518D;&#x4F7F;&#x7528;<code>\n props: ${propsDecl},</code>&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x5C31;&#x5F97;&#x5230;&#x4E86;<code>runtimeOptions</code>&#x7684;&#x503C;&#x3002;&#x5982;&#x56FE;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/07525ea58ec0fd20bc5d4558d5a22469c514627d318c77fda69417013948a10c" alt="runtimeOptions"></p>
<p>&#x770B;&#x5230;<code>runtimeOptions</code>&#x7684;&#x503C;&#x662F;&#x4E0D;&#x662F;&#x5C31;&#x89C9;&#x5F97;&#x5F88;&#x719F;&#x6089;&#x4E86;&#xFF0C;&#x53C8;&#x6709;<code>name</code>&#x5C5E;&#x6027;&#xFF0C;&#x53C8;&#x6709;<code>props</code>&#x5C5E;&#x6027;&#x3002;&#x5176;&#x5B9E;&#x5C31;&#x662F;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;<code>name</code>&#x62FC;&#x63A5;&#x903B;&#x8F91;&#x662F;&#x5728;&#x7701;&#x7565;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x53EA;&#x8BB2;<code>props</code>&#x76F8;&#x5173;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x6240;&#x4EE5;<code>name</code>&#x4E0D;&#x5728;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x7684;&#x8BA8;&#x8BBA;&#x8303;&#x56F4;&#x5185;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x56DE;&#x7B54;&#x524D;&#x9762;&#x63D0;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<p><strong><code>defineProps</code>&#x662F;&#x5982;&#x4F55;&#x5C06;&#x58F0;&#x660E;&#x7684; <code>props</code> &#x81EA;&#x52A8;&#x66B4;&#x9732;&#x7ED9;&#x6A21;&#x677F;&#xFF1F;</strong></p>
<p>&#x7F16;&#x8BD1;&#x65F6;&#x5728;&#x79FB;&#x9664;&#x6389;<code>defineProps</code>&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x65F6;&#x4F1A;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;<code>node</code>&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x5B58;&#x5230;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x3002;&#x904D;&#x5386;&#x5B8C;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;&#x540E;</code>&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x5B58;&#x7684;&#x53C2;&#x6570;<code>node</code>&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x4E2D;&#x62FF;&#x5230;&#x8C03;&#x7528;<code>defineProps</code>&#x5B8F;&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;<code>props</code>&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x3002;&#x518D;&#x4F7F;&#x7528;<code>slice</code>&#x65B9;&#x6CD5;&#x5E76;&#x4E14;&#x4F20;&#x5165;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x622A;&#x53D6;&#x5230;<code>props</code>&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x7136;&#x540E;&#x5C06;&#x622A;&#x53D6;&#x5230;&#x7684;<code>props</code>&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x5230;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x4E2D;&#x5C31;&#x6709;&#x4E86;&#x4E00;&#x4E2A;<code>props</code>&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x4E2A;<code>props</code>&#x5C5E;&#x6027;&#x5728;<code>template</code>&#x6A21;&#x7248;&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/7cc4597e094d843a638f27c0145718307175c54401a2040a8f7490d94cd8e123" alt="progress3"></p>
<h2 id="&#x62FC;&#x63A5;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x8FD0;&#x884C;&#x65F6;js&#x4EE3;&#x7801;"><a href="#&#x62FC;&#x63A5;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x8FD0;&#x884C;&#x65F6;js&#x4EE3;&#x7801;" class="headerlink" title="&#x62FC;&#x63A5;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x8FD0;&#x884C;&#x65F6;js&#x4EE3;&#x7801;"></a>&#x62FC;&#x63A5;&#x6210;&#x5B8C;&#x6574;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x8FD0;&#x884C;&#x65F6;<code>js</code>&#x4EE3;&#x7801;</h2><p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x5768;&#x4EE3;&#x7801;&#xFF1B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;const def =</span><br><span class="line">  (defaultExport ? `\n  ...${normalScriptDefaultVar},` : ``) +</span><br><span class="line">  (definedOptions ? `\n  ...${definedOptions},` : &quot;&quot;);</span><br><span class="line">ctx.s.prependLeft(</span><br><span class="line">  startOffset,</span><br><span class="line">  `\n${genDefaultAs} /*#__PURE__*/${ctx.helper(</span><br><span class="line">    `defineComponent`</span><br><span class="line">  )}({${def}${runtimeOptions}\n  ${</span><br><span class="line">    hasAwait ? `async ` : ``</span><br><span class="line">  }setup(${args}) {\n${exposeCall}`</span><br><span class="line">);</span><br><span class="line">ctx.s.appendRight(endOffset, `})`);</span><br><span class="line"></span><br><span class="line">return {</span><br><span class="line">  //....</span><br><span class="line">  content: ctx.s.toString(),</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x5148;&#x8C03;&#x7528;&#x4E86;<code>ctx.s.prependLeft</code>&#x65B9;&#x6CD5;&#x7ED9;&#x5B57;&#x7B26;&#x4E32;&#x5F00;&#x59CB;&#x7684;&#x5730;&#x65B9;&#x63D2;&#x5165;&#x4E86;&#x4E00;&#x4E32;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x4E32;&#x62FC;&#x63A5;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x770B;&#x7740;&#x8111;&#x74DC;&#x5B50;&#x75DB;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;<code>debug console</code>&#x4E0A;&#x9762;&#x770B;&#x770B;&#x8981;&#x62FC;&#x63A5;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1ad731c30b2846450571e2dbcd5cb4e1858920bddb6383e5f5a521796fda4811" alt="append"></p>
<p>&#x770B;&#x5230;&#x8FD9;&#x4E32;&#x4F60;&#x5E94;&#x8BE5;&#x5F88;&#x719F;&#x6089;&#xFF0C;&#x9664;&#x4E86;&#x524D;&#x9762;&#x6211;&#x4EEC;&#x62FC;&#x63A5;&#x7684;<code>name</code>&#x548C;<code>props</code>&#x4E4B;&#x5916;&#x8FD8;&#x6709;&#x90E8;&#x5206;<code>setup</code>&#x7F16;&#x8BD1;&#x540E;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x5176;&#x5B9E;&#x8FD9;&#x5C31;&#x662F;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;<code>code</code>&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<p>&#x5F53;&#x65AD;&#x70B9;&#x6267;&#x884C;&#x5B8C;<code>prependLeft</code>&#x65B9;&#x6CD5;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5728;<code>debug console</code>&#x4E2D;&#x518D;&#x770B;&#x770B;&#x6B64;&#x65F6;&#x7684;<code>ctx.s.toString()</code>&#x7684;&#x503C;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/aa53dd401676f6e6b9984a2a96e6d738ce3f7646f3b8539be51ce26f13033377" alt="last-toString"></p>
<p>&#x4ECE;&#x56FE;&#x4E0A;&#x53EF;&#x4EE5;&#x770B;&#x5230;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x4E0A;&#x7684;<code>name</code>&#x5C5E;&#x6027;&#x3001;<code>props</code>&#x5C5E;&#x6027;&#x3001;<code>setup</code>&#x51FD;&#x6570;&#x57FA;&#x672C;&#x5DF2;&#x7ECF;&#x62FC;&#x63A5;&#x7684;&#x5DEE;&#x4E0D;&#x591A;&#x4E86;&#xFF0C;&#x53EA;&#x5DEE;&#x4E00;&#x4E2A;<code>})</code>&#x7ED3;&#x675F;&#x7B26;&#x53F7;&#xFF0C;&#x6240;&#x4EE5;&#x6267;&#x884C;<code>ctx.s.appendRight(endOffset,</code> })<code>);</code>&#x5C06;&#x7ED3;&#x675F;&#x7B26;&#x53F7;&#x63D2;&#x5165;&#x8FDB;&#x53BB;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x6700;&#x540E;&#x518D;&#x6765;&#x770B;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;<code>content</code>&#x5C5E;&#x6027;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;<code>ctx.s.toString()</code>&#xFF0C;<code>content</code>&#x5C5E;&#x6027;&#x7684;&#x503C;&#x5C31;&#x662F;<code>vue</code>&#x7EC4;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x6210;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/284dca2e35b68c07dd3623626833fa5994d3f81996fa79b277505e0c75232e79" alt="full"></p>
<h2 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;&#x975E;setup&#x9876;&#x5C42;&#x4F7F;&#x7528;defineProps&#xFF1F;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;&#x975E;setup&#x9876;&#x5C42;&#x4F7F;&#x7528;defineProps&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;&#x975E;setup&#x9876;&#x5C42;&#x4F7F;&#x7528;defineProps&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;&#x975E;<code>setup</code>&#x9876;&#x5C42;&#x4F7F;&#x7528;<code>defineProps</code>&#xFF1F;</h2><p>&#x540C;&#x6837;&#x7684;&#x5957;&#x8DEF;&#x6211;&#x4EEC;&#x6765;<code>debug</code>&#x770B;&#x770B;<code>if-child.vue</code>&#x6587;&#x4EF6;&#xFF0C;&#x5148;&#x6765;&#x56DE;&#x5FC6;&#x4E00;&#x4E0B;<code>if-child.vue</code>&#x6587;&#x4EF6;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;div&gt;content is {{ content }}&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import { ref } from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const count = ref(10);</span><br><span class="line">if (count.value) {</span><br><span class="line">  defineProps({</span><br><span class="line">    content: String,</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x904D;&#x5386;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;<code>scriptSetupAst.body</code>&#x6570;&#x7EC4;&#x4E2D;&#x6709;&#x4E09;&#x4E2A;<code>node</code>&#x8282;&#x70B9;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/38dc849f888dc6b9782568598eae7ccc8154a8d902c74a1c110206cbf83363b6" alt="if-node-list"></p>
<p>&#x4ECE;&#x56FE;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E09;&#x4E2A;<code>node</code>&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x5206;&#x522B;&#x662F;&#xFF1A;<code>ImportDeclaration</code>&#x3001;<code>VariableDeclaration</code>&#x3001;<code>IfStatement</code>&#x3002;&#x5F88;&#x660E;&#x663E;&#x8FD9;&#x4E09;&#x4E2A;&#x8282;&#x70B9;&#x5BF9;&#x5E94;&#x7684;&#x662F;&#x6211;&#x4EEC;&#x6E90;&#x4EE3;&#x7801;&#x4E2D;&#x7684;<code>import</code>&#x8BED;&#x53E5;&#x3001;<code>const</code>&#x5B9A;&#x4E49;&#x53D8;&#x91CF;&#x3001;<code>if</code> &#x6A21;&#x5757;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x56DE;&#x5FC6;&#x4E00;&#x4E0B;<code>compileScript</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x904D;&#x5386;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">go&#x590D;&#x5236;&#x4EE3;&#x7801;function compileScript(sfc, options) {</span><br><span class="line">   // &#x7701;&#x7565;..</span><br><span class="line">  for (const node of scriptSetupAst.body) {</span><br><span class="line">    if (node.type === &quot;ExpressionStatement&quot;) {</span><br><span class="line">      const expr = node.expression;</span><br><span class="line">      if (processDefineProps(ctx, expr)) {</span><br><span class="line">        ctx.s.remove(node.start + startOffset, node.end + startOffset);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    if (</span><br><span class="line">      (node.type === &quot;VariableDeclaration&quot; &amp;&amp; !node.declare) ||</span><br><span class="line">      node.type.endsWith(&quot;Statement&quot;)</span><br><span class="line">    ) {</span><br><span class="line">      // ....</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  // &#x7701;&#x7565;..</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x4EE3;&#x7801;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#x7B2C;&#x4E09;&#x4E2A;<code>node</code>&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5728;<code>if</code>&#x4E2D;&#x4F7F;&#x7528;<code>defineProps</code>&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x4E3A;<code>IfStatement</code>&#xFF0C;&#x4E0D;&#x7B49;&#x4E8E;<code>ExpressionStatement</code>&#xFF0C;&#x6240;&#x4EE5;&#x4EE3;&#x7801;&#x4E0D;&#x4F1A;&#x8D70;&#x5230;<code>processDefineProps</code>&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x6267;&#x884C;<code>remove</code>&#x65B9;&#x6CD5;&#x5220;&#x9664;&#x6389;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x5F53;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x65F6;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x4ECE;&#x4EFB;&#x4F55;&#x5730;&#x65B9;<code>import</code>&#x5BFC;&#x5165;<code>defineProps</code>&#xFF0C;&#x5F53;&#x7136;&#x5C31;&#x4F1A;&#x62A5;&#x9519;<code>defineProps is not defined</code>&#x3002;</p>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x56DE;&#x7B54;&#x524D;&#x9762;&#x63D0;&#x7684;&#x4E09;&#x4E2A;&#x95EE;&#x9898;&#x4E86;&#x3002;</p>
<ul>
<li>&#x4E3A;&#x4EC0;&#x4E48;<code>defineProps</code>&#x4E0D;&#x9700;&#x8981;<code>import</code>&#x5BFC;&#x5165;&#xFF1F;</li>
</ul>
<p>&#x56E0;&#x4E3A;&#x5728;&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;&#x4E2D;&#x5982;&#x679C;&#x5F53;&#x524D;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x7684;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x662F;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x4E14;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x662F;<code>defineProps</code>&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x8C03;&#x7528;<code>remove</code>&#x65B9;&#x6CD5;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x7ED9;&#x79FB;&#x9664;&#x6389;&#x3002;&#x65E2;&#x7136;<code>defineProps</code>&#x8BED;&#x53E5;&#x5DF2;&#x7ECF;&#x88AB;&#x79FB;&#x9664;&#x4E86;&#xFF0C;&#x81EA;&#x7136;&#x4E5F;&#x5C31;&#x4E0D;&#x9700;&#x8981;<code>import</code>&#x5BFC;&#x5165;&#x4E86;<code>defineProps</code>&#x4E86;&#x3002;</p>
<ul>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x80FD;&#x5728;&#x975E;<code>setup</code>&#x9876;&#x5C42;&#x4F7F;&#x7528;<code>defineProps</code>&#xFF1F;</li>
</ul>
<p>&#x56E0;&#x4E3A;&#x5728;&#x975E;<code>setup</code>&#x9876;&#x5C42;&#x4F7F;&#x7528;<code>defineProps</code>&#x7684;&#x4EE3;&#x7801;&#x751F;&#x6210;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x540E;&#x8282;&#x70B9;&#x7C7B;&#x578B;&#x5C31;&#x4E0D;&#x662F;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#x7C7B;&#x578B;&#xFF0C;&#x53EA;&#x6709;<code>ExpressionStatement</code>&#x8868;&#x8FBE;&#x5F0F;&#x8BED;&#x53E5;&#x7C7B;&#x578B;&#x624D;&#x4F1A;&#x8D70;&#x5230;<code>processDefineProps</code>&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x5E76;&#x4E14;&#x8C03;&#x7528;<code>remove</code>&#x65B9;&#x6CD5;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x7ED9;&#x79FB;&#x9664;&#x6389;&#x3002;&#x5F53;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x65F6;&#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x4ECE;&#x4EFB;&#x4F55;&#x5730;&#x65B9;<code>import</code>&#x5BFC;&#x5165;<code>defineProps</code>&#xFF0C;&#x5F53;&#x7136;&#x5C31;&#x4F1A;&#x62A5;&#x9519;<code>defineProps is not defined</code>&#x3002;</p>
<ul>
<li><code>defineProps</code>&#x662F;&#x5982;&#x4F55;&#x5C06;&#x58F0;&#x660E;&#x7684; <code>props</code> &#x81EA;&#x52A8;&#x66B4;&#x9732;&#x7ED9;&#x6A21;&#x677F;&#xFF1F;</li>
</ul>
<p>&#x7F16;&#x8BD1;&#x65F6;&#x5728;&#x79FB;&#x9664;&#x6389;<code>defineProps</code>&#x76F8;&#x5173;&#x4EE3;&#x7801;&#x65F6;&#x4F1A;&#x5C06;&#x8C03;&#x7528;<code>defineProps</code>&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;&#x53C2;&#x6570;<code>node</code>&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x5B58;&#x5230;<code>ctx</code>&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x3002;&#x904D;&#x5386;&#x5B8C;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;&#x540E;</code>&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x5B58;&#x7684;&#x53C2;&#x6570;<code>node</code>&#x8282;&#x70B9;&#x4FE1;&#x606F;&#x4E2D;&#x62FF;&#x5230;&#x8C03;&#x7528;<code>defineProps</code>&#x5B8F;&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;<code>props</code>&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#x3002;&#x518D;&#x4F7F;&#x7528;<code>slice</code>&#x65B9;&#x6CD5;&#x5E76;&#x4E14;&#x4F20;&#x5165;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x548C;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&#xFF0C;&#x4ECE;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#x622A;&#x53D6;&#x5230;<code>props</code>&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x7136;&#x540E;&#x5C06;&#x622A;&#x53D6;&#x5230;&#x7684;<code>props</code>&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x63A5;&#x5230;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;<code>vue</code>&#x7EC4;&#x4EF6;&#x5BF9;&#x8C61;&#x4E2D;&#x5C31;&#x6709;&#x4E86;&#x4E00;&#x4E2A;<code>props</code>&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x4E2A;<code>props</code>&#x5C5E;&#x6027;&#x5728;<code>template</code>&#x6A21;&#x7248;&#x4E2D;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c755e007ce8575dcff37fe7a37e11597.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7344927519923011594.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7344927519923011594.html" itemprop="url">在Jetpack Compose中使用状态提升？我提升个P</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-11T15:47:56+08:00">
                2024-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x539F;&#x6587;&#x5730;&#x5740;&#xFF1A;<a href="/external_links/112db7d2b45e69d3d40a3b8c7bd25bb1.html" target="blank" rel="noopener"># &#x5728;Compose&#x4E2D;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x63D0;&#x5347;&#xFF1F;&#x6211;&#x63D0;&#x5347;&#x4E2A;P&#x2026;Provider</a></p>
<h2 id="&#x5199;&#x5728;&#x524D;&#x9762;"><a href="#&#x5199;&#x5728;&#x524D;&#x9762;" class="headerlink" title="&#x5199;&#x5728;&#x524D;&#x9762;"></a>&#x5199;&#x5728;&#x524D;&#x9762;</h2><p>&#x672C;&#x6587;&#x4E2D;&#x63D0;&#x53CA;&#x7684;<code>use</code>&#x5F00;&#x5934;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x90FD;&#x51FA;&#x81EA;&#x4E0E;&#x6211;&#x7684; <a href="/external_links/582b0f220990c518ed24378b2dea1916.html" target="blank" rel="noopener">ComposeHooks</a> &#x9879;&#x76EE;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7CFB;&#x5217; React Hooks &#x98CE;&#x683C;&#x7684;&#x72B6;&#x6001;&#x5C01;&#x88C5;&#x51FD;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x4F60;&#x66F4;&#x597D;&#x7684;&#x4F7F;&#x7528; Compose&#xFF0C;&#x65E0;&#x9700;&#x5173;&#x7CFB;&#x590D;&#x6742;&#x7684;&#x72B6;&#x6001;&#x7BA1;&#x7406;&#xFF0C;&#x4E13;&#x5FC3;&#x4E8E;&#x4E1A;&#x52A1;&#x4E0E;UI&#x7EC4;&#x4EF6;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x7CFB;&#x5217;&#x6587;&#x7AE0;&#x7684;&#x7B2C;&#x5DF2;&#x7BC7;&#xFF0C;&#x5168;&#x90E8;&#x6587;&#x7AE0;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7342793007938371594">&#x5728;Compose&#x4E2D;&#x4F7F;&#x7528;useRequest&#x8F7B;&#x677E;&#x7BA1;&#x7406;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;</a></li>
<li><a href="https://dev.newban.cn/7344927519923011594">&#x5728;Compose&#x4E2D;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x63D0;&#x5347;&#xFF1F;&#x6211;&#x63D0;&#x5347;&#x4E2A;P&#x2026;Provider</a></li>
<li><a href="https://dev.newban.cn/7345396671423250441">&#x5728;Compose&#x4E2D;&#x7236;&#x7EC4;&#x4EF6;&#x5982;&#x4F55;&#x8C03;&#x7528;&#x5B50;&#x7EC4;&#x4EF6;&#x7684;&#x51FD;&#x6570;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7347851786134978610">&#x5728;Compose&#x4E2D;&#x65B9;&#x4FBF;&#x7684;&#x4F7F;&#x7528;MVI&#x601D;&#x60F3;&#xFF1F;&#x8BD5;&#x8BD5;useReducer&#xFF01;</a></li>
</ul>
<h2 id="&#x5173;&#x4E8E;&#x72B6;&#x6001;&#x63D0;&#x5347;"><a href="#&#x5173;&#x4E8E;&#x72B6;&#x6001;&#x63D0;&#x5347;" class="headerlink" title="&#x5173;&#x4E8E;&#x72B6;&#x6001;&#x63D0;&#x5347;"></a>&#x5173;&#x4E8E;&#x72B6;&#x6001;&#x63D0;&#x5347;</h2><p>&#x201D;&#x603B;&#x6240;&#x5468;&#x77E5;&#x201C;&#xFF0C;&#x5728; Compose &#x4E2D;&#x6709;&#x4E2A;&#x601D;&#x60F3;&#x53EB;&#x505A;<strong>&#x72B6;&#x6001;&#x63D0;&#x5347;</strong>&#xFF0C;&#x5728;&#x4E4B;&#x524D;&#x7684;&#x6587;&#x7AE0;<a href="/external_links/0b22caae561fcbfe13695ddc783a32c4.html" target="blank" rel="noopener">Compose&#x5B66;&#x4E60;&#x7B14;&#x8BB0;2 - LaunchedEffect&#x3001;&#x72B6;&#x6001;&#x4E0E; &#x72B6;&#x6001;&#x7BA1;&#x7406;</a>&#x4E2D;&#x6211;&#x4EEC;&#x66FE;&#x63D0;&#x53CA;&#x8FC7;&#x3002;</p>
<p>&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x8BA9;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x201D;&#x65E0;&#x72B6;&#x6001;&#x201C;&#xFF0C;&#x65E0;&#x72B6;&#x6001;&#x7684;&#x4F18;&#x70B9;&#xFF1A;</p>
<ul>
<li>&#x53EF;&#x590D;&#x7528;&#xFF0C;&#x7EC4;&#x4EF6;&#x53EA;&#x8D1F;&#x8D23;&#x7EC4;&#x4EF6;&#x7684;&#x804C;&#x8D23;&#xFF0C;&#x4E0D;&#x6301;&#x6709;&#x6216;&#x8005;&#x5C11;&#x6301;&#x6709;&#x72B6;&#x6001;</li>
<li>&#x53EF;&#x6D4B;&#x8BD5;&#xFF0C;&#x7EC4;&#x4EF6;&#x4E0D;&#x6301;&#x6709;&#x72B6;&#x6001;&#xFF0C;&#x66F4;&#x63A5;&#x8FD1;&#x4E8E;&#x7EAF;&#x51FD;&#x6570;&#xFF0C;&#x76F8;&#x540C;&#x8F93;&#x5165;&#x5FC5;&#x7136;&#x6709;&#x76F8;&#x540C;&#x8F93;&#x51FA;</li>
</ul>
<p>&#x72B6;&#x6001;&#x63D0;&#x5347;&#x7684;&#x60F3;&#x6CD5;&#x5F88;&#x597D;&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x8DF5;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x7F8E;&#x5999;&#x3002;</p>
<h2 id="&#x53EF;&#x80FD;&#x6709;&#x70B9;&#x4E11;&#x964B;&#x7684;&#x72B6;&#x6001;&#x63D0;&#x5347;"><a href="#&#x53EF;&#x80FD;&#x6709;&#x70B9;&#x4E11;&#x964B;&#x7684;&#x72B6;&#x6001;&#x63D0;&#x5347;" class="headerlink" title="&#x53EF;&#x80FD;&#x6709;&#x70B9;&#x4E11;&#x964B;&#x7684;&#x72B6;&#x6001;&#x63D0;&#x5347;"></a>&#x53EF;&#x80FD;&#x6709;&#x70B9;&#x4E11;&#x964B;&#x7684;&#x72B6;&#x6001;&#x63D0;&#x5347;</h2><p>&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x7684;&#x5199;&#x4E00;&#x4E2A; TodoList&#xFF0C;&#x6765;&#x6F14;&#x793A;&#x4E00;&#x4E0B;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun TestStateHoisting() {</span><br><span class="line">    // &#x5728;&#x9876;&#x5C42;&#x7EC4;&#x4EF6;&#x58F0;&#x660E;&#x72B6;&#x6001;&#x4E0E;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x7684;&#x51FD;&#x6570;(&#x79F0;&#x4E4B;&#x4E3A;&#x4E8B;&#x4EF6;)</span><br><span class="line">    val list = useList&lt;Todo&gt;()</span><br><span class="line">    fun addTodo(todo: Todo) {</span><br><span class="line">        list.add(todo)</span><br><span class="line">    }</span><br><span class="line">    fun delTodo(id: String) {</span><br><span class="line">        list.removeIf { it.id == id }</span><br><span class="line">    }</span><br><span class="line">    Surface {</span><br><span class="line">        Column {</span><br><span class="line">            //&#x4E8B;&#x4EF6;&#x4F20;&#x9012;</span><br><span class="line">            Header(::addTodo)</span><br><span class="line">            TodoList(todos = list, ::delTodo)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">data class Todo(val name: String, val id: String)</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun Header(addTodo: (Todo) -&gt; Unit) {</span><br><span class="line">    val (input, setInput) = useState(&quot;&quot;)</span><br><span class="line">    Row {</span><br><span class="line">        OutlinedTextField(</span><br><span class="line">            value = input,</span><br><span class="line">            onValueChange = setInput,</span><br><span class="line">        )</span><br><span class="line">        TButton(text = &quot;add&quot;) {</span><br><span class="line">            addTodo(Todo(input, NanoId.generate()))</span><br><span class="line">            setInput(&quot;&quot;)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun TodoList(todos: List&lt;Todo&gt;, delTodo: (String) -&gt; Unit) {</span><br><span class="line">    Column {</span><br><span class="line">        todos.map {</span><br><span class="line">            TodoItem(item = it, delTodo)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun TodoItem(item: Todo, delTodo: (String) -&gt; Unit) {</span><br><span class="line">    Row(modifier = Modifier.fillMaxWidth()) {</span><br><span class="line">        Text(text = item.name)</span><br><span class="line">        TButton(text = &quot;del&quot;) {</span><br><span class="line">            delTodo(item.id)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun TButton(</span><br><span class="line">    text: String,</span><br><span class="line">    enabled: Boolean = true,</span><br><span class="line">    modifier: Modifier = Modifier,</span><br><span class="line">    onClick: () -&gt; Unit</span><br><span class="line">) {</span><br><span class="line">    Button(onClick = onClick, enabled = enabled, modifier = modifier.padding(PaddingValues(4.dp))) {</span><br><span class="line">        Text(text = text)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x5B8C;&#x6574;&#x7684; &#x201D;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x201C; &#x793A;&#x4F8B;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x6709;&#x4E00;&#x70B9;&#x70B9;&#x4E11;&#x964B;&#x3002;&#x4F8B;&#x5B50;&#x4E2D;&#x8FD9;&#x79CD;&#x7EC4;&#x7EC7;&#x3001;&#x7BA1;&#x7406;&#x72B6;&#x6001;&#x7684;&#x601D;&#x60F3;&#x79F0;&#x4E4B;&#x4E3A;&#xFF1A;<strong>&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;</strong>&#xFF0C;&#x5373;&#x72B6;&#x6001;&#xFF08;&#x6570;&#x636E;&#xFF09;&#x4ECE;&#x7236;&#x7EC4;&#x4EF6;&#x5411;&#x4E0B;&#x6D41;&#x5411;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x6570;&#x636E;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x53EF;&#x4FE1;&#x6E90;&#xFF0C;&#x5C31;&#x662F;&#x6765;&#x81EA;&#x7236;&#x7EC4;&#x4EF6;&#x7684;&#x72B6;&#x6001;&#x3002;&#x5B50;&#x7EC4;&#x4EF6;&#x4ECE;&#x8FC7;&#x5411;&#x4E0A;&#x4F20;&#x9012;&#x4E8B;&#x4EF6;&#xFF08;&#x901A;&#x8FC7;&#x8C03;&#x7528;&#x7531;&#x7236;&#x7EC4;&#x4EF6;&#x4F20;&#x9012;&#x7684;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x7684;&#x51FD;&#x6570;&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#xFF09;&#xFF0C;&#x6765;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x3002;</p>
<p>&#x4F7F;&#x7528;<strong>&#x72B6;&#x6001;&#x63D0;&#x5347;</strong>&#xFF0C;&#x5728;&#x9762;&#x5BF9;&#x4E00;&#x4E9B;&#x590D;&#x6742;&#x573A;&#x666F;&#xFF0C;&#x4F8B;&#x5982;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x5C42;&#x7EA7;&#x7684;&#x7EC4;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x5C06;&#x6240;&#x6709;&#x72B6;&#x6001;&#x63D0;&#x5347;&#x5230;&#x5171;&#x6709;&#x7684;&#x9876;&#x5C42;&#x7EC4;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7; props &#x5728;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x4F20;&#x9012;&#x3002;&#x4E00;&#x6765;&#x4EE3;&#x7801;&#x91CF;&#x4E0A;&#x63D0;&#x5347;&#x5F88;&#x591A;&#xFF0C;&#x4E8C;&#x6765;&#x5982;&#x679C;&#x6D89;&#x53CA;&#x4FEE;&#x6539;&#xFF0C;&#x5C31;&#x4F1A;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x3002;</p>
<p>&#x6709;&#x7684;&#x4E2D;&#x95F4;&#x7EC4;&#x4EF6;&#x53EF;&#x80FD;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x72B6;&#x6001;&#xFF0C;&#x6216;&#x8005;&#x51FD;&#x6570;&#x3002;&#x4F8B;&#x5982; <code>TodoList</code> &#x7EC4;&#x4EF6;&#xFF0C;&#x5728;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x4E2D;&#x5B83;&#x5176;&#x5B9E;&#x5E76;&#x4E0D;&#x5173;&#x5FC3; <code>delTodo</code> &#x51FD;&#x6570;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#xFF0C;&#x5B83;&#x4E5F;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x4F46;&#x662F;&#x4E3A;&#x4E86;&#x4F20;&#x9012;&#x5230;&#x76EE;&#x6807;&#x7EC4;&#x4EF6;&#x8FD8;&#x662F;&#x9700;&#x8981;&#x5728; props &#x4E2D;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#xFF0C;&#x663E;&#x5F97;&#x975E;&#x5E38;&#x7684;&#x7B28;&#x91CD;&#x3002;</p>
<h2 id="&#x4F7F;&#x7528;-useContext-&#x6765;&#x89E3;&#x8026;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x3001;&#x4E8B;&#x4EF6;&#x4F20;&#x9012;"><a href="#&#x4F7F;&#x7528;-useContext-&#x6765;&#x89E3;&#x8026;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x3001;&#x4E8B;&#x4EF6;&#x4F20;&#x9012;" class="headerlink" title="&#x4F7F;&#x7528; useContext &#x6765;&#x89E3;&#x8026;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x3001;&#x4E8B;&#x4EF6;&#x4F20;&#x9012;"></a>&#x4F7F;&#x7528; <code>useContext</code> &#x6765;&#x89E3;&#x8026;&#x7EC4;&#x4EF6;&#x4E4B;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x3001;&#x4E8B;&#x4EF6;&#x4F20;&#x9012;</h2><p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x6211;&#x4EEC;&#x53EA;&#x4F20;&#x9012;&#x4E86;&#x4E24;&#x5C42;&#xFF0C;Root -&gt; TodoList -&gt; TodoItem&#xFF0C;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x53EF;&#x80FD;&#x4F1A;&#x5B58;&#x5728;&#x66F4;&#x591A;&#x7684;&#x72B6;&#x6001;&#x4F20;&#x9012;&#x5C42;&#x7EA7;&#xFF0C;&#x8FD8;&#x7528;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x663E;&#x7136;&#x6709;&#x4E9B;&#x7B28;&#x62D9;&#x4E86;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#x4E48;&#xFF1F;&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ViewModel&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x6301;&#x6709;&#x72B6;&#x6001;&#x3001;&#x6539;&#x53D8;&#x72B6;&#x6001;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x90FD;&#x5F88;&#x597D;&#xFF0C;&#x5F88;&#x7B26;&#x5408;&#x5F00;&#x53D1; Android &#x7684;&#x65E2;&#x5F80;&#x8DEF;&#x7EBF;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x8FD8;&#x53EF;&#x4EE5;&#x8BD5;&#x4E00;&#x8BD5;&#x66F4;&#x597D;&#x73A9;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;<a href="/external_links/5deda0a62b4a277ffced2d3e371ba146.html" target="blank" rel="noopener">junerver</a>/<a href="/external_links/582b0f220990c518ed24378b2dea1916.html" target="blank" rel="noopener">ComposeHooks</a> &#x4E2D;&#x7684; <code>useContext</code> &#x51FD;&#x6570;&#xFF0C;&#x5728;&#x65E0;&#x9700;&#x521B;&#x5EFA; vm &#x6587;&#x4EF6;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x66F4;&#x51FD;&#x6570;&#x5F0F;&#x7684;&#x5904;&#x7406;&#x72B6;&#x6001;&#x3002;</p>
<h3 id="&#x6539;&#x9020;&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;"><a href="#&#x6539;&#x9020;&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;" class="headerlink" title="&#x6539;&#x9020;&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;"></a>&#x6539;&#x9020;&#x7B2C;&#x4E00;&#x6B65;&#xFF1A;&#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;</h3><p>&#x9996;&#x5148;&#x4F7F;&#x7528; <code>createContext</code> &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#xFF0C;&#x540C;&#x65F6;&#x4F20;&#x5165;&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;val TodoContext = createContext(tuple(</span><br><span class="line">    emptyList&lt;Todo&gt;(), // &#x5BF9;&#x5E94;list&#x72B6;&#x6001;</span><br><span class="line">    { _: Todo -&gt; }, // &#x5BF9;&#x5E94; addTodo&#x51FD;&#x6570; </span><br><span class="line">    { _: String -&gt; } // &#x5BF9;&#x5E94; delTodo&#x51FD;&#x6570;</span><br><span class="line">))</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x4F20;&#x5165;&#x7684;&#x90FD;&#x662F;&#x7A7A;&#x503C;&#x3001;&#x7A7A;&#x51FD;&#x6570;&#xFF0C;tuple&#x51FD;&#x6570;&#x662F;&#x6211;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x5FEB;&#x901F;&#x521B;&#x5EFA; <code>Triple</code> &#x7684;&#x51FD;&#x6570;&#x3002;</p>
<h3 id="&#x6539;&#x9020;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x4F7F;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x7684;-Provider-&#x7EC4;&#x4EF6;"><a href="#&#x6539;&#x9020;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x4F7F;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x7684;-Provider-&#x7EC4;&#x4EF6;" class="headerlink" title="&#x6539;&#x9020;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x4F7F;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x7684; Provider &#x7EC4;&#x4EF6;"></a>&#x6539;&#x9020;&#x7B2C;&#x4E8C;&#x6B65;&#xFF1A;&#x4F7F;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x7684; <code>Provider</code> &#x7EC4;&#x4EF6;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun TestStateHoisting() {</span><br><span class="line">    val list = useList&lt;Todo&gt;()</span><br><span class="line">    fun addTodo(todo: Todo) {</span><br><span class="line">        list.add(todo)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fun delTodo(id: String) {</span><br><span class="line">        list.removeIf { it.id == id }</span><br><span class="line">    }</span><br><span class="line">    // &#x5728;&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#x4E4B;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x7EC4;&#x4EF6;&#x90FD;&#x80FD;&#x4F7F;&#x7528;&#x6211;&#x4EEC;&#x66B4;&#x9732;&#x51FA;&#x7684;&#x8FD9;&#x4E09;&#x4E2A;&#x5185;&#x5BB9;</span><br><span class="line">    TodoContext.Provider(</span><br><span class="line">        value = tuple(</span><br><span class="line">            list,</span><br><span class="line">            ::addTodo,</span><br><span class="line">            ::delTodo</span><br><span class="line">        )</span><br><span class="line">    ) {</span><br><span class="line">        Surface {</span><br><span class="line">            Column {</span><br><span class="line">                // Header&#x3001;TodoList &#x90FD;&#x6539;&#x9020;&#x6210;&#x65E0;&#x53C2;&#x7EC4;&#x4EF6;</span><br><span class="line">                Header()</span><br><span class="line">                TodoList()</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x6539;&#x9020;&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6539;&#x9020;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;-useContext-&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x7684;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;"><a href="#&#x6539;&#x9020;&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6539;&#x9020;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528;-useContext-&#x51FD;&#x6570;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x7684;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;" class="headerlink" title="&#x6539;&#x9020;&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6539;&#x9020;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528; useContext &#x51FD;&#x6570;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x7684;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;"></a>&#x6539;&#x9020;&#x7B2C;&#x4E09;&#x6B65;&#xFF1A;&#x6539;&#x9020;&#x5B50;&#x7EC4;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528; <code>useContext</code> &#x51FD;&#x6570;&#x83B7;&#x53D6;&#x9700;&#x8981;&#x7684;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;@Composable</span><br><span class="line">fun Header() {</span><br><span class="line">    // &#x4F20;&#x5165;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x4F7F;&#x7528;&#x89E3;&#x6784;&#x58F0;&#x660E;&#x62FF;&#x5230;&#x5BF9;&#x5E94;&#x987A;&#x5E8F;&#x7684;&#x51FD;&#x6570;</span><br><span class="line">    val (_, addTodo) = useContext(context = TodoContext) </span><br><span class="line">    val (input, setInput) = useState(&quot;&quot;)</span><br><span class="line">    Row {</span><br><span class="line">        OutlinedTextField(</span><br><span class="line">            value = input,</span><br><span class="line">            onValueChange = setInput,</span><br><span class="line">        )</span><br><span class="line">        TButton(text = &quot;add&quot;) {</span><br><span class="line">            addTodo(Todo(input, NanoId.generate()))</span><br><span class="line">            setInput(&quot;&quot;)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun TodoList() {</span><br><span class="line">    // &#x62FF;&#x5230;&#x7684;todos&#x672C;&#x8EAB;&#x5C31;&#x662F;&#x72B6;&#x6001;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;</span><br><span class="line">    val (todos) = useContext(context = TodoContext)</span><br><span class="line">    Column {</span><br><span class="line">        todos.map {</span><br><span class="line">            TodoItem(item = it)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Composable</span><br><span class="line">fun TodoItem(item: Todo) {</span><br><span class="line">    // &#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x89E3;&#x6784;&#x58F0;&#x660E;&#x5BF9;&#x8C61;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;`_` &#x4F5C;&#x4E3A;&#x5360;&#x4F4D;&#x7B26;</span><br><span class="line">    val (_, _, delTodo) = useContext(context = TodoContext)</span><br><span class="line">    Row(modifier = Modifier.fillMaxWidth()) {</span><br><span class="line">        Text(text = item.name)</span><br><span class="line">        TButton(text = &quot;del&quot;) {</span><br><span class="line">            delTodo(item.id)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x5B8C;&#x6210;&#xFF1A;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x4E92;&#x76F8;&#x4E4B;&#x95F4;&#x4E0D;&#x518D;&#x8026;&#x5408;&#xFF0C;&#x65E0;&#x9700;&#x4F20;&#x9012;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;"><a href="#&#x5B8C;&#x6210;&#xFF1A;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x4E92;&#x76F8;&#x4E4B;&#x95F4;&#x4E0D;&#x518D;&#x8026;&#x5408;&#xFF0C;&#x65E0;&#x9700;&#x4F20;&#x9012;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;" class="headerlink" title="&#x5B8C;&#x6210;&#xFF1A;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x4E92;&#x76F8;&#x4E4B;&#x95F4;&#x4E0D;&#x518D;&#x8026;&#x5408;&#xFF0C;&#x65E0;&#x9700;&#x4F20;&#x9012;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;"></a>&#x5B8C;&#x6210;&#xFF1A;&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x7EC4;&#x4EF6;&#x4E92;&#x76F8;&#x4E4B;&#x95F4;&#x4E0D;&#x518D;&#x8026;&#x5408;&#xFF0C;&#x65E0;&#x9700;&#x4F20;&#x9012;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;</h3><p>&#x5BF9;&#x6BD4;&#x6539;&#x9020;&#x524D;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x4E5F;&#x4E0D;&#x7528;&#x5173;&#x5FC3;&#x72B6;&#x6001;&#x7684;&#x4F20;&#x9012;&#xFF0C;&#x540E;&#x7EED;&#x4EE3;&#x7801;&#x66F4;&#x65B0;&#x4E5F;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x7275;&#x4E00;&#x53D1;&#x800C;&#x52A8;&#x5168;&#x8EAB;&#x3002;</p>
<p>&#x603B;&#x7ED3;&#xFF1A;</p>
<ol>
<li>&#x4F7F;&#x7528; <code>createContex</code> &#x521B;&#x5EFA;&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;</li>
<li>&#x4F7F;&#x7528; <code>&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;.Provider</code> &#x4F5C;&#x4E3A;&#x6839;&#x7EC4;&#x4EF6;</li>
<li>&#x5728;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x72B6;&#x6001;&#x3001;&#x51FD;&#x6570;&#x7684;&#x7EC4;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528; <code>useContext(&#x4E0A;&#x4E0B;&#x6587;&#x5BF9;&#x8C61;)</code>&#x83B7;&#x53D6;</li>
</ol>
<h2 id="&#x63A2;&#x7D22;&#x66F4;&#x591A;"><a href="#&#x63A2;&#x7D22;&#x66F4;&#x591A;" class="headerlink" title="&#x63A2;&#x7D22;&#x66F4;&#x591A;"></a>&#x63A2;&#x7D22;&#x66F4;&#x591A;</h2><p>&#x9879;&#x76EE;&#x5F00;&#x6E90;&#x5730;&#x5740;&#xFF1A;<a href="/external_links/5deda0a62b4a277ffced2d3e371ba146.html" target="blank" rel="noopener">junerver</a>/<a href="/external_links/582b0f220990c518ed24378b2dea1916.html" target="blank" rel="noopener">ComposeHooks</a></p>
<p>MavenCentral&#xFF1A;<a href="/external_links/b99e2850bd754b7b820a442f24711ea1.html" target="blank" rel="noopener">hooks</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;implementation(&quot;xyz.junerver.compose:hooks:1.0.3&quot;)</span><br></pre></td></tr></table></figure>

<p>&#x6B22;&#x8FCE;&#x4F7F;&#x7528;&#x3001;&#x52D8;&#x8BEF;&#x3001;pr&#x3001;star&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/c7035944c083c4b9661a50b48fe2c55e.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7344742642151243814.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7344742642151243814.html" itemprop="url">哈希思想在算法中的实践 一、引言 二、什么是哈希思想 三、删</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-11T15:17:09+08:00">
                2024-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x3010;Abstract&#x3011;In order to improve the efficiency of the algorithm, the hash idea is a very useful method in the practice of the algorithm. The reasonable use of hash idea to solve the algorithm problem can effectively help us solve the algorithm problem, especially some problems are very suitable for using hash idea to solve. This article will use some examples on LeetCode to explain and illustrate some practical cases of hashing ideas in algorithm cases.</p>
<p>&#x3010;&#x6458;&#x8981;&#x3011;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x7B97;&#x6CD5;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x662F;&#x5728;&#x7B97;&#x6CD5;&#x5B9E;&#x8DF5;&#x4E2D;&#x5F88;&#x6709;&#x7528;&#x7684;&#x7684;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x5408;&#x7406;&#x8FD0;&#x7528;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x6765;&#x89E3;&#x51B3;&#x7B97;&#x6CD5;&#x95EE;&#x9898;&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x7684;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x89E3;&#x51B3;&#x7B97;&#x6CD5;&#x95EE;&#x9898;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x6709;&#x4E9B;&#x95EE;&#x9898;&#x975E;&#x5E38;&#x9002;&#x5408;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x6765;&#x89E3;&#x51B3;&#x3002;&#x672C;&#x6587;&#x5C06;&#x501F;&#x52A9;LeetCode&#x4E0A;&#x7684;&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;&#xFF0C;&#x6765;&#x8BB2;&#x89E3;&#x548C;&#x8BF4;&#x660E;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x5728;&#x7B97;&#x6CD5;&#x6848;&#x4F8B;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x5B9E;&#x8DF5;&#x6848;&#x4F8B;&#x3002;</p>
<p>&#x3010;&#x5173;&#x952E;&#x8BCD;&#x3011; &#x7B97;&#x6CD5;&#x601D;&#x60F3; LeetCode &#x7B97;&#x6CD5;&#x6548;&#x7387; &#x7B97;&#x6CD5;</p>
<h1 id="&#x4E00;&#x3001;&#x5F15;&#x8A00;"><a href="#&#x4E00;&#x3001;&#x5F15;&#x8A00;" class="headerlink" title="&#x4E00;&#x3001;&#x5F15;&#x8A00;"></a>&#x4E00;&#x3001;&#x5F15;&#x8A00;</h1><p>&#x5728;&#x65E5;&#x5E38;&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x7F16;&#x7A0B;&#x548C;&#x5B9E;&#x9645;&#x7684;&#x5DE5;&#x4F5C;&#x4E2D;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x9700;&#x8981;&#x8BBE;&#x8BA1;&#x4E00;&#x4E9B;&#x7B97;&#x6CD5;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x54C8;&#x5E0C;&#x8868;&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x5E38;&#x89C1;&#x7684;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#xFF0C;&#x6709;&#x5F88;&#x5927;&#x7684;&#x7528;&#x5904;&#xFF0C;&#x5408;&#x7406;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x7684;&#x5E2E;&#x52A9;&#x5230;&#x6211;&#x4EEC;&#x6765;&#x8BBE;&#x8BA1;&#x66F4;&#x6709;&#x6548;&#x7387;&#x7684;&#x7B97;&#x6CD5;&#x3002;&#x4E00;&#x822C;&#x5730;&#xFF0C;&#x5728;&#x5F88;&#x591A;&#x7B97;&#x6CD5;&#x8BBE;&#x8BA1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90FD;&#x4F1A;&#x9047;&#x5230;&#x52A8;&#x6001;&#x96C6;&#x5408;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x652F;&#x6301;&#x63D2;&#x5165;&#x3001;&#x67E5;&#x627E;&#x3001;&#x5220;&#x9664;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x6784;&#x5EFA;&#xFF0C;&#x4F1A;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x6709;&#x6548;&#x7684;&#x601D;&#x8DEF;&#x3002;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x624B;&#x6BB5;&#xFF0C;&#x6765;&#x89E3;&#x51B3;&#x4E00;&#x4E9B;&#x5B9E;&#x9645;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5373;&#x672C;&#x6587;&#x4E3B;&#x8981;&#x901A;&#x8FC7;&#x4E00;&#x4E9B;&#x5B9E;&#x8DF5;&#x4F8B;&#x5B50;&#x6765;&#x8BD5;&#x56FE;&#x8BB2;&#x89E3;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x7684;&#x8FD0;&#x7528;&#x3002;</p>
<h1 id="&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x54C8;&#x5E0C;&#x601D;&#x60F3;"><a href="#&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x54C8;&#x5E0C;&#x601D;&#x60F3;" class="headerlink" title="&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x54C8;&#x5E0C;&#x601D;&#x60F3;"></a>&#x4E8C;&#x3001;&#x4EC0;&#x4E48;&#x662F;&#x54C8;&#x5E0C;&#x601D;&#x60F3;</h1><p>&#x54C8;&#x5E0C;&#x8868;&#x4E5F;&#x53EB;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x7531;&#x4E09;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x4E5F;&#x53EB;&#x76F4;&#x63A5;&#x5BFB;&#x5740;&#x8868;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x6570;&#x7EC4;&#xFF0C;&#x4E5F;&#x53EB;&#x54C8;&#x5E0C;&#x8868;&#x6216;&#x8005;&#x6563;&#x5217;&#x8868;&#xFF0C;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x53EB;&#x6563;&#x5217;&#x51FD;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5173;&#x952E;&#x5B57;&#x901A;&#x8FC7;&#x6563;&#x5217;&#x51FD;&#x6570;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x67E5;&#x627E;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x6837;&#x7406;&#x60F3;&#x7684;&#x60C5;&#x51B5;&#x5C31;&#x662F;&#x67E5;&#x627E;&#x65F6;&#x95F4;O(1)&#xFF0C;&#x6700;&#x5DEE;&#x7684;&#x60C5;&#x51B5;&#x4F1A;&#x51FA;&#x73B0;&#x6574;&#x4E2A;&#x5217;&#x8868;&#x5168;&#x90FD;&#x67E5;&#x627E;&#x4E00;&#x904D;&#xFF0C;&#x65F6;&#x95F4;&#x662F;O(n)&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x79CD;&#x6700;&#x5DEE;&#x7684;&#x60C5;&#x51B5;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#xFF0C;&#x56E0;&#x4E3A;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x5173;&#x952E;&#x5B57;&#x5728;&#x6784;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#x4E00;&#x822C;&#x5C3D;&#x91CF;&#x9009;&#x62E9;&#x5177;&#x6709;&#x552F;&#x4E00;&#x6027;&#x7684;&#x503C;&#xFF0C;&#x6BD4;&#x5982;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x6563;&#x5217;&#x7B97;&#x6CD5;&#x8BA1;&#x7B97;&#x51FA;&#x6765;&#x7684;&#x54C8;&#x5E0C;&#x503C;&#x3002;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x7B80;&#x5355;&#x603B;&#x7ED3;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x6765;&#x4E0E;&#x6570;&#x7EC4;&#x90E8;&#x5206;&#x76F8;&#x5173;&#x8054;&#x5C31;&#x53EF;&#x4EE5;&#x67E5;&#x627E;&#x6570;&#x636E;&#x4E86;&#x3002;</p>
<p>&#x5F53;&#x5173;&#x952E;&#x5B57;&#x6570;&#x91CF;&#x6BD4;&#x8F83;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F4;&#x63A5;&#x5BFB;&#x5740;&#x6CD5;&#xFF0C;&#x628A;&#x5168;&#x90E8;&#x7684;&#x5173;&#x952E;&#x5B57;&#x90FD;&#x6784;&#x5EFA;&#x51FA;&#x6765;&#xFF0C;&#x7136;&#x540E;&#x5EFA;&#x7ACB;&#x67E5;&#x627E;&#x5173;&#x7CFB;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x5F53;&#x5173;&#x952E;&#x5B57;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#xFF0C;&#x6309;&#x7167;&#x9700;&#x8981;&#xFF0C;&#x52A8;&#x6001;&#x6784;&#x5EFA;&#x76F8;&#x5173;&#x7684;&#x5173;&#x952E;&#x5B57;&#x96C6;&#x5408;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5EFA;&#x7ACB;&#x589E;&#x5220;&#x6539;&#x67E5;&#x7684;&#x5173;&#x7CFB;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x6784;&#x5EFA;&#x5B8C;&#x5168;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x9759;&#x6001;&#x5B58;&#x50A8;&#x5168;&#x90E8;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x5B8C;&#x5168;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x6700;&#x574F;&#x60C5;&#x51B5;&#x4E0B;&#x5B8C;&#x6210;&#x5173;&#x952E;&#x5B57;&#x67E5;&#x627E;&#xFF0C;&#x8FD9;&#x79CD;&#x5728;&#x6709;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4E5F;&#x662F;&#x5408;&#x9002;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x5177;&#x4F53;&#x91C7;&#x7528;&#x4F55;&#x79CD;&#x505A;&#x6CD5;&#xFF0C;&#x89C6;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x800C;&#x5B9A;&#x3002;</p>
<p>&#x5F53;&#x5173;&#x952E;&#x5B57;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x8986;&#x76D6;&#x5168;&#x90E8;&#x7684;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x5173;&#x952E;&#x5B57;&#x51B2;&#x7A81;&#xFF0C;&#x5BFC;&#x81F4;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x5BF9;&#x5E94;&#x591A;&#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x91C7;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x5BF9;&#x4E8E;&#x51B2;&#x7A81;&#x7684;&#x6570;&#x636E;&#x91C7;&#x7528;&#x94FE;&#x8868;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6216;&#x8005;&#x7EA2;&#x9ED1;&#x6811;&#x6765;&#x5EFA;&#x7ACB;&#x67E5;&#x627E;&#x5173;&#x7CFB;&#xFF0C;&#x901A;&#x8FC7;&#x4E00;&#x4E00;&#x67E5;&#x627E;&#x6765;&#x5BFB;&#x627E;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x597D;&#x5904;&#x662F;&#x57FA;&#x672C;&#x53EF;&#x4EE5;&#x8986;&#x76D6;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x574F;&#x5904;&#x662F;&#xFF0C;&#x5728;&#x51B2;&#x7A81;&#x7684;&#x5173;&#x952E;&#x5B57;&#x4E0A;&#x4F1A;&#x5B58;&#x5728;&#x6570;&#x636E;&#x5806;&#x79EF;&#x73B0;&#x8C61;&#xFF0C;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x628A;&#x51B2;&#x7A81;&#x7684;&#x6570;&#x636E;&#x5168;&#x90E8;&#x67E5;&#x627E;&#x4E00;&#x904D;&#x624D;&#x53EF;&#x4EE5;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x9700;&#x8981;&#x53E6;&#x5916;&#x5F00;&#x8F9F;&#x4E00;&#x4E2A;&#x7A7A;&#x95F4;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x589E;&#x52A0;&#x7A7A;&#x95F4;&#x6D88;&#x8017;&#x3002;&#x5F53;&#x7136;&#x8FD8;&#x6709;&#x522B;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#xFF0C;&#x5F53;&#x5173;&#x952E;&#x5B57;&#x51B2;&#x7A81;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F7F;&#x7528;&#x5728;&#x6563;&#x5217;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;&#x8BE5;&#x5173;&#x952E;&#x5B57;&#x518D;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x51B2;&#x7A81;&#x5C31;&#x91CD;&#x590D;&#x518D;&#x7528;&#x65B0;&#x751F;&#x6210;&#x7684;&#x8FD9;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x76F4;&#x5230;&#x4E0D;&#x91CD;&#x590D;&#x4E3A;&#x6B62;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x4F18;&#x70B9;&#x662F;&#xFF0C;&#x4FDD;&#x8BC1;&#x53EF;&#x4EE5;&#x653E;&#x4E0B;&#x5168;&#x90E8;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x8282;&#x7701;&#x7A7A;&#x95F4;&#xFF0C;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x4E0D;&#x80FD;&#x771F;&#x6B63;&#x5730;&#x5220;&#x9664;&#x6570;&#x636E;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x9762;&#x65B0;&#x751F;&#x6210;&#x7684;&#x5173;&#x952E;&#x5B57;&#x662F;&#x53EF;&#x80FD;&#x548C;&#x4E4B;&#x524D;&#x5220;&#x9664;&#x7684;&#x5173;&#x952E;&#x5B57;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x53EA;&#x80FD;&#x6807;&#x8BB0;&#x4E00;&#x4E0B;&#x5DF2;&#x7ECF;&#x5220;&#x9664;&#x4E86;&#x3002;&#x5728;&#x5F00;&#x653E;&#x5BFB;&#x5740;&#x6CD5;&#x4E2D;&#x91CD;&#x65B0;&#x751F;&#x6210;&#x51B2;&#x7A81;&#x7684;&#x5173;&#x952E;&#x5B57;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD8;&#x6709;&#x94FE;&#x8868;&#x6CD5;&#xFF0C;&#x8FD8;&#x6709;&#x6BD4;&#x5982;&#x7EBF;&#x6027;&#x63A2;&#x67E5;&#x6CD5;&#xFF0C;&#x76F4;&#x63A5;&#x4F9D;&#x6B21;&#x63A2;&#x67E5;&#x4E0B;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#xFF0C;&#x8FD8;&#x6709;&#x6BD4;&#x5982;&#x4E8C;&#x6B21;&#x63A2;&#x67E5;&#x3001;&#x53CC;&#x91CD;&#x6563;&#x5217;&#x3001;&#x5EFA;&#x7ACB;&#x516C;&#x5171;&#x6EA2;&#x51FA;&#x533A;&#x7B49;&#x7B49;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#x968F;&#x7740;&#x54C8;&#x5E0C;&#x8868;&#x6570;&#x636E;&#x7684;&#x589E;&#x52A0;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x4E5F;&#x53EB;&#x88C5;&#x8F7D;&#x56E0;&#x5B50;&#x6765;&#x8868;&#x793A;&#x5F53;&#x524D;&#x6570;&#x636E;&#x7684;&#x586B;&#x6EE1;&#x7A0B;&#x5EA6;&#xFF0C;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x7684;&#x8BA1;&#x7B97;&#x65B9;&#x6CD5;&#x662F;&#x88C5;&#x5165;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#x7684;&#x5173;&#x952E;&#x5B57;&#x4E2A;&#x6570;&#x4E0E;&#x5F53;&#x524D;&#x54C8;&#x5E0C;&#x8868;&#x603B;&#x7684;&#x957F;&#x5EA6;&#x7684;&#x6BD4;&#x503C;&#xFF0C;&#x5F53;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x8D8A;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x586B;&#x5145;&#x7684;&#x6570;&#x636E;&#x8D8A;&#x591A;&#xFF0C;&#x7A7A;&#x95F4;&#x5229;&#x7528;&#x7387;&#x8D8A;&#x9AD8;&#xFF0C;&#x4F46;&#x662F;&#x5173;&#x952E;&#x5B57;&#x51B2;&#x7A81;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x5C31;&#x4F1A;&#x589E;&#x52A0;&#xFF0C;&#x67E5;&#x627E;&#x6570;&#x636E;&#x7684;&#x6210;&#x672C;&#x53EF;&#x80FD;&#x5C31;&#x4F1A;&#x589E;&#x52A0;&#x3002;&#x5F53;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x8D8A;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x586B;&#x5145;&#x7684;&#x6570;&#x636E;&#x8D8A;&#x5C11;&#xFF0C;&#x7A7A;&#x95F4;&#x5229;&#x7528;&#x7387;&#x5C31;&#x8D8A;&#x4F4E;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x51B2;&#x7A81;&#x7684;&#x6982;&#x7387;&#x5C31;&#x4F1A;&#x51CF;&#x5C11;&#xFF0C;&#x67E5;&#x627E;&#x6570;&#x636E;&#x7684;&#x6210;&#x672C;&#x8D8A;&#x4F4E;&#x3002;&#x5F80;&#x5F80;&#x5728;&#x8BBE;&#x7F6E;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x60C5;&#x51B5;&#x505A;&#x4E00;&#x4E9B;&#x53D6;&#x820D;&#x548C;&#x5E73;&#x8861;&#x6765;&#x51B2;&#x7A81;&#x7684;&#x6982;&#x7387;&#x548C;&#x7A7A;&#x95F4;&#x5229;&#x7528;&#x7387;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x6765;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x589E;&#x52A0;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x8FD8;&#x662F;&#x4EC0;&#x4E48;&#x522B;&#x7684;&#x5904;&#x7406;&#x3002;</p>
<p>&#x6587;&#x672C;&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x90FD;&#x662F;&#x4F7F;&#x7528;Java&#x5B9E;&#x73B0;&#x3002;</p>
<h1 id="&#x4E09;&#x3001;&#x5220;&#x9664;&#x5B57;&#x7B26;&#x4F7F;&#x9891;&#x7387;&#x76F8;&#x540C;"><a href="#&#x4E09;&#x3001;&#x5220;&#x9664;&#x5B57;&#x7B26;&#x4F7F;&#x9891;&#x7387;&#x76F8;&#x540C;" class="headerlink" title="&#x4E09;&#x3001;&#x5220;&#x9664;&#x5B57;&#x7B26;&#x4F7F;&#x9891;&#x7387;&#x76F8;&#x540C;"></a>&#x4E09;&#x3001;&#x5220;&#x9664;&#x5B57;&#x7B26;&#x4F7F;&#x9891;&#x7387;&#x76F8;&#x540C;</h1><p>&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;</p>
<blockquote>
<p>&#x7ED9;&#x4F60;&#x4E00;&#x4E2A;&#x4E0B;&#x6807;&#x4ECE;0&#x5F00;&#x59CB;&#x7684;&#x5B57;&#x7B26;&#x4E32;word&#xFF0C;&#x5B57;&#x7B26;&#x4E32;&#x53EA;&#x5305;&#x542B;&#x5C0F;&#x5199;&#x82F1;&#x6587;&#x5B57;&#x6BCD;&#x3002;&#x4F60;&#x9700;&#x8981;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x4E0B;&#x6807;&#x5E76;&#x5220;&#x9664;&#x4E0B;&#x6807;&#x5904;&#x7684;&#x5B57;&#x7B26;&#xFF0C;&#x4F7F;&#x5F97;word&#x4E2D;&#x5269;&#x4F59;&#x6BCF;&#x4E2A;&#x5B57;&#x6BCD;&#x51FA;&#x73B0;&#x9891;&#x7387;&#x76F8;&#x540C;&#x3002;&#x5982;&#x679C;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x540E;&#xFF0C;&#x5E76;&#x4E14;&#x6070;&#x597D;&#x53EA;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#xFF0C;word&#x4E2D;&#x5269;&#x4F59;&#x6240;&#x6709;&#x5B57;&#x6BCD;&#x7684;&#x51FA;&#x73B0;&#x9891;&#x7387;&#x90FD;&#x76F8;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x8FD4;&#x56DE;true&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;false&#x3002;&#x6BD4;&#x5982;&#x8F93;&#x5165;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x662F;<code>aaccc</code>&#xFF0C;&#x2019;c&#x2019;&#x7684;&#x6570;&#x91CF;&#x662F;3&#xFF0C;&#x6570;&#x91CF;&#x51CF;1&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8BA9;&#x2019;a&#x2019;&#x548C;&#x2019;c&#x2019;&#x7684;&#x6570;&#x91CF;&#x4E00;&#x6837;&#xFF0C;&#x6240;&#x4EE5;&#x8FD4;&#x56DE;tue&#x3002;<a href="#user-content-fn-1">1</a></p>
</blockquote>
<p>&#x9996;&#x5148;&#x5206;&#x6790;&#x4E0B;&#x8BE5;&#x95EE;&#x9898;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x904D;&#x5386;&#x4E00;&#x904D;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x9996;&#x5148;&#x7EDF;&#x8BA1;&#x51FA;&#x6240;&#x6709;&#x5B57;&#x6BCD;&#x7684;&#x51FA;&#x73B0;&#x9891;&#x7387;&#x3002;&#x82F1;&#x6587;&#x5B57;&#x6BCD;&#x6709;26&#xFF0C;&#x4E14;&#x4E0D;&#x8003;&#x8651;&#x5927;&#x5C0F;&#x5199;&#xFF0C;&#x53EA;&#x6709;&#x5C0F;&#x5199;&#x5B57;&#x6BCD;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x6784;&#x5EFA;&#x4E00;&#x4E2A;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x8BB0;&#x5F55;&#x5B57;&#x6BCD;&#x7684;&#x51FA;&#x73B0;&#x9891;&#x7387;&#xFF0C;&#x8868;&#x7684;&#x957F;&#x5EA6;&#x6700;&#x5927;&#x503C;&#x4E5F;&#x5C31;&#x662F;26&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x6570;&#x91CF;&#x5F88;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x9996;&#x5148;&#x521D;&#x59CB;&#x5316;&#x51FA;&#x4E00;&#x4E2A;26&#x957F;&#x5EA6;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53BB;&#x904D;&#x5386;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6309;&#x7167;26&#x4E2A;&#x5B57;&#x6BCD;&#x7684;&#x987A;&#x5E8F;&#xFF0C;&#x6765;&#x8BB0;&#x5F55;&#x9891;&#x7387;&#x6570;&#x636E;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x5B9E;&#x8FD9;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x5B57;&#x6BCD;&#x548C;&#x9891;&#x7387;&#x4E00;&#x4E00;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#x7684;&#x5B57;&#x5178;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x8282;&#x7EA6;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x6765;&#x907F;&#x514D;&#x4FDD;&#x5B58;&#x6240;&#x6709;&#x7684;&#x5B57;&#x6BCD;&#xFF0C;&#x56E0;&#x4E3A;&#x6570;&#x7EC4;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x5B57;&#x6BCD;&#x987A;&#x5E8F;&#x76F4;&#x63A5;&#x53BB;&#x8BFB;&#x53D6;&#xFF0C;&#x6240;&#x4EE5;&#x8FD8;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x63D2;&#x5165;&#x65F6;&#x7684;&#x65F6;&#x95F4;&#x6D88;&#x8017;&#x3002;</p>
<p>&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x6765;&#x5904;&#x7406;&#x4E0A;&#x4E00;&#x6B65;&#x5F97;&#x5230;&#x7684;&#x6570;&#x7EC4;&#x4E86;&#x3002;&#x9996;&#x5148;&#x5982;&#x679C;&#x5F97;&#x5230;&#x7684;&#x6240;&#x6709;&#x5B57;&#x6BCD;&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#x5C31;&#x662F;1&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x6240;&#x6709;&#x7684;&#x5B57;&#x6BCD;&#x90FD;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x4E3A;true&#xFF0C;&#x56E0;&#x4E3A;&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x6570;&#x91CF;&#x51CF;1&#x4E4B;&#x540E;&#x90FD;&#x53EF;&#x4EE5;&#x7B26;&#x5408;&#x6761;&#x4EF6;&#x3002;&#x7136;&#x540E;&#x904D;&#x5386;&#x4E00;&#x904D;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x6570;&#x91CF;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF08;&#x4E0B;&#x65B9;&#x4EE3;&#x7801;&#x4E2D;&#x7684;max&#xFF0C;&#x4EE3;&#x8868;&#x51FA;&#x73B0;&#x6570;&#x91CF;&#x6700;&#x591A;&#x7684;&#x6B21;&#x6570;&#x662F;&#x591A;&#x5C11;&#xFF09;&#x548C;&#x6700;&#x5C0F;&#x503C;&#xFF08;&#x4E0B;&#x65B9;&#x4EE3;&#x7801;&#x4E2D;&#x7684;min&#xFF0C;&#x4EE3;&#x8868;&#x51FA;&#x73B0;&#x6570;&#x91CF;&#x6700;&#x5C11;&#x7684;&#x6B21;&#x6570;&#x662F;&#x591A;&#x5C11;&#xFF09;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x6700;&#x5927;&#x6570;&#x91CF;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#xFF08;&#x4E0B;&#x65B9;&#x4EE3;&#x7801;&#x4E2D;&#x7684;countMax&#xFF0C;&#x4EE3;&#x8868;&#x6709;&#x591A;&#x5C11;&#x79CD;&#x5B57;&#x6BCD;&#x662F;&#x8FD9;&#x4E2A;&#x6700;&#x5927;&#x6570;&#x91CF;max&#x7684;&#xFF09;&#xFF0C;&#x548C;&#x6700;&#x5C0F;&#x6570;&#x91CF;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#xFF08;&#x4E0B;&#x65B9;&#x4EE3;&#x7801;&#x4E2D;&#x7684;countMin&#xFF0C;&#x4EE3;&#x8868;&#x6709;&#x591A;&#x5C11;&#x79CD;&#x5B57;&#x6BCD;&#x662F;&#x8FD9;&#x4E2A;&#x6700;&#x5C0F;&#x6570;&#x91CF;min&#x7684;&#xFF09;&#x3002;&#x5982;&#x679C;&#x5224;&#x65AD;&#x6700;&#x5927;&#x6570;&#x91CF;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#x7B49;&#x4E8E;&#x5168;&#x90E8;&#x7684;&#x5B57;&#x7B26;&#x957F;&#x5EA6;&#xFF0C;&#x90A3;&#x5C31;&#x4EE3;&#x8868;&#x8BE5;&#x5B57;&#x7B26;&#x4E32;&#x5168;&#x90E8;&#x7684;&#x5B57;&#x6BCD;&#x90FD;&#x76F8;&#x540C;&#xFF0C;&#x9664;&#x975E;&#x8BE5;&#x5B57;&#x7B26;&#x4E32;word&#x7684;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;&#x7B49;&#x4E8E;2&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x4E3A;true&#xFF0C;&#x5426;&#x5219;&#x662F;&#x8FD4;&#x56DE;false&#x3002;&#x5982;&#x679C;&#x6700;&#x5927;&#x6570;&#x91CF;&#x53EA;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x6B21;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x5B57;&#x6BCD;&#x6570;&#x91CF;&#x6700;&#x591A;&#xFF0C;&#x90A3;&#x4E48;&#x6700;&#x5927;&#x7684;&#x6570;&#x91CF;&#x51CF;&#x53BB;&#x6700;&#x5C0F;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5DEE;&#x503C;&#x4E3A;1&#x6216;&#x8005;0&#xFF0C;&#x6BD4;&#x5982;abcc&#x3001;abb&#x3001;cdd&#x3001;ab&#x3001;ef&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x4E3A;true&#x7684;&#xFF0C;&#x5982;&#x679C;&#x662F;abccc&#x3001;abbccc&#x3001;abbb&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5C31;&#x8BE5;&#x8FD4;&#x56DE;false&#x3002;&#x5982;&#x679C;&#x6700;&#x5927;&#x6570;&#x91CF;&#x53EA;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x6B21;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x79CD;&#x5B57;&#x6BCD;&#x6570;&#x91CF;&#x6700;&#x591A;&#xFF0C;&#x5E76;&#x4E14;&#x5176;&#x4ED6;&#x7684;&#x5B57;&#x6BCD;&#x90FD;&#x662F;1&#x4E2A;&#xFF0C;&#x6BD4;&#x5982;accccc&#x3001;bffff&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x8FD4;&#x56DE;&#x7684;true&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x7684;&#x60C5;&#x51B5;&#x90FD;&#x662F;false&#x3002;&#x5982;&#x679C;&#x6700;&#x5927;&#x6570;&#x91CF;&#x51FA;&#x73B0;&#x4E86;&#x591A;&#x4E2A;&#xFF0C;&#x4F46;&#x662F;&#x6700;&#x5C0F;&#x6570;&#x91CF;&#x7684;&#x53EA;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E24;&#x79CD;&#x52A0;&#x8D77;&#x6765;&#x7684;&#x6570;&#x91CF;&#x521A;&#x597D;&#x7B49;&#x4E8E;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x5C31;&#x4EE3;&#x8868;&#xFF0C;&#x6BD4;&#x5982;abbbccc&#x3001;effgg&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x5E94;&#x8BE5;&#x8FD4;&#x56DE;true&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x7684;&#x5176;&#x4ED6;&#x60C5;&#x51B5;&#x90FD;&#x662F;false&#xFF0C;&#x6BD4;&#x5982;abbcccfff&#x8FD9;&#x6837;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5C31;&#x8BE5;&#x662F;false&#x3002;</p>
<p>&#x5B9E;&#x73B0;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">    public boolean equalFrequency(String word) {</span><br><span class="line">        int[] hash = new int[26];</span><br><span class="line">        int max = 0;</span><br><span class="line">        for (char c : word.toCharArray()) {</span><br><span class="line">            hash[c - &apos;a&apos;]++;</span><br><span class="line">            max = Math.max(hash[c - &apos;a&apos;], max);</span><br><span class="line">        }</span><br><span class="line">        if (max == 1) return true;</span><br><span class="line">        int countMax = 0, countMin = 0, min = max;</span><br><span class="line">        for (Integer value : hash) {</span><br><span class="line">            if (value == 0) continue;</span><br><span class="line">            if (value &lt; min) {</span><br><span class="line">                countMin = 1;</span><br><span class="line">            } else if (value == min) {</span><br><span class="line">                countMin++;</span><br><span class="line">            }</span><br><span class="line">            min = Math.min(value, min);</span><br><span class="line">            if (value == max) {</span><br><span class="line">                countMax++;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        if (countMax == word.length()) return word.length() &lt;= 2;</span><br><span class="line">        if (countMax == 1) {</span><br><span class="line">            return max - min == 1 || max - min == 0 || (countMin == 1 &amp;&amp; min == 1 &amp;&amp; max + min == word.length());</span><br><span class="line">        } else {</span><br><span class="line">            return countMin == 1 &amp;&amp; min == 1 &amp;&amp; ((countMax * max + countMin) == word.length());</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x5728;&#x672C;&#x5730;&#x6267;&#x884C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5F53;&#x8F93;&#x5165;&#x662F;s:wordgoodgoodgoodd&#x65F6;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x662F;false&#x8BA1;&#x7B97;&#x8017;&#x65F6;&#x4E3A;23ms&#x3002;&#x5F53;&#x8F93;&#x5165;&#x662F;s:abbbcccdddeeefff&#x65F6;&#xFF0C;&#x5F97;&#x5230;&#x7684;&#x7ED3;&#x679C;&#x662F;true&#x8BA1;&#x7B97;&#x8017;&#x65F6;&#x4E3A;24ms&#x3002;&#x5728;leetcode&#x4E0A;&#x6267;&#x884C;&#x7528;&#x65F6;&#xFF1A;0ms&#xFF0C;&#x8BA1;&#x7B97;&#x7684;&#x5F88;&#x5FEB;&#x5C31;&#x5F97;&#x5230;&#x4E86;&#x7ED3;&#x679C;&#x3002;&#x56E0;&#x4E3A;&#x73AF;&#x5883;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x5927;&#x5BB6;&#x5728;&#x6BD4;&#x8F83;&#x7B97;&#x6CD5;&#x7684;&#x6548;&#x7387;&#x9AD8;&#x4F4E;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4EE5;leetcode&#x4E0A;&#x7684;&#x4E3A;&#x51C6;&#x3002;</p>
<h1 id="&#x56DB;&#x3001;&#x4E32;&#x8054;&#x6240;&#x6709;&#x5355;&#x8BCD;&#x7684;&#x5B50;&#x4E32;"><a href="#&#x56DB;&#x3001;&#x4E32;&#x8054;&#x6240;&#x6709;&#x5355;&#x8BCD;&#x7684;&#x5B50;&#x4E32;" class="headerlink" title="&#x56DB;&#x3001;&#x4E32;&#x8054;&#x6240;&#x6709;&#x5355;&#x8BCD;&#x7684;&#x5B50;&#x4E32;"></a>&#x56DB;&#x3001;&#x4E32;&#x8054;&#x6240;&#x6709;&#x5355;&#x8BCD;&#x7684;&#x5B50;&#x4E32;</h1><p>&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;</p>
<blockquote>
<p>&#x7ED9;&#x5B9A;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;s&#x548C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;words&#x3002;words&#x4E2D;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x76F8;&#x540C;&#x3002;s&#x4E2D;&#x7684;&#x4E32;&#x8054;&#x5B50;&#x4E32;&#x662F;&#x6307;&#x4E00;&#x4E2A;&#x5305;&#x542B;words&#x4E2D;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x4EE5;&#x4EFB;&#x610F;&#x987A;&#x5E8F;&#x6392;&#x5217;&#x8FDE;&#x63A5;&#x8D77;&#x6765;&#x7684;&#x5B50;&#x4E32;&#xFF0C;&#x6BD4;&#x5982;words = [&#x201C;ab&#x201D;,&#x201D;cd&#x201D;,&#x201D;ef&#x201D;]&#xFF0C;&#x90A3;&#x4E48;&#x201D;abcdef&#x201D;&#xFF0C;&#x201D;abefcd&#x201D;&#xFF0C;&#x201D;cdabef&#x201D;&#xFF0C;&#x201D;cdefab&#x201D;&#xFF0C;&#x201D;efabcd&#x201D;&#xFF0C;&#x548C;&#x201D;efcdab&#x201D; &#x90FD;&#x662F;&#x4E32;&#x8054;&#x5B50;&#x4E32;&#x3002;&#x201D;acdbef&#x201D;&#x4E0D;&#x662F;&#x4E32;&#x8054;&#x5B50;&#x4E32;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x4E0D;&#x662F;&#x4EFB;&#x4F55;words&#x6392;&#x5217;&#x7684;&#x8FDE;&#x63A5;&#x3002;&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x4E32;&#x8054;&#x5B57;&#x4E32;&#x5728;s&#x4E2D;&#x7684;&#x5F00;&#x59CB;&#x7D22;&#x5F15;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x4EE5;&#x4EFB;&#x610F;&#x987A;&#x5E8F;&#x8FD4;&#x56DE;&#x7B54;&#x6848;&#x3002;<a href="#user-content-fn-2">2</a></p>
</blockquote>
<h2 id="&#x65B9;&#x6CD5;&#x4E00;"><a href="#&#x65B9;&#x6CD5;&#x4E00;" class="headerlink" title="&#x65B9;&#x6CD5;&#x4E00;"></a>&#x65B9;&#x6CD5;&#x4E00;</h2><p>&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#x65F6;&#xFF0C;&#x6700;&#x7B80;&#x5355;&#x7684;&#x505A;&#x6CD5;&#x662F;&#xFF0C;&#x9996;&#x5148;&#x751F;&#x6210;word&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x5168;&#x6392;&#x5217;&#xFF0C;&#x751F;&#x6210;&#x5168;&#x6392;&#x5217;&#x7684;&#x65B9;&#x6CD5;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x6BD4;&#x5982;&#x90BB;&#x4F4D;&#x5BF9;&#x6362;&#x6CD5;&#x3001;&#x56DE;&#x6EAF;&#x7B97;&#x6CD5;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x505A;&#x8D58;&#x8FF0;&#xFF0C;&#x4F46;&#x662F;&#x65E0;&#x8BBA;&#x662F;&#x4F55;&#x79CD;&#x5168;&#x6392;&#x5217;&#x65B9;&#x6CD5;&#xFF0C;&#x968F;&#x7740;word&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x91CF;&#x589E;&#x52A0;&#xFF0C;&#x6700;&#x540E;&#x7684;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F;&#x6307;&#x6570;&#x7EA7;&#x589E;&#x957F;&#x7684;&#xFF0C;&#x6700;&#x540E;&#x6709;&#x53EF;&#x80FD;&#x4F1A;&#x82B1;&#x8D39;&#x76F8;&#x5F53;&#x957F;&#x7684;&#x65F6;&#x95F4;&#x6765;&#x751F;&#x6210;&#x5168;&#x6392;&#x5217;&#xFF0C;&#x5982;&#x679C;&#x7535;&#x8111;&#x8D44;&#x6E90;&#x4E0D;&#x591F;&#x7684;&#x8BDD;&#xFF0C;&#x751A;&#x81F3;&#x4F1A;&#x751F;&#x6210;&#x5931;&#x8D25;&#xFF0C;&#x5BF9;&#x8D44;&#x6E90;&#x662F;&#x4E00;&#x79CD;&#x6781;&#x5927;&#x7684;&#x6D6A;&#x8D39;&#x3002;&#x6240;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5982;&#x4F55;&#x7F29;&#x77ED;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x5462;&#xFF1F;&#x95EE;&#x9898;&#x7684;&#x5173;&#x952E;&#x5C31;&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x5173;&#x952E;&#x5B57;&#x3002;</p>
<p>&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x4E5F;&#x53EB;&#x53CC;&#x6307;&#x9488;&#xFF0C;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x8BBE;&#x8BA1;&#x7B97;&#x6CD5;&#x7684;&#x65F6;&#x5019;&#x7684;&#x4E00;&#x4E2A;&#x5F88;&#x6709;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x9762;&#x5BF9;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x5904;&#x7406;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#xFF0C;&#x7A97;&#x53E3;&#x7684;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x53D8;&#x5316;&#x7684;&#xFF0C;&#x4E4B;&#x540E;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x65B9;&#x5411;&#x4F9D;&#x6B21;&#x53BB;&#x626B;&#x63CF;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x8005;&#x6570;&#x7EC4;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x5F62;&#x5F0F;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x6BCF;&#x6B21;&#x626B;&#x63CF;&#x4E4B;&#x540E;&#x5904;&#x7406;&#x7A97;&#x53E3;&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x8005;&#x6570;&#x7EC4;&#x6216;&#x8005;&#x5176;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x3002;&#x5728;&#x672C;&#x95EE;&#x9898;&#x4E2D;&#xFF0C;&#x9996;&#x5148;&#x7EDF;&#x8BA1;&#x4E0B;words&#x4E2D;&#x5B57;&#x7B26;&#x4E32;&#x51FA;&#x73B0;&#x7684;&#x6B21;&#x6570;&#x7136;&#x540E;&#x4FDD;&#x5B58;&#x5728;wordMap&#x4E2D;&#xFF0C;&#x5F53;&#x505A;&#x6211;&#x4EEC;&#x5F53;&#x524D;&#x8981;&#x6BD4;&#x8F83;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x4E4B;&#x540E;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4E0D;&#x7528;&#x6BCF;&#x6B21;&#x90FD;&#x518D;&#x6765;&#x8BA1;&#x7B97;&#x4E00;&#x904D;wordMap&#x4E86;&#x3002;&#x56E0;&#x4E3A;words&#x4E2D;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x628A;&#x5355;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#x8BB0;&#x4E3A;wordLength&#xFF0C;&#x628A;words&#x7684;&#x5B57;&#x7B26;&#x6570;&#x91CF;&#x8BB0;&#x4E3A;n&#xFF0C;&#x90A3;words&#x4E2D;&#x6240;&#x6709;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x62FC;&#x5230;&#x4E00;&#x8D77;&#xFF0C;&#x53EF;&#x4EE5;&#x7EC4;&#x6210;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#x662F;maxWordLength&#x3002;&#x7136;&#x540E;&#x4ECE;&#x5DE6;&#x5F80;&#x53F3;&#xFF0C;&#x6BCF;&#x6B21;&#x5F00;&#x59CB;&#x7684;&#x65F6;&#x5019;&#x590D;&#x5236;&#x4E00;&#x4EFD;wordMap&#x5230;diffMap&#x4E2D;&#xFF0C;&#x4F5C;&#x4E3A;&#x5F53;&#x524D;&#x6BD4;&#x8F83;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x4F9D;&#x6B21;&#x8BFB;&#x53D6;n&#x4E2A;&#x957F;&#x5EA6;&#x4E3A;wordLength&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7136;&#x540E;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5728;diffMap&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4E86;&#x4E0D;&#x5B58;&#x5728;&#x4E8E;diffMap&#x4E2D;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5C31;&#x4EE3;&#x8868;&#x8BE5;&#x6B21;&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E0D;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x76F4;&#x63A5;&#x5F00;&#x59CB;&#x4E0B;&#x4E00;&#x8F6E;&#x8BFB;&#x53D6;&#x3002;&#x90A3;&#x5982;&#x4F55;&#x5224;&#x65AD;&#x8BE5;&#x6B21;&#x8BFB;&#x53D6;&#x51FA;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x5426;&#x5B58;&#x5728;&#x4E8E;diffMap&#x4E2D;&#x5462;&#xFF1F;&#x53EF;&#x4EE5;&#x628A;diffMap&#x4E2D;&#x7684;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x51CF;1&#xFF0C;&#x4E00;&#x76F4;&#x51CF;&#x5230;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x5C0F;&#x4E8E;0&#x7684;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x5F53;&#x524D;&#x7684;&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E0D;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x6B21;&#x8BFB;&#x53D6;&#x51FA;&#x6765;&#x7684;&#x90FD;&#x662F;n&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5728;&#x8FDB;&#x884C;&#x51CF;1&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9664;&#x975E;&#x5168;&#x90E8;&#x7B26;&#x5408;diffMap&#x7684;&#x5B57;&#x7B26;&#x6570;&#xFF0C;&#x5426;&#x8005;&#x5C31;&#x4F1A;&#x51FA;&#x73B0;&#x67D0;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x5B57;&#x51CF;1&#x4E4B;&#x540E;&#x5C0F;&#x4E8E;0&#x7684;&#x60C5;&#x51B5;&#x51FA;&#x73B0;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x5C31;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x8FD0;&#x7B97;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x9664;&#x975E;&#x51FA;&#x73B0;&#x5C0F;&#x4E8E;0&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x5C31;&#x8868;&#x793A;&#x90FD;&#x662F;&#x7B26;&#x5408;&#x8981;&#x6C42;&#x7684;&#x3002;</p>
<p>&#x5B9E;&#x73B0;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF0C;&#x5728;leetcode&#x4E0A;&#x6267;&#x884C;&#x7528;&#x65F6;&#xFF1A;91ms&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">    public List&lt;Integer&gt; findSubstring(String s, String[] words) {</span><br><span class="line">        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();</span><br><span class="line">        if (words.length == 0) return result;</span><br><span class="line">        int wordLength = words[0].length(), maxWordLength = wordLength * words.length;</span><br><span class="line">        Map&lt;String, Integer&gt; wordMap = new HashMap&lt;&gt;();</span><br><span class="line">        for (String word : words) {</span><br><span class="line">            wordMap.put(word, wordMap.getOrDefault(word, 0) + 1);</span><br><span class="line">        }</span><br><span class="line">        Map&lt;String, Integer&gt; diffMap = new HashMap&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; s.length() - maxWordLength + 1; i++) {</span><br><span class="line">            diffMap.clear();</span><br><span class="line">            diffMap.putAll(wordMap);</span><br><span class="line">            boolean haveIndex = true;</span><br><span class="line">            for (int n = 0; n &lt; words.length; n++) {</span><br><span class="line">                String word = s.substring(i + n * wordLength, i + (n + 1) * wordLength);</span><br><span class="line">                int value = diffMap.getOrDefault(word, 0) - 1;</span><br><span class="line">                if (value &gt;= 0) {</span><br><span class="line">                    diffMap.put(word, value);</span><br><span class="line">                } else {</span><br><span class="line">                    haveIndex = false;</span><br><span class="line">                    break;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            if (haveIndex) {</span><br><span class="line">                result.add(i);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="&#x65B9;&#x6CD5;&#x4E8C;"><a href="#&#x65B9;&#x6CD5;&#x4E8C;" class="headerlink" title="&#x65B9;&#x6CD5;&#x4E8C;"></a>&#x65B9;&#x6CD5;&#x4E8C;</h2><p>&#x5982;&#x679C;&#x4ED4;&#x7EC6;&#x89C2;&#x5BDF;&#xFF0C;&#x5C31;&#x4F1A;&#x53D1;&#x73B0;&#x4EE5;&#x4E0A;&#x7684;&#x7B97;&#x6CD5;&#x5B58;&#x5728;&#x4E00;&#x79CD;&#x6D6A;&#x8D39;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x6BCF;&#x6B21;&#x8BFB;&#x53D6;&#x4E86;n&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x51FA;&#x6765;&#x505A;&#x6BD4;&#x8F83;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x53D1;&#x73B0;&#x662F;&#x5B58;&#x5728;&#x91CD;&#x590D;&#x8BFB;&#x53D6;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x6BD4;&#x8F83;&#x7684;&#x3002;&#x57FA;&#x4E8E;&#x6B64;&#xFF0C;&#x53EF;&#x4EE5;&#x4F18;&#x5316;&#x4EE5;&#x4E0A;&#x7684;&#x7B97;&#x6CD5;&#x3002;&#x5728;&#x521D;&#x59CB;&#x5316;wordMap&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x90FD;&#x6807;&#x8BB0;&#x4E3A;&#x8D1F;&#x6570;&#xFF0C;&#x4F5C;&#x4E3A;&#x54C8;&#x5E0C;&#x8868;&#x3002;&#x4ECE;&#x5DE6;&#x5F80;&#x53F3;&#x8BFB;&#x53D6;&#xFF0C;&#x8BB0;&#x5B57;&#x7B26;&#x4E32;s&#x7684;&#x957F;&#x5EA6;&#x4E3A;ls&#xFF0C;&#x8BB0;&#x5F00;&#x59CB;&#x8BFB;&#x53D6;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4F4D;&#x7F6E;i&#xFF0C;&#x8BB0;words&#x4E2D;&#x7684;&#x5355;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x4E3A;wordLength&#xFF0C;words&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x91CF;&#x8BB0;&#x4E3A;n&#xFF0C;&#x4ECE;i&#x5F00;&#x59CB;&#xFF0C;&#x8BFB;&#x53D6;n&#x4E2A;&#x957F;&#x5EA6;&#x4E3A;wordLength&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x90A3;&#x5C31;&#x662F;&#x628A;i~ls&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5212;&#x5206;&#x4E3A;&#x6570;&#x4E2A;&#x957F;&#x5EA6;&#x4E3A;wordLength&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x6837;&#xFF0C;&#x6700;&#x540E;&#x51E0;&#x4E2A;&#x4E0D;&#x6EE1;&#x8DB3;wordLength&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5C31;&#x53EF;&#x4EE5;&#x820D;&#x5F03;&#x6389;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x65E0;&#x6CD5;&#x6784;&#x6210;&#x4E00;&#x4E2A;&#x7B26;&#x5408;&#x8981;&#x6C42;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E86;&#x3002;</p>
<p>&#x8BBE;&#x8BA1;&#x597D;&#x4E86;&#x6ED1;&#x52A8;&#x7684;&#x7A97;&#x53E3;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x662F;&#x5F00;&#x59CB;&#x79FB;&#x52A8;&#xFF0C;&#x6BCF;&#x6B21;&#x5F00;&#x59CB;&#x79FB;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x628A;wordMap&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;diffMap&#x4E2D;&#x521D;&#x59CB;&#x5316;diffMap&#x4F5C;&#x4E3A;&#x5F53;&#x524D;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x6BCF;&#x6B21;&#x79FB;&#x52A8;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x4E3A;wordLength&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7136;&#x540E;&#x7ED9;diffMap&#x4E2D;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x52A0;1&#xFF0C;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x4E86;&#x7B49;&#x4E8E;0&#x7684;&#x60C5;&#x51B5;&#x5C31;&#x5220;&#x9664;&#x8BE5;&#x952E;&#x503C;&#xFF0C;&#x5982;&#x679C;diffMap&#x4E2D;&#x521A;&#x597D;&#x5168;&#x90FD;&#x88AB;&#x79FB;&#x9664;&#x4E86;&#xFF0C;&#x8868;&#x793A;&#x521A;&#x597D;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x8BB0;&#x5F55;&#x4E0B;&#x5F53;&#x524D;&#x7684;&#x503C;&#xFF0C;&#x9664;&#x6B64;&#x4E4B;&#x5916;&#x8868;&#x793A;&#x5168;&#x90FD;&#x4E0D;&#x6EE1;&#x8DB3;&#x8981;&#x6C42;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5916;&#x5C42;&#x5FAA;&#x73AF;&#x7684;&#x90E8;&#x5206;&#xFF0C;&#x53EA;&#x9700;&#x8981;0~wordLength-1&#x6B21;&#xFF0C;&#x56E0;&#x4E3A;wordLength&#x957F;&#x5EA6;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x624D;&#x80FD;&#x7B26;&#x5408;&#x8981;&#x6C42;&#xFF0C;&#x6240;&#x4EE5;&#x5B9E;&#x9645;&#x4E0A;&#x7684;&#x5F00;&#x59CB;&#x4F4D;&#x7F6E;&#x5728;wordLength&#x4F4D;&#x7F6E;&#x4E0A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x5DF2;&#x7ECF;&#x5728;&#x7B2C;&#x4E00;&#x8F6E;&#x7684;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x4E2D;&#x6BD4;&#x8F83;&#x8FC7;&#x4E86;&#x3002;</p>
<p>&#x6700;&#x7EC8;&#x7684;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF0C;&#x5728;leetcode&#x4E0A;&#x6267;&#x884C;&#x7528;&#x65F6;&#xFF1A;11ms&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">    public List&lt;Integer&gt; findSubstring(String s, String[] words) {</span><br><span class="line">        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();</span><br><span class="line">        if (words.length == 0) return result;</span><br><span class="line">        int wordLength = words[0].length(), maxWordLength = wordLength * words.length;</span><br><span class="line">        Map&lt;String, Integer&gt; wordMap = new HashMap&lt;&gt;();</span><br><span class="line">        for (String word : words) {</span><br><span class="line">            wordMap.put(word, wordMap.getOrDefault(word, 0) - 1);</span><br><span class="line">        }</span><br><span class="line">        Map&lt;String, Integer&gt; diffMap = new HashMap&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; wordLength &amp;&amp; i + maxWordLength &lt;= s.length(); i++) {</span><br><span class="line">            diffMap.clear();</span><br><span class="line">            diffMap.putAll(wordMap);</span><br><span class="line">            for (int j = 0; i + (j + 1) * wordLength &lt;= s.length(); j++) {</span><br><span class="line">                int startIndex = i + j * wordLength;</span><br><span class="line">                int endIndex = i + (j + 1) * wordLength;</span><br><span class="line">                if (j &gt;= words.length) {</span><br><span class="line">                    String firstWord = s.substring(startIndex - maxWordLength, endIndex - maxWordLength);</span><br><span class="line">                    int value = diffMap.getOrDefault(firstWord, 0) - 1;</span><br><span class="line">                    if (value == 0) {</span><br><span class="line">                        diffMap.remove(firstWord);</span><br><span class="line">                    } else {</span><br><span class="line">                        diffMap.put(firstWord, value);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                String nextWord = s.substring(startIndex, endIndex);</span><br><span class="line">                int value = diffMap.getOrDefault(nextWord, 0) + 1;</span><br><span class="line">                if (value != 0) {</span><br><span class="line">                    diffMap.put(nextWord, value);</span><br><span class="line">                } else {</span><br><span class="line">                    diffMap.remove(nextWord);</span><br><span class="line">                    if (diffMap.isEmpty()) {</span><br><span class="line">                        result.add(endIndex - maxWordLength);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x76F8;&#x6BD4;&#x4E8E;&#x65B9;&#x6CD5;&#x4E00;&#xFF0C;&#x901F;&#x5EA6;&#x63D0;&#x9AD8;&#x4E86;8&#x500D;&#x3002;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x5F80;&#x5F80;&#x53EF;&#x4EE5;&#x548C;&#x5176;&#x4ED6;&#x7B97;&#x6CD5;&#x76F8;&#x4E92;&#x7ED3;&#x5408;&#xFF0C;&#x6BD4;&#x5982;&#x5806;&#x6808;&#x3001;&#x961F;&#x5217;&#xFF0C;&#x6839;&#x636E;&#x5B9E;&#x9645;&#x7684;&#x9700;&#x8981;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x63D0;&#x9AD8;&#x7B97;&#x7684;&#x6548;&#x7387;&#x3002;&#x5728;&#x5229;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x8BBE;&#x8BA1;&#x7B97;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5230;&#x6ED1;&#x52A8;&#x7A97;&#x53E3;&#x7684;&#x8BDD;&#x4F1A;&#x975E;&#x5E38;&#x7684;&#x6709;&#x7528;&#x3002;</p>
<h1 id="&#x4E94;&#x3001;&#x76F4;&#x7EBF;&#x4E0A;&#x6700;&#x591A;&#x7684;&#x70B9;&#x6570;"><a href="#&#x4E94;&#x3001;&#x76F4;&#x7EBF;&#x4E0A;&#x6700;&#x591A;&#x7684;&#x70B9;&#x6570;" class="headerlink" title="&#x4E94;&#x3001;&#x76F4;&#x7EBF;&#x4E0A;&#x6700;&#x591A;&#x7684;&#x70B9;&#x6570;"></a>&#x4E94;&#x3001;&#x76F4;&#x7EBF;&#x4E0A;&#x6700;&#x591A;&#x7684;&#x70B9;&#x6570;</h1><p>&#x9898;&#x76EE;&#x63CF;&#x8FF0;&#xFF1A;</p>
<blockquote>
<p>&#x7ED9;&#x4F60;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;points&#xFF0C;&#x5176;&#x4E2D; points[i] = [xi, yi] &#x8868;&#x793A; X-Y &#x5E73;&#x9762;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x70B9;&#x3002;&#x6C42;&#x6700;&#x591A;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x70B9;&#x5728;&#x540C;&#x4E00;&#x6761;&#x76F4;&#x7EBF;&#x4E0A;&#x3002;<a href="#user-content-fn-3">3</a></p>
</blockquote>
<p>&#x770B;&#x5230;&#x8FD9;&#x6837;&#x7684;&#x63CF;&#x8FF0;&#xFF0C;&#x53EF;&#x4EE5;&#x663E;&#x800C;&#x6613;&#x89C1;&#x7684;&#x53D1;&#x73B0;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x4E8C;&#x7EF4;&#x5E73;&#x9762;&#x5750;&#x6807;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8C;&#x5143;&#x4E00;&#x6B21;&#x51FD;&#x6570;&#x6765;&#x8868;&#x793A;&#x662F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;<strong>y=ax+b</strong>&#x5F62;&#x5F0F;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5176;&#x4E2D;&#x7684;&#x7279;&#x4F8B;&#x662F;<strong>x=c</strong>(c&#x8868;&#x793A;&#x4E00;&#x4E2A;&#x5E38;&#x6570;)&#xFF0C;&#x4E8C;&#x5143;&#x4E00;&#x6B21;&#x65B9;&#x7A0B;&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x4E0A;&#x9762;&#x7684;&#x51FD;&#x6570;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x7528;&#x8FD9;&#x6837;&#x7684;&#x51FD;&#x6570;&#x5F62;&#x5F0F;&#x5C31;&#x53EF;&#x4EE5;&#x8868;&#x793A;X-Y&#x5E73;&#x9762;&#x4E0A;&#x6240;&#x6709;&#x7684;&#x76F4;&#x7EBF;&#x4E86;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x4E24;&#x4E2A;&#x70B9;&#x6765;&#x8868;&#x793A;&#x4E00;&#x6761;&#x76F4;&#x7EBF;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x53EA;&#x9700;&#x8981;&#x5224;&#x65AD;&#x5269;&#x4E0B;&#x7684;&#x70B9;&#x662F;&#x5426;&#x5728;&#x5F53;&#x524D;&#x8FD9;&#x6761;&#x76F4;&#x7EBF;&#x4E0A;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x90A3;&#x6211;&#x4EEC;&#x501F;&#x6B64;&#x6765;&#x6784;&#x5EFA;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x6309;&#x7167;&#x5206;&#x6876;&#x7B97;&#x6CD5;&#x6765;&#x7ED9;&#x70B9;&#x5206;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x8BA1;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x8F93;&#x51FA;&#x5176;&#x4E2D;&#x6700;&#x5927;&#x7684;&#x503C;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x5206;&#x6876;&#x7B97;&#x6CD5;&#x5C31;&#x662F;&#x5F88;&#x76F4;&#x89C2;&#x7684;&#x4E00;&#x79CD;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x5B9E;&#x73B0;&#xFF0C;&#x6309;&#x7167;&#x5173;&#x952E;&#x8BCD;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x5206;&#x6210;&#x591A;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x6570;&#x7EC4;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x6BCF;&#x4E2A;&#x6876;&#x5206;&#x522B;&#x7EF4;&#x62A4;&#x81EA;&#x5DF1;&#x5185;&#x90E8;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x7BA1;&#x7406;&#x6BCF;&#x4E2A;&#x6876;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x5728;&#x672C;&#x95EE;&#x9898;&#x4E2D;&#x56E0;&#x4E3A;&#x4E24;&#x70B9;&#x6210;&#x4E00;&#x6761;&#x76F4;&#x7EBF;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x7528;[xi, yi]&#x548C;[xi+1, yi+1]&#x4E24;&#x4E24;&#x76F8;&#x51CF;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x7167;<strong>y=ax+b</strong>&#x6765;&#x8BA1;&#x7B97;&#x51FA;a&#x548C;b&#xFF0C;&#x6216;&#x8005;&#x5F53;x&#x5750;&#x6807;&#x90FD;&#x4E00;&#x6837;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x7167;<strong>x=c</strong>&#x6765;&#x8BA1;&#x7B97;&#x51FA;c&#xFF0C;&#x5BF9;&#x4E8E;<strong>y=ax+b</strong>&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x9996;&#x5148;&#x6309;&#x7167;a&#x5206;&#x6210;&#x4E00;&#x7EC4;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8FD9;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#x4E2D;&#x518D;&#x6309;&#x7167;b&#x518D;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5212;&#x5206;&#xFF0C;&#x7EC6;&#x5212;&#x5206;&#x51FA;&#x65B0;&#x7684;&#x6876;&#x6765;&#xFF0C;&#x53E6;&#x5916;&#x5BF9;&#x4E8E;<strong>x=c</strong>&#x7684;&#x5F62;&#x5F0F;&#xFF0C;&#x628A;c&#x4F5C;&#x4E3A;&#x5173;&#x952E;&#x5B57;&#x5212;&#x5206;&#x51FA;&#x6570;&#x636E;&#x6765;&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x6876;&#x3002;&#x4EE5;a&#x3001;b&#x3001;c&#x4F5C;&#x4E3A;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x5173;&#x952E;&#x5B57;&#x5206;&#x522B;&#x8BA1;&#x7B97;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x5C31;&#x53EF;&#x4EE5;&#x628A;&#x6570;&#x636E;&#x5206;&#x5230;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x6876;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53BB;&#x8BA1;&#x6570;&#x6709;&#x591A;&#x5C11;&#x70B9;&#x662F;&#x4E00;&#x6761;&#x76F4;&#x63A5;&#x4E0A;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</p>
<p>&#x4EE5;&#x4E0B;&#x662F;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#xFF0C;&#x5728;leetcode&#x4E0A;&#x6267;&#x884C;&#x7528;&#x65F6;: 29ms&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">    public int maxPoints(int[][] points) {</span><br><span class="line">        if (points.length &lt;= 2) return points.length;</span><br><span class="line">        int result = 0;</span><br><span class="line">        Map&lt;Float, Map&lt;Float, Set&lt;int[]&gt;&gt;&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;Integer, Set&lt;int[]&gt;&gt; xMap = new HashMap&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; points.length - 1; i++) {</span><br><span class="line">            for (int f = i + 1; f &lt; points.length; f++) {</span><br><span class="line">                float dx = (float) points[i][0] - points[f][0];</span><br><span class="line">                float dy = (float) points[i][1] - points[f][1];</span><br><span class="line">                float pi = dy / dx;</span><br><span class="line">                float b = points[i][1] - pi * points[i][0];</span><br><span class="line">                Set&lt;int[]&gt; value = null;</span><br><span class="line">                if (dx == 0) {</span><br><span class="line">                    value = xMap.computeIfAbsent(points[i][0], k -&gt; new HashSet&lt;&gt;());</span><br><span class="line">                }</span><br><span class="line">                if (value == null) {</span><br><span class="line">                    Map&lt;Float, Set&lt;int[]&gt;&gt; bMap = map.computeIfAbsent(pi, k -&gt; new HashMap&lt;&gt;());</span><br><span class="line">                    value = bMap.computeIfAbsent(b, k -&gt; new HashSet&lt;&gt;());</span><br><span class="line">                }</span><br><span class="line">                value.add(points[i]);</span><br><span class="line">                value.add(points[f]);</span><br><span class="line">                result = Math.max(value.size(), result);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return result;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x7684;&#x4E86;&#x4F8B;&#x5B50;&#x6765;&#x8BB2;&#x89E3;&#x8BF4;&#x660E;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x4E2D;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x8BBE;&#x8BA1;&#x9AD8;&#x6548;&#x7684;&#x7B97;&#x6CD5;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x64CD;&#x4F5C;&#x505A;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x3001;&#x54C8;&#x5E0C;&#x8868;&#x3001;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x7684;&#x8BBE;&#x8BA1;&#x65B9;&#x5F0F;&#xFF0C;&#x6309;&#x7167;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x8981;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;&#x5176;&#x4E2D;&#x5173;&#x4E8E;&#x5173;&#x952E;&#x5B57;&#x51FD;&#x6570;&#x7684;&#x8BBE;&#x8BA1;&#x6709;&#x5F88;&#x591A;&#x79CD;&#xFF0C;&#x6BD4;&#x5982;&#x76F4;&#x63A5;&#x5BFB;&#x5740;&#x6CD5;&#x3001;&#x5E73;&#x65B9;&#x53D6;&#x4E2D;&#x6CD5;&#x3001;&#x6298;&#x53E0;&#x6CD5;&#x3001;&#x968F;&#x673A;&#x6570;&#x6CD5;&#x7B49;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x7684;&#x67E5;&#x627E;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x548C;&#x5176;&#x4ED6;&#x7684;&#x7B97;&#x6CD5;&#x76F8;&#x4E92;&#x7ED3;&#x5408;&#x6765;&#x4F18;&#x5316;&#x7B97;&#x6CD5;&#x7684;&#x6548;&#x7387;&#xFF0C;&#x6BD4;&#x5982;&#x5DEE;&#x5206;&#x7B97;&#x6CD5;&#x3001;&#x5206;&#x6876;&#x7B97;&#x6CD5;&#x3001;&#x4E8C;&#x53C9;&#x6811;&#x3001;&#x5E73;&#x8861;&#x6811;&#x3001;&#x94FE;&#x8868;&#x3001;&#x961F;&#x5217;&#x3001;&#x524D;&#x7F00;&#x548C;&#x7B49;&#x7B49;&#x3002;&#x5728;&#x6570;&#x636E;&#x91CF;&#x8F83;&#x5927;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C24;&#x5176;&#x5728;&#x73B0;&#x5B9E;&#x7684;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E2D;&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x51B2;&#x7A81;&#x6709;&#x53EF;&#x80FD;&#x9891;&#x7E41;&#x5730;&#x51FA;&#x73B0;&#xFF0C;&#x5728;&#x51B2;&#x7A81;&#x51FA;&#x73B0;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E8C;&#x53C9;&#x6811;&#x3001;&#x7EA2;&#x9ED1;&#x6811;&#x3001;&#x961F;&#x5217;&#x7B49;&#x7B49;&#x65B9;&#x5F0F;&#x6765;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x51FA;&#x73B0;&#x6700;&#x5DEE;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5173;&#x952E;&#x5B57;&#x5168;&#x90E8;&#x90FD;&#x4E00;&#x6837;&#xFF0C;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x90FD;&#x5806;&#x79EF;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x964D;&#x4F4E;&#x67E5;&#x8BE2;&#x7684;&#x6548;&#x7387;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x5728;&#x5DE5;&#x4E1A;&#x4E0A;&#x8BBE;&#x8BA1;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#x7684;&#x65F6;&#x5019;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x8981;&#x5BF9;&#x6781;&#x5DEE;&#x60C5;&#x51B5;&#xFF0C;&#x653B;&#x51FB;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7279;&#x5B9A;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x6765;&#x8BA9;&#x54C8;&#x5E0C;&#x8868;&#x51FA;&#x73B0;&#x6700;&#x5DEE;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4ECE;&#x800C;&#x62D6;&#x6162;&#x901F;&#x5EA6;&#xFF0C;&#x4ECE;&#x800C;&#x53D1;&#x8D77;&#x653B;&#x51FB;&#x3002;</p>
<p>&#x5982;&#x4F55;&#x8BBE;&#x8BA1;&#x5408;&#x7406;&#x7684;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#xFF0C;&#x5F80;&#x5F80;&#x90FD;&#x662F;&#x6839;&#x636E;&#x5177;&#x4F53;&#x7684;&#x60C5;&#x51B5;&#x6765;&#x5206;&#x6790;&#x3002;&#x4F46;&#x603B;&#x7684;&#x539F;&#x5219;&#x6765;&#x8BF4;&#x5C31;&#x662F;&#x5E0C;&#x671B;&#x5173;&#x952E;&#x5B57;&#x5C3D;&#x91CF;&#x7684;&#x552F;&#x4E00;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x91CD;&#x590D;&#x51B2;&#x7A81;&#xFF0C;&#x8FD8;&#x6709;&#x5C31;&#x662F;&#x5C3D;&#x91CF;&#x5730;&#x8BA9;&#x6570;&#x636E;&#x4FDD;&#x6301;&#x5E73;&#x8861;&#xFF0C;&#x628A;&#x6570;&#x636E;&#x5C3D;&#x91CF;&#x7684;&#x6563;&#x5217;&#x5F00;&#x6765;&#xFF0C;&#x4E0D;&#x8981;&#x8BA9;&#x67D0;&#x4E2A;&#x6216;&#x8005;&#x67D0;&#x4E9B;&#x5173;&#x952E;&#x5B57;&#x51FA;&#x73B0;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;&#x5806;&#x79EF;&#xFF0C;&#x4ECE;&#x800C;&#x62D6;&#x6162;&#x901F;&#x5EA6;&#x3002;&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x54C8;&#x5E0C;&#x8868;&#x5F80;&#x5F80;&#x662F;&#x52A8;&#x6001;&#x6269;&#x5BB9;&#x7684;&#xFF0C;&#x5F53;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x6E10;&#x6E10;&#x53D8;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x52A8;&#x6001;&#x6269;&#x5BB9;&#x4E5F;&#x662F;&#x4F1A;&#x5728;&#x5B9E;&#x9645;&#x8FD0;&#x7528;&#x4E2D;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x9762;&#x5BF9;&#x7684;&#x95EE;&#x9898;&#x3002;&#x4E00;&#x822C;&#x5730;&#x53EF;&#x4EE5;&#x5728;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x8FBE;&#x5230;&#x67D0;&#x4E2A;&#x9608;&#x503C;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x53BB;&#x7533;&#x8BF7;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x66F4;&#x5927;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x6570;&#x636E;&#x8FC1;&#x79FB;&#x8FC7;&#x53BB;&#x3002;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x53D8;&#x5F97;&#x592A;&#x5C0F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7F29;&#x5C0F;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x4ECE;&#x800C;&#x8282;&#x7701;&#x7A7A;&#x95F4;&#xFF0C;&#x4F46;&#x662F;&#x5426;&#x9700;&#x8981;&#x8FD9;&#x4E48;&#x505A;&#xFF0C;&#x8981;&#x6839;&#x636E;&#x5177;&#x4F53;&#x7684;&#x4FE1;&#x606F;&#x6765;&#x51B3;&#x5B9A;&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x79CD;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x662F;&#x5426;&#x53EA;&#x662F;&#x77ED;&#x671F;&#x5185;&#x7684;&#x6CE2;&#x52A8;&#xFF0C;&#x5982;&#x679C;&#x9891;&#x7E41;&#x5730;&#x66F4;&#x65B0;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x6548;&#x7387;&#x4E0B;&#x964D;&#xFF0C;&#x6BD4;&#x5982;&#x6CE2;&#x5CF0;&#x53EF;&#x80FD;&#x53EA;&#x6709;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#xFF0C;&#x8D85;&#x8FC7;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x6062;&#x590D;&#x6210;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x88C5;&#x586B;&#x56E0;&#x5B50;&#x4E86;&#x3002;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x90FD;&#x53EF;&#x80FD;&#x4F1A;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x9700;&#x8981;&#x52A8;&#x6001;&#x7F29;&#x8868;&#x6216;&#x8005;&#x52A8;&#x6001;&#x6269;&#x8868;&#x3002;&#x5982;&#x679C;&#x4E00;&#x6B21;&#x6027;&#x7684;&#x5B8C;&#x6210;&#x52A8;&#x6001;&#x7F29;&#x8868;&#x6216;&#x8005;&#x6269;&#x8868;&#xFF0C;&#x5C31;&#x53EF;&#x80FD;&#x5BF9;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x8FDB;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x9020;&#x6210;&#x6548;&#x7387;&#x964D;&#x4F4E;&#x7684;&#x95EE;&#x9898;&#x3002;&#x53EF;&#x4EE5;&#x5148;&#x7533;&#x8BF7;&#x65B0;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x628A;&#x65B0;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x65B0;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5206;&#x6279;&#x628A;&#x65E7;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x65B0;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x5B8C;&#x6210;&#x7F29;&#x8868;&#x6216;&#x8005;&#x6269;&#x8868;&#xFF0C;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x7684;&#x67E5;&#x8BE2;&#x548C;&#x5220;&#x9664;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5148;&#x53BB;&#x5728;&#x65B0;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x53BB;&#x65E7;&#x7684;&#x54C8;&#x5E0C;&#x8868;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x6837;&#x65E2;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x52A8;&#x6001;&#x6539;&#x53D8;&#x54C8;&#x5E0C;&#x8868;&#x7684;&#x5F71;&#x54CD;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x52A8;&#x6001;&#x6539;&#x53D8;&#x54C8;&#x5E0C;&#x8868;&#x3002;&#x6240;&#x4EE5;&#x64CD;&#x4F5C;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x3001;&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#x3001;&#x7A7A;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x505A;&#x51FA;&#x6743;&#x8861;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x4EE5;&#x5168;&#x90E8;&#x987E;&#x53CA;&#x90A3;&#x81EA;&#x7136;&#x662F;&#x6700;&#x597D;&#x7684;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x9700;&#x8981;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5BF9;&#x81EA;&#x5DF1;&#x6700;&#x597D;&#x7684;&#x9009;&#x62E9;&#x3002;</p>
<p>&#x672C;&#x6587;&#x4E2D;&#x53EA;&#x662F;&#x8BB2;&#x4E86;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x4E00;&#x4E9B;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x5728;&#x5B9E;&#x9645;&#x8FD0;&#x7528;&#x4E2D;&#xFF0C;&#x4F1A;&#x6BD4;&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x7BA1;&#x7406;&#x7684;&#x6570;&#x636E;&#x5E9E;&#x5927;&#x5F97;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x57FA;&#x672C;&#x7684;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x662F;&#x4E0D;&#x53D8;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x54C8;&#x5E0C;&#x8868;&#xFF0C;&#x7136;&#x540E;&#x6765;&#x5EFA;&#x7ACB;&#x5FEB;&#x901F;&#x7684;&#x67E5;&#x627E;&#x5173;&#x7CFB;&#xFF0C;&#x5C24;&#x5176;&#x5728;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;&#x9762;&#x524D;&#xFF0C;&#x662F;&#x53EF;&#x4EE5;&#x6536;&#x83B7;&#x5230;&#x5F88;&#x597D;&#x7684;&#x6548;&#x679C;&#x7684;&#x3002;&#x6BD4;&#x5982;&#x5B89;&#x5168;&#x52A0;&#x5BC6;&#x3001;&#x6570;&#x636E;&#x6821;&#x9A8C;&#x3001;LRU&#x7F13;&#x5B58;&#x6DD8;&#x6C70;&#x7B97;&#x6CD5;&#x3001;word&#x4E2D;&#x7684;&#x62FC;&#x5199;&#x68C0;&#x67E5;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x4F1A;&#x7528;&#x5230;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x3002;&#x8FD8;&#x6709;&#x5728;&#x5927;&#x578B;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x5730;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5E76;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x54C8;&#x5E0C;&#x8868;&#x6765;&#x589E;&#x5220;&#x6539;&#x67E5;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x76EE;&#x7684;&#x3002;&#x8FD8;&#x6709;&#x6BD4;&#x5982;&#x6570;&#x636E;&#x5206;&#x7247;&#xFF0C;&#x7BA1;&#x7406;&#x5927;&#x578B;&#x65E5;&#x5FD7;&#x5E93;&#xFF0C;&#x5982;&#x4F55;&#x67E5;&#x627E;&#x65E5;&#x5FD7;&#x5E93;&#x4E2D;&#x67E5;&#x8BE2;&#x9891;&#x7387;&#x6700;&#x9AD8;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x5982;&#x4F55;&#x5224;&#x65AD;&#x56FE;&#x7247;&#x662F;&#x5426;&#x5728;&#x56FE;&#x5E93;&#x4E4B;&#x4E2D;&#x7B49;&#x7B49;&#x3002;&#x8FD8;&#x6709;&#x5206;&#x5E03;&#x5F0F;&#x7684;&#x5B58;&#x50A8;&#x3001;&#x5E03;&#x8C37;&#x9E1F;&#x54C8;&#x5E0C;&#x8868;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x591A;&#x505A;&#x8D58;&#x8FF0;&#xFF0C;&#x8FD9;&#x4E9B;&#x7684;&#x5E94;&#x7528;&#x90FD;&#x4F1A;&#x5F88;&#x5E38;&#x89C1;&#x3002;&#x5408;&#x7406;&#x4F7F;&#x7528;&#x54C8;&#x5E0C;&#x601D;&#x60F3;&#x786E;&#x5B9E;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x6709;&#x6548;&#x5730;&#x63D0;&#x9AD8;&#x7B97;&#x6CD5;&#x6548;&#x7387;&#x3002;</p>
<h1 id="&#x53C2;&#x8003;&#x6587;&#x732E;"><a href="#&#x53C2;&#x8003;&#x6587;&#x732E;" class="headerlink" title="&#x53C2;&#x8003;&#x6587;&#x732E;"></a>&#x53C2;&#x8003;&#x6587;&#x732E;</h1><p>[1] Thomas H.Cormen, Charles E.Leiserson, Ronald L.Rivest, Clifford Stein&#xFF1A;&#x7B97;&#x6CD5;&#x5BFC;&#x8BBA;[M].&#x6BB7;&#x5EFA;&#x5E73;&#xFF0C;&#x5F90;&#x4E91;&#xFF0C;&#x738B;&#x521A;&#xFF0C;&#x5218;&#x6653;&#x5149;&#xFF0C;&#x82CF;&#x660E;&#xFF0C;&#x90B9;&#x6052;&#x660E;&#xFF0C;&#x738B;&#x5B8F;&#x5FD7;.<br>&#x673A;&#x68B0;&#x5DE5;&#x4E1A;&#x51FA;&#x7248;&#x793E;&#xFF0C;2012-12</p>
<h2 id="Footnotes"><a href="#Footnotes" class="headerlink" title="Footnotes"></a>Footnotes</h2><ol>
<li><a href="/external_links/a6b3c4e9bfc6fe3e4d75e6ba5ad9c336.html" target="blank" rel="noopener">leetcode.cn/problems/re&#x2026;</a> <a href="#user-content-fnref-1">&#x21A9;</a></li>
<li><a href="/external_links/959e007f0a15517744f3d626c9ee2460.html" target="blank" rel="noopener">leetcode.cn/problems/su&#x2026;</a> <a href="#user-content-fnref-2">&#x21A9;</a></li>
<li><a href="/external_links/75ccddeda569736e497b32542e69add3.html" target="blank" rel="noopener">leetcode.cn/problems/ma&#x2026;</a> <a href="#user-content-fnref-3">&#x21A9;</a></li>
</ol>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/93fefc430a4ce0ef23688c5b469a06cb.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7344573753538789430.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7344573753538789430.html" itemprop="url">在大公司工作之后才真正领悟到它真的是宇宙级编辑器 开胃菜 与</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-11T11:03:15+08:00">
                2024-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x5F00;&#x80C3;&#x83DC;"><a href="#&#x5F00;&#x80C3;&#x83DC;" class="headerlink" title="&#x5F00;&#x80C3;&#x83DC;"></a>&#x5F00;&#x80C3;&#x83DC;</h1><p>&#x6211;&#x4EEC;&#x5728;&#x7528;vscode&#x5199;&#x4EE3;&#x7801;&#x65F6;&#x5019;&#x7ECF;&#x5E38;&#x9700;&#x8981;&#x9009;&#x4E2D;&#x6587;&#x672C;&#xFF0C;&#x6BD4;&#x5982;&#x4E0B;&#x56FE;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/12a3f2c8fa77cbd09957a014c8f13735633da6e9ab1c3b4fc629c60406077a7b" alt="20240310160850_rec_.gif"></p>
<p>&#x4F46;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x60F3;&#x9009;&#x4E2D;&#x7684;&#x662F;&#x6574;&#x4E2A;&#x7C7B;&#x540D;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/7f0300955bfda3edefb1653dd0cd988de406c38d918bd49bab62bf1567aee222" alt="20240310161455_rec_.gif"><br>&#x5176;&#x5B9E;&#x8FD9;&#x4E2A;&#x5C31;&#x7275;&#x626F;&#x5230;&#x4E86;vscode&#x7684;&#x5206;&#x8BCD;&#x673A;&#x5236;&#xFF0C;&#x5B83;&#x8BA4;&#x4E3A;<code>-</code>&#x5E94;&#x8BE5;&#x622A;&#x65AD;&#x6587;&#x672C;</p>
<p>&#x5176;&#x5B9E;&#x4E0D;&#x6B62;<code>-</code>&#xFF0C;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x5B57;&#x7B26;&#x90FD;&#x88AB;vscode&#x8BA4;&#x4E3A;&#x662F;&#x5206;&#x9694;&#x7B26;</p>
<p>&#x6240;&#x4EE5;&#x8D34;&#x5FC3;&#x7684;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x5982;&#x4E0B;&#x914D;&#x7F6E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;{</span><br><span class="line">  // &#x5982;&#x4E0B;&#x662F;&#x88AB;vscode&#x8BA4;&#x4E3A;&#x662F;&#x5206;&#x9694;&#x7B26;&#x7684;&#x5B57;&#x7B26;</span><br><span class="line">  // &#x6211;&#x4EEC;&#x5728;&#x8BBE;&#x7F6E;&#x4E2D;&#x641C;&#x7D22;editor.wordSeparators</span><br><span class="line">  // &#x7136;&#x540E;&#x6839;&#x636E;&#x81EA;&#x5DF1;&#x7684;&#x9700;&#x8981;&#x5220;&#x9664;&#x4E0D;&#x60F3;&#x8981;&#x7684;&#x5206;&#x9694;&#x7B26;&#x5373;&#x53EF;</span><br><span class="line">  // &#x6BD4;&#x5982;&#x5220;&#x9664;@&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x9009;&#x4E2D;less&#x53D8;&#x91CF;&#x548C;&#x88C5;&#x9970;&#x5668;&#x5982;@xxx</span><br><span class="line">  &quot;editor.wordSeparators&quot;: &quot;`~#!@$%^&amp;*()-=+[{]}\\|;:&apos;\&quot;,&lt;&gt;/?.&quot;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x628A;webstorm&#x7684;&#x8BBE;&#x7F6E;&#x5168;&#x770B;&#x4E86;&#x4E00;&#x904D;&#xFF0C;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x7C7B;&#x4F3C;&#x914D;&#x7F6E;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x5927;&#x4F6C;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x5728;webstorm&#x914D;&#x7F6E;&#x7684;&#x8FD8;&#x8BF7;&#x8BC4;&#x8BBA;&#x533A;&#x7559;&#x8A00;&#x6307;&#x6559;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x4E0A;&#x65B9;&#x8FD9;&#x79CD;&#x5C0F;&#x914D;&#x7F6E;&#x53EF;&#x4EE5;&#x63D0;&#x5347;&#x4F60;&#x7684;&#x4EE3;&#x7801;&#x7F16;&#x5199;&#x6548;&#x7387;&#x4EE5;&#x53CA;&#x5E78;&#x798F;&#x611F;&#xFF0C;&#x90A3;&#x5C31;&#x7EE7;&#x7EED;&#x5F80;&#x4E0B;&#x770B;&#x5427;&#xFF0C;&#x4E00;&#x5B9A;&#x4E0D;&#x4F1A;&#x8BA9;&#x4F60;&#x5931;&#x671B;&gt;_&lt;</p>
<h1 id="&#x4E0E;vscode&#x5E76;&#x4E0D;&#x7F8E;&#x4E3D;&#x7684;&#x9082;&#x9005;"><a href="#&#x4E0E;vscode&#x5E76;&#x4E0D;&#x7F8E;&#x4E3D;&#x7684;&#x9082;&#x9005;" class="headerlink" title="&#x4E0E;vscode&#x5E76;&#x4E0D;&#x7F8E;&#x4E3D;&#x7684;&#x9082;&#x9005;"></a>&#x4E0E;vscode&#x5E76;&#x4E0D;&#x7F8E;&#x4E3D;&#x7684;&#x9082;&#x9005;</h1><p>&#x672C;&#x4EBA;&#x662F;&#x901A;&#x8FC7;Java&#x5165;&#x95E8;&#x7F16;&#x7A0B;&#x7684;&#xFF0C;&#x63A5;&#x89E6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7F16;&#x8F91;&#x5668;&#x662F;ecilpse&#xFF0C;&#x540E;&#x6765;idea&#x8D8A;&#x6765;&#x8D8A;&#x706B;&#xFF0C;&#x8BA9;&#x6211;&#x7B2C;&#x4E00;&#x6B21;&#x63A5;&#x89E6;&#x5230;&#x4E86;jetbrains&#x5BB6;&#x7684;&#x7F16;&#x8F91;&#x5668;&#xFF0C;&#x521A;&#x5F00;&#x59CB;&#x4F7F;&#x7528;idea&#x65F6;&#x6211;&#x5C31;&#x53D7;&#x5230;&#x4E86;&#x6DF1;&#x6DF1;&#x7684;&#x9707;&#x64BC;&#xFF0C;&#x539F;&#x6765;&#x7F16;&#x8F91;&#x5668;&#x4E4B;&#x95F4;&#x4EA6;&#x6709;&#x5DEE;&#x8DDD;&#x3002;&#x540E;&#x6765;&#x673A;&#x7F18;&#x5DE7;&#x5408;&#x6210;&#x4E3A;&#x4E86;&#x524D;&#x7AEF;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x63A5;&#x89E6;&#x5230;&#x540C;&#x4E3A;jb&#x5BB6;&#x51FA;&#x54C1;&#x7684;&#x771F;&#x6B63;&#x7684;&#x524D;&#x7AEF;&#x7F16;&#x8F91;&#x5668;webstorm&#xFF0C;&#x7531;&#x4E8E;idea&#x4F7F;&#x7528;&#x7684;&#x5F88;&#x719F;&#xFF0C;&#x6240;&#x4EE5;&#x57FA;&#x672C;&#x65E0;&#x7F1D;&#x5207;&#x6362;&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x672C;&#x4EBA;&#x4E00;&#x76F4;&#x5BF9;&#x6570;&#x5B66;&#x5F88;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x5C0F;&#x65F6;&#x5019;&#x5C31;&#x53C2;&#x52A0;&#x8FC7;&#x5965;&#x6570;&#x6BD4;&#x8D5B;&#xFF0C;&#x63A5;&#x89E6;&#x8FC7;&#x4E00;&#x4E9B;&#x7B97;&#x6CD5;&#x9898;&#xFF0C;&#x518D;&#x52A0;&#x4E0A;&#x6709;java&#x5F00;&#x53D1;&#x7ECF;&#x9A8C;&#xFF0C;&#x6240;&#x4EE5;typescript&#x4E0A;&#x624B;&#x4E5F;&#x5F88;&#x5FEB;&#x4E14;&#x5F88;&#x611F;&#x5174;&#x8DA3;&#x3002;&#x56E0;&#x4E3A;&#x64C5;&#x957F;&#x8FD9;&#x4E24;&#x9879;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4F7F;&#x5B66;&#x5386;&#x5E73;&#x5EB8;&#xFF0C;&#x751A;&#x81F3;&#x90FD;&#x4E0D;&#x662F;&#x8BA1;&#x7B97;&#x673A;&#x76F8;&#x5173;&#x4E13;&#x4E1A;&#xFF0C;&#x4F46;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5F97;&#x5230;jz&#x53CA;la&#x7684;&#x9762;&#x8BD5;&#x5B98;&#x8BA4;&#x53EF;&#x5E76;&#x4E0E;&#x4ED6;&#x4EEC;&#x6210;&#x4E3A;&#x540C;&#x5B66;</p>
<p>&#x72B9;&#x8BB0;&#x5F97;&#x521A;&#x8FDB;jz&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x56E0;&#x4E3A;&#x516C;&#x53F8;&#x6709;&#x63D0;&#x4F9B;&#x6B63;&#x7248;jetbrains&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;&#x4F46;&#x6211;&#x53D1;&#x73B0;&#x8EAB;&#x8FB9;&#x7684;&#x540C;&#x5B66;&#x90FD;&#x5728;&#x4F7F;&#x7528;&#x514D;&#x8D39;&#x7684;vscode&#xFF0C;&#x6240;&#x4EE5;&#x8BA9;&#x6211;&#x975E;&#x5E38;&#x8BE7;&#x5F02;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x653E;&#x7740;webstorm&#x4E0D;&#x7528;&#xFF0C;&#x90FD;&#x53BB;&#x7528;vscode&#x3002;&#x80AF;&#x5B9A;&#x662F;&#x6536;&#x8D39;&#x7684;&#x66F4;&#x597D;&#x7528;&#x554A;&#xFF01;&#x6240;&#x4EE5;&#x5C0F;&#x7EC4;&#x5185;&#x53EA;&#x6709;&#x6211;&#x4E00;&#x4E2A;&#x4EBA;&#x5728;&#x4F7F;&#x7528;webstorm&#xFF0C;&#x540E;&#x6765;&#x56E0;&#x4E3A;&#x5B89;&#x5168;&#x539F;&#x56E0;&#x6211;&#x4EEC;&#x7EC4;&#x5FC5;&#x987B;&#x8981;&#x5B89;&#x88C5;&#x4E00;&#x4E2A;&#x63D2;&#x4EF6;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x5F00;&#x59CB;&#x53EA;&#x6709;vscode&#x7248;&#x672C;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x610F;&#x5473;&#x7740;&#x5FC5;&#x987B;&#x8981;&#x4F7F;&#x7528;vscode&#xFF0C;&#x6211;&#x6709;&#x5C1D;&#x8BD5;&#x4F7F;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x53D1;&#x73B0;&#x5979;&#x5C31;&#x548C;&#x4E00;&#x5F20;&#x767D;&#x7EB8;&#x4E00;&#x6837;&#xFF0C;&#x4EE4;&#x6211;&#x5F88;&#x4E0D;&#x4E60;&#x60EF;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x62D2;&#x7EDD;&#x4F7F;&#x7528;&#xFF0C;&#x751A;&#x81F3;&#x548C;mentor&#x5435;&#x4E86;&#x4E00;&#x67B6;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x60F3;&#x6765;&#xFF0C;&#x4F30;&#x8BA1;&#x662F;&#x6211;&#x5F53;&#x521D;&#x4ED8;&#x8D39;&#x8D2D;&#x4E70;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x5DF2;&#x7ECF;&#x88AB;&#x5B83;&#x7ED9;CPU&#x4E86;&#xFF0C;&#x4E3A;&#x4E86;&#x8BF4;&#x670D;&#x81EA;&#x5DF1;&#x4E0D;&#x662F;&#x51A4;&#x5927;&#x5934;&#xFF0C;&#x81EA;&#x5DF1;&#x4E5F;&#x5728;&#x50AC;&#x7720;&#x81EA;&#x5DF1;&#x5427;&#x3002;&#x5728;&#x6B64;&#x4E0D;&#x5F97;&#x4E0D;&#x611F;&#x8C22;&#x90A3;&#x4F4D;mentor&#xFF0C;&#x6211;&#x5F53;&#x65F6;&#x5E94;&#x8BE5;&#x662F;&#x9B54;&#x6014;&#x4E86;&#xFF0C;&#x4F46;&#x5979;&#x4ECD;&#x7136;&#x4E0D;&#x79BB;&#x4E0D;&#x5F03;&#xFF0C;&#x751A;&#x81F3;&#x627E;&#x4E86;&#x5FC3;&#x7406;&#x90E8;&#x95E8;&#x7684;&#x540C;&#x5B66;&#x7ED9;&#x6211;&#x505A;&#x5FC3;&#x7406;&#x8F85;&#x5BFC;&#x53CA;&#x63D2;&#x4EF6;&#x5F00;&#x53D1;&#x7EC4;&#x7684;&#x540C;&#x5B66;&#x4E3A;&#x6211;&#x8BB2;&#x89E3;vscode&#x7684;&#x76F8;&#x5173;&#x914D;&#x7F6E;&#xFF0C;&#x8BA9;&#x5F00;&#x53D1;&#x66F4;&#x641E;&#x7B11;&#x3002;&#x5728;&#x6B64;&#xFF0C;&#x5BF9;&#x751F;&#x547D;&#x4E2D;&#x9047;&#x5230;&#x7684;&#x90A3;&#x4E9B;&#x7ED9;&#x4E0E;&#x8FC7;&#x6211;&#x5E2E;&#x52A9;&#x7684;&#x4EBA;&#xFF0C;&#x8BF4;&#x4E00;&#x58F0;&#x8C22;&#x8C22;&#x2014;&#x2014;&#x8FD9;&#x4E2A;&#x4E16;&#x754C;&#x5E76;&#x4E0D;&#x6E29;&#x67D4;&#xFF0C;&#x4F46;&#x6709;&#x4E9B;&#x4EBA;&#x771F;&#x7684;&#x5F88;&#x6E29;&#x67D4;^_^</p>
<p>&#x8BDD;&#x4E0D;&#x591A;&#x8BF4;&#xFF0C;&#x4E0B;&#x9762;&#x8FDB;&#x5165;&#x6B63;&#x9898;&#x3002;&#x56E0;&#x4E3A;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x9886;&#x57DF;&#x5404;&#x4E0D;&#x76F8;&#x540C;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4F1A;&#x8FDB;&#x884C;&#x5206;&#x7C7B;&#x8BB2;&#x89E3;</p>
<h1 id="&#x901A;&#x7528;"><a href="#&#x901A;&#x7528;" class="headerlink" title="&#x901A;&#x7528;"></a>&#x901A;&#x7528;</h1><h2 id="&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5FEB;&#x901F;&#x8DF3;&#x8F6C;&#x5230;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#x4E2D;"><a href="#&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5FEB;&#x901F;&#x8DF3;&#x8F6C;&#x5230;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#x4E2D;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5FEB;&#x901F;&#x8DF3;&#x8F6C;&#x5230;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#x4E2D;"></a>&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5FEB;&#x901F;&#x8DF3;&#x8F6C;&#x5230;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#x4E2D;</h2><p>&#x6709;&#x4E9B;&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x652F;&#x6301;cmd+&#x70B9;&#x51FB;&#x8DF3;&#x8F6C;&#x3002;&#x5982;&#x5927;&#x591A;&#x6570;&#x7684;&#x5BFC;&#x5165;&#x8BED;&#x53E5;&#xFF0C;&#x89C1;&#x4E0B;&#x56FE;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/8a5868a1d2e167d05582f0a81d583d482ef398c835625a057ab41816cea03873" alt="20240408211654_rec_.gif"></p>
<p>&#x4F46;&#x5176;&#x4ED6;&#x4F4D;&#x7F6E;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x91CC;&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x5927;&#x591A;&#x4E0D;&#x652F;&#x6301;&#x8DF3;&#x8F6C;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/fcb200385c8bcacfb76cb73066dec8c9bdafde8e38c558722c40c5068b9cb374" alt="image.png"></p>
<p>&#x5B89;&#x88C5;&#x63D2;&#x4EF6;</p>
<p><a href="/external_links/4caa9a1700c0e3c5ff9b4b01b2f3000f.html" target="blank" rel="noopener">marketplace.visualstudio.com/items?itemN&#x2026;</a></p>
<p>&#x5C06;&#x9F20;&#x6807;&#x5149;&#x6807;&#x653E;&#x5230;&#x5305;&#x542B;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E0A;&#xFF0C;&#x4F7F;&#x7528;cmd + e&#xFF08;Windows&#x7CFB;&#x7EDF;ctrl + e&#xFF09;</p>
<p>&#x5373;&#x53EF;&#x5F39;&#x51FA;&#x6700;&#x5339;&#x914D;&#x7684;&#x6587;&#x4EF6;&#x67E5;&#x8BE2;&#xFF0C;&#x5C31;&#x6211;&#x4F7F;&#x7528;&#x7684;&#x60C5;&#x51B5;&#x6765;&#x770B;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x603B;&#x662F;&#x6700;&#x5339;&#x914D;&#x7684;&#x3002;</p>
<p>&#x5982;&#x679C;&#x9ED8;&#x8BA4;&#x884C;&#x4E3A;&#x4E0D;&#x7B26;&#x5408;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x9009;&#x62E9;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x6309;&#x6211;&#x4EEC;&#x9009;&#x62E9;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x7CBE;&#x786E;&#x641C;&#x7D22;</p>
<p>&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x5FEB;&#x6377;&#x952E;&#x4E0D;&#x7B26;&#x5408;&#x4F60;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x4FEE;&#x6539;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/159eeead17bb48b629e93a5baf49274c6a2149d53845cc83c90979de823ae763" alt="20240408213723_rec_.gif"></p>
<h2 id="&#x66F4;&#x5FEB;&#x6377;&#x6E05;&#x6670;&#x7684;&#x6253;&#x5370;&#x8C03;&#x8BD5;"><a href="#&#x66F4;&#x5FEB;&#x6377;&#x6E05;&#x6670;&#x7684;&#x6253;&#x5370;&#x8C03;&#x8BD5;" class="headerlink" title="&#x66F4;&#x5FEB;&#x6377;&#x6E05;&#x6670;&#x7684;&#x6253;&#x5370;&#x8C03;&#x8BD5;"></a>&#x66F4;&#x5FEB;&#x6377;&#x6E05;&#x6670;&#x7684;&#x6253;&#x5370;&#x8C03;&#x8BD5;</h2><p>&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x4E3A;&#x4E86;&#x6392;&#x67E5;&#x95EE;&#x9898;&#xFF0C;&#x9700;&#x8981;&#x6253;&#x5370;&#x4E00;&#x4E9B;&#x4E1C;&#x897F;&#xFF0C;&#x5176;&#x5B9E;&#x5927;&#x90E8;&#x5206;&#x60C5;&#x51B5;&#x4E0B;&#x8FD9;&#x5C5E;&#x4E8E;&#x4E00;&#x79CD;&#x6A21;&#x677F;&#x64CD;&#x4F5C;</p>
<p>&#x5982;&#x4E0B;&#x56FE;&#xFF0C;&#x590D;&#x5236;&#x8981;&#x6253;&#x5370;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x8F93;&#x5165;&#x81EA;&#x5B9A;&#x4E49;&#x4EE3;&#x7801;&#x7247;&#x6BB5;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;log&#x6253;&#x5370;&quot;: {</span><br><span class="line">  &quot;prefix&quot;: &quot;clog&quot;,</span><br><span class="line">  &quot;body&quot;: [&quot;console.log(&apos;[ $CLIPBOARD ] &gt;&apos;, $CLIPBOARD)$0&quot;],</span><br><span class="line">  &quot;description&quot;: &quot;log&#x6253;&#x5370;&quot;,</span><br><span class="line">  &quot;scope&quot;: &quot;typescript,typescriptreact,javascript,javascriptreact&quot;</span><br><span class="line">},</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/5b47043f658d0b3b1e71f725ec51eeef2b15066323032e396d43c5de82966594" alt="20240312123929_rec_.gif"><br>&#x5176;&#x5B9E;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;&#x5B8F;&#x4E00;&#x6B65;&#x5B8C;&#x6210;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d742255352ed55cd390f83b6189329a99b177134588d6a6713ea2fcb668dd500" alt="20240312124632_rec_.gif"></p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x63D2;&#x4EF6;&#x5B9E;&#x73B0;,&#x7C7B;&#x4F3C;&#x7684;&#x63D2;&#x4EF6;&#x6709;&#x5F88;&#x591A;</p>
<p>&#x6211;&#x4E3E;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#xFF0C;&#x611F;&#x5174;&#x8DA3;&#x7684;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x641C;&#x7D22;console&#x5173;&#x952E;&#x8BCD;&#x5C31;&#x884C;</p>
<p><a href="/external_links/ab669ce898f55ece5e514caae49e75f1.html" target="blank" rel="noopener">marketplace.visualstudio.com/items?itemN&#x2026;</a></p>
<p>&#x5728;&#x6B64;&#x987A;&#x4FBF;&#x63A8;&#x8350;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x597D;&#x7528;&#x7684;vscode&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x751F;&#x6210;&#x5DE5;&#x5177;</p>
<p><a href="/external_links/5f02c003fed5a0f1fcd5fc8b5c942f53.html" target="blank" rel="noopener">snippet-generator.app/?descriptio&#x2026;</a></p>
<p>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x628A;&#x81EA;&#x5DF1;&#x5E38;&#x7528;&#x7684;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x6216;webstorm&#x91CC;&#x597D;&#x7528;&#x7684;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x8F6C;&#x79FB;&#x8FC7;&#x6765;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/def3e5ff6d945119cde6357fa4f1cce8d8f63d1e32a29bb500d2e2fa4c6d5244" alt="20240313105006_rec_.gif"></p>
<h2 id="&#x6E05;&#x6670;&#x7684;&#x4EE3;&#x7801;&#x9AD8;&#x4EAE;"><a href="#&#x6E05;&#x6670;&#x7684;&#x4EE3;&#x7801;&#x9AD8;&#x4EAE;" class="headerlink" title="&#x6E05;&#x6670;&#x7684;&#x4EE3;&#x7801;&#x9AD8;&#x4EAE;"></a>&#x6E05;&#x6670;&#x7684;&#x4EE3;&#x7801;&#x9AD8;&#x4EAE;</h2><p>&#x67E5;&#x770B;&#x4EE3;&#x7801;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x8FDB;&#x5165;&#x5BF9;&#x5E94;&#x6587;&#x4EF6;&#xFF0C;&#x751A;&#x81F3;&#x90FD;&#x4E0D;&#x9700;&#x8981;&#x9F20;&#x6807;hovre&#x5C31;&#x80FD;&#x77E5;&#x9053;&#x4E00;&#x6BB5;&#x4EE3;&#x7801;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;</p>
<p>&#x770B;&#x5230;&#x7D2B;&#x8272;&#x7684;&#x52A0;&#x7C97;&#x5C5E;&#x6027;&#x6211;&#x5C31;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x53EA;&#x8BFB;&#x7684;</p>
<p>&#x770B;&#x5230;&#x7EFF;&#x8272;&#x659C;&#x4F53;&#x6211;&#x5C31;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x679A;&#x4E3E;,&#x7D2B;&#x8272;&#x659C;&#x4F53;&#x662F;&#x679A;&#x4E3E;&#x503C;</p>
<p>&#x770B;&#x5230;&#x9EC4;&#x8272;&#x4E0B;&#x5212;&#x7EBF;&#x6211;&#x5C31;&#x77E5;&#x9053;&#x5B83;&#x662F;&#x88AB;async&#x4FEE;&#x9970;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x4E0B;&#x610F;&#x8BC6;&#x5C31;&#x4F1A;&#x8003;&#x8651;&#x5230;&#x8981;&#x4E0D;&#x8981;&#x52A0;await&#x8C03;&#x7528;&#xFF0C;&#x867D;&#x7136;eslint&#x4E4B;&#x7C7B;&#x7684;&#x4E5F;&#x80FD;&#x68C0;&#x6D4B;&#x5230;&#xFF0C;&#x4F46;&#x5B83;&#x53EA;&#x4F1A;&#x4E00;&#x5200;&#x5207;&#x7684;&#x5168;&#x90E8;&#x8B66;&#x544A;&#x3002;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x8981;&#x52A0;await&#x4FEE;&#x9970;&#xFF0C;&#x6240;&#x6709;&#x90FD;&#x8B66;&#x544A;&#x4E00;&#x5B9A;&#x662F;&#x597D;&#x7684;&#x5417;&#xFF1F;&#x65E0;&#x7528;&#x7684;&#x8B66;&#x544A;&#xFF0C;&#x751A;&#x81F3;&#x9519;&#x8BEF;&#x7684;&#x8B66;&#x544A;&#x53EA;&#x4F1A;&#x5F71;&#x54CD;&#x5199;&#x4EE3;&#x7801;&#x7684;&#x5FC3;&#x60C5;&#x3002;&#x5B83;&#x5E94;&#x8BE5;&#x8868;&#x8FBE;&#x4E00;&#x79CD;&#x8BED;&#x4E49;&#xFF0C;&#x7528;&#x6211;&#x559C;&#x6B22;&#x7684;&#x4E0D;&#x540C;&#x4E8E;&#x53D8;&#x91CF;&#xFF0C;&#x5C5E;&#x6027;&#x4E4B;&#x7C7B;&#x7684;&#x5176;&#x4ED6;&#x989C;&#x8272;&#x5C31;&#x5F88;&#x597D;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a19ead00252b10bb7659c048b400e914f238066a538a5f678f9260fdbad96aa8" alt="20240313125122_rec_.gif"></p>
<h2 id="&#x66F4;&#x5FEB;&#x6377;&#x7684;&#x529F;&#x80FD;&#x5165;&#x53E3;"><a href="#&#x66F4;&#x5FEB;&#x6377;&#x7684;&#x529F;&#x80FD;&#x5165;&#x53E3;" class="headerlink" title="&#x66F4;&#x5FEB;&#x6377;&#x7684;&#x529F;&#x80FD;&#x5165;&#x53E3;"></a>&#x66F4;&#x5FEB;&#x6377;&#x7684;&#x529F;&#x80FD;&#x5165;&#x53E3;</h2><p>&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#x4EE5;&#x53CA;&#x6E90;&#x4EE3;&#x7801;&#x7BA1;&#x7406;&#x9762;&#x677F;&#x91CC;&#x7684;&#x529F;&#x80FD;tab&#x662F;&#x53EF;&#x4EE5;&#x62D6;&#x52A8;&#x6216;&#x8005;&#x9690;&#x85CF;&#x7684;</p>
<p>&#x53EF;&#x4EE5;&#x9690;&#x85CF;&#x4E0D;&#x60F3;&#x8981;&#x7684;tab&#x8BA9;&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#x5668;&#x66F4;&#x52A0;&#x6E05;&#x723D;</p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x628A;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;gitlens&#x7684;tab&#x62D6;&#x51FA;&#x6765;&#xFF0C;&#x8BA9;git&#x89C6;&#x56FE;&#x7A7A;&#x95F4;&#x66F4;&#x5927;,&#x66F4;&#x6E05;&#x6670;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/22784be7821d6c9e98b06b505718162133a383756f9f20564a6945e4606791c8" alt="20240313130254_rec_.gif"></p>
<h2 id="&#x8BA9;&#x6587;&#x4EF6;&#x5939;&#x5C42;&#x7EA7;&#x66F4;&#x6E05;&#x6670;"><a href="#&#x8BA9;&#x6587;&#x4EF6;&#x5939;&#x5C42;&#x7EA7;&#x66F4;&#x6E05;&#x6670;" class="headerlink" title="&#x8BA9;&#x6587;&#x4EF6;&#x5939;&#x5C42;&#x7EA7;&#x66F4;&#x6E05;&#x6670;"></a>&#x8BA9;&#x6587;&#x4EF6;&#x5939;&#x5C42;&#x7EA7;&#x66F4;&#x6E05;&#x6670;</h2><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x9762;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x4F1A;&#x5408;&#x5E76;&#x5C55;&#x793A;</p>
<p>&#x5982;&#x4E0B;&#x56FE;&#xFF0C;style&#x7684;&#x4E0B;&#x5C42;&#x6587;&#x4EF6;&#x5939;&#x662F;public&#x5417;&#xFF1F;</p>
<p>&#x4E0D;&#xFF0C;&#x5176;&#x5B9E;&#x662F;css&#xFF0C;&#x8FD9;&#x79CD;&#x4E0D;&#x7EDF;&#x4E00;&#x7684;&#x5C55;&#x793A;&#x81F3;&#x5C11;&#x4F1A;&#x8BA9;&#x6211;&#x6709;&#x4E9B;&#x56F0;&#x60D1;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1ee7ad57aae097ecea5eab1f0101be91ed60a2aabd47fd0e20e9665c56825578" alt="image.png"></p>
<p>&#x66F4;&#x6539;&#x5982;&#x4E0B;&#x914D;&#x7F6E;&#x5373;&#x53EF;&#x5C55;&#x793A;&#x4E3A;&#x4E0B;&#x56FE;&#x6837;&#x5B50;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;explorer.compactFolders&quot;: false</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/016c8c9a18f7c321fff4b743ea96c866116ab36d64b0308192bff4d8b0e4e31e" alt="image.png"></p>
<h2 id="&#x5FEB;&#x901F;&#x6253;&#x5F00;&#x5E76;&#x5229;&#x7528;vscode&#x81EA;&#x8EAB;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x4FEE;&#x6539;&#x975E;&#x9879;&#x76EE;&#x6587;&#x4EF6;"><a href="#&#x5FEB;&#x901F;&#x6253;&#x5F00;&#x5E76;&#x5229;&#x7528;vscode&#x81EA;&#x8EAB;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x4FEE;&#x6539;&#x975E;&#x9879;&#x76EE;&#x6587;&#x4EF6;" class="headerlink" title="&#x5FEB;&#x901F;&#x6253;&#x5F00;&#x5E76;&#x5229;&#x7528;vscode&#x81EA;&#x8EAB;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x4FEE;&#x6539;&#x975E;&#x9879;&#x76EE;&#x6587;&#x4EF6;"></a>&#x5FEB;&#x901F;&#x6253;&#x5F00;&#x5E76;&#x5229;&#x7528;vscode&#x81EA;&#x8EAB;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#x4FEE;&#x6539;&#x975E;&#x9879;&#x76EE;&#x6587;&#x4EF6;</h2><p>&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5B89;&#x88C5;&#x4F7F;&#x7528;&#x4E00;&#x4E9B;&#x5DE5;&#x5177;&#x65F6;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6216;&#x662F;host&#x6587;&#x4EF6;&#x5565;&#x7684;&#xFF0C;&#x90A3;&#x4E9B;&#x6587;&#x7AE0;&#x4E00;&#x822C;&#x90FD;&#x4F1A;&#x8BF4;&#x4F7F;&#x7528;vim&#x4E4B;&#x7C7B;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x8BF4;&#x5B9E;&#x8BDD;&#x771F;&#x7684;&#x5F88;&#x96BE;&#x7528;&#xFF0C;&#x4E0D;&#x4EC5;&#x770B;&#x7740;&#x4E0D;&#x6E05;&#x6670;&#xFF0C;&#x4FEE;&#x6539;&#x66F4;&#x662F;&#x4E0D;&#x65B9;&#x4FBF;&#x3002;&#x5982;&#x4E0B;&#x56FE;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/266a74f269a4cde34edf96e0cc325aef2057c7016552e09510ddbf6810809a38" alt="20240315125939_rec_.gif"></p>
<p>&#x5176;&#x5B9E;vscode&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;code&#x547D;&#x4EE4;&#xFF0C;&#x53EF;&#x4EE5;&#x5F88;&#x65B9;&#x4FBF;&#x7684;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x6216;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x540C;&#x6837;&#x662F;&#x4FEE;&#x6539;&#x4E0A;&#x8FF0;&#x6587;&#x4EF6;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/b48e83a1d731495ac7746e7629d4a656aaec47f035a0df8230c31ea906abb580" alt="20240315130237_rec_.gif"></p>
<h2 id="&#x81EA;&#x52A8;&#x590D;&#x5236;&#x7EC8;&#x7AEF;&#x4E2D;&#x9009;&#x62E9;&#x7684;&#x6587;&#x672C;"><a href="#&#x81EA;&#x52A8;&#x590D;&#x5236;&#x7EC8;&#x7AEF;&#x4E2D;&#x9009;&#x62E9;&#x7684;&#x6587;&#x672C;" class="headerlink" title="&#x81EA;&#x52A8;&#x590D;&#x5236;&#x7EC8;&#x7AEF;&#x4E2D;&#x9009;&#x62E9;&#x7684;&#x6587;&#x672C;"></a>&#x81EA;&#x52A8;&#x590D;&#x5236;&#x7EC8;&#x7AEF;&#x4E2D;&#x9009;&#x62E9;&#x7684;&#x6587;&#x672C;</h2><p>&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x5728;&#x542F;&#x52A8;&#x9879;&#x76EE;&#x65F6;&#x4F1A;&#x51FA;&#x73B0;&#x4E00;&#x4E9B;&#x62A5;&#x9519;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x767E;&#x5EA6;&#x53BB;&#x89E3;&#x51B3;</p>
<p>&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x53BB;&#x641C;&#x7D22;&#x4E00;&#x4E9B;&#x7EC8;&#x7AEF;&#x6253;&#x5370;&#x7684;&#x5173;&#x952E;&#x5B57;&#xFF0C;&#x914D;&#x7F6E;&#x81EA;&#x52A8;&#x590D;&#x5236;&#x7684;&#x8BDD;&#x5C31;&#x53EF;&#x4EE5;&#x7701;&#x53BB;&#x624B;&#x52A8;&#x590D;&#x5236;&#x7684;&#x64CD;&#x4F5C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;terminal.integrated.copyOnSelection&quot;: true</span><br></pre></td></tr></table></figure>

<h2 id="&#x7981;&#x6B62;&#x901A;&#x8FC7;&#x62D6;&#x653E;&#x6765;&#x79FB;&#x52A8;&#x9009;&#x4E2D;&#x5185;&#x5BB9;"><a href="#&#x7981;&#x6B62;&#x901A;&#x8FC7;&#x62D6;&#x653E;&#x6765;&#x79FB;&#x52A8;&#x9009;&#x4E2D;&#x5185;&#x5BB9;" class="headerlink" title="&#x7981;&#x6B62;&#x901A;&#x8FC7;&#x62D6;&#x653E;&#x6765;&#x79FB;&#x52A8;&#x9009;&#x4E2D;&#x5185;&#x5BB9;"></a>&#x7981;&#x6B62;&#x901A;&#x8FC7;&#x62D6;&#x653E;&#x6765;&#x79FB;&#x52A8;&#x9009;&#x4E2D;&#x5185;&#x5BB9;</h2><p>&#x6709;&#x65F6;&#x5019;&#x9009;&#x4E2D;&#x4E86;&#x4E00;&#x4E9B;&#x6587;&#x672C;&#xFF0C;&#x4F46;&#x56E0;&#x4E3A;&#x8BEF;&#x89E6;&#x4E0D;&#x5C0F;&#x5FC3;&#x628A;&#x4EE3;&#x7801;&#x79FB;&#x5230;&#x4E86;&#x522B;&#x5904;&#xFF0C;&#x5982;&#x4E0B;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/21d6f8aff97f32ce615dfb9ccf0f1fee417861b27f7b7fc6e6fd3d11db529f54" alt="20240310184145_rec_.gif"><br>&#x8FD9;&#x4E2A;&#x56E0;&#x4EBA;&#x800C;&#x5F02;&#xFF0C;&#x6211;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x53CD;&#x800C;&#x6709;&#x65F6;&#x5019;&#x56E0;&#x4E3A;&#x8BEF;&#x89E6;&#x8BA9;&#x6211;&#x5F88;&#x56F0;&#x60D1;&#xFF0C;&#x914D;&#x7F6E;&#x5982;&#x4E0B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6539;&#x4E3A;false&#x5373;&#x53EF;&#x7981;&#x6B62;&#x62D6;&#x52A8;</span><br><span class="line">&quot;editor.dragAndDrop&quot;: false</span><br></pre></td></tr></table></figure>

<h1 id="&#x4EE3;&#x7801;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;"><a href="#&#x4EE3;&#x7801;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;" class="headerlink" title="&#x4EE3;&#x7801;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;"></a>&#x4EE3;&#x7801;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;</h1><h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>&#x6709;&#x4E9B;&#x5305;&#x7684;&#x7248;&#x672C;&#x4F7F;&#x7528;&#x4E86;^&#x4FEE;&#x9970;&#xFF0C;&#x5BFC;&#x81F4;&#x7248;&#x672C;&#x5E76;&#x672A;&#x5B8C;&#x5168;&#x9501;&#x5B9A;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x53EF;&#x80FD;&#x67D0;&#x4E2A;&#x5C0F;&#x7248;&#x672C;&#x6709;&#x95EE;&#x9898;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x6392;&#x67E5;</p>
<p>&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x5177;&#x4F53;&#x5B89;&#x88C5;&#x4E86;&#x54EA;&#x4E2A;&#x7248;&#x672C;</p>
<p>&#x901A;&#x8FC7;&#x4E0B;&#x56FE;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x5F53;&#x524D;&#x5B89;&#x88C5;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x6700;&#x65B0;&#x7248;&#x672C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x67E5;&#x770B;&#x7EC6;&#x8282;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/100b0e1960962fbf4c1f36ed6bdfc259bcd1e2436fd23ba9f4e3e16fc0c3a47d" alt="20240313133556_rec_.gif"><br>&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6709;&#x4E9B;&#x5305;&#x662F;&#x95F4;&#x63A5;&#x4F9D;&#x8D56;&#x7684;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x5217;&#x5728;package.json&#x91CC;&#xFF0C;&#x6211;&#x60F3;&#x77E5;&#x9053;node_moduels&#x91CC;&#x5230;&#x5E95;&#x6709;&#x6CA1;&#x6709;&#xFF0C;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x641C;&#x7D22;&#xFF0C;&#x4EE5;lodash&#x4E3A;&#x4F8B;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/4e6b2d7965bac0b1c3cf81d4474541b4fcefe07940a5bdc1adf5875dce895723" alt="20240313134004_rec_.gif"></p>
<h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><h3 id="&#x5C5E;&#x6027;&#x4E0E;&#x65B9;&#x6CD5;&#x7B49;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;"><a href="#&#x5C5E;&#x6027;&#x4E0E;&#x65B9;&#x6CD5;&#x7B49;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;" class="headerlink" title="&#x5C5E;&#x6027;&#x4E0E;&#x65B9;&#x6CD5;&#x7B49;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;"></a>&#x5C5E;&#x6027;&#x4E0E;&#x65B9;&#x6CD5;&#x7B49;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/de22605a46576a1ad74552f35725cb15d1439b34a412bcc1dadd60e46c63776b" alt="20240313134447_rec_.gif"></p>
<h3 id="css&#x7C7B;&#x540D;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;"><a href="#css&#x7C7B;&#x540D;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;" class="headerlink" title="css&#x7C7B;&#x540D;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;"></a>css&#x7C7B;&#x540D;&#x63D0;&#x793A;&#x548C;&#x8DF3;&#x8F6C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/e624ed2f46298542f83d7fbbb1584f373ebb0ba325b1a88a910bf03ae6d4b0f5" alt="20240313134641_rec_.gif"></p>
<h3 id="vuex&#x8DF3;&#x8F6C;"><a href="#vuex&#x8DF3;&#x8F6C;" class="headerlink" title="vuex&#x8DF3;&#x8F6C;"></a>vuex&#x8DF3;&#x8F6C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a27e8a77256d84c099482d4c2b7c555e34a5bec0ea76ce143cb260a65f3db523" alt="20240313135326_rec_.gif"></p>
<h3 id="&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;"><a href="#&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;" class="headerlink" title="&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;"></a>&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#x63D0;&#x793A;&#x4E0E;&#x8DF3;&#x8F6C;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c205f8a6342b112124419b3eb1ef34538a6bea3ba45cf6fe6beea18f2997b2e3" alt="20240313135454_rec_.gif"></p>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><p>&#x672C;&#x4EBA;&#x4E3B;&#x7528;react,&#x4E2A;&#x4EBA;&#x8BA4;&#x4E3A;vscode&#x5BF9;react&#x7684;&#x652F;&#x6301;&#x6BD4;vue&#x66F4;&#x597D;&#xFF0C;&#x4E0A;&#x9762;vue&#x80FD;&#x505A;&#x5230;&#x7684;,react&#x4E5F;&#x90FD;&#x80FD;&#x505A;&#x5230;&#xFF0C;&#x5C31;&#x4E0D;&#x8D58;&#x8FF0;&#x4E86;</p>
<p>&#x8FD9;&#x91CC;&#x7B80;&#x5355;&#x518D;&#x4E3E;&#x4E2A;css&#x7684;&#x4F8B;&#x5B50;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/b3fc09dd2a618cc89141c2b340bc1059964d56ff903683a25e64b70e40eca350" alt="20240313140245_rec_.gif"><br>&#x987A;&#x4FBF;&#x5C31;&#x6B64;&#x8BF4;&#x4E00;&#x4E2A;&#x76F8;&#x5173;&#x7684;&#xFF0C;&#x5C5E;&#x6027;&#x7684;&#x503C;&#xFF0C;&#x5982;className&#x5230;&#x5E95;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x8FD8;&#x662F;jsx&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;vscode&#x9ED8;&#x8BA4;&#x662F;&#x81EA;&#x52A8;&#x63A8;&#x65AD;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;className&#x9ED8;&#x8BA4;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x7531;&#x6B64;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x5982;&#x672C;&#x4EBA;&#x9879;&#x76EE;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x90FD;&#x662F;cssmodule&#xFF0C;&#x5176;&#x5B9E;&#x9700;&#x8981;&#x8F93;&#x5165;jsx&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x5176;&#x5B9E;&#x5012;&#x4E0D;&#x5982;&#x8FD9;&#x6837;&#x8BF4;&#xFF0C;&#x7EDD;&#x5927;&#x591A;&#x6570;&#x5C5E;&#x6027;&#x503C;&#xFF0C;&#x5305;&#x62EC;className&#xFF0C;&#x5176;&#x5B9E;&#x6211;&#x60F3;&#x8F93;&#x5165;&#x7684;&#x90FD;&#x662F;jsx&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x5982;&#x4E0B;&#x914D;&#x7F6E;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;&quot;javascript.preferences.jsxAttributeCompletionStyle&quot;: &quot;braces&quot;,</span><br><span class="line">&quot;typescript.preferences.jsxAttributeCompletionStyle&quot;: &quot;braces&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/b7eb460d94b8c0e5f9bb6eb9fb1c29fdaea82694638afa9cceaff77dbb240d5f" alt="20240313140832_rec_.gif"></p>
<p>&#x8BDD;&#x8BF4;webstorm&#xFF0C;&#x4F60;&#x8FDE;&#x5927;&#x5C0F;&#x5199;&#x90FD;&#x4E0D;&#x8BA4;&#x8BC6;&#x4E86;&#x5417;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x751F;&#x6548;&#x5417;&#xFF0C;&#x4F60;&#x8FD8;****&#x8DF3;&#x8F6C;&#xFF1F;&#xFF1F;&#xFF1F;&#x771F;&#x662F;**&#xFF01;</p>
<p>&#x8FD9;&#x91CC;&#x5C31;&#x4E0D;&#x5F97;&#x4E0D;&#x8BF4;webstorm&#x7684;&#x4E00;&#x5927;&#x7F3A;&#x70B9;&#xFF0C;&#x603B;&#x662F;&#x559C;&#x6B22;&#x5F3A;&#x884C;&#x63D0;&#x793A;&#xFF0C;&#x7ED9;&#x4EBA;&#x4E00;&#x79CD;&#x4EFF;&#x4F5B;&#x5F88;&#x667A;&#x80FD;&#x7684;&#x611F;&#x89C9;&#x3002;&#x6240;&#x4EE5;&#x5F88;&#x5403;&#x6027;&#x80FD;&#xFF0C;&#x5BB9;&#x6613;&#x5361;&#x987F;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1698dd71f219a42fa74e131a6d5e7cf1ab05cd9118d49f212c9b682386585869" alt="20240313141021_rec_.gif"></p>
<p>vscode&#x4E0D;&#x4EC5;&#x53EF;&#x4EE5;&#x6B63;&#x786E;&#x63D0;&#x793A;&#xFF0C;&#x5BF9;&#x4E8E;&#x9519;&#x8BEF;&#x4E5F;&#x6709;&#x5F88;&#x6E05;&#x6670;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x5E76;&#x4E14;&#x63D0;&#x4F9B;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6848;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/8c7a8ae14d443a6d0d39a1e65e4732aa14a372de2ff9efa34f72889e83018bc5" alt="20240313141437_rec_.gif"></p>
<h1 id="&#x7ED3;&#x8BED;"><a href="#&#x7ED3;&#x8BED;" class="headerlink" title="&#x7ED3;&#x8BED;"></a>&#x7ED3;&#x8BED;</h1><p>&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x4F7F;&#x7528;webstorm&#x8FDC;&#x8D85;&#x4E24;&#x5E74;&#x534A;&#x7684;&#x5F00;&#x53D1;&#x8005;&#xFF0C;vscode&#x4EC5;&#x7528;&#x534A;&#x4E2A;&#x6708;&#x5C31;&#x901A;&#x8FC7;&#x5B83;&#x5F3A;&#x5927;&#x7684;&#x4EE3;&#x7801;&#x63D0;&#x793A;&#x4E0E;&#x641C;&#x7D22;&#x53CA;&#x4EE3;&#x7801;&#x8DF3;&#x8F6C;&#x8BA9;&#x6211;&#x6709;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#xFF0C;&#x96BE;&#x602A;&#x5927;&#x516C;&#x53F8;&#x7684;&#x5458;&#x5DE5;&#x53EF;&#x4EE5;&#x514D;&#x8D39;&#x4F7F;&#x7528;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x90FD;&#x4E0D;&#x613F;&#x610F;&#x770B;webstorm&#x4E00;&#x773C;&#xFF0C;&#x57FA;&#x672C;&#x90FD;&#x5728;&#x4F7F;&#x7528;vscode&#x3002;</p>
<p>&#x672C;&#x4EBA;&#x6700;&#x8FD1;&#x5728;&#x51C6;&#x5907;&#x664B;&#x5347;&#x6750;&#x6599;&#xFF0C;&#x6240;&#x4EE5;&#x6709;&#x70B9;&#x5FD9;&#x3002;&#x4E14;&#x7531;&#x4E8E;&#x914D;&#x7F6E;&#x7A0D;&#x5FAE;&#x6709;&#x70B9;&#x591A;&#xFF0C;&#x4E3A;&#x4E86;&#x4E0D;&#x803D;&#x8BEF;&#x5927;&#x5BB6;&#x9605;&#x8BFB;&#xFF0C;&#x6211;&#x53EA;&#x622A;&#x53D6;&#x4E86;&#x4E00;&#x90E8;&#x5206;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8BFB;&#x8005;&#x8001;&#x7237;&#x6709;&#x9047;&#x5230;&#x4EC0;&#x4E48;&#x75DB;&#x70B9;&#x90FD;&#x53EF;&#x4EE5;&#x5728;&#x8BC4;&#x8BBA;&#x533A;&#x7559;&#x8A00;&#xFF0C;&#x6211;&#x4F1A;&#x4E00;&#x4E00;&#x89E3;&#x51B3;&#xFF0C;&#x8BF7;&#x76F8;&#x4FE1;&#x6211;&#x7684;&#x6CA1;&#x80FD;&#x529B;&#xFF01;&#x7B49;&#x6211;&#x664B;&#x5347;&#x4E4B;&#x540E;&#x57FA;&#x672C;&#x5C31;&#x4E0D;&#x7528;&#x5199;&#x4EE3;&#x7801;&#x4E86;&#xFF0C;&#x5230;&#x65F6;&#x5019;&#x4F1A;&#x628A;&#x6587;&#x7AE0;&#x8865;&#x5168;&#x5E76;&#x4E14;&#x5C31;vscode&#x7684;&#x63D0;&#x6548;&#x6280;&#x5DE7;&#x5F00;&#x4E2A;&#x4E13;&#x9898;</p>
<p>&#x4FD7;&#x8BDD;&#x8BF4;&#xFF0C;&#x5DE5;&#x6B32;&#x5584;&#x5176;&#x4E8B;&#xFF0C;&#x5FC5;&#x5148;&#x5229;&#x5176;&#x5668;&#x3002;&#x6709;&#x4E00;&#x4E2A;&#x8D81;&#x624B;&#x7684;&#x7F16;&#x8F91;&#x5668;&#x53EF;&#x4EE5;&#x6781;&#x5927;&#x63D0;&#x5347;&#x81EA;&#x5DF1;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x53CA;&#x5E78;&#x798F;&#x611F;&#x3002;&#x6BD5;&#x7ADF;&#x8DDF;&#x7F16;&#x8F91;&#x5668;&#x76F8;&#x5904;&#x7684;&#x65F6;&#x95F4;&#x751A;&#x81F3;&#x6BD4;&#x8DDF;&#x5BF9;&#x8C61;&#x76F8;&#x5904;&#x7684;&#x65F6;&#x95F4;&#x8FD8;&#x8981;&#x957F;&#x256E;(&#x256F;&#x25BD;&#x2570;)&#x256D;</p>
<p>webstorm&#x5728;&#x67D0;&#x4E9B;&#x4EBA;&#x773C;&#x91CC;&#x6216;&#x8BB8;&#x5F88;&#x597D;&#x7528;&#xFF0C;&#x4F46;&#x6211;&#x613F;&#x79F0;vscode&#x4E3A;&#x5B87;&#x5B99;&#x7EA7;&#x7F16;&#x8F91;&#x5668;(#^.^#)</p>
<p>&#x4E5F;&#x8BB8;&#xFF0C;&#x5728;&#x7A0B;&#x5E8F;&#x5458;&#x7684;&#x4E16;&#x754C;&#xFF0C;&#x6536;&#x8D39;&#x7684;&#x5E76;&#x4E0D;&#x4E00;&#x5B9A;&#x5C31;&#x662F;&#x6700;&#x597D;&#x7684;&#x5427;&#xFF01;&#xFF01;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/b417a01425226f07f72848981d2ea941.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7344573755643494454.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7344573755643494454.html" itemprop="url">老项目的外链太多？我是这么处理的</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-11T08:00:00+08:00">
                2024-03-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x4F5C;&#x8005;&#xFF1A;&#x82CF;&#x6893;&#x94ED;</p>
</blockquote>
<h2 id="&#x80CC;&#x666F;&#x4ECB;&#x7ECD;"><a href="#&#x80CC;&#x666F;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x80CC;&#x666F;&#x4ECB;&#x7ECD;"></a>&#x80CC;&#x666F;&#x4ECB;&#x7ECD;</h2><p>&#x76EE;&#x524D;&#xFF0C;&#x53E4;&#x8317;&#x524D;&#x7AEF;&#x56E2;&#x961F;&#x5185;&#x90E8;&#x7EDF;&#x4E00;&#x91C7;&#x7528;&#x4E86; React &#x6280;&#x672F;&#x6808;&#xFF0C;&#x6240;&#x6709;&#x65B0;&#x9879;&#x76EE;&#x548C;&#x57FA;&#x7840;&#x5EFA;&#x8BBE;&#x5747;&#x57FA;&#x4E8E; React &#x6846;&#x67B6;&#x5F00;&#x53D1;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x8BB8;&#x591A;&#x8001;&#x65E7;&#x7684; Vue &#x5E94;&#x7528;&#x4ECD;&#x5728;&#x4F7F;&#x7528;&#x548C;&#x8FD0;&#x884C;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x9879;&#x76EE;&#x8FC1;&#x79FB;&#xFF0C;&#x7EDF;&#x4E00;&#x6280;&#x672F;&#x6808;&#xFF0C;&#x51CF;&#x5C11;&#x5F00;&#x53D1;&#x8BA4;&#x77E5;&#x8D1F;&#x62C5;&#xFF0C;&#x63A5;&#x8F68;&#x73B0;&#x6709;&#x57FA;&#x5EFA;&#xFF0C;&#x589E;&#x5F3A;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x597D;&#x5730;&#x6EE1;&#x8DB3;&#x4E1A;&#x52A1;&#x65B0;&#x9700;&#x6C42;&#x3002;</p>
<p>&#x7279;&#x522B;&#x5730;&#xFF0C;&#x4EE5;&#x7B14;&#x8005;&#x8D1F;&#x8D23;&#x7684;&#x5B66;&#x9662;&#x4E1A;&#x52A1;&#x57DF;&#x4E3A;&#x4F8B;&#xFF0C;&#x5176;&#x4E1A;&#x52A1;&#x5177;&#x6709;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x7279;&#x70B9;&#xFF1A;&#x5B58;&#x5728;&#x4F17;&#x591A;&#x5916;&#x90E8;&#x94FE;&#x63A5;&#x8DF3;&#x8F6C;&#x573A;&#x666F;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;&#x53D1;&#x5E03;&#x7ED9;&#x52A0;&#x76DF;&#x5546;&#x7684;&#x8003;&#x8BD5;&#x5F85;&#x529E;&#x94FE;&#x63A5;&#x3001;&#x5F20;&#x8D34;&#x5728;&#x5E97;&#x5185;&#x8BBE;&#x5907;&#x4E0A;&#x7684;&#x8D44;&#x6599;&#x4E8C;&#x7EF4;&#x7801;&#x7B49;&#xFF09;&#x3002;&#x5728;&#x8FC1;&#x79FB;&#x8001;&#x9879;&#x76EE;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x8981;&#x683C;&#x5916;&#x5173;&#x6CE8;&#x5916;&#x94FE;&#x6CBB;&#x7406;&#x3002;</p>
<p>&#x672C;&#x6587;&#x4E3B;&#x8981;&#x8BB2;&#x8FF0;&#x7B14;&#x8005;&#x6CBB;&#x7406;&#x8001;&#x9879;&#x76EE;&#x5B58;&#x91CF;&#x5916;&#x94FE;&#x6295;&#x653E;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x601D;&#x8DEF;&#x3002;</p>
<h2 id="&#x73B0;&#x72B6;&#x53CA;&#x76EE;&#x6807;&#x5206;&#x6790;"><a href="#&#x73B0;&#x72B6;&#x53CA;&#x76EE;&#x6807;&#x5206;&#x6790;" class="headerlink" title="&#x73B0;&#x72B6;&#x53CA;&#x76EE;&#x6807;&#x5206;&#x6790;"></a>&#x73B0;&#x72B6;&#x53CA;&#x76EE;&#x6807;&#x5206;&#x6790;</h2><p>&#x5728;&#x8FC1;&#x79FB;&#x8001;&#x9879;&#x76EE;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x4E86;&#x8BB8;&#x591A;&#x95EE;&#x9898;&#xFF1A;</p>
<h3 id="&#x5916;&#x94FE;&#x66F4;&#x65B0;&#x7684;&#x8DF3;&#x8F6C;&#x95EE;&#x9898;"><a href="#&#x5916;&#x94FE;&#x66F4;&#x65B0;&#x7684;&#x8DF3;&#x8F6C;&#x95EE;&#x9898;" class="headerlink" title="&#x5916;&#x94FE;&#x66F4;&#x65B0;&#x7684;&#x8DF3;&#x8F6C;&#x95EE;&#x9898;"></a>&#x5916;&#x94FE;&#x66F4;&#x65B0;&#x7684;&#x8DF3;&#x8F6C;&#x95EE;&#x9898;</h3><p>&#x6211;&#x4EEC;&#x5BF9;&#x5916;&#x6295;&#x653E;&#x7684;&#x94FE;&#x63A5;&#x901A;&#x5E38;&#x5177;&#x6709;&#x5F88;&#x5F3A;&#x7684;&#x65F6;&#x6548;&#x6027;&#xFF0C;&#x4F8B;&#x5982;&#x7ED9;&#x52A0;&#x76DF;&#x5546;&#x53D1;&#x9001;&#x7684;&#x8003;&#x8BD5;&#x94FE;&#x63A5;&#x7B49;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x5916;&#x94FE;&#x662F;&#x9759;&#x6001;&#x3001;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x901A;&#x5E38;&#x4F1A;&#x91C7;&#x7528;&#x91CD;&#x5B9A;&#x5411;&#x903B;&#x8F91;&#xFF0C;&#x5C06;&#x65E7;&#x8DEF;&#x7531;&#x6620;&#x5C04;&#x5230;&#x65B0;&#x8DEF;&#x7531;&#xFF0C;&#x8BA9;&#x8001;&#x5916;&#x94FE;&#x4E5F;&#x80FD;&#x8DF3;&#x8F6C;&#x5230;&#x65B0;&#x9875;&#x9762;&#x3002;</p>
<p>&#x5728;&#x8001;&#x9879;&#x76EE;&#x7684;&#x5BFC;&#x822A;&#x5B88;&#x536B;&#x91CC;&#xFF0C;&#x5DF2;&#x7ECF;&#x79EF;&#x7D2F;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x903B;&#x8F91;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x90FD;&#x6709;&#x4E00;&#x5957;&#x81EA;&#x5DF1;&#x5355;&#x72EC;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x7B56;&#x7565;&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/7be44aeee68de0a88666d23d7e585c7d7cdd22d42d8c54e8b55ef1d72d63a342" alt="&#x73B0;&#x6709;&#x903B;&#x8F91;"></p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x8001;&#x9879;&#x76EE;&#x8FC1;&#x79FB;&#x5B8C;&#x6210;&#x4E0B;&#x7EBF;&#x540E;&#xFF0C;&#x5DF2;&#x7ECF;&#x6295;&#x653E;&#x51FA;&#x53BB;&#x7684;&#x8001;&#x94FE;&#x63A5;&#x5C06;&#x4F1A;<strong>&#x65E0;&#x6CD5;&#x8BBF;&#x95EE;</strong>&#xFF08;&#x56E0;&#x4E3A;&#x6240;&#x6709;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x903B;&#x8F91;&#x90FD;&#x5728;&#x8001;&#x9879;&#x76EE;&#x5185;&#x5B8C;&#x6210;&#xFF09;</p>
<p>&#x5176;&#x6B21;&#xFF0C;&#x5916;&#x94FE;&#x6295;&#x653E;&#x8FD8;&#x5B58;&#x5728;&#x4E00;&#x5B9A;&#x7684;&#x4E0D;&#x786E;&#x5B9A;&#x6027;&#xFF0C;&#x6709;&#x7684;&#x751A;&#x81F3;&#x662F;&#x4EA7;&#x7814;&#x56E2;&#x961F;&#x81EA;&#x5DF1;&#x90FD;&#x4E0D;&#x77E5;&#x9053;&#x7684;&#x5916;&#x94FE;&#x6295;&#x653E;&#xFF0C;&#x8FD9;&#x5C31;&#x5BFC;&#x81F4;&#x6211;&#x4EEC;&#x6709;&#x65F6;&#x5BF9;&#x9875;&#x9762;&#x8DEF;&#x7531;&#x8FDB;&#x884C;&#x6539;&#x9020;&#x540E;&#xFF0C;&#x4F1A;&#x5F97;&#x5230;&#x5176;&#x4ED6;&#x4E1A;&#x52A1;&#x57DF;&#x7684;&#x4E1A;&#x52A1;&#x53CD;&#x9988;&#x3002;</p>
<h3 id="&#x8DEF;&#x7531;&#x4F20;&#x53C2;&#x7684;&#x5FC3;&#x667A;&#x8D1F;&#x62C5;"><a href="#&#x8DEF;&#x7531;&#x4F20;&#x53C2;&#x7684;&#x5FC3;&#x667A;&#x8D1F;&#x62C5;" class="headerlink" title="&#x8DEF;&#x7531;&#x4F20;&#x53C2;&#x7684;&#x5FC3;&#x667A;&#x8D1F;&#x62C5;"></a>&#x8DEF;&#x7531;&#x4F20;&#x53C2;&#x7684;&#x5FC3;&#x667A;&#x8D1F;&#x62C5;</h3><p>&#x5728;&#x5206;&#x6790;&#x9875;&#x9762;&#x8FC1;&#x79FB;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x5230;&#x65B0;&#x65E7;&#x9875;&#x9762;&#x7684;&#x8DEF;&#x7531;&#x7ECF;&#x5E38;&#x901A;&#x8FC7; URL &#x4F20;&#x9012;&#x5927;&#x91CF;&#x53C2;&#x6570;&#x3002;&#x7F3A;&#x4E4F;&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x6765;&#x7EF4;&#x62A4;&#x8FD9;&#x4E9B;&#x53C2;&#x6570;&#xFF0C;&#x4F7F;&#x5F97;&#x9875;&#x9762;&#x7684;&#x7EF4;&#x62A4;&#x53D8;&#x5F97;&#x590D;&#x6742;&#x3002;</p>
<h3 id="&#x76EE;&#x6807;&#x5206;&#x6790;"><a href="#&#x76EE;&#x6807;&#x5206;&#x6790;" class="headerlink" title="&#x76EE;&#x6807;&#x5206;&#x6790;"></a>&#x76EE;&#x6807;&#x5206;&#x6790;</h3><p>&#x9488;&#x5BF9;&#x4E0A;&#x8FF0;&#x95EE;&#x9898;&#x73B0;&#x72B6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x603B;&#x7ED3;&#x51FA;&#x5982;&#x4E0B;&#x76EE;&#x6807;&#xFF1A;</p>
<ol>
<li><strong>&#x8001;&#x9879;&#x76EE;&#x8DEF;&#x7531;&#x91CD;&#x5B9A;&#x5411;</strong>&#xFF1A;&#x5C06;&#x91CD;&#x5B9A;&#x5411;&#x903B;&#x8F91;&#x505A;&#x4FDD;&#x7559;&#xFF0C;&#x5B9E;&#x73B0;&#x5BF9;&#x5386;&#x53F2;&#x5916;&#x94FE;&#x7684;&#x517C;&#x5BB9;</li>
<li><strong>&#x64CD;&#x4F5C;&#x53EF;&#x611F;&#x77E5;</strong>&#xFF1A;&#x7528;&#x6237;&#x7684;&#x8BBF;&#x95EE;&#x5E94;&#x5F53;&#x6709;&#x5B8C;&#x5584;&#x7684;&#x94FE;&#x8DEF;&#x53EF;&#x4EE5;&#x88AB;&#x611F;&#x77E5;&#x5230;&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x4E86;&#x8001;&#x9879;&#x76EE;&#x8DEF;&#x7531;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x80FD;&#x591F;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#xFF0C;&#x5F53;&#x7528;&#x6237;&#x8BBF;&#x95EE; 404 &#x65F6;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x77E5;&#x9053;&#x662F;&#x54EA;&#x4E2A;&#x9875;&#x9762;&#x62A5;&#x4E86; 404&#xFF0C;&#x5E76;&#x4E14;&#x81EA;&#x52A8;&#x53CA;&#x65F6;&#x5730;&#x544A;&#x8B66;&#x540C;&#x6B65;&#x7ED9;&#x4E1A;&#x52A1; Owner &#x6392;&#x67E5;&#x3002;</li>
<li><strong>&#x7EDF;&#x4E00;&#x6280;&#x672F;&#x6808;/&#x7EDF;&#x4E00;&#x89C4;&#x8303;</strong>&#xFF1A;&#x6211;&#x4EEC;&#x5E94;&#x5F53;&#x5168;&#x94FE;&#x8DEF;&#x63A5;&#x5165;&#x524D;&#x7AEF;&#x57FA;&#x5EFA;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7684;&#x7EDF;&#x4E00;&#x6280;&#x672F;&#x6808;&#xFF0C;&#x9488;&#x5BF9;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x7B49;&#x573A;&#x666F;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x6280;&#x672F;&#x89C4;&#x8303;</li>
</ol>
<p>&#x660E;&#x786E;&#x4E86;&#x51E0;&#x4E2A;&#x57FA;&#x672C;&#x76EE;&#x6807;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x7740;&#x624B;&#x8FDB;&#x884C;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x8BBE;&#x8BA1;&#x4E86;</p>
<h2 id="&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;"><a href="#&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;" class="headerlink" title="&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;"></a>&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;</h2><h3 id="&#x8DEF;&#x7531;&#x91CD;&#x5B9A;&#x5411;"><a href="#&#x8DEF;&#x7531;&#x91CD;&#x5B9A;&#x5411;" class="headerlink" title="&#x8DEF;&#x7531;&#x91CD;&#x5B9A;&#x5411;"></a>&#x8DEF;&#x7531;&#x91CD;&#x5B9A;&#x5411;</h3><h4 id="&#x5982;&#x4F55;&#x8F6C;&#x53D1;&#x2014;&#x2014;Nginx-NodeJS-OR-JavaScript&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x8F6C;&#x53D1;&#x2014;&#x2014;Nginx-NodeJS-OR-JavaScript&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x8F6C;&#x53D1;&#x2014;&#x2014;Nginx, NodeJS OR JavaScript&#xFF1F;"></a>&#x5982;&#x4F55;&#x8F6C;&#x53D1;&#x2014;&#x2014;Nginx, NodeJS OR JavaScript&#xFF1F;</h4><p>&#x5728;&#x8BBE;&#x8BA1;&#x91CD;&#x5B9A;&#x5411;&#x8F6C;&#x53D1;&#x65B9;&#x6848;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9996;&#x5148;&#x8003;&#x8651;&#x7684;&#x662F;&#x76F4;&#x63A5;&#x4F7F;&#x7528; Nginx &#x6216; Node &#x505A;&#x8F6C;&#x53D1;&#xFF0C;&#x4F46;&#x7531;&#x4E8E;&#x76EE;&#x524D;&#x4E24;&#x4E2A; H5 &#x9879;&#x76EE;&#x90FD;&#x4F7F;&#x7528; Hash &#x8DEF;&#x7531;&#xFF0C;&#x800C;&#x6211;&#x4EEC;&#x77E5;&#x9053; Hash &#x8DEF;&#x7531; <code>#</code> &#x540E;&#x9762;&#x7684;&#x53C2;&#x6570;&#x662F;&#x4E0D;&#x4F1A;&#x53D1;&#x9001;&#x7ED9;&#x670D;&#x52A1;&#x5668;&#x7684;&#xFF0C;&#x56E0;&#x6B64; Nginx &#x548C; Node &#x751A;&#x81F3;&#x90FD;&#x65E0;&#x6CD5;&#x8BFB;&#x53D6;&#x5230;&#x8DEF;&#x7531;&#x672C;&#x8EAB;&#xFF0C;&#x66F4;&#x4E0D;&#x7528;&#x63D0;&#x505A;&#x91CD;&#x5B9A;&#x5411;&#x4E86;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x786E;&#x5B9A;&#x4E86;&#x6700;&#x7EC8;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x8FD8;&#x662F;&#x4EA4;&#x7531;&#x5BA2;&#x6237;&#x7AEF;&#x5904;&#x7406;&#xFF0C;Nginx &#x5C42;&#x53EA;&#x505A;&#x6620;&#x5C04;&#x8DEF;&#x5F84;&#x7684;&#x8F6C;&#x53D1;&#xFF08;&#x5C06;&#x8001;&#x9879;&#x76EE; <code>/</code> &#x7684;&#x8DEF;&#x5F84;&#x76F4;&#x63A5;&#x8F6C;&#x53D1;&#x5230; <code>/college</code> &#x4E0B;&#x5373;&#x53EF;&#xFF09;</p>
<h4 id="API-&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x8BBE;&#x8BA1;"><a href="#API-&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x8BBE;&#x8BA1;" class="headerlink" title="API &#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x8BBE;&#x8BA1;"></a>API &#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x8BBE;&#x8BA1;</h4><p>&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x7B80;&#x6D01;&#x660E;&#x4E86;&#x7684; API &#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x540C;&#x6837;&#x662F;&#x6280;&#x672F;&#x65B9;&#x6848;&#x7684;&#x91CD;&#x8981;&#x4E00;&#x73AF;&#x3002;&#x57FA;&#x4E8E;&#x914D;&#x7F6E;&#x5316;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x628A;&#x539F;&#x6709;&#x7684;&#x5BFC;&#x822A;&#x5B88;&#x536B;&#x4E2D; if else &#x7684;&#x7CC5;&#x6742;&#x4E00;&#x56E2;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x903B;&#x8F91;&#xFF0C;&#x6539;&#x9020;&#x6210;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x8868;&#x3002;&#x5373;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x56FA;&#x5B9A;&#x683C;&#x5F0F;&#x7684;&#x539F; URL &#x548C;&#x76EE;&#x6807; URL &#x6765;&#x58F0;&#x660E;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x5927;&#x81F4;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;const redirector = new Redirector()</span><br><span class="line">  .register(&apos;/knowledge/learnList&apos;, &apos;/pages/material-list/index&apos;)</span><br><span class="line">  .register(&apos;/knowledge/detail/:id&apos;, &apos;/pages/material-detail/index?id=:id&apos;);</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x6837;&#x4E00;&#x6765;&#x6211;&#x4EEC;&#x6CE8;&#x518C;&#x91CD;&#x5B9A;&#x5411;&#x5C31;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x3002;&#x6CE8;&#x518C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528;<code>redirector.run</code>&#x65B9;&#x6CD5;&#x6765;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x662F;&#x5177;&#x4F53;&#x7684;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x3002;</p>
<h4 id="&#x91CD;&#x5B9A;&#x5411;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x8868;&#x8BBE;&#x8BA1;"><a href="#&#x91CD;&#x5B9A;&#x5411;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x8868;&#x8BBE;&#x8BA1;" class="headerlink" title="&#x91CD;&#x5B9A;&#x5411;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x8868;&#x8BBE;&#x8BA1;"></a>&#x91CD;&#x5B9A;&#x5411;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x8868;&#x8BBE;&#x8BA1;</h4><h5 id="&#x540D;&#x8BCD;&#x89E3;&#x6790;"><a href="#&#x540D;&#x8BCD;&#x89E3;&#x6790;" class="headerlink" title="&#x540D;&#x8BCD;&#x89E3;&#x6790;"></a>&#x540D;&#x8BCD;&#x89E3;&#x6790;</h5><p>&#x5728;&#x8BBE;&#x8BA1;&#x8DF3;&#x8F6C;&#x8868;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x660E;&#x786E;&#xFF0C;&#x8DEF;&#x7531;&#x4F20;&#x53C2;&#x6709;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4E00;&#x79CD;&#x662F; <code>params</code>&#xFF0C;&#x4E00;&#x79CD;&#x662F; <code>query</code>&#x3002;&#x5176;&#x4E2D; <code>params</code> &#x662F;&#x4F5C;&#x4E3A;&#x8DEF;&#x7531;&#x8DEF;&#x5F84;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x5B58;&#x5728;&#x7684;&#xFF0C;&#x6BD4;&#x5982; <code>/pending/list/1234567</code> &#x4E2D;&#x7684; <code>1234567</code> &#x5C31;&#x4EE3;&#x8868;&#x7740; <code>id</code> &#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF1B;&#x800C; <code>query</code> &#x5C31;&#x662F;&#x5728; <code>?</code> &#x4E4B;&#x540E;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x53C2;&#x6570;&#x4E86;&#xFF0C;&#x4F8B;&#x5982; <code>/pages/list/index?id=1234567</code> &#x8FD9;&#x79CD;&#x5F62;&#x5F0F;&#x3002;</p>
<p>&#x4E0A;&#x6587;&#x7684; API &#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x4EC5;&#x505A;&#x4E86; <code>params</code> &#x7C7B;&#x578B;&#x7684;&#x4F20;&#x53C2;&#x6620;&#x5C04;&#xFF0C;&#x800C;&#x5BF9;&#x4E8E;&#x9875;&#x9762;&#x7684;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#x662F;&#x6CA1;&#x6709;&#x5904;&#x7406;&#x7684;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8981;&#x6C42;&#xFF0C;&#x65B0;&#x8001;&#x9875;&#x9762;&#x7684;&#x51FA;&#x5165;&#x53C2;&#x8981;&#x4FDD;&#x6301;&#x76F8;&#x540C;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5171;&#x7528;&#x4E00;&#x5957; <code>query</code> &#x53C2;&#x6570;&#xFF0C;&#x51CF;&#x8F7B;&#x6211;&#x4EEC;&#x7684;&#x5F00;&#x53D1;&#x6210;&#x672C;</p>
<h5 id="&#x5982;&#x4F55;&#x8F6C;&#x6362;&#x8DEF;&#x7531;&#x6B63;&#x5219;&#x5339;&#x914D;&#x5F0F;"><a href="#&#x5982;&#x4F55;&#x8F6C;&#x6362;&#x8DEF;&#x7531;&#x6B63;&#x5219;&#x5339;&#x914D;&#x5F0F;" class="headerlink" title="&#x5982;&#x4F55;&#x8F6C;&#x6362;&#x8DEF;&#x7531;&#x6B63;&#x5219;&#x5339;&#x914D;&#x5F0F;"></a>&#x5982;&#x4F55;&#x8F6C;&#x6362;&#x8DEF;&#x7531;&#x6B63;&#x5219;&#x5339;&#x914D;&#x5F0F;</h5><p>&#x539F;&#x5148;&#x7684; Vue2 &#x8001;&#x9879;&#x76EE;&#x5B9E;&#x73B0;&#x91CD;&#x5B9A;&#x5411;&#x662F;&#x5229;&#x7528; <code>vue-router</code> &#x81EA;&#x5E26;&#x7684;&#x5B9E;&#x73B0;&#x3002;&#x7ECF;&#x8FC7;&#x8C03;&#x7814;&#xFF0C;&#x6211;&#x4EEC;&#x9009;&#x62E9;&#x4F7F;&#x7528; <code>path-to-regex</code> &#x5E93;&#x505A;&#x8DEF;&#x7531;&#x89E3;&#x6790;&#xFF0C;&#x5B83;&#x662F; Vue-Router &#x7B49;&#x4F17;&#x591A;&#x77E5;&#x540D;&#x8DEF;&#x7531;&#x5E93;&#x7684;&#x5E95;&#x5C42;&#x4F9D;&#x8D56;&#x5E93;&#xFF0C;&#x6B63;&#x5982;&#x5176;&#x540D;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x5C06;&#x8DEF;&#x7531;&#x8F6C;&#x5316;&#x6210;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#x53BB;&#x5339;&#x914D;&#x94FE;&#x63A5;&#xFF0C;&#x5E76;&#x4E14;&#x652F;&#x6301;&#x52A8;&#x6001;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x7B49;&#x8BB8;&#x591A;&#x529F;&#x80FD;&#xFF0C;&#x5B98;&#x65B9;&#x793A;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/27eda63626b6d606b4ab22e91254c4864050c62428743b4041c61580232600aa" alt="&#x5B98;&#x65B9;&#x793A;&#x4F8B;"></p>
<h5 id="&#x5B9E;&#x73B0;-Redirector-&#x7C7B;"><a href="#&#x5B9E;&#x73B0;-Redirector-&#x7C7B;" class="headerlink" title="&#x5B9E;&#x73B0; Redirector &#x7C7B;"></a>&#x5B9E;&#x73B0; Redirector &#x7C7B;</h5><p><code>path-to-regex</code> &#x5177;&#x6709;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x6613;&#x7528;&#x7684; API&#xFF0C;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x68C0;&#x6D4B;&#x548C;&#x63D0;&#x53D6;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x7684;&#x9700;&#x6C42;&#x6765;&#x8BF4;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x8DB3;&#x591F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8C03;&#x7528; <code>match</code> &#x65B9;&#x6CD5;&#x83B7;&#x53D6;&#x5230;&#x89E3;&#x6790;&#x8DEF;&#x7531;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5E76;&#x636E;&#x6B64;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A; <code>Redirector</code> &#x7C7B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import { history } from &apos;@tarojs/router&apos;;</span><br><span class="line">import Taro from &apos;@tarojs/taro&apos;;</span><br><span class="line">import { match, MatchFunction } from &apos;path-to-regexp&apos;;</span><br><span class="line"></span><br><span class="line">type RegisterPath = `/${string}`;</span><br><span class="line"></span><br><span class="line">interface RouteObject {</span><br><span class="line">  matchFn: MatchFunction;</span><br><span class="line">  target: string;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">class Redirector {</span><br><span class="line">  // &#x672C;&#x5730;&#x6CE8;&#x518C;&#x7684;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x914D;&#x7F6E;</span><br><span class="line">  private routes: RouteObject[] = [];</span><br><span class="line"></span><br><span class="line">  register(oldPath: RegisterPath, newPath: RegisterPath): Redirector {</span><br><span class="line">    this.routes.push({</span><br><span class="line">      matchFn: match(oldPath),</span><br><span class="line">      target: newPath,</span><br><span class="line">    });</span><br><span class="line">    // &#x94FE;&#x5F0F;&#x8C03;&#x7528;</span><br><span class="line">    return this;</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  redirect(path: string, query = &apos;&apos;): void {</span><br><span class="line">    this.routes.some(({ matchFn, target }) =&gt; {</span><br><span class="line">      const result = matchFn(path);</span><br><span class="line"></span><br><span class="line">      if (result) {</span><br><span class="line">        // &#x66FF;&#x6362;&#x8DEF;&#x7531;&#x53C2;&#x6570;</span><br><span class="line">        Object.entries(result.params).forEach(([key, value]) =&gt; {</span><br><span class="line">          target = target.replace(`:${key}`, value);</span><br><span class="line">        });</span><br><span class="line">        // &#x5904;&#x7406; query&#xFF0C;Taro &#x8DEF;&#x7531;&#x7684;&#x9700;&#x8981;&#x76F4;&#x63A5;&#x62FC;&#x5728;&#x53C2;&#x6570;&#x4E0A;</span><br><span class="line">        target = `${target}${target.includes(&apos;?&apos;) ? &apos;&amp;&apos; : &apos;?&apos;}${query}`;</span><br><span class="line">        // &#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;</span><br><span class="line">        Taro.redirectTo({ url: target });</span><br><span class="line">        return true;</span><br><span class="line">      }</span><br><span class="line">      return false;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  run(): void {</span><br><span class="line">    const [path, query] = location.hash.slice(1).split(&apos;?&apos;);</span><br><span class="line">    this.redirect(path, query);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x76F4;&#x63A5;&#x6CE8;&#x518C;&#x91CD;&#x5B9A;&#x5411;&#x540E;&#x5BFC;&#x51FA;&#x5B9E;&#x4F8B;&#x5373;&#x53EF;</span><br><span class="line">const redirector = new Redirector()</span><br><span class="line">  .register(&apos;/knowledge/learnList&apos;, &apos;/pages/material-list/index&apos;)</span><br><span class="line">  .register(&apos;/knowledge/detail/:id&apos;, &apos;/pages/material-detail/index?id=:id&apos;);</span><br><span class="line"></span><br><span class="line">export default redirector;</span><br></pre></td></tr></table></figure>

<p>&#x5176;&#x57FA;&#x672C;&#x601D;&#x8DEF;&#x5C31;&#x662F;&#x901A;&#x8FC7; <code>match</code> &#x65B9;&#x6CD5;&#x751F;&#x6210;&#x7684;&#x6B63;&#x5219;&#x8868;&#x8FBE;&#x5F0F;&#xFF0C;&#x5339;&#x914D;&#x6458;&#x51FA;&#x539F; URL &#x4E2D;&#x7684;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#xFF0C;&#x5E76;&#x62FC;&#x63A5;&#x548C;&#x66FF;&#x6362;&#x5230;&#x65B0;&#x7684; URL &#x4E0A;</p>
<h4 id="&#x4F55;&#x65F6;&#x6267;&#x884C;&#x2014;&#x2014;&#x5B8C;&#x6574;&#x7684;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#x94FE;&#x8DEF;"><a href="#&#x4F55;&#x65F6;&#x6267;&#x884C;&#x2014;&#x2014;&#x5B8C;&#x6574;&#x7684;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#x94FE;&#x8DEF;" class="headerlink" title="&#x4F55;&#x65F6;&#x6267;&#x884C;&#x2014;&#x2014;&#x5B8C;&#x6574;&#x7684;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#x94FE;&#x8DEF;"></a>&#x4F55;&#x65F6;&#x6267;&#x884C;&#x2014;&#x2014;&#x5B8C;&#x6574;&#x7684;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#x94FE;&#x8DEF;</h4><blockquote>
<p>&#x672C;&#x6B21;&#x8FC1;&#x79FB;&#x7684; C &#x7AEF; H5 &#x5FAE;&#x5E94;&#x7528;&#x540C;&#x65F6;&#x7531;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x7EC4;&#x6210;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x4F7F;&#x7528; Vue2 &#x6280;&#x672F;&#x6808;&#x7684;&#x8001;&#x9879;&#x76EE;&#x548C;&#x4F7F;&#x7528; Taro React &#x7684;&#x65B0;&#x9879;&#x76EE;&#x3002;&#x4E24;&#x4E2A;&#x9879;&#x76EE;&#x901A;&#x8FC7; Nginx &#x8F6C;&#x53D1;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x57DF;&#x540D;&#x7684;&#x4E0D;&#x540C;&#x8DEF;&#x7531;&#x4E0B;&#xFF1A;&#x8001;&#x9879;&#x76EE;&#x6620;&#x5C04;&#x5728; <code>/</code> &#x6839;&#x76EE;&#x5F55;&#xFF0C;&#x800C;&#x65B0;&#x9879;&#x76EE;&#x5219;&#x662F;&#x6620;&#x5C04;&#x5728; <code>/college</code> &#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x6240;&#x5904;&#x540C;&#x4E00;&#x4E2A;&#x57DF;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x4E00;&#x4E9B;&#x672C;&#x5730;&#x6570;&#x636E;&#x5982; <code>localStorage</code>&#x3001;<code>sessionStorage</code> &#x7B49;&#x3002;</p>
</blockquote>
<h5 id="&#xFF08;1&#xFF09;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#xFF0C;Nginx-&#x5C42;&#x8F6C;&#x53D1;"><a href="#&#xFF08;1&#xFF09;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#xFF0C;Nginx-&#x5C42;&#x8F6C;&#x53D1;" class="headerlink" title="&#xFF08;1&#xFF09;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#xFF0C;Nginx &#x5C42;&#x8F6C;&#x53D1;"></a>&#xFF08;1&#xFF09;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#xFF0C;Nginx &#x5C42;&#x8F6C;&#x53D1;</h5><p>&#x4EE5;&#x7528;&#x6237;&#x5916;&#x94FE;&#x8DF3;&#x8F6C;&#x5230;&#x8001;&#x9879;&#x76EE;&#x8DEF;&#x7531;&#x4E3A;&#x4F8B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;https://host/#/knowledge/learnList?rankId=aaa&amp;ListName=bbb</span><br></pre></td></tr></table></figure>

<p>&#x7531;&#x4E8E;&#x8001;&#x9875;&#x9762;&#x4F1A;&#x4E0B;&#x7EBF;&#xFF0C;&#x8BBF;&#x95EE;&#x670D;&#x52A1;&#x65F6; Nginx &#x6B63;&#x5E38;&#x5339;&#x914D;&#x5176;&#x4ED6;&#x8DEF;&#x7531;&#xFF0C;&#x515C;&#x5E95;&#x5339;&#x914D;&#x6839;&#x8DEF;&#x7531; <code>/</code>&#x76F4;&#x63A5;&#x8F6C;&#x53D1;&#x5230; <code>/college</code> &#x4E0A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby&#x590D;&#x5236;&#x4EE3;&#x7801;https://host/college/#/pages/material-list/index?rankId=aaa&amp;ListName=bbb</span><br></pre></td></tr></table></figure>

<p>&#x56E0;&#x6B64;&#x7528;&#x6237;&#x5728; Nginx &#x5C42;&#x88AB;&#x7B2C;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;https://host/college/#/knowledge/learnList?rankId=aaa&amp;ListName=bbb</span><br></pre></td></tr></table></figure>

<h5 id="&#xFF08;2&#xFF09;&#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;"><a href="#&#xFF08;2&#xFF09;&#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;" class="headerlink" title="&#xFF08;2&#xFF09;&#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;"></a>&#xFF08;2&#xFF09;&#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;</h5><p>&#x91CD;&#x5B9A;&#x5411;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5728;&#x9879;&#x76EE;&#x5185;&#x89E3;&#x6790;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x540E;&#x62FC;&#x63A5;&#x8DF3;&#x8F6C;&#x3002;&#x8FD9;&#x91CC; Taro &#x65E0;&#x6CD5;&#x5339;&#x914D;&#x5230;&#x9875;&#x9762;&#xFF0C;&#x4F46;&#x662F; <code>app.tsx</code> &#x4E2D;&#x4ECD;&#x7136;&#x4F1A;&#x6267;&#x884C;&#x4EE3;&#x7801;&#x903B;&#x8F91;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5728;&#x65B0;&#x9879;&#x76EE;&#x7684; <code>app.tsx</code> &#x4E2D;&#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tsx&#x590D;&#x5236;&#x4EE3;&#x7801;// app.tsx</span><br><span class="line">import redirector from &quot;@/utils&quot;</span><br><span class="line"></span><br><span class="line">function App({ children }){</span><br><span class="line">  useMount(() =&gt; {</span><br><span class="line">    redirector.run()</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>&#x9700;&#x8981;&#x76D1;&#x542C;&#x8DEF;&#x7531;&#x53D8;&#x5316;&#x5417;&#xFF1F;</strong></p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; <code>history.listen</code> &#x65B9;&#x6CD5;&#x76D1;&#x542C;&#x8DEF;&#x7531;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6BCF;&#x6B21;&#x8DEF;&#x7531;&#x6539;&#x53D8;&#x65F6;&#x90FD;&#x53BB;&#x5339;&#x914D;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;history.listen(({ location }) =&gt; {</span><br><span class="line">  const { pathname, search } = location;</span><br><span class="line">  redirector.redirect(pathname, search);</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x4EEC;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x5230;&#x8FD9;&#x4E48;&#x5168;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x5728;&#x5B66;&#x9662;&#x65B0;&#x9879;&#x76EE;&#x91CC;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x8001;&#x9879;&#x76EE;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x56E0;&#x6B64;&#x5982;&#x679C;&#x7528;&#x6237;&#x5DF2;&#x7ECF;&#x8FDB;&#x5165;&#x4E86;&#x5E94;&#x7528;&#x91CC;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x901A;&#x8FC7;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x8FDB;&#x5165;&#x5230;&#x8001;&#x9879;&#x76EE;&#x4E86;&#x3002;&#x5982;&#x679C;&#x76D1;&#x542C;&#x4E86;&#x8DEF;&#x7531;&#x53D8;&#x66F4;&#x53CD;&#x800C;&#x4F1A;&#x5E26;&#x6765;&#x989D;&#x5916;&#x7684;&#x6027;&#x80FD;&#x5F00;&#x9500;&#x3002;</p>
<h3 id="&#x64CD;&#x4F5C;&#x611F;&#x77E5;"><a href="#&#x64CD;&#x4F5C;&#x611F;&#x77E5;" class="headerlink" title="&#x64CD;&#x4F5C;&#x611F;&#x77E5;"></a>&#x64CD;&#x4F5C;&#x611F;&#x77E5;</h3><p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x89E6;&#x53D1;&#x91CD;&#x5B9A;&#x5411;&#x6216;&#x662F;&#x91CD;&#x5B9A;&#x5411;&#x5931;&#x8D25;&#xFF0C;&#x90FD;&#x4F1A;&#x5BFC;&#x81F4;&#x53D1;&#x751F; 404 &#x9519;&#x8BEF;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x4E0A;&#x62A5;&#x4E00;&#x6B21;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x3002;&#x800C;&#x53EA;&#x8981;&#x89E6;&#x53D1;&#x4E86;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x4F1A;&#x4E0A;&#x62A5;&#x4E00;&#x6B21;&#x91CD;&#x5B9A;&#x5411;&#x8BB0;&#x5F55;</p>
<h4 id="404-&#x611F;&#x77E5;"><a href="#404-&#x611F;&#x77E5;" class="headerlink" title="404 &#x611F;&#x77E5;"></a>404 &#x611F;&#x77E5;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;function App({ children }) {</span><br><span class="line">  usePageNotFound((e) =&gt; {</span><br><span class="line">    const tag = &apos;PAGE_NOT_FOUND&apos;;</span><br><span class="line">    const log = `path=${e.path}`;</span><br><span class="line">    Slardar.logger()?.error(log, tag);</span><br><span class="line">    Taro.redirectTo({</span><br><span class="line">      url: `/pages/404/index?from=${e.path}`,</span><br><span class="line">    });</span><br><span class="line">  }) </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x64CD;&#x4F5C;&#x4E3A;&#xFF1A;&#x5728; <code>App.tsx</code> &#x4E0B;&#x65B0;&#x589E; <code>usePageNotFound</code> hook&#xFF0C;&#x8C03;&#x7528; Taro &#x539F;&#x751F;&#x8DEF;&#x7531;&#x56DE;&#x8C03;&#xFF0C;&#x901A;&#x8FC7;&#x6570;&#x636E;&#x5E73;&#x53F0;&#x4E0A;&#x62A5; error &#x65E5;&#x5FD7;&#xFF0C;&#x5E76;&#x5728; 404 &#x9875;&#x9762;&#x5C55;&#x793A;&#x63D0;&#x793A;&#x548C;&#x94FE;&#x63A5;&#xFF0C;&#x5F15;&#x5BFC;&#x7528;&#x6237;&#x56DE;&#x5230;&#x5B66;&#x9662;&#x5E94;&#x7528;&#x548C;&#x53CD;&#x9988;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/5d81d032fea780da7f1b5e49fea694840c505aa0d0f38faa3a60fc0a54d7caac" alt="404 &#x9875;&#x9762;"></p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x67E5;&#x770B;&#x4E0A;&#x62A5;&#x7684;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x7B49;</p>
<blockquote>
<p>&#x76F8;&#x5173;&#x6587;&#x7AE0;&#xFF1A;<a href="https://dev.newban.cn/7319181157501026331?searchId=202403060304490541A47A193D32C97174#heading-7">&#x53E4;&#x8317;&#x662F;&#x5982;&#x4F55;&#x505A;&#x524D;&#x7AEF;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684; - &#x6398;&#x91D1;</a></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/040d4c4f2077f363f0319c2ba7db3e2275ceb621114824bca3798c232ae6f038" alt="&#x65E5;&#x5FD7;&#x67E5;&#x8BE2;"></p>
<p>&#x7531;&#x4E8E; 404 &#x9519;&#x8BEF;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x5076;&#x73B0;&#xFF0C;&#x53EA;&#x8981;&#x51FA;&#x73B0;&#x5C31;&#x4EE3;&#x8868;&#x9875;&#x9762;&#x8DEF;&#x7531;&#x6216;&#x662F;&#x5916;&#x94FE;&#x6295;&#x653E;&#x5B58;&#x5728;&#x95EE;&#x9898;&#x3002;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x9519;&#x8BEF;&#x544A;&#x8B66;&#x7B56;&#x7565;&#xFF0C;&#x6765;&#x53CA;&#x65F6;&#x901A;&#x77E5;&#x5F00;&#x53D1;&#x67E5;&#x770B;&#x65E5;&#x5FD7;&#xFF0C;&#x53D1;&#x73B0;&#x5E76;&#x89E3;&#x51B3;&#x8DEF;&#x7531;&#x95EE;&#x9898;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/24cd5a46ed2cee92c3724fa1a061deb3c5d5f4f6608bab5f9b60e87140734ece" alt="&#x544A;&#x8B66;&#x914D;&#x7F6E;"></p>
<h4 id="&#x91CD;&#x5B9A;&#x5411;&#x611F;&#x77E5;"><a href="#&#x91CD;&#x5B9A;&#x5411;&#x611F;&#x77E5;" class="headerlink" title="&#x91CD;&#x5B9A;&#x5411;&#x611F;&#x77E5;"></a>&#x91CD;&#x5B9A;&#x5411;&#x611F;&#x77E5;</h4><p>&#x5728;&#x6267;&#x884C;&#x91CD;&#x5B9A;&#x5411;&#x7684;&#x65F6;&#x5019;&#x4E0A;&#x62A5;&#x6267;&#x884C;&#x65E5;&#x5FD7;&#xFF0C;&#x63D0;&#x4EA4;&#x539F;&#x8DEF;&#x7531;&#x548C;&#x76EE;&#x6807;&#x8DEF;&#x7531;&#x7684;&#x5B8C;&#x6574;&#x4FE1;&#x606F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">diff&#x590D;&#x5236;&#x4EE3;&#x7801;class Redirector {</span><br><span class="line">  private routes: RouteObject[] = [];</span><br><span class="line"></span><br><span class="line">  register(oldPath: RegisterPath, newPath: RegisterPath): Redirector {}</span><br><span class="line"></span><br><span class="line">  redirect(path: string, query = &apos;&apos;): void {</span><br><span class="line">    this.routes.some(({ matchFn, target }) =&gt; {</span><br><span class="line">      const result = matchFn(path);</span><br><span class="line"></span><br><span class="line">      if (result) {</span><br><span class="line">        Object.entries(result.params).forEach(([key, value]) =&gt; {</span><br><span class="line">          target = target.replace(`:${key}`, value);</span><br><span class="line">        });</span><br><span class="line">        target = `${target}${target.includes(&apos;?&apos;) ? &apos;&amp;&apos; : &apos;?&apos;}${query}`;</span><br><span class="line">+       const tag = &apos;PAGE_NOT_FOUND&apos;;</span><br><span class="line">+       const log = `from=${path}&amp;to=${target}`;</span><br><span class="line">+       Slardar.logger()?.info(log, tag);</span><br><span class="line">        Taro.redirectTo({ url: target });</span><br><span class="line">        return true;</span><br><span class="line">      }</span><br><span class="line">      return false;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  run(): void {</span><br><span class="line">    const [path, query] = location.hash.slice(1).split(&apos;?&apos;);</span><br><span class="line">    this.redirect(path, query);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x672C;&#x6B21;&#x6211;&#x4EEC;&#x628A;&#x65B0;&#x8FC1;&#x79FB;&#x7684;&#x9875;&#x9762;&#x8DEF;&#x7531;&#x548C;&#x5DF2;&#x6709;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#x8DEF;&#x7531;&#x5168;&#x90E8;&#x52A0;&#x5165;&#x5230;&#x914D;&#x7F6E;&#x8868;&#x4E2D;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x91CD;&#x5B9A;&#x5411;&#x53D1;&#x751F;&#x65F6;&#x4E0A;&#x62A5;&#x8BBF;&#x95EE;&#x7684;&#x94FE;&#x63A5;&#x548C;&#x8DF3;&#x8F6C;&#x7684;&#x94FE;&#x63A5;&#xFF0C;&#x6536;&#x96C6; 30 &#x65E5;&#x7684;&#x6570;&#x636E;&#x540E;&#x518D;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x6574;&#x7406;&#xFF0C;&#x89C2;&#x5BDF;&#x7EBF;&#x4E0A;&#x6D41;&#x91CF;&#x5206;&#x5E03;&#xFF0C;&#x9010;&#x6E10;&#x4E0B;&#x6389;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7684;&#x91CD;&#x5B9A;&#x5411;&#xFF0C;&#x51CF;&#x5C11;&#x7EF4;&#x62A4;&#x6210;&#x672C;</p>
<h3 id="&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x2014;&#x2014;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x65B9;&#x6CD5;"><a href="#&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x2014;&#x2014;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x65B9;&#x6CD5;" class="headerlink" title="&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x2014;&#x2014;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x65B9;&#x6CD5;"></a>&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#x2014;&#x2014;&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x65B9;&#x6CD5;</h3><p>&#x7531;&#x4E8E;&#x8001;&#x9879;&#x76EE;&#x7684;&#x8FC1;&#x79FB;&#x8FC7;&#x7A0B;&#x4E2D;&#x6D89;&#x53CA;&#x5230;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x8DEF;&#x7531;&#x4F20;&#x53C2;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x51FA;&#x73B0;&#x94FE;&#x63A5;&#x91CC;&#x6302;&#x4E86;&#x4E00;&#x5927;&#x5806;&#x53C2;&#x6570;&#xFF0C;&#x5B9E;&#x9645;&#x9875;&#x9762;&#x91CC;&#x5374;&#x6839;&#x672C;&#x6CA1;&#x6709;&#x7528;&#x5230;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6211;&#x4EEC;&#x5F88;&#x96BE;&#x5206;&#x8FA8;&#x54EA;&#x4E9B;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x662F;&#x6709;&#x6548;&#x7684;&#xFF0C;&#x54EA;&#x4E9B;&#x8DEF;&#x7531;&#x53C2;&#x6570;&#x53C8;&#x662F;&#x53EF;&#x4EE5;&#x820D;&#x5F03;&#x7684;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x672C;&#x4E1A;&#x52A1;&#x57DF;&#x5185;&#x7684;&#x79FB;&#x52A8;&#x7AEF;&#x9879;&#x76EE;&#x5185;&#x505A;&#x4E86;&#x5982;&#x4E0B;&#x7EDF;&#x4E00;&#x89C4;&#x8303;&#xFF1A;</p>
<ul>
<li>&#x9488;&#x5BF9;&#x9875;&#x9762;&#x7EF4;&#x62A4; TS &#x5165;&#x53C2;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#xFF1B;</li>
<li>&#x8DEF;&#x7531;&#x8DF3;&#x8F6C;&#x548C;&#x83B7;&#x53D6;&#x5165;&#x53C2;&#x4F7F;&#x7528;&#x516C;&#x5171;&#x65B9;&#x6CD5;&#xFF0C;&#x4F20;&#x5165;&#x9875;&#x9762;&#x5165;&#x53C2;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#x4F5C;&#x4E3A;&#x6CDB;&#x578B;&#x53C2;&#x6570;&#xFF0C;&#x89C4;&#x8303;&#x9875;&#x9762;&#x8DF3;&#x8F6C;</li>
</ul>
<p>&#x5177;&#x4F53;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;</p>
<ol>
<li>&#x8DF3;&#x8F6C;&#x9875;&#x9762;&#x4F7F;&#x7528; <code>formatUrlParams</code> &#x683C;&#x5F0F;&#x5316; <code>query</code> &#x53C2;&#x6570;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import { BaseAssignmentParams } from &quot;@/pages/assignment/index/index&quot;</span><br><span class="line"></span><br><span class="line">const handleClick = (assignment: CourseAssignmentItem) =&gt; {</span><br><span class="line">  const baseQuery = formatUrlParams&lt;AssignmentParams&gt;({</span><br><span class="line">    trainingId: trainingDetail.id,</span><br><span class="line">    semesterId: trainingDetail.semesterId,</span><br><span class="line">    assignmentId: assignment.id,</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  Taro.navigateTo({</span><br><span class="line">    url: `/pages/assignment/index/index?${baseQuery}`,</span><br><span class="line">  });</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x627F;&#x63A5;&#x9875;&#x9762;&#x4F7F;&#x7528; <code>getUrlParams</code> &#x53CD;&#x5E8F;&#x5217;&#x5316;&#x8DEF;&#x7531;&#x53C2;&#x6570;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;export interface AssignmentParams {</span><br><span class="line">  /** &#x57F9;&#x8BAD; id */</span><br><span class="line">  trainingId: string;</span><br><span class="line">  /** &#x5B66;&#x671F; id */</span><br><span class="line">  semesterId: string;</span><br><span class="line">  /** &#x4EFB;&#x52A1; id */</span><br><span class="line">  assignmentId: string;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">const Assignment: React.FC = () =&gt; {</span><br><span class="line">  const { semesterId, trainingId, assignmentId } = getUrlParams&lt;AssignmentParams&gt;();</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export default Assignment;</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x6B64;&#x4E00;&#x6765;&#xFF0C;&#x5C31;&#x5728;&#x4E24;&#x4E2A;&#x9875;&#x9762;&#x6210;&#x529F;&#x901A;&#x8FC7;&#x7C7B;&#x578B;&#x7CFB;&#x7EDF;&#x67B6;&#x8D77;&#x4E86;&#x4E00;&#x9053;&#x6865;&#x6881;&#xFF0C;&#x5982;&#x679C;&#x9875;&#x9762;&#x65B0;&#x589E;&#x6216;&#x662F;&#x5220;&#x6539;&#x4E86;&#x5165;&#x53C2;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x9759;&#x6001;&#x7C7B;&#x578B;&#x5206;&#x6790;&#x5728;&#x5F00;&#x53D1;&#x9636;&#x6BB5;&#x5C31;&#x5F97;&#x5230;&#x63D0;&#x793A;&#xFF0C;&#x4FEE;&#x6539;&#x8DEF;&#x7531;&#x51FA;&#x5165;&#x53C2;&#x65F6;&#x7684;&#x5FC3;&#x667A;&#x8D1F;&#x62C5;&#x660E;&#x663E;&#x51CF;&#x5C0F;&#xFF0C;&#x9879;&#x76EE;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x5F97;&#x5230;&#x4E86;&#x663E;&#x8457;&#x63D0;&#x9AD8;&#x3002;</p>
<h3 id="&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#x56FE;"><a href="#&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#x56FE;" class="headerlink" title="&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#x56FE;"></a>&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#x56FE;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/55b025e088ec86d1ccd03dff2c8b16a22ed3e2ad28d14da1c8e8eea57ba24b0b" alt="&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#x56FE;"></p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x672C;&#x6587;&#x4ECB;&#x7ECD;&#x4E86;&#x7B14;&#x8005;&#x5728;&#x505A;&#x4E1A;&#x52A1;&#x9879;&#x76EE;&#x8FC1;&#x79FB;&#x7684;&#x65F6;&#x5019;&#x5904;&#x7406;&#x5916;&#x94FE;&#x903B;&#x8F91;&#x4EE5;&#x53CA;&#x5BF9;&#x9879;&#x76EE;&#x5185;&#x7684;&#x9875;&#x9762;&#x51FA;&#x5165;&#x53C2;&#x548C;&#x8DF3;&#x8F6C;&#x573A;&#x666F;&#x8FDB;&#x884C;&#x7EDF;&#x4E00;&#x5316;&#x6CBB;&#x7406;&#x7684;&#x601D;&#x8DEF;&#xFF0C;&#x5E0C;&#x671B;&#x80FD;&#x7ED9;&#x540C;&#x6837;&#x88AB;&#x5386;&#x53F2;&#x9879;&#x76EE;&#x548C;&#x6280;&#x672F;&#x503A;&#x6298;&#x78E8;&#x7684;&#x540C;&#x5B66;&#x4EEC;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x53EF;&#x884C;&#x6027;&#x5EFA;&#x8BAE;&#xFF0C;&#x4E5F;&#x6B22;&#x8FCE;&#x5927;&#x5BB6;&#x5728;&#x8BC4;&#x8BBA;&#x533A;&#x4E00;&#x8D77;&#x4EA4;&#x6D41;&#xFF0C;&#x5171;&#x540C;&#x8FDB;&#x6B65;</p>
<h2 id="&#x6700;&#x540E;"><a href="#&#x6700;&#x540E;" class="headerlink" title="&#x6700;&#x540E;"></a>&#x6700;&#x540E;</h2><p>&#x1F4DA; &#x5C0F;&#x8317;&#x6587;&#x7AE0;&#x63A8;&#x8350;&#xFF1A;</p>
<ul>
<li><a href="https://dev.newban.cn/7341720847881961499">formily&#x539F;&#x6765;&#x662F;&#x8FD9;&#x6837;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x8868;&#x5355;&#x96BE;&#x9898;</a></li>
<li><a href="https://dev.newban.cn/7339024907718967359">&#x53E4;&#x8317;&#x662F;&#x5982;&#x4F55;&#x5C06;&#x5C0F;&#x7A0B;&#x5E8F;&#x7F16;&#x8BD1;&#x901F;&#x5EA6;&#x63D0;&#x5347;3&#x500D;&#x7684;</a></li>
<li><a href="https://dev.newban.cn/7329034439408500763">&#x9489;&#x9489;&#x5C0F;&#x7A0B;&#x5E8F;&#x5B9E;&#x73B0;&#x7B7E;&#x540D;&#x677F;</a></li>
</ul>
<p>&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#x300C;<a href="/external_links/f40b7034b31e24ca9725d4bcf11e27fb.html" target="blank" rel="noopener">Goodme&#x524D;&#x7AEF;&#x56E2;&#x961F;</a>&#x300D;&#xFF0C;&#x83B7;&#x53D6;&#x66F4;&#x591A;&#x5E72;&#x8D27;&#x5B9E;&#x8DF5;&#xFF0C;&#x6B22;&#x8FCE;&#x4EA4;&#x6D41;&#x5206;&#x4EAB;~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/b706ee720700a62894c0d155dd6f2919.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7344571269555126335.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7344571269555126335.html" itemprop="url">Jetpack-ViewModel（面试深度起来）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-10T16:26:52+08:00">
                2024-03-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="&#x9762;&#x8BD5;&#x7D20;&#x8D28;&#x4E09;&#x8054;&#xFF1F;"><a href="#&#x9762;&#x8BD5;&#x7D20;&#x8D28;&#x4E09;&#x8054;&#xFF1F;" class="headerlink" title="&#x9762;&#x8BD5;&#x7D20;&#x8D28;&#x4E09;&#x8054;&#xFF1F;"></a>&#x9762;&#x8BD5;&#x7D20;&#x8D28;&#x4E09;&#x8054;&#xFF1F;</h3><ul>
<li><code>ViewModel</code>&#x4F18;&#x70B9;&#x662F;&#x5565;&#xFF1F; &#x7B54;&#xFF1A;&#x4FDD;&#x5B58;&#x6570;&#x636E; &#x81EA;&#x52A8;&#x7BA1;&#x7406;&#x3002;</li>
<li><code>Fragment</code>&#x80FD;&#x62FF;Activity&#x7684;ViewModel&#x4E48;? &#x7B54;&#xFF1A;&#x80FD;&#x5427;&#xFF1F;&#x3002; = = &#xFF01;</li>
<li><code>ViewModel</code>&#x600E;&#x4E48;&#x7BA1;&#x7406;&#x7684;? &#x7B54;&#xFF1A;&#x6BCD;&#x9E21;&#x3002;</li>
<li><code>ViewModel</code>&#x600E;&#x4E48;&#x521B;&#x5EFA;&#x7684;? &#x7B54;&#xFF1A;&#x6BCD;&#x9E21;&#x554A;</li>
</ul>
<p><strong>&#x7ED3;&#x679C;</strong></p>
<p>&#x56DE;&#x53BB;&#x7B49;&#x6D88;&#x606F;&#x5427;&#xFF0C;&#x9762;&#x8BD5;&#x5B98;&#x987A;&#x624B;&#x8BC4;&#x4EF7; &#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x4E0D;&#x591F;&#xFF0C;&#x57FA;&#x7840;&#x4E0D;&#x7262;&#x3002;</p>
<h3 id="&#x9010;&#x6B65;&#x62C6;&#x89E3;"><a href="#&#x9010;&#x6B65;&#x62C6;&#x89E3;" class="headerlink" title="&#x9010;&#x6B65;&#x62C6;&#x89E3;"></a>&#x9010;&#x6B65;&#x62C6;&#x89E3;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801; private &#xA0;val &#xA0;model by lazy {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;ViewModelProvider(this).get(BaseViewModel::class.java);</span><br><span class="line"> &#xA0;  }</span><br></pre></td></tr></table></figure>

<h4 id="ViewModelProvider&#x5E72;&#x4E86;&#x5565;&#xFF1F;"><a href="#ViewModelProvider&#x5E72;&#x4E86;&#x5565;&#xFF1F;" class="headerlink" title="ViewModelProvider&#x5E72;&#x4E86;&#x5565;&#xFF1F;"></a>ViewModelProvider&#x5E72;&#x4E86;&#x5565;&#xFF1F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801; &#xA0;public constructor(</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;owner: ViewModelStoreOwner</span><br><span class="line"> &#xA0;  ) : this(owner.viewModelStore, defaultFactory(owner), defaultCreationExtras(owner))</span><br><span class="line">&#x200B;</span><br><span class="line">&#x200B;</span><br><span class="line">&#x200B;</span><br><span class="line">//&#x6784;&#x5EFA;Factory </span><br><span class="line"> internal fun defaultFactory(owner: ViewModelStoreOwner): Factory =</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;if (owner is HasDefaultViewModelProviderFactory)</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;owner.defaultViewModelProviderFactory else instance</span><br><span class="line">&#x200B;</span><br></pre></td></tr></table></figure>

<p>&#x6574;&#x4F53;&#x770B;&#x4E86;&#x4E00;&#x4E0B;&#xFF0C;&#x5927;&#x4F53;&#x5C31;&#x4E09;&#x4EF6;&#x4E8B;&#xFF0C; &#x7528;this&#x7684; viewModelStore&#xFF0C;&#x641E;Factory&#xFF0C; &#x641E;&#x53C2;&#x6570;&#x3002;</p>
<h4 id="this-&#x91CC;&#x9762;&#x641E;&#x5927;&#x4E8B;&#x3002;"><a href="#this-&#x91CC;&#x9762;&#x641E;&#x5927;&#x4E8B;&#x3002;" class="headerlink" title="this &#x91CC;&#x9762;&#x641E;&#x5927;&#x4E8B;&#x3002;"></a>this &#x91CC;&#x9762;&#x641E;&#x5927;&#x4E8B;&#x3002;</h4><p>&#x539F;&#x6765;<code>ViewModelProvider</code>&#x9700;&#x8981;&#x4F20;&#x5165;&#x4E00;&#x4E2A;<code>ViewModelStoreOwner</code> &#x63A5;&#x53E3;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801; </span><br><span class="line">public constructor(</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;owner: ViewModelStoreOwner</span><br><span class="line"> &#xA0;  ) : this(owner.viewModelStore, defaultFactory(owner), defaultCreationExtras(owner))</span><br></pre></td></tr></table></figure>

<p>&#x770B;&#x4E0B;<code>ViewModelStoreOwner</code> &#x5C31;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>ViewModelStore</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;interface ViewModelStoreOwner {</span><br><span class="line"> &#xA0; &#xA0;val viewModelStore: ViewModelStore</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5E38;&#x7528;&#x7684;<code>ComponentActivity/Fragment</code>&#x90FD;&#x5B9E;&#x73B0;&#x4E86;<code>ViewModelStoreOwner</code>&#x548C;<code>HasDefaultViewModelProviderFactory</code> &#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x4ED6;&#x4EEC;&#x7684;&#x5B9E;&#x73B0;<code>getViewModelStore&#xFF08;&#xFF09;</code>&#x7684;&#x533A;&#x522B;&#x3002;</p>
<ul>
<li><h4 id="ComponentActivity&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;"><a href="#ComponentActivity&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;" class="headerlink" title="ComponentActivity&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;"></a>ComponentActivity&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;</h4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801; &#xA0; @NonNull</span><br><span class="line"> &#xA0; &#xA0;@Override</span><br><span class="line"> &#xA0; &#xA0;public ViewModelStore getViewModelStore() {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;if (getApplication() == null) {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;throw new IllegalStateException(&quot;Your activity is not yet attached to the &quot;+ &quot;Application instance. You can&apos;t request ViewModel before onCreate call.&quot;);</span><br><span class="line"> &#xA0; &#xA0; &#xA0;  }</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;ensureViewModelStore();</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;return mViewModelStore;</span><br><span class="line"> &#xA0;  }</span><br><span class="line">&#x200B;</span><br><span class="line"> &#xA0; void ensureViewModelStore() {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;if (mViewModelStore == null) {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;NonConfigurationInstances nc =</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;  (NonConfigurationInstances) getLastNonConfigurationInstance();</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;if (nc != null) {</span><br><span class="line">&#x200B;</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;mViewModelStore = nc.viewModelStore;</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;  }</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;if (mViewModelStore == null) {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;mViewModelStore = new ViewModelStore();</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;  }</span><br><span class="line"> &#xA0; &#xA0; &#xA0;  }</span><br><span class="line"> &#xA0;  }</span><br></pre></td></tr></table></figure>

<p>&#x7B80;&#x7565;&#x770B;&#x4E0B;&#x6838;&#x5FC3;&#x4EE3;&#x7801;&#xFF0C;<code>getLastNonConfigurationInstance</code>&#x6CA1;&#x6709;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;new&#x4E00;&#x4E2A;&#x8FD4;&#x56DE;&#x3002;</p>
<p><code>ComponentActivity</code> &#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#x7684;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x81EA;&#x5DF1;&#x7BA1;&#x81EA;&#x5DF1;&#x3002;</p>
<ul>
<li><h4 id="Fragment&#x7684;&#x5B9E;&#x73B0;&#xFF08;&#x7248;&#x672C;-1-6-2&#xFF09;"><a href="#Fragment&#x7684;&#x5B9E;&#x73B0;&#xFF08;&#x7248;&#x672C;-1-6-2&#xFF09;" class="headerlink" title="Fragment&#x7684;&#x5B9E;&#x73B0;&#xFF08;&#x7248;&#x672C; 1.6.2&#xFF09;"></a>Fragment&#x7684;&#x5B9E;&#x73B0;&#xFF08;&#x7248;&#x672C; 1.6.2&#xFF09;</h4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801; @NonNull</span><br><span class="line"> &#xA0; &#xA0;@Override</span><br><span class="line"> &#xA0; &#xA0;public ViewModelStore getViewModelStore() {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; // &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;return mFragmentManager.getViewModelStore(this);</span><br><span class="line"> &#xA0;  }</span><br><span class="line"> </span><br><span class="line">&#x200B;</span><br></pre></td></tr></table></figure>

<p><code>Fragment</code> &#x8C03;&#x7528;<code>FragmentManager</code>&#x7684;<code>getViewModelStore()</code>&#xFF0C;(&#x4E0B;&#x9762;&#x7B80;&#x79F0;Fm)&#x5E76;&#x628A;&#x81EA;&#x5DF1;&#x4F20;&#x5165;&#x8FDB;&#x53BB;&#x4E86;&#x3002;</p>
<p>&#x8FFD;&#x4E00;&#x4E0B;&#x770B;&#x770B; &#x8FDB;&#x5165; Fm&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801; private FragmentManagerViewModel mNonConfig; </span><br><span class="line">@NonNull</span><br><span class="line"> &#xA0; &#xA0;ViewModelStore getViewModelStore(@NonNull Fragment f) {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;return mNonConfig.getViewModelStore(f);</span><br><span class="line"> &#xA0;  }</span><br></pre></td></tr></table></figure>

<p><strong>FragmentManagerViewModel</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;FragmentManagerViewModel extends ViewModel{</span><br><span class="line">//&#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line">private final HashMap&lt;String, ViewModelStore&gt; mViewModelStores = new HashMap&lt;&gt;();</span><br><span class="line"> &#xA0;@NonNull</span><br><span class="line"> &#xA0; &#xA0;ViewModelStore getViewModelStore(@NonNull Fragment f) {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;ViewModelStore viewModelStore = mViewModelStores.get(f.mWho);</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;if (viewModelStore == null) {</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;viewModelStore = new ViewModelStore();</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;mViewModelStores.put(f.mWho, viewModelStore);</span><br><span class="line"> &#xA0; &#xA0; &#xA0;  }</span><br><span class="line"> &#xA0; &#xA0; &#xA0; &#xA0;return viewModelStore;</span><br><span class="line"> &#xA0;  }</span><br><span class="line"> &#xA0;</span><br><span class="line"> &#xA0; //&#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line"> &#xA0; }</span><br><span class="line">&#x200B;</span><br></pre></td></tr></table></figure>

<p><code>FragmentManager</code> &#x8C03;&#x7528;&#x81EA;&#x5DF1;&#x7684;<code>mNonConfig</code>&#xFF0C;&#x4F20;&#x5165;&#x4E86;<code>Fragment</code>&#xFF0C;<code>mNonConfig</code> &#x81EA;&#x5DF1;&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>FragmentManagerViewModel</code>&#x3002;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;<code>ViewModel</code>&#x3002;</p>
<p>&#x5230;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x7406;&#x89E3;Frament &#x5176;&#x5B9E;&#x59D4;&#x6258;&#x7ED9;&#x4E86;<code>FragmentManager</code>&#x3002;</p>
<p>&#x5148;&#x770B;&#x4E0B;<code>Fm</code>&#x91CC;&#x7684;<code>mNonConfig</code> &#x548B;&#x6765;&#x7684;&#x3002;&#x770B;&#x521D;&#x59CB;&#x5316;</p>
<p><strong>FragmentManager</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line"></span><br><span class="line">void attachController(@NonNull FragmentHostCallback&lt;?&gt; host,</span><br><span class="line">            @NonNull FragmentContainer container, @Nullable final Fragment parent) {</span><br><span class="line"> //&#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line"> </span><br><span class="line">   if (parent != null) {</span><br><span class="line">            mNonConfig = parent.mFragmentManager.getChildNonConfig(parent);</span><br><span class="line">        } else if (host instanceof ViewModelStoreOwner) {</span><br><span class="line">            ViewModelStore viewModelStore = ((ViewModelStoreOwner) host).getViewModelStore();</span><br><span class="line">            mNonConfig = FragmentManagerViewModel.getInstance(viewModelStore);</span><br><span class="line">        } else {</span><br><span class="line">            mNonConfig = new FragmentManagerViewModel(false);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">        </span><br><span class="line">        mNonConfig.setIsStateSaved(isStateSaved());</span><br><span class="line">// &#x8BBE;&#x7F6E;setNonConfig&#xFF08;&#xFF09;</span><br><span class="line">        mFragmentStore.setNonConfig(mNonConfig);</span><br></pre></td></tr></table></figure>

<p><strong>FragmentManagerViewModel</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;@NonNull</span><br><span class="line">    static FragmentManagerViewModel getInstance(ViewModelStore viewModelStore) {</span><br><span class="line">        ViewModelProvider viewModelProvider = new ViewModelProvider(viewModelStore,</span><br><span class="line">                FACTORY);</span><br><span class="line">        return viewModelProvider.get(FragmentManagerViewModel.class);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x89E3;&#x6790;&#x4E09;&#x4E2A;&#x521B;&#x5EFA;</p>
<pre><code>+ `if` &#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;`fragment`&#x5D4C;&#x5957; &#xFF0C;&#x53BB;&#x627E;`getChildNonConfig()`&#x3002;
+ `else if` &#x53D6;&#x5230;`host`&#x7684;`viewModelStore`&#xFF0C;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A; `ViewModelProvider` &#x7F13;&#x5B58;`FragmentManagerViewModel`&#x7C7B;&#x8FDB;&#x53BB;&#x3002;
+ `else` &#x81EA;&#x5DF1; host &#x53D6;&#x4E0D;&#x5230;&#xFF0C;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;`FragmentManagerViewModel`&#xFF0C;&#x4F20;&#x5165;`false`&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x81EA;&#x52A8;&#x7F13;&#x5B58;&#x3002;&#x6211;&#x4EEC;&#x770B;&#x4E0B;&#x770B;&#x4E0B;host&#x7684;&#x771F;&#x9762;&#x76EE;</code></pre><p><strong>Fragment</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801; void performAttach() {</span><br><span class="line">   //&#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line">     mChildFragmentManager.attachController(mHost, createFragmentContainer(), this);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;<code>host</code> &#x770B;&#x4E0B;&#x54EA;&#x91CC;&#x521D;&#x59CB;&#x5316;&#x7684;</p>
<p><strong>FragmentController</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line"> public void attachHost(@Nullable Fragment parent) {</span><br><span class="line">        mHost.mFragmentManager.attachController(</span><br><span class="line">                mHost, mHost /*container*/, parent);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x518D;&#x770B;&#x4E0B; &#x8FD9;&#x4E2A;<code>mHost</code>&#x600E;&#x4E48;&#x521D;&#x59CB;&#x5316;&#x7684;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;public static FragmentController createController(FragmentHostCallback&lt;?&gt; callbacks) {</span><br><span class="line">        return new FragmentController(callbacks);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x8FFD;&#x4E00;&#x4E0B; &#x8FDB;&#x5165;&#x5230;&#x4E86;<code>FragmentActivity</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scala&#x590D;&#x5236;&#x4EE3;&#x7801; final FragmentController mFragments = FragmentController.createController(new HostCallbacks());</span><br><span class="line"></span><br><span class="line">//&#x5185;&#x90E8;&#x7C7B;</span><br><span class="line"> class HostCallbacks extends FragmentHostCallback&lt;FragmentActivity&gt;{</span><br><span class="line">    // &#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line">      @NonNull</span><br><span class="line">        @Override</span><br><span class="line">        public ViewModelStore getViewModelStore() {</span><br><span class="line">            return FragmentActivity.this.getViewModelStore();</span><br><span class="line">        }</span><br><span class="line"> }</span><br></pre></td></tr></table></figure>

<p>&#x634B;&#x4E00;&#x4E0B;&#xFF0C;Fragment&#x91CC;&#x9762;&#x7684; <code>mNonConfig.getViewModelStore(f)</code>&#xFF0C;<br>&#x6700;&#x540E;&#x4F1A;&#x8C03;&#x7528;&#x5230; <code>host .getViewModelStore()</code>&#x3002;&#x800C; host &#x662F; FragmentActivity &#x91CC;&#x7684;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x7C7B;&#x3002; &#x6700;&#x540E; &#x8C03;&#x7528;&#x5230; <code>FragmentActivity.this.getViewModelStore()</code>&#x3002; &#x800C;<code>FragmentActivity</code>&#x7EE7;&#x627F;&#x4E86;<code>ComponentActivity</code>&#x3002;</p>
<p>&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x6765;&#x8BF4;&#xFF0C;<code>FragmentManager</code> &#x8C03;&#x7528;&#x7684;&#x662F; <code>ComponentActivity</code>&#x7684;<code>getViewModelStore()</code>,&#x62FF;&#x5230;&#x4E86; &#x7136;&#x540E; &#x6784;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>ViewModelProvider()</code> &#x8FD4;&#x56DE;&#x3002;</p>
<p>&#x5B9E;&#x5728;&#x4E0D;&#x884C;&#x4E86;&#xFF0C;&#x81EA;&#x5DF1; &#x521B;&#x5EFA;&#x4E00;&#x4E2A; <code>FragmentManagerViewModel&#xFF08;false&#xFF09;</code>&#x7528;&#x4E8E;&#x5904;&#x7406;&#x3002;</p>
<h4 id="ViewModelStore&#x662F;&#x4E2A;&#x5565;&#xFF1F;"><a href="#ViewModelStore&#x662F;&#x4E2A;&#x5565;&#xFF1F;" class="headerlink" title="ViewModelStore&#x662F;&#x4E2A;&#x5565;&#xFF1F;"></a>ViewModelStore&#x662F;&#x4E2A;&#x5565;&#xFF1F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801;open class ViewModelStore {</span><br><span class="line"></span><br><span class="line">    private val map = mutableMapOf&lt;String, ViewModel&gt;()</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">    @RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span><br><span class="line">    fun put(key: String, viewModel: ViewModel) {</span><br><span class="line">        val oldViewModel = map.put(key, viewModel)</span><br><span class="line">        oldViewModel?.onCleared()</span><br><span class="line">    }</span><br><span class="line">    @RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span><br><span class="line">    operator fun get(key: String): ViewModel? {</span><br><span class="line">        return map[key]</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">    @RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)</span><br><span class="line">    fun keys(): Set&lt;String&gt; {</span><br><span class="line">        return HashSet(map.keys)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    fun clear() {</span><br><span class="line">        for (vm in map.values) {</span><br><span class="line">            vm.clear()</span><br><span class="line">        }</span><br><span class="line">        map.clear()</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x773C;&#x660E;&#x767D;&#xFF0C;&#x4E00;&#x4E2A;<code>map</code>,&#x80FD;&#x5B58;<code>ViewModel</code>&#x3002; &#x80FD;&#x6E05;&#x9664;&#xFF0C;&#x65E0;&#x4E86;&#x3002;</p>
<h4 id="ViewModelProvider-get-&#x53C8;&#x641E;&#x4E86;&#x5565;&#xFF1F;"><a href="#ViewModelProvider-get-&#x53C8;&#x641E;&#x4E86;&#x5565;&#xFF1F;" class="headerlink" title="ViewModelProvider. get() &#x53C8;&#x641E;&#x4E86;&#x5565;&#xFF1F;"></a>ViewModelProvider. get() &#x53C8;&#x641E;&#x4E86;&#x5565;&#xFF1F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">kotlin&#x590D;&#x5236;&#x4EE3;&#x7801; @MainThread</span><br><span class="line">    public open operator fun &lt;T : ViewModel&gt; get(modelClass: Class&lt;T&gt;): T {</span><br><span class="line">        val canonicalName = modelClass.canonicalName</span><br><span class="line">            ?: throw IllegalArgumentException(&quot;Local and anonymous classes can not be ViewModels&quot;)</span><br><span class="line">        return get(&quot;$DEFAULT_KEY:$canonicalName&quot;, modelClass)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Suppress(&quot;UNCHECKED_CAST&quot;)</span><br><span class="line">    @MainThread</span><br><span class="line">    public open operator fun &lt;T : ViewModel&gt; get(key: String, modelClass: Class&lt;T&gt;): T {</span><br><span class="line">        val viewModel = store[key]</span><br><span class="line">        if (modelClass.isInstance(viewModel)) {</span><br><span class="line">            (factory as? OnRequeryFactory)?.onRequery(viewModel!!)</span><br><span class="line">            return viewModel as T</span><br><span class="line">        } else {</span><br><span class="line">            @Suppress(&quot;ControlFlowWithEmptyBody&quot;)</span><br><span class="line">            if (viewModel != null) {</span><br><span class="line">                // TODO: log a warning.</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        val extras = MutableCreationExtras(defaultCreationExtras)</span><br><span class="line">        extras[VIEW_MODEL_KEY] = key</span><br><span class="line"></span><br><span class="line">        return try {</span><br><span class="line">            factory.create(modelClass, extras)</span><br><span class="line">        } catch (e: AbstractMethodError) {</span><br><span class="line">            factory.create(modelClass)</span><br><span class="line">        }.also { store.put(key, it) }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x626B;&#x4E00;&#x773C;&#xFF0C;&#x62FF;&#x4F20;&#x5165;&#x7684;&#x7C7B;&#x540D; <code>canonicalName</code> &#x524D;&#x9762;&#x62FC;&#x63A5; <code>&#x201C;DEFAULT_KEY&#x201D;</code>&#xFF0C;&#x5982;&#x679C;&#x5F53;&#x524D;<code>store</code>&#x6709;&#xFF0C;&#x4E14;&#x662F; &#x662F;&#x5F53;&#x524D;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x5C31;&#x5F3A;&#x8F6C;&#x8FD4;&#x56DE;&#x3002; &#x6CA1;&#x6709;&#x5C31;<code>factory</code> &#x521B;&#x5EFA;&#x3002;&#x6700;&#x540E;&#x8C03;&#x7528; <code>also</code>&#x7F13;&#x5B58;&#x8FDB;&#x53BB;&#x3002;&#x770B;&#x4E0B; <code>factory</code>&#x3002;</p>
<p>&#x524D;&#x9762;&#x6211;&#x4EEC;&#x77E5;&#x9053;<code>ComponentActivity</code>&#x548C;<code>Fragment</code>&#x5B9E;&#x73B0;&#x4E86;<code>HasDefaultViewModelProviderFactory</code>&#x3002;</p>
<ul>
<li>ComponentActivity</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801; @NonNull</span><br><span class="line">    @Override</span><br><span class="line">    public ViewModelProvider.Factory getDefaultViewModelProviderFactory() {</span><br><span class="line">        if (mDefaultFactory == null) {</span><br><span class="line">            mDefaultFactory = new SavedStateViewModelFactory(</span><br><span class="line">                    getApplication(),</span><br><span class="line">                    this,</span><br><span class="line">                    getIntent() != null ? getIntent().getExtras() : null);</span><br><span class="line">        }</span><br><span class="line">        return mDefaultFactory;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<ul>
<li>Fragment</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;   @NonNull</span><br><span class="line">    @Override</span><br><span class="line">    public ViewModelProvider.Factory getDefaultViewModelProviderFactory() {</span><br><span class="line">        if (mFragmentManager == null) {</span><br><span class="line">            throw new IllegalStateException(&quot;Can&apos;t access ViewModels from detached fragment&quot;);</span><br><span class="line">        }</span><br><span class="line">        if (mDefaultFactory == null) {</span><br><span class="line">            Application application = null;</span><br><span class="line">            Context appContext = requireContext().getApplicationContext();</span><br><span class="line">            while (appContext instanceof ContextWrapper) {</span><br><span class="line">                if (appContext instanceof Application) {</span><br><span class="line">                    application = (Application) appContext;</span><br><span class="line">                    break;</span><br><span class="line">                }</span><br><span class="line">                appContext = ((ContextWrapper) appContext).getBaseContext();</span><br><span class="line">            }</span><br><span class="line">            if (application == null &amp;&amp; FragmentManager.isLoggingEnabled(Log.DEBUG)) {</span><br><span class="line">                Log.d(FragmentManager.TAG, &quot;Could not find Application instance from &quot;</span><br><span class="line">                        + &quot;Context &quot; + requireContext().getApplicationContext() + &quot;, you will &quot;</span><br><span class="line">                        + &quot;need CreationExtras to use AndroidViewModel with the default &quot;</span><br><span class="line">                        + &quot;ViewModelProvider.Factory&quot;);</span><br><span class="line">            }</span><br><span class="line">            mDefaultFactory = new SavedStateViewModelFactory(</span><br><span class="line">                    application,</span><br><span class="line">                    this,</span><br><span class="line">                    getArguments());</span><br><span class="line">        }</span><br><span class="line">        return mDefaultFactory;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x5F88;&#x597D;&#x4ED6;&#x4EEC;&#x90FD;&#x8FD4;&#x56DE;&#x4E86;<code>SavedStateViewModelFactory&#xFF08;&#xFF09;</code>&#x3002;&#x770B;&#x4E0B;<code>SavedStateViewModelFactory</code> &#x7684;<code>creat()</code>;</p>
<ul>
<li>SavedStateViewModelFactory.create()</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;  @NonNull</span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {</span><br><span class="line">        // ViewModelProvider calls correct create that support same modelClass with different keys</span><br><span class="line">        // If a developer manually calls this method, there is no &quot;key&quot; in picture, so factory</span><br><span class="line">        // simply uses classname internally as as key.</span><br><span class="line">        String canonicalName = modelClass.getCanonicalName();</span><br><span class="line">        if (canonicalName == null) {</span><br><span class="line">            throw new IllegalArgumentException(&quot;Local and anonymous classes can not be ViewModels&quot;);</span><br><span class="line">        }</span><br><span class="line">        return create(canonicalName, modelClass);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> public &lt;T extends ViewModel&gt; T create(@NonNull String key, @NonNull Class&lt;T&gt; modelClass) {</span><br><span class="line">   //&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;isAndroidViewModel</span><br><span class="line">        boolean isAndroidViewModel = AndroidViewModel.class.isAssignableFrom(modelClass);</span><br><span class="line">        Constructor&lt;T&gt; constructor;</span><br><span class="line">        if (isAndroidViewModel) {</span><br><span class="line">            constructor = findMatchingConstructor(modelClass, ANDROID_VIEWMODEL_SIGNATURE);</span><br><span class="line">        } else {</span><br><span class="line">            constructor = findMatchingConstructor(modelClass, VIEWMODEL_SIGNATURE);</span><br><span class="line">        }</span><br><span class="line">        // doesn&apos;t need SavedStateHandle</span><br><span class="line">        if (constructor == null) {</span><br><span class="line">            return mFactory.create(modelClass);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        SavedStateHandleController controller = SavedStateHandleController.create(</span><br><span class="line">                mSavedStateRegistry, mLifecycle, key, mDefaultArgs);</span><br><span class="line">        try {</span><br><span class="line">            T viewmodel;</span><br><span class="line">            if (isAndroidViewModel) {</span><br><span class="line">                viewmodel = constructor.newInstance(mApplication, controller.getHandle());</span><br><span class="line">            } else {</span><br><span class="line">                viewmodel = constructor.newInstance(controller.getHandle());</span><br><span class="line">            }</span><br><span class="line">            viewmodel.setTagIfAbsent(TAG_SAVED_STATE_HANDLE_CONTROLLER, controller);</span><br><span class="line">            return viewmodel;</span><br><span class="line">        } catch (IllegalAccessException e) {</span><br><span class="line">            throw new RuntimeException(&quot;Failed to access &quot; + modelClass, e);</span><br><span class="line">        } catch (InstantiationException e) {</span><br><span class="line">            throw new RuntimeException(&quot;A &quot; + modelClass + &quot; cannot be instantiated.&quot;, e);</span><br><span class="line">        } catch (InvocationTargetException e) {</span><br><span class="line">            throw new RuntimeException(&quot;An exception happened in constructor of &quot;</span><br><span class="line">                    + modelClass, e.getCause());</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x8C03;&#x7528;&#x4FE9;&#x53C2;&#x6570;&#xFF0C;&#x5224;&#x65AD;&#x4E86;&#x662F;&#x5426;&#x662F;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;<code>AndroidViewModel</code>&#xFF0C;&#x518D;&#x5F80;&#x4E0B;&#x4E00;&#x770B;<code>newInstance()</code>&#xFF0C;&#x53CD;&#x5C04;&#xFF0C; &#x7EDD;&#x5BF9;&#x7684;&#x53CD;&#x5C04;&#x3002;</p>
<p>&#x5230;&#x6B64;&#x4E3A;&#x6B62;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053; <code>get()</code> &#x5176;&#x5B9E;&#x5C31;&#x662F;&#x7F13;&#x5B58;&#x5219;&#x53D6;&#xFF0C;&#x6CA1;&#x7F13;&#x5B58;&#x5C31;&#x53CD;&#x5C04;&#x641E;&#x4E2A;&#x5BF9;&#x8C61; ,also &#x7F13;&#x5B58;&#x8FDB;&#x53BB;&#x3002;</p>
<p>&#x81F3;&#x6B64;&#xFF0C;&#x8FD8;&#x6CA1;&#x6210;&#x827A;&#x672F;&#x3002;</p>
<h4 id="ViewModel-&#x7684;&#x81EA;&#x6211;&#x4FEE;&#x517B;&#xFF08;&#x7BA1;&#x7406;&#xFF09;&#xFF1F;"><a href="#ViewModel-&#x7684;&#x81EA;&#x6211;&#x4FEE;&#x517B;&#xFF08;&#x7BA1;&#x7406;&#xFF09;&#xFF1F;" class="headerlink" title="ViewModel &#x7684;&#x81EA;&#x6211;&#x4FEE;&#x517B;&#xFF08;&#x7BA1;&#x7406;&#xFF09;&#xFF1F;"></a>ViewModel &#x7684;&#x81EA;&#x6211;&#x4FEE;&#x517B;&#xFF08;&#x7BA1;&#x7406;&#xFF09;&#xFF1F;</h4><p>&#x8BA4;&#x771F;&#x9605;&#x8BFB;&#x7684;&#x670B;&#x53CB;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;<code>Fragment</code>&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x7528;<code>FragmentActivity</code>&#x7684;<code>ViewModelStore</code>&#x3002;</p>
<ul>
<li>&#x770B;&#x4E0B;<code>FragmentActivity</code> &#x7684; &#x7236;&#x7C7B;<code>ComponentActivity</code> &#x6784;&#x9020;&#x53C2;&#x6570;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;public ComponentActivity() {</span><br><span class="line"></span><br><span class="line">  //&#x7701;&#x7565;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line">getLifecycle().addObserver(new LifecycleEventObserver() {</span><br><span class="line">            @Override</span><br><span class="line">            public void onStateChanged(@NonNull LifecycleOwner source,</span><br><span class="line">                    @NonNull Lifecycle.Event event) {</span><br><span class="line">                if (event == Lifecycle.Event.ON_DESTROY) {</span><br><span class="line">                </span><br><span class="line">                    mContextAwareHelper.clearAvailableContext();</span><br><span class="line">                 </span><br><span class="line">                    if (!isChangingConfigurations()) {</span><br><span class="line">                        getViewModelStore().clear();</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x770B;&#x5230; &#x505A;&#x4E86;&#x4E2A;&#x76D1;&#x542C;&#xFF0C;&#x5728; <code>*ON_DESTROY*</code>&#x7684;&#x65F6;&#x5019;&#xFF0C; &#x5224;&#x65AD;&#x4E86;&#x4E0B;<code>!isChangingConfigurations&#xFF08;&#xFF09;</code>&#x4E5F;&#x5C31;&#x662F; &#x4E0D;&#x662F;&#x53D1;&#x751F;&#x4E86;&#x914D;&#x7F6E;&#x53D8;&#x5316;&#xFF0C;&#x662F;&#x771F;&#x6B63;&#x9500;&#x6BC1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8C03;&#x7528;&#x4E86; <code>getViewModelStore().clear()</code>&#xFF1B;</p>
<p>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x76F8;&#x5F53;&#x4E8E;&#x628A;&#x5F53;&#x524D;&#x7F13;&#x5B58;&#x7684;<code>ViewModel</code> &#x7684;&#x5BF9;&#x8C61;&#x560E;&#x560E;&#x7684;&#x6E05;&#x7A7A;&#x4E86;&#x3002;</p>
<p>&#x7ECF;&#x5E38;&#x8BF4;<code>ViewModel</code> &#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x5EFA;&#x8BAE;&#x6301;&#x6709;<code>Context</code>&#x3002; &#x56E0;&#x4E3A;&#x662F;&#x5728;<code>onDestroy</code>&#x540E;&#x624D;&#x6267;&#x884C;&#x3002;</p>
<p>&#x4E5F;&#x4E3A;&#x4EC0;&#x4E48;&#x8BF4;&#x65CB;&#x8F6C;&#x5C4F;&#x5E55;<code>ViewModel</code> &#x4E0D;&#x4F1A;&#x4E22;&#x6570;&#x636E;&#x3002;&#x56E0;&#x4E3A;&#x867D;&#x7136;&#x8D70;&#x4E86;<code>onDestroy</code> &#x4F46;&#x662F;&#x5185;&#x90E8;&#x5224;&#x65AD;&#x4E86;&#x662F;&#x5426;&#x65CB;&#x8F6C;&#x5C4F;&#x5E55;&#x3002;</p>
<ul>
<li>&#x90A3;<code>Fragment</code> &#x600E;&#x4E48;&#x7BA1;&#x7406;&#x7684;&#x5462;</li>
</ul>
<p>&#x6211;&#x4EEC;&#x8BB0;&#x5F97;<code>Fragment</code> &#x5728; this &#x90A3;&#x4E00;&#x6B65;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6709;2&#x79CD; &#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x79CD; &#x62FF;<code>FragmentActivity</code>&#x7684;ViewModelStore &#x3002;&#x4E00;&#x79CD;&#x81EA;&#x5DF1;&#x6784;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;<code>FragmentManagerViewModel()</code>;</p>
<p>&#x8FD9;&#x4E2A;<code>mNonConfig</code> &#x5176;&#x5B9E;&#x5728;&#x521B;&#x5EFA;&#x540E; &#x8D5B;&#x8FDB;&#x4E86;<code>mFragmentStore</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801; if (parent != null) {</span><br><span class="line">            mNonConfig = parent.mFragmentManager.getChildNonConfig(parent);</span><br><span class="line">        } else if (host instanceof ViewModelStoreOwner) {</span><br><span class="line">            ViewModelStore viewModelStore = ((ViewModelStoreOwner) host).getViewModelStore();</span><br><span class="line">            mNonConfig = FragmentManagerViewModel.getInstance(viewModelStore);</span><br><span class="line">        } else {</span><br><span class="line">            mNonConfig = new FragmentManagerViewModel(false);</span><br><span class="line">        }</span><br><span class="line">        // Ensure that the state is in sync with FragmentManager</span><br><span class="line">        mNonConfig.setIsStateSaved(isStateSaved());</span><br><span class="line">        mFragmentStore.setNonConfig(mNonConfig);</span><br></pre></td></tr></table></figure>

<p><code>mFragmentStore.setNonConfig(mNonConfig);</code>&#x628A;<code>mNonConfig</code>&#x4F20;&#x51FA;&#x53BB;&#x4E86;&#xFF0C;&#x8FFD;&#x7740;&#x770B;&#x4E00;&#x4E0B;&#x3002;</p>
<p>&#x8FDB;&#x5165; <code>FragmentStore</code>&#x3002;</p>
<p>&#x53D1;&#x73B0; <code>FragmentStore</code> &#x662F;&#x5728;<code>FragmentManager</code>&#x521D;&#x59CB;&#x5316;&#x5C31;&#x521B;&#x5EFA;&#x4E86;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; private final FragmentStore mFragmentStore = new FragmentStore();</span><br></pre></td></tr></table></figure>

<p><code>FragmentStore</code>&#x91CC;&#x8C03;&#x7528;<code>mNonConfig</code> &#x67E5;&#x770B;&#x4E0B;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x5730;&#x65B9;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801; FragmentManagerViewModel getNonConfig() {</span><br><span class="line">        return mNonConfig;</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x8FDB;&#x5165;<code>FragmentManager.java</code></p>
<p>-&gt;<code>clearBackStackStateViewModels()</code></p>
<p>&#x8FD9;&#x91CC;&#x53BB;&#x5224;&#x65AD;&#x4E86;&#x54EA;&#x4E9B;Fragment &#x9700;&#x8981;&#x6E05;&#x7406;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;private void clearBackStackStateViewModels() {</span><br><span class="line">        boolean shouldClear;</span><br><span class="line">        if (mHost instanceof ViewModelStoreOwner) {</span><br><span class="line">            shouldClear = mFragmentStore.getNonConfig().isCleared();</span><br><span class="line">        } else if (mHost.getContext() instanceof Activity) {</span><br><span class="line">            Activity activity = (Activity) mHost.getContext();</span><br><span class="line">            shouldClear = !activity.isChangingConfigurations();</span><br><span class="line">        } else {</span><br><span class="line">            shouldClear = true;</span><br><span class="line">        }</span><br><span class="line">        if (shouldClear) {</span><br><span class="line">            for (BackStackState backStackState : mBackStackStates.values()) {</span><br><span class="line">                for (String who : backStackState.mFragments) {</span><br><span class="line">                   mFragmentStore.getNonConfig().clearNonConfigState(who, false);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>-&gt;<code>dispatchDestroy()</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801; void dispatchDestroy() {</span><br><span class="line">        mDestroyed = true;</span><br><span class="line">        execPendingActions(true);</span><br><span class="line">        endAnimatingAwayFragments();</span><br><span class="line">        clearBackStackStateViewModels();</span><br><span class="line">        //&#x7701;&#x7565;&#x4EE3;&#x7801;</span><br><span class="line">        }</span><br></pre></td></tr></table></figure>

<p>-&gt; <code>FragmentController.java</code>-&gt;<code>dispatchDestroy()</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;public void dispatchDestroyView() {</span><br><span class="line">        mHost.mFragmentManager.dispatchDestroyView();</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>-&gt; <code>FragmentActivity.java</code>-&gt;<code>onDestroy(){}</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801; @Override</span><br><span class="line">    protected void onDestroy() {</span><br><span class="line">        super.onDestroy();</span><br><span class="line">        mFragments.dispatchDestroy();</span><br><span class="line">       mFragmentLifecycleRegistry.handleLifecycleEvent(Lifecycle.Event.ON_DESTROY);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x628A;&#x6574;&#x4E2A;&#x8C03;&#x7528;&#x53CD;&#x8FC7;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#xFF0C;<code>FragmentActivity</code> &#x5728;<code>onDestroy</code> &#x8C03;&#x7528;</p>
<p><code>mFragments.dispatchDestroy()</code>; (<code>FragmentController.java</code>)</p>
<p>-&gt; <code>FragmentManager.dispatchDestroy()</code> (<code>FragmentManger.java</code>)</p>
<p>-&gt; <code>clearBackStackStateViewModels()</code> &#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;<code>FragmentActivity</code>&#x9500;&#x6BC1;&#x624D;&#x9500;&#x6BC1;&#x3002;</p>
<p>&#x53E6;&#x5916; <code>FragmentStateManager</code> &#x91CC; &#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E5F;&#x4F1A;&#x9500;&#x6BC1;&#x6E05;&#x7406;&#x5BF9;&#x5E94;&#x7684;<code>ViewModel</code>&#x3002;&#x611F;&#x5174;&#x8DA3;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;void moveToExpectedState{</span><br><span class="line">//&#x7701;&#x5217;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line">case Fragment.ATTACHED:</span><br><span class="line">if (mFragment.mBeingSaved</span><br><span class="line">  &amp;&amp; mFragmentStore.getSavedState(mFragment.mWho) == null) {                              mFragmentStore.setSavedState(mFragment.mWho, saveState());</span><br><span class="line">                            }</span><br><span class="line">                            destroy(); </span><br><span class="line">                            }</span><br><span class="line"> void destroy() {</span><br><span class="line">   //&#x7701;&#x5217;&#x90E8;&#x5206;&#x4EE3;&#x7801;</span><br><span class="line">    if (shouldDestroy) {</span><br><span class="line">       mFragment.performDestroy();</span><br><span class="line">        if ((beingRemoved &amp;&amp; !mFragment.mBeingSaved) || shouldClear) {            mFragmentStore.getNonConfig().clearNonConfigState(mFragment, false);</span><br><span class="line">            }</span><br><span class="line">            mFragment.performDestroy();</span><br><span class="line">    }</span><br><span class="line"> }</span><br></pre></td></tr></table></figure>

<h3 id="&#x9762;&#x8BD5;&#x7684;&#x4F83;&#x4F83;&#x800C;&#x8C08;"><a href="#&#x9762;&#x8BD5;&#x7684;&#x4F83;&#x4F83;&#x800C;&#x8C08;" class="headerlink" title="&#x9762;&#x8BD5;&#x7684;&#x4F83;&#x4F83;&#x800C;&#x8C08;"></a>&#x9762;&#x8BD5;&#x7684;&#x4F83;&#x4F83;&#x800C;&#x8C08;</h3><ul>
<li>&#x4F18;&#x52BF;</li>
</ul>
<pre><code>+ &#x4FDD;&#x5B58;&#x6570;&#x636E;&#xFF0C;&#x9875;&#x9762;&#x53D8;&#x5316;&#x80FD;&#x7F13;&#x5B58;
+ &#x81EA;&#x52A8;&#x7BA1;&#x7406;&#xFF0C;&#x9875;&#x9762;&#x9500;&#x6BC1;&#x81EA;&#x52A8;&#x6E05;&#x7406;
+ `Fragment`&#x548C; `Activity`&#x53EF;&#x5171;&#x7528;&#x3002;</code></pre><ul>
<li><code>Fragment</code>&#x80FD;&#x62FF; <code>Activity</code> &#x7684;<code>ViewModel</code>&#x4E48;&#xFF1F;</li>
</ul>
<pre><code>+ &#x80FD; &#xFF0C;&#x6BD5;&#x7ADF;`FragmentManger` &#x90A3;&#x5411;&#x4E0A;&#x7BA1;&#x7406;&#xFF0C;&#x5176;&#x5B9E;&#x53D6;&#x7684;&#x5C31;&#x662F;&#x4E0A;&#x5C42;`FragmentActivity`&#x7684;`ViewModelStore`&#x3002;</code></pre><ul>
<li>&#x600E;&#x4E48;&#x81EA;&#x52A8;&#x7BA1;&#x7406;&#x7684;&#xFF1F;</li>
</ul>
<pre><code>+ `ComponentActivity` &#x76D1;&#x542C;`onDestroy()` &#xFF0C;&#x6E05;&#x7406;
+ `Fragment`&#x5728;`FragmentActivity` &#x7684; `onDestroy()` &#x4F1A;&#x6E05;&#x7406;&#x3002;</code></pre><ul>
<li><code>ViewModelStore</code> &#x77E5;&#x9053;&#x4E48;&#xFF1F;</li>
</ul>
<pre><code>+ &#x77E5;&#x9053; &#xFF0C;&#x4E00;&#x4E2A;`map` &#x5C31;&#x662F;&#x5E72;&#x3002;</code></pre><ul>
<li>&#x77E5;&#x9053;&#x600E;&#x4E48;&#x521B;&#x5EFA;&#x7684;&#x4E48;&#xFF1F;</li>
</ul>
<pre><code>+ &#x5185;&#x90E8; `factory` &#x53CD;&#x5C04;&#x5C31;&#x662F;&#x5E72;&#x3002;</code></pre><ul>
<li>&#x4E3A;&#x5565;&#x65CB;&#x8F6C;&#x8FD8;&#x80FD;&#x4FDD;&#x5B58;&#x6570;&#x636E;&#xFF1F;</li>
</ul>
<p>&#x5224;&#x65AD;&#x4E86;&#x662F;&#x914D;&#x7F6E;&#x53D8;&#x5316;&#xFF0C;&#x5982;&#x65CB;&#x8F6C;&#x5C4F;&#x5E55;&#x7B49;&#xFF0C;&#x7B49;&#x5230;&#x771F;&#x6B63;&#x9500;&#x6BC1;&#x624D;&#x6E05;&#x7A7A;&#x3002;</p>
<ul>
<li>&#x5269;&#x4E0B;&#x7684;&#x81EA;&#x884C;&#x53D1;&#x6325;</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/932acc2a263450e8b5323e57ed1474ae.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7343160457782788115.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7343160457782788115.html" itemprop="url">Git 分支整合之道：Merge 与 Rebase 的理念碰</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-07T10:02:31+08:00">
                2024-03-07
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x5F15;&#x8A00;"><a href="#&#x5F15;&#x8A00;" class="headerlink" title="&#x5F15;&#x8A00;"></a>&#x5F15;&#x8A00;</h2><p>&#x5728;&#x4F7F;&#x7528; Git &#x8FDB;&#x884C;&#x7248;&#x672C;&#x63A7;&#x5236;&#x65F6;&#xFF0C;&#x5206;&#x652F;&#x5408;&#x5E76;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x800C; Git &#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x79CD;&#x4E3B;&#x8981;&#x7684;&#x5206;&#x652F;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#xFF1A;<code>git merge</code> &#x548C; <code>git rebase</code>&#x3002;&#x672C;&#x6587;&#x5C06;&#x6DF1;&#x5165;&#x63A2;&#x8BA8;&#x8FD9;&#x4E24;&#x79CD;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#x7684;&#x539F;&#x7406;&#x3001;&#x4F18;&#x7F3A;&#x70B9;&#x4EE5;&#x53CA;&#x9002;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x4EE5;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x548C;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x7B56;&#x7565;&#x3002;</p>
<h2 id="&#x533A;&#x522B;"><a href="#&#x533A;&#x522B;" class="headerlink" title="&#x533A;&#x522B;"></a>&#x533A;&#x522B;</h2><h3 id="Git-Merge"><a href="#Git-Merge" class="headerlink" title="Git Merge"></a>Git Merge</h3><p><strong>&#x539F;&#x7406;&#xFF1A;</strong> <code>git merge</code> &#x662F;&#x5C06;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#x3002;&#x5B83;&#x4F1A;&#x4FDD;&#x7559;&#x5206;&#x652F;&#x7684;&#x5206;&#x53C9;&#x7ED3;&#x6784;&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#xFF0C;&#x5C06;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x66F4;&#x6539;&#x6574;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x3002;</p>
<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ol>
<li><strong>&#x4FDD;&#x7559;&#x5206;&#x53C9;&#x7ED3;&#x6784;&#xFF1A;</strong> &#x6E05;&#x6670;&#x5730;&#x663E;&#x793A;&#x5206;&#x652F;&#x4E4B;&#x95F4;&#x7684;&#x5408;&#x5E76;&#x5173;&#x7CFB;&#xFF0C;&#x6709;&#x52A9;&#x4E8E;&#x7406;&#x89E3;&#x6574;&#x4E2A;&#x9879;&#x76EE;&#x7684;&#x5F00;&#x53D1;&#x6D41;&#x7A0B;&#x3002;</li>
<li><strong>&#x4E0D;&#x6539;&#x53D8;&#x5386;&#x53F2;&#xFF1A;</strong> &#x5408;&#x5E76;&#x5206;&#x652F;&#x65F6;&#x4E0D;&#x4F1A;&#x6539;&#x53D8;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#xFF0C;&#x4E0D;&#x4F1A;&#x5BF9;&#x5176;&#x4ED6;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x9020;&#x6210;&#x56F0;&#x6270;&#xFF0C;&#x4FDD;&#x6301;&#x4EE3;&#x7801;&#x5E93;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#x3002;</li>
<li><strong>&#x8F83;&#x5C11;&#x7684;&#x51B2;&#x7A81;&#xFF1A;</strong> &#x76F8;&#x5BF9;&#x4E8E; <code>rebase</code>&#xFF0C;&#x5408;&#x5E76;&#x5206;&#x652F;&#x65F6;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x8F83;&#x5C11;&#x7684;&#x51B2;&#x7A81;&#x3002;</li>
</ol>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ol>
<li><strong>&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x8F83;&#x6DF7;&#x4E71;&#xFF1A;</strong> &#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x53D8;&#x5F97;&#x8F83;&#x4E3A;&#x6DF7;&#x4E71;&#xFF0C;&#x4E0D;&#x591F;&#x7EBF;&#x6027;&#x6E05;&#x6670;&#x3002;</li>
<li><strong>&#x589E;&#x52A0;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#xFF1A;</strong> &#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x589E;&#x52A0;&#x4E00;&#x4E9B;&#x65E0;&#x5173;&#x7684;&#x63D0;&#x4EA4;&#x4FE1;&#x606F;&#x3002;</li>
</ol>
<h3 id="Git-Rebase"><a href="#Git-Rebase" class="headerlink" title="Git Rebase"></a>Git Rebase</h3><p><strong>&#x539F;&#x7406;&#xFF1A;</strong> <code>git rebase</code> &#x662F;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x5206;&#x652F;&#x7684;&#x57FA;&#x70B9;&#xFF0C;&#x5E76;&#x5C06;&#x5F53;&#x524D;&#x5206;&#x652F;&#x7684;&#x63D0;&#x4EA4;&#x9010;&#x4E2A;&#x5E94;&#x7528;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#x4E0A;&#x3002;&#x5B83;&#x4F1A;&#x521B;&#x5EFA;&#x66F4;&#x6574;&#x6D01;&#x3001;&#x66F4;&#x7EBF;&#x6027;&#x7684;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x3002;</p>
<p><strong>&#x4F18;&#x70B9;&#xFF1A;</strong></p>
<ol>
<li><strong>&#x5386;&#x53F2;&#x6574;&#x6D01;&#xFF1A;</strong> &#x521B;&#x5EFA;&#x66F4;&#x6574;&#x6D01;&#x3001;&#x66F4;&#x7EBF;&#x6027;&#x7684;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#x3002;</li>
<li><strong>&#x6613;&#x4E8E;&#x7406;&#x89E3;&#xFF1A;</strong> &#x76F4;&#x89C2;&#x7684;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x7EBF;&#x6027;&#x7ED3;&#x6784;&#x66F4;&#x6613;&#x4E8E;&#x7406;&#x89E3;&#x548C;&#x56DE;&#x987E;&#x3002;</li>
<li><strong>&#x66F4;&#x597D;&#x7684;&#x56DE;&#x9000;&#x548C;&#x8C03;&#x6574;&#xFF1A;</strong> &#x53EF;&#x4EE5;&#x66F4;&#x5BB9;&#x6613;&#x5730;&#x8FDB;&#x884C;&#x63D0;&#x4EA4;&#x8C03;&#x6574;&#x3001;&#x56DE;&#x9000;&#x6216;&#x4FEE;&#x6539;&#x3002;</li>
</ol>
<p><strong>&#x7F3A;&#x70B9;&#xFF1A;</strong></p>
<ol>
<li><strong>&#x6F5C;&#x5728;&#x7684;&#x51B2;&#x7A81;&#xFF1A;</strong> &#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x5206;&#x652F;&#x51B2;&#x7A81;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x5E76;&#x7EE7;&#x7EED; rebase &#x8FC7;&#x7A0B;&#x3002;</li>
<li><strong>&#x6539;&#x53D8;&#x5386;&#x53F2;&#xFF1A;</strong> &#x53EF;&#x80FD;&#x4F1A;&#x6539;&#x53D8;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#xFF0C;&#x5BFC;&#x81F4;&#x5176;&#x4ED6;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x56F0;&#x60D1;&#xFF0C;&#x5E76;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x4EE3;&#x7801;&#x5E93;&#x7684;&#x4E0D;&#x7A33;&#x5B9A;&#x6027;&#x3002;</li>
</ol>
<h3 id="&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#xFF1F;"></a>&#x5982;&#x4F55;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#xFF1F;</h3><ul>
<li>&#x5982;&#x679C;&#x66F4;&#x6CE8;&#x91CD;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x7684;&#x6574;&#x6D01;&#x6027;&#x548C;&#x7EBF;&#x6027;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4F7F;&#x7528; <code>rebase</code>&#x3002;</li>
<li>&#x5982;&#x679C;&#x66F4;&#x6CE8;&#x91CD;&#x4FDD;&#x7559;&#x5206;&#x652F;&#x7684;&#x5206;&#x53C9;&#x7ED3;&#x6784;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4F7F;&#x7528; <code>merge</code>&#x3002;</li>
<li>&#x6839;&#x636E;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x548C;&#x56E2;&#x961F;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7075;&#x6D3B;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#x3002;</li>
</ul>
<p>&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#x5206;&#x6790; <code>git merge</code> &#x548C; <code>git rebase</code>&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;&#x5B83;&#x4EEC;&#x5404;&#x81EA;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF0C;&#x4EE5;&#x53CA;&#x5728;&#x4E0D;&#x540C;&#x573A;&#x666F;&#x4E0B;&#x7684;&#x9002;&#x7528;&#x6027;&#x3002;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#x6709;&#x52A9;&#x4E8E;&#x4FDD;&#x6301;&#x4EE3;&#x7801;&#x5E93;&#x7684;&#x6E05;&#x6670;&#x6027;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x63D0;&#x9AD8;&#x56E2;&#x961F;&#x7684;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<h2 id="&#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x6218;&#x6280;&#x5DE7;"><a href="#&#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x6218;&#x6280;&#x5DE7;" class="headerlink" title="&#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x6218;&#x6280;&#x5DE7;"></a>&#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x6218;&#x6280;&#x5DE7;</h2><h3 id="Git-Merge-1"><a href="#Git-Merge-1" class="headerlink" title="Git Merge"></a>Git Merge</h3><p><code>Git</code> &#x4E2D;&#x7684; <code>merge</code> &#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x5C06;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x66F4;&#x6539;&#x5408;&#x5E76;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x89C1;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5728;&#x56E2;&#x961F;&#x534F;&#x4F5C;&#x5F00;&#x53D1;&#x4E2D;&#x3002;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E9B; <code>git merge</code> &#x7684;&#x5E38;&#x89C1;&#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</p>
<h5 id="1-&#x5408;&#x5E76;&#x7279;&#x6027;&#x5206;&#x652F;&#x5230;&#x4E3B;&#x5206;&#x652F;"><a href="#1-&#x5408;&#x5E76;&#x7279;&#x6027;&#x5206;&#x652F;&#x5230;&#x4E3B;&#x5206;&#x652F;" class="headerlink" title="1. &#x5408;&#x5E76;&#x7279;&#x6027;&#x5206;&#x652F;&#x5230;&#x4E3B;&#x5206;&#x652F;"></a>1. &#x5408;&#x5E76;&#x7279;&#x6027;&#x5206;&#x652F;&#x5230;&#x4E3B;&#x5206;&#x652F;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x5F53;&#x5F00;&#x53D1;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x529F;&#x80FD;&#x6216;&#x4FEE;&#x590D;&#x4E00;&#x4E2A; bug &#x65F6;&#xFF0C;&#x901A;&#x5E38;&#x4F1A;&#x5728;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x7279;&#x6027;&#x5206;&#x652F;&#x4E0A;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x3002;&#x4E00;&#x65E6;&#x529F;&#x80FD;&#x6216;&#x4FEE;&#x590D;&#x5B8C;&#x6210;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x8BE5;&#x7279;&#x6027;&#x5206;&#x652F;&#x5408;&#x5E76;&#x5230;&#x4E3B;&#x5206;&#x652F;&#xFF08;&#x901A;&#x5E38;&#x662F; <code>main</code> &#x6216; <code>master</code> &#x5206;&#x652F;&#xFF09;&#x4E2D;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git checkout main</span><br><span class="line">git merge feature-branch</span><br></pre></td></tr></table></figure>

<h5 id="2-&#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;"><a href="#2-&#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;" class="headerlink" title="2. &#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;"></a>2. &#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x5F53;&#x4E24;&#x4E2A;&#x5206;&#x652F;&#x4E0A;&#x5BF9;&#x540C;&#x4E00;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x66F4;&#x6539;&#xFF0C;&#x6216;&#x8005;&#x5BF9;&#x540C;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x4FEE;&#x6539;&#x65F6;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x5206;&#x652F;&#x51B2;&#x7A81;&#x3002;&#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;&#x540E;&#xFF0C;&#x624D;&#x80FD;&#x6210;&#x529F;&#x8FDB;&#x884C;&#x5408;&#x5E76;&#x64CD;&#x4F5C;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong></li>
</ul>
<pre><code>1. &#x4F7F;&#x7528; `git status` &#x67E5;&#x770B;&#x51B2;&#x7A81;&#x6587;&#x4EF6;&#x3002;
2. &#x624B;&#x52A8;&#x7F16;&#x8F91;&#x51B2;&#x7A81;&#x6587;&#x4EF6;&#xFF0C;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x3002;
3. &#x4F7F;&#x7528; `git add` &#x5C06;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x6807;&#x8BB0;&#x4E3A;&#x5DF2;&#x89E3;&#x51B3;&#x3002;
4. &#x4F7F;&#x7528; `git merge --continue` &#x7EE7;&#x7EED;&#x5408;&#x5E76;&#x8FC7;&#x7A0B;&#x3002;</code></pre><h5 id="3-&#x5408;&#x5E76;&#x8FDC;&#x7A0B;&#x5206;&#x652F;"><a href="#3-&#x5408;&#x5E76;&#x8FDC;&#x7A0B;&#x5206;&#x652F;" class="headerlink" title="3. &#x5408;&#x5E76;&#x8FDC;&#x7A0B;&#x5206;&#x652F;"></a>3. &#x5408;&#x5E76;&#x8FDC;&#x7A0B;&#x5206;&#x652F;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x5F53;&#x56E2;&#x961F;&#x6210;&#x5458;&#x5728;&#x8FDC;&#x7A0B;&#x4ED3;&#x5E93;&#x4E0A;&#x521B;&#x5EFA;&#x4E86;&#x65B0;&#x7684;&#x5206;&#x652F;&#x5E76;&#x8FDB;&#x884C;&#x4E86;&#x66F4;&#x6539;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5C06;&#x8FD9;&#x4E9B;&#x66F4;&#x6539;&#x5408;&#x5E76;&#x5230;&#x672C;&#x5730;&#x4ED3;&#x5E93;&#x4E2D;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git fetch origin</span><br><span class="line">git merge origin/remote-branch</span><br></pre></td></tr></table></figure>

<h5 id="4-&#x907F;&#x514D;-Fast-Forward-&#x5408;&#x5E76;"><a href="#4-&#x907F;&#x514D;-Fast-Forward-&#x5408;&#x5E76;" class="headerlink" title="4. &#x907F;&#x514D; Fast-Forward &#x5408;&#x5E76;"></a>4. &#x907F;&#x514D; Fast-Forward &#x5408;&#x5E76;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> Fast-Forward &#x5408;&#x5E76;&#x662F;&#x6307;&#x5408;&#x5E76;&#x65F6;&#x76F4;&#x63A5;&#x5C06;&#x76EE;&#x6807;&#x5206;&#x652F;&#x6307;&#x9488;&#x79FB;&#x52A8;&#x5230;&#x6E90;&#x5206;&#x652F;&#x6307;&#x9488;&#x6240;&#x6307;&#x7684;&#x63D0;&#x4EA4;&#x3002;&#x6709;&#x65F6;&#x5019;&#xFF0C;&#x60A8;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x4FDD;&#x7559;&#x5206;&#x652F;&#x5386;&#x53F2;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x540E;&#x7EED;&#x5BA1;&#x67E5;&#x65F6;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x9879;&#x76EE;&#x7684;&#x6F14;&#x53D8;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong> &#x4F7F;&#x7528; <code>--no-ff</code> &#x9009;&#x9879;&#x6267;&#x884C;&#x666E;&#x901A;&#x5408;&#x5E76;&#xFF0C;&#x5373;&#x4F7F;&#x6CA1;&#x6709;&#x5206;&#x652F;&#x5386;&#x53F2;&#x4E5F;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git merge --no-ff feature-branch</span><br></pre></td></tr></table></figure>

<h5 id="5-&#x5408;&#x5E76;&#x591A;&#x4E2A;&#x5206;&#x652F;"><a href="#5-&#x5408;&#x5E76;&#x591A;&#x4E2A;&#x5206;&#x652F;" class="headerlink" title="5. &#x5408;&#x5E76;&#x591A;&#x4E2A;&#x5206;&#x652F;"></a>5. &#x5408;&#x5E76;&#x591A;&#x4E2A;&#x5206;&#x652F;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x6709;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5C06;&#x591A;&#x4E2A;&#x5206;&#x652F;&#x7684;&#x66F4;&#x6539;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x4E2D;&#xFF0C;&#x8FD9;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x5408;&#x5E76;&#x64CD;&#x4F5C;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong> &#x5408;&#x5E76;&#x591A;&#x4E2A;&#x5206;&#x652F;&#x65F6;&#xFF0C;&#x9996;&#x5148;&#x5408;&#x5E76;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x5206;&#x652F;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5408;&#x5E76;&#x5176;&#x4ED6;&#x5206;&#x652F;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git merge branch1</span><br><span class="line">git merge branch2</span><br></pre></td></tr></table></figure>

<h3 id="Git-Rebase-1"><a href="#Git-Rebase-1" class="headerlink" title="Git Rebase"></a>Git Rebase</h3><p><code>Git</code> &#x4E2D;&#x7684; <code>rebase</code> &#x547D;&#x4EE4;&#x7528;&#x4E8E;&#x91CD;&#x65B0;&#x8BBE;&#x7F6E;&#x5206;&#x652F;&#x7684;&#x57FA;&#x70B9;&#xFF0C;&#x4ECE;&#x800C;&#x6539;&#x53D8;&#x63D0;&#x4EA4;&#x7684;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#x3002;&#x5B83;&#x4E0E; <code>merge</code> &#x76F8;&#x6BD4;&#xFF0C;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x66F4;&#x52A0;&#x6574;&#x6D01;&#x7684;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#xFF0C;&#x4F46;&#x4E5F;&#x9700;&#x8981;&#x8C28;&#x614E;&#x4F7F;&#x7528;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E9B; <code>git rebase</code> &#x7684;&#x5E38;&#x89C1;&#x5E94;&#x7528;&#x573A;&#x666F;&#x53CA;&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</p>
<h5 id="1-&#x5C06;&#x5F53;&#x524D;&#x5206;&#x652F;&#x7684;&#x63D0;&#x4EA4;&#x6574;&#x5408;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#x4E2D;"><a href="#1-&#x5C06;&#x5F53;&#x524D;&#x5206;&#x652F;&#x7684;&#x63D0;&#x4EA4;&#x6574;&#x5408;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#x4E2D;" class="headerlink" title="1. &#x5C06;&#x5F53;&#x524D;&#x5206;&#x652F;&#x7684;&#x63D0;&#x4EA4;&#x6574;&#x5408;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#x4E2D;"></a>1. &#x5C06;&#x5F53;&#x524D;&#x5206;&#x652F;&#x7684;&#x63D0;&#x4EA4;&#x6574;&#x5408;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#x4E2D;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x5F53;&#x60A8;&#x5728;&#x5F53;&#x524D;&#x5206;&#x652F;&#x4E0A;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x63D0;&#x4EA4;&#x540E;&#xFF0C;&#x5E0C;&#x671B;&#x5C06;&#x8FD9;&#x4E9B;&#x63D0;&#x4EA4;&#x6574;&#x5408;&#x5230;&#x76EE;&#x6807;&#x5206;&#x652F;&#x4E2D;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>rebase</code>&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git checkout target-branch</span><br><span class="line">git rebase source-branch</span><br></pre></td></tr></table></figure>

<h5 id="2-&#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;-1"><a href="#2-&#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;-1" class="headerlink" title="2. &#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;"></a>2. &#x89E3;&#x51B3;&#x5206;&#x652F;&#x51B2;&#x7A81;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x5728;&#x8FDB;&#x884C; rebase &#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x9047;&#x5230;&#x5206;&#x652F;&#x51B2;&#x7A81;&#x3002;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x7EE7;&#x7EED; rebase &#x8FDB;&#x7A0B;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong></li>
</ul>
<pre><code>1. &#x4F7F;&#x7528; `git status` &#x67E5;&#x770B;&#x51B2;&#x7A81;&#x6587;&#x4EF6;&#x3002;
2. &#x624B;&#x52A8;&#x7F16;&#x8F91;&#x51B2;&#x7A81;&#x6587;&#x4EF6;&#xFF0C;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x3002;
3. &#x4F7F;&#x7528; `git add` &#x5C06;&#x89E3;&#x51B3;&#x51B2;&#x7A81;&#x540E;&#x7684;&#x6587;&#x4EF6;&#x6807;&#x8BB0;&#x4E3A;&#x5DF2;&#x89E3;&#x51B3;&#x3002;
4. &#x4F7F;&#x7528; `git rebase --continue` &#x7EE7;&#x7EED; rebase &#x8FC7;&#x7A0B;&#x3002;</code></pre><h5 id="3-&#x4FDD;&#x6301;&#x5206;&#x652F;&#x5386;&#x53F2;&#x7684;&#x6574;&#x6D01;&#x6027;"><a href="#3-&#x4FDD;&#x6301;&#x5206;&#x652F;&#x5386;&#x53F2;&#x7684;&#x6574;&#x6D01;&#x6027;" class="headerlink" title="3. &#x4FDD;&#x6301;&#x5206;&#x652F;&#x5386;&#x53F2;&#x7684;&#x6574;&#x6D01;&#x6027;"></a>3. &#x4FDD;&#x6301;&#x5206;&#x652F;&#x5386;&#x53F2;&#x7684;&#x6574;&#x6D01;&#x6027;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x4F7F;&#x7528; <code>rebase</code> &#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x66F4;&#x52A0;&#x6574;&#x6D01;&#x7684;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#xFF0C;&#x51CF;&#x5C11;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git checkout source-branch</span><br><span class="line">git rebase target-branch</span><br></pre></td></tr></table></figure>

<h5 id="4-&#x5408;&#x5E76;&#x591A;&#x4E2A;&#x63D0;&#x4EA4;"><a href="#4-&#x5408;&#x5E76;&#x591A;&#x4E2A;&#x63D0;&#x4EA4;" class="headerlink" title="4. &#x5408;&#x5E76;&#x591A;&#x4E2A;&#x63D0;&#x4EA4;"></a>4. &#x5408;&#x5E76;&#x591A;&#x4E2A;&#x63D0;&#x4EA4;</h5><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x6709;&#x65F6;&#x5019;&#xFF0C;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x5C06;&#x591A;&#x4E2A;&#x63D0;&#x4EA4;&#x6574;&#x5408;&#x6210;&#x4E00;&#x4E2A;&#x63D0;&#x4EA4;&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x597D;&#x5730;&#x7EC4;&#x7EC7;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong> &#x5728;&#x8FDB;&#x884C; rebase &#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x5C06;&#x591A;&#x4E2A;&#x63D0;&#x4EA4;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x63D0;&#x4EA4;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git rebase -i HEAD~n</span><br></pre></td></tr></table></figure>

<h3 id="5-&#x907F;&#x514D;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;"><a href="#5-&#x907F;&#x514D;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;" class="headerlink" title="5. &#x907F;&#x514D;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;"></a>5. &#x907F;&#x514D;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;</h3><ul>
<li><strong>&#x573A;&#x666F;&#x8BF4;&#x660E;&#xFF1A;</strong> &#x4F7F;&#x7528; <code>rebase</code> &#x53EF;&#x4EE5;&#x907F;&#x514D;&#x521B;&#x5EFA;&#x989D;&#x5916;&#x7684;&#x5408;&#x5E76;&#x63D0;&#x4EA4;&#xFF0C;&#x4FDD;&#x6301;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x7684;&#x5E72;&#x51C0;&#x6574;&#x6D01;&#x3002;</li>
<li><strong>&#x5B9E;&#x6218;&#x6280;&#x5DE7;&#xFF1A;</strong> &#x5728;&#x8FDB;&#x884C; rebase &#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528; <code>--no-ff</code> &#x9009;&#x9879;&#xFF0C;&#x7981;&#x7528; Fast-Forward &#x5408;&#x5E76;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;git rebase --no-ff target-branch</span><br></pre></td></tr></table></figure>

<h3 id="6-&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#6-&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="6. &#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>6. &#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><ul>
<li><strong>&#x8C28;&#x614E;&#x4F7F;&#x7528;&#xFF1A;</strong> &#x4F7F;&#x7528; <code>rebase</code> &#x4F1A;&#x6539;&#x53D8;&#x63D0;&#x4EA4;&#x7684;&#x5386;&#x53F2;&#x8BB0;&#x5F55;&#xFF0C;&#x56E0;&#x6B64;&#x9700;&#x8981;&#x8C28;&#x614E;&#x64CD;&#x4F5C;&#xFF0C;&#x907F;&#x514D;&#x5BF9;&#x5171;&#x4EAB;&#x4ED3;&#x5E93;&#x9020;&#x6210;&#x5F71;&#x54CD;&#x3002;</li>
<li><strong>&#x907F;&#x514D;&#x5728;&#x5171;&#x4EAB;&#x5206;&#x652F;&#x4E0A;&#x4F7F;&#x7528;&#xFF1A;</strong> &#x907F;&#x514D;&#x5728;&#x5171;&#x4EAB;&#x5206;&#x652F;&#xFF08;&#x5982; <code>main</code> &#x6216; <code>master</code>&#xFF09;&#x4E0A;&#x4F7F;&#x7528; <code>rebase</code>&#xFF0C;&#x4EE5;&#x514D;&#x5F71;&#x54CD;&#x4ED6;&#x4EBA;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#x3002;</li>
</ul>
<p><strong>&#x603B;&#x7ED3;</strong></p>
<p>&#x5728;&#x9009;&#x62E9; <code>rebase</code> &#x8FD8;&#x662F; <code>merge</code> &#x65F6;&#xFF0C;&#x9700;&#x8981;&#x6839;&#x636E;&#x9879;&#x76EE;&#x7684;&#x9700;&#x6C42;&#x548C;&#x56E2;&#x961F;&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x6765;&#x6743;&#x8861;&#x4F18;&#x7F3A;&#x70B9;&#x3002;&#x5982;&#x679C;&#x60A8;&#x66F4;&#x6CE8;&#x91CD;&#x63D0;&#x4EA4;&#x5386;&#x53F2;&#x7684;&#x6574;&#x6D01;&#x6027;&#x548C;&#x7EBF;&#x6027;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4F7F;&#x7528; <code>rebase</code>&#xFF1B;&#x5982;&#x679C;&#x60A8;&#x66F4;&#x6CE8;&#x91CD;&#x4FDD;&#x7559;&#x5206;&#x652F;&#x7684;&#x5206;&#x53C9;&#x7ED3;&#x6784;&#x548C;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x4F7F;&#x7528; <code>merge</code>&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#x5728;&#x4E24;&#x79CD;&#x5408;&#x5E76;&#x65B9;&#x5F0F;&#x4E4B;&#x95F4;&#x7075;&#x6D3B;&#x9009;&#x62E9;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x9879;&#x76EE;&#x7684;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x3002;</p>
<h2 id="&#x5199;&#x5728;&#x6700;&#x540E;"><a href="#&#x5199;&#x5728;&#x6700;&#x540E;" class="headerlink" title="&#x5199;&#x5728;&#x6700;&#x540E;"></a>&#x5199;&#x5728;&#x6700;&#x540E;</h2><p>&#x901A;&#x8FC7;&#x672C;&#x6587;&#xFF0C;&#x8BFB;&#x8005;&#x53EF;&#x4EE5;&#x66F4;&#x5168;&#x9762;&#x5730;&#x4E86;&#x89E3; <code>Git</code> &#x5206;&#x652F;&#x5408;&#x5E76;&#x7684;&#x4E24;&#x79CD;&#x4E3B;&#x8981;&#x65B9;&#x5F0F;&#xFF1A;<code>Git Merge</code> &#x548C; <code>Git Rebase</code>&#xFF0C;&#x5E76;&#x5B66;&#x4F1A;&#x5982;&#x4F55;&#x6839;&#x636E;&#x9879;&#x76EE;&#x9700;&#x6C42;&#x9009;&#x62E9;&#x9002;&#x5408;&#x7684;&#x5408;&#x5E76;&#x7B56;&#x7565;&#x3002;</p>
<p>&#x559C;&#x6B22;&#x7684;&#x8BDD;&#x5E2E;&#x5FD9;&#x70B9;&#x4E2A;&#x8D5E; + &#x5173;&#x6CE8;&#x5427;&#xFF0C;&#x5C06;&#x6301;&#x7EED;&#x66F4;&#x65B0; <code>Git</code> &#x76F8;&#x5173;&#x7684;&#x6587;&#x7AE0;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x5173;&#x6CE8;&#x6211;&#x7684;&#x516C;&#x4F17;&#x53F7; <code>&#x6881;&#x4E09;&#x77F3;FE</code> &#xFF0C;&#x611F;&#x8C22;&#x60A8;&#x7684;&#x5173;&#x6CE8;~</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/a03fccd5340df85432f5b3d1e3a6e667.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7343139078486982710.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7343139078486982710.html" itemprop="url">看不懂来打我，vue3的vue文件(SFC)编译过程 前言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-06T22:55:52+08:00">
                2024-03-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x672C;&#x6587;&#x662F; <a href="/external_links/c0d1ddea52f9ca897a53426f8b9f07b0.html" target="blank" rel="noopener">vue3&#x7F16;&#x8BD1;&#x539F;&#x7406;&#x63ED;&#x79D8;</a> &#x7684;&#x7B2C; 3 &#x7BC7;&#xFF0C;&#x548C;&#x8BE5;&#x7CFB;&#x5217;&#x7684;&#x5176;&#x4ED6;&#x6587;&#x7AE0;&#x4E00;&#x8D77;&#x670D;&#x7528;&#x6548;&#x679C;&#x66F4;&#x4F73;&#x3002;</p>
<ol>
<li><a href="https://dev.newban.cn/7335721246931189795">vue3&#x7684;&#x5B8F;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7339210740455440419">Vue 3 &#x7684; setup&#x8BED;&#x6CD5;&#x7CD6;&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7343139078486982710">&#x770B;&#x4E0D;&#x61C2;&#x6765;&#x6253;&#x6211;&#xFF0C;vue3&#x7684;.vue&#x6587;&#x4EF6;(SFC)&#x7F16;&#x8BD1;&#x8FC7;&#x7A0B;</a></li>
<li><a href="https://dev.newban.cn/7345129748006354978">&#x4E3A;&#x4EC0;&#x4E48;defineProps&#x5B8F;&#x51FD;&#x6570;&#x4E0D;&#x9700;&#x8981;&#x4ECE;vue&#x4E2D;import&#x5BFC;&#x5165;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7347670979635314703">&#x5929;&#x5929;&#x7528;defineEmits&#x5B8F;&#x51FD;&#x6570;&#xFF0C;&#x7ADF;&#x7136;&#x4E0D;&#x77E5;&#x9053;&#x7F16;&#x8BD1;&#x540E;&#x662F;vue2&#x7684;&#x9009;&#x9879;&#x5F0F;API&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7349936384512131107">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x53EA;&#x77E5;&#x9053;v-model&#x662F;:modelValue&#x548C;@onUpdate&#x8BED;&#x6CD5;&#x7CD6;&#xFF0C;&#x90A3;&#x4F60;&#x53EF;&#x4EE5;&#x8D70;&#x4E86;</a></li>
<li><a href="https://dev.newban.cn/7354960709010260005">defineModel&#x662F;&#x5426;&#x7834;&#x574F;&#x4E86;vue3&#x7684;&#x5355;&#x5411;&#x6570;&#x636E;&#x6D41;&#x5462;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7356154581208072226">&#x770B;&#x4E0D;&#x61C2;&#x6765;&#x6253;&#x6211;&#xFF0C;vue3&#x5982;&#x4F55;&#x5C06;template&#x7F16;&#x8BD1;&#x6210;render&#x51FD;&#x6570;</a></li>
<li><a href="https://dev.newban.cn/7358709354425090083">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x6765;&#x8BF4;&#x8BF4;vue3&#x662F;&#x600E;&#x4E48;&#x5904;&#x7406;&#x5185;&#x7F6E;&#x7684;v-for&#x3001;v-model&#x7B49;&#x6307;&#x4EE4;&#xFF1F;</a></li>
<li><a href="https://dev.newban.cn/7360663978647404559">&#x9762;&#x8BD5;&#x5B98;&#xFF1A;&#x5728;&#x539F;&#x751F;input&#x4E0A;&#x9762;&#x4F7F;&#x7528;v-model&#x548C;&#x7EC4;&#x4EF6;&#x4E0A;&#x9762;&#x4F7F;&#x7528;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF1F;</a></li>
</ol>
<h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><p>&#x6211;&#x4EEC;&#x6BCF;&#x5929;&#x5199;&#x7684;<code>vue</code>&#x4EE3;&#x7801;&#x90FD;&#x662F;&#x5199;&#x5728;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x6D4F;&#x89C8;&#x5668;&#x5374;&#x53EA;&#x8BA4;&#x8BC6;<code>html</code>&#x3001;<code>css</code>&#x3001;<code>js</code>&#x7B49;&#x6587;&#x4EF6;&#x7C7B;&#x578B;&#x3002;&#x6240;&#x4EE5;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x5DE5;&#x5177;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x8F6C;&#x6362;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x80FD;&#x591F;&#x8BA4;&#x8BC6;&#x7684;<code>js</code>&#x6587;&#x4EF6;&#xFF0C;&#x60F3;&#x5FC5;&#x4F60;&#x7B2C;&#x4E00;&#x65F6;&#x95F4;&#x5C31;&#x60F3;&#x5230;&#x4E86;<code>webpack</code>&#x6216;&#x8005;<code>vite</code>&#x3002;&#x4F46;&#x662F;<code>webpack</code>&#x548C;<code>vite</code>&#x672C;&#x8EAB;&#x662F;&#x6CA1;&#x6709;&#x80FD;&#x529B;&#x5904;&#x7406;<code>vue</code>&#x6587;&#x4EF6;&#x7684;&#xFF0C;&#x5176;&#x5B9E;&#x5B9E;&#x9645;&#x80CC;&#x540E;&#x751F;&#x6548;&#x7684;&#x662F;<a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">vue-loader</a>&#x548C;<a href="/external_links/475d7a8029ffd100531bc36509c3041f.html" target="blank" rel="noopener">@vitejs/plugin-vue</a>&#x3002;&#x672C;&#x6587;&#x4EE5;<code>@vitejs/plugin-vue</code>&#x4E3E;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;<code>debug</code>&#x7684;&#x65B9;&#x5F0F;&#x5E26;&#x4F60;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x7684;&#x641E;&#x6E05;&#x695A;<code>vue</code>&#x6587;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x7F16;&#x8BD1;&#x4E3A;<code>js</code>&#x6587;&#x4EF6;&#x7684;&#xFF0C;<strong>&#x770B;&#x4E0D;&#x61C2;&#x4F60;&#x6765;&#x6253;&#x6211;</strong>&#x3002;</p>
<h1 id="&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;"><a href="#&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;" class="headerlink" title="&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;"></a>&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;</h1><p>&#x8FD9;&#x4E2A;&#x662F;&#x6211;&#x7684;&#x6E90;&#x4EE3;&#x7801;<code>App.vue</code>&#x6587;&#x4EF6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">xml&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;template&gt;</span><br><span class="line">  &lt;h1 class=&quot;msg&quot;&gt;{{ msg }}&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import { ref } from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const msg = ref(&quot;hello word&quot;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.msg {</span><br><span class="line">  color: red;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5728;<code>setup</code>&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;<code>msg</code>&#x53D8;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x5728;<code>template</code>&#x4E2D;&#x5C06;<code>msg</code>&#x6E32;&#x67D3;&#x51FA;&#x6765;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;&#x6211;&#x4ECE;<code>network</code>&#x4E2D;&#x627E;&#x5230;&#x7684;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>js</code>&#x6587;&#x4EF6;&#xFF0C;&#x5DF2;&#x7ECF;&#x7CBE;&#x7B80;&#x8FC7;&#x4E86;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;import {</span><br><span class="line">  createElementBlock as _createElementBlock,</span><br><span class="line">  defineComponent as _defineComponent,</span><br><span class="line">  openBlock as _openBlock,</span><br><span class="line">  toDisplayString as _toDisplayString,</span><br><span class="line">  ref,</span><br><span class="line">} from &quot;/node_modules/.vite/deps/vue.js?v=23bfe016&quot;;</span><br><span class="line">import &quot;/src/App.vue?vue&amp;type=style&amp;index=0&amp;scoped=7a7a37b1&amp;lang.css&quot;;</span><br><span class="line"></span><br><span class="line">const _sfc_main = _defineComponent({</span><br><span class="line">  __name: &quot;App&quot;,</span><br><span class="line">  setup(__props, { expose: __expose }) {</span><br><span class="line">    __expose();</span><br><span class="line">    const msg = ref(&quot;hello word&quot;);</span><br><span class="line">    const __returned__ = { msg };</span><br><span class="line">    return __returned__;</span><br><span class="line">  },</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">const _hoisted_1 = { class: &quot;msg&quot; };</span><br><span class="line">function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {</span><br><span class="line">  return (</span><br><span class="line">    _openBlock(),</span><br><span class="line">    _createElementBlock(</span><br><span class="line">      &quot;h1&quot;,</span><br><span class="line">      _hoisted_1,</span><br><span class="line">      _toDisplayString($setup.msg),</span><br><span class="line">      1</span><br><span class="line">      /* TEXT */</span><br><span class="line">    )</span><br><span class="line">  );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">__sfc__.render = render;</span><br><span class="line">export default _sfc_main;</span><br></pre></td></tr></table></figure>

<p>&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#x4E2D;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x90E8;&#x5206;&#xFF0C;&#x60F3;&#x5FC5;&#x4F60;&#x4E5F;&#x731C;&#x5230;&#x4E86;&#x8FD9;&#x4E09;&#x90E8;&#x5206;&#x521A;&#x597D;&#x5BF9;&#x5E94;<code>vue</code>&#x6587;&#x4EF6;&#x7684;&#x90A3;&#x4E09;&#x5757;&#x3002;</p>
<ul>
<li><code>_sfc_main</code>&#x5BF9;&#x8C61;&#x7684;<code>setup</code>&#x65B9;&#x6CD5;&#x5BF9;&#x5E94;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup lang=&quot;ts&quot;&gt;</code>&#x6A21;&#x5757;&#x3002;</li>
<li><code>_sfc_render</code>&#x51FD;&#x6570;&#x5BF9;&#x5E94;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;template&gt;</code>&#x6A21;&#x5757;&#x3002;</li>
<li><code>import &quot;/src/App.vue?vue&amp;type=style&amp;index=0&amp;scoped=7a7a37b1&amp;lang.css&quot;;</code>&#x5BF9;&#x5E94;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;style scoped&gt;</code>&#x6A21;&#x5757;&#x3002;</li>
</ul>
<p><a href="/external_links/0dd90e10a2d0a625248e2f5baf67e451.html" target="blank" rel="noopener">&#x5173;&#x6CE8;&#x516C;&#x4F17;&#x53F7;&#xFF1A;&#x3010;&#x524D;&#x7AEF;&#x6B27;&#x9633;&#x3011;&#xFF0C;&#x89E3;&#x9501;&#x6211;&#x66F4;&#x591A;vue&#x539F;&#x7406;&#x6587;&#x7AE0;&#x3002;&#x8FD8;&#x53EF;&#x4EE5;&#x52A0;&#x6211;&#x5FAE;&#x4FE1;&#xFF0C;&#x8BA9;&#x4F60;&#x7684;&#x670B;&#x53CB;&#x5708;&#x591A;&#x4E00;&#x4F4D;&#x5BF9;vue&#x6709;&#x6DF1;&#x5165;&#x7406;&#x89E3;&#x7684;&#x4EBA;&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5FAE;&#x4FE1;&#x7ED9;&#x6211;&#x8BF4;&#x4F60;&#x60F3;&#x770B;&#x54EA;&#x4E9B;vue&#x539F;&#x7406;&#x6587;&#x7AE0;&#xFF0C;&#x6211;&#x4F1A;&#x6839;&#x636E;&#x5927;&#x5BB6;&#x7684;&#x53CD;&#x9988;&#x8FDB;&#x884C;&#x521B;&#x4F5C;&#x3002;</a></p>
<h1 id="debug&#x641E;&#x6E05;&#x695A;&#x5982;&#x4F55;&#x5C06;vue&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x4E3A;js&#x6587;&#x4EF6;"><a href="#debug&#x641E;&#x6E05;&#x695A;&#x5982;&#x4F55;&#x5C06;vue&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x4E3A;js&#x6587;&#x4EF6;" class="headerlink" title="debug&#x641E;&#x6E05;&#x695A;&#x5982;&#x4F55;&#x5C06;vue&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x4E3A;js&#x6587;&#x4EF6;"></a>debug&#x641E;&#x6E05;&#x695A;&#x5982;&#x4F55;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x4E3A;<code>js</code>&#x6587;&#x4EF6;</h1><p>&#x5927;&#x5BB6;&#x5E94;&#x8BE5;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x524D;&#x7AEF;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#xFF0C;<code>node</code>&#x7AEF;&#x548C;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x6211;&#x4EEC;&#x719F;&#x6089;&#x7684;&#x7F16;&#x8BD1;&#x65F6;&#x548C;&#x8FD0;&#x884C;&#x65F6;&#x3002;&#x6D4F;&#x89C8;&#x5668;&#x660E;&#x663E;&#x662F;&#x4E0D;&#x8BA4;&#x8BC6;<code>vue</code>&#x6587;&#x4EF6;&#x7684;&#xFF0C;&#x6240;&#x4EE5;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210;<code>js</code>&#x8FD9;&#x4E00;&#x8FC7;&#x7A0B;&#x80AF;&#x5B9A;&#x4E0D;&#x662F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x7AEF;&#x3002;&#x5F88;&#x660E;&#x663E;&#x8FD9;&#x4E00;&#x8FC7;&#x7A0B;&#x662F;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x7684;<code>node</code>&#x7AEF;&#x3002;</p>
<p>&#x8981;&#x5728;<code>node</code>&#x7AEF;&#x6253;&#x65AD;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x542F;&#x52A8;&#x4E00;&#x4E2A;debug &#x7EC8;&#x7AEF;&#x3002;&#x8FD9;&#x91CC;&#x4EE5;<code>vscode</code>&#x4E3E;&#x4F8B;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6253;&#x5F00;&#x7EC8;&#x7AEF;&#xFF0C;&#x7136;&#x540E;&#x70B9;&#x51FB;&#x7EC8;&#x7AEF;&#x4E2D;&#x7684;<code>+</code>&#x53F7;&#x65C1;&#x8FB9;&#x7684;&#x4E0B;&#x62C9;&#x7BAD;&#x5934;&#xFF0C;&#x5728;&#x4E0B;&#x62C9;&#x4E2D;&#x70B9;&#x51FB;<code>Javascript Debug Terminal</code>&#x5C31;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x4E00;&#x4E2A;<code>debug</code>&#x7EC8;&#x7AEF;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a5cef460e4e0ae018d8cec44b1250c5b099417dc90ccef4ee7a02efadb079639" alt="debug-terminal.png"></p>
<p>&#x5047;&#x5982;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x4E3A;<code>js</code>&#x6587;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x6BDB;&#x7EBF;&#x56E2;&#xFF0C;&#x90A3;&#x4E48;&#x4ED6;&#x7684;&#x7EBF;&#x5934;&#x4E00;&#x5B9A;&#x662F;<code>vite.config.ts</code>&#x6587;&#x4EF6;&#x4E2D;&#x4F7F;&#x7528;<code>@vitejs/plugin-vue</code>&#x7684;&#x5730;&#x65B9;&#x3002;&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x7EBF;&#x5934;&#x5F00;&#x59CB;<code>debug</code>&#x6211;&#x4EEC;&#x5C31;&#x80FD;&#x591F;&#x68B3;&#x7406;&#x6E05;&#x695A;&#x5B8C;&#x6574;&#x7684;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/506a46d96ab6d73cc22f87acb2a681c1f721ec49f6fbbd9bac64db54d19eaed3" alt="vite-config.png"></p>
<h2 id="vuePlugin&#x51FD;&#x6570;"><a href="#vuePlugin&#x51FD;&#x6570;" class="headerlink" title="vuePlugin&#x51FD;&#x6570;"></a>vuePlugin&#x51FD;&#x6570;</h2><p>&#x6211;&#x4EEC;&#x7ED9;&#x4E0A;&#x65B9;&#x56FE;&#x7247;&#x7684;<code>vue</code>&#x51FD;&#x6570;&#x6253;&#x4E86;&#x4E00;&#x4E2A;&#x65AD;&#x70B9;&#xFF0C;&#x7136;&#x540E;&#x5728;<code>debug</code>&#x7EC8;&#x7AEF;&#x4E0A;&#x9762;&#x6267;&#x884C;<code>yarn dev</code>&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x65AD;&#x70B9;&#x5DF2;&#x7ECF;&#x505C;&#x7559;&#x5728;&#x4E86;<code>vue</code>&#x51FD;&#x6570;&#x8FD9;&#x91CC;&#x3002;&#x7136;&#x540E;&#x70B9;&#x51FB;<code>step into</code>&#xFF0C;&#x65AD;&#x70B9;&#x8D70;&#x5230;&#x4E86;<code>@vitejs/plugin-vue</code>&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;<code>vuePlugin</code>&#x51FD;&#x6570;&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x770B;&#x5230;<code>vuePlugin</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x4EE3;&#x7801;&#x5927;&#x6982;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;function vuePlugin(rawOptions = {}) {</span><br><span class="line">const options = shallowRef({</span><br><span class="line">    compiler: null,</span><br><span class="line">    // &#x7701;&#x7565;...</span><br><span class="line">  });</span><br><span class="line"></span><br><span class="line">  return {</span><br><span class="line">    name: &quot;vite:vue&quot;,</span><br><span class="line">    handleHotUpdate(ctx) {</span><br><span class="line">      // ...</span><br><span class="line">    },</span><br><span class="line">    config(config) {</span><br><span class="line">      // ..</span><br><span class="line">    },</span><br><span class="line">    configResolved(config) {</span><br><span class="line">      // ..</span><br><span class="line">    },</span><br><span class="line">    configureServer(server) {</span><br><span class="line">      // ..</span><br><span class="line">    },</span><br><span class="line">    buildStart() {</span><br><span class="line">      // ..</span><br><span class="line">    },</span><br><span class="line">    async resolveId(id) {</span><br><span class="line">      // ..</span><br><span class="line">    },</span><br><span class="line">    load(id, opt) {</span><br><span class="line">      // ..</span><br><span class="line">    },</span><br><span class="line">    transform(code, id, opt) {</span><br><span class="line">      // ..</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>@vitejs/plugin-vue</code>&#x662F;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;<code>plugins</code>&#x63D2;&#x4EF6;&#x5728;<code>vite</code>&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;<code>vuePlugin</code>&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x7684;&#x5BF9;&#x8C61;&#x4E2D;&#x7684;<code>buildStart</code>&#x3001;<code>transform</code>&#x65B9;&#x6CD5;&#x5C31;&#x662F;&#x5BF9;&#x5E94;&#x7684;&#x63D2;&#x4EF6;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x3002;<code>vite</code>&#x4F1A;&#x5728;&#x5BF9;&#x5E94;&#x7684;&#x65F6;&#x5019;&#x8C03;&#x7528;&#x8FD9;&#x4E9B;&#x63D2;&#x4EF6;&#x7684;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#xFF0C;&#x6BD4;&#x5982;&#x5F53;<code>vite</code>&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x65F6;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#x63D2;&#x4EF6;&#x91CC;&#x9762;&#x7684;<code>buildStart</code>&#x7B49;&#x51FD;&#x6570;&#xFF0C;&#x5F53;<code>vite</code>&#x89E3;&#x6790;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x65F6;&#x5C31;&#x4F1A;&#x8C03;&#x7528;<code>transform</code>&#x7B49;&#x51FD;&#x6570;&#x3002;&#x66F4;&#x591A;<code>vite</code>&#x94A9;&#x5B50;&#x76F8;&#x5173;&#x5185;&#x5BB9;<a href="/external_links/a4c1107b171586b0648783d48ab95905.html" target="blank" rel="noopener">&#x67E5;&#x770B;&#x5B98;&#x7F51;</a>&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x4E3B;&#x8981;&#x770B;<code>buildStart</code>&#x548C;<code>transform</code>&#x4E24;&#x4E2A;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x662F;&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x65F6;&#x8C03;&#x7528;&#x548C;&#x89E3;&#x6790;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x65F6;&#x8C03;&#x7528;&#x3002;&#x7ED9;&#x8FD9;&#x4E24;&#x4E2A;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x6253;&#x4E0A;&#x65AD;&#x70B9;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/b75fa9234a68bac255df35798446350af003dca518ffe16bd10b695da4e5687a" alt="vue.png"></p>
<p>&#x7136;&#x540E;&#x70B9;&#x51FB;Continue(F5)&#xFF0C;<code>vite</code>&#x670D;&#x52A1;&#x542F;&#x52A8;&#x540E;&#x5C31;&#x4F1A;&#x8D70;&#x5230;<code>buildStart</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#x6253;&#x7684;&#x65AD;&#x70B9;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;<code>buildStart</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;buildStart() {</span><br><span class="line">  const compiler = options.value.compiler = options.value.compiler || resolveCompiler(options.value.root);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5C06;&#x9F20;&#x6807;&#x653E;&#x5230;<code>options.value.compiler</code>&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x770B;&#x5230;&#x6B64;&#x65F6;<code>options.value.compiler</code>&#x7684;&#x503C;&#x4E3A;<code>null</code>&#xFF0C;&#x6240;&#x4EE5;&#x4EE3;&#x7801;&#x4F1A;&#x8D70;&#x5230;<code>resolveCompiler</code>&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x70B9;&#x51FB;Step Into(F11)&#x8D70;&#x5230;<code>resolveCompiler</code>&#x51FD;&#x6570;&#x4E2D;&#x3002;&#x770B;&#x5230;<code>resolveCompiler</code>&#x51FD;&#x6570;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;function resolveCompiler(root) {</span><br><span class="line">  const compiler = tryResolveCompiler(root) || tryResolveCompiler();</span><br><span class="line">  return compiler;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">function tryResolveCompiler(root) {</span><br><span class="line">  const vueMeta = tryRequire(&quot;vue/package.json&quot;, root);</span><br><span class="line">  if (vueMeta &amp;&amp; vueMeta.version.split(&quot;.&quot;)[0] &gt;= 3) {</span><br><span class="line">    return tryRequire(&quot;vue/compiler-sfc&quot;, root);</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;<code>resolveCompiler</code>&#x51FD;&#x6570;&#x4E2D;&#x8C03;&#x7528;&#x4E86;<code>tryResolveCompiler</code>&#x51FD;&#x6570;&#xFF0C;&#x5728;<code>tryResolveCompiler</code>&#x51FD;&#x6570;&#x4E2D;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x9879;&#x76EE;&#x662F;&#x5426;&#x662F;<code>vue3.x</code>&#x7248;&#x672C;&#xFF0C;&#x7136;&#x540E;&#x5C06;<code>vue/compiler-sfc</code>&#x5305;&#x8FD4;&#x56DE;&#x3002;<strong>&#x6240;&#x4EE5;&#x7ECF;&#x8FC7;&#x521D;&#x59CB;&#x5316;&#x540E;<code>options.value.compiler</code>&#x7684;&#x503C;&#x5C31;&#x662F;<code>vue</code>&#x7684;&#x5E95;&#x5C42;&#x5E93;<code>vue/compiler-sfc</code>&#xFF0C;&#x8BB0;&#x4F4F;&#x8FD9;&#x4E2A;&#x540E;&#x9762;&#x4F1A;&#x7528;</strong>&#x3002;</p>
<p>&#x7136;&#x540E;&#x70B9;&#x51FB;Continue(F5)&#x653E;&#x6389;&#x65AD;&#x70B9;&#xFF0C;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x6253;&#x5F00;&#x5BF9;&#x5E94;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;<a href="/external_links/f993794d255bd1a46153e34df8e6817c.html" target="blank" rel="noopener">http://localhost:5173/</a> &#x3002;&#x6B64;&#x65F6;<code>vite</code>&#x5C06;&#x4F1A;&#x7F16;&#x8BD1;&#x8FD9;&#x4E2A;&#x9875;&#x9762;&#x8981;&#x7528;&#x5230;&#x7684;&#x6240;&#x6709;&#x6587;&#x4EF6;&#xFF0C;&#x5C31;&#x4F1A;&#x8D70;&#x5230;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x65AD;&#x70B9;&#x4E2D;&#x4E86;&#x3002;&#x7531;&#x4E8E;&#x89E3;&#x6790;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x90FD;&#x4F1A;&#x8D70;&#x5230;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x53EA;&#x5173;&#x6CE8;<code>App.vue</code>&#x6587;&#x4EF6;&#x662F;&#x5982;&#x4F55;&#x89E3;&#x6790;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;<code>transform</code>&#x51FD;&#x6570;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x4E0B;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x5E76;&#x4E14;&#x5220;&#x6389;&#x4E86;&#x539F;&#x6765;&#x5728;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#x6253;&#x7684;&#x65AD;&#x70B9;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x53EA;&#x6709;&#x89E3;&#x6790;&#x5230;<code>App.vue</code>&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x8D70;&#x5230;&#x65AD;&#x70B9;&#x4E2D;&#x53BB;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/a464e34f83be014501eab155cf9ec4f1fb5e3294a31632fc3afd2db3fa10ac38" alt="transform.png"></p>
<p>&#x7ECF;&#x8FC7;debug&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x89E3;&#x6790;<code>App.vue</code>&#x6587;&#x4EF6;&#x65F6;<code>transform</code>&#x51FD;&#x6570;&#x5B9E;&#x9645;&#x5C31;&#x662F;&#x6267;&#x884C;&#x4E86;<code>transformMain</code>&#x51FD;&#x6570;&#xFF0C;&#x81F3;&#x4E8E;<code>transformStyle</code>&#x51FD;&#x6570;&#x540E;&#x9762;&#x8BB2;&#x89E3;&#x6790;<code>style</code>&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x8BB2;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;transform(code, id, opt) {</span><br><span class="line">  const { filename, query } = parseVueRequest(id);</span><br><span class="line">  if (!query.vue) {</span><br><span class="line">    return transformMain(</span><br><span class="line">      code,</span><br><span class="line">      filename,</span><br><span class="line">      options.value,</span><br><span class="line">      this,</span><br><span class="line">      ssr,</span><br><span class="line">      customElementFilter.value(filename)</span><br><span class="line">    );</span><br><span class="line">  } else {</span><br><span class="line">    const descriptor = query.src ? getSrcDescriptor(filename, query) || getTempSrcDescriptor(filename, query) : getDescriptor(filename, options.value);</span><br><span class="line">    if (query.type === &quot;style&quot;) {</span><br><span class="line">      return transformStyle(</span><br><span class="line">        code,</span><br><span class="line">        descriptor,</span><br><span class="line">        Number(query.index || 0),</span><br><span class="line">        options.value,</span><br><span class="line">        this,</span><br><span class="line">        filename</span><br><span class="line">      );</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="transformMain&#x51FD;&#x6570;"><a href="#transformMain&#x51FD;&#x6570;" class="headerlink" title="transformMain&#x51FD;&#x6570;"></a><code>transformMain</code>&#x51FD;&#x6570;</h2><p>&#x7EE7;&#x7EED;debug&#x65AD;&#x70B9;&#x8D70;&#x8FDB;<code>transformMain</code>&#x51FD;&#x6570;&#xFF0C;&#x53D1;&#x73B0;<code>transformMain</code>&#x51FD;&#x6570;&#x4E2D;&#x4EE3;&#x7801;&#x903B;&#x8F91;&#x5F88;&#x6E05;&#x6670;&#x3002;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x5206;&#x522B;&#x662F;&#xFF1A;</p>
<ul>
<li>&#x6839;&#x636E;&#x6E90;&#x4EE3;&#x7801;code&#x5B57;&#x7B26;&#x4E32;&#x8C03;&#x7528;<code>createDescriptor</code>&#x51FD;&#x6570;&#x751F;&#x6210;&#x4E00;&#x4E2A;<code>descriptor</code>&#x5BF9;&#x8C61;&#x3002;</li>
<li>&#x8C03;&#x7528;<code>genScriptCode</code>&#x51FD;&#x6570;&#x4F20;&#x5165;&#x7B2C;&#x4E00;&#x6B65;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x5C06;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#x3002;</li>
<li>&#x8C03;&#x7528;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x4F20;&#x5165;&#x7B2C;&#x4E00;&#x6B65;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x5C06;<code>&lt;template&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x4E3A;<code>render</code>&#x51FD;&#x6570;&#x3002;</li>
<li>&#x8C03;&#x7528;<code>genStyleCode</code>&#x51FD;&#x6570;&#x4F20;&#x5165;&#x7B2C;&#x4E00;&#x6B65;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x5C06;<code>&lt;style scoped&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x4E3A;&#x7C7B;&#x4F3C;&#x8FD9;&#x6837;&#x7684;<code>import</code>&#x8BED;&#x53E5;&#xFF0C;<code>import &quot;/src/App.vue?vue&amp;type=style&amp;index=0&amp;scoped=7a7a37b1&amp;lang.css&quot;;</code>&#x3002;</li>
</ul>
<h3 id="createDescriptor&#x51FD;&#x6570;"><a href="#createDescriptor&#x51FD;&#x6570;" class="headerlink" title="createDescriptor&#x51FD;&#x6570;"></a><code>createDescriptor</code>&#x51FD;&#x6570;</h3><p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x770B;<code>createDescriptor</code>&#x51FD;&#x6570;&#xFF0C;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>createDescriptor(filename, code, options)</code>&#x8FD9;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4F20;&#x5165;&#x7684;<code>filename</code>&#x5C31;&#x662F;<code>App.vue</code>&#x7684;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;&#xFF0C;<code>code</code>&#x5C31;&#x662F;<code>App.vue</code>&#x4E2D;&#x6211;&#x4EEC;&#x5199;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/583a8149cf790c6b5d49350fa06038976dff072d0e9b074ed1dfe15f7ff9c633" alt="createDescriptor.png"></p>
<p><code>debug</code>&#x8D70;&#x8FDB;<code>createDescriptor</code>&#x51FD;&#x6570;&#xFF0C;&#x770B;&#x5230;<code>createDescriptor</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;function createDescriptor(filename, source, { root, isProduction, sourceMap, compiler, template }, hmr = false) {</span><br><span class="line">  const { descriptor, errors } = compiler.parse(source, {</span><br><span class="line">    filename,</span><br><span class="line">    sourceMap,</span><br><span class="line">    templateParseOptions: template?.compilerOptions</span><br><span class="line">  });</span><br><span class="line">  const normalizedPath = slash(path.normalize(path.relative(root, filename)));</span><br><span class="line">  descriptor.id = getHash(normalizedPath + (isProduction ? source : &quot;&quot;));</span><br><span class="line">  return { descriptor, errors };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;<code>compiler</code>&#x662F;&#x4E0D;&#x662F;&#x89C9;&#x5F97;&#x6709;&#x70B9;&#x719F;&#x6089;&#xFF1F;<code>compiler</code>&#x662F;&#x8C03;&#x7528;<code>createDescriptor</code>&#x51FD;&#x6570;&#x65F6;&#x4F20;&#x5165;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x89E3;&#x6784;&#x800C;&#x6765;&#xFF0C;&#x800C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x5C31;&#x662F;<code>options</code>&#x3002;&#x8FD8;&#x8BB0;&#x5F97;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5728;<code>vite</code>&#x542F;&#x52A8;&#x65F6;&#x8C03;&#x7528;&#x4E86;<code>buildStart</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5C06;<code>vue</code>&#x5E95;&#x5C42;&#x5305;<code>vue/compiler-sfc</code>&#x8D4B;&#x503C;&#x7ED9;<code>options</code>&#x7684;<code>compiler</code>&#x5C5E;&#x6027;&#x3002;&#x90A3;&#x8FD9;&#x91CC;&#x7684;<code>compiler.parse</code>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x7684;<code>vue/compiler-sfc</code>&#x5305;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;<code>parse</code>&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;<code>vue</code>&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;&#x5E95;&#x5C42;&#x7684;<code>API</code>&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x5BF9;&#x5E95;&#x5C42;API&#x8FDB;&#x884C;&#x6E90;&#x7801;&#x89E3;&#x6790;&#xFF0C;&#x901A;&#x8FC7;&#x67E5;&#x770B;<code>parse</code>&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x57FA;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x6E05;&#x695A;<code>parse</code>&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;<code>parse</code>&#x51FD;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;export function parse(</span><br><span class="line">source: string,</span><br><span class="line">options: SFCParseOptions = {},</span><br><span class="line">): SFCParseResult {}</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;&#x4E0A;&#x9762;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;<code>parse</code>&#x51FD;&#x6570;&#x63A5;&#x6536;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x4E3A;<code>vue</code>&#x6587;&#x4EF6;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#xFF0C;&#x5728;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x5C31;&#x662F;<code>App.vue</code>&#x4E2D;&#x7684;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E9B;<code>options</code>&#x9009;&#x9879;&#x3002;<br>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x770B;<code>parse</code>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;<code>SFCParseResult</code>&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x7C7B;&#x578B;&#x4E3A;<code>SFCDescriptor</code>&#x7684;<code>descriptor</code>&#x5C5E;&#x6027;&#x9700;&#x8981;&#x5173;&#x6CE8;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;export interface SFCParseResult {</span><br><span class="line">  descriptor: SFCDescriptor</span><br><span class="line">  errors: (CompilerError | SyntaxError)[]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export interface SFCDescriptor {</span><br><span class="line">  filename: string</span><br><span class="line">  source: string</span><br><span class="line">  template: SFCTemplateBlock | null</span><br><span class="line">  script: SFCScriptBlock | null</span><br><span class="line">  scriptSetup: SFCScriptBlock | null</span><br><span class="line">  styles: SFCStyleBlock[]</span><br><span class="line">  customBlocks: SFCBlock[]</span><br><span class="line">  cssVars: string[]</span><br><span class="line">  slotted: boolean</span><br><span class="line">  shouldForceReload: (prevImports: Record&lt;string, ImportBinding&gt;) =&gt; boolean</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4ED4;&#x7EC6;&#x770B;&#x770B;<code>SFCDescriptor</code>&#x7C7B;&#x578B;&#xFF0C;&#x5176;&#x4E2D;&#x7684;<code>template</code>&#x5C5E;&#x6027;&#x5C31;&#x662F;<code>App.vue</code>&#x6587;&#x4EF6;&#x5BF9;&#x5E94;&#x7684;<code>template</code>&#x6807;&#x7B7E;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x91CC;&#x9762;&#x5305;&#x542B;&#x4E86;&#x7531;<code>App.vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>template</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x6210;&#x7684;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x548C;&#x539F;&#x59CB;&#x7684;<code>template</code>&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/190bab1421d4548c55a482fc6d5a3073f5956b91742aa90ba479d2266dd2b4b1" alt="template.png"></p>
<p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>script</code>&#x548C;<code>scriptSetup</code>&#x5C5E;&#x6027;&#xFF0C;&#x7531;&#x4E8E;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x53EF;&#x4EE5;&#x5199;&#x591A;&#x4E2A;<code>script</code>&#x6807;&#x7B7E;&#xFF0C;<code>scriptSetup</code>&#x5BF9;&#x5E94;&#x7684;&#x5C31;&#x662F;&#x6709;<code>setup</code>&#x7684;<code>script</code>&#x6807;&#x7B7E;&#xFF0C;<code>script</code>&#x5BF9;&#x5E94;&#x7684;&#x5C31;&#x662F;&#x6CA1;&#x6709;<code>setup</code>&#x5BF9;&#x5E94;&#x7684;<code>script</code>&#x6807;&#x7B7E;&#x3002;&#x6211;&#x4EEC;&#x8FD9;&#x4E2A;&#x573A;&#x666F;&#x4E2D;&#x53EA;&#x6709;<code>scriptSetup</code>&#x5C5E;&#x6027;&#xFF0C;&#x91CC;&#x9762;&#x540C;&#x6837;&#x5305;&#x542B;&#x4E86;<code>App.vue</code>&#x4E2D;&#x7684;<code>script</code>&#x6A21;&#x5757;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/d31648e3cee3252384535831e35ea7d234c076c75772660e2b8f7c19f355d32d" alt="script.png"></p>
<p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x770B;<code>styles</code>&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>styles</code>&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x5199;&#x591A;&#x4E2A;<code>style</code>&#x6A21;&#x5757;&#xFF0C;&#x91CC;&#x9762;&#x540C;&#x6837;&#x5305;&#x542B;&#x4E86;<code>App.vue</code>&#x4E2D;&#x7684;<code>style</code>&#x6A21;&#x5757;&#x4E2D;&#x7684;&#x5185;&#x5BB9;&#x3002;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/04798135435ca877899e1f0efd8299907fe0d082896dd1b26108565ff291c26d" alt="style.png"></p>
<p>&#x6240;&#x4EE5;&#x8FD9;&#x4E00;&#x6B65;&#x6267;&#x884C;<code>createDescriptor</code>&#x51FD;&#x6570;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x4E2D;&#x4E3B;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;<code>template</code>&#x5C5E;&#x6027;&#x5305;&#x542B;&#x4E86;<code>App.vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>template</code>&#x6A21;&#x5757;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x548C;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#xFF0C;<code>scriptSetup</code>&#x5C5E;&#x6027;&#x5305;&#x542B;&#x4E86;<code>App.vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;<code>styles</code>&#x5C5E;&#x6027;&#x5305;&#x542B;&#x4E86;<code>App.vue</code>&#x6587;&#x4EF6;&#x4E2D;<code>&lt;style&gt;</code>&#x6A21;&#x5757;&#x4E2D;&#x7684;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x3002;<code>createDescriptor</code>&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/223911876b05c67ae954793803ce1f60e90f5ca9aa43a767fd29d5801227408e" alt="progress-createDescriptor.png"></p>
<h3 id="genScriptCode&#x51FD;&#x6570;"><a href="#genScriptCode&#x51FD;&#x6570;" class="headerlink" title="genScriptCode&#x51FD;&#x6570;"></a><code>genScriptCode</code>&#x51FD;&#x6570;</h3><p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>genScriptCode</code>&#x51FD;&#x6570;&#x662F;&#x5982;&#x4F55;&#x5C06;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x6210;&#x53EF;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#xFF0C;&#x540C;&#x6837;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;&#x8C03;&#x7528;<code>genScriptCode</code>&#x51FD;&#x6570;&#x7684;&#x5730;&#x65B9;&#xFF0C;<code>genScriptCode</code>&#x51FD;&#x6570;&#x4E3B;&#x8981;&#x63A5;&#x6536;&#x6211;&#x4EEC;&#x4E0A;&#x4E00;&#x6B65;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;<code>genScriptCode</code>&#x51FD;&#x6570;&#x540E;&#x4F1A;&#x5C06;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>script</code>&#x6A21;&#x5757;&#x4EE3;&#x7801;&#x8D4B;&#x503C;&#x7ED9;<code>scriptCode</code>&#x53D8;&#x91CF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;const { code: scriptCode, map: scriptMap } = await genScriptCode(</span><br><span class="line">  descriptor,</span><br><span class="line">  options,</span><br><span class="line">  pluginContext,</span><br><span class="line">  ssr,</span><br><span class="line">  customElement</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>genScriptCode</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x5728;<code>genScriptCode</code>&#x51FD;&#x6570;&#x4E2D;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x8FD9;&#x884C;&#x4EE3;&#x7801;&#xFF1A; <code>const script = resolveScript(descriptor, options, ssr, customElement);</code>&#x3002;&#x5C06;&#x7B2C;&#x4E00;&#x6B65;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x7ED9;<code>resolveScript</code>&#x51FD;&#x6570;&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x5C31;&#x662F;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#xFF0C;<code>genScriptCode</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x7B80;&#x5316;&#x540E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;async function genScriptCode(descriptor, options, pluginContext, ssr, customElement) {</span><br><span class="line">  let scriptCode = `const ${scriptIdentifier} = {}`;</span><br><span class="line">  const script = resolveScript(descriptor, options, ssr, customElement);</span><br><span class="line">  if (script) {</span><br><span class="line">    scriptCode = script.content;</span><br><span class="line">    map = script.map;</span><br><span class="line">  }</span><br><span class="line">  return {</span><br><span class="line">    code: scriptCode,</span><br><span class="line">    map</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>resolveScript</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x53D1;&#x73B0;<code>resolveScript</code>&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x5176;&#x5B9E;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">php&#x590D;&#x5236;&#x4EE3;&#x7801;function resolveScript(descriptor, options, ssr, customElement) {</span><br><span class="line">  let resolved = null;</span><br><span class="line">  resolved = options.compiler.compileScript(descriptor, {</span><br><span class="line">    ...options.script,</span><br><span class="line">    id: descriptor.id,</span><br><span class="line">    isProd: options.isProduction,</span><br><span class="line">    inlineTemplate: isUseInlineTemplate(descriptor, !options.devServer),</span><br><span class="line">    templateOptions: resolveTemplateCompilerOptions(descriptor, options, ssr),</span><br><span class="line">    sourceMap: options.sourceMap,</span><br><span class="line">    genDefaultAs: canInlineMain(descriptor, options) ? scriptIdentifier : void 0,</span><br><span class="line">    customElement</span><br><span class="line">  });</span><br><span class="line">  return resolved;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x7684;<code>options.compiler</code>&#x6211;&#x4EEC;&#x524D;&#x9762;&#x7B2C;&#x4E00;&#x6B65;&#x7684;&#x65F6;&#x5019;&#x5DF2;&#x7ECF;&#x89E3;&#x91CA;&#x8FC7;&#x4E86;&#xFF0C;<code>options.compiler</code>&#x5BF9;&#x8C61;&#x5B9E;&#x9645;&#x5C31;&#x662F;<code>vue</code>&#x5E95;&#x5C42;&#x5305;<code>vue/compiler-sfc</code>&#x66B4;&#x9732;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;<code>options.compiler.compileScript()</code>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x7684;<code>vue/compiler-sfc</code>&#x5305;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#xFF0C;&#x540C;&#x6837;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;<code>vue</code>&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;&#x5E95;&#x5C42;&#x7684;<code>API</code>&#xFF0C;&#x540E;&#x9762;&#x6211;&#x4EEC;&#x7684;&#x5206;&#x6790;<code>defineOptions</code>&#x7B49;&#x6587;&#x7AE0;&#x65F6;&#x4F1A;&#x53BB;&#x6DF1;&#x5165;&#x5206;&#x6790;<code>compileScript</code>&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x53BB;&#x8BFB;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x6E90;&#x7801;&#x3002;&#x901A;&#x8FC7;&#x67E5;&#x770B;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x57FA;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x6E05;&#x695A;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;<code>compileScript</code>&#x51FD;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;export function compileScript(</span><br><span class="line">  sfc: SFCDescriptor,</span><br><span class="line">  options: SFCScriptCompileOptions,</span><br><span class="line">): SFCScriptBlock{}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x5165;&#x53C2;&#x662F;&#x4E00;&#x4E2A;<code>SFCDescriptor</code>&#x5BF9;&#x8C61;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7B2C;&#x4E00;&#x6B65;&#x8C03;&#x7528;&#x751F;&#x6210;<code>createDescriptor</code>&#x51FD;&#x6570;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E9B;<code>options</code>&#x9009;&#x9879;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x8FD4;&#x56DE;&#x503C;<code>SFCScriptBlock</code>&#x7C7B;&#x578B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;export interface SFCScriptBlock extends SFCBlock {</span><br><span class="line">  type: &apos;script&apos;</span><br><span class="line">  setup?: string | boolean</span><br><span class="line">  bindings?: BindingMetadata</span><br><span class="line">  imports?: Record&lt;string, ImportBinding&gt;</span><br><span class="line">  scriptAst?: import(&apos;@babel/types&apos;).Statement[]</span><br><span class="line">  scriptSetupAst?: import(&apos;@babel/types&apos;).Statement[]</span><br><span class="line">  warnings?: string[]</span><br><span class="line">  /**</span><br><span class="line">   * Fully resolved dependency file paths (unix slashes) with imported types</span><br><span class="line">   * used in macros, used for HMR cache busting in @vitejs/plugin-vue and</span><br><span class="line">   * vue-loader.</span><br><span class="line">   */</span><br><span class="line">  deps?: string[]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">export interface SFCBlock {</span><br><span class="line">  type: string</span><br><span class="line">  content: string</span><br><span class="line">  attrs: Record&lt;string, string | true&gt;</span><br><span class="line">  loc: SourceLocation</span><br><span class="line">  map?: RawSourceMap</span><br><span class="line">  lang?: string</span><br><span class="line">  src?: string</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E2D;&#x4E3B;&#x8981;&#x6709;<code>scriptAst</code>&#x3001;<code>scriptSetupAst</code>&#x3001;<code>content</code>&#x8FD9;&#x4E09;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;<code>scriptAst</code>&#x4E3A;&#x7F16;&#x8BD1;&#x4E0D;&#x5E26;<code>setup</code>&#x5C5E;&#x6027;&#x7684;<code>script</code>&#x6807;&#x7B7E;&#x751F;&#x6210;&#x7684;AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;&#x3002;<code>scriptSetupAst</code>&#x4E3A;&#x7F16;&#x8BD1;&#x5E26;<code>setup</code>&#x5C5E;&#x6027;&#x7684;<code>script</code>&#x6807;&#x7B7E;&#x751F;&#x6210;&#x7684;AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;&#xFF0C;<code>content</code>&#x4E3A;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>script</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x540E;&#x751F;&#x6210;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;&#x6267;&#x884C;<code>vue/compiler-sfc</code>&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/46f2119281bbb2bb8d079fef06e6e36b76e992f22d57906997dcb1fea68ef0e9" alt="resolved.png"></p>
<p>&#x7EE7;&#x7EED;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x56DE;<code>genScriptCode</code>&#x51FD;&#x6570;&#xFF0C;&#x73B0;&#x5728;&#x903B;&#x8F91;&#x5C31;&#x5F88;&#x6E05;&#x6670;&#x4E86;&#x3002;&#x8FD9;&#x91CC;&#x7684;<code>script</code>&#x5BF9;&#x8C61;&#x5C31;&#x662F;&#x8C03;&#x7528;<code>vue/compiler-sfc</code>&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#xFF0C;<code>scriptCode</code>&#x5C31;&#x662F;<code>script</code>&#x5BF9;&#x8C61;&#x7684;<code>content</code>&#x5C5E;&#x6027; &#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>script</code>&#x6A21;&#x5757;&#x7ECF;&#x8FC7;&#x7F16;&#x8BD1;&#x540E;&#x751F;&#x6210;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;async function genScriptCode(descriptor, options, pluginContext, ssr, customElement) {</span><br><span class="line">  let scriptCode = `const ${scriptIdentifier} = {}`;</span><br><span class="line">  const script = resolveScript(descriptor, options, ssr, customElement);</span><br><span class="line">  if (script) {</span><br><span class="line">    scriptCode = script.content;</span><br><span class="line">    map = script.map;</span><br><span class="line">  }</span><br><span class="line">  return {</span><br><span class="line">    code: scriptCode,</span><br><span class="line">    map</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>genScriptCode</code>&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/ab2772c8aa1203c02216212be9c7025ad750d9c62435ebeb4ed964d392fae050" alt="progress-genScriptCode.png"></p>
<h3 id="genTemplateCode&#x51FD;&#x6570;"><a href="#genTemplateCode&#x51FD;&#x6570;" class="headerlink" title="genTemplateCode&#x51FD;&#x6570;"></a><code>genTemplateCode</code>&#x51FD;&#x6570;</h3><p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x662F;&#x5982;&#x4F55;&#x5C06;<code>template</code>&#x6A21;&#x5757;&#x7F16;&#x8BD1;&#x6210;<code>render</code>&#x51FD;&#x6570;&#x7684;&#xFF0C;&#x540C;&#x6837;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;&#x8C03;&#x7528;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x7684;&#x5730;&#x65B9;&#xFF0C;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x4E3B;&#x8981;&#x63A5;&#x6536;&#x6211;&#x4EEC;&#x4E0A;&#x4E00;&#x6B65;&#x751F;&#x6210;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#xFF0C;&#x8C03;&#x7528;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x540E;&#x4F1A;&#x5C06;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>template</code>&#x6A21;&#x5757;&#x4EE3;&#x7801;&#x8D4B;&#x503C;&#x7ED9;<code>templateCode</code>&#x53D8;&#x91CF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">css&#x590D;&#x5236;&#x4EE3;&#x7801;({ code: templateCode, map: templateMap } = await genTemplateCode(</span><br><span class="line">  descriptor,</span><br><span class="line">  options,</span><br><span class="line">  pluginContext,</span><br><span class="line">  ssr,</span><br><span class="line">  customElement</span><br><span class="line">))</span><br></pre></td></tr></table></figure>

<p>&#x540C;&#x6837;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x5728;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x4E2D;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x8FD4;&#x56DE;<code>transformTemplateInMain</code>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x7B80;&#x5316;&#x540E;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;async function genTemplateCode(descriptor, options, pluginContext, ssr, customElement) {</span><br><span class="line">  const template = descriptor.template;</span><br><span class="line">  return transformTemplateInMain(</span><br><span class="line">    template.content,</span><br><span class="line">    descriptor,</span><br><span class="line">    options,</span><br><span class="line">    pluginContext,</span><br><span class="line">    ssr,</span><br><span class="line">    customElement</span><br><span class="line">  );</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x7EE7;&#x7EED;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x8FDB;<code>transformTemplateInMain</code>&#x51FD;&#x6570;&#xFF0C;&#x53D1;&#x73B0;&#x8FD9;&#x91CC;&#x4E5F;&#x4E3B;&#x8981;&#x662F;&#x8C03;&#x7528;<code>compile</code>&#x51FD;&#x6570;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">php&#x590D;&#x5236;&#x4EE3;&#x7801;function transformTemplateInMain(code, descriptor, options, pluginContext, ssr, customElement) {</span><br><span class="line">  const result = compile(</span><br><span class="line">    code,</span><br><span class="line">    descriptor,</span><br><span class="line">    options,</span><br><span class="line">    pluginContext,</span><br><span class="line">    ssr,</span><br><span class="line">    customElement</span><br><span class="line">  );</span><br><span class="line">  return {</span><br><span class="line">    ...result,</span><br><span class="line">    code: result.code.replace(</span><br><span class="line">      /\nexport (function|const) (render|ssrRender)/,</span><br><span class="line">      &quot;\n$1 _sfc_$2&quot;</span><br><span class="line">    )</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x540C;&#x7406;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x8FDB;&#x5230;<code>compile</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x5230;<code>compile</code>&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x662F;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">php&#x590D;&#x5236;&#x4EE3;&#x7801;function compile(code, descriptor, options, pluginContext, ssr, customElement) {</span><br><span class="line">  const result = options.compiler.compileTemplate({</span><br><span class="line">    ...resolveTemplateCompilerOptions(descriptor, options, ssr),</span><br><span class="line">    source: code</span><br><span class="line">  });</span><br><span class="line">  return result;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x540C;&#x6837;&#x8FD9;&#x91CC;&#x4E5F;&#x7528;&#x5230;&#x4E86;<code>options.compiler</code>&#xFF0C;&#x8C03;&#x7528;<code>options.compiler.compileTemplate()</code>&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x8C03;&#x7528;&#x7684;<code>vue/compiler-sfc</code>&#x5305;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;<code>compileTemplate</code>&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;<code>vue</code>&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;&#x5E95;&#x5C42;&#x7684;<code>API</code>&#x3002;&#x4E0D;&#x8FC7;&#x8FD9;&#x91CC;&#x548C;&#x524D;&#x9762;&#x4E0D;&#x540C;&#x7684;&#x662F;<code>compileTemplate</code>&#x63A5;&#x6536;&#x7684;&#x4E0D;&#x662F;<code>descriptor</code>&#x5BF9;&#x8C61;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;<code>SFCTemplateCompileOptions</code>&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x8C03;&#x7528;<code>resolveTemplateCompilerOptions</code>&#x51FD;&#x6570;&#x5C06;&#x53C2;&#x6570;&#x8F6C;&#x6362;&#x6210;<code>SFCTemplateCompileOptions</code>&#x7C7B;&#x578B;&#x7684;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x5BF9;&#x5E95;&#x5C42;API&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x3002;&#x901A;&#x8FC7;&#x67E5;&#x770B;<code>compileTemplate</code>&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x57FA;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x6E05;&#x695A;<code>compileTemplate</code>&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;<code>compileTemplate</code>&#x51FD;&#x6570;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;export function compileTemplate(</span><br><span class="line">  options: SFCTemplateCompileOptions,</span><br><span class="line">): SFCTemplateCompileResults {}</span><br></pre></td></tr></table></figure>

<p>&#x5165;&#x53C2;<code>options</code>&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x9700;&#x8981;&#x7F16;&#x8BD1;&#x7684;<code>template</code>&#x4E2D;&#x7684;&#x6E90;&#x4EE3;&#x7801;&#x548C;&#x5BF9;&#x5E94;&#x7684;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x3002;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x8FD4;&#x56DE;&#x503C;<code>SFCTemplateCompileResults</code>&#xFF0C;&#x8FD9;&#x91CC;&#x9762;&#x7684;<code>code</code>&#x5C31;&#x662F;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>render</code>&#x51FD;&#x6570;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">go&#x590D;&#x5236;&#x4EE3;&#x7801;export interface SFCTemplateCompileResults {</span><br><span class="line">  code: string</span><br><span class="line">  ast?: RootNode</span><br><span class="line">  preamble?: string</span><br><span class="line">  source: string</span><br><span class="line">  tips: string[]</span><br><span class="line">  errors: (string | CompilerError)[]</span><br><span class="line">  map?: RawSourceMap</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1f61f6eb8589b98fd8166a8b6a3f6909152b50e75b7cbe3c1720f718a3532de6" alt="render.png"><br><code>genTemplateCode</code>&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/1fef1ae4da724e0d8e6c4f2a96972bee8a903d472f281fe8a48c1d58c9897dcd" alt="progress-genTemplateCode.png"></p>
<h3 id="genStyleCode&#x51FD;&#x6570;"><a href="#genStyleCode&#x51FD;&#x6570;" class="headerlink" title="genStyleCode&#x51FD;&#x6570;"></a><code>genStyleCode</code>&#x51FD;&#x6570;</h3><p>&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x6700;&#x540E;&#x4E00;&#x4E2A;<code>genStyleCode</code>&#x51FD;&#x6570;&#xFF0C;&#x540C;&#x6837;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;&#x8C03;&#x7528;<code>genStyleCode</code>&#x7684;&#x5730;&#x65B9;&#x3002;&#x4E00;&#x6837;&#x7684;&#x63A5;&#x6536;<code>descriptor</code>&#x5BF9;&#x8C61;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;const stylesCode = await genStyleCode(</span><br><span class="line">  descriptor,</span><br><span class="line">  pluginContext,</span><br><span class="line">  customElement,</span><br><span class="line">  attachedProps</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x8FDB;<code>genStyleCode</code>&#x51FD;&#x6570;&#x5185;&#x90E8;&#xFF0C;&#x53D1;&#x73B0;&#x548C;&#x524D;&#x9762;<code>genScriptCode</code>&#x548C;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x6709;&#x70B9;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x662F;&#x6211;&#x7B80;&#x5316;&#x540E;&#x7684;<code>genStyleCode</code>&#x51FD;&#x6570;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;async function genStyleCode(descriptor, pluginContext, customElement, attachedProps) {</span><br><span class="line">  let stylesCode = ``;</span><br><span class="line">  if (descriptor.styles.length) {</span><br><span class="line">    for (let i = 0; i &lt; descriptor.styles.length; i++) {</span><br><span class="line">      const style = descriptor.styles[i];</span><br><span class="line">      const src = style.src || descriptor.filename;</span><br><span class="line">      const attrsQuery = attrsToQuery(style.attrs, &quot;css&quot;);</span><br><span class="line">      const srcQuery = style.src ? style.scoped ? `&amp;src=${descriptor.id}` : &quot;&amp;src=true&quot; : &quot;&quot;;</span><br><span class="line">      const directQuery = customElement ? `&amp;inline` : ``;</span><br><span class="line">      const scopedQuery = style.scoped ? `&amp;scoped=${descriptor.id}` : ``;</span><br><span class="line">      const query = `?vue&amp;type=style&amp;index=${i}${srcQuery}${directQuery}${scopedQuery}`;</span><br><span class="line">      const styleRequest = src + query + attrsQuery;</span><br><span class="line">      stylesCode += `</span><br><span class="line">import ${JSON.stringify(styleRequest)}`;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  return stylesCode;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x524D;&#x9762;&#x8BB2;&#x8FC7;&#x56E0;&#x4E3A;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x53EF;&#x80FD;&#x4F1A;&#x6709;&#x591A;&#x4E2A;<code>style</code>&#x6807;&#x7B7E;&#xFF0C;&#x6240;&#x4EE5;<code>descriptor</code>&#x5BF9;&#x8C61;&#x7684;<code>styles</code>&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x904D;&#x5386;<code>descriptor.styles</code>&#x6570;&#x7EC4;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;<code>for</code>&#x5FAA;&#x73AF;&#x5185;&#x5168;&#x90E8;&#x90FD;&#x662F;&#x4E00;&#x5806;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#xFF0C;&#x6CA1;&#x6709;&#x8C03;&#x7528;<code>vue/compiler-sfc</code>&#x5305;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;&#x4EFB;&#x4F55;<code>API</code>&#x3002;&#x5C06;&#x65AD;&#x70B9;&#x8D70;&#x5230;  <code>return stylesCode;</code>&#xFF0C;&#x770B;&#x770B;<code>stylesCode</code>&#x5230;&#x5E95;&#x662F;&#x4EC0;&#x4E48;&#x4E1C;&#x897F;&#xFF1F;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/7538b7916fd46d77cb26fd5fd4f8b884186bc350b1b4b3b5ed7fa59b4837e5ce" alt="styleCode.png"><br>&#x901A;&#x8FC7;&#x6253;&#x5370;&#x6211;&#x4EEC;&#x53D1;&#x73B0;<code>stylesCode</code>&#x7ADF;&#x7136;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x6761;<code>import</code>&#x8BED;&#x53E5;&#xFF0C;&#x5E76;&#x4E14;<code>import</code>&#x7684;&#x8FD8;&#x662F;&#x5F53;&#x524D;<code>App.vue</code>&#x6587;&#x4EF6;&#xFF0C;&#x53EA;&#x662F;&#x591A;&#x4E86;&#x51E0;&#x4E2A;<code>query</code>&#x5206;&#x522B;&#x662F;&#xFF1A;<code>vue</code>&#x3001;<code>type</code>&#x3001;<code>index</code>&#x3001;<code>scoped</code>&#x3001;<code>lang</code>&#x3002;&#x518D;&#x6765;&#x56DE;&#x5FC6;&#x4E00;&#x4E0B;&#x524D;&#x9762;&#x8BB2;&#x7684;<code>@vitejs/plugin-vue</code>&#x7684;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#xFF0C;&#x5F53;<code>vite</code>&#x89E3;&#x6790;&#x6BCF;&#x4E2A;&#x6A21;&#x5757;&#x65F6;&#x5C31;&#x4F1A;&#x8C03;&#x7528;<code>transform</code>&#x7B49;&#x51FD;&#x6570;&#x3002;&#x6240;&#x4EE5;&#x5F53;&#x4EE3;&#x7801;&#x8FD0;&#x884C;&#x5230;&#x8FD9;&#x884C;<code>import</code>&#x8BED;&#x53E5;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x518D;&#x6B21;&#x8D70;&#x5230;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#x3002;&#x6211;&#x4EEC;&#x518D;&#x6765;&#x770B;&#x770B;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;transform(code, id, opt) {</span><br><span class="line">  const { filename, query } = parseVueRequest(id);</span><br><span class="line">  if (!query.vue) {</span><br><span class="line">    // &#x7701;&#x7565;</span><br><span class="line">  } else {</span><br><span class="line">    const descriptor = query.src ? getSrcDescriptor(filename, query) || getTempSrcDescriptor(filename, query) : getDescriptor(filename, options.value);</span><br><span class="line">    if (query.type === &quot;style&quot;) {</span><br><span class="line">      return transformStyle(</span><br><span class="line">        code,</span><br><span class="line">        descriptor,</span><br><span class="line">        Number(query.index || 0),</span><br><span class="line">        options.value,</span><br><span class="line">        this,</span><br><span class="line">        filename</span><br><span class="line">      );</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5F53;<code>query</code>&#x4E2D;&#x6709;<code>vue</code>&#x5B57;&#x6BB5;&#xFF0C;&#x5E76;&#x4E14;<code>query</code>&#x4E2D;<code>type</code>&#x5B57;&#x6BB5;&#x503C;&#x4E3A;<code>style</code>&#x65F6;&#x5C31;&#x4F1A;&#x6267;&#x884C;<code>transformStyle</code>&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x7ED9;<code>transformStyle</code>&#x51FD;&#x6570;&#x6253;&#x4E2A;&#x65AD;&#x70B9;&#x3002;&#x5F53;&#x6267;&#x884C;&#x4E0A;&#x9762;&#x90A3;&#x6761;<code>import</code>&#x8BED;&#x53E5;&#x65F6;&#x5C31;&#x4F1A;&#x8D70;&#x5230;&#x65AD;&#x70B9;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x8FDB;&#x5230;<code>transformStyle</code>&#x4E2D;&#x770B;&#x770B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">php&#x590D;&#x5236;&#x4EE3;&#x7801;async function transformStyle(code, descriptor, index, options, pluginContext, filename) {</span><br><span class="line">  const block = descriptor.styles[index];</span><br><span class="line">  const result = await options.compiler.compileStyleAsync({</span><br><span class="line">    ...options.style,</span><br><span class="line">    filename: descriptor.filename,</span><br><span class="line">    id: `data-v-${descriptor.id}`,</span><br><span class="line">    isProd: options.isProduction,</span><br><span class="line">    source: code,</span><br><span class="line">    scoped: block.scoped,</span><br><span class="line">    ...options.cssDevSourcemap ? {</span><br><span class="line">      postcssOptions: {</span><br><span class="line">        map: {</span><br><span class="line">          from: filename,</span><br><span class="line">          inline: false,</span><br><span class="line">          annotation: false</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    } : {}</span><br><span class="line">  });</span><br><span class="line">  return {</span><br><span class="line">    code: result.code,</span><br><span class="line">    map</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>transformStyle</code>&#x51FD;&#x6570;&#x7684;&#x5B9E;&#x73B0;&#x6211;&#x4EEC;&#x770B;&#x7740;&#x5C31;&#x5F88;&#x719F;&#x6089;&#x4E86;&#xFF0C;&#x548C;&#x524D;&#x9762;&#x5904;&#x7406;<code>template</code>&#x548C;<code>script</code>&#x4E00;&#x6837;&#x90FD;&#x662F;&#x8C03;&#x7528;&#x7684;<code>vue/compiler-sfc</code>&#x5305;&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;<code>compileStyleAsync</code>&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;<code>vue</code>&#x66B4;&#x9732;&#x51FA;&#x6765;&#x7684;&#x5E95;&#x5C42;&#x7684;<code>API</code>&#x3002;&#x540C;&#x6837;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x5BF9;&#x5E95;&#x5C42;API&#x8FDB;&#x884C;&#x89E3;&#x6790;&#x3002;&#x901A;&#x8FC7;&#x67E5;&#x770B;<code>compileStyleAsync</code>&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x57FA;&#x672C;&#x5C31;&#x53EF;&#x4EE5;&#x641E;&#x6E05;&#x695A;<code>compileStyleAsync</code>&#x51FD;&#x6570;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;export function compileStyleAsync(</span><br><span class="line">  options: SFCAsyncStyleCompileOptions,</span><br><span class="line">): Promise&lt;SFCStyleCompileResults&gt; {}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x5148;&#x6765;&#x770B;&#x770B;<code>SFCAsyncStyleCompileOptions</code>&#x5165;&#x53C2;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;interface SFCAsyncStyleCompileOptions extends SFCStyleCompileOptions {</span><br><span class="line">  isAsync?: boolean</span><br><span class="line">  modules?: boolean</span><br><span class="line">  modulesOptions?: CSSModulesOptions</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">interface SFCStyleCompileOptions {</span><br><span class="line">  source: string</span><br><span class="line">  filename: string</span><br><span class="line">  id: string</span><br><span class="line">  scoped?: boolean</span><br><span class="line">  trim?: boolean</span><br><span class="line">  isProd?: boolean</span><br><span class="line">  inMap?: RawSourceMap</span><br><span class="line">  preprocessLang?: PreprocessLang</span><br><span class="line">  preprocessOptions?: any</span><br><span class="line">  preprocessCustomRequire?: (id: string) =&gt; any</span><br><span class="line">  postcssOptions?: any</span><br><span class="line">  postcssPlugins?: any[]</span><br><span class="line">  map?: RawSourceMap</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5165;&#x53C2;&#x4E3B;&#x8981;&#x5173;&#x6CE8;&#x51E0;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;<code>source</code>&#x5B57;&#x6BB5;&#x4E3A;<code>style</code>&#x6807;&#x7B7E;&#x4E2D;&#x7684;<code>css</code>&#x539F;&#x59CB;&#x4EE3;&#x7801;&#x3002;<code>scoped</code>&#x5B57;&#x6BB5;&#x4E3A;<code>style</code>&#x6807;&#x7B7E;&#x4E2D;&#x662F;&#x5426;&#x6709;<code>scoped</code> attribute&#x3002;<code>id</code>&#x5B57;&#x6BB5;&#x4E3A;&#x6211;&#x4EEC;&#x5728;&#x89C2;&#x5BDF; DOM &#x7ED3;&#x6784;&#x65F6;&#x770B;&#x5230;&#x7684; <code>data-v-xxxxx</code>&#x3002;&#x8FD9;&#x4E2A;&#x662F;<code>debug</code>&#x65F6;&#x5165;&#x53C2;&#x622A;&#x56FE;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/c013ad823eb0586f14c5753ec401a9718239843703052d7232ca0de5b46cdbca" alt="transformStyle-arg.png"></p>
<p>&#x518D;&#x6765;&#x770B;&#x770B;&#x8FD4;&#x56DE;&#x503C;<code>SFCStyleCompileResults</code>&#x5BF9;&#x8C61;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;<code>code</code>&#x5C5E;&#x6027;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x7ECF;&#x8FC7;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>css</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5DF2;&#x7ECF;&#x52A0;&#x4E0A;&#x4E86;<code>data-v-xxxxx</code>&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;interface SFCStyleCompileResults {</span><br><span class="line">  code: string</span><br><span class="line">  map: RawSourceMap | undefined</span><br><span class="line">  rawResult: Result | LazyResult | undefined</span><br><span class="line">  errors: Error[]</span><br><span class="line">  modules?: Record&lt;string, string&gt;</span><br><span class="line">  dependencies: Set&lt;string&gt;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x4E2A;&#x662F;<code>debug</code>&#x65F6;<code>compileStyleAsync</code>&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x622A;&#x56FE;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/7d043ab1012c0f38437bdc13a60f19c03574ab4202e5404a2e96e17022c371c1" alt="transformStyle-res.png"></p>
<p><code>genStyleCode</code>&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/59e0378aa6027fb0a47e84a7a78a0f02b350c9a0aa5ef2742027728cfc47fb96" alt="progress-genStyleCode.png"></p>
<h3 id="transformMain&#x51FD;&#x6570;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;"><a href="#transformMain&#x51FD;&#x6570;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;" class="headerlink" title="transformMain&#x51FD;&#x6570;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;"></a><code>transformMain</code>&#x51FD;&#x6570;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;</h3><p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6765;&#x770B;<code>transformMain</code>&#x51FD;&#x6570;&#x7B80;&#x5316;&#x540E;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;async function transformMain(code, filename, options, pluginContext, ssr, customElement) {</span><br><span class="line">  const { descriptor, errors } = createDescriptor(filename, code, options);</span><br><span class="line"></span><br><span class="line">  const { code: scriptCode, map: scriptMap } = await genScriptCode(</span><br><span class="line">    descriptor,</span><br><span class="line">    options,</span><br><span class="line">    pluginContext,</span><br><span class="line">    ssr,</span><br><span class="line">    customElement</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  let templateCode = &quot;&quot;;</span><br><span class="line">  ({ code: templateCode, map: templateMap } = await genTemplateCode(</span><br><span class="line">    descriptor,</span><br><span class="line">    options,</span><br><span class="line">    pluginContext,</span><br><span class="line">    ssr,</span><br><span class="line">    customElement</span><br><span class="line">  ));</span><br><span class="line"></span><br><span class="line">  const stylesCode = await genStyleCode(</span><br><span class="line">    descriptor,</span><br><span class="line">    pluginContext,</span><br><span class="line">    customElement,</span><br><span class="line">    attachedProps</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  const output = [</span><br><span class="line">    scriptCode,</span><br><span class="line">    templateCode,</span><br><span class="line">    stylesCode</span><br><span class="line">  ];</span><br><span class="line">  let resolvedCode = output.join(&quot;\n&quot;);</span><br><span class="line">  return {</span><br><span class="line">    code: resolvedCode,</span><br><span class="line">    map: resolvedMap || {</span><br><span class="line">      mappings: &quot;&quot;</span><br><span class="line">    },</span><br><span class="line">    meta: {</span><br><span class="line">      vite: {</span><br><span class="line">        lang: descriptor.script?.lang || descriptor.scriptSetup?.lang || &quot;js&quot;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><code>transformMain</code>&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x4E3B;&#x6D41;&#x7A0B;&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x5BF9;&#x5E94;&#x4E86;&#x4E00;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210;<code>js</code>&#x6587;&#x4EF6;&#x7684;&#x6D41;&#x7A0B;&#x3002;</p>
<p>&#x9996;&#x5148;&#x8C03;&#x7528;<code>createDescriptor</code>&#x51FD;&#x6570;&#x5C06;&#x4E00;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x89E3;&#x6790;&#x4E3A;&#x4E00;&#x4E2A;<code>descriptor</code>&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x7136;&#x540E;&#x4EE5;<code>descriptor</code>&#x5BF9;&#x8C61;&#x4E3A;&#x53C2;&#x6570;&#x8C03;&#x7528;<code>genScriptCode</code>&#x51FD;&#x6570;&#xFF0C;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script&gt;</code>&#x6A21;&#x5757;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;<code>scriptCode</code>&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x63A5;&#x7740;&#x4EE5;<code>descriptor</code>&#x5BF9;&#x8C61;&#x4E3A;&#x53C2;&#x6570;&#x8C03;&#x7528;<code>genTemplateCode</code>&#x51FD;&#x6570;&#xFF0C;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;template&gt;</code>&#x6A21;&#x5757;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;<code>render</code>&#x51FD;&#x6570;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;<code>templateCode</code>&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x7136;&#x540E;&#x4EE5;<code>descriptor</code>&#x5BF9;&#x8C61;&#x4E3A;&#x53C2;&#x6570;&#x8C03;&#x7528;<code>genStyleCode</code>&#x51FD;&#x6570;&#xFF0C;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;style&gt;</code>&#x6A21;&#x5757;&#x4EE3;&#x7801;&#x7F16;&#x8BD1;&#x6210;&#x4E86;<code>import</code>&#x8BED;&#x53E5;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;<code>import &quot;/src/App.vue?vue&amp;type=style&amp;index=0&amp;scoped=7a7a37b1&amp;lang.css&quot;;</code>&#xFF0C;&#x8D4B;&#x503C;&#x7ED9;<code>stylesCode</code>&#x53D8;&#x91CF;&#x3002;</p>
<p>&#x7136;&#x540E;&#x5C06;<code>scriptCode</code>&#x3001;<code>templateCode</code>&#x3001;<code>stylesCode</code>&#x4F7F;&#x7528;&#x6362;&#x884C;&#x7B26;<code>\n</code>&#x62FC;&#x63A5;&#x8D77;&#x6765;&#x5F97;&#x5230;<code>resolvedCode</code>&#xFF0C;&#x8FD9;&#x4E2A;<code>resolvedCode</code>&#x5C31;&#x662F;&#x4E00;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210;<code>js</code>&#x6587;&#x4EF6;&#x7684;&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x8FD9;&#x4E2A;&#x662F;<code>debug</code>&#x65F6;<code>resolvedCode</code>&#x53D8;&#x91CF;&#x503C;&#x7684;&#x622A;&#x56FE;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/3176ba8d4c30e3f268bb50de0313645b414488862c82103fa6781d520e4ce3bd" alt="resolvedCode.png"></p>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><p>&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x901A;&#x8FC7;<code>debug</code>&#x7684;&#x65B9;&#x5F0F;&#x4E00;&#x6B65;&#x4E00;&#x6B65;&#x7684;&#x5E26;&#x4F60;&#x4E86;&#x89E3;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210;<code>js</code>&#x6587;&#x4EF6;&#x7684;&#x5B8C;&#x6574;&#x6D41;&#x7A0B;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x3002;&#x5982;&#x679C;&#x6587;&#x5B57;&#x592A;&#x5C0F;&#x770B;&#x4E0D;&#x6E05;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x56FE;&#x7247;&#x4FDD;&#x5B58;&#x4E0B;&#x6765;&#x6216;&#x8005;&#x653E;&#x5927;&#x770B;&#xFF1A;<br><img src="https://gitee.com/songjianzaina/juejin_p3/raw/master/img/36b59c943ceb6ddd9c9a4482ca96bfd9179e0f8123eaf311a416268c0c32161c" alt="progress-full.png"></p>
<p><code>@vitejs/plugin-vue-jsx</code>&#x5E93;&#x4E2D;&#x6709;&#x4E2A;&#x53EB;<code>transform</code>&#x7684;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#xFF0C;&#x6BCF;&#x5F53;<code>vite</code>&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;&#x8FD9;&#x4E2A;&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x3002;&#x6240;&#x4EE5;&#x5F53;<code>import</code>&#x4E00;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x4F1A;&#x8D70;&#x5230;<code>@vitejs/plugin-vue-jsx</code>&#x4E2D;&#x7684;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x5728;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#x4E3B;&#x8981;&#x8C03;&#x7528;&#x4E86;<code>transformMain</code>&#x51FD;&#x6570;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x6B21;&#x89E3;&#x6790;&#x8FD9;&#x4E2A;<code>vue</code>&#x6587;&#x4EF6;&#x65F6;&#xFF0C;&#x5728;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x4E2D;&#x4E3B;&#x8981;&#x8C03;&#x7528;&#x4E86;<code>transformMain</code>&#x51FD;&#x6570;&#x3002;&#x5728;<code>transformMain</code>&#x51FD;&#x6570;&#x4E2D;&#x4E3B;&#x8981;&#x8C03;&#x7528;&#x4E86;4&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5206;&#x522B;&#x662F;&#xFF1A;<code>createDescriptor</code>&#x3001;<code>genScriptCode</code>&#x3001;<code>genTemplateCode</code>&#x3001;<code>genStyleCode</code>&#x3002;</p>
<p><code>createDescriptor</code>&#x63A5;&#x6536;&#x7684;&#x53C2;&#x6570;&#x4E3A;&#x5F53;&#x524D;<code>vue</code>&#x6587;&#x4EF6;&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;&#x4E00;&#x4E2A;<code>descriptor</code>&#x5BF9;&#x8C61;&#x3002;&#x5BF9;&#x8C61;&#x4E2D;&#x4E3B;&#x8981;&#x6709;&#x56DB;&#x4E2A;&#x5C5E;&#x6027;<code>template</code>&#x3001;<code>scriptSetup</code>&#x3001;<code>script</code>&#x3001;<code>styles</code>&#x3002;</p>
<ul>
<li><code>descriptor.template.ast</code>&#x5C31;&#x662F;&#x7531;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>template</code>&#x6A21;&#x5757;&#x751F;&#x6210;&#x7684;<code>AST&#x62BD;&#x8C61;&#x8BED;&#x6CD5;&#x6811;</code>&#x3002;</li>
<li><code>descriptor.template.content</code>&#x5C31;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>template</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
<li><code>scriptSetup</code>&#x548C;<code>script</code>&#x7684;&#x533A;&#x522B;&#x662F;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x7684;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x6709;<code>setup</code>&#x5C5E;&#x6027;&#x7684;<code>&lt;script&gt;</code>&#x6A21;&#x5757;&#x548C;&#x65E0;<code>setup</code>&#x5C5E;&#x6027;&#x7684;<code>&lt;script&gt;</code>&#x6A21;&#x5757;&#x3002;<code>descriptor.scriptSetup.content</code>&#x5C31;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x4E2D;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
</ul>
<p><code>genScriptCode</code>&#x51FD;&#x6570;&#x4E3A;&#x5E95;&#x5C42;&#x8C03;&#x7528;<code>vue/compiler-sfc</code>&#x7684;<code>compileScript</code>&#x51FD;&#x6570;&#xFF0C;&#x6839;&#x636E;&#x7B2C;&#x4E00;&#x6B65;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x7684;<code>&lt;script setup&gt;</code>&#x6A21;&#x5757;&#x8F6C;&#x6362;&#x4E3A;&#x6D4F;&#x89C8;&#x5668;&#x53EF;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x7684;<code>js</code>&#x4EE3;&#x7801;&#x3002;</p>
<p><code>genTemplateCode</code>&#x51FD;&#x6570;&#x4E3A;&#x5E95;&#x5C42;&#x8C03;&#x7528;<code>vue/compiler-sfc</code>&#x7684;<code>compileTemplate</code>&#x51FD;&#x6570;&#xFF0C;&#x6839;&#x636E;&#x7B2C;&#x4E00;&#x6B65;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x7684;<code>&lt;template&gt;</code>&#x6A21;&#x5757;&#x8F6C;&#x6362;&#x4E3A;<code>render</code>&#x51FD;&#x6570;&#x3002;</p>
<p><code>genStyleCode</code>&#x51FD;&#x6570;&#x4E3A;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x7684;<code>style</code>&#x6A21;&#x5757;&#x8F6C;&#x6362;&#x4E3A;<code>import &quot;/src/App.vue?vue&amp;type=style&amp;index=0&amp;scoped=7a7a37b1&amp;lang.css&quot;;</code>&#x6837;&#x5B50;&#x7684;<code>import</code>&#x8BED;&#x53E5;&#x3002;</p>
<p>&#x7136;&#x540E;&#x4F7F;&#x7528;&#x6362;&#x884C;&#x7B26;<code>\n</code>&#x5C06;<code>genScriptCode</code>&#x51FD;&#x6570;&#x3001;<code>genTemplateCode</code>&#x51FD;&#x6570;&#x3001;<code>genStyleCode</code>&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x62FC;&#x63A5;&#x8D77;&#x6765;&#x8D4B;&#x503C;&#x7ED9;&#x53D8;&#x91CF;<code>resolvedCode</code>&#xFF0C;&#x8FD9;&#x4E2A;<code>resolvedCode</code>&#x5C31;&#x662F;<code>vue</code>&#x6587;&#x4EF6;&#x7F16;&#x8BD1;&#x6210;<code>js</code>&#x6587;&#x4EF6;&#x7684;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>&#x5F53;&#x6D4F;&#x89C8;&#x5668;&#x6267;&#x884C;&#x5230;<code>import &quot;/src/App.vue?vue&amp;type=style&amp;index=0&amp;scoped=7a7a37b1&amp;lang.css&quot;;</code>&#x8BED;&#x53E5;&#x65F6;&#xFF0C;&#x89E6;&#x53D1;&#x4E86;&#x52A0;&#x8F7D;&#x6A21;&#x5757;&#x64CD;&#x4F5C;&#xFF0C;&#x518D;&#x6B21;&#x89E6;&#x53D1;&#x4E86;<code>@vitejs/plugin-vue-jsx</code>&#x4E2D;&#x7684;<code>transform</code>&#x94A9;&#x5B50;&#x51FD;&#x6570;&#x3002;&#x6B64;&#x65F6;&#x7531;&#x4E8E;&#x6709;&#x4E86;<code>type=style</code>&#x7684;<code>query</code>&#xFF0C;&#x6240;&#x4EE5;&#x5728;<code>transform</code>&#x51FD;&#x6570;&#x4E2D;&#x4F1A;&#x6267;&#x884C;<code>transformStyle</code>&#x51FD;&#x6570;&#xFF0C;&#x5728;<code>transformStyle</code>&#x51FD;&#x6570;&#x4E2D;&#x540C;&#x6837;&#x4E5F;&#x662F;&#x8C03;&#x7528;<code>vue/compiler-sfc</code>&#x7684;<code>compileStyleAsync</code>&#x51FD;&#x6570;&#xFF0C;&#x6839;&#x636E;&#x7B2C;&#x4E00;&#x6B65;&#x7684;<code>descriptor</code>&#x5BF9;&#x8C61;&#x5C06;<code>vue</code>&#x6587;&#x4EF6;&#x7684;<code>&lt;style&gt;</code>&#x6A21;&#x5757;&#x8F6C;&#x6362;&#x4E3A;&#x7F16;&#x8BD1;&#x540E;&#x7684;<code>css</code>&#x4EE3;&#x7801;<code>code</code>&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x81F3;&#x6B64;&#x7F16;&#x8BD1;<code>style</code>&#x90E8;&#x5206;&#x4E5F;&#x8BB2;&#x5B8C;&#x4E86;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/d9e5c73231ad7d8c3824664a86a2bc3c.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7343138637971734569.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7343138637971734569.html" itemprop="url">前端太卷了，不玩了，写写nodejs全栈涨工资，赶紧学起来</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2024-03-06T17:46:24+08:00">
                2024-03-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5982;&#x679C;&#x4F60;&#x611F;&#x89C9;&#x5230;&#x7D2F;&#x4E86;&#xFF0C;&#x5377;&#x4E0D;&#x52A8;&#x4E86;&#xFF0C;&#x90A3;&#x5C31;&#x6765;&#x770B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#x5427;&#xFF0C;&#x5199;&#x5199;&#x5168;&#x6808;&#xFF0C;&#x6DA8;&#x6DA8;&#x5DE5;&#x8D44;&#xFF0C;&#x5439;&#x5439;&#x725B;&#x76AE;&#xFF01;&#x4EBA;&#x751F;&#x5F97;&#x610F;&#x987B;&#x5C3D;&#x6B22;&#xFF0C;&#x4E0D;&#x8981;&#x53EA;&#x60F3;&#x5FD9;&#x642C;&#x7816;&#xFF01;</p>
<h1 id="&#x9996;&#x5148;&#x804A;&#x4E0B;node-js&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#&#x9996;&#x5148;&#x804A;&#x4E0B;node-js&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="&#x9996;&#x5148;&#x804A;&#x4E0B;node.js&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;"></a>&#x9996;&#x5148;&#x804A;&#x4E0B;node.js&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;</h1><h3 id="Node-js&#x7684;&#x4F18;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;"><a href="#Node-js&#x7684;&#x4F18;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;" class="headerlink" title="Node.js&#x7684;&#x4F18;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;"></a>Node.js&#x7684;&#x4F18;&#x70B9;&#x548C;&#x5E94;&#x7528;&#x573A;&#x666F;</h3><p>Node.js&#x4F5C;&#x4E3A;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x7684;&#x9009;&#x62E9;&#x5177;&#x6709;&#x8BB8;&#x591A;&#x4F18;&#x70B9;&#xFF0C;&#x4EE5;&#x4E0B;&#x662F;&#x5176;&#x4E2D;&#x4E00;&#x4E9B;&#xFF1A;</p>
<ol>
<li><strong>&#x9AD8;&#x6027;&#x80FD;&#xFF1A;</strong> Node.js&#x91C7;&#x7528;&#x4E86;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x3001;&#x975E;&#x963B;&#x585E;I/O&#x6A21;&#x578B;&#xFF0C;&#x4F7F;&#x5F97;&#x5B83;&#x80FD;&#x591F;&#x5904;&#x7406;&#x5927;&#x91CF;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x800C;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x7EBF;&#x7A0B;&#xFF0C;&#x4ECE;&#x800C;&#x5177;&#x6709;&#x51FA;&#x8272;&#x7684;&#x6027;&#x80FD;&#x8868;&#x73B0;&#x3002;</li>
<li><strong>&#x8F7B;&#x91CF;&#x7EA7;&#x548C;&#x9AD8;&#x6548;&#xFF1A;</strong> Node.js&#x7684;&#x8BBE;&#x8BA1;&#x7B80;&#x6D01;&#x800C;&#x8F7B;&#x91CF;&#xFF0C;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5FEB;&#xFF0C;&#x5185;&#x5B58;&#x5360;&#x7528;&#x4F4E;&#xFF0C;&#x9002;&#x5408;&#x6784;&#x5EFA;&#x8F7B;&#x91CF;&#x7EA7;&#x3001;&#x9AD8;&#x6548;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</li>
<li><strong>JavaScript&#x5168;&#x6808;&#xFF1A;</strong> &#x4F7F;&#x7528;Node.js&#xFF0C;&#x5F00;&#x53D1;&#x8005;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x79CD;&#x8BED;&#x8A00;&#xFF08;JavaScript&#xFF09;&#x8FDB;&#x884C;&#x524D;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#xFF0C;&#x7B80;&#x5316;&#x4E86;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x7684;&#x5B66;&#x4E60;&#x6210;&#x672C;&#x548C;&#x4EE3;&#x7801;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x3002;</li>
<li><strong>&#x4E30;&#x5BCC;&#x7684;&#x751F;&#x6001;&#x7CFB;&#x7EDF;&#xFF1A;</strong> Node.js&#x62E5;&#x6709;&#x4E30;&#x5BCC;&#x7684;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;&#x548C;&#x5E93;&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x96C6;&#x6210;&#x5404;&#x79CD;&#x529F;&#x80FD;&#x548C;&#x670D;&#x52A1;&#xFF0C;&#x63D0;&#x9AD8;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</li>
<li><strong>&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF1A;</strong> Node.js&#x5177;&#x6709;&#x826F;&#x597D;&#x7684;&#x53EF;&#x6269;&#x5C55;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#x6765;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x6EE1;&#x8DB3;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#x7684;&#x7528;&#x6237;&#x9700;&#x6C42;&#x3002;</li>
<li><strong>&#x5B9E;&#x65F6;&#x5E94;&#x7528;&#xFF1A;</strong> &#x7531;&#x4E8E;Node.js&#x5BF9;&#x4E8E;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x548C;&#x975E;&#x963B;&#x585E;I/O&#x7684;&#x652F;&#x6301;&#xFF0C;&#x5B83;&#x975E;&#x5E38;&#x9002;&#x5408;&#x6784;&#x5EFA;&#x5B9E;&#x65F6;&#x5E94;&#x7528;&#xFF0C;&#x5982;&#x5373;&#x65F6;&#x901A;&#x8BAF;&#x3001;&#x5728;&#x7EBF;&#x6E38;&#x620F;&#x3001;&#x5B9E;&#x65F6;&#x5206;&#x6790;&#x7B49;&#x3002;</li>
<li><strong>&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#xFF1A;</strong> Node.js&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7EC4;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x8BBE;&#x8BA1;&#x548C;&#x5FEB;&#x901F;&#x7684;&#x54CD;&#x5E94;&#x80FD;&#x529B;&#xFF0C;&#x4F7F;&#x5F97;&#x5FAE;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x3002;</li>
<li><strong>&#x6570;&#x636E;&#x6D41;&#x5904;&#x7406;&#xFF1A;</strong> Node.js&#x9002;&#x5408;&#x5904;&#x7406;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x4F8B;&#x5982;&#x6587;&#x4EF6;&#x64CD;&#x4F5C;&#x3001;&#x7F51;&#x7EDC;&#x6D41;&#x91CF;&#x5206;&#x6790;&#x7B49;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x6D41;&#x5F0F;&#x5904;&#x7406;&#x6765;&#x6709;&#x6548;&#x5730;&#x7BA1;&#x7406;&#x548C;&#x5904;&#x7406;&#x6570;&#x636E;&#x3002;</li>
</ol>
<p>&#x5E94;&#x7528;&#x573A;&#x666F;&#x5305;&#x62EC;&#x4F46;&#x4E0D;&#x9650;&#x4E8E;&#xFF1A;</p>
<ol>
<li><strong>Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF1A;</strong> &#x5F00;&#x53D1;&#x57FA;&#x4E8E;Node.js&#x7684;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5982;&#x793E;&#x4EA4;&#x7F51;&#x7EDC;&#x3001;&#x7535;&#x5B50;&#x5546;&#x52A1;&#x5E73;&#x53F0;&#x3001;&#x535A;&#x5BA2;&#x3001;&#x5185;&#x5BB9;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x7B49;&#x3002;</li>
<li><strong>API&#x670D;&#x52A1;&#xFF1A;</strong> &#x4F7F;&#x7528;Node.js&#x6784;&#x5EFA;RESTful API&#x670D;&#x52A1;&#xFF0C;&#x4E3A;&#x79FB;&#x52A8;&#x5E94;&#x7528;&#x3001;&#x524D;&#x7AEF;&#x5E94;&#x7528;&#x63D0;&#x4F9B;&#x6570;&#x636E;&#x63A5;&#x53E3;&#x3002;</li>
<li><strong>&#x5B9E;&#x65F6;&#x5E94;&#x7528;&#xFF1A;</strong> &#x6784;&#x5EFA;&#x5B9E;&#x65F6;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x5982;&#x804A;&#x5929;&#x5E94;&#x7528;&#x3001;&#x5728;&#x7EBF;&#x6E38;&#x620F;&#x3001;&#x5B9E;&#x65F6;&#x5730;&#x56FE;&#x7B49;&#xFF0C;&#x5229;&#x7528;Node.js&#x7684;&#x4E8B;&#x4EF6;&#x9A71;&#x52A8;&#x548C;&#x975E;&#x963B;&#x585E;I/O&#x6A21;&#x578B;&#x5B9E;&#x73B0;&#x9AD8;&#x6548;&#x7684;&#x5B9E;&#x65F6;&#x901A;&#x8BAF;&#x3002;</li>
<li><strong>&#x6570;&#x636E;&#x6D41;&#x5904;&#x7406;&#xFF1A;</strong> &#x4F7F;&#x7528;Node.js&#x5904;&#x7406;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x4F8B;&#x5982;&#x65E5;&#x5FD7;&#x5904;&#x7406;&#x3001;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#x3001;&#x6570;&#x636E;&#x5206;&#x6790;&#x7B49;&#x3002;</li>
<li><strong>&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#xFF1A;</strong> &#x5C06;Node.js&#x4F5C;&#x4E3A;&#x5FAE;&#x670D;&#x52A1;&#x67B6;&#x6784;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x7EC4;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x8BBE;&#x8BA1;&#x548C;&#x5FEB;&#x901F;&#x7684;&#x54CD;&#x5E94;&#x80FD;&#x529B;&#xFF0C;&#x5B9E;&#x73B0;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x9AD8;&#x6548;&#x901A;&#x4FE1;&#x3002;</li>
</ol>
<p>&#x603B;&#x7684;&#x6765;&#x8BF4;&#xFF0C;Node.js&#x4F5C;&#x4E3A;&#x4E00;&#x79CD;&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;&#x540E;&#x7AEF;&#x5F00;&#x53D1;&#x5DE5;&#x5177;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5C24;&#x5176;&#x5728;&#x9700;&#x8981;&#x5904;&#x7406;&#x5927;&#x91CF;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x548C;&#x5B9E;&#x65F6;&#x901A;&#x8BAF;&#x7684;&#x5E94;&#x7528;&#x4E2D;&#x8868;&#x73B0;&#x7A81;&#x51FA;&#x3002;</p>
<h3 id="node-js&#x7684;&#x5C40;&#x9650;&#x6027;"><a href="#node-js&#x7684;&#x5C40;&#x9650;&#x6027;" class="headerlink" title="node.js&#x7684;&#x5C40;&#x9650;&#x6027;"></a>node.js&#x7684;&#x5C40;&#x9650;&#x6027;</h3><p>&#x5C3D;&#x7BA1;Node.js&#x5728;&#x8BB8;&#x591A;&#x65B9;&#x9762;&#x90FD;&#x8868;&#x73B0;&#x51FA;&#x8272;&#xFF0C;&#x4F46;&#x5B83;&#x4E5F;&#x6709;&#x4E00;&#x4E9B;&#x5C40;&#x9650;&#x6027;&#x548C;&#x9002;&#x7528;&#x573A;&#x666F;&#x7684;&#x9650;&#x5236;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E9B;Node.js&#x7684;&#x5C40;&#x9650;&#x6027;&#xFF1A;</p>
<ol>
<li><strong>&#x5355;&#x7EBF;&#x7A0B;&#x963B;&#x585E;&#xFF1A;</strong> &#x867D;&#x7136;Node.js&#x91C7;&#x7528;&#x4E86;&#x975E;&#x963B;&#x585E;I/O&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x4F46;&#x5728;&#x5904;&#x7406;CPU&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x65F6;&#xFF0C;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x7279;&#x6027;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x3002;&#x7531;&#x4E8E;Node.js&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x5904;&#x7406;&#x963B;&#x585E;&#x64CD;&#x4F5C;&#xFF08;&#x5982;&#x5927;&#x91CF;&#x8BA1;&#x7B97;&#x6216;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#xFF09;&#x4F1A;&#x5F71;&#x54CD;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x54CD;&#x5E94;&#x6027;&#x3002;</li>
<li><strong>&#x56DE;&#x8C03;&#x5730;&#x72F1;&#xFF08;Callback Hell&#xFF09;&#xFF1A;</strong> &#x5728;&#x590D;&#x6742;&#x7684;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x4E2D;&#xFF0C;&#x5D4C;&#x5957;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x4EE3;&#x7801;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x548C;&#x7EF4;&#x62A4;&#xFF0C;&#x8FD9;&#x88AB;&#x79F0;&#x4E3A;&#x201C;&#x56DE;&#x8C03;&#x5730;&#x72F1;&#x201D;&#x95EE;&#x9898;&#x3002;&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Promise&#x3001;async/await&#x7B49;&#x6765;&#x7F13;&#x89E3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#xFF0C;&#x4F46;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x4ECD;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x3002;</li>
<li><strong>&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#x7684;&#x6807;&#x51C6;&#x5E93;&#xFF1A;</strong> Node.js&#x7684;&#x6807;&#x51C6;&#x5E93;&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#xFF0C;&#x76F8;&#x6BD4;&#x4E8E;&#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x8BED;&#x8A00;&#xFF0C;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x7B2C;&#x4E09;&#x65B9;&#x6A21;&#x5757;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E9B;&#x5E38;&#x89C1;&#x7684;&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x82B1;&#x8D39;&#x989D;&#x5916;&#x7684;&#x65F6;&#x95F4;&#x6765;&#x9009;&#x62E9;&#x3001;&#x5B66;&#x4E60;&#x548C;&#x6574;&#x5408;&#x8FD9;&#x4E9B;&#x6A21;&#x5757;&#x3002;</li>
<li><strong>&#x4E0D;&#x9002;&#x5408;&#x5BC6;&#x96C6;&#x578B;&#x8BA1;&#x7B97;&#xFF1A;</strong> &#x7531;&#x4E8E;Node.js&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x4E0D;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5927;&#x91CF;&#x7684;&#x8BA1;&#x7B97;&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x3002;&#x5982;&#x679C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E3B;&#x8981;&#x4F9D;&#x8D56;&#x4E8E;&#x5927;&#x91CF;&#x7684;&#x6570;&#x5B66;&#x8BA1;&#x7B97;&#x6216;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x5904;&#x7406;&#xFF0C;&#x5176;&#x4ED6;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x8BED;&#x8A00;&#x53EF;&#x80FD;&#x66F4;&#x5408;&#x9002;&#x3002;</li>
<li><strong>Callback&#x9519;&#x8BEF;&#x5904;&#x7406;&#xFF1A;</strong> &#x5728;&#x56DE;&#x8C03;&#x6A21;&#x5F0F;&#x4E0B;&#xFF0C;&#x9519;&#x8BEF;&#x5904;&#x7406;&#x53EF;&#x80FD;&#x53D8;&#x5F97;&#x7E41;&#x7410;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x6BCF;&#x4E2A;&#x56DE;&#x8C03;&#x4E2D;&#x68C0;&#x67E5;&#x9519;&#x8BEF;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x5F00;&#x53D1;&#x8005;&#x9700;&#x8981;&#x66F4;&#x52A0;&#x5C0F;&#x5FC3;&#x5730;&#x5904;&#x7406;&#x9519;&#x8BEF;&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x5B83;&#x4EEC;&#x4E0D;&#x4F1A;&#x88AB;&#x5FFD;&#x7565;&#x3002;</li>
<li><strong>&#x76F8;&#x5BF9;&#x8F83;&#x65B0;&#x7684;&#x6280;&#x672F;&#x6808;&#xFF1A;</strong> &#x76F8;&#x8F83;&#x4E8E;&#x4E00;&#x4E9B;&#x4F20;&#x7EDF;&#x7684;&#x540E;&#x7AEF;&#x6280;&#x672F;&#x6808;&#xFF0C;Node.js&#x662F;&#x76F8;&#x5BF9;&#x8F83;&#x65B0;&#x7684;&#x6280;&#x672F;&#xFF0C;&#x4E00;&#x4E9B;&#x4F01;&#x4E1A;&#x53EF;&#x80FD;&#x4ECD;&#x7136;&#x66F4;&#x503E;&#x5411;&#x4E8E;&#x4F7F;&#x7528;&#x66F4;&#x6210;&#x719F;&#x7684;&#x6280;&#x672F;&#x3002;</li>
<li><strong>&#x4E0D;&#x9002;&#x5408;&#x957F;&#x8FDE;&#x63A5;&#xFF1A;</strong> &#x5BF9;&#x4E8E;&#x957F;&#x8FDE;&#x63A5;&#x7684;&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5982;&#x4F20;&#x7EDF;&#x7684;&#x5373;&#x65F6;&#x901A;&#x8BAF;&#xFF08;IM&#xFF09;&#x7CFB;&#x7EDF;&#xFF0C;Node.js&#x7684;&#x5355;&#x7EBF;&#x7A0B;&#x6A21;&#x578B;&#x53EF;&#x80FD;&#x4E0D;&#x662F;&#x6700;&#x4F73;&#x9009;&#x62E9;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4F1A;&#x5BFC;&#x81F4;&#x957F;&#x65F6;&#x95F4;&#x5360;&#x7528;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;</li>
</ol>
<p>&#x5C3D;&#x7BA1;&#x6709;&#x8FD9;&#x4E9B;&#x5C40;&#x9650;&#x6027;&#xFF0C;&#x4F46;Node.js&#x5728;&#x8BB8;&#x591A;&#x5E94;&#x7528;&#x573A;&#x666F;&#x4E0B;&#x4ECD;&#x7136;&#x662F;&#x4E00;&#x4E2A;&#x5F3A;&#x5927;&#x4E14;&#x9AD8;&#x6548;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x9009;&#x62E9;&#x4F7F;&#x7528;Node.js&#x8FD8;&#x662F;&#x5176;&#x4ED6;&#x540E;&#x7AEF;&#x6280;&#x672F;&#x5E94;&#x8BE5;&#x6839;&#x636E;&#x5177;&#x4F53;&#x9879;&#x76EE;&#x7684;&#x9700;&#x6C42;&#x3001;&#x56E2;&#x961F;&#x7684;&#x6280;&#x672F;&#x6808;&#x548C;&#x5F00;&#x53D1;&#x8005;&#x7684;&#x7ECF;&#x9A8C;&#x6765;&#x505A;&#x51FA;&#x3002;</p>
<h3 id="node-js&#x5E38;&#x7528;&#x7684;&#x51E0;&#x79CD;&#x4E3B;&#x6D41;&#x6846;&#x67B6;"><a href="#node-js&#x5E38;&#x7528;&#x7684;&#x51E0;&#x79CD;&#x4E3B;&#x6D41;&#x6846;&#x67B6;" class="headerlink" title="node.js&#x5E38;&#x7528;&#x7684;&#x51E0;&#x79CD;&#x4E3B;&#x6D41;&#x6846;&#x67B6;"></a>node.js&#x5E38;&#x7528;&#x7684;&#x51E0;&#x79CD;&#x4E3B;&#x6D41;&#x6846;&#x67B6;</h3><p>Node.js&#x662F;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7075;&#x6D3B;&#x7684;JavaScript&#x8FD0;&#x884C;&#x65F6;&#x73AF;&#x5883;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5404;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#xFF0C;&#x4ECE;&#x7B80;&#x5355;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x5DE5;&#x5177;&#x5230;&#x5927;&#x578B;&#x7684;&#x7F51;&#x7EDC;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E9B;&#x5E38;&#x7528;&#x7684;Node.js&#x6846;&#x67B6;&#xFF1A;</p>
<ol>
<li>Express.js&#xFF1A;Express.js&#x662F;Node.js&#x6700;&#x6D41;&#x884C;&#x7684;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6846;&#x67B6;&#x4E4B;&#x4E00;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7EC4;&#x5F3A;&#x5927;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x5F97;&#x6784;&#x5EFA;Web&#x5E94;&#x7528;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x548C;&#x5FEB;&#x901F;&#x3002;Express.js&#x5177;&#x6709;&#x8DEF;&#x7531;&#x3001;&#x4E2D;&#x95F4;&#x4EF6;&#x3001;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x6EE1;&#x8DB3;&#x5927;&#x591A;&#x6570;Web&#x5E94;&#x7528;&#x7684;&#x9700;&#x6C42;&#x3002;</li>
<li>Koa.js&#xFF1A;Koa.js&#x662F;&#x7531;Express.js&#x539F;&#x73ED;&#x4EBA;&#x9A6C;&#x6253;&#x9020;&#x7684;&#x4E0B;&#x4E00;&#x4EE3;Node.js Web&#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x4F7F;&#x7528;&#x4E86;ES6&#x7684;&#x65B0;&#x7279;&#x6027;&#xFF0C;&#x5982;async/await&#xFF0C;&#x4F7F;&#x5F97;&#x7F16;&#x5199;&#x5F02;&#x6B65;&#x4EE3;&#x7801;&#x66F4;&#x52A0;&#x7B80;&#x6D01;&#x3002;Koa.js&#x66F4;&#x52A0;&#x8F7B;&#x91CF;&#x7EA7;&#x548C;&#x7075;&#x6D3B;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x5F3A;&#x5927;&#x7684;&#x4E2D;&#x95F4;&#x4EF6;&#x529F;&#x80FD;&#xFF0C;&#x53EF;&#x4EE5;&#x66F4;&#x65B9;&#x4FBF;&#x5730;&#x5B9E;&#x73B0;&#x5B9A;&#x5236;&#x5316;&#x7684;&#x529F;&#x80FD;&#x3002;</li>
<li>Nest.js&#xFF1A;Nest.js&#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x9AD8;&#x6548;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6E10;&#x8FDB;&#x5F0F;Node.js&#x6846;&#x67B6;&#x3002;&#x5B83;&#x57FA;&#x4E8E;Express.js&#xFF0C;&#x4F46;&#x5F15;&#x5165;&#x4E86;&#x8BB8;&#x591A;&#x73B0;&#x4EE3;&#x5316;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x5982;&#x4F9D;&#x8D56;&#x6CE8;&#x5165;&#x3001;&#x6A21;&#x5757;&#x5316;&#x3001;&#x7C7B;&#x578B;&#x68C0;&#x67E5;&#x7B49;&#xFF0C;&#x4F7F;&#x5F97;&#x6784;&#x5EFA;&#x590D;&#x6742;&#x5E94;&#x7528;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x3002;</li>
<li>Hapi.js&#xFF1A;Hapi.js&#x662F;&#x4E00;&#x4E2A;&#x4E13;&#x6CE8;&#x4E8E;&#x63D0;&#x4F9B;&#x914D;&#x7F6E;&#x7B80;&#x5355;&#x3001;&#x53EF;&#x6D4B;&#x8BD5;&#x6027;&#x5F3A;&#x7684;Web&#x670D;&#x52A1;&#x5668;&#x6846;&#x67B6;&#x3002;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5730;&#x6269;&#x5C55;&#x5176;&#x529F;&#x80FD;&#xFF0C;&#x540C;&#x65F6;&#x5177;&#x6709;&#x5F3A;&#x5927;&#x7684;&#x8DEF;&#x7531;&#x3001;&#x9A8C;&#x8BC1;&#x3001;&#x7F13;&#x5B58;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x6784;&#x5EFA;&#x5927;&#x578B;&#x548C;&#x9AD8;&#x53EF;&#x9760;&#x6027;&#x7684;Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;</li>
<li>Meteor.js&#xFF1A;Meteor.js&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x6808;JavaScript&#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x540C;&#x65F6;&#x6784;&#x5EFA;&#x5BA2;&#x6237;&#x7AEF;&#x548C;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;Meteor.js&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x6574;&#x5957;&#x7684;&#x5DE5;&#x5177;&#x548C;&#x5E93;&#xFF0C;&#x5305;&#x62EC;&#x6570;&#x636E;&#x5E93;&#x8BBF;&#x95EE;&#x3001;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#x540C;&#x6B65;&#x3001;&#x7528;&#x6237;&#x8BA4;&#x8BC1;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x5F97;&#x6784;&#x5EFA;&#x5B9E;&#x65F6;Web&#x5E94;&#x7528;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x548C;&#x5FEB;&#x901F;&#x3002;</li>
<li>Sails.js&#xFF1A;Sails.js&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;Express.js&#x7684;MVC&#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x7C7B;&#x4F3C;&#x4E8E;Ruby on Rails&#x7684;&#x5F00;&#x53D1;&#x4F53;&#x9A8C;&#xFF0C;&#x4F7F;&#x5F97;&#x6784;&#x5EFA;&#x6570;&#x636E;&#x9A71;&#x52A8;&#x7684;Web&#x5E94;&#x7528;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x3002;Sails.js&#x5177;&#x6709;&#x81EA;&#x52A8;&#x751F;&#x6210;API&#x3001;&#x84DD;&#x56FE;&#x8DEF;&#x7531;&#x3001;&#x6570;&#x636E;&#x5173;&#x8054;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x6784;&#x5EFA;RESTful API&#x548C;&#x5B9E;&#x65F6;Web&#x5E94;&#x7528;&#x3002;</li>
</ol>
<h1 id="Express&#x6846;&#x67B6;&#xFF1A;&#x5B9E;&#x8DF5;&#x4E0E;&#x6280;&#x672F;&#x63A2;&#x7D22;"><a href="#Express&#x6846;&#x67B6;&#xFF1A;&#x5B9E;&#x8DF5;&#x4E0E;&#x6280;&#x672F;&#x63A2;&#x7D22;" class="headerlink" title="Express&#x6846;&#x67B6;&#xFF1A;&#x5B9E;&#x8DF5;&#x4E0E;&#x6280;&#x672F;&#x63A2;&#x7D22;"></a>Express&#x6846;&#x67B6;&#xFF1A;&#x5B9E;&#x8DF5;&#x4E0E;&#x6280;&#x672F;&#x63A2;&#x7D22;</h1><p><strong>1. Express&#x6846;&#x67B6;&#x7B80;&#x4ECB;&#xFF1A;</strong></p>
<p>Express&#x662F;&#x4E00;&#x4E2A;&#x8F7B;&#x91CF;&#x7EA7;&#x4E14;&#x7075;&#x6D3B;&#x7684;Node.js Web&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6846;&#x67B6;&#xFF0C;&#x5B83;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7EC4;&#x7B80;&#x6D01;&#x800C;&#x5F3A;&#x5927;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x5FEB;&#x901F;&#x6784;&#x5EFA;Web&#x5E94;&#x7528;&#x3002;Express&#x7684;&#x6838;&#x5FC3;&#x7406;&#x5FF5;&#x662F;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x901A;&#x8FC7;&#x4E2D;&#x95F4;&#x4EF6;&#x53EF;&#x4EE5;&#x5904;&#x7406;HTTP&#x8BF7;&#x6C42;&#x3001;&#x54CD;&#x5E94;&#x4EE5;&#x53CA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x903B;&#x8F91;&#x3002;</p>
<hr>
<p><strong>2. &#x57FA;&#x7840;&#x642D;&#x5EFA;&#x4E0E;&#x8DEF;&#x7531;&#xFF1A;</strong></p>
<p>&#x5728;&#x5F00;&#x59CB;&#x5B9E;&#x8DF5;&#x4E4B;&#x524D;&#xFF0C;&#x9996;&#x5148;&#x9700;&#x8981;&#x642D;&#x5EFA;Express&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x57FA;&#x7840;&#x7ED3;&#x6784;&#x3002;&#x901A;&#x8FC7;&#x4F7F;&#x7528;<code>express-generator</code>&#x5DE5;&#x5177;&#x6216;&#x624B;&#x52A8;&#x521B;&#x5EFA;<code>package.json</code>&#x548C;<code>app.js</code>&#x6587;&#x4EF6;&#xFF0C;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x542F;&#x52A8;&#x4E00;&#x4E2A;Express&#x9879;&#x76EE;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5B66;&#x4E60;&#x5982;&#x4F55;&#x5B9A;&#x4E49;&#x8DEF;&#x7531;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x5904;&#x7406;HTTP&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;const express = require(&apos;express&apos;);</span><br><span class="line">const app = express();</span><br><span class="line"></span><br><span class="line">app.get(&apos;/&apos;, (req, res) =&gt; {</span><br><span class="line">  res.send(&apos;Hello World!&apos;);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">app.listen(3000, () =&gt; {</span><br><span class="line">  console.log(&apos;Express app listening on port 3000&apos;);</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>3. &#x4E2D;&#x95F4;&#x4EF6;&#xFF1A;</strong></p>
<p>Express&#x4E2D;&#x95F4;&#x4EF6;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#x5BF9;&#x8C61;&#xFF08;<code>req</code>&#xFF09;&#x3001;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#xFF08;<code>res</code>&#xFF09;&#x4EE5;&#x53CA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x51FD;&#x6570;&#xFF08;&#x901A;&#x5E38;&#x547D;&#x540D;&#x4E3A;<code>next</code>&#xFF09;&#x3002;&#x4E2D;&#x95F4;&#x4EF6;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x4EE3;&#x7801;&#xFF0C;&#x4FEE;&#x6539;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x5BF9;&#x8C61;&#xFF0C;&#x4EE5;&#x53CA;&#x7EC8;&#x6B62;&#x8BF7;&#x6C42;-&#x54CD;&#x5E94;&#x5468;&#x671F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;app.use((req, res, next) =&gt; {</span><br><span class="line">  console.log(&apos;Time:&apos;, Date.now());</span><br><span class="line">  next();</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>4. &#x6A21;&#x677F;&#x5F15;&#x64CE;&#x4E0E;&#x89C6;&#x56FE;&#xFF1A;</strong></p>
<p>Express&#x6846;&#x67B6;&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x5404;&#x79CD;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x6765;&#x751F;&#x6210;&#x52A8;&#x6001;HTML&#x5185;&#x5BB9;&#x3002;&#x5E38;&#x7528;&#x7684;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#x5305;&#x62EC;EJS&#x3001;Pug&#x548C;Handlebars&#x3002;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6A21;&#x677F;&#x5F15;&#x64CE;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x52A8;&#x6001;&#x6570;&#x636E;&#x5D4C;&#x5165;&#x5230;&#x9759;&#x6001;&#x6A21;&#x677F;&#x4E2D;&#xFF0C;&#x4EE5;&#x751F;&#x6210;&#x6700;&#x7EC8;&#x7684;HTML&#x9875;&#x9762;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;app.set(&apos;view engine&apos;, &apos;ejs&apos;);</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>5. &#x6570;&#x636E;&#x5E93;&#x96C6;&#x6210;&#x4E0E;ORM&#xFF1A;</strong></p>
<p>&#x5728;&#x5B9E;&#x9645;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6570;&#x636E;&#x5E93;&#x662F;&#x4E0D;&#x53EF;&#x6216;&#x7F3A;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;Express&#x6846;&#x67B6;&#x4E0E;&#x5404;&#x79CD;&#x6570;&#x636E;&#x5E93;&#x96C6;&#x6210;&#x826F;&#x597D;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;ORM&#xFF08;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x6620;&#x5C04;&#xFF09;&#x5DE5;&#x5177;&#x6765;&#x7B80;&#x5316;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x3002;&#x5E38;&#x7528;&#x7684;ORM&#x5DE5;&#x5177;&#x5305;&#x62EC;Sequelize&#x3001;Mongoose&#x7B49;&#xFF0C;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x5F00;&#x53D1;&#x8005;&#x66F4;&#x8F7B;&#x677E;&#x5730;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6A21;&#x578B;&#x5B9A;&#x4E49;&#x3001;&#x67E5;&#x8BE2;&#x548C;&#x64CD;&#x4F5C;&#x3002;</p>
<hr>
<p><strong>6. RESTful API&#x8BBE;&#x8BA1;&#x4E0E;&#x5B9E;&#x73B0;&#xFF1A;</strong></p>
<p>Express&#x6846;&#x67B6;&#x975E;&#x5E38;&#x9002;&#x5408;&#x6784;&#x5EFA;RESTful API&#x3002;&#x901A;&#x8FC7;&#x5B9A;&#x4E49;&#x4E0D;&#x540C;&#x7684;HTTP&#x52A8;&#x8BCD;&#x548C;&#x8DEF;&#x7531;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8D44;&#x6E90;&#x7684;&#x521B;&#x5EFA;&#x3001;&#x8BFB;&#x53D6;&#x3001;&#x66F4;&#x65B0;&#x548C;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x3002;&#x6B64;&#x5916;&#xFF0C;Express&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x4E2D;&#x95F4;&#x4EF6;&#x6765;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x4F53;&#x3001;&#x54CD;&#x5E94;&#x683C;&#x5F0F;&#x7B49;&#xFF0C;&#x4F7F;&#x5F97;&#x6784;&#x5EFA;API&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x7B80;&#x5355;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;app.get(&apos;/api/users&apos;, (req, res) =&gt; {</span><br><span class="line">  // &#x83B7;&#x53D6;&#x6240;&#x6709;&#x7528;&#x6237;&#x4FE1;&#x606F;</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">app.post(&apos;/api/users&apos;, (req, res) =&gt; {</span><br><span class="line">  // &#x521B;&#x5EFA;&#x65B0;&#x7528;&#x6237;</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>7. &#x5B9E;&#x8DF5;&#x6848;&#x4F8B;&#xFF1A;</strong></p>
<p>&#x4E3A;&#x4E86;&#x66F4;&#x597D;&#x5730;&#x7406;&#x89E3;Express&#x6846;&#x67B6;&#x7684;&#x5B9E;&#x8DF5;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4EE5;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x535A;&#x5BA2;&#x5E94;&#x7528;&#x4E3A;&#x4F8B;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x62D3;&#x5C55;&#x4E00;&#x4E0B;&#x7528;&#x6237;&#x7684;&#x6CE8;&#x518C;&#x3001;&#x767B;&#x5F55;&#x3001;&#x6587;&#x7AE0;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x5C55;&#x793A;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x5E76;&#x4E14;&#x7ED3;&#x5408;&#x6570;&#x636E;&#x5E93;&#x548C;<code>RESTful API</code>&#x8BBE;&#x8BA1;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;MongoDB&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;Mongoose&#x4F5C;&#x4E3A;MongoDB&#x7684;&#x5BF9;&#x8C61;&#x5EFA;&#x6A21;&#x5DE5;&#x5177;&#x3002;&#x9996;&#x5148;&#xFF0C;&#x786E;&#x4FDD;&#x60A8;&#x5DF2;&#x7ECF;&#x5B89;&#x88C5;&#x4E86;<code>Node.js``&#x548C;MongoDB</code>&#xFF0C;&#x5E76;&#x521B;&#x5EFA;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;<code>blogApp</code>&#x7684;&#x6587;&#x4EF6;&#x5939;&#x6765;&#x5B58;&#x653E;&#x6211;&#x4EEC;&#x7684;&#x9879;&#x76EE;&#x3002;</p>
<ol>
<li>&#x9996;&#x5148;&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x521D;&#x59CB;&#x5316;npm&#xFF0C;&#x5E76;&#x5B89;&#x88C5;Express&#x3001;Mongoose&#x548C;body-parser&#x4F9D;&#x8D56;&#xFF1A;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;npm init -y</span><br><span class="line">npm install express mongoose body-parser</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x5728;&#x9879;&#x76EE;&#x6587;&#x4EF6;&#x5939;&#x4E2D;&#x521B;&#x5EFA;<code>app.js</code>&#x6587;&#x4EF6;&#xFF0C;&#x5E76;&#x7F16;&#x5199;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5BFC;&#x5165;&#x6240;&#x9700;&#x7684;&#x6A21;&#x5757;</span><br><span class="line">const express = require(&apos;express&apos;);</span><br><span class="line">const bodyParser = require(&apos;body-parser&apos;);</span><br><span class="line">const mongoose = require(&apos;mongoose&apos;);</span><br><span class="line"></span><br><span class="line">// &#x8FDE;&#x63A5;MongoDB&#x6570;&#x636E;&#x5E93;</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost:27017/blog&apos;, { useNewUrlParser: true, useUnifiedTopology: true });</span><br><span class="line">const db = mongoose.connection;</span><br><span class="line"></span><br><span class="line">// &#x68C0;&#x6D4B;&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x72B6;&#x6001;</span><br><span class="line">db.on(&apos;error&apos;, console.error.bind(console, &apos;MongoDB connection error:&apos;));</span><br><span class="line">db.once(&apos;open&apos;, function() {</span><br><span class="line">    console.log(&apos;Connected to MongoDB&apos;);</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">// &#x521B;&#x5EFA;Express&#x5E94;&#x7528;</span><br><span class="line">const app = express();</span><br><span class="line"></span><br><span class="line">// &#x4F7F;&#x7528;body-parser&#x4E2D;&#x95F4;&#x4EF6;&#x89E3;&#x6790;&#x8BF7;&#x6C42;&#x4F53;</span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded({ extended: true }));</span><br><span class="line"></span><br><span class="line">// &#x5B9A;&#x4E49;&#x7528;&#x6237;&#x6A21;&#x578B;</span><br><span class="line">const User = mongoose.model(&apos;User&apos;, new mongoose.Schema({</span><br><span class="line">    username: String,</span><br><span class="line">    password: String</span><br><span class="line">}));</span><br><span class="line"></span><br><span class="line">// &#x6CE8;&#x518C;&#x7528;&#x6237;</span><br><span class="line">app.post(&apos;/api/register&apos;, async (req, res) =&gt; {</span><br><span class="line">    try {</span><br><span class="line">        const { username, password } = req.body;</span><br><span class="line">        const user = await User.create({ username, password });</span><br><span class="line">        res.json({ success: true, message: &apos;User registered successfully&apos;, user });</span><br><span class="line">    } catch (error) {</span><br><span class="line">        res.status(500).json({ success: false, message: error.message });</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">// &#x7528;&#x6237;&#x767B;&#x5F55;</span><br><span class="line">app.post(&apos;/api/login&apos;, async (req, res) =&gt; {</span><br><span class="line">    try {</span><br><span class="line">        const { username, password } = req.body;</span><br><span class="line">        const user = await User.findOne({ username, password });</span><br><span class="line">        if (user) {</span><br><span class="line">            res.json({ success: true, message: &apos;User logged in successfully&apos;, user });</span><br><span class="line">        } else {</span><br><span class="line">            res.status(401).json({ success: false, message: &apos;Invalid username or password&apos; });</span><br><span class="line">        }</span><br><span class="line">    } catch (error) {</span><br><span class="line">        res.status(500).json({ success: false, message: error.message });</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">// &#x542F;&#x52A8;Express&#x670D;&#x52A1;&#x5668;</span><br><span class="line">const port = 3000;</span><br><span class="line">app.listen(port, () =&gt; {</span><br><span class="line">    console.log(`Server is running on port ${port}`);</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x4E86;&#x7528;&#x6237;&#x6CE8;&#x518C;&#x548C;&#x767B;&#x5F55;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;MongoDB&#x4F5C;&#x4E3A;&#x6570;&#x636E;&#x5E93;&#x5B58;&#x50A8;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;RESTful&#x98CE;&#x683C;&#x7684;API&#x63A5;&#x53E3;&#x3002;</p>
<p>&#x60A8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x670D;&#x52A1;&#x5668;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;node app.js</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x6587;&#x7AE0;&#x6A21;&#x578B;&#x548C;&#x76F8;&#x5173;&#x7684;&#x8DEF;&#x7531;&#x6765;&#x5B9E;&#x73B0;&#x6587;&#x7AE0;&#x7684;&#x521B;&#x5EFA;&#x548C;&#x5C55;&#x793A;&#x529F;&#x80FD;&#x3002;&#x5728;<code>app.js</code>&#x6587;&#x4EF6;&#x4E2D;&#x6DFB;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5B9A;&#x4E49;&#x6587;&#x7AE0;&#x6A21;&#x578B;</span><br><span class="line">const Article = mongoose.model(&apos;Article&apos;, new mongoose.Schema({</span><br><span class="line">    title: String,</span><br><span class="line">    content: String,</span><br><span class="line">    author: {</span><br><span class="line">        type: mongoose.Schema.Types.ObjectId,</span><br><span class="line">        ref: &apos;User&apos;</span><br><span class="line">    }</span><br><span class="line">}));</span><br><span class="line"></span><br><span class="line">// &#x521B;&#x5EFA;&#x6587;&#x7AE0;</span><br><span class="line">app.post(&apos;/api/articles&apos;, async (req, res) =&gt; {</span><br><span class="line">    try {</span><br><span class="line">        const { title, content, author } = req.body;</span><br><span class="line">        const article = await Article.create({ title, content, author });</span><br><span class="line">        res.json({ success: true, message: &apos;Article created successfully&apos;, article });</span><br><span class="line">    } catch (error) {</span><br><span class="line">        res.status(500).json({ success: false, message: error.message });</span><br><span class="line">    }</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line">// &#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x7AE0;</span><br><span class="line">app.get(&apos;/api/articles&apos;, async (req, res) =&gt; {</span><br><span class="line">    try {</span><br><span class="line">        const articles = await Article.find().populate(&apos;author&apos;, &apos;username&apos;);</span><br><span class="line">        res.json({ success: true, articles });</span><br><span class="line">    } catch (error) {</span><br><span class="line">        res.status(500).json({ success: false, message: error.message });</span><br><span class="line">    }</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x4E86;&#x521B;&#x5EFA;&#x6587;&#x7AE0;&#x548C;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x6BCF;&#x7BC7;&#x6587;&#x7AE0;&#x90FD;&#x4E0E;&#x7279;&#x5B9A;&#x7684;&#x4F5C;&#x8005;&#x76F8;&#x5173;&#x8054;&#x3002;</p>
<p>&#x73B0;&#x5728;&#xFF0C;&#x60A8;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;POST&#x8BF7;&#x6C42;&#x6765;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x7528;&#x6237;&#x548C;&#x6587;&#x7AE0;&#xFF0C;&#x4F7F;&#x7528;GET&#x8BF7;&#x6C42;&#x6765;&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x7AE0;&#x3002;&#x4F8B;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x6CE8;&#x518C;&#x65B0;&#x7528;&#x6237;&#xFF1A;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x5230;<code>/api/register</code>&#xFF0C;&#x4F20;&#x9012;<code>username</code>&#x548C;<code>password</code>&#x5B57;&#x6BB5;&#x3002;</li>
<li>&#x7528;&#x6237;&#x767B;&#x5F55;&#xFF1A;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x5230;<code>/api/login</code>&#xFF0C;&#x4F20;&#x9012;<code>username</code>&#x548C;<code>password</code>&#x5B57;&#x6BB5;&#x3002;</li>
<li>&#x521B;&#x5EFA;&#x65B0;&#x6587;&#x7AE0;&#xFF1A;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x5230;<code>/api/articles</code>&#xFF0C;&#x4F20;&#x9012;<code>title</code>&#x3001;<code>content</code>&#x548C;<code>author</code>&#x5B57;&#x6BB5;&#xFF08;&#x6CE8;&#x610F;&#xFF0C;<code>author</code>&#x5B57;&#x6BB5;&#x5E94;&#x8BE5;&#x662F;&#x5DF2;&#x6CE8;&#x518C;&#x7528;&#x6237;&#x7684;ID&#xFF09;&#x3002;</li>
<li>&#x83B7;&#x53D6;&#x6240;&#x6709;&#x6587;&#x7AE0;&#xFF1A;&#x53D1;&#x9001;GET&#x8BF7;&#x6C42;&#x5230;<code>/api/articles</code>&#x3002;</li>
</ul>
<p>&#x8FD9;&#x4E2A;&#x793A;&#x4F8B;&#x6F14;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x4F7F;&#x7528;Express&#x6846;&#x67B6;&#x7ED3;&#x5408;MongoDB&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x535A;&#x5BA2;&#x5E94;&#x7528;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x4E86;RESTful API&#x63A5;&#x53E3;&#x3002;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x6C42;&#x6269;&#x5C55;&#x548C;&#x5B9A;&#x5236;&#x8FD9;&#x4E2A;&#x5E94;&#x7528;&#xFF0C;&#x4F8B;&#x5982;&#x6DFB;&#x52A0;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3001;&#x6587;&#x7AE0;&#x7F16;&#x8F91;&#x548C;&#x5220;&#x9664;&#x529F;&#x80FD;&#x7B49;&#x3002;</p>
<p>&#x770B;&#x5B8C;&#x540E;&#x662F;&#x4E0D;&#x662F;&#x89C9;&#x5F97;&#x540E;&#x7AEF;&#xFF08;CRUD&#xFF09;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x6CA1;&#x9519;&#xFF01;&#x5C31;&#x662F;&#x8FD9;&#x4E48;&#x7B80;&#x5355;&#xFF01;&#x559C;&#x6B22;&#x7684;&#x5C0F;&#x4F19;&#x4F34;&#x7ED9;&#x4E2A;&#x70B9;&#x8D5E;&#x52A0;&#x6536;&#x85CF;&#xFF0C;&#x7801;&#x5B57;&#x4E0D;&#x6613;&#xFF01;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/4710d3a795ff694448d41f3819b9e521.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../53/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../53/">53</a><span class="page-number current">54</span><a class="page-number" href="../55/">55</a><span class="space">&hellip;</span><a class="page-number" href="../116/">116</a><a class="extend next" rel="next" href="../55/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">1152</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">481</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
