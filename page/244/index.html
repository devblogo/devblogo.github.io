<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:url" content="https://dev.newban.cn/page/244/index.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="开发者博客 – IT技术 尽在开发者博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/page/244/">





  <title>开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007432493569671182.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007432493569671182.html" itemprop="url">前端瓦片地图加载之塞尔达传说旷野之息</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T23:03:06+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x80CC;&#x666F;"><a href="#&#x80CC;&#x666F;" class="headerlink" title="&#x80CC;&#x666F;"></a>&#x80CC;&#x666F;</h2><p>&#x6700;&#x8FD1;&#x5728; <code>&#x809D;&#x1F915;</code> &#x585E;&#x5C14;&#x8FBE;&#x65F7;&#x91CE;&#x4E4B;&#x606F;&#xFF0C;&#x5E0C;&#x671B; <code>2022&#x5E74;</code> &#x65B0;&#x4F5C;&#x53D1;&#x5E03;&#x524D;&#x53EF;&#x4EE5;&#x6551;&#x51FA;&#x516C;&#x4E3B; <code>&#x1F478;</code>&#x3002; &#x540C;&#x65F6;&#x516C;&#x53F8;&#x6709;&#x5730;&#x56FE;&#x52A0;&#x8F7D;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x4E8E;&#x662F;&#x60F3;&#x4EE5; <code>&#x65F7;&#x91CE;&#x4E4B;&#x606F;</code> &#x5730;&#x56FE;&#x4E3A;&#x4F8B;&#xFF0C;&#x5B66;&#x4E60;&#x5B9E;&#x8DF5;&#x4E00;&#x4E0B;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684;&#x5730;&#x56FE;&#x77E5;&#x8BC6;&#xFF0C;&#x672C;&#x6587;&#x5185;&#x5BB9;&#x4E3B;&#x8981;&#x4ECB;&#x7ECD;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x74E6;&#x7247;&#x5730;&#x56FE;&#x52A0;&#x8F7D;&#x539F;&#x7406;&#xFF0C;&#x5B9E;&#x73B0; <code>&#x585E;&#x5C14;&#x8FBE;&#x65F7;&#x91CE;&#x4E4B;&#x606F;</code> &#x5730;&#x56FE;&#x52A0;&#x8F7D;&#x5E76;&#x6DFB;&#x52A0;&#x4EA4;&#x4E92;&#x951A;&#x70B9;&#x3002;</p>
<h2 id="&#x57FA;&#x7840;&#x77E5;&#x8BC6;"><a href="#&#x57FA;&#x7840;&#x77E5;&#x8BC6;" class="headerlink" title="&#x57FA;&#x7840;&#x77E5;&#x8BC6;"></a>&#x57FA;&#x7840;&#x77E5;&#x8BC6;</h2><h3 id="&#x74E6;&#x7247;&#x5730;&#x56FE;-&#x1F5FA;"><a href="#&#x74E6;&#x7247;&#x5730;&#x56FE;-&#x1F5FA;" class="headerlink" title="&#x74E6;&#x7247;&#x5730;&#x56FE; &#x1F5FA;"></a>&#x74E6;&#x7247;&#x5730;&#x56FE; <code>&#x1F5FA;</code></h3><p>&#x5728;&#x6E38;&#x620F;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;<strong>&#x8D85;&#x8FC7;&#x5C4F;&#x5E55;&#x5927;&#x5C0F;&#x7684;&#x5730;&#x56FE;</strong>&#xFF0C;&#x4F8B;&#x5982;&#x5728;&#x5373;&#x65F6;&#x6218;&#x7565;&#x6E38;&#x620F;&#x4E2D;&#xFF0C;&#x5B83;&#x4F7F;&#x5F97;&#x73A9;&#x5BB6;&#x53EF;&#x4EE5;&#x5728;&#x5730;&#x56FE;&#x4E2D;&#x6EDA;&#x52A8;&#x6E38;&#x620F;&#x753B;&#x9762;&#x3002;&#x8FD9;&#x7C7B;&#x6E38;&#x620F;&#x901A;&#x5E38;&#x4F1A;&#x6709;&#x4E30;&#x5BCC;&#x7684;&#x80CC;&#x666F;&#x5143;&#x7D20;&#xFF0C;&#x5982;&#x679C;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x80CC;&#x666F;&#x56FE;&#x5207;&#x6362;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x9700;&#x8981;&#x4E3A;&#x6BCF;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x573A;&#x666F;&#x51C6;&#x5907;&#x4E00;&#x5F20;&#x80CC;&#x666F;&#x56FE;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x4E2A;&#x80CC;&#x666F;&#x56FE;&#x90FD;&#x4E0D;&#x5C0F;&#xFF0C;&#x8FD9;&#x6837;&#x4F1A;&#x9020;&#x6210;&#x8D44;&#x6E90;&#x6D6A;&#x8D39;&#x3002;</p>
<p><strong>&#x74E6;&#x7247;&#x5730;&#x56FE;</strong>&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x6B64;&#x7C7B;&#x95EE;&#x9898;&#x4EA7;&#x751F;&#x7684;&#xFF0C;&#x4E00;&#x5F20;&#x5927;&#x7684;&#x4E16;&#x754C;&#x5730;&#x56FE;&#x6216;&#x8005;&#x80CC;&#x666F;&#x56FE;&#x53EF;&#x4EE5;&#x7531;&#x51E0;&#x79CD;&#x5730;&#x5F62;&#x6765;&#x8868;&#x793A;&#xFF0C;&#x6BCF;&#x79CD;&#x5730;&#x5F62;&#x5BF9;&#x5E94;&#x4E00;&#x5F20;&#x5C0F;&#x7684;&#x7684;&#x56FE;&#x7247;&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x8FD9;&#x4E9B;&#x5C0F;&#x7684;&#x5730;&#x5F62;&#x56FE;&#x7247;&#x4E3A;&#x74E6;&#x7247;&#x3002;&#x628A;&#x8FD9;&#x4E9B;&#x74E6;&#x7247;&#x62FC;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#xFF0C;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x5730;&#x56FE;&#x5C31;&#x7EC4;&#x5408;&#x51FA;&#x6765;&#x4E86;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x74E6;&#x7247;&#x5730;&#x56FE;&#x7684;&#x539F;&#x7406;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/11f464fe3985a0ff173daa739d11b019224ad928381fb5b91655eb1ee1035082" alt="tile_1"></p>
<p><strong>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x91D1;&#x5B57;&#x5854;&#x6A21;&#x578B;&#x662F;&#x4E00;&#x79CD;&#x591A;&#x5206;&#x8FA8;&#x7387;&#x5C42;&#x6B21;&#x6A21;&#x578B;&#xFF0C;&#x4ECE;&#x74E6;&#x7247;&#x91D1;&#x5B57;&#x5854;&#x7684;&#x5E95;&#x5C42;&#x5230;&#x9876;&#x5C42;&#xFF0C;&#x5206;&#x8FA8;&#x7387;&#x8D8A;&#x6765;&#x8D8A;&#x4F4E;&#xFF0C;&#x4F46;&#x8868;&#x793A;&#x7684;&#x5730;&#x7406;&#x8303;&#x56F4;&#x4E0D;&#x53D8;&#x3002;</strong> &#x9996;&#x5148;&#x786E;&#x5B9A;&#x5730;&#x56FE;&#x670D;&#x52A1;&#x5E73;&#x53F0;&#x6240;&#x8981;&#x63D0;&#x4F9B;&#x7684;&#x7F29;&#x653E;&#x7EA7;&#x522B;&#x7684;&#x6570;&#x91CF; <code>N</code>&#xFF0C;&#x628A;&#x7F29;&#x653E;&#x7EA7;&#x522B;&#x6700;&#x9AD8;&#x3001;&#x5730;&#x56FE;&#x6BD4;&#x4F8B;&#x5C3A;&#x6700;&#x5927;&#x7684;&#x5730;&#x56FE;&#x56FE;&#x7247;&#x4F5C;&#x4E3A;&#x91D1;&#x5B57;&#x5854;&#x7684;&#x5E95;&#x5C42;&#xFF0C;&#x5373;&#x7B2C; <code>0</code> &#x5C42;&#xFF0C;&#x5E76;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5206;&#x5757;&#xFF0C;&#x4ECE;&#x5730;&#x56FE;&#x56FE;&#x7247;&#x7684;&#x5DE6;&#x4E0A;&#x89D2;&#x5F00;&#x59CB;&#xFF0C;&#x4ECE;&#x5DE6;&#x81F3;&#x53F3;&#x3001;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#x8FDB;&#x884C;&#x5207;&#x5272;&#xFF0C;&#x5206;&#x5272;&#x6210;&#x76F8;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x6B63;&#x65B9;&#x5F62;&#x5730;&#x56FE;&#x74E6;&#x7247;&#xFF0C;&#x5F62;&#x6210;&#x7B2C; <code>0</code> &#x5C42;&#x74E6;&#x7247;&#x77E9;&#x9635;&#xFF1B;&#x5728;&#x7B2C; <code>0</code> &#x5C42;&#x5730;&#x56FE;&#x56FE;&#x7247;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x6309;&#x6BCF;&#x50CF;&#x7D20;&#x5206;&#x5272;&#x4E3A; <code>2&#xD7;2</code> &#x4E2A;&#x50CF;&#x7D20;&#x7684;&#x65B9;&#x6CD5;&#x751F;&#x6210;&#x7B2C; <code>1</code> &#x5C42;&#x5730;&#x56FE;&#x56FE;&#x7247;&#xFF0C;&#x5E76;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x5206;&#x5757;&#xFF0C;&#x5206;&#x5272;&#x6210;&#x4E0E;&#x4E0B;&#x4E00;&#x5C42;&#x76F8;&#x540C;&#x5927;&#x5C0F;&#x7684;&#x6B63;&#x65B9;&#x5F62;&#x5730;&#x56FE;&#x74E6;&#x7247;&#xFF0C;&#x5F62;&#x6210;&#x7B2C;1&#x5C42;&#x74E6;&#x7247;&#x77E9;&#x9635;&#xFF1B;&#x91C7;&#x7528;&#x540C;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#x751F;&#x6210;&#x7B2C; <code>2</code> &#x5C42;&#x74E6;&#x7247;&#x77E9;&#x9635;&#xFF1B;&#x2026;&#x2026; &#x5982;&#x6B64;&#x4E0B;&#x53BB;&#xFF0C;&#x76F4;&#x5230;&#x7B2C; <code>N-1</code> &#x5C42;&#xFF0C;&#x6784;&#x6210;&#x6574;&#x4E2A;<code>&#x74E6;&#x7247;&#x91D1;&#x5B57;&#x5854;</code>&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/3e7df32d5bf03cb188d1174e9419a5be582feb8b3fccba8737802cc8bd202b4f" alt="tile_0"></p>
<blockquote>
<p>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x4E00;&#x822C;&#x91C7;&#x7528;<code>ZXY&#x89C4;&#x8303;</code>&#x7684;&#x5730;&#x56FE;&#x74E6;&#x7247;&#x3002;&#xFF08;&#x74E6;&#x7247;<code>&#x5C42;&#x7EA7;</code>&#x3001;&#x74E6;&#x7247; <code>x&#x5750;&#x6807;</code>&#x3001;&#x74E6;&#x7247; <code>y&#x5750;&#x6807;</code>&#xFF09;</p>
</blockquote>
<h3 id="&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;"><a href="#&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;" class="headerlink" title="&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;"></a>&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;</h3><p><strong>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x91C7;&#x7528;&#x7684;&#x90FD;&#x662F;&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;</strong>&#xFF0C;&#x5373;&#x6B63;&#x8F74;&#x7B49;&#x89D2;&#x5706;&#x67F1;&#x6295;&#x5F71;&#xFF0C;&#x53C8;&#x79F0;&#x7B49;&#x89D2;&#x5706;&#x67F1;&#x6295;&#x5F71;&#xFF0C; &#x662F;&#x5706;&#x67F1;&#x6295;&#x5F71;&#x7684;&#x4E00;&#x79CD;&#xFF0C;&#x7531;&#x8377;&#x5170;&#x5730;&#x56FE;&#x5B66;&#x5BB6;&#x58A8;&#x5361;&#x6258;&#xFF08;<code>Gerhardus Mercator</code>&#xFF09;&#x62DF;&#x5B9A;&#x3002;&#x57FA;&#x672C;&#x539F;&#x7406;&#x662F;&#x5047;&#x8BBE;&#x5730;&#x7403;&#x88AB;&#x56F4;&#x5728;&#x4E00;&#x4E2D;&#x7A7A;&#x7684;&#x5706;&#x67F1;&#x91CC;&#xFF0C;&#x5176;&#x57FA;&#x51C6;&#x7EAC;&#x7EBF;&#x4E0E;&#x5706;&#x67F1;&#x76F8;&#x5207;&#xFF08;&#x8D64;&#x9053;&#xFF09;&#x63A5;&#x89E6;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5047;&#x60F3;&#x5730;&#x7403;&#x4E2D;&#x5FC3;&#x6709;&#x4E00;&#x76CF;&#x706F;&#xFF0C;&#x628A;&#x7403;&#x9762;&#x4E0A;&#x7684;&#x56FE;&#x5F62;&#x6295;&#x5F71;&#x5230;&#x5706;&#x67F1;&#x4F53;&#x4E0A;&#xFF0C;&#x518D;&#x628A;&#x5706;&#x67F1;&#x4F53;&#x5C55;&#x5F00;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4E00;&#x5E45;&#x9009;&#x5B9A;&#x57FA;&#x51C6;&#x7EAC;&#x7EBF;&#x4E0A;&#x7684; <code>&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;</code> &#x7ED8;&#x5236;&#x51FA;&#x7684;&#x5730;&#x56FE;&#x3002;&#x767E;&#x5EA6;&#x5730;&#x56FE;&#x3001;&#x9AD8;&#x5FB7;&#x5730;&#x56FE;&#x53CA; <code>Google Maps</code> &#x4F7F;&#x7528;&#x7684;&#x6295;&#x5F71;&#x65B9;&#x6CD5;&#x90FD;&#x662F;&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/1563f456f6e43b22075c1a434f14a404fe88d865166a96caad09c433fec42558" alt="mercator"></p>
<blockquote>
<p>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x4E0D;&#x7528;&#x81EA;&#x5DF1;&#x751F;&#x6210;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x5236;&#x4F5C;&#x74E6;&#x7247;&#x5730;&#x56FE;&#xFF0C;<code>Tiled</code>&#x3001;<code>Arcgis</code> &#x7B49;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x7684;&#x5236;&#x4F5C;&#x5DE5;&#x5177;&#x3002;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/487be7e9890f4763d243629cf7885b9b36431f2d3110d7c2710dc74785f825d8" alt="hr"></p>
<h2 id="&#x5B9E;&#x73B0;"><a href="#&#x5B9E;&#x73B0;" class="headerlink" title="&#x5B9E;&#x73B0;"></a>&#x5B9E;&#x73B0;</h2><p>&#x5728;&#x672C;&#x4F8B;&#x4E2D;&#xFF0C;<code>&#x585E;&#x5C14;&#x8FBE;&#x65F7;&#x91CE;&#x4E4B;&#x606F;</code>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x6765;&#x6E90;&#x7F51;&#x7EDC;&#x5F00;&#x6E90;&#x5730;&#x56FE;&#xFF0C;&#x52A0;&#x8F7D;&#x74E6;&#x7247;&#x5730;&#x56FE;&#x4F7F;&#x7528; <code>Leaflet</code> <code>web</code> &#x5730;&#x56FE;&#x5E93;&#xFF0C;&#x5F00;&#x53D1;&#x4E4B;&#x524D;&#x7B80;&#x8981;&#x4E86;&#x89E3;&#x4E00;&#x4E0B;&#x3002;</p>
<h3 id="Leaflet-js"><a href="#Leaflet-js" class="headerlink" title="Leaflet.js"></a>Leaflet.js</h3><p><code>Leaflet &#x1F33F; (https://leafletjs.com)</code> &#x662F;&#x4E00;&#x4E2A;&#x4E3A;&#x5EFA;&#x8BBE;&#x4EA4;&#x4E92;&#x6027;&#x597D;&#x9002;&#x7528;&#x4E8E;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x5730;&#x56FE;&#xFF0C;&#x800C;&#x5F00;&#x53D1;&#x7684;&#x73B0;&#x4EE3;&#x7684;&#x3001;&#x5F00;&#x6E90;&#x7684; JavaScript &#x5E93;&#x3002;&#x4F7F;&#x7528;&#x5B83;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x90E8;&#x7F72;&#x7B80;&#x5355;&#xFF0C;&#x4EA4;&#x4E92;&#x5F0F;&#xFF0C;&#x8F7B;&#x91CF;&#x7EA7;&#x7684;Web&#x5730;&#x56FE;&#x3002;</p>
<ul>
<li>&#x4EE3;&#x7801;&#x4EC5; <code>33 KB</code>&#xFF0C;&#x4F46;&#x5B83;&#x5177;&#x6709;&#x5F00;&#x53D1;&#x5728;&#x7EBF;&#x5730;&#x56FE;&#x7684;&#x5927;&#x90E8;&#x5206;&#x529F;&#x80FD;&#x3002;</li>
<li>&#x5141;&#x8BB8;&#x4F7F;&#x7528;&#x56FE;&#x5C42;&#xFF0C;<code>WMS</code>&#xFF0C;&#x6807;&#x8BB0;&#xFF0C;&#x5F39;&#x51FA;&#x7A97;&#x53E3;&#xFF0C;&#x77E2;&#x91CF;&#x56FE;&#x5C42;&#xFF08;&#x6298;&#x7EBF;&#xFF0C;&#x591A;&#x8FB9;&#x5F62;&#xFF0C;&#x5706;&#x5F62;&#x7B49;&#xFF09;&#xFF0C;&#x56FE;&#x50CF;&#x53E0;&#x52A0;&#x5C42;&#x548C; <code>GeoJSON</code> &#x7B49;&#x56FE;&#x5C42;&#x3002;</li>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x62D6;&#x52A8;&#x5730;&#x56FE;&#xFF0C;&#x7F29;&#x653E;&#xFF08;&#x901A;&#x8FC7;&#x53CC;&#x51FB;&#x6216;&#x6EDA;&#x8F6E;&#x6EDA;&#x52A8;&#xFF09;&#xFF0C;&#x4F7F;&#x7528;&#x952E;&#x76D8;&#xFF0C;&#x4F7F;&#x7528;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x4EE5;&#x53CA;&#x62D6;&#x52A8;&#x6807;&#x8BB0;&#x6765;&#x4E0E; <code>Leaflet</code> &#x5730;&#x56FE;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</li>
<li>&#x6D4F;&#x89C8;&#x5668;&#x652F;&#x6301;&#x684C;&#x9762;&#x7AEF; <code>Chrome</code>&#x3001;<code>Firefox</code>&#x3001;<code>Safari 5+</code>&#x3001;<code>Opera 12+</code>&#x3001;<code>IE 7-11</code> &#x4EE5;&#x53CA; <code>Safari</code>&#x3001;<code>Android</code>&#x3001;<code>Chrome</code>&#x3001;<code>Firefox</code>&#x7B49;&#x624B;&#x673A;&#x6D4F;&#x89C8;&#x5668;&#x3002;</li>
</ul>
<h3 id="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"><a href="#&#x4EE3;&#x7801;&#x5B9E;&#x73B0;" class="headerlink" title="&#x4EE3;&#x7801;&#x5B9E;&#x73B0;"></a>&#x4EE3;&#x7801;&#x5B9E;&#x73B0;</h3><p>&#x5728;&#x9875;&#x9762;&#x7684; <code>head</code> &#x6807;&#x7B7E;&#x4E2D;&#x5F15;&#x5165; <code>Leaflet</code>&#x7684; <code>css</code> &#x6587;&#x4EF6;&#x548C; <code>js</code> &#x6587;&#x4EF6;&#x3002;&#x5728;&#x60F3;&#x8981;&#x521B;&#x5EFA;&#x5730;&#x56FE;&#x7684;&#x5730;&#x65B9;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5E26;&#x6709; <code>id</code> &#x7684; <code>div</code>&#xFF0C;&#x793A;&#x4F8B;&#x4E2D;&#x7528; <code>#mapContainer</code> &#x5143;&#x7D20;&#x627F;&#x8F7D;&#x5730;&#x56FE;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html&#x590D;&#x5236;&#x4EE3;&#x7801;&lt;head&gt;</span><br><span class="line">  &lt;link href=&quot;assets/libs/leaflet/leaflet.css&quot; rel=&quot;stylesheet&quot;/&gt;</span><br><span class="line">  &lt;script src=&quot;assets/libs/leaflet/leaflet-src.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;mapContainer&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>&#x9700;&#x8981;&#x786E;&#x4FDD;&#x5730;&#x56FE;&#x6709;&#x4E00;&#x4E2A;&#x660E;&#x786E;&#x7684;&#x9AD8;&#x5EA6;, &#x53EF;&#x4EE5;&#x5728; <code>CSS</code> &#x4E2D;&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x5168;&#x5C4F;&#x663E;&#x793A;&#x7684;&#x6837;&#x5F0F;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">css&#x590D;&#x5236;&#x4EE3;&#x7801;#mapContainer {</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x73B0;&#x5728;&#x5730;&#x56FE;&#x7684;&#x521D;&#x59CB;&#x5316;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x8FD9;&#x4E00;&#x6B65;&#x8FDB;&#x884C;&#x74E6;&#x7247;&#x5730;&#x56FE;&#x52A0;&#x8F7D;&#x3002;</p>
<ul>
<li><code>L.LatLngBounds(&#x897F;&#x5357;&#x89D2;&#x70B9;,&#x4E1C;&#x5317;&#x89D2;&#x70B9;)</code>&#xFF1A;&#x901A;&#x8FC7;&#x5B9A;&#x4E49;&#x77E9;&#x5F62;&#x897F;&#x5357;&#x89D2;&#x70B9;&#x548C;&#x4E1C;&#x5317;&#x89D2;&#x70B9;&#x6765;&#x521B;&#x5EFA;&#x7ECF;&#x7EAC;&#x5EA6;&#x7684;&#x77E9;&#x5F62;&#x6846;&#x3002;</li>
<li><code>setView</code>&#xFF1A;&#x521D;&#x59CB;&#x5316;&#x5730;&#x56FE;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x89C6;&#x56FE;&#x8BBE;&#x7F6E;&#x4E3A;&#x6211;&#x4EEC;&#x6240;&#x9009;&#x62E9;&#x7684;&#x5730;&#x7406;&#x5750;&#x6807;&#x548C;&#x7F29;&#x653E;&#x7EA7;&#x522B;&#x3002;</li>
<li><code>L.tileLayer</code>&#xFF1A;&#x52A0;&#x8F7D;&#x74E6;&#x7247;&#x56FE;&#x5C42;&#x3002;</li>
<li><code>addTo</code>&#xFF1A;&#x663E;&#x793A;&#x5730;&#x56FE;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;var bounds = new L.LatLngBounds(</span><br><span class="line">  new L.LatLng(-49.875, 34.25), new L.LatLng(-206, 221)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">var map = L.map(&apos;mapContainer&apos;, {</span><br><span class="line">  crs: L.CRS.Simple,</span><br><span class="line">  attributionControl: false,</span><br><span class="line">  maxBounds: bounds,</span><br><span class="line">  maxBoundsViscosity: 1.0,</span><br><span class="line">}).setView([0, 0], 2);</span><br><span class="line"></span><br><span class="line">var layer = L.tileLayer(&apos;assets/maps/{z}_{x}_{y}.png&apos;, {</span><br><span class="line">  attribution: &apos;&amp;copy; David&apos;,</span><br><span class="line">  minZoom: 2,</span><br><span class="line">  maxZoom: 7,</span><br><span class="line">  noWrap: true,</span><br><span class="line">  bounds: bounds</span><br><span class="line">}).addTo(map);</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/11cef86752f0f7a60ee72426b8b7cd655b6227f382243b128c3bf3efbb5d9fa1" alt="map_0"></p>
<blockquote>
<p>&#x786E;&#x4FDD;&#x6240;&#x6709;&#x4EE3;&#x7801;&#x90FD;&#x5728;&#x7528;&#x4E8E;&#x663E;&#x793A;&#x5730;&#x56FE;&#x7684; <code>div</code> &#x548C; <code>leaflet.js</code> &#x5305;&#x542B;&#x4E4B;&#x540E;&#x8C03;&#x7528;&#x3002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF08;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x5728;&#x521B;&#x5EFA;&#x5730;&#x56FE;&#x5B9E;&#x4F8B;&#x65F6;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x4EFB;&#x4F55;&#x53C2;&#x6570;&#xFF09;&#xFF0C;&#x5730;&#x56FE;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x9F20;&#x6807;&#x4E8B;&#x4EF6;&#x548C;&#x89E6;&#x6478;&#x4EA4;&#x4E92;&#x529F;&#x80FD;&#x90FD;&#x662F;&#x5F00;&#x542F;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x5177;&#x6709;&#x7F29;&#x653E;&#x548C;&#x5C5E;&#x6027;&#x63A7;&#x4EF6;&#x3002;</p>
</blockquote>
<p>&#x6B64;&#x65F6;&#x6211;&#x4EEC;&#x5728;&#x9875;&#x9762;&#x4E2D;&#x5BF9;&#x5730;&#x56FE;&#x8FDB;&#x884C;&#x62D6;&#x52A8;&#x3001;&#x7F29;&#x653E;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x6253;&#x5F00;&#x6D4F;&#x89C8;&#x5668;&#x63A7;&#x5236;&#x53F0;&#x67E5;&#x770B; <code>network</code> &#x4E2D;&#x7684; <code>img</code> &#x9009;&#x9879;&#xFF0C;&#x968F;&#x7740;&#x64CD;&#x4F5C;&#x7684;&#x89E6;&#x53D1;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x56FE;&#x74E6;&#x7247;&#x88AB;&#x6D4F;&#x89C8;&#x5668;&#x52A0;&#x8F7D;&#x663E;&#x793A;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/f1978d1b8c7c856fe25fe6d52b18f533eeb789463b38d46d50edd01eed93abca" alt="map_0.5"></p>
<p><code>&#x585E;&#x5C14;&#x8FBE;&#x65F7;&#x91CE;&#x4E4B;&#x606F;</code> &#x5730;&#x56FE;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x636E;&#x56FD;&#x5916; <code>&#x6CB9;&#x7BA1;&#x963F;&#x5A46;&#x4E3B;</code> &#x6D4B;&#x8BD5;&#xFF0C;&#x6797;&#x514B;&#x4ECE;&#x6700;&#x5317;&#x8D70;&#x5230;&#x5730;&#x56FE;&#x6700;&#x5357;&#x7AEF;&#x9700;&#x8981; <code>20</code> &#x591A;&#x5206;&#x949F;&#x3002;&#x5728;&#x5982;&#x6B64;&#x5B8F;&#x5927;&#x7684;&#x5730;&#x56FE;&#x4E0A;&#x8FDB;&#x884C;&#x6E38;&#x620F;&#xFF0C;&#x63A2;&#x7D22;&#x7684;&#x795E;&#x5E99;&#x3001;&#x5730;&#x56FE;&#x5854;&#x3001;&#x4EBA;&#x9A6C;&#x7B49;&#x602A;&#x7269;&#x70B9;&#x7B49;&#x4F4D;&#x7F6E;&#x9700;&#x8981;&#x82B1;&#x5F88;&#x5927;&#x7CBE;&#x529B;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;&#x5DF2;&#x6709;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6807;&#x6CE8;&#xFF0C;&#x53EF;&#x4EE5;&#x8282;&#x7701;&#x5F88;&#x591A;&#x7CBE;&#x529B;&#xFF08;&#x4F46;&#x4E5F;&#x5931;&#x53BB;&#x4E86;&#x63A2;&#x7D22;&#x7684;&#x4E50;&#x8DA3; <code>&#x1F602;</code>&#xFF09;&#x3002;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x5229;&#x7528; <code>Leaflet</code> &#x7684;&#x5730;&#x56FE;&#x6807;&#x6CE8;&#x529F;&#x80FD;&#xFF0C;&#x5728;&#x5730;&#x56FE;&#x4E0A;&#x8FDB;&#x884C;&#x6807;&#x8BB0;&#x3002;&#x5176;&#x4E2D;&#x6807;&#x6CE8;&#x6570;&#x636E;&#x6765;&#x6E90;&#x4E8E;&#x7F51;&#x7EDC;&#x8D44;&#x6599;&#x3002;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;&#x4EE5;&#x795E;&#x5E99; <code>&#x1F6D5;</code> &#x4E3A;&#x4F8B;&#xFF0C;&#x5B9E;&#x73B0;&#x5728;&#x74E6;&#x7247;&#x5730;&#x56FE;&#x4E0A;&#x7684;&#x6807;&#x6CE8;&#x548C;&#x4EA4;&#x4E92;&#x529F;&#x80FD;&#x3002;</p>
<ul>
<li><code>L.marker([x, y])</code>&#xFF1A;&#x9664;&#x4E86;&#x74E6;&#x7247;&#x4E4B;&#x5916;&#xFF0C;&#x53EF;&#x4EE5;&#x8F7B;&#x677E;&#x5730;&#x5728;&#x5730;&#x56FE;&#x4E2D;&#x6DFB;&#x52A0;&#x5176;&#x4ED6;&#x4E1C;&#x897F;&#xFF0C;&#x5305;&#x62EC;&#x6807;&#x8BB0;&#x3001;&#x6298;&#x7EBF;&#x3001;&#x591A;&#x8FB9;&#x5F62;&#x3001;&#x5706;&#x5708;&#x548C;&#x5F39;&#x51FA;&#x7A97;&#x53E3;&#x3002;</li>
<li><code>L.divIcon</code>: &#x81EA;&#x5B9A;&#x4E49;&#x56FE;&#x6807;&#x3002;</li>
<li><code>bindPopup</code>: &#x5F39;&#x51FA;&#x7A97;&#x53E3;&#x901A;&#x5E38;&#x7528;&#x4E8E;&#x5C06;&#x67D0;&#x4E9B;&#x4FE1;&#x606F;&#x9644;&#x52A0;&#x5230;&#x5730;&#x56FE;&#x4E0A;&#x7684;&#x7279;&#x5B9A;&#x5BF9;&#x8C61;&#x4E0A;&#x3002;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">js&#x590D;&#x5236;&#x4EE3;&#x7801;$.each(markerData, function () {</span><br><span class="line">  var key = this.markerCategoryId + &quot;-&quot; + this.id + &quot;-&quot; + this.name.replace(/[^A-Z]/gi, &quot;-&quot;);</span><br><span class="line">  var popupHtml = &apos;&lt;div class=&quot;popupContainer&quot;&gt;&apos;;</span><br><span class="line">  popupHtml += &apos;&lt;strong class=&quot;name&quot;&gt;&apos; + this.name + &apos;&lt;/strong&gt;&apos;;</span><br><span class="line">  popupHtml += &apos;&lt;div class=&quot;buttonContainer&quot;&gt;&apos;;</span><br><span class="line">  popupHtml += &apos;&lt;span class=&quot;markButton&quot; onclick=&quot;markPoint(this)&quot; data-key=&quot;&apos; + key + &apos;&quot;&gt;&#x6807;&#x8BB0;&lt;/span&gt;&apos;;</span><br><span class="line">  popupHtml += &apos;&lt;/div&gt;&apos;;</span><br><span class="line">  var className = &quot;mark-&quot; + key;</span><br><span class="line">  className += &quot; markIcon&quot;;</span><br><span class="line">  className += &quot; icon-&quot; + markerStyle[this.markerCategoryId];</span><br><span class="line">  var marker = L.marker([this.y, this.x], {</span><br><span class="line">    title: this.name,</span><br><span class="line">    icon: L.divIcon({</span><br><span class="line">      className: className,</span><br><span class="line">      iconSize: [20, 20],</span><br><span class="line">      iconAnchor: [10, 10],</span><br><span class="line">      popupAnchor: [0, -10],</span><br><span class="line">    })</span><br><span class="line">  }).addTo(map).bindPopup(popupHtml);</span><br><span class="line">});</span><br></pre></td></tr></table></figure>

<p>&#x81F3;&#x6B64;&#xFF0C;&#x901A;&#x8FC7;&#x904D;&#x5386;&#xFF0C;&#x5C06;&#x6570;&#x636E;&#x4E2D;&#x795E;&#x5E99;&#x7684;&#x5750;&#x6807;&#x70B9;&#x6DFB;&#x52A0;&#x5230;&#x4E86;&#x5730;&#x56FE;&#x4E0A;&#xFF0C;&#x540C;&#x65F6;&#x5728;dom&#x7ED3;&#x6784;&#x4E2D;&#x6DFB;&#x52A0;&#x4E86;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#xFF0C;&#x70B9;&#x51FB;&#x795E;&#x5E99;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x4EA4;&#x4E92;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/e5dbbc61e640039df89e52be54a7ca957cf5d0816818441bdbd1951a80177d76" alt="map_1"></p>
<p>&#x4F7F;&#x7528;&#x540C;&#x6837;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5730;&#x56FE;&#x5854;&#x3001;&#x6751;&#x5E84;&#x3001;&#x4EBA;&#x9A6C;&#x3001;&#x5440;&#x54C8;&#x54C8; <code>&#x1F602;</code>&#x3001;&#x56DE;&#x5FC6;&#x70B9;&#x3001;&#x5B50;&#x4EFB;&#x52A1;&#x70B9;&#x7B49;&#x4F4D;&#x7F6E;&#x4FE1;&#x606F;&#x6807;&#x6CE8;&#x5728;&#x5730;&#x56FE;&#x4E2D;&#x65B9;&#x4FBF;&#x67E5;&#x627E;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/be5027a08589d29606f421b59baddf4eda4cef6b063f01383170d28e2a56542a" alt="map_2"></p>
<h2 id="&#x5B9E;&#x73B0;&#x6548;&#x679C;"><a href="#&#x5B9E;&#x73B0;&#x6548;&#x679C;" class="headerlink" title="&#x5B9E;&#x73B0;&#x6548;&#x679C;"></a>&#x5B9E;&#x73B0;&#x6548;&#x679C;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/38329cd453ddb7330f5556e0ba6e97635fa00eb91afc120d67411f2ecd0d3cb9" alt="map"></p>
<blockquote>
<p>&#x5728;&#x7EBF;&#x9884;&#x89C8;&#xFF1A;<a href="/external_links/361c722e898c3e6ad5f9bb264e07fde5.html" target="blank" rel="noopener">dragonir.github.io/zelda-map</a></p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/adea12fb1c6db42aaf85e4b53685612c6e368f75f225b940ea21c61cd0114a55" alt="hr_light"></p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x4F7F;&#x7528;&#x74E6;&#x7247;&#x5730;&#x56FE;&#xFF0C;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#x5730;&#x56FE;&#x7684;&#x6574;&#x4F53;&#x548C;&#x5C40;&#x90E8;&#x90FD;&#x80FD;&#x9AD8;&#x6E05;&#x5C55;&#x793A;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x505A;&#x5230;&#x6309;&#x9700;&#x52A0;&#x8F7D;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5206;&#x5C42;&#x8F83;&#x591A;&#x7684;&#x5730;&#x56FE;&#x74E6;&#x7247;&#x56FE;&#x7247;&#x4E5F;&#x4F1A;&#x6307;&#x6570;&#x589E;&#x957F;&#xFF0C;&#x9700;&#x8981;&#x505A;&#x597D;&#x7F13;&#x5B58;&#x5904;&#x7406;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x80FD;&#x63D0;&#x5347;&#x5730;&#x56FE;&#x9875;&#x9762;&#x52A0;&#x8F7D;&#x901F;&#x5EA6;&#xFF0C;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;<code>leaflet.js</code> &#x867D;&#x7136;&#x5F88;&#x8F7B;&#x91CF;&#xFF0C;&#x4F46;&#x662F;&#x529F;&#x80FD;&#x975E;&#x5E38;&#x5F3A;&#x5927;&#xFF0C;&#x672C;&#x4F8B;&#x4E2D;&#x53EA;&#x7528;&#x5230;&#x5B83;&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x7840;&#x529F;&#x80FD;&#xFF0C;&#x5176;&#x4ED6;&#x9AD8;&#x7EA7;&#x7528;&#x6CD5;&#x8FD8;&#x8981;&#x5728;&#x540E;&#x7EED;&#x5F00;&#x53D1;&#x4E2D;&#x7EE7;&#x7EED;&#x63A2;&#x7D22;&#x3002;</p>
<h2 id="&#x53C2;&#x8003;&#x8D44;&#x6599;"><a href="#&#x53C2;&#x8003;&#x8D44;&#x6599;" class="headerlink" title="&#x53C2;&#x8003;&#x8D44;&#x6599;"></a>&#x53C2;&#x8003;&#x8D44;&#x6599;</h2><ul>
<li>&#x585E;&#x5C14;&#x8FBE;&#x65F7;&#x91CE;&#x4E4B;&#x606F;&#x5730;&#x56FE;&#x6807;&#x6CE8;&#x6765;&#x6E90;&#xFF1A;<a href="/external_links/3097fca9b1ec8942c4305e550ef1b50a.html" target="blank" rel="noopener">github.com</a></li>
<li>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x751F;&#x6210;&#x5DE5;&#x5177; <code>Tiled</code> &#x9879;&#x76EE;&#xFF1A;<a href="/external_links/99c6a07169eaffba94b4e0132511dc7c.html" target="blank" rel="noopener">www.mapeditor.org</a></li>
<li>&#x74E6;&#x7247;&#x5730;&#x56FE;&#x751F;&#x6210;&#x5DE5;&#x5177; <code>arcgis</code>&#xFF1A;<a href="/external_links/578f568afb1ffaf8bccbce83a92da417.html" target="blank" rel="noopener">developers.arcgis.com</a></li>
<li>&#x5F00;&#x653E;&#x5730;&#x7406;&#x7A7A;&#x95F4;&#x5B9E;&#x9A8C;&#x5BA4; <code>Leaflet.js</code>: <a href="/external_links/8acb813e5e0325977aea55d7e93b60d1.html" target="blank" rel="noopener">webgis.cn/leaflet-ind&#x2026;</a></li>
<li>&#x58A8;&#x5361;&#x6258;&#x6295;&#x5F71;&#xFF1A;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">baike.baidu.com/item/%E5%A2&#x2026;</a></li>
<li><a href="/external_links/d2db136f1e955906e9e90ebb88254341.html" target="blank" rel="noopener">www.cnblogs.com/fwc1994/p/6&#x2026;</a></li>
<li>ZXY&#x6807;&#x51C6;&#x74E6;&#x7247; <a href="/external_links/71302be3c56e50d549795f5d1f038d55.html" target="blank" rel="noopener">support.supermap.com.cn/DataWarehou&#x2026;</a></li>
<li>&#x539F;&#x9879;&#x76EE;&#xFF1A;<a href="/external_links/86a0db2f57b1fba25614703b8dd03904.html" target="blank" rel="noopener">bbs.a9vg.com/forum.php?m&#x2026;</a></li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p4/raw/master/img/89637747d60a50e823e48cdac0fc8b7270853b4a3294f83ddafc6ac0307aad49" alt="footer"></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/e787f4bedcf1a6e22f712e939b585588.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007409554623316004.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007409554623316004.html" itemprop="url">java中的多线程：线程使用、线程安全、线程通信 Java中</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T21:28:10+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Java&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;"><a href="#Java&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;" class="headerlink" title="Java&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;"></a>Java&#x4E2D;&#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;</h1><h2 id="Thread&#xFF1A;"><a href="#Thread&#xFF1A;" class="headerlink" title="Thread&#xFF1A;"></a>Thread&#xFF1A;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; Thread thread = new Thread() {</span><br><span class="line">     @Override</span><br><span class="line">     public void run() {</span><br><span class="line">         System.out.println(&quot;Thread started!&quot;);</span><br><span class="line">     }</span><br><span class="line"> };</span><br><span class="line"> thread.start();</span><br></pre></td></tr></table></figure>

<p>Thread&#x7C7B;&#x7684;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>sleep()&#xFF1A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7761;&#x7720;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF1B;</li>
<li>currentThread()&#xFF1A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#xFF0C;&#x8FD4;&#x56DE;&#x5BF9;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x6267;&#x884C;&#x7684;&#x7EBF;&#x7A0B;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x7528;&#xFF1B;</li>
<li>start()&#xFF1A;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x7EBF;&#x7A0B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;java&#x865A;&#x62DF;&#x673A;&#x4F1A;&#x8C03;&#x7528;&#x7EBF;&#x7A0B;&#x5185;&#x7684;run()&#x65B9;&#x6CD5;&#xFF1B;</li>
<li>join()&#xFF1A;&#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#x518D;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#xFF0C;&#x5185;&#x90E8;&#x8C03;&#x7528;&#x7684;&#x662F;Object&#x7C7B;&#x7684;wait&#x65B9;&#x6CD5;&#x5B9E;&#x73B0;&#x7684;&#xFF1B;</li>
<li>yield()&#xFF1A;yield&#x610F;&#x4E3A;&#x653E;&#x5F03;&#xFF0C;yield()&#x65B9;&#x6CD5;&#x6307;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x613F;&#x610F;&#x8BA9;&#x51FA;&#x5BF9;&#x5F53;&#x524D;&#x5904;&#x7406;&#x5668;&#x7684;&#x5360;&#x7528;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#xFF0C;&#x5373;&#x65F6;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x4E86;yield()&#x65B9;&#x6CD5;&#x8BA9;&#x51FA;&#x5904;&#x7406;&#x673A;&#xFF0C;&#x8C03;&#x5EA6;&#x65F6;&#x4E5F;&#x6709;&#x53EF;&#x80FD;&#x7EE7;&#x7EED;&#x8BA9;&#x8BE5;&#x7EBF;&#x7A0B;&#x7ADE;&#x4E89;&#x83B7;&#x5F97;&#x5904;&#x7406;&#x673A;&#x5E76;&#x8FD0;&#x884C;&#xFF1B;</li>
</ul>
<h2 id="Runnable&#xFF1A;"><a href="#Runnable&#xFF1A;" class="headerlink" title="Runnable&#xFF1A;"></a>Runnable&#xFF1A;</h2><p><code>Runnable</code>&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@FunctionalInterface</span><br><span class="line">public interface Runnable {</span><br><span class="line">    public abstract void run();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Runnable&#x4E0D;&#x5229;&#x4E8E;&#x7EBF;&#x7A0B;&#x91CD;&#x7528;&#x7BA1;&#x7406;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; Runnable runnable = new Runnable() {</span><br><span class="line">     @Override</span><br><span class="line">     public void run() {</span><br><span class="line">         System.out.println(&quot;Thread with Runnable started!&quot;);</span><br><span class="line">     }</span><br><span class="line"> };</span><br><span class="line"> Thread thread = new Thread(runnable);</span><br><span class="line"> thread.start();</span><br></pre></td></tr></table></figure>

<h2 id="ThreadFactory&#xFF1A;"><a href="#ThreadFactory&#xFF1A;" class="headerlink" title="ThreadFactory&#xFF1A;"></a>ThreadFactory&#xFF1A;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;    ThreadFactory factory = new ThreadFactory() {</span><br><span class="line">        int count = 0;</span><br><span class="line">        @Override</span><br><span class="line">        public Thread newThread(Runnable r) {</span><br><span class="line">            count ++;</span><br><span class="line">            return new Thread(r, &quot;Thread-&quot; + count);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">    Runnable runnable = new Runnable() {</span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            System.out.println(Thread.currentThread().getName() + &quot;started!&quot;);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">    Thread thread = factory.newThread(runnable);</span><br><span class="line">    thread.start();</span><br><span class="line">    Thread thread1 = factory.newThread(runnable);</span><br><span class="line">    thread1.start();</span><br></pre></td></tr></table></figure>

<h2 id="Executor&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;"><a href="#Executor&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;" class="headerlink" title="Executor&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;"></a>Executor&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;</h2><p>Executor&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;&#x6700;&#x4E3A;&#x63A8;&#x8350;&#xFF09;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; Runnable runnable = new Runnable() {</span><br><span class="line">     @Override</span><br><span class="line">     public void run() {</span><br><span class="line">         System.out.println(&quot;Thread with Runnable started!&quot;);</span><br><span class="line">     }</span><br><span class="line"> };</span><br><span class="line"> Executor executor = Executors.newCachedThreadPool();</span><br><span class="line"> executor.execute(runnable);</span><br><span class="line"> executor.execute(runnable);</span><br><span class="line"> executor.execute(runnable);</span><br></pre></td></tr></table></figure>

<h2 id="Callable-&#x548C;-Future&#xFF1A;"><a href="#Callable-&#x548C;-Future&#xFF1A;" class="headerlink" title="Callable &#x548C; Future&#xFF1A;"></a>Callable &#x548C; Future&#xFF1A;</h2><p><code>Callable</code>&#x4E0E;<code>Runnable</code>&#x7C7B;&#x4F3C;&#xFF0C;&#x540C;&#x6837;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x65B9;&#x6CD5;&#x7684;&#x51FD;&#x6570;&#x5F0F;&#x63A5;&#x53E3;&#x3002;&#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;<code>Callable</code>&#x63D0;&#x4F9B;&#x7684;&#x65B9;&#x6CD5;&#x662F;<strong>&#x6709;&#x8FD4;&#x56DE;&#x503C;</strong>&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x652F;&#x6301;&#x6CDB;&#x578B;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@FunctionalInterface</span><br><span class="line">public interface Callable&lt;V&gt; {</span><br><span class="line">    V call() throws Exception;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Callable&#x548C;Future&#x4E00;&#x822C;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#xFF0C;<code>future.get()</code>&#x83B7;&#x53D6;&#x5F02;&#x6B65;&#x6267;&#x884C;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x7ED3;&#x679C;&#x53EF;&#x7528;&#xFF0C;&#x6B64;&#x65B9;&#x6CD5;&#x4F1A;&#x963B;&#x585E;&#x76F4;&#x5230;&#x5F02;&#x6B65;&#x8BA1;&#x7B97;&#x5B8C;&#x6210;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; Callable&lt;String&gt; callable = new Callable&lt;String&gt;() {</span><br><span class="line">        @Override</span><br><span class="line">        public String call() {</span><br><span class="line">            try {</span><br><span class="line">                Thread.sleep(1500);</span><br><span class="line">            } catch (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            return &quot;Done!&quot;;</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">    ExecutorService executor = Executors.newCachedThreadPool();</span><br><span class="line">    Future&lt;String&gt; future = executor.submit(callable);</span><br><span class="line">    try {</span><br><span class="line">        String result = future.get();</span><br><span class="line">        System.out.println(&quot;result: &quot; + result);</span><br><span class="line">    } catch (InterruptedException | ExecutionException e) {</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<h1 id="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x548C;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;"><a href="#&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x548C;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x548C;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;"></a>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x548C;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;</h1><p>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF1A;&#x6307;&#x51FD;&#x6570;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x73AF;&#x5883;&#x4E2D;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;&#x80FD;&#x591F;&#x6B63;&#x786E;&#x5730;&#x5904;&#x7406;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#xFF0C;&#x4F7F;&#x5F97;&#x529F;&#x80FD;&#x6B63;&#x786E;&#x5B8C;&#x6210;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#xFF1A;&#x5373;&#x5F53;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x5BF9;&#x5185;&#x5B58;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x90FD;&#x4E0D;&#x53EF;&#x4EE5;&#x5BF9;&#x8FD9;&#x4E2A;&#x5185;&#x5B58;&#x5730;&#x5740;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x4E0D;&#x7B49;&#x4E8E;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#xFF0C;&#x73B0;&#x5728;&#x5F88;&#x591A;&#x4EBA;&#x8BEF;&#x89E3;&#x4E86;&#x8FD9;&#x4E00;&#x70B9;&#x800C;&#x559C;&#x6B22;&#x5C06;&#x4ED6;&#x4EEC;&#x6DF7;&#x4E3A;&#x4E00;&#x8C08;&#x3002;&#x73B0;&#x5B9E;&#x662F;&#xFF0C;&#x5F53;&#x6211;&#x8BE2;&#x95EE;&#x9762;&#x8BD5;&#x8005;&#x4F55;&#x4E3A;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x65F6;&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x56DE;&#x7B54;&#x7684;&#x90FD;&#x662F;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;</p>
<p>&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x662F;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x4E00;&#x79CD;&#x624B;&#x6BB5;&#xFF0C;&#x4F60;&#x5F53;&#x7136;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x5F0F;&#x8FBE;&#x5230;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x3002;</p>
<p><a href="/external_links/f076bae2ea8239a3545dc6c73cb3d88b.html" target="blank" rel="noopener">Threadsafe vs Synchronized</a></p>
<p>&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x672C;&#x8D28;&#x95EE;&#x9898;&#x662F;&#x8D44;&#x6E90;&#x95EE;&#x9898;&#xFF1A;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x8BFB;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x8BE5;&#x8D44;&#x6E90;&#x4E0D;&#x80FD;&#x88AB;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4EFB;&#x610F;&#x5199;&#xFF1B;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x88AB;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5199;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x8BE5;&#x8D44;&#x6E90;&#x4E0D;&#x80FD;&#x88AB;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4EFB;&#x610F;&#x8BFB;&#x5199;&#xFF1B;</p>
<p>&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;java&#x4E2D;&#x5B9E;&#x73B0;&#x7EBF;&#x7A0B;&#x5B89;&#x5168;&#x7684;&#x51E0;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<h2 id="synchronized"><a href="#synchronized" class="headerlink" title="synchronized"></a>synchronized</h2><p>synchronized&#x4EE5;&#x540C;&#x6B65;&#x65B9;&#x5F0F;&#x4FDD;&#x8BC1;&#x4E86;&#x65B9;&#x6CD5;&#x5185;&#x90E8;&#x6216;&#x4EE3;&#x7801;&#x5757;&#x5185;&#x90E8;&#x8D44;&#x6E90;(&#x6570;&#x636E;)&#x7684;&#x4E92;&#x65A5;&#x8BBF;&#x95EE;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E86;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x5BF9;&#x76D1;&#x89C6;&#x8D44;&#x6E90;&#x7684;&#x6570;&#x636E;&#x540C;&#x6B65;.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; private synchronized void count(int newValue) {</span><br><span class="line">        x = newValue;</span><br><span class="line">        System.out.println(&quot;x= &quot; + x);</span><br><span class="line">    }</span><br></pre></td></tr></table></figure>

<p>&#x53E6;&#x4E00;&#x79CD;&#x5199;&#x6CD5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801; private void count(int newValue) {</span><br><span class="line">    synchronized (this) {</span><br><span class="line">        x = newValue;</span><br><span class="line">        System.out.println(&quot;x= &quot; + x);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h2><p>volatile&#x5173;&#x952E;&#x5B57;&#x4FEE;&#x9970;&#x7684;&#x53D8;&#x91CF;&#x5177;&#x6709;&#x539F;&#x5B50;&#x6027;&#x548C;&#x540C;&#x6B65;&#x6027;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x5B9E;&#x73B0;&#x4E86;&#x5BF9;&#x5355;&#x2F00;&#x5B57;&#x6BB5;&#x7684;&#x7EBF;&#x7A0B;&#x95F4;&#x4E92;&#x65A5;&#x8BBF;&#x95EE;&#x3002;</p>
<p>volatile&#x5173;&#x952E;&#x5B57;&#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x5185;&#x5B58;&#x7684;&#x53EF;&#x89C1;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x7528;volatile&#x5173;&#x952E;&#x5B57;&#x58F0;&#x660E;&#x4E86;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#xFF0C;&#x5728;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x91CC;&#x9762;&#x6539;&#x53D8;&#x4E86;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x503C;&#xFF0C;&#x90A3;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x662F;&#x7ACB;&#x9A6C;&#x53EF;&#x89C1;&#x66F4;&#x6539;&#x540E;&#x7684;&#x503C;&#x7684;&#x3002;</p>
<p>volatile&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x662F;&#x7B80;&#x5316;&#x7248;&#x7684; synchronized.</p>
<p>volatile &#x53EA;&#x5BF9;&#x57FA;&#x672C;&#x7C7B;&#x578B; (byte&#x3001;char&#x3001;short&#x3001;int&#x3001;long&#x3001;float&#x3001;double&#x3001;boolean)&#x7684;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x548C;&#x5BF9;&#x8C61;&#x7684;&#x5F15;&#x2F64;&#x8D4B;&#x503C;&#x64CD;&#x4F5C;&#x6709;&#x6548;&#x3002;</p>
<h2 id="java-util-concurrent-atomic"><a href="#java-util-concurrent-atomic" class="headerlink" title="java.util.concurrent.atomic:"></a>java.util.concurrent.atomic:</h2><p>AtomicInteger&#x3001;AtomicBoolean &#x7B49;&#x7C7B;&#xFF0C;&#x4F5C;&#x2F64;&#x548C; volatile &#x57FA;&#x672C;&#x2F00;&#x81F4;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x662F; volatile&#x4FEE;&#x9970;&#x7684;Integer&#x3001;Boolean&#x7B49;&#x7C7B;&#x3002;</p>
<h2 id="Lock-ReentrantReadWriteLock"><a href="#Lock-ReentrantReadWriteLock" class="headerlink" title="Lock / ReentrantReadWriteLock"></a>Lock / ReentrantReadWriteLock</h2><p>Lock&#x540C;&#x6837;&#x662F;&#x52A0;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x4F46;&#x4F7F;&#x2F64;&#x2F45;&#x5F0F;&#x66F4;&#x7075;&#x6D3B;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x66F4;&#x9EBB;&#x70E6;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;Lock lock = new ReentrantLock();</span><br><span class="line">...</span><br><span class="line">lock.lock();</span><br><span class="line">try {</span><br><span class="line">    x++;</span><br><span class="line">} finally {</span><br><span class="line">    lock.unlock();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Synchronized&#x5B58;&#x5728;&#x7684;&#x4E00;&#x4E2A;&#x6027;&#x80FD;&#x95EE;&#x9898;&#x5C31;&#x662F;&#x8BFB;&#x4E0E;&#x8BFB;&#x4E4B;&#x95F4;&#x4E92;&#x65A5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x2F00;&#x822C;&#x5E76;&#x4E0D;&#x4F1A;&#x53EA;&#x662F;&#x4F7F;&#x2F64; <code>Lock</code> &#xFF0C;&#x2F7D;&#x662F;&#x4F1A;&#x4F7F;&#x2F64;&#x66F4;&#x590D;&#x6742;&#x7684;&#x9501;&#xFF0C;&#x4F8B;&#x5982; <code>ReadWriteLock</code> &#xFF0C;&#x4ECE;&#x800C;&#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x66F4;&#x52A0;&#x7EC6;&#x81F4;&#x5316;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;ReentrantReadWriteLock lock = new ReentrantReadWriteLock();</span><br><span class="line">Lock readLock = lock.readLock();</span><br><span class="line">Lock writeLock = lock.writeLock();</span><br><span class="line">private int x = 0;</span><br><span class="line">private void writeOperate () {</span><br><span class="line">    writeLock.lock();</span><br><span class="line">    try {</span><br><span class="line">        x++;</span><br><span class="line">    } finally {</span><br><span class="line">        writeLock.unlock();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">private void readOperate ( int time){</span><br><span class="line">    readLock.lock();</span><br><span class="line">    try {</span><br><span class="line">        System.out.println();</span><br><span class="line">    } finally {</span><br><span class="line">        readLock.unlock();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8BFB;&#x53D6;&#x9501;&#x662F;&#x5171;&#x4EAB;&#x7684;&#xFF0C;&#x56E0;&#x800C;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6709;&#x7EBF;&#x7A0B;&#x5199;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E0D;&#x53EF;&#x5199;&#xFF0C;&#x4E0D;&#x53EF;&#x8BFB;&#xFF1B;&#x8BE5;&#x7EBF;&#x7A0B;&#x8BFB;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E0D;&#x53EF;&#x5199;&#xFF0C;&#x4F46;&#x53EF;&#x8BFB;&#x3002;</p>
<h1 id="&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;-&#x4EA4;&#x4E92;"><a href="#&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;-&#x4EA4;&#x4E92;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;/&#x4EA4;&#x4E92;"></a>&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;/&#x4EA4;&#x4E92;</h1><p>&#x7EBF;&#x7A0B;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x79C1;&#x6709;&#x7A7A;&#x95F4;&#xFF0C;&#x4F46;&#x5F53;&#x6211;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x76F8;&#x4E92;&#x534F;&#x4F5C;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x65B9;&#xFF0C;&#x672C;&#x8282;&#x5C06;&#x4ECB;&#x7ECD;Java&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x7684;&#x51E0;&#x79CD;&#x901A;&#x4FE1;&#x539F;&#x7406;&#x3002;</p>
<h2 id="&#x9501;&#x4E0E;&#x540C;&#x6B65;"><a href="#&#x9501;&#x4E0E;&#x540C;&#x6B65;" class="headerlink" title="&#x9501;&#x4E0E;&#x540C;&#x6B65;"></a>&#x9501;&#x4E0E;&#x540C;&#x6B65;</h2><p>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x4E3B;&#x8981;&#x662F;&#x5BF9;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x52A0;&#x9501;&#xFF0C;&#x5373;&#x7528;<code>synchronized</code>&#x5173;&#x952E;&#x5B57;&#x5BF9;&#x5BF9;&#x8C61;&#x6216;&#x8005;&#x4EE3;&#x7801;&#x5757;&#x52A0;&#x9501;<code>lock</code>&#xFF0C;&#x6765;&#x8FBE;&#x6210;&#x7EBF;&#x7A0B;&#x95F4;&#x901A;&#x4FE1;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x53EF;&#x8BE6;&#x89C1;&#x4E0A;&#x4E00;&#x8282;&#x7EBF;&#x7A0B;&#x540C;&#x6B65;&#x4E2D;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<h2 id="&#x7B49;&#x5F85;-&#x901A;&#x77E5;&#x673A;&#x5236;"><a href="#&#x7B49;&#x5F85;-&#x901A;&#x77E5;&#x673A;&#x5236;" class="headerlink" title="&#x7B49;&#x5F85;/&#x901A;&#x77E5;&#x673A;&#x5236;"></a>&#x7B49;&#x5F85;/&#x901A;&#x77E5;&#x673A;&#x5236;</h2><p>&#x57FA;&#x4E8E;&#x201C;&#x9501;&#x201D;&#x7684;&#x65B9;&#x5F0F;&#x9700;&#x8981;&#x7EBF;&#x7A0B;&#x4E0D;&#x65AD;&#x53BB;&#x5C1D;&#x8BD5;&#x83B7;&#x5F97;&#x9501;&#xFF0C;&#x8FD9;&#x4F1A;&#x8017;&#x8D39;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;&#x3002;</p>
<p>Java&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x7B49;&#x5F85;/&#x901A;&#x77E5;&#x673A;&#x5236;&#x662F;&#x57FA;&#x4E8E;<code>Object</code>&#x7C7B;&#x7684;<code>wait()</code>&#x65B9;&#x6CD5;&#x548C;<code>notify()</code>, <code>notifyAll()</code>&#x65B9;&#x6CD5;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;</p>
<p><code>wait()</code>&#x65B9;&#x6CD5;&#x548C;<code>notify()</code>&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x5199;&#x5728;synchronized&#x4EE3;&#x7801;&#x5757;&#x91CC;&#x9762;&#xFF1A;</p>
<p><code>wait()</code>&#x548C;<code>notify()</code>&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x83B7;&#x53D6;&#x7684;&#x9501;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;wait&#x5C31;&#x662F;&#x7EBF;&#x7A0B;&#x5728;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x9501;&#x540E;&#xFF0C;&#x4E3B;&#x52A8;&#x91CA;&#x653E;&#x5BF9;&#x8C61;&#x9501;&#xFF0C;&#x540C;&#x65F6;&#x4F11;&#x7720;&#x672C;&#x7EBF;&#x7A0B;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x7684;notify()&#x5524;&#x9192;&#x8BE5;&#x7EBF;&#x7A0B;&#xFF0C;&#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x83B7;&#x53D6;&#x5BF9;&#x8C61;&#x9501;&#xFF0C;&#x5E76;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;&#x76F8;&#x5E94;&#x7684;notify()&#x5C31;&#x662F;&#x5BF9;&#x5BF9;&#x8C61;&#x9501;&#x7684;&#x5524;&#x9192;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x800C;&#x5FC5;&#x987B;&#x653E;&#x5728;&#x52A0;&#x9501;&#x7684;synchronized&#x4EE3;&#x7801;&#x5757;&#x73AF;&#x5883;&#x5185;&#x3002;</p>
<p>notify()&#x65B9;&#x6CD5;&#x4F1A;&#x968F;&#x673A;&#x53EB;&#x9192;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;notifyAll()&#x4F1A;&#x53EB;&#x9192;&#x6240;&#x6709;&#x6B63;&#x5728;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x88AB;&#x5524;&#x9192;&#x7684;&#x7EBF;&#x7A0B;&#x91CD;&#x65B0;&#x5728;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#x4E2D;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7B97;&#x6CD5;&#x6700;&#x7EC8;&#x518D;&#x6B21;&#x88AB;&#x5904;&#x7406;&#x673A;&#x83B7;&#x5F97;&#x5E76;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7ACB;&#x9A6C;&#x91CD;&#x65B0;&#x83B7;&#x5F97;&#x5904;&#x7406;&#x673A;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class mythread {</span><br><span class="line"></span><br><span class="line">    private static Object lock = new Object();</span><br><span class="line"></span><br><span class="line">    static class ThreadA implements Runnable {</span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            synchronized (lock) {</span><br><span class="line">                for (int i = 0; i &lt; 5; i++) {</span><br><span class="line">                    try {</span><br><span class="line">                        System.out.println(&quot;ThreadA: &quot; + i);</span><br><span class="line">                        lock.notify();</span><br><span class="line">                        lock.wait();</span><br><span class="line">                    } catch (InterruptedException e) {</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                lock.notify();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    static class ThreadB implements Runnable {</span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            synchronized (lock) {</span><br><span class="line">                for (int i = 0; i &lt; 5; i++) {</span><br><span class="line">                    try {</span><br><span class="line">                        System.out.println(&quot;ThreadB: &quot; + i);</span><br><span class="line">                        lock.notify();</span><br><span class="line">                        lock.wait();</span><br><span class="line">                    } catch (InterruptedException e) {</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">                lock.notify();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">        new Thread(new ThreadA()).start();</span><br><span class="line">        try {</span><br><span class="line">            Thread.sleep(10000);</span><br><span class="line">        } catch (InterruptedException e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        new Thread(new ThreadB()).start();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="join&#x65B9;&#x6CD5;"><a href="#join&#x65B9;&#x6CD5;" class="headerlink" title="join&#x65B9;&#x6CD5;"></a>join&#x65B9;&#x6CD5;</h2><p><code>join()</code>&#x65B9;&#x6CD5;&#x8BA9;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x9677;&#x5165;&#x201C;&#x7B49;&#x5F85;&#x201D;&#x72B6;&#x6001;&#xFF0C;&#x7B49;join&#x7684;&#x8FD9;&#x4E2A;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x518D;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x3002;</p>
<p>&#x5F53;&#x4E3B;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x5E76;&#x542F;&#x52A8;&#x4E86;&#x8017;&#x65F6;&#x5B50;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x4E3B;&#x7EBF;&#x7A0B;&#x65E9;&#x4E8E;&#x5B50;&#x7EBF;&#x7A0B;&#x7ED3;&#x675F;&#x4E4B;&#x524D;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x7528;join&#x65B9;&#x6CD5;&#x7B49;&#x5B50;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x540E;&#xFF0C;&#x4ECE;&#x800C;&#x8BA9;&#x4E3B;&#x7EBF;&#x7A0B;&#x83B7;&#x5F97;&#x5B50;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x5904;&#x7406;&#x5B8C;&#x7684;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x3002;</p>
<p>join()&#x65B9;&#x6CD5;&#x53CA;&#x5176;&#x91CD;&#x8F7D;&#x65B9;&#x6CD5;&#x5E95;&#x5C42;&#x90FD;&#x662F;&#x5229;&#x7528;&#x4E86;wait(long)&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class mythread {</span><br><span class="line"></span><br><span class="line">    static class ThreadA implements Runnable {</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            try {</span><br><span class="line">                System.out.println(&quot;&#x5B50;&#x7EBF;&#x7A0B;&#x7761;&#x4E00;&#x79D2;&quot;);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">                System.out.println(&quot;&#x5B50;&#x7EBF;&#x7A0B;&#x7761;&#x5B8C;&#x4E86;&#x4E00;&#x79D2;&quot;);</span><br><span class="line">            } catch (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws InterruptedException {</span><br><span class="line">        Thread thread = new Thread(new ThreadA());</span><br><span class="line">        thread.start();</span><br><span class="line">        thread.join();</span><br><span class="line">        System.out.println(&quot;&#x5982;&#x679C;&#x4E0D;&#x52A0;join&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x884C;&#x5C31;&#x4F1A;&#x5148;&#x6253;&#x5370;&#x51FA;&#x6765;&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="sleep&#x65B9;&#x6CD5;"><a href="#sleep&#x65B9;&#x6CD5;" class="headerlink" title="sleep&#x65B9;&#x6CD5;"></a>sleep&#x65B9;&#x6CD5;</h2><p>sleep&#x65B9;&#x6CD5;&#x662F;Thread&#x7C7B;&#x7684;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x662F;&#x8BA9;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7761;&#x7720;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF1A;</p>
<ul>
<li>Thread.sleep(long)</li>
</ul>
<p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5F3A;&#x8C03;&#x4E00;&#x4E0B;&#xFF1A;**sleep&#x65B9;&#x6CD5;&#x662F;&#x4E0D;&#x4F1A;&#x91CA;&#x653E;&#x5F53;&#x524D;&#x7684;&#x9501;&#x7684;&#xFF0C;&#x800C;wait&#x65B9;&#x6CD5;&#x4F1A;&#x3002;**&#x8FD9;&#x4E5F;&#x662F;&#x6700;&#x5E38;&#x89C1;&#x7684;&#x4E00;&#x4E2A;&#x591A;&#x7EBF;&#x7A0B;&#x9762;&#x8BD5;&#x9898;&#x3002;</p>
<p>sleep&#x65B9;&#x6CD5;&#x548C;wait&#x65B9;&#x6CD5;&#x7684;&#x533A;&#x522B;&#xFF1A;</p>
<ul>
<li>wait&#x53EF;&#x4EE5;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x6307;&#x5B9A;&#xFF1B;&#x800C;sleep&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#x3002;</li>
<li>wait&#x91CA;&#x653E;cpu&#x8D44;&#x6E90;&#xFF0C;&#x540C;&#x65F6;&#x91CA;&#x653E;&#x9501;&#xFF1B;sleep&#x91CA;&#x653E;cpu&#x8D44;&#x6E90;&#xFF0C;&#x4F46;&#x662F;&#x4E0D;&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x6240;&#x4EE5;&#x6613;&#x6B7B;&#x9501;&#x3002;</li>
<li>wait&#x5FC5;&#x987B;&#x653E;&#x5728;&#x540C;&#x6B65;&#x5757;&#x6216;&#x540C;&#x6B65;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x800C;sleep&#x53EF;&#x4EE5;&#x518D;&#x4EFB;&#x610F;&#x4F4D;&#x7F6E;</li>
</ul>
<h2 id="ThreadLocal&#x7C7B;"><a href="#ThreadLocal&#x7C7B;" class="headerlink" title="ThreadLocal&#x7C7B;"></a>ThreadLocal&#x7C7B;</h2><p>ThreadLocal&#x662F;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x7EBF;&#x7A0B;&#x526F;&#x672C;&#x53D8;&#x91CF;&#x5DE5;&#x5177;&#x7C7B;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#x4E3A;&#x7EBF;&#x7A0B;&#x672C;&#x5730;&#x53D8;&#x91CF;&#x6216;&#x7EBF;&#x7A0B;&#x672C;&#x5730;&#x5B58;&#x50A8;&#x3002;&#x4E25;&#x683C;&#x6765;&#x8BF4;&#xFF0C;ThreadLocal&#x7C7B;&#x5E76;&#x4E0D;&#x5C5E;&#x4E8E;&#x591A;&#x7EBF;&#x7A0B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#xFF0C;&#x800C;&#x662F;&#x8BA9;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x6709;&#x81EA;&#x5DF1;&#x201C;&#x72EC;&#x7ACB;&#x201D;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x7EBF;&#x7A0B;&#x4E4B;&#x95F4;&#x4E92;&#x4E0D;&#x5F71;&#x54CD;&#x3002;</p>
<p>ThreadLocal&#x7C7B;&#x6700;&#x5E38;&#x7528;&#x7684;&#x5C31;&#x662F;set&#x65B9;&#x6CD5;&#x548C;get&#x65B9;&#x6CD5;&#x3002;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class mythread {</span><br><span class="line">    static class ThreadA implements Runnable {</span><br><span class="line">        private ThreadLocal&lt;String&gt; threadLocal;</span><br><span class="line"></span><br><span class="line">        public ThreadA(ThreadLocal&lt;String&gt; threadLocal) {</span><br><span class="line">            this.threadLocal = threadLocal;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            threadLocal.set(&quot;A&quot;);</span><br><span class="line">            try {</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line">            } catch (InterruptedException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">            System.out.println(&quot;ThreadA&#x8F93;&#x51FA;&#xFF1A;&quot; + threadLocal.get());</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        public static void main(String[] args) {</span><br><span class="line">            ThreadLocal&lt;String&gt; threadLocal = new ThreadLocal&lt;&gt;();</span><br><span class="line">            new Thread(new ThreadA(threadLocal)).start();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;ThreadA&#x53EF;&#x4EE5;&#x5B58;&#x53D6;&#x81EA;&#x5DF1;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7684;&#x4E00;&#x4E2A;&#x503C;&#x3002;&#x5982;&#x679C;&#x5F00;&#x53D1;&#x8005;&#x5E0C;&#x671B;&#x5C06;&#x7C7B;&#x7684;&#x67D0;&#x4E2A;&#x9759;&#x6001;&#x53D8;&#x91CF;&#xFF08;user ID&#x6216;&#x8005;transaction ID&#xFF09;&#x4E0E;&#x7EBF;&#x7A0B;&#x72B6;&#x6001;&#x5173;&#x8054;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4F7F;&#x7528;ThreadLocal&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5728;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x58F0;&#x660E;&#x4E00;&#x4E2A;&#x79C1;&#x6709;&#x53D8;&#x91CF;&#x6765;&#x64CD;&#x4F5C;&#xFF0C;&#x52A0;&#x201C;&#x91CD;&#x201D;&#x7EBF;&#x7A0B;&#x3002;</p>
<p>InheritableThreadLocal&#x662F;ThreadLocal&#x7684;&#x7EE7;&#x627F;&#x5B50;&#x7C7B;&#xFF0C;&#x4E0D;&#x4EC5;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x5B58;&#x53D6;&#x526F;&#x672C;&#x503C;&#xFF0C;&#x800C;&#x4E14;&#x5B83;&#x7684;&#x5B50;&#x7EBF;&#x7A0B;&#x4E5F;&#x53EF;&#x4EE5;&#x5B58;&#x53D6;&#x8FD9;&#x4E2A;&#x526F;&#x672C;&#x503C;&#x3002;</p>
<h2 id="&#x4FE1;&#x53F7;&#x91CF;&#x673A;&#x5236;"><a href="#&#x4FE1;&#x53F7;&#x91CF;&#x673A;&#x5236;" class="headerlink" title="&#x4FE1;&#x53F7;&#x91CF;&#x673A;&#x5236;"></a>&#x4FE1;&#x53F7;&#x91CF;&#x673A;&#x5236;</h2><p>JDK&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;&#x201C;&#x4FE1;&#x53F7;&#x91CF;&#x201D;&#x529F;&#x80FD;&#x7684;&#x7C7B;<code>Semaphore</code>&#x3002;&#x5728;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF08;&#x8D85;&#x8FC7;2&#x4E2A;&#xFF09;&#x9700;&#x8981;&#x76F8;&#x4E92;&#x5408;&#x4F5C;&#x7684;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x7528;&#x7B80;&#x5355;&#x7684;&#x201C;&#x9501;&#x201D;&#x548C;&#x201C;&#x7B49;&#x5F85;&#x901A;&#x77E5;&#x673A;&#x5236;&#x201D;&#x5C31;&#x4E0D;&#x90A3;&#x4E48;&#x65B9;&#x4FBF;&#x4E86;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x7528;&#x5230;&#x4FE1;&#x53F7;&#x91CF;&#x3002;JDK&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x5F88;&#x591A;&#x591A;&#x7EBF;&#x7A0B;&#x901A;&#x4FE1;&#x5DE5;&#x5177;&#x7C7B;&#x90FD;&#x662F;&#x57FA;&#x4E8E;&#x4FE1;&#x53F7;&#x91CF;&#x6A21;&#x578B;&#x7684;&#x3002;</p>
<h2 id="&#x7BA1;&#x9053;"><a href="#&#x7BA1;&#x9053;" class="headerlink" title="&#x7BA1;&#x9053;"></a>&#x7BA1;&#x9053;</h2><p>&#x7BA1;&#x9053;&#x662F;&#x57FA;&#x4E8E;&#x201C;&#x7BA1;&#x9053;&#x6D41;&#x201D;&#x7684;&#x901A;&#x4FE1;&#x65B9;&#x5F0F;&#x3002;JDK&#x63D0;&#x4F9B;&#x4E86;<code>PipedWriter</code>&#x3001; <code>PipedReader</code>&#x3001; <code>PipedOutputStream</code>&#x3001; <code>PipedInputStream</code>&#x3002;&#x5176;&#x4E2D;&#xFF0C;&#x524D;&#x9762;&#x4E24;&#x4E2A;&#x662F;&#x57FA;&#x4E8E;&#x5B57;&#x7B26;&#x7684;&#xFF0C;&#x540E;&#x9762;&#x4E24;&#x4E2A;&#x662F;&#x57FA;&#x4E8E;&#x5B57;&#x8282;&#x6D41;&#x7684;&#x3002;</p>
<p>&#x5E94;&#x7528;&#x573A;&#x666F;&#xFF1A;&#x7BA1;&#x9053;&#x591A;&#x534A;&#x4E0E;I/O&#x6D41;&#x76F8;&#x5173;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x9700;&#x8981;&#x5148;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x53D1;&#x9001;&#x4E00;&#x4E2A;&#x4FE1;&#x606F;&#xFF08;&#x6BD4;&#x5982;&#x5B57;&#x7B26;&#x4E32;&#xFF09;&#x6216;&#x8005;&#x6587;&#x4EF6;&#x7B49;&#x7B49;&#x65F6;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x7BA1;&#x9053;&#x901A;&#x4FE1;&#x4E86;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class Pipe {</span><br><span class="line">    static class ReaderThread implements Runnable {</span><br><span class="line">        private PipedReader reader;</span><br><span class="line"></span><br><span class="line">        public ReaderThread(PipedReader reader) {</span><br><span class="line">            this.reader = reader;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            System.out.println(&quot;this is reader&quot;);</span><br><span class="line">            int receive = 0;</span><br><span class="line">            try {</span><br><span class="line">                while ((receive = reader.read()) != -1) {</span><br><span class="line">                    System.out.print((char)receive);</span><br><span class="line">                }</span><br><span class="line">            } catch (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    static class WriterThread implements Runnable {</span><br><span class="line"></span><br><span class="line">        private PipedWriter writer;</span><br><span class="line"></span><br><span class="line">        public WriterThread(PipedWriter writer) {</span><br><span class="line">            this.writer = writer;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public void run() {</span><br><span class="line">            System.out.println(&quot;this is writer&quot;);</span><br><span class="line">            int receive = 0;</span><br><span class="line">            try {</span><br><span class="line">                writer.write(&quot;test&quot;);</span><br><span class="line">            } catch (IOException e) {</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            } finally {</span><br><span class="line">                try {</span><br><span class="line">                    writer.close();</span><br><span class="line">                } catch (IOException e) {</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) throws IOException, InterruptedException {</span><br><span class="line">        PipedWriter writer = new PipedWriter();</span><br><span class="line">        PipedReader reader = new PipedReader();</span><br><span class="line">        writer.connect(reader); // &#x8FD9;&#x91CC;&#x6CE8;&#x610F;&#x4E00;&#x5B9A;&#x8981;&#x8FDE;&#x63A5;&#xFF0C;&#x624D;&#x80FD;&#x901A;&#x4FE1;</span><br><span class="line"></span><br><span class="line">        new Thread(new ReaderThread(reader)).start();</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">        new Thread(new WriterThread(writer)).start();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">// &#x8F93;&#x51FA;&#xFF1A;</span><br><span class="line">this is reader</span><br><span class="line">this is writer</span><br><span class="line">test</span><br></pre></td></tr></table></figure>

<h1 id="&#x53C2;&#x8003;&#xFF1A;"><a href="#&#x53C2;&#x8003;&#xFF1A;" class="headerlink" title="&#x53C2;&#x8003;&#xFF1A;"></a>&#x53C2;&#x8003;&#xFF1A;</h1><p><a href="/external_links/aba59d4ad75d385e5a23ced3843e4b21.html" target="blank" rel="noopener">concurrent.redspider.group/</a></p>
<p><a href="/external_links/8d1755b2a589846572556b4fe6593017.html" target="blank" rel="noopener">www.matools.com/api/java8</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/2257559ddaef47b880280a8139dd4366.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007360668735602701.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007360668735602701.html" itemprop="url">Java 多线程   JUC 并发工具原理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T18:20:28+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>&#x9996;&#x5148;&#x5206;&#x4EAB;&#x4E4B;&#x524D;&#x7684;&#x6240;&#x6709;&#x6587;&#x7AE0; , &#x6B22;&#x8FCE;&#x70B9;&#x8D5E;&#x6536;&#x85CF;&#x8F6C;&#x53D1;&#x4E09;&#x8FDE;&#x4E0B;&#x6B21;&#x4E00;&#x5B9A; &gt;&gt;&gt;&gt;</strong> &#x1F61C;&#x1F61C;&#x1F61C;   </p>
<p><strong>&#x6587;&#x7AE0;&#x5408;&#x96C6; :</strong> &#x1F381; <a href="https://dev.newban.cn/6941642435189538824">juejin.cn/post/694164&#x2026;</a>   </p>
<p><strong>Github :</strong> &#x1F449; <a href="/external_links/f4c0695dd8cd8371c2f2fc9edde11029.html" target="blank" rel="noopener">github.com/black-ant</a>  </p>
<p><strong>CASE &#x5907;&#x4EFD; :</strong> &#x1F449; <a href="/external_links/907cd6419accaedf9bfa60f559823d4b.html" target="blank" rel="noopener">gitee.com/antblack/ca&#x2026;</a></p>
</blockquote>
<h2 id="&#x4E00;-&#x524D;&#x8A00;"><a href="#&#x4E00;-&#x524D;&#x8A00;" class="headerlink" title="&#x4E00; . &#x524D;&#x8A00;"></a>&#x4E00; . &#x524D;&#x8A00;</h2><p>&#x8D81;&#x7740;&#x6709;&#x7A7A; , &#x8D76;&#x7D27;&#x628A;&#x4E4B;&#x524D;&#x6B20;&#x7684;&#x503A;&#x8FD8;&#x4E0A; . &#x8FD9;&#x662F;&#x591A;&#x7EBF;&#x7A0B;&#x4E00;&#x9636;&#x6BB5;&#x8BA1;&#x5212;&#x7684;&#x6700;&#x540E;&#x4E00;&#x7BC7; , &#x540E;&#x7EED;&#x591A;&#x7EBF;&#x7A0B;&#x4F1A;&#x8F6C;&#x5165;&#x4FEE;&#x8BA2;&#x548C;&#x6DF1;&#x5165;&#x9636;&#x6BB5; . &#x5F7B;&#x5E95;&#x5403;&#x900F;&#x591A;&#x7EBF;&#x7A0B;.</p>
<h2 id="&#x4E8C;-&#x5DE5;&#x5177;&#x4ECB;&#x7ECD;"><a href="#&#x4E8C;-&#x5DE5;&#x5177;&#x4ECB;&#x7ECD;" class="headerlink" title="&#x4E8C;. &#x5DE5;&#x5177;&#x4ECB;&#x7ECD;"></a>&#x4E8C;. &#x5DE5;&#x5177;&#x4ECB;&#x7ECD;</h2><p>&#x4E4B;&#x524D;&#x8BF4; <a href="https://dev.newban.cn/6939891099243085861">AQS</a> &#x7684;&#x65F6;&#x5019;&#x66FE;&#x7ECF;&#x63D0;&#x5230;&#x8FC7;&#x8FD9;&#x51E0;&#x4E2A;&#x7C7B; , &#x8FD9;&#x51E0;&#x4E2A;&#x7C7B;&#x6709;&#x4E00;&#x4E9B;&#x5404;&#x81EA;&#x7684;&#x7279;&#x70B9; , &#x5F88;&#x7B26;&#x5408;&#x7279;&#x5B9A;&#x7684;&#x573A;&#x666F; , &#x4E4B;&#x524D;&#x5728;&#x751F;&#x4EA7;&#x4E0A;&#x7528;&#x7684;&#x8FD8;&#x633A;&#x8212;&#x670D;.</p>
<p><strong>&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x4F7F;&#x7528;&#x7684;&#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x6709;&#x56DB;&#x79CD; :</strong></p>
<blockquote>
<p>CyclicBarrier : &#x653E;&#x5B66;&#x4E00;&#x8D77;&#x8D70;</p>
</blockquote>
<ul>
<li>&#x5141;&#x8BB8;&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x5230;&#x8FBE;&#x67D0;&#x4E2A;&#x516C;&#x5171;&#x5C4F;&#x969C;&#x70B9; (common barrier point)</li>
<li>&#x8BA9;&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;&#x4E00;&#x4E2A;&#x5C4F;&#x969C;&#x65F6;&#x88AB;&#x963B;&#x585E;&#xFF0C;&#x76F4;&#x5230;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;&#x5C4F;&#x969C;&#x65F6;&#xFF0C;&#x5C4F;&#x969C;&#x624D;&#x4F1A;&#x5F00;&#x95E8;&#xFF0C;&#x6240;&#x6709;&#x88AB;&#x5C4F;&#x969C;&#x62E6;&#x622A;&#x7684;&#x7EBF;&#x7A0B;&#x624D;&#x4F1A;&#x7EE7;&#x7EED;&#x5E72;&#x6D3B;</li>
</ul>
<blockquote>
<p>CountDownLatch : &#x7B49;&#x4EBA;&#x5230;&#x9F50;&#x4E86;&#x5C31;&#x89E6;&#x53D1;</p>
</blockquote>
<ul>
<li>&#x5728;&#x5B8C;&#x6210;&#x4E00;&#x7EC4;&#x6B63;&#x5728;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x7B49;&#x5F85;</li>
<li>&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x8BA1;&#x6570; &#x521D;&#x59CB;&#x5316; CountDownLatch&#x3002;</li>
<li>&#x7531;&#x4E8E;&#x8C03;&#x7528;&#x4E86; countDown() &#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5F53;&#x524D;&#x8BA1;&#x6570;&#x5230;&#x8FBE;&#x96F6;&#x4E4B;&#x524D;&#xFF0C;await &#x65B9;&#x6CD5;&#x4F1A;&#x4E00;&#x76F4;&#x53D7;&#x963B;&#x585E;&#x3002;</li>
<li>&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;await &#x7684;&#x6240;&#x6709;&#x540E;&#x7EED;&#x8C03;&#x7528;&#x90FD;&#x5C06;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002;&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#x53EA;&#x51FA;&#x73B0;&#x4E00;&#x6B21;&#x2014;&#x2014;&#x8BA1;&#x6570;&#x65E0;&#x6CD5;&#x88AB;&#x91CD;&#x7F6E;&#x3002;</li>
<li>CountDownLatch&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5728;new &#x4E00;&#x4E2A;CountDownLatch&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5E26;&#x5165;&#x8BE5;&#x8BA1;&#x6570;&#x5668;&#x503C;&#xFF0C;&#x8BE5;&#x503C;&#x5C31;&#x8868;&#x793A;&#x4E86;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x91CF;&#x3002;</li>
<li>&#x6BCF;&#x5F53;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;&#x5C31;&#x4F1A;&#x51CF;1&#x3002;&#x5F53;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;&#x53D8;&#x4E3A;0&#x65F6;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;&#x5747;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#x4EFB;&#x52A1;</li>
</ul>
<blockquote>
<p>Semaphore</p>
</blockquote>
<ul>
<li>&#x4FE1;&#x53F7;&#x91CF;Semaphore&#x662F;&#x4E00;&#x4E2A;&#x63A7;&#x5236;&#x8BBF;&#x95EE;&#x591A;&#x4E2A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x7684;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x548C;CountDownLatch&#x4E00;&#x6837;&#xFF0C;&#x5176;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x201C;&#x5171;&#x4EAB;&#x9501;&#x201D;&#x3002;</li>
</ul>
<blockquote>
<p>Exchanger</p>
</blockquote>
<ul>
<li>&#x53EF;&#x4EE5;&#x5728;&#x5BF9;&#x4E2D;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x914D;&#x5BF9;&#x548C;&#x4EA4;&#x6362;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x540C;&#x6B65;&#x70B9;</li>
<li>&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C06;&#x6761;&#x76EE;&#x4E0A;&#x7684;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x5448;&#x73B0;&#x7ED9; exchange &#x65B9;&#x6CD5;&#xFF0C;&#x4E0E;&#x4F19;&#x4F34;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5339;&#x914D;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x8FD4;&#x56DE;&#x65F6;&#x63A5;&#x6536;&#x5176;&#x4F19;&#x4F34;&#x7684;&#x5BF9;&#x8C61; , Exchanger &#x53EF;&#x80FD;&#x88AB;&#x89C6;&#x4E3A; SynchronousQueue &#x7684;&#x53CC;&#x5411;&#x5F62;&#x5F0F;</li>
</ul>
<h2 id="&#x4E09;-&#x539F;&#x7406;&#x89E3;&#x6790;"><a href="#&#x4E09;-&#x539F;&#x7406;&#x89E3;&#x6790;" class="headerlink" title="&#x4E09; .&#x539F;&#x7406;&#x89E3;&#x6790;"></a>&#x4E09; .&#x539F;&#x7406;&#x89E3;&#x6790;</h2><h3 id="3-1-CyclicBarrier"><a href="#3-1-CyclicBarrier" class="headerlink" title="3 .1 CyclicBarrier"></a>3 .1 CyclicBarrier</h3><blockquote>
<p>&#x4F5C;&#x7528; :<br>&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x7EC4;&#x7EBF;&#x7A0B;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x76F4;&#x5230;&#x5230;&#x8FBE;&#x67D0;&#x4E2A;&#x516C;&#x5171;&#x5C4F;&#x969C;&#x70B9; (Common Barrier Point)&#x3002;&#x5728;&#x6D89;&#x53CA;&#x4E00;&#x7EC4;&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E9B;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x4E0D;&#x65F6;&#x5730;&#x4E92;&#x76F8;&#x7B49;&#x5F85;&#xFF0C;&#x6B64;&#x65F6; CyclicBarrier &#x5F88;&#x6709;&#x7528;&#x3002;<strong>&#x56E0;&#x4E3A;&#x8BE5; Barrier &#x5728;&#x91CA;&#x653E;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#x540E;&#x53EF;&#x4EE5;&#x91CD;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x79F0;&#x5B83;&#x4E3A;&#x5FAA;&#x73AF;( Cyclic ) &#x7684; &#x5C4F;&#x969C;( Barrier )</strong> &#x3002;</p>
</blockquote>
<blockquote>
<p>&#x5185;&#x90E8;&#x539F;&#x7406; :<br>&#x5185;&#x90E8;&#x4F7F;&#x7528;&#x91CD;&#x5165;&#x9501;ReentrantLock &#x548C; Condition</p>
</blockquote>
<blockquote>
<p>&#x6784;&#x9020;&#x51FD;&#x6570; :</p>
</blockquote>
<ul>
<li>CyclicBarrier(int parties)&#xFF1A;</li>
</ul>
<pre><code>+ &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; CyclicBarrier&#xFF0C;&#x5B83;&#x5C06;&#x5728;&#x7ED9;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#xFF08;&#x7EBF;&#x7A0B;&#xFF09;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#x65F6;&#x542F;&#x52A8;&#xFF0C;
+ &#x4F46;&#x5B83;&#x4E0D;&#x4F1A;&#x5728;&#x542F;&#x52A8; barrier &#x65F6;&#x6267;&#x884C;&#x9884;&#x5B9A;&#x4E49;&#x7684;&#x64CD;&#x4F5C;&#x3002;</code></pre><ul>
<li>CyclicBarrier(int parties, Runnable barrierAction) &#xFF1A;</li>
</ul>
<pre><code>+ &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684; CyclicBarrier&#xFF0C;&#x5B83;&#x5C06;&#x5728;&#x7ED9;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x53C2;&#x4E0E;&#x8005;&#xFF08;&#x7EBF;&#x7A0B;&#xFF09;&#x5904;&#x4E8E;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#x65F6;&#x542F;&#x52A8;&#xFF0C;
+ &#x5E76;&#x5728;&#x542F;&#x52A8; barrier &#x65F6;&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x7684;&#x5C4F;&#x969C;&#x64CD;&#x4F5C;&#xFF0C;&#x8BE5;&#x64CD;&#x4F5C;&#x7531;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8FDB;&#x5165; barrier &#x7684;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x3002;</code></pre><blockquote>
<p>&#x4F7F;&#x7528;&#x53D8;&#x91CF; :</p>
</blockquote>
<ul>
<li>parties &#x53D8;&#x91CF; : &#x8868;&#x793A;&#x62E6;&#x622A;&#x7EBF;&#x7A0B;&#x7684;&#x603B;&#x6570;&#x91CF;&#x3002;</li>
<li>count &#x53D8;&#x91CF; : &#x8868;&#x793A;&#x62E6;&#x622A;&#x7EBF;&#x7A0B;&#x7684;&#x5269;&#x4F59;&#x9700;&#x8981;&#x6570;&#x91CF;&#x3002;</li>
<li>barrierAction &#x53D8;&#x91CF; : &#x4E3A; CyclicBarrier &#x63A5;&#x6536;&#x7684; Runnable &#x547D;&#x4EE4;&#xFF0C;&#x7528;&#x4E8E;&#x5728;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;&#x5C4F;&#x969C;&#x65F6;&#xFF0C;&#x4F18;&#x5148;&#x6267;&#x884C; barrierAction &#xFF0C;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x7684;&#x4E1A;&#x52A1;&#x573A;&#x666F;&#x3002;</li>
<li>generation &#x53D8;&#x91CF; : &#x8868;&#x793A; CyclicBarrier &#x7684;&#x66F4;&#x65B0;&#x6362;&#x4EE3;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5E38;&#x7528;&#x65B9;&#x6CD5; : </span><br><span class="line">M- await : &#x7B49;&#x5F85;&#x72B6;&#x6001;</span><br><span class="line">M- await(long timeout, TimeUnit unit)&#xA0;: &#x7B49;&#x5F85;&#x8D85;&#x65F6;</span><br><span class="line">M- dowait</span><br><span class="line">    - &#x8BE5;&#x65B9;&#x6CD5;&#x7B2C;&#x4E00;&#x6B65;&#x4F1A;&#x8BD5;&#x7740;&#x83B7;&#x53D6;&#x9501; </span><br><span class="line">    - &#x5982;&#x679C;&#x5206;&#x4EE3;&#x5DF2;&#x7ECF;&#x635F;&#x574F;&#xFF0C;&#x629B;&#x51FA;&#x5F02;&#x5E38;</span><br><span class="line">    - &#x5982;&#x679C;&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;&#xFF0C;&#x7EC8;&#x6B62;CyclicBarrier</span><br><span class="line">    - &#x8FDB;&#x6765;&#x7EBF;&#x7A0B; &#xFF0C;--count </span><br><span class="line">    - count == 0 &#x8868;&#x793A;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x5747;&#x5DF2;&#x5230;&#x4F4D;&#xFF0C;&#x89E6;&#x53D1;Runnable&#x4EFB;&#x52A1;</span><br><span class="line">    - &#x5524;&#x9192;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7EBF;&#x7A0B;&#xFF0C;&#x5E76;&#x66F4;&#x65B0;generation</span><br><span class="line">    &gt; &#x8DF3;&#x51FA;&#x7B49;&#x5F85;&#x72B6;&#x6001;&#x7684;&#x65B9;&#x6CD5;</span><br><span class="line">        - &#x6700;&#x540E;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5230;&#x8FBE;&#xFF0C;&#x5373;index == 0</span><br><span class="line">        - &#x8D85;&#x51FA;&#x4E86;&#x6307;&#x5B9A;&#x65F6;&#x95F4;&#xFF08;&#x8D85;&#x65F6;&#x7B49;&#x5F85;&#xFF09;</span><br><span class="line">        - &#x5176;&#x4ED6;&#x7684;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;</span><br><span class="line">        - &#x5176;&#x4ED6;&#x7684;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#x65AD;&#x53E6;&#x4E00;&#x4E2A;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;</span><br><span class="line">        - &#x5176;&#x4ED6;&#x7684;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x7B49;&#x5F85;barrier&#x8D85;&#x65F6;</span><br><span class="line">        - &#x5176;&#x4ED6;&#x7684;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x5728;&#x6B64;barrier&#x8C03;&#x7528;reset()&#x65B9;&#x6CD5;&#x3002;reset()&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x5C06;&#x5C4F;&#x969C;&#x91CD;&#x7F6E;&#x4E3A;&#x521D;&#x59CB;&#x72B6;&#x6001;&#x3002;</span><br><span class="line">SC- Generation : &#x63CF;&#x8FF0;&#x4E86; CyclicBarrier &#x7684;&#x66F4;&#x65B0;&#x6362;&#x4EE3;&#x3002;</span><br><span class="line">    - &#x5728;CyclicBarrier&#x4E2D;&#xFF0C;&#x540C;&#x4E00;&#x6279;&#x7EBF;&#x7A0B;&#x5C5E;&#x4E8E;&#x540C;&#x4E00;&#x4EE3;&#x3002;</span><br><span class="line">    - &#x5F53;&#x6709;&#xA0;parties&#xA0;&#x4E2A;&#x7EBF;&#x7A0B;&#x5168;&#x90E8;&#x5230;&#x8FBE; barrier &#x65F6;&#xFF0C;generation&#xA0;&#x5C31;&#x4F1A;&#x88AB;&#x66F4;&#x65B0;&#x6362;&#x4EE3;&#x3002;</span><br><span class="line">    - &#x5176;&#x4E2D;&#xA0;broken&#xA0;&#x5C5E;&#x6027;&#xFF0C;&#x6807;&#x8BC6;&#x8BE5;&#x5F53;&#x524D; CyclicBarrier &#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x5904;&#x4E8E;&#x4E2D;&#x65AD;&#x72B6;&#x6001;</span><br><span class="line">M- breakBarrier : &#x7EC8;&#x6B62;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;</span><br><span class="line">M- nextGeneration : &#x66F4;&#x65B0;&#x6362;&#x4EE3;&#x64CD;&#x4F5C;</span><br><span class="line">	- 1. &#x5524;&#x9192;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x3002;</span><br><span class="line">	- 2. &#x91CD;&#x7F6E;&#xA0;count&#xA0;&#x3002;</span><br><span class="line">	- 3. &#x91CD;&#x7F6E;&#xA0;generation&#xA0;&#x3002;</span><br><span class="line">M- reset : &#x91CD;&#x7F6E; barrier &#x5230;&#x521D;&#x59CB;&#x5316;&#x72B6;&#x6001; </span><br><span class="line">M- getNumberWaiting : &#x83B7;&#x5F97;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#x6570;</span><br><span class="line">M- &#x5224;&#x65AD; CyclicBarrier &#x662F;&#x5426;&#x5904;&#x4E8E;&#x4E2D;&#x65AD;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/47338f0240c3aaf9671a91ff3e82e05a1550a9841b857da8256c09855e441cb3" alt="CyclicBarrier.jpg"></p>
<blockquote>
<p>&#x4F7F;&#x7528;&#x6848;&#x4F8B; :</p>
</blockquote>
<p><a href="/external_links/002241a4b882a6ef7118ef0b48a3f6eb.html" target="blank" rel="noopener">Gitee CyclicBarrier &#x4F7F;&#x7528;</a></p>
<blockquote>
<p>&#x95EE;&#x9898;&#x8865;&#x5145; :</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;</span><br><span class="line">// &#x95EE;&#x9898;&#x4E00; : &#x62E6;&#x622A;&#x7684;&#x6838;&#x5FC3;</span><br><span class="line">1. &#x4F20;&#x5165;&#x603B;&#x5F97; Count &#x6570;</span><br><span class="line">2. &#x6BCF;&#x6B21;&#x8FDB;&#x6765;&#x90FD;&#x4F1A; --count , &#x540C;&#x65F6;&#x5224;&#x65AD; count ==0 </span><br><span class="line">3. &#x5982;&#x679C;&#x4E0D;&#x4E3A; 0 ,&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5C31;&#x4F1A;&#x963B;&#x585E;</span><br><span class="line"></span><br><span class="line">// &#x95EE;&#x9898;&#x4E8C; : &#x6D89;&#x53CA;&#x6E90;&#x7801;</span><br><span class="line">private final ReentrantLock lock = new ReentrantLock();</span><br><span class="line">private final Condition trip = lock.newCondition();</span><br></pre></td></tr></table></figure>

<h3 id="3-2-CountDownLatch"><a href="#3-2-CountDownLatch" class="headerlink" title="3.2 CountDownLatch"></a>3.2 CountDownLatch</h3><p>&#x5728;&#x5B8C;&#x6210;&#x4E00;&#x7EC4;&#x6B63;&#x5728;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x4E2D;&#x6267;&#x884C;&#x7684;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E00;&#x76F4;&#x7B49;&#x5F85;</p>
<p>&#x7528;&#x7ED9;&#x5B9A;&#x7684;&#x8BA1;&#x6570; &#x521D;&#x59CB;&#x5316; CountDownLatch&#x3002;&#x7531;&#x4E8E;&#x8C03;&#x7528;&#x4E86; countDown() &#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x5728;&#x5F53;&#x524D;&#x8BA1;&#x6570;&#x5230;&#x8FBE;&#x96F6;&#x4E4B;&#x524D;&#xFF0C;<strong>await &#x65B9;&#x6CD5;&#x4F1A;&#x4E00;&#x76F4;&#x53D7;&#x963B;&#x585E;</strong>&#x3002;&#x4E4B;&#x540E;&#xFF0C;&#x4F1A;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;await &#x7684;&#x6240;&#x6709;&#x540E;&#x7EED;&#x8C03;&#x7528;&#x90FD;&#x5C06;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002;<strong>&#x8FD9;&#x79CD;&#x73B0;&#x8C61;&#x53EA;&#x51FA;&#x73B0;&#x4E00;&#x6B21;, &#x8BA1;&#x6570;&#x65E0;&#x6CD5;&#x88AB;&#x91CD;&#x7F6E;&#x3002;&#x5982;&#x679C;&#x9700;&#x8981;&#x91CD;&#x7F6E;&#x8BA1;&#x6570;&#xFF0C;&#x8BF7;&#x8003;&#x8651;&#x4F7F;&#x7528; CyclicBarrier</strong>&#x3002;</p>
<p>CountDownLatch&#x662F;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x5F53;&#x6211;&#x4EEC;&#x5728;new &#x4E00;&#x4E2A;CountDownLatch&#x5BF9;&#x8C61;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5E26;&#x5165;&#x8BE5;&#x8BA1;&#x6570;&#x5668;&#x503C;&#xFF0C;&#x8BE5;&#x503C;&#x5C31;&#x8868;&#x793A;&#x4E86;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x91CF;&#x3002;&#x6BCF;&#x5F53;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5B8C;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x4EFB;&#x52A1;&#x540E;&#xFF0C;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;&#x5C31;&#x4F1A;&#x51CF;1&#x3002;&#x5F53;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;&#x53D8;&#x4E3A;0&#x65F6;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x6240;&#x6709;&#x7684;&#x7EBF;&#x7A0B;&#x5747;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#x4EFB;&#x52A1;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5185;&#x90E8;&#x4E3B;&#x8981;&#x65B9;&#x6CD5;</span><br><span class="line">&gt; CountDownLatch&#x5185;&#x90E8;&#x4F9D;&#x8D56;Sync&#x5B9E;&#x73B0;&#xFF0C;&#x800C;Sync&#x7EE7;&#x627F;AQS</span><br><span class="line"></span><br><span class="line">&gt; sync :</span><br><span class="line">    : tryAcquireShared &#x83B7;&#x53D6;&#x540C;&#x6B65;&#x72B6;&#x6001;</span><br><span class="line">    : tryReleaseShared &#x91CA;&#x653E;&#x540C;&#x6B65;&#x72B6;&#x6001;</span><br><span class="line">	</span><br><span class="line">&gt; await() :</span><br><span class="line">    &#x4F7F;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x5728;&#x9501;&#x5B58;&#x5668;&#x5012;&#x8BA1;&#x6570;&#x81F3;&#x96F6;&#x4E4B;&#x524D;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#xFF0C;&#x9664;&#x975E;&#x7EBF;&#x7A0B;&#x88AB;&#x4E2D;&#x65AD;</span><br><span class="line">    : sync.acquireSharedInterruptibly(1);</span><br><span class="line">    : &#x5185;&#x90E8;&#x4F7F;&#x7528;AQS&#x7684;acquireSharedInterruptibly(int arg)</span><br><span class="line">	</span><br><span class="line">&gt; getState()</span><br><span class="line">    : &#x83B7;&#x53D6;&#x540C;&#x6B65;&#x72B6;&#x6001;&#xFF0C;&#x5176;&#x503C;&#x7B49;&#x4E8E;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x503C;</span><br><span class="line">    : &#x4ECE;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5982;&#x679C;&#x8BA1;&#x6570;&#x5668;&#x503C;&#x4E0D;&#x7B49;&#x4E8E;0&#xFF0C;&#x5219;&#x4F1A;&#x8C03;&#x7528;doAcquireSharedInterruptibly(int arg)</span><br><span class="line"></span><br><span class="line">&gt; doAcquireSharedInterruptibly</span><br><span class="line">    : &#x81EA;&#x65CB;&#x65B9;&#x6CD5;&#x4F1A;&#x5C1D;&#x8BD5;&#x4E00;&#x76F4;&#x53BB;&#x83B7;&#x53D6;&#x540C;&#x6B65;&#x72B6;&#x6001;</span><br><span class="line">	</span><br><span class="line">&gt; countDown</span><br><span class="line">    : CountDownLatch&#x63D0;&#x4F9B;countDown() &#x65B9;&#x6CD5;&#x9012;&#x51CF;&#x9501;&#x5B58;&#x5668;&#x7684;&#x8BA1;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x8BA1;&#x6570;&#x5230;&#x8FBE;&#x96F6;&#xFF0C;&#x5219;&#x91CA;&#x653E;&#x6240;&#x6709;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;</span><br><span class="line">    : &#x5185;&#x90E8;&#x8C03;&#x7528;AQS&#x7684;releaseShared(int arg)&#x65B9;&#x6CD5;&#x6765;&#x91CA;&#x653E;&#x5171;&#x4EAB;&#x9501;&#x540C;&#x6B65;&#x72B6;&#x6001;</span><br><span class="line">    : tryReleaseShared(int arg)&#x65B9;&#x6CD5;&#x88AB;CountDownLatch&#x7684;&#x5185;&#x90E8;&#x7C7B;Sync&#x91CD;&#x5199;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/185b78b30ce37dd5dbc3403de09b89d8c2f1b33d59885d6ea17be27a6c5b30a5" alt="CountDownLatch.jpg"></p>
<blockquote>
<p>&#x53C2;&#x8003;&#x6848;&#x4F8B;</p>
</blockquote>
<p><a href="/external_links/002241a4b882a6ef7118ef0b48a3f6eb.html" target="blank" rel="noopener">Gitee CountDownLatch &#x4F7F;&#x7528;</a></p>
<blockquote>
<p>&#x603B;&#x7ED3;<br>CountDownLatch &#x5185;&#x90E8;&#x901A;&#x8FC7;&#x5171;&#x4EAB;&#x9501;&#x5B9E;&#x73B0;&#x3002;&#x5728;&#x521B;&#x5EFA;CountDownLatch&#x5B9E;&#x4F8B;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x4F20;&#x9012;&#x4E00;&#x4E2A;int&#x578B;&#x7684;&#x53C2;&#x6570;&#xFF1A;count&#xFF0C;&#x8BE5;&#x53C2;&#x6570;&#x4E3A;&#x8BA1;&#x6570;&#x5668;&#x7684;&#x521D;&#x59CB;&#x503C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x8BE5;&#x5171;&#x4EAB;&#x9501;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x7684;&#x603B;&#x6B21;&#x6570;&#x3002;</p>
</blockquote>
<p><strong>&#x5F53;&#x67D0;&#x4E2A;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;await()&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x7A0B;&#x5E8F;&#x9996;&#x5148;&#x5224;&#x65AD;count&#x7684;&#x503C;&#x662F;&#x5426;&#x4E3A;0&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x4F1A;0&#x7684;&#x8BDD;&#x5219;&#x4F1A;&#x4E00;&#x76F4;&#x7B49;&#x5F85;&#x76F4;&#x5230;&#x4E3A;0&#x4E3A;&#x6B62; (<strong>PS : &#x53EF;&#x4EE5;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x8C03;&#x7528; await</strong>)</p>
<p><strong>&#x5F53;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;countDown()&#x65B9;&#x6CD5;&#x65F6;</strong>&#xFF0C;&#x5219;&#x6267;&#x884C;&#x91CA;&#x653E;&#x5171;&#x4EAB;&#x9501;&#x72B6;&#x6001;&#xFF0C;&#x4F7F;count&#x503C; &#x2013; 1 (<strong>PS :countDown &#x5E76;&#x4E0D;&#x4F1A;&#x963B;&#x585E;</strong>)</p>
<p>&#x5F53;&#x5728;&#x521B;&#x5EFA;CountDownLatch&#x65F6;&#x521D;&#x59CB;&#x5316;&#x7684;count&#x53C2;&#x6570;&#xFF0C;<strong>&#x5FC5;&#x987B;&#x8981;&#x6709;count&#x7EBF;&#x7A0B;&#x8C03;&#x7528;countDown&#x65B9;&#x6CD5;&#x624D;&#x4F1A;&#x4F7F;&#x8BA1;&#x6570;&#x5668;count&#x7B49;&#x4E8E;0&#xFF0C;&#x9501;&#x624D;&#x4F1A;&#x91CA;&#x653E;&#xFF0C;&#x524D;&#x9762;&#x7B49;&#x5F85;&#x7684;&#x7EBF;&#x7A0B;&#x624D;&#x4F1A;&#x7EE7;&#x7EED;&#x8FD0;&#x884C;</strong>&#x3002;&#x6CE8;&#x610F;CountDownLatch&#x4E0D;&#x80FD;&#x56DE;&#x6EDA;&#x91CD;&#x7F6E;</p>
<h3 id="3-3-Semaphore"><a href="#3-3-Semaphore" class="headerlink" title="3 .3 Semaphore"></a>3 .3 Semaphore</h3><blockquote>
<p>&#x57FA;&#x7840;&#x70B9;<br>&#x4FE1;&#x53F7;&#x91CF;Semaphore&#x662F;&#x4E00;&#x4E2A;&#x63A7;&#x5236;&#x8BBF;&#x95EE;&#x591A;&#x4E2A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x7684;&#x8BA1;&#x6570;&#x5668;&#xFF0C;&#x548C;CountDownLatch&#x4E00;&#x6837;&#xFF0C;<strong>&#x5176;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x201C;&#x5171;&#x4EAB;&#x9501;&#x201D;</strong>&#x3002;</p>
</blockquote>
<p>&#x4ECE;&#x6982;&#x5FF5;&#x4E0A;&#x8BB2;&#xFF0C;&#x4FE1;&#x53F7;&#x91CF;&#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;&#x96C6;&#x3002;<strong>&#x5982;&#x6709;&#x5FC5;&#x8981;&#xFF0C;&#x5728;&#x8BB8;&#x53EF;&#x53EF;&#x7528;&#x524D;&#x4F1A;&#x963B;&#x585E;&#x6BCF;&#x4E00;&#x4E2A; acquire()&#xFF0C;&#x7136;&#x540E;&#x518D;&#x83B7;&#x53D6;&#x8BE5;&#x8BB8;&#x53EF;</strong>&#x3002;&#x6BCF;&#x4E2A; release() &#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x80FD;&#x91CA;&#x653E;&#x4E00;&#x4E2A;&#x6B63;&#x5728;&#x963B;&#x585E;&#x7684;&#x83B7;&#x53D6;&#x8005;&#x3002;</p>
<p>Semaphore &#x901A;&#x5E38;&#x7528;&#x4E8E;&#x9650;&#x5236;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x67D0;&#x4E9B;&#x8D44;&#x6E90;&#xFF08;&#x7269;&#x7406;&#x6216;&#x903B;&#x8F91;&#x7684;&#xFF09;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x76EE;</p>
<p><strong>&#x5F53;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x60F3;&#x8981;&#x8BBF;&#x95EE;&#x67D0;&#x4E2A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;&#x5B83;&#x5FC5;&#x987B;&#x8981;&#x5148;&#x83B7;&#x53D6;Semaphore&#xFF0C;&#x5F53;Semaphore &gt;0&#x65F6;&#xFF0C;&#x83B7;&#x53D6;&#x8BE5;&#x8D44;&#x6E90;&#x5E76;&#x4F7F;Semaphore &#x2013; 1</strong>&#x3002;&#x5982;&#x679C;Semaphore&#x503C; = 0&#xFF0C;&#x5219;&#x8868;&#x793A;&#x5168;&#x90E8;&#x7684;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x5DF2;&#x7ECF;&#x88AB;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5168;&#x90E8;&#x5360;&#x7528;&#xFF0C;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x8981;&#x7B49;&#x5F85;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x3002;&#x5F53;&#x7EBF;&#x7A0B;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#x65F6;&#xFF0C;Semaphore&#x5219;+1</p>
<blockquote>
<p>&#x5B9E;&#x73B0;&#x7EC6;&#x8282;  </p>
<p>Semaphore&#x63D0;&#x4F9B;&#x4E86;&#x4E24;&#x4E2A;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF1A;</p>
</blockquote>
<ul>
<li>Semaphore(int permits) &#xFF1A;&#x521B;&#x5EFA;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x7684;&#x8BB8;&#x53EF;&#x6570;&#x548C;&#x975E;&#x516C;&#x5E73;&#x7684;&#x516C;&#x5E73;&#x8BBE;&#x7F6E;&#x7684; Semaphore&#x3002;</li>
<li>Semaphore(int permits, boolean fair) &#xFF1A;&#x521B;&#x5EFA;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x7684;&#x8BB8;&#x53EF;&#x6570;&#x548C;&#x7ED9;&#x5B9A;&#x7684;&#x516C;&#x5E73;&#x8BBE;&#x7F6E;&#x7684; Semaphore&#x3002;</li>
</ul>
<p><strong>Semaphore&#x9ED8;&#x8BA4;&#x9009;&#x62E9;&#x975E;&#x516C;&#x5E73;&#x9501;&#x3002;</strong></p>
<p><strong>&#x5F53;&#x4FE1;&#x53F7;&#x91CF;Semaphore = 1 &#x65F6;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5F53;&#x4F5C;&#x4E92;&#x65A5;&#x9501;&#x4F7F;&#x7528;&#x3002;&#x5176;&#x4E2D;0&#x3001;1&#x5C31;&#x76F8;&#x5F53;&#x4E8E;&#x5B83;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5F53;=1&#x65F6;&#x8868;&#x793A;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#xFF0C;&#x5F53;=0&#x65F6;&#xFF0C;&#x6392;&#x4ED6;&#xFF0C;&#x5373;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;&#x8981;&#x7B49;&#x5F85;&#x3002;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;//------ &#x4FE1;&#x53F7;&#x91CF;&#x83B7;&#x53D6;</span><br><span class="line">&gt; acquire()&#x65B9;&#x6CD5;&#x6765;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x8BB8;&#x53EF;</span><br><span class="line">	: &#x5185;&#x90E8;&#x8C03;&#x7528;AQS&#x7684;acquireSharedInterruptibly(int arg)&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x4EE5;&#x5171;&#x4EAB;&#x6A21;&#x5F0F;&#x83B7;&#x53D6;&#x540C;&#x6B65;&#x72B6;&#x6001;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">&gt; &#x516C;&#x5E73; </span><br><span class="line">    : &#x5224;&#x65AD;&#x8BE5;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x4F4D;&#x4E8E;CLH&#x961F;&#x5217;&#x7684;&#x5217;&#x5934;</span><br><span class="line">    : &#x83B7;&#x53D6;&#x5F53;&#x524D;&#x7684;&#x4FE1;&#x53F7;&#x91CF;&#x8BB8;&#x53EF;</span><br><span class="line">    : &#x8BBE;&#x7F6E;&#x201C;&#x83B7;&#x5F97;acquires&#x4E2A;&#x4FE1;&#x53F7;&#x91CF;&#x8BB8;&#x53EF;&#x4E4B;&#x540E;&#xFF0C;&#x5269;&#x4F59;&#x7684;&#x4FE1;&#x53F7;&#x91CF;&#x8BB8;&#x53EF;&#x6570;&#x201D;</span><br><span class="line">    : CAS&#x8BBE;&#x7F6E;&#x4FE1;&#x53F7;&#x91CF;</span><br><span class="line">&gt; &#x975E;&#x516C;&#x5E73;</span><br><span class="line">    : &#x4E0D;&#x9700;&#x8981;&#x5224;&#x65AD;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x662F;&#x5426;&#x4F4D;&#x4E8E;CLH&#x540C;&#x6B65;&#x961F;&#x5217;&#x5217;&#x5934;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p2/raw/master/img/8f4c62f528ff237a01f24ba50902f1ef1e5b554f380f140f0b3d48a1b27f08e1" alt="Semaphore.jpg"></p>
<h3 id="3-4-Exchanger"><a href="#3-4-Exchanger" class="headerlink" title="3 .4 Exchanger"></a>3 .4 Exchanger</h3><p>&#x53EF;&#x4EE5;&#x5728;&#x5BF9;&#x4E2D;&#x5BF9;&#x5143;&#x7D20;&#x8FDB;&#x884C;&#x914D;&#x5BF9;&#x548C;&#x4EA4;&#x6362;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x540C;&#x6B65;&#x70B9;</p>
<p>&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x5C06;&#x6761;&#x76EE;&#x4E0A;&#x7684;&#x67D0;&#x4E2A;&#x65B9;&#x6CD5;&#x5448;&#x73B0;&#x7ED9; exchange &#x65B9;&#x6CD5;&#xFF0C;&#x4E0E;&#x4F19;&#x4F34;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x5339;&#x914D;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x8FD4;&#x56DE;&#x65F6;&#x63A5;&#x6536;&#x5176;&#x4F19;&#x4F34;&#x7684;&#x5BF9;&#x8C61; , Exchanger &#x53EF;&#x80FD;&#x88AB;&#x89C6;&#x4E3A; SynchronousQueue &#x7684;&#x53CC;&#x5411;&#x5F62;&#x5F0F;</p>
<dl><dt>Exchanger&#xFF0C;&#x5B83;&#x5141;&#x8BB8;&#x5728;&#x5E76;&#x53D1;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x4EA4;&#x6362;&#x6570;&#x636E;</dt><dd>&#x5F53;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x90FD;&#x5230;&#x8FBE;&#x540C;&#x6B65;&#x70B9;&#x65F6;&#xFF0C;&#x4ED6;&#x4EEC;&#x4EA4;&#x6362;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x56E0;&#x6B64;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x8FDB;&#x5165;&#x5230;&#x7B2C;&#x4E8C;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x8FDB;&#x5165;&#x5230;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x4E2D;</dd></dl><p><strong>TODO : Exchanger &#x7684;&#x6E90;&#x4EE3;&#x7801;&#x6BD4;&#x8F83;&#x7ED5; ,&#x800C;&#x4E14;&#x8FD9;&#x4E2A;&#x7EC4;&#x4EF6;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x5E76;&#x4E0D;&#x591A; , &#x6240;&#x4EE5;&#x5148;&#x7559;&#x4E2A;&#x5751; , &#x4EE5;&#x540E;&#x9879;&#x76EE;&#x4E0A;&#x771F;&#x7684;&#x6709;&#x573A;&#x666F;&#x4E86;&#x518D;&#x5B9E;&#x9645;&#x4E0A;&#x5206;&#x6790;&#x4E00;&#x4E0B;</strong></p>
<h3 id="3-5-&#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x4F7F;&#x7528;"><a href="#3-5-&#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x4F7F;&#x7528;" class="headerlink" title="3.5 &#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x4F7F;&#x7528;"></a>3.5 &#x5E76;&#x53D1;&#x5DE5;&#x5177;&#x4F7F;&#x7528;</h3><p>@ <a href="/external_links/5bec8028ac871c19a7fc432cf9dd9eab.html" target="blank" rel="noopener">github.com/black-ant/c&#x2026;</a></p>
<h2 id="&#x8865;&#x5145;"><a href="#&#x8865;&#x5145;" class="headerlink" title="&#x8865;&#x5145; :"></a>&#x8865;&#x5145; :</h2><h3 id="CountDownLatch-&#x548C;-CyclicBarrier-&#x5982;&#x4F55;&#x7406;&#x89E3;"><a href="#CountDownLatch-&#x548C;-CyclicBarrier-&#x5982;&#x4F55;&#x7406;&#x89E3;" class="headerlink" title="# CountDownLatch &#x548C; CyclicBarrier &#x5982;&#x4F55;&#x7406;&#x89E3; ?"></a># CountDownLatch &#x548C; CyclicBarrier &#x5982;&#x4F55;&#x7406;&#x89E3; ?</h3><ul>
<li>CyclicBarrier : &#x5C0F;&#x5B66;&#x751F;&#x53BB;&#x90CA;&#x6E38; , &#x8001;&#x5E08;&#x4E0B;&#x8F66;&#x65F6;&#x7EDF;&#x8BA1;&#x4EBA;&#x6570; ,<strong>&#x4EBA;&#x6570;&#x5230;&#x9F50;&#x4E86;&#x624D;&#x80FD;&#x4E00;&#x8D77;&#x53C2;&#x89C2;</strong></li>
<li>CountDownLatch : &#x5E7C;&#x513F;&#x56ED;&#x8001;&#x5E08;&#x9001;&#x5B69;&#x5B50;(ChildThread)&#x653E;&#x5B66; , &#x8D70;&#x4E00;&#x4E2A;&#x8BB0;&#x4E00;&#x4E2A;&#x6570; ,&#x5F53;&#x6240;&#x6709;&#x7684;&#x5B66;&#x751F;&#x653E;&#x5B66;&#x540E; , <strong>&#x8001;&#x5E08;(BossThread)&#x4E0B;&#x73ED;</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x6838;&#x5FC3;&#x89E3;&#x91CA; : </span><br><span class="line">CyclicBarrier &#x5C31;&#x662F;&#x4E00;&#x5835;&#x5899; , &#x4EBA;&#x6570;&#x5230;&#x4E86;&#x6240;&#x6709;&#x7EBF;&#x7A0B;&#x624D;&#x80FD;&#x4E00;&#x8D77;&#x8D8A;&#x8FC7;&#x5899;</span><br><span class="line">CountDownLatch &#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x8BA1;&#x6570;&#x5668; , &#x6570;&#x76EE;&#x5230;&#x4E86;&#x4E3B;&#x7EBF;&#x7A0B;&#x624D;&#x80FD;&#x6267;&#x884C;</span><br><span class="line"></span><br><span class="line">// &#x5176;&#x4ED6;&#x8981;&#x70B9; : </span><br><span class="line">CyclicBarrier &#x53EF;&#x4EE5;&#x91CD;&#x7F6E;&#x8BA1;&#x6570; , CountDownLatch &#x4E0D;&#x53EF;&#x4EE5;</span><br></pre></td></tr></table></figure>

<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p><strong>&#x7EC8;&#x4E8E;&#x8865;&#x4E0A;&#x4E86;&#x6700;&#x540E;&#x4E00;&#x5757;&#x677F; , &#x540E;&#x9762;&#x6765;&#x771F;&#x6B63;&#x7684;&#x6DF1;&#x5165;&#x591A;&#x7EBF;&#x7A0B;&#x770B;&#x770B;&#x5427; , &#x4E89;&#x53D6;&#x65E9;&#x65E5;&#x6210;&#x4E3A;&#x591A;&#x7EBF;&#x7A0B;&#x5927;&#x5E08;&#x6BB5;&#x4F4D;</strong></p>
<h2 id="&#x66F4;&#x65B0;&#x8BB0;&#x5F55;"><a href="#&#x66F4;&#x65B0;&#x8BB0;&#x5F55;" class="headerlink" title="&#x66F4;&#x65B0;&#x8BB0;&#x5F55;"></a>&#x66F4;&#x65B0;&#x8BB0;&#x5F55;</h2><ul>
<li>20210915 : &#x4F18;&#x5316;&#x5E03;&#x5C40;</li>
</ul>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/ade453c2bd1819f5aa2faf07ca5ed208.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007317541181718559.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007317541181718559.html" itemprop="url">Eggjs & Nestjs 简易上手比较 主要实现思路</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T15:32:01+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x4ECA;&#x5E74;&#x4E8C;&#x6708;&#x4EFD;&#x7684;&#x65F6;&#x5019;&#x5FD9;&#x4E8E;&#x591C;&#x5927;&#x7684;&#x6BD5;&#x4E1A;&#x8BBE;&#x8BA1;&#xFF0C;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x5BC6;&#x94A5;&#x7BA1;&#x7406;&#x751F;&#x6210;&#x7684;&#x5C0F;&#x9879;&#x76EE;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/9103a8ca98cc8961fab51822ee4862780df60615f5389313629c1fe658db979f" alt="image.png"><br>&#x5F53;&#x65F6;&#x7684;<a href="/external_links/0aa950bcb944c1c766fc4dcd20d12134.html" target="blank" rel="noopener">&#x524D;&#x7AEF;</a>&#x4F7F;&#x7528;vue-cli + vue3&#x5B9E;&#x73B0;&#xFF0C;<a href="/external_links/3368489dfa3c8fbd28e153abf60eda31.html" target="blank" rel="noopener">&#x540E;&#x7AEF;</a>&#x5F53;&#x65F6;&#x51FA;&#x4E8E;&#x5FEB;&#x901F;&#x5B9E;&#x73B0;&#x529F;&#x80FD;&#xFF0C;&#x7528;Egg.js&#x5F00;&#x53D1;&#x4E86;&#x51FA;&#x6765;&#xFF0C;&#x6700;&#x8FD1;&#x51FA;&#x4E8E;&#x5B66;&#x4E60;&#x7684;&#x76EE;&#x7684;&#xFF0C;&#x5B66;&#x4E60;&#x4E86;&#x4E00;&#x4E0B;Nest.js&#xFF0C;&#x7136;&#x540E;&#x57FA;&#x4E8E;Nest.js&#x6211;&#x628A;&#x4E4B;&#x524D;&#x505A;&#x7684;&#x540E;&#x7AEF;&#x7684;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x53C8;&#x7528;Nest.js<a href="/external_links/ac39974a1952cf63e3f61996d717afe0.html" target="blank" rel="noopener">&#x5B9E;&#x73B0;&#x4E86;&#x4E00;&#x904D;</a>&#x3002;&#x4E8E;&#x662F;&#x501F;&#x7740;&#x5B66;&#x4E60;&#x7684;&#x5951;&#x673A;&#x56DE;&#x987E;&#x4E86;&#x4E00;&#x4E0B;Egg.js&#x60F3;&#x5199;&#x7BC7;&#x6587;&#x7AE0;&#x8C08;&#x4E00;&#x4E0B;&#x81EA;&#x5DF1;&#x5BF9;&#x8FD9;&#x4E24;&#x4E2A;&#x6846;&#x67B6;&#x989D;&#x4F7F;&#x7528;&#x611F;&#x53D7;&#x3002;</p>
<h1 id="&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"><a href="#&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;" class="headerlink" title="&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;"></a>&#x4E3B;&#x8981;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;</h1><p>Egg.js&#x57FA;&#x4E8E;Koa&#x505A;&#x7684;&#x4E8C;&#x6B21;&#x5F00;&#x53D1;&#xFF0C;Nest.js&#x6211;&#x7528;&#x7684;&#x662F;&#x57FA;&#x4E8E;Express&#x5B9E;&#x73B0;&#x7684;&#x7248;&#x672C;&#xFF0C;&#x8FD9;&#x4E8C;&#x8005;&#x7684;&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x4E0A;&#x8FD8;&#x662F;&#x6709;&#x4E9B;&#x5DEE;&#x5F02;&#xFF0C;&#x4F46;&#x6574;&#x4F53;&#x4E0A;&#x90FD;&#x662F;&#x57FA;&#x4E8E;Controller - Service&#x7684;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#x3002;<br>&#x53EF;&#x4EE5;&#x5148;&#x770B;&#x770B;Egg.jsd&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/cb556793fd9a084c5b4b1a1e1cc85be34cc10e6e6d584af211146aa1e3249bb7" alt="image.png"></p>
<p>Egg.js&#x7684;&#x5B9E;&#x73B0;&#x601D;&#x8DEF;&#x8F83;&#x4E3A;&#x7B80;&#x5355;&#xFF0C;&#x540E;&#x7AEF;&#x7684;&#x6240;&#x6709;&#x529F;&#x80FD;&#x6700;&#x540E;&#x90FD;&#x4F1A;&#x7ED1;&#x5B9A;&#x5728;&#x5168;&#x5C40;&#x53D8;&#x91CF;<strong>app</strong>&#x4E0A;&#xFF0C;app&#x5C31;&#x50CF;&#x4E00;&#x4E2A;&#x5DE8;&#x5927;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x5B83;&#x5305;&#x542B;&#x4E86;&#x8DEF;&#x7531;&#xFF0C;&#x63A7;&#x5236;&#x5668;&#xFF0C;&#x670D;&#x52A1;&#xFF0C;&#x6269;&#x5C55;&#xFF0C;&#x4E2D;&#x95F4;&#x4EF6;&#x7B49;&#x7B49;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4E1C;&#x897F;&#x90FD;&#x662F;&#x5168;&#x5C40;&#x7684;&#xFF0C;router.js&#x5219;&#x5145;&#x5F53;&#x4E86;&#x9879;&#x76EE;&#x7684;&#x4E3B;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x81EA;&#x884C;&#x914D;&#x7F6E;&#x6700;&#x7EC8;&#x7ED9;&#x524D;&#x7AEF;&#x8C03;&#x7528;&#x7684;&#x63A5;&#x53E3;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// router.js</span><br><span class="line">const baseURL = &apos;/api&apos;</span><br><span class="line"></span><br><span class="line">module.exports = app =&gt; {</span><br><span class="line">  const {</span><br><span class="line">    router,</span><br><span class="line">    controller,</span><br><span class="line">    middleware,</span><br><span class="line">    config</span><br><span class="line">  } = app;</span><br><span class="line">  const jwt = middleware.jwt(config.jwt);</span><br><span class="line"></span><br><span class="line">  router.get(&apos;/&apos;, controller.home.index);</span><br><span class="line"></span><br><span class="line">  // &#x4E00;&#x4E9B;&#x67E5;&#x8BE2;</span><br><span class="line">  router.get(`${baseURL}/dict/roles`, controller.home.roles);</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  // &#x767B;&#x5F55;</span><br><span class="line">  router.post(`${baseURL}/login`, controller.login.login);</span><br><span class="line"></span><br><span class="line">  // &#x9996;&#x9875;</span><br><span class="line">  router.get(`${baseURL}/dashboard/userroles`, jwt, controller.dashboard.userroles);</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x786E;&#x5B9E;&#x4F1A;&#x8BA9;&#x5F00;&#x53D1;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#xFF0C;&#x6BD4;&#x5982;&#x6211;&#x9700;&#x8981;&#x83B7;&#x53D6;&#x8BF7;&#x6C42;&#x5934;&#x7684;token&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728;app&#x7684;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4E2D;&#x83B7;&#x53D6;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;app&#x7684;&#x529F;&#x80FD;&#x8FC7;&#x4E8E;&#x5E9E;&#x6742;&#x6709;&#x4E00;&#x70B9;&#x81C3;&#x80BF;&#x3002;</p>
<p>Nest.js&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x5927;&#x6982;&#x662F;&#x8FD9;&#x6837;&#x7684;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/453c68a06be8584b8099a39a9471336b9a1ed9c4b1ebdafccc14a94c93460597" alt="image.png"></p>
<p>&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#xFF0C;Nest.js&#x7684;&#x7ED3;&#x6784;&#x53EF;&#x4EE5;&#x8BF4;&#x66F4;&#x6E05;&#x6670;&#x4E00;&#x4E9B;&#xFF0C;main.ts&#x4F5C;&#x4E3A;&#x9879;&#x76EE;&#x7684;&#x5165;&#x53E3;&#x6587;&#x4EF6;&#xFF0C;&#x800C;Nest&#x6BD4;Egg&#x591A;&#x4E00;&#x9879;&#x7684;&#x6982;&#x5FF5;&#x5219;&#x662F;&#x6A21;&#x5757;&#xFF0C;&#x5373;Module - Controller - Service&#x7684;&#x7ED3;&#x6784;&#xFF0C;app.module.ts&#x5BFC;&#x5165;&#x5E76;&#x6574;&#x5408;&#x5404;&#x4E2A;&#x6A21;&#x5757;&#xFF0C;&#x6700;&#x7EC8;&#x5C06;&#x8FD9;&#x4E2A;&#x5927;&#x6A21;&#x5757;&#x7528;&#x4E8E;main.ts&#x4E2D;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// app.module.ts</span><br><span class="line">import { Module } from &apos;@nestjs/common&apos;;</span><br><span class="line">import { SequelizeModule } from &apos;@nestjs/sequelize&apos;;</span><br><span class="line">import { AppController } from &apos;./app.controller&apos;;</span><br><span class="line">import { AppService } from &apos;./app.service&apos;;</span><br><span class="line">import { MailerModule } from &apos;@nestjs-modules/mailer&apos;;</span><br><span class="line">import { PugAdapter } from &apos;@nestjs-modules/mailer/dist/adapters/pug.adapter&apos;;</span><br><span class="line">import { UsersModule } from &apos;./users/users.module&apos;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">@Module({</span><br><span class="line">  imports: [</span><br><span class="line">    SequelizeModule.forRoot({</span><br><span class="line">      dialect: &apos;mysql&apos;,</span><br><span class="line">      host: &apos;127.0.0.1&apos;,</span><br><span class="line">      port: 3306,</span><br><span class="line">      username: &apos;root&apos;,</span><br><span class="line">      password: &apos;1234567&apos;,</span><br><span class="line">      database: &apos;mykms&apos;,</span><br><span class="line">      autoLoadModels: true,</span><br><span class="line">      synchronize: true,</span><br><span class="line">    }),</span><br><span class="line">    MailerModule.forRoot({</span><br><span class="line">    transport: {</span><br><span class="line">        host: &quot;smtp.qq.com&quot;,</span><br><span class="line">        port: &quot;465&quot;,</span><br><span class="line">        auth: {</span><br><span class="line">          user: &quot;1534739331@qq.com&quot;,</span><br><span class="line">          pass: &quot;qaurwlgawczubace&quot;</span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">      defaults: {</span><br><span class="line">        from: &apos;&#x9648;&#x665F; &lt;1534739331@qq.com&gt;&apos;,</span><br><span class="line">      },</span><br><span class="line">    }),</span><br><span class="line">    UsersModule,</span><br><span class="line">    DictModule,</span><br><span class="line">    LoginModule,</span><br><span class="line">    DashboardModule,</span><br><span class="line">    ScheduleModule.forRoot(),</span><br><span class="line">    ...</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">})</span><br><span class="line">export class AppModule {}</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// main.ts</span><br><span class="line">import { NestFactory } from &apos;@nestjs/core&apos;;</span><br><span class="line">import { HttpExceptionFilter } from &apos;./common/filters/http-exception.filter&apos;;</span><br><span class="line">import { TransformInterceptor } from &apos;./common/interceptors/transform.interceptor&apos;;</span><br><span class="line">import { AppModule } from &apos;./app.module&apos;;</span><br><span class="line">import { AuthService } from &apos;src/auth/auth.service&apos;;</span><br><span class="line"></span><br><span class="line">async function bootstrap() {</span><br><span class="line">  const app = await NestFactory.create(AppModule);</span><br><span class="line">  const refAuthService = app.get&lt;AuthService&gt;(AuthService);</span><br><span class="line"></span><br><span class="line">  app.useGlobalInterceptors(new TransformInterceptor(refAuthService));</span><br><span class="line">  app.useGlobalFilters(new HttpExceptionFilter(refAuthService));</span><br><span class="line">  app.setGlobalPrefix(&apos;api&apos;);</span><br><span class="line">  await app.listen(7001);</span><br><span class="line">}</span><br><span class="line">bootstrap();</span><br></pre></td></tr></table></figure>

<p>&#x76F8;&#x8F83;&#x800C;&#x8A00;&#xFF0C;Nest&#x7684;&#x601D;&#x8DEF;&#x548C;&#x7EC4;&#x7EC7;&#x66F4;&#x4E3A;&#x6E05;&#x6670;&#xFF0C;Nest&#x7684;&#x601D;&#x8DEF;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E07;&#x7269;&#x7686;&#x6A21;&#x5757;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x7528;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x4E0D;&#x80FD;&#x5B9E;&#x73B0;&#xFF0C;&#x90A3;&#x5C31;&#x518D;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#xFF0C;Nest&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x601D;&#x8DEF;&#x662F;&#x529F;&#x80FD;&#x7686;&#x88C5;&#x9970;&#xFF0C;&#x8FD9;&#x4E2A;&#x4F1A;&#x5728;&#x540E;&#x9762;&#x518D;&#x8BF4;&#x3002;Nest&#x8FD9;&#x6837;&#x8BBE;&#x8BA1;&#x7684;&#x597D;&#x5904;&#x5F88;&#x660E;&#x663E;&#xFF0C;&#x4EE3;&#x7801;&#x66F4;&#x5BB9;&#x6613;&#x7EC4;&#x7EC7;&#xFF0C;&#x7F3A;&#x70B9;&#x5C31;&#x662F;&#x5982;&#x679C;&#x63A7;&#x5236;&#x4E0D;&#x597D;&#x4F1A;&#x5199;&#x7684;&#x8FC7;&#x4E8E;&#x96F6;&#x6563;&#xFF0C;&#x9664;&#x975E;&#x81EA;&#x5DF1;&#x8BBE;&#x7F6E;&#xFF0C;&#x5F88;&#x591A;&#x4E1C;&#x897F;&#x4E5F;&#x4E0D;&#x662F;&#x5168;&#x5C40;&#x7684;&#xFF0C;&#x6BD4;&#x5982;token&#xFF0C;&#x6211;&#x9700;&#x8981;&#x5728;&#x6BCF;&#x4E00;&#x4E2A;&#x5177;&#x4F53;&#x7684;&#x8BF7;&#x6C42;&#x4E2D;&#x4ECE;&#x5177;&#x4F53;&#x7684;&#x8BF7;&#x6C42;&#x5934;&#x83B7;&#x53D6;&#xFF0C;&#x800C;Egg&#x5C31;&#x53EF;&#x4EE5;&#x4ECE;&#x5168;&#x5C40;app&#x4E2D;&#x83B7;&#x53D6;&#xFF0C;&#x8FD9;&#x4E2A;&#x89C1;&#x4EC1;&#x89C1;&#x667A;&#x5427;&#x3002;</p>
<h1 id="&#x5177;&#x4F53;&#x8BF7;&#x6C42;&#x7684;&#x7F16;&#x5199;"><a href="#&#x5177;&#x4F53;&#x8BF7;&#x6C42;&#x7684;&#x7F16;&#x5199;" class="headerlink" title="&#x5177;&#x4F53;&#x8BF7;&#x6C42;&#x7684;&#x7F16;&#x5199;"></a>&#x5177;&#x4F53;&#x8BF7;&#x6C42;&#x7684;&#x7F16;&#x5199;</h1><p>&#x6211;&#x4EE5;&#x4E00;&#x4E2A;POST&#x7684;&#x8BF7;&#x6C42;&#x4E3A;&#x4F8B;&#xFF0C;&#x4F7F;&#x7528;Egg&#x7684;&#x8BDD;&#x8BF7;&#x6C42;&#x63A5;&#x53E3;&#x7684;&#x5177;&#x4F53;&#x5730;&#x5740;&#x662F;&#x5728;router.js&#x4E2D;&#x7F16;&#x5199;&#x5B9E;&#x73B0;&#xFF0C;&#x540C;&#x65F6;&#xFF0C;&#x8BE5;&#x8BF7;&#x6C42;&#x9700;&#x8981;token&#x6743;&#x9650;&#x624D;&#x80FD;&#x8BBF;&#x95EE;&#xFF0C;&#x90A3;&#x4E48;Egg&#x7684;&#x601D;&#x8DEF;&#x662F;&#x5C06;token&#x4F5C;&#x4E3A;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;&#x4F20;&#x5230;router.js&#x4E2D;&#x5177;&#x4F53;&#x7684;post&#x7684;&#x8BF7;&#x6C42;&#x4E0A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// router.js</span><br><span class="line">// &#x5728;&#x5168;&#x5C40;&#x53D8;&#x91CF;&#x4E2D;&#x83B7;&#x53D6;&#x4E2D;&#x95F4;&#x4EF6;&#x548C;&#x914D;&#x7F6E;&#x9879;</span><br><span class="line"> const {</span><br><span class="line">    router,</span><br><span class="line">    controller,</span><br><span class="line">    middleware,</span><br><span class="line">    config</span><br><span class="line">  } = app;</span><br><span class="line">  // &#x751F;&#x6210;&#x4E2D;&#x95F4;&#x4EF6;token</span><br><span class="line">  const jwt = middleware.jwt(config.jwt);</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  // &#x5728;&#x5177;&#x4F53;&#x7684;&#x8BF7;&#x6C42;&#x4E2D;&#x6DFB;&#x52A0;token&#x4E2D;&#x95F4;&#x4EF6;</span><br><span class="line">  router.post(`${baseURL}/users/add`, jwt, controller.users.create);</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#xFF0C;&#x8DEF;&#x7531;&#x51FD;&#x6570;&#x4F1A;&#x8C03;&#x7528;controller&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;controller&#x4F1A;&#x518D;&#x4ECE;&#x5BF9;&#x5E94;&#x7684;service&#x4E2D;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5E76;&#x8FD4;&#x56DE;&#x7ED3;&#x679C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// controller/users.js</span><br><span class="line">async create() {</span><br><span class="line">    const {</span><br><span class="line">      ctx,</span><br><span class="line">      app</span><br><span class="line">    } = this;</span><br><span class="line">    const body = ctx.request.body;</span><br><span class="line">    const result = await ctx.service.users.create(body);</span><br><span class="line">    if (!!result.code &amp;&amp; result.code != 200) {</span><br><span class="line">      if (!body.id) {</span><br><span class="line">        // &#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x6587;&#x6863;</span><br><span class="line">        await this.ctx.service.home.addOperaLog({</span><br><span class="line">          url: &apos;/app/users/add&apos;,</span><br><span class="line">          method: &apos;POST&apos;,</span><br><span class="line">          action: &apos;&#x65B0;&#x589E;&apos;,</span><br><span class="line">          status: 0</span><br><span class="line">        });</span><br><span class="line">      } else {</span><br><span class="line">        // &#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x6587;&#x6863;</span><br><span class="line">        await this.ctx.service.home.addOperaLog({</span><br><span class="line">          url: &apos;/app/users/update&apos;,</span><br><span class="line">          method: &apos;PUT&apos;,</span><br><span class="line">          action: &apos;&#x4FEE;&#x6539;&apos;,</span><br><span class="line">          status: 0</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      this.result(null, result.code, result.success, result.message);</span><br><span class="line">    } else {</span><br><span class="line">      // &#x53D1;&#x9001;&#x90AE;&#x4EF6;</span><br><span class="line">      const {</span><br><span class="line">        roles</span><br><span class="line">      } = await ctx.service.home.roles();</span><br><span class="line">      let title = body.id ? &apos;&#x4FEE;&#x6539;&apos; : &apos;&#x521B;&#x5EFA;&apos;;</span><br><span class="line">      let rolesText = &quot;&quot;;</span><br><span class="line">      let userRoles = body.roles;</span><br><span class="line">      userRoles.forEach(id =&gt; {</span><br><span class="line">        for (let i = 0; i &lt; roles.length; i++) {</span><br><span class="line">          if (id == roles[i].code) {</span><br><span class="line">            rolesText += `${roles[i].text}, `;</span><br><span class="line">            break;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      });</span><br><span class="line">      // console.log(body.email);</span><br><span class="line"></span><br><span class="line">      const mailresult = await app.email.sendEmail(</span><br><span class="line">        `&#x8D26;&#x53F7;${title}&#x6210;&#x529F;`,</span><br><span class="line">        `&#x60A8;&#x7684;&#x8D26;&#x53F7;&#x5DF2;${title}&#x6210;&#x529F;`,</span><br><span class="line">        `${body.email}`,</span><br><span class="line">        [{</span><br><span class="line">          data: `&lt;html&gt;</span><br><span class="line">            &lt;p&gt;&#x60A8;&#x7684;&#x8D26;&#x6237;&#x5DF2;${title}&#x6210;&#x529F;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#x767B;&#x5F55;&#x540D;&#xFF1A;&lt;b&gt;${body.loginName}&lt;/b&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#x5BC6;&#x7801;&#xFF1A;&lt;b&gt;${body.password}&lt;/b&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#x89D2;&#x8272;&#xFF1A;&lt;b&gt;${rolesText}&lt;/b&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&#x5982;&#x6709;&#x7591;&#x95EE;&#x8BF7;&#x8054;&#x7CFB;&#x7BA1;&#x7406;&#x5458;&lt;/p&gt;</span><br><span class="line">            &lt;/html&gt;`,</span><br><span class="line">          alternative: true</span><br><span class="line">        }]</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      if (!body.id) {</span><br><span class="line">        // &#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x6587;&#x6863;</span><br><span class="line">        await this.ctx.service.home.addOperaLog({</span><br><span class="line">          url: &apos;/app/users/add&apos;,</span><br><span class="line">          method: &apos;POST&apos;,</span><br><span class="line">          action: &apos;&#x65B0;&#x589E;&apos;,</span><br><span class="line">          status: 1</span><br><span class="line">        });</span><br><span class="line">      } else {</span><br><span class="line">        // &#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x6587;&#x6863;</span><br><span class="line">        await this.ctx.service.home.addOperaLog({</span><br><span class="line">          url: &apos;/app/users/update&apos;,</span><br><span class="line">          method: &apos;PUT&apos;,</span><br><span class="line">          action: &apos;&#x4FEE;&#x6539;&apos;,</span><br><span class="line">          status: 1</span><br><span class="line">        });</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      this.result(mailresult);</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// service/users.js</span><br><span class="line"> // &#x63D2;&#x5165;/&#x4FEE;&#x6539;&#x4E00;&#x6761;&#x6570;&#x636E;</span><br><span class="line">  async create(params) {</span><br><span class="line">    const users = await this.app.mysql.select(&apos;users&apos;);</span><br><span class="line">    let insertData = JSON.parse(JSON.stringify(params));</span><br><span class="line">    insertData.roles = insertData.roles.join(&quot;,&quot;);</span><br><span class="line">    insertData.hexPassword = getMd5Data(params.password);</span><br><span class="line">    if (!params.hasOwnProperty(&apos;id&apos;)) {</span><br><span class="line">      insertData.id = `user_${users.length}_${Math.random().toFixed(5)}`;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    const findUsers = await this.app.mysql.select(&apos;users&apos;, {</span><br><span class="line">      where: {</span><br><span class="line">        loginName: params.loginName</span><br><span class="line">      }</span><br><span class="line">    });</span><br><span class="line">    // console.log(&apos;findUsers: &apos;, findUsers);</span><br><span class="line"></span><br><span class="line">    if (params.hasOwnProperty(&apos;id&apos;)) {</span><br><span class="line">      // &#x66F4;&#x65B0;&#x64CD;&#x4F5C;</span><br><span class="line">      if (findUsers.length === 0 || (findUsers.length === 1 &amp;&amp; findUsers[0].id === params.id)) {</span><br><span class="line">        const result = await this.app.mysql.update(&apos;users&apos;, insertData);</span><br><span class="line">        if (result.affectedRows === 1) {</span><br><span class="line">          return {</span><br><span class="line">            result</span><br><span class="line">          };</span><br><span class="line">        } else {</span><br><span class="line">          return {</span><br><span class="line">            code: 500,</span><br><span class="line">            success: false,</span><br><span class="line">            message: &apos;&#x66F4;&#x65B0;&#x5931;&#x8D25;&apos;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      } else {</span><br><span class="line">        return {</span><br><span class="line">          code: 4001,</span><br><span class="line">          success: false,</span><br><span class="line">          message: &apos;&#x767B;&#x5F55;&#x540D;&#x91CD;&#x590D;&apos;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    } else {</span><br><span class="line">      // &#x65B0;&#x589E;&#x64CD;&#x4F5C;</span><br><span class="line">      if (findUsers.length &gt; 0) {</span><br><span class="line">        return {</span><br><span class="line">          code: 4001,</span><br><span class="line">          success: false,</span><br><span class="line">          message: &apos;&#x767B;&#x5F55;&#x540D;&#x5DF2;&#x5B58;&#x5728;&apos;</span><br><span class="line">        }</span><br><span class="line">      } else {</span><br><span class="line">        const result = await this.app.mysql.insert(&apos;users&apos;, insertData);</span><br><span class="line">        if (result.protocol41) {</span><br><span class="line">          return {</span><br><span class="line">            result</span><br><span class="line">          };</span><br><span class="line">        } else {</span><br><span class="line">          return {</span><br><span class="line">            code: 500,</span><br><span class="line">            success: false,</span><br><span class="line">            message: &apos;&#x6DFB;&#x52A0;&#x5931;&#x8D25;&apos;</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x6B63;&#x5982;&#x6211;&#x4E4B;&#x524D;&#x6240;&#x8BF4;&#xFF0C;Nest&#x662F;&#x4E07;&#x7269;&#x7686;&#x6A21;&#x5757;&#xFF0C;&#x6240;&#x4EE5;Nest&#x8981;&#x60F3;&#x5B9E;&#x73B0;&#x76F8;&#x5E94;&#x529F;&#x80FD;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5B9A;&#x4E49;&#x597D;users&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x518D;&#x5C06;users&#x7684;controller&#x548C;service&#x7528;&#x4E8E;&#x6A21;&#x5757;&#x91CC;&#x5E76;&#x5BFC;&#x51FA;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// users/users.module.ts</span><br><span class="line">...</span><br><span class="line">@Module({</span><br><span class="line">  imports: [</span><br><span class="line">    SequelizeModule.forFeature([Users, Roles, Usertokens]), </span><br><span class="line">    MailModule,</span><br><span class="line">    OperalogModule</span><br><span class="line">  ],</span><br><span class="line">  providers: [UsersService],</span><br><span class="line">  controllers: [UsersController]</span><br><span class="line">})</span><br><span class="line">export class UsersModule {}</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;Nest&#x600E;&#x6837;&#x5B9E;&#x73B0;&#x540C;&#x6837;&#x5730;&#x5740;&#x7684;&#x8DEF;&#x7531;&#xFF0C;&#x8FD9;&#x5219;&#x9700;&#x8981;&#x5728;controller&#x4E2D;&#x5B9E;&#x73B0;&#xFF0C;&#x4E0D;&#x540C;&#x4E8E;Egg&#x7684;&#x8DEF;&#x7531;&#x6709;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;Nest&#x5F15;&#x5165;&#x4E86;&#x88C5;&#x9970;&#x5668;&#x7684;&#x601D;&#x60F3;&#xFF0C;Controller&#x4F5C;&#x4E3A;&#x8DEF;&#x7531;&#x7684;&#x4E3B;&#x5165;&#x53E3;&#x4EE3;&#x8868;&#x7B2C;&#x4E00;&#x7EA7;&#xFF0C;&#x800C;&#x5177;&#x4F53;&#x7684;Post/Get&#x88C5;&#x9970;&#x5668;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x4E3A;&#x7B2C;&#x4E8C;&#x7EA7;&#x3002;&#x800C;&#x5173;&#x4E8E;&#x6743;&#x9650;&#x7684;&#x62E6;&#x622A;&#x4E5F;&#x662F;&#x57FA;&#x4E8E;&#x88C5;&#x9970;&#x5668;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x4F7F;&#x7528;UseGuards&#x88C5;&#x9970;&#x5668;&#x5728;&#x5177;&#x4F53;&#x8DEF;&#x7531;&#x7684;&#x4E0A;&#x65B9;&#x586B;&#x5165;token&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x5904;&#x7406;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// users/users.controller.ts</span><br><span class="line">import { Controller, Get, Post, Put, UseGuards, Request, Delete } from &apos;@nestjs/common&apos;;</span><br><span class="line">import { JwtAuthGuard } from &apos;src/auth/guards/jwt.guard&apos;;</span><br><span class="line">import { UsersService } from &apos;./users.service&apos;;</span><br><span class="line">import { OperalogService } from &apos;src/operaLog/operaLog.service&apos;;</span><br><span class="line"></span><br><span class="line">@Controller(&apos;users&apos;) // controller&#x88C5;&#x9970;&#x5668;&#x91CC;&#x7684;users&#x662F;&#x8DEF;&#x7531;&#x540D;&#x79F0;&#x7684;&#x7B2C;&#x4E00;&#x7EA7;</span><br><span class="line">export class UsersController {</span><br><span class="line">  constructor(</span><br><span class="line">    private readonly usersService: UsersService,</span><br><span class="line">    private readonly operalogService: OperalogService,</span><br><span class="line">  ) {}</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">  // &#x65B0;&#x589E;&#x7528;&#x6237;</span><br><span class="line">  @UseGuards(JwtAuthGuard) // &#x901A;&#x8FC7;&#x88C5;&#x9970;&#x5668;&#x6CE8;&#x5165;token&#x62E6;&#x622A;</span><br><span class="line">  @Post(&apos;add&apos;) // Post&#x88C5;&#x9970;&#x5668;&#x8868;&#x793A;&#x8BE5;&#x8BF7;&#x6C42;&#x4E3A;Post&#x4EB2;&#x8BF7;&#x6C42;&#x91CC;&#x9762;&#x7684;add&#x8868;&#x793A;&#x7B2C;&#x4E8C;&#x7EA7;&#x4E5F;&#x5C31;&#x662F;/users/add</span><br><span class="line">  async add(@Request() req): Promise&lt;any&gt; {</span><br><span class="line">    const result:any = await this.create(req);</span><br><span class="line">    if (result &amp;&amp; result.code == 200) {</span><br><span class="line">      await this.addUserLog(1, req);</span><br><span class="line">    } else {</span><br><span class="line">      await this.addUserLog(0, req);</span><br><span class="line">    }</span><br><span class="line">    return result;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x91CC;Egg&#x548C;Nest&#x7684;&#x601D;&#x60F3;&#x4E0D;&#x540C;&#x5904;&#xFF0C;<strong>Egg&#x57FA;&#x4E8E;&#x5168;&#x5C40;&#x901A;&#x8FC7;&#x4E2D;&#x95F4;&#x4EF6;&#x5BF9;&#x4E8B;&#x7269;&#x8FDB;&#x884C;&#x5904;&#x7406;</strong>&#xFF0C;<strong>Nest&#x57FA;&#x4E8E;&#x5177;&#x4F53;&#x6A21;&#x5757;&#x901A;&#x8FC7;&#x88C5;&#x9970;&#x5668;&#x5BF9;&#x4E8B;&#x7269;&#x8FDB;&#x884C;&#x5904;&#x7406;</strong></p>
<h1 id="&#x5176;&#x4ED6;&#x5F02;&#x540C;"><a href="#&#x5176;&#x4ED6;&#x5F02;&#x540C;" class="headerlink" title="&#x5176;&#x4ED6;&#x5F02;&#x540C;"></a>&#x5176;&#x4ED6;&#x5F02;&#x540C;</h1><h2 id="&#x6570;&#x636E;&#x7684;&#x8FD4;&#x56DE;&#x95EE;&#x9898;"><a href="#&#x6570;&#x636E;&#x7684;&#x8FD4;&#x56DE;&#x95EE;&#x9898;" class="headerlink" title="&#x6570;&#x636E;&#x7684;&#x8FD4;&#x56DE;&#x95EE;&#x9898;"></a>&#x6570;&#x636E;&#x7684;&#x8FD4;&#x56DE;&#x95EE;&#x9898;</h2><p>&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x4F1A;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x67E5;&#x8BE2;&#x7684;&#x5185;&#x5BB9;&#x5305;&#x88C5;&#x4E00;&#x5C42;&#x518D;&#x8FD4;&#x56DE;&#x7ED9;&#x524D;&#x7AEF;&#xFF0C;&#x8FD9;&#x91CC;Egg&#x548C;Nest&#x7684;&#x5904;&#x7406;&#x601D;&#x8DEF;&#x6709;&#x5F88;&#x5927;&#x4E0D;&#x540C;&#xFF0C;Egg&#x5728;controller&#x901A;&#x8FC7;ctx.result&#x8FD4;&#x56DE;&#xFF0C;&#x5982;&#x679C;&#x5728;service&#x4E2D;&#x5F3A;&#x884C;&#x8D4B;&#x503C;&#x4E00;&#x4E2A;&#x81EA;&#x5DF1;&#x7ED9;&#x7684;&#x9519;&#x8BEF;&#x7801;&#x5219;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x5982;&#x4E4B;&#x524D;&#x4E3E;&#x4F8B;&#x4E2D;&#x7684;users.service&#x9519;&#x8BEF;&#x7801;&#x8D4B;&#x503C;500&#x662F;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x56DE;&#x6765;&#x7684;&#xFF0C;&#x5E73;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#x5219;&#x53EF;&#x4EE5;&#x81EA;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x7684;BaseController&#x8FD4;&#x56DE;&#x5305;&#x88C5;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// controller/base.js</span><br><span class="line">const Controller = require(&apos;egg&apos;).Controller;</span><br><span class="line"></span><br><span class="line">class BaseController extends Controller {</span><br><span class="line">  result(data, code = 200, isSuccess = true, message = &apos;&#x64CD;&#x4F5C;&#x6210;&#x529F;&apos;) {</span><br><span class="line">    this.ctx.body = {</span><br><span class="line">      code: code,</span><br><span class="line">      success: isSuccess,</span><br><span class="line">      message: message,</span><br><span class="line">      data</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">module.exports = BaseController;</span><br></pre></td></tr></table></figure>

<p>Nest&#x4FEE;&#x6539;&#x72B6;&#x6001;&#x7801;&#x5219;&#x4E0D;&#x591F;&#x7075;&#x6D3B;&#xFF0C;&#x53EA;&#x80FD;&#x901A;&#x8FC7;&#x88C5;&#x9970;&#x5668;@HttpStatus&#x4FEE;&#x6539;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x4E00;&#x4E9B;&#x5168;&#x5C40;&#x5904;&#x7406;&#x4E0A;&#x8FD9;&#x6837;&#x4FEE;&#x6539;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x6BD4;&#x5982;token&#x5931;&#x6548;&#x6211;&#x5E0C;&#x671B;&#x72B6;&#x6001;&#x7801;&#x53D8;&#x6210;401&#x8FD9;&#x6837;&#x5C31;&#x5F88;&#x96BE;&#xFF0C;&#x6211;&#x770B;&#x4E86;&#x6587;&#x6863;&#x4E5F;&#x6CA1;&#x627E;&#x5230;&#x5408;&#x9002;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x6700;&#x7EC8;&#x53EA;&#x80FD;&#x91C7;&#x53D6;&#x6298;&#x4E2D;&#x65B9;&#x6848;&#xFF0C;&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8FD4;&#x56DE;&#x4E2D;&#x5199;&#x5165;&#x4E00;&#x4E2A;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x524D;&#x7AEF;&#x4EE5;&#x8FD9;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x72B6;&#x6001;&#x7801;&#x4E3A;&#x51C6;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x4E4B;&#x524D;&#x6211;&#x4E5F;&#x662F;&#x8FD9;&#x4E48;&#x5199;&#x7684;&#x3002;</p>
<h2 id="token&#x7684;&#x751F;&#x6210;"><a href="#token&#x7684;&#x751F;&#x6210;" class="headerlink" title="token&#x7684;&#x751F;&#x6210;"></a>token&#x7684;&#x751F;&#x6210;</h2><p>token&#x8FD9;&#x91CC;Egg&#x548C;Nest&#x7684;&#x601D;&#x8DEF;&#x4E5F;&#x662F;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#xFF0C;Egg&#x6709;&#x4E13;&#x95E8;&#x7684;&#x751F;&#x6210;token&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x5229;&#x7528;&#x63D2;&#x4EF6;&#x751F;&#x6210;token&#x540E;&#x5728;&#x5168;&#x5C40;&#x4F7F;&#x7528;&#xFF0C;&#x751F;&#x6210;&#x4E4B;&#x540E;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x4EF6;&#x4F5C;&#x4E3A;&#x62E6;&#x622A;&#xFF0C;&#x5224;&#x65AD;&#x5F53;token&#x5931;&#x6548;&#x4EE5;&#x540E;&#x8FD4;&#x56DE;401</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// middleware/jwt.js</span><br><span class="line">module.exports = options =&gt; {</span><br><span class="line">  return async function jwt(ctx, next) {</span><br><span class="line">    const token = ctx.request.header.authorization;</span><br><span class="line">    let decode;</span><br><span class="line">    if (token) {</span><br><span class="line">      try {</span><br><span class="line">        // &#x89E3;&#x7801;token</span><br><span class="line">        decode = ctx.app.jwt.verify(token, options.secret);</span><br><span class="line">        const user = await ctx.app.mysql.get(&apos;usertokens&apos;, {</span><br><span class="line">          loginName: decode.loginName</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        if (token == user.token) {</span><br><span class="line">          await next();</span><br><span class="line">        } else {</span><br><span class="line">          ctx.status = 401;</span><br><span class="line">          ctx.body = {</span><br><span class="line">            message: &apos;&#x8BE5;&#x8D26;&#x6237;&#x5DF2;&#x5728;&#x5176;&#x4ED6;&#x8BBE;&#x5907;&#x767B;&#x5F55;&apos;,</span><br><span class="line">          };</span><br><span class="line">          return;</span><br><span class="line">        }</span><br><span class="line">      } catch (error) {</span><br><span class="line">        if (error.message == &apos;jwt expired&apos;) {</span><br><span class="line">          ctx.status = 401;</span><br><span class="line">        }</span><br><span class="line">        ctx.body = {</span><br><span class="line">          message: error.message,</span><br><span class="line">        };</span><br><span class="line">        return;</span><br><span class="line">      }</span><br><span class="line">    } else {</span><br><span class="line">      ctx.status = 401;</span><br><span class="line">      ctx.body = {</span><br><span class="line">        message: &apos;&#x6CA1;&#x6709;token&apos;,</span><br><span class="line">      };</span><br><span class="line">      return;</span><br><span class="line">    }</span><br><span class="line">  };</span><br><span class="line">};</span><br></pre></td></tr></table></figure>

<p>Nest&#x5219;&#x5DF2;&#x7ECF;&#x79C9;&#x6301;&#x6A21;&#x5757;&#x7684;&#x601D;&#x60F3;&#xFF0C;&#x53EF;&#x4EE5;&#x5B9A;&#x4E00;&#x4E2A;&#x540D;&#x4E3A;auth&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x53EB;&#x5176;&#x4ED6;&#x540D;&#x5B57;&#x4E5F;&#x884C;&#xFF0C;&#x5728;&#x8BE5;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x4F7F;&#x7528;&#x5B98;&#x65B9;&#x7684;&#x65B9;&#x6CD5;&#x751F;&#x6210;token&#x5E76;&#x5F15;&#x5165;&#x5230;auth&#x7684;service&#x4E2D;&#x4F7F;&#x7528;&#xFF0C;&#x6700;&#x540E;&#x5C06;token&#x4F5C;&#x4E3A;&#x62E6;&#x622A;&#x5668;&#x5728;&#x5177;&#x4F53;&#x7684;&#x63A5;&#x53E3;&#x4E4B;&#x4E0A;&#x7528;&#x62E6;&#x622A;&#x88C5;&#x9970;&#x5668;&#x5BFC;&#x5165;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// auth/strategies/jwt.strategy.ts</span><br><span class="line">import { Injectable } from &apos;@nestjs/common&apos;;</span><br><span class="line">import { PassportStrategy } from &apos;@nestjs/passport&apos;;</span><br><span class="line">import { ExtractJwt, Strategy } from &apos;passport-jwt&apos;;</span><br><span class="line">import { secret } from &apos;src/common/conmstr&apos;;</span><br><span class="line"></span><br><span class="line">@Injectable()</span><br><span class="line">export class JwtStrategy extends PassportStrategy(Strategy) {</span><br><span class="line">  constructor() {</span><br><span class="line">    super({</span><br><span class="line">      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),</span><br><span class="line">      ignoreExpiration: false,</span><br><span class="line">      secretOrKey: secret,</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  async validate(payload: any) {</span><br><span class="line">    return { token: payload.token }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x8981;&#x600E;&#x6837;&#x5728;token&#x5931;&#x6548;&#x540E;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x6D88;&#x606F;&#x9000;&#x51FA;&#x5462;&#xFF1F;&#x6211;&#x76EE;&#x524D;&#x505A;&#x5230;&#x7684;&#x4E5F;&#x5C31;&#x662F;&#x6211;&#x4E4B;&#x524D;&#x63D0;&#x5230;&#x7684;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x62E6;&#x622A;&#x5668;&#xFF0C;&#x5728;&#x5931;&#x6548;&#x4E4B;&#x540E;&#x8FD4;&#x56DE;&#x81EA;&#x5B9A;&#x4E49;&#x7684;401&#x9519;&#x8BEF;&#x7801;&#x4EA4;&#x7531;&#x524D;&#x7AEF;&#x5904;&#x7406;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// /common/interceptors/transform.interceptor.ts</span><br><span class="line">import {</span><br><span class="line">  Injectable,</span><br><span class="line">  NestInterceptor,</span><br><span class="line">  CallHandler,</span><br><span class="line">  ExecutionContext, </span><br><span class="line">} from &apos;@nestjs/common&apos;;</span><br><span class="line">import { map } from &apos;rxjs/operators&apos;;</span><br><span class="line">import { Observable } from &apos;rxjs&apos;;</span><br><span class="line">import { AuthService } from &apos;src/auth/auth.service&apos;;</span><br><span class="line">import { secret } from &apos;../conmstr&apos;;</span><br><span class="line"></span><br><span class="line">interface Response&lt;T&gt; {</span><br><span class="line">  data: T;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Injectable()</span><br><span class="line">export class TransformInterceptor&lt;T&gt; implements NestInterceptor&lt;T, Response&lt;T&gt;&gt; {</span><br><span class="line">  constructor(</span><br><span class="line">    private readonly authService: AuthService,</span><br><span class="line">  ) {}</span><br><span class="line"></span><br><span class="line">  async intercept( context: ExecutionContext, next: CallHandler&lt;T&gt;): Promise&lt;Observable&lt;Response&lt;T&gt;&gt;&gt; {</span><br><span class="line">    const request = context.switchToHttp().getRequest();</span><br><span class="line">    const path = request.route.path;</span><br><span class="line">    let hasToken = true;</span><br><span class="line">    const mesData = {</span><br><span class="line">      code: 200,</span><br><span class="line">      message: path === &apos;/api/login&apos; ? &apos;&#x767B;&#x5F55;&#x6210;&#x529F;&apos; : &apos;&#x8BF7;&#x6C42;&#x6210;&#x529F;&apos;,</span><br><span class="line">      success: true,</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    // &#x83B7;&#x53D6;&#x5E76;&#x89E3;&#x6790;token</span><br><span class="line">    if (request.headers.authorization) {</span><br><span class="line">      const usertokens = await this.authService.findUsertokens();</span><br><span class="line">      const token = (request.headers.authorization.split(&apos; &apos;))[1]; // request.headers.authorization;</span><br><span class="line">      const decode = this.authService.verifyToken(token, secret);</span><br><span class="line">      const user = usertokens.find((item) =&gt; { return item.loginName == decode.loginName });</span><br><span class="line"></span><br><span class="line">      if (user.token !== token) {</span><br><span class="line">        hasToken = false;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    return next.handle().pipe(</span><br><span class="line">      map((data: any) =&gt; {</span><br><span class="line">        if (!hasToken &amp;&amp; path != &apos;/api/login&apos;) {</span><br><span class="line">          data = null;</span><br><span class="line">          mesData.message = &apos;&#x8BE5;&#x8D26;&#x6237;&#x5DF2;&#x5728;&#x5176;&#x4ED6;&#x8BBE;&#x5907;&#x767B;&#x5F55;&apos;;</span><br><span class="line">          mesData.code = 401;</span><br><span class="line">          mesData.success = false;</span><br><span class="line">        } else if (!hasToken &amp;&amp; path === &apos;/api/login&apos;) {</span><br><span class="line">          Object.keys(data).forEach(key =&gt; { mesData[key] = data[key] });</span><br><span class="line">        } else if (hasToken &amp;&amp; data &amp;&amp; data.code) {</span><br><span class="line">          Object.keys(data).forEach(key =&gt; { mesData[key] = data[key] });</span><br><span class="line">        } else if (!data) {</span><br><span class="line">          mesData.message = &apos;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&apos;;</span><br><span class="line">          mesData.code = 1;</span><br><span class="line">          mesData.success = false;</span><br><span class="line">        } </span><br><span class="line"></span><br><span class="line">        return {</span><br><span class="line">          data,</span><br><span class="line">          ...mesData</span><br><span class="line">        };</span><br><span class="line">      }),</span><br><span class="line">    );</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x76EE;&#x524D;&#x6709;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x5904;&#x7406;&#xFF0C;&#x5C31;&#x662F;Egg&#x751F;&#x6210;&#x7684;token&#xFF0C;&#x524D;&#x7AEF;&#x8BF7;&#x6C42;&#x65F6;Authrotion&#x4E0D;&#x9700;&#x8981;&#x643A;&#x5E26;&#x201D;Bearer&#x201D;,&#x4F46;&#x662F;Nest&#x751F;&#x6210;&#x7684;token&#x524D;&#x7AEF;&#x5FC5;&#x987B;&#x8981;&#x643A;&#x5E26;&#x201D;Bearer&#x201D;&#x3002;&#x8FD9;&#x4E5F;&#x662F;&#x524D;&#x7AEF;&#x90E8;&#x5206;&#x6211;&#x552F;&#x4E00;&#x4FEE;&#x6539;&#x7684;&#x4E00;&#x5904;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x67E5;&#x4E86;&#x5F88;&#x591A;&#x8D44;&#x6599;&#xFF0C;&#x76EE;&#x524D;&#x6CA1;&#x60F3;&#x5230;&#x5408;&#x9002;&#x7684;&#x529E;&#x6CD5;&#x8BA9;Nest&#x7684;&#x8BF7;&#x6C42;&#x548C;Egg&#x4FDD;&#x6301;&#x4E00;&#x81F4;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x524D;&#x7AEF; /api/axios.js</span><br><span class="line">...</span><br><span class="line">// &#x5168;&#x5C40;&#x62E6;&#x622A;&#x6DFB;&#x52A0;token (Egg.js&#x4E0D;&#x9700;&#x8981;Bearer, Nest.js&#x9700;&#x8981;Bearer, &#x6211;&#x76EE;&#x524D;&#x4E0D;&#x77E5;&#x9053;&#x600E;&#x6837;&#x5728;&#x540E;&#x7AEF;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;)</span><br><span class="line">if (store.state.token != &quot;&quot;) {</span><br><span class="line">  config.headers.common[&apos;Authorization&apos;] = &apos;Bearer &apos; + store.state.token</span><br><span class="line">  // config.headers.common[&quot;Authorization&quot;] = store.state.token;</span><br><span class="line">}</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h2 id="&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5E93;"><a href="#&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5E93;" class="headerlink" title="&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5E93;"></a>&#x5173;&#x4E8E;&#x6570;&#x636E;&#x5E93;</h2><p>&#x6570;&#x636E;&#x5E93;&#x6211;&#x4F7F;&#x7528;MySql&#xFF0C;Egg&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;Egg&#x672C;&#x8EAB;&#x5C31;&#x53EF;&#x4EE5;&#x627E;&#x5230;mysql&#x7684;&#x6570;&#x636E;&#x5E93;&#x63D2;&#x4EF6;&#xFF0C;&#x5927;&#x90E8;&#x5206;&#x7684;&#x67E5;&#x8BE2;&#x548C;&#x65B0;&#x589E;&#x64CD;&#x4F5C;&#x5229;&#x7528;&#x63D2;&#x4EF6;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#xFF0C;&#x5C0F;&#x90E8;&#x5206;&#x7684;&#x67E5;&#x8BE2;&#x7F16;&#x5199;sql&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#xFF0C;&#x4F8B;&#x5982;keys.js&#x4E0B;&#x7684;&#x5BA1;&#x6838;&#x548C;&#x67E5;&#x8BE2;&#x7B49;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">javascript&#x590D;&#x5236;&#x4EE3;&#x7801;// service/keys.js</span><br><span class="line">...</span><br><span class="line">// &#x5BA1;&#x6838;</span><br><span class="line">  async audit(params) {</span><br><span class="line">    const {</span><br><span class="line">      app</span><br><span class="line">    } = this;</span><br><span class="line">    let subData = {</span><br><span class="line">      id: params.id,</span><br><span class="line">      status: params.result,</span><br><span class="line">      reason: params.reason,</span><br><span class="line">      auditDate: app.mysql.literals.now</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    const result = await this.app.mysql.update(&apos;theKeys&apos;, subData); // &#x5229;&#x7528;Egg&#x81EA;&#x5E26;&#x7684;&#x63D2;&#x4EF6;&#x66F4;&#x65B0;</span><br><span class="line"></span><br><span class="line">    if (result.affectedRows === 1) {</span><br><span class="line">      return {</span><br><span class="line">        result</span><br><span class="line">      };</span><br><span class="line">    } else {</span><br><span class="line">      return {</span><br><span class="line">        code: 500,</span><br><span class="line">        success: false,</span><br><span class="line">        message: &apos;&#x66F4;&#x65B0;&#x5931;&#x8D25;&apos;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  // &#x7528;&#x6237;&#x53EF;&#x64CD;&#x4F5C;&#x6027;&#x5BC6;&#x94A5;</span><br><span class="line">  async userKeys(params) {</span><br><span class="line">    const user = await this.app.mysql.get(&apos;users&apos;, {</span><br><span class="line">      loginName: params.loginName</span><br><span class="line">    });</span><br><span class="line">    // console.log(&apos;user: &apos;, user);</span><br><span class="line">    let sql = `select id,keyName from theKeys where keyUser like &quot;%${user.id}%&quot; and status=2`;</span><br><span class="line">    const list = await this.app.mysql.query(sql);</span><br><span class="line">    return list;</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x4F46;&#x662F;Nest&#x7684;&#x6570;&#x636E;&#x5E93;&#x64CD;&#x4F5C;&#x5C31;&#x7A0D;&#x5FAE;&#x590D;&#x6742;&#x4E86;&#x4E00;&#x70B9;&#xFF0C;Nest&#x6CA1;&#x6709;&#x6709;&#x4E2A;&#x6BD4;&#x8F83;&#x5B98;&#x65B9;&#x7684;&#x65B9;&#x6848;&#xFF0C;&#x5728;Mysql&#x4E0A;&#x76EE;&#x524D;&#x53EF;&#x4EE5;&#x914D;&#x5408;&#x5B98;&#x65B9;&#x63D2;&#x4EF6;&#x4F7F;&#x7528;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;TypeORM&#x6216;&#x8005;Sequelize&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x6211;&#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F;Sequelize&#xFF0C;&#x4F46;&#x4E0D;&#x7BA1;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x5E93;&#xFF0C;nest&#x90FD;&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x67E5;&#x8BE2;&#x6216;&#x4FEE;&#x6539;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x662F;&#x8981;&#x4E3A;&#x6BCF;&#x4E00;&#x4E2A;&#x8868;&#x5EFA;&#x7ACB;&#x76F8;&#x5E94;&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;&#xFF0C;&#x518D;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x6A21;&#x5757;service&#x4E0B;&#x901A;&#x8FC7;&#x6A21;&#x578B;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x3002;&#x6BD4;&#x5982;&#xFF0C;&#x9996;&#x5148;&#x6211;&#x4EEC;&#x5148;&#x5B9A;&#x4E49;&#x7528;&#x6237;&#x6570;&#x636E;&#x8868;&#x7684;&#x6A21;&#x578B;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p5/raw/master/img/f4b6e8cf07e050f0bd45e03c86ab6e0397927584415e3ee2585c68726ab031be" alt="image.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;// common/models/users.model.ts</span><br><span class="line">import { Column, Model, Table } from &apos;sequelize-typescript&apos;;</span><br><span class="line"></span><br><span class="line">@Table({</span><br><span class="line">  tableName: &apos;users&apos;,</span><br><span class="line">  timestamps: false,</span><br><span class="line">  freezeTableName: true</span><br><span class="line">})</span><br><span class="line">export class Users extends Model&lt;Users&gt; {</span><br><span class="line">  @Column({ primaryKey: true })</span><br><span class="line">  id: string;</span><br><span class="line"></span><br><span class="line">  @Column</span><br><span class="line">  loginName: string;</span><br><span class="line"></span><br><span class="line">  @Column</span><br><span class="line">  userName: string;</span><br><span class="line"></span><br><span class="line">  @Column</span><br><span class="line">  password: string;</span><br><span class="line"></span><br><span class="line">  @Column</span><br><span class="line">  roles: string;</span><br><span class="line"></span><br><span class="line">  @Column</span><br><span class="line">  email: string;</span><br><span class="line"></span><br><span class="line">  @Column</span><br><span class="line">  hexPassword: string;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x5728;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6A21;&#x578B;&#x7684;module&#x548C;service&#x91CC;&#x5206;&#x522B;&#x5F15;&#x5165;&#xFF0C;module&#x9700;&#x8981;&#x5728;impots&#x91CC;&#x58F0;&#x660E;&#x4F7F;&#x7528;&#x4E86;&#x8BE5;&#x6A21;&#x578B;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import { Module } from &apos;@nestjs/common&apos;;</span><br><span class="line">import { SequelizeModule } from &apos;@nestjs/sequelize&apos;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">@Module({</span><br><span class="line">  imports: [</span><br><span class="line">    SequelizeModule.forFeature([Users]),  // &#x8868;&#x793A;&#x4F7F;&#x7528;&#x4E86;Users&#x6A21;&#x578B;</span><br><span class="line">    ...</span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">})</span><br><span class="line">export class UsersModule {}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x5BF9;&#x5E94;&#x7684;servcice&#x91CC;&#x518D;&#x6B21;&#x5F15;&#x5165;&#x6A21;&#x578B;&#xFF0C;&#x5E76;&#x5728;constructor&#x5B9A;&#x4E49;&#x6A21;&#x578B;&#x53D8;&#x91CF;&#x5E76;&#x5177;&#x4F53;&#x4F7F;&#x7528;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;import { Injectable } from &apos;@nestjs/common&apos;;</span><br><span class="line">import { InjectModel } from &apos;@nestjs/sequelize&apos;;</span><br><span class="line">import { Sequelize } from &apos;sequelize-typescript&apos;;</span><br><span class="line">import { Users } from &apos;src/common/models/users.model&apos;;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">@Injectable()</span><br><span class="line">export class UsersService {</span><br><span class="line">  constructor(</span><br><span class="line">    ...</span><br><span class="line">    @InjectModel(Users)</span><br><span class="line">    private readonly usersModel: typeof Users, // &#x5B9A;&#x4E49;&#x5177;&#x4F53;&#x7684;&#x4F7F;&#x7528;&#x53D8;&#x91CF;</span><br><span class="line">  ) {}</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">  // &#x4FEE;&#x6539;&#x5BC6;&#x7801;</span><br><span class="line">  async editPassword(params) {</span><br><span class="line">    const user = await this.usersModel.findOne({ where: { id:  params.userId } });</span><br><span class="line">    if (user.password !== params.oldPass) {</span><br><span class="line">      return {</span><br><span class="line">        code: 500,</span><br><span class="line">        success: false,</span><br><span class="line">        message: &apos;&#x65E7;&#x5BC6;&#x7801;&#x6709;&#x8BEF;&apos;</span><br><span class="line">      }</span><br><span class="line">    } else {</span><br><span class="line">      let insertData = {</span><br><span class="line">        id: params.userId,</span><br><span class="line">        password: params.newPass,</span><br><span class="line">        hexPassword: getMd5Data(params.newPass)</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      const result = await this.usersModel.update(insertData, { where: {id: insertData.id} });</span><br><span class="line">      const userEditer = await this.usersModel.findOne({ where: { id:  params.userId } });</span><br><span class="line">      console.log(&apos;userEditer: &apos;, userEditer);</span><br><span class="line"></span><br><span class="line">      if (result &amp;&amp; result[0] === 1) {</span><br><span class="line">        await this.sendMail(userEditer);</span><br><span class="line">        return {</span><br><span class="line">          code: 200,</span><br><span class="line">          success: true,</span><br><span class="line">          message: &apos;&#x5BC6;&#x7801;&#x4FEE;&#x6539;&#x6210;&#x529F;&apos;</span><br><span class="line">        }</span><br><span class="line">      } else {</span><br><span class="line">        return {</span><br><span class="line">          code: 500,</span><br><span class="line">          success: false,</span><br><span class="line">          message: &apos;&#x66F4;&#x65B0;&#x5931;&#x8D25;&apos;</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5177;&#x4F53;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;&#x524D;&#x63D0;&#x662F;&#x5FC5;&#x987B;&#x8981;&#x4E8B;&#x5148;&#x5B9E;&#x73B0;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;&#xFF0C;&#x8FD9;&#x4E00;&#x70B9;&#x5012;&#x662F;&#x6BD4;Egg&#x76F8;&#x5BF9;&#x4E25;&#x8C28;&#x4E00;&#x4E9B;&#x3002;</p>
<h1 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h1><p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x6211;&#x5BF9;Egg&#x548C;Nest&#x5206;&#x522B;&#x5F00;&#x53D1;&#x76F8;&#x540C;&#x9879;&#x76EE;&#x7684;&#x4E00;&#x4E9B;&#x6BD4;&#x8F83;&#x611F;&#x53D7;&#xFF0C;&#x5728;&#x6211;&#x770B;&#x6765;Egg&#x7684;&#x601D;&#x60F3;&#x662F;&#x4FBF;&#x6377;&#xFF0C;&#x4E00;&#x4E2A;&#x50CF;&#x6211;&#x8FD9;&#x6837;&#x5BF9;&#x540E;&#x7AEF;&#x4E0D;&#x600E;&#x4E48;&#x4E86;&#x89E3;&#x7684;&#x5F00;&#x53D1;&#x8005;&#x53EA;&#x8981;&#x6309;&#x7167;&#x6587;&#x6863;&#xFF0C;&#x4F7F;&#x7528;&#x5BF9;&#x5E94;&#x7684;&#x63D2;&#x4EF6;&#x5C31;&#x53EF;&#x4EE5;&#x5F00;&#x53D1;&#x51FA;&#x4E00;&#x4E2A;&#x8FD8;&#x4E0D;&#x9519;&#x7684;&#x540E;&#x7AEF;&#x9879;&#x76EE;&#x3002;&#x800C;Nest&#x5219;&#x66F4;&#x52A0;&#x5F3A;&#x8C03;&#x89C4;&#x8303;&#xFF0C;&#x4E25;&#x683C;&#x7684;&#x4E09;&#x5C42;&#x67B6;&#x6784;&#xFF0C;&#x57FA;&#x4E8E;&#x6A21;&#x5757;&#x7684;&#x601D;&#x60F3;&#x548C;&#x88C5;&#x9970;&#x5668;&#x7684;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#xFF0C;&#x786E;&#x4FDD;&#x4E86;&#x5F00;&#x53D1;&#x8005;&#x80FD;&#x7F16;&#x5199;&#x51FA;&#x901A;&#x7528;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x5F00;&#x53D1;&#x8005;&#x5BF9;&#x9879;&#x76EE;&#x7684;&#x7EC4;&#x7EC7;&#x80FD;&#x529B;&#x4E5F;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x8981;&#x6C42;&#x3002;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x957F;&#x671F;&#x7EF4;&#x62A4;&#x7684;&#x540E;&#x7AEF;&#x9879;&#x76EE;&#xFF0C;&#x663E;&#x7136;&#x5F53;&#x4E0B;&#x6BD4;&#x8F83;&#x6D41;&#x884C;&#x7684;Nest.js&#x8FD8;&#x662F;&#x66F4;&#x80DC;&#x4E00;&#x7B79;&#x7684;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/6c67957c85dded928aa0e683e33bc814.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007289199904686094.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007289199904686094.html" itemprop="url">完蛋，公司被一条 update 语句干趴了！</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T13:43:47+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x662F;&#x5C0F;&#x6797;&#x3002;</p>
<p>&#x6628;&#x665A;&#x5728;&#x7FA4;&#x5212;&#x6C34;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x770B;&#x5230;&#x6709;&#x4F4D;&#x8BFB;&#x8005;&#x8BF4;&#x4E86;&#x8FD9;&#x4E48;&#x4E00;&#x4EF6;&#x4E8B;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/aa2380fc54c2eaf3e13e759bf7d4ed0fbde0716a9670839397573c2a04252aa0" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x5927;&#x6982;&#x5C31;&#x662F;&#xFF0C;&#x5728;&#x7EBF;&#x4E0A;&#x6267;&#x884C;&#x4E00;&#x6761; update &#x8BED;&#x53E5;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x5E93;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#xFF0C;where &#x6761;&#x4EF6;&#x6CA1;&#x6709;&#x5E26;&#x4E0A;&#x7D22;&#x5F15;&#xFF0C;&#x5BFC;&#x81F4;&#x4E1A;&#x52A1;&#x76F4;&#x63A5;&#x5D29;&#x4E86;&#xFF0C;&#x88AB;&#x8001;&#x677F;&#x6559;&#x8BAD;&#x4E86;&#x4E00;&#x6CE2;</p>
<p>&#x8FD9;&#x6B21;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x770B;&#x770B;&#xFF1A;</p>
<ul>
<li>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x7684;&#x4E8B;&#x6545;&#xFF1F;</li>
<li>&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x4E8B;&#x6545;&#x7684;&#x53D1;&#x751F;&#xFF1F;</li>
</ul>
<p>&#x8BF4;&#x4E2A;&#x524D;&#x63D0;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x8BF4;&#x7684;&#x6848;&#x4F8B;&#x90FD;&#x662F;&#x57FA;&#x4E8E; InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#xFF0C;&#x4E14;&#x4E8B;&#x52A1;&#x7684;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x662F;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x3002;</p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x7684;&#x4E8B;&#x6545;&#xFF1F;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x7684;&#x4E8B;&#x6545;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x7684;&#x4E8B;&#x6545;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x53D1;&#x751F;&#x8FD9;&#x79CD;&#x7684;&#x4E8B;&#x6545;&#xFF1F;</h3><p>InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x7684;&#x9ED8;&#x8BA4;&#x4E8B;&#x52A1;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x662F;&#x300C;&#x53EF;&#x91CD;&#x590D;&#x8BFB;&#x300D;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8FD9;&#x4E2A;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x4E0B;&#xFF0C;&#x5728;&#x591A;&#x4E2A;&#x4E8B;&#x52A1;&#x5E76;&#x53D1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x5E7B;&#x8BFB;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6240;&#x8C13;&#x7684;&#x5E7B;&#x8BFB;&#x662F;&#x6307;&#x5728;&#x540C;&#x4E00;&#x4E8B;&#x52A1;&#x4E0B;&#xFF0C;&#x8FDE;&#x7EED;&#x6267;&#x884C;&#x4E24;&#x6B21;&#x540C;&#x6837;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x53EF;&#x80FD;&#x4F1A;&#x8FD4;&#x56DE;&#x4E4B;&#x524D;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x884C;&#x3002;</p>
<p>&#x56E0;&#x6B64; InnoDB &#x5B58;&#x50A8;&#x5F15;&#x64CE;&#x81EA;&#x5DF1;&#x5B9E;&#x73B0;&#x4E86;&#x884C;&#x9501;&#xFF0C;&#x901A;&#x8FC7; next-key &#x9501;&#xFF08;&#x8BB0;&#x5F55;&#x9501;&#x548C;&#x95F4;&#x9699;&#x9501;&#x7684;&#x7EC4;&#x5408;&#xFF09;&#x6765;&#x9501;&#x4F4F;&#x8BB0;&#x5F55;&#x672C;&#x8EAB;&#x548C;&#x8BB0;&#x5F55;&#x4E4B;&#x95F4;&#x7684;&#x201C;&#x95F4;&#x9699;&#x201D;&#xFF0C;&#x9632;&#x6B62;&#x5176;&#x4ED6;&#x4E8B;&#x52A1;&#x5728;&#x8FD9;&#x4E2A;&#x8BB0;&#x5F55;&#x4E4B;&#x95F4;&#x63D2;&#x5165;&#x65B0;&#x7684;&#x8BB0;&#x5F55;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;&#x5E7B;&#x8BFB;&#x73B0;&#x8C61;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x6267;&#x884C; update &#x8BED;&#x53E5;&#x65F6;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4F1A;&#x5BF9;&#x8BB0;&#x5F55;&#x52A0;&#x72EC;&#x5360;&#x9501;&#xFF08;X &#x9501;&#xFF09;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x5176;&#x4ED6;&#x4E8B;&#x52A1;&#x5BF9;&#x6301;&#x6709;&#x72EC;&#x5360;&#x9501;&#x7684;&#x8BB0;&#x5F55;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x65F6;&#x662F;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#x7684;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x8FD9;&#x4E2A;&#x9501;&#x5E76;&#x4E0D;&#x662F;&#x6267;&#x884C;&#x5B8C; update &#x8BED;&#x53E5;&#x5C31;&#x4F1A;&#x91CA;&#x653E;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x4F1A;&#x7B49;&#x4E8B;&#x52A1;&#x7ED3;&#x675F;&#x65F6;&#x624D;&#x4F1A;&#x91CA;&#x653E;&#x3002;</p>
<p>&#x5728; InnoDB &#x4E8B;&#x52A1;&#x4E2D;&#xFF0C;&#x5BF9;&#x8BB0;&#x5F55;&#x52A0;&#x9501;&#x5E26;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#x662F; next-key &#x9501;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x56E0;&#x4E3A;&#x4E00;&#x4E9B;&#x6761;&#x4EF6;&#x4F1A;&#x9000;&#x5316;&#x6210;&#x95F4;&#x9699;&#x9501;&#xFF0C;&#x6216;&#x8005;&#x8BB0;&#x5F55;&#x9501;&#x3002;&#x52A0;&#x9501;&#x7684;&#x4F4D;&#x7F6E;&#x51C6;&#x786E;&#x7684;&#x8BF4;&#xFF0C;&#x9501;&#x662F;&#x52A0;&#x5728;&#x7D22;&#x5F15;&#x4E0A;&#x7684;&#x800C;&#x975E;&#x884C;&#x4E0A;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF0C;&#x5728; update &#x8BED;&#x53E5;&#x7684; where &#x6761;&#x4EF6;&#x4F7F;&#x7528;&#x4E86;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF0C;&#x90A3;&#x4E48; next-key &#x9501;&#x4F1A;&#x9000;&#x5316;&#x6210;&#x8BB0;&#x5F55;&#x9501;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53EA;&#x4F1A;&#x7ED9;&#x4E00;&#x884C;&#x8BB0;&#x5F55;&#x52A0;&#x9501;&#x3002;</p>
<p>&#x8FD9;&#x91CC;&#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C;&#x8FD9;&#x91CC;&#x6709;&#x4E00;&#x5F20;&#x6570;&#x636E;&#x5E93;&#x8868;&#xFF0C;&#x5176;&#x4E2D; id &#x4E3A;&#x4E3B;&#x952E;&#x7D22;&#x5F15;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/26194aacb4e98494bcba3ba3487d1206edb36c68343f48964c22182f22fdc633" alt></p>
<p>&#x5047;&#x8BBE;&#x6709;&#x4E24;&#x4E2A;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/d52e426e8893e2f690bb479b63a4919024f1af7a327ae681a764e3492ebfe6fe" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E8B;&#x52A1; A &#x7684; update &#x8BED;&#x53E5;&#x4E2D; where &#x662F;&#x7B49;&#x503C;&#x67E5;&#x8BE2;&#xFF0C;&#x5E76;&#x4E14; id &#x662F;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x4F1A;&#x5BF9; id = 1 &#x8FD9;&#x6761;&#x8BB0;&#x5F55;&#x52A0;&#x9501;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x4E8B;&#x52A1; B &#x7684;&#x66F4;&#x65B0;&#x64CD;&#x4F5C;&#x5E76;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;<strong>&#x5728; update &#x8BED;&#x53E5;&#x7684; where &#x6761;&#x4EF6;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x5C31;&#x4F1A;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x4F1A;&#x5BF9;&#x6240;&#x6709;&#x8BB0;&#x5F55;&#x52A0;&#x4E0A; next-key &#x9501;&#xFF08;&#x8BB0;&#x5F55;&#x9501; + &#x95F4;&#x9699;&#x9501;&#xFF09;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x628A;&#x6574;&#x4E2A;&#x8868;&#x9501;&#x4F4F;&#x4E86;</strong>&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6709;&#x4E24;&#x4E2A;&#x4E8B;&#x52A1;&#x7684;&#x6267;&#x884C;&#x987A;&#x5E8F;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/bebb798eecf9c2f820a8648091441db745ee5663167c3daf1b2f43f304382903" alt></p>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FD9;&#x6B21;&#x4E8B;&#x52A1; B &#x7684; update &#x8BED;&#x53E5;&#x88AB;&#x963B;&#x585E;&#x4E86;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x4E8B;&#x52A1; A&#x7684; update &#x8BED;&#x53E5;&#x4E2D; where &#x6761;&#x4EF6;&#x6CA1;&#x6709;&#x7D22;&#x5F15;&#x5217;&#xFF0C;&#x6240;&#x6709;&#x8BB0;&#x5F55;&#x90FD;&#x4F1A;&#x88AB;&#x52A0;&#x9501;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FD9;&#x6761; update &#x8BED;&#x53E5;&#x4EA7;&#x751F;&#x4E86; 4 &#x4E2A;&#x8BB0;&#x5F55;&#x9501;&#x548C; 5 &#x4E2A;&#x95F4;&#x9699;&#x9501;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x9501;&#x4F4F;&#x4E86;&#x5168;&#x8868;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/bc0f5eaab08f342af01883c0b4786d538d21417c449da1aed7c38c19b2c89f56" alt></p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x5F53;&#x5728;&#x6570;&#x636E;&#x91CF;&#x975E;&#x5E38;&#x5927;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8868;&#x6267;&#x884C; update &#x8BED;&#x53E5;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x5C31;&#x4F1A;&#x7ED9;&#x5168;&#x8868;&#x7684;&#x52A0;&#x4E0A; next-key &#x9501;&#xFF0C; &#x90A3;&#x4E48;&#x9501;&#x5C31;&#x4F1A;&#x6301;&#x7EED;&#x5F88;&#x957F;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#xFF0C;&#x76F4;&#x5230;&#x4E8B;&#x52A1;&#x7ED3;&#x675F;&#xFF0C;&#x800C;&#x8FD9;&#x671F;&#x95F4;&#x9664;&#x4E86; <code>select ... from</code> &#x8BED;&#x53E5;&#xFF0C;&#x5176;&#x4ED6;&#x8BED;&#x53E5;&#x90FD;&#x4F1A;&#x88AB;&#x9501;&#x4F4F;&#x4E0D;&#x80FD;&#x6267;&#x884C;&#xFF0C;&#x4E1A;&#x52A1;&#x4F1A;&#x56E0;&#x6B64;&#x505C;&#x6EDE;&#xFF0C;&#x63A5;&#x4E0B;&#x6765;&#x7B49;&#x7740;&#x4F60;&#x7684;&#xFF0C;&#x5C31;&#x662F;&#x8001;&#x677F;&#x7684;&#x6328;&#x9A82;&#x3002;</p>
<p>&#x90A3; update &#x8BED;&#x53E5;&#x7684; where &#x5E26;&#x4E0A;&#x7D22;&#x5F15;&#x5C31;&#x80FD;&#x907F;&#x514D;&#x5168;&#x8868;&#x8BB0;&#x5F55;&#x52A0;&#x9501;&#x4E86;&#x5417;&#xFF1F;</p>
<p>&#x5E76;&#x4E0D;&#x662F;&#x3002;</p>
<p><strong>&#x5173;&#x952E;&#x8FD8;&#x5F97;&#x770B;&#x8FD9;&#x6761;&#x8BED;&#x53E5;&#x5728;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x79CD;&#xFF0C;&#x4F18;&#x5316;&#x5668;&#x6700;&#x7EC8;&#x9009;&#x62E9;&#x7684;&#x662F;&#x7D22;&#x5F15;&#x626B;&#x63CF;&#xFF0C;&#x8FD8;&#x662F;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5982;&#x679C;&#x8D70;&#x4E86;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5C31;&#x4F1A;&#x5BF9;&#x5168;&#x8868;&#x7684;&#x8BB0;&#x5F55;&#x52A0;&#x9501;&#x4E86;</strong>&#x3002;</p>
<h3 id="&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x4E8B;&#x6545;&#x7684;&#x53D1;&#x751F;&#xFF1F;"><a href="#&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x4E8B;&#x6545;&#x7684;&#x53D1;&#x751F;&#xFF1F;" class="headerlink" title="&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x4E8B;&#x6545;&#x7684;&#x53D1;&#x751F;&#xFF1F;"></a>&#x53C8;&#x8BE5;&#x5982;&#x4F55;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x4E8B;&#x6545;&#x7684;&#x53D1;&#x751F;&#xFF1F;</h3><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06; MySQL &#x91CC;&#x7684; <code>sql_safe_updates</code> &#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A; 1&#xFF0C;&#x5F00;&#x542F;&#x5B89;&#x5168;&#x66F4;&#x65B0;&#x6A21;&#x5F0F;&#x3002;</p>
<blockquote>
<p>&#x5B98;&#x65B9;&#x7684;&#x89E3;&#x91CA;&#xFF1A;<br>If set to 1, MySQL aborts UPDATE or DELETE statements that do not use a key in the WHERE clause or a LIMIT clause. (Specifically, UPDATE statements must have a WHERE clause that uses a key or a LIMIT clause, or both. DELETE statements must have both.) This makes it possible to catch UPDATE or DELETE statements where keys are not used properly and that would probably change or delete a large number of rows. The default value is 0.</p>
</blockquote>
<p>&#x5927;&#x81F4;&#x7684;&#x610F;&#x601D;&#x662F;&#xFF0C;&#x5F53; sql_safe_updates &#x8BBE;&#x7F6E;&#x4E3A; 1 &#x65F6;&#x3002;</p>
<p>update &#x8BED;&#x53E5;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x5982;&#x4E0B;&#x6761;&#x4EF6;&#x4E4B;&#x4E00;&#x624D;&#x80FD;&#x6267;&#x884C;&#x6210;&#x529F;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528; where&#xFF0C;&#x5E76;&#x4E14; where &#x6761;&#x4EF6;&#x4E2D;&#x5FC5;&#x987B;&#x6709;&#x7D22;&#x5F15;&#x5217;&#xFF1B;</li>
<li>&#x4F7F;&#x7528; limit&#xFF1B;</li>
<li>&#x540C;&#x65F6;&#x4F7F;&#x7528; where &#x548C; limit&#xFF0C;&#x6B64;&#x65F6; where &#x6761;&#x4EF6;&#x4E2D;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x7D22;&#x5F15;&#x5217;&#xFF1B;</li>
</ul>
<p>delete &#x8BED;&#x53E5;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x5982;&#x4E0B;&#x6761;&#x4EF6;&#x4E4B;&#x4E00;&#x624D;&#x80FD;&#x6267;&#x884C;&#x6210;&#x529F;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528; where&#xFF0C;&#x5E76;&#x4E14; where &#x6761;&#x4EF6;&#x4E2D;&#x5FC5;&#x987B;&#x6709;&#x7D22;&#x5F15;&#x5217;&#xFF1B;</li>
<li>&#x540C;&#x65F6;&#x4F7F;&#x7528; where &#x548C; limit&#xFF0C;&#x6B64;&#x65F6; where &#x6761;&#x4EF6;&#x4E2D;&#x53EF;&#x4EE5;&#x6CA1;&#x6709;&#x7D22;&#x5F15;&#x5217;&#xFF1B;</li>
</ul>
<p>&#x5982;&#x679C; where &#x6761;&#x4EF6;&#x5E26;&#x4E0A;&#x4E86;&#x7D22;&#x5F15;&#x5217;&#xFF0C;&#x4F46;&#x662F;&#x4F18;&#x5316;&#x5668;&#x6700;&#x7EC8;&#x626B;&#x63CF;&#x9009;&#x62E9;&#x7684;&#x662F;&#x5168;&#x8868;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7D22;&#x5F15;&#x7684;&#x8BDD;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>force index([index_name])</code> &#x53EF;&#x4EE5;&#x544A;&#x8BC9;&#x4F18;&#x5316;&#x5668;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x7D22;&#x5F15;&#xFF0C;&#x4EE5;&#x6B64;&#x907F;&#x514D;&#x6709;&#x51E0;&#x7387;&#x9501;&#x5168;&#x8868;&#x5E26;&#x6765;&#x7684;&#x9690;&#x60A3;&#x3002;</p>
<h3 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h3><p>&#x4E0D;&#x8981;&#x5C0F;&#x770B;&#x4E00;&#x6761; update &#x8BED;&#x53E5;&#xFF0C;&#x5728;&#x751F;&#x4EA7;&#x673A;&#x4E0A;&#x4F7F;&#x7528;&#x4E0D;&#x5F53;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E1A;&#x52A1;&#x505C;&#x6EDE;&#xFF0C;&#x751A;&#x81F3;&#x5D29;&#x6E83;&#x3002;</p>
<p>&#x5F53;&#x6211;&#x4EEC;&#x8981;&#x6267;&#x884C; update &#x8BED;&#x53E5;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x786E;&#x4FDD; where &#x6761;&#x4EF6;&#x4E2D;&#x5E26;&#x4E0A;&#x4E86;&#x7D22;&#x5F15;&#x5217;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x6D4B;&#x8BD5;&#x673A;&#x786E;&#x8BA4;&#x8BE5;&#x8BED;&#x53E5;&#x662F;&#x5426;&#x8D70;&#x7684;&#x662F;&#x7D22;&#x5F15;&#x626B;&#x63CF;&#xFF0C;&#x9632;&#x6B62;&#x56E0;&#x4E3A;&#x626B;&#x63CF;&#x5168;&#x8868;&#xFF0C;&#x800C;&#x5BF9;&#x8868;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x8BB0;&#x5F55;&#x52A0;&#x4E0A;&#x9501;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6253;&#x5F00; MySQL sql_safe_updates &#x53C2;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x9884;&#x9632; update &#x64CD;&#x4F5C;&#x65F6; where &#x6761;&#x4EF6;&#x6CA1;&#x6709;&#x5E26;&#x4E0A;&#x7D22;&#x5F15;&#x5217;&#x3002;</p>
<p>&#x5982;&#x679C;&#x53D1;&#x73B0;&#x5373;&#x4F7F;&#x5728; where &#x6761;&#x4EF6;&#x4E2D;&#x5E26;&#x4E0A;&#x4E86;&#x5217;&#x7D22;&#x5F15;&#x5217;&#xFF0C;&#x4F18;&#x5316;&#x5668;&#x8D70;&#x7684;&#x8FD8;&#x662F;&#x5168;&#x6807;&#x626B;&#x63CF;&#xFF0C;&#x8FD9;&#x65F6;&#x6211;&#x4EEC;&#x5C31;&#x8981;&#x4F7F;&#x7528; <code>force index([index_name])</code> &#x53EF;&#x4EE5;&#x544A;&#x8BC9;&#x4F18;&#x5316;&#x5668;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x7D22;&#x5F15;&#x3002;</p>
<p>&#x8FD9;&#x6B21;&#x5C31;&#x8BF4;&#x5230;&#x8FD9;&#x5566;&#xFF0C;&#x4E0B;&#x6B21;&#x8981;&#x5C0F;&#x5FC3;&#x70B9;&#xFF0C;&#x522B;&#x518D;&#x88AB;&#x8001;&#x677F;&#x6328;&#x9A82;&#x5566;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/5f974c8874012edcebf852fd58d5df83.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007244097664745502.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007244097664745502.html" itemprop="url">火山引擎 A/B 测试的思考与实践</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T10:46:17+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>&#x672C;&#x6587;&#x6574;&#x7406;&#x81EA;&#x706B;&#x5C71;&#x5F15;&#x64CE;&#x5F00;&#x53D1;&#x8005;&#x793E;&#x533A; Meetup &#x7B2C;&#x56DB;&#x671F;&#x540C;&#x540D;&#x6F14;&#x8BB2;&#xFF0C;&#x4E3B;&#x8981;&#x4E3A;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x4E86;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A; A/B &#x6D4B;&#x8BD5;&#x3001;&#x706B;&#x5C71;&#x5F15;&#x64CE; A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x67B6;&#x6784;&#x53CA;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x3002;</p>
</blockquote>
<h2 id="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A;-A-B-&#x6D4B;&#x8BD5;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A;-A-B-&#x6D4B;&#x8BD5;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A; A/B &#x6D4B;&#x8BD5;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A; A/B &#x6D4B;&#x8BD5;</h2><p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x770B;&#x4E00;&#x4E2A;&#x6848;&#x4F8B;&#x3002;&#x5B57;&#x8282;&#x8DF3;&#x52A8;&#x6709;&#x4E00;&#x6B3E;&#x4E2D;&#x89C6;&#x9891;&#x4EA7;&#x54C1;&#x53EB;&#x897F;&#x74DC;&#x89C6;&#x9891;&#xFF0C;&#x6700;&#x65E9;&#x5B83;&#x53EB;&#x505A;&#x5934;&#x6761;&#x89C6;&#x9891;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x5347;&#x4EA7;&#x54C1;&#x7684;&#x54C1;&#x724C;&#x8FA8;&#x8BC6;&#x5EA6;&#xFF0C;&#x56E2;&#x961F;&#x60F3;&#x7ED9;&#x5B83;&#x8D77;&#x4E2A;&#x66F4;&#x597D;&#x7684;&#x540D;&#x5B57;&#x3002;&#x7ECF;&#x8FC7;&#x4E00;&#x4E9B;&#x5185;&#x90E8;&#x8C03;&#x7814;&#x548C;&#x5934;&#x8111;&#x98CE;&#x66B4;&#xFF0C;&#x5F81;&#x96C6;&#x5230;&#x4E86;&#x897F;&#x74DC;&#x89C6;&#x9891;&#x3001;&#x5947;&#x5999;&#x89C6;&#x9891;&#x3001;&#x7B77;&#x5B50;&#x89C6;&#x9891;&#x3001;&#x9633;&#x5149;&#x89C6;&#x9891; 4 &#x4E2A;&#x540D;&#x5B57;&#xFF0C;&#x4E8E;&#x662F;&#x56E2;&#x961F;&#x5C31;&#x9488;&#x5BF9;&#x4E00;&#x5171; 5 &#x4E2A; APP &#x540D;&#x79F0;&#x8FDB;&#x884C;&#x4E86; A/B &#x5B9E;&#x9A8C;&#x3002;&#x8FD9;&#x4E2A;&#x5B9E;&#x9A8C;&#x4E2D;&#x552F;&#x4E00;&#x6539;&#x53D8;&#x7684;&#x662F;&#x5E94;&#x7528;&#x5E02;&#x573A;&#x91CC;&#x8BE5;&#x4EA7;&#x54C1;&#x7684;&#x540D;&#x79F0;&#x548C;&#x5BF9;&#x5E94;&#x7684; logo&#xFF0C;&#x5B9E;&#x9A8C;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x9A8C;&#x8BC1;&#x54EA;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x540D;&#x79F0;&#x80FD;&#x66F4;&#x597D;&#x5730;&#x63D0;&#x5347;&#x201C;&#x5934;&#x6761;&#x89C6;&#x9891;&#x201D; APP &#x5728;&#x5E94;&#x7528;&#x5546;&#x5E97;&#x7684;&#x70B9;&#x51FB;&#x7387;&#x3002;&#x6700;&#x540E;&#x897F;&#x74DC;&#x89C6;&#x9891;&#x548C;&#x5947;&#x5999;&#x89C6;&#x9891;&#x7684;&#x70B9;&#x51FB;&#x7387;&#x4F4D;&#x5217;&#x524D;&#x4E8C;&#xFF0C;&#x4F46;&#x5DEE;&#x8DDD;&#x4E0D;&#x663E;&#x8457;&#xFF0C;&#x7ED3;&#x5408;&#x7528;&#x6237;&#x8C03;&#x6027;&#x7B49;&#x56E0;&#x7D20;&#x7684;&#x7EFC;&#x5408;&#x8003;&#x91CF;&#x540E;&#xFF0C;&#x6700;&#x7EC8;&#x51B3;&#x5B9A;&#x5934;&#x6761;&#x89C6;&#x9891;&#x6B63;&#x5F0F;&#x66F4;&#x540D;&#x4E3A;&#x897F;&#x74DC;&#x89C6;&#x9891;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x8FD9;&#x4E2A;&#x6848;&#x4F8B;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x4E1A;&#x52A1;&#x505A;&#x6700;&#x7EC8;&#x51B3;&#x7B56;&#x3002;&#x7ED3;&#x5408;&#x6848;&#x4F8B;&#x7684;&#x76F4;&#x89C2;&#x611F;&#x53D7;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x6765;&#x5B9A;&#x4E49; A/B &#x6D4B;&#x8BD5;&#xFF1A;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x5BF9;&#x76EE;&#x6807;&#x53D7;&#x4F17;&#x505A;&#x79D1;&#x5B66;&#x62BD;&#x6837;&#x3001;&#x5206;&#x7EC4;&#x6D4B;&#x8BD5;&#x4EE5;&#x8BC4;&#x4F30;&#x6548;&#x679C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b5c625adcecad7db13fd385d53a1d833816f45d238ce802f22fe46e92d89db9a" alt></p>
<p>&#x4EE5;&#x4E0A;&#x56FE;&#x56FE;&#x793A;&#x4E3A;&#x4F8B;&#xFF0C;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x6709; 100 &#x4E07;&#x7528;&#x6237;&#x8981;&#x8FDB;&#x884C; A/B &#x6D4B;&#x8BD5;&#xFF1A;</p>
<ul>
<li>&#x5148;&#x9009;&#x5B9A;&#x76EE;&#x6807;&#x53D7;&#x4F17;&#xFF0C;&#x6BD4;&#x5982;&#x4E00;&#x7EBF;&#x57CE;&#x5E02;&#x7684;&#x7528;&#x6237;&#x3002;</li>
<li>A/B &#x6D4B;&#x8BD5;&#x4E0D;&#x53EF;&#x80FD;&#x5BF9;&#x6240;&#x6709;&#x7528;&#x6237;&#x90FD;&#x8FDB;&#x884C;&#x5B9E;&#x9A8C;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x8FDB;&#x884C;&#x79D1;&#x5B66;&#x62BD;&#x6837;&#xFF0C;&#x9009;&#x62E9;&#x5C0F;&#x90E8;&#x5206;&#x6D41;&#x91CF;&#x8FDB;&#x884C;&#x5B9E;&#x9A8C;&#x3002;</li>
<li>&#x62BD;&#x6837;&#x4E4B;&#x540E;&#x9700;&#x8981;&#x5BF9;&#x6837;&#x672C;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#xFF0C;&#x6BD4;&#x5982; A &#x7EC4;&#x4FDD;&#x6301;&#x73B0;&#x72B6;&#xFF0C;B &#x7EC4;&#x7684;&#x67D0;&#x4E00;&#x4E2A;&#x56E0;&#x7D20;&#x6709;&#x6240;&#x6539;&#x53D8;&#x3002;</li>
<li>&#x5206;&#x7EC4;&#x4E4B;&#x540E;&#x5728;&#x540C;&#x4E00;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x5B9E;&#x9A8C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6539;&#x53D8;&#x53D8;&#x91CF;&#x540E;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x7684;&#x53D8;&#x5316;&#x3002;</li>
<li>&#x518D;&#x6839;&#x636E;&#x5BF9;&#x5E94;&#x5B9E;&#x9A8C;&#x76EE;&#x6807;&#x7684;&#x6307;&#x6807;&#xFF0C;&#x6BD4;&#x5982;&#x70B9;&#x51FB;&#x7387;&#x7684;&#x9AD8;&#x4F4E;&#xFF0C;&#x6765;&#x8BC4;&#x4F30;&#x5B9E;&#x9A8C;&#x7684;&#x7ED3;&#x679C;&#x3002;</li>
</ul>
<p>&#x4EE5;&#x4E0A;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5BF9; A/B &#x6D4B;&#x8BD5;&#x7684;&#x5B9A;&#x4E49;&#x3002;&#x76EE;&#x524D;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x5DF2;&#x88AB; Google&#x3001;Facebook&#x3001;&#x4E9A;&#x9A6C;&#x900A;&#x7B49;&#x5927;&#x578B;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x5E7F;&#x6CDB;&#x91C7;&#x7528;&#xFF1B;&#x5B57;&#x8282;&#x8DF3;&#x52A8;&#x66F4;&#x662F;&#x5728; 2012 &#x5E74;&#x6210;&#x7ACB;&#x4E4B;&#x521D;&#x4FBF;&#x5F00;&#x59CB;&#x4F7F;&#x7528; A/B &#x6D4B;&#x8BD5;&#xFF0C;&#x516C;&#x53F8;&#x5185;&#x90E8;&#x4E00;&#x76F4;&#x6D41;&#x4F20;&#x4E00;&#x53E5;&#x8BDD;&#xFF1A;&#x4E00;&#x5207;&#x7686;&#x53EF; A/B &#x6D4B;&#x8BD5;&#x3002;A/B &#x6D4B;&#x8BD5;&#x5728;&#x5B57;&#x8282;&#x8DF3;&#x52A8;&#x5DF2;&#x662F;&#x975E;&#x5E38;&#x57FA;&#x7840;&#x7684;&#x8BBE;&#x65BD;&#x548C;&#x6587;&#x5316;&#xFF0C;&#x76EE;&#x524D;&#xFF0C;&#x5B57;&#x8282;&#x8DF3;&#x52A8;&#x7D2F;&#x8BA1;&#x5DF2;&#x6709; 80W+ &#x7684; A/B &#x5B9E;&#x9A8C;&#xFF0C;&#x65E5;&#x65B0;&#x589E;&#x5B9E;&#x9A8C; 1500+&#xFF0C;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x8BD5;&#x9A8C; 1W+&#xFF0C;&#x670D;&#x52A1; 500+ &#x4E1A;&#x52A1;&#x7EBF;&#x3002;</p>
<p>&#x90A3;&#x6211;&#x4EEC;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A; A/B &#x6D4B;&#x8BD5;&#x5462;&#xFF1F;&#x6211;&#x603B;&#x7ED3;&#x6709; 3 &#x70B9;&#x539F;&#x56E0;&#xFF1A;</p>
<ul>
<li><strong>&#x98CE;&#x9669;&#x63A7;&#x5236;</strong>&#xFF1A;&#x5C0F;&#x6D41;&#x91CF;&#x5B9E;&#x9A8C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x76F4;&#x63A5;&#x4E0A;&#x7EBF;&#x6548;&#x679C;&#x4E0D;&#x597D;&#x9020;&#x6210;&#x635F;&#x5931;&#x3002;&#x5176;&#x6B21;&#xFF0C;&#x5B9E;&#x9A8C;&#x8FED;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x51B3;&#x7B56;&#x90FD;&#x662F;&#x6709;&#x79D1;&#x5B66;&#x4F9D;&#x636E;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x7CFB;&#x7EDF;&#x6027;&#x7684;&#x504F;&#x5DEE;&#x3002;</li>
<li><strong>&#x56E0;&#x679C;&#x63A8;&#x65AD;</strong>&#xFF1A;&#x6211;&#x4EEC;&#x76F8;&#x4FE1; A/B &#x5B9E;&#x9A8C;&#x4E2D;&#x7684;&#x4F18;&#x5316;&#x548C;&#x6539;&#x53D8;&#x6700;&#x7EC8;&#x80FD;&#x5F71;&#x54CD;&#x5230;&#x7EBF;&#x4E0A;&#x6570;&#x636E;&#x4EE5;&#x53CA;&#x7528;&#x6237;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x5C31;&#x662F;&#x6700;&#x597D;&#x7684;&#x56E0;&#x679C;&#x63A8;&#x65AD;&#x5DE5;&#x5177;&#x3002;</li>
<li><strong>&#x590D;&#x5229;&#x6548;&#x5E94;</strong>&#xFF1A;A/B &#x6D4B;&#x8BD5;&#x662F;&#x53EF;&#x4EE5;&#x6301;&#x7EED;&#x4E0D;&#x65AD;&#x8FDB;&#x884C;&#x7684;&#x5B9E;&#x9A8C;&#xFF0C;&#x5373;&#x4F7F;&#x4E00;&#x6B21;&#x5B9E;&#x9A8C;&#x63D0;&#x5347;&#x7684;&#x6548;&#x679C;&#x4E0D;&#x5927;&#xFF0C;&#x4F46;&#x662F;&#x957F;&#x671F;&#x4E0B;&#x6765;&#x590D;&#x5229;&#x6548;&#x5E94;&#x7684;&#x79EF;&#x7D2F;&#x4F1A;&#x4EA7;&#x751F;&#x5F88;&#x5927;&#x7684;&#x53D8;&#x5316;&#x548C;&#x56DE;&#x62A5;&#x3002;</li>
</ul>
<h2 id="A-B-&#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;"><a href="#A-B-&#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;" class="headerlink" title="A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;"></a>A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;</h2><p>&#x4E86;&#x89E3;&#x4E86;&#x6211;&#x4EEC;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A; A/B &#x6D4B;&#x8BD5;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E0B;&#x706B;&#x5C71;&#x5F15;&#x64CE;&#x7684; A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x662F;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/5ececb40cd99d8020d9862785ff08073fd84417ad942e26be5ab34984dd9ce27" alt></p>
<p>&#x4E0A;&#x56FE;&#x662F;&#x706B;&#x5C71;&#x5F15;&#x64CE; A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x7684;&#x67B6;&#x6784;&#x793A;&#x610F;&#x56FE;&#xFF0C;&#x6574;&#x4F53;&#x67B6;&#x6784;&#x5206;&#x4E3A;&#x51E0;&#x5C42;&#xFF1A;</p>
<ul>
<li><strong>&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x5C42;</strong>&#xFF1A;&#x5728;&#x6700;&#x5E95;&#x5C42;&#xFF0C;&#x670D;&#x52A1;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x5BB9;&#x5668;&#x5185;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x5728;&#x7269;&#x7406;&#x673A;&#x4E0A;&#x3002;</li>
<li><strong>&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x5C42;</strong>&#xFF1A;&#x4F1A;&#x7528;&#x5230;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x548C;&#x952E;&#x503C;&#x5BF9;&#x3002;&#x56E0;&#x4E3A; A/B &#x6D4B;&#x8BD5;&#x8981;&#x5904;&#x7406;&#x5F88;&#x5927;&#x7684;&#x6570;&#x636E;&#x91CF;&#xFF0C;&#x8FD9;&#x4E00;&#x5C42;&#x4E5F;&#x4F1A;&#x4F7F;&#x7528;&#x79BB;&#x7EBF;&#x548C;&#x5B9E;&#x65F6;&#x7684;&#x5927;&#x6570;&#x636E;&#x7EC4;&#x4EF6;&#x3002;</li>
<li><strong>&#x670D;&#x52A1;&#x5C42;</strong>&#xFF1A;&#x5305;&#x62EC;&#x5B9E;&#x9A8C;&#x6240;&#x9700;&#x7684;&#x5206;&#x6D41;&#x670D;&#x52A1;&#x3001;&#x5143;&#x4FE1;&#x606F;&#x670D;&#x52A1;&#x3001;&#x8C03;&#x5EA6;&#x670D;&#x52A1;&#x7B49;&#x3002;&#x5728; A/B &#x6D4B;&#x8BD5;&#x4E2D;&#x6211;&#x4EEC;&#x4E5F;&#x9700;&#x8981;&#x6807;&#x8BC6;&#x7528;&#x6237;&#xFF0C;&#x56E0;&#x6B64;&#x8FD9;&#x4E00;&#x5C42;&#x6709;&#x8BBE;&#x5907;&#x670D;&#x52A1;&#x3002;&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;&#x591A;&#x79CD;&#x6570;&#x636E;&#x67E5;&#x8BE2;&#xFF0C;&#x8FD8;&#x6709; OLAP &#x5F15;&#x64CE;&#x3002;</li>
<li><strong>&#x4E1A;&#x52A1;&#x5C42;</strong>&#xFF1A;&#x5305;&#x62EC;&#x5B9E;&#x9A8C;&#x7BA1;&#x7406;&#x3001;&#x6307;&#x6807;&#x7BA1;&#x7406;&#x3001;Feature &#x7BA1;&#x7406;&#x3001;&#x8BC4;&#x4F30;&#x62A5;&#x544A;&#x7B49;&#x3002;</li>
<li><strong>&#x63A5;&#x5165;&#x5C42;</strong>&#xFF1A;&#x5305;&#x62EC; CDN&#x3001;&#x7F51;&#x7EDC;&#x9632;&#x706B;&#x5899;&#x3001;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3002;</li>
<li><strong>&#x5E94;&#x7528;&#x5C42;</strong>&#xFF1A;&#x63D0;&#x4F9B;&#x7BA1;&#x7406;&#x540E;&#x53F0;&#x63A7;&#x5236;&#x5B9E;&#x9A8C;&#x3001;&#x67E5;&#x770B;&#x62A5;&#x544A;&#x7B49;&#xFF0C;SDK &#x8C03;&#x7528;&#x3002;</li>
</ul>
<p>&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x51E0;&#x4E2A;&#x5B9E;&#x9A8C;&#x6D41;&#x7A0B;&#x7684;&#x5B9E;&#x73B0;&#x3002;</p>
<h3 id="&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;"><a href="#&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;"></a>&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/3d7c944f72b4df88884dac4616c9865932c3a14228f6cc62fdb592b919c26ebb" alt></p>
<p>&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x9A8C;&#x7684;&#x6D41;&#x7A0B;&#x5982;&#x4E0A;&#x56FE;&#x6240;&#x793A;&#xFF1A;</p>
<ul>
<li>&#x4E1A;&#x52A1;&#x65B9;&#x5F00;&#x53D1;&#x7B56;&#x7565;&#xFF0C;&#x786E;&#x5B9A;&#x5B9E;&#x9A8C;&#x5185;&#x5BB9;&#xFF1B;</li>
<li>&#x679A;&#x4E3E;&#x7B56;&#x7565;&#x4E2D;&#x7684;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#x5E76;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x73B0;&#x6620;&#x5C04;&#x5173;&#x7CFB;&#xFF1B;</li>
<li>&#x521B;&#x5EFA;&#x5E76;&#x5F00;&#x542F;&#x5B9E;&#x9A8C;&#xFF1B;</li>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x5DF2;&#x7ECF;&#x96C6;&#x6210;&#x4E86;&#x706B;&#x5C71;&#x5F15;&#x64CE; A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x7684; SDK&#xFF0C;&#x5411; A/B &#x6D4B;&#x8BD5;&#x7CFB;&#x7EDF;&#x8BF7;&#x6C42;&#x5206;&#x6D41;&#x670D;&#x52A1;&#xFF0C;&#x5224;&#x65AD;&#x7528;&#x6237;&#x547D;&#x4E2D;&#x54EA;&#x4E9B;&#x5B9E;&#x9A8C;&#x54EA;&#x4E9B;&#x7248;&#x672C;&#xFF0C;&#x4E0B;&#x53D1;&#x53C2;&#x6570;&#xFF1B;</li>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x4ECE; SDK &#x53D6;&#x5230;&#x53C2;&#x6570;&#xFF0C;&#x8FDB;&#x884C;&#x76F8;&#x5BF9;&#x5E94;&#x7684;&#x6D41;&#x7A0B;&#x5B8C;&#x6210;&#x5B9E;&#x9A8C;&#x3002;</li>
</ul>
<h3 id="&#x670D;&#x52A1;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;"><a href="#&#x670D;&#x52A1;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x670D;&#x52A1;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;"></a>&#x670D;&#x52A1;&#x7AEF;&#x5B9E;&#x9A8C;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x53CA;&#x751F;&#x6548;&#x8FC7;&#x7A0B;</h3><p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b5c9c77d89dadcf5cdde994c1409a859db66c2e2b6b0cce59a7fb555cda26870" alt></p>
<p>&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x5B9E;&#x9A8C;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x7C7B;&#x4F3C;&#xFF1A;</p>
<ul>
<li>&#x8BBE;&#x8BA1;&#x5B9E;&#x9A8C;&#xFF1B;</li>
<li>&#x670D;&#x52A1;&#x7AEF;&#x5B9E;&#x9A8C;&#x7684; SDK &#x662F;&#x8DDF;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x6BD4;&#x5982;&#x670D;&#x52A1;&#x7AEF;&#x96C6;&#x6210;&#x5728;&#x4E00;&#x8D77;&#x3002;&#x5BA2;&#x6237;&#x662F;&#x4ECE;&#x5176;&#x4ED6; C &#x7AEF;&#x7528;&#x6237;&#x76F4;&#x63A5;&#x8BF7;&#x6C42;&#x4E1A;&#x52A1;&#x7684;&#x670D;&#x52A1;&#x7AEF;&#xFF0C;&#x8BE5;&#x670D;&#x52A1;&#x7AEF;&#x4F1A;&#x5728;&#x672C;&#x5730; SDK &#x505A;&#x51B3;&#x7B56;&#xFF1B;</li>
<li>&#x51B3;&#x7B56;&#x5B8C;&#x4E4B;&#x540E;&#x5C06;&#x53C2;&#x6570;&#x4E0B;&#x53D1;&#x5230;&#x4E0B;&#x6E38;&#xFF0C;&#x4F7F;&#x7B56;&#x7565;&#x751F;&#x6548;&#x3002;</li>
</ul>
<h2 id="&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x5B9E;&#x8DF5;"><a href="#&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x5B9E;&#x8DF5;" class="headerlink" title="&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x5B9E;&#x8DF5;"></a>&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x5B9E;&#x8DF5;</h2><p>&#x5728;&#x7EDF;&#x8BA1;&#x5206;&#x6790;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x603B;&#x7ED3;&#x4E86;&#x4E00;&#x4E9B;&#x6709;&#x7528;&#x7684;&#x5B9E;&#x8DF5;&#x7ECF;&#x9A8C;&#xFF1A;</p>
<ul>
<li><strong>&#x786E;&#x5B9A;&#x4E1A;&#x52A1;&#x7684;&#x6307;&#x6807;&#x4F53;&#x7CFB;</strong>&#xFF1A;&#x53EF;&#x4EE5;&#x4ECE;&#x5B8F;&#x89C2;/&#x5FAE;&#x89C2;&#x3001;&#x957F;&#x671F;/&#x77ED;&#x671F;&#x3001;&#x6A2A;&#x5411;/&#x7EB5;&#x5411;&#x4E09;&#x4E2A;&#x89D2;&#x5EA6;&#x5EFA;&#x8BBE;&#x6307;&#x6807;&#x4F53;&#x7CFB;&#x3002;</li>
<li><strong>&#x5206;&#x7C7B;&#x68C0;&#x9A8C;</strong>&#xFF1A;&#x5BF9;&#x6307;&#x6807;&#x8FDB;&#x884C;&#x7F6E;&#x4FE1;&#x5EA6;&#x8BA1;&#x7B97;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x6BCF;&#x6B21;&#x90FD;&#x7528;&#x540C;&#x4E00;&#x5957;&#x65B9;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x6307;&#x6807;&#x7C7B;&#x578B;&#xFF08;&#x5305;&#x62EC;&#x8F6C;&#x5316;&#x7C7B;&#x3001;&#x4EBA;&#x5747;&#x7C7B;&#x3001;CTR &#x7C7B;&#x7B49;&#xFF09;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x5EFA;&#x6A21;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
<li><strong>&#x7EDF;&#x8BA1;&#x4FEE;&#x6B63;</strong>&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x5B9E;&#x9A8C;&#x5F00;&#x4E86;&#x591A;&#x4E2A;&#x7EC4;&#xFF0C;&#x53EF;&#x80FD;&#x72AF;&#x4E86;&#x591A;&#x91CD;&#x6BD4;&#x8F83;&#x7684;&#x9519;&#x8BEF;&#x3002;&#x8FD8;&#x6709;&#x65F6;&#x5F00;&#x5B8C;&#x5B9E;&#x9A8C;&#x4E4B;&#x540E;&#x6BCF;&#x5929;&#x90FD;&#x4F1A;&#x67E5;&#x770B;&#x7ED3;&#x679C;&#xFF0C;&#x8FD9;&#x5C31;&#x72AF;&#x4E86;&#x8FDE;&#x7EED;&#x89C2;&#x6D4B;&#x7684;&#x9519;&#x8BEF;&#x3002;&#x6240;&#x4EE5;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x9700;&#x8981;&#x6709;&#x4E00;&#x4E9B;&#x7EDF;&#x8BA1;&#x4FEE;&#x6B63;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x4FEE;&#x6B63;&#x884C;&#x4E3A;&#x3002;</li>
<li><strong>&#x57FA;&#x4E8E;&#x53F6;&#x8D1D;&#x65AF;&#x4F53;&#x7CFB;&#x7684;&#x63A2;&#x7D22;</strong>&#xFF1A;&#x533A;&#x522B;&#x4E8E;&#x7ECF;&#x5178;&#x7684;&#x5047;&#x8BBE;&#x68C0;&#x9A8C;&#xFF0C;&#x6211;&#x4EEC;&#x4E5F;&#x5728;&#x63A2;&#x7D22;&#x57FA;&#x4E8E;&#x53F6;&#x8D1D;&#x65AF;&#x4F53;&#x7CFB;&#xFF0C;&#x5982;&#x4F55;&#x8BC4;&#x4F30;&#x5B9E;&#x9A8C;&#x6548;&#x679C;&#xFF0C;&#x964D;&#x4F4E;&#x9762;&#x5411;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x65F6;&#x5019;&#x7684;&#x7406;&#x89E3;&#x95E8;&#x69DB;&#x3002;&#x5728;&#x667A;&#x80FD;&#x6D41;&#x91CF;&#x8C03;&#x4F18;&#x3001;&#x6A21;&#x578B;&#x8D85;&#x53C2;&#x6570;&#x641C;&#x7D22;&#x7B49;&#x573A;&#x666F;&#x4E0B;&#x6709;&#x5177;&#x4F53;&#x843D;&#x5730;&#x3002;</li>
</ul>
<p>&#x8FD9;&#x91CC;&#x4E5F;&#x8DDF;&#x5927;&#x5BB6;&#x5206;&#x4EAB;&#x4E00;&#x4E9B; A/B &#x5B9E;&#x9A8C;&#x8BBE;&#x8BA1;&#x80CC;&#x540E;&#x7684;&#x601D;&#x8003;&#xFF1A;</p>
<ul>
<li><strong>&#x907F;&#x514D;&#x8FC7;&#x5EA6;&#x66DD;&#x5149;</strong>&#xFF1A;A/B &#x5B9E;&#x9A8C;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x5173;&#x952E;&#x7684;&#x70B9;&#x662F;&#x51B3;&#x7B56;&#x54EA;&#x4E9B;&#x6837;&#x672C;&#x5E94;&#x8BE5;&#x8FDB;&#x5165;&#x5B9E;&#x9A8C;&#x3002;&#x5982;&#x679C;&#x6240;&#x6709;&#x6253;&#x5F00;&#x5E94;&#x7528;&#x7684;&#x4EBA;&#x90FD;&#x80FD;&#x547D;&#x4E2D;&#x5B9E;&#x9A8C;&#xFF0C;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#x5C31;&#x4E0D;&#x4F1A;&#x5F88;&#x660E;&#x663E;&#x3002;</li>
<li><strong>&#x8FDB;&#x7EC4;&#x548C;&#x51FA;&#x7EC4;</strong>&#xFF1A;&#x5047;&#x8BBE;&#x6211;&#x4EEC;&#x5BF9;&#x5317;&#x4EAC;&#x7684;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x4E86;&#x5B9E;&#x9A8C;&#xFF0C;&#x6709;&#x4E9B;&#x4EBA;&#x51FA;&#x5DEE;&#x6216;&#x8005;&#x65C5;&#x6E38;&#x79BB;&#x5F00;&#x5317;&#x4EAC;&#x4E4B;&#x540E;&#x8FD8;&#x80FD;&#x547D;&#x4E2D;&#x5B9E;&#x9A8C;&#x5417;&#xFF1F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A;&#x8FD9;&#x4E2A;&#x51B3;&#x7B56;&#x7559;&#x7ED9;&#x5B9E;&#x9A8C;&#x8005;&#xFF0C;&#x8BA9;&#x5B9E;&#x9A8C;&#x8005;&#x81EA;&#x5DF1;&#x51B3;&#x5B9A;&#x662F;&#x8FDB;&#x7EC4;&#x8FD8;&#x662F;&#x51FA;&#x7EC4;&#x3002;</li>
<li><strong>&#x548C; Feature Flag &#x7684;&#x73E0;&#x8054;&#x74A7;&#x5408;</strong>&#xFF1A;&#x5B9E;&#x9A8C;&#x4E4B;&#x524D;&#x53EF;&#x4EE5;&#x628A;&#x80FD;&#x8FDB;&#x884C;&#x5B9E;&#x9A8C;&#x7684;&#x5185;&#x5BB9;&#x62BD;&#x8C61;&#x6210; Feature Flag&#xFF0C;&#x7B80;&#x5355;&#x7406;&#x89E3;&#x6210;&#x529F;&#x80FD;&#x5F00;&#x5173;&#x3002;&#x5B9E;&#x9A8C;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#x7684;&#x4E0A;&#x7EBF;&#x6216;&#x8005;&#x91CD;&#x590D;&#x5B9E;&#x9A8C;&#xFF0C;&#x4E5F;&#x53EF;&#x7528; Feature Flag &#x8FDB;&#x884C;&#x7BA1;&#x7406;&#x3002;</li>
</ul>
<h2 id="&#x5B57;&#x8282;&#x8DF3;&#x52A8;-A-B-&#x6D4B;&#x8BD5;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"><a href="#&#x5B57;&#x8282;&#x8DF3;&#x52A8;-A-B-&#x6D4B;&#x8BD5;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;" class="headerlink" title="&#x5B57;&#x8282;&#x8DF3;&#x52A8; A/B &#x6D4B;&#x8BD5;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;"></a>&#x5B57;&#x8282;&#x8DF3;&#x52A8; A/B &#x6D4B;&#x8BD5;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;</h2><p>&#x5728;&#x5B57;&#x8282;&#x8DF3;&#x52A8;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x5DF2;&#x7ECF;&#x662F;&#x4E00;&#x79CD;&#x4F01;&#x4E1A;&#x6587;&#x5316;&#xFF0C;&#x5927;&#x5BB6;&#x90FD;&#x8BA4;&#x53EF;&#x5176;&#x4EF7;&#x503C;&#xFF0C;&#x8FBE;&#x6210;&#x5171;&#x8BC6;&#x624D;&#x80FD;&#x4E00;&#x8D77;&#x63A2;&#x8BA8;&#x3002;A/B &#x6D4B;&#x8BD5;&#x8DDF;&#x5176;&#x4ED6;&#x73AF;&#x8282;&#x662F;&#x7D27;&#x5BC6;&#x76F8;&#x5173;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5728;&#x6536;&#x96C6;&#x548C;&#x5206;&#x6790;&#x6570;&#x636E;&#x4E4B;&#x540E;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E9B;&#x6D1E;&#x5BDF;&#xFF0C;&#x57FA;&#x4E8E;&#x8FD9;&#x4E9B;&#x6D1E;&#x5BDF;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x6709;&#x4E9B;&#x73AF;&#x8282;&#x662F;&#x6BD4;&#x8F83;&#x8584;&#x5F31;&#x7684;&#xFF0C;&#x53EF;&#x8FDB;&#x884C;&#x63D0;&#x5347;&#xFF0C;&#x7136;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x63D0;&#x51FA;&#x5047;&#x8BBE;&#xFF0C;&#x8BBE;&#x8BA1; A/B &#x5B9E;&#x9A8C;&#xFF0C;&#x5B8C;&#x6210;&#x5B9E;&#x9A8C;&#x4E4B;&#x540E;&#x8BC4;&#x4F30;&#x6548;&#x679C;&#x3002;&#x6709;&#x53EF;&#x80FD;&#x5B9E;&#x9A8C;&#x6CA1;&#x6709;&#x8FBE;&#x5230;&#x9884;&#x671F;&#x6548;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x5B9E;&#x9A8C;&#x8FDB;&#x884C;&#x8FED;&#x4EE3;&#x7EE7;&#x7EED;&#x6536;&#x96C6;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x5F62;&#x6210;&#x4E86;&#x4EE5; A/B &#x6D4B;&#x8BD5;&#x4E3A;&#x6838;&#x5FC3;&#x7684;&#x4E1A;&#x52A1;&#x589E;&#x957F;&#x95ED;&#x73AF;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x4E3A;&#x5927;&#x5BB6;&#x4ECB;&#x7ECD;&#x5982;&#x4F55;&#x5B8C;&#x6574;&#x8FDB;&#x884C;&#x4E00;&#x6B21; A/B &#x5B9E;&#x9A8C;&#x3002;</p>
<h3 id="&#x5982;&#x4F55;&#x4EA7;&#x751F;&#x597D;&#x7684;&#x5B9E;&#x9A8C;&#x60F3;&#x6CD5;"><a href="#&#x5982;&#x4F55;&#x4EA7;&#x751F;&#x597D;&#x7684;&#x5B9E;&#x9A8C;&#x60F3;&#x6CD5;" class="headerlink" title="&#x5982;&#x4F55;&#x4EA7;&#x751F;&#x597D;&#x7684;&#x5B9E;&#x9A8C;&#x60F3;&#x6CD5;"></a>&#x5982;&#x4F55;&#x4EA7;&#x751F;&#x597D;&#x7684;&#x5B9E;&#x9A8C;&#x60F3;&#x6CD5;</h3><p>&#x5173;&#x4E8E;&#x5982;&#x4F55;&#x4EA7;&#x751F;&#x597D;&#x7684;&#x5B9E;&#x9A8C;&#x60F3;&#x6CD5;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4ECE;&#x5B9A;&#x91CF;&#x5206;&#x6790;&#x548C;&#x5B9A;&#x6027;&#x5206;&#x6790;&#x51E0;&#x4E2A;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#x3002;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;&#x6784;&#x5EFA;&#x5B8C;&#x5584;&#x7684;&#x6307;&#x6807;&#x4F53;&#x7CFB;&#x5C31;&#x662F;&#x5B9A;&#x91CF;&#x5206;&#x6790;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0D;&#x518D;&#x8D58;&#x8FF0;&#x3002;&#x5728;&#x6536;&#x96C6;&#x5230;&#x6307;&#x6807;&#x6570;&#x636E;&#x4EE5;&#x540E;&#xFF0C;&#x5BF9;&#x4E8E;&#x6307;&#x6807;&#x53D1;&#x751F;&#x7684;&#x5F02;&#x52A8;&#x8FDB;&#x884C;&#x73B0;&#x8C61;&#x5206;&#x6790;&#xFF0C;&#x9488;&#x5BF9;&#x5DF2;&#x5B58;&#x5728;&#x95EE;&#x9898;&#xFF08;&#x975E;&#x5F02;&#x52A8;&#xFF09;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x65B0;&#x7684;&#x4EA7;&#x54C1;&#x7B56;&#x7565;&#x6216;&#x8005;&#x8FD0;&#x8425;&#x7B56;&#x7565;&#x8FED;&#x4EE3;&#x6267;&#x884C;&#x3002;</p>
<p>&#x5B9A;&#x6027;&#x5206;&#x6790;&#x53EF;&#x4EE5;&#x5206;&#x4E3A;&#x4E09;&#x4E2A;&#x65B9;&#x9762;&#xFF1A;</p>
<ul>
<li>&#x4EA7;&#x54C1;&#x672C;&#x8EAB;&#x7684;&#x4EF7;&#x503C;&#x4E3B;&#x5F20;&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#x6BD4;&#x5982;&#x4E00;&#x6B3E;&#x6253;&#x8F66; APP &#x7684;&#x4EF7;&#x503C;&#x4E3B;&#x5F20;&#x662F;&#x901A;&#x8FC7;&#x5171;&#x4EAB;&#x7ECF;&#x6D4E;&#x5B9E;&#x73B0;&#x793E;&#x4F1A;&#x7684;&#x6548;&#x7387;&#x63D0;&#x5347;&#xFF0C;&#x8FD9;&#x4E2A;&#x4EA7;&#x54C1;&#x6709;&#x6CA1;&#x6709;&#x5F88;&#x597D;&#x5730;&#x4F53;&#x73B0;&#x4EF7;&#x503C;&#x4E3B;&#x5F20;&#xFF1F;&#x53EF;&#x4EE5;&#x4ECE;&#x8FD9;&#x4E00;&#x65B9;&#x9762;&#x4EA7;&#x751F;&#x4E00;&#x4E9B;&#x5B9E;&#x9A8C;&#x60F3;&#x6CD5;&#x3002;</li>
<li>&#x63A8;&#x52A8;&#x56E0;&#x7D20;<ul>
<li>&#x76F8;&#x5173;&#x6027;&#xFF1A;&#x540C;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x4E2D;&#x5982;&#x679C;&#x6709;&#x4E0D;&#x76F8;&#x5173;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x6237;&#x5927;&#x6982;&#x7387;&#x4E5F;&#x4E0D;&#x4F1A;&#x70B9;&#x51FB;&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BBE;&#x8BA1;&#x5C31;&#x6CA1;&#x6709;&#x6548;&#x679C;&#x3002;</li>
<li>&#x6E05;&#x6670;&#x5EA6;&#xFF1A;&#x8981;&#x8868;&#x8FBE;&#x7684;&#x5185;&#x5BB9;&#xFF08;&#x6BD4;&#x5982;&#x547D;&#x540D;&#xFF09;&#x662F;&#x5426;&#x8DB3;&#x591F;&#x6E05;&#x6670;&#x3002;</li>
<li>&#x7D27;&#x8FEB;&#x6027;&#xFF1A;&#x5BF9;&#x4E8E;&#x6709;&#x65F6;&#x95F4;&#x5468;&#x671F;&#x7684;&#x6D3B;&#x52A8;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x8BA1;&#x4E00;&#x4E9B;&#x4E8B;&#x4EF6;&#x8425;&#x9020;&#x7D27;&#x8FEB;&#x611F;&#x3002;</li>
</ul>
</li>
<li>&#x963B;&#x788D;&#x56E0;&#x7D20;&#xFF1A;<ul>
<li>&#x6CE8;&#x610F;&#x529B;&#x5206;&#x6563;&#xFF1A;&#x907F;&#x514D;&#x5728;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x653E;&#x4E94;&#x82B1;&#x516B;&#x95E8;&#x7684;&#x4FE1;&#x606F;&#x8BA9;&#x7528;&#x6237;&#x627E;&#x4E0D;&#x5230;&#x91CD;&#x70B9;&#x3002;</li>
<li>&#x7126;&#x8651;&#x6027;&#xFF1A;&#x6709;&#x7684;&#x5730;&#x65B9;&#x53EF;&#x80FD;&#x7ED9;&#x4E86;&#x7528;&#x6237;&#x5F88;&#x591A;&#x9009;&#x62E9;&#xFF0C;&#x4E5F;&#x4F1A;&#x9020;&#x6210;&#x9009;&#x62E9;&#x56F0;&#x96BE;&#xFF0C;&#x4E0D;&#x81EA;&#x89C9;&#x5730;&#x5F62;&#x6210;&#x4E00;&#x79CD;&#x7126;&#x8651;&#x611F;&#xFF0C;&#x4E0D;&#x5982;&#x7B80;&#x5355;&#x4E00;&#x4E9B;&#x53EA;&#x8BBE;&#x8BA1;&#x4E00;&#x4E2A;&#x9009;&#x62E9;&#x3002;</li>
</ul>
</li>
</ul>
<h3 id="&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x5B9E;&#x9A8C;&#x5047;&#x8BBE;"><a href="#&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x5B9E;&#x9A8C;&#x5047;&#x8BBE;" class="headerlink" title="&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x5B9E;&#x9A8C;&#x5047;&#x8BBE;"></a>&#x5982;&#x4F55;&#x5EFA;&#x7ACB;&#x4E00;&#x4E2A;&#x6709;&#x6548;&#x7684;&#x5B9E;&#x9A8C;&#x5047;&#x8BBE;</h3><p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x9488;&#x5BF9;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#x7FA4;&#x4F53;&#x505A;&#x51FA;&#x6539;&#x53D8;&#xFF0C;&#x7136;&#x540E;&#x4EA7;&#x751F;&#x4E00;&#x5B9A;&#x7684;&#x5F71;&#x54CD;&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x4E2A;&#x5047;&#x8BBE;&#x4E0D;&#x662F;&#x65E0;&#x8111;&#x5B9A;&#x7684;&#xFF0C;&#x8981;&#x6709;&#x903B;&#x8F91;&#x6027;&#x662F;&#x5408;&#x7406;&#x7684;&#xFF0C;&#x6700;&#x7EC8;&#x80FD;&#x901A;&#x8FC7;&#x6307;&#x6807;&#x6765;&#x8BC4;&#x4F30;&#x53D8;&#x5316;&#x7684;&#x5F71;&#x54CD;&#x3002;&#x9488;&#x5BF9;&#x8FD9;&#x51E0;&#x4E2A;&#x8981;&#x7D20;&#xFF0C;&#x6211;&#x4EEC;&#x603B;&#x7ED3;&#x51FA;&#x4E86;&#x8BBE;&#x8BA1; A/B &#x5B9E;&#x9A8C;&#x7684; PICOT &#x539F;&#x5219;&#xFF0C;&#x5373; Population&#x3001;Intervention&#x3001;Comparison&#x3001;Outcome&#x3001;Time&#xFF0C;&#x660E;&#x786E;&#x5BF9;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x7528;&#x6237;&#x505A;&#x51FA;&#x4E86;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x6539;&#x53D8;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;&#x5206;&#x7EC4;&#x6BD4;&#x8F83;&#xFF0C;&#x6700;&#x7EC8;&#x9700;&#x8981;&#x8BBE;&#x8BA1;&#x8861;&#x91CF;&#x7ED3;&#x679C;&#x7684;&#x6307;&#x6807;&#xFF0C;&#x5E76;&#x51B3;&#x7B56;&#x5B9E;&#x9A8C;&#x8981;&#x8FDB;&#x884C;&#x591A;&#x957F;&#x65F6;&#x95F4;&#x3002;</p>
<h3 id="A-B-&#x6D4B;&#x8BD5;&#x6548;&#x679C;&#x8BC4;&#x4F30;"><a href="#A-B-&#x6D4B;&#x8BD5;&#x6548;&#x679C;&#x8BC4;&#x4F30;" class="headerlink" title="A/B &#x6D4B;&#x8BD5;&#x6548;&#x679C;&#x8BC4;&#x4F30;"></a>A/B &#x6D4B;&#x8BD5;&#x6548;&#x679C;&#x8BC4;&#x4F30;</h3><p><strong>&#x770B;&#x54EA;&#x4E9B;&#x6570;&#x636E;</strong></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/47d2554545b9066778b26ff7366fbd8e3dfb5c64ac49e96c1fe8137f82731133" alt></p>
<p>&#x4E0A;&#x56FE;&#x662F;&#x4E00;&#x4EFD; A/B &#x6D4B;&#x8BD5;&#x5B9E;&#x9A8C;&#x62A5;&#x544A;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6307;&#x6807;&#x5728;&#x5B9E;&#x9A8C;&#x7248;&#x672C;&#x91CC;&#x662F;&#x7EDD;&#x5BF9;&#x503C;&#xFF0C;&#x8FD8;&#x6709;&#x53D8;&#x5316;&#x503C;&#x4EE5;&#x53CA;&#x7F6E;&#x4FE1;&#x533A;&#x95F4;&#x3002;&#x7F6E;&#x4FE1;&#x533A;&#x95F4;&#x662F;&#x6307;&#x5047;&#x8BBE;&#x7B56;&#x7565;&#x5168;&#x91CF;&#x4E0A;&#x7EBF;&#xFF0C;&#x4F60;&#x6709; 95% &#x7684;&#x628A;&#x63E1;&#x4F1A;&#x770B;&#x5230;&#x771F;&#x5B9E;&#x7684;&#x6307;&#x6807;&#x6536;&#x76CA;&#x5728; [,] &#x8FD9;&#x4E2A;&#x8303;&#x56F4;&#x5185;&#x3002;&#x7F6E;&#x4FE1;&#x533A;&#x95F4;&#x8D8A;&#x7A84;&#x4E14;&#x4E0D;&#x5305;&#x542B; 0&#xFF0C;&#x53EF;&#x4FE1;&#x5EA6;&#x5C31;&#x8D8A;&#x9AD8;&#x3002;&#x4ECE;&#x300C;&#x67E5;&#x770B;&#x56FE;&#x8868;&#x300D;&#x8FDB;&#x5165;&#x9009;&#x62E9;&#x5DEE;&#x5F02;&#x503C;&#x53EF;&#x4EE5;&#x89C2;&#x5BDF;&#x7D2F;&#x8BA1; diff &#x8D8B;&#x52BF;&#x56FE;&#xFF0C;&#x5982;&#x679C;&#x5448;&#x73B0;&#x7F6E;&#x4FE1;&#x533A;&#x95F4;&#x9010;&#x6E10;&#x53D8;&#x7A84;&#x7684;&#x73B0;&#x8C61;&#xFF0C;&#x8BF4;&#x660E;&#x968F;&#x7740;&#x6837;&#x672C;&#x91CF;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x6211;&#x4EEC;&#x5BF9;&#x8BC4;&#x4F30;&#x7ED3;&#x679C;&#x7684;&#x4FE1;&#x5FC3;&#x5C31;&#x8D8A;&#x6765;&#x8D8A;&#x5F3A;&#x3002;</p>
<p><strong>&#x6307;&#x6807;&#x53D8;&#x5316;&#x662F;&#x663E;&#x8457;&#x7684;&#x5417;</strong></p>
<p>A/B &#x5B9E;&#x9A8C;&#x7684;&#x7ED3;&#x679C;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#xFF1A;</p>
<ul>
<li>&#x6B63;&#x5411;&#x663E;&#x8457;&#xFF1A;&#x8BF4;&#x660E;&#x5F53;&#x524D;&#x6837;&#x672C;&#x5BB9;&#x91CF;&#x6761;&#x4EF6;&#x4E0B;&#xFF0C;&#x5B9E;&#x9A8C;&#x7248;&#x672C;&#x4F18;&#x4E8E;&#x5BF9;&#x7167;&#x7248;&#x672C;&#xFF0C;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#x548C;&#x5047;&#x8BBE;&#x4E00;&#x81F4;&#xFF1B;</li>
<li>&#x8D1F;&#x5411;&#x663E;&#x8457;&#xFF1A;&#x8BF4;&#x660E;&#x5F53;&#x524D;&#x6837;&#x672C;&#x5BB9;&#x91CF;&#x6761;&#x4EF6;&#x4E0B;&#xFF0C;&#x5B9E;&#x9A8C;&#x7248;&#x672C;&#x4E0D;&#x4F18;&#x4E8E;&#x5BF9;&#x7167;&#x7248;&#x672C;&#xFF0C;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#x548C;&#x5047;&#x8BBE;&#x4E0D;&#x4E00;&#x81F4;&#xFF1B;</li>
<li>&#x4E0D;&#x663E;&#x8457;&#xFF1A;<ul>
<li>&#x786E;&#x5B9E;&#x4E0D;&#x663E;&#x8457;&#xFF1A;&#x53EF;&#x4EE5;&#x53C2;&#x8003; MDE &#x6307;&#x6807;&#x662F;&#x5426;&#x7B26;&#x5408;&#x9884;&#x671F;&#xFF0C;&#x5982;&#x679C;&#x7B26;&#x5408;&#xFF0C;&#x5219;&#x8BF4;&#x660E;&#x7ED3;&#x679C;&#x786E;&#x5B9E;&#x4E0D;&#x663E;&#x8457;&#x3002;</li>
<li>&#x5176;&#x4ED6;&#x539F;&#x56E0;&#x5BFC;&#x81F4;&#x7684;&#x4E0D;&#x663E;&#x8457;&#xFF1A;&#x6BD4;&#x5982;&#x6837;&#x672C;&#x5BB9;&#x91CF;&#x5C0F;&#xFF0C;&#x6307;&#x6807;&#x5BF9;&#x5E94;&#x7684;&#x7528;&#x6237;&#x884C;&#x4E3A;&#x6E17;&#x900F;&#x7387;&#x4F4E;&#xFF0C;&#x5B9E;&#x9A8C;&#x65F6;&#x957F;&#x8F83;&#x77ED;&#x7B49;&#x3002;&#x5728;&#x8FD9;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C;&#x5B9E;&#x9A8C;&#x6548;&#x679C;&#x4E0D;&#x663E;&#x8457;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x4E00;&#x6B65;&#x4F18;&#x5316;&#x5B9E;&#x9A8C;&#xFF0C;&#x6BD4;&#x5982;&#x589E;&#x5927;&#x6837;&#x672C;&#x91CF;&#xFF0C;&#x6269;&#x5927;&#x6D41;&#x91CF;&#x3001;&#x518D;&#x89C2;&#x5BDF;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x79EF;&#x7D2F;&#x66F4;&#x591A;&#x8FDB;&#x7EC4;&#x7528;&#x6237;&#x7B49;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x518D;&#x770B;&#x4E24;&#x4E2A;&#x6848;&#x4F8B;&#x3002;</p>
<p><strong>&#x54EA;&#x4E2A;&#x9996;&#x9875;&#x65B0; UI &#x7248;&#x672C;&#x66F4;&#x53D7;&#x6B22;&#x8FCE;</strong></p>
<p>&#x4ECA;&#x65E5;&#x5934;&#x6761; UI &#x6574;&#x4F53;&#x98CE;&#x683C;&#x504F;&#x5927;&#x9F84;&#x88AB;&#x8BDF;&#x75C5;&#x5DF2;&#x4E45;&#xFF0C;&#x4E0D;&#x5229;&#x4E8E;&#x5E74;&#x8F7B;&#x548C;&#x5973;&#x6027;&#x7528;&#x6237;&#x6CDB;&#x5316;&#xFF0C;&#x5386;&#x53F2;&#x4E0A;&#x51E0;&#x6B21;&#x7EA2;&#x5934;&#x6539;&#x7070;&#x5934;&#x5B9E;&#x9A8C;&#x90FD;&#x5BF9;&#x5927;&#x76D8;&#x6570;&#x636E;&#x663E;&#x8457;&#x8D1F;&#x5411;&#x3002;&#x56E0;&#x6B64;&#x56E2;&#x961F;&#x8BBE;&#x8BA1;&#x4E86; A/B &#x5B9E;&#x9A8C;&#xFF0C;&#x76EE;&#x6807;&#x662F;&#x5728;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x8D1F;&#x5411;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x6539;&#x4E00;&#x7248;&#x7528;&#x6237;&#x8BC4;&#x4EF7;&#x66F4;&#x597D;&#x7684; UI&#x3002;&#x901A;&#x8FC7;&#x63A7;&#x5236;&#x53D8;&#x91CF;&#x6CD5;&#xFF0C;&#x5BF9;&#x4EE5;&#x4E0B;&#x53D8;&#x91CF;&#x5206;&#x522B;&#x5F00;&#x5C55;&#x6570;&#x6B21; A/B &#x5B9E;&#x9A8C;&#xFF1A;</p>
<ul>
<li>&#x5934;&#x90E8;&#x8272;&#x503C;&#x9971;&#x548C;&#x5EA6;</li>
<li>&#x5B57;&#x53F7;</li>
<li>&#x5B57;&#x91CD;</li>
<li>&#x4E0A;&#x4E0B;&#x95F4;&#x8DDD;</li>
<li>&#x5DE6;&#x53F3;&#x95F4;&#x8DDD;</li>
<li>&#x5E95;&#x90E8; tab icon</li>
<li>&#x7ED3;&#x5408;&#x7528;&#x6237;&#x8C03;&#x7814;&#xFF08;&#x7ED3;&#x679C;&#x663E;&#x793A;&#xFF1A;&#x5E74;&#x8F7B;&#x7528;&#x6237;&#x548C;&#x5973;&#x6027;&#x7528;&#x6237;&#x5BF9;&#x65B0; UI &#x66F4;&#x504F;&#x597D;&#xFF09;</li>
</ul>
<p>&#x7EFC;&#x5408;&#x6765;&#x770B;&#xFF0C;&#x6548;&#x679C;&#x6700;&#x597D;&#x7684; UI &#x7248;&#x672C;&#x5982;&#x56FE; 2 &#x6240;&#x793A;&#xFF0C;&#x5168;&#x91CF;&#x4E0A;&#x7EBF;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/50cb8af5f526e28efb006d031618d09afa7b726b8ac3c14f7710b762f8bc87d9" alt></p>
<p>&#x65B0; UI &#x4E0A;&#x7EBF;&#x540E;&#xFF0C;Stay duration &#x663E;&#x8457;&#x8D1F;&#x5411;&#x4ECE;-0.38% &#x964D;&#x81F3; -0.24%&#xFF0C;&#x56FE;&#x6587;&#x7C7B;&#x65F6;&#x957F;&#x663E;&#x8457; +1.66%&#xFF0C;&#x641C;&#x7D22;&#x6E17;&#x900F;&#x663E;&#x8457; +1.47%&#xFF0C;&#x9AD8;&#x9891;&#x7528;&#x6237;&#xFF08;&#x5360; 71%&#xFF09;&#x5DF2;&#x9010;&#x6E10;&#x9002;&#x5E94;&#x65B0; UI&#x3002;</p>
<p><strong>&#x9009;&#x62E9;&#x66F4;&#x4F18;&#x7684;&#x89C6;&#x9891;&#x4E0A;&#x6ED1;&#x5F15;&#x5BFC;&#x4EA7;&#x54C1;&#x5F62;&#x6001;</strong></p>
<p>&#x67D0;&#x6B3E;&#x77ED;&#x89C6;&#x9891;&#x5728;&#x521A;&#x9762;&#x4E16;&#x65F6;&#xFF0C;&#x5F88;&#x591A;&#x7528;&#x6237;&#x90FD;&#x4E0D;&#x77E5;&#x9053;&#x4E0A;&#x6ED1;&#x7684;&#x73A9;&#x6CD5;&#xFF0C;&#x56E0;&#x6B64;&#x5C31;&#x8BBE;&#x8BA1;&#x5B9E;&#x9A8C;&#x9A8C;&#x8BC1;&#x5982;&#x4F55;&#x80FD;&#x66F4;&#x597D;&#x5730;&#x5F15;&#x5BFC;&#x7528;&#x6237;&#x4E0A;&#x6ED1;&#x3002;&#x5B9E;&#x9A8C;&#x76EE;&#x6807;&#x5B9A;&#x4E3A;&#x4F18;&#x5316;&#x540E;&#x63D0;&#x5347;&#x65B0;&#x7528;&#x6237;&#x7559;&#x5B58;&#xFF0C;&#x4E0A;&#x6ED1;&#x64CD;&#x4F5C;&#x6E17;&#x900F;&#x7387;&#x63D0;&#x5347; 1%&#xFF0C;&#x9519;&#x8BEF;&#x64CD;&#x4F5C;&#x6E17;&#x900F;&#x7387;&#x4E0B;&#x964D; 1%&#x3002;&#x5B9A;&#x5411;&#x53D7;&#x4F17;&#x4E3A;&#x65B0;&#x7528;&#x6237;&#xFF0C;&#x9762;&#x5411; 10% &#x7684;&#x7EBF;&#x4E0A;&#x6D41;&#x91CF;&#x8FDB;&#x884C;&#x4E3A;&#x671F; 1 &#x4E2A;&#x6708;&#x7684;&#x5B9E;&#x9A8C;&#x3002;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/23d67d75be545340f351ba25e86f17e4a503e5a8f9ce82b0ef5dd15c5dff180f" alt></p>
<p>&#x6211;&#x4EEC;&#x505A;&#x4E86;&#x4E24;&#x8F6E;&#x5B9E;&#x9A8C;&#xFF0C;&#x7B2C;&#x4E00;&#x8F6E;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#x5E76;&#x4E0D;&#x7B26;&#x5408;&#x9884;&#x671F;&#xFF0C;&#x4E0A;&#x6ED1;&#x64CD;&#x4F5C;&#x6E17;&#x900F;&#x7387;&#x4E0B;&#x964D; 1% &#x4E14;&#x663E;&#x8457;&#xFF0C;&#x9519;&#x8BEF;&#x64CD;&#x4F5C;&#x6E17;&#x900F;&#x7387;&#x63D0;&#x5347; 1.5%&#xFF0C;&#x4E0D;&#x7B26;&#x5408;&#x9884;&#x671F;&#x3002;&#x65B0;&#x7528;&#x6237;&#x7559;&#x5B58;&#x672A;&#x89C1;&#x663E;&#x8457;&#x4E0A;&#x5347;&#x3002;&#x4F46;&#x5728;&#x4E0D;&#x7B26;&#x5408;&#x9884;&#x671F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD8;&#x662F;&#x80FD;&#x505A;&#x4E00;&#x4E9B;&#x5206;&#x6790;&#x6765;&#x53D1;&#x73B0;&#x539F;&#x56E0;&#x3002;&#x56E0;&#x6B64;&#x7ECF;&#x8FC7;&#x6539;&#x8FDB;&#x6211;&#x4EEC;&#x505A;&#x4E86;&#x7B2C;&#x4E8C;&#x8F6E;&#x5B9E;&#x9A8C;&#xFF0C;&#x7ED3;&#x679C;&#x4E0A;&#x6ED1;&#x64CD;&#x4F5C;&#x6E17;&#x900F;&#x7387;&#x4E0A;&#x5347; 1.5% &#x4E14;&#x663E;&#x8457;&#xFF0C;&#x65B0;&#x7528;&#x6237; 7 &#x65E5;&#x5185;&#x7559;&#x5B58;&#x63D0;&#x5347; 1%-1.8%&#xFF0C;&#x4E14;&#x6307;&#x6807;&#x7ED3;&#x679C;&#x5448;&#x663E;&#x8457;&#xFF0C;&#x7B26;&#x5408;&#x9884;&#x671F;&#x3002;</p>
<p>&#x4E0A;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x5C31;&#x8BF4;&#x660E;&#x4E86;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x628A; A/B &#x6D4B;&#x8BD5;&#x5F53;&#x6210;&#x4E00;&#x4E2A;&#x7406;&#x89E3;&#x7528;&#x6237;&#x7684;&#x5DE5;&#x5177;&#x3002;</p>
<h2 id="&#x5C55;&#x671B;"><a href="#&#x5C55;&#x671B;" class="headerlink" title="&#x5C55;&#x671B;"></a>&#x5C55;&#x671B;</h2><p>&#x6700;&#x540E;&#x60F3;&#x8DDF;&#x5927;&#x5BB6;&#x4E00;&#x8D77;&#x5C55;&#x671B;&#x4E00;&#x4E0B; A/B &#x6D4B;&#x8BD5;&#x884C;&#x4E1A;&#x672A;&#x6765;&#x7684;&#x60C5;&#x51B5;&#x3002;&#x4ECE;&#x884C;&#x4E1A;&#x524D;&#x666F;&#x6765;&#x770B;&#xFF1A;</p>
<ul>
<li>&#x8BA4;&#x77E5;&#x7387;&#x548C;&#x666E;&#x53CA;&#x7387;&#x5728;&#x9AD8;&#x901F;&#x63D0;&#x5347;&#xFF1A;&#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x505A;&#x8FC7;&#x4E00;&#x4E2A;&#x8C03;&#x7814;&#xFF0C;&#x53D1;&#x73B0; A/B &#x6D4B;&#x8BD5;&#x5728;&#x56FD;&#x5185;&#x6574;&#x4F53;&#x8BA4;&#x77E5;&#x5EA6;&#x8F83;&#x4F4E;&#xFF0C;&#x53EF;&#x80FD;&#x4F4E;&#x5230;&#x4E00;&#x4E2A;&#x96BE;&#x4EE5;&#x60F3;&#x8C61;&#x7684;&#x6570;&#x5B57;&#x3002;&#x6211;&#x4EEC;&#x8BA4;&#x4E3A;&#x5728;&#x672A;&#x6765; 5-10 &#x5E74;&#x5185;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x7684;&#x8BA4;&#x77E5;&#x5EA6;&#x53EF;&#x80FD;&#x4F1A;&#x6709; 50-100 &#x500D;&#x7684;&#x63D0;&#x5347;&#xFF0C;&#x8FD9;&#x4E2A;&#x5E02;&#x573A;&#x8FD8;&#x662F;&#x4E00;&#x7247;&#x84DD;&#x6D77;&#x3002;</li>
<li>&#x4ECE; nice-to-have &#x5230; must-have&#xFF1A;&#x73B0;&#x5728;&#x5F88;&#x591A;&#x4EBA;&#x8BA4;&#x4E3A; A/B &#x6D4B;&#x8BD5;&#x662F;&#x4E00;&#x4E2A;&#x9526;&#x4E0A;&#x6DFB;&#x82B1;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x4F46;&#x5728;&#x6570;&#x636E;&#x9A71;&#x52A8;&#x8D8A;&#x6765;&#x8D8A;&#x91CD;&#x8981;&#x7684;&#x4ECA;&#x5929;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x662F;&#x5FC5;&#x987B;&#x8981;&#x638C;&#x63E1;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x662F;&#x4F01;&#x4E1A;&#x5F00;&#x5C55;&#x4E1A;&#x52A1;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x521A;&#x9700;&#xFF0C;&#x5426;&#x5219;&#x5728;&#x884C;&#x4E1A;&#x7ADE;&#x4E89;&#x4E2D;&#x5C31;&#x4F1A;&#x5931;&#x53BB;&#x4F18;&#x52BF;&#x3002;</li>
<li>&#x7834;&#x5708;&#xFF1A;&#x6211;&#x4EEC;&#x4E5F;&#x53D1;&#x73B0; A/B &#x6D4B;&#x8BD5;&#x6B63;&#x5728;&#x7834;&#x5708;&#x3002;&#x5927;&#x5BB6;&#x7684;&#x5370;&#x8C61;&#x4E2D; A/B &#x6D4B;&#x8BD5;&#x53EA;&#x6709;&#x4E92;&#x8054;&#x7F51;&#x516C;&#x53F8;&#x4F1A;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5728;&#x4EA4;&#x6D41;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53D1;&#x73B0;&#xFF0C;&#x5F88;&#x591A;&#x4F20;&#x7EDF;&#x4F01;&#x4E1A;&#x867D;&#x7136;&#x6CA1;&#x6709;&#x7EBF;&#x4E0A;&#x4E1A;&#x52A1;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x80FD;&#x89E3;&#x51B3;&#x6570;&#x636E;&#x6536;&#x96C6;&#x7684;&#x95EE;&#x9898;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x4E5F;&#x80FD;&#x6EE1;&#x8DB3;&#x4F20;&#x7EDF;&#x4F01;&#x4E1A;&#x4F18;&#x5316;&#x7684;&#x8BC9;&#x6C42;&#x3002;</li>
</ul>
<p>&#x4ECE;&#x6280;&#x672F;&#x8D8B;&#x52BF;&#x4E0A;&#x6765;&#x770B;&#xFF0C;&#x6709;&#x8FD9;&#x6837;&#x51E0;&#x4E2A;&#x53D1;&#x5C55;&#x65B9;&#x5411;&#xFF1A;</p>
<ul>
<li>&#x667A;&#x80FD;&#x5316;&#xFF1A;A/B &#x6D4B;&#x8BD5;&#x76EE;&#x524D;&#x8FD8;&#x5904;&#x5728;&#x65E9;&#x671F;&#x9636;&#x6BB5;&#xFF0C;&#x4E00;&#x4E9B;&#x5B9E;&#x9A8C;&#x7ED3;&#x8BBA;&#x6216;&#x5B9E;&#x9A8C;&#x6D1E;&#x5BDF;&#x5BF9;&#x6570;&#x636E;&#x548C;&#x7528;&#x6237;&#x5C5E;&#x6027;&#x7684;&#x5229;&#x7528;&#x8FD8;&#x4E0D;&#x662F;&#x5F88;&#x5145;&#x5206;&#x3002;&#x5982;&#x679C; A/B &#x6D4B;&#x8BD5;&#x80FD;&#x548C;&#x7EDF;&#x8BA1;&#x65B9;&#x6CD5;&#x3001;&#x7B97;&#x6CD5;&#x6A21;&#x578B;&#x76F8;&#x7ED3;&#x5408;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x63D0;&#x9AD8;&#x6574;&#x4E2A;&#x884C;&#x4E1A;&#x7684;&#x6C34;&#x5E73;&#x3002;</li>
<li>&#x573A;&#x666F;&#x5316;&#xFF1A;&#x5F88;&#x591A;&#x573A;&#x666F;&#x8FD8;&#x6CA1;&#x6709;&#x5F00;&#x59CB;&#x4F7F;&#x7528; A/B &#x6D4B;&#x8BD5;&#xFF0C;&#x672A;&#x6765;&#x66F4;&#x591A;&#x7684;&#x884C;&#x4E1A;&#x573A;&#x666F;&#x80FD;&#x548C; A/B &#x6D4B;&#x8BD5;&#x76F8;&#x7ED3;&#x5408;&#xFF0C;&#x8BA9; A/B &#x6D4B;&#x8BD5;&#x66F4;&#x6613;&#x7528;&#x3002;</li>
<li>&#x88AB;&#x96C6;&#x6210;&#xFF1A;&#x76EE;&#x524D;&#x6211;&#x4EEC;&#x7684; A/B &#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x53EF;&#x4EE5;&#x4E00;&#x7AD9;&#x5F0F;&#x7BA1;&#x7406;&#x5B9E;&#x9A8C;&#x3001;&#x67E5;&#x770B;&#x62A5;&#x544A;&#xFF0C;&#x4F46;&#x662F;&#x4E00;&#x4E9B;&#x7528;&#x6237;&#x7684;&#x4E1A;&#x52A1;&#x5DF2;&#x7ECF;&#x5F88;&#x6210;&#x719F;&#xFF0C;&#x5E0C;&#x671B; A/B &#x6D4B;&#x8BD5;&#x80FD;&#x591F;&#x8D70;&#x5165;&#x4E1A;&#x52A1;&#x548C;&#x7CFB;&#x7EDF;&#xFF0C;&#x66F4;&#x987A;&#x6ED1;&#x5730;&#x4F7F;&#x7528;&#x3002;&#x6240;&#x4EE5; A/B &#x6D4B;&#x8BD5;&#x6280;&#x672F;&#x4E5F;&#x9700;&#x8981;&#x63D0;&#x9AD8;&#x81EA;&#x8EAB;&#x88AB;&#x96C6;&#x6210;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x65E0;&#x7F1D;&#x5730;&#x548C;&#x5404;&#x79CD;&#x4E1A;&#x52A1;&#x3001;&#x7CFB;&#x7EDF;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x3002;</li>
</ul>
<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h2><p><strong>Q</strong>&#xFF1A;A/B &#x6D4B;&#x8BD5;&#x5BF9;&#x7528;&#x6237;&#x4F53;&#x91CF;&#x6709;&#x6CA1;&#x6709;&#x57FA;&#x672C;&#x9650;&#x5236;&#xFF1F;&#x5C0F;&#x7528;&#x6237;&#x91CF;&#x5728;&#x8FDB;&#x884C; A/B &#x6D4B;&#x8BD5;&#x65F6;&#x6709;&#x4EC0;&#x4E48;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x5417;&#xFF1F;</p>
<p><strong>A</strong>&#xFF1A;A/B &#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;&#x672C;&#x8EAB;&#x5BF9;&#x7528;&#x6237;&#x91CF;&#x6CA1;&#x6709;&#x9650;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x5B9E;&#x9A8C;&#x6837;&#x672C;&#x592A;&#x5C11;&#xFF0C;&#x5C31;&#x5F88;&#x96BE;&#x770B;&#x5230;&#x663E;&#x8457;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6536;&#x76CA;&#x6BD4;&#x8F83;&#x5C0F;&#x3002;</p>
<p><strong>Q</strong>&#xFF1A;&#x706B;&#x5C71;&#x5F15;&#x64CE; A/B &#x6D4B;&#x8BD5;&#x548C;&#x7B97;&#x6CD5;&#x7B49;&#x6570;&#x636E;&#x79D1;&#x5B66;&#x6709;&#x54EA;&#x4E9B;&#x7ED3;&#x5408;&#x7684;&#x5C1D;&#x8BD5;&#x548C;&#x5B9E;&#x8DF5;&#xFF1F;</p>
<p><strong>A</strong>&#xFF1A;&#x6211;&#x4EEC;&#x5185;&#x90E8;&#x5728;&#x505A;&#x7684;&#x4E00;&#x4E9B;&#x4E8B;&#x60C5;&#x53EF;&#x4EE5;&#x7B80;&#x5355;&#x4ECB;&#x7ECD;&#x4E00;&#x4E0B;&#xFF1A;&#x6BD4;&#x5982;&#x57FA;&#x4E8E;&#x591A;&#x81C2;&#x8001;&#x864E;&#x673A;&#x7684;&#x667A;&#x80FD;&#x5B9E;&#x9A8C;&#xFF0C;&#x5DF2;&#x7ECF;&#x5728;&#x5F00;&#x59CB;&#x5E94;&#x7528;&#x4E00;&#x4E9B;&#x7B97;&#x6CD5;&#x3002;&#x6B64;&#x5916;&#x6211;&#x4EEC;&#x4E5F;&#x5728;&#x63A2;&#x7D22;&#x53C2;&#x6570;&#x641C;&#x7D22;&#x7684;&#x5B9E;&#x9A8C;&#xFF0C;&#x63D0;&#x5347;&#x641C;&#x7D22;&#x53C2;&#x6570;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x8BA9; A/B &#x6D4B;&#x8BD5;&#x66F4;&#x667A;&#x80FD;&#x5316;&#x3002;</p>
<p><strong>Q</strong>&#xFF1A;A/B &#x5B9E;&#x9A8C;&#x4E00;&#x822C;&#x8981;&#x6D4B;&#x8BD5;&#x591A;&#x624D;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7ED3;&#x679C;&#xFF1F;</p>
<p><strong>A</strong>&#xFF1A;&#x4E25;&#x683C;&#x610F;&#x4E49;&#x4E0A;&#xFF0C;&#x5F00;&#x591A;&#x4E45;&#x662F;&#x548C;&#x5B9E;&#x9A8C;&#x80FD;&#x5E26;&#x6765;&#x7684;&#x5F71;&#x54CD;&#x6709;&#x5173;&#x7CFB;&#x7684;&#xFF0C;&#x4EE5;&#x6211;&#x4EEC;&#x7684;&#x7ECF;&#x9A8C;&#x503C;&#x6765;&#x770B;&#xFF0C;&#x4E00;&#x822C;&#x662F;&#x8981;&#x8986;&#x76D6;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;&#x7528;&#x6237;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;&#x6211;&#x4EEC;&#x4E00;&#x822C;&#x662F;&#x4EE5;&#x5468;&#x4E3A;&#x5355;&#x4F4D;&#xFF0C;&#x5B9E;&#x9A8C;&#x81F3;&#x5C11;&#x5F00;&#x542F; 1-2 &#x5468;&#x3002;</p>
<p><strong>Q</strong>&#xFF1A;A/B &#x6D4B;&#x8BD5;&#x5728;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#x4E0A;&#x6709;&#x6CA1;&#x6709;&#x81EA;&#x52A8;&#x5F52;&#x56E0;&#x7684;&#x80FD;&#x529B;&#xFF0C;&#x5E2E;&#x7528;&#x6237;&#x76F4;&#x63A5;&#x5B9A;&#x4F4D;&#x5230;&#x662F;&#x4EC0;&#x4E48;&#x539F;&#x56E0;&#x5F15;&#x8D77;&#x5B9E;&#x9A8C;&#x7ED3;&#x679C;&#x597D;&#x6216;&#x8005;&#x5DEE;&#x7684;&#xFF1F;</p>
<p><strong>A</strong>&#xFF1A;&#x524D;&#x9762;&#x63D0;&#x5230;&#x7684;&#x4E00;&#x4E9B;&#x667A;&#x80FD;&#x5316;&#x63A2;&#x7D22;&#x4F1A;&#x5BF9;&#x81EA;&#x52A8;&#x5F52;&#x56E0;&#x6709;&#x5E2E;&#x52A9;&#xFF0C;&#x4F46;&#x662F;&#x81EA;&#x52A8;&#x5F52;&#x56E0;&#x8FD8;&#x6709;&#x4E00;&#x4E2A;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x70B9;&#x662F;&#xFF0C;A/B &#x6D4B;&#x8BD5;&#x5B9E;&#x9A8C;&#x6570;&#x636E;&#x80CC;&#x540E;&#x7684;&#x539F;&#x56E0;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x5F88;&#x591A;&#x4E1A;&#x52A1;&#x77E5;&#x8BC6;&#x7684;&#x8F93;&#x5165;&#x6216;&#x8005;&#x5F88;&#x6709;&#x529B;&#x7684;&#x6307;&#x6807;&#x5EFA;&#x8BBE;&#x624D;&#x80FD;&#x63A8;&#x65AD;&#x51FA;&#x6765;&#x3002;</p>
<p><strong>Q</strong>&#xFF1A;&#x5982;&#x6B64;&#x591A;&#x7684;&#x5B9E;&#x9A8C;&#xFF0C;&#x5982;&#x4F55;&#x4FDD;&#x8BC1;&#x5B9E;&#x9A8C;&#x7684;&#x6B63;&#x4EA4;&#xFF1F;</p>
<p><strong>A</strong>&#xFF1A;&#x6211;&#x4EEC;&#x901A;&#x8FC7;&#x5927;&#x91CF;&#x7684;&#x6A21;&#x62DF;&#x5B9E;&#x9A8C;&#xFF0C;&#x4EE5;&#x53CA;&#x5BF9;&#x7CFB;&#x7EDF;&#x76D1;&#x63A7;&#x7684;&#x81EA;&#x68C0;&#x6765;&#x4FDD;&#x8BC1;&#x6B63;&#x4EA4;&#xFF0C;&#x4E00;&#x65E6;&#x53D1;&#x73B0;&#x6570;&#x636E;&#x8D85;&#x8FC7;&#x4E86;&#x9608;&#x503C;&#x5C31;&#x4F1A;&#x53CA;&#x65F6;&#x8FDB;&#x884C;&#x8C03;&#x6574;&#x3002;</p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/2d3557d4232576af380868705383b636.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7007242017633730597.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7007242017633730597.html" itemprop="url">建设一个SaaS平台需要知道什么，做什么（附多图） SaaS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-13T10:38:49+08:00">
                2021-09-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="SaaS&#x662F;&#x4EC0;&#x4E48;"><a href="#SaaS&#x662F;&#x4EC0;&#x4E48;" class="headerlink" title="SaaS&#x662F;&#x4EC0;&#x4E48;"></a>SaaS&#x662F;&#x4EC0;&#x4E48;</h1><p>SaaS&#xFF0C;&#x662F;Software-as-a-Service&#x7684;&#x7F29;&#x5199;&#x540D;&#x79F0;&#xFF0C;&#x610F;&#x601D;&#x4E3A;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x8F6F;&#x4EF6;&#x5373;&#x670D;&#x52A1;</a>&#xFF0C;&#x5373;&#x901A;&#x8FC7;&#x7F51;&#x7EDC;&#x63D0;&#x4F9B;&#x8F6F;&#x4EF6;&#x670D;&#x52A1;&#x3002; [1]</p>
<p>SaaS&#x5E73;&#x53F0;&#x4F9B;&#x5E94;&#x5546;&#x5C06;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x5E94;&#x7528;&#x8F6F;&#x4EF6;</a>&#x7EDF;&#x4E00;&#x90E8;&#x7F72;&#x5728;&#x81EA;&#x5DF1;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x5BA2;&#x6237;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x5DE5;&#x4F5C;&#x5B9E;&#x9645;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x9700;&#x6C42;</a>&#xFF0C;&#x901A;&#x8FC7;&#x4E92;&#x8054;&#x7F51;&#x5411;&#x5382;&#x5546;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x5B9A;&#x8D2D;</a>&#x6240;&#x9700;&#x7684;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#x670D;&#x52A1;&#xFF0C;&#x6309;&#x5B9A;&#x8D2D;&#x7684;&#x670D;&#x52A1;&#x591A;&#x5C11;&#x548C;&#x65F6;&#x95F4;&#x957F;&#x77ED;&#x5411;&#x5382;&#x5546;&#x652F;&#x4ED8;&#x8D39;&#x7528;&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x4E92;&#x8054;&#x7F51;&#x83B7;&#x5F97;Saas&#x5E73;&#x53F0;&#x4F9B;&#x5E94;&#x5546;&#x63D0;&#x4F9B;&#x7684;&#x670D;&#x52A1;&#x3002; [2]</p>
<p>SaaS &#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#x6709;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x514D;&#x8D39;</a>&#x3001;&#x4ED8;&#x8D39;&#x548C;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x589E;&#x503C;</a>&#x4E09;&#x79CD;&#x6A21;&#x5F0F;&#x3002;&#x4ED8;&#x8D39;&#x901A;&#x5E38;&#x4E3A;&#x201C;&#x5168;&#x5305;&#x201D;&#x8D39;&#x7528;&#xFF0C;&#x56CA;&#x62EC;&#x4E86;&#x901A;&#x5E38;&#x7684;&#x5E94;&#x7528;&#x8F6F;&#x4EF6;&#x8BB8;&#x53EF;&#x8BC1;&#x8D39;&#x3001;&#x8F6F;&#x4EF6;&#x7EF4;&#x62A4;&#x8D39;&#x4EE5;&#x53CA;&#x6280;&#x672F;&#x652F;&#x6301;&#x8D39;&#xFF0C;&#x5C06;&#x5176;&#x7EDF;&#x4E00;&#x4E3A;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x7684;&#x6708;&#x5EA6;&#x79DF;&#x7528;&#x8D39;&#x3002; [3]</p>
<p>SaaS&#x4E0D;&#x4EC5;&#x9002;&#x7528;&#x4E8E;<a href="/external_links/302162ecf633b666478ac0429932f351.html" target="blank" rel="noopener">&#x4E2D;&#x5C0F;&#x578B;&#x4F01;&#x4E1A;</a>&#xFF0C;&#x6240;&#x6709;&#x89C4;&#x6A21;&#x4F01;&#x4E1A;&#x90FD;&#x53EF;&#x4EE5;&#x4ECE;SaaS&#x4E2D;&#x83B7;&#x5229;&#x3002;</p>
<hr>
<p><strong>&#x4EE5;&#x4E0A;&#x5185;&#x5BB9;&#x5E94;&#x7528;&#x81EA;&#x767E;&#x5EA6;&#x767E;&#x79D1;&#xFF0C;&#x4EE5;&#x4E0B;&#x6587;&#x5B57;&#x53CA;&#x56FE;&#x7247;&#x7EAF;&#x5C5E;&#x539F;&#x521B;&#xFF0C;&#x672A;&#x7ECF;&#x6388;&#x6743;&#x3001;&#x7981;&#x6B62;&#x8F6C;&#x8F7D;</strong></p>
<hr>
<h1 id="SaaS&#x4E0E;&#x4F20;&#x7EDF;&#x670D;&#x52A1;&#x3001;&#x4E92;&#x8054;&#x7F51;&#x670D;&#x52A1;&#x7684;&#x4E0D;&#x540C;"><a href="#SaaS&#x4E0E;&#x4F20;&#x7EDF;&#x670D;&#x52A1;&#x3001;&#x4E92;&#x8054;&#x7F51;&#x670D;&#x52A1;&#x7684;&#x4E0D;&#x540C;" class="headerlink" title="SaaS&#x4E0E;&#x4F20;&#x7EDF;&#x670D;&#x52A1;&#x3001;&#x4E92;&#x8054;&#x7F51;&#x670D;&#x52A1;&#x7684;&#x4E0D;&#x540C;"></a>SaaS&#x4E0E;&#x4F20;&#x7EDF;&#x670D;&#x52A1;&#x3001;&#x4E92;&#x8054;&#x7F51;&#x670D;&#x52A1;&#x7684;&#x4E0D;&#x540C;</h1><p>SaaS&#x4F5C;&#x4E3A;&#x79DF;&#x6237;&#x7CFB;&#x7EDF;&#xFF0C;&#x9700;&#x8981;&#x4E3A;&#x79DF;&#x6237;&#xFF08;C&#x7AEF;&#xFF09;&#x63D0;&#x4F9B;&#x6CE8;&#x518C;&#x3001;&#x8D2D;&#x4E70;&#x3001;&#x4E1A;&#x52A1;&#x7CFB;&#x7EDF;&#x7684;&#x5165;&#x53E3;&#xFF0C;&#x8FD8;&#x5F97;&#x4E3A;B&#x7AEF;&#xFF08;&#x8FD0;&#x8425;/&#x8FD0;&#x7EF4;&#xFF09;&#x63D0;&#x4F9B;&#x79DF;&#x6237;&#x7BA1;&#x7406;&#x3001;&#x6D41;&#x91CF;&#x76D1;&#x63A7;&#x3001;&#x670D;&#x52A1;&#x72B6;&#x6001;&#x76D1;&#x63A7;&#x8FD0;&#x7EF4;&#x5165;&#x53E3;&#xFF0C;&#x793A;&#x610F;&#x56FE;&#x5982;&#x4E0B;&#xFF1A;</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/be4bc4af3272016360a654a0d2e70fd832847efcab58253eb7d083532b6f3cfb" alt="image.png"></p>
<ul>
<li>SaaS&#x7684;&#x670D;&#x52A1;&#x5BF9;&#x8C61;&#x662F;&#x79DF;&#x6237;&#xFF0C;&#x90A3;&#x4E48;&#x65B0;&#x8FDB;&#x5165;&#x5E73;&#x53F0;&#x672A;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x8D2D;&#x4E70;&#x53CA;&#x8BA4;&#x8BC1;&#x7684;&#x7528;&#x6237;&#x6211;&#x4EEC;&#x6682;&#x4E14;&#x79F0;&#x4E3A;&#x6563;&#x6237;&#xFF0C;&#x4E3A;&#x4E86;&#x63A8;&#x5E7F;&#x5E73;&#x53F0;&#x589E;&#x52A0;&#x9500;&#x552E;&#x6210;&#x529F;&#x7387;&#xFF0C;&#x6563;&#x6237;&#x767B;&#x5F55;&#x8FDB;&#x5165;&#x540E;&#x4F1A;&#x8DF3;&#x8F6C;&#x8FDB;&#x5165;&#x4EA7;&#x54C1;&#x4ECB;&#x7ECD;&#x53CA;&#x9500;&#x552E;&#x9875;&#x9762;&#xFF0C;&#x63D0;&#x4F9B;&#x8BE6;&#x7EC6;&#x7684;&#x4EA7;&#x54C1;&#x529F;&#x80FD;&#x6E05;&#x5355;&#x53CA;&#x8D39;&#x7528;&#x4FE1;&#x606F;&#xFF0C;&#x63D0;&#x4F9B;&#x6F14;&#x793A;&#x5E73;&#x53F0;&#x4F9B;&#x6563;&#x6237;&#x8FDB;&#x884C;&#x8BD5;&#x7528;&#x3002;</li>
</ul>
<hr>
<h2 id="&#x4F20;&#x7EDF;&#x8F6F;&#x4EF6;&#x4F9B;&#x5E94;&#x5546;"><a href="#&#x4F20;&#x7EDF;&#x8F6F;&#x4EF6;&#x4F9B;&#x5E94;&#x5546;" class="headerlink" title="&#x4F20;&#x7EDF;&#x8F6F;&#x4EF6;&#x4F9B;&#x5E94;&#x5546;"></a>&#x4F20;&#x7EDF;&#x8F6F;&#x4EF6;&#x4F9B;&#x5E94;&#x5546;</h2><blockquote>
<p>&#x51FA;&#x552E;&#x8F6F;&#x4EF6;&#x53CA;&#x914D;&#x5957;&#x8BBE;&#x5907;&#xFF0C;&#x5C06;&#x8F6F;&#x4EF6;&#x90E8;&#x7F72;&#x5728;&#x5BA2;&#x6237;&#x670D;&#x52A1;&#x5668;&#x6216;&#x5BA2;&#x6237;&#x6307;&#x5B9A;&#x4E91;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x51FA;&#x552E;&#x7684;&#x8F6F;&#x4EF6;&#x7CFB;&#x7EDF;&#x53CA;&#x8FD0;&#x7EF4;&#x670D;&#x52A1;&#x4E3A;&#x76C8;&#x5229;&#x6765;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/f6a0247539fea948067269ede7aeb6e4c7c7d4774a44a73441e6b32ce143ad32" alt="image.png"></p>
<h2 id="&#x4E92;&#x8054;&#x7F51;&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;"><a href="#&#x4E92;&#x8054;&#x7F51;&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;" class="headerlink" title="&#x4E92;&#x8054;&#x7F51;&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;"></a>&#x4E92;&#x8054;&#x7F51;&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;</h2><blockquote>
<p>&#x670D;&#x52A1;&#x5668;&#x90E8;&#x7F72;&#x5728;&#x4E91;&#x7AEF;&#xFF0C;&#x6240;&#x6709;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5BA2;&#x6237;&#x7AEF;&#x6CE8;&#x518C;&#x8FDB;&#x884C;&#x4F7F;&#x7528;&#xFF0C;&#x5E7F;&#x544A;&#x53CA;&#x4ED8;&#x8D39;&#x589E;&#x503C;&#x670D;&#x52A1;&#x4F5C;&#x4E3A;&#x76C8;&#x5229;&#x6765;&#x6E90;<br><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/d3a4406653980937b65a6c392966ad7764c85a5548d639dd859d0f3c6d0927b4" alt="image.png"></p>
</blockquote>
<h2 id="SaaS&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;"><a href="#SaaS&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;" class="headerlink" title="SaaS&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;"></a>SaaS&#x5E94;&#x7528;&#x4F9B;&#x5E94;&#x5546;</h2><blockquote>
<p>&#x4ECB;&#x4E8E;&#x4F20;&#x7EDF;&#x4E0E;&#x4E92;&#x8054;&#x7F51;&#x4E4B;&#x95F4;&#xFF0C;&#x901A;&#x8FC7;&#x79DF;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x63D0;&#x4F9B;&#x670D;&#x52A1;&#xFF0C;&#x670D;&#x52A1;&#x90E8;&#x7F72;&#x5728;&#x4E91;&#x7AEF;&#xFF0C;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x6CE8;&#x518C;&#x540E;&#x8FDB;&#x884C;&#x8BA2;&#x8D2D;&#x540E;&#x83B7;&#x5F97;&#x9700;&#x8981;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#x670D;&#x52A1;&#x5668;&#x53CA;&#x8F6F;&#x4EF6;&#x5F52;&#x4F9B;&#x5E94;&#x5546;&#x6240;&#x6709;&#xFF0C;&#x7528;&#x6237;&#x901A;&#x8FC7;&#x4ED8;&#x8D39;&#x83B7;&#x5F97;&#x4F7F;&#x7528;&#x6743;</p>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/55322bed5d7409067d80191882c4d53234192560b39a47696c3d84f4d525949d" alt="image.png"></p>
<blockquote>
<p>&#x7531;&#x4E0A;&#x9762;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x6A21;&#x5F0F;&#x5173;&#x7CFB;&#x56FE;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x4E09;&#x79CD;&#x6A21;&#x5F0F;&#x867D;&#x7136;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x6700;&#x7EC8;&#x90FD;&#x662F;&#x9760;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x76C8;&#x5229;&#xFF0C;&#x6700;&#x7EC8;&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x6A21;&#x5F0F;&#x53D6;&#x51B3;&#x884C;&#x4E1A;&#x7C7B;&#x578B;&#x548C;&#x4E3B;&#x8981;&#x5BA2;&#x6237;&#x7FA4;&#x4F53;</p>
</blockquote>
<h1 id="SaaS&#x7684;&#x7279;&#x5F81;"><a href="#SaaS&#x7684;&#x7279;&#x5F81;" class="headerlink" title="SaaS&#x7684;&#x7279;&#x5F81;"></a>SaaS&#x7684;&#x7279;&#x5F81;</h1><p>&#x6211;&#x4EEC;&#x6E05;&#x695A;&#x4E86;SaaS&#x7684;&#x5B9A;&#x4E49;&#x53CA;&#x4E0E;&#x4F20;&#x7EDF;&#x670D;&#x52A1;&#x548C;&#x4E92;&#x8054;&#x7F51;&#x670D;&#x52A1;&#x7684;&#x5DEE;&#x5F02;&#xFF0C;&#x660E;&#x786E;&#x4E86;SaaS&#x7CFB;&#x7EDF;&#x7684;&#x4E24;&#x5927;&#x5927;&#x7279;&#x5F81;:</p>
<ul>
<li>1.&#x90E8;&#x7F72;&#x5728;&#x4F9B;&#x5E94;&#x5546;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x90E8;&#x7F72;&#x5728;&#x7532;&#x65B9;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;</li>
<li>2.&#x8BA2;&#x8D2D;&#x6A21;&#x5F0F;&#xFF0C;&#x670D;&#x52A1;&#x5546;&#x63D0;&#x4F9B;&#x5927;&#x91CF;&#x529F;&#x80FD;&#x4F9B;&#x5BA2;&#x6237;&#x9009;&#x62E9;&#xFF0C;&#x5BA2;&#x6237;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x81EA;&#x5DF1;&#x9700;&#x8981;&#x7684;&#x8FDB;&#x884C;&#x7EC4;&#x5408;&#xFF0C;&#x652F;&#x4ED8;&#x6240;&#x9700;&#x7684;&#x4EF7;&#x683C;&#xFF0C;&#x5E76;&#x652F;&#x6301;&#x6309;&#x670D;&#x52A1;&#x65F6;&#x95F4;&#x4ED8;&#x8D39;</li>
</ul>
<blockquote>
<p>&#x6211;&#x4EEC;&#x53BB;&#x79DF;&#x623F;&#xFF0C;&#x53EF;&#x4EE5;&#x957F;&#x79DF;&#x4E5F;&#x53EF;&#x4EE5;&#x77ED;&#x79DF;&#xFF0C;&#x53EF;&#x4EE5;&#x79DF;&#x5355;&#x95F4;&#x4E5F;&#x53EF;&#x4EE5;&#x79DF;&#x5957;&#x623F;&#xFF0C;&#x6700;&#x7EC8;&#x5F62;&#x6210;&#x6BCF;&#x6708;&#x79DF;&#x91D1;&#x8FDB;&#x884C;&#x4ED8;&#x8D39;&#xFF1B;&#x79DF;&#x623F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x53EF;&#x80FD;&#x662F;&#x60C5;&#x4FA3;&#x79DF;&#x623F;&#xFF0C;&#x4E5F;&#x53EF;&#x80FD;&#x662F;&#x4E09;&#x53E3;&#x4E4B;&#x5BB6;&#x79DF;&#x623F;&#xFF0C;&#x4E00;&#x4E2A;&#x79DF;&#x6237;&#x5C31;&#x6709;1<del>n&#x4E2A;&#x4EBA;&#xFF0C;&#x6240;&#x4EE5;SaaS&#x5E73;&#x53F0;&#x9762;&#x5BF9;&#x7684;&#x7B2C;&#x4E00;&#x5BF9;&#x8C61;&#x662F;&#x4E00;&#x4E2A;&#x79DF;&#x6237;&#xFF08;&#x8FD9;&#x4E2A;&#x79DF;&#x6237;&#x7684;&#x89C4;&#x6A21;&#x53EF;&#x4EE5;&#x662F;1</del>n&#x4E2A;&#x4EBA;&#xFF09;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x4E92;&#x8054;&#x7F51;&#x5E73;&#x53F0;&#xFF0C;&#x79DF;&#x6237;&#x4E2D;&#x4EBA;&#x5458;&#x89C4;&#x6A21;&#x51B3;&#x5B9A;&#x4E86;&#x6D41;&#x91CF;&#x5927;&#x5C0F;&#xFF0C;&#x6240;&#x4EE5;&#x79DF;&#x6237;&#x4E2D;&#x7684;&#x4EBA;&#x5458;&#x89C4;&#x6A21;&#x4E5F;&#x662F;&#x5B9A;&#x4EF7;&#x7684;&#x53C2;&#x8003;&#x9879;&#x3002;</p>
</blockquote>
<h1 id="SaaS&#x5982;&#x4F55;&#x91CF;&#x5316;&#x5B9A;&#x4EF7;"><a href="#SaaS&#x5982;&#x4F55;&#x91CF;&#x5316;&#x5B9A;&#x4EF7;" class="headerlink" title="SaaS&#x5982;&#x4F55;&#x91CF;&#x5316;&#x5B9A;&#x4EF7;"></a>SaaS&#x5982;&#x4F55;&#x91CF;&#x5316;&#x5B9A;&#x4EF7;</h1><ul>
<li>&#x9009;&#x8D2D;&#x529F;&#x80FD;&#x6570;&#x76EE;</li>
<li>&#x79DF;&#x6237;&#x4EBA;&#x5458;&#x89C4;&#x6A21;</li>
<li>&#x670D;&#x52A1;&#x671F;&#x9650;&#xFF08;&#x65F6;&#x95F4;&#x957F;&#x53EF;&#x4EE5;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x4F18;&#x60E0;&#xFF09;</li>
<li>&#x6280;&#x672F;&#x652F;&#x6301;&#xFF08;&#x552E;&#x540E;&#x4EE5;&#x5916;&#x7684;&#x652F;&#x6301;&#xFF09;</li>
</ul>
<h1 id="SaaS&#x670D;&#x52A1;&#x7684;&#x6784;&#x6210;"><a href="#SaaS&#x670D;&#x52A1;&#x7684;&#x6784;&#x6210;" class="headerlink" title="SaaS&#x670D;&#x52A1;&#x7684;&#x6784;&#x6210;"></a>SaaS&#x670D;&#x52A1;&#x7684;&#x6784;&#x6210;</h1><ul>
<li>&#x79DF;&#x6237;&#x7BA1;&#x7406;&#x3001;&#x4E00;&#x79DF;&#x6237;&#x591A;&#x7528;&#x6237;/&#x7528;&#x6237;&#x5373;&#x79DF;&#x6237;</li>
<li>&#x79DF;&#x6237;&#x9875;&#x9762;&#x7EA7;&#x522B;&#x6743;&#x9650;</li>
<li>&#x79DF;&#x6237;&#x6570;&#x636E;&#x9694;&#x79BB;</li>
<li>&#x8FD0;&#x8425;&#x6A21;&#x5757;&#x53CA;&#x4EBA;&#x5458;</li>
<li>&#x4EA7;&#x54C1;&#x4ECB;&#x7ECD;&#x53CA;&#x9500;&#x552E;</li>
</ul>
<blockquote>
<p>SaaS&#x670D;&#x52A1;&#x5546;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#x4E00;&#x4E2A;&#x5305;&#x79DF;&#x516C;&#xFF0C;&#x4ED6;&#x6709;&#x4E00;&#x680B;&#x697C;&#xFF08;SaaS&#x670D;&#x52A1;&#xFF09;&#xFF0C;&#x6240;&#x6709;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x6765;&#x79DF;&#xFF08;&#x591A;&#x79DF;&#x6237;&#xFF09;&#xFF0C;&#x79DF;&#x5927;&#x7684;&#x79DF;&#x5C0F;&#x7684;&#x90FD;&#x884C;&#xFF08;&#x6309;&#x9700;&#x9009;&#x62E9;&#xFF09;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x4E2A;&#x79DF;&#x6237;&#x53EA;&#x80FD;&#x8FDB;&#x5165;&#x81EA;&#x5DF1;&#x79DF;&#x7684;&#x623F;&#x5B50;&#xFF08;&#x5B89;&#x5168;&#x9694;&#x79BB;&#xFF09;&#xFF0C;&#x7528;&#x6237;&#x79DF;&#x6237;&#x5230;&#x671F;&#x524D;&#x63D0;&#x9192;&#xFF08;&#x670D;&#x52A1;&#x671F;&#x9650;&#x63D0;&#x9192;&#xFF09;&#xFF0C;&#x5230;&#x671F;&#x540E;&#x9009;&#x62E9;&#x7EED;&#x8D39;&#x6216;&#x642C;&#x5BB6;&#xFF08;&#x7EE7;&#x7EED;&#x670D;&#x52A1;&#x6216;&#x505C;&#x6B62;&#x670D;&#x52A1;&#xFF09;&#xFF0C;&#x7269;&#x4E1A;&#x4EBA;&#x5458;&#x63D0;&#x4F9B;&#x914D;&#x5957;&#x670D;&#x52A1;&#xFF08;&#x8FD0;&#x8425;&#x53CA;&#x552E;&#x540E;&#xFF09;</p>
</blockquote>
<h1 id="SaaS&#x670D;&#x52A1;&#x4F53;&#x7CFB;"><a href="#SaaS&#x670D;&#x52A1;&#x4F53;&#x7CFB;" class="headerlink" title="SaaS&#x670D;&#x52A1;&#x4F53;&#x7CFB;"></a>SaaS&#x670D;&#x52A1;&#x4F53;&#x7CFB;</h1><h2 id="&#x8C01;&#x5728;&#x505A;SaaS"><a href="#&#x8C01;&#x5728;&#x505A;SaaS" class="headerlink" title="&#x8C01;&#x5728;&#x505A;SaaS"></a>&#x8C01;&#x5728;&#x505A;SaaS</h2><p>&#x901A;&#x5E38;&#x63D0;&#x4F9B;SaaS&#x670D;&#x52A1;&#x7684;&#x5382;&#x5BB6;&#x5E76;&#x4E0D;&#x662F;&#x751F;&#x6765;&#x5C31;&#x662F;SaaS&#x670D;&#x52A1;&#x5546;&#xFF0C;&#x4E3B;&#x8981;&#x6765;&#x81EA;&#x4E8E;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x4F01;&#x4E1A;&#xFF1A;</p>
<ul>
<li>&#x4F20;&#x7EDF;&#x670D;&#x52A1;&#x5546;&#x5411;&#x4E92;&#x8054;&#x7F51;&#x8F6C;&#x578B;&#xFF0C;&#x5C06;&#x4EA7;&#x54C1;&#x4E91;&#x5316;&#xFF0C;SaaS&#x5316;&#xFF0C;&#x8FD9;&#x6837;&#x6709;&#x4E24;&#x4E2A;&#x597D;&#x5904;&#xFF1A;1.&#x964D;&#x4F4E;&#x7528;&#x6237;&#x6210;&#x672C;&#xFF0C;&#x7528;&#x6237;&#x65E0;&#x9700;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x652F;&#x6301;&#x670D;&#x52A1;&#x8BA2;&#x8D2D;&#xFF0C;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x6C42;&#x8D2D;&#x4E70;&#x90E8;&#x5206;&#x6A21;&#x5757;&#xFF1B;2.&#x4F5C;&#x4E3A;&#x4F9B;&#x5E94;&#x5546;&#xFF0C;&#x53EF;&#x4EE5;&#x964D;&#x4F4E;&#x8FD0;&#x7EF4;&#x6210;&#x672C;&#xFF0C;&#x4E14;&#x80FD;&#x591F;&#x8986;&#x76D6;&#x4E0D;&#x540C;&#x9700;&#x6C42;&#x7684;&#x7528;&#x6237;</li>
<li>&#x4E92;&#x8054;&#x7F51;&#x4F01;&#x4E1A;&#x589E;&#x52A0;B&#x7AEF;&#x670D;&#x52A1;&#x677F;&#x5757;&#xFF0C;&#x80FD;&#x591F;&#x5C06;&#x4F01;&#x4E1A;&#x4EA7;&#x54C1;&#x4EF7;&#x503C;&#x6700;&#x5927;&#x5316;&#x3001;&#x8986;&#x76D6;&#x5230;&#x66F4;&#x591A;&#x7528;&#x6237;&#x7FA4;&#x4F53;&#xFF0C;&#x6BD4;&#x5982;&#x9489;&#x9489;&#x3001;&#x4F01;&#x4E1A;&#x5FAE;&#x4FE1;&#x7B49;</li>
</ul>
<h2 id="&#x4EA7;&#x54C1;&#x5982;&#x4F55;SaaS&#x5316;"><a href="#&#x4EA7;&#x54C1;&#x5982;&#x4F55;SaaS&#x5316;" class="headerlink" title="&#x4EA7;&#x54C1;&#x5982;&#x4F55;SaaS&#x5316;"></a>&#x4EA7;&#x54C1;&#x5982;&#x4F55;SaaS&#x5316;</h2><ul>
<li>1&#x3001;&#x8FDB;&#x884C;&#x4E91;&#x5316;&#x90E8;&#x7F72;&#xFF0C;&#x6027;&#x80FD;&#x5347;&#x7EA7;&#xFF0C;&#x80FD;&#x591F;&#x652F;&#x6301;&#x66F4;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x7528;&#x6237;&#x8BBF;&#x95EE;</li>
<li>2&#x3001;&#x7528;&#x6237;&#x7CFB;&#x7EDF;&#x6539;&#x9020;&#xFF0C;&#x652F;&#x6301;2C&#x7528;&#x6237;&#x767B;&#x5F55;&#xFF08;&#x624B;&#x673A;&#x53F7;&#x4E00;&#x952E;&#x767B;&#x5F55;&#x3001;&#x5C0F;&#x7A0B;&#x5E8F;&#x767B;&#x5F55;&#x3001;&#x77ED;&#x4FE1;&#x9A8C;&#x8BC1;&#x7801;&#x767B;&#x5F55;&#xFF09;</li>
<li>3&#x3001;&#x7F51;&#x5173;&#x670D;&#x52A1;&#xFF0C;&#x9650;&#x6D41;&#xFF0C;&#x63A5;&#x53E3;&#x9632;&#x7BE1;&#x6539;&#x7B49;&#x7B49;</li>
<li>3&#x3001;&#x79DF;&#x6237;&#x7CFB;&#x7EDF;&#x5F00;&#x53D1;&#xFF0C;&#x5305;&#x542B;&#x79DF;&#x6237;&#x57FA;&#x7840;&#x4FE1;&#x606F;&#x7BA1;&#x7406;&#x3001;&#x79DF;&#x6237;&#x7ED1;&#x5B9A;&#x8D44;&#x6E90;&#xFF08;&#x8BA2;&#x8D2D;&#x7684;&#x529F;&#x80FD;&#xFF09;&#x3001;&#x79DF;&#x6237;&#x670D;&#x52A1;&#x671F;&#x9650;&#x7B49;&#x7B49;</li>
<li>4&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x6539;&#x9020;&#xFF08;&#x901A;&#x5E38;SaaS&#x7CFB;&#x7EDF;&#x4E3B;&#x8981;&#x63D0;&#x4F9B;WEB&#x7AEF;&#x670D;&#x52A1;&#xFF09;&#xFF0C;&#x9875;&#x9762;&#x6743;&#x9650;&#x63A7;&#x5236;&#xFF0C;&#x6839;&#x636E;&#x79DF;&#x6237;&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#x8D44;&#x6E90;&#x63D0;&#x4F9B;&#x7528;&#x6237;&#x5DF2;&#x8D2D;&#x4E70;&#x7684;&#x6A21;&#x5757;&#x6216;&#x9875;&#x9762;</li>
<li>5&#x3001;&#x5B98;&#x7F51;&#x5F00;&#x53D1;&#xFF0C;&#x529F;&#x80FD;&#x62A5;&#x4EF7;&#x5355;&#xFF0C;&#x529F;&#x80FD;&#x8BD5;&#x7528;&#x3001;&#x7528;&#x6237;&#x9009;&#x8D2D;&#x53CA;&#x652F;&#x4ED8;</li>
<li>6&#x3001;&#x670D;&#x52A1;&#x7AEF;&#x63A5;&#x53E3;&#x6570;&#x636E;&#x6743;&#x9650;&#x6539;&#x9020;&#x3001;&#x79DF;&#x6237;&#x7EA7;&#x522B;&#x6570;&#x636E;&#x6743;&#x9650;</li>
</ul>
<h2 id="&#x79DF;&#x6237;&#x9A8C;&#x8BC1;&#x53CA;&#x6570;&#x636E;&#x9694;&#x79BB;"><a href="#&#x79DF;&#x6237;&#x9A8C;&#x8BC1;&#x53CA;&#x6570;&#x636E;&#x9694;&#x79BB;" class="headerlink" title="&#x79DF;&#x6237;&#x9A8C;&#x8BC1;&#x53CA;&#x6570;&#x636E;&#x9694;&#x79BB;"></a>&#x79DF;&#x6237;&#x9A8C;&#x8BC1;&#x53CA;&#x6570;&#x636E;&#x9694;&#x79BB;</h2><p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/4d1fe9b70f0be685e0f7b59acb73e6605db744c9a7d454475bea3819522a41f3" alt="image.png"></p>
<h1 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h1><blockquote>
<p>SaaS&#x7CFB;&#x7EDF;&#x662F;&#x4ECB;&#x4E8E;2b&#x4E0E;2c&#x4E1A;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x79CD;&#x670D;&#x52A1;&#xFF0C;&#x63D0;&#x4F9B;2c&#x5F0F;&#x5165;&#x53E3;&#xFF0C;2b&#x5F0F;&#x7684;&#x7CFB;&#x7EDF;&#x5E73;&#x53F0;&#xFF0C;&#x65E0;&#x8BBA;&#x5BF9;&#x4E8E;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x5546;&#x8FD8;&#x662F;&#x5BA2;&#x6237;&#x90FD;&#x662F;&#x975E;&#x5E38;&#x597D;&#x7684;&#x4E00;&#x79CD;&#x6A21;&#x5F0F;&#x3002;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6765;&#x8BF4;&#xFF0C;&#x4E86;&#x89E3;SaaS&#x8981;&#x505A;&#x4EC0;&#x4E48;&#xFF0C;&#x505A;&#x597D;&#x6280;&#x672F;&#x50A8;&#x5907;&#xFF0C;&#x5C31;&#x80FD;&#x77E5;&#x9053;&#x600E;&#x4E48;&#x505A;&#x4E86;&#x3002;</p>
</blockquote>
<p><a href="https://dev.newban.cn/7037303596471287838">&#x70B9;&#x51FB;&#x4E86;&#x89E3;&#x767B;&#x5F55;&#x5931;&#x8D25;&#x9501;&#x5B9A;</a></p>
<p><a href="https://dev.newban.cn/7010649677963984909">&#x70B9;&#x51FB;&#x4E86;&#x89E3;&#x4F4E;&#x4EE3;&#x7801;&#x5E73;&#x53F0;</a></p>
<p><a href="https://dev.newban.cn/7012444906434068510">&#x70B9;&#x51FB;&#x4E86;&#x89E3;mongo&#x7D22;&#x5F15;&#x8BBE;&#x8BA1;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/7b9ce724ed8c2027d5120096fb0e00a1.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7006821354397761543.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7006821354397761543.html" itemprop="url">Mac安装java opencv依赖并在intellij上配</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-12T07:46:44+08:00">
                2021-09-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x8FD1;&#x671F;&#x7533;&#x8BF7;&#x9A7E;&#x7167;&#x65F6;&#xFF0C;&#x60F3;&#x7740;&#x75AB;&#x60C5;&#x4E0D;&#x51FA;&#x95E8;&#x81EA;&#x5DF1;&#x62CD;&#x7167;PS&#x4E86;&#x4E00;&#x6CE2;&#xFF0C;&#x7ED3;&#x679C;&#x5E02;&#x653F;&#x5385;&#x5927;&#x59D0;&#x7528;&#x6807;&#x5C3A;&#x4E00;&#x91CF;&#x53D1;&#x73B0;p&#x7684;&#x51E0;&#x5F20;&#x7167;&#x7247;&#x8981;&#x4E0D;&#x5C31;&#x662F;&#x5934;&#x5927;&#x4E86;&#xFF0C;&#x8981;&#x4E0D;&#x5C31;&#x662F;&#x8863;&#x670D;&#x548C;&#x80CC;&#x666F;&#x989C;&#x8272;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x597D;&#x51E0;&#x5F20;&#x7167;&#x7247;&#x7ADF;&#x7136;&#x6CA1;&#x4E00;&#x5F20;&#x80FD;&#x7528;&#x7684;&#xFF0C;&#x65E0;&#x5948;&#x53EA;&#x80FD;&#x91CD;&#x6765;&#x4E00;&#x6B21;&#x3002;&#x75DB;&#x5B9A;&#x601D;&#x75DB;&#xFF0C;&#x51B3;&#x5B9A;&#x5F00;&#x4E00;&#x4E2A;&#x5C0F;&#x9879;&#x76EE;&#xFF0C;&#x6765;&#x81EA;&#x52A8;&#x5C06;&#x7EAF;&#x8272;&#x80CC;&#x666F;&#x7684;&#x5355;&#x4EBA;&#x7167;&#x8F93;&#x51FA;&#x6210;&#x7B26;&#x5408;&#x6807;&#x51C6;&#x7684;id&#x7167;&#x7247;&#x3002;</p>
<p>&#x8BF4;&#x641E;&#x5C31;&#x641E;&#xFF0C;&#x56E0;&#x4E3A;&#x540E;&#x7AEF;&#x6BD4;&#x8F83;&#x719F;&#x6089;Java&#x5C31;&#x51B3;&#x5B9A;&#x7528;Java&#x3002;&#xFF08;&#x5176;&#x5B9E;&#x56FE;&#x50CF;&#x5904;&#x7406;&#x76F8;&#x5173;&#x7684;&#x9879;&#x76EE;&#x7528;c++&#x5199;&#x5E94;&#x8BE5;&#x4F1A;&#x65B9;&#x4FBF;&#x5F88;&#x591A;&#xFF09;&#x90A3;&#x9996;&#x5148;&#x8981;&#x914D;&#x7F6E;&#x597D;&#x672C;&#x5730;&#x7528;java+opencv&#x7684;&#x73AF;&#x5883;&#x4E86;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;opencv&#x7684;java&#x5305;&#x7136;&#x540E;&#x914D;&#x7F6E;&#x5230;intellij&#x4E0A;&#x3002;&#x4EE5;&#x4E0B;&#x662F;&#x5177;&#x4F53;&#x6B65;&#x9AA4;&#xFF1A;</p>
<ol>
<li>Mac&#x4E0A;&#x9700;&#x5148;&#x5B89;&#x88C5;&#x547D;&#x4EE4;&#x5DE5;&#x5177;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lua&#x590D;&#x5236;&#x4EE3;&#x7801;xcode-select&#xA0;--install</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>&#x5B89;&#x88C5;Ant&#xFF0C;&#x5FC5;&#x987B;&#x5B89;&#x88C5;&#xFF08;&#x4E4B;&#x524D;&#x81EA;&#x5DF1;&#x60F3;&#x7740;&#x7528;maven&#x8DF3;&#x8FC7;&#x4E86;&#xFF0C;&#x7ED3;&#x679C;&#x5BFC;&#x81F4;&#x6700;&#x7EC8;&#x6CA1;&#x6709;&#x751F;&#x6210;&#x9700;&#x8981;&#x7684;java&#x6587;&#x4EF6;&#x5939;&#xFF09;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;brew&#xA0;install&#xA0;ant</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>&#x63A5;&#x4E0B;&#x6765;&#x9700;&#x8981;&#x8FD0;&#x884C;<code>brew edit opencv</code>&#x5148;&#x4FEE;&#x6539;opnecv&#x7684;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#xFF0C; &#x5C06;<code>-DBUILD_opencv_java=OFF</code> &#x6539;&#x4E3A; <code>-DBUILD_opencv_java=ON</code>&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x4E4B;&#x540E;&#x751F;&#x6210;&#x9700;&#x8981;&#x7684;jar&#x6587;&#x4EF6;&#x3002;</li>
<li>&#x5B89;&#x88C5;opencv&#xFF0C;&#x5982;&#x679C;&#x4E4B;&#x524D;&#x6709;&#x5B89;&#x88C5;&#x8FC7;&#x4F46;&#x662F;&#x6CA1;&#x6709;jar&#x6587;&#x4EF6;&#x7684;&#x8BDD;&#xFF0C;&#x9700;&#x8981;&#x8FD0;&#x884C;<code>brew reinstall --build-from-source opencv</code>&#x6765;&#x91CD;&#x88C5;&#x3002;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;brew&#xA0;install&#xA0;--build-from-source&#xA0;opencv</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>&#x5B89;&#x88C5;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x5728;<code>/usr/local/Cellar/opencv/4.5.3_2/share/java/opencv4</code>&#x4E0B;&#x4F1A;&#x6709;&#x4E24;&#x4E2A;&#x9700;&#x8981;&#x7684;&#x6587;&#x4EF6;&#xFF1A;</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x590D;&#x5236;&#x4EE3;&#x7801;libopencv_java453.dylib</span><br><span class="line">opencv-453.jar</span><br></pre></td></tr></table></figure>

<p>6.&#x5728;intellij&#x4E2D;&#x5C06;&#x4E0A;&#x9762;&#x6587;&#x4EF6;&#x5939;&#x8DEF;&#x5F84;&#x914D;&#x7F6E;&#x4E3A;VM Options</p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/a3283c5aafc7efc410540a50510d6fc0d510fe8240a6b8f6fa446a791ba857d1" alt="image.png"></p>
<p><img src="https://gitee.com/songjianzaina/juejin_p6/raw/master/img/f059810fe5e2ca834181991cb973b5241fcc9a3d3a32387f5251ab00de8fb205" alt="image.png"></p>
<p>7.&#x5728;&#x9700;&#x8981;&#x4F7F;&#x7528;opencv api&#x4E4B;&#x524D;&#x9700;&#x8981;&#x5148;&#x52A0;&#x5165;&#x4E0B;&#x9762;&#x4EE3;&#x7801;&#x4EE5;&#x52A0;&#x8F7D;opencv&#x6A21;&#x5757;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;System.loadLibrary(Core.NATIVE_LIBRARY_NAME);</span><br></pre></td></tr></table></figure>

<p>&#x5E38;&#x89C1;&#x95EE;&#x9898;&#xFF1A;</p>
<ol>
<li>&#x914D;&#x7F6E;&#x5B8C;&#x540E;&#x8FD0;&#x884C;&#x62A5;&#x9519;[no opencv_java453 in java.library.path]&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x662F;jar&#x6587;&#x4EF6;&#x6CA1;&#x6709;&#x627E;&#x5230;&#xFF0C;&#x9700;&#x8981;&#x786E;&#x8BA4;&#x8DEF;&#x5F84;&#x914D;&#x7F6E;&#x6B63;&#x786E;&#xFF0C;&#x5E76;&#x4E14;&#x9700;&#x8981;&#x7684;&#x4E24;&#x4E2A;&#x6587;&#x4EF6;&#x5728;&#x76F8;&#x5E94;&#x8DEF;&#x5F84;&#x4E0B;</li>
<li>&#x914D;&#x7F6E;&#x5B8C;&#x6210;&#x540E;&#x9047;&#x5230;&#x62A5;&#x9519;UnsatisfiedLinkError: &#x2018;long org.opencv.imgcodecs.Imgcodecs.imread_1(java.lang.String)&#x2019;&#xFF0C;&#x4E4B;&#x4E2D;&#x60C5;&#x51B5;&#x662F;opencv&#x6A21;&#x5757;&#x6CA1;&#x6709;&#x52A0;&#x8F7D;&#x6240;&#x4EE5;&#x65E0;&#x6CD5;&#x6B63;&#x786E;&#x94FE;&#x63A5;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x3002;</li>
</ol>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/7742c5db35eb562a74ad777876508431.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7006697028591829023.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7006697028591829023.html" itemprop="url">LeetCode【14、最长公共前缀】（简单）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-11T23:25:33+08:00">
                2021-09-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x9898;&#x76EE;&#x63CF;&#x8FF0;"><a href="#&#x9898;&#x76EE;&#x63CF;&#x8FF0;" class="headerlink" title="&#x9898;&#x76EE;&#x63CF;&#x8FF0;"></a>&#x9898;&#x76EE;&#x63CF;&#x8FF0;</h2><blockquote>
<p>&#x8FD9;&#x662F; <code>LeetCode</code> &#x4E0A;&#x7684; <a href="/external_links/606ccafc3d2f1383065df5022220c1a7.html" target="blank" rel="noopener">14. &#x6700;&#x957F;&#x516C;&#x5171;&#x524D;&#x7F00;</a>&#xFF0C;&#x96BE;&#x5EA6;&#x4E3A; <strong>&#x7B80;&#x5355;</strong>&#x3002;</p>
<p>&#x5173;&#x952E;&#x5B57;&#xFF1A; <code>&#x5B57;&#x7B26;&#x4E32;</code></p>
</blockquote>
<p>&#x7F16;&#x5199;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6765;&#x67E5;&#x627E;&#x5B57;&#x7B26;&#x4E32;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6700;&#x957F;&#x516C;&#x5171;&#x524D;&#x7F00;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4E0D;&#x5B58;&#x5728;&#x516C;&#x5171;&#x524D;&#x7F00;&#xFF0C;&#x8FD4;&#x56DE;&#x7A7A;&#x5B57;&#x7B26;&#x4E32; <code>&quot;&quot;</code>&#x3002;</p>
<p><strong>&#x793A;&#x4F8B; 1&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;&#x8F93;&#x5165;&#xFF1A;strs = [&quot;flower&quot;,&quot;flow&quot;,&quot;flight&quot;]</span><br><span class="line">&#x8F93;&#x51FA;&#xFF1A;&quot;fl&quot;</span><br></pre></td></tr></table></figure>

<p><strong>&#x793A;&#x4F8B; 2&#xFF1A;</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;&#x8F93;&#x5165;&#xFF1A;strs = [&quot;dog&quot;,&quot;racecar&quot;,&quot;car&quot;]</span><br><span class="line">&#x8F93;&#x51FA;&#xFF1A;&quot;&quot;</span><br><span class="line">&#x89E3;&#x91CA;&#xFF1A;&#x8F93;&#x5165;&#x4E0D;&#x5B58;&#x5728;&#x516C;&#x5171;&#x524D;&#x7F00;&#x3002;</span><br></pre></td></tr></table></figure>

<p><strong>&#x63D0;&#x793A;&#xFF1A;</strong></p>
<ul>
<li><code>1 &lt;= strs.length &lt;= 200</code></li>
<li><code>0 &lt;= strs[i].length &lt;= 200</code></li>
<li><code>strs[i]</code> &#x4EC5;&#x7531;&#x5C0F;&#x5199;&#x82F1;&#x6587;&#x5B57;&#x6BCD;&#x7EC4;&#x6210;</li>
</ul>
<hr>
<h2 id="&#x5212;&#x91CD;&#x70B9;"><a href="#&#x5212;&#x91CD;&#x70B9;" class="headerlink" title="&#x5212;&#x91CD;&#x70B9;"></a>&#x5212;&#x91CD;&#x70B9;</h2><ol>
<li>&#x4E0D;&#x5B58;&#x5728;&#x8FD4;&#x56DE;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</li>
</ol>
<hr>
<h2 id="&#x89E3;&#x9898;&#x601D;&#x8DEF;"><a href="#&#x89E3;&#x9898;&#x601D;&#x8DEF;" class="headerlink" title="&#x89E3;&#x9898;&#x601D;&#x8DEF;"></a>&#x89E3;&#x9898;&#x601D;&#x8DEF;</h2><h3 id="&#x65B9;&#x6CD5;1&#xFF1A;"><a href="#&#x65B9;&#x6CD5;1&#xFF1A;" class="headerlink" title="&#x65B9;&#x6CD5;1&#xFF1A;"></a>&#x65B9;&#x6CD5;1&#xFF1A;</h3><p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x904D;&#x5386;&#x5B57;&#x7B26;&#x6570;&#x7EC4;&#xFF0C;&#x6BCF;&#x6B21;&#x62FF;&#x5230;&#x4E24;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x83B7;&#x53D6;&#x516C;&#x5171;&#x524D;&#x7F00;&#xFF0C;&#x518D;&#x7528;&#x8FD9;&#x4E2A;&#x516C;&#x5171;&#x524D;&#x7F00;&#x4E0E;&#x4E0B;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x83B7;&#x53D6;&#x65B0;&#x7684;&#x516C;&#x5171;&#x524D;&#x7F00;&#xFF0C;&#x4E00;&#x76F4;&#x5230;&#x6700;&#x540E;&#x5F97;&#x5230;&#x7684;&#x5C31;&#x662F;&#x6240;&#x6709;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6700;&#x957F;&#x516C;&#x5171;&#x524D;&#x7F00;&#x3002;&#x4E00;&#x65E6;&#x6CA1;&#x6709;&#x516C;&#x5171;&#x524D;&#x7F00;&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x7A7A;&#x3001;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x6BD4;&#x8F83;&#x540E;&#x9762;&#x7684;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">    public String longestCommonPrefix(String[] strs) {</span><br><span class="line">        // &#x7279;&#x6B8A;&#x60C5;&#x51B5;&#x5224;&#x65AD;</span><br><span class="line">        int len = strs.length;</span><br><span class="line">        String first = strs[0];</span><br><span class="line">        if (len == 1) {</span><br><span class="line">            return first;</span><br><span class="line">        }</span><br><span class="line">        // &#x5B9A;&#x4E49;&#x6700;&#x5C0F;&#x516C;&#x5171;&#x524D;&#x7F00;</span><br><span class="line">        String ans = first;</span><br><span class="line">        for (int i = 1; i &lt; len; i++) {</span><br><span class="line">            ans = getPrefix(ans, strs[i]);</span><br><span class="line">            if (ans.length() == 0) {</span><br><span class="line">                break;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        return ans;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public String getPrefix(String s1, String s2) {</span><br><span class="line">        int len = Math.min(s1.length(), s2.length());</span><br><span class="line">        int index = 0;</span><br><span class="line">        while (index &lt; len &amp;&amp; s1.charAt(index) == s2.charAt(index)) {</span><br><span class="line">            ++index;</span><br><span class="line">        }</span><br><span class="line">        return s1.substring(0, index);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(mn)</li>
<li>&#x7A7A;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(1)</li>
</ul>
<h3 id="&#x65B9;&#x6CD5;2&#xFF1A;"><a href="#&#x65B9;&#x6CD5;2&#xFF1A;" class="headerlink" title="&#x65B9;&#x6CD5;2&#xFF1A;"></a>&#x65B9;&#x6CD5;2&#xFF1A;</h3><p>&#x5BF9;&#x4E8E;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x6570;&#x7EC4;&#x53D6;&#x6700;&#x957F;&#x516C;&#x5171;&#x524D;&#x7F00;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;&#x5176;&#x770B;&#x4F5C;&#x4E00;&#x4E2A;&#x4E8C;&#x7EF4;&#x7684;&#x5B57;&#x7B26;&#x6570;&#x7EC4;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x6570;&#x7EC4;&#x3002;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x540C;&#x4E00;&#x4F4D;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x90FD;&#x76F8;&#x540C;&#x5219;&#x6DFB;&#x52A0;&#x8BE5;&#x5B57;&#x7B26;&#x5230;&#x6700;&#x957F;&#x516C;&#x5171;&#x524D;&#x7F00;&#x4E2D;&#xFF0C;&#x4E00;&#x65E6;&#x6709;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;class Solution {</span><br><span class="line">    public String longestCommonPrefix(String[] strs) {</span><br><span class="line">        String ans = &quot;&quot;;</span><br><span class="line">        int len = strs.length;</span><br><span class="line">        String first = strs[0];</span><br><span class="line">        if (len == 1) {</span><br><span class="line">            return first;</span><br><span class="line">        }</span><br><span class="line">        for (int i = 0; i &lt; 200; i++) {</span><br><span class="line">            // &#x5224;&#x65AD;&#x5F53;&#x524D;&#x904D;&#x5386;&#x7684;&#x4F4D;&#x6570;&#x662F;&#x4E0D;&#x662F;&#x8D85;&#x8FC7;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x8D85;&#x8FC7;&#x6216;&#x8005;&#x6B63;&#x597D;&#x5219;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;</span><br><span class="line">            if (i &gt;= first.length()) {</span><br><span class="line">                return ans;</span><br><span class="line">            }</span><br><span class="line">            // &#x83B7;&#x53D6;&#x7B2C;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x6240;&#x7684;&#x904D;&#x5386;&#x5230;&#x7684;&#x4F4D;&#x7684;&#x503C;</span><br><span class="line">            char c = first.charAt(i);</span><br><span class="line">            for (int j = 1; j &lt; len; j++) {</span><br><span class="line">                // &#x8D85;&#x51FA;&#x957F;&#x5EA6;&#x6216;&#x8005;&#x548C;&#x5F53;&#x524D;&#x5B57;&#x7B26;&#x4E0D;&#x540C;&#x5219;&#x8FD4;&#x56DE;</span><br><span class="line">                if (i &gt;= strs[j].length() || strs[j].charAt(i) != c) {</span><br><span class="line">                    return ans;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            // &#x7B26;&#x5408;&#x6761;&#x4EF6;&#x5219;&#x5C06;&#x5F53;&#x524D;&#x5B57;&#x7B26;&#x62FC;&#x5230;&#x6700;&#x957F;&#x516C;&#x5171;&#x524D;&#x7F00;</span><br><span class="line">            ans += String.valueOf(c);</span><br><span class="line">        }</span><br><span class="line">        return ans;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x65F6;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(mn)</li>
<li>&#x7A7A;&#x95F4;&#x590D;&#x6742;&#x5EA6;&#xFF1A;O(1)</li>
</ul>
<hr>
<h2 id="&#x5F15;&#x7528;"><a href="#&#x5F15;&#x7528;" class="headerlink" title="&#x5F15;&#x7528;"></a>&#x5F15;&#x7528;</h2><p>&#x6211;&#x7684; <code>github</code> &#x4ED3;&#x5E93;&#x5DF2;&#x7ECF;&#x540C;&#x6B65;&#x5EFA;&#x7ACB;&#xFF0C;<a href="/external_links/1c31795387df74fe29f465c337368b04.html" target="blank" rel="noopener">&#x70B9;&#x51FB;&#x8BBF;&#x95EE;</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/9bf7c1e3f5fadbfa4591f7b141f697c2.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn../../7006329182791663624.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../7006329182791663624.html" itemprop="url">JVM 阅读GC log，以及各种VM参数的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-09-10T23:36:57+08:00">
                2021-09-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><ul>
<li>&#x8981;&#x4F1A;&#x9605;&#x8BFB;GC log&#xFF0C;&#x6765;&#x7406;&#x89E3;&#x5404;&#x79CD;&#x5783;&#x573E;&#x96C6;&#x5668;&#x3002;</li>
<li>&#x7406;&#x89E3;&#x5185;&#x5B58;&#x533A;&#x57DF;&#x7684;&#x4F5C;&#x7528;&#x4EE5;&#x53CA;&#x8C03;&#x6574;JVM &#x5185;&#x5B58;&#x5927;&#x5C0F;&#x3002;</li>
<li>&#x8981;&#x4F1A;&#x64CD;&#x4F5C;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x65F6;&#x4F7F;&#x7528;&#x54EA;&#x4E2A;&#x533A;&#x57DF;&#x3002;</li>
</ul>
<h2 id="&#x4F7F;&#x7528;VM&#x53C2;&#x6570;&#xFF0C;&#x9605;&#x8BFB;GC-log"><a href="#&#x4F7F;&#x7528;VM&#x53C2;&#x6570;&#xFF0C;&#x9605;&#x8BFB;GC-log" class="headerlink" title="&#x4F7F;&#x7528;VM&#x53C2;&#x6570;&#xFF0C;&#x9605;&#x8BFB;GC log"></a>&#x4F7F;&#x7528;VM&#x53C2;&#x6570;&#xFF0C;&#x9605;&#x8BFB;GC log</h2><h3 id="&#x4EE3;&#x7801;&#x53CA;VM&#x53C2;&#x6570;&#xFF0C;&#x89E6;&#x53D1;Minor-GC"><a href="#&#x4EE3;&#x7801;&#x53CA;VM&#x53C2;&#x6570;&#xFF0C;&#x89E6;&#x53D1;Minor-GC" class="headerlink" title="&#x4EE3;&#x7801;&#x53CA;VM&#x53C2;&#x6570;&#xFF0C;&#x89E6;&#x53D1;Minor GC"></a>&#x4EE3;&#x7801;&#x53CA;VM&#x53C2;&#x6570;&#xFF0C;&#x89E6;&#x53D1;Minor GC</h3><ul>
<li>VM&#x53C2;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;-Xms20M  // &#x5806;&#x7684;&#x6700;&#x5927;&#x503C;</span><br><span class="line">-Xmx20M  // &#x5806;&#x7684;&#x6700;&#x5C0F;&#x503C;</span><br><span class="line">-Xmn10M  // &#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F;   &#x5373; Eden &#x548C; &#x4E24;&#x4E2A;Servivor&#x7684;&#x603B;&#x5927;&#x5C0F;&#xFF0C;&#x90A3;&#x4E48;20-10=10M&#x5C31;&#x662F;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x5927;&#x5C0F;</span><br><span class="line">-XX:+PrintGCDetails // &#x6253;&#x5370;GC &#x65E5;&#x5FD7;</span><br><span class="line">-XX:SurvivorRatio=8  //  &#x8BBE;&#x7F6E;Eden&#x6240;&#x5360;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x6BD4;&#x7387;</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/3bbda2b4c5fe72c705b4f68d042eaa1060a32457a956dfcfc6edf4274ea14111" alt="image.png"></p>
<ul>
<li>&#x56DE;&#x987E;&#x4E00;&#x4E0B;&#x5185;&#x5B58;&#x5212;&#x5206;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/3d496bc874e98f7a04e853a1a6b8b080dbfef880ae21c89384f02a84092a4b9e" alt="image.png"></li>
<li>&#x4EE3;&#x7801;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class GCLogTest {</span><br><span class="line">    //&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x5199;,&#x5E74;&#x8F7B;&#x4EE3;&#x8017;&#x8D39;2032k&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5E94;&#x8BE5;&#x4F1A;&#x4E0D;&#x4E00;&#x6837;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException {</span><br><span class="line">        int size = 1024*1024;//M</span><br><span class="line">        byte[] bytes = new byte[4*size];//4M</span><br><span class="line">        byte[] bytes1 = new byte[3*size];//3M</span><br><span class="line">        byte[] bytes2 = new byte[3*size];//3M</span><br><span class="line">        System.out.println(&quot;GC log&quot;);</span><br><span class="line">        //&#x5185;&#x5B58;&#x4E2D;&#x4E0D;&#x6B62;&#x6709;&#x521B;&#x5EFA;&#x7684;byte[],&#x8FD8;&#x6709;&#x8FD0;&#x884C;Java&#x7A0B;&#x5E8F;&#x6240;&#x5FC5;&#x987B;&#x4F7F;&#x7528;&#x7684;&#x5BF9;&#x8C61;&#x3002;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b9194b51d9846a713e75772d56a4d653be70020b9c487832d15a612d8a7bf2c2" alt="image.png"></p>
<ul>
<li>&#x89E3;&#x91CA;&#x65E5;&#x5FD7;&#x542B;&#x4E49;<br><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/3c24cd5471445343dd61bed6d47409b3edb9624eb1504ca13e7005a4b7e14f8c" alt="image.png"></li>
</ul>
<blockquote>
<p><strong>&#x524D;&#x9762;&#x660E;&#x660E;&#x8BBE;&#x7F6E;&#x4E86;&#x5E74;&#x8F7B;&#x4EE3;&#x4E3A; 10M &#x4E3A;&#x4EC0;&#x4E48;&#x65E5;&#x5FD7;&#x5374;&#x662F;9216k&#xFF1F;</strong></p>
<ul>
<li>&#x5E74;&#x8F7B;&#x4EE3;&#x6709;&#x4E00;&#x4E2A;Eden&#x533A;&#x548C;&#x4E24;&#x4E2A;Serviver&#xFF0C;&#x5373;s0&#x548C;s1&#x3002;</li>
<li>&#x524D;&#x9762;&#x8BBE;&#x7F6E;Eden&#x533A;&#x5360;8 &#xFF0C;&#x90A3;&#x4E48;s0&#x548C;s1&#x5404;&#x5360;1&#x3002;</li>
<li><strong>&#x5728;&#x4F7F;&#x7528;&#x65F6;&#x53EA;&#x4F1A;&#x7528;s0&#x548C;s1&#x4E2D;&#x7684;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x3002;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#x4E00;&#x5B9A;&#x662F;&#x4E0D;&#x4F7F;&#x7528;&#x7684;&#x3002;&#x6240;&#x4EE5;&#x5C31;&#x5C11;&#x4E86;1024k</strong>&#x3002;</li>
<li>&#x5373;9216+1024 = 10240k = 10M&#xFF0C;&#x5C31;&#x662F;&#x5806;&#x7684;&#x8BBE;&#x7F6E;&#x5927;&#x5C0F;&#x548C;&#x5B9E;&#x9645;&#x5927;&#x5C0F;&#x4F1A;&#x5DEE;1024k&#x3002;&#x88AB;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Serviver&#x533A;&#x6D6A;&#x8D39;&#x4E86;&#x3002;</li>
</ul>
</blockquote>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/52bf3bbe20ecef3f1decdf43cc98f69f8e7c3ab912c8d50312b2d333e895bb77" alt="image.png"></p>
<blockquote>
<p><strong>&#x89C2;&#x5BDF;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x4F7F;&#x7528;&#x4E86;4104k&#xFF0C;&#x5982;&#x4F55;&#x5F97;&#x6765;&#xFF1F;</strong></p>
<ul>
<li>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;GC&#x524D;&#x540E;&#x7684;&#x5185;&#x5B58;&#x53D8;&#x5316;&#x6765;&#x8BA1;&#x7B97;&#x3002;</li>
<li>5976 - 840 = 5136k&#xFF0C;&#x8868;&#x793A;&#x5E74;&#x8F7B;&#x4EE3;&#x91CA;&#x653E;&#x4E86;5136k&#x5BB9;&#x91CF;&#x3002;</li>
<li><strong>&#x5E74;&#x8F7B;&#x4EE3;&#x91CA;&#x653E;&#x7684;&#x5185;&#x5BB9;&#x53EF;&#x80FD;&#x53BB;&#x4E86;&#x8001;&#x5E74;&#x4EE3;&#x6216;&#x8005;&#x5DF2;&#x7ECF;&#x88AB;&#x62B9;&#x9664;&#x4E86;&#x3002;</strong></li>
<li>5976 - 4944 = 1032k&#xFF0C;&#x8868;&#x793A;&#x6574;&#x4E2A;&#x5806;&#x91CA;&#x653E;&#x7684;&#x7A7A;&#x95F4;&#x4E3A;1032k&#x3002;</li>
<li>5136 - 1032 = 4104k&#xFF0C;&#x8868;&#x793A;&#x5E74;&#x8F7B;&#x4EE3;&#x91CA;&#x653E;&#x7684;&#x5185;&#x5BB9;&#x4E2D;&#x62B9;&#x9664;&#x4E86;1032k&#xFF0C;&#x5269;&#x4E0B;&#x7684;4104k&#x53BB;&#x4E86;&#x8001;&#x5E74;&#x4EE3;&#x3002;</li>
</ul>
</blockquote>
<h3 id="&#x4EE3;&#x7801;&#xFF0C;&#x89E6;&#x53D1;Full-GC"><a href="#&#x4EE3;&#x7801;&#xFF0C;&#x89E6;&#x53D1;Full-GC" class="headerlink" title="&#x4EE3;&#x7801;&#xFF0C;&#x89E6;&#x53D1;Full GC"></a>&#x4EE3;&#x7801;&#xFF0C;&#x89E6;&#x53D1;Full GC</h3><ul>
<li>&#x4EE3;&#x7801;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class GCLogTest {</span><br><span class="line">    //&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x5199;&#x5E74;&#x8F7B;&#x4EE3;,&#x8017;&#x8D39;2032k&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5E94;&#x8BE5;&#x4F1A;&#x4E0D;&#x4E00;&#x6837;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException {</span><br><span class="line">        int size = 1024*1024;//M</span><br><span class="line">        byte[] bytes = new byte[4*size];//4M</span><br><span class="line">        byte[] bytes1 = new byte[4*size];//4M</span><br><span class="line">        byte[] bytes2 = new byte[3*size];//3M</span><br><span class="line">        System.out.println(&quot;GC log&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/5f4975d0fa0241bc7aa635ec090dbfd6aad602abb81e725d6b9e2aa8952d82d6" alt="image.png"></p>
<ul>
<li>&#x89E3;&#x91CA;&#x4E00;&#x4E0B;Full GC</li>
</ul>
<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/c367e99a2da4a29a256a7e1be92b82c18e1f17d7e80a17cba93fd08aa572303d" alt="image.png"></p>
<h3 id="&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x6BD4;&#x4E0A;&#x9762;&#x89E6;&#x53D1;&#x65F6;Full-GC-&#x5BB9;&#x91CF;&#x5927;&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x89E6;&#x53D1;Full-GC"><a href="#&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x6BD4;&#x4E0A;&#x9762;&#x89E6;&#x53D1;&#x65F6;Full-GC-&#x5BB9;&#x91CF;&#x5927;&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x89E6;&#x53D1;Full-GC" class="headerlink" title="&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x6BD4;&#x4E0A;&#x9762;&#x89E6;&#x53D1;&#x65F6;Full GC &#x5BB9;&#x91CF;&#x5927;&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x89E6;&#x53D1;Full GC"></a>&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x6BD4;&#x4E0A;&#x9762;&#x89E6;&#x53D1;&#x65F6;Full GC &#x5BB9;&#x91CF;&#x5927;&#xFF0C;&#x5374;&#x6CA1;&#x6709;&#x89E6;&#x53D1;Full GC</h3><blockquote>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x662F;11M byte[]&#xFF0C;&#x89E6;&#x53D1;&#x4E86;Full GC</p>
</blockquote>
<ul>
<li>&#x521B;&#x5EFA;13M byte[]</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class GCLogTest {</span><br><span class="line">    //&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x5199;&#x5E74;&#x8F7B;&#x4EE3;,&#x8017;&#x8D39;2032k&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5E94;&#x8BE5;&#x4F1A;&#x4E0D;&#x4E00;&#x6837;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException {</span><br><span class="line">        int size = 1024*1024;//M</span><br><span class="line">        byte[] bytes = new byte[4*size];//4M</span><br><span class="line">        byte[] bytes1 = new byte[3*size];//3M</span><br><span class="line">        byte[] bytes2 = new byte[size];//1M</span><br><span class="line">        byte[] bytes3 = new byte[5*size];//5M</span><br><span class="line">        System.out.println(&quot;GC log&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/fcff3b582dabffef0ba5d54fc357df32d68cac530ad5667f39e3a76c188b00c2" alt="image.png"></p>
<ul>
<li>&#x660E;&#x660E;&#x521B;&#x5EFA;&#x7684;&#x5185;&#x5BB9;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x6CA1;&#x6709;&#x89E6;&#x53D1;Full GC<ul>
<li><strong>&#x5BF9;&#x8C61;&#x65E0;&#x6CD5;&#x5728;&#x65B0;&#x751F;&#x4EE3;&#x521B;&#x5EFA;&#x65F6;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;&#x3002;</strong><ul>
<li>&#x4E0D;&#x8981;&#x60F3;&#x7740;&#x5C06;&#x5BF9;&#x8C61;&#x62C6;&#x5206;&#x4E86;&#xFF0C;&#x4E00;&#x4E2A;&#x90E8;&#x5206;&#x5728;&#x65B0;&#x751F;&#x4EE3;&#xFF0C;&#x53E6;&#x4E00;&#x90E8;&#x5206;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x8FD9;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x3002;</li>
</ul>
</li>
</ul>
</li>
<li>&#x5982;&#x4E0B;&#x7684;&#x60C5;&#x51B5;&#x4E5F;&#x662F;&#x4F1A;&#x76F4;&#x63A5;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Java&#x590D;&#x5236;&#x4EE3;&#x7801;public class GCLogTest {</span><br><span class="line">    //&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x5199;&#x5E74;&#x8F7B;&#x4EE3;,&#x8017;&#x8D39;2032k&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5E94;&#x8BE5;&#x4F1A;&#x4E0D;&#x4E00;&#x6837;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException {</span><br><span class="line">        int size = 1024*1024;//M</span><br><span class="line">        byte[] bytes = new byte[8*size];//8M ,&#x52A0;&#x4E0A;&#x5176;&#x5B83;&#x7684;&#xFF0C;&#x4F1A;&#x8D85;&#x8FC7;&#x65B0;&#x751F;&#x4EE3;&#x5927;&#x5C0F;</span><br><span class="line">        System.out.println(&quot;GC log&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h2 id="image-png"><a href="#image-png" class="headerlink" title="image.png"></a>image.png</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Java&#x590D;&#x5236;&#x4EE3;&#x7801;public class GCLogTest {</span><br><span class="line">    //&#x4EC0;&#x4E48;&#x90FD;&#x4E0D;&#x5199;&#x5E74;&#x8F7B;&#x4EE3;,&#x8017;&#x8D39;2032k&#x5185;&#x5B58;&#xFF0C;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x5E94;&#x8BE5;&#x4F1A;&#x4E0D;&#x4E00;&#x6837;</span><br><span class="line">    public static void main(String[] args) throws ClassNotFoundException {</span><br><span class="line">        int size = 1024*1024;//M</span><br><span class="line">        byte[] bytes = new byte[11*size];//11M ,&#x5BF9;&#x8C61;&#x8D85;&#x8FC7;&#x4E86;&#x65B0;&#x751F;&#x4EE3;&#x548C;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x5927;&#x5C0F;</span><br><span class="line">        System.out.println(&quot;GC log&quot;);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/51d71d08e953cc43266eff015fcccbf816a938b620607e19f9d890982ddac5d8" alt="image.png"></p>
<h2 id="&#x9608;&#x503C;"><a href="#&#x9608;&#x503C;" class="headerlink" title="&#x9608;&#x503C;"></a>&#x9608;&#x503C;</h2><blockquote>
<p>&#x5728;&#x7EC8;&#x7AEF;&#x4F7F;&#x7528;java -XX:+PrintCommandLineFlags&#xFF0C;&#x67E5;&#x770B;JVM&#x542F;&#x52A8;&#x53C2;&#x6570;&#x3002;  </p>
<p><a href="/external_links/d5feb00e489ac99f9f6abbef0195f25a.html" target="blank" rel="noopener">&#x7B80;&#x5355;&#x804A;&#x4E00;&#x804A;UseCompressedOops &#x548C; UseCompressedClassPointers&#x8FD9;&#x4E24;&#x4E2A;JVM&#x53C2;&#x6570;&#x3002;</a></p>
</blockquote>
<h3 id="&#x901A;&#x8FC7;&#x4E00;&#x4E2A;VM-&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4F1A;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x9608;&#x503C;"><a href="#&#x901A;&#x8FC7;&#x4E00;&#x4E2A;VM-&#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4F1A;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x9608;&#x503C;" class="headerlink" title="&#x901A;&#x8FC7;&#x4E00;&#x4E2A;VM &#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4F1A;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x9608;&#x503C;"></a>&#x901A;&#x8FC7;&#x4E00;&#x4E2A;VM &#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4F1A;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x9608;&#x503C;</h3><ul>
<li>&#x5C31;&#x662F;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x9608;&#x503C;&#xFF0C;&#x5F53;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x5927;&#x4E8E;&#x8FD9;&#x4E2A;&#x9608;&#x503C;&#x65F6;&#xFF0C;<strong>&#x4E0D;&#x7BA1;&#x65B0;&#x751F;&#x4EE3;&#x7684;&#x7A7A;&#x95F4;&#x591F;&#x4E0D;&#x591F;&#x90FD;&#x53BB;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;</strong>&#x3002;</li>
<li>&#x4EE5;&#x4E0B;&#x4E3A;&#x672C;&#x6B21;VM&#x53C2;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;-Xms20M</span><br><span class="line">-Xmx20M</span><br><span class="line">-Xmn10M</span><br><span class="line">-XX:+PrintGCDetails</span><br><span class="line">-XX:SurvivorRatio=8</span><br><span class="line">-XX:PretenureSizeThreshold=4194304  //&#x9608;&#x503C;&#x4E3A;4M</span><br></pre></td></tr></table></figure>

<ul>
<li>&#x4EE3;&#x7801;&#xFF0C;&#x521B;&#x5EFA;&#x7684;&#x5B57;&#x8282;&#x6570;&#x7EC4;&#x4E3A;5M</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class ThresholdTest {</span><br><span class="line">    public static void main(String[] args) {</span><br><span class="line">         int size = 1024*1024;</span><br><span class="line">         byte[] bytes = new byte[5*size];</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/0dc4017453e26ff133c5f04e742d45884a8de55fe937412efec55ec49990de60" alt="image.png"></p>
<h3 id="&#x8981;&#x60F3;&#x9608;&#x503C;&#x8D77;&#x4F5C;&#x7528;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x5F97;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;"><a href="#&#x8981;&#x60F3;&#x9608;&#x503C;&#x8D77;&#x4F5C;&#x7528;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x5F97;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;" class="headerlink" title="&#x8981;&#x60F3;&#x9608;&#x503C;&#x8D77;&#x4F5C;&#x7528;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x5F97;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;"></a>&#x8981;&#x60F3;&#x9608;&#x503C;&#x8D77;&#x4F5C;&#x7528;&#xFF0C;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#x5F97;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;</h3><ul>
<li>&#x5728;&#x539F;&#x6765;&#x7684;VM &#x53C2;&#x57FA;&#x7840;&#x4E0A;&#x542F;&#x52A8;&#x5355;&#x7EBF;&#x7A0B;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;-XX:+UseSerialGC</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/90eb9568c21b9e1b17f4c04be83a3d1f6b13fc4561d7519e8296ddbf3d229b8d" alt="image.png"></p>
<h3 id="&#x8BBE;&#x7F6E;&#x5BF9;&#x8C61;&#x5728;Servivor&#x533A;&#x5E74;&#x9F84;&#x7684;&#x9608;&#x503C;"><a href="#&#x8BBE;&#x7F6E;&#x5BF9;&#x8C61;&#x5728;Servivor&#x533A;&#x5E74;&#x9F84;&#x7684;&#x9608;&#x503C;" class="headerlink" title="&#x8BBE;&#x7F6E;&#x5BF9;&#x8C61;&#x5728;Servivor&#x533A;&#x5E74;&#x9F84;&#x7684;&#x9608;&#x503C;"></a>&#x8BBE;&#x7F6E;&#x5BF9;&#x8C61;&#x5728;Servivor&#x533A;&#x5E74;&#x9F84;&#x7684;&#x9608;&#x503C;</h3><ul>
<li>Minor GC &#x662F;&#x53D1;&#x751F;&#x5728;&#x65B0;&#x751F;&#x4EE3;&#x4E2D;&#x7684;&#x5783;&#x573E;&#x6536;&#x96C6;&#x52A8;&#x4F5C;&#xFF0C;&#x6240;&#x91C7;&#x7528;&#x7684;&#x662F;&#x590D;&#x5236;&#x7B97;&#x6CD5;&#x3002;</li>
<li>&#x65B0;&#x751F;&#x4EE3;&#x51E0;&#x4E4E;&#x662F;&#x6240;&#x6709; Java &#x5BF9;&#x8C61;&#x51FA;&#x751F;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x65B0;&#x751F;&#x4EE3;&#x662F; GC &#x6536;&#x96C6;&#x5783;&#x573E;&#x7684;&#x9891;&#x7E41;&#x533A;&#x57DF;&#x3002;</li>
<li>&#x5F53;&#x5BF9;&#x8C61;&#x5728; Eden ( &#x5305;&#x62EC;&#x4E00;&#x4E2A; Survivor &#x533A;&#x57DF;&#xFF0C;&#x8FD9;&#x91CC;&#x5047;&#x8BBE;&#x662F; from &#x533A;&#x57DF; ) &#x51FA;&#x751F;&#x540E;&#xFF0C;&#x5728;&#x7ECF;&#x8FC7;&#x4E00;&#x6B21; Minor GC &#x540E;&#xFF0C;&#x5982;&#x679C;&#x5BF9;&#x8C61;&#x8FD8;&#x5B58;&#x6D3B;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x591F;&#x88AB;&#x53E6;&#x5916;&#x4E00;&#x5757; Survivor &#x533A;&#x57DF;&#x6240;&#x5BB9;&#x7EB3;( &#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x5047;&#x8BBE;&#x4E3A; from &#x533A;&#x57DF;&#xFF0C;&#x8FD9;&#x91CC;&#x5E94;&#x4E3A; to &#x533A;&#x57DF;&#xFF0C;&#x5373; to &#x533A;&#x57DF;<strong>&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x6765;&#x5B58;&#x50A8; Eden &#x548C; from &#x533A;&#x57DF;&#x4E2D;&#x5B58;&#x6D3B;&#x7684;&#x5BF9;&#x8C61;</strong> )&#xFF0C;&#x5219;&#x4F7F;&#x7528;&#x590D;&#x5236;&#x7B97;&#x6CD5;&#x5C06;&#x8FD9;&#x4E9B; <strong>&#x4ECD;&#x7136;&#x8FD8;&#x5B58;&#x6D3B;&#x7684;&#x5BF9;&#x8C61;&#x590D;&#x5236;&#x5230;&#x53E6;&#x5916;&#x4E00;&#x5757; Survivor &#x533A;&#x57DF;</strong> ( &#x5373; to &#x533A;&#x57DF; ) &#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x6E05;&#x7406;&#x6240;&#x4F7F;&#x7528;&#x8FC7;&#x7684; Eden &#x4EE5;&#x53CA; Survivor &#x533A;&#x57DF; ( &#x5373; from &#x533A;&#x57DF; )&#xFF0C;<strong>&#x5E76;&#x4E14;&#x5C06;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x7684;&#x5E74;&#x9F84;&#x8BBE;&#x7F6E;&#x4E3A;1&#xFF0C;&#x4EE5;&#x540E;&#x5BF9;&#x8C61;&#x5728; Survivor &#x533A;&#x6BCF;&#x71AC;&#x8FC7;&#x4E00;&#x6B21; Minor GC&#xFF0C;&#x5C31;&#x5C06;&#x5BF9;&#x8C61;&#x7684;&#x5E74;&#x9F84; + 1&#x3002;</strong></li>
<li>&#x5F53;&#x5E74;&#x9F84;&#x5230;&#x8FBE;&#x4E00;&#x5B9A;&#x503C;&#x65F6;&#x5BF9;&#x8C61;&#x5982;&#x679C;&#x8FD8;&#x5728;Servivor&#x533A;&#x590D;&#x5236;&#x6765;&#x590D;&#x5236;&#x53BB;&#x7684;&#xFF0C;&#x5C31;&#x4F1A;&#x88AB;&#x79FB;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x3002;</li>
<li><strong>-XX:MaxTenuringThreshold</strong>&#xFF1A;&#x8868;&#x793A;&#x5F53;&#x5E74;&#x9F84;&#x5230;&#x8FBE;&#x8BBE;&#x7F6E;&#x7684;&#x6700;&#x5927;&#x503C;&#x65F6;&#x4F1A;&#x88AB;&#x79FB;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x3002;<ul>
<li>&#x8BE5;&#x53C2;&#x6570;&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;15&#xFF0C;CMS&#x4E2D;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;6&#xFF0C;G1&#x4E2D;&#x9ED8;&#x8BA4;&#x4E3A;15(&#x5728;Jvw&#x4E2D;&#xFF0C;&#x8BE5;&#x6570;&#x503C;&#x662F;&#x7531;4&#x4E2A;bit&#x6765;&#x8868;&#x793A;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6700;&#x5927;&#x503C; 1111&#xFF0C;&#x5373;15)&#x3002;</li>
<li><strong>&#x662F;&#x8BBE;&#x7F6E;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF0C;&#x5BF9;&#x8C61;&#x6709;&#x53EF;&#x80FD;&#x5728;&#x5E74;&#x9F84;&#x5230;&#x8FBE;&#x6700;&#x5927;&#x503C;&#x65F6;&#x88AB;&#x79FB;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;&#x4F46;&#x662F;&#x5E74;&#x9F84;&#x5230;&#x8FBE;&#x8BBE;&#x7F6E;&#x7684;&#x6700;&#x5927;&#x9608;&#x503C;&#x65F6;&#x4E00;&#x5B9A;&#x4F1A;&#x88AB;&#x79FB;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x3002;</strong></li>
<li>&#x4F7F;&#x7528; <strong>-XX:TargetSurvivorRatio=value</strong> JVM &#x4F1A;&#x6839;&#x636E;&#x60C5;&#x51B5;<strong>&#x52A8;&#x6001;</strong>&#x8BBE;&#x7F6E;&#x5B83;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x8D85;&#x8FC7;&#x624B;&#x52A8;&#x7ED9;&#x5B83;&#x8BBE;&#x7F6E;&#x7684;&#x503C;&#x3002;</li>
</ul>
</li>
<li>&#x7ECF;&#x5386;&#x4E86;&#x591A;&#x6B21;GC&#x540E;&#xFF0C;&#x5B58;&#x6D3B;&#x7684;&#x5BF9;&#x8C61;&#x4F1A;&#x5728;From Survivor&#x4E0E;To Survivor&#x4E4B;&#x95F4;&#x6765;&#x56DE;&#x5B58;&#x653E;&#xFF0C;&#x800C;&#x8FD9;&#x91CC;&#x9762;&#x7684;&#x4E00;&#x4E2A;<strong>&#x524D;&#x63D0;&#x5219;&#x662F;&#x8FD9;&#x4E24;&#x4E2A;&#x7A7A;&#x95F4;&#x6709;&#x8DB3;&#x591F;&#x7684;&#x5927;&#x5C0F;&#x6765;&#x5B58;&#x653E;&#x8FD9;&#x4E9B;&#x6570;&#x636E;</strong>&#xFF0C;</li>
<li>&#x5728;GC&#x7B97;&#x6CD5;&#x4E2D;,&#x4F1A;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x5BF9;&#x8C61;&#x5E74;&#x9F84;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5982;&#x679C;&#x8FBE;&#x5230;&#x67D0;&#x4E2A;&#x5E74;&#x9F84;&#x540E;&#x53D1;&#x73B0;<strong>&#x603B;&#x5927;&#x5C0F;&#x5DF2;&#x7ECF;&#x5927;&#x4E8E;&#x4E86;Survivor&#xFF08;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#xFF09;&#x7A7A;&#x95F4;&#x7684;50%</strong>,&#x90A3;&#x4E48;&#x8FD9;&#x65F6;&#x5C31;&#x9700;&#x8981;&#x8C03;&#x6574;&#x9614;&#x503C;&#xFF0C;&#x4E0D;&#x80FD;&#x518D;&#x7EE7;&#x7EED;&#x7B49;&#x5230;&#x9ED8;&#x8BA4;&#x7684;15&#x6B21;GC&#x540E;&#x624D;&#x5B8C;&#x6210;&#x666E;&#x5347;&#xFF08;&#x79FB;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#xFF09;&#xFF0C;<strong>&#x56E0;&#x4E3A;&#x8FD9;&#x6837;&#x4F1A;&#x5BFC;&#x81F4;Survivor&#x7A7A;&#x95F4;&#x4E0D;&#x8DB3;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x8C03;&#x6574;&#x9608;&#x503C;&#xFF0C;&#x8BA9;&#x8FD9;&#x4E9B;&#x5B58;&#x6D3B;&#x5BF9;&#x8C61;&#x5C3D;&#x5FEB;&#x5B8C;&#x6210;&#x664B;&#x5347;&#x3002;</strong></li>
</ul>
<h3 id="&#x6F14;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x8C61;&#x4ECE;&#x5E74;&#x8F7B;&#x4EE3;&#x4EE5;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;"><a href="#&#x6F14;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x8C61;&#x4ECE;&#x5E74;&#x8F7B;&#x4EE3;&#x4EE5;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;" class="headerlink" title="&#x6F14;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x8C61;&#x4ECE;&#x5E74;&#x8F7B;&#x4EE3;&#x4EE5;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;"></a>&#x6F14;&#x793A;&#x4E00;&#x4E0B;&#xFF0C;&#x5BF9;&#x8C61;&#x4ECE;&#x5E74;&#x8F7B;&#x4EE3;&#x4EE5;&#x5230;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x8FC7;&#x7A0B;</h3><ul>
<li>&#x4EE5;&#x4E0B;&#x4E3A;&#x672C;&#x6B21;&#x4EE3;&#x7801; VM &#x53C2;&#x6570;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Java&#x590D;&#x5236;&#x4EE3;&#x7801;-Xmx200M // &#x5806;&#x5927;&#x5C0F; 200M</span><br><span class="line">-Xmn50M  // &#x65B0;&#x751F;&#x4EE3;&#x5927;&#x5C0F; </span><br><span class="line">-XX:TargetSurvivorRatio=60 // &#x5F53;&#x4E00;&#x4E2A;Servivor&#x533A;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x5927;&#x4E8E; Servivor&#x603B;&#x5927;&#x5C0F;&#x7684; 60 % &#x65F6;&#xFF0C;</span><br><span class="line">                            // &#x91CD;&#x65B0;&#x4F30;&#x8BA1;TenuringThreshold&#xFF0C;&#x5373;&#x66F4;&#x65B0;&#x5E74;&#x9F84;&#x4E3A;&#x591A;&#x5C11;&#x4F1A;&#x8FDB;&#x5165;&#x8001;&#x5E74;&#x4EE3;</span><br><span class="line">-XX:+PrintTenuringDistribution  // &#x6253;&#x5370;&#x5BF9;&#x8C61;&#x5E74;&#x9F84;</span><br><span class="line">-XX:+PrintGCDetails  //  &#x6253;&#x5370;GC &#x65E5;&#x5FD7;</span><br><span class="line">-XX:+PrintGCDateStamps  //  &#x6253;&#x5370; GC &#x65F6;&#x7684;&#x65F6;&#x95F4;</span><br><span class="line">-XX:+UseConcMarkSweepGC  //   &#x8001;&#x5E74;&#x4EE3;&#x4F7F;&#x7528; CMS &#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;</span><br><span class="line">-XX:+UseParNewGC   // &#x65B0;&#x751F;&#x4EE3;&#x4F7F;&#x7528; ParNew&#x6536;&#x96C6;&#x5668;</span><br><span class="line">-XX:MaxTenuringThreshold=3 // &#x5E74;&#x9F84;&#x9608;&#x503C;&#xFF0C;&#x6700;&#x5927;&#x7684;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>&#x672C;&#x6B21;&#x5E76;&#x6CA1;&#x6709;&#x6307;&#x5B9A;Serivivor&#x5360;&#x591A;&#x5C11;</strong></p>
</blockquote>
<ul>
<li>&#x4EE3;&#x7801;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;public class TenuringTest {</span><br><span class="line">    public static void main(String[] args) throws InterruptedException {</span><br><span class="line">        byte[] bytes = new byte[512 * 1024];</span><br><span class="line">        byte[] bytes1 = new byte[512 * 1024];//main&#x65B9;&#x6CD5;&#x6CA1;&#x6709;&#x7ED3;&#x675F;&#xFF0C;&#x5C31;&#x4E0D;&#x4F1A;&#x88AB;&#x62B9;&#x9664;</span><br><span class="line">        for (int i = 1; i &lt; 7; i++) {</span><br><span class="line">            willGC();</span><br><span class="line">            Thread.sleep(1000);</span><br><span class="line">            System.out.println(&quot;loop: 00&quot; + i);</span><br><span class="line">        }</span><br><span class="line">        byte[] bytes2 = new byte[1024 * 1024];</span><br><span class="line">        byte[] bytes3 = new byte[1024 * 1024];</span><br><span class="line">        byte[] bytes4 = new byte[1024 * 1024];</span><br><span class="line">        byte[] bytes5 = new byte[1024 * 1024];</span><br><span class="line">        willGC();</span><br><span class="line">        System.out.println(&quot;loop: 007&quot;);</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">        willGC();</span><br><span class="line">        System.out.println(&quot;loop: 008&quot;);</span><br><span class="line">        Thread.sleep(1000);</span><br><span class="line">        System.out.println(&quot;end...&quot;);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    private static void willGC() {//&#x8C03;&#x7528;&#x5B8C;&#xFF0C;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x5C31;&#x53EF;&#x4EE5;&#x6D88;&#x9664;&#x4E86;</span><br><span class="line">        for (int i = 0; i &lt; 40; i++) {</span><br><span class="line">            byte[] bytes = new byte[1024 * 1024];// 1 M</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><img src="https://gitee.com/songjianzaina/juejin_p7/raw/master/img/b27b41ef450d1d1220170687a491aedaf0829cd8a95b43d641d21368b775f24f" alt="image.png"></p>
<blockquote>
<p><strong>(max 3) &#x8868;&#x793A;&#x52A8;&#x6001;&#x5224;&#x65AD;&#x786E;&#x5B9A;&#x7684;&#x9608;&#x503C;&#x6700;&#x5927;&#x503C;&#x4E3A;3&#xFF0C;&#x7531;-XX:MaxTenuringThreshold=3&#x51B3;&#x5B9A;&#x3002;</strong>  </p>
<p><strong>Desired survivor size 3145728 bytes &#x600E;&#x4E48;&#x6765;&#x7684;?</strong></p>
<ul>
<li>&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x6307;&#x5B9A;Servivor&#x7684;&#x6BD4;&#x4F8B; &#x6240;&#x4EE5;<strong>&#x9ED8;&#x8BA4;8:1:1</strong>,<strong>-Xmn50M</strong>&#x6307;&#x5B9A;&#x65B0;&#x751F;&#x4EE3;&#x5927;&#x5C0F;&#x4E3A;50M ,&#x6240;&#x4EE5; <strong>40:5:5</strong>&#x3002;</li>
<li>&#x53C8; <strong>-XX:TargetSurvivorRatio=60</strong>,&#x8868;&#x793A;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Serivior&#x533A;&#x8D85;&#x8FC7;&#x7684;60%&#x91CD;&#x65B0;&#x5224;&#x65AD; <strong>&#x9608;&#x503C;(threshold)&#xFF0C;</strong> <strong>&#x5373; 5 * 60% = 3M = 3145728 bytes</strong>&#xFF0C;</li>
<li>&#x4E5F;&#x8BF4;&#x5728;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;Serivior&#x533A;&#x5BF9;&#x8C61;&#x5927;&#x5C0F;&#x5230;3145728 bytes &#x65F6;&#xFF0C;&#x91CD;&#x65B0;&#x5224;&#x65AD;&#x9608;&#x503C;&#x3002;</li>
</ul>
</blockquote>
<h3 id="&#x5C0F;&#x7ED3;"><a href="#&#x5C0F;&#x7ED3;" class="headerlink" title="&#x5C0F;&#x7ED3;"></a>&#x5C0F;&#x7ED3;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;-Xms20M  // &#x5806;&#x7684;&#x6700;&#x5927;&#x503C;</span><br><span class="line">-Xmx20M  // &#x5806;&#x7684;&#x6700;&#x5C0F;&#x503C;</span><br><span class="line">-Xmn10M  // &#x5E74;&#x8F7B;&#x4EE3;&#x5927;&#x5C0F;   &#x5373; Eden &#x548C; &#x4E24;&#x4E2A;Servivor&#x7684;&#x603B;&#x5927;&#x5C0F;&#xFF0C;&#x90A3;&#x4E48;20-10=10M&#x5C31;&#x662F;&#x8001;&#x5E74;&#x4EE3;&#x7684;&#x5927;&#x5C0F;</span><br><span class="line">-XX:+PrintGCDetails // &#x6253;&#x5370;GC &#x65E5;&#x5FD7;</span><br><span class="line">-XX:SurvivorRatio=8  //  &#x8BBE;&#x7F6E;Eden&#x6240;&#x5360;&#x5E74;&#x8F7B;&#x4EE3;&#x7684;&#x6BD4;&#x7387;</span><br><span class="line">-XX:+UseSerialGC  // &#x4F7F;&#x7528;&#x5355;&#x7EBF;&#x7A0B;&#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x5305;&#x62EC;&#x65B0;&#x751F;&#x4EE3;&#x4E0E;&#x8001;&#x5E74;&#x4EE3;</span><br><span class="line">-XX:PretenureSizeThreshold=4194304  //&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x5927;&#x5C0F;&#x9608;&#x503C;&#x4E3A;4M&#xFF0C;&#x8D85;&#x8FC7;&#x5C31;&#x76F4;&#x63A5;&#x5728;&#x8001;&#x5E74;&#x4EE3;&#x521B;&#x5EFA;</span><br><span class="line">-XX:TargetSurvivorRatio=60 // &#x5F53;&#x4E00;&#x4E2A;Servivor&#x533A;&#x4E2D;&#x7684;&#x5BF9;&#x8C61;&#x5927;&#x4E8E; Servivor&#x603B;&#x5927;&#x5C0F;&#x7684; 60 % &#x65F6;&#xFF0C;</span><br><span class="line">                            // &#x91CD;&#x65B0;&#x4F30;&#x8BA1;TenuringThreshold&#xFF0C;&#x5373;&#x66F4;&#x65B0;&#x5E74;&#x9F84;&#x4E3A;&#x591A;&#x5C11;&#x4F1A;&#x8FDB;&#x5165;&#x8001;&#x5E74;&#x4EE3;&#xFF0C;</span><br><span class="line">-XX:+PrintTenuringDistribution  // &#x6253;&#x5370;&#x5404;&#x5E74;&#x9F84;&#x5BF9;&#x8C61;&#x7684;&#x5927;&#x5C0F;</span><br><span class="line">-XX:+PrintGCDetails  //  &#x6253;&#x5370;GC &#x65E5;&#x5FD7;</span><br><span class="line">-XX:+PrintGCDateStamps  //  &#x6253;&#x5370; GC &#x65F6;&#x7684;&#x65F6;&#x95F4;</span><br><span class="line">-XX:+UseConcMarkSweepGC  //   &#x8001;&#x5E74;&#x4EE3;&#x4F7F;&#x7528; CMS &#x5783;&#x573E;&#x6536;&#x96C6;&#x5668;</span><br><span class="line">-XX:+UseParNewGC   // &#x65B0;&#x751F;&#x4EE3;&#x4F7F;&#x7528; ParNew&#x6536;&#x96C6;&#x5668;</span><br><span class="line">-XX:MaxTenuringThreshold=3 // &#x5E74;&#x9F84;&#x9608;&#x503C;&#xFF0C;&#x6700;&#x5927;&#x7684;</span><br></pre></td></tr></table></figure>

<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/12fdf1b396d117641d5c61765ec61c3b.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../243/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../243/">243</a><span class="page-number current">244</span><a class="page-number" href="../245/">245</a><span class="space">&hellip;</span><a class="page-number" href="../399/">399</a><a class="extend next" rel="next" href="../245/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">3990</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1304</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
