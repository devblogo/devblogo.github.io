<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Android,性能优化,">





  <link rel="alternate" href="atom.xml" title="开发者博客 – IT技术 尽在开发者博客" type="application/atom+xml">






<meta name="description" content="&amp;#x524D;&amp;#x8A00;&amp;#x6210;&amp;#x4E3A;&amp;#x4E00;&amp;#x540D;&amp;#x4F18;&amp;#x79C0;&amp;#x7684;Android&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x4E00;&amp;#x4EFD;&amp;#x5B8C;&amp;#x5907;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x4F53;&amp;#x7CFB;&amp;#xFF0C;&amp;">
<meta name="keywords" content="Android,性能优化">
<meta property="og:type" content="article">
<meta property="og:title" content="深入探索Android启动速度优化（上） 前言 思维导图大纲">
<meta property="og:url" content="https://dev.newban.cn/6844904093786308622.html">
<meta property="og:site_name" content="开发者博客 – IT技术 尽在开发者博客">
<meta property="og:description" content="&amp;#x524D;&amp;#x8A00;&amp;#x6210;&amp;#x4E3A;&amp;#x4E00;&amp;#x540D;&amp;#x4F18;&amp;#x79C0;&amp;#x7684;Android&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x4E00;&amp;#x4EFD;&amp;#x5B8C;&amp;#x5907;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x4F53;&amp;#x7CFB;&amp;#xFF0C;&amp;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ba37d61c8ae439fb27cd4723a576816~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99f1b02f4b9c471f9d0bfc7315b5f741~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp">
<meta property="og:updated_time" content="2024-04-22T07:14:04.153Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深入探索Android启动速度优化（上） 前言 思维导图大纲">
<meta name="twitter:description" content="&amp;#x524D;&amp;#x8A00;&amp;#x6210;&amp;#x4E3A;&amp;#x4E00;&amp;#x540D;&amp;#x4F18;&amp;#x79C0;&amp;#x7684;Android&amp;#x5F00;&amp;#x53D1;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x4E00;&amp;#x4EFD;&amp;#x5B8C;&amp;#x5907;&amp;#x7684;&amp;#x77E5;&amp;#x8BC6;&amp;#x4F53;&amp;#x7CFB;&amp;#xFF0C;&amp;">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ba37d61c8ae439fb27cd4723a576816~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->



  <link rel="canonical" href="https://dev.newban.cn/6844904093786308622.html">





  <title>深入探索Android启动速度优化（上） 前言 思维导图大纲 | 开发者博客 – IT技术 尽在开发者博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">开发者博客 – IT技术 尽在开发者博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">开发者博客 – 科技是第一生产力</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://dev.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://dev.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dev.newban.cn">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="开发者博客">
      <meta itemprop="description" content>
      <meta itemprop="image" content="images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="开发者博客 – IT技术 尽在开发者博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">深入探索Android启动速度优化（上） 前言 思维导图大纲</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-03-16T14:14:38+08:00">
                2020-03-16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h1><h3 id="&#x6210;&#x4E3A;&#x4E00;&#x540D;&#x4F18;&#x79C0;&#x7684;Android&#x5F00;&#x53D1;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4EFD;&#x5B8C;&#x5907;&#x7684;&#x77E5;&#x8BC6;&#x4F53;&#x7CFB;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x6210;&#x957F;&#x4E3A;&#x81EA;&#x5DF1;&#x6240;&#x60F3;&#x7684;&#x90A3;&#x6837;-&#x3002;"><a href="#&#x6210;&#x4E3A;&#x4E00;&#x540D;&#x4F18;&#x79C0;&#x7684;Android&#x5F00;&#x53D1;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4EFD;&#x5B8C;&#x5907;&#x7684;&#x77E5;&#x8BC6;&#x4F53;&#x7CFB;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x6210;&#x957F;&#x4E3A;&#x81EA;&#x5DF1;&#x6240;&#x60F3;&#x7684;&#x90A3;&#x6837;-&#x3002;" class="headerlink" title="&#x6210;&#x4E3A;&#x4E00;&#x540D;&#x4F18;&#x79C0;&#x7684;Android&#x5F00;&#x53D1;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4EFD;&#x5B8C;&#x5907;&#x7684;&#x77E5;&#x8BC6;&#x4F53;&#x7CFB;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x6210;&#x957F;&#x4E3A;&#x81EA;&#x5DF1;&#x6240;&#x60F3;&#x7684;&#x90A3;&#x6837;~&#x3002;"></a>&#x6210;&#x4E3A;&#x4E00;&#x540D;&#x4F18;&#x79C0;&#x7684;Android&#x5F00;&#x53D1;&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4EFD;&#x5B8C;&#x5907;&#x7684;<a href="/external_links/effed80c8a8ac4028a9f2da710c9656e.html" target="blank" rel="noopener">&#x77E5;&#x8BC6;&#x4F53;&#x7CFB;</a>&#xFF0C;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x8BA9;&#x6211;&#x4EEC;&#x4E00;&#x8D77;&#x6210;&#x957F;&#x4E3A;&#x81EA;&#x5DF1;&#x6240;&#x60F3;&#x7684;&#x90A3;&#x6837;~&#x3002;</h3><p>&#x5728;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x7684;&#x6574;&#x4E2A;&#x77E5;&#x8BC6;&#x4F53;&#x7CFB;&#x4E2D;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5C31;&#x662F;&#x7A33;&#x5B9A;&#x6027;&#x4F18;&#x5316;&#xFF0C;&#x5728;&#x4E0A;&#x4E00;&#x7BC7;&#x6587;&#x7AE0;</p>
<p><a href="/external_links/8d7024ac31dfa936fb4ba9975c5327f4.html" target="blank" rel="noopener">&#x300A;&#x6DF1;&#x5165;&#x63A2;&#x7D22;Android&#x7A33;&#x5B9A;&#x6027;&#x4F18;&#x5316;&#x300B;</a></p>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6DF1;&#x5165;&#x63A2;&#x7D22;&#x4E86;Android&#x7A33;&#x5B9A;&#x6027;&#x4F18;&#x5316;&#x7684;&#x7586;&#x57DF;&#x3002;&#x90A3;&#x4E48;&#xFF0C;<strong>&#x9664;&#x4E86;&#x7A33;&#x5B9A;&#x6027;&#x4EE5;&#x5916;&#xFF0C;&#x5BF9;&#x4E8E;&#x6027;&#x80FD;&#x7EAC;&#x5EA6;&#x6765;&#x8BF4;&#xFF0C;&#x54EA;&#x4E2A;&#x65B9;&#x9762;&#x7684;&#x6027;&#x80FD;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5462;</strong>&#xFF1F;&#x6BEB;&#x65E0;&#x7591;&#x95EE;&#xFF0C;&#x5C31;&#x662F; <strong>&#x5E94;&#x7528;&#x7684;&#x542F;&#x52A8;&#x901F;&#x5EA6;</strong>&#x3002;&#x4E0B;&#x9762;&#xFF0C;<strong>&#x5C31;&#x8BA9;&#x6211;&#x4EEC;&#x626C;&#x8D77;&#x822A;&#x5E06;&#xFF0C;&#x4E00;&#x8D77;&#x6765;&#x9010;&#x6B65;&#x6DF1;&#x5165;&#x63A2;&#x7D22;Android&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x4F18;&#x5316;&#x7684;&#x5965;&#x79D8;</strong>&#x3002;</p>
<h1 id="&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x5927;&#x7EB2;"><a href="#&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x5927;&#x7EB2;" class="headerlink" title="&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x5927;&#x7EB2;"></a>&#x601D;&#x7EF4;&#x5BFC;&#x56FE;&#x5927;&#x7EB2;</h1><p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ba37d61c8ae439fb27cd4723a576816~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt></p>
<h1 id="&#x76EE;&#x5F55;"><a href="#&#x76EE;&#x5F55;" class="headerlink" title="&#x76EE;&#x5F55;"></a>&#x76EE;&#x5F55;</h1><ul>
<li>&#x4E00;&#x3001;<a href="/external_links/ca88af2a567da9fd7c2e9100bf568200.html" target="blank" rel="noopener">&#x542F;&#x52A8;&#x4F18;&#x5316;&#x7684;&#x610F;&#x4E49;</a></li>
<li>&#x4E8C;&#x3001;<a href="/external_links/ca88af2a567da9fd7c2e9100bf568200.html" target="blank" rel="noopener">&#x5E94;&#x7528;&#x542F;&#x52A8;&#x6D41;&#x7A0B;</a><ul>
<li>1 &#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;</li>
<li>2&#x3001;&#x51B7;&#x542F;&#x52A8;&#x5206;&#x6790;&#x53CA;&#x5176;&#x4F18;&#x5316;&#x65B9;&#x5411;</li>
</ul>
</li>
<li>&#x4E09;&#x3001;<a href="/external_links/ca88af2a567da9fd7c2e9100bf568200.html" target="blank" rel="noopener">&#x542F;&#x52A8;&#x8017;&#x65F6;&#x68C0;&#x6D4B;</a><ul>
<li>1&#x3001;&#x67E5;&#x770B;Logcat</li>
<li>2&#x3001;adb shell</li>
<li>3&#x3001;&#x4EE3;&#x7801;&#x6253;&#x70B9;&#xFF08;&#x51FD;&#x6570;&#x63D2;&#x6869;&#xFF09;</li>
<li>4&#x3001;AOP(Aspect Oriented Programming) &#x6253;&#x70B9;</li>
<li>5&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177; &#x2014; TraceView</li>
<li>6&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177; &#x2014; Systrace</li>
<li>7&#x3001;&#x542F;&#x52A8;&#x76D1;&#x63A7;</li>
</ul>
</li>
<li>&#x56DB;&#x3001;<a href="/external_links/ca88af2a567da9fd7c2e9100bf568200.html" target="blank" rel="noopener">&#x542F;&#x52A8;&#x4F18;&#x5316;&#x5E38;&#x89C4;&#x65B9;&#x6848;</a><ul>
<li>1&#x3001;&#x4E3B;&#x9898;&#x5207;&#x6362;</li>
<li>2&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x61D2;&#x52A0;&#x8F7D;</li>
<li>3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x9884;&#x5907;&#x77E5;&#x8BC6;-&#x7EBF;&#x7A0B;&#x4F18;&#x5316;</li>
<li>4&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;</li>
<li>5&#x3001;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;</li>
<li>6&#x3001;Multidex&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;</li>
<li>7&#x3001;&#x7C7B;&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;</li>
<li>8&#x3001;WebView&#x542F;&#x52A8;&#x4F18;&#x5316;</li>
<li>9&#x3001;&#x9875;&#x9762;&#x6570;&#x636E;&#x9884;&#x52A0;&#x8F7D;</li>
<li>10&#x3001;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x4E0D;&#x542F;&#x52A8;&#x5B50;&#x8FDB;&#x7A0B;</li>
<li>11&#x3001;&#x95EA;&#x5C4F;&#x9875;&#x4E0E;&#x4E3B;&#x9875;&#x7684;&#x7ED8;&#x5236;&#x4F18;&#x5316;</li>
</ul>
</li>
</ul>
<h1 id="&#x4E00;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x7684;&#x610F;&#x4E49;"><a href="#&#x4E00;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x7684;&#x610F;&#x4E49;" class="headerlink" title="&#x4E00;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x7684;&#x610F;&#x4E49;"></a>&#x4E00;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x7684;&#x610F;&#x4E49;</h1><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x53BB;&#x4E00;&#x5BB6;&#x9910;&#x5385;&#x5403;&#x996D;&#xFF0C;&#x5728;&#x70B9;&#x9910;&#x7684;&#x65F6;&#x5019;&#x7B49;&#x4E86;&#x534A;&#x5929;&#x90FD;&#x6CA1;&#x6709;&#x670D;&#x52A1;&#x4EBA;&#x5458;&#x8FC7;&#x6765;&#xFF0C;&#x53EF;&#x80FD;&#x5C31;&#x6CA1;&#x6709;&#x8010;&#x5FC3;&#x7B49;&#x5F85;&#x76F4;&#x63A5;&#x8D70;&#x4E86;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;App&#x6765;&#x8BF4;&#xFF0C;&#x4E5F;&#x662F;&#x540C;&#x6837;&#x5982;&#x6B64;&#xFF0C;<strong>&#x5982;&#x679C;&#x7528;&#x6237;&#x70B9;&#x51FB;App&#x540E;&#xFF0C;App&#x534A;&#x5929;&#x90FD;&#x6253;&#x4E0D;&#x5F00;&#xFF0C;&#x7528;&#x6237;&#x5C31;&#x53EF;&#x80FD;&#x5931;&#x53BB;&#x8010;&#x5FC3;&#x5378;&#x8F7D;&#x5E94;&#x7528;</strong>&#x3002;</p>
<p><strong>&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x662F;&#x7528;&#x6237;&#x5BF9;&#x6211;&#x4EEC;App&#x7684;&#x7B2C;&#x4E00;&#x4F53;&#x9A8C;</strong>&#xFF0C;&#x6253;&#x5F00;&#x5E94;&#x7528;&#x540E;&#x624D;&#x80FD;&#x53BB;&#x4F7F;&#x7528;&#x5176;&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x5F3A;&#x5927;&#x529F;&#x80FD;&#xFF0C;&#x5C31;&#x7B97;&#x6211;&#x4EEC;&#x5E94;&#x7528;&#x7684;&#x5185;&#x90E8;&#x754C;&#x9762;&#x8BBE;&#x8BA1;&#x7684;&#x518D;&#x7CBE;&#x7F8E;&#xFF0C;&#x529F;&#x80FD;&#x518D;&#x5F3A;&#x5927;&#xFF0C;<strong>&#x5982;&#x679C;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x8FC7;&#x6162;&#xFF0C;&#x7528;&#x6237;&#x7B2C;&#x4E00;&#x5370;&#x8C61;&#x5C31;&#x4F1A;&#x5F88;&#x5DEE;</strong>&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;&#x62EF;&#x6551;App&#x7684;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#xFF0C;&#x8FEB;&#x5728;&#x7709;&#x776B;&#x3002;</p>
<h1 id="&#x4E8C;&#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x6D41;&#x7A0B;"><a href="#&#x4E8C;&#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x6D41;&#x7A0B;" class="headerlink" title="&#x4E8C;&#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x6D41;&#x7A0B;"></a>&#x4E8C;&#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x6D41;&#x7A0B;</h1><h2 id="1-&#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;"><a href="#1-&#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;" class="headerlink" title="1 &#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;"></a>1 &#x3001;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;</h2><p>&#x5E94;&#x7528;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;&#x603B;&#x5171;&#x5206;&#x4E3A;&#x5982;&#x4E0B;&#x4E09;&#x79CD;&#xFF1A;</p>
<ul>
<li><strong>&#x51B7;&#x542F;&#x52A8;</strong></li>
<li><strong>&#x70ED;&#x542F;&#x52A8;</strong></li>
<li><strong>&#x6E29;&#x542F;&#x52A8;</strong></li>
</ul>
<p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BE6;&#x7EC6;&#x5206;&#x6790;&#x4E0B;&#x5404;&#x4E2A;&#x542F;&#x52A8;&#x7C7B;&#x578B;&#x7684;&#x7279;&#x70B9;&#x53CA;&#x6D41;&#x7A0B;&#x3002;</p>
<h3 id="&#x51B7;&#x542F;&#x52A8;"><a href="#&#x51B7;&#x542F;&#x52A8;" class="headerlink" title="&#x51B7;&#x542F;&#x52A8;"></a>&#x51B7;&#x542F;&#x52A8;</h3><p>&#x4ECE;&#x70B9;&#x51FB;&#x5E94;&#x7528;&#x56FE;&#x6807;&#x5230;UI&#x754C;&#x9762;&#x5B8C;&#x5168;&#x663E;&#x793A;&#x4E14;&#x7528;&#x6237;&#x53EF;&#x64CD;&#x4F5C;&#x7684;&#x5168;&#x90E8;&#x8FC7;&#x7A0B;&#x3002;</p>
<h4 id="&#x7279;&#x70B9;"><a href="#&#x7279;&#x70B9;" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h4><p>&#x8017;&#x65F6;&#x6700;&#x591A;&#xFF0C;<strong>&#x8861;&#x91CF;&#x6807;&#x51C6;</strong>&#x3002;</p>
<h4 id="&#x542F;&#x52A8;&#x6D41;&#x7A0B;"><a href="#&#x542F;&#x52A8;&#x6D41;&#x7A0B;" class="headerlink" title="&#x542F;&#x52A8;&#x6D41;&#x7A0B;"></a>&#x542F;&#x52A8;&#x6D41;&#x7A0B;</h4><p>Click Event -&gt; IPC -&gt; Process.start -&gt; ActivityThread -&gt; bindApplication -&gt; LifeCycle -&gt; ViewRootImpl</p>
<p>&#x9996;&#x5148;&#xFF0C;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x4E86;&#x4E00;&#x4E2A;&#x70B9;&#x51FB;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x4E2A;&#x70B9;&#x51FB;&#x4E8B;&#x4EF6;&#x5B83;&#x4F1A;&#x89E6;&#x53D1;&#x4E00;&#x4E2A;IPC&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4E4B;&#x540E;&#x4FBF;&#x4F1A;&#x6267;&#x884C;&#x5230;Process&#x7684;start&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x662F;&#x7528;&#x4E8E;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x63A5;&#x7740;&#xFF0C;&#x4FBF;&#x4F1A;&#x6267;&#x884C;&#x5230;ActivityThread&#x7684;main&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x770B;&#x505A;&#x662F;&#x6211;&#x4EEC;&#x5355;&#x4E2A;App&#x8FDB;&#x7A0B;&#x7684;&#x5165;&#x53E3;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;Java&#x8FDB;&#x7A0B;&#x7684;main&#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x5176;&#x4E2D;&#x4F1A;<strong>&#x6267;&#x884C;&#x6D88;&#x606F;&#x5FAA;&#x73AF;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x4E3B;&#x7EBF;&#x7A0B;Handler&#x7684;&#x521B;&#x5EFA;</strong>&#xFF0C;&#x521B;&#x5EFA;&#x5B8C;&#x6210;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x5230; bindApplication &#x65B9;&#x6CD5;&#xFF0C;&#x5728;&#x8FD9;&#x91CC;<strong>&#x4F7F;&#x7528;&#x4E86;&#x53CD;&#x5C04;&#x53BB;&#x521B;&#x5EFA; Application</strong>&#x4EE5;&#x53CA;&#x8C03;&#x7528;&#x4E86; Application&#x76F8;&#x5173;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;Application&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#xFF0C;&#x4FBF;&#x4F1A;&#x6267;&#x884C;Activity&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x5728;Activity&#x751F;&#x547D;&#x5468;&#x671F;&#x7ED3;&#x675F;&#x4E4B;&#x540E;&#xFF0C;<strong>&#x6700;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x6267;&#x884C;&#x5230; ViewRootImpl&#xFF0C;&#x8FD9;&#x65F6;&#x624D;&#x4F1A;&#x8FDB;&#x884C;&#x771F;&#x6B63;&#x7684;&#x4E00;&#x4E2A;&#x9875;&#x9762;&#x7684;&#x7ED8;&#x5236;</strong>&#x3002;</p>
<h3 id="&#x70ED;&#x542F;&#x52A8;"><a href="#&#x70ED;&#x542F;&#x52A8;" class="headerlink" title="&#x70ED;&#x542F;&#x52A8;"></a>&#x70ED;&#x542F;&#x52A8;</h3><p>&#x76F4;&#x63A5;&#x4ECE;&#x540E;&#x53F0;&#x5207;&#x6362;&#x5230;&#x524D;&#x53F0;&#x3002;</p>
<h4 id="&#x7279;&#x70B9;-1"><a href="#&#x7279;&#x70B9;-1" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h4><p>&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x6700;&#x5FEB;&#x3002;</p>
<h3 id="&#x6E29;&#x542F;&#x52A8;"><a href="#&#x6E29;&#x542F;&#x52A8;" class="headerlink" title="&#x6E29;&#x542F;&#x52A8;"></a>&#x6E29;&#x542F;&#x52A8;</h3><p>&#x53EA;&#x4F1A;&#x91CD;&#x8D70;Activity&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x91CD;&#x8D70;&#x8FDB;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#xFF0C;Application&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x751F;&#x547D;&#x5468;&#x671F;&#x7B49;&#x3002;</p>
<h4 id="&#x7279;&#x70B9;-2"><a href="#&#x7279;&#x70B9;-2" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h4><p>&#x8F83;&#x5FEB;&#xFF0C;&#x4ECB;&#x4E8E;&#x51B7;&#x542F;&#x52A8;&#x548C;&#x70ED;&#x542F;&#x52A8;&#x4E4B;&#x95F4;&#x7684;&#x4E00;&#x4E2A;&#x901F;&#x5EA6;&#x3002;</p>
<h4 id="&#x542F;&#x52A8;&#x6D41;&#x7A0B;-1"><a href="#&#x542F;&#x52A8;&#x6D41;&#x7A0B;-1" class="headerlink" title="&#x542F;&#x52A8;&#x6D41;&#x7A0B;"></a>&#x542F;&#x52A8;&#x6D41;&#x7A0B;</h4><p>LifeCycle -&gt; ViewRootImpl</p>
<h4 id="ViewRootImpl&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#ViewRootImpl&#x662F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="ViewRootImpl&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"></a>ViewRootImpl&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h4><p>&#x5B83;&#x662F;GUI&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#x4E0E;GUI&#x5448;&#x73B0;&#x7CFB;&#x7EDF;&#x4E4B;&#x95F4;&#x7684;&#x6865;&#x6881;&#x3002;<strong>&#x6BCF;&#x4E00;&#x4E2A;ViewRootImpl&#x5173;&#x8054;&#x4E00;&#x4E2A;Window&#xFF0C;<br>ViewRootImpl &#x6700;&#x7EC8;&#x4F1A;&#x901A;&#x8FC7;&#x5B83;&#x7684;setView&#x65B9;&#x6CD5;&#x7ED1;&#x5B9A;Window&#x6240;&#x5BF9;&#x5E94;&#x7684;View&#xFF0C;&#x5E76;&#x901A;&#x8FC7;&#x5176;performTraversals&#x65B9;&#x6CD5;&#x5BF9;View&#x8FDB;&#x884C;&#x5E03;&#x5C40;&#x3001;&#x6D4B;&#x91CF;&#x548C;&#x7ED8;&#x5236;</strong>&#x3002;</p>
<h2 id="2&#x3001;&#x51B7;&#x542F;&#x52A8;&#x5206;&#x6790;&#x53CA;&#x5176;&#x4F18;&#x5316;&#x65B9;&#x5411;"><a href="#2&#x3001;&#x51B7;&#x542F;&#x52A8;&#x5206;&#x6790;&#x53CA;&#x5176;&#x4F18;&#x5316;&#x65B9;&#x5411;" class="headerlink" title="2&#x3001;&#x51B7;&#x542F;&#x52A8;&#x5206;&#x6790;&#x53CA;&#x5176;&#x4F18;&#x5316;&#x65B9;&#x5411;"></a>2&#x3001;&#x51B7;&#x542F;&#x52A8;&#x5206;&#x6790;&#x53CA;&#x5176;&#x4F18;&#x5316;&#x65B9;&#x5411;</h2><h3 id="&#x51B7;&#x542F;&#x52A8;&#x6D89;&#x53CA;&#x7684;&#x76F8;&#x5173;&#x4EFB;&#x52A1;"><a href="#&#x51B7;&#x542F;&#x52A8;&#x6D89;&#x53CA;&#x7684;&#x76F8;&#x5173;&#x4EFB;&#x52A1;" class="headerlink" title="&#x51B7;&#x542F;&#x52A8;&#x6D89;&#x53CA;&#x7684;&#x76F8;&#x5173;&#x4EFB;&#x52A1;"></a>&#x51B7;&#x542F;&#x52A8;&#x6D89;&#x53CA;&#x7684;&#x76F8;&#x5173;&#x4EFB;&#x52A1;</h3><h4 id="&#x51B7;&#x542F;&#x52A8;&#x4E4B;&#x524D;"><a href="#&#x51B7;&#x542F;&#x52A8;&#x4E4B;&#x524D;" class="headerlink" title="&#x51B7;&#x542F;&#x52A8;&#x4E4B;&#x524D;"></a>&#x51B7;&#x542F;&#x52A8;&#x4E4B;&#x524D;</h4><ul>
<li>&#x9996;&#x5148;&#xFF0C;&#x4F1A;&#x542F;&#x52A8;App</li>
<li>&#x7136;&#x540E;&#xFF0C;&#x52A0;&#x8F7D;&#x7A7A;&#x767D;Window</li>
<li>&#x6700;&#x540E;&#xFF0C;&#x521B;&#x5EFA;&#x8FDB;&#x7A0B;</li>
</ul>
<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x7CFB;&#x7EDF;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#x6211;&#x4EEC;&#x662F;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x5E72;&#x9884;&#x7684;&#x3002;</p>
<h4 id="&#x968F;&#x540E;&#x4EFB;&#x52A1;"><a href="#&#x968F;&#x540E;&#x4EFB;&#x52A1;" class="headerlink" title="&#x968F;&#x540E;&#x4EFB;&#x52A1;"></a>&#x968F;&#x540E;&#x4EFB;&#x52A1;</h4><ul>
<li>&#x9996;&#x5148;&#xFF0C;&#x521B;&#x5EFA;Application</li>
<li>&#x542F;&#x52A8;&#x4E3B;&#x7EBF;&#x7A0B;</li>
<li>&#x521B;&#x5EFA;MainActivity</li>
<li>&#x52A0;&#x8F7D;&#x5E03;&#x5C40;</li>
<li>&#x5E03;&#x7F6E;&#x5C4F;&#x5E55;</li>
<li>&#x9996;&#x5E27;&#x7ED8;&#x5236;</li>
</ul>
<p>&#x901A;&#x5E38;&#x5230;&#x4E86;<strong>&#x754C;&#x9762;&#x9996;&#x5E27;&#x7ED8;&#x5236;&#x5B8C;&#x6210;</strong>&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;<strong>&#x542F;&#x52A8;&#x5DF2;&#x7ECF;&#x7ED3;&#x675F;</strong>&#x4E86;&#x3002;</p>
<h3 id="&#x4F18;&#x5316;&#x65B9;&#x5411;"><a href="#&#x4F18;&#x5316;&#x65B9;&#x5411;" class="headerlink" title="&#x4F18;&#x5316;&#x65B9;&#x5411;"></a>&#x4F18;&#x5316;&#x65B9;&#x5411;</h3><p>&#x6211;&#x4EEC;&#x7684;&#x4F18;&#x5316;&#x65B9;&#x5411;&#x5C31;&#x662F; <strong>Application&#x548C;Activity&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;</strong> &#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;&#x9636;&#x6BB5;&#x7684;&#x65F6;&#x673A;&#x5BF9;&#x4E8E;&#x6211;&#x4EEC;&#x6765;&#x8BF4;&#x662F;<strong>&#x53EF;&#x63A7;&#x7684;</strong>&#x3002;</p>
<h1 id="&#x4E09;&#x3001;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x68C0;&#x6D4B;"><a href="#&#x4E09;&#x3001;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x68C0;&#x6D4B;" class="headerlink" title="&#x4E09;&#x3001;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x68C0;&#x6D4B;"></a>&#x4E09;&#x3001;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x68C0;&#x6D4B;</h1><h2 id="1&#x3001;&#x67E5;&#x770B;Logcat"><a href="#1&#x3001;&#x67E5;&#x770B;Logcat" class="headerlink" title="1&#x3001;&#x67E5;&#x770B;Logcat"></a>1&#x3001;&#x67E5;&#x770B;Logcat</h2><p>&#x5728;Android Studio Logcat&#x4E2D;<strong>&#x8FC7;&#x6EE4;&#x5173;&#x952E;&#x5B57;&#x201C;Displayed&#x201D;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5BF9;&#x5E94;&#x7684;&#x51B7;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x65E5;&#x5FD7;&#x3002;</p>
<h2 id="2&#x3001;adb-shell"><a href="#2&#x3001;adb-shell" class="headerlink" title="2&#x3001;adb shell"></a>2&#x3001;adb shell</h2><p>&#x4F7F;&#x7528;adb shell&#x83B7;&#x53D6;&#x5E94;&#x7528;&#x7684;&#x542F;&#x52A8;&#x65F6;&#x95F4;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">less&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5176;&#x4E2D;&#x7684;AppstartActivity&#x5168;&#x8DEF;&#x5F84;&#x53EF;&#x4EE5;&#x7701;&#x7565;&#x524D;&#x9762;&#x7684;packageName</span><br><span class="line">adb shell am start -W [packageName]/[AppstartActivity&#x5168;&#x8DEF;&#x5F84;]</span><br></pre></td></tr></table></figure>

<p>&#x6267;&#x884C;&#x540E;&#x4F1A;&#x5F97;&#x5230;&#x4E09;&#x4E2A;&#x65F6;&#x95F4;&#xFF1A;ThisTime&#x3001;TotalTime&#x548C;WaitTime&#xFF0C;&#x8BE6;&#x60C5;&#x5982;&#x4E0B;&#xFF1A;</p>
<h3 id="ThisTime"><a href="#ThisTime" class="headerlink" title="ThisTime"></a>ThisTime</h3><p>&#x8868;&#x793A;&#x6700;&#x540E;&#x4E00;&#x4E2A;Activity&#x542F;&#x52A8;&#x8017;&#x65F6;&#x3002;</p>
<h3 id="TotalTime"><a href="#TotalTime" class="headerlink" title="TotalTime"></a>TotalTime</h3><p>&#x8868;&#x793A;&#x6240;&#x6709;Activity&#x542F;&#x52A8;&#x8017;&#x65F6;&#x3002;</p>
<h3 id="WaitTime"><a href="#WaitTime" class="headerlink" title="WaitTime"></a>WaitTime</h3><p>&#x8868;&#x793A;AMS&#x542F;&#x52A8;Activity&#x7684;&#x603B;&#x8017;&#x65F6;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x53EA;&#x9700;&#x67E5;&#x770B;&#x5F97;&#x5230;&#x7684;TotalTime&#xFF0C;&#x5373;&#x5E94;&#x7528;&#x7684;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#xFF0C;&#x5176;&#x5305;&#x62EC; <strong>&#x521B;&#x5EFA;&#x8FDB;&#x7A0B; + Application&#x521D;&#x59CB;&#x5316; + Activity&#x521D;&#x59CB;&#x5316;&#x5230;&#x754C;&#x9762;&#x663E;&#x793A;</strong> &#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<h3 id="&#x7279;&#x70B9;&#xFF1A;"><a href="#&#x7279;&#x70B9;&#xFF1A;" class="headerlink" title="&#x7279;&#x70B9;&#xFF1A;"></a>&#x7279;&#x70B9;&#xFF1A;</h3><ul>
<li>1&#x3001;<strong>&#x7EBF;&#x4E0B;&#x4F7F;&#x7528;&#x65B9;&#x4FBF;&#xFF0C;&#x4E0D;&#x80FD;&#x5E26;&#x5230;&#x7EBF;&#x4E0A;</strong>&#x3002;</li>
<li>2&#x3001;<strong>&#x975E;&#x4E25;&#x8C28;&#x3001;&#x7CBE;&#x786E;&#x65F6;&#x95F4;</strong>&#x3002;</li>
</ul>
<h2 id="3&#x3001;&#x4EE3;&#x7801;&#x6253;&#x70B9;&#xFF08;&#x51FD;&#x6570;&#x63D2;&#x6869;&#xFF09;"><a href="#3&#x3001;&#x4EE3;&#x7801;&#x6253;&#x70B9;&#xFF08;&#x51FD;&#x6570;&#x63D2;&#x6869;&#xFF09;" class="headerlink" title="3&#x3001;&#x4EE3;&#x7801;&#x6253;&#x70B9;&#xFF08;&#x51FD;&#x6570;&#x63D2;&#x6869;&#xFF09;"></a>3&#x3001;&#x4EE3;&#x7801;&#x6253;&#x70B9;&#xFF08;&#x51FD;&#x6570;&#x63D2;&#x6869;&#xFF09;</h2><p>&#x53EF;&#x4EE5;&#x5199;&#x4E00;&#x4E2A;&#x7EDF;&#x8BA1;&#x8017;&#x65F6;&#x7684;&#x5DE5;&#x5177;&#x7C7B;&#x6765;&#x8BB0;&#x5F55;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x7684;&#x8017;&#x65F6;&#x60C5;&#x51B5;&#x3002;&#x5176;&#x4E2D;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x6709;&#xFF1A;</p>
<ul>
<li>&#x5728;&#x4E0A;&#x4F20;&#x6570;&#x636E;&#x5230;&#x670D;&#x52A1;&#x5668;&#x65F6;<strong>&#x5EFA;&#x8BAE;&#x6839;&#x636E;&#x7528;&#x6237;ID&#x7684;&#x5C3E;&#x53F7;&#x6765;&#x62BD;&#x6837;&#x4E0A;&#x62A5;</strong>&#x3002;</li>
<li>&#x5728;&#x9879;&#x76EE;&#x4E2D;<strong>&#x6838;&#x5FC3;&#x57FA;&#x7C7B;&#x7684;&#x5173;&#x952E;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x548C;&#x6838;&#x5FC3;&#x65B9;&#x6CD5;</strong>&#x4E2D;&#x52A0;&#x5165;&#x6253;&#x70B9;&#x3002;</li>
</ul>
<p>&#x5176;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">* &#x8017;&#x65F6;&#x76D1;&#x89C6;&#x5668;&#x5BF9;&#x8C61;&#xFF0C;&#x8BB0;&#x5F55;&#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x7684;&#x8017;&#x65F6;&#x60C5;&#x51B5;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x5728;&#x5F88;&#x591A;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6BD4;&#x5982;Activity&#x7684;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x548C;Fragment&#x7684;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x3002;</span><br><span class="line">*/</span><br><span class="line">public class TimeMonitor {</span><br><span class="line"></span><br><span class="line">    private final String TAG = TimeMonitor.class.getSimpleName();</span><br><span class="line">    private int mMonitord = -1;</span><br><span class="line">    </span><br><span class="line">    // &#x4FDD;&#x5B58;&#x4E00;&#x4E2A;&#x8017;&#x65F6;&#x7EDF;&#x8BA1;&#x6A21;&#x5757;&#x7684;&#x5404;&#x79CD;&#x8017;&#x65F6;&#xFF0C;tag&#x5BF9;&#x5E94;&#x67D0;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#x7684;&#x65F6;&#x95F4;</span><br><span class="line">    private HashMap&lt;String, Long&gt; mTimeTag = new HashMap&lt;&gt;();</span><br><span class="line">    private long mStartTime = 0;</span><br><span class="line"></span><br><span class="line">    public TimeMonitor(int mMonitorId) {</span><br><span class="line">        Log.d(TAG, &quot;init TimeMonitor id: &quot; + mMonitorId);</span><br><span class="line">        this.mMonitorId = mMonitorId;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public int getMonitorId() {</span><br><span class="line">        return mMonitorId;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void startMonitor() {</span><br><span class="line">        // &#x6BCF;&#x6B21;&#x91CD;&#x65B0;&#x542F;&#x52A8;&#x90FD;&#x628A;&#x524D;&#x9762;&#x7684;&#x6570;&#x636E;&#x6E05;&#x9664;&#xFF0C;&#x907F;&#x514D;&#x7EDF;&#x8BA1;&#x9519;&#x8BEF;&#x7684;&#x6570;&#x636E;</span><br><span class="line">        if (mTimeTag.size() &gt; 0) {</span><br><span class="line">        mTimeTag.clear();</span><br><span class="line">        }</span><br><span class="line">        mStartTime = System.currentTimeMillis();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * &#x6BCF;&#x6253;&#x4E00;&#x6B21;&#x70B9;&#xFF0C;&#x8BB0;&#x5F55;&#x67D0;&#x4E2A;tag&#x7684;&#x8017;&#x65F6;</span><br><span class="line">    */</span><br><span class="line">    public void recordingTimeTag(String tag) {</span><br><span class="line">        // &#x82E5;&#x4FDD;&#x5B58;&#x8FC7;&#x76F8;&#x540C;&#x7684;tag&#xFF0C;&#x5148;&#x6E05;&#x9664;</span><br><span class="line">        if (mTimeTag.get(tag) != null) {</span><br><span class="line">            mTimeTag.remove(tag);</span><br><span class="line">        }</span><br><span class="line">        long time = System.currentTimeMillis() - mStartTime;</span><br><span class="line">        Log.d(TAG, tag + &quot;: &quot; + time);</span><br><span class="line">        mTimeTag.put(tag, time);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void end(String tag, boolean writeLog) {</span><br><span class="line">        recordingTimeTag(tag);</span><br><span class="line">        end(writeLog);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void end(boolean writeLog) {</span><br><span class="line">        if (writeLog) {</span><br><span class="line">            //&#x5199;&#x5165;&#x5230;&#x672C;&#x5730;&#x6587;&#x4EF6;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public HashMap&lt;String, Long&gt; getTimeTags() {</span><br><span class="line">        return mTimeTag;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E3A;&#x4E86;<strong>&#x4F7F;&#x4EE3;&#x7801;&#x66F4;&#x597D;&#x7BA1;&#x7406;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;<strong>&#x6253;&#x70B9;&#x914D;&#x7F6E;&#x7C7B;</strong>&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">* &#x6253;&#x70B9;&#x914D;&#x7F6E;&#x7C7B;&#xFF0C;&#x7528;&#x4E8E;&#x7EDF;&#x8BA1;&#x5404;&#x9636;&#x6BB5;&#x7684;&#x8017;&#x65F6;&#xFF0C;&#x4FBF;&#x4E8E;&#x4EE3;&#x7801;&#x7684;&#x7EF4;&#x62A4;&#x548C;&#x7BA1;&#x7406;&#x3002;</span><br><span class="line">*/</span><br><span class="line">public final class TimeMonitorConfig {</span><br><span class="line"></span><br><span class="line">    // &#x5E94;&#x7528;&#x542F;&#x52A8;&#x8017;&#x65F6;</span><br><span class="line">    public static final int TIME_MONITOR_ID_APPLICATION_START = 1;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x6B64;&#x5916;&#xFF0C;&#x8017;&#x65F6;&#x7EDF;&#x8BA1;&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x591A;&#x4E2A;&#x6A21;&#x5757;&#x548C;&#x7C7B;&#x4E2D;&#x9700;&#x8981;&#x6253;&#x70B9;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x4E00;&#x4E2A;<strong>&#x5355;&#x4F8B;&#x7C7B;&#x6765;&#x7BA1;&#x7406;&#x5404;&#x4E2A;&#x8017;&#x65F6;&#x7EDF;&#x8BA1;&#x7684;&#x6570;&#x636E;</strong>&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">* &#x91C7;&#x7528;&#x5355;&#x4F8B;&#x7BA1;&#x7406;&#x5404;&#x4E2A;&#x8017;&#x65F6;&#x7EDF;&#x8BA1;&#x7684;&#x6570;&#x636E;&#x3002;</span><br><span class="line">*/</span><br><span class="line">public class TimeMonitorManager {</span><br><span class="line"></span><br><span class="line">    private static TimeMonitorManager mTimeMonitorManager = null;</span><br><span class="line">private HashMap&lt;Integer, TimeMonitor&gt; mTimeMonitorMap = null;</span><br><span class="line"></span><br><span class="line">    public synchronized static TimeMonitorManager getInstance() {</span><br><span class="line">        if (mTimeMonitorManager == null) {</span><br><span class="line">            mTimeMonitorManager = new TimeMonitorManager();</span><br><span class="line">        }</span><br><span class="line">        return mTimeMonitorManager;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public TimeMonitorManager() {</span><br><span class="line">        this.mTimeMonitorMap = new HashMap&lt;Integer, TimeMonitor&gt;();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x521D;&#x59CB;&#x5316;&#x6253;&#x70B9;&#x6A21;&#x5757;</span><br><span class="line">    */</span><br><span class="line">    public void resetTimeMonitor(int id) {</span><br><span class="line">        if (mTimeMonitorMap.get(id) != null) {</span><br><span class="line">            mTimeMonitorMap.remove(id);</span><br><span class="line">        }</span><br><span class="line">        getTimeMonitor(id).startMonitor();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * &#x83B7;&#x53D6;&#x6253;&#x70B9;&#x5668;</span><br><span class="line">    */</span><br><span class="line">    public TimeMonitor getTimeMonitor(int id) {</span><br><span class="line">        TimeMonitor monitor = mTimeMonitorMap.get(id);</span><br><span class="line">        if (monitor == null) {</span><br><span class="line">            monitor = new TimeMonitor(id);</span><br><span class="line">            mTimeMonitorMap.put(id, monitor);</span><br><span class="line">        }</span><br><span class="line">        return monitor;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x4E3B;&#x8981;&#x5728;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x65B9;&#x9762;&#x9700;&#x8981;&#x6253;&#x70B9;&#xFF1A;</p>
<ul>
<li><strong>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x8282;&#x70B9;</strong>&#x3002;</li>
<li><strong>&#x542F;&#x52A8;&#x65F6;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x7684;&#x91CD;&#x8981;&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x636E;&#x5E93;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8BFB;&#x53D6;&#x672C;&#x5730;&#x7684;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x3002;</li>
<li><strong>&#x5176;&#x4ED6;&#x8017;&#x65F6;&#x7684;&#x4E00;&#x4E9B;&#x7B97;&#x6CD5;</strong>&#x3002;</li>
</ul>
<p>&#x4F8B;&#x5982;&#xFF0C;&#x542F;&#x52A8;&#x65F6;&#x5728;Application&#x548C;&#x7B2C;&#x4E00;&#x4E2A;Activity&#x52A0;&#x5165;&#x6253;&#x70B9;&#x7EDF;&#x8BA1;&#xFF1A;</p>
<h3 id="Application-&#x6253;&#x70B9;"><a href="#Application-&#x6253;&#x70B9;" class="headerlink" title="Application &#x6253;&#x70B9;"></a>Application &#x6253;&#x70B9;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;@Override</span><br><span class="line">protected void attachBaseContext(Context base) {</span><br><span class="line">    super.attachBaseContext(base);</span><br><span class="line">    TimeMonitorManager.getInstance().resetTimeMonitor(TimeMonitorConfig.TIME_MONITOR_ID_APPLICATION_START);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onCreate() {</span><br><span class="line">    super.onCreate();</span><br><span class="line">    SoLoader.init(this, /* native exopackage */ false);</span><br><span class="line">    TimeMonitorManager.getInstance().getTimeMonitor(TimeMonitorConfig.TIME_MONITOR_ID_APPLICATION_START).recordingTimeTag(&quot;Application-onCreate&quot;);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x7B2C;&#x4E00;&#x4E2A;Activity&#x6253;&#x70B9;"><a href="#&#x7B2C;&#x4E00;&#x4E2A;Activity&#x6253;&#x70B9;" class="headerlink" title="&#x7B2C;&#x4E00;&#x4E2A;Activity&#x6253;&#x70B9;"></a>&#x7B2C;&#x4E00;&#x4E2A;Activity&#x6253;&#x70B9;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;@Override</span><br><span class="line">protected void onCreate(Bundle savedInstanceState) {</span><br><span class="line">    TimeMonitorManager.getInstance().getTimeMonitor(TimeMonitorConfig.TIME_MONITOR_ID_APPLICATION_START).recordingTimeTag(&quot;SplashActivity-onCreate&quot;);</span><br><span class="line">    super.onCreate(savedInstanceState);</span><br><span class="line">    </span><br><span class="line">    initData();</span><br><span class="line">    </span><br><span class="line">    TimeMonitorManager.getInstance().getTimeMonitor(TimeMonitorConfig.TIME_MONITOR_ID_APPLICATION_START).recordingTimeTag(&quot;SplashActivity-onCreate-Over&quot;);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">protected void onStart() {</span><br><span class="line">    super.onStart();</span><br><span class="line">    TimeMonitorManager.getInstance().getTimeMonitor(TimeMonitorConfig.TIME_MONITOR_ID_APPLICATION_START).end(&quot;SplashActivity-onStart&quot;, false);</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="&#x7279;&#x70B9;-3"><a href="#&#x7279;&#x70B9;-3" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h3><p><strong>&#x7CBE;&#x786E;&#xFF0C;&#x53EF;&#x5E26;&#x5230;&#x7EBF;&#x4E0A;&#xFF0C;&#x4F46;&#x662F;&#x4EE3;&#x7801;&#x6709;&#x4FB5;&#x5165;&#x6027;&#xFF0C;&#x4FEE;&#x6539;&#x6210;&#x672C;&#x9AD8;</strong>&#x3002;</p>
<h3 id="&#x6CE8;&#x610F;&#x4E8B;&#x9879;"><a href="#&#x6CE8;&#x610F;&#x4E8B;&#x9879;" class="headerlink" title="&#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h3><ul>
<li>1&#x3001;&#x5728;&#x4E0A;&#x4F20;&#x6570;&#x636E;&#x5230;&#x670D;&#x52A1;&#x5668;&#x65F6;<strong>&#x5EFA;&#x8BAE;&#x6839;&#x636E;&#x7528;&#x6237;ID&#x7684;&#x5C3E;&#x53F7;&#x6765;&#x62BD;&#x6837;&#x4E0A;&#x62A5;</strong>&#x3002;</li>
<li>2&#x3001;<strong>onWindowFocusChanged&#x53EA;&#x662F;&#x9996;&#x5E27;&#x65F6;&#x95F4;&#xFF0C;App&#x542F;&#x52A8;&#x5B8C;&#x6210;&#x7684;&#x7ED3;&#x675F;&#x70B9;&#x5E94;&#x8BE5;&#x662F;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x5C55;&#x793A;&#x51FA;&#x6765;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x901A;&#x5E38;&#x6765;&#x8BF4;&#x90FD;&#x662F;&#x9996;&#x5E27;&#x6570;&#x636E;&#xFF09;&#xFF0C;&#x5982;&#x5217;&#x8868;&#x7B2C;&#x4E00;&#x6761;&#x6570;&#x636E;&#x5C55;&#x793A;&#xFF0C;&#x8BB0;&#x5F97;&#x4F7F;&#x7528;getViewTreeObserver().addOnPreDrawListener()&#xFF08;&#x5728;API 16&#x4EE5;&#x4E0A;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;addOnDrawListener&#xFF09;&#xFF0C;&#x5B83;&#x4F1A;&#x628A;&#x4EFB;&#x52A1;&#x5EF6;&#x8FDF;&#x5230;&#x5217;&#x8868;&#x663E;&#x793A;&#x540E;&#x518D;&#x6267;&#x884C;</strong>&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5728; Awesome-WanAndroid &#x9879;&#x76EE;&#x7684;&#x4E3B;&#x9875;&#x5C31;&#x6709;&#x4E00;&#x4E2A;RecyclerView&#x5B9E;&#x73B0;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x95F4;&#x5C31;&#x662F;&#x5217;&#x8868;&#x7684;&#x9996;&#x5E27;&#x65F6;&#x95F4;&#xFF0C;&#x4E5F;&#x5373;&#x5217;&#x8868;&#x7B2C;&#x4E00;&#x6761;&#x6570;&#x636E;&#x5C55;&#x793A;&#x7684;&#x65F6;&#x5019;&#x3002;&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x5728;RecyclerView&#x7684;&#x9002;&#x914D;&#x5668;ArticleListAdapter&#x7684;convert&#xFF08;onBindViewHolder&#xFF09;&#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x4E0A;&#x5982;&#x4E0B;&#x4EE3;&#x7801;&#x5373;&#x53EF;&#xFF1A;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;  if (helper.getLayoutPosition() == 1 &amp;&amp; !mHasRecorded) {</span><br><span class="line">      mHasRecorded = true;</span><br><span class="line">      helper.getView(R.id.item_search_pager_group).getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {</span><br><span class="line">          @Override</span><br><span class="line">          public boolean onPreDraw() {</span><br><span class="line">              helper.getView(R.id.item_search_pager_group).getViewTreeObserver().removeOnPreDrawListener(this);</span><br><span class="line">              LogHelper.i(&quot;FeedShow&quot;);</span><br><span class="line">              return true;</span><br><span class="line">          }</span><br><span class="line">      });</span><br><span class="line">  }</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x4F8B;&#x4EE3;&#x7801;&#x53EF;&#x5728; <a href="/external_links/9b31cffa89f4e289275f945b444a6213.html" target="blank" rel="noopener">&#x8FD9;&#x91CC;&#x67E5;&#x770B;</a>&#x3002;</p>
<h4 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528;onWindowFocusChanged&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x70B9;&#xFF1F;"><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528;onWindowFocusChanged&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x70B9;&#xFF1F;" class="headerlink" title="&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528;onWindowFocusChanged&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x70B9;&#xFF1F;"></a>&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528;onWindowFocusChanged&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#x4F5C;&#x4E3A;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x70B9;&#xFF1F;</h4><p>&#x56E0;&#x4E3A;&#x7528;&#x6237;&#x770B;&#x5230;&#x771F;&#x5B9E;&#x7684;&#x754C;&#x9762;&#x662F;&#x9700;&#x8981;&#x6709;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x8FD4;&#x56DE;&#x771F;&#x5B9E;&#x6570;&#x636E;&#x7684;&#xFF0C;&#x4F46;&#x662F;onWindowFocusChanged&#x53EA;&#x662F;&#x754C;&#x9762;&#x7ED8;&#x5236;&#x7684;&#x9996;&#x5E27;&#x65F6;&#x673A;&#xFF0C;&#x4F46;&#x662F;&#x5217;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x662F;&#x9700;&#x8981;&#x4ECE;&#x7F51;&#x7EDC;&#x4E2D;&#x4E0B;&#x8F7D;&#x5F97;&#x5230;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x8BE5;&#x4EE5;&#x5217;&#x8868;&#x7684;&#x9996;&#x5E27;&#x6570;&#x636E;&#x4F5C;&#x4E3A;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x70B9;&#x3002;</p>
<h2 id="4&#x3001;AOP-Aspect-Oriented-Programming-&#x6253;&#x70B9;"><a href="#4&#x3001;AOP-Aspect-Oriented-Programming-&#x6253;&#x70B9;" class="headerlink" title="4&#x3001;AOP(Aspect Oriented Programming) &#x6253;&#x70B9;"></a>4&#x3001;AOP(Aspect Oriented Programming) &#x6253;&#x70B9;</h2><p>&#x9762;&#x5411;&#x5207;&#x9762;&#x7F16;&#x7A0B;&#xFF0C;<strong>&#x901A;&#x8FC7;&#x9884;&#x7F16;&#x8BD1;&#x548C;&#x8FD0;&#x884C;&#x671F;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x5B9E;&#x73B0;&#x7A0B;&#x5E8F;&#x529F;&#x80FD;&#x7EDF;&#x4E00;&#x7EF4;&#x62A4;</strong>&#x7684;&#x4E00;&#x79CD;&#x6280;&#x672F;&#x3002;</p>
<h3 id="1&#x3001;&#x4F5C;&#x7528;"><a href="#1&#x3001;&#x4F5C;&#x7528;" class="headerlink" title="1&#x3001;&#x4F5C;&#x7528;"></a>1&#x3001;&#x4F5C;&#x7528;</h3><p>&#x5229;&#x7528;AOP&#x53EF;<strong>&#x4EE5;&#x5BF9;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x9694;&#x79BB;</strong>&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5F97;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5404;&#x90E8;&#x5206;&#x4E4B;&#x95F4;&#x7684;<strong>&#x8026;&#x5408;&#x6027;&#x964D;&#x4F4E;</strong>&#xFF0C;<strong>&#x63D0;&#x9AD8;&#x7A0B;&#x5E8F;&#x7684;&#x53EF;&#x91CD;&#x7528;&#x6027;</strong>&#xFF0C;&#x540C;&#x65F6;&#x5927;&#x5927;<strong>&#x63D0;&#x9AD8;&#x4E86;&#x5F00;&#x53D1;&#x6548;&#x7387;</strong>&#x3002;</p>
<h3 id="2&#x3001;AOP&#x6838;&#x5FC3;&#x6982;&#x5FF5;"><a href="#2&#x3001;AOP&#x6838;&#x5FC3;&#x6982;&#x5FF5;" class="headerlink" title="2&#x3001;AOP&#x6838;&#x5FC3;&#x6982;&#x5FF5;"></a>2&#x3001;AOP&#x6838;&#x5FC3;&#x6982;&#x5FF5;</h3><h4 id="1&#x3001;&#x6A2A;&#x5207;&#x5173;&#x6CE8;&#x70B9;"><a href="#1&#x3001;&#x6A2A;&#x5207;&#x5173;&#x6CE8;&#x70B9;" class="headerlink" title="1&#x3001;&#x6A2A;&#x5207;&#x5173;&#x6CE8;&#x70B9;"></a>1&#x3001;&#x6A2A;&#x5207;&#x5173;&#x6CE8;&#x70B9;</h4><p>&#x5BF9;&#x54EA;&#x4E9B;&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF0C;&#x62E6;&#x622A;&#x540E;&#x600E;&#x4E48;&#x5904;&#x7406;&#x3002;</p>
<h4 id="2&#x3001;&#x5207;&#x9762;&#xFF08;Aspect&#xFF09;"><a href="#2&#x3001;&#x5207;&#x9762;&#xFF08;Aspect&#xFF09;" class="headerlink" title="2&#x3001;&#x5207;&#x9762;&#xFF08;Aspect&#xFF09;"></a>2&#x3001;&#x5207;&#x9762;&#xFF08;Aspect&#xFF09;</h4><p>&#x7C7B;&#x662F;&#x5BF9;&#x7269;&#x4F53;&#x7279;&#x5F81;&#x7684;&#x62BD;&#x8C61;&#xFF0C;<strong>&#x5207;&#x9762;&#x5C31;&#x662F;&#x5BF9;&#x6A2A;&#x5207;&#x5173;&#x6CE8;&#x70B9;&#x7684;&#x62BD;&#x8C61;</strong>&#x3002;</p>
<h4 id="3&#x3001;&#x8FDE;&#x63A5;&#x70B9;&#xFF08;JoinPoint&#xFF09;"><a href="#3&#x3001;&#x8FDE;&#x63A5;&#x70B9;&#xFF08;JoinPoint&#xFF09;" class="headerlink" title="3&#x3001;&#x8FDE;&#x63A5;&#x70B9;&#xFF08;JoinPoint&#xFF09;"></a>3&#x3001;&#x8FDE;&#x63A5;&#x70B9;&#xFF08;JoinPoint&#xFF09;</h4><p>&#x88AB;&#x62E6;&#x622A;&#x5230;&#x7684;&#x70B9;&#xFF08;&#x65B9;&#x6CD5;&#x3001;&#x5B57;&#x6BB5;&#x3001;&#x6784;&#x9020;&#x5668;&#xFF09;&#x3002;</p>
<h4 id="4&#x3001;&#x5207;&#x5165;&#x70B9;&#xFF08;PointCut&#xFF09;"><a href="#4&#x3001;&#x5207;&#x5165;&#x70B9;&#xFF08;PointCut&#xFF09;" class="headerlink" title="4&#x3001;&#x5207;&#x5165;&#x70B9;&#xFF08;PointCut&#xFF09;"></a>4&#x3001;&#x5207;&#x5165;&#x70B9;&#xFF08;PointCut&#xFF09;</h4><p>&#x5BF9;JoinPoint&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<h4 id="5&#x3001;&#x901A;&#x77E5;&#xFF08;Advice&#xFF09;"><a href="#5&#x3001;&#x901A;&#x77E5;&#xFF08;Advice&#xFF09;" class="headerlink" title="5&#x3001;&#x901A;&#x77E5;&#xFF08;Advice&#xFF09;"></a>5&#x3001;&#x901A;&#x77E5;&#xFF08;Advice&#xFF09;</h4><p><strong>&#x62E6;&#x622A;&#x5230;JoinPoint&#x540E;&#x8981;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;</strong>&#xFF0C;&#x5206;&#x4E3A;<strong>&#x524D;&#x7F6E;&#x3001;&#x540E;&#x7F6E;&#x3001;&#x73AF;&#x7ED5;</strong>&#x4E09;&#x79CD;&#x7C7B;&#x578B;&#x3002;</p>
<h3 id="3&#x3001;&#x51C6;&#x5907;&#xFF1A;&#x63A5;&#x5165;AspectJx&#x8FDB;&#x884C;&#x5207;&#x9762;&#x7F16;&#x7801;"><a href="#3&#x3001;&#x51C6;&#x5907;&#xFF1A;&#x63A5;&#x5165;AspectJx&#x8FDB;&#x884C;&#x5207;&#x9762;&#x7F16;&#x7801;" class="headerlink" title="3&#x3001;&#x51C6;&#x5907;&#xFF1A;&#x63A5;&#x5165;AspectJx&#x8FDB;&#x884C;&#x5207;&#x9762;&#x7F16;&#x7801;"></a>3&#x3001;&#x51C6;&#x5907;&#xFF1A;&#x63A5;&#x5165;AspectJx&#x8FDB;&#x884C;&#x5207;&#x9762;&#x7F16;&#x7801;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x4E3A;&#x4E86;&#x5728;Android&#x4F7F;&#x7528;AOP&#x57CB;&#x70B9;&#x9700;&#x8981;&#x5F15;&#x5165;AspectJ&#xFF0C;&#x5728;&#x9879;&#x76EE;&#x6839;&#x76EE;&#x5F55;&#x7684;build.gradle&#x4E0B;&#x52A0;&#x5165;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;classpath &apos;com.hujiang.aspectjx:gradle-android-plugin- aspectjx:2.0.0&apos;</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#xFF0C;&#x5728;app&#x76EE;&#x5F55;&#x4E0B;&#x7684;build.gradle&#x4E0B;&#x52A0;&#x5165;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;apply plugin: &apos;android-aspectjx&apos;</span><br><span class="line">implement &apos;org.aspectj:aspectjrt:1.8.+&apos;</span><br></pre></td></tr></table></figure>

<h3 id="4&#x3001;AOP&#x57CB;&#x70B9;&#x5B9E;&#x6218;"><a href="#4&#x3001;AOP&#x57CB;&#x70B9;&#x5B9E;&#x6218;" class="headerlink" title="4&#x3001;AOP&#x57CB;&#x70B9;&#x5B9E;&#x6218;"></a>4&#x3001;AOP&#x57CB;&#x70B9;&#x5B9E;&#x6218;</h3><p>JoinPoint&#x4E00;&#x822C;&#x5B9A;&#x4F4D;&#x5728;&#x5982;&#x4E0B;&#x4F4D;&#x7F6E;</p>
<ul>
<li>1&#x3001;<strong>&#x51FD;&#x6570;&#x8C03;&#x7528;</strong></li>
<li>2&#x3001;<strong>&#x83B7;&#x53D6;&#x3001;&#x8BBE;&#x7F6E;&#x53D8;&#x91CF;</strong></li>
<li>3&#x3001;<strong>&#x7C7B;&#x521D;&#x59CB;&#x5316;</strong></li>
</ul>
<p><strong>&#x4F7F;&#x7528;PointCut&#x5BF9;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;&#x8FDE;&#x63A5;&#x70B9;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF0C;&#x901A;&#x8FC7;Advice&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x62E6;&#x622A;&#x5230;JoinPoint&#x540E;&#x8981;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;</strong>&#x3002;Advice&#x901A;&#x5E38;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;&#x7C7B;&#x578B;&#xFF1A;</p>
<ul>
<li>1&#x3001;<strong>Before</strong>&#xFF1A;PointCut&#x4E4B;&#x524D;&#x6267;&#x884C;</li>
<li>2&#x3001;<strong>After</strong>&#xFF1A;PointCut&#x4E4B;&#x540E;&#x6267;&#x884C;</li>
<li>3&#x3001;<strong>Around</strong>&#xFF1A;PointCut&#x4E4B;&#x524D;&#x3001;&#x4E4B;&#x540E;&#x5206;&#x522B;&#x6267;&#x884C;</li>
</ul>
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x4E3E;&#x4E00;&#x4E2A;&#x5C0F;&#x6817;&#x5B50;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Before(&quot;execution(* android.app.Activity.on**(..))&quot;)</span><br><span class="line">public void onActivityCalled(JoinPoint joinPoint) throws Throwable {</span><br><span class="line">...</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>&#x5728; execution &#x4E2D;&#x7684;&#x662F;&#x4E00;&#x4E2A;&#x5339;&#x914D;&#x89C4;&#x5219;</strong>&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A; * &#x4EE3;&#x8868;<strong>&#x5339;&#x914D;&#x4EFB;&#x610F;&#x7684;&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x503C;</strong>&#xFF0C;&#x540E;&#x9762;&#x7684;&#x8BED;&#x6CD5;&#x4EE3;&#x7801;<strong>&#x5339;&#x914D;&#x6240;&#x6709;Activity&#x4E2D;on&#x5F00;&#x5934;&#x7684;&#x65B9;&#x6CD5;</strong>&#x3002;</p>
<p>&#x5176;&#x4E2D;execution&#x662F;&#x5904;&#x7406;Join Point&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x5728;AspectJx&#x4E2D;&#x5171;&#x6709;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<ul>
<li>1&#x3001;<strong>call</strong>&#xFF1A;&#x63D2;&#x5165;&#x5728;&#x51FD;&#x6570;&#x4F53;&#x91CC;&#x9762;</li>
<li>2&#x3001;<strong>execution</strong>&#xFF1A;&#x63D2;&#x5165;&#x5728;&#x51FD;&#x6570;&#x4F53;&#x5916;&#x9762;</li>
</ul>
<h4 id="&#x5982;&#x4F55;&#x7EDF;&#x8BA1;Application&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x8017;&#x65F6;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x7EDF;&#x8BA1;Application&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x8017;&#x65F6;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x7EDF;&#x8BA1;Application&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x8017;&#x65F6;&#xFF1F;"></a>&#x5982;&#x4F55;&#x7EDF;&#x8BA1;Application&#x4E2D;&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#x8017;&#x65F6;&#xFF1F;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;@Aspect</span><br><span class="line">public class ApplicationAop {</span><br><span class="line"></span><br><span class="line">    @Around(&quot;call (* com.json.chao.application.BaseApplication.**(..))&quot;)</span><br><span class="line">    public void getTime(ProceedingJoinPoint joinPoint) {</span><br><span class="line">    Signature signature = joinPoint.getSignature();</span><br><span class="line">    String name = signature.toShortString();</span><br><span class="line">    long time = System.currentTimeMillis();</span><br><span class="line">    try {</span><br><span class="line">        joinPoint.proceed();</span><br><span class="line">    } catch (Throwable throwable) {</span><br><span class="line">        throwable.printStackTrace();</span><br><span class="line">    }</span><br><span class="line">    Log.i(TAG, name + &quot; cost&quot; +     (System.currentTimeMillis() - time));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;&#x4E0A;&#x8FF0;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x6CE8;&#x610F; <strong>&#x4E0D;&#x540C;&#x7684;Action&#x7C7B;&#x578B;&#x5176;&#x5BF9;&#x5E94;&#x7684;&#x65B9;&#x6CD5;&#x5165;&#x53C2;&#x662F;&#x4E0D;&#x540C;&#x7684;</strong>&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x5DEE;&#x5F02;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<ul>
<li>&#x5F53;Action&#x4E3A;<strong>Before&#x3001;After</strong>&#x65F6;&#xFF0C;&#x65B9;&#x6CD5;&#x5165;&#x53C2;&#x4E3A;<strong>JoinPoint</strong>&#x3002;</li>
<li>&#x5F53;Action&#x4E3A;<strong>Around</strong>&#x65F6;&#xFF0C;&#x65B9;&#x6CD5;&#x5165;&#x53C2;&#x4E3A;<strong>ProceedingPoint</strong>&#x3002;</li>
</ul>
<h5 id="Around&#x548C;Before&#x3001;After&#x7684;&#x6700;&#x5927;&#x533A;&#x522B;"><a href="#Around&#x548C;Before&#x3001;After&#x7684;&#x6700;&#x5927;&#x533A;&#x522B;" class="headerlink" title="Around&#x548C;Before&#x3001;After&#x7684;&#x6700;&#x5927;&#x533A;&#x522B;:"></a>Around&#x548C;Before&#x3001;After&#x7684;&#x6700;&#x5927;&#x533A;&#x522B;:</h5><p><strong>ProceedingPoint</strong>&#x4E0D;&#x540C;&#x4E8E;JoinPoint&#xFF0C;&#x5176;<strong>&#x63D0;&#x4F9B;&#x4E86;proceed&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x76EE;&#x6807;&#x65B9;&#x6CD5;</strong>&#x3002;</p>
<h3 id="5&#x3001;&#x603B;&#x7ED3;AOP&#x7279;&#x6027;"><a href="#5&#x3001;&#x603B;&#x7ED3;AOP&#x7279;&#x6027;" class="headerlink" title="5&#x3001;&#x603B;&#x7ED3;AOP&#x7279;&#x6027;"></a>5&#x3001;&#x603B;&#x7ED3;AOP&#x7279;&#x6027;</h3><ul>
<li>1&#x3001;<strong>&#x65E0;&#x4FB5;&#x5165;&#x6027;</strong></li>
<li>2&#x3001;<strong>&#x4FEE;&#x6539;&#x65B9;&#x4FBF;&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;</strong></li>
</ul>
<h2 id="5&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177;-&#x2014;-TraceView"><a href="#5&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177;-&#x2014;-TraceView" class="headerlink" title="5&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177; &#x2014; TraceView"></a>5&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177; &#x2014; TraceView</h2><h3 id="1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;"><a href="#1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;" class="headerlink" title="1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;"></a>1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;</h3><ul>
<li>1&#x3001;&#x4EE3;&#x7801;&#x4E2D;&#x6DFB;&#x52A0;&#xFF1A;<strong>Debug.startMethodTracing()&#x3001;&#x68C0;&#x6D4B;&#x65B9;&#x6CD5;&#x3001;Debug.stopMethodTracing()</strong>&#x3002;&#xFF08;&#x9700;&#x8981;<strong>&#x4F7F;&#x7528;adb pull&#x5C06;&#x751F;&#x6210;&#x7684;</strong>.trace&#x6587;&#x4EF6;&#x5BFC;&#x51FA;&#x5230;&#x7535;&#x8111;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;Android Studio&#x7684;Profiler&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#xFF09;</li>
<li>2&#x3001;&#x6253;&#x5F00; <strong>Profiler -&gt; CPU -&gt; &#x70B9;&#x51FB; Record -&gt; &#x70B9;&#x51FB; Stop -&gt; &#x67E5;&#x770B;Profiler&#x4E0B;&#x65B9;Top Down/Bottom Up &#x533A;&#x57DF;</strong>&#xFF0C;&#x4EE5;&#x627E;&#x51FA;<strong>&#x8017;&#x65F6;&#x7684;&#x70ED;&#x70B9;&#x65B9;&#x6CD5;</strong>&#x3002;</li>
</ul>
<h3 id="2&#x3001;Profile-CPU"><a href="#2&#x3001;Profile-CPU" class="headerlink" title="2&#x3001;Profile CPU"></a>2&#x3001;Profile CPU</h3><p>&#x4F7F;&#x7528; Profile &#x7684; CPU &#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x5E2E;&#x6211;&#x4EEC;&#x5FEB;&#x901F;&#x627E;&#x5230;&#x8017;&#x65F6;&#x7684;&#x70ED;&#x70B9;&#x65B9;&#x6CD5;&#xFF0C;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x8BE6;&#x7EC6;&#x6765;&#x5206;&#x6790;&#x4E00;&#x4E0B;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x3002;</p>
<h3 id="1&#x3001;Trace-types"><a href="#1&#x3001;Trace-types" class="headerlink" title="1&#x3001;Trace types"></a>1&#x3001;Trace types</h3><p>Trace types &#x6709;&#x56DB;&#x79CD;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#x3002;</p>
<h4 id="1&#x3001;Trace-Java-Methods"><a href="#1&#x3001;Trace-Java-Methods" class="headerlink" title="1&#x3001;Trace Java Methods"></a>1&#x3001;Trace Java Methods</h4><p>&#x4F1A;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x3001;CPU&#x4FE1;&#x606F;&#x3002;&#x5BF9;&#x8FD0;&#x884C;&#x65F6;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x8F83;&#x5927;&#x3002;</p>
<h4 id="2&#x3001;Sample-Java-Methods"><a href="#2&#x3001;Sample-Java-Methods" class="headerlink" title="2&#x3001;Sample Java Methods"></a>2&#x3001;Sample Java Methods</h4><p>&#x76F8;&#x6BD4;&#x4E8E;Trace Java Methods&#x4F1A;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x65F6;&#x95F4;&#x3001;CPU&#x4FE1;&#x606F;&#xFF0C;&#x5B83;<strong>&#x4F1A;&#x5728;&#x5E94;&#x7528;&#x7684;Java&#x4EE3;&#x7801;&#x6267;&#x884C;&#x671F;&#x95F4;&#x9891;&#x7E41;&#x6355;&#x83B7;&#x5E94;&#x7528;&#x7684;&#x8C03;&#x7528;&#x5806;&#x6808;</strong>&#xFF0C;&#x5BF9;&#x8FD0;&#x884C;&#x65F6;&#x6027;&#x80FD;&#x7684;&#x5F71;&#x54CD;&#x6BD4;&#x8F83;&#x5C0F;&#xFF0C;<strong>&#x80FD;&#x591F;&#x8BB0;&#x5F55;&#x66F4;&#x5927;&#x7684;&#x6570;&#x636E;&#x533A;&#x57DF;</strong>&#x3002;</p>
<h4 id="3&#x3001;Sample-C-C-Functions"><a href="#3&#x3001;Sample-C-C-Functions" class="headerlink" title="3&#x3001;Sample C/C++ Functions"></a>3&#x3001;Sample C/C++ Functions</h4><p>&#x9700;&#x90E8;&#x7F72;&#x5230;<strong>Android 8.0&#x53CA;&#x4EE5;&#x4E0A;</strong>&#x8BBE;&#x5907;&#xFF0C;<strong>&#x5185;&#x90E8;&#x4F7F;&#x7528;simpleperf&#x8DDF;&#x8E2A;&#x5E94;&#x7528;&#x7684;native&#x4EE3;&#x7801;</strong>&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x547D;&#x4EE4;&#x884C;&#x4F7F;&#x7528;simpleperf&#x3002;</p>
<h4 id="4&#x3001;Trace-System-Calls"><a href="#4&#x3001;Trace-System-Calls" class="headerlink" title="4&#x3001;Trace System Calls"></a>4&#x3001;Trace System Calls</h4><ul>
<li>&#x68C0;&#x67E5;<strong>&#x5E94;&#x7528;&#x4E0E;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#x4EA4;&#x4E92;&#x60C5;&#x51B5;</strong>&#x3002;</li>
<li>&#x67E5;&#x770B;&#x6240;&#x6709;<strong>&#x6838;&#x5FC3;&#x7684;CPU&#x74F6;&#x9888;</strong>&#x3002;</li>
<li><strong>&#x5185;&#x90E8;&#x91C7;&#x7528;systrace</strong>&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;systrace&#x547D;&#x4EE4;&#x3002;</li>
</ul>
<h3 id="2&#x3001;Event-timeline"><a href="#2&#x3001;Event-timeline" class="headerlink" title="2&#x3001;Event timeline"></a>2&#x3001;Event timeline</h3><p>&#x7528;&#x4E8E;&#x663E;&#x793A;<strong>&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x5728;&#x5176;&#x751F;&#x547D;&#x5468;&#x671F;&#x4E2D;&#x8F6C;&#x6362;&#x4E0D;&#x540C;&#x72B6;&#x6001;&#x7684;&#x6D3B;&#x52A8;</strong>&#xFF0C;&#x5982;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x3001;&#x5C4F;&#x5E55;&#x65CB;&#x8F6C;&#x4E8B;&#x4EF6;&#x7B49;&#x3002;</p>
<h3 id="3&#x3001;CPU-timeline"><a href="#3&#x3001;CPU-timeline" class="headerlink" title="3&#x3001;CPU timeline"></a>3&#x3001;CPU timeline</h3><p>&#x7528;&#x4E8E;&#x663E;&#x793A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F; <strong>&#x5B9E;&#x65F6;CPU&#x4F7F;&#x7528;&#x7387;&#x3001;&#x5176;&#x5B83;&#x8FDB;&#x7A0B;&#x5B9E;&#x65F6;CPU&#x4F7F;&#x7528;&#x7387;&#x3001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4F7F;&#x7528;&#x7684;&#x7EBF;&#x7A0B;&#x603B;&#x6570;</strong>&#x3002;</p>
<h3 id="4&#x3001;Thread-activity-timeline"><a href="#4&#x3001;Thread-activity-timeline" class="headerlink" title="4&#x3001;Thread activity timeline"></a>4&#x3001;Thread activity timeline</h3><p><strong>&#x5217;&#x51FA;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;</strong>&#xFF0C;&#x5E76;<strong>&#x4F7F;&#x7528;&#x4E86;&#x4E0D;&#x540C;&#x7684;&#x989C;&#x8272;&#x5728;&#x5176;&#x65F6;&#x95F4;&#x8F74;&#x4E0A;&#x6307;&#x793A;&#x5176;&#x6D3B;&#x52A8;</strong>&#x3002;</p>
<ul>
<li><strong>&#x7EFF;&#x8272;</strong>&#xFF1A;&#x7EBF;&#x7A0B;&#x5904;&#x4E8E;<strong>&#x6D3B;&#x52A8;&#x72B6;&#x6001;</strong>&#x6216;<strong>&#x51C6;&#x5907;&#x597D;&#x4F7F;&#x7528;CPU</strong>&#x3002;</li>
<li><strong>&#x9EC4;&#x8272;</strong>&#xFF1A;&#x7EBF;&#x7A0B;&#x6B63;<strong>&#x7B49;&#x5F85;IO</strong>&#x64CD;&#x4F5C;&#x3002;&#xFF08;&#x91CD;&#x8981;&#xFF09;</li>
<li><strong>&#x7070;&#x8272;</strong>&#xFF1A;&#x7EBF;&#x7A0B;&#x6B63;&#x5728;<strong>&#x7761;&#x7720;</strong>&#xFF0C;<strong>&#x4E0D;&#x6D88;&#x8017;CPU&#x65F6;&#x95F4;</strong>&#x3002;</li>
</ul>
<h3 id="5&#x3001;&#x68C0;&#x67E5;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7A97;&#x53E3;"><a href="#5&#x3001;&#x68C0;&#x67E5;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7A97;&#x53E3;" class="headerlink" title="5&#x3001;&#x68C0;&#x67E5;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7A97;&#x53E3;"></a>5&#x3001;&#x68C0;&#x67E5;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7A97;&#x53E3;</h3><p>Profile&#x63D0;&#x4F9B;&#x7684;&#x68C0;&#x67E5;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7A97;&#x53E3;&#x6709;&#x56DB;&#x79CD;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<h4 id="1&#x3001;Call-Chart"><a href="#1&#x3001;Call-Chart" class="headerlink" title="1&#x3001;Call Chart"></a>1&#x3001;Call Chart</h4><p>&#x63D0;&#x4F9B;&#x51FD;&#x6570;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7684;&#x56FE;&#x5F62;&#x8868;&#x793A;&#x5F62;&#x5F0F;&#x3002;</p>
<ul>
<li><strong>&#x6C34;&#x5E73;&#x8F74;</strong>&#xFF1A;&#x8868;&#x793A;<strong>&#x8C03;&#x7528;&#x7684;&#x65F6;&#x95F4;&#x6BB5;&#x548C;&#x65F6;&#x95F4;</strong>&#x3002;</li>
<li><strong>&#x5782;&#x76F4;&#x8F74;</strong>&#xFF1A;&#x663E;&#x793A;<strong>&#x88AB;&#x8C03;&#x7528;&#x65B9;</strong>&#x3002;</li>
<li><strong>&#x6A59;&#x8272;</strong>&#xFF1A;<strong>&#x7CFB;&#x7EDF;API</strong>&#x3002;</li>
<li><strong>&#x7EFF;&#x8272;</strong>&#xFF1A;<strong>&#x5E94;&#x7528;&#x81EA;&#x6709;&#x65B9;&#x6CD5;</strong>&#x3002;</li>
<li><strong>&#x84DD;&#x8272;</strong>&#xFF1A;<strong>&#x7B2C;&#x4E09;&#x65B9;API</strong>&#xFF08;&#x5305;&#x62EC;<strong>Java API</strong>&#xFF09;&#x3002;</li>
</ul>
<h5 id="&#x63D0;&#x793A;"><a href="#&#x63D0;&#x793A;" class="headerlink" title="&#x63D0;&#x793A;"></a>&#x63D0;&#x793A;</h5><p>&#x53F3;&#x952E;&#x70B9;&#x51FB; Jump to source &#x8DF3;&#x8F6C;&#x81F3;&#x6307;&#x5B9A;&#x51FD;&#x6570;&#x3002;</p>
<h4 id="2&#x3001;Flame-Chart"><a href="#2&#x3001;Flame-Chart" class="headerlink" title="2&#x3001;Flame Chart"></a>2&#x3001;Flame Chart</h4><p><strong>&#x5C06;&#x5177;&#x6709;&#x76F8;&#x540C;&#x8C03;&#x7528;&#x65B9;&#x987A;&#x5E8F;&#x7684;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x6CD5;&#x6536;&#x96C6;&#x8D77;&#x6765;</strong>&#x3002;</p>
<ul>
<li><strong>&#x6C34;&#x5E73;&#x8F74;</strong>&#xFF1A;<strong>&#x6267;&#x884C;&#x6BCF;&#x4E2A;&#x65B9;&#x6CD5;&#x7684;&#x76F8;&#x5BF9;&#x65F6;&#x95F4;&#x91CF;</strong>&#x3002;</li>
<li><strong>&#x5782;&#x76F4;&#x8F74;</strong>&#xFF1A;&#x663E;&#x793A;<strong>&#x88AB;&#x8C03;&#x7528;&#x65B9;</strong>&#x3002;</li>
</ul>
<h5 id="&#x4F7F;&#x7528;&#x6280;&#x5DE7;"><a href="#&#x4F7F;&#x7528;&#x6280;&#x5DE7;" class="headerlink" title="&#x4F7F;&#x7528;&#x6280;&#x5DE7;"></a>&#x4F7F;&#x7528;&#x6280;&#x5DE7;</h5><p>&#x770B;<strong>&#x9876;&#x5C42;</strong>&#x7684;<strong>&#x54EA;&#x4E2A;&#x51FD;&#x6570;&#x5360;&#x636E;&#x7684;&#x5BBD;&#x5EA6;&#x6700;&#x5927;&#xFF08;&#x8868;&#x73B0;&#x4E3A;&#x5E73;&#x9876;&#xFF09;</strong>&#xFF0C;&#x53EF;&#x80FD;<strong>&#x5B58;&#x5728;&#x6027;&#x80FD;&#x95EE;&#x9898;</strong>&#x3002;</p>
<h4 id="3&#x3001;Top-Down"><a href="#3&#x3001;Top-Down" class="headerlink" title="3&#x3001;Top Down"></a>3&#x3001;Top Down</h4><ul>
<li><strong>&#x9012;&#x5F52;&#x8C03;&#x7528;&#x5217;&#x8868;</strong>&#xFF0C;&#x63D0;&#x4F9B;<strong>self&#x3001;children&#x3001;total&#x65F6;&#x95F4;&#x548C;&#x6BD4;&#x7387;&#x6765;&#x8868;&#x793A;&#x88AB;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#x4FE1;&#x606F;</strong>&#x3002;</li>
<li><strong>Flame Chart&#x662F;Top Down&#x5217;&#x8868;&#x6570;&#x636E;&#x7684;&#x56FE;&#x5F62;&#x5316;</strong>&#x3002;</li>
</ul>
<h4 id="4&#x3001;Bottom-Up"><a href="#4&#x3001;Bottom-Up" class="headerlink" title="4&#x3001;Bottom Up"></a>4&#x3001;Bottom Up</h4><ul>
<li><strong>&#x5C55;&#x5F00;&#x51FD;&#x6570;&#x4F1A;&#x663E;&#x793A;&#x5176;&#x8C03;&#x7528;&#x65B9;</strong>&#x3002;</li>
<li><strong>&#x6309;&#x7167;&#x6D88;&#x8017;CPU&#x65F6;&#x95F4;&#x7531;&#x591A;&#x5230;&#x5C11;&#x7684;&#x987A;&#x5E8F;&#x5BF9;&#x51FD;&#x6570;&#x6392;&#x5E8F;</strong>&#x3002;</li>
</ul>
<h4 id="&#x6CE8;&#x610F;&#x4E8B;&#x9879;-1"><a href="#&#x6CE8;&#x610F;&#x4E8B;&#x9879;-1" class="headerlink" title="&#x6CE8;&#x610F;&#x4E8B;&#x9879;"></a>&#x6CE8;&#x610F;&#x4E8B;&#x9879;</h4><p>&#x6211;&#x4EEC;&#x5728;&#x67E5;&#x770B;&#x4E0A;&#x9762;4&#x4E2A;&#x8DDF;&#x8E2A;&#x6570;&#x636E;&#x7684;&#x533A;&#x57DF;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x53F3;&#x4FA7;&#x7684;&#x4E24;&#x4E2A;&#x65F6;&#x95F4;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<ul>
<li><strong>Wall Clock Time</strong>&#xFF1A;<strong>&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x65F6;&#x95F4;</strong>&#x3002;</li>
<li><strong>Thread Time</strong>&#xFF1A;<strong>CPU&#x6267;&#x884C;&#x7684;&#x65F6;&#x95F4;</strong>&#x3002;</li>
</ul>
<h3 id="3&#x3001;TraceView&#x5C0F;&#x7ED3;"><a href="#3&#x3001;TraceView&#x5C0F;&#x7ED3;" class="headerlink" title="3&#x3001;TraceView&#x5C0F;&#x7ED3;"></a>3&#x3001;TraceView&#x5C0F;&#x7ED3;</h3><h4 id="&#x7279;&#x70B9;-4"><a href="#&#x7279;&#x70B9;-4" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h4><ul>
<li>1&#x3001;<strong>&#x56FE;&#x5F62;&#x7684;&#x5F62;&#x5F0F;&#x5C55;&#x793A;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x3001;&#x8C03;&#x7528;&#x6808;</strong>&#x7B49;&#x3002;</li>
<li>2&#x3001;<strong>&#x4FE1;&#x606F;&#x5168;&#x9762;&#xFF0C;&#x5305;&#x542B;&#x6240;&#x6709;&#x7EBF;&#x7A0B;</strong>&#x3002;</li>
<li>3&#x3001;<strong>&#x8FD0;&#x884C;&#x65F6;&#x5F00;&#x9500;&#x4E25;&#x91CD;&#xFF0C;&#x6574;&#x4F53;&#x90FD;&#x4F1A;&#x53D8;&#x6162;</strong>&#xFF0C;&#x5F97;&#x51FA;&#x7684;<strong>&#x7ED3;&#x679C;&#x5E76;&#x4E0D;&#x771F;&#x5B9E;</strong>&#x3002;</li>
<li>4&#x3001;<strong>&#x627E;&#x5230;&#x6700;&#x8017;&#x8D39;&#x65F6;&#x95F4;&#x7684;&#x8DEF;&#x5F84;&#xFF1A;Flame Chart&#x3001;Top Down</strong>&#x3002;</li>
<li>5&#x3001;<strong>&#x627E;&#x5230;&#x6700;&#x8017;&#x8D39;&#x65F6;&#x95F4;&#x7684;&#x8282;&#x70B9;&#xFF1A;Bottom Up</strong>&#x3002;</li>
</ul>
<h4 id="&#x4F5C;&#x7528;"><a href="#&#x4F5C;&#x7528;" class="headerlink" title="&#x4F5C;&#x7528;"></a>&#x4F5C;&#x7528;</h4><p>&#x4E3B;&#x8981;&#x505A;&#x70ED;&#x70B9;&#x5206;&#x6790;&#xFF0C;&#x7528;&#x6765;&#x5F97;&#x5230;&#x4EE5;&#x4E0B;&#x4E24;&#x79CD;&#x6570;&#x636E;&#xFF1A;</p>
<ul>
<li><strong>&#x5355;&#x6B21;&#x6267;&#x884C;&#x6700;&#x8017;&#x65F6;&#x7684;&#x65B9;&#x6CD5;</strong>&#x3002;</li>
<li><strong>&#x6267;&#x884C;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684;&#x65B9;&#x6CD5;</strong>&#x3002;</li>
</ul>
<h2 id="6&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177;-&#x2014;-Systrace"><a href="#6&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177;-&#x2014;-Systrace" class="headerlink" title="6&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177; &#x2014; Systrace"></a>6&#x3001;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x5206;&#x6790;&#x5DE5;&#x5177; &#x2014; Systrace</h2><h3 id="1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;&#x4EE3;&#x7801;&#x63D2;&#x6869;"><a href="#1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;&#x4EE3;&#x7801;&#x63D2;&#x6869;" class="headerlink" title="1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;&#x4EE3;&#x7801;&#x63D2;&#x6869;"></a>1&#x3001;&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#xFF1A;&#x4EE3;&#x7801;&#x63D2;&#x6869;</h3><p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;Trace&#x9759;&#x6001;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x5C06;Trace.begainSection()&#xFF0C;Trace.endSection()&#x5C01;&#x88C5;&#x6210;i&#x3001;o&#x65B9;&#x6CD5;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x5728;&#x60F3;&#x8981;&#x5206;&#x6790;&#x7684;&#x65B9;&#x6CD5;&#x524D;&#x540E;&#x8FDB;&#x884C;&#x63D2;&#x6869;&#x5373;&#x53EF;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E0B;&#x6267;&#x884C;systrace.py&#x811A;&#x672C;&#xFF0C;&#x547D;&#x4EE4;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash&#x590D;&#x5236;&#x4EE3;&#x7801;python /Users/quchao/Library/Android/sdk/platform-tools/systrace/systrace.py -t 20 sched gfx view wm am app webview -a &quot;com.wanandroid.json.chao&quot; -o ~/Documents/open-project/systrace_data/wanandroid_start_1.html</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x53C2;&#x6570;&#x542B;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>-t&#xFF1A;&#x6307;&#x5B9A;&#x7EDF;&#x8BA1;&#x65F6;&#x95F4;&#x4E3A;20s&#x3002;</li>
<li>shced&#xFF1A;cpu&#x8C03;&#x5EA6;&#x4FE1;&#x606F;&#x3002;</li>
<li>gfx&#xFF1A;&#x56FE;&#x5F62;&#x4FE1;&#x606F;&#x3002;</li>
<li>view&#xFF1A;&#x89C6;&#x56FE;&#x3002;</li>
<li>wm&#xFF1A;&#x7A97;&#x53E3;&#x7BA1;&#x7406;&#x3002;</li>
<li>am&#xFF1A;&#x6D3B;&#x52A8;&#x7BA1;&#x7406;&#x3002;</li>
<li>app&#xFF1A;&#x5E94;&#x7528;&#x4FE1;&#x606F;&#x3002;</li>
<li>webview&#xFF1A;webview&#x4FE1;&#x606F;&#x3002;</li>
<li>-a&#xFF1A;&#x6307;&#x5B9A;&#x76EE;&#x6807;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5305;&#x540D;&#x3002;</li>
<li>-o&#xFF1A;&#x751F;&#x6210;&#x7684;systrace.html&#x6587;&#x4EF6;&#x3002;</li>
</ul>
<h4 id="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x6570;&#x636E;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x67E5;&#x770B;&#x6570;&#x636E;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x67E5;&#x770B;&#x6570;&#x636E;&#xFF1F;"></a>&#x5982;&#x4F55;&#x67E5;&#x770B;&#x6570;&#x636E;&#xFF1F;</h4><p>&#x5728;<strong>UIThread</strong>&#x4E00;&#x680F;&#x53EF;&#x4EE5;&#x770B;&#x5230;<strong>&#x6838;&#x5FC3;&#x7684;&#x7CFB;&#x7EDF;&#x65B9;&#x6CD5;&#x65F6;&#x95F4;&#x533A;&#x57DF;</strong>&#x548C;&#x6211;&#x4EEC;&#x81EA;&#x5DF1;&#x4F7F;&#x7528;<strong>&#x4EE3;&#x7801;&#x63D2;&#x6869;&#x6355;&#x83B7;&#x7684;&#x65B9;&#x6CD5;&#x65F6;&#x95F4;&#x533A;&#x57DF;</strong>&#x3002;</p>
<h3 id="2&#x3001;Systrace&#x539F;&#x7406;"><a href="#2&#x3001;Systrace&#x539F;&#x7406;" class="headerlink" title="2&#x3001;Systrace&#x539F;&#x7406;"></a>2&#x3001;Systrace&#x539F;&#x7406;</h3><ul>
<li>&#x9996;&#x5148;&#xFF0C;<strong>&#x5728;&#x7CFB;&#x7EDF;&#x7684;&#x4E00;&#x4E9B;&#x5173;&#x952E;&#x94FE;&#x8DEF;&#xFF08;&#x5982;SystemServcie&#x3001;&#x865A;&#x62DF;&#x673A;&#x3001;Binder&#x9A71;&#x52A8;&#xFF09;&#x63D2;&#x5165;&#x4E00;&#x4E9B;&#x4FE1;&#x606F;&#xFF08;Label&#xFF09;</strong>&#x3002;</li>
<li>&#x7136;&#x540E;&#xFF0C;<strong>&#x901A;&#x8FC7;Label&#x7684;&#x5F00;&#x59CB;&#x548C;&#x7ED3;&#x675F;&#x6765;&#x786E;&#x5B9A;&#x67D0;&#x4E2A;&#x6838;&#x5FC3;&#x8FC7;&#x7A0B;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x5E76;&#x628A;&#x8FD9;&#x4E9B;Label&#x4FE1;&#x606F;&#x6536;&#x96C6;&#x8D77;&#x6765;&#x5F97;&#x5230;&#x7CFB;&#x7EDF;&#x5173;&#x952E;&#x8DEF;&#x5F84;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x4FE1;&#x606F;&#xFF0C;&#x6700;&#x540E;&#x5F97;&#x5230;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x7684;&#x8FD0;&#x884C;&#x6027;&#x80FD;&#x4FE1;&#x606F;</strong>;</li>
</ul>
<p>&#x5176;&#x4E2D;&#xFF0C;Android Framework &#x91CC;&#x9762;&#x4E00;&#x4E9B;&#x91CD;&#x8981;&#x7684;&#x6A21;&#x5757;&#x90FD;&#x63D2;&#x5165;&#x4E86;label&#x4FE1;&#x606F;&#xFF0C;&#x7528;&#x6237;App&#x4E2D;&#x4E5F;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;Lable&#x3002;</p>
<h3 id="3&#x3001;Systrace&#x5C0F;&#x7ED3;"><a href="#3&#x3001;Systrace&#x5C0F;&#x7ED3;" class="headerlink" title="3&#x3001;Systrace&#x5C0F;&#x7ED3;"></a>3&#x3001;Systrace&#x5C0F;&#x7ED3;</h3><h4 id="&#x7279;&#x70B9;-5"><a href="#&#x7279;&#x70B9;-5" class="headerlink" title="&#x7279;&#x70B9;"></a>&#x7279;&#x70B9;</h4><ul>
<li>&#x7ED3;&#x5408;<strong>Android&#x5185;&#x6838;&#x7684;&#x6570;&#x636E;</strong>&#xFF0C;&#x751F;&#x6210;<strong>Html</strong>&#x62A5;&#x544A;&#x3002;</li>
<li><strong>&#x7CFB;&#x7EDF;&#x7248;&#x672C;&#x8D8A;&#x9AD8;&#xFF0C;Android Framework&#x4E2D;&#x6DFB;&#x52A0;&#x7684;&#x7CFB;&#x7EDF;&#x53EF;&#x7528;Label&#x5C31;&#x8D8A;&#x591A;&#xFF0C;&#x80FD;&#x591F;&#x652F;&#x6301;&#x548C;&#x5206;&#x6790;&#x7684;&#x7CFB;&#x7EDF;&#x6A21;&#x5757;&#x4E5F;&#x5C31;&#x8D8A;&#x591A;</strong>&#x3002;</li>
<li><strong>&#x5FC5;&#x987B;&#x624B;&#x52A8;&#x7F29;&#x5C0F;&#x8303;&#x56F4;</strong>&#xFF0C;&#x4F1A;&#x5E2E;&#x52A9;&#x4F60;<strong>&#x52A0;&#x901F;&#x6536;&#x655B;&#x95EE;&#x9898;&#x7684;&#x5206;&#x6790;&#x8FC7;&#x7A0B;</strong>&#xFF0C;&#x8FDB;&#x800C;<strong>&#x5FEB;&#x901F;&#x5730;&#x5B9A;&#x4F4D;&#x548C;&#x89E3;&#x51B3;&#x95EE;&#x9898;</strong>&#x3002;</li>
</ul>
<h4 id="&#x4F5C;&#x7528;-1"><a href="#&#x4F5C;&#x7528;-1" class="headerlink" title="&#x4F5C;&#x7528;"></a>&#x4F5C;&#x7528;</h4><ul>
<li>&#x4E3B;&#x8981;&#x7528;&#x4E8E;<strong>&#x5206;&#x6790;&#x7ED8;&#x5236;&#x6027;&#x80FD;&#x65B9;&#x9762;&#x7684;&#x95EE;&#x9898;</strong>&#x3002;</li>
<li>&#x5206;&#x6790;<strong>&#x7CFB;&#x7EDF;&#x5173;&#x952E;&#x65B9;&#x6CD5;&#x548C;&#x5E94;&#x7528;&#x65B9;&#x6CD5;&#x8017;&#x65F6;</strong>&#x3002;</li>
</ul>
<h2 id="7&#x3001;&#x542F;&#x52A8;&#x76D1;&#x63A7;"><a href="#7&#x3001;&#x542F;&#x52A8;&#x76D1;&#x63A7;" class="headerlink" title="7&#x3001;&#x542F;&#x52A8;&#x76D1;&#x63A7;"></a>7&#x3001;&#x542F;&#x52A8;&#x76D1;&#x63A7;</h2><h3 id="1&#x3001;&#x5B9E;&#x9A8C;&#x5BA4;&#x76D1;&#x63A7;&#xFF1A;&#x89C6;&#x9891;&#x5F55;&#x5236;"><a href="#1&#x3001;&#x5B9E;&#x9A8C;&#x5BA4;&#x76D1;&#x63A7;&#xFF1A;&#x89C6;&#x9891;&#x5F55;&#x5236;" class="headerlink" title="1&#x3001;&#x5B9E;&#x9A8C;&#x5BA4;&#x76D1;&#x63A7;&#xFF1A;&#x89C6;&#x9891;&#x5F55;&#x5236;"></a>1&#x3001;&#x5B9E;&#x9A8C;&#x5BA4;&#x76D1;&#x63A7;&#xFF1A;&#x89C6;&#x9891;&#x5F55;&#x5236;</h3><ul>
<li>80%&#x7ED8;&#x5236;</li>
<li>&#x56FE;&#x50CF;&#x8BC6;&#x522B;</li>
</ul>
<h4 id="&#x6CE8;&#x610F;"><a href="#&#x6CE8;&#x610F;" class="headerlink" title="&#x6CE8;&#x610F;"></a>&#x6CE8;&#x610F;</h4><p>&#x8986;&#x76D6;&#x9AD8;&#x4E2D;&#x4F4E;&#x7AEF;&#x673A;&#x578B;&#x4E0D;&#x540C;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<h3 id="2&#x3001;&#x7EBF;&#x4E0A;&#x76D1;&#x63A7;"><a href="#2&#x3001;&#x7EBF;&#x4E0A;&#x76D1;&#x63A7;" class="headerlink" title="2&#x3001;&#x7EBF;&#x4E0A;&#x76D1;&#x63A7;"></a>2&#x3001;&#x7EBF;&#x4E0A;&#x76D1;&#x63A7;</h3><h4 id="&#x76EE;&#x6807;"><a href="#&#x76EE;&#x6807;" class="headerlink" title="&#x76EE;&#x6807;"></a>&#x76EE;&#x6807;</h4><p>&#x9700;&#x8981;&#x51C6;&#x786E;&#x5730;&#x7EDF;&#x8BA1;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x3002;</p>
<h4 id="1&#x3001;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x7684;&#x7EDF;&#x8BA1;&#x65F6;&#x673A;"><a href="#1&#x3001;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x7684;&#x7EDF;&#x8BA1;&#x65F6;&#x673A;" class="headerlink" title="1&#x3001;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x7684;&#x7EDF;&#x8BA1;&#x65F6;&#x673A;"></a>1&#x3001;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x7684;&#x7EDF;&#x8BA1;&#x65F6;&#x673A;</h4><p>&#x662F;&#x5426;&#x662F;&#x4F7F;&#x7528;&#x754C;&#x9762;&#x663E;&#x793A;&#x4E14;&#x7528;&#x6237;&#x771F;&#x6B63;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#x4F5C;&#x4E3A;&#x542F;&#x52A8;&#x7ED3;&#x675F;&#x65F6;&#x95F4;&#x3002;</p>
<h4 id="2&#x3001;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x6263;&#x9664;&#x903B;&#x8F91;"><a href="#2&#x3001;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x6263;&#x9664;&#x903B;&#x8F91;" class="headerlink" title="2&#x3001;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x6263;&#x9664;&#x903B;&#x8F91;"></a>2&#x3001;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x6263;&#x9664;&#x903B;&#x8F91;</h4><p>&#x95EA;&#x5C4F;&#x3001;&#x5E7F;&#x544A;&#x548C;&#x65B0;&#x624B;&#x5F15;&#x5BFC;&#x8FD9;&#x4E9B;&#x65F6;&#x95F4;&#x90FD;&#x5E94;&#x8BE5;&#x4ECE;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x91CC;&#x6263;&#x9664;&#x3002;</p>
<h4 id="3&#x3001;&#x542F;&#x52A8;&#x6392;&#x9664;&#x903B;&#x8F91;"><a href="#3&#x3001;&#x542F;&#x52A8;&#x6392;&#x9664;&#x903B;&#x8F91;" class="headerlink" title="3&#x3001;&#x542F;&#x52A8;&#x6392;&#x9664;&#x903B;&#x8F91;"></a>3&#x3001;&#x542F;&#x52A8;&#x6392;&#x9664;&#x903B;&#x8F91;</h4><p>Broadcast&#x3001;Server&#x62C9;&#x8D77;&#xFF0C;&#x542F;&#x52A8;&#x8FC7;&#x7A0B;&#x8FDB;&#x5165;&#x540E;&#x53F0;&#x90FD;&#x9700;&#x8981;&#x6392;&#x9664;&#x7EDF;&#x8BA1;&#x3002;</p>
<h4 id="4&#x3001;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6307;&#x6807;&#x6765;&#x8861;&#x91CF;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x7684;&#x5FEB;&#x6162;&#xFF1F;"><a href="#4&#x3001;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6307;&#x6807;&#x6765;&#x8861;&#x91CF;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x7684;&#x5FEB;&#x6162;&#xFF1F;" class="headerlink" title="4&#x3001;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6307;&#x6807;&#x6765;&#x8861;&#x91CF;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x7684;&#x5FEB;&#x6162;&#xFF1F;"></a>4&#x3001;&#x4F7F;&#x7528;&#x4EC0;&#x4E48;&#x6307;&#x6807;&#x6765;&#x8861;&#x91CF;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x7684;&#x5FEB;&#x6162;&#xFF1F;</h4><h5 id="&#x5E73;&#x5747;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x7684;&#x95EE;&#x9898;"><a href="#&#x5E73;&#x5747;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x7684;&#x95EE;&#x9898;" class="headerlink" title="&#x5E73;&#x5747;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x7684;&#x95EE;&#x9898;"></a>&#x5E73;&#x5747;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x7684;&#x95EE;&#x9898;</h5><p>&#x4E00;&#x4E9B;&#x4F53;&#x9A8C;&#x5F88;&#x5DEE;&#x7684;&#x7528;&#x6237;&#x5F88;&#x53EF;&#x80FD;&#x88AB;&#x5E73;&#x5747;&#x4E86;&#x3002;</p>
<h5 id="&#x5EFA;&#x8BAE;&#x7684;&#x6307;&#x6807;"><a href="#&#x5EFA;&#x8BAE;&#x7684;&#x6307;&#x6807;" class="headerlink" title="&#x5EFA;&#x8BAE;&#x7684;&#x6307;&#x6807;"></a>&#x5EFA;&#x8BAE;&#x7684;&#x6307;&#x6807;</h5><ul>
<li>1&#x3001;&#x5FEB;&#x5F00;&#x6162;&#x5F00;&#x6BD4;</li>
</ul>
<p>&#x5982;2s&#x5FEB;&#x5F00;&#x6BD4;&#xFF0C;5s&#x6162;&#x5F00;&#x6BD4;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;<strong>&#x6709;&#x591A;&#x5C11;&#x6BD4;&#x4F8B;&#x7684;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x597D;&#xFF0C;&#x591A;&#x5C11;&#x6BD4;&#x4F8B;&#x7684;&#x7528;&#x6237;&#x6BD4;&#x8F83;&#x7CDF;&#x7CD5;</strong>&#x3002;</p>
<ul>
<li>2&#x3001;90%&#x7528;&#x6237;&#x7684;&#x542F;&#x52A8;&#x65F6;&#x95F4;</li>
</ul>
<p>&#x5982;&#x679C;90%&#x7528;&#x6237;&#x7684;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x90FD;&#x5C0F;&#x4E8E;5s&#xFF0C;&#x90A3;&#x4E48;90%&#x533A;&#x95F4;&#x7684;&#x542F;&#x52A8;&#x8017;&#x65F6;&#x5C31;&#x662F;5s&#x3002;</p>
<h4 id="5&#x3001;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;&#x6709;&#x54EA;&#x51E0;&#x79CD;&#xFF1F;"><a href="#5&#x3001;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;&#x6709;&#x54EA;&#x51E0;&#x79CD;&#xFF1F;" class="headerlink" title="5&#x3001;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;&#x6709;&#x54EA;&#x51E0;&#x79CD;&#xFF1F;"></a>5&#x3001;&#x542F;&#x52A8;&#x7684;&#x7C7B;&#x578B;&#x6709;&#x54EA;&#x51E0;&#x79CD;&#xFF1F;</h4><ul>
<li>&#x9996;&#x6B21;&#x5B89;&#x88C5;&#x542F;&#x52A8;</li>
<li>&#x8986;&#x76D6;&#x5B89;&#x88C5;&#x542F;&#x52A8;</li>
<li>&#x51B7;&#x542F;&#x52A8;&#xFF08;&#x6307;&#x6807;&#xFF09;</li>
<li>&#x70ED;&#x542F;&#x52A8;&#xFF08;&#x53CD;&#x6620;&#x7A0B;&#x5E8F;&#x7684;&#x6D3B;&#x8DC3;&#x6216;&#x4FDD;&#x6D3B;&#x80FD;&#x529B;&#xFF09;</li>
</ul>
<p>&#x501F;&#x9274;Facebook&#x7684; <a href="/external_links/83080b28e1efdbd3831a26b3997dbe34.html" target="blank" rel="noopener">profilo</a> &#x5DE5;&#x5177;&#x539F;&#x7406;&#xFF0C;&#x5BF9;&#x542F;&#x52A8;&#x6574;&#x4E2A;&#x6D41;&#x7A0B;&#x8FDB;&#x884C;&#x8017;&#x65F6;&#x76D1;&#x63A7;&#xFF0C;&#x5728;&#x540E;&#x53F0;&#x5BF9;&#x4E0D;&#x540C;&#x7684;&#x7248;&#x672C;&#x505A;&#x81EA;&#x52A8;&#x5316;&#x5BF9;&#x6BD4;&#xFF0C;&#x76D1;&#x63A7;&#x65B0;&#x7248;&#x672C;&#x662F;&#x5426;&#x6709;&#x65B0;&#x589E;&#x8017;&#x65F6;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<h1 id="&#x56DB;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x5E38;&#x89C4;&#x65B9;&#x6848;"><a href="#&#x56DB;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x5E38;&#x89C4;&#x65B9;&#x6848;" class="headerlink" title="&#x56DB;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x5E38;&#x89C4;&#x65B9;&#x6848;"></a>&#x56DB;&#x3001;&#x542F;&#x52A8;&#x4F18;&#x5316;&#x5E38;&#x89C4;&#x65B9;&#x6848;</h1><h3 id="&#x542F;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x5E38;&#x89C1;&#x95EE;&#x9898;"><a href="#&#x542F;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x5E38;&#x89C1;&#x95EE;&#x9898;" class="headerlink" title="&#x542F;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x5E38;&#x89C1;&#x95EE;&#x9898;"></a>&#x542F;&#x52A8;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x5E38;&#x89C1;&#x95EE;&#x9898;</h3><ul>
<li>1&#x3001;<strong>&#x70B9;&#x51FB;&#x56FE;&#x6807;&#x5F88;&#x4E45;&#x90FD;&#x4E0D;&#x54CD;&#x5E94;</strong>&#xFF1A;&#x9884;&#x89C8;&#x7A97;&#x53E3;&#x88AB;&#x7981;&#x7528;&#x6216;&#x8BBE;&#x7F6E;&#x4E3A;&#x900F;&#x660E;&#x3002;</li>
<li>2&#x3001;<strong>&#x9996;&#x9875;&#x663E;&#x793A;&#x592A;&#x6162;</strong>&#xFF1A;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x592A;&#x591A;&#x3002;</li>
<li>3&#x3001;<strong>&#x9996;&#x9875;&#x663E;&#x793A;&#x540E;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;</strong>&#xFF1A;&#x592A;&#x591A;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x5360;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;CPU&#x65F6;&#x95F4;&#x7247;&#x3002;</li>
</ul>
<h3 id="&#x4F18;&#x5316;&#x533A;&#x57DF;"><a href="#&#x4F18;&#x5316;&#x533A;&#x57DF;" class="headerlink" title="&#x4F18;&#x5316;&#x533A;&#x57DF;"></a>&#x4F18;&#x5316;&#x533A;&#x57DF;</h3><p>Application&#x3001;Activity&#x521B;&#x5EFA;&#x4EE5;&#x53CA;&#x56DE;&#x8C03;&#x7B49;&#x8FC7;&#x7A0B;&#x3002;</p>
<h2 id="1&#x3001;&#x4E3B;&#x9898;&#x5207;&#x6362;"><a href="#1&#x3001;&#x4E3B;&#x9898;&#x5207;&#x6362;" class="headerlink" title="1&#x3001;&#x4E3B;&#x9898;&#x5207;&#x6362;"></a>1&#x3001;&#x4E3B;&#x9898;&#x5207;&#x6362;</h2><p>&#x4F7F;&#x7528;Activity&#x7684;windowBackground&#x4E3B;&#x9898;&#x5C5E;&#x6027;&#x9884;&#x5148;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x542F;&#x52A8;&#x56FE;&#x7247;&#xFF08;layer-list&#x5B9E;&#x73B0;&#xFF09;&#xFF0C;&#x5728;&#x542F;&#x52A8;&#x540E;&#xFF0C;&#x5728;Activity&#x7684;onCreate()&#x65B9;&#x6CD5;&#x4E2D;&#x7684;super.onCreate()&#x524D;&#x518D;setTheme(R.style.AppTheme)&#x3002;</p>
<h3 id="&#x4F18;&#x70B9;"><a href="#&#x4F18;&#x70B9;" class="headerlink" title="&#x4F18;&#x70B9;"></a>&#x4F18;&#x70B9;</h3><ul>
<li>&#x4F7F;&#x7528;<strong>&#x7B80;&#x5355;</strong>&#x3002;</li>
<li><strong>&#x907F;&#x514D;&#x4E86;&#x542F;&#x52A8;&#x767D;&#x5C4F;&#x548C;&#x70B9;&#x51FB;&#x542F;&#x52A8;&#x56FE;&#x6807;&#x4E0D;&#x54CD;&#x5E94;&#x7684;&#x60C5;&#x51B5;</strong>&#x3002;</li>
</ul>
<h3 id="&#x7F3A;&#x70B9;"><a href="#&#x7F3A;&#x70B9;" class="headerlink" title="&#x7F3A;&#x70B9;"></a>&#x7F3A;&#x70B9;</h3><ul>
<li><strong>&#x6CBB;&#x6807;&#x4E0D;&#x6CBB;&#x672C;</strong>&#xFF0C;&#x8868;&#x9762;&#x4E0A;&#x4EA7;&#x751F;&#x4E00;&#x79CD;&#x5FEB;&#x7684;&#x611F;&#x89C9;&#x3002;</li>
<li><strong>&#x5BF9;&#x4E8E;&#x4E2D;&#x4F4E;&#x7AEF;&#x673A;&#xFF0C;&#x603B;&#x7684;&#x95EA;&#x5C4F;&#x65F6;&#x95F4;&#x4F1A;&#x66F4;&#x957F;&#xFF0C;&#x5EFA;&#x8BAE;&#x53EA;&#x5728;Android6.0/7.0&#x4EE5;&#x4E0A;&#x624D;&#x542F;&#x7528;&#x201C;&#x9884;&#x89C8;&#x95EA;&#x5C4F;&#x201D;&#x65B9;&#x6848;&#xFF0C;&#x8BA9;&#x624B;&#x673A;&#x6027;&#x80FD;&#x597D;&#x7684;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6709;&#x66F4;&#x597D;&#x7684;&#x4F53;&#x9A8C;</strong>&#x3002;</li>
</ul>
<h2 id="2&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x61D2;&#x52A0;&#x8F7D;"><a href="#2&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x61D2;&#x52A0;&#x8F7D;" class="headerlink" title="2&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x61D2;&#x52A0;&#x8F7D;"></a>2&#x3001;&#x7B2C;&#x4E09;&#x65B9;&#x5E93;&#x61D2;&#x52A0;&#x8F7D;</h2><p>&#x6309;&#x9700;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x7279;&#x522B;&#x662F;<strong>&#x9488;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x5E94;&#x7528;&#x542F;&#x52A8;&#x65F6;&#x4E0D;&#x9700;&#x8981;&#x521D;&#x59CB;&#x5316;&#x7684;&#x5E93;</strong>&#xFF0C;&#x53EF;&#x4EE5;&#x7B49;&#x5230;&#x7528;&#x65F6;&#x624D;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x3002;</p>
<h2 id="3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x9884;&#x5907;&#x77E5;&#x8BC6;-&#x7EBF;&#x7A0B;&#x4F18;&#x5316;"><a href="#3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x9884;&#x5907;&#x77E5;&#x8BC6;-&#x7EBF;&#x7A0B;&#x4F18;&#x5316;" class="headerlink" title="3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x9884;&#x5907;&#x77E5;&#x8BC6;-&#x7EBF;&#x7A0B;&#x4F18;&#x5316;"></a>3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x9884;&#x5907;&#x77E5;&#x8BC6;-&#x7EBF;&#x7A0B;&#x4F18;&#x5316;</h2><h3 id="1&#x3001;Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;&#x5256;&#x6790;"><a href="#1&#x3001;Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;&#x5256;&#x6790;" class="headerlink" title="1&#x3001;Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;&#x5256;&#x6790;"></a>1&#x3001;Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;&#x5256;&#x6790;</h3><h4 id="&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;"><a href="#&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;"></a>&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x539F;&#x7406;</h4><ul>
<li>1&#x3001;&#x4EFB;&#x610F;&#x65F6;&#x523B;&#xFF0C;<strong>&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x5360;&#x7528;CPU&#xFF0C;&#x5904;&#x4E8E;&#x8FD0;&#x884C;&#x72B6;&#x6001;</strong>&#x3002;</li>
<li>2&#x3001;&#x591A;&#x7EBF;&#x7A0B;&#x5E76;&#x53D1;&#xFF0C;&#x8F6E;&#x6D41;&#x83B7;&#x53D6;CPU&#x4F7F;&#x7528;&#x6743;&#x3002;</li>
<li>3&#x3001;JVM&#x8D1F;&#x8D23;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF0C;&#x6309;&#x7167;&#x7279;&#x5B9A;&#x673A;&#x5236;&#x5206;&#x914D;CPU&#x4F7F;&#x7528;&#x6743;&#x3002;</li>
</ul>
<h4 id="&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x6A21;&#x578B;"><a href="#&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x6A21;&#x578B;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x6A21;&#x578B;"></a>&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x6A21;&#x578B;</h4><h5 id="1&#x3001;&#x5206;&#x65F6;&#x8C03;&#x5EA6;&#x6A21;&#x578B;"><a href="#1&#x3001;&#x5206;&#x65F6;&#x8C03;&#x5EA6;&#x6A21;&#x578B;" class="headerlink" title="1&#x3001;&#x5206;&#x65F6;&#x8C03;&#x5EA6;&#x6A21;&#x578B;"></a>1&#x3001;&#x5206;&#x65F6;&#x8C03;&#x5EA6;&#x6A21;&#x578B;</h5><p>&#x8F6E;&#x6D41;&#x83B7;&#x53D6;&#x3001;&#x5747;&#x5206;CPU&#x3002;</p>
<h5 id="2&#x3001;&#x62A2;&#x5360;&#x5F0F;&#x8C03;&#x5EA6;&#x6A21;&#x578B;"><a href="#2&#x3001;&#x62A2;&#x5360;&#x5F0F;&#x8C03;&#x5EA6;&#x6A21;&#x578B;" class="headerlink" title="2&#x3001;&#x62A2;&#x5360;&#x5F0F;&#x8C03;&#x5EA6;&#x6A21;&#x578B;"></a>2&#x3001;&#x62A2;&#x5360;&#x5F0F;&#x8C03;&#x5EA6;&#x6A21;&#x578B;</h5><p>&#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x7684;&#x83B7;&#x53D6;&#x3002;</p>
<h4 id="&#x5982;&#x4F55;&#x5E72;&#x9884;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x5E72;&#x9884;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x5E72;&#x9884;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF1F;"></a>&#x5982;&#x4F55;&#x5E72;&#x9884;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#xFF1F;</h4><p>&#x8BBE;&#x7F6E;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;&#x3002;</p>
<h4 id="Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;"><a href="#Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;" class="headerlink" title="Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;"></a>Android&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;</h4><h5 id="1&#x3001;nice&#x503C;"><a href="#1&#x3001;nice&#x503C;" class="headerlink" title="1&#x3001;nice&#x503C;"></a>1&#x3001;nice&#x503C;</h5><ul>
<li>Process&#x4E2D;&#x5B9A;&#x4E49;&#x3002;</li>
<li>&#x503C;&#x8D8A;&#x5C0F;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#x3002;</li>
<li>&#x9ED8;&#x8BA4;&#x662F;THREAD_PRIORITY_DEFAUT&#xFF0C;0&#x3002;</li>
</ul>
<h5 id="2&#x3001;cgroup"><a href="#2&#x3001;cgroup" class="headerlink" title="2&#x3001;cgroup"></a>2&#x3001;cgroup</h5><p>&#x5B83;&#x662F;&#x4E00;&#x79CD;&#x66F4;&#x4E25;&#x683C;&#x7684;&#x7FA4;&#x7EC4;&#x8C03;&#x5EA6;&#x7B56;&#x7565;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x5982;&#x4E0B;&#x4E24;&#x79CD;&#x7C7B;&#x578B;&#xFF1A;</p>
<ul>
<li>&#x540E;&#x53F0;group&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;&#x3002;</li>
<li>&#x524D;&#x53F0;group&#xFF0C;&#x4FDD;&#x8BC1;&#x524D;&#x53F0;&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x83B7;&#x53D6;&#x5230;&#x66F4;&#x591A;&#x7684;CPU</li>
</ul>
<h4 id="&#x6CE8;&#x610F;&#x70B9;"><a href="#&#x6CE8;&#x610F;&#x70B9;" class="headerlink" title="&#x6CE8;&#x610F;&#x70B9;"></a>&#x6CE8;&#x610F;&#x70B9;</h4><ul>
<li><strong>&#x7EBF;&#x7A0B;&#x8FC7;&#x591A;&#x4F1A;&#x5BFC;&#x81F4;CPU&#x9891;&#x7E41;&#x5207;&#x6362;&#xFF0C;&#x964D;&#x4F4E;&#x7EBF;&#x7A0B;&#x8FD0;&#x884C;&#x6548;&#x7387;</strong>&#x3002;</li>
<li><strong>&#x6B63;&#x786E;&#x8BA4;&#x8BC6;&#x4EFB;&#x52A1;&#x91CD;&#x8981;&#x6027;&#x4EE5;&#x51B3;&#x5B9A;&#x4F7F;&#x7528;&#x54EA;&#x79CD;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;</strong>&#x3002;</li>
<li>&#x4F18;&#x5148;&#x7EA7;&#x5177;&#x6709;&#x7EE7;&#x627F;&#x6027;&#x3002;</li>
</ul>
<h3 id="2&#x3001;Android&#x5F02;&#x6B65;&#x65B9;&#x5F0F;"><a href="#2&#x3001;Android&#x5F02;&#x6B65;&#x65B9;&#x5F0F;" class="headerlink" title="2&#x3001;Android&#x5F02;&#x6B65;&#x65B9;&#x5F0F;"></a>2&#x3001;Android&#x5F02;&#x6B65;&#x65B9;&#x5F0F;</h3><h4 id="1&#x3001;Thread"><a href="#1&#x3001;Thread" class="headerlink" title="1&#x3001;Thread"></a>1&#x3001;Thread</h4><ul>
<li>&#x6700;&#x7B80;&#x5355;&#x3001;&#x5E38;&#x89C1;&#x7684;&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x3002;</li>
<li>&#x4E0D;&#x6613;&#x590D;&#x7528;&#xFF0C;&#x9891;&#x7E41;&#x521B;&#x5EFA;&#x53CA;&#x9500;&#x6BC1;&#x5F00;&#x9500;&#x5927;&#x3002;</li>
<li>&#x590D;&#x6742;&#x573A;&#x666F;&#x4E0D;&#x6613;&#x4F7F;&#x7528;&#x3002;</li>
</ul>
<h4 id="2&#x3001;HandlerThread"><a href="#2&#x3001;HandlerThread" class="headerlink" title="2&#x3001;HandlerThread"></a>2&#x3001;HandlerThread</h4><ul>
<li>&#x81EA;&#x5E26;&#x6D88;&#x606F;&#x5FAA;&#x73AF;&#x7684;&#x7EBF;&#x7A0B;&#x3002;</li>
<li>&#x4E32;&#x884C;&#x6267;&#x884C;&#x3002;</li>
<li>&#x957F;&#x65F6;&#x95F4;&#x8FD0;&#x884C;&#xFF0C;&#x4E0D;&#x65AD;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x83B7;&#x53D6;&#x4EFB;&#x52A1;&#x3002;</li>
</ul>
<h4 id="3&#x3001;IntentService"><a href="#3&#x3001;IntentService" class="headerlink" title="3&#x3001;IntentService"></a>3&#x3001;IntentService</h4><ul>
<li>&#x7EE7;&#x627F;&#x81EA;Service&#x5728;&#x5185;&#x90E8;&#x521B;&#x5EFA;HandlerThread&#x3002;</li>
<li>&#x5F02;&#x6B65;&#xFF0C;&#x4E0D;&#x5360;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;&#x3002;</li>
<li>&#x4F18;&#x5148;&#x7EA7;&#x8F83;&#x9AD8;&#xFF0C;&#x4E0D;&#x6613;&#x88AB;&#x7CFB;&#x7EDF;Kill&#x3002;</li>
</ul>
<h4 id="4&#x3001;AsyncTask"><a href="#4&#x3001;AsyncTask" class="headerlink" title="4&#x3001;AsyncTask"></a>4&#x3001;AsyncTask</h4><ul>
<li>Android&#x63D0;&#x4F9B;&#x7684;&#x5DE5;&#x5177;&#x7C7B;&#x3002;</li>
<li>&#x65E0;&#x9700;&#x81EA;&#x5DF1;&#x5904;&#x7406;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x3002;</li>
<li>&#x9700;&#x6CE8;&#x610F;&#x7248;&#x672C;&#x4E0D;&#x4E00;&#x81F4;&#x95EE;&#x9898;&#xFF08;API 14&#x4EE5;&#x4E0A;&#x89E3;&#x51B3;&#xFF09;</li>
</ul>
<h4 id="5&#x3001;&#x7EBF;&#x7A0B;&#x6C60;"><a href="#5&#x3001;&#x7EBF;&#x7A0B;&#x6C60;" class="headerlink" title="5&#x3001;&#x7EBF;&#x7A0B;&#x6C60;"></a>5&#x3001;&#x7EBF;&#x7A0B;&#x6C60;</h4><ul>
<li>Java&#x63D0;&#x4F9B;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;</li>
<li>&#x6613;&#x590D;&#x7528;&#xFF0C;&#x51CF;&#x5C11;&#x9891;&#x7E41;&#x521B;&#x5EFA;&#x3001;&#x9500;&#x6BC1;&#x7684;&#x65F6;&#x95F4;&#x3002;</li>
<li>&#x529F;&#x80FD;&#x5F3A;&#x5927;&#xFF0C;&#x5982;&#x5B9A;&#x65F6;&#x3001;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x3001;&#x5E76;&#x53D1;&#x6570;&#x63A7;&#x5236;&#x7B49;&#x3002;</li>
</ul>
<h4 id="6&#x3001;RxJava"><a href="#6&#x3001;RxJava" class="headerlink" title="6&#x3001;RxJava"></a>6&#x3001;RxJava</h4><p>&#x7531;&#x5F3A;&#x5927;&#x7684;&#x8C03;&#x5EA6;&#x5668;Scheduler&#x96C6;&#x5408;&#x63D0;&#x4F9B;&#x3002;</p>
<p>&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;Scheduler&#xFF1A;</p>
<ul>
<li>IO</li>
<li>Computation</li>
</ul>
<h4 id="&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x603B;&#x7ED3;"><a href="#&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x603B;&#x7ED3;" class="headerlink" title="&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x603B;&#x7ED3;"></a>&#x5F02;&#x6B65;&#x65B9;&#x5F0F;&#x603B;&#x7ED3;</h4><ul>
<li>&#x63A8;&#x8350;&#x5EA6;&#xFF1A;&#x4ECE;&#x540E;&#x5F80;&#x524D;&#x6392;&#x5217;&#x3002;</li>
<li>&#x6B63;&#x786E;&#x573A;&#x666F;&#x9009;&#x62E9;&#x6B63;&#x786E;&#x7684;&#x65B9;&#x5F0F;&#x3002;</li>
</ul>
<h3 id="3&#x3001;Android&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x5B9E;&#x6218;"><a href="#3&#x3001;Android&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x5B9E;&#x6218;" class="headerlink" title="3&#x3001;Android&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x5B9E;&#x6218;"></a>3&#x3001;Android&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x5B9E;&#x6218;</h3><h4 id="&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x51C6;&#x5219;"><a href="#&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x51C6;&#x5219;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x51C6;&#x5219;"></a>&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x51C6;&#x5219;</h4><ul>
<li>1&#x3001;<strong>&#x4E25;&#x7981;&#x4F7F;&#x7528;new Thread&#x65B9;&#x5F0F;</strong>&#x3002;</li>
<li>2&#x3001;&#x63D0;&#x4F9B;<strong>&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;</strong>&#x4F9B;&#x5404;&#x4E2A;&#x4E1A;&#x52A1;&#x7EBF;&#x4F7F;&#x7528;&#xFF0C;&#x907F;&#x514D;&#x5404;&#x4E2A;&#x4E1A;&#x52A1;&#x7EBF;&#x5404;&#x81EA;&#x7EF4;&#x62A4;&#x4E00;&#x5957;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5BFC;&#x81F4;&#x7EBF;&#x7A0B;&#x6570;&#x8FC7;&#x591A;&#x3002;</li>
<li>3&#x3001;<strong>&#x6839;&#x636E;&#x4EFB;&#x52A1;&#x7C7B;&#x578B;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;&#x5F02;&#x6B65;&#x65B9;&#x5F0F;</strong>&#xFF1A;&#x4F18;&#x5148;&#x7EA7;&#x4F4E;&#xFF0C;&#x957F;&#x65F6;&#x95F4;&#x6267;&#x884C;&#xFF0C;HandlerThread&#xFF1B;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x8017;&#x65F6;&#x4EFB;&#x52A1;&#xFF0C;&#x7EBF;&#x7A0B;&#x6C60;&#x3002;</li>
<li>4&#x3001;&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x5FC5;&#x987B;<strong>&#x547D;&#x540D;</strong>&#xFF0C;&#x4EE5;&#x65B9;&#x4FBF;<strong>&#x5B9A;&#x4F4D;&#x7EBF;&#x7A0B;&#x5F52;&#x5C5E;</strong>&#xFF0C;&#x5728;&#x8FD0;&#x884C;&#x671F; <strong>Thread.currentThread().setName</strong> &#x4FEE;&#x6539;&#x540D;&#x5B57;&#x3002;</li>
<li>5&#x3001;&#x5173;&#x952E;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x76D1;&#x63A7;&#xFF0C;&#x6CE8;&#x610F;<strong>&#x5F02;&#x6B65;&#x4E0D;&#x7B49;&#x4E8E;&#x4E0D;&#x8017;&#x65F6;</strong>&#xFF0C;&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;<strong>AOP</strong>&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x505A;<strong>&#x76D1;&#x63A7;</strong>&#x3002;</li>
<li>6&#x3001;<strong>&#x91CD;&#x89C6;&#x4F18;&#x5148;&#x7EA7;&#x8BBE;&#x7F6E;&#xFF08;&#x6839;&#x636E;&#x4EFB;&#x52A1;&#x5177;&#x4F53;&#x60C5;&#x51B5;&#xFF09;&#xFF0C;Process.setThreadPriority() &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x591A;&#x6B21;</strong>&#x3002;</li>
</ul>
<h3 id="4&#x3001;&#x5982;&#x4F55;&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x8005;"><a href="#4&#x3001;&#x5982;&#x4F55;&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x8005;" class="headerlink" title="4&#x3001;&#x5982;&#x4F55;&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x8005;"></a>4&#x3001;&#x5982;&#x4F55;&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x8005;</h3><h4 id="&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x80CC;&#x666F;"><a href="#&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x80CC;&#x666F;" class="headerlink" title="&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x80CC;&#x666F;"></a>&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x80CC;&#x666F;</h4><ul>
<li>&#x9879;&#x76EE;&#x53D8;&#x5927;&#x4E4B;&#x540E;&#x6536;&#x655B;&#x7EBF;&#x7A0B;&#x3002;</li>
<li>&#x9879;&#x76EE;&#x6E90;&#x7801;&#x3001;&#x4E09;&#x65B9;&#x5E93;&#x3001;aar&#x4E2D;&#x90FD;&#x6709;&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x5EFA;&#x3002;</li>
</ul>
<h4 id="&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x65B9;&#x6848;"><a href="#&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x65B9;&#x6848;" class="headerlink" title="&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x65B9;&#x6848;"></a>&#x9501;&#x5B9A;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x65B9;&#x6848;</h4><p>&#x7279;&#x522B;&#x9002;&#x5408;Hook&#x624B;&#x6BB5;&#xFF0C;<strong>&#x627E;Hook&#x70B9;&#xFF1A;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6216;&#x8005;&#x7279;&#x5B9A;&#x65B9;&#x6CD5;&#xFF0C;&#x5982;Thread&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x3002;</strong></p>
<h4 id="&#x5B9E;&#x6218;"><a href="#&#x5B9E;&#x6218;" class="headerlink" title="&#x5B9E;&#x6218;"></a>&#x5B9E;&#x6218;</h4><p>&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x7EF4;&#x6570;&#x7684; <a href="/external_links/a84cfa7548d6624dca30631a3cf4e1b4.html" target="blank" rel="noopener">epic</a> &#x5BF9;Thread&#x8FDB;&#x884C;Hook&#x3002;&#x5728;attachBaseContext&#x4E2D;&#x8C03;&#x7528;DexposedBridge.hookAllConstructors&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">java&#x590D;&#x5236;&#x4EE3;&#x7801;DexposedBridge.hookAllConstructors(Thread.class, new XC_MethodHook() { </span><br><span class="line">    @Override protected void afterHookedMethod&#xFF08;MethodHookParam param&#xFF09;throws Throwable {                         </span><br><span class="line">        super.afterHookedMethod(param); </span><br><span class="line">        Thread thread = (Thread) param.thisObject; </span><br><span class="line">        LogUtils.i(&quot;stack &quot; + Log.getStackTraceString(new Throwable());</span><br><span class="line">    }</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>&#x4ECE;log&#x627E;&#x5230;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x4FE1;&#x606F;&#xFF0C;&#x6839;&#x636E;&#x5806;&#x6808;&#x4FE1;&#x606F;&#x8DDF;&#x76F8;&#x5173;&#x4E1A;&#x52A1;&#x65B9;&#x6C9F;&#x901A;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;</p>
<h3 id="5&#x3001;&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x4F18;&#x96C5;&#x5B9E;&#x8DF5;&#x521D;&#x6B65;"><a href="#5&#x3001;&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x4F18;&#x96C5;&#x5B9E;&#x8DF5;&#x521D;&#x6B65;" class="headerlink" title="5&#x3001;&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x4F18;&#x96C5;&#x5B9E;&#x8DF5;&#x521D;&#x6B65;"></a>5&#x3001;&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x4F18;&#x96C5;&#x5B9E;&#x8DF5;&#x521D;&#x6B65;</h3><h4 id="&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x5E38;&#x89C4;&#x65B9;&#x6848;"><a href="#&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x5E38;&#x89C4;&#x65B9;&#x6848;" class="headerlink" title="&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x5E38;&#x89C4;&#x65B9;&#x6848;"></a>&#x7EBF;&#x7A0B;&#x6536;&#x655B;&#x5E38;&#x89C4;&#x65B9;&#x6848;</h4><ul>
<li>&#x6839;&#x636E;&#x7EBF;&#x7A0B;&#x521B;&#x5EFA;&#x5806;&#x6808;&#x8003;&#x91CF;&#x5408;&#x7406;&#x6027;&#xFF0C;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x7EBF;&#x7A0B;&#x5E93;&#x3002;</li>
<li>&#x5404;&#x4E1A;&#x52A1;&#x7EBF;&#x4E0B;&#x6389;&#x81EA;&#x5DF1;&#x7684;&#x7EBF;&#x7A0B;&#x5E93;&#x3002;</li>
</ul>
<h4 id="&#x95EE;&#x9898;&#xFF1A;&#x57FA;&#x7840;&#x5E93;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#xFF1F;"><a href="#&#x95EE;&#x9898;&#xFF1A;&#x57FA;&#x7840;&#x5E93;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#xFF1F;" class="headerlink" title="&#x95EE;&#x9898;&#xFF1A;&#x57FA;&#x7840;&#x5E93;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#xFF1F;"></a>&#x95EE;&#x9898;&#xFF1A;&#x57FA;&#x7840;&#x5E93;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#xFF1F;</h4><p>&#x76F4;&#x63A5;&#x4F9D;&#x8D56;&#x7EBF;&#x7A0B;&#x5E93;&#xFF0C;&#x4F46;&#x95EE;&#x9898;&#x5728;&#x4E8E;<strong>&#x7EBF;&#x7A0B;&#x5E93;&#x66F4;&#x65B0;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x57FA;&#x7840;&#x5E93;&#x66F4;&#x65B0;</strong>&#x3002;</p>
<h4 id="&#x57FA;&#x7840;&#x5E93;&#x4F18;&#x96C5;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;"><a href="#&#x57FA;&#x7840;&#x5E93;&#x4F18;&#x96C5;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;" class="headerlink" title="&#x57FA;&#x7840;&#x5E93;&#x4F18;&#x96C5;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;"></a>&#x57FA;&#x7840;&#x5E93;&#x4F18;&#x96C5;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;</h4><ul>
<li><strong>&#x57FA;&#x7840;&#x5E93;&#x5185;&#x90E8;&#x66B4;&#x9732;API&#xFF1A;setExecutor</strong>&#x3002;</li>
<li><strong>&#x521D;&#x59CB;&#x5316;&#x7684;&#x65F6;&#x5019;&#x6CE8;&#x5165;&#x7EDF;&#x4E00;&#x7684;&#x7EBF;&#x7A0B;&#x5E93;</strong>&#x3002;</li>
</ul>
<h4 id="&#x7EDF;&#x4E00;&#x7EBF;&#x7A0B;&#x5E93;&#x65F6;&#x533A;&#x5206;&#x4EFB;&#x52A1;&#x7C7B;&#x578B;"><a href="#&#x7EDF;&#x4E00;&#x7EBF;&#x7A0B;&#x5E93;&#x65F6;&#x533A;&#x5206;&#x4EFB;&#x52A1;&#x7C7B;&#x578B;" class="headerlink" title="&#x7EDF;&#x4E00;&#x7EBF;&#x7A0B;&#x5E93;&#x65F6;&#x533A;&#x5206;&#x4EFB;&#x52A1;&#x7C7B;&#x578B;"></a>&#x7EDF;&#x4E00;&#x7EBF;&#x7A0B;&#x5E93;&#x65F6;&#x533A;&#x5206;&#x4EFB;&#x52A1;&#x7C7B;&#x578B;</h4><ul>
<li><strong>IO&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;</strong>&#xFF1A;IO&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x4E0D;&#x6D88;&#x8017;CPU&#xFF0C;&#x6838;&#x5FC3;&#x6C60;&#x53EF;&#x4EE5;&#x5F88;&#x5927;&#x3002;&#x5E38;&#x89C1;&#x7684;IO&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x5982;&#x6587;&#x4EF6;&#x8BFB;&#x53D6;&#x3001;&#x5199;&#x5165;&#xFF0C;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#x7B49;&#x7B49;&#x3002;</li>
<li><strong>CPU&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;</strong>&#xFF1A;&#x6838;&#x5FC3;&#x6C60;&#x5927;&#x5C0F;&#x548C;CPU&#x6838;&#x5FC3;&#x6570;&#x76F8;&#x5173;&#x3002;&#x5E38;&#x89C1;&#x7684;CPU&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x5982;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#x7684;&#x8BA1;&#x7B97;&#x64CD;&#x4F5C;&#xFF0C;&#x6B64;&#x65F6;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x5927;&#x91CF;&#x7684;CPU&#x8BA1;&#x7B97;&#x5355;&#x5143;&#x3002;</li>
</ul>
<h4 id="&#x5B9E;&#x73B0;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x591A;&#x7C7B;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;"><a href="#&#x5B9E;&#x73B0;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x591A;&#x7C7B;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;" class="headerlink" title="&#x5B9E;&#x73B0;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x591A;&#x7C7B;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;"></a>&#x5B9E;&#x73B0;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x591A;&#x7C7B;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;</h4><p>&#x76EE;&#x524D;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;&#x4F4D;&#x4E8E;&#x542F;&#x52A8;&#x5668;sdk&#x4E4B;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x793A;&#x4F8B;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;// &#x5982;&#x679C;&#x5F53;&#x524D;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x662F;CPU&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#xFF0C;&#x5219;&#x4ECE;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;</span><br><span class="line">// DispatcherExecutor&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x7528;&#x4E8E;&#x6267;&#x884C; CPU &#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">DispatcherExecutor.getCPUExecutor().execute(YourRunable());</span><br><span class="line"></span><br><span class="line">// &#x5982;&#x679C;&#x5F53;&#x524D;&#x6267;&#x884C;&#x7684;&#x4EFB;&#x52A1;&#x662F;IO&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#xFF0C;&#x5219;&#x4ECE;&#x57FA;&#x7840;&#x7EBF;&#x7A0B;&#x6C60;&#x7EC4;&#x4EF6;</span><br><span class="line">// DispatcherExecutor&#x4E2D;&#x83B7;&#x53D6;&#x5230;&#x7528;&#x4E8E;&#x6267;&#x884C; IO &#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">DispatcherExecutor.getIOExecutor().execute(YourRunable());</span><br></pre></td></tr></table></figure>

<p>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#x4E5F;&#x6BD4;&#x8F83;&#x7B80;&#x5355;&#xFF0C;&#x5E76;&#x4E14;&#x6211;&#x5BF9;&#x6BCF;&#x4E00;&#x5904;&#x4EE3;&#x7801;&#x90FD;&#x8FDB;&#x884C;&#x4E86;&#x8BE6;&#x7EC6;&#x7684;&#x89E3;&#x91CA;&#xFF0C;&#x5C31;&#x4E0D;&#x4E00;&#x4E00;&#x5177;&#x4F53;&#x5206;&#x6790;&#x4E86;&#x3002;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;public class DispatcherExecutor {</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * CPU &#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">     */</span><br><span class="line">    private static ThreadPoolExecutor sCPUThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * IO &#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">     */</span><br><span class="line">    private static ExecutorService sIOThreadPoolExecutor;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x5F53;&#x524D;&#x8BBE;&#x5907;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684; CPU &#x6838;&#x6570;</span><br><span class="line">     */</span><br><span class="line">    private static final int CPU_COUNT = Runtime.getRuntime().availableProcessors();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x7EBF;&#x7A0B;&#x6C60;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#xFF0C;&#x5176;&#x6570;&#x91CF;&#x5728;2 ~ 5&#x8FD9;&#x4E2A;&#x533A;&#x57DF;&#x5185;</span><br><span class="line">     */</span><br><span class="line">    private static final int CORE_POOL_SIZE = Math.max(2, Math.min(CPU_COUNT - 1, 5));</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x7EBF;&#x7A0B;&#x6C60;&#x7EBF;&#x7A0B;&#x6570;&#x7684;&#x6700;&#x5927;&#x503C;&#xFF1A;&#x8FD9;&#x91CC;&#x6307;&#x5B9A;&#x4E3A;&#x4E86;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x7684;&#x5927;&#x5C0F;</span><br><span class="line">     */</span><br><span class="line">    private static final int MAXIMUM_POOL_SIZE = CORE_POOL_SIZE;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * &#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;&#x7A7A;&#x95F2;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#x5DE5;&#x4F5C;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x5F53;&#x7EBF;&#x7A0B;&#x6C60;&#x4E2D;</span><br><span class="line">    * &#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#x5927;&#x4E8E;corePoolSize&#xFF08;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#xFF09;&#x6216;</span><br><span class="line">    * &#x8BBE;&#x7F6E;&#x4E86;allowCoreThreadTimeOut&#xFF08;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x7A7A;&#x95F2;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x8D85;&#x65F6;&#xFF09;&#x65F6;&#xFF0C;</span><br><span class="line">    * &#x7EBF;&#x7A0B;&#x4F1A;&#x6839;&#x636E;keepAliveTime&#x7684;&#x503C;&#x8FDB;&#x884C;&#x6D3B;&#x6027;&#x68C0;&#x67E5;&#xFF0C;&#x4E00;&#x65E6;&#x8D85;&#x65F6;&#x4FBF;&#x9500;&#x6BC1;&#x7EBF;&#x7A0B;&#x3002;</span><br><span class="line">    * &#x5426;&#x5219;&#xFF0C;&#x7EBF;&#x7A0B;&#x4F1A;&#x6C38;&#x8FDC;&#x7B49;&#x5F85;&#x65B0;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</span><br><span class="line">    */</span><br><span class="line">    private static final int KEEP_ALIVE_SECONDS = 5;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">    * &#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x57FA;&#x4E8E;&#x94FE;&#x8868;&#x8282;&#x70B9;&#x7684;&#x963B;&#x585E;&#x961F;&#x5217;</span><br><span class="line">    */</span><br><span class="line">    private static final BlockingQueue&lt;Runnable&gt; S_POOL_WORK_QUEUE = new LinkedBlockingQueue&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x7EBF;&#x7A0B;&#x7684;&#x7EBF;&#x7A0B;&#x5DE5;&#x5382;</span><br><span class="line">     */</span><br><span class="line">    private static final DefaultThreadFactory S_THREAD_FACTORY = new DefaultThreadFactory();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x7EBF;&#x7A0B;&#x6C60;&#x6267;&#x884C;&#x8017;&#x65F6;&#x4EFB;&#x52A1;&#x65F6;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x6240;&#x9700;&#x8981;&#x505A;&#x7684;&#x62D2;&#x7EDD;&#x6267;&#x884C;&#x5904;&#x7406;</span><br><span class="line">     * &#x6CE8;&#x610F;&#xFF1A;&#x4E00;&#x822C;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x5230;&#x8FD9;&#x91CC;</span><br><span class="line">     */</span><br><span class="line">    private static final RejectedExecutionHandler S_HANDLER = new RejectedExecutionHandler() {</span><br><span class="line">        @Override</span><br><span class="line">        public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {</span><br><span class="line">            Executors.newCachedThreadPool().execute(r);</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x83B7;&#x53D6;CPU&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">     *</span><br><span class="line">     * @return CPU&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">     */</span><br><span class="line">    public static ThreadPoolExecutor getCPUExecutor() {</span><br><span class="line">        return sCPUThreadPoolExecutor;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x83B7;&#x53D6;IO&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">     *</span><br><span class="line">     * @return IO&#x7EBF;&#x7A0B;&#x6C60;</span><br><span class="line">     */</span><br><span class="line">    public static ExecutorService getIOExecutor() {</span><br><span class="line">        return sIOThreadPoolExecutor;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * &#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;&#x7EBF;&#x7A0B;&#x5DE5;&#x5382;</span><br><span class="line">     */</span><br><span class="line">    private static class DefaultThreadFactory implements ThreadFactory {</span><br><span class="line">        private static final AtomicInteger POOL_NUMBER = new AtomicInteger(1);</span><br><span class="line">        private final ThreadGroup group;</span><br><span class="line">        private final AtomicInteger threadNumber = new AtomicInteger(1);</span><br><span class="line">        private final String namePrefix;</span><br><span class="line"></span><br><span class="line">        DefaultThreadFactory() {</span><br><span class="line">            SecurityManager s = System.getSecurityManager();</span><br><span class="line">            group = (s != null) ? s.getThreadGroup() :</span><br><span class="line">                    Thread.currentThread().getThreadGroup();</span><br><span class="line">            namePrefix = &quot;TaskDispatcherPool-&quot; +</span><br><span class="line">                    POOL_NUMBER.getAndIncrement() +</span><br><span class="line">                    &quot;-Thread-&quot;;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public Thread newThread(Runnable r) {</span><br><span class="line">            // &#x6BCF;&#x4E00;&#x4E2A;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x7EBF;&#x7A0B;&#x90FD;&#x4F1A;&#x5206;&#x914D;&#x5230;&#x7EBF;&#x7A0B;&#x7EC4;group&#x5F53;&#x4E2D;</span><br><span class="line">            Thread t = new Thread(group, r,</span><br><span class="line">                    namePrefix + threadNumber.getAndIncrement(),</span><br><span class="line">                    0);</span><br><span class="line">            if (t.isDaemon()) {</span><br><span class="line">                // &#x975E;&#x5B88;&#x62A4;&#x7EBF;&#x7A0B;</span><br><span class="line">                t.setDaemon(false);</span><br><span class="line">            }</span><br><span class="line">            // &#x8BBE;&#x7F6E;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;</span><br><span class="line">            if (t.getPriority() != Thread.NORM_PRIORITY) {</span><br><span class="line">                t.setPriority(Thread.NORM_PRIORITY);</span><br><span class="line">            }</span><br><span class="line">            return t;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    static {</span><br><span class="line">        sCPUThreadPoolExecutor = new ThreadPoolExecutor(</span><br><span class="line">                CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE_SECONDS, TimeUnit.SECONDS,</span><br><span class="line">                S_POOL_WORK_QUEUE, S_THREAD_FACTORY, S_HANDLER);</span><br><span class="line">        // &#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x5141;&#x8BB8;&#x7A7A;&#x95F2;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x8D85;&#x65F6;&#x65F6;&#xFF0C;&#x7EBF;&#x7A0B;&#x4F1A;&#x6839;&#x636E;keepAliveTime&#x7684;&#x503C;&#x8FDB;&#x884C;&#x6D3B;&#x6027;&#x68C0;&#x67E5;&#xFF0C;&#x4E00;&#x65E6;&#x8D85;&#x65F6;&#x4FBF;&#x9500;&#x6BC1;&#x7EBF;&#x7A0B;&#x3002;&#x5426;&#x5219;&#xFF0C;&#x7EBF;&#x7A0B;&#x4F1A;&#x6C38;&#x8FDC;&#x7B49;&#x5F85;&#x65B0;&#x7684;&#x5DE5;&#x4F5C;&#x3002;</span><br><span class="line">        sCPUThreadPoolExecutor.allowCoreThreadTimeOut(true);</span><br><span class="line">        // IO&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x7EBF;&#x7A0B;&#x6C60;&#x76F4;&#x63A5;&#x91C7;&#x7528;CachedThreadPool&#x6765;&#x5B9E;&#x73B0;&#xFF0C;</span><br><span class="line">        // &#x5B83;&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x5206;&#x914D;Integer.MAX_VALUE&#x4E2A;&#x975E;&#x6838;&#x5FC3;&#x7EBF;&#x7A0B;&#x7528;&#x6765;&#x6267;&#x884C;&#x4EFB;&#x52A1;</span><br><span class="line">        sIOThreadPoolExecutor = Executors.newCachedThreadPool(S_THREAD_FACTORY);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<h3 id="6&#x3001;&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x6838;&#x5FC3;&#x95EE;&#x9898;"><a href="#6&#x3001;&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x6838;&#x5FC3;&#x95EE;&#x9898;" class="headerlink" title="6&#x3001;&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x6838;&#x5FC3;&#x95EE;&#x9898;"></a>6&#x3001;&#x7EBF;&#x7A0B;&#x4F18;&#x5316;&#x6838;&#x5FC3;&#x95EE;&#x9898;</h3><h4 id="1&#x3001;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#xFF1F;"><a href="#1&#x3001;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#xFF1F;" class="headerlink" title="1&#x3001;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#xFF1F;"></a>1&#x3001;&#x7EBF;&#x7A0B;&#x4F7F;&#x7528;&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x9047;&#x5230;&#x95EE;&#x9898;&#xFF1F;</h4><p>&#x9879;&#x76EE;&#x53D1;&#x5C55;&#x9636;&#x6BB5;&#x5FFD;&#x89C6;&#x57FA;&#x7840;&#x8BBE;&#x65BD;&#x5EFA;&#x8BBE;&#xFF0C;&#x6CA1;&#x6709;&#x91C7;&#x7528;&#x7EDF;&#x4E00;&#x7684;&#x7EBF;&#x7A0B;&#x6C60;&#xFF0C;&#x5BFC;&#x81F4;&#x7EBF;&#x7A0B;&#x6570;&#x91CF;&#x8FC7;&#x591A;&#x3002;</p>
<h5 id="&#x8868;&#x73B0;&#x5F62;&#x5F0F;"><a href="#&#x8868;&#x73B0;&#x5F62;&#x5F0F;" class="headerlink" title="&#x8868;&#x73B0;&#x5F62;&#x5F0F;"></a>&#x8868;&#x73B0;&#x5F62;&#x5F0F;</h5><p>&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x592A;&#x8017;&#x65F6;&#xFF0C;&#x5BFC;&#x81F4;&#x4E3B;&#x7EBF;&#x7A0B;&#x5361;&#x987F;&#x3002;</p>
<h5 id="&#x95EE;&#x9898;&#x539F;&#x56E0;"><a href="#&#x95EE;&#x9898;&#x539F;&#x56E0;" class="headerlink" title="&#x95EE;&#x9898;&#x539F;&#x56E0;"></a>&#x95EE;&#x9898;&#x539F;&#x56E0;</h5><ul>
<li><strong>1&#x3001;Java&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x662F;&#x62A2;&#x5360;&#x5F0F;&#x7684;&#xFF0C;&#x7EBF;&#x7A0B;&#x4F18;&#x5148;&#x7EA7;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#xFF0C;&#x9700;&#x8981;&#x533A;&#x5206;</strong>&#x3002;</li>
<li><strong>2&#x3001;&#x6CA1;&#x6709;&#x533A;&#x5206;IO&#x548C;CPU&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#xFF0C;&#x5BFC;&#x81F4;&#x4E3B;&#x7EBF;&#x7A0B;&#x62A2;&#x4E0D;&#x5230;CPU</strong>&#x3002;</li>
</ul>
<h4 id="2&#x3001;&#x600E;&#x4E48;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF1F;"><a href="#2&#x3001;&#x600E;&#x4E48;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF1F;" class="headerlink" title="2&#x3001;&#x600E;&#x4E48;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF1F;"></a>2&#x3001;&#x600E;&#x4E48;&#x5728;&#x9879;&#x76EE;&#x4E2D;&#x5BF9;&#x7EBF;&#x7A0B;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF1F;</h4><h5 id="&#x6838;&#x5FC3;&#xFF1A;&#x7EBF;&#x7A0B;&#x6536;&#x655B;"><a href="#&#x6838;&#x5FC3;&#xFF1A;&#x7EBF;&#x7A0B;&#x6536;&#x655B;" class="headerlink" title="&#x6838;&#x5FC3;&#xFF1A;&#x7EBF;&#x7A0B;&#x6536;&#x655B;"></a>&#x6838;&#x5FC3;&#xFF1A;&#x7EBF;&#x7A0B;&#x6536;&#x655B;</h5><ul>
<li><strong>&#x901A;&#x8FC7;Hook&#x65B9;&#x5F0F;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7EBF;&#x7A0B;&#x7684;&#x5806;&#x6808;&#x4FE1;&#x606F;&#xFF0C;&#x548C;&#x4E1A;&#x52A1;&#x65B9;&#x8BA8;&#x8BBA;&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x5355;&#x72EC;&#x8D77;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x5C3D;&#x53EF;&#x80FD;&#x4F7F;&#x7528;&#x7EDF;&#x4E00;&#x7EBF;&#x7A0B;&#x6C60;</strong>&#x3002;</li>
<li><strong>&#x6BCF;&#x4E2A;&#x57FA;&#x7840;&#x5E93;&#x90FD;&#x66B4;&#x9732;&#x4E00;&#x4E2A;&#x8BBE;&#x7F6E;&#x7EBF;&#x7A0B;&#x6C60;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x7EBF;&#x7A0B;&#x5E93;&#x66F4;&#x65B0;&#x5BFC;&#x81F4;&#x57FA;&#x7840;&#x5E93;&#x9700;&#x8981;&#x66F4;&#x65B0;&#x7684;&#x95EE;&#x9898;</strong>&#x3002;</li>
<li><strong>&#x7EDF;&#x4E00;&#x7EBF;&#x7A0B;&#x6C60;&#x5E94;&#x6CE8;&#x610F;IO&#x3001;CPU&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;&#x533A;&#x5206;</strong>&#x3002;</li>
<li>&#x5176;&#x5B83;&#x7EC6;&#x8282;&#xFF1A;<strong>&#x91CD;&#x8981;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7EDF;&#x8BA1;&#x8017;&#x65F6;&#x3001;&#x6CE8;&#x91CD;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x4F18;&#x5148;&#x7EA7;&#x548C;&#x7EBF;&#x7A0B;&#x540D;&#x7684;&#x8BBE;&#x7F6E;</strong>&#x3002;</li>
</ul>
<h2 id="4&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;"><a href="#4&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;" class="headerlink" title="4&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;"></a>4&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;</h2><h3 id="1&#x3001;&#x6838;&#x5FC3;&#x601D;&#x60F3;"><a href="#1&#x3001;&#x6838;&#x5FC3;&#x601D;&#x60F3;" class="headerlink" title="1&#x3001;&#x6838;&#x5FC3;&#x601D;&#x60F3;"></a>1&#x3001;&#x6838;&#x5FC3;&#x601D;&#x60F3;</h3><p>&#x5B50;&#x7EBF;&#x7A0B;&#x5206;&#x62C5;&#x4E3B;&#x7EBF;&#x7A0B;&#x4EFB;&#x52A1;&#xFF0C;&#x5E76;&#x884C;&#x51CF;&#x5C11;&#x65F6;&#x95F4;&#x3002;</p>
<h3 id="2&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6CE8;&#x610F;&#x70B9;"><a href="#2&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6CE8;&#x610F;&#x70B9;" class="headerlink" title="2&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6CE8;&#x610F;&#x70B9;"></a>2&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6CE8;&#x610F;&#x70B9;</h3><ul>
<li>1&#x3001;<strong>&#x4E0D;&#x7B26;&#x5408;&#x5F02;&#x6B65;&#x8981;&#x6C42;</strong>&#x3002;</li>
<li>2&#x3001;<strong>&#x9700;&#x8981;&#x5728;&#x67D0;&#x4E2A;&#x9636;&#x6BB5;&#x5B8C;&#x6210;&#xFF08;&#x91C7;&#x7528;CountDownLatch&#x786E;&#x4FDD;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x5B8C;&#x6210;&#x540E;&#x624D;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x9636;&#x6BB5;&#xFF09;</strong>&#x3002;</li>
<li>3&#x3001;<strong>&#x5982;&#x51FA;&#x73B0;&#x4E3B;&#x7EBF;&#x7A0B;&#x8981;&#x4F7F;&#x7528;&#x65F6;&#x8FD8;&#x6CA1;&#x521D;&#x59CB;&#x5316;&#x5219;&#x5728;&#x6B64;&#x6B21;&#x4F7F;&#x7528;&#x524D;&#x521D;&#x59CB;&#x5316;</strong>&#x3002;</li>
<li>4&#x3001;<strong>&#x533A;&#x5206;CPU&#x5BC6;&#x96C6;&#x578B;&#x548C;IO&#x5BC6;&#x96C6;&#x578B;&#x4EFB;&#x52A1;</strong>&#x3002;</li>
</ul>
<h3 id="3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6848;&#x6F14;&#x8FDB;"><a href="#3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6848;&#x6F14;&#x8FDB;" class="headerlink" title="3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6848;&#x6F14;&#x8FDB;"></a>3&#x3001;&#x5F02;&#x6B65;&#x521D;&#x59CB;&#x5316;&#x65B9;&#x6848;&#x6F14;&#x8FDB;</h3><ul>
<li>1&#x3001;new Thread</li>
<li>2&#x3001;IntentService</li>
<li>3&#x3001;&#x7EBF;&#x7A0B;&#x6C60;&#xFF08;&#x5408;&#x7406;&#x914D;&#x7F6E;&#x5E76;&#x9009;&#x62E9;CPU&#x5BC6;&#x96C6;&#x578B;&#x548C;IO&#x5BC6;&#x96C6;&#x578B;&#x7EBF;&#x7A0B;&#x6C60;&#xFF09;</li>
<li>4&#x3001;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;</li>
</ul>
<h3 id="4&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;"><a href="#4&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;" class="headerlink" title="4&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;"></a>4&#x3001;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;</h3><p><a href="/external_links/fe914161f036365e6ff49c6c3b8eeca9.html" target="blank" rel="noopener">&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x6E90;&#x7801;&#x53CA;&#x4F7F;&#x7528;demo&#x5730;&#x5740;</a></p>
<h4 id="&#x5E38;&#x89C4;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x75DB;&#x70B9;"><a href="#&#x5E38;&#x89C4;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x75DB;&#x70B9;" class="headerlink" title="&#x5E38;&#x89C4;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x75DB;&#x70B9;"></a>&#x5E38;&#x89C4;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#x75DB;&#x70B9;</h4><ul>
<li>1&#x3001;&#x4EE3;&#x7801;&#x4E0D;&#x4F18;&#x96C5;&#xFF1A;&#x4F8B;&#x5982;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#x5B9E;&#x73B0;&#x591A;&#x4E2A;&#x5E76;&#x884C;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x65F6;&#x4F1A;&#x6709;&#x591A;&#x4E2A;executorService.submit&#x4EE3;&#x7801;&#x5757;&#x3002;</li>
<li>2&#x3001;&#x573A;&#x666F;&#x4E0D;&#x597D;&#x5904;&#x7406;&#xFF1A;&#x5404;&#x4E2A;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x4F8B;&#x5982;&#x63A8;&#x9001;sdk&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x4E8E;&#x83B7;&#x53D6;&#x8BBE;&#x5907;id&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6709;&#x4E9B;&#x4EFB;&#x52A1;&#x662F;&#x9700;&#x8981;&#x5728;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x7684;&#x65F6;&#x5019;&#x5C31;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#xFF0C;&#x4F8B;&#x5982;&#x9700;&#x8981;&#x5728;Application&#x7684;onCreate&#x65B9;&#x6CD5;&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x524D;&#x5C31;&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#x3002;</li>
<li>3&#x3001;&#x7EF4;&#x62A4;&#x6210;&#x672C;&#x9AD8;&#x3002;</li>
</ul>
<h4 id="&#x542F;&#x52A8;&#x5668;&#x6838;&#x5FC3;&#x601D;&#x60F3;"><a href="#&#x542F;&#x52A8;&#x5668;&#x6838;&#x5FC3;&#x601D;&#x60F3;" class="headerlink" title="&#x542F;&#x52A8;&#x5668;&#x6838;&#x5FC3;&#x601D;&#x60F3;"></a>&#x542F;&#x52A8;&#x5668;&#x6838;&#x5FC3;&#x601D;&#x60F3;</h4><p><strong>&#x5145;&#x5206;</strong>&#x5229;&#x7528;CPU&#x591A;&#x6838;&#xFF0C;<strong>&#x81EA;&#x52A8;</strong>&#x68B3;&#x7406;&#x4EFB;&#x52A1;&#x987A;&#x5E8F;&#x3002;</p>
<h4 id="&#x542F;&#x52A8;&#x5668;&#x6D41;&#x7A0B;"><a href="#&#x542F;&#x52A8;&#x5668;&#x6D41;&#x7A0B;" class="headerlink" title="&#x542F;&#x52A8;&#x5668;&#x6D41;&#x7A0B;"></a>&#x542F;&#x52A8;&#x5668;&#x6D41;&#x7A0B;</h4><p>&#x542F;&#x52A8;&#x5668;&#x7684;&#x6D41;&#x7A0B;&#x56FE;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<p><img src="//p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/99f1b02f4b9c471f9d0bfc7315b5f741~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp" alt="image"></p>
<p>&#x542F;&#x52A8;&#x5668;&#x7684;&#x4E3B;&#x9898;&#x6D41;&#x7A0B;&#x4E3A;&#x4E0A;&#x56FE;&#x4E2D;&#x7684;&#x4E2D;&#x95F4;&#x533A;&#x57DF;&#xFF0C;&#x5373;<strong>&#x4E3B;&#x7EBF;&#x7A0B;&#x4E0E;&#x5E76;&#x53D1;&#x4E24;&#x4E2A;&#x533A;&#x57DF;&#x5757;</strong>&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x5728;&#x4E0A;&#x56FE;&#x4E2D;&#x7684; <strong>head task&#x4E0E;tail task</strong> &#x5E76;&#x4E0D;&#x5305;&#x542B;&#x5728;&#x542F;&#x52A8;&#x5668;&#x7684;&#x4E3B;&#x9898;&#x6D41;&#x7A0B;&#x4E2D;&#xFF0C;&#x5B83;&#x4EC5;&#x4EC5;&#x662F;&#x7528;&#x4E8E;<strong>&#x5904;&#x7406;&#x542F;&#x52A8;&#x524D;/&#x542F;&#x52A8;&#x540E;&#x7684;&#x4E00;&#x4E9B;&#x901A;&#x7528;&#x4EFB;&#x52A1;</strong>&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;head task&#x4E2D;&#x505A;&#x4E00;&#x4E9B;&#x83B7;&#x53D6;&#x901A;&#x7528;&#x4FE1;&#x606F;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5728;tail task&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x4E9B;log&#x8F93;&#x51FA;&#x3001;&#x6570;&#x636E;&#x4E0A;&#x62A5;&#x7B49;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x90A3;&#x4E48;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x603B;&#x7ED3;&#x4E00;&#x4E0B;&#x542F;&#x52A8;&#x7684;&#x6838;&#x5FC3;&#x6D41;&#x7A0B;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<ul>
<li>1&#x3001;<strong>&#x4EFB;&#x52A1;Task&#x5316;&#xFF0C;&#x542F;&#x52A8;&#x903B;&#x8F91;&#x62BD;&#x8C61;&#x6210;Task</strong>&#xFF08;Task&#x5373;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x4E2A;&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#xFF09;&#x3002;</li>
<li>2&#x3001;<strong>&#x6839;&#x636E;&#x6240;&#x6709;&#x4EFB;&#x52A1;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x6392;&#x5E8F;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6709;&#x5411;&#x65E0;&#x73AF;&#x56FE;</strong>&#xFF1A;&#x4F8B;&#x5982;&#x4E0A;&#x8FF0;&#x8BF4;&#x5230;&#x7684;&#x63A8;&#x9001;SDK&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x4E8E;&#x83B7;&#x53D6;&#x8BBE;&#x5907;id&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#xFF0C;&#x5404;&#x4E2A;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x90FD;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x6240;&#x4EE5;&#x5C06;&#x5B83;&#x4EEC;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x6392;&#x5E8F;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6709;&#x5411;&#x65E0;&#x73AF;&#x56FE;&#x80FD;&#x5C06;<strong>&#x5E76;&#x884C;&#x6548;&#x7387;&#x6700;&#x5927;&#x5316;</strong>&#x3002;</li>
<li>3&#x3001;<strong>&#x591A;&#x7EBF;&#x7A0B;&#x6309;&#x7167;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x4F9D;&#x6B21;&#x6267;&#x884C;</strong>&#xFF1A;&#x4F8B;&#x5982;&#x5FC5;&#x987B;&#x5148;&#x521D;&#x59CB;&#x5316;&#x83B7;&#x53D6;&#x8BBE;&#x5907;id&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#xFF0C;&#x624D;&#x80FD;&#x53BB;&#x8FDB;&#x884C;&#x63A8;&#x9001;SDK&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x3002;</li>
</ul>
<h4 id="&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;"><a href="#&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;" class="headerlink" title="&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;"></a>&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;</h4><p>&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x6765;&#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x6765;&#x5728;Application&#x7684;onCreate&#x65B9;&#x6CD5;&#x4E2D;&#x8FDB;&#x884C;&#x5F02;&#x6B65;&#x4F18;&#x5316;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;// 1&#x3001;&#x542F;&#x52A8;&#x5668;&#x521D;&#x59CB;&#x5316;</span><br><span class="line">TaskDispatcher.init(this);</span><br><span class="line">// 2&#x3001;&#x521B;&#x5EFA;&#x542F;&#x52A8;&#x5668;&#x5B9E;&#x4F8B;&#xFF0C;&#x8FD9;&#x91CC;&#x6BCF;&#x6B21;&#x83B7;&#x53D6;&#x7684;&#x90FD;&#x662F;&#x65B0;&#x5BF9;&#x8C61;</span><br><span class="line">TaskDispatcher dispatcher = TaskDispatcher.createInstance();</span><br><span class="line">// 3&#x3001;&#x7ED9;&#x542F;&#x52A8;&#x5668;&#x914D;&#x7F6E;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#xFF08;&#x5F02;&#x6B65;/&#x975E;&#x5F02;&#x6B65;&#xFF09;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x5E76;&#x542F;&#x52A8;&#x542F;&#x52A8;&#x5668;</span><br><span class="line">dispatcher</span><br><span class="line">        .addTask(new InitAMapTask())</span><br><span class="line">        .addTask(new InitStethoTask())</span><br><span class="line">        .addTask(new InitWeexTask())</span><br><span class="line">        .addTask(new InitBuglyTask())</span><br><span class="line">        .addTask(new InitFrescoTask())</span><br><span class="line">        .addTask(new InitJPushTask())</span><br><span class="line">        .addTask(new InitUmengTask())</span><br><span class="line">        .addTask(new GetDeviceIdTask())</span><br><span class="line">        .start();</span><br><span class="line">        </span><br><span class="line">// 4&#x3001;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5FAE;&#x4FE1;SDK&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#xFF0C;&#x7A0B;&#x5E8F;&#x624D;&#x80FD;&#x5F80;&#x4E0B;&#x6267;&#x884C;</span><br><span class="line">dispatcher.await();</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x7684; <strong>TaskDispatcher</strong> &#x5C31;&#x662F;&#x6211;&#x4EEC;&#x7684;<strong>&#x542F;&#x52A8;&#x5668;&#x8C03;&#x7528;&#x7C7B;</strong>&#x3002;&#x9996;&#x5148;&#xFF0C;&#x5728;&#x6CE8;&#x91CA;1&#x5904;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5148;&#x8C03;&#x7528;TaskDispatcher&#x7684;init&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x542F;&#x52A8;&#x5668;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x5176;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ini&#x590D;&#x5236;&#x4EE3;&#x7801;public static void init(Context context) {</span><br><span class="line">    if (context != null) {</span><br><span class="line">        sContext = context;</span><br><span class="line">        sHasInit = true;</span><br><span class="line">        sIsMainProcess = Utils.isMainProcess(sContext);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x521D;&#x59CB;&#x5316;&#x4E86;&#x51E0;&#x4E2A;&#x57FA;&#x7840;&#x5B57;&#x6BB5;&#x3002;&#x63A5;&#x7740;&#xFF0C;&#x5728;&#x6CE8;&#x91CA;2&#x5904;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x542F;&#x52A8;&#x5668;&#x5B9E;&#x4F8B;&#xFF0C;&#x5176;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x83B7;&#x53D6;&#x7684;&#x90FD;&#x662F;&#x65B0;&#x5BF9;&#x8C61;</span><br><span class="line"> */</span><br><span class="line">public static TaskDispatcher createInstance() {</span><br><span class="line">    if (!sHasInit) {</span><br><span class="line">        throw new RuntimeException(&quot;must call TaskDispatcher.init    first&quot;);</span><br><span class="line">    }</span><br><span class="line">    return new TaskDispatcher();</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;createInstance&#x65B9;&#x6CD5;&#x7684;&#x4E2D;&#x6211;&#x4EEC;&#x6BCF;&#x6B21;&#x90FD;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;TaskDispatcher&#x5B9E;&#x4F8B;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5728;&#x6CE8;&#x91CA;3&#x5904;&#xFF0C;&#x6211;&#x4EEC;&#x7ED9;&#x542F;&#x52A8;&#x5668;&#x914D;&#x7F6E;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EFB;&#x52A1;&#x5E76;&#x542F;&#x52A8;&#x542F;&#x52A8;&#x5668;&#xFF0C;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;<strong>&#x8FD9;&#x91CC;&#x7684;Task&#x65E2;&#x53EF;&#x4EE5;&#x662F;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#xFF08;&#x5B50;&#x7EBF;&#x7A0B;&#xFF09;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x7528;&#x4E8E;&#x6267;&#x884C;&#x975E;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#xFF08;&#x4E3B;&#x7EBF;&#x7A0B;&#xFF09;</strong>&#x3002;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x6765;&#x5206;&#x6790;&#x4E0B;&#x8FD9;&#x4E24;&#x79CD;Task&#x7684;&#x7528;&#x6CD5;&#xFF0C;&#x6BD4;&#x5982;InitStethoTask&#x8FD9;&#x4E2A;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7684;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scala&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x5F02;&#x6B65;&#x7684;Task</span><br><span class="line">*/</span><br><span class="line">public class InitStethoTask extends Task {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() {</span><br><span class="line">        Stetho.initializeWithDefaults(mContext);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x91CC;&#x7684;InitStethoTask&#x76F4;&#x63A5;&#x7EE7;&#x627F;&#x81EA;Task&#xFF0C;Task&#x4E2D;&#x7684;runOnMainThread&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E3A;false&#xFF0C;&#x8BF4;&#x660E; <strong>task</strong> &#x662F;&#x7528;&#x4E8E;<strong>&#x5904;&#x7406;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7684;task</strong>&#xFF0C;&#x5176;&#x4E2D;&#x7684;run&#x65B9;&#x6CD5;&#x5C31;&#x662F;Runnable&#x7684;run&#x65B9;&#x6CD5;&#x3002;&#x4E0B;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x770B;&#x53E6;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x521D;&#x59CB;&#x5316;&#x975E;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7684;&#x4F8B;&#x5B50;&#xFF0C;&#x4F8B;&#x5982;&#x7528;&#x4E8E;&#x5FAE;&#x4FE1;SDK&#x521D;&#x59CB;&#x5316;&#x7684;InitWeexTask&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">scala&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">* &#x4E3B;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#x7684;task</span><br><span class="line">*/</span><br><span class="line">public class InitWeexTask extends MainTask {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean needWait() {</span><br><span class="line">        return true;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() {</span><br><span class="line">        InitConfig config = new InitConfig.Builder().build();</span><br><span class="line">        WXSDKEngine.initialize((Application) mContext, config);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5B83;&#x76F4;&#x63A5;&#x7EE7;&#x627F;&#x4E86;MainTask&#xFF0C;MainTask&#x7684;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scala&#x590D;&#x5236;&#x4EE3;&#x7801;public abstract class MainTask extends Task {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean runOnMainThread() {</span><br><span class="line">        return true;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p><strong>MainTask</strong> &#x76F4;&#x63A5;&#x7EE7;&#x627F;&#x4E86;Task&#xFF0C;&#x5E76;&#x4EC5;&#x4EC5;&#x662F;&#x91CD;&#x5199;&#x4E86;runOnMainThread&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E86;true&#xFF0C;&#x8BF4;&#x660E;&#x5B83;&#x5C31;&#x662F;&#x7528;&#x6765;<strong>&#x521D;&#x59CB;&#x5316;&#x4E3B;&#x7EBF;&#x7A0B;&#x4E2D;&#x7684;&#x975E;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7684;</strong>&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x6CE8;&#x610F;&#x5230;InitWeexTask&#x4E2D;&#x8FD8;&#x91CD;&#x5199;&#x4E86;&#x4E00;&#x4E2A;needWait&#x65B9;&#x6CD5;&#x5E76;&#x8FD4;&#x56DE;&#x4E86;true&#xFF0C;<strong>&#x5176;&#x76EE;&#x7684;&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x67D0;&#x4E2A;&#x65F6;&#x523B;&#x4E4B;&#x524D;&#x5FC5;&#x987B;&#x7B49;&#x5F85;InitWeexTask&#x521D;&#x59CB;&#x5316;&#x5B8C;&#x6210;&#x7A0B;&#x5E8F;&#x624D;&#x80FD;&#x7EE7;&#x7EED;&#x5F80;&#x4E0B;&#x6267;&#x884C;</strong>&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x67D0;&#x4E2A;&#x65F6;&#x523B;&#x6307;&#x7684;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x5728;Application&#x7684;onCreate&#x65B9;&#x6CD5;&#x4E2D;&#x7684;&#x6CE8;&#x91CA;4&#x5904;&#x7684;&#x4EE3;&#x7801;&#x6240;&#x6267;&#x884C;&#x7684;&#x5730;&#x65B9;&#xFF1A;dispatcher.await()&#xFF0C;&#x5176;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">csharp&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x6570;</span><br><span class="line"> */</span><br><span class="line">private AtomicInteger mNeedWaitCount = new AtomicInteger();</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * &#x8C03;&#x7528;&#x4E86; await &#x8FD8;&#x6CA1;&#x7ED3;&#x675F;&#x4E14;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x5217;&#x8868;</span><br><span class="line"> */</span><br><span class="line">private List&lt;Task&gt; mNeedWaitTasks = new ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">private CountDownLatch mCountDownLatch;</span><br><span class="line"></span><br><span class="line">private static final int WAITTIME = 10000;</span><br><span class="line"></span><br><span class="line">@UiThread</span><br><span class="line">public void await() {</span><br><span class="line">    try {</span><br><span class="line">        // 1&#x3001;&#x4EC5;&#x4EC5;&#x5728;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x624D;&#x8F93;&#x51FA;&#x9700;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x5217;&#x8868;&#x6570;&#x4E0E;&#x4EFB;&#x52A1;&#x540D;&#x79F0;</span><br><span class="line">        if (DispatcherLog.isDebug()) {</span><br><span class="line">            DispatcherLog.i(&quot;still has &quot; + mNeedWaitCount.get());</span><br><span class="line">            for (Task task : mNeedWaitTasks) {</span><br><span class="line">                DispatcherLog.i(&quot;needWait: &quot; + task.getClass().getSimpleName());</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        // 2&#x3001;&#x53EA;&#x8981;&#x8FD8;&#x6709;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x5B8C;&#x6210;&#xFF0C;&#x5C31;&#x8C03;&#x7528;mCountDownLatch&#x7684;await&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7B49;&#x5F85;&#xFF0C;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8BBE;&#x5B9A;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4E3A;10s</span><br><span class="line">        if (mNeedWaitCount.get() &gt; 0) {</span><br><span class="line">            if (mCountDownLatch == null) {</span><br><span class="line">                throw new RuntimeException(&quot;You have to call start() before call await()&quot;);</span><br><span class="line">            }</span><br><span class="line">            mCountDownLatch.await(WAITTIME, TimeUnit.MILLISECONDS);</span><br><span class="line">        }</span><br><span class="line">    } catch (InterruptedException e) {</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x9996;&#x5148;&#xFF0C;&#x5728;&#x6CE8;&#x91CA;1&#x5904;&#xFF0C;&#x6211;&#x4EEC;&#x4EC5;&#x4EC5;&#x53EA;&#x4F1A;&#x5728;&#x6D4B;&#x8BD5;&#x9636;&#x6BB5;&#x624D;&#x4F1A;&#x8F93;&#x51FA;&#x9700;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x5217;&#x8868;&#x6570;&#x4E0E;&#x4EFB;&#x52A1;&#x540D;&#x79F0;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5728;&#x6CE8;&#x91CA;2&#x5904;&#xFF0C;&#x53EA;&#x8981;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x6570;mNeedWaitCount&#x5927;&#x4E8E;0&#xFF0C;&#x5373;&#x53EA;&#x8981;&#x8FD8;&#x6709;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x7684;&#x4EFB;&#x52A1;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x5B8C;&#x6210;&#xFF0C;&#x5C31;&#x8C03;&#x7528;mCountDownLatch&#x7684;await&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x7B49;&#x5F85;&#xFF0C;&#x6CE8;&#x610F;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x8BBE;&#x5B9A;&#x4E86;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x4E3A;10s&#x3002;&#x5F53;&#x4E00;&#x4E2A;<strong>task&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;</strong>&#xFF0C;&#x65E0;&#x8BBA;&#x5B83;&#x662F;&#x5F02;&#x6B65;&#x8FD8;&#x662F;&#x975E;&#x5F02;&#x6B65;&#x7684;&#xFF0C;&#x6700;&#x7EC8;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#x5230;<strong>mTaskDispatcher&#x7684;markTaskDone(mTask)&#x65B9;&#x6CD5;</strong>&#xFF0C;&#x6211;&#x4EEC;&#x770B;&#x770B;&#x5B83;&#x7684;&#x5B9E;&#x73B0;&#x6E90;&#x7801;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">arduino&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">* &#x5DF2;&#x7ECF;&#x7ED3;&#x675F;&#x7684;Task</span><br><span class="line">*/</span><br><span class="line">private volatile List&lt;Class&lt;? extends Task&gt;&gt; mFinishedTasks = new ArrayList&lt;&gt;(100);</span><br><span class="line"></span><br><span class="line">public void markTaskDone(Task task) {</span><br><span class="line">    if (ifNeedWait(task)) {</span><br><span class="line">        mFinishedTasks.add(task.getClass());</span><br><span class="line">        mNeedWaitTasks.remove(task);</span><br><span class="line">        mCountDownLatch.countDown();</span><br><span class="line">        mNeedWaitCount.getAndDecrement();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x8FD9;&#x91CC;&#x6BCF;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x4E00;&#x4E2A;task&#xFF0C;&#x5C31;&#x4F1A;&#x5C06;mCountDownLatch&#x7684;&#x9501;&#x8BA1;&#x6570;&#x51CF;1&#xFF0C;&#x4E0E;&#x6B64;&#x540C;&#x65F6;&#xFF0C;&#x4E5F;&#x4F1A;&#x5C06;&#x6211;&#x4EEC;&#x7684;mNeedWaitCount&#x8FD9;&#x4E2A;&#x539F;&#x5B50;&#x6574;&#x6570;&#x5305;&#x88C5;&#x7C7B;&#x7684;&#x6570;&#x91CF;&#x51CF;1&#x3002;</p>
<p>&#x6B64;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x524D;&#x9762;&#x8BF4;&#x5230;&#x4E86;&#x542F;&#x52A8;&#x5668;&#x5C06;&#x5404;&#x4E2A;&#x4EFB;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x62BD;&#x8C61;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x6709;&#x5411;&#x65E0;&#x73AF;&#x56FE;&#xFF0C;&#x5728;&#x4E0A;&#x9762;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x521D;&#x59CB;&#x5316;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;InitJPushTask&#x662F;&#x9700;&#x8981;&#x4F9D;&#x8D56;&#x4E8E;GetDeviceIdTask&#x7684;&#xFF0C;<strong>&#x90A3;&#x4E48;&#xFF0C;&#x6211;&#x4EEC;&#x600E;&#x4E48;&#x544A;&#x8BC9;&#x542F;&#x52A8;&#x5668;&#x5B83;&#x4EEC;&#x4E24;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5462;</strong>&#xFF1F;</p>
<p>&#x8FD9;&#x91CC;&#x53EA;&#x9700;&#x8981;&#x5728;InitJPushTask&#x4E2D;<strong>&#x91CD;&#x5199;dependsOn()&#x65B9;&#x6CD5;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x5305;&#x542B;GetDeviceIdTask&#x7684;task&#x5217;&#x8868;&#x5373;&#x53EF;</strong>&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">scala&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line">* InitJPushTask &#x9700;&#x8981;&#x5728; getDeviceId &#x4E4B;&#x540E;&#x6267;&#x884C;</span><br><span class="line">*/</span><br><span class="line">public class InitJPushTask extends Task {</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public List&lt;Class&lt;? extends Task&gt;&gt; dependsOn() {</span><br><span class="line">        List&lt;Class&lt;? extends Task&gt;&gt; task = new ArrayList&lt;&gt;();</span><br><span class="line">        task.add(GetDeviceIdTask.class);</span><br><span class="line">        return task;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() {</span><br><span class="line">        JPushInterface.init(mContext);</span><br><span class="line">        MyApplication app = (MyApplication) mContext;</span><br><span class="line">        JPushInterface.setAlias(mContext, 0, app.getDeviceId());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x81F3;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x5C31;&#x5206;&#x6790;&#x5B8C;&#x6BD5;&#x4E86;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x5982;&#x4F55;&#x9AD8;&#x6548;&#x5730;&#x8FDB;&#x884C;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<h2 id="5&#x3001;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;"><a href="#5&#x3001;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;" class="headerlink" title="5&#x3001;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;"></a>5&#x3001;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;</h2><h3 id="1&#x3001;&#x5E38;&#x89C4;&#x65B9;&#x6848;&#xFF1A;&#x5229;&#x7528;&#x95EA;&#x5C4F;&#x9875;&#x7684;&#x505C;&#x7559;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x90E8;&#x5206;&#x521D;&#x59CB;&#x5316;"><a href="#1&#x3001;&#x5E38;&#x89C4;&#x65B9;&#x6848;&#xFF1A;&#x5229;&#x7528;&#x95EA;&#x5C4F;&#x9875;&#x7684;&#x505C;&#x7559;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x90E8;&#x5206;&#x521D;&#x59CB;&#x5316;" class="headerlink" title="1&#x3001;&#x5E38;&#x89C4;&#x65B9;&#x6848;&#xFF1A;&#x5229;&#x7528;&#x95EA;&#x5C4F;&#x9875;&#x7684;&#x505C;&#x7559;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x90E8;&#x5206;&#x521D;&#x59CB;&#x5316;"></a>1&#x3001;&#x5E38;&#x89C4;&#x65B9;&#x6848;&#xFF1A;&#x5229;&#x7528;&#x95EA;&#x5C4F;&#x9875;&#x7684;&#x505C;&#x7559;&#x65F6;&#x95F4;&#x8FDB;&#x884C;&#x90E8;&#x5206;&#x521D;&#x59CB;&#x5316;</h3><ul>
<li>new Handler().postDelayed()&#x3002;</li>
<li>&#x754C;&#x9762;UI&#x5C55;&#x793A;&#x540E;&#x8C03;&#x7528;&#x3002;</li>
</ul>
<h3 id="2&#x3001;&#x5E38;&#x89C4;&#x521D;&#x59CB;&#x5316;&#x75DB;&#x70B9;"><a href="#2&#x3001;&#x5E38;&#x89C4;&#x521D;&#x59CB;&#x5316;&#x75DB;&#x70B9;" class="headerlink" title="2&#x3001;&#x5E38;&#x89C4;&#x521D;&#x59CB;&#x5316;&#x75DB;&#x70B9;"></a>2&#x3001;&#x5E38;&#x89C4;&#x521D;&#x59CB;&#x5316;&#x75DB;&#x70B9;</h3><ul>
<li><strong>&#x65F6;&#x673A;&#x4E0D;&#x5BB9;&#x6613;&#x63A7;&#x5236;</strong>&#xFF1A;handler postDelayed&#x6307;&#x5B9A;&#x7684;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x4E0D;&#x597D;&#x4F30;&#x8BA1;&#x3002;</li>
<li><strong>&#x5BFC;&#x81F4;&#x754C;&#x9762;UI&#x5361;&#x987F;</strong>&#xFF1A;&#x6B64;&#x65F6;&#x7528;&#x6237;&#x53EF;&#x80FD;&#x8FD8;&#x5728;&#x6ED1;&#x52A8;&#x5217;&#x8868;&#x3002;</li>
</ul>
<h3 id="3&#x3001;&#x5EF6;&#x8FDF;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;"><a href="#3&#x3001;&#x5EF6;&#x8FDF;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;" class="headerlink" title="3&#x3001;&#x5EF6;&#x8FDF;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;"></a>3&#x3001;&#x5EF6;&#x8FDF;&#x4F18;&#x5316;&#x6700;&#x4F18;&#x89E3;&#xFF1A;&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;</h3><p><a href="/external_links/fe914161f036365e6ff49c6c3b8eeca9.html" target="blank" rel="noopener">&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x6E90;&#x7801;&#x53CA;&#x4F7F;&#x7528;demo&#x5730;&#x5740;</a></p>
<h4 id="&#x6838;&#x5FC3;&#x601D;&#x60F3;"><a href="#&#x6838;&#x5FC3;&#x601D;&#x60F3;" class="headerlink" title="&#x6838;&#x5FC3;&#x601D;&#x60F3;"></a>&#x6838;&#x5FC3;&#x601D;&#x60F3;</h4><p>&#x5229;&#x7528;IdleHandler&#x7279;&#x6027;&#xFF0C;<strong>&#x5728;CPU&#x7A7A;&#x95F2;&#x65F6;&#x6267;&#x884C;&#xFF0C;&#x5BF9;&#x5EF6;&#x8FDF;&#x4EFB;&#x52A1;&#x8FDB;&#x884C;&#x5206;&#x6279;&#x521D;&#x59CB;&#x5316;</strong>&#x3002;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;"><a href="#&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;"></a>&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x5316;&#x5B9E;&#x6218;&#x4E0E;&#x6E90;&#x7801;&#x5256;&#x6790;</h4><p>&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;&#x542F;&#x52A8;&#x5668;&#x7684;&#x4EE3;&#x7801;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">typescript&#x590D;&#x5236;&#x4EE3;&#x7801;/**</span><br><span class="line"> * &#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;&#x5206;&#x53D1;&#x5668;</span><br><span class="line"> */</span><br><span class="line">public class DelayInitDispatcher {</span><br><span class="line"></span><br><span class="line">    private Queue&lt;Task&gt; mDelayTasks = new LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    private MessageQueue.IdleHandler mIdleHandler = new     MessageQueue.IdleHandler() {</span><br><span class="line">        @Override</span><br><span class="line">        public boolean queueIdle() {</span><br><span class="line">            // &#x5206;&#x6279;&#x6267;&#x884C;&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;task&#x5360;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x65F6;&#x95F4;&#x76F8;&#x5BF9;</span><br><span class="line">            // &#x6765;&#x8BF4;&#x5F88;&#x77ED;&#x6682;&#xFF0C;&#x5E76;&#x4E14;&#x6B64;&#x65F6;CPU&#x662F;&#x7A7A;&#x95F2;&#x7684;&#xFF0C;&#x8FD9;&#x4E9B;&#x80FD;&#x66F4;&#x6709;&#x6548;&#x5730;&#x907F;&#x514D;UI&#x5361;&#x987F;</span><br><span class="line">            if(mDelayTasks.size()&gt;0){</span><br><span class="line">                Task task = mDelayTasks.poll();</span><br><span class="line">                new DispatchRunnable(task).run();</span><br><span class="line">            }</span><br><span class="line">            return !mDelayTasks.isEmpty();</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line"></span><br><span class="line">    public DelayInitDispatcher addTask(Task task){</span><br><span class="line">        mDelayTasks.add(task);</span><br><span class="line">        return this;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    public void start(){</span><br><span class="line">        Looper.myQueue().addIdleHandler(mIdleHandler);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x5728;DelayInitDispatcher&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;mDelayTasks&#x961F;&#x5217;&#x7528;&#x4E8E;&#x5C06;&#x6BCF;&#x4E00;&#x4E2A;task&#x6DFB;&#x52A0;&#x8FDB;&#x6765;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x53EA;&#x9700;&#x8C03;&#x7528;addTask&#x65B9;&#x6CD5;&#x5373;&#x53EF;&#x3002;<strong>&#x5F53;CPU&#x7A7A;&#x95F2;&#x65F6;&#xFF0C;mIdleHandler&#x4FBF;&#x4F1A;&#x56DE;&#x8C03;&#x81EA;&#x8EAB;&#x7684;queueIdle&#x65B9;&#x6CD5;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5C06;task&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x5730;&#x62FF;&#x51FA;&#x6765;&#x5E76;&#x6267;&#x884C;</strong>&#x3002;&#x8FD9;&#x79CD;&#x5206;&#x6279;&#x6267;&#x884C;&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#x6BCF;&#x4E00;&#x4E2A;task&#x5360;&#x7528;&#x4E3B;&#x7EBF;&#x7A0B;&#x7684;&#x65F6;&#x95F4;&#x76F8;&#x5BF9;&#x6765;&#x8BF4;&#x5F88;&#x77ED;&#x6682;&#xFF0C;&#x5E76;&#x4E14;&#x6B64;&#x65F6;CPU&#x662F;&#x7A7A;&#x95F2;&#x7684;&#xFF0C;&#x8FD9;&#x6837;&#x80FD;&#x66F4;&#x6709;&#x6548;&#x5730;&#x907F;&#x514D;UI&#x5361;&#x987F;&#xFF0C;&#x771F;&#x6B63;&#x5730;&#x63D0;&#x5347;&#x7528;&#x6237;&#x7684;&#x4F53;&#x9A8C;&#x3002;</p>
<p>&#x81F3;&#x4E8E;&#x4F7F;&#x7528;&#x5C31;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5229;&#x7528;SplashActivity&#x7684;&#x5E7F;&#x544A;&#x9875;&#x505C;&#x7559;&#x65F6;&#x95F4;&#x53BB;&#x8FDB;&#x884C;&#x5EF6;&#x8FDF;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">scss&#x590D;&#x5236;&#x4EE3;&#x7801;@Override</span><br><span class="line">public void onWindowFocusChanged(boolean hasFocus) {</span><br><span class="line">    super.onWindowFocusChanged(hasFocus);</span><br><span class="line">    GlobalHandler.getInstance().getHandler().post((Runnable) () -&gt; {</span><br><span class="line">        if (hasFocus) {</span><br><span class="line">            DelayInitDispatcher delayInitDispatcher = new DelayInitDispatcher();</span><br><span class="line">            delayInitDispatcher.addTask(new InitOtherTask())</span><br><span class="line">                    .start();</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;<strong>&#x80FD;&#x5F02;&#x6B65;&#x7684;task&#x6211;&#x4EEC;&#x4F1A;&#x4F18;&#x5148;&#x4F7F;&#x7528;&#x5F02;&#x6B65;&#x542F;&#x52A8;&#x5668;&#x5728;Application&#x7684;onCreate&#x65B9;&#x6CD5;&#x4E2D;&#x52A0;&#x8F7D;&#xFF08;&#x6216;&#x8005;&#x662F;&#x5FC5;&#x987B;&#x5728;Application&#x7684;onCreate&#x65B9;&#x6CD5;&#x5B8C;&#x6210;&#x524D;&#x5FC5;&#x987B;&#x6267;&#x884C;&#x5B8C;&#x7684;&#x975E;&#x5F02;task&#x52A1;&#xFF09;&#xFF0C;&#x5BF9;&#x4E8E;&#x4E0D;&#x80FD;&#x5F02;&#x6B65;&#x7684;task&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x8FDB;&#x884C;&#x52A0;&#x8F7D;&#x3002;&#x5982;&#x679C;&#x4EFB;&#x52A1;&#x53EF;&#x4EE5;&#x5230;&#x7528;&#x65F6;&#x518D;&#x52A0;&#x8F7D;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x61D2;&#x52A0;&#x8F7D;&#x7684;&#x65B9;&#x5F0F;</strong>&#x3002;</p>
<h4 id="&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x52BF;"><a href="#&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x52BF;" class="headerlink" title="&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x52BF;"></a>&#x5EF6;&#x8FDF;&#x542F;&#x52A8;&#x5668;&#x4F18;&#x52BF;</h4><ul>
<li>&#x6267;&#x884C;&#x65F6;&#x673A;&#x660E;&#x786E;&#x3002;</li>
<li>&#x7F13;&#x89E3;&#x754C;&#x9762;UI&#x5361;&#x987F;&#x3002;</li>
<li>&#x771F;&#x6B63;&#x63D0;&#x5347;&#x7528;&#x6237;&#x4F53;&#x9A8C;&#x3002;</li>
</ul>
<h2 id="6&#x3001;Multidex&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;"><a href="#6&#x3001;Multidex&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;" class="headerlink" title="6&#x3001;Multidex&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;"></a>6&#x3001;Multidex&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;</h2><p>&#x6211;&#x4EEC;&#x90FD;&#x77E5;&#x9053;&#xFF0C;&#x5B89;&#x88C5;&#x6216;&#x8005;&#x5347;&#x7EA7;&#x540E;&#x9996;&#x6B21; MultiDex &#x82B1;&#x8D39;&#x7684;&#x65F6;&#x95F4;&#x8FC7;&#x4E8E;&#x6F2B;&#x957F;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FDB;&#x884C;Multidex&#x7684;&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;&#x3002;</p>
<h3 id="1&#x3001;&#x4F18;&#x5316;&#x6B65;&#x9AA4;"><a href="#1&#x3001;&#x4F18;&#x5316;&#x6B65;&#x9AA4;" class="headerlink" title="1&#x3001;&#x4F18;&#x5316;&#x6B65;&#x9AA4;"></a>1&#x3001;&#x4F18;&#x5316;&#x6B65;&#x9AA4;</h3><ul>
<li>1&#x3001;&#x542F;&#x52A8;&#x65F6;&#x5355;&#x72EC;&#x5F00;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x53BB;&#x5F02;&#x6B65;&#x8FDB;&#x884C;Multidex&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x52A0;&#x8F7D;&#xFF0C;&#x5373;Dex&#x63D0;&#x53D6;&#x548C;Dexopt&#x64CD;&#x4F5C;&#x3002;</li>
<li>2&#x3001;&#x6B64;&#x65F6;&#xFF0C;&#x4E3B;&#x8FDB;&#x7A0B;Application&#x8FDB;&#x5165;while&#x5FAA;&#x73AF;&#xFF0C;&#x4E0D;&#x65AD;&#x68C0;&#x6D4B;Multidex&#x64CD;&#x4F5C;&#x662F;&#x5426;&#x5B8C;&#x6210;&#x3002;</li>
<li>3&#x3001;&#x6267;&#x884C;&#x5230;Multidex&#x65F6;&#xFF0C;&#x5219;&#x5DF2;&#x7ECF;&#x53D1;&#x73B0;&#x63D0;&#x53D6;&#x5E76;&#x4F18;&#x5316;&#x597D;&#x4E86;Dex&#xFF0C;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x3002;MultiDex&#x6267;&#x884C;&#x5B8C;&#x4E4B;&#x540E;&#x4E3B;&#x8FDB;&#x7A0B;Application&#x7EE7;&#x7EED;&#x6267;&#x884C;ContentProvider&#x521D;&#x59CB;&#x5316;&#x548C;Application&#x7684;onCreate&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<p><a href="/external_links/64f3609af294076b3b7513bebce5b8ff.html" target="blank" rel="noopener">Multidex&#x4F18;&#x5316;Demo&#x5730;&#x5740;</a></p>
<h4 id="&#x6CE8;&#x610F;-1"><a href="#&#x6CE8;&#x610F;-1" class="headerlink" title="&#x6CE8;&#x610F;"></a>&#x6CE8;&#x610F;</h4><p>5.0&#x4EE5;&#x4E0A;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;ART&#xFF0C;&#x5728;&#x5B89;&#x88C5;&#x65F6;&#x5DF2;&#x5C06;Class.dex&#x8F6C;&#x6362;&#x4E3A;oat&#x6587;&#x4EF6;&#x4E86;&#xFF0C;&#x65E0;&#x9700;&#x4F18;&#x5316;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x5224;&#x65AD;&#x53EA;&#x6709;&#x5728;&#x4E3B;&#x8FDB;&#x7A0B;&#x53CA;SDK 5.0&#x4EE5;&#x4E0B;&#x624D;&#x8FDB;&#x884C;Multidex&#x7684;&#x9884;&#x52A0;&#x8F7D;&#x3002;</p>
<h3 id="2&#x3001;dex-opt&#x8FC7;&#x7A0B;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F;"><a href="#2&#x3001;dex-opt&#x8FC7;&#x7A0B;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F;" class="headerlink" title="2&#x3001;dex-opt&#x8FC7;&#x7A0B;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F;"></a>2&#x3001;dex-opt&#x8FC7;&#x7A0B;&#x662F;&#x600E;&#x6837;&#x7684;&#xFF1F;</h3><p>&#x4E3B;&#x8981;&#x5305;&#x62EC;inline&#x4EE5;&#x53CA;quick&#x6307;&#x4EE4;&#x7684;&#x4F18;&#x5316;&#x3002;</p>
<h4 id="&#x90A3;&#x4E48;&#xFF0C;inline&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"><a href="#&#x90A3;&#x4E48;&#xFF0C;inline&#x662F;&#x4EC0;&#x4E48;&#xFF1F;" class="headerlink" title="&#x90A3;&#x4E48;&#xFF0C;inline&#x662F;&#x4EC0;&#x4E48;&#xFF1F;"></a>&#x90A3;&#x4E48;&#xFF0C;inline&#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h4><p>&#x4F7F;&#x7F16;&#x8BD1;&#x5668;&#x5728;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5904;&#x7528;&#x51FD;&#x6570;&#x4F53;&#x4EE3;&#x7801;&#x4EE3;&#x66FF;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x6307;&#x4EE4;&#x3002;</p>
<h4 id="inline&#x7684;&#x4F5C;&#x7528;&#xFF1F;"><a href="#inline&#x7684;&#x4F5C;&#x7528;&#xFF1F;" class="headerlink" title="inline&#x7684;&#x4F5C;&#x7528;&#xFF1F;"></a>inline&#x7684;&#x4F5C;&#x7528;&#xFF1F;</h4><p>&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x8F6C;&#x79FB;&#x64CD;&#x4F5C;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x548C;&#x7A7A;&#x95F4;&#x65B9;&#x9762;&#x7684;&#x5F00;&#x9500;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x51FD;&#x6570;&#x4F53;&#x4E0D;&#x5927;&#x4E14;&#x9891;&#x7E41;&#x8C03;&#x7528;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x89E3;&#x51B3;&#x5176;&#x6548;&#x7387;&#x95EE;&#x9898;&#x66F4;&#x4E3A;&#x91CD;&#x8981;&#xFF0C;&#x5F15;&#x5165;inline&#x51FD;&#x6570;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E00;&#x95EE;&#x9898;&#x3002;</p>
<h4 id="inline&#x53C8;&#x662F;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#xFF1F;"><a href="#inline&#x53C8;&#x662F;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#xFF1F;" class="headerlink" title="inline&#x53C8;&#x662F;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#xFF1F;"></a>inline&#x53C8;&#x662F;&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x7684;&#xFF1F;</h4><p>inline&#x51FD;&#x6570;&#x81F3;&#x5C11;&#x5728;&#x4E09;&#x4E2A;&#x65B9;&#x9762;&#x63D0;&#x5347;&#x4E86;&#x7A0B;&#x5E8F;&#x7684;&#x65F6;&#x95F4;&#x6027;&#x80FD;&#xFF1A;</p>
<ul>
<li>1&#x3001;&#x907F;&#x514D;&#x4E86;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5FC5;&#x987B;&#x6267;&#x884C;&#x7684;&#x538B;&#x6808;&#x51FA;&#x6808;&#x7B49;&#x64CD;&#x4F5C;&#x3002;</li>
<li>2&#x3001;&#x7531;&#x4E8E;&#x51FD;&#x6570;&#x4F53;&#x4EE3;&#x7801;&#x88AB;&#x79FB;&#x5230;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5904;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x53EF;&#x4EE5;&#x83B7;&#x5F97;&#x66F4;&#x591A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x6839;&#x636E;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5BF9;&#x51FD;&#x6570;&#x4F53;&#x4EE3;&#x7801;&#x548C;&#x88AB;&#x8C03;&#x7528;&#x8005;&#x4EE3;&#x7801;&#x8FDB;&#x884C;&#x66F4;&#x8FDB;&#x4E00;&#x6B65;&#x7684;&#x4F18;&#x5316;&#x3002;</li>
<li>3&#x3001;&#x82E5;&#x4E0D;&#x4F7F;&#x7528;inline&#x51FD;&#x6570;&#xFF0C;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x81F3;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5904;&#xFF0C;&#x9700;&#x8981;&#x8F6C;&#x800C;&#x53BB;&#x6267;&#x884C;&#x51FD;&#x6570;&#x4F53;&#x6240;&#x5728;&#x4F4D;&#x7F6E;&#x7684;&#x4EE3;&#x7801;&#x3002;&#x4E00;&#x822C;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x4F4D;&#x7F6E;&#x548C;&#x51FD;&#x6570;&#x4EE3;&#x7801;&#x6240;&#x5728;&#x4F4D;&#x7F6E;&#x5728;&#x4EE3;&#x7801;&#x6BB5;&#x4E2D;&#x5E76;&#x4E0D;&#x76F8;&#x8FD1;&#xFF0C;&#x8FD9;&#x6837;&#x5F88;&#x5BB9;&#x6613;&#x5F62;&#x6210;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x7F3A;&#x9875;&#x4E2D;&#x65AD;&#x3002;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x628A;&#x7F3A;&#x9875;&#x5730;&#x5740;&#x7684;&#x4EE3;&#x7801;&#x4ECE;&#x786C;&#x76D8;&#x79FB;&#x5165;&#x5185;&#x5B58;&#xFF0C;&#x6240;&#x9700;&#x65F6;&#x95F4;&#x5C06;&#x6210;&#x6570;&#x91CF;&#x7EA7;&#x589E;&#x52A0;&#x3002;&#x800C;&#x4F7F;&#x7528;inline&#x51FD;&#x6570;&#x5219;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x7F3A;&#x9875;&#x4E2D;&#x65AD;&#x53D1;&#x751F;&#x7684;&#x673A;&#x4F1A;&#x3002;</li>
</ul>
<h4 id="&#x5BF9;&#x4E8E;inline&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x7684;&#x95EE;&#x9898;&#xFF1F;"><a href="#&#x5BF9;&#x4E8E;inline&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x7684;&#x95EE;&#x9898;&#xFF1F;" class="headerlink" title="&#x5BF9;&#x4E8E;inline&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x7684;&#x95EE;&#x9898;&#xFF1F;"></a>&#x5BF9;&#x4E8E;inline&#x7684;&#x4F7F;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x6CE8;&#x610F;&#x7684;&#x95EE;&#x9898;&#xFF1F;</h4><ul>
<li>1&#x3001;&#x7531;&#x4E8E;inline&#x51FD;&#x6570;&#x5728;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x5904;&#x63D2;&#x5165;&#x51FD;&#x6570;&#x4F53;&#x4EE3;&#x7801;&#x4EE3;&#x66FF;&#x51FD;&#x6570;&#x8C03;&#x7528;&#xFF0C;&#x82E5;&#x8BE5;&#x51FD;&#x6570;&#x5728;&#x7A0B;&#x5E8F;&#x7684;&#x5F88;&#x591A;&#x4F4D;&#x7F6E;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x9020;&#x6210;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x6D6A;&#x8D39;&#x3002;</li>
<li>2&#x3001;&#x4E00;&#x822C;&#x7A0B;&#x5E8F;&#x7684;&#x538B;&#x6808;&#x51FA;&#x6808;&#x64CD;&#x4F5C;&#x4E5F;&#x9700;&#x8981;&#x4E00;&#x5B9A;&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x5B8C;&#x6210;&#x6808;&#x6307;&#x9488;&#x8C03;&#x6574;&#x3001;&#x53C2;&#x6570;&#x4F20;&#x9012;&#x3001;&#x73B0;&#x573A;&#x4FDD;&#x62A4;&#x548C;&#x6062;&#x590D;&#x7B49;&#x64CD;&#x4F5C;&#x3002;<br>&#x82E5;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;&#x4F53;&#x4EE3;&#x7801;&#x91CF;&#x5C0F;&#x4E8E;&#x7F16;&#x8BD1;&#x5668;&#x751F;&#x6210;&#x7684;&#x51FD;&#x6570;&#x538B;&#x6808;&#x51FA;&#x6808;&#x4EE3;&#x7801;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x653E;&#x5FC3;&#x5730;&#x5B9A;&#x4E49;&#x4E3A;inline&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5360;&#x7528;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x53CD;&#x800C;&#x4F1A;&#x51CF;&#x5C0F;&#x3002;&#x800C;&#x5F53;&#x51FD;&#x6570;&#x4F53;&#x4EE3;&#x7801;&#x5927;&#x4E8E;&#x51FD;&#x6570;&#x538B;&#x6808;&#x51FA;&#x6808;&#x4EE3;&#x7801;&#x65F6;&#xFF0C;&#x5C06;&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x4E3A;inline&#x5C31;&#x4F1A;&#x589E;&#x52A0;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7684;&#x4F7F;&#x7528;&#x3002;</li>
<li>3&#x3001;C++&#x7A0B;&#x5E8F;&#x5E94;&#x8BE5;&#x6839;&#x636E;&#x5E94;&#x7528;&#x7684;&#x5177;&#x4F53;&#x573A;&#x666F;&#x3001;&#x51FD;&#x6570;&#x4F53;&#x5927;&#x5C0F;&#x3001;&#x8C03;&#x7528;&#x4F4D;&#x7F6E;&#x591A;&#x5C11;&#x3001;&#x51FD;&#x6570;&#x8C03;&#x7528;&#x7684;&#x9891;&#x7387;&#x3001;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5BF9;&#x65F6;&#x95F4;&#x6027;&#x80FD;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x5E94;&#x7528;&#x573A;&#x666F;&#x5BF9;&#x5185;&#x5B58;&#x6027;&#x80FD;&#x7684;&#x8981;&#x6C42;&#x7B49;&#x5404;&#x65B9;&#x9762;&#x56E0;&#x7D20;&#x5408;&#x7406;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x5B9A;&#x4E49;inline&#x51FD;&#x6570;&#x3002;</li>
<li>4&#x3001;inline&#x51FD;&#x6570;&#x5185;&#x4E0D;&#x5141;&#x8BB8;&#x7528;&#x5FAA;&#x73AF;&#x8BED;&#x53E5;&#x548C;&#x5F00;&#x5173;&#x8BED;&#x53E5;&#x3002;</li>
</ul>
<h3 id="3&#x3001;&#x6296;&#x97F3;BoostMultiDex&#x4F18;&#x5316;"><a href="#3&#x3001;&#x6296;&#x97F3;BoostMultiDex&#x4F18;&#x5316;" class="headerlink" title="3&#x3001;&#x6296;&#x97F3;BoostMultiDex&#x4F18;&#x5316;"></a>3&#x3001;&#x6296;&#x97F3;BoostMultiDex&#x4F18;&#x5316;</h3><p>&#x4E3A;&#x4E86;&#x5F7B;&#x5E95;&#x89E3;&#x51B3;MutiDex&#x52A0;&#x8F7D;&#x65F6;&#x95F4;&#x6162;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6296;&#x97F3;&#x56E2;&#x961F;&#x6DF1;&#x5165;&#x6316;&#x6398;&#x4E86; Dalvik &#x865A;&#x62DF;&#x673A;&#x7684;&#x5E95;&#x5C42;&#x7CFB;&#x7EDF;&#x673A;&#x5236;&#xFF0C;&#x5BF9; DEX &#x76F8;&#x5173;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#x8FDB;&#x884C;&#x4E86;&#x91CD;&#x65B0;&#x8BBE;&#x8BA1;&#x4E0E;&#x4F18;&#x5316;&#xFF0C;&#x5E76;&#x63A8;&#x51FA;&#x4E86; BoostMultiDex &#x65B9;&#x6848;&#xFF0C;&#x5B83;&#x80FD;&#x591F;&#x51CF;&#x5C11; 80% &#x4EE5;&#x4E0A;&#x7684;&#x9ED1;&#x5C4F;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x633D;&#x6551;&#x4F4E;&#x7248;&#x672C; Android &#x7528;&#x6237;&#x7684;&#x5347;&#x7EA7;&#x5B89;&#x88C5;&#x4F53;&#x9A8C;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x7684;&#x5B9E;&#x73B0;&#x539F;&#x7406;&#x4E3A;&#xFF1A;&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x542F;&#x52A8;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x76F4;&#x63A5;&#x52A0;&#x8F7D;&#x6CA1;&#x6709;&#x7ECF;&#x8FC7; OPT &#x4F18;&#x5316;&#x7684;&#x539F;&#x59CB; DEX&#xFF0C;&#x5148;&#x4F7F;&#x5F97; APP &#x80FD;&#x591F;&#x6B63;&#x5E38;&#x542F;&#x52A8;&#x3002;&#x7136;&#x540E;&#x5728;&#x540E;&#x53F0;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x8FDB;&#x7A0B;&#xFF0C;&#x6162;&#x6162;&#x5730;&#x505A;&#x5B8C; DEX &#x7684; OPT &#x5DE5;&#x4F5C;&#xFF0C;&#x5C3D;&#x53EF;&#x80FD;&#x907F;&#x514D;&#x5F71;&#x54CD;&#x5230;&#x524D;&#x53F0; APP &#x7684;&#x6B63;&#x5E38;&#x4F7F;&#x7528;&#x3002;&#x7ED5;&#x8FC7; ODEX &#x76F4;&#x63A5;&#x52A0;&#x8F7D; DEX &#x7684;&#x65B9;&#x6848;&#x5982;&#x4E0B;&#xFF1A;</p>
<ul>
<li>1&#xFF09;&#x3001;&#x4ECE; APK &#x4E2D;&#x89E3;&#x538B;&#x83B7;&#x53D6;&#x539F;&#x59CB; Secondary DEX &#x6587;&#x4EF6;&#x7684;&#x5B57;&#x8282;&#x7801;</li>
<li>2&#xFF09;&#x3001;&#x901A;&#x8FC7; dlsym &#x83B7;&#x53D6;dvm_dalvik_system_DexFile&#x6570;&#x7EC4;</li>
<li>3&#xFF09;&#x3001;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x67E5;&#x8BE2;&#x5F97;&#x5230;Dalvik_dalvik_system_DexFile_openDexFile_bytearray&#x51FD;&#x6570;</li>
<li>4&#xFF09;&#x3001;&#x8C03;&#x7528;&#x8BE5;&#x51FD;&#x6570;&#xFF0C;&#x9010;&#x4E2A;&#x4F20;&#x5165;&#x4E4B;&#x524D;&#x4ECE; APK &#x83B7;&#x53D6;&#x7684; DEX &#x5B57;&#x8282;&#x7801;&#xFF0C;&#x5B8C;&#x6210; DEX &#x52A0;&#x8F7D;&#xFF0C;&#x5F97;&#x5230;&#x5408;&#x6CD5;&#x7684;DexFile&#x5BF9;&#x8C61;</li>
<li>5&#xFF09;&#x3001;&#x628A;DexFile&#x5BF9;&#x8C61;&#x90FD;&#x6DFB;&#x52A0;&#x5230; APP &#x7684;PathClassLoader&#x7684; pathList &#x91CC;</li>
</ul>
<p>&#x8865;&#x5145;&#xFF1A;getDex &#x4F1A;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#xFF0C;&#x539F;&#x56E0;&#x662F; memMap &#x9700;&#x8981;&#x88AB;&#x8D4B;&#x503C;&#xFF0C;&#x4F46;&#x662F; Dalvik_dalvik_system_DexFile_openDexFile_bytearray &#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x64CD;&#x4F5C;&#x3002;&#x5206;&#x6790;&#x4EE3;&#x7801;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;&#x53EA;&#x8981; dex_object &#x5BF9;&#x8C61;&#x4E0D;&#x4E3A;&#x7A7A;&#xFF0C;&#x5C31;&#x4F1A;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#xFF0C;&#x4E0D;&#x4F1A;&#x518D;&#x5F80;&#x4E0B;&#x6267;&#x884C;&#x5230;&#x53D6; memMap &#x7684;&#x5730;&#x65B9;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x52A0;&#x8F7D;&#x5B8C; DEX &#x6570;&#x7EC4;&#x4E4B;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x81EA;&#x5DF1;&#x751F;&#x6210;&#x4E00;&#x4E2A;dex_object&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x6CE8;&#x5165;pDvmDex&#x91CC;&#x9762;&#x3002;</p>
<p>&#x5982;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x540C;&#x5B66;&#x53EF;&#x4EE5;&#x770B;&#x770B;&#x8FD9;&#x7BC7;&#x6587;&#x7AE0;&#xFF1A;<a href="/external_links/af62717ad4391e17cdd2a3ab4d33b51f.html" target="blank" rel="noopener">&#x6296;&#x97F3;BoostMultiDex&#x4F18;&#x5316;&#x5B9E;&#x8DF5;&#xFF1A;Android&#x4F4E;&#x7248;&#x672C;&#x4E0A;APP&#x9996;&#x6B21;&#x542F;&#x52A8;&#x65F6;&#x95F4;&#x51CF;&#x5C11;80%</a></p>
<h2 id="7&#x3001;&#x7C7B;&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;"><a href="#7&#x3001;&#x7C7B;&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;" class="headerlink" title="7&#x3001;&#x7C7B;&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;"></a>7&#x3001;&#x7C7B;&#x9884;&#x52A0;&#x8F7D;&#x4F18;&#x5316;</h2><p>&#x5728;Application&#x4E2D;&#x63D0;&#x524D;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x521D;&#x59CB;&#x5316;&#x8017;&#x65F6;&#x8F83;&#x957F;&#x7684;&#x7C7B;&#x3002;</p>
<h3 id="&#x5982;&#x4F55;&#x627E;&#x5230;&#x8017;&#x65F6;&#x8F83;&#x957F;&#x7684;&#x7C7B;&#xFF1F;"><a href="#&#x5982;&#x4F55;&#x627E;&#x5230;&#x8017;&#x65F6;&#x8F83;&#x957F;&#x7684;&#x7C7B;&#xFF1F;" class="headerlink" title="&#x5982;&#x4F55;&#x627E;&#x5230;&#x8017;&#x65F6;&#x8F83;&#x957F;&#x7684;&#x7C7B;&#xFF1F;"></a>&#x5982;&#x4F55;&#x627E;&#x5230;&#x8017;&#x65F6;&#x8F83;&#x957F;&#x7684;&#x7C7B;&#xFF1F;</h3><p>&#x66FF;&#x6362;&#x7CFB;&#x7EDF;&#x7684;ClassLoader&#xFF0C;&#x6253;&#x5370;&#x7C7B;&#x52A0;&#x8F7D;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6309;&#x9700;&#x9009;&#x53D6;&#x9700;&#x8981;&#x5F02;&#x6B65;&#x52A0;&#x8F7D;&#x7684;&#x7C7B;&#x3002;</p>
<h4 id="&#x6CE8;&#x610F;-2"><a href="#&#x6CE8;&#x610F;-2" class="headerlink" title="&#x6CE8;&#x610F;"></a>&#x6CE8;&#x610F;</h4><ul>
<li>Class.forName()&#x53EA;&#x52A0;&#x8F7D;&#x7C7B;&#x672C;&#x8EAB;&#x53CA;&#x5176;&#x9759;&#x6001;&#x53D8;&#x91CF;&#x7684;&#x5F15;&#x7528;&#x7C7B;&#x3002;</li>
<li>new &#x7C7B;&#x5B9E;&#x4F8B; &#x53EF;&#x4EE5;&#x989D;&#x5916;&#x52A0;&#x8F7D;&#x7C7B;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x7684;&#x5F15;&#x7528;&#x7C7B;&#x3002;</li>
</ul>
<h2 id="8&#x3001;WebView&#x542F;&#x52A8;&#x4F18;&#x5316;"><a href="#8&#x3001;WebView&#x542F;&#x52A8;&#x4F18;&#x5316;" class="headerlink" title="8&#x3001;WebView&#x542F;&#x52A8;&#x4F18;&#x5316;"></a>8&#x3001;WebView&#x542F;&#x52A8;&#x4F18;&#x5316;</h2><ul>
<li>1&#x3001;WebView&#x9996;&#x6B21;&#x521B;&#x5EFA;&#x6BD4;&#x8F83;&#x8017;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x9884;&#x5148;&#x521B;&#x5EFA;WebView&#x63D0;&#x524D;&#x5C06;&#x5176;&#x5185;&#x6838;&#x521D;&#x59CB;&#x5316;&#x3002;</li>
<li>2&#x3001;&#x4F7F;&#x7528;WebView&#x7F13;&#x5B58;&#x6C60;&#xFF0C;&#x7528;&#x5230;WebView&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4ECE;&#x7F13;&#x5B58;&#x6C60;&#x4E2D;&#x62FF;&#xFF0C;&#x6CE8;&#x610F;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;&#x95EE;&#x9898;&#x3002;</li>
<li>3&#x3001;&#x672C;&#x5730;&#x79BB;&#x7EBF;&#x5305;&#xFF0C;&#x5373;&#x9884;&#x7F6E;&#x9759;&#x6001;&#x9875;&#x9762;&#x8D44;&#x6E90;&#x3002;</li>
</ul>
<h2 id="9&#x3001;&#x9875;&#x9762;&#x6570;&#x636E;&#x9884;&#x52A0;&#x8F7D;"><a href="#9&#x3001;&#x9875;&#x9762;&#x6570;&#x636E;&#x9884;&#x52A0;&#x8F7D;" class="headerlink" title="9&#x3001;&#x9875;&#x9762;&#x6570;&#x636E;&#x9884;&#x52A0;&#x8F7D;"></a>9&#x3001;&#x9875;&#x9762;&#x6570;&#x636E;&#x9884;&#x52A0;&#x8F7D;</h2><p>&#x5728;&#x4E3B;&#x9875;&#x7A7A;&#x95F2;&#x65F6;&#xFF0C;&#x5C06;&#x5176;&#x5B83;&#x9875;&#x9762;&#x7684;&#x6570;&#x636E;&#x52A0;&#x8F7D;&#x597D;&#x4FDD;&#x5B58;&#x5230;&#x5185;&#x5B58;&#x6216;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7B49;&#x5230;&#x6253;&#x5F00;&#x8BE5;&#x9875;&#x9762;&#x65F6;&#xFF0C;&#x5224;&#x65AD;&#x5DF2;&#x7ECF;&#x9884;&#x52A0;&#x8F7D;&#x8FC7;&#xFF0C;&#x5C31;&#x76F4;&#x63A5;&#x4ECE;&#x5185;&#x5B58;&#x6216;&#x6570;&#x636E;&#x5E93;&#x53D6;&#x6570;&#x636E;&#x5E76;&#x663E;&#x793A;&#x3002;</p>
<h2 id="10&#x3001;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x4E0D;&#x542F;&#x52A8;&#x5B50;&#x8FDB;&#x7A0B;"><a href="#10&#x3001;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x4E0D;&#x542F;&#x52A8;&#x5B50;&#x8FDB;&#x7A0B;" class="headerlink" title="10&#x3001;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x4E0D;&#x542F;&#x52A8;&#x5B50;&#x8FDB;&#x7A0B;"></a>10&#x3001;&#x542F;&#x52A8;&#x9636;&#x6BB5;&#x4E0D;&#x542F;&#x52A8;&#x5B50;&#x8FDB;&#x7A0B;</h2><p>&#x5B50;&#x8FDB;&#x7A0B;&#x4F1A;&#x5171;&#x4EAB;CPU&#x8D44;&#x6E90;&#xFF0C;&#x5BFC;&#x81F4;&#x4E3B;&#x8FDB;&#x7A0B;CPU&#x7D27;&#x5F20;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5728;&#x591A;&#x8FDB;&#x7A0B;&#x60C5;&#x51B5;&#x4E0B;&#x4E00;&#x5B9A;&#x8981;&#x53EF;&#x4EE5;&#x5728;onCreate&#x4E2D;&#x53BB;&#x533A;&#x5206;&#x8FDB;&#x7A0B;&#x505A;&#x4E00;&#x4E9B;&#x521D;&#x59CB;&#x5316;&#x5DE5;&#x4F5C;&#x3002;</p>
<h3 id="&#x6CE8;&#x610F;&#x542F;&#x52A8;&#x987A;&#x5E8F;"><a href="#&#x6CE8;&#x610F;&#x542F;&#x52A8;&#x987A;&#x5E8F;" class="headerlink" title="&#x6CE8;&#x610F;&#x542F;&#x52A8;&#x987A;&#x5E8F;"></a>&#x6CE8;&#x610F;&#x542F;&#x52A8;&#x987A;&#x5E8F;</h3><p>App onCreate&#x4E4B;&#x524D;&#x662F;ContentProvider&#x521D;&#x59CB;&#x5316;&#x3002;</p>
<h2 id="11&#x3001;&#x95EA;&#x5C4F;&#x9875;&#x4E0E;&#x4E3B;&#x9875;&#x7684;&#x7ED8;&#x5236;&#x4F18;&#x5316;"><a href="#11&#x3001;&#x95EA;&#x5C4F;&#x9875;&#x4E0E;&#x4E3B;&#x9875;&#x7684;&#x7ED8;&#x5236;&#x4F18;&#x5316;" class="headerlink" title="11&#x3001;&#x95EA;&#x5C4F;&#x9875;&#x4E0E;&#x4E3B;&#x9875;&#x7684;&#x7ED8;&#x5236;&#x4F18;&#x5316;"></a>11&#x3001;&#x95EA;&#x5C4F;&#x9875;&#x4E0E;&#x4E3B;&#x9875;&#x7684;&#x7ED8;&#x5236;&#x4F18;&#x5316;</h2><ul>
<li>1&#x3001;&#x5E03;&#x5C40;&#x4F18;&#x5316;&#x3002;</li>
<li>2&#x3001;&#x8FC7;&#x6E21;&#x7ED8;&#x5236;&#x4F18;&#x5316;&#x3002;</li>
</ul>
<p>&#x5173;&#x4E8E;&#x5E03;&#x5C40;&#x4E0E;&#x7ED8;&#x5236;&#x4F18;&#x5316;&#x53EF;&#x4EE5;&#x53C2;&#x8003;<a href="/external_links/952f7247620299b35c4868aea5533700.html" target="blank" rel="noopener">Android&#x6027;&#x80FD;&#x4F18;&#x5316;&#x4E4B;&#x7ED8;&#x5236;&#x4F18;&#x5316;</a>&#x3002;</p>
<blockquote>
<p>&#x516C;&#x949F;&#x53F7;&#x540C;&#x540D;&#xFF0C;&#x6B22;&#x8FCE;&#x5173;&#x6CE8;&#xFF0C;&#x5173;&#x6CE8;&#x540E;&#x56DE;&#x590D; Framework&#xFF0C;&#x6211;&#x5C06;&#x5206;&#x4EAB;&#x7ED9;&#x4F60;&#x4E00;&#x4EFD;&#x6211;&#x8FD9;&#x4E24;&#x5E74;&#x6301;&#x7EED;&#x603B;&#x7ED3;&#x3001;&#x7EC6;&#x5316;&#x3001;&#x6C89;&#x6DC0;&#x51FA;&#x6765;&#x7684; Framework &#x4F53;&#x7CFB;&#x5316;&#x7CBE;&#x54C1;&#x9762;&#x8BD5;&#x9898;&#xFF0C;&#x91CC;&#x9762;&#x5F88;&#x591A;&#x7684;&#x6838;&#x5FC3;&#x9898;&#x7B54;&#x6848;&#x5728;&#x9762;&#x8BD5;&#x7684;&#x538B;&#x529B;&#x4E0B;&#xFF0C;&#x7ECF;&#x8FC7;&#x4E86;&#x53CD;&#x590D;&#x7684;&#x6821;&#x6B63;&#x4E0E;&#x5347;&#x534E;&#xFF0C;&#x542B;&#x91D1;&#x91CF;&#x6781;&#x9AD8;~</p>
</blockquote>
<h5 id="&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;"><a href="#&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;" class="headerlink" title="&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;"></a>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;</h5><hr>
<p>1&#x3001;<a href="/external_links/a3ec46781ee4e6faabcb7120b20f1584.html" target="blank" rel="noopener">Android&#x5F00;&#x53D1;&#x9AD8;&#x624B;&#x8BFE;&#x4E4B;&#x542F;&#x52A8;&#x4F18;&#x5316;</a></p>
<p>2&#x3001;<a href="/external_links/f22890ed4cba2accae49d7be70ab401b.html" target="blank" rel="noopener">&#x652F;&#x4ED8;&#x5B9D;&#x5BA2;&#x6237;&#x7AEF;&#x67B6;&#x6784;&#x89E3;&#x6790;&#xFF1A;Android<br>&#x5BA2;&#x6237;&#x7AEF;&#x542F;&#x52A8;&#x901F;&#x5EA6;&#x4F18;&#x5316;&#x4E4B;&#x300C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x300D;</a></p>
<p>3&#x3001;<a href="/external_links/e4564811704260250c54fde55e35ba9e.html" target="blank" rel="noopener">&#x652F;&#x4ED8;&#x5B9D; App &#x6784;&#x5EFA;&#x4F18;&#x5316;&#x89E3;&#x6790;&#xFF1A;&#x901A;&#x8FC7;&#x5B89;&#x88C5;&#x5305;&#x91CD;&#x6392;&#x5E03;&#x4F18;&#x5316; Android &#x7AEF;&#x542F;&#x52A8;&#x6027;&#x80FD;</a></p>
<p>4&#x3001;<a href="/external_links/731d3c86d0c6ace917ae2775a89e1706.html" target="blank" rel="noopener">Facebook Redex&#x5B57;&#x8282;&#x7801;&#x4F18;&#x5316;&#x5DE5;&#x5177;</a></p>
<p>5&#x3001;<a href="/external_links/cf63d5e63da66a973717a8e4f6d8e547.html" target="blank" rel="noopener">&#x5FAE;&#x4FE1;Android&#x70ED;&#x8865;&#x4E01;&#x5B9E;&#x8DF5;&#x6F14;&#x8FDB;&#x4E4B;&#x8DEF;</a></p>
<p>6&#x3001;<a href="/external_links/3680a03ee2f2b2624565d628c76538bd.html" target="blank" rel="noopener">&#x5B89;&#x5353;App&#x70ED;&#x8865;&#x4E01;&#x52A8;&#x6001;&#x4FEE;&#x590D;&#x6280;&#x672F;&#x4ECB;&#x7ECD;</a></p>
<p>7&#x3001;<a href="/external_links/a1ac070b78db326b2de195f82b766a18.html" target="blank" rel="noopener">Dalvik Optimization and Verification With dexopt</a></p>
<p>8&#x3001;<a href="/external_links/5ff4018278f452533f52f314506584a1.html" target="blank" rel="noopener">&#x5FAE;&#x4FE1;&#x5728;Github&#x5F00;&#x6E90;&#x4E86;Hardcoder&#xFF0C;&#x5BF9;Android&#x5F00;&#x53D1;&#x8005;&#x6709;&#x4EC0;&#x4E48;&#x5F71;&#x54CD;&#xFF1F;</a></p>
<p>9&#x3001;<a href="/external_links/1102d2662690af03b223b214c17d5831.html" target="blank" rel="noopener">&#x5386;&#x65F6;&#x4E09;&#x5E74;&#x7814;&#x53D1;&#xFF0C;OPPO &#x7684; Hyper Boost &#x5F15;&#x64CE;&#x5982;&#x4F55;&#x5BF9;&#x7CFB;&#x7EDF;&#x3001;&#x6E38;&#x620F;&#x548C;&#x5E94;&#x7528;&#x5B9E;&#x73B0;&#x52A0;&#x901F;&#xFF1F;</a></p>
<p>10&#x3001;<a href="/external_links/29feaef6e16dc7309260bf9438cf704c.html" target="blank" rel="noopener">&#x62B1;&#x6B49;&#xFF0C;Xposed&#x771F;&#x7684;&#x53EF;&#x4EE5;&#x4E3A;&#x6240;&#x6B32;&#x4E3A;</a></p>
<p>11&#x3001;<a href="/external_links/35f72f7688acf139cee32d5198163568.html" target="blank" rel="noopener">&#x5899;&#x4E0A;&#x65F6;&#x949F;&#x65F6;&#x95F4; &#xFF0C;&#x7528;&#x6237;cpu&#x65F6;&#x95F4; &#xFF0C;&#x7CFB;&#x7EDF;cpu&#x65F6;&#x95F4;&#x7684;&#x7406;&#x89E3;</a></p>
<p>12&#x3001;&#x300A;Android&#x5E94;&#x7528;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x300B;</p>
<p>13&#x3001;<a href="/external_links/734af5d31d882d4168f4173302a7d1ae.html" target="blank" rel="noopener">&#x5FC5;&#x77E5;&#x5FC5;&#x4F1A; | Android &#x6027;&#x80FD;&#x4F18;&#x5316;&#x7684;&#x65B9;&#x9762;&#x65B9;&#x9762;&#x90FD;&#x5728;&#x8FD9;&#x513F;</a></p>
<p>14&#x3001;<a href="/external_links/9adf22f2b62cfc1a491d1cb8dd8e3a41.html" target="blank" rel="noopener">&#x6781;&#x5BA2;&#x65F6;&#x95F4;&#x4E4B;Top&#x56E2;&#x961F;&#x5927;&#x725B;&#x5E26;&#x4F60;&#x73A9;&#x8F6C;Android&#x6027;&#x80FD;&#x5206;&#x6790;&#x4E0E;&#x4F18;&#x5316;</a></p>
<p>15&#x3001;<a href="/external_links/fe914161f036365e6ff49c6c3b8eeca9.html" target="blank" rel="noopener">&#x542F;&#x52A8;&#x5668;&#x6E90;&#x7801;</a></p>
<p>16&#x3001;<a href="/external_links/64f3609af294076b3b7513bebce5b8ff.html" target="blank" rel="noopener">MultiDex&#x4F18;&#x5316;&#x6E90;&#x7801;</a></p>
<p>17&#x3001;<a href="/external_links/a8411aaf33102a39a951771610c57cfa.html" target="blank" rel="noopener">&#x4F7F;&#x7528;gradle&#x81EA;&#x52A8;&#x5316;&#x589E;&#x52A0;Trace Tag</a></p>
<p><strong>&#x672C;&#x6587;&#x8F6C;&#x8F7D;&#x81EA;:</strong> <a href="/external_links/50a2635e10d69d05a913faab9ad46529.html" target="blank" rel="noopener">&#x6398;&#x91D1;</a></p>
<p><em><a href="https://dev.newban.cn/">&#x5F00;&#x53D1;&#x8005;&#x535A;&#x5BA2; &#x2013; &#x548C;&#x5F00;&#x53D1;&#x76F8;&#x5173;&#x7684; &#x8FD9;&#x91CC;&#x5168;&#x90FD;&#x6709;</a></em></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="tags/Android-性能优化/" rel="tag"># Android,性能优化</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="6844904089696862221.html" rel="next" title="0xA03 Android 10 源码分析：APK 加载流程">
                <i class="fa fa-chevron-left"></i> 0xA03 Android 10 源码分析：APK 加载流程
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="6844903972755472391.html" rel="prev" title="【译】kotlin 协程官方文档（1）-协程基础 一、你的第">
                【译】kotlin 协程官方文档（1）-协程基础 一、你的第 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


    <!-- 有瓣音频文章内嵌广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-2626449904708114" data-ad-slot="6145016388"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

    <div class="post-spread">
      
    </div>
  </div>
  <!-- 有瓣音频信息流广告 -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-6t+ed+2i-1n-4w" data-ad-client="ca-pub-2626449904708114" data-ad-slot="6455528644"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">开发者博客</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://dev.newban.cn/archives/">
              
                  <span class="site-state-item-count">1152</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">481</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#成为一名优秀的Android开发，需要一份完备的知识体系，在这里，让我们一起成长为自己所想的那样-。"><span class="nav-number">1.0.1.</span> <span class="nav-text">成为一名优秀的Android开发，需要一份完备的知识体系，在这里，让我们一起成长为自己所想的那样~。</span></a></li></ol></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#思维导图大纲"><span class="nav-number">2.</span> <span class="nav-text">思维导图大纲</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#目录"><span class="nav-number">3.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一、启动优化的意义"><span class="nav-number">4.</span> <span class="nav-text">一、启动优化的意义</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#二、应用启动流程"><span class="nav-number">5.</span> <span class="nav-text">二、应用启动流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-、应用启动的类型"><span class="nav-number">5.1.</span> <span class="nav-text">1 、应用启动的类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#冷启动"><span class="nav-number">5.1.1.</span> <span class="nav-text">冷启动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点"><span class="nav-number">5.1.1.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动流程"><span class="nav-number">5.1.1.2.</span> <span class="nav-text">启动流程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#热启动"><span class="nav-number">5.1.2.</span> <span class="nav-text">热启动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-1"><span class="nav-number">5.1.2.1.</span> <span class="nav-text">特点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#温启动"><span class="nav-number">5.1.3.</span> <span class="nav-text">温启动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-2"><span class="nav-number">5.1.3.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动流程-1"><span class="nav-number">5.1.3.2.</span> <span class="nav-text">启动流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ViewRootImpl是什么？"><span class="nav-number">5.1.3.3.</span> <span class="nav-text">ViewRootImpl是什么？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、冷启动分析及其优化方向"><span class="nav-number">5.2.</span> <span class="nav-text">2、冷启动分析及其优化方向</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#冷启动涉及的相关任务"><span class="nav-number">5.2.1.</span> <span class="nav-text">冷启动涉及的相关任务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#冷启动之前"><span class="nav-number">5.2.1.1.</span> <span class="nav-text">冷启动之前</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#随后任务"><span class="nav-number">5.2.1.2.</span> <span class="nav-text">随后任务</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化方向"><span class="nav-number">5.2.2.</span> <span class="nav-text">优化方向</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三、启动耗时检测"><span class="nav-number">6.</span> <span class="nav-text">三、启动耗时检测</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1、查看Logcat"><span class="nav-number">6.1.</span> <span class="nav-text">1、查看Logcat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、adb-shell"><span class="nav-number">6.2.</span> <span class="nav-text">2、adb shell</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ThisTime"><span class="nav-number">6.2.1.</span> <span class="nav-text">ThisTime</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TotalTime"><span class="nav-number">6.2.2.</span> <span class="nav-text">TotalTime</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WaitTime"><span class="nav-number">6.2.3.</span> <span class="nav-text">WaitTime</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特点："><span class="nav-number">6.2.4.</span> <span class="nav-text">特点：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、代码打点（函数插桩）"><span class="nav-number">6.3.</span> <span class="nav-text">3、代码打点（函数插桩）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-打点"><span class="nav-number">6.3.1.</span> <span class="nav-text">Application 打点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第一个Activity打点"><span class="nav-number">6.3.2.</span> <span class="nav-text">第一个Activity打点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特点-3"><span class="nav-number">6.3.3.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意事项"><span class="nav-number">6.3.4.</span> <span class="nav-text">注意事项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#为什么不使用onWindowFocusChanged这个方法作为启动结束点？"><span class="nav-number">6.3.4.1.</span> <span class="nav-text">为什么不使用onWindowFocusChanged这个方法作为启动结束点？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、AOP-Aspect-Oriented-Programming-打点"><span class="nav-number">6.4.</span> <span class="nav-text">4、AOP(Aspect Oriented Programming) 打点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、作用"><span class="nav-number">6.4.1.</span> <span class="nav-text">1、作用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、AOP核心概念"><span class="nav-number">6.4.2.</span> <span class="nav-text">2、AOP核心概念</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、横切关注点"><span class="nav-number">6.4.2.1.</span> <span class="nav-text">1、横切关注点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、切面（Aspect）"><span class="nav-number">6.4.2.2.</span> <span class="nav-text">2、切面（Aspect）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、连接点（JoinPoint）"><span class="nav-number">6.4.2.3.</span> <span class="nav-text">3、连接点（JoinPoint）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、切入点（PointCut）"><span class="nav-number">6.4.2.4.</span> <span class="nav-text">4、切入点（PointCut）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、通知（Advice）"><span class="nav-number">6.4.2.5.</span> <span class="nav-text">5、通知（Advice）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、准备：接入AspectJx进行切面编码"><span class="nav-number">6.4.3.</span> <span class="nav-text">3、准备：接入AspectJx进行切面编码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、AOP埋点实战"><span class="nav-number">6.4.4.</span> <span class="nav-text">4、AOP埋点实战</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如何统计Application中的所有方法耗时？"><span class="nav-number">6.4.4.1.</span> <span class="nav-text">如何统计Application中的所有方法耗时？</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Around和Before、After的最大区别"><span class="nav-number">6.4.4.1.1.</span> <span class="nav-text">Around和Before、After的最大区别:</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、总结AOP特性"><span class="nav-number">6.4.5.</span> <span class="nav-text">5、总结AOP特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、启动速度分析工具-—-TraceView"><span class="nav-number">6.5.</span> <span class="nav-text">5、启动速度分析工具 — TraceView</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、使用方式"><span class="nav-number">6.5.1.</span> <span class="nav-text">1、使用方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、Profile-CPU"><span class="nav-number">6.5.2.</span> <span class="nav-text">2、Profile CPU</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1、Trace-types"><span class="nav-number">6.5.3.</span> <span class="nav-text">1、Trace types</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、Trace-Java-Methods"><span class="nav-number">6.5.3.1.</span> <span class="nav-text">1、Trace Java Methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、Sample-Java-Methods"><span class="nav-number">6.5.3.2.</span> <span class="nav-text">2、Sample Java Methods</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、Sample-C-C-Functions"><span class="nav-number">6.5.3.3.</span> <span class="nav-text">3、Sample C/C++ Functions</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、Trace-System-Calls"><span class="nav-number">6.5.3.4.</span> <span class="nav-text">4、Trace System Calls</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、Event-timeline"><span class="nav-number">6.5.4.</span> <span class="nav-text">2、Event timeline</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、CPU-timeline"><span class="nav-number">6.5.5.</span> <span class="nav-text">3、CPU timeline</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、Thread-activity-timeline"><span class="nav-number">6.5.6.</span> <span class="nav-text">4、Thread activity timeline</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、检查跟踪数据窗口"><span class="nav-number">6.5.7.</span> <span class="nav-text">5、检查跟踪数据窗口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、Call-Chart"><span class="nav-number">6.5.7.1.</span> <span class="nav-text">1、Call Chart</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#提示"><span class="nav-number">6.5.7.1.1.</span> <span class="nav-text">提示</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、Flame-Chart"><span class="nav-number">6.5.7.2.</span> <span class="nav-text">2、Flame Chart</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用技巧"><span class="nav-number">6.5.7.2.1.</span> <span class="nav-text">使用技巧</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、Top-Down"><span class="nav-number">6.5.7.3.</span> <span class="nav-text">3、Top Down</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、Bottom-Up"><span class="nav-number">6.5.7.4.</span> <span class="nav-text">4、Bottom Up</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#注意事项-1"><span class="nav-number">6.5.7.5.</span> <span class="nav-text">注意事项</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、TraceView小结"><span class="nav-number">6.5.8.</span> <span class="nav-text">3、TraceView小结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-4"><span class="nav-number">6.5.8.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#作用"><span class="nav-number">6.5.8.2.</span> <span class="nav-text">作用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、启动速度分析工具-—-Systrace"><span class="nav-number">6.6.</span> <span class="nav-text">6、启动速度分析工具 — Systrace</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、使用方式：代码插桩"><span class="nav-number">6.6.1.</span> <span class="nav-text">1、使用方式：代码插桩</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#如何查看数据？"><span class="nav-number">6.6.1.1.</span> <span class="nav-text">如何查看数据？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、Systrace原理"><span class="nav-number">6.6.2.</span> <span class="nav-text">2、Systrace原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、Systrace小结"><span class="nav-number">6.6.3.</span> <span class="nav-text">3、Systrace小结</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-5"><span class="nav-number">6.6.3.1.</span> <span class="nav-text">特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#作用-1"><span class="nav-number">6.6.3.2.</span> <span class="nav-text">作用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、启动监控"><span class="nav-number">6.7.</span> <span class="nav-text">7、启动监控</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、实验室监控：视频录制"><span class="nav-number">6.7.1.</span> <span class="nav-text">1、实验室监控：视频录制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#注意"><span class="nav-number">6.7.1.1.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、线上监控"><span class="nav-number">6.7.2.</span> <span class="nav-text">2、线上监控</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#目标"><span class="nav-number">6.7.2.1.</span> <span class="nav-text">目标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1、启动结束的统计时机"><span class="nav-number">6.7.2.2.</span> <span class="nav-text">1、启动结束的统计时机</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、启动时间扣除逻辑"><span class="nav-number">6.7.2.3.</span> <span class="nav-text">2、启动时间扣除逻辑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、启动排除逻辑"><span class="nav-number">6.7.2.4.</span> <span class="nav-text">3、启动排除逻辑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、使用什么指标来衡量启动速度的快慢？"><span class="nav-number">6.7.2.5.</span> <span class="nav-text">4、使用什么指标来衡量启动速度的快慢？</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#平均启动时间的问题"><span class="nav-number">6.7.2.5.1.</span> <span class="nav-text">平均启动时间的问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#建议的指标"><span class="nav-number">6.7.2.5.2.</span> <span class="nav-text">建议的指标</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、启动的类型有哪几种？"><span class="nav-number">6.7.2.6.</span> <span class="nav-text">5、启动的类型有哪几种？</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#四、启动优化常规方案"><span class="nav-number">7.</span> <span class="nav-text">四、启动优化常规方案</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#启动过程中的常见问题"><span class="nav-number">7.0.1.</span> <span class="nav-text">启动过程中的常见问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化区域"><span class="nav-number">7.0.2.</span> <span class="nav-text">优化区域</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1、主题切换"><span class="nav-number">7.1.</span> <span class="nav-text">1、主题切换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#优点"><span class="nav-number">7.1.1.</span> <span class="nav-text">优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#缺点"><span class="nav-number">7.1.2.</span> <span class="nav-text">缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2、第三方库懒加载"><span class="nav-number">7.2.</span> <span class="nav-text">2、第三方库懒加载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3、异步初始化预备知识-线程优化"><span class="nav-number">7.3.</span> <span class="nav-text">3、异步初始化预备知识-线程优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、Android线程调度原理剖析"><span class="nav-number">7.3.1.</span> <span class="nav-text">1、Android线程调度原理剖析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#线程调度原理"><span class="nav-number">7.3.1.1.</span> <span class="nav-text">线程调度原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#线程调度模型"><span class="nav-number">7.3.1.2.</span> <span class="nav-text">线程调度模型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、分时调度模型"><span class="nav-number">7.3.1.2.1.</span> <span class="nav-text">1、分时调度模型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、抢占式调度模型"><span class="nav-number">7.3.1.2.2.</span> <span class="nav-text">2、抢占式调度模型</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#如何干预线程调度？"><span class="nav-number">7.3.1.3.</span> <span class="nav-text">如何干预线程调度？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Android线程调度"><span class="nav-number">7.3.1.4.</span> <span class="nav-text">Android线程调度</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、nice值"><span class="nav-number">7.3.1.4.1.</span> <span class="nav-text">1、nice值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、cgroup"><span class="nav-number">7.3.1.4.2.</span> <span class="nav-text">2、cgroup</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#注意点"><span class="nav-number">7.3.1.5.</span> <span class="nav-text">注意点</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、Android异步方式"><span class="nav-number">7.3.2.</span> <span class="nav-text">2、Android异步方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、Thread"><span class="nav-number">7.3.2.1.</span> <span class="nav-text">1、Thread</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、HandlerThread"><span class="nav-number">7.3.2.2.</span> <span class="nav-text">2、HandlerThread</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3、IntentService"><span class="nav-number">7.3.2.3.</span> <span class="nav-text">3、IntentService</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、AsyncTask"><span class="nav-number">7.3.2.4.</span> <span class="nav-text">4、AsyncTask</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5、线程池"><span class="nav-number">7.3.2.5.</span> <span class="nav-text">5、线程池</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6、RxJava"><span class="nav-number">7.3.2.6.</span> <span class="nav-text">6、RxJava</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#异步方式总结"><span class="nav-number">7.3.2.7.</span> <span class="nav-text">异步方式总结</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、Android线程优化实战"><span class="nav-number">7.3.3.</span> <span class="nav-text">3、Android线程优化实战</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#线程使用准则"><span class="nav-number">7.3.3.1.</span> <span class="nav-text">线程使用准则</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、如何锁定线程创建者"><span class="nav-number">7.3.4.</span> <span class="nav-text">4、如何锁定线程创建者</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#锁定线程创建背景"><span class="nav-number">7.3.4.1.</span> <span class="nav-text">锁定线程创建背景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#锁定线程创建方案"><span class="nav-number">7.3.4.2.</span> <span class="nav-text">锁定线程创建方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实战"><span class="nav-number">7.3.4.3.</span> <span class="nav-text">实战</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、线程收敛优雅实践初步"><span class="nav-number">7.3.5.</span> <span class="nav-text">5、线程收敛优雅实践初步</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#线程收敛常规方案"><span class="nav-number">7.3.5.1.</span> <span class="nav-text">线程收敛常规方案</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#问题：基础库怎么使用线程？"><span class="nav-number">7.3.5.2.</span> <span class="nav-text">问题：基础库怎么使用线程？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基础库优雅使用线程"><span class="nav-number">7.3.5.3.</span> <span class="nav-text">基础库优雅使用线程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#统一线程库时区分任务类型"><span class="nav-number">7.3.5.4.</span> <span class="nav-text">统一线程库时区分任务类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#实现用于执行多类型任务的基础线程池组件"><span class="nav-number">7.3.5.5.</span> <span class="nav-text">实现用于执行多类型任务的基础线程池组件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、线程优化核心问题"><span class="nav-number">7.3.6.</span> <span class="nav-text">6、线程优化核心问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1、线程使用为什么会遇到问题？"><span class="nav-number">7.3.6.1.</span> <span class="nav-text">1、线程使用为什么会遇到问题？</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#表现形式"><span class="nav-number">7.3.6.1.1.</span> <span class="nav-text">表现形式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#问题原因"><span class="nav-number">7.3.6.1.2.</span> <span class="nav-text">问题原因</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2、怎么在项目中对线程进行优化？"><span class="nav-number">7.3.6.2.</span> <span class="nav-text">2、怎么在项目中对线程进行优化？</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#核心：线程收敛"><span class="nav-number">7.3.6.2.1.</span> <span class="nav-text">核心：线程收敛</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4、异步初始化"><span class="nav-number">7.4.</span> <span class="nav-text">4、异步初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、核心思想"><span class="nav-number">7.4.1.</span> <span class="nav-text">1、核心思想</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、异步优化注意点"><span class="nav-number">7.4.2.</span> <span class="nav-text">2、异步优化注意点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、异步初始化方案演进"><span class="nav-number">7.4.3.</span> <span class="nav-text">3、异步初始化方案演进</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、异步优化最优解：异步启动器"><span class="nav-number">7.4.4.</span> <span class="nav-text">4、异步优化最优解：异步启动器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#常规异步优化痛点"><span class="nav-number">7.4.4.1.</span> <span class="nav-text">常规异步优化痛点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动器核心思想"><span class="nav-number">7.4.4.2.</span> <span class="nav-text">启动器核心思想</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#启动器流程"><span class="nav-number">7.4.4.3.</span> <span class="nav-text">启动器流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#异步启动器优化实战与源码剖析"><span class="nav-number">7.4.4.4.</span> <span class="nav-text">异步启动器优化实战与源码剖析</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5、延迟初始化"><span class="nav-number">7.5.</span> <span class="nav-text">5、延迟初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、常规方案：利用闪屏页的停留时间进行部分初始化"><span class="nav-number">7.5.1.</span> <span class="nav-text">1、常规方案：利用闪屏页的停留时间进行部分初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、常规初始化痛点"><span class="nav-number">7.5.2.</span> <span class="nav-text">2、常规初始化痛点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、延迟优化最优解：延迟启动器"><span class="nav-number">7.5.3.</span> <span class="nav-text">3、延迟优化最优解：延迟启动器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#核心思想"><span class="nav-number">7.5.3.1.</span> <span class="nav-text">核心思想</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#延迟启动器优化实战与源码剖析"><span class="nav-number">7.5.3.2.</span> <span class="nav-text">延迟启动器优化实战与源码剖析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#延迟启动器优势"><span class="nav-number">7.5.3.3.</span> <span class="nav-text">延迟启动器优势</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6、Multidex预加载优化"><span class="nav-number">7.6.</span> <span class="nav-text">6、Multidex预加载优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、优化步骤"><span class="nav-number">7.6.1.</span> <span class="nav-text">1、优化步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#注意-1"><span class="nav-number">7.6.1.1.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、dex-opt过程是怎样的？"><span class="nav-number">7.6.2.</span> <span class="nav-text">2、dex-opt过程是怎样的？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#那么，inline是什么？"><span class="nav-number">7.6.2.1.</span> <span class="nav-text">那么，inline是什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#inline的作用？"><span class="nav-number">7.6.2.2.</span> <span class="nav-text">inline的作用？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#inline又是如何进行优化的？"><span class="nav-number">7.6.2.3.</span> <span class="nav-text">inline又是如何进行优化的？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对于inline的使用，我们应该注意的问题？"><span class="nav-number">7.6.2.4.</span> <span class="nav-text">对于inline的使用，我们应该注意的问题？</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、抖音BoostMultiDex优化"><span class="nav-number">7.6.3.</span> <span class="nav-text">3、抖音BoostMultiDex优化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7、类预加载优化"><span class="nav-number">7.7.</span> <span class="nav-text">7、类预加载优化</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#如何找到耗时较长的类？"><span class="nav-number">7.7.1.</span> <span class="nav-text">如何找到耗时较长的类？</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#注意-2"><span class="nav-number">7.7.1.1.</span> <span class="nav-text">注意</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8、WebView启动优化"><span class="nav-number">7.8.</span> <span class="nav-text">8、WebView启动优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9、页面数据预加载"><span class="nav-number">7.9.</span> <span class="nav-text">9、页面数据预加载</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10、启动阶段不启动子进程"><span class="nav-number">7.10.</span> <span class="nav-text">10、启动阶段不启动子进程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注意启动顺序"><span class="nav-number">7.10.1.</span> <span class="nav-text">注意启动顺序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11、闪屏页与主页的绘制优化"><span class="nav-number">7.11.</span> <span class="nav-text">11、闪屏页与主页的绘制优化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#参考链接："><span class="nav-number">7.11.0.0.1.</span> <span class="nav-text">参考链接：</span></a></li></ol></li></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">开发者博客</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
